<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Francisco Maia Costa</title>
    <link rel="stylesheet" href="./assets/css2">
    <meta name="description" content="Finance student focused on Financial Analysis, Asset Management, Derivatives, Private Equity, and M&A">
    <style>
        /* CSS Variables for theming */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f8f8;
            --text-primary: #333333;
            --text-secondary: #666666;
            --text-accent: #000000;
            --border-color: rgba(0, 0, 0, 0.1);
            --card-bg: #ffffff;
            --button-bg: #000000;
            --button-text: #ffffff;
            --button-hover: #333333;
            --overlay-bg: rgba(0, 0, 0, 0.45);
            --header-bg: rgba(255, 255, 255, 0.95);
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --text-accent: #ffffff;
            --border-color: rgba(255, 255, 255, 0.1);
            --card-bg: #2d2d2d;
            --button-bg: #ffffff;
            --button-text: #000000;
            --button-hover: #f0f0f0;
            --overlay-bg: rgba(255, 255, 255, 0.15);
            --header-bg: rgba(26, 26, 26, 0.95);
        }

        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            -webkit-text-size-adjust: 100%;
        }

        body {
            font-family: inherit;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg-primary);
            transition: all 0.3s ease;
        }

        /* Header styles */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--header-bg);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 1rem 4vw;
            border-bottom: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .header-inner {
            max-width: 1500px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .header-title a {
            text-decoration: none;
            color: var(--text-accent);
            transition: color 0.3s ease;
        }

        .header-nav {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .header-nav a {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 400;
            transition: color 0.3s ease;
        }

        .header-nav a:hover {
            color: var(--text-secondary);
        }

        .header-nav a[aria-current="page"] {
            font-weight: 500;
            color: var(--text-accent);
        }

        /* Dark mode toggle */
        .theme-toggle {
            background: none;
            border: 2px solid var(--text-primary);
            border-radius: 20px;
            padding: 0.5rem 1rem;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .theme-toggle:hover {
            background: var(--text-primary);
            color: var(--bg-primary);
        }

        /* Mobile menu */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-primary);
            cursor: pointer;
        }

        .mobile-nav {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--header-bg);
            backdrop-filter: blur(10px);
            padding: 1rem;
            border-top: 1px solid var(--border-color);
            flex-direction: column;
            gap: 1rem;
        }
        .mobile-nav a { text-decoration: none; color: var(--text-primary); }
        .mobile-nav a:visited { color: var(--text-primary); }
        .mobile-nav a:hover { color: var(--text-secondary); }

        .mobile-nav.active {
            display: flex;
        }

        @media (max-width: 768px) {
            .header-nav {
                display: none;
            }
            
            .menu-toggle {
                display: block;
            }
        }

        /* Main content */
        main {
            padding-top: 100px;
        }

        .container {
            max-width: 1500px;
            margin: 0 auto;
            padding: 0 4vw;
        }

        /* Section styles */
        .section {
            padding: 4rem 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
        }

        .section-content {
            width: 100%;
            display: grid;
            grid-template-columns: repeat(24, 1fr);
            gap: 1rem;
            align-items: center;
        }

        /* Hero Section */
        .hero-section {
            background-color: var(--bg-primary);
        }

        .hero-image {
            grid-column: 4 / 12;
            justify-self: center;
        }

        .hero-image img {
            width: 100%;
            max-width: 400px;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .hero-content {
            grid-column: 15 / 26;
        }

        .hero-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-accent);
        }

        .hero-text {
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }

        .hero-text:last-of-type {
            margin-bottom: 2rem;
        }

        .cta-button {
            background-color: var(--button-bg);
            color: var(--button-text);
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 25px;
            font-weight: 500;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .cta-button:hover {
            background-color: var(--button-hover);
            transform: translateY(-2px);
        }

        /* Welcome Section */
        .welcome-section {
            background-color: var(--bg-secondary);
            position: relative;
            overflow: hidden;
            min-height: 70vh;
        }

        .welcome-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://images.squarespace-cdn.com/content/v1/68c57d843e170b6a19693f75/01fb6cfb-41af-4f5b-8c99-e1f6c17a0afb/Imagem+WhatsApp+2025-09-13+%C3%A0s+15.37.05_78db821e.jpg');
            background-size: cover;
            background-position: 56.9% 32%;
            opacity: 0.8;
        }

        .welcome-section::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--overlay-bg);
        }

        .welcome-content {
            position: absolute;
            z-index: 2;
            grid-column: 1 / 25;
            text-align: left;
            color: #ffffff;
            bottom: 2rem;
            left: 2rem;
            padding: 1rem 1.25rem;
            max-width: 800px;
        }

        [data-theme="dark"] .welcome-content {
            color: #ffffff;
        }

        .welcome-title {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 2rem;
            line-height: 1.2;
        }

        .welcome-text {
            font-size: 1.1rem;
            line-height: 1.7;
            max-width: 600px;
            margin: 0;
        }

        /* Footer */
        footer {
            background-color: var(--bg-primary);
            padding: 3rem 0;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(24, 1fr);
            gap: 1rem;
            align-items: start;
        }

        .footer-name {
            grid-column: 1 / 12;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: var(--text-accent);
        }

        .footer-explore,
        .footer-follow {
            grid-column-end: span 3;
        }

        .footer-explore {
            grid-column: 20 / 23;
        }

        .footer-follow {
            grid-column: 23 / 26;
        }

        .footer-section h3 {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-accent);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.5rem;
        }

        .footer-section a {
            color: var(--text-primary);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: var(--text-secondary);
        }

        /* Mobile Responsive Design */
        @media (max-width: 1024px) {
            .hero-image {
                grid-column: 2 / 14;
            }
            
            .hero-content {
                grid-column: 15 / 25;
            }

            .welcome-title {
                font-size: 2.8rem;
            }
        }

        @media (max-width: 768px) {
            .section {
                padding: 3rem 0;
                min-height: auto;
            }
            /* Ensure welcome section has enough height on mobile */
            .welcome-section {
                min-height: 60vh;
            }

            .section-content,
            .footer-content {
                grid-template-columns: 1fr;
                gap: 2rem;
                padding: 0 1rem;
            }

            /* Hero section mobile */
            .hero-image,
            .hero-content,
            .footer-name,
            .footer-explore,
            .footer-follow {
                grid-column: 1;
            }

            /* Show hero text above image on mobile */
            .hero-content { order: 1; }
            .hero-image { order: 2; }

            .hero-section .section-content {
                gap: 3rem;
            }

            .hero-title {
                font-size: 1.8rem;
                text-align: center;
            }

            .hero-text {
                text-align: center;
            }

            .cta-button {
                display: block;
                text-align: center;
                margin: 0 auto;
                max-width: 200px;
            }

            /* Welcome section mobile */
            .welcome-content {
                grid-column: 1;
                bottom: 1rem;
                left: 1rem;
                padding: 0.75rem 1rem;
            }

            .welcome-title {
                font-size: 2.2rem;
                margin-bottom: 1.5rem;
            }

            .welcome-text {
                font-size: 1rem;
            }

            /* Header mobile adjustments */
            header {
                padding: 1rem 2vw;
            }

            .header-title {
                font-size: 1.1rem;
            }

            main {
                padding-top: 80px;
            }

            /* Footer mobile */
            .footer-section {
                text-align: center;
                margin-bottom: 2rem;
            }

            .footer-name {
                text-align: center;
                margin-bottom: 3rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 2vw;
            }

            .welcome-title {
                font-size: 1.8rem;
            }

            .hero-title {
                font-size: 1.6rem;
            }

            .theme-toggle {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.8s ease-out forwards;
        }

        .fade-in-delay {
            animation: fadeInUp 0.8s ease-out 0.3s forwards;
            opacity: 0;
        }

        .fade-in-delay-2 {
            animation: fadeInUp 0.8s ease-out 0.6s forwards;
            opacity: 0;
        }

        /* Smooth transitions for theme changes */
        * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        /* Timeline */
        .timeline-wrapper {
            grid-column: 8 / 18;
            justify-self: center;
        }
        
        .timeline-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-accent);
            will-change: transform, opacity;
        }

        .timeline {
            position: relative;
            display: grid;
            grid-auto-rows: max-content;
            gap: 3rem;
            padding-left: 2.25rem; /* room for dots/line */
            /* scroll-driven: allow page to control scrolling */
            max-height: none;
            overflow: visible;
        }

        .timeline-track {
            position: absolute;
            left: 1rem;
            top: 0.5rem;
            bottom: 0.5rem;
            width: 2px;
            background: var(--border-color);
        }

        .timeline-progress {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 0%;
            background: var(--text-accent);
            transition: height 0.2s ease;
        }

        .timeline-item {
            position: relative;
            display: grid;
            grid-template-columns: auto 1fr;
            align-items: start;
            gap: 0.5rem 1rem;
            padding: 0.25rem 0.5rem;
            border-radius: 10px;
            background: transparent;
            border: 1px solid transparent;
            cursor: pointer;
            text-align: left;
            opacity: 0.15;
            transition: opacity 0.25s ease;
        }

        .timeline-item:focus-visible {
            outline: 2px solid var(--text-accent);
            outline-offset: 2px;
        }

        .timeline-item .dot {
            position: absolute;
            left: -1.25rem;
            top: 0.95rem;
            width: 12px;
            height: 12px;
            background: var(--bg-primary);
            border: 3px solid var(--text-accent);
            border-radius: 50%;
            box-shadow: 0 0 0 2px var(--bg-primary);
            transition: transform 0.2s ease, background 0.3s ease, border-color 0.3s ease;
        }

        .timeline-item.active .dot,
        .timeline-item[aria-expanded="true"] .dot {
            transform: scale(1.2);
            background: var(--text-accent);
            border-color: var(--text-accent);
        }

        .timeline-item .year {
            grid-column: 2;
            font-weight: 700;
            color: var(--text-accent);
        }

        .timeline-item .content {
            grid-column: 2;
            color: var(--text-primary);
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transform: translateY(-4px);
            transition: max-height 0.25s ease, opacity 0.2s ease, transform 0.2s ease, background 0.3s ease, border-color 0.3s ease;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 8px;
            padding: 0 0.5rem;
        }

        .timeline-item[aria-expanded="true"] .content {
            max-height: 220px;
            opacity: 1;
            transform: translateY(0);
            background: var(--card-bg);
            border-color: var(--border-color);
            padding: 0.5rem 0.75rem;
        }

        .timeline-item.prev,
        .timeline-item.active,
        .timeline-item.next { opacity: 1; }

        @media (max-width: 1024px) {
            .timeline-wrapper { grid-column: 6 / 20; }
        }

        @media (max-width: 768px) {
            .timeline-wrapper { grid-column: 1; }
            .timeline { max-height: none; }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-inner">
            <div class="header-title">
                <a href="index.html">Francisco Maia Costa</a>
            </div>
            <nav class="header-nav">
                <a href="index.html" aria-current="page">Home</a>
                <a href="curriculum.html">Curriculum</a>
                <a href="projects.html">Projects</a>
                <button class="theme-toggle" id="theme-toggle">
                    <span id="theme-icon">⚫</span>
                    <span id="theme-text">Dark</span>
                </button>
            </nav>
            <button class="menu-toggle" id="menu-toggle">☰</button>
            <nav class="mobile-nav" id="mobile-nav">
                <a href="index.html" aria-current="page">Home</a>
                <a href="curriculum.html">Curriculum</a>
                <a href="projects.html">Projects</a>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <span id="mobile-theme-icon">⚫ </span>
                    <span id="mobile-theme-text">Dark</span>
                </button>
            </nav>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="section hero-section">
            <div class="container">
                <div class="section-content">
                    <div class="hero-image fade-in">
                        <img src="https://images.squarespace-cdn.com/content/v1/68c57d843e170b6a19693f75/392d854c-c436-4299-85f1-0e8a88422707/Imagem+WhatsApp+2025-09-13+%C3%A0s+15.27.44_6e1dfe63.jpg" 
                             alt="Francisco Maia Costa" 
                             loading="lazy">
                    </div>
                    <div class="hero-content">
                        <h1 class="hero-title fade-in-delay">About me</h1>
                        <p class="hero-text fade-in-delay">
                            Highly motivated Finance student with a primary focus on Financial Analysis and Asset Management, complemented by a strong curiosity for Derivatives, Private Equity, and M&A. Through my academic background and experience in both commercial banking and fintech, I have developed a solid analytical mindset, problem-solving skills, and a collaborative approach, qualities that are essential in high-demand and impact-driven environments.
                        </p>
                        <p class="hero-text fade-in-delay">
                            I combine my Finance foundation with technical expertise in Python and automation, applying these skills to advanced financial analysis, portfolio management, and investment processes. My goal is to continuously strengthen these capabilities in order to contribute effectively to value creation and the strategic development of the financial industry.
                        </p>
                        <a href="curriculum.html" class="cta-button fade-in-delay-2">Curriculum</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Welcome Section -->
        <section class="section welcome-section">
            <div class="container">
                <div class="section-content">
                    <div class="welcome-content fade-in">
                        <h2 class="welcome-title">Welcome, this is where you can find all my professional and academic progress</h2>
                        <p class="welcome-text">
                            I'm passionate about exploring the "new age" of finance and sharing my experiences along the way. As a curious and constant learner, I value the wisdom of traditional approaches while embracing modern innovation. To me, progress comes from respecting the old and thoughtfully applying the new, building a smarter and more balanced path forward.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Timeline Section (moved below welcome) -->
        <section class="section" id="timeline">
            <div class="container">
                <div class="section-content">
                    <div class="timeline-wrapper">
                        <h2 class="timeline-title">Timeline</h2>
                        <div class="timeline" role="list">
                            <div class="timeline-track" aria-hidden="true">
                                <div class="timeline-progress" aria-hidden="true"></div>
                            </div>

                            <button class="timeline-item" role="listitem" aria-expanded="false">
                                <span class="dot" aria-hidden="true"></span>
                                <span class="year">2022</span>
                                <span class="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero.</span>
                            </button>

                            <button class="timeline-item" role="listitem" aria-expanded="false">
                                <span class="dot" aria-hidden="true"></span>
                                <span class="year">2023</span>
                                <span class="content">Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet.</span>
                            </button>

                            <button class="timeline-item" role="listitem" aria-expanded="false">
                                <span class="dot" aria-hidden="true"></span>
                                <span class="year">2024</span>
                                <span class="content">Duis sagittis ipsum. Praesent mauris. Fusce nec tellus sed augue semper porta.</span>
                            </button>

                            <button class="timeline-item" role="listitem" aria-expanded="false">
                                <span class="dot" aria-hidden="true"></span>
                                <span class="year">2025</span>
                                <span class="content">Mauris massa. Vestibulum lacinia arcu eget nulla. Class aptent taciti sociosqu.</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <h2 class="footer-name">Francisco Maia Costa</h2>
                <div class="footer-section footer-explore">
                    <h3>Explore</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="curriculum.html">Curriculum</a></li>
                        <li><a href="projects.html">Projects</a></li>
                    </ul>
                </div>
                <div class="footer-section footer-follow">
                    <h3>Follow me</h3>
                    <ul>
                        <li><a href="https://www.linkedin.com/in/francisco-costa-1a2a01246" target="_blank" rel="noopener">LinkedIn</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script>
        // Theme management
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeUI(savedTheme);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeUI(newTheme);
        }

        function updateThemeUI(theme) {
            const icon = theme === 'dark' ? '⚪' : '⚫';
            const text = theme === 'dark' ? 'Light' : 'Dark';
            
            // Update desktop theme toggle
            const themeIcon = document.getElementById('theme-icon');
            const themeText = document.getElementById('theme-text');
            if (themeIcon) themeIcon.textContent = icon;
            if (themeText) themeText.textContent = text;
            
            // Update mobile theme toggle
            const mobileThemeIcon = document.getElementById('mobile-theme-icon');
            const mobileThemeText = document.getElementById('mobile-theme-text');
            if (mobileThemeIcon) mobileThemeIcon.textContent = icon;
            if (mobileThemeText) mobileThemeText.textContent = text;
        }

        // Mobile menu toggle
        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobile-nav');
            const menuToggle = document.getElementById('menu-toggle');
            
            if (mobileNav.classList.contains('active')) {
                mobileNav.classList.remove('active');
                menuToggle.textContent = '☰';
            } else {
                mobileNav.classList.add('active');
                menuToggle.textContent = '✕';
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            
            // Theme toggle listeners
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', toggleTheme);
            }
            
            // Mobile menu listener
            const menuToggle = document.getElementById('menu-toggle');
            if (menuToggle) {
                menuToggle.addEventListener('click', toggleMobileMenu);
            }

            // Close mobile menu when clicking links
            const mobileNavLinks = document.querySelectorAll('.mobile-nav a');
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', () => {
                    const mobileNav = document.getElementById('mobile-nav');
                    const menuToggle = document.getElementById('menu-toggle');
                    mobileNav.classList.remove('active');
                    menuToggle.textContent = '☰';
                });
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(e) {
                const mobileNav = document.getElementById('mobile-nav');
                const menuToggle = document.getElementById('menu-toggle');
                const header = document.querySelector('header');
                
                if (!header.contains(e.target) && mobileNav.classList.contains('active')) {
                    mobileNav.classList.remove('active');
                    menuToggle.textContent = '☰';
                }
            });

            // Timeline interactions (GSAP ScrollTrigger driven)
            const timeline = document.querySelector('.timeline');
            const timelineWrapper = document.querySelector('.timeline-wrapper');
            const timelineSection = document.getElementById('timeline');
            if (timeline && timelineWrapper && timelineSection && window.gsap && window.ScrollTrigger) {
                gsap.registerPlugin(ScrollTrigger);

                const progressEl = timeline.querySelector('.timeline-progress');
                const titleEl = document.querySelector('.timeline-title');
                // Pin the timeline wrapper and animate the progress height
                const items = Array.from(timeline.querySelectorAll('.timeline-item'));
                const estimatedPerItem = 350; // scroll distance per item
                const totalScroll = Math.max(800, items.length * estimatedPerItem);

                gsap.to(progressEl, {
                    height: '100%',
                    ease: 'none',
                    scrollTrigger: {
                        trigger: timelineSection,
                        start: 'center center',
                        end: `+=${totalScroll}`,
                        scrub: true,
                        pin: timelineWrapper,
                        pinSpacing: true,
                        anticipatePin: 2
                    }
                });

                if (titleEl) {
                    gsap.to(titleEl, {
                        opacity: 0,
                        y: -16,
                        ease: 'none',
                        scrollTrigger: {
                            trigger: timelineSection,
                            start: 'center center',
                            end: '+=140',
                            scrub: true
                        }
                    });
                }

                // Ensure only prev, active, next are prominent; do not auto-open cards
                const updateNeighborhood = (activeIndex) => {
                    items.forEach((it, i) => {
                        it.classList.remove('prev', 'active', 'next');
                        if (i === activeIndex - 1) it.classList.add('prev');
                        if (i === activeIndex) it.classList.add('active');
                        if (i === activeIndex + 1) it.classList.add('next');
                        // Do not set aria-expanded here; click controls opening
                    });
                };

                items.forEach((item, index) => {
                    ScrollTrigger.create({
                        trigger: item,
                        start: 'center center',
                        end: 'center center',
                        onEnter: () => updateNeighborhood(index),
                        onEnterBack: () => updateNeighborhood(index),
                    });
                });

                // Click handling remains for opening cards
                items.forEach(item => {
                    item.addEventListener('click', () => {
                        const expanded = item.getAttribute('aria-expanded') === 'true';
                        item.setAttribute('aria-expanded', (!expanded).toString());
                    });
                });
            } else if (timeline) {
                // Fallback: keep click-to-toggle interaction
                const items = timeline.querySelectorAll('.timeline-item');
                items.forEach(item => {
                    item.addEventListener('click', () => {
                        const expanded = item.getAttribute('aria-expanded') === 'true';
                        item.setAttribute('aria-expanded', (!expanded).toString());
                    });
                });
            }
        });

        // Animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                }
            });
        }, observerOptions);

        // Observe elements for animation
        document.querySelectorAll('.fade-in, .fade-in-delay, .fade-in-delay-2').forEach(el => {
            observer.observe(el);
        });

        // Smooth scrolling for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>