"use strict";(globalThis.webpackChunkextract_css=globalThis.webpackChunkextract_css||[]).push([["64379"],{344538:function(T){T.exports={container:"lYIJX2BXRHA1G9YJ",spinner:"n15BE7D52GUHITlt",errorMessage:"NsmOWWHIVwQ21if6",actionContainer:"VCuoJ6mE7iYYQ4U5",actionButton:"nTvkuTYwnapRfxSx X3EJwrsaDywgwtnp Pcv4O7V33jYm_lIT"}},973694:function(T){T.exports={fileField:"b892idBOpnECXxUV",hasImage:"hTx3Krx0ITMHjY24",imageError:"OnOZC9kGycQYGEB9",hidden:"YrJOO29EhJYoNCwd",container:"C8N1vDxCqE1AH24P",buttonLabelContainer:"_WhCJSNbb0UCJeNm",searchImages:"N4mhomkiJbYejzRQ",searchIcon:"w6aYmagW98GlD8XX",removeIcon:"S8MIQSBP3XMHDlQH",description:"DcUcgPDPB2cOpUBg gbgcoLxfl7sXMfEO"}},232503:function(T){T.exports={container:"QHKY0KYBofg26JFd",image:"_2Saz2w3dpU32n0Z"}},715897:function(T){T.exports={container:"QnYtl8AEnmAjIZ0l",errorMessage:"PlbpY9HYgAHyQTAJ",spinner:"FI9em1DQt9Af_mQX",button:"q9k9L6nyLZkqbm0Z X3EJwrsaDywgwtnp Pcv4O7V33jYm_lIT","spinner-extra-large":"Yh1De0P_0r8g2pBw","spinner-xx-large":"ueu3kPcY0BEoyokR"}},953525:function(T){T.exports={container:"wWiBkwFnCfM41koK",inner:"HB2_Wudv17cMr68q"}},610801:function(T){T.exports={container:"QcH2bh2W7sYauXJL",errorMessage:"tjO5XxmvDEmuZy7k",progressBar:"t7vknpmah50xUGJD",button:"K71RAwx3C2EtKPFC X3EJwrsaDywgwtnp Pcv4O7V33jYm_lIT"}},486911:function(T){T.exports={innerContainer:"wA6I0mY5c4Mb5OME",hasErrors:"BFLUM6z_KYO4CGdd",inner:"oJZs__rVhnYt7tHZ","transition-enter":"GEpl7effeX8hn7We","transition-leave":"r35kRvFwb1AFO0e7",fileSelector:"YaYcV_AgTA8eenV3","dropZone-active":"O1HvjSABYVl6Ls0t",label:"drDRPDj6qREqd1bx",icon:"M5cpO4Z_QAzeF2uW",uploadIcon:"AXpnT243SiILnuyM M5cpO4Z_QAzeF2uW h1SoH4V8Ch8Hn00Z",fileIcon:"FbIU5izJVxkia7LM M5cpO4Z_QAzeF2uW h3gP6vyHZ2khBSZG",buttonsContainer:"Q1AVoIhR9xwXFn3E",button:"HaoCvgZvUkCMCqxg qfo4YX0DqoEiY5Sl Pcv4O7V33jYm_lIT"}},423029:function(T,G,e){e.d(G,{Z:()=>z});var V=e(101311),W=e(795478),g=e.n(W),i=e(174161),L=e(845076),b=e.n(L),Y=e(934951),o=e(480433),c=e.n(o),s=e(347560),r=e(522364),m=e(87706),C=e(344538),U=e.n(C);function A(v,F,S){return F in v?Object.defineProperty(v,F,{value:S,enumerable:!0,configurable:!0,writable:!0}):v[F]=S,v}var j;class H extends(j=i.Component){componentDidMount(){this.altActionListener.addActionListener(r.Z.CREATE_ASSET_REFERENCE_SUCCESS,this.handleCreateAssetReferenceSuccess),this.altActionListener.addActionListener(r.Z.CREATE_ASSET_REFERENCE_FAILURE,this.handleCreateAssetReferenceFailure)}componentWillUnmount(){setTimeout(()=>this.altActionListener.removeAllActionListeners(),0)}render(){const{className:F}=this.props,S=b()(U().container,F);return i.createElement("div",{className:S},this.state.isError?this.renderError():this.renderSpinner())}constructor(F){super(F),A(this,"state",{isError:!1}),A(this,"altActionListener",void 0),A(this,"handleCreateAssetReferenceSuccess",S=>{S.systemDataId===this.props.assetId&&setTimeout(()=>this.props.onContentItemCreate(S),0)}),A(this,"handleCreateAssetReferenceFailure",S=>{let{details:y,createAssetReference:$}=S;y.assetId===this.props.assetId&&this.setState({isError:!0,onRetry:$})}),A(this,"clearError",S=>{S.stopPropagation(),this.props.onContentItemFailure()}),A(this,"tryAgain",S=>{S.stopPropagation(),this.state.onRetry(),this.setState({isError:!1,onRetry:null})}),A(this,"renderSpinner",()=>{const{spinnerSize:S}=this.props,y=b()(U().spinner,U()[`spinner-${S}`]);return i.createElement(m.Z,{size:S,className:y})}),A(this,"renderError",()=>[i.createElement("div",{key:"error",className:U().errorMessage},i.createElement(Y.T,{project:"apps.App"},"An Error Occurred")),i.createElement("div",{key:"action",className:U().actionContainer},i.createElement("button",{className:U().actionButton,onClick:this.clearError},i.createElement(Y.T,{project:"apps.App"},"Clear")),i.createElement("button",{className:U().actionButton,onClick:this.tryAgain},i.createElement(Y.T,{project:"apps.App"},"Try Again")))]),this.altActionListener=new(c())(s.Z)}}A(H,"propTypes",{className:g().string,spinnerSize:g().string,assetId:g().string.isRequired,onContentItemCreate:g().func.isRequired,onContentItemFailure:g().func.isRequired}),A(H,"defaultProps",{spinnerSize:"extra-large"});const z=H},814753:function(T,G,e){e.d(G,{Z:()=>Fe});var V=e(374335),W=e.n(V),g=e(522364),i=e(244712),L=e(637635),b=e(191984),Y=e(101311),o=e(174161),c=e(795478),s=e.n(c),r=e(714487),m=e(845076),C=e.n(m),U=e(394470),A=e.n(U),j=e(496518),H=e.n(j),N=e(934951),z=e(365312),v=e(984791),F=e(399800),S=e(965885),y=e(721247),$=e(413981),k=e(392241),w=e(920602),te=e(486911),D=e.n(te),P=e(211568),h=e(607620),I=e(988896),E=e(586745),u=e.n(E),p=e(867826),R=e(707814);function M(x,d,t){return d in x?Object.defineProperty(x,d,{value:t,enumerable:!0,configurable:!0,writable:!0}):x[d]=t,x}const ne={enter:{className:D()["transition-enter"],from:{opacity:0},to:{opacity:1}},leave:{className:D()["transition-leave"],from:{opacity:1},to:{opacity:0}}};var ie;class _ extends(ie=o.Component){static getDerivedStateFromProps(d,t){const n={hasValue:!!d.value};return!d.value&&t.hasValue&&Object.assign(n,{internalUploadToken:null}),n}render(){const{innerContainerClassName:d,innerContainerStyle:t,description:n,children:a,title:f,height:Z,hasErrors:B,...J}=this.props,X=A()(J,Object.keys(_.propTypes)),Q=C()(d,D().innerContainer,{[D().hasErrors]:B}),q={...t};return Z&&(q.paddingTop=Z),o.createElement(S.FieldWrapper,X,f&&o.createElement("div",{className:"u-title"},f),n&&o.createElement("div",{className:"u-description"},n),o.createElement(y.CSSTransitionGroup,{key:"innerContainer",className:Q,wrapChildWithTag:!1,transitions:ne,style:q},this.renderInside()),o.createElement("div",{key:"buttonsContainer",className:D().buttonsContainer},this.renderButtons()),a)}constructor(...d){super(...d),M(this,"state",{fileSelectionActive:!1,internalUploadToken:null}),M(this,"handleFileSelect",t=>{const{onSelect:n}=this.props;if(n)n(t),this.setState({fileSelectionActive:!1});else{const{uploadUrl:a,recordType:f,uploadMode:Z}=this.props,B=(0,I._M)(),J=(0,h.Z)(t,f,Z);z.Z.uploadFile(B,a,J),this.setState({internalUploadToken:B,fileSelectionActive:!1})}}),M(this,"setFileSelectionActive",t=>{this.state.fileSelectionActive!==t&&this.setState({fileSelectionActive:t})}),M(this,"renderLabelAndIcon",(t,n)=>[n&&o.createElement("div",{key:"label",className:D().label},n),o.createElement("div",{key:"icon",className:t})]),M(this,"renderFileSelector",()=>{const{label:t,validMimeTypes:n,maxSize:a}=this.props,{fileSelectionActive:f}=this.state,Z=C()(D().inner,{[D()["dropZone-active"]]:f});return o.createElement($.Z,{key:"dropZone",className:Z,onDrop:this.handleFileSelect,onDragEnter:()=>this.setFileSelectionActive(!0),onDragLeave:()=>this.setFileSelectionActive(!1),validMimeTypes:n,maxSize:a,multiple:!1},o.createElement(k.Z,{className:D().fileSelector,onChange:this.handleFileSelect,validMimeTypes:n,maxSize:a,multiple:!1},this.renderLabelAndIcon(D().uploadIcon,t)))}),M(this,"renderUploadingState",()=>{const{onChange:t,uploadToken:n}=this.props,{internalUploadToken:a}=this.state;return o.createElement(w.Z,{key:"uploading",className:D().inner,uploadToken:n||a,onUploadComplete:t,onUploadIncomplete:()=>this.setState({internalUploadToken:null})})}),M(this,"renderFileThumbnail",()=>{const{fileThumbnailRenderer:t,value:n}=this.props;return o.createElement("div",{key:"thumbnail",className:D().inner},t?t():this.renderLabelAndIcon(D().fileIcon,n.filename))}),M(this,"renderInside",()=>{const{uploadToken:t,value:n}=this.props,{internalUploadToken:a}=this.state;return n?this.renderFileThumbnail():a||t?this.renderUploadingState():this.renderFileSelector()}),M(this,"renderButtons",()=>{const{value:t,onChange:n}=this.props;let a=this.props.buttonConfig;return!a&&t&&(a=[{key:"remove",label:(0,r.t)("Remove",null,{project:"src.shared"}),onClick:()=>n(null)}]),a&&a.map(f=>{let{key:Z,className:B,onClick:J,label:X}=f;return o.createElement("button",{key:Z,className:C()(D().button,B),"data-test":`file-button-${Z}`,onClick:Q=>{Q.stopPropagation(),J(Q)}},X)})})}}M(_,"propTypes",{title:s().string,description:s().string,hasErrors:s().bool,label:s().node,innerContainerClassName:s().string,innerContainerStyle:s().object,height:s().oneOfType([s().number,s().string]),value:s().object,onSelect:s().func,onChange:s().func.isRequired,uploadUrl:s().string.isRequired,recordType:s().oneOf(Object.values(u())).isRequired,uploadMode:s().oneOf(Object.values(p.Z)).isRequired,uploadToken:s().object,validMimeTypes:s().array,maxSize:s().number,fileThumbnailRenderer:s().func,buttonConfig:s().array}),M(_,"defaultProps",{maxSize:R.nq,recordType:u().ATTACHMENT,uploadMode:p.Z.TRANSIENT,uploadUrl:P.ns.FILE,value:null});const le=_;var ce=e(537834),de=e(423029),se=e(962239),pe=e(349865),me=e(435769),he=e(776533),ue=e(973694),K=e.n(ue),ge=e(320110),Ie=e(948265),Se=e.n(Ie),Ce=e(910571),Ee=e(225093),fe=e(62868),ae=e(979825),ve=e(21655);function l(x,d,t){return d in x?Object.defineProperty(x,d,{value:t,enumerable:!0,configurable:!0,writable:!0}):x[d]=t,x}const oe=[],Ue=()=>{},O={Initial:"initial",Upload:"upload",Process:"process",Create:"create",Load:"load"},re={purchasingLicensedImage:!1,imageLoaded:!1,imageError:!1,imageHeight:null,isImageEditorOpen:!1,itemState:O.Initial,item:null,prevItem:null};var Ae;class ee extends(Ae=o.Component){UNSAFE_componentWillReceiveProps(d){const{value:t}=this.props,{value:n}=d;if(n&&n!==t){const a=n.jobId?O.Process:O.Load;this.setState({itemState:a,item:n})}if(n&&t&&n.assetUrl!==t.assetUrl)return this.resetImageLoadStates();if(!n&&t)return this.resetAllStates()}componentDidUpdate(){const{itemState:d,item:t}=this.state;d===O.Load&&!t.assetSource&&t.licensedAssetId&&i.Z.fetch.defer()}renderImageEditor(){const{isImageEditorOpen:d,itemState:t,item:n}=this.state;if(t===O.Load)return o.createElement(Ee.Z,{imageSrc:n.assetUrl,isOpen:d,onCancel:this.handleCancelImageEditor,onSave:this.handleSaveImageEditor})}render(){const{imageHeight:d,imageError:t,item:n}=this.state,{children:a,label:f,height:Z,minHeight:B,maxHeight:J,allowLicensedImage:X,validMimeTypes:Q,maxSize:q,...ye}=this.props,Ze=A()(ye,Object.keys(ee.propTypes)),Re=C()(K().fileField,{[K().hasImage]:n,[K().imageError]:t});return o.createElement(o.Fragment,null,o.createElement(le,{...Ze,className:K().container,label:f||(0,r.t)("Upload an Image",null,{project:"apps.App"}),height:Z||d||J,innerContainerStyle:{minHeight:B,maxHeight:J},innerContainerClassName:Re,fileThumbnailRenderer:this.renderFileThumbnail,buttonConfig:this.getButtonConfig(),validMimeTypes:Q,maxSize:q||R.nq,uploadUrl:P.ns.IMAGE,recordType:u().IMAGE,uploadMode:p.Z.TRANSIENT,onSelect:this.handleFileFieldSelect,onChange:()=>{},value:n},X&&this.renderLicensedImageComponents(),a),this.renderImageEditor())}constructor(...d){super(...d),l(this,"state",re),l(this,"resetAllStates",()=>{this.setState(re)}),l(this,"resetImageLoadStates",()=>{this.setState({imageLoaded:!1,imageError:!1,imageHeight:null})}),l(this,"resetPrevItem",()=>{const{prevItem:t}=this.state;this.setState({itemState:O.Load,prevItem:null,item:t}),this.resetImageLoadStates()}),l(this,"handleFocalPointChange",t=>{let{x:n,y:a}=t;const{item:f}=this.state,{onFocalPointChange:Z,onUpdate:B}=this.props;if(Z)Z({x:n,y:a});else{const J={...f.mediaFocalPoint,x:n,y:a};g.Z.updateField(f.id,"mediaFocalPoint",J),B(f.id)}}),l(this,"handleFileFieldSelect",t=>{const n=(0,I._M)(),a=this.getUploadData(t);this.upload(n,a),this.setState({itemState:O.Upload,item:{uploadToken:n}})}),l(this,"upload",(t,n)=>{const{uploadSource:a}=this.props;if(a){const f=(0,v.Z)(v.U.TRANSIENT_IMAGE);F.Z.uploadFile(t,n,f,a)}else z.Z.uploadFile(t,P.ns.IMAGE,n,a)}),l(this,"handleUploadComplete",t=>{let{data:n}=t;const a=n.contentItem;a?this.handleContentItemCreate(a):this.setState({itemState:O.Process,item:{jobId:n.jobId}})}),l(this,"handleUploadIncomplete",()=>{const{prevItem:t}=this.state;t?this.resetPrevItem():this.resetAllStates()}),l(this,"handleJobComplete",t=>{if(t.contentItemId){const{onJobComplete:n,onUpdate:a}=this.props;(n||a)(t.contentItemId)}else this.setState({itemState:O.Create,item:{assetId:t.assetId}})}),l(this,"handleJobIncomplete",t=>{const{contentItemId:n}=this.props;n?(t===Se().CANCELLED&&g.Z.delete(n),this.requestRemove()):this.resetAllStates()}),l(this,"handleJobProcessingCancel",()=>{const t=this.state.item.jobId;this.props.contentItemId?ae.Z.cancel(t):ae.Z.cancelMediaUploadServiceJob(t)}),l(this,"handleContentItemCreate",t=>{const{prevItem:n}=this.state,{onChange:a,onUpdate:f}=this.props;n&&n.id===t.id?f(n.id):a(t.id)}),l(this,"handleContentItemFailure",()=>{const{prevItem:t}=this.state;t?this.resetPrevItem():this.resetAllStates()}),l(this,"handleImageLoad",(t,n,a)=>{this.setState({imageHeight:a,imageLoaded:!0})}),l(this,"handleImageError",t=>{this.setState({imageError:!0})}),l(this,"requestRemove",()=>{setTimeout(()=>{this.props.onChange(null)},0)}),l(this,"getUploadData",(t,n)=>(0,h.Z)(t,u().IMAGE,p.Z.TRANSIENT,n)),l(this,"uploadFromFileUrl",(t,n)=>{const a=(0,I._M)();z.Z.uploadFromFileUrl(a,P.ns.IMAGE,n),this.setState({itemState:O.Upload,item:{uploadToken:a}})}),l(this,"editImage",()=>{this.props.onClickEdit?this.props.onClickEdit():this.setState({isImageEditorOpen:!0})}),l(this,"handleCancelImageEditor",()=>{this.setState({isImageEditorOpen:!1})}),l(this,"handleSaveImageEditor",t=>{const{item:n}=this.state,a=(0,I._M)(),f=(0,h.Z)(t,u().IMAGE,"transient",{replaceItemId:n.id});this.upload(a,f),this.setState({isImageEditorOpen:!1,itemState:O.Upload,prevItem:n,item:{uploadToken:a}})}),l(this,"handleChooseAssetIds",t=>{let{assetIds:n}=t;this.props.onClosePicker(),(0,fe.Z)(v.U.TRANSIENT_IMAGE,n[0]).then(a=>{g.Z.insert(a),this.handleContentItemCreate(a)})}),l(this,"handleChooseImageUrl",t=>{let{data:n}=t;this.props.onClosePicker(),this.uploadFromFileUrl(n.url,this.getUploadData(n))}),l(this,"handleLicensedImagePurchase",t=>{this.uploadFromFileUrl(t.url,this.getUploadData(t)),this.setState({purchasingLicensedImage:!1})}),l(this,"openLicensedImagePicker",()=>{this.props.onOpenPicker()}),l(this,"getEmptyImageButtonConfig",()=>this.props.allowLicensedImage?[{key:"licensed-image-get",label:o.createElement("span",{className:K().buttonLabelContainer},o.createElement("span",{className:K().searchIcon}),o.createElement(N.T,{project:"apps.App"},"Search For Image")),className:K().searchImages,onClick:this.openLicensedImagePicker}]:oe),l(this,"getPreviewingImageButtonConfig",()=>[{key:"licensed-image-purchase",label:(0,r.t)("License",null,{project:"apps.App"}),onClick:()=>{this.setState({purchasingLicensedImage:!0})}},{key:"remove",label:(0,r.t)("Remove",null,{project:"apps.App"}),onClick:this.requestRemove}]),l(this,"getEditableImageButtonConfig",()=>{const{isEditable:t}=this.props,n=(0,r.t)("Edit Image",null,{project:"apps.App"});return H()([t&&{key:"edit",label:n,onClick:this.editImage},{key:"remove",label:(0,r.t)("Remove",null,{project:"apps.App"}),className:K().removeIcon,onClick:this.requestRemove}])}),l(this,"getButtonConfig",()=>{const{imageLoaded:t,itemState:n,item:a}=this.state,f=[O.Upload,O.Process,O.Create];return n===O.Initial?this.getEmptyImageButtonConfig():f.includes(n)?oe:a.licensedAssetPreview?this.getPreviewingImageButtonConfig():t?this.getEditableImageButtonConfig():[{key:"remove",label:(0,r.t)("Remove",null,{project:"apps.App"}),onClick:this.requestRemove}]}),l(this,"renderImageUploadingState",()=>o.createElement(w.Z,{key:"uploading",uploadToken:this.state.item.uploadToken,onUploadComplete:this.handleUploadComplete,onUploadIncomplete:this.handleUploadIncomplete})),l(this,"renderImageJobProcessingState",()=>o.createElement(ce.Z,{key:"processing",jobId:this.state.item.jobId,onJobComplete:this.handleJobComplete,onJobIncomplete:this.handleJobIncomplete,onRequestCancel:this.handleJobProcessingCancel})),l(this,"renderImageContentItemCreatingState",()=>o.createElement(de.Z,{key:"contentItemCreating",assetId:this.state.item.assetId,onContentItemCreate:this.handleContentItemCreate,onContentItemFailure:this.handleContentItemFailure})),l(this,"getFocalPoint",()=>{const{item:t}=this.state,{focalPointOverride:n}=this.props,{mediaFocalPoint:a={}}=t;return n||a}),l(this,"renderImage",()=>{const{imageLoaded:t,item:n}=this.state,{isFocalPointEditable:a}=this.props,{assetUrl:f,originalSize:Z,systemDataVariants:B}=n,J=this.getFocalPoint(),X=B?B.replace(Z+",",""):null;return a?o.createElement(se.Z,{ref:Q=>{this.imgNode=Q},onLoad:this.handleImageLoad,onError:this.handleImageError,src:f,originalSize:Z,formattedWidths:X},o.createElement(pe.Z,{visible:t,onChange:this.handleFocalPointChange,imageNodeGetter:()=>this.imgNode,x:J.x,y:J.y})):o.createElement(se.Z,{key:"image",onLoad:this.handleImageLoad,onError:this.handleImageError,src:f,originalSize:Z,formattedWidths:X})}),l(this,"renderLicensedImageComponents",()=>{const{imageDestination:t}=this.props,{purchasingLicensedImage:n,itemState:a,item:f}=this.state;if(a===O.Initial)return o.createElement(me.Z,{onChooseAssetIds:this.handleChooseAssetIds,onChooseImageUrl:this.handleChooseImageUrl,assetDestination:t,isOpen:this.props.isPickerOpen,onRequestClose:this.props.onClosePicker});const{assetUrl:Z,licensedAssetId:B,licensedAssetPreview:J,licensedAssetOriginUrl:X,showGettyLicenseText:Q}=f;if(J)return[o.createElement(he.Z,{key:"licensed-image-purchase-modal",assetPreview:J,previewUrl:Z,isOpen:n,onRequestClose:()=>this.setState({purchasingLicensedImage:!1}),onPurchaseSuccess:this.handleLicensedImagePurchase}),o.createElement("div",{key:"licensed-image-preview-desc",className:K().description},o.createElement(N.T,{project:"apps.App"},"This is an unlicensed preview image. To purchase its license, click on the license button above. Watermarks will be removed after purchase."))];if(B&&Q){const q=o.createElement("a",{href:X,target:"_blank"},o.createElement(N.T,{project:"apps.App",notes:"Text link"},"here"));return o.createElement("div",{className:K().description},o.createElement(N.T,{textLink:q,project:"apps.App"},"This is a licensed image. Click {textLink} to review licensing options for print, social, and more."))}}),l(this,"renderFileThumbnail",()=>{const{itemState:t}=this.state;switch(t){case O.Upload:return this.renderImageUploadingState();case O.Process:return this.renderImageJobProcessingState();case O.Create:return this.renderImageContentItemCreatingState();default:return this.renderImage()}})}}l(ee,"propTypes",{label:s().string,height:s().oneOfType([s().number,s().string]),minHeight:s().number,maxHeight:s().number,contentItemId:s().string,imageDestination:s().oneOf(Object.values(ge.Z)),value:s().object,onChange:s().func.isRequired,onUpdate:s().func,onJobComplete:s().func,maxSize:s().number,allowLicensedImage:s().bool,isFocalPointEditable:s().bool,isEditable:s().bool,validMimeTypes:s().array,onClickEdit:s().func,onFocalPointChange:s().func,focalPointOverride:s().shape({x:s().number,y:s().number})}),l(ee,"defaultProps",{allowLicensedImage:!0,isEditable:!0,isFocalPointEditable:!0,maxHeight:330,minHeight:22,onUpdate:Ue,validMimeTypes:Ce.K});const Pe=(0,ve.S)(ee);var Te=e(854129),Le=e.n(Te);const Fe=W()({getStores(){return[L.Z,b.Z]},getPropsFromStores(x){let d=null;if(x.contentItemId){const t=L.Z.getState().get(x.contentItemId);if(t&&(d=t.toJS(),d.licensedAssetId)){const n=b.Z.getOriginUrlFromId(d.licensedAssetId)||"",a=b.Z.getAssetTypeFromId(d.licensedAssetId)||"";d.assetSource=b.Z.getAssetTypeFromId(d.licensedAssetId)||null,d.licensedAssetOriginUrl=n,d.showGettyLicenseText=a===Le().GETTY}}return{value:d}},componentDidConnect(x){x.contentItemId&&!L.Z.getState().get(x.contentItemId)&&g.Z.read.defer(x.contentItemId),i.Z.fetch.defer()}},Pe)},399800:function(T,G,e){e.d(G,{Z:()=>o});var V=e(640695),W=e(365312),g=e(979825),i=e(522364),L=e(35045);function b(c,s,r){return s in c?Object.defineProperty(c,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):c[s]=r,c}class Y{uploadFile(s,r,m,C){const U=this.getUploadParams();return this.uploads.push({token:s,data:r,assetReferenceUrl:m}),W.Z.uploadFileToMediaUploadService(s,r,U,C)}uploadFiles(s,r,m,C){const U=this.getUploadParams();return this.uploads=this.uploads.concat(r.map((A,j)=>({token:s[j],data:A,assetReferenceUrl:m}))),W.Z.uploadFilesToMediaUploadService.defer(s,r,U,C)}createAssetReference(s){const{uploadToken:r,libraryId:m,assetId:C}=s,{data:U,assetReferenceUrl:A}=this.uploads.find(y=>y.token===r),{collectionId:j,index:H,recordType:N,replaceItemId:z,publicAsset:v,assetUsageType:F}=U,S={libraryId:m,assetId:C,collectionId:j,index:H,recordType:N,replaceItemId:z,publicAsset:v,assetUsageType:F};return this.uploads=this.uploads.filter(y=>y.token!==r),i.Z.createAssetReference(A,S,r)}getUploadParams(){const s=L.default.getState().id,r=L.default.getState().imageMetadataProcessingEnabled;return{websiteId:s,retainMetadata:r}}constructor(){b(this,"uploads",[]),V.Z.addActionListener(g.Z.MEDIA_UPLOAD_SERVICE_JOB_SUCCESS,s=>this.createAssetReference(s))}}const o=new Y},537834:function(T,G,e){e.d(G,{Z:()=>I});var V=e(101311),W=e(795478),g=e.n(W),i=e(174161),L=e(374335),b=e.n(L),Y=e(845076),o=e.n(Y),c=e(962239),s=e(979825),r=e(704761),m=e(860921),C=e.n(m),U=e(714487),A=e(934951),j=e(87706),H=e(948265),N=e.n(H),z=e(715897),v=e.n(z);function F(E,u,p){return u in E?Object.defineProperty(E,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):E[u]=p,E}var S;class y extends(S=i.Component){componentDidMount(){const{status:u,onJobComplete:p,data:R}=this.props;u===N().SUCCESS&&p(R)}componentDidUpdate(u,p){const{status:R,onJobComplete:M,data:ne}=this.props;R!==u.status&&R===N().SUCCESS&&setTimeout(()=>M(ne),0)}render(){const{status:u,className:p}=this.props,R=o()(v().container,p);return i.createElement("div",{className:R},u===N().FAILURE?this.renderError():this.renderSpinner())}constructor(...u){super(...u),F(this,"cancelUpload",p=>{const{requestCancel:R,onJobIncomplete:M}=this.props;p.stopPropagation(),R(),M(N().CANCELLED)}),F(this,"clearError",p=>{p.stopPropagation(),this.props.onJobIncomplete(this.props.status)}),F(this,"renderSpinner",()=>{const{spinnerSize:p,cancelable:R}=this.props,M=o()(v().spinner,v()[`spinner-${p}`]);return[i.createElement(j.Z,{key:"spinner",size:p,className:M}),R&&i.createElement("button",{key:"cancel",className:v().button,onClick:this.cancelUpload},i.createElement(A.T,{project:"src.shared"},"Cancel"))]}),F(this,"renderError",()=>{const{messages:p}=this.props,R=p&&p[0];return[i.createElement("div",{key:"error",className:v().errorMessage},R||(0,U.t)("Processing Error",null,{project:"src.shared"})),i.createElement("button",{key:"clear",className:v().button,onClick:this.clearError},i.createElement(A.T,{project:"src.shared"},"Clear"))]})}}F(y,"propTypes",{status:g().number,messages:g().array,data:g().object,spinnerSize:g().string,cancelable:g().bool,requestCancel:g().func,onJobComplete:g().func.isRequired,onJobIncomplete:g().func.isRequired}),F(y,"defaultProps",{cancelable:!0,onJobComplete:C(),onJobIncomplete:C(),requestCancel:C(),spinnerSize:"extra-large",status:N().WAITING});const $=y;var k=e(232503),w=e.n(k);function te(E,u,p){return u in E?Object.defineProperty(E,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):E[u]=p,E}var D,P;const I=b()({getStores(){return[r.Z]},getPropsFromStores(E){const{jobId:u,onRequestCancel:p}=E,R=p||(()=>s.Z.cancel(u));return{...r.Z.getState()[u],requestCancel:R}}},(P=class extends(D=i.Component){render(){const{className:E,interimFileData:u,interimFileUrl:p,...R}=this.props;return i.createElement("div",{className:o()(E,w().container)},i.createElement(c.Z,{className:w().image,fileData:u,src:p,formattedWidths:null}),i.createElement($,R))}},te(P,"propTypes",{className:g().string,interimFileData:g().object,interimFileUrl:g().string,onRequestCancel:g().func}),P))},920602:function(T,G,e){e.d(G,{Z:()=>D});var V=e(374335),W=e.n(V),g=e(365312),i=e(42677),L=e(845076),b=e.n(L),Y=e(795478),o=e.n(Y),c=e(174161),s=e(860921),r=e.n(s),m=e(714487),C=e(934951),U=e(953525),A=e.n(U);function j(P,h,I){return h in P?Object.defineProperty(P,h,{value:I,enumerable:!0,configurable:!0,writable:!0}):P[h]=I,P}var H;class N extends(H=c.Component){componentDidMount(){this.props.delay>0&&this.initDelayTimeout()}componentWillUnmount(){this.delayTimer&&clearTimeout(this.delayTimer)}render(){const h={width:`${this.props.progress}%`};return this.state.visible?c.createElement("div",{className:b()(this.props.className,A().container)},c.createElement("div",{className:A().inner,style:h})):null}constructor(...h){super(...h),j(this,"state",{visible:this.props.delay===0}),j(this,"initDelayTimeout",()=>{this.delayTimer=setTimeout(()=>{this.setState({visible:!0})},this.props.delay)})}}j(N,"propTypes",{progress:o().number.isRequired,delay:o().number.isRequired}),j(N,"defaultProps",{delay:500});const z=N;var v=e(83736),F=e(610801),S=e.n(F);function y(P,h,I){return h in P?Object.defineProperty(P,h,{value:I,enumerable:!0,configurable:!0,writable:!0}):P[h]=I,P}var $;class k extends($=c.Component){componentDidMount(){const{status:h,onUploadComplete:I,data:E}=this.props;h===v.Z.SUCCESS&&I({...E})}componentDidUpdate(h,I){const{status:E,onUploadComplete:u,data:p}=this.props;E!==h.status&&E===v.Z.SUCCESS&&setTimeout(()=>u({...p}),0)}componentWillUnmount(){const{status:h,requestCancel:I}=this.props;setTimeout(()=>{(h===v.Z.WAITING||h===v.Z.UPLOADING)&&I()},0)}render(){const{status:h,className:I}=this.props,E=b()(S().container,I);return c.createElement("div",{className:E},h===v.Z.FAILURE?this.renderError():this.renderProgressBar())}constructor(...h){super(...h),y(this,"cancelUpload",()=>{const{requestCancel:I,onUploadIncomplete:E}=this.props;I(),E(v.Z.CANCELED)}),y(this,"clearError",()=>{const{onUploadIncomplete:I,status:E,uploadToken:u}=this.props;I(E,u)}),y(this,"renderProgressBar",()=>{const{percent:I}=this.props;return[c.createElement(z,{key:"progressBar",className:S().progressBar,progress:I}),c.createElement("button",{key:"cancel",className:S().button,onClick:this.cancelUpload},c.createElement(C.T,{project:"src.shared"},"Cancel"))]}),y(this,"renderError",()=>{const{error:I}=this.props;return[c.createElement("div",{key:"error",className:S().errorMessage},I||(0,m.t)("Upload Error",null,{project:"src.shared"})),c.createElement("button",{key:"clear",className:S().button,onClick:this.clearError},c.createElement(C.T,{project:"src.shared"},"Clear"))]})}}y(k,"propTypes",{status:o().number,percent:o().number,error:o().string,data:o().object,uploadToken:o().object.isRequired,requestCancel:o().func,onUploadComplete:o().func.isRequired,onUploadIncomplete:o().func.isRequired}),y(k,"defaultProps",{onUploadComplete:r(),onUploadIncomplete:r(),percent:0,requestCancel:r(),status:v.Z.WAITING});const w=k,D=W()({getStores(){return[i.Z]},getPropsFromStores(P){let{uploadToken:h}=P;const I=h.getId();return{...i.Z.getState()[I],requestCancel:()=>{g.Z.cancelUpload(h)}}}},w)},83736:function(T,G,e){e.d(G,{Z:()=>W});const W={WAITING:1,UPLOADING:2,SUCCESS:3,FAILURE:4,CANCELED:5}},42677:function(T,G,e){e.d(G,{Z:()=>Y});var V=e(347560),W=e(322470),g=e.n(W),i=e(365312),L=e(83736);class b{onSingleUploadStart(c){let{token:s,data:r}=c;const m=s.getId();this.state[m]||this.setState({[m]:{file:r.Filedata,token:s,status:L.Z.WAITING,percent:0,data:g()(r,["collectionId","parentId","replaceItemId","index"])}})}onMultiUploadStart(c){this.setState(c.reduce((s,r)=>{let{token:m,data:C}=r;const U=m.getId();return s[U]={file:C.Filedata,token:m,status:L.Z.WAITING,percent:0,data:{collectionId:C.collectionId,parentId:C.parentId,replaceItemId:C.replaceItemId,index:C.index}},s},{}))}onUploadProgress(c){let{token:s,percent:r}=c;const m=s.getId();this.setState({[m]:{...this.state[m],status:L.Z.UPLOADING,percent:r}})}onUploadSuccess(c){let{token:s,data:r}=c;const m=s.getId();this.setState({[m]:{...this.state[m],file:null,status:L.Z.SUCCESS,percent:100,data:{...this.state[m].data,data:r}}})}onUploadFailure(c){let{token:s,error:r}=c;const m=s.getId();this.setState({[m]:{...this.state[m],file:null,status:L.Z.FAILURE,error:r}})}onCancelUpload(c){const s=c.getId();this.setState({[s]:{...this.state[s],file:null,status:L.Z.CANCELED}})}getCurrentUploadsForCollection(c){const{WAITING:s,UPLOADING:r,FAILURE:m}=L.Z,C=[s,r,m];return Object.values(this.getState()).filter(U=>U&&U.data.collectionId===c&&C.indexOf(U.status)>-1)}constructor(){this.state={},this.bindListeners({onSingleUploadStart:[i.Z.UPLOAD_FILE_TO_MEDIA_UPLOAD_SERVICE,i.Z.UPLOAD_FILE,i.Z.UPLOAD_FROM_FILE_URL],onMultiUploadStart:[i.Z.UPLOAD_FILES_TO_MEDIA_UPLOAD_SERVICE,i.Z.UPLOAD_FILES],onUploadProgress:i.Z.UPLOAD_PROGRESS,onUploadSuccess:[i.Z.MEDIA_UPLOAD_SERVICE_UPLOAD_SUCCESS,i.Z.UPLOAD_SUCCESS],onUploadFailure:[i.Z.MEDIA_UPLOAD_SERVICE_UPLOAD_FAILURE,i.Z.UPLOAD_FAILURE],onCancelUpload:i.Z.CANCEL_UPLOAD}),this.exportPublicMethods({getCurrentUploadsForCollection:this.getCurrentUploadsForCollection})}}const Y=V.Z.createStore(b,"UploadStore")}}]);

//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/sourcemaps/06c3ba98238af60b/64379-ab246a10d450705f-min.en-US.js.map