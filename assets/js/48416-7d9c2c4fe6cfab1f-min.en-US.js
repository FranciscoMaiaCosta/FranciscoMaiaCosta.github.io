"use strict";(globalThis.webpackChunkextract_css=globalThis.webpackChunkextract_css||[]).push([["48416"],{421591:function(I){I.exports={annotationButton:"hm32VHaNxwEFG4i4"}},743357:function(I){I.exports={card:"CWoxVNq8j0cY_3BT",clickable:"yoGXOwc3M00JO88n",cardActive:"xN1JVN_MOQA5akmD",editButton:"p5hgKRJWkM8Pw5CL",hoverable:"CtMcjFo6WigR0B6N",cardWithEditButton:"h6m0xM1oniAanQMg",largeSample:"k00MOFcmMmLVYlao",smallSample:"xm5f_M1YAAIT8Um5",editButtonIcon:"okP8t8kkalkTBYmS"}},178543:function(I,C,t){t.d(C,{Z:()=>l});var o=t(174161),f=t(651780);const l=function(){let{isReadyToExtend:d=!0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const[g,m]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{(async()=>{if(d)try{const E=await(0,f.Zo)();m(E)}catch{}})()},[d]),g}},517177:function(I,C,t){t.d(C,{Bi:()=>e,I9:()=>M,MC:()=>E,Pu:()=>y,WR:()=>D,sb:()=>c,t5:()=>s,t9:()=>v,tX:()=>m});var o=t(396303);const f=()=>({pageSections:{sectionCreated:null,sectionDeleted:null,sectionWillChange:null,sectionDidChange:null,requestSectionRteConfigs:null},collectionItemSections:{sectionCreated:null,sectionDeleted:null,sectionWillChange:null,sectionDidChange:null},footerSections:{sectionCreated:null,sectionDeleted:null,sectionWillChange:null,sectionDidChange:null,requestSectionRteConfigs:null},header:{sectionWillChange:null,sectionDidChange:null},catalogSections:{catalogSectionsChanged:null}});let u=f();const l={pageSections:o.Z.PAGE_SECTIONS,collectionItemSections:o.Z.COLLECTION_ITEM_SECTIONS,footerSections:o.Z.FOOTER_SECTIONS,header:o.Z.HEADER_SECTION},d=Object.fromEntries(Object.entries(l).map(n=>{let[r,L]=n;return[L,r]})),g=n=>u[d[n]]??null;function m(n,r){r.SQSSectionEvents||(r.SQSSectionEvents={registerListeners:(L,A)=>{u[L]=A,L in l&&h(l[L])}},n.once("beforeunload",()=>{u=f(),p()}),n.fire("SQSSectionEvents:ready"))}function D(n){const r=g(n);for(var L=arguments.length,A=new Array(L>1?L-1:0),P=1;P<L;P++)A[P-1]=arguments[P];return r?!("sectionCreated"in r)||typeof r.sectionCreated!="function"?(console.error("Failed to trigger section created event, missing lifecycle function.",n,...A),null):r.sectionCreated(...A):(console.error(`Failed to trigger section created event, unsupported area: ${n}`,...A),null)}function E(n){const r=g(n);for(var L=arguments.length,A=new Array(L>1?L-1:0),P=1;P<L;P++)A[P-1]=arguments[P];if(!r)return console.error(`Failed to trigger section deleted event, unsupported area: ${n}`,...A),null;if(!("sectionDeleted"in r)||typeof r.sectionDeleted!="function")return console.error("Failed to trigger section deleted event, missing lifecycle function.",n,...A),null;r.sectionDeleted(...A)}function M(n){const r=g(n);for(var L=arguments.length,A=new Array(L>1?L-1:0),P=1;P<L;P++)A[P-1]=arguments[P];return r?!("sectionWillChange"in r)||typeof r.sectionWillChange!="function"?(console.error("Failed to trigger section will change event, missing lifecycle function.",...A),null):!r.sectionWillChange(...A):(console.error(`Failed to trigger section will change event, unsupported area: ${n}`,...A),null)}function v(n){const r=g(n);for(var L=arguments.length,A=new Array(L>1?L-1:0),P=1;P<L;P++)A[P-1]=arguments[P];return r?typeof r.sectionDidChange!="function"?(console.error("Failed to trigger section did change event, missing lifecycle function.",n,...A),null):r.sectionDidChange(...A):(console.error(`Failed to trigger section did change event, unsupported area: ${n}`,...A),null)}function e(n){const r=g(n);for(var L=arguments.length,A=new Array(L>1?L-1:0),P=1;P<L;P++)A[P-1]=arguments[P];return r?!("requestSectionRteConfigs"in r)||typeof r.requestSectionRteConfigs!="function"?(console.error("Failed to trigger request section RTE configs event, missing lifecycle function.",n,...A),null):r.requestSectionRteConfigs(...A):(console.error(`Failed to trigger request section RTE configs event, unsupported area: ${n}`,...A),null)}function s(n){const r=u.catalogSections;if(typeof r.catalogSectionsChanged!="function")return console.error("Failed to trigger catalog sections change event, missing lifecycle function."),null;r.catalogSectionsChanged(n)}const i={},_=new Set;function c(n){return _.has(n)}function y(n,r){return i[n]??=new Set,i[n].add(r),()=>{var L;(L=i[n])===null||L===void 0||L.delete(r)}}function h(n){var r;_.add(n),(r=i[n])===null||r===void 0||r.forEach(L=>L()),delete i[n]}function p(){_.clear();for(const n of Object.getOwnPropertyNames(i))delete i[n]}},198082:function(I,C,t){t.d(C,{H:()=>o,r:()=>f});let o=function(u){return u.NORMAL="normal",u.ITALIC="italic",u}({}),f=function(u){return u.LATIN="latin",u.JAPANESE="japanese",u}({})},249260:function(I,C,t){t.d(C,{Z:()=>f});const f={TOP_LEFT:"TOP_LEFT",TOP_CENTER:"TOP_CENTER",TOP_RIGHT:"TOP_RIGHT",CENTER_LEFT:"CENTER_LEFT",CENTER_CENTER:"CENTER_CENTER",CENTER_RIGHT:"CENTER_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_CENTER:"BOTTOM_CENTER",BOTTOM_RIGHT:"BOTTOM_RIGHT"}},129931:function(I,C,t){t.d(C,{Z:()=>M});var o=t(714487),f=t(419467),u=t.n(f),l=t(368021),d=t.n(l),g=t(249260),m=t(980995);function D(v,e,s){return e in v?Object.defineProperty(v,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):v[e]=s,v}class E extends m.Z{destroy(){super.destroy(),this.YUIEventListeners=[],this.disabledLinks=[]}getId(){return this.Y.stamp(this.state.rootNode)}getOverlayEditorAlignPoint(){const e=this.state.rootNode.getDOMNode(),s=e&&e.getAttribute("data-annotation-alignment");if(!d()(s)||s.length===0)return null;const i={top:s.includes("top"),left:s.includes("left"),center:s.includes("center"),right:s.includes("right"),bottom:s.includes("bottom")};if(i.top){if(i.left)return g.Z.TOP_LEFT;if(i.right)return g.Z.TOP_RIGHT;if(i.center)return g.Z.TOP_CENTER}else if(i.bottom){if(i.left)return g.Z.BOTTOM_LEFT;if(i.right)return g.Z.BOTTOM_RIGHT;if(i.center)return g.Z.BOTTOM_CENTER}return null}hasPermission(){return!0}getClassificationLabel(){return"Base"}getActionList(){return[]}syncScroll(e){if(!e){this.set("scrollLayoutOnEditingStart",null);return}const s=this.state.rootNode.getDOMNode();if(!s)return;const i=s.querySelectorAll(".sqs-block");if(!this.preview)throw new Error("syncScroll called in annotation controller when this.preview was null");const _=this.preview.window.innerHeight,c=Array.from(i).find(y=>{const h=y.getBoundingClientRect(),p=Math.min(_,h.bottom)-Math.max(0,h.top),n=h.top>=0,r=p>=_;return h.height>0&&(n||r)})||i[i.length-1];c&&this.set("scrollLayoutOnEditingStart",{anchorNodeId:c.getAttribute("id"),anchorNodeOffsetTop:c.getBoundingClientRect().top})}setLayoutNodeHeight(e){if(this.state.rootNode)if(e){const s=this.state.rootNode.getDOMNode();if(!s)throw new Error("No root node found in setLayoutNodeHeight");const i=s.getBoundingClientRect().height;s.style.minHeight=i+"px"}else this.clearLayoutNodeHeight()}clearLayoutNodeHeight(){if(!this.state.rootNode)return;const e=this.state.rootNode.getDOMNode();if(!e)throw new Error("No root node found in setLayoutNodeHeight");e.style.minHeight=""}disableLinkNavigation(){const e=this.state.rootNode.getDOMNode();if(!e)throw new Error("this.state.rootNode.getDOMNode() returned null in disableLinkNavigation");this.disabledLinks=Array.from(e.querySelectorAll("a[href]")),this.disabledLinks.map(s=>s.addEventListener("click",this.haltEvent))}reenableLinkNavigation(){this.disabledLinks.map(e=>e.removeEventListener("click",this.haltEvent)),this.disabledLinks=[]}haltEvent(e){e.stopPropagation(),e.preventDefault()}registerYUIEventListener(e){this.YUIEventListeners.push(e)}destroyEvents(){super.destroyEvents(),this.YUIEventListeners.forEach(e=>e.detach())}_invokeOnModelPromise(e){const s=new Promise((i,_)=>{const c=this.state.model;(0,f.get)(c,e)?c[e](p=>{p?_(p):i()}):i()});return s.then(()=>this.set("dirty",!1)),s.catch(i=>{const _=(0,f.get)(i,"responseJSON.message",i);return new this.Y.Squarespace.Widgets.Alert({"strings.title":(0,o.t)("Error Saving",null,{project:"apps.App"}),"strings.message":_||(0,o.t)("Please try saving again.",null,{project:"apps.App"})})}),s}revert(){return this._invokeOnModelPromise("load")}save(){return this._invokeOnModelPromise("save")}constructor(...e){super(...e),D(this,"YUIEventListeners",[]),D(this,"disabledLinks",[])}}const M=E},749584:function(I,C,t){t.d(C,{Z:()=>c});var o=t(714487),f=t(419467),u=t.n(f),l=t(413019),d=t(770500),g=t.n(d),m=t(69637),D=t(337061),E=t(217528),M=t(779904),v=t(938077),e=t(834935),s=t(129931);function i(y,h,p){return h in y?Object.defineProperty(y,h,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[h]=p,y}const _="enter-edit-mode";class c extends s.Z{afterEditableChange(h){this.syncScroll(h),this.setLayoutNodeHeight(h),this.renderEditor(),this.setLayoutNodeHeight(),this.syncEditorOverlay(),h&&(this.set("startupBlockId",null),(0,l.L8)(_,{tracer:m.Z}))}handleDblClick(h){if(h.halt(),!this.state.visible||this.state.editable)return;const{target:p}=h,n=p.hasClass(".sqs-block")?p:p.ancestor(".sqs-block");n&&this.set("startupBlockId",n.getAttribute("id")),this.enterEditMode()}enterEditMode(){(0,l.B1)(_,{tracer:m.Z}),this.state.model?this.set("editable",!0):this.initModel(()=>this.set("editable",!0))}initModel(h){const p=(0,f.isFunction)(h)?h:()=>{};if(this.state.model){p.call(this);return}if(this.state.isModelLoading){this.addAfterChangeHandler("isModelLoading",p);return}this.set("isModelLoading",!0),this.loadModel(()=>{this.set("isModelLoading",!1),p.call(this)})}loadModel(h){throw new Error("LayoutBase#loadModel not implemented.")}revert(){const h=super.revert();return h.then(()=>{this.layoutEditorInstance&&this.layoutEditorInstance.setDirtyLayoutData(!1),this.renderEditor()}),h}save(){const h=super.save();return h.then(()=>{this.layoutEditorInstance&&this.layoutEditorInstance.setDirtyLayoutData(!1)}),h}getPageLayout(){if(!this.state.model)throw new Error("No mdoel on LayoutBaseAnnotationController");return this.state.model.get("data").get("layout")}renderEditor(){if(this.layoutEditorInstance&&(this.layoutEditorInstance.destroy(),this.layoutEditorInstance=null),this.state.editable){const h=this.getPageLayout(),{collection:p}=this.state;p&&h.set("collectionId",p.get("id")),this.layoutEditorInstance=new e.Z(this.Y,{hostNode:this.state.rootNode.getDOMNode(),pageLayout:h,startupBlockId:this.state.startupBlockId}),this.layoutEditorInstance.addDirtyLayoutDataHandler(n=>{this.syncEditorOverlay(),this.set("dirty",n)})}}trackEditClick(){}getActionList(){return[{name:"edit",label:(0,o.t)("Edit",null,{project:"apps.App"}),handleClick:()=>{this.trackEditClick(),this.enterEditMode()}}]}getClassificationLabel(){return this.state.rootNode.getAttribute("data-layout-label")||null}syncEditorOverlay(){var h,p;if(!this.state.editable)return M.Z.hideEditorOverlay();const n=[{name:"save",label:(0,o.t)("Save",null,{project:"apps.App"}),handleClick:()=>this.props.fireRequestSaveChangesEvent()},{name:"cancel",label:(0,o.t)("Cancel",null,{project:"apps.App"}),handleClick:()=>this.props.fireRequestDiscardChangesEvent()}],r=this.state.rootNode.getDOMNode();if(!r)throw new Error("No root node found in LayoutBaseAnnotationController");if(!r.classList.contains("sqs-locked-layout")){const L=(0,D.d6)(),A=(0,v.FWA)(g().TUTORIAL_ADD_BLOCK_BUTTON)(L),P=(0,o.t)("Add Block",null,{project:"apps.App"});n.push({name:"add",label:A?"":P,title:P,className:"sqs-float-right sqs-annotation-add-block-button",icon:A,handleClick:S=>{(0,D.GE)((0,E.ic)(g().TUTORIAL_ADD_BLOCK_BUTTON)),this.showAddBlockMenu(S)}})}M.Z.showEditorOverlay({buttons:n,hostNode:this.state.rootNode.getDOMNode(),instrumentationDescription:((h=this.getClassificationLabel())===null||h===void 0?void 0:h.trim())??"",label:(0,o.t)("Editing &lsquo;{sub1}&rsquo;",{sub1:((p=this.getClassificationLabel())===null||p===void 0?void 0:p.trim())??""},{project:"apps.App"}),scrollLayoutOnEditingStart:this.state.scrollLayoutOnEditingStart})}showAddBlockMenu(h){this.layoutEditorInstance&&this.layoutEditorInstance.showAddBlockMenu({align:{node:this.Y.one(h.target),points:[this.Y.WidgetPositionAlign.TC,this.Y.WidgetPositionAlign.TR]},layoutNode:this.state.rootNode})}constructor(h,p){const n={model:null,isModelLoading:!1,columns:null,instrumentationDescription:""},r=(0,f.merge)({},n,p);super(h,r),i(this,"layoutEditorInstance",null),this.addAfterChangeHandler("editable",this.afterEditableChange),this.registerYUIEventListener(this.state.rootNode.delegate("dblclick",this.handleDblClick,".sqs-block",this))}}},834935:function(I,C,t){t.d(C,{Z:()=>M});var o=t(714487),f=t(770500),u=t.n(f),l=t(916661),d=t(337061),g=t(217528),m=t(938077),D=t(570163),E=t(104495);class M{getEditMode(){return!l.Z.isSevenOne()||this.hostNode.getAttribute("data-type")==="item"?null:E.Z.SECTION}destroy(){this.dirtyLayoutDataChangeHandler=null,this.onBlockRemoveRequestHandler.detach(),this.pageLayoutOnChangeHandler.detach(),this.pageLayoutAfterChangeHandler.detach(),this.imageLoaderRefreshHandle&&this.imageLoaderRefreshHandle.detach(),this.EDIT_CONTROLLER.destroyLayoutEditor(this.Y.one(this.hostNode));const e=this.hostNode.querySelectorAll(".sqs-block-content[tabindex]");Array.from(e).forEach(s=>s.removeAttribute("tabindex"))}setDirtyLayoutData(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.dirtyLayoutData=e,this.dirtyLayoutDataChangeHandler(e,s)}addDirtyLayoutDataHandler(e){this.dirtyLayoutDataChangeHandler=e}showTutorialIfNecessary(){return new Promise((e,s)=>{const i=(0,d.d6)();if((0,m.FWA)(u().TUTORIAL_LAYOUT_ENGINE)(i)||l.Z.isSevenOne())return e();(0,d.GE)((0,g.ic)(u().TUTORIAL_LAYOUT_ENGINE)),this.promptLayoutEngineVideoModal().onceAfter(["confirm","cancel"],()=>e())})}onBlockRemoveRequested(e){e.preventDefault();const{selected:s}=e,i=s.size();if(l.Z.isSevenOne())this.Y.SQS.LayoutEngine.Events.fire("layout-engine:remove-confirmed",{selected:s});else return new this.Y.Squarespace.Widgets.Confirmation({"strings.title":(0,o._6)({one:"Remove Block",other:"Remove Blocks"},i,null,{project:"apps.App",notes:"oldKey: removeBlocksTitle"}),"strings.message":(0,o._6)({one:"Are you sure you want to delete this block",other:"Are you sure you want to delete these blocks"},i,null,{project:"apps.App",notes:"oldKey: removeBlocksMessage"})}).on("confirm",()=>{this.Y.SQS.LayoutEngine.Events.fire("layout-engine:remove-confirmed",{selected:s})})}promptLayoutEngineVideoModal(){const{ConfirmationMedia:e}=this.Y.Squarespace.Widgets;return new e({mediaSrc:["https://assets.squarespace.com/universal/images-v6/tutorial/layoutengine-guide.webm","https://assets.squarespace.com/universal/images-v6/tutorial/layoutengine-guide.mp4"],"strings.confirm":(0,o.t)("OK",null,{project:"apps.App"}),"strings.title":(0,o.t)("Adding Content With Blocks",null,{project:"apps.App"}),mediaDimension:{width:734,height:500},mediaType:e.TYPE_MEDIA.VIDEO})}showAddBlockMenu(e){this.EDIT_CONTROLLER.showBlockMenu(e)}constructor(e,{hostNode:s,pageLayout:i,startupBlockId:_}){for(this.Y=e,this.hostNode=s,this.pageLayout=i,this.startupBlockId=_||null,this.dirtyLayoutData=!1;this.hostNode.firstChild;)this.hostNode.removeChild(this.hostNode.firstChild);this.EDIT_CONTROLLER=this.Y.Squarespace.LayoutEngine.EditController.getInstance();const c={layoutNode:this.Y.one(this.hostNode),layoutModel:this.pageLayout,editMode:this.getEditMode(),startupBlockId:this.startupBlockId,layoutTutorialPromise:this.showTutorialIfNecessary(),dragDropLock:(0,D.y)()};this.imageLoaderRefreshHandle||(this.imageLoaderRefreshHandle=this.Y.SQS.LayoutEngine.Events.on("layout-engine:reload-images",()=>{this.Y.Squarespace.ImageLoadManager.refreshAll()})),this.EDIT_CONTROLLER.pluginLayoutEditor(c),this.EDIT_CONTROLLER.alignInsertPoints(this.Y.one(this.hostNode)),this.onBlockRemoveRequestHandler=this.Y.SQS.LayoutEngine.Events.on("layout-engine:remove-requested",this.onBlockRemoveRequested.bind(this)),this.pageLayoutOnChangeHandler=this.pageLayout.on("change",y=>{this.setDirtyLayoutData(!0,{editorUid:y.editorUid})}),this.pageLayoutAfterChangeHandler=this.pageLayout.after("change",y=>{y.forceRefresh&&(this.EDIT_CONTROLLER.destroyLayoutEditor(this.Y.one(this.hostNode)),this.Y.fire("renderLayoutEngineUpgradeWrappers"),this.EDIT_CONTROLLER.pluginLayoutEditor(c))})}}},696727:function(I,C,t){t.d(C,{Z:()=>M});var o=t(419467),f=t.n(o),u=t(714487),l=t(598897),d=t.n(l),g=t(749584),m=t(876249),D=t(270199),E=t(958607);class M extends(0,m.Z)(g.Z){destroy(){this.removeEmptyMessage(!0),super.destroy()}afterEditableChange(e){e&&this.removeEmptyMessage(),super.afterEditableChange(e),e||this.renderEmptyMessage()}save(){return this.saveModel().then(()=>{this.set("dirty",!1)})}saveModel(){return new Promise((e,s)=>{this.state.model.save(i=>{i?s(i):e()})})}getLayoutLabel(){const{collection:e}=this.state;return this.getParentCollection(e)?e.get("navigationTitle"):(0,u.t)("Page Content",null,{project:"apps.App"})}getClassificationLabel(){return this.getLayoutLabel()}getPageLayout(){return this.state.model.get("data").get("layout")}getActionList(){const e=super.getActionList(),s=this.getMainImageToggleAction();(0,o.isObject)(s)&&e.push(s);const i=this.getCollectionSettingsAction();return(0,o.isObject)(i)&&e.push(i),e}enterEditMode(){if(this.state.collection.get("isDemoCollection")){if(this.isProcessing)return;this.getCollectionDialogPortal().exampleContentCloneConfirmationWithCollectionId(this.state.collection.get("id")).then(()=>{this.initModel(()=>{const e=this.state.model;e.set("collection",this.state.collection),e.load(s=>{this.isProcessing=!1,this.enterEditMode()})})});return}super.enterEditMode()}trackEditClick(){const{collection:e}=this.state;(0,E.s)("page-content-edit",e.get("typeName"))}loadModel(e){const{AttrValidators:s,Models:i}=this.Y.Squarespace,_=s.isInstanceOf(i.PageCollectionData),c=new i.PageCollectionData({collection:this.state.collection});c.load(()=>{_(c,"model")&&this.set("model",c),e()})}previewLayout(e){const s=this.state.rootNode,i=s.get("clientHeight");s.setStyle("height",i+"px"),this.updateLayoutFromJSON(e),setTimeout(function(){s.setStyle("height",null);const _=s.getDOMNode();_&&d()(_,!0)},0)}updateLayoutFromJSON(e){const s=this.Y.Squarespace.LayoutEngine.EditController.getInstance(),i=this.getPageLayout(),_=this.state.rootNode;this.removeEmptyMessage(),i.setAttrs(e),_.toggleClass("empty",i.isEmpty()),s.pluginLayoutBuilder(_,i),s.destroyLayoutBuilder(_),this.renderEmptyMessage()}getParentCollection(e){const s=e.get("id"),i=this.Y.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(s);if(!i)return!1;const _=i.getFolderItemList();if(!_)return!1;const c=_.getNavigationItem();return!c||!c.get("collectionId")?!1:c.get("collection")}constructor(e,{rootNode:s,overlayRootNode:i,collection:_}){const c={model:null,collection:null,columns:12},y=(0,o.merge)({},c,{rootNode:s,overlayRootNode:i,collection:_});super(e,y);const h=this.state.rootNode.ancestor("[data-collection-id]",!0),p=this.examineAndInitializeMainImageToggle(h);if(this.state.collection.load(function(){if(this.state.collection&&(this.state.collection.get("isDemoCollection")||this.initModel(()=>{this.renderEmptyMessage()}),p)){const n=this.state.collection.get("mainImageId"),r=this.mainImageToggleNodeReference;n&&r&&this.set("overlayRootNode",r)}},this),_.get("isDemoCollection")){const n=window.CONFIG_PANEL.get("router");this.registerYUIEventListener((0,D.Z)(this.Y,n,_))}}}},876249:function(I,C,t){t.d(C,{Z:()=>c});var o=t(419467),f=t.n(o),u=t(34944),l=t.n(u),d=t(714487),g=t(991735),m=t(24175),D=t.n(m),E=t(958607),M=t(437951),v=t.n(M);const e="data-edit-main-image",s="pageAnnotationEmptyMessage",i="pageAnnotationEmptyMessageLight",_="pageAnnotationEmptyMessageDark",c=y=>{class h extends y{destroy(){this.addContentItemHelper&&(this.addContentItemHelper.destroy(),this.addContentItemHelper=null),super.destroy()}handleAddContentRequest(){const{collection:n}=this.state;if((0,E.s)("collection-add",n.get("typeName")),n.get("isDemoCollection")){this.cloneCollection().then(this.handleAddContentRequest.bind(this));return}this.addContentItemHelper||(this.addContentItemHelper=new(this.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Mixins.AddContentItemHandlerMixin"))({collection:n,collectionConfiguration:n.getTemplateConfiguration()})),n.get("type")===v().PRODUCTS?this.addContentItemHelper.handleAddContentRequest({analytics:{productPage:"cms-page-preview"}}):this.addContentItemHelper.handleAddContentRequest()}getCollectionDialogPortal(){return this.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.CollectionDialogPortal")}cloneCollection(){return this.getCollectionDialogPortal().exampleContentCloneConfirmationWithCollectionId(this.state.collection.get("id"))}showCollectionSettings(n){const r=this.state.collection.get("id");this.getCollectionDialogPortal().showCollectionConfigurationDialog(r,n)}examineAndInitializeMainImageToggle(n){if(!n)return!1;if(n.hasAttribute(e))return this.mainImageToggleNodeReference=n,this.state.collection.load(()=>{this.props.annotationController&&typeof this.props.annotationController.repaintRequest=="function"&&this.props.annotationController.repaintRequest()}),!0}getMainImageToggleAction(){if(!g.Z.hasPermission(D().CONFIG_CHANGE_STRUCTURE))return null;const n=this.mainImageToggleNodeReference&&this.mainImageToggleNodeReference.getDOMNode();if(!n||!n.hasAttribute(e))return null;const{collection:r}=this.state;return r.get("isDemoCollection")&&!r.get("mainImageId")?null:{name:"banner",label:(0,d.t)("Banner",null,{project:"apps.App"}),handleClick:()=>{(0,E.s)("collection-settings-banner",r.get("typeName")),this.showCollectionSettings("media")}}}getCollectionSettingsAction(){if(!g.Z.hasPermission(D().CONFIG_CHANGE_STRUCTURE))return null;const{collection:n}=this.state;return{name:"settings",label:(0,d.t)("Settings",null,{project:"apps.App"}),handleClick:()=>{(0,E.s)("collection-settings",n.get("typeName")),this.showCollectionSettings()}}}findMainElementBackgroundColor(){let n=this.state.rootNode;for(;n;){const r=n.getComputedStyle("backgroundColor");if(r!=="transparent")return r;n=n.ancestor()}return"white"}setEmptyMessageStyle(n,r){n&&r&&(l()(r)?(n.removeClass(_),n.addClass(i)):(n.removeClass(i),n.addClass(_)))}renderEmptyMessage(){if(!(0,o.get)(this,"state.rootNode"))return;const n=this.state.rootNode.getDOMNode();if(!(0,o.get)(n,"ownerDocument.defaultView")||!this.state.model||!this.state.model.isLayoutBlank())return;const r=this.findMainElementBackgroundColor();this.setEmptyMessageStyle(this.state.emptyMessage,r),this.state.rootNode.prepend(this.state.emptyMessage)}removeEmptyMessage(n){this.state.emptyMessage&&this.state.emptyMessage.remove(n)}constructor(n,r){const L={emptyMessage:n.Y.Node.create(`<div class="${s}">`+(0,d.t)("This page is empty. Start editing and add content blocks.",null,{project:"apps.App"})+"</div>")},A=(0,o.merge)({},L,r);super(n,A)}}return h}},980995:function(I,C,t){t.d(C,{Z:()=>P});var o=t(419467),f=t(882142),u=t.n(f),l=t(424546),d=t.n(l),g=t(34944),m=t.n(g),D=t(798589),E=t(337061),M=t(938077),v=t(897820),e=t(134798),s=t(487558),i=t(966819);const _=()=>new Promise(S=>{const a=R=>{const{summaries:N}=(0,s.UT)(),W=i.default.getState().get(R),B=N[R]||(W==null?void 0:W.toJS());return(B==null?void 0:B.isDraft)??(B==null?void 0:B.draft)},O=(0,M.Zxu)((0,E.d6)());if(O){S(!a(O));return}const T=(0,E.gH)(M.Zxu,R=>{if(!R)return;const N=a(R);T(),S(!N)})});function c(S,a,O){return a in S?Object.defineProperty(S,a,{value:O,enumerable:!0,configurable:!0,writable:!0}):S[a]=O,S}const{isMobile:y}=D,h="sqs-frontend-overlay-editor-widget-host",p="sqs-scrim-enabled",n="sqs-scrim-fading",r="sqs-scrim-hide-button",L={header:e.Z.HEADER,sections:e.Z.PAGE,"collection-item-sections":e.Z.COLLECTION_ITEM,"footer-sections":e.Z.FOOTER},A={[e.Z.PAGE]:e.Z.COLLECTION_ITEM,[e.Z.COLLECTION_ITEM]:e.Z.PAGE};class P{cleanUp(){}destroy(){if(this.get("destroyed")||(0,o.isEmpty)(this.state))return;const a=this.state.rootNode.getDOMNode();a&&a.classList.remove("sqs-layout-dark");const O=this.state.overlayRootNode.getDOMNode();O&&O.classList.remove(h),this.destroyEvents(),this.state={},this.preview={},this.afterChangeHandlers={},this.eventListeners=[],this.set("destroyed",!0)}initializeRootNode(){const a=this.state.rootNode.getDOMNode();if(!a)throw new Error("Could not initialize rootNode in controller: root node is detached");a.setAttribute("tabindex","0"),this.registerEventListener(a,"pointerdown",this.handlePointerdown.bind(this)),this.registerEventListener(a,"keydown",this.handleAccessibleSelect.bind(this)),this.registerEventListener(a,"focus",this.handleAccessibleFocus.bind(this)),this.registerEventListener(a,"blur",this.handleAccessibleBlur.bind(this))}handlePointerdown(){this._focusCheckTimeout&&clearTimeout(this._focusCheckTimeout),this._focusEventWasStartedByMouse=!0,this._focusCheckTimeout=setTimeout(()=>{this._focusEventWasStartedByMouse=!1},10)}handleAccessibleSelect(a){var O,T;const R=this.state.rootNode.getDOMNode();(a.key===" "||a.key==="Enter")&&R&&(!((T=this.preview.document)===null||T===void 0||(O=T.activeElement)===null||O===void 0)&&O.isEqualNode(R))&&(a.preventDefault(),R.click())}handleAccessibleFocus(){if(this._focusEventWasStartedByMouse){this._focusEventWasStartedByMouse=!1,this._focusCheckTimeout&&clearTimeout(this._focusCheckTimeout);return}const a=this.state.rootNode.getDOMNode();if(!a)throw new Error("Could not handle accessible focus: root node is detached");const O=L[a.id],T=(0,M.fPO)((0,E.d6)());T===e.Z.NOT_EDITING||!O||O===T||(A[O]===T?(0,E.GE)((0,v.xu)(O)):this.showScrim(),this.set("isMouseOver",!0),a.scrollIntoView(!1))}handleAccessibleBlur(){this.set("isMouseOver",!1)}initializeScrim(a){this.props.scrim&&(a.setAttribute("data-edit-button-text",this.props.scrim.text),_().then(O=>{this.state.canEditGlobalSections=O}))}showScrim(){const a=this.state.rootNode.getDOMNode();if(!a)throw new Error("Could not show scrim: rootNode is detached");a.classList.add(p),this.set("isScrimEnabled",!0)}showScrimWithButtonHide(){const a=this.state.rootNode.getDOMNode();if(!a)throw new Error("Could not show scrim: rootNode is detached");a.classList.add(p,r),this.set("isScrimEnabled",!0)}getRootEl(){return this.state.rootNode?this.state.rootNode.getDOMNode():null}registerTimer(a,O){this.timeouts.push(setTimeout(a,O))}deregisterTimers(){this.timeouts.forEach(a=>clearTimeout(a)),this.timeouts=[]}hideScrim(){var a;if(!((a=this.props.scrim)===null||a===void 0)&&a.delay){const T=this.getRootEl();if(!T)throw new Error("Could not hide scrim: rootNode is detached");T.classList.add(n),this.set("isScrimEnabled",!1),this.registerTimer(()=>{T.classList.remove(p,n,r)},this.props.scrim.delay)}else{var O;(O=this.state.rootNode.getDOMNode())===null||O===void 0||O.classList.remove(p,r),this.set("isScrimEnabled",!1)}}attachEventListeners(){this.syncDarkOrLight();const a=this.state.overlayRootNode.getDOMNode();if(!a)throw new Error("Could not attach event listeners: overlay root node not found");a.classList.add(h),y()?this.registerEventListener(a.ownerDocument.body,"click",O=>{this.set("isMouseOver",a.contains(O.target))}):(this.registerEventListener(a,"mouseenter",()=>this.set("isMouseOver",!0)),this.registerEventListener(a,"mouseleave",()=>this.set("isMouseOver",!1)),this.state.alwaysShowAnnotationWhenMouseOver||this.registerEventListener(a,"mouseover",this.handleOverlayMouseover))}get(a){var O;return(O=this.state)===null||O===void 0?void 0:O[a]}set(a,O){if(O===this.state[a])return;this.state[a]=O;const T=this.afterChangeHandlers[a];T&&T.length&&T.forEach(R=>R(O))}addAfterChangeHandler(a,O){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this;this.afterChangeHandlers[a]||(this.afterChangeHandlers[a]=[]),this.afterChangeHandlers[a].push(O.bind(T))}syncDarkOrLight(){var a,O;const T=this.state.rootNode.getDOMNode();!T||!(!((O=this.preview)===null||O===void 0||(a=O.document)===null||a===void 0)&&a.body.contains(T))||u()(T,R=>{const N=m()(R);T.classList.toggle("sqs-layout-dark",N),T.classList.toggle("sqs-frontend-overlay-editor-widget-host-light",N)})}revert(){return Promise.resolve().then(()=>this.set("dirty",!1))}save(){return Promise.resolve().then(()=>this.set("dirty",!1))}registerEventListener(a,O,T){a.addEventListener(O,T),this.eventListeners.push({node:a,eventName:O,callback:T})}destroyEvents(){this.eventListeners.forEach(a=>{let{node:O,eventName:T,callback:R}=a;O.removeEventListener(T,R)})}constructor({Y:a,...O},T){c(this,"Y",void 0),c(this,"props",void 0),c(this,"state",void 0),c(this,"afterChangeHandlers",void 0),c(this,"eventListeners",void 0),c(this,"preview",void 0),c(this,"_focusCheckTimeout",void 0),c(this,"_focusEventWasStartedByMouse",!1),c(this,"timeouts",[]),c(this,"handleOverlayMouseover",B=>{const b=d()(B.target,`.${h}`),U=this.state.overlayRootNode.getDOMNode();if(!U)throw new Error("Could not handle overlay mouseover: overlay root node not found");const K=!(U.contains(b)&&b!==U);this.set("isMouseOver",K)});const R=T.rootNode.getDOMNode();if(!R)throw new Error("Could not initialize controller: no root node found");const N={rootNode:null,overlayRootNode:T.rootNode,dirty:!1,visible:!1,editable:!1,alwaysShowAnnotationWhenMouseOver:!1,isMouseOver:!1,placeAnnotationInside:!1,scrollLayoutOnEditingStart:null,canEditGlobalSections:!1};if(this.Y=a,this.props=O,this.state=(0,o.merge)({},N,T),this.afterChangeHandlers={},this.eventListeners=[],!R.ownerDocument||!R.ownerDocument.defaultView)throw new Error("Could not initialize controller: root node is detached");this.preview={window:R.ownerDocument.defaultView,document:R.ownerDocument},this.initializeScrim(R);const W=this.props.stack.add(()=>{});this.attachEventListeners(),this.initializeRootNode(),W()}}c(P,"sectionAreaName",void 0)},270199:function(I,C,t){t.d(C,{Z:()=>u});var o=t(762535);function f(l,d,g){const m=l.Squarespace.Navigation.ListUtils.getParentCollection(g);return g.on(g.get("id")+"|destroy",()=>{m&&l.Squarespace.Singletons.Location.pointFrameToCollection(m,!0),d.replace({pathname:o.Z.forPagesPanel(),state:{frameUrl:"/"}})})}const u=f},505873:function(I,C,t){t.d(C,{Z:()=>m});var o=t(174161),f=t(845076),u=t.n(f),l=t(482053),d=t(421591),g=t.n(d);const m=o.forwardRef(function(E,M){let{children:v,ariaLabel:e,onClick:s,className:i,isSelected:_,...c}=E;return o.createElement(l.Z,{alignItems:"center","aria-label":e,"aria-selected":!!_,as:"button",border:0,borderRadius:1,className:u()(i,g().annotationButton),height:"sizes.200",justifyContent:"center",minWidth:"sizes.200",onClick:s,ref:M,...c},v)})},35351:function(I,C,t){t.d(C,{C4:()=>f,Ls:()=>l,Zi:()=>o,_g:()=>u});const o="data-is-hovered",f=d=>{let{sectionNode:g}=d;if(g){var m,D;const E=g.ownerDocument,M=(E==null||(m=E.querySelectorAll)===null||m===void 0?void 0:m.call(E,`[${o}]`))||[],v=(D=g.getAttribute)===null||D===void 0?void 0:D.call(g,"data-section-id");Array.from(M).forEach(e=>{e.getAttribute("data-section-id")!==v&&e.removeAttribute(o)}),g.setAttribute(o,"true")}},u=d=>{d.removeAttribute(o)},l=d=>{let{frameDocument:g}=d;var m;return(m=g.querySelector(`[${o}="true"]`))===null||m===void 0?void 0:m.getAttribute("data-section-id")}},370767:function(I,C,t){t.d(C,{Z:()=>m});var o=t(174161),f=t(538312),u=t(338465),l=t(352635);const d={fontSize:l.fontSizes[0],fontWeight:l.fontWeights.medium},m=D=>{let{label:E,controls:M}=D;return o.createElement(o.Fragment,null,o.createElement(f.Z.Body,{m:0,color:"white"},E),M?M.map(v=>o.createElement(u.Z,{key:v,display:"inline-block",borderRadius:"2px",bg:"gray.200",color:"gray.800",ml:2,px:1,height:"sizes.150",lineHeight:"19px",sx:d},v)):null)}},45018:function(I,C,t){t.d(C,{Z:()=>E});var o=t(174161),f=t(418698),u=t(614205),l=t(923046),d=t.n(l),g=t(916661),m=t(505873);const E=o.forwardRef((M,v)=>{let{label:e="",onClick:s,isSelected:i,forceHideTooltip:_=!1,children:c,tooltipLabel:y,disabled:h,delay:p={enter:500,exit:0},tooltipStyles:n={},...r}=M;const[L,A]=(0,o.useState)(!1),P=(0,o.useRef)(null),a=g.Z.isVersion(d().SEVEN)?{borderRadius:0,height:"sizes.250"}:{},O=(0,o.useCallback)(()=>{A(!0)},[]),T=(0,o.useCallback)(()=>{A(!1)},[]);return o.createElement(o.Fragment,null,o.createElement(m.Z,{ariaLabel:e,bg:i||L&&!h?"gray.800":void 0,disabled:h,onBlur:T,onClick:s,onFocus:O,onPointerLeave:T,onPointerOver:O,isSelected:i,ref:(0,u.Z)([P,v]),...a,...r,tabIndex:0},c),P.current&&y&&!h&&L?o.createElement(f.Z,{anchor:P.current,mountAt:P.current,isOpen:L&&!_,position:"bottom",delay:p,style:n},y):null)})},302975:function(I,C,t){t.d(C,{Z:()=>m});var o=t(174161),f=t(964364),u=t(538312),l=t(45018),d=t(370767);const m=o.forwardRef((D,E)=>{let{icon:M,label:v,controls:e,children:s,forceHideTooltip:i=!1,..._}=D,c;return s?c=s:c=M?o.createElement(f.Z,{src:M,alt:v,preventLayoutShift:!0}):o.createElement(u.Z.Subtitle,null,v),o.createElement(l.Z,{..._,ref:E,label:v,tooltipLabel:i?null:o.createElement(d.Z,{label:v,controls:e})},c)})},779904:function(I,C,t){t.d(C,{Z:()=>u});var o=t(347560);class f{constructor(){this.generateActions("hide","showEditorOverlay","hideEditorOverlay","reset","setMouseOver","setOverlayEditors","show","setIsSaving","setPageSectionNodes")}}const u=o.Z.createActions(f)},890333:function(I,C,t){t.d(C,{Bi:()=>d.Bi,I9:()=>d.I9,MC:()=>d.MC,N$:()=>D,Pu:()=>d.Pu,WR:()=>d.WR,sb:()=>d.sb,t5:()=>d.t5,t9:()=>d.t9,tX:()=>g});var o=t(419467),f=t.n(o),u=t(916661),l=t(484345),d=t(517177);function g(E,M){u.Z.isSevenOne()&&(0,d.tX)(E,M)}const m=(0,o.debounce)((E,M,v)=>{if(E==="#/divider/width"){const e=M.divider.type;(0,l.vK)(v,e)}else if(E==="#/divider/height"){const e=M.divider.type;(0,l.uG)(v,e)}else if(E==="#/divider/isFlipX"||E==="#/divider/isFlipY"){const e=M.divider.type;(0,l.eO)(v,e)}else if(E==="#/divider/offset"){const e=M.divider.type;(0,l.Fj)(v,e)}else if(E==="#/divider/stroke/style"){const e=M.divider.stroke.style;(0,l.JF)(v,e)}else if(E==="#/divider/stroke/style"){const e=M.divider.stroke.style;(0,l.JF)(v,e)}else if(E==="#/divider/stroke/color"){const e=M.divider.stroke.color.type;(0,l.P3)(v,e)}else E==="#/divider/stroke/thickness"?(0,l.Sv)(v):E==="#/divider/stroke/dashLength"?(0,l.vF)(v):E==="#/divider/stroke/gapLength"?(0,l.q_)(v):E==="#/divider/stroke/linecap"&&(0,l.CV)(v)},400);function D(E,M,v){if(E.includes("#/divider/enabled")){const e=M.divider.enabled;(0,l.wV)(v,e);return}for(const e of E)m(e,M,v)}},930127:function(I,C,t){t.d(C,{q:()=>f});var o=t(198082);const f=u=>u==="ja-JP"?o.r.JAPANESE:o.r.LATIN},12574:function(I,C,t){t.d(C,{Z:()=>g});var o=t(175424),f=t(35351),u=t(48992);const l=250,g=(m,D,E)=>{var M,v;const e=(i,_)=>{(i.key==="Escape"||i.key==="Esc")&&(i.preventDefault(),i.stopPropagation(),_&&_())},s=i=>{if(e(i,D),(i.key==="Escape"||i.key==="Esc")&&m){const c=`[data-section-id="${m.getAttribute("data-section-id")}"] ${E||".section-toolbar-button"}`;(0,f.C4)({sectionNode:m}),setTimeout(()=>{var y,h;const p=document.querySelector(c)||((h=(0,o.wo)())===null||h===void 0||(y=h.querySelector)===null||y===void 0?void 0:y.call(h,c));p==null||p.focus()},l)}};(0,u.Z)("keyup",s,{element:((M=(0,o.wo)())===null||M===void 0?void 0:M.body)??null}),(0,u.Z)("keyup",s,{element:document.body}),(0,u.Z)("keydown",e,{element:((v=(0,o.wo)())===null||v===void 0?void 0:v.body)??null}),(0,u.Z)("keydown",e,{element:document.body})}},708477:function(I,C,t){t.d(C,{Z:()=>u});var o=t(174161);const u=l=>{const d=(0,o.useRef)(l);return(0,o.useEffect)(()=>{d.current=l},[l]),d.current}},511063:function(I,C,t){t.d(C,{Z:()=>g});var o=t(663634),f=t(762379),u=t(444867),l=t.n(u);function d(){return f.Z.isFeatureEnabled(l().CDK_WEBSITE_COMPONENTS_BLOCK_ANIMATIONS_ENABLED)||(0,o.cr)("cdk_website_components_block_animations_enabled")}const g=d},614205:function(I,C,t){t.d(C,{Z:()=>f});function o(u){return function(l){u.forEach(d=>{typeof d=="function"?d(l):d!==null&&(d.current=l)})}}const f=o},570163:function(I,C,t){t.d(C,{y:()=>m});var o=t(352635),f=t(260175),u=t(916661),l=t(444867),d=t.n(l),g=t(762379);function m(){const{platform:D}=(0,f.i)(o.breakpoints),E=g.Z.isFeatureEnabled(d().MOBILE_WEB_V7);return D==="mobile"&&(u.Z.isSevenOne()||E)}},40500:function(I,C,t){t.d(C,{K9:()=>e,AA:()=>v,IY:()=>E});var o=t(419467);const f=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;const i="sqs-edit-mode",_=(0,o.get)(s,"document.body");return _&&_.classList.contains(i)};var u=t(736206),l=t(723796);const d=(0,l.hu)("IntersectionObserverUtils","#fc0"),g=function(s){let{target:i,intersectionRatio:_,isIntersecting:c,boundingClientRect:y}=s,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return document.body.contains(i)?window.innerHeight?_>=h?!0:y.height>window.innerHeight&&c:!1:(d("Memory leak detected: el is no longer in document.body.",i),!1)},{err:m}=(0,l.Em)("BlockAnimationsInitializer","#fc0");let D;const E=['[class*="block-animation-"]:not(.block-animation-none):not(.animation-loaded)','.combination-animation-custom[class*="individual-animation-"]:not(.individual-animation-none):not(.animation-loaded)','.combination-animation-custom[class*="individual-text-animation-"]:not(.individual-text-animation-none):not(.animation-loaded)','[class*="combination-animation-"]:not(.combination-animation-none):not([class*="combination-animation-custom"]):not(.animation-loaded)'].join(","),M=function(i,_){i.forEach(function(c){if(!document.body.contains(c.target)){_.unobserve(c.target);return}const y=c.target.querySelector("img.loading");if(y){if(y.dataset.queuedBlockAnimation)return;y.dataset.queuedBlockAnimation="true";const h=function(n){n.currentTarget.removeEventListener("load",h),M([c],_)};y.addEventListener("load",h);return}if(g(c)){if(c.target.classList.add("animation-loaded"),!_||!_.unobserve){m("missing IntersectionObserver");return}_.unobserve(c.target)}})},v=s=>{if(!s||!s.document){m("Cannot init animations without a window context");return}(0,u.Z)().then(()=>{D||(D=new IntersectionObserver(M,{root:null,threshold:[0,.1,.25,.5,1]}));const i=s.document.body.querySelectorAll(E);i.length>0&&i.forEach(function(c){c.classList.remove("animation-loaded"),D.observe(c)})}).catch(function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};m(i.message)})},e=s=>{if(!s||!s.document){m("Cannot init animations without a window context");return}f(s)||(v(s),s.addEventListener("load",()=>v(s)),s.Y&&s.Y.on("template:dynamicPageReady",()=>v(s)),s.addEventListener("beforeunload",()=>{D&&D.disconnect()}))}},958607:function(I,C,t){t.d(C,{Qf:()=>l,s:()=>d,vF:()=>g});var o=t(941254),f=t(511556);const u={actor:f.aR.USER,action:f.om.CLICK,object_type:"button",product_area:"annotations",product_page:"user-site"},l=(m,D)=>{o.Z.track({...u,object_identifier:m,object_display_name:D})},d=(m,D)=>{o.Z.track({...u,object_identifier:m,collection_typename:D})},g=(m,D)=>{o.Z.track({...u,object_identifier:m,item_typename:D})}}}]);

//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/sourcemaps/6615fa742ab2fff3/48416-7d9c2c4fe6cfab1f-min.en-US.js.map