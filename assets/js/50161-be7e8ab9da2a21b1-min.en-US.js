"use strict";(globalThis.webpackChunkextract_css=globalThis.webpackChunkextract_css||[]).push([["50161"],{353844:function(D,S,v){v.d(S,{Z:()=>F});var L=v(419467),I=v(708380),O=v(749189),P=v(403594),q=v.n(P);const R={[q().LEFT]:-1,[q().RIGHT]:1},C=(r,t,i)=>r*(1-i)+t*i,H=r=>({wrapper:r.querySelector(".Marquee"),display:r.querySelector(".Marquee-display"),props:r.querySelector(".Marquee-props"),measurementContainer:r.querySelector(".Marquee-measure"),firstMeasuredItemNode:r.querySelector(".Marquee-measure h1, .Marquee-measure p"),originGroupItemNodes:Array.from(r.querySelectorAll(".Marquee-measure .Marquee-item")),trackContainer:r.querySelector(".Marquee-track"),svg:r.querySelector(".Marquee-svg"),svgGroup:r.querySelector(".Marquee-svg-group"),svgGroupItemNodes:Array.from(r.querySelectorAll(".Marquee-svg-group > *")),path:r.querySelector(".Marquee-path"),pathGroup:r.querySelector(".Marquee-path-group"),hitbox:r.querySelector("[data-hitbox]"),pathHitbox:r.querySelector(".Marquee-path-hitbox"),pathHitboxFocusOutline:r.querySelector(".Marquee-path-hitbox-focus-outline"),pathHitboxGroup:r.querySelector(".Marquee-path-hitbox-group"),textPath:r.querySelector(".Marquee-svg-text"),visuallyHiddenTextContent:r.querySelector(".v6-visually-hidden")}),E=(r,t)=>{var i,e,s,n,o,a;(i=t.path)===null||i===void 0||i.setAttribute("id",r),(e=t.pathHitbox)===null||e===void 0||e.setAttribute("id",r),(s=t.textPath)===null||s===void 0||s.setAttribute("href","#"+r),(n=t.svgGroup)===null||n===void 0||n.setAttribute("href","#"+r),(o=t.visuallyHiddenTextContent)===null||o===void 0||o.setAttribute("id","ariaLabel"+r),(a=t.hitbox)===null||a===void 0||a.setAttribute("aria-labelledby","ariaLabel"+r)};function w(r,t,i){return t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i,r}class G{getItems(){const{container:t,svgGroupItemNodes:i}=this.props;return i.reduce((e,s)=>{const n=s.cloneNode(!0),o={x:0,width:0,node:n,domNode:null,isOffscreen:!1};return e.push(o),t.appendChild(n),e},[])}positionItems(){let{x:t,measuredItems:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t;for(let s=0;s<this.info.numItems;s+=1){const n=this.items[s],o=i[s],a=o.width+o.spacing;n.x=e,n.width=a,n.node.setAttribute("x",n.x),e+=a}return e}updateItemVisibility(t,i,e){for(let s=0;s<this.info.numItems;s+=1){const n=this.items[s],o=n.x-t>i-e||n.x+n.width-t<e;n.isOffscreen!==o&&(n.node.style.display=o?"none":"block"),n.isOffscreen=o}}destroy(){this.items=[],this.info.numItems=0}constructor(t){w(this,"info",{numItems:0}),this.props=t,this.items=this.getItems(),this.info.numItems=this.items.length}}w(G,"defaultProps",{container:null,domContainer:null,originGroupItemNodes:[],path:null,svgGroupItemNodes:[]});function M(r,t,i){return t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i,r}class A{onResize(t){let{measuredItems:i,measuredWidth:e,padding:s,pathLength:n}=t;const{path:o,trackContainer:a,container:h,originGroupItemNodes:d,svgGroupItemNodes:p}=this.props,c=Math.ceil((n+e)/e)*e,g=Math.ceil(c/e);for(this.info.measuredWidth=e,this.info.pathLength=n,this.info.padding=s,o.setAttribute("stroke-dasharray",this.getStrokeDashArray(i));this.info.numGroups<g&&h.childElementCount/d.length<g;){this.info.numGroups+=1;const y=new G({container:h,domContainer:a,originGroupItemNodes:d,path:o,svgGroupItemNodes:p});this.waveGroups.push(y)}this.positionGroups(i)}getStrokeDashArray(t){return t.reduce((i,e)=>i+`${e.width} ${e.spacing} `,"")}positionGroups(t){let i=0;this.waveGroups.forEach(e=>{i=e.positionItems({x:i,measuredItems:t})})}tick(t){var i;const{container:e,path:s,animationSpeed:n}=this.props,o=this.info.measuredWidth;this.uniforms.progress.value-=n*this.uniforms.hover.value;const a=((o+this.uniforms.progress.value)%o+o)%o;e.setAttribute("startOffset",-a),s.setAttribute("stroke-dashoffset",a),(i=this.waveGroups)===null||i===void 0||i.forEach(h=>h.updateItemVisibility(a,this.info.pathLength,this.info.padding))}destroy(){var t;(t=this.waveGroups)===null||t===void 0||t.forEach(i=>i.destroy()),this.waveGroups=null}constructor(t){M(this,"waveGroups",[]),M(this,"info",{pathLength:0,padding:0,measuredWidth:0,numGroups:0}),this.props=t,this.uniforms={...this.props.sharedUniforms,progress:{value:0}}}}M(A,"defaultProps",{animationDirection:"left",animationSpeed:-1,container:null,originGroupItemNodes:[],path:null,sharedUniforms:{hover:{value:0}},svgGroupItemNodes:[],trackContainer:null});function u(r,t,i){return t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i,r}const l=window.matchMedia("(prefers-reduced-motion: reduce)"),W=()=>l.matches;class ${redrawPath(){let{regionWidth:t=100,textHeight:i=10,transformYOffset:e=0,waveFrequencyWidth:s=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{waveIntensity:n}=this.props,o=s*.333,a=Math.ceil((t+s*2)/s)+1,h=-s,d=i*.662,p=function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return[...Array(a).keys()].reduce((m,f)=>{const b=h+f*s,x=y+(f%2===0?0:n);return m+(f===0?` L${b},${x}`:` S${b-o},${x} ${b},${x}`)},"")},c=`M${h},${d} ${p(d)}`,g=`
      M${h},${n+i}
      ${p(i-e)}
      M${h},${Math.max(n,e)}
      ${p(e)}
    `;this.ref.path.setAttribute("d",c),this.ref.pathGroup.setAttribute("transform",`translate(0, ${i*.05})`),this.ref.pathHitbox.setAttribute("d",c),this.ref.pathHitbox.setAttribute("stroke-width",i),this.ref.pathHitboxFocusOutline.setAttribute("d",g),this.ref.pathHitboxGroup.setAttribute("transform",`translate(0, ${-d+d*.75})`),this.info.pathLength=this.ref.path.getTotalLength(),this.lerps=this.buildLerps(3)}buildLerps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3;const i=Math.ceil(this.info.pathLength/t)+1;return[...Array(i).keys()].reduce((e,s)=>{const n=s*t,o=this.ref.path.getPointAtLength(n);if(e.points[s]=o,e.index[s]=n,e.x[s]=o.x,e.y[s]=o.y,s>0){const a=s-1,h=e.points[a],d=e.points[s];e.rotation[a]=Math.atan2(d.y-h.y,d.x-h.x)*180/Math.PI,s===i-1&&(e.rotation[s]=e.rotation[a])}return e},{index:[],points:[],x:[],y:[],rotation:[]})}onTick(){this.wave.tick(this.lerps)}bindListeners(){I.Z.on(this.render,0),this.resizeObserver=new ResizeObserver(this.render),this.resizeObserver.observe(this.ref.measurementContainer),l!=null&&l.addEventListener?l.addEventListener("change",this.handleMediaQueryListChange):l.addListener(this.handleMediaQueryListChange),this.intersectionScroll=new O.Z(this.node,{onIntersection:this.onIntersection,normalize:!1}),this.ref.hitbox&&this.props.pausedOnHover&&(this.ref.hitbox.addEventListener("mouseenter",this.onPointerEnter),this.ref.hitbox.addEventListener("touchstart",this.onPointerEnter),this.ref.hitbox.addEventListener(["touchend","touchcancel"],this.onPointerLeave),this.ref.hitbox.addEventListener(["mouseleave"],this.onPointerLeave)),this.tweakListener=this.Y.Global.on("tweak:change",this.rerender),document.fonts.ready.then(()=>{this.rerender()})}unbindListeners(){var t,i;I.Z.off(this.render,0),this.resizeObserver.disconnect(),l!=null&&l.removeEventListener?l.removeEventListener("change",this.handleMediaQueryListChange):l.removeListener(this.handleMediaQueryListChange),(t=this.intersectionScroll)===null||t===void 0||t.destroy(),this.ref.hitbox&&this.props.pausedOnHover&&(this.ref.hitbox.removeEventListener("mouseenter",this.onPointerEnter),this.ref.hitbox.removeEventListener("touchstart",this.onPointerEnter),this.ref.hitbox.removeEventListener(["touchend","touchcancel"],this.onPointerLeave),this.ref.hitbox.removeEventListener(["mouseleave"],this.onPointerLeave)),(i=this.tweakListener)===null||i===void 0||i.detach()}start(){this.rAFID=requestAnimationFrame(this.tick)}stop(){cancelAnimationFrame(this.rAFID)}restart(){this.stop(),this.start()}constructor(t,i){var e=this;u(this,"defaultAnimationProps",{waveFrequency:1,waveIntensity:0,animationDirection:q().LEFT,animationSpeed:1,pausedOnHover:!1}),u(this,"info",{pathLength:0}),u(this,"prevRegionWidth",-1),u(this,"prevTextHeight",-1),u(this,"uniforms",{hover:{value:1}}),u(this,"intersectionScroll",null),u(this,"resizeObserver",null),u(this,"rAFID",null),u(this,"render",function(){let{isForce:a=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!e.node)return;const{waveIntensity:h,waveFrequency:d}=e.props,p=C(250,1e3,(0,L.clamp)(d*.1,0,1)),c=Math.max(e.node.clientWidth,50),g=e.ref.measurementContainer.clientWidth,y=e.ref.originGroupItemNodes.map(b=>{const x=b.clientWidth,N=window.getComputedStyle(b),_=parseFloat(N.marginRight)||0;return{width:x,spacing:_}}),m=e.ref.firstMeasuredItemNode.clientHeight,f=m*.1;(c!==e.prevRegionWidth||m!==e.prevTextHeight||a)&&e.redrawPath({regionWidth:c,waveFrequencyWidth:p,textHeight:m,transformYOffset:f}),e.prevRegionWidth=c,e.prevTextHeight=m,e.wave.onResize({measuredItems:y,measuredWidth:Math.max(g,50),pathLength:e.info.pathLength,regionWidth:c,padding:p}),e.ref.svg.style.height=`${m+h}px`,e.ref.svg.style.transform=`translateY(${f}px)`,e.ref.svg.style.overflow="visible",e.ref.pathHitboxFocusOutline.style.transform=`translateY(${f}px)`}),u(this,"rerender",()=>{this.debouncedRerender=(0,L.debounce)(this.render,1e3),this.debouncedRerender()}),u(this,"handleMediaQueryListChange",a=>{a.matches?this.stop():this.start()}),u(this,"onIntersection",a=>{if(a&&!W()){this.isImmediate=!0,this.start();return}this.stop()}),u(this,"onPointerEnter",()=>{this.ref.pathHitbox.dataset.hover=!0,this.uniforms.hover.value=0}),u(this,"onPointerLeave",()=>{this.ref.pathHitbox.dataset.hover=!1,this.uniforms.hover.value=1}),u(this,"tick",()=>{this.onTick(),this.rAFID=requestAnimationFrame(this.tick)}),u(this,"destroy",()=>{var a,h;this.unbindListeners(),this.stop(),this.wave.destroy(),(h=this.debouncedRerender)===null||h===void 0||(a=h.cancel)===null||a===void 0||a.call(h),delete this.node}),this.node=t,this.Y=i,this.ref=H(this.node);const s=this.node.closest(".sqs-block-marquee").id.replace("block-","");E(s,this.ref),this.props={...this.defaultAnimationProps,...JSON.parse(this.ref.props.textContent)},this.ref.wrapper.dataset.ready=!0;const{animationDirection:n,animationSpeed:o}=this.props;this.wave=new A({container:this.ref.textPath,animationDirection:n,originGroupItemNodes:this.ref.originGroupItemNodes,path:this.ref.path,sharedUniforms:this.uniforms,animationSpeed:R[n]*o,svgGroupItemNodes:this.ref.svgGroupItemNodes,trackContainer:this.ref.trackContainer}),this.render(),this.bindListeners()}}const F=(r,t)=>new $(r,t)}}]);

//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/sourcemaps/65bc8da842745ffa/50161-be7e8ab9da2a21b1-min.en-US.js.map