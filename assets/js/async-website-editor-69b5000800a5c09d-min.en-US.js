"use strict";(globalThis.webpackChunkextract_css=globalThis.webpackChunkextract_css||[]).push([["23433"],{933177:function(_){_.exports={confirmationSheet:"FdH7KJBeN42RXLg2"}},948301:function(_){_.exports={container:"oi2Yu5vwy4oVFSKx",toggleClickArea:"sQ_204PkoBwFUWUa",actualToggle:"_6Im9Ob513MmmRRu",hidden:"EfpylUjGzwKbsDgK",open:"zMg2dX0TsyMcBGUh",marker:"wXByu7ksXgAIiBU1",phone:"zb_n8jYKWgCuo9ZK wXByu7ksXgAIiBU1",tablet:"n1zvRHam70mbYnm5 wXByu7ksXgAIiBU1",desktop:"Dl9PLRSHUzUxH3uX wXByu7ksXgAIiBU1",selected:"dYh_Wd2eYhINDIor"}},120413:function(_){_.exports={wrapper:"sTkNTfWh7rUCsBT0",banner:"fSEiyWB57mUBdbbx",visible:"xzCRfb6dkH035iEv",hidden:"qL_vS8MQ56U6i42u",animatingIn:"jT_3QtKCIpsnIbZQ",animatingOut:"B0seCZdpl7I2Dhvk"}},167820:function(_){_.exports={deviceViewOpen:"rKafqE4bf5s05S5h",deviceView:"lYZX2pm_6dM05LGd",deviceViewContentArea:"qUGu3029saokejIG",deviceViewFrame:"RGtXGwLT8k4vtzxS",tablet:"d2PW5lnnBSUE0jch",phone:"Ipc7XTyoBO0wrIPb",fluidEngineDeviceView:"BjStk7rFpIUNsoCd",deviceViewFrameNewStackedIndex:"nGThBduWyUUM6RxV",desktop:"FTIKN_0WXpoHyCfE",shrinkButtonContainer:"Qca4cgv1Kn4eWa0A",closeButton:"nZkj6G1l_YQSmeL7",closeButtonIcon:"PobdWeiJiAshv2_V",shrinkButton:"kFFFHzZFlwalgwdh",isSaving:"YfQ7UqfHB9AH8CjZ"}},293580:function(_){_.exports={container:"KOONcpMRunEINFVS",shouldHideDrawer:"Vd7M9GjBYfsOVYKs",header:"tBiSCYrUIt8xWbWa",draggable:"FXl2KDrMMAGj792Y"}},774153:function(_){_.exports={frame:"fxK4_5dlYaosenje",fullscreen:"ZzXlDvYStO4d9tiu",mobileWebEditingEnabled:"iMmXZWl7EwU_zaMw",expanded:"dpM0M8J0xfUPs0vD",newStackedIndex:"gxTog_yp8uIk0eqC",expanderButton:"jKCE73UK4wIHtZSK",expander:"c4IXX0r0vkIgdETJ"}},723398:function(_){_.exports={contentAreaWithToolbar:"WLZRlarYdPQIG6Gk",contentAreaWithoutToolbar:"ZmgIF33TK6QeNF66",frame:"bKmtQxMYYvYiq68t",fullscreen:"_eWXY4m8OM0NcEC_",shiftDownForMigrationBanner:"hxFCgMbcSzcdI8Su"}},992809:function(_){_.exports={frame:"SDRKCMVU69IRAolf",retractSidePanelApp:"eFwdoxod3MgWiaCI",retractSidePanelHeader:"SfnyV_vZz0ArQC46",retractSidePanelSidebar:"Y1jVzaoCvJYKeV2n"}},671167:function(_,W,t){t.d(W,{Z:()=>m});var S=t(456903);const e="/api/commerce",m={fetchPaymentSettings:async()=>{const{data:c}=await S.default.get(`${e}/settings/payment`,{headers:{"content-type":"application/json"}});return c},updateStorePaymentsTestMode:async c=>{let{enabled:C}=c;return S.default.put(`${e}/settings/payment/testmode`,C,{headers:{"content-type":"text/plain"}})},updateStoreCurrency:async c=>S.default.put(`${e}/settings/payment/store-currency`,c,{headers:{"content-type":"text/plain"}})}},108e3:function(_,W,t){t.d(W,{C:()=>S,g:()=>e});const S={BASE_API_PATH:"/api/finance/v1/",POST_LOCATION_TO_CONFIG:{COMMERCE:"/commerce",STORE_PAYMENTS_SETTINGS:"/settings/selling/payments",SQSP_PAYMENTS_METHODS:"/settings/selling/payments/squarespace#payment-methods"}},e={enabled:!0,pollingIntervalInMs:0}},815517:function(_,W,t){t.d(W,{T:()=>S,ZP:()=>m,nH:()=>P});const S="/finance",e={FINANCE_DASHBOARD:{ROOT:S,PAYMENTS:`${S}/payments`,PAYOUTS:`${S}/payouts`,RESERVES:`${S}/reserves`},LEARN_MORE:{CONNECTING_SQSP_PAYMENTS:"https://support.squarespace.com/hc/articles/19848492736269 ",MIGRATING_TO_SQSP_PAYMENTS:"https://support.squarespace.com/hc/articles/25046619549965",PAYOUTS_PAUSED:"https://support.squarespace.com/hc/articles/19848508230285",RESTRICTED:"/",REQUEST_APPEAL:"https://support.squarespace.com/hc/requests/new#choose-topic",ADDITIONAL_FEES:"https://support.squarespace.com/hc/articles/27853679334157",BANK_ONBOARDING:"https://support.squarespace.com/hc/articles/23128413582221",DISPUTED_PAYMENT:"/",EMBEDDED_ONBOARDING:"https://support.squarespace.com/hc/articles/19848492736269-Getting-started-with-Squarespace-Payments",UPLOAD_BANK_STATEMENT:"https://support.squarespace.com/hc/articles/25115829211405-Verifying-your-business-for-Squarespace-Payments",BANK_DEBIT_AUTHORIZATION:"https://www.squarespace.com/debit-bank-account-authorization",NPA_RATES:"https://support.squarespace.com/hc/articles/29215717722637",PROMOTIONAL_PRICING:"https://www.squarespace.com/s/sqsp-promotion-terms-and-conditions.pdf"},SQUARESPACE_CAPITAL:{GETTING_STARTED:"https://support.squarespace.com/hc/articles/33438575023117",CONTACT_SUPPORT:"https://support.squarespace.com/hc/requests/new?ticket_form_id=33282463246477",FAQ:"https://support.squarespace.com/hc/articles/33438570317709",MIGRATION_FAQ:"https://support.squarespace.com/hc/en-us/articles/33438570317709-Squarespace-Capital-FAQ"},CONTACT_SUPPORT:"https://support.squarespace.com/hc/requests/new",PAYMENT_METHODS:"/config/commerce/payments",DEFAULT_HOP_URL:"/",STORE_PAYMENTS:"/config/settings/selling/payments",ACCOUNT_SETTINGS:"/config/settings/payments/squarespace",PLAN_SELECTOR:"/config/settings/billing/subscriptions/website",MANAGING_PAYMENTS_ACCOUNT:"https://support.squarespace.com/hc/articles/19848508230285-Managing-your-Squarespace-Payments-account#toc-squarespace-payments-account-transfers",PAO_TRANSFER_OWNERSHIP:"https://support.squarespace.com/hc/articles/38138069267597",SQSP_PAYMENTS_IDV_KB:"https://support.squarespace.com/hc/articles/37647666413069"},P="initialSignup",m=e},541643:function(_,W,t){t.d(W,{Z:()=>X});var S=t(174161),e=t(659765),P=t(108e3);const m=3e4,c=!1,C=new Map,Z=p=>C.get(p)||{},Q=(p,O)=>{try{return JSON.stringify(p||[])}catch(x){console.error("Failed to stringify apiArgs for: ",O,x)}return"[]"},J=p=>{if(!C.has(p))return Date.now();const O=C.get(p);return Date.now()-((O==null?void 0:O.lastFetchTimestampInMs)||0)},se=p=>p!=null&&p.length?p==null?void 0:p.some(O=>O==null||O===""):!1,q=(p,O)=>{const x=se(O);return p&&x?!1:p},X=p=>{let{apiMethod:O,apiArgs:x,cacheId:R,config:U}=p;const g=U||{},{pollingIntervalInMs:oe}={...P.g,...g},Oe=!!oe,ye=Object.hasOwn(g,"enabled")?!!(U!=null&&U.enabled):!!P.g.enabled,me=(0,S.useMemo)(()=>x,[Q(x,R)]),w=q(ye,me),[$,Te]=(0,S.useState)({data:null,status:e.eE.IDLE,error:null,isLoading:w!==!1,isInitialRequestCompleted:!1,isEnabled:w,refetch:()=>{}}),K=(0,S.useMemo)(()=>`${R}_${Q(me,R)}`,[R,me]),ce=(0,S.useCallback)(V=>{const E=Date.now();K&&C.set(K,{data:V,lastFetchTimestampInMs:E,inflightRequest:null}),Te(ee=>({...ee,data:V,status:e.eE.SUCCEEDED,error:null,isLoading:!1,isInitialRequestCompleted:!0,lastFetchTimestampInMs:E}))},[K]),Pe=(0,S.useCallback)(V=>{Te(E=>({...E,data:null,status:e.eE.FAILED,error:V,isLoading:!1,isInitialRequestCompleted:!0,lastFetchTimestampInMs:Date.now()})),K&&C.set(K,{...Z(K),inflightRequest:null})},[K]),Ae=(0,S.useCallback)(()=>{const V=C.get(K),ee=J(K)>=m;return(V==null?void 0:V.data)&&!ee},[K]),re=(0,S.useCallback)(async function(){let{useCache:V=!0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(w){if(V&&C.has(K)&&!c){const E=Z(K);if(E!=null&&E.inflightRequest){E.inflightRequest.then(ce).catch(Pe);return}if(Ae()){Te(ee=>({...ee,data:E==null?void 0:E.data,status:e.eE.SUCCEEDED,error:null,isLoading:!1,isInitialRequestCompleted:!0,lastFetchTimestampInMs:Date.now()}));return}}Te(E=>({...E,error:null,status:e.eE.FETCHING,isLoading:!0}));try{const E=O(...me||[]);K&&C.set(K,{...Z(K),inflightRequest:E});const ee=await E;ce(ee)}catch(E){Pe(E)}}},[me,O,K,Ae,Pe,ce,w]);(0,S.useEffect)(()=>{re()},[K,re,w]);const Me=(0,S.useCallback)(()=>setInterval(()=>re({useCache:!1}),oe),[re,oe]);(0,S.useEffect)(()=>{if(!w)return;let V;Oe&&(V=Me());const E=()=>{document.visibilityState==="visible"&&w?(re({useCache:!Oe}),Oe&&(V=Me())):clearInterval(V)};return document.addEventListener("visibilitychange",E),()=>{clearInterval(V),document.removeEventListener("visibilitychange",E)}},[re,w,Oe,Me]);const Re=(0,S.useCallback)(()=>{re({useCache:!1})},[re]),z=Z(K);return{...$,data:Ae()&&!c?z==null?void 0:z.data:$.data,isEnabled:w,refetch:Re}}},986921:function(_,W,t){t.d(W,{Z:()=>c});var S=t(116822),e=t(659765),P=t(541643);const c=(C,Z)=>(0,P.Z)({apiMethod:S.Z.fetchPaymentAccount,apiArgs:[C],cacheId:e.oi.PaymentAccount,config:Z})},911394:function(_,W,t){t.d(W,{Z:()=>C});var S=t(671167),e=t(108e3),P=t(659765),m=t(541643);const C=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.g;return(0,m.Z)({apiMethod:S.Z.fetchPaymentSettings,cacheId:P.oi.PaymentSettings,config:Z})}},377021:function(_,W,t){t.d(W,{f:()=>P});var S=t(392338),e=t.n(S);const P=m=>m.charAt(0)==='"'||m.charAt(0)==="'"||m.includes(",")?m:`"${m}"`},77811:function(_,W,t){t.d(W,{Z:()=>Me});var S=t(598347),e=t(174161),P=t(482053),m=t(338465),c=t(938875),C=t(352635),Z=t(526268),Q=t.n(Z),J=t(158127),se=t(132782),q=t(538312),M=t(471917),X=t(990845),p=t(399913),O=t(47362),x=t(842132),R=t(337061),U=t(173606),g=t(651780),oe=t(708835),Oe=t.n(oe),ye=t(500415),me=t(334358),w=t(586350),$=t(938077);const Te=Re=>Re===Oe().ORGANIZATION?{isAdmin:(0,g.RN)(),scope:ye.sX.ORGANIZATION,trackRename:me.UV,trackOpenInput:me.e3}:Re===Oe().PRO_USER?{isAdmin:!0,scope:ye.sX.ACCOUNT,trackRename:me.UV,trackOpenInput:me.e3}:{isAdmin:!0,scope:ye.sX.WEBSITE,trackRename:me.UV,trackOpenInput:me.e3},K=Re=>{let{entryName:z,sectionId:V,isHovering:E,setIsHovering:ee,selectedSubcategory:Be,hasNamePlaceholder:at}=Re;const[ot,be]=(0,e.useState)(!1),[_e,Ve]=(0,e.useState)(z),[pe,st]=(0,e.useState)(null),Ge=(0,R.zC)(),{isAdmin:dt,scope:yt,trackRename:Ft,trackOpenInput:mt}=Te(Be),vt=dt&&E,[Bt,ke]=(0,e.useState)(!1),[It,Ot]=(0,e.useState)(!1),[en,Xe]=(0,e.useState)(!1);Ge((0,w._n)({sectionId:V}));const Ne=He=>{const rt=(0,$.V9S)((0,R.d6)()).find(Ee=>Ee.id===He);return rt==null?void 0:rt.section},Pt=()=>{if(!_e){Xe(!0);return}Ft({scope:yt,savedSectionContext:Ne(V),updatedSectionName:_e}),Ge((0,U.ah)(V,_e,yt)),Ot(!0),ke(!0),Xe(!1)},jt=He=>{x.Z.isEnter(He)&&(He.preventDefault(),He.stopPropagation(),Pt())},Lt=He=>{x.Z.isEsc(He)&&(He.preventDefault(),He.stopPropagation(),Ve(z),be(!1))},Dt=()=>{Ve(z),be(!1),Ot(!1)},Kt=()=>{dt&&(be(!0),Xe(!1),mt({scope:yt,savedSectionContext:Ne(V),currentSectionName:z}))},et=He=>{He.length<200&&Ve(He)};return(0,e.useEffect)(()=>{ke(!1)},[ke,z]),(0,e.useEffect)(()=>{pe&&(pe.blur(),pe.focus())},[pe]),ot?e.createElement(m.Z,{my:3,display:"flex",alignItems:"flex-start",position:"relative",overflow:"hidden",paddingLeft:3},en?e.createElement(M.Z,{sx:{display:"inline-block",position:"absolute",top:0,left:0},color:"red.300"}):e.createElement(e.Fragment,null,e.createElement(X.Z,{sx:{display:"inline-block",position:"absolute",top:It?0:"100%",left:0,transition:"top 0.2s ease-in-out"},"data-test":"change-success"}),e.createElement(p.Z,{sx:{display:"inline-block",position:"absolute",top:It?"-100%":0,left:0,transition:"top 0.2s ease-in-out"}})),e.createElement(O.Z,{placeholder:"",value:_e,onChange:et,onKeyPress:jt,onKeyUp:Lt,onBlur:Dt,ref:st,"data-test":"catalog-name",sx:{flexGrow:1,marginLeft:C.space[1],fontSize:C.fontSizes[2],fontWeight:C.fontWeights.medium,lineHeight:C.lineHeights[1],marginBottom:C.space[2]}})):e.createElement(m.Z,{mt:3,mb:5,onClick:Kt,onFocus:()=>ee(!0),onBlur:()=>ee(!1),sx:{display:"flex",alignItems:"flex-start",position:"relative",overflow:"hidden",transition:"padding 0.2s ease",padding:"0",paddingLeft:vt?"22px":"0",cursor:"pointer",appearance:"none",border:"0",backgroundColor:"transparent"},as:"button"},e.createElement(p.Z,{sx:{color:C.colors.gray[200],display:"inline-block",marginRight:C.space[1],position:"absolute",transition:"left 0.2s ease",left:vt?"0":"-22px"}}),e.createElement(q.Z.Caption,{fontWeight:500,color:at?"fg.disabled":C.colors.gray[200],textAlign:"left"},Bt?_e:z))};var ce=t(605254);const Pe=48,Ae="catalog-entry-container",re=Re=>{let{isSelected:z,onClickCheckbox:V,showCheckbox:E,onFocus:ee,onBlur:Be}=Re;return e.createElement(P.Z,{alignItems:"center",justifyContent:"center",position:"absolute",onClick:V,onFocus:ee,onBlur:Be,zIndex:2,tabIndex:"0",sx:{top:C.space[4],left:C.space[4],height:C.space[6],width:C.space[6],backgroundColor:"white",border:"1px solid",borderColor:"gray.800",borderRadius:"4px",opacity:E?1:0,transition:"opacity 300ms ease-in-out"}},z?e.createElement(c.Z,{fill:"gray.100"}):null,e.createElement("input",{checked:z,style:{position:"absolute",opacity:0,margin:0,cursor:"pointer"},type:"checkbox",tabIndex:-1}))};function Me(Re){let{id:z,sectionId:V,onAddEntry:E,html:ee,listContainerWidth:Be,frameWidth:at,css:ot={},Accessory:be,doesSupportMultiselect:_e,selectedSectionIds:Ve,onClickCheckbox:pe,isLastChild:st,maxSectionHeight:Ge,hasNameEditing:dt,entryName:yt,selectedSubcategory:Ft,hasNamePlaceholder:mt}=Re;const[vt,Bt]=(0,e.useState)(null),[ke,It]=(0,e.useState)(null),[Ot,en]=(0,e.useState)(0),[Xe,Ne]=(0,e.useState)(!1),[Pt,jt]=(0,e.useState)(0),[Lt,Dt]=(0,e.useState)(!1),Kt=!!Ve.find(rt=>rt===z),et=dt&&yt;(0,e.useEffect)(()=>{if(ke&&vt&&Be>0){var rt,Ee,Mt;const Rt=Be/ke.offsetWidth,lt=(rt=ke.querySelector(".has-section-divider"))===null||rt===void 0?void 0:rt.getAttribute("data-current-context"),Ue=lt&&((Mt=JSON.parse(lt))===null||Mt===void 0||(Ee=Mt.divider)===null||Ee===void 0?void 0:Ee.stroke),gn=Ue!=null&&Ue.thickness&&Ue.style!==Q().NONE?`${Ue.thickness.value}${Ue.thickness.unit}`:"0px";vt.style.height=`calc((${ke.offsetHeight}px + ${gn}) * ${Rt})`,en(Rt)}},[ke,Be,vt,Ot,at,Pt]),(0,e.useEffect)(()=>{const rt=ee.includes("gallery-section-wrapper"),Ee=ee.includes("blog-masonry"),Mt=ee.includes("sqs-block-form");if((rt||Ee||Mt)&&ke&&vt){const Rt=()=>{setTimeout(()=>jt(lt=>lt+1),100)};return ke.addEventListener("load",Rt,{capture:!0}),()=>{ke.removeEventListener("load",Rt,{capture:!0})}}},[ke,vt,ee]),(0,e.useEffect)(()=>{ke&&ke.setAttribute("inert","")},[ke,ee]);const He=(0,e.useCallback)(()=>{if(_e&&(Lt||Ve.length>0)){pe(z);return}(_e?Ve.length===0:!0)&&E(z)},[_e,z,E,pe,Ve.length,Lt]);return e.createElement("div",{onMouseEnter:()=>Ne(!0),onMouseLeave:()=>Ne(!1)},e.createElement(m.Z,{ref:Bt,"data-test":"catalog-item",mb:st||et?0:6,overflow:"hidden",position:"relative",minHeight:Pe,maxHeight:Ge,onKeyDown:(0,J.Z)(He),tabIndex:"0",sx:ce.v?{border:`1px solid ${C.colors.gray[800]}`,borderRadius:"4px",":hover":{boxShadow:`${C.shadows[200]}`,transform:"scale(1.015)",zIndex:1}}:{filter:"drop-shadow(0px 4px 8px rgba(0, 0, 0, 0.12)) drop-shadow(0px 0px 1px rgba(0, 0, 0, 0.12))",":hover":{filter:"drop-shadow(0px 8px 16px rgba(0, 0, 0, 0.12)) drop-shadow(0px 0px 1px rgba(0, 0, 0, 0.12))",transform:"translatey(-5px)",zIndex:1}},css:{cursor:"pointer",minHeight:Pe,maxHeight:Ge,transition:ce.v?"0.3s ease-out":".3s cubic-bezier(.455,.03,.515,.955) 0s",transitionProperty:"transform, filter",...ot},style:{width:Be}},_e?e.createElement(re,{isSelected:Kt,onFocus:()=>Dt(!0),onBlur:()=>Dt(!1),onClickCheckbox:()=>pe(z),showCheckbox:Xe||Kt||Lt||Ve.length>0}):null,e.createElement("div",{ref:It,dangerouslySetInnerHTML:{__html:ee},className:Ae,style:{pointerEvents:"none",transform:`scale(${Ot})`,transformOrigin:"0% 0%",width:"100vw",overflow:"hidden"}}),e.createElement(m.Z,{onClick:He,position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px",...(0,se.getGuidanceEngineDataAttribute)(se.ElementDataIds.CATALOG_ENTRY_CLICK_TARGET)}),be?e.createElement(m.Z,{position:"absolute",top:4,right:4},e.createElement(be,null)):null),et&&Ft&&e.createElement(K,{entryName:yt,hasNamePlaceholder:mt,sectionId:V,isHovering:Xe,setIsHovering:Ne,selectedSubcategory:Ft}))}},873718:function(_,W,t){t.d(W,{Z:()=>Q});var S=t(174161),e=t(843156),P=t(337061),m=t(938077);const c=S.createContext({});function C(J){let{children:se}=J;const[q,M]=(0,S.useState)(!1),X=(0,P.Ze)(m.x38),p=(0,P.Ze)(m.Zxu),O=(0,P.Ze)(m.j2F),x=(0,P.Ze)(m.QbO),R=(0,S.useCallback)(Oe=>e.Z.clickMenuItemInDoneMenu({button:Oe,collectionId:p,itemId:X,editCount:O,netEditCount:x}),[p,X,O,x]),U=(0,S.useCallback)(()=>{M(!0),R("open-done")},[R]),g=(0,S.useCallback)(()=>{M(!1)},[]),oe=(0,S.useMemo)(()=>({openDoneConfirm:U,isDoneConfirmOpen:q,closeDoneConfirm:g,fireClickMenuItemInDoneMenu:R}),[U,g,R,q]);return S.createElement(c.Provider,{value:oe},se)}const Z=c.Consumer,Q={Provider:C,Consumer:Z}},757681:function(_,W,t){t.d(W,{Jb:()=>C,T5:()=>se,TI:()=>M,Zl:()=>c,cQ:()=>P,cc:()=>Q,dO:()=>J,gi:()=>e,ot:()=>S,sF:()=>q,wQ:()=>Z,xN:()=>m});const S="FRAME_INTERACTION_CLICK",e="FRAME_INTERACTION_MOUSE_UP",P="FRAME_INTERACTION_MOUSE_DOWN",m="FRAME_INTERACTION_MOUSE_ENTER",c="FRAME_INTERACTION_MOUSE_LEAVE",C="FRAME_INTERACTION_MOUSE_MOVE",Z="FRAME_INTERACTION_MOUSE_OVER",Q="FRAME_INTERACTION_FOCUS",J="FRAME_INTERACTION_BLUR",se="FRAME_INTERACTION_SCROLL",q="FRAME_INTERACTION_RESIZE",M="FRAME_INTERACTION_RTE_MOUSE_DOWN"},409093:function(_,W,t){t.d(W,{$c:()=>C,Mu:()=>X,Yf:()=>M,Z8:()=>Z,mr:()=>J,tR:()=>Q,wy:()=>q});var S=t(916661),e=t(899118),P=t(777826),m=t(743357),c=t.n(m);const C=p=>{const O=p.target;return S.Z.isSevenOne()?!!O.closest("."+c().card):!!O.closest(".sqs-frontend-overlay-editor-widget")},Z=p=>p.metaKey&&(0,P.Z)(P.m.EXPERIMENTAL_FEATURES),Q=p=>({x:p.clientX,y:p.clientY,target:p.target}),J=p=>{p.preventDefault(),p.stopPropagation(),p.stopImmediatePropagation()},se=[/^\/paywall\//i,/^\/pages\/[^/]+\/paywall/i,/^\/pages\/system-pages\/[^/]+/i,/slide-style$/i],q=p=>se.some(O=>O.test(p))||!p.includes("custom-css")&&p.startsWith("/design/")&&p!=="/design/",M=p=>{p.current&&p.current.node&&(p.current.node.remove(),p.current=null)},X=function(p,O){let x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"default";if(p.current&&(!O.current||O.current.type!==x)){M(O);const R=(0,e.o)({element:"style",content:`* { cursor: ${x} !important; }`});O.current={node:R,type:x},p.current.appendChild(R)}}},374852:function(_,W,t){t.d(W,{K:()=>me,pH:()=>ye,ZP:()=>w});var S=t(156130),e=t(174161),P=t(203119),m=t(754861),c=t(930127),C=t(337061),Z=t(723796),Q=t(291380),J=t(196735),se=t(879549);function q($,Te,K){return Te in $?Object.defineProperty($,Te,{value:K,enumerable:!0,configurable:!0,writable:!0}):$[Te]=K,$}function M($){const Te=(0,Q.Z)($),K=(0,Z.hu)(Te,"#ff00ff");class ce extends e.Component{componentDidMount(){window.setTimeout(()=>{this.frameLoader&&this.frameLoader.destroy();const Ae=document.getElementById("sqs-site-frame");Ae&&(this.frameLoader=(0,J.Z)(Ae,this.handleFrameLoad))},0)}componentWillUnmount(){var Ae;(Ae=this.frameLoader)===null||Ae===void 0||Ae.destroy()}render(){const{tweakApi:Ae,pageType:re,ready:Me}=this.state;return Me?e.createElement($,{...this.props,tweakApi:Ae,pageType:re}):null}constructor(...Ae){super(...Ae),q(this,"state",{ready:!1}),q(this,"handleFrameLoad",re=>{K("handleFrameLoad",re);const Me=re.contentWindow.Static.SQUARESPACE_CONTEXT,{tweakApi:Re,pageType:z}=(0,se.Z)(Me.pageType,Me);Re.setFrameWindow(re.contentWindow),Re.setFramePositionGetter(()=>re.getBoundingClientRect()),this.setState({tweakApi:Re,pageType:z,ready:!0})})}}return ce}var X=t(433260),p=t(861385),O=t(938077),x=t(27409),R=t(413019),U=t(69637);const g=[x.COLORS_PANEL_SELECT_PALETTE,x.COLORS_PANEL_GENERATE_PALETTE,x.COLORS_PANEL_UPDATE_PALETTE_COLOR,x.COLORS_PANEL_UPDATE_TWEAK_COLOR];function oe(){for(const $ of g)(0,R.L8)($,{tracer:U.Z,requireStart:!0})&&performance.clearMarks(`${R.lv}${$}`)}const Oe=3,ye=(0,P.Z)($=>{const{isSiteStylesEditing:Te,loading:K,loaded:ce,saving:Pe,fetchSiteStylesData:Ae,pageType:re,tweakApi:Me,tweakDefinitions:Re,activeFontPack:z,webFontsByCssString:V,Y:E}=$,ee=(0,e.useRef)(),Be=X.Z.getInstance($,ee),at=(0,e.useRef)($),ot=(0,e.useRef)(0),be=Me?Me.getFrameWindow():null,_e=(0,e.useMemo)(()=>{var pe,st,Ge;return(0,c.q)((Ge=window.Static)===null||Ge===void 0||(st=Ge.SQUARESPACE_CONTEXT)===null||st===void 0||(pe=st.website)===null||pe===void 0?void 0:pe.language)},[]);(0,e.useEffect)(()=>{!K&&!ce&&!Pe&&ot.current<Oe&&(ot.current++,Ae({pageType:re,tweakApi:Me,languageSubset:_e}))},[K,ce,Pe,Ae,re,Me,_e]),(0,e.useEffect)(()=>{ce&&(ot.current=0)},[ce]),(0,e.useEffect)(()=>{const pe={};z&&z.masterFonts&&z.fontMappings&&(z.masterFonts.forEach(st=>{let{fontValue:Ge}=st;const dt=V[Ge.fontFamily];dt&&(pe[Ge.fontFamily]=dt)}),z.fontMappings.forEach(st=>{let{customFontValue:Ge}=st;if(!Ge)return;const dt=V[Ge.fontFamily];dt&&(pe[Ge.fontFamily]=dt)})),Object.values(pe).forEach(st=>(0,m.m)(st,{win:be}))},[Re,be,V,z]),(0,e.useEffect)(()=>{Be==null||Be.update(at.current,$)}),(0,e.useEffect)(()=>{Te&&Be&&Be.updateVisibleTweaksBasedOnDom()},[Te,Be]);const Ve=E.Global;return(0,e.useEffect)(()=>{const pe=Ve==null?void 0:Ve.on("colors:updateThemeStyles",oe);return()=>{pe==null||pe.detach()}},[Ve]),(0,e.useEffect)(()=>{at.current=$}),null});ye.defaultProps={isSiteStyles:!0};const me=($,Te)=>{const{tweakApi:K}=Te;return{tweakWindowNode:K?K.getFrameWindow():null,activeThemeName:(0,O.mr4)($),websiteColors:(0,O.r4s)($),colorVariableDefinitions:(0,O.tSe)($),activeFontPack:(0,O.HMF)($),isSavingColors:(0,O.rdr)($),isSavingFonts:(0,O.rdq)($),webFontsByCssString:(0,O.LgL)($),...$.cmsUndoStack.present.tweaks}},w=M((0,C.a9)(me,{fetchSiteStylesData:p.DD,setTweakFilterProperties:p.jE})(ye))},567752:function(_,W,t){t.d(W,{Z:()=>S});function S(){return window.location.pathname==="/config/blueprint"}},302186:function(_,W,t){t.d(W,{MI:()=>m,jg:()=>C,sI:()=>c});var S=t(815211),e=t.n(S),P=t(714487);const m={HOMEPAGE:{title:(0,P.t)("Cannot Delete Homepage",null,{project:"apps.ContentBrowser"}),message:(0,P.t)("This page cannot be deleted because it is your homepage. Please assign a new homepage before deleting.",null,{project:"apps.ContentBrowser"})},CONTAINS_HOMEPAGE:{title:(0,P.t)("Cannot Delete Collection",null,{project:"apps.ContentBrowser"}),message:(0,P.t)("This collection cannot be deleted because it contains your homepage. To delete this collection, either move the homepage or set another page as your homepage.",null,{project:"apps.ContentBrowser"})}},c={CREATE_LINK:(0,P.t)("Add a Link",null,{project:"apps.App",notes:"Pages Panel Add Link"}),EDIT_LINK:(0,P.t)("Edit Link",null,{project:"apps.App",notes:"Pages Panel Edit Link"})},C={url:"",title:(0,P.t)("Order Now",null,{project:"apps.ContentBrowser"}),externalServiceProviderType:e().CHOWNOW,newWindow:!1}},135982:function(_,W,t){t.d(W,{Z:()=>x});var S=t(174161),e=t(567713),P=t(950570),m=t(339951),c=t(337061),C=t(938077),Z=t(295997),Q=t(318512),J=t(732706),se=t(874644),q=t(916661),M=t(511063);const X=S.lazy(()=>Promise.all([t.e("89946"),t.e("79144")]).then(t.bind(t,921314))),p=S.lazy(()=>Promise.all([t.e("89946"),t.e("49")]).then(t.bind(t,817456))),O=R=>R.isControllerInitialized;function x(R){let{shouldHideEditButton:U,isSiteExpired:g,...oe}=R;const Oe=(0,c.Ze)(C.aEP),ye=(0,c.Ze)(C.Zxu),me=(0,c.Ze)(C.gEH),w=(0,c.Ze)(C.x38),$=(0,c.Ze)(C.Z3A),Te=(0,c.Ze)(C.gqq),K=(0,c.Ze)(C.EeC),ce=(0,c.Ze)(C.FCp),Pe=(0,c.Ze)(C.fPO),Ae=(0,c.Ze)(C.UYk),re=(0,c.Ze)(C.fPO)==="HEADER",Me=(0,c.Ze)(C.ML5),Re=K&&!!ye;(0,Z.Dd)({shouldListen:!oe.shouldHidePreviewButton&&!(0,se.qN)(Oe)}),(0,Q.t)({shouldListen:(0,M.Z)()&&Oe===se.hn.PAGE_EDIT_FULL_SCREEN});const z=(0,P.XC)(),V=(0,m.N)(z,O),E=!q.Z.isSevenOne()||V,ee=(0,J.Z)({isSiteExpired:g,shouldHideEditButton:U,collectionId:ye});return S.createElement(e.Z.Renderer,{...oe,collectionId:ye,item:me,itemId:w,isDirty:$,isSaving:Te||ce,editingSectionArea:Pe,canRedo:Ae,isReady:E&&Re&&!!(!w||me),isSiteExpired:g,frameMode:Oe,shouldHideEditButton:ee,isHeaderEditing:re,isEditModePreview:Me,render:{"mobile-0":X,"mobile-100":X,default:p}})}},732706:function(_,W,t){t.d(W,{Z:()=>Z});var S=t(174161),e=t(24175),P=t.n(e),m=t(991735),c=t(730842);const Z=Q=>{let{isSiteExpired:J,shouldHideEditButton:se,collectionId:q}=Q;return(0,S.useMemo)(()=>J||se||!c.Z.isCollectionIdDraft(q)&&!m.Z.hasPermission(P().CONFIG_CONTENT_EDIT),[se,J,q])}},777826:function(_,W,t){t.d(W,{Z:()=>q,m:()=>Q});var S=t(625392),e=t.n(S),P=t(762379),m=t(444867),c=t.n(m),C=t(331949),Z=t(916661);const Q={EXPERIMENTAL_FEATURES:"EXPERIMENTAL_FEATURES",IMPORT_EXPORT:"IMPORT_EXPORT"},J={[Q.EXPERIMENTAL_FEATURES]:()=>P.Z.isFeatureEnabled(c().TWEAKS_V2_EXPERIMENTAL_FEATURES)||!!window.Static.SQUARESPACE_CONTEXT.impersonatedSession,[Q.IMPORT_EXPORT]:()=>P.Z.isFeatureEnabled(c().TWEAKS_V2_EXPERIMENTAL_FEATURES)||!!window.Static.SQUARESPACE_CONTEXT.impersonatedSession||(0,C.U)()&&!Z.Z.isSevenOne()},se=M=>J[M](),q=e()(se)},936347:function(_,W,t){t.d(W,{Z:()=>P});var S=t(174161);const e=100;function P(m){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;const[C,Z]=(0,S.useState)(m);return(0,S.useEffect)(()=>{const Q=setTimeout(()=>{Z(m)},c);return()=>{clearTimeout(Q)}},[m,c]),C}},548453:function(_,W,t){t.r(W),t.d(W,{default:()=>In});var S=t(940426),e=t(845076),P=t.n(e),m=t(174161),c=t(714487),C=t(906194),Z=t(762379),Q=t(444867),J=t.n(Q),se=t(916661),q=t(795478),M=t.n(q),X=t(948301),p=t.n(X);function O(j,B,f){return B in j?Object.defineProperty(j,B,{value:f,enumerable:!0,configurable:!0,writable:!0}):j[B]=f,j}var x;class R extends(x=m.Component){render(){const{device:B,selected:f,...ae}=this.props,le=P()(p()[B],{[p().selected]:f});return m.createElement("div",{...ae,className:le})}}O(R,"propTypes",{device:M().oneOf([C.Z.DESKTOP,C.Z.TABLET,C.Z.PHONE]).isRequired,selected:M().bool,title:M().string});const U=R;var g=t(337061),oe=t(938077),Oe=t(897820);function ye(j,B,f){return B in j?Object.defineProperty(j,B,{value:f,enumerable:!0,configurable:!0,writable:!0}):j[B]=f,j}const me={[C.Z.TABLET]:(0,c.t)("Tablet View",null,{project:"apps.App"}),[C.Z.DESKTOP]:(0,c.t)("Desktop View",null,{project:"apps.App"}),[C.Z.PHONE]:(0,c.t)("Phone View",null,{project:"apps.App"})};class w extends m.PureComponent{render(){const{isOpen:B}=this.props,f=P()(p().container,{[p().hidden]:!B},{[p().open]:B},this.props.className);return m.createElement("div",{className:f,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},m.createElement("div",{className:p().toggleClickArea,onClick:this.props.onClick}),m.createElement("div",{className:p().actualToggle}),[C.Z.PHONE,C.Z.TABLET,C.Z.DESKTOP].map(this.renderDeviceView))}constructor(...B){super(...B),ye(this,"bindMarker",f=>({key:f,selected:this.props.deviceView===f,device:f,title:me[f],onClick:this.getClickHandler(f)})),ye(this,"getClickHandler",f=>ae=>{if(!this.props.isOpen){this.props.onClick();return}const le=document.querySelector(".preview-viewport"),We=100;le.style.opacity=0,setTimeout(()=>{this.props.onSetDeviceView(f,"v7-toolbar",!1)},We),setTimeout(()=>{le.style.opacity=1},We*2)}),ye(this,"renderDeviceView",f=>m.createElement(U,this.bindMarker(f)))}}ye(w,"propTypes",{className:M().string,deviceView:M().string.isRequired,isOpen:M().bool,onClick:M().func.isRequired,onMouseEnter:M().func,onMouseLeave:M().func,onSetDeviceView:M().func.isRequired}),ye(w,"defaultProps",{isOpen:!1});const $=(0,g.a9)(j=>({deviceView:(0,oe.Hlz)(j)}),{onSetDeviceView:Oe.Kw})(w);var Te=t(58468),K=t(489204),ce=t(657010),Pe=t(161381),Ae=t(511116),re=t(874644),Me=t(482053),Re=t(969145);const z=j=>{const B=(0,Re.F)(),f=parseInt(B.space[6],0),ae=parseInt(B.sizes.sizes[350],10);return(0,m.useCallback)((()=>{let le=0;return(We,Ze)=>(Ze===0&&(le=0),j?We?-1*(j-le)*ae-f:(le++,0):0)})(),[j,f,ae])};var V=t(338465);const E="FabContainer",ee=m.forwardRef((j,B)=>{let{isInView:f,translateX:ae,...le}=j;const{easing:We}=(0,Re.F)(),Ze=(0,m.useRef)(),te=ae<Ze.current;(0,m.useEffect)(()=>{Ze.current=ae},[ae]);const k=te?We.product.entrance:We.product.exit;return m.createElement(V.Z,{ref:B,transform:"translateX(0px)",paddingLeft:3,minWidth:"sizes.350",sx:{transition:`transform 400ms ${k}`,transform:`translateX(${ae}px)`},...le})});ee.displayName=E,ee.propTypes={isInView:M().bool.isRequired,translateX:M().number};const Be=ee;var at=t(829447);const ot=j=>m.Children.toArray(j).filter(B=>B&&m.isValidElement(B)&&B.type.displayName===E),be=j=>{let{children:B,isReady:f}=j;const ae=ot(B),le=z(ae.length),[We,Ze]=(0,m.useState)(at.Z.getState().isBannerVisible),te=()=>{const k=at.Z.getState();Ze(k.isBannerVisible)};return(0,m.useEffect)(()=>(at.Z.listen(te),()=>at.Z.unlisten(te)),[]),m.createElement(Me.Z,{position:"fixed",bottom:We?10:2,left:"100%",zIndex:1e3,paddingBottom:3,flexDirection:"row-reverse"},ae.map((k,Ye)=>m.cloneElement(k,{translateX:le(k.props.isInView&&f,Ye)})))};be.propTypes={isReady:M().bool};const _e=be;function Ve(j){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(0,m.useCallback)(function(){for(var f=arguments.length,ae=new Array(f),le=0;le<f;le++)ae[le]=arguments[le];setTimeout(()=>{j(...ae)},B)},[j,B])}const pe=j=>{let{isLoaded:B,router:f}=j;const[ae,le]=(0,m.useState)(!1),[We,Ze]=(0,m.useState)(!0),te=(0,g.Ze)(oe.aEP),k=Ve(le),Ye=f.getCurrentRoute().width===K.Z.FULL_WITHOUT_TUCKED_FRAME;return(0,m.useEffect)(()=>{const Yt=[re.hn.PREVIEW_LEFT_PANEL,re.hn.PAGE_EDIT_RIGHT_PANEL,re.hn.PAGE_EDIT_FULL_SCREEN];Ze(!Yt.includes(te)||Ye)},[te,Ye]),(0,m.useMemo)(()=>m.createElement(_e,{isReady:B},m.createElement(Be,{key:"progress-indicator",isInView:ae&&!We},m.createElement(Ae.Z,{onRequestVisibilityChange:k,disabled:!ae||We}))),[B,ae,k,We])};pe.propTypes={isLoaded:M().bool,location:M().object,router:ce.Z};const st=(0,Pe.Z)(pe);var Ge=t(365744),dt=t(930651),yt=t(175424),Ft=t(228946),mt=t(538312),vt=t(516865),Bt=t(600194),ke=t(994336),It=t.n(ke),Ot=t(79306),en=t(120413),Xe=t.n(en),Ne=t(934951),Pt=t(70426);const jt={appear:Xe().hidden,appearActive:Xe().animatingIn,appearDone:Xe().visible,enter:Xe().hidden,enterActive:Xe().animatingIn,enterDone:Xe().visible,exit:Xe().visible,exitActive:Xe().animatingOut,exitDone:Xe().hidden},Lt={enter:400,exit:150};function Dt(j){let{title:B,body:f,onRequestClose:ae,isVisible:le,onAnimatedIn:We,onAnimatedOut:Ze}=j;const te=(0,m.useRef)(null),k=(0,m.useMemo)(()=>(0,Ot.v4)(),[]);return m.createElement(dt.Z,{nodeRef:te,in:le,timeout:Lt,classNames:jt,onEntering:We,onExited:Ze,appear:!0,unmountOnExit:!0,mountOnEnter:!0},m.createElement("div",{className:P()(Ft.unmask,Xe().wrapper),role:"alert","aria-labelledby":k},m.createElement(Me.Z,{ref:te,className:Xe().banner,borderLeft:2,borderLeftColor:"fg.onStrong",backgroundColor:"bg.accent.strong",boxShadow:"300",padding:4,flexDirection:"row",alignItems:"center",gap:4},m.createElement(Bt.Z,{color:"white",sx:{flexShrink:0}}),m.createElement(V.Z,{sx:{flexGrow:1}},m.createElement(mt.Z.Body,{id:k,color:"white",fontWeight:"semibold",margin:0},B),m.createElement(mt.Z.Body,{color:"white",margin:0},f)),m.createElement(vt.Z.Tertiary,{color:"white",sx:{flexShrink:0,flexGrow:0},onClick:ae},m.createElement(Ne.T,{project:"apps.App"},"Close")))))}var Kt=null;const et="sqs_seven_one_migration_banner_dismissed";function He(){const[j,B]=(0,m.useState)(null),f=(0,re.qN)((0,g.Ze)(oe.aEP)),[ae,le]=(0,m.useState)(()=>It().get(et)==="1"),[We,Ze]=(0,m.useState)(!1);if((0,m.useEffect)(()=>{f&&Ze(!1)},[f]),!(0,Pt.VJ)())return null;const te=()=>{le(!0);const Ye=new Date(Date.now()+1e3*60*60*24).toUTCString();It().set(et,"1",{expires:Ye,path:"/"})};let k=null;return f&&!We?k=1:!f&&!ae&&(k=0),m.createElement(m.Fragment,null,m.createElement(Dt,{title:m.createElement(Ne.T,{project:"apps.App"},"Complete update to version 7.1"),body:m.createElement(Ne.T,{project:"apps.App"},"To access all 7.1 features, publish to complete the update."),isVisible:k===0&&(j===0||j===null),onRequestClose:te,onAnimatedIn:()=>{B(0)},onAnimatedOut:()=>{B(Ye=>Ye===0?null:Ye)}}),m.createElement(Dt,{title:m.createElement(Ne.T,{project:"apps.App"},"You are previewing your 7.1 website"),body:m.createElement(Ne.T,{project:"apps.App"},"This preview is only visible to you."),isVisible:k===1&&(j===1||j===null),onRequestClose:()=>{Ze(!0)},onAnimatedIn:()=>{B(1)},onAnimatedOut:()=>{B(Ye=>Ye===1?null:Ye)}}))}var rt=t(167820),Ee=t.n(rt),Mt=t(361282),Rt=t(833171),lt=t(331280),Ue=t(219190),gn=t(511063);function ht(j,B,f){return B in j?Object.defineProperty(j,B,{value:f,enumerable:!0,configurable:!0,writable:!0}):j[B]=f,j}const kt="sqs-device-view-sunken";class xt extends m.Component{static getDerivedStateFromProps(B,f){return f.oldRight!==B.explicitStyles.right?{hidden:!1,oldRight:B.explicitStyles.right}:{oldRight:B.explicitStyles.right}}componentDidMount(){var B;this.toggleIframeHiddenForFocus(),(B=this.containerRef.current)===null||B===void 0||B.addEventListener("transitionstart",this.ensureIframeVisible)}render(){const{hidden:B}=this.state,{explicitStyles:f,className:ae,frameMode:le,is70InManageIndexMode:We,is70DeviceViewTrayOpen:Ze,setIs70DeviceViewTrayOpen:te,contentAreaClassName:k,toggleFullScreenPreviewMode:Ye,deviceView:tn,isSaving:Yt,isFrameLoaded:ft}=this.props,bt=P()(ae,{[Ee().fullscreen]:(0,re.BX)(le)},{[Ee().deviceViewOpen]:!se.Z.isSevenOne()&&Ze&&le===re.hn.PREVIEW_LEFT_PANEL}),zt=P()(Ee().deviceViewFrame,{[Ee().fluidEngineDeviceView]:!Z.Z.isFeatureEnabled(J().FLUID_ENGINE_OPT_OUT)},{[Ee()[tn]]:se.Z.isSevenOne()||le===re.hn.PREVIEW_LEFT_PANEL},{[Ee().deviceViewFrameNewStackedIndex]:se.Z.isSevenOne()},{[Ee().isSaving]:Yt}),nn={visibility:B||this.props.isSiteFrameOverlayOpen?"hidden":"visible",height:"100%"},Ut=se.Z.isSevenOne()&&!(0,re.qN)(le);return m.createElement("div",{className:bt,style:f,ref:this.containerRef,onTransitionEnd:this.toggleIframeHiddenForFocus},m.createElement("div",{style:nn},!se.Z.isSevenOne()&&!We&&m.createElement($,{className:Ee().deviceView,isOpen:Ze,onClick:()=>te(!Ze),onMouseLeave:this.handleMouseLeave}),this.props.toolbar,m.createElement(st,{isLoaded:ft}),m.createElement("div",{className:P()(Ee().deviceViewContentArea,k,Ge._),"data-test":"device-view-frame",onWheel:this.scrollFrameOnWheel},Ut&&m.createElement(dt.Z,{in:le===re.hn.PREVIEW_FULL_SCREEN,timeout:560,className:"shrink-button-transition"},(0,gn.Z)()?m.createElement("div",null,m.createElement("button",{className:Ee().closeButton,onClick:Ye,"aria-label":(0,c.t)("Close full screen preview",null,{project:"apps.App"})},m.createElement(Ue.Z,{className:Ee().closeButtonIcon,style:{position:"absolute",left:"43px",top:"10px",width:"22px",height:"22px"}}))):m.createElement("div",null,m.createElement("div",{className:Ee().shrinkButtonContainer},m.createElement("div",{"aria-label":(0,c.t)("Shrink page preview",null,{project:"apps.App"}),onClick:Ye,className:Ee().shrinkButton})))),m.createElement("div",{className:zt},this.props.children)),(0,Pt.VJ)()?m.createElement(He,null):null))}constructor(B){super(B),ht(this,"containerRef",void 0),ht(this,"handleMouseLeave",()=>{this.props.deviceView===C.Z.DESKTOP&&this.props.setIs70DeviceViewTrayOpen(!1)}),ht(this,"toggleIframeHiddenForFocus",()=>{var f;const ae=(f=this.containerRef.current)===null||f===void 0?void 0:f.getBoundingClientRect(),le=document.body.getBoundingClientRect();ae&&this.setState({hidden:ae.width===0||ae.left>le.width})}),ht(this,"ensureIframeVisible",()=>{this.setState({hidden:!1})}),ht(this,"scrollFrameOnWheel",f=>{var ae;if(!(f.target instanceof HTMLElement&&f.target.classList.contains(Ee().deviceViewContentArea)))return;const le=(ae=(0,yt.wo)())===null||ae===void 0?void 0:ae.documentElement;le&&(le.scrollTop+=f.deltaY)}),this.containerRef=m.createRef(),this.state={}}}const pt=j=>{let{router:B,routeWidthSize:f,isPreviewTuckedOrHidden:ae,...le}=j;const We=(0,g.Ze)(oe.gqq),[Ze,te]=(0,m.useState)(!1);(0,m.useEffect)(()=>{const ft=document.querySelector("html");ft&&ft.classList.toggle(kt,Ze)},[Ze]);const k=(0,g.Ze)(oe.aEP),{width:Ye}=(0,m.useContext)(Rt.Z.Context),tn=m.useMemo(()=>{let ft="translate3d(0, 0, 0)";const{navigationWidth:bt="0px"}=(0,lt.rM)()?{}:{navigationWidth:Ye};if((0,re.BX)(k))return{width:"100%",left:0,right:0,transform:ft};const zt=Mt.ZP.getBackgroundRoute(B),nn=zt==null?void 0:zt.isPanelRightPositioned,Ut=Ge.o,bn=2*Ut;let On=`calc(100% - ${f} - ${Ut}px - ${bt})`;const vn=Ze?`${Ge.o*2}px`:0;return ae&&!nn?(ft=`translate3d(calc(${f} + ${bn}px + ${bt}), ${vn}, 0)`,On=`calc(100% - ${Ut}px - ${bt})`):nn?ft=`translate3d(${Ut}px, ${vn}, 0)`:ft=`translate3d(calc(${f} + ${bt}), ${vn}, 0)`,{transform:ft,left:0,width:On,right:"unset"}},[k,ae,Ze,f,B,Ye]),Yt=(0,g.Ze)(oe.VdR);return m.createElement(xt,{explicitStyles:tn,isSaving:We,isSiteFrameOverlayOpen:Yt,is70DeviceViewTrayOpen:Ze,setIs70DeviceViewTrayOpen:te,...le})},In=(0,Pe.Z)(pt)},357375:function(_,W,t){t.r(W),t.d(W,{default:()=>Re});var S=t(940426),e=t(174161),P=t(561463),m=t(394954),c=t(251196),C=t(967552),Z=t(538312),Q=t(845076),J=t.n(Q),se=t(135982),q=t(293580),M=t.n(q),X=t(621928),p=t(555768),O=t(865428),x=t(827302),R=t(833171),U=t(714487),g=t(337061),oe=t(897820),Oe=t(938077),ye=t(732706),me=t(339951),w=t(559409),$=t.n(w),Te=t(834105),K=t(109690);function ce(z,V,E){return V in z?Object.defineProperty(z,V,{value:E,enumerable:!0,configurable:!0,writable:!0}):z[V]=E,z}const Pe={CLOSED:0,OPEN:1},Ae=()=>{const{isDrawerOpen:z,setIsDrawerOpen:V}=e.useContext(R.Z.Context);return e.createElement(C.Z.Element.WithoutFeedback,{onClick:E=>{E.stopPropagation(),V(!z)},textAlign:"center"},e.createElement(Z.Z.Action,null,z?(0,U.t)("Close",null,{project:"apps.App"}):(0,U.t)("Menu",null,{project:"apps.App"})))};class re extends e.Component{componentDidMount(){p.Z.on(p.q,this.openSheet)}componentWillUnmount(){p.Z.off(p.q,this.openSheet)}render(){const{isMobileDrawerExpanded:V,setMobileDrawerSheetRef:E,shouldHideDrawer:ee}=this.props;return e.createElement(P.Z.Portal,null,e.createElement(P.Z.Container,{zIndex:99999},e.createElement(P.Z.Drawer,{className:J()(M().sheet,{[M().shouldHideDrawer]:ee}),docks:[55,window.innerHeight],draggable:!V,onDragStart:this.onDragStart,onDockIndexChange:this.onDockIndexChange,ref:E,renderHeader:this.renderHeader,renderBody:this.renderBody})))}constructor(...V){super(...V),ce(this,"disableEditing",()=>{!this.context.isDirty&&this.context.disableEditing&&this.context.disableEditing()}),ce(this,"onDockIndexChange",E=>{this.props.dispatch((0,oe._r)(E===Pe.OPEN)),E===Pe.CLOSED&&this.disableEditing()}),ce(this,"openSheet",()=>{this.props.dispatch((0,oe._r)(!0))}),ce(this,"renderBody",()=>e.createElement("div",{"data-testid":"website-editor-drawer-body-container",className:J()(M().container,this.props.className)},this.props.children)),ce(this,"renderHeader",()=>{const{isMobileDrawerExpanded:E,dispatch:ee,shouldHideEditButton:Be}=this.props,at=this.props.router.getCurrentLocation().pathname==="/",ot=be=>{be.stopPropagation(),ee((0,oe._r)(!E))};return E||(0,O.Z)()?e.createElement(se.Z,{className:J()(M().header,{[M().draggable]:!this.context.isDirty}),isFrameOpen:E,onToolbarClick:this.openSheet,onSheetToggleClick:ot,shouldHidePreviewButton:this.props.shouldHidePreviewButton,shouldHideEditButton:Be,router:this.props.router}):e.createElement(m.Z,{direction:"row",width:"100vw",height:"55px",divider:e.createElement(c.Z.Vertical,null),of:be=>e.createElement(m.Z.StackItemContainer,{...be,sx:{alignItems:"center",display:"flex",justifyContent:"center",flexGrow:1,flexShrink:0}})},e.createElement(C.Z.Element.WithoutFeedback,{"data-testid":"device-view-frame-action",onClick:ot,textAlign:"center"},e.createElement(Z.Z.Action,null,Be?(0,U.t)("View Site",null,{project:"apps.App"}):(0,U.t)("Edit Site",null,{project:"apps.App"}))),at?null:e.createElement(Ae,null))})}}ce(re,"contextType",X.Z);const Re=z=>{const{mobileDrawerSheetRef:V,setMobileDrawerSheetRef:E}=(0,e.useContext)(K.h),ee=(0,g.Ze)(Oe.TL_),Be=(0,g.zC)();(0,e.useEffect)(()=>{const pe=ee?Pe.OPEN:Pe.CLOSED;pe===Pe.OPEN&&(0,x.Lz)(),V==null||V.setDockIndex(pe)},[ee,V]);const at=pe=>pe.siteStatus===$().EXPIRED,ot=(0,me.N)(Te.Z,at),{shouldHideEditButton:be}=z,_e=(0,g.Ze)(Oe.Zxu),Ve=(0,ye.Z)({isSiteExpired:ot,shouldHideEditButton:be,collectionId:_e});return e.createElement(re,{...z,dispatch:Be,isMobileDrawerExpanded:ee,setMobileDrawerSheetRef:E,shouldHideEditButton:Ve})}},244626:function(_,W,t){t.r(W),t.d(W,{default:()=>kr});var S=t(144775),e=t(174161),P=t(156130),m=t(598347),c=t(337061),C=t(897820),Z=t(132782),Q=t(567752);function J(s,n,o){return n in s?Object.defineProperty(s,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[n]=o,s}class se extends e.Component{componentDidUpdate(){this.updateIframeLocation()}bindFrame(n){if(this.state.hasBoundFrame)return;this.setState({hasBoundFrame:!0});const{location:o,iframeRef:a}=this.props,i=o&&o.state&&o.state.frameUrl||"/",{CONFIG_PANEL:r}=window;this.v6PreviewFrame=new n.Squarespace.Damask.Preview.Frame({contentBridge:r.get("contentBridge"),router:r.get("router"),iframe:n.one(a.current)}),r.set("previewFrame",this.v6PreviewFrame),this.v6PreviewFrame.set("url",i);const l=document.createElement("div");this.v6PreviewFrame.render(n.one(l)),window.YUI_NOT_YET_LOADED=!1,window.Cypress!==void 0&&(window.top.YUI_NOT_YET_LOADED=!1);let u;try{var d;const v=(d=a.current)===null||d===void 0?void 0:d.contentWindow;u=v!=null&&v.Y&&(v!=null&&v.Squarespace)?v.Squarespace:null}catch(v){console.error(v)}u!=null&&u.afterBodyLoad&&(u.afterBodyLoad.call(u),this.v6PreviewFrame.onIframeLoaded())}render(){const{iframeRef:n,src:o,siteTitle:a,onMouseEnter:i,onMouseLeave:r,onFocus:l,onBlur:u}=this.props;return e.createElement("iframe",{...(0,Z.getGuidanceEngineDataAttribute)(Z.ElementDataIds.SITE_FRAME),"data-testid":"sqs-site-frame",ref:n,id:"sqs-site-frame",title:a,frameBorder:"0",allowFullScreen:!0,src:o,onLoad:this.handleLoad,onMouseEnter:i,onMouseLeave:r,onFocus:l,onBlur:u,inert:(0,Q.Z)()?"":void 0})}constructor(n){var o,a;super(n),J(this,"v6PreviewFrame",void 0),J(this,"lastFrameUrl",void 0),J(this,"getIframeLocation",()=>{const{iframeRef:i,src:r}=this.props;if(!i.current||r===this.lastFrameUrl)return null;let l;try{var u,d,v;(d=i.current.contentWindow)===null||d===void 0||(u=d.location)===null||u===void 0||u.pathname,l=(v=i.current.contentWindow)===null||v===void 0?void 0:v.location}catch{}return l?l.pathname+l.search+l.hash:null}),J(this,"updateIframeLocation",()=>{const{iframeRef:i,src:r}=this.props;if(!i.current||r===this.lastFrameUrl)return!1;const l=this.getIframeLocation();return!l||r===l?!1:(this.lastFrameUrl=r,this.v6PreviewFrame&&this.v6PreviewFrame._updateFrameWithoutAddingToHistory(r),!0)}),J(this,"handleLoad",i=>{const{onLoad:r,YPromise:l}=this.props;l.then(u=>{this.v6PreviewFrame?this.v6PreviewFrame.onIframeLoaded():this.bindFrame(u),window.Cypress!==void 0&&(window.APP_IS_LOADED=!0)}),r&&r(i)}),this.state={hasBoundFrame:!1},this.lastFrameUrl=n==null||(a=n.location)===null||a===void 0||(o=a.state)===null||o===void 0?void 0:o.frameUrl,n.onSetFrameLocationLoading()}}const M=(0,c.a9)(null,{onSetFrameLocationLoading:C.hl})(se);var X=t(845076),p=t.n(X),O=t(418698),x=t(444867),R=t.n(x),U=t(762379),g=t(938077),oe=t(548453),Oe=t(357375),ye=t(774153),me=t.n(ye),w=t(874644),$=t(295997),Te=t(370767),K=t(260175),ce=t(352635),Pe=t(621928),Ae=t(852747),re=t(696727),Me=t(161381);const Re=(0,Me.Z)(s=>{const[n,o]=(0,e.useState)(null),[a,i]=(0,e.useState)(!1);(0,e.useEffect)(()=>{n&&n.addAfterChangeHandler("dirty",()=>{i(n.get("dirty"))})},[n]);const r=()=>{(0,Ae.Z)().then(u=>{const d=u==null?void 0:u.annotationControllers.find(v=>v instanceof re.Z);o(d||null),d==null||d.enterEditMode()})},l=()=>{(0,Ae.Z)().then(u=>{u==null||u.fireRequestSaveChangesEvent()})};return e.createElement(Pe.Z.Provider,{value:{isDirty:a,handleEdit:r,doSaveAllChanges:l,doDiscardChangesAndExitEditMode:()=>{}}},s.children)});var z=t(153088),V=t(561463),E=t(714487),ee=t(369537),Be=t(933177),at=t.n(Be),ot=t(873718),be=t(431082),_e=t(44348),Ve=t.n(_e),pe=t(586745),st=t.n(pe),Ge=t(487558),dt=t(661614);const Ft=s=>{let{handleContinueEditing:n,handleDiscard:o,handleSaveAndExit:a,handlePublish:i}=s;const r=(0,c.Ze)(g.gEH),l=(0,c.Ze)(g.Zxu),u=(0,e.useCallback)(h=>(0,dt.Zf)(h,l),[l]),d=(0,Ge.k1)(u),v=r&&(r.workflowState===Ve().DRAFT||r.workflowState===Ve().NEEDS_REVIEW||r.workflowState===Ve().SCHEDULED)&&r.recordType!==st().STORE_ITEM&&r.recordType!==st().LESSON||d;return e.createElement(e.Fragment,null,v&&e.createElement(be.default,{alignment:"left",onClick:i,"data-test":"MW-ChangesCompleteConfirmation-publish"},(0,E.t)("Publish",null,{project:"src.seven-one"})),e.createElement(be.default,{alignment:"left",onClick:a,"data-test":"MW-ChangesCompleteConfirmation-save"},(0,E.t)("Save",null,{project:"src.seven-one"})),e.createElement(be.default,{alignment:"left",onClick:n,"data-test":"MW-ChangesCompleteConfirmation-cancel"},(0,E.t)("Continue Editing",null,{project:"src.seven-one"})),e.createElement(be.default,{alignment:"left",color:"warning",onClick:o,"data-test":"MW-ChangesCompleteConfirmation-discard"},(0,E.t)("Discard",null,{project:"src.seven-one"})))};function mt(s,n,o){return n in s?Object.defineProperty(s,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[n]=o,s}var vt;class Bt extends(vt=e.Component){render(){const{isDoneConfirmOpen:n,closeDoneConfirm:o}=this.props;return e.createElement(V.Z.Portal,null,e.createElement(V.Z.Container,{zIndex:99999,className:at().confirmationSheet},n&&e.createElement(V.Z.Overlay,{onClick:o}),e.createElement(V.Z.Drawer,{currentDockIndex:n?1:0,docks:[0,200],draggable:!0,renderHeader:this.renderSheetHeader,renderBody:this.renderSheetBody})))}constructor(...n){super(...n),mt(this,"handleSaveAndExit",()=>{this.props.closeDoneConfirm(),this.context.doSaveAllChanges({exit:!0}),this.props.fireClickMenuItemInDoneMenu("save")}),mt(this,"handleDiscard",()=>{this.props.closeDoneConfirm(),this.context.doDiscardChangesAndExitEditMode(),this.props.fireClickMenuItemInDoneMenu("discard")}),mt(this,"handleContinueEditing",()=>{this.props.closeDoneConfirm(),this.props.fireClickMenuItemInDoneMenu("continue-editing")}),mt(this,"handlePublish",()=>{this.props.closeDoneConfirm(),this.context.doSaveAllChanges({publish:!0}),this.props.fireClickMenuItemInDoneMenu("publish")}),mt(this,"renderSheetHeader",()=>e.createElement(ee.Z,null,e.createElement(ee.Z.Left,null),e.createElement(ee.Z.Center,null,e.createElement(ee.Z.Title,null,(0,E.t)("Confirm Changes",null,{project:"src.seven-one"}))),e.createElement(ee.Z.Right,null))),mt(this,"renderSheetBody",()=>e.createElement(Ft,{handleSaveAndExit:this.handleSaveAndExit,handleContinueEditing:this.handleContinueEditing,handleDiscard:this.handleDiscard,handlePublish:this.handlePublish}))}}mt(Bt,"contextType",Pe.Z);const ke=s=>e.createElement(ot.Z.Consumer,null,n=>e.createElement(Bt,{...s,...n})),It=500;function Ot(s){let{is70FullScreenPreviewEnabled:n,is70InManageIndexMode:o,frameMode:a,children:i,toggleFullScreenPreviewMode:r,isFrameLoaded:l,isPreviewTuckedOrHidden:u,routeWidthSize:d,router:v}=s;const h=(0,c.Ze)(g.Hlz),y=(0,c.Ze)(g.TL_),T=(0,e.useRef)(null),A=(0,e.useRef)(null),[F,I]=(0,e.useState)(!1),D=n&&!o&&a!==w.hn.PAGE_EDIT_FULL_SCREEN;(0,$.Dd)({shouldListen:D});const H=p()("config-website-frame",me().frame,{[me().fullscreen]:(0,w.BX)(a),[me().mobileWebEditingEnabled]:y,[me().expanded]:y}),ie=()=>{T.current&&clearTimeout(T.current),T.current=null};(0,e.useEffect)(()=>ie,[]);const{platform:he}=(0,K.i)(ce.breakpoints),ne=he==="mobile"?Oe.default:oe.default,fe=U.Z.isFeatureEnabled(R().MOBILE_WEB_V7),N=he!=="mobile"||fe&&v.getCurrentLocation().pathname.includes("/pages");return e.createElement(Re,null,e.createElement(ot.Z.Provider,null,e.createElement(ne,{is70InManageIndexMode:o,deviceView:h,frameMode:a,className:H,isFrameLoaded:l,isPreviewTuckedOrHidden:u,routeWidthSize:d,router:v,shouldHideEditButton:!N},e.createElement("div",{className:"preview-viewport"},D&&e.createElement(e.Fragment,null,e.createElement("div",{className:me().expander,ref:A,onMouseEnter:()=>{a===w.hn.PREVIEW_LEFT_PANEL&&(T.current=setTimeout(()=>I(!0),It))},onMouseLeave:()=>{ie(),I(!1)}},e.createElement("div",{onClick:r,className:me().expanderButton})),e.createElement(O.Z,{anchor:A.current,id:"preview-tooltip",isOpen:a===w.hn.PREVIEW_LEFT_PANEL&&F,position:"bottom"},e.createElement(Te.Z,{label:$.so,controls:$.V4}))),i)),fe&&e.createElement(ke,null)))}var en=t(101311),Xe=t(795478),Ne=t.n(Xe),Pt=t(762005),jt=t(135982),Lt=t(482212),Dt=t(476319),Kt=t(657010),et=t(410016),He=t(289578),rt=t(808373),Ee=t(175424),Mt=t(374852);const Rt=Mt.ZP;var lt=t(419467),Ue=t(413019),gn=t(662820),ht=t.n(gn),kt=t(69637),xt=t(297314),pt=t(685763),In=t(181124),j=t(800803),B=t(708835),f=t.n(B),ae=t(646106),le=t(936347);function We(){let{debounceDelay:s,win:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,le.Z)((0,ae.Z)(n),s)}var Ze=t(12574),te=t(482053),k=t(338465),Ye=t(766400),tn=t(394954),Yt=t(432762),ft=t(708477),bt=t(77811),zt=t(890333),nn=t(40500),Ut=t(994336),bn=t.n(Ut),On=t(387582);function vn(){return!!bn().get(On.Z.DISABLE_USER_SCRIPTS_COOKIE)}function us(s){for(const o of s.querySelectorAll("script")){var n;const a=document.createElement("script");Array.from(o.attributes).forEach(i=>{a.setAttribute(i.nodeName,i.nodeValue||"")}),a.innerHTML=o.innerHTML,(n=o.parentNode)===null||n===void 0||n.replaceChild(a,o)}}function Es(s){for(const o of s.querySelectorAll(".sqs-block-code script, .sqs-block-embed script")){var n;(n=o.parentNode)===null||n===void 0||n.removeChild(o)}}function ms(s){var n,o,a;const i=Array.from(s.querySelectorAll("img[data-src], img[data-srcset], img[srcset]")),r=i.map(l=>({width:l.style.width,height:l.style.height}));(a=s.ownerDocument)===null||a===void 0||(o=a.defaultView)===null||o===void 0||(n=o.ImageLoader)===null||n===void 0||n.loadAll({load:!1},s),i.forEach((l,u)=>{const d=r[u];l.style.width=l.style.width||d.width,l.style.height=l.style.height||d.height,l.complete&&typeof l.onload=="function"&&l.onload(new Event("load"))})}function gs(s){Array.from(s.querySelectorAll(nn.IY)).map(o=>{const a=Array.from(o.classList).filter(i=>i.includes("animation"));o.classList.remove(...a)})}function vs(s){var n,o,a,i,r,l;const u=(0,Ee.V6)();if(!u)return;vn()&&Es(s),us(s),ms(s),gs(s),(0,zt.t5)(s);const d=u.Y;(a=s.ownerDocument)===null||a===void 0||(o=a.defaultView)===null||o===void 0||(n=o.Squarespace)===null||n===void 0||n.initializePageContent(d,d.one(s)),(l=s.ownerDocument)===null||l===void 0||(r=l.defaultView)===null||r===void 0||(i=r.Squarespace)===null||i===void 0||i.initializeNativeVideo(d,{parentElement:d.one(s)}),d.Global.fire("tweak:change",{config:{},getName(){return"catalog-initialized"},getValue(){return!0}})}var Pn=t(466409),$e=t(605254),hn=function(s){return s.SECTION="SECTION_CATALOG",s.PAGE="PAGE_CATALOG",s.ITEM="ITEM_CATALOG",s}({}),hs=t(983497),we=t.n(hs);function Un(s){let{catalogType:n,entries:o,columnCount:a,onAddEntry:i,frameWidth:r,doesSupportMultiselect:l=!1,isMobileView:u,onClickCheckbox:d=()=>{},selectedSectionIds:v=[],hasNameEditing:h=!1,selectedCategory:y,selectedSubcategory:T}=s;const A=(0,Ee.wo)(),[F,I]=(0,e.useState)(null),[D,H]=(0,e.useState)(null),[ie,he]=(0,e.useState)(0),[ne,fe]=(0,e.useState)(0),[N,L]=(0,e.useState)({}),G=(0,ft.Z)(a),b=T!==f().ORGANIZATION&&T!==f().PRO_USER;(0,e.useEffect)(()=>{const de=A.querySelector("[data-catalog-entry-container]");if(de&&!$e.v){const ut=parseInt(ce.space[6]),Le=de.getBoundingClientRect().height-ut;Le!==ie&&he(Le)}},[r,A,ie]),(0,e.useEffect)(()=>{if(D){const de=(0,lt.throttle)(()=>{const Le=getComputedStyle(D),ue=parseFloat(Le.paddingLeft)+parseFloat(Le.paddingRight),xe=33,qe=(a-1)*xe;fe((D.offsetWidth-qe-ue)/a)},30);de();const ut=new Yt.d(de);return ut.observe(D),()=>{de.cancel(),ut.unobserve(D)}}},[D,a,r]),(0,e.useEffect)(()=>{F&&b&&(F.scrollTop=0)},[F,o,b]),(0,e.useEffect)(()=>{L({})},[o]),(0,e.useEffect)(()=>{G!==a&&L({transitionProperty:"transform,box-shadow,height,width"})},[G,a]);const Ce=(0,e.useMemo)(()=>(0,lt.debounce)(vs,3),[]);(0,e.useEffect)(()=>()=>Ce.cancel(),[Ce]),(0,e.useEffect)(()=>{D&&ne&&(o!=null&&o.length)&&Ce(D)},[D,ne,o,Ce]);const ct=(0,e.useMemo)(()=>$e.v?n===hn.PAGE?a===1?720:580:void 0:ie,[n,ie,a]),it=(0,e.useMemo)(()=>[we().BLOG,we().GALLERY].includes(y)||T===we().BLOG||T===we().STORE?`${a}-${T}`:null,[a,T,y]);if(!o||o.length===0)return e.createElement(te.Z,{flex:1,height:"100%",alignItems:"center",justifyContent:"center"},e.createElement(Ye.Z,null));const Je=[];for(let de=0;de<a;de++)Je.push([]);let je=0;o.forEach(de=>{Je[je].push(de),je=je>=a-1?0:je+1});const Ke=T?[...(0,Pn.Z)()?[f().SAVED_SECTIONS]:[],f().PRO_USER,f().ORGANIZATION].includes(T):!1;return e.createElement(e.Fragment,null,e.createElement("style",{dangerouslySetInnerHTML:{__html:'.sqs-catalog-entries .sqs-block [data-block-state="invalid"] { display: block !important; } .sqs-catalog-entries .sqs-blockStatus { display:none !important; }'}}),e.createElement(k.Z,{style:{flex:1,minHeight:"auto"},width:"100%",position:"relative",overflow:"auto",ref:I,id:"siteWrapper",className:"site-wrapper sqs-catalog-entries"},e.createElement(tn.Z,{key:it,ref:H,width:"100%",space:6,px:u?3:6,pb:6,pt:1,direction:"row"},D?Je.map((de,ut)=>e.createElement(k.Z,{key:ut,css:{flex:1}},de.map((Le,ue)=>e.createElement(bt.Z,{key:Le.id,id:Le.id,sectionId:Le.sectionId||"",onAddEntry:i,html:Le.html,listContainerWidth:ne,frameWidth:r,Accessory:Le.Accessory,css:N,doesSupportMultiselect:l,onClickCheckbox:d,selectedSectionIds:v,isLastChild:ue===de.length-1,maxSectionHeight:ct,hasNameEditing:h,entryName:Le.name||((0,Pn.Z)()&&y===f().SAVED_SECTIONS?(0,E.t)("Section",null,{notes:"Placeholder title for saved section",project:"src.seven-one"}):""),hasNamePlaceholder:Ke&&!Le.name,selectedSubcategory:T})))):null)))}var Ie=t(538312),Wt=t(516865),fs=t(621942),Cs=t(969145);function ps(s){let{isMobile:n,onRequestClose:o,backdoorBack:a,backdoorTitle:i,onToggleDoor:r}=s;const l=(0,e.useMemo)(()=>{if(!(!$e.v||n))return{borderRadius:"8px 8px 0 0"}},[n]);return e.createElement(Cs.Z.Provider,{theme:Pt.rosetta.darkest},e.createElement(k.Z,{bg:"white",width:"100%",py:1,px:6,css:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",alignItems:"center"},sx:l},e.createElement(fs.Z,{label:a,onClick:()=>r(!0,a),css:{justifySelf:"start"}}),e.createElement(Ie.Z.Subtitle,{css:{justifySelf:"center"}},i),e.createElement(Wt.Z.Tertiary,{css:{justifySelf:"end"},onClick:o,size:"small"},(0,E.t)("Close",null,{project:"src.seven-one"}))))}var Ln=t(378257),Ss=t(770500),Wn=t.n(Ss),Ts=t(217528);const As=()=>{const s=!(0,c.Ze)((0,g.FWA)(Wn().FLUID_ENGINE_SAVED_SECTIONS)),n=(0,c.zC)(),o=()=>{n((0,Ts.ic)(Wn().FLUID_ENGINE_SAVED_SECTIONS))};return s?e.createElement(k.Z,{position:"absolute",right:"33px",bottom:"40px"},e.createElement(Ln.Z,{bg:"white",width:"sizes.700"},e.createElement(Ln.Z.Body,null,e.createElement(Ie.Z.Subtitle,{mt:2,mb:0,style:{color:ce.colors.gray[100]}},(0,E.t)("Saved Sections",null,{project:"src.seven-one"})),e.createElement(Ie.Z.Body,null,(0,E.t)("Here\u2019s where you\u2019ll find the custom sections you saved. You can reuse them anywhere on your site.",null,{project:"src.seven-one"})),e.createElement(te.Z,{justifyContent:"end",alignItems:"center"},e.createElement(Wt.Z.Primary,{size:"medium",onClick:o},(0,E.t)("Got it",null,{project:"src.seven-one"})))))):null};var Fe=t(177716),so=t(113691),ys=t(964364);const Is=t.p+"03-Fallback-448241c467bf47c7.jpg";function ao(s){let{onToggleDoor:n}=s;const o=(0,E.t)("Go Back",null,{project:"src.seven-one"});return e.createElement(k.Z,{maxWidth:"251px",mt:2},e.createElement(Ln.Z,{width:"100%"},e.createElement(ys.Z,{alt:(0,E.t)("Image depicting fluid engine grid",null,{project:"src.seven-one"}),css:{objectFit:"cover"},height:200,width:"100%",src:Is}),e.createElement(Ln.Z.Body,null,e.createElement(Ie.Z.Subtitle,{fontWeight:"semibold"},(0,E.t)("Design with more control using Fluid Engine",null,{project:"src.seven-one"})),e.createElement(Ie.Z.Body,null,(0,E.t)("Use Fluid Engine to access newer features and have full drag-and-drop control.",null,{project:"src.seven-one"})),e.createElement(Wt.Z.Tertiary,{onClick:()=>n(!0,o)},o))))}var Dn=t(918025);const io=s=>e.createElement(k.Z,{...s,as:"a",sx:{p:{fontWeight:"medium",m:0,transition:"color 0.5s ease",color:s["data-selected"]?"gray.100":"gray.300"},...!s.isDisabled&&{"&:hover":{p:{color:"gray.100"}}}}}),ro="categories-nav-group-selector";function Os(s){if(s.scrollIntoViewIfNeeded){s.scrollIntoViewIfNeeded();return}s.scrollIntoView({block:"nearest"})}const lo=(0,E.t)("Made with Classic Editor \u2192",null,{project:"websites-content.catalog",notes:"Link CTA takes user to the classic editor options, or layout engine options."}),Ps=s=>{let{backdoorCta:n,backdoorText:o,bottomCategoryButtons:a,categoriesConfig:i,categoryMessageBundle:r,categoryOrder:l,entriesByCategory:u,isInBackdoor:d,isInFrontdoor:v,isLoading:h,onRequestClose:y,onSelectCategory:T,onToggleDoor:A,restrictToSingleCategory:F,selectedCategory:I,title:D,topCategoryButtons:H}=s;const he=(!(l!=null&&l.length)&&I?[I]:l).filter(L=>{var G;return L!==Dn.CY&&((G=u[L])===null||G===void 0?void 0:G.length)&&r[L]}).map(L=>({key:L,label:r[L]})),[ne,fe]=(0,e.useState)();(0,e.useEffect)(()=>{ne&&Os(ne)},[ne,I]);const N=(0,e.useMemo)(()=>d?null:e.createElement(Fe.Z,null,e.createElement(te.Z,{mt:$e.v?4:6,mb:2,flexDirection:"column",alignItems:"start"},e.createElement(Wt.Z.Tertiary,{mb:2,onClick:()=>y(!1),size:"small"},(0,E.t)("Close",null,{project:"src.seven-one"})),e.createElement(Fe.Z.NavText,{variant:"title"},$e.v?e.createElement(Ie.Z.Title,{as:"h2",sx:{cursor:"default",m:0,letterSpacing:0,textTransform:"none"}},D):D))),[d,y,D]);if($e.s){let L=i;return F&&(L=Object.values(i).reduce((G,b)=>{if(Object.keys(G).length>0)return G;const Ce=b.categories.find(ct=>ct.key===I);return Ce&&(G.singleCategory={key:"singleCategory",type:"groupLabel",categories:[Ce]}),G},{})),e.createElement(te.Z,{flexDirection:"column",overflow:"hidden"},N,e.createElement(k.Z,{css:{flex:1,overflow:"auto",...h&&{[`.${ro} *`]:{cursor:"default !important",borderTopWidth:"0 !important"}}},className:so.ZP.UNMASK_ELEMENT},e.createElement(Fe.Z,{value:I,onChange:G=>{h||T(G)}},d?e.createElement(ao,{onToggleDoor:A}):null,H||null,Object.keys(L).map(G=>e.createElement(Fe.Z.NavGroup,{className:ro,key:G},L[G].label&&e.createElement(Ie.Z.SectionTitle.Small,{"data-test":`group-${G}`,sx:{cursor:"default",mt:0,mb:2,fontWeight:"medium"}},L[G].label),L[G].categories.map(b=>e.createElement(Fe.Z.NavItem,{key:b.key,is:io,"data-test":`category-${b.key}`,value:b.key,isSelected:!h&&b.key===I,"data-selected":!h&&b.key===I,"data-allow-link-click":!0,isDisabled:h,...b.key===f().CONTACT?(0,Z.getGuidanceEngineDataAttribute)(Z.ElementDataIds.SECTION_CATALOG_CONTACT_CATEGORY):null},b.key===I&&e.createElement("span",{ref:fe}),e.createElement(Fe.Z.NavText,{variant:"subtitle"},e.createElement(Ie.Z.Body,null,b.label)))))),a||null,v&&!F&&e.createElement(k.Z,{mt:4,mb:5},e.createElement(Ie.Z.Caption,{as:"a",sx:{cursor:"pointer",textDecoration:"underline"},role:"button",onClick:()=>A(!1,lo),tabIndex:0,"data-allow-link-click":!0},lo)))))}return e.createElement(te.Z,{flexDirection:"column",overflow:"hidden"},N,e.createElement(k.Z,{css:{flex:1,overflow:"auto"},className:so.ZP.UNMASK_ELEMENT},e.createElement(Fe.Z,{value:I,onChange:L=>{T(L)}},d?e.createElement(ao,{onToggleDoor:A}):null,H||null,e.createElement(Fe.Z.NavGroup,null,he.map((L,G)=>L.key===Dn.CY?e.createElement(k.Z,{p:1,key:`dash-${G}`}):e.createElement(Fe.Z.NavItem,{key:L.key,"data-test":`category-${L.key}`,value:L.key,isSelected:L.key===I,"data-selected":L.key===I,"data-allow-link-click":!0,...L.key===f().CONTACT?(0,Z.getGuidanceEngineDataAttribute)(Z.ElementDataIds.SECTION_CATALOG_CONTACT_CATEGORY):null},L.key===I&&e.createElement("span",{ref:fe}),e.createElement(Fe.Z.NavText,{variant:"subtitle"},L.label)))),a?e.createElement(Fe.Z.NavGroup,null,a):null,v&&e.createElement(k.Z,{my:6,maxWidth:"265px"},e.createElement(Ie.Z.Caption,null,o+" ",e.createElement("a",{style:{cursor:"pointer",textDecoration:"underline"},role:"button",onClick:()=>A(!1,n),tabIndex:0,"data-allow-link-click":!0},n))))))};var Mn=t(806035),Ls=t(157704),wt=t(484345),Ds=t(166242),Ms=t(245118),Rs=t(46134);const{Option:wn}=Mn.Z,co=s=>{let{columnCount:n,isColumnSwitchDisabled:o,setColumnCount:a,isMobileView:i}=s;const r=(0,e.useCallback)(l=>{(0,wt.RC)(l),a(l)},[a]);return e.createElement(Mn.Z,{variant:$e.v?"compact":void 0,zIndex:1,onChange:r,value:n,mr:i?5:6,isDisabled:o},e.createElement(wn,{value:3},e.createElement(Ds.Z,null)),e.createElement(wn,{value:2},e.createElement(Ms.Z,null)),e.createElement(wn,{value:1},e.createElement(Rs.Z,null)))},{Option:Ns}=Mn.Z,Zs=s=>{let{columnCount:n,innerTabs:o,isColumnSwitchDisabled:a,isInBackdoor:i,setColumnCount:r,subNavigation:l,isMobileView:u=!1}=s;const d=(0,e.useMemo)(()=>o?$e.v?e.createElement(Mn.Z,{variant:"compact",zIndex:1,onChange:o.onChange,value:o.value,sx:{ml:u?0:6,minWidth:"max-content",width:"auto",maxWidth:"none"}},o.options.map(h=>{let{label:y,value:T,id:A}=h;return e.createElement(Ns,{key:A,value:T,htmlAttributes:{"data-test":A},sx:{flexShrink:0,minWidth:"max-content",span:{fontSize:3,letterSpacing:0,textTransform:"none",px:2,fontWeight:"book",whiteSpace:"nowrap",overflow:"visible",textOverflow:"unset"}}},y)})):e.createElement(k.Z,{mt:u?9:6,mr:6,ml:4,zIndex:1},e.createElement(Ls.Z,{options:o.options.map(h=>{let{label:y,value:T,id:A}=h;return{label:y,value:T,htmlAttributes:{"data-test":A}}}),value:o.value,onChange:o.onChange})):null,[o,u]),v=(0,e.useMemo)(()=>e.createElement(co,{columnCount:n,isColumnSwitchDisabled:a,setColumnCount:r,isMobileView:!1}),[n,a,r]);return $e.v?e.createElement(e.Fragment,null,e.createElement(te.Z,{mt:i?4:"72px",mb:l?0:5,space:4,alignItems:"center",zIndex:1},e.createElement(k.Z,{flexGrow:"1",sx:{ml:u?3:0,mr:3,position:"relative",overflow:"hidden","&::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,width:"20px",background:`linear-gradient(to left, ${u?ce.colors.gray[950]:"white"}, transparent)`}}},e.createElement(k.Z,{sx:{overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none",paddingRight:"30px"}},d)),u?null:v),l&&e.createElement(k.Z,{px:6,mb:4},l)):e.createElement(e.Fragment,null,d,e.createElement(te.Z,{mt:o?4:6,mb:o?4:5,flexDirection:"row",space:4,width:"100%",justifyContent:"flex-end",alignItems:"center"},e.createElement(k.Z,{flexGrow:1,pr:u?4:2,pl:4},l),e.createElement(k.Z,{mt:o?0:6,mb:o?0:5,mr:6},u?null:v)))};var uo=t(81943),Xt=t(173606),Eo=t(48992),Vn=t(619506),Fs=t(805163),Bs=t(612020),xs=t(317527),bs=t(208935),Us=t(302975),Ws=t(251196);const ws=s=>{let{clearSelectedSections:n,selectAllSections:o,onRequestClose:a}=s;const i=r=>{let{action:l,text:u}=r;return e.createElement(Ie.Z.Action,{sx:{"&:hover":{backgroundColor:"gray.900"}},css:{cursor:"pointer"},px:4,py:2,onClick:()=>{l(),a()}},u)};return e.createElement(te.Z,{flexDirection:"column",py:1},e.createElement(i,{action:o,text:(0,E.t)("Select All",null,{project:"src.seven-one"})}),e.createElement(i,{action:n,text:(0,E.t)("Deselect All",null,{project:"src.seven-one"})}))},mo=s=>{let{handleDeleteSections:n,handleClearSelectedSections:o,handleSelectAllSections:a,selectedSectionIds:i}=s;const[r,l]=(0,e.useState)(!1),u=(0,Ee.wo)();return e.createElement(te.Z,{position:"fixed",alignItems:"center",justifyContent:"center",height:44,py:"4px",px:"4.5px",borderRadius:2,boxShadow:300,backgroundColor:"white",zIndex:3,css:{opacity:i.length?1:0,pointerEvents:i.length?"":"none",bottom:i.length?ce.space[6]:ce.space[4],transitionProperty:"opacity, bottom",transitionDuration:"200ms",transitionTimingFunction:ce.easing.product.default}},e.createElement(Vn.Z.PopOver,{position:"top",mountAt:u.body,renderTrigger:d=>{let{toggleActionListOpen:v}=d;return e.createElement(Wt.Z.Base,{onClick:()=>{l(h=>!h),v()},sx:{borderRadius:"4px",padding:"7px",paddingLeft:"11px",marginRight:"4px","&:hover":{backgroundColor:"gray.800"}}},(0,E.t)("{num} Selected",{num:i.length},{notes:"Stating how many selected sections there are",project:"src.seven-one"}),r?e.createElement(Fs.Z,{style:{marginLeft:6}}):e.createElement(Bs.Z,{style:{marginLeft:6}}))},isOpen:r,onRequestOpen:()=>l(!0),onRequestClose:()=>l(!1),className:bs.NONINTERACTIVE_CLASSNAME},d=>{let{onRequestClose:v}=d;return e.createElement(ws,{clearSelectedSections:o,selectAllSections:a,onRequestClose:v})}),e.createElement(Ws.Z,{height:"20px",width:"1px",mr:"4px"}),e.createElement(Us.Z,{key:"remove-section",label:(0,E.t)("Remove",null,{project:"src.seven-one"}),forceHideTooltip:!0,onClick:n},e.createElement(xs.Z,{color:"red.400"})))},go=s=>{let{selectedSectionIds:n,entries:o}=s;return n.reduce((a,i)=>{const r=o.find(l=>{let{section:u}=l;return u.id===i});return r!=null&&r.id&&a.push(r.id),a},[])};var Gn=t(134798),vo=t(695960);function Vs(s){let{entries:n,onAddEntry:o,frameWidth:a,columnCount:i,isMobileView:r}=s;const l=(0,c.zC)(),u=(0,Ee.wo)(),d=(0,e.useRef)(null),h=(0,g.fPO)((0,c.d6)())===Gn.Z.FOOTER,y=(0,e.useMemo)(()=>n?n.map(N=>({...N.section,html:N.html,Accessory:N.Accessory})).filter(N=>h?N.sectionName!==vo.Z.JSON_SCHEMA:!0).reverse():[],[n,h]),T=(y==null?void 0:y.length)>0,[A,F]=(0,e.useState)([]),I=N=>{const{section:L}=(0,g.V9S)((0,c.d6)()).find(G=>{let{section:b}=G;return b.id===N});return L},D=()=>F(y.map(N=>{let{id:L}=N;return L})),H=()=>F([]),ie=(0,e.useCallback)(N=>{const L=I(N);(0,wt.rW)(L),F(A.find(G=>G===N)?A.filter(G=>G!==N):[...A,N])},[A,F]),he=(0,e.useCallback)(()=>{const N=go({selectedSectionIds:A,entries:n}),L=N.length>1;l((0,Xt.Bx)(N)),setTimeout(()=>H(),200),(0,wt.tS)(L)},[A,n,l]),ne=N=>{(N.metaKey||N.ctrlKey)&&N.key==="a"&&(N.preventDefault(),D())},fe=N=>{const L=I(N);(0,wt.bd)(L),o(N)};return(0,Eo.Z)("keydown",ne,{element:u}),e.createElement(te.Z,{flexDirection:"column",height:"100%",ref:d,"data-test":`catalog-${f().SAVED_SECTIONS}`},T?e.createElement(Un,{entries:y,columnCount:i,onAddEntry:fe,frameWidth:a,doesSupportMultiselect:!0,onClickCheckbox:ie,selectedSectionIds:A,isMobileView:r}):e.createElement(te.Z,{flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",mt:-4},e.createElement(uo.Z,{width:36,height:36}),e.createElement(Ie.Z.Title,{color:"gray.100",m:2},(0,E.t)("Nothing saved yet.",null,{project:"src.seven-one"})),e.createElement(Ie.Z.Body,{color:"gray.300",m:0},(0,E.t)("All the sections you've saved appear here. Use them across your site.",null,{project:"src.seven-one"}))),e.createElement(te.Z,{width:"100%",flexDirection:"row",justifyContent:"center"},e.createElement(mo,{selectedSectionIds:A,handleDeleteSections:he,handleSelectAllSections:D,handleClearSelectedSections:H})))}var ho=t(906194);const Gs=()=>{const s=(0,Ee.wo)(),n=(0,e.useCallback)(()=>{const a=s==null?void 0:s.body;a&&a.style.overflow!=="hidden"&&(a.style.overflow="hidden")},[s]),o=(0,e.useMemo)(()=>(0,lt.debounce)(n,100,{leading:!0}),[n]);(0,e.useEffect)(()=>{if(!(!$e.v||!(s!=null&&s.body)))return s.addEventListener("scroll",o,{capture:!0}),()=>{s.removeEventListener("scroll",o,{capture:!0}),o.cancel()}},[o,s])},Hs={"&:after":{height:0},p:0},js=600,Ks=1462,fo=1e3,ks=s=>{let{catalogType:n,customCatalogEntries:o,categoriesConfig:a={},entriesByCategory:i,selectedCategory:r,selectedSubcategory:l,sectionCatalogSectionId:u,onAddEntry:d,onAddSavedSection:v,showSavedSectionsCard:h,onRequestClose:y,onSelectCategory:T,restrictToSingleCategory:A,title:F,categoryOrder:I,categoryMessageBundle:D,topCategoryButtons:H,bottomCategoryButtons:ie,backdoorBack:he,backdoorCta:ne,backdoorText:fe,backdoorTitle:N,onToggleDoor:L,innerTabs:G,subNavigation:b,isInBackdoor:Ce,isInFrontdoor:ct,isLoading:it}=s;const Je=(0,Ee.V6)(),je=(0,Ee.wo)(),Ke=We({win:Je,debounceDelay:200}),{innerWidth:de,innerHeight:ut}=Ke,[Le,ue]=(0,e.useState)(de<fo?1:2),xe=r===f().ORGANIZATION&&de<fo,qe=n===hn.SECTION&&r===f().SAVED_SECTIONS,Et=(0,e.useMemo)(()=>{if(r===f().SAVED_SECTIONS)return i[r];const nt=r+(l?`/${l}`:"");return i[nt]},[i,r,l]),ge=nt=>(y(!0),d(nt)),De=je.querySelector(`[data-section-id="${u}"]`);(0,Ze.Z)(De,y,".top-add-hit-box");const Y=(0,c.Ze)(g.Hlz)===ho.Z.PHONE,Se=Y||(0,K.i)(ce.breakpoints).platform==="mobile";Gs();const ze=(0,e.useMemo)(()=>{if(!(!$e.v||Se))return{borderRadius:Ce?"0 0 8px 8px":2}},[Ce,Se]),tt=(0,e.useMemo)(()=>$e.s?{backgroundColor:"base",width:"336px",height:"100%"}:{backgroundColor:"base",width:"336px"},[]);return(0,e.useEffect)(()=>{const nt=je.querySelector("[data-catalog-entry-container]");nt&&(nt.scrollTop=0)},[l,je]),e.createElement(pt.Z,{"data-test":"catalog",closeOnEsc:!0,closeOnOverlayClicked:!0,onRequestClose:()=>y(!1),mountAt:je.body,lockScroll:!1},e.createElement(pt.Z.Overlay,(0,Z.getGuidanceEngineDataAttribute)(Z.ElementDataIds.SECTION_CATALOG_OVERLAY)),e.createElement(pt.Z.Position,{position:"center"},Ce?e.createElement(ps,{isMobile:Se,onRequestClose:y,onToggleDoor:L,backdoorTitle:N,backdoorBack:he}):null,e.createElement(j.Z,{page:r,responsiveProviderProps:{window:Je,aspectRatio:de/ut,margin:66,minWidth:js,maxWidth:Ks},"aria-label":(0,E.t)("Section Catalog",null,{project:"src.seven-one"}),tabIndex:0,sx:ze,style:{outlineColor:"transparent",overflow:"hidden"},...(0,Z.getGuidanceEngineDataAttribute)(Z.ElementDataIds.SECTION_CATALOG)},e.createElement(j.Z.Sidebar,{sx:tt},e.createElement(Ps,{backdoorCta:ne,backdoorText:fe,bottomCategoryButtons:ie,categoriesConfig:a,categoryMessageBundle:D,categoryOrder:I,entriesByCategory:i,isInBackdoor:Ce,isInFrontdoor:ct,isLoading:it,onRequestClose:y,onSelectCategory:T,onToggleDoor:L,restrictToSingleCategory:A,selectedCategory:r,title:F,topCategoryButtons:H})),e.createElement(j.Z.Body,{style:{overflow:"hidden"}},Se&&e.createElement(j.Z.Body.Header,{sx:{width:"100%"}},e.createElement(j.Z.Body.Header.Right,null,e.createElement(co,{columnCount:Le,isColumnSwitchDisabled:xe,setColumnCount:ue,isMobileView:!0}))),e.createElement(Zs,{columnCount:Le,innerTabs:G,isColumnSwitchDisabled:xe,isInBackdoor:Ce,setColumnCount:ue,subNavigation:b,isMobileView:Y}),e.createElement(pt.Z.TouchScroll,null,e.createElement(j.Z.Body.Content,{sx:Hs,"data-catalog-entry-container":!0},!(0,Pn.Z)()&&l===f().SAVED_SECTIONS&&v?e.createElement(Vs,{entries:Et,onAddEntry:v,frameWidth:de,columnCount:Le,isMobileView:Y}):o?o({columnCount:Le,frameWidth:de}):e.createElement(Un,{selectedCategory:r,selectedSubcategory:l,catalogType:n,entries:Et,onAddEntry:ge,frameWidth:de,columnCount:Le,doesSupportMultiselect:!1,isMobileView:Y}))),h&&qe?e.createElement(As,null):null))))};function Ys(s){let{categoriesConfig:n,catalogType:o,isOpen:a,entriesByCategory:i,selectedCategory:r,selectedSubcategory:l,sectionCatalogSectionId:u,onAddEntry:d,onAddSavedSection:v,showSavedSectionsCard:h,onRequestClose:y,onSelectCategory:T,title:A,categoryOrder:F,categoryMessageBundle:I,topCategoryButtons:D,bottomCategoryButtons:H,backdoorBack:ie,backdoorCta:he,backdoorText:ne,backdoorTitle:fe,onToggleDoor:N,innerTabs:L,subNavigation:G,customCatalogEntries:b,restrictToSingleCategory:Ce,isInBackdoor:ct,isInFrontdoor:it,isLoading:Je}=s;const je=(0,Ee.wo)();return(0,e.useEffect)(()=>{const Ke=je==null?void 0:je.body;return Ke&&(Ke.style.overflow=a?"hidden":"auto"),()=>{Ke&&(Ke.style.overflow="auto")}},[a,je]),je?e.createElement(In.Z,{cacheKey:"catalog",container:je.head},e.createElement(pt.Z.Transition,null,a?e.createElement(ks,{categoriesConfig:n,catalogType:o,entriesByCategory:i,selectedCategory:r,selectedSubcategory:l,sectionCatalogSectionId:u,onRequestClose:y,onAddEntry:d,onSelectCategory:T,onAddSavedSection:v,showSavedSectionsCard:h,title:A,categoryOrder:F,categoryMessageBundle:I,topCategoryButtons:D,bottomCategoryButtons:H,backdoorText:ne,backdoorCta:he,backdoorBack:ie,backdoorTitle:fe,onToggleDoor:N,innerTabs:L,customCatalogEntries:b,subNavigation:G,restrictToSingleCategory:Ce,isInBackdoor:ct,isInFrontdoor:it,isLoading:Je}):null)):null}var Co=t(571199);function on(s){let{onClick:n,label:o,tag:a,dataTest:i}=s;return e.createElement(Fe.Z.NavItem,{onClick:n,"data-test":i,"data-allow-link-click":!0},e.createElement(k.Z,null,e.createElement(Fe.Z.NavText,{variant:"subtitle"},o),a?e.createElement(Co.Z.Container,{ml:2,borderRadius:1},e.createElement(Co.Z.Label,{fontWeight:"medium",textTransform:"uppercase",letterSpacing:"0.75px"},a)):null))}const Hn=Ys;var zs=t(461761),Xs=t.n(zs);let po;const $s=()=>`${Xs()(window,"Static.SQUARESPACE_CONTEXT.website.id")}-${Date.now()}`,Nt=()=>po,Rn=()=>{po=$s()},Qr=null;Rn();const So="item-catalog-rendered",To="page-catalog-rendered",Ao="section-catalog-rendered",Jr="item-catalog-fully-loaded",qr="page-catalog-fully-loaded",yo="item-catalog-entry-added",Io="page-catalog-entry-added",Oo="section-catalog-entry-added",Qs="item-catalog-preload-effectiveness",Js="page-catalog-preload-effectiveness",_r=null;var Nn=t(730842),Po=t(800191),sn=t(324270),jn=t(2395);const qs=!U.Z.isFeatureEnabled(R().FLUID_ENGINE_OPT_OUT),Lo={[ht().PROJECTS]:(0,E.t)("Projects",null,{project:"websites-content.catalog",notes:"Category to display in the catalog."})},_s={itemGroup:{key:"itemGroup",type:"groupLabel",categories:[{key:ht().PROJECTS,label:Lo[ht().PROJECTS],type:"category"}]}};function ea(){const s=(0,e.useRef)(!1),n=(0,e.useRef)(!1),o=(0,c.zC)(),a=(0,c.Ze)(g.$9S),i=(0,c.Ze)(g.oNi),r=(0,c.Ze)(g.h5A),l=(0,c.Ze)(g.kU$),u=(0,c.Ze)(g.VQU);(0,e.useEffect)(()=>{const D=(0,c.d6)();(0,g.JAw)(D)||o((0,jn.ct)((0,g.oNi)(D)))},[o]),(0,e.useEffect)(()=>{if(a&&r){(0,xt.Rm)(Po.d.PORTFOLIO_ITEM,r),Rn();const D={detail:Nt(),tracer:kt.Z};(0,Ue.B1)(So,D),(0,Ue.B1)(yo,D),s.current||(s.current=!0,(0,Ue.L8)(Qs,{tracer:kt.Z}))}},[a,r]),(0,e.useEffect)(()=>{a&&!(0,lt.isEmpty)(l)&&!n.current&&((0,Ue.L8)(So,{detail:Nt()}),n.current=!0)},[a,l]);const d=(0,e.useCallback)(()=>{sn.default.toggleFullScreenPreviewMode(),o((0,jn.SZ)())},[o]),v=async D=>{(0,Ue.L8)(yo,{detail:Nt()});const H=u[D];if(!H||!r)return;const ie={toCollectionId:r,websiteId:H.websiteId,itemId:H.itemId},he=await Nn.Z.copyContentItem(ie);Nn.Z.openItemSettingsEditor(he,null,!0)},h=(0,e.useCallback)(async()=>{if(r){d();const D=await Nn.Z.createContentItem(Po.d.PORTFOLIO_ITEM,r,ht().PROJECTS);Nn.Z.openItemSettingsEditor(D,null,!0)}},[d,r]),y=(0,e.useCallback)((D,H)=>{o((0,jn.ct)(D)),H&&(0,xt.OH)({catalogType:"item-catalog",toFluidEngine:D,buttonText:H})},[o]),T=(0,e.useMemo)(()=>e.createElement(on,{onClick:()=>h(),label:(0,E.t)("Add a blank project",null,{project:"src.seven-one"}),dataTest:"category-blank_page"}),[h]),A=qs,F=A&&!i,I=A&&i;return e.createElement(Hn,{categoriesConfig:_s,catalogType:hn.ITEM,isOpen:a,onRequestClose:d,selectedCategory:ht().PROJECTS,onSelectCategory:()=>{},onAddEntry:v,title:(0,E.t)("Add a Project",null,{project:"src.seven-one"}),entriesByCategory:l,categoryOrder:[ht().PROJECTS],categoryMessageBundle:Lo,topCategoryButtons:T,backdoorText:(0,E.t)("The above projects use the new Fluid Engine editor.",null,{project:"src.seven-one"}),backdoorCta:(0,E.t)("Looking for designs built with our Classic Editor?",null,{project:"src.seven-one"}),backdoorBack:(0,E.t)("Fluid Engine Projects",null,{project:"src.seven-one"}),backdoorTitle:(0,E.t)("Classic Editor Projects",null,{project:"src.seven-one"}),onToggleDoor:y,isInBackdoor:F,isInFrontdoor:I})}const Do=ea;var el=t(814710),ta=t(437951),an=t.n(ta),rn=t(746460);const{BLOG:na,EVENTS:oa,PORTFOLIO:sa,STORE:aa,LESSONS:ia,COURSE:ra,MEMBER_SITE_HOMEPAGE:la}=we(),gt={BLOG:na,EVENTS:oa,PORTFOLIO:sa,STORE:aa,VIDEO_COLLECTION:ia,COURSE:ra,MEMBER_SITE:la},ca=(0,E.t)("Share thoughts, stories, ideas.",null,{project:"src.seven-one"}),da=(0,E.t)("Blogs are organized into Blog Page and individual blog posts. The Blog Page is the first page users see when they visit your blog.",null,{project:"src.seven-one"}),ua=(0,E.t)("Select a template for your course overview page.",null,{project:"src.seven-one"}),Ea=(0,E.t)("Courses are organized into a course overview page and individual lesson pages (your course content).",null,{project:"src.seven-one"}),ma=(0,E.t)("Select a template for the main videos page that holds your full library.",null,{project:"src.seven-one"}),ga=(0,E.t)("Each video will also have its own detail page, and you can organize your videos by creating categories.",null,{project:"src.seven-one"}),va=(0,E.t)("Highlight individual events or show a calendar of upcoming events.",null,{project:"src.seven-one"}),ha=(0,E.t)("Each event has its own detailed post to share additional, event-related details.",null,{project:"src.seven-one"}),fa=(0,E.t)("Showcase projects, portfolios, and galleries.",null,{project:"src.seven-one"}),Ca=(0,E.t)("A Portfolio Page links to other pages, for example your projects, portfolios, and galleries.",null,{project:"src.seven-one"}),pa=(0,E.t)("Sell your physical and digital goods and services online.",null,{project:"src.seven-one"}),Sa=(0,E.t)("Each product has an individual product page to show variants and options.",null,{project:"src.seven-one"}),Ta=(0,E.t)("Select a template for your member site homepage.",null,{project:"src.seven-one"}),Aa=(0,E.t)("Your member site's homepage is the landing experience for your members when they log into their accounts.",null,{project:"src.seven-one"}),Vt={[gt.BLOG]:{title:(0,E.t)("Add Blog",null,{project:"src.seven-one"}),helpTextTitle:ca,helpText:da,isCollection:!0},[gt.EVENTS]:{title:(0,E.t)("Add Events",null,{project:"src.seven-one"}),helpTextTitle:va,helpText:ha,isCollection:!0},[gt.PORTFOLIO]:{title:(0,E.t)("Add Portfolio",null,{project:"src.seven-one"}),helpTextTitle:fa,helpText:Ca,isCollection:!0},[gt.STORE]:{title:(0,E.t)("Add Store",null,{project:"src.seven-one"}),helpTextTitle:pa,helpText:Sa,isCollection:!0},[gt.VIDEO_COLLECTION]:{title:(0,E.t)("Add Videos",null,{project:"src.seven-one",notes:"Add a video collection page. It is the title of the video collection page catalog"}),helpTextTitle:ma,helpText:ga,isCollection:!0},[gt.COURSE]:{title:(0,E.t)("Add Course",null,{project:"src.seven-one"}),helpTextTitle:ua,helpText:Ea,isCollection:!0},[gt.MEMBER_SITE]:{title:(0,E.t)("Add Member Site",null,{project:"src.seven-one",notes:"Add a member site. It is the title of the member site page catalog."}),helpTextTitle:Ta,helpText:Aa,isCollection:!0}},ya=s=>{let{category:n,subcategory:o}=s;return n===we().BLOG||o===we().BLOG},Ia=s=>{let{category:n,subcategory:o}=s;return n===we().COURSE||o===we().COURSE},Oa=s=>{let{category:n,subcategory:o}=s;return n===we().LESSONS||n===we().VIDEOS||o===we().VIDEOS},Pa=s=>{let{category:n,subcategory:o}=s;return n===we().MEMBER_SITE_HOMEPAGE||o===we().MEMBER_SITE},La=s=>{let{category:n,subcategory:o}=s;return n===we().STORE||o===we().STORE},Da=s=>{let{category:n}=s;return n===we().PORTFOLIO},Ma=s=>{let{category:n}=s;return n===we().EVENTS},Ra=s=>{let{category:n,subcategory:o}=s;return n?ya({category:n,subcategory:o})?Vt[gt.BLOG]:Ia({category:n,subcategory:o})?Vt[gt.COURSE]:Oa({category:n,subcategory:o})?Vt[gt.VIDEO_COLLECTION]:Pa({category:n,subcategory:o})?Vt[gt.MEMBER_SITE]:Ma({category:n})?Vt[gt.EVENTS]:Da({category:n})?Vt[gt.PORTFOLIO]:La({category:n,subcategory:o})?Vt[gt.STORE]:Vt[n]||{}:{}};var Na=t(689787),Mo=t(681328),Kn=t(117384),Za=t(93331),St=t(526974),kn=t(331949),Fa=t(848539),Ba=t(569773),xa=t(201037),ba=t(815211),Ua=t.n(ba),Wa=t(699321),Tt=t(92839),fn=t(459083),Yn=t(63742),At=t(934951),Ro=t(339951),Cn=t(504049),wa=t(302186);const Va=s=>{let{closePageCatalog:n}=s;const o=(0,c.zC)(),a=(0,c.Ze)(g.WVu),i=(0,c.Ze)(g.dGD),r=(0,c.Ze)(g.V3k);return(0,e.useCallback)(async u=>{if((0,xt.iW)(u),n(),r){r({type:u});return}if(u===Tt.Yi.LINK)o((0,Cn.TP)({linkEditMode:fn.BY.CREATE,linkValue:fn.E3,linkEditPath:a}));else if(u===Tt.Yi.CHOW_NOW){const d=(0,Yn.getPathForAddedItem)(i,a);await o((0,Cn._3)({externalLink:wa.jg,path:d||""})),sn.default.refresh()}else{const{itemPath:d,collectionConfig:v}=await o((0,Cn.Zo)({typeName:u,groupPathToAdd:a,navigationGroups:i})).unwrap();o((0,Cn.BL)(v.title)),setTimeout(()=>{o((0,Cn.we)(d))},500)}},[n,r,a,i,o])};var Ga=t(168794);const{CHOWNOW:Ha}=Ua(),ja=s=>!!s.connectedAccounts.find(n=>{let{serviceId:o}=n;return o===Ha}),zn=s=>{let{children:n,dataTest:o,LogoComponent:a,onClick:i}=s;return e.createElement(Fe.Z.NavItem,{"data-test":o,onClick:i},e.createElement(Fe.Z.NavText,{variant:"subtitle"},e.createElement(Ie.Z.Body,{fontWeight:"medium",my:0,display:"flex",alignItems:"center",textTransform:"uppercase",fontSize:2,letterSpacing:"0.5px"},e.createElement(a,{sx:{mr:2,width:16,height:16}}),n)))},Ka=s=>{let{addBlankOptions:n,handleClosePageCatalog:o,router:a}=s;const i=(0,c.Ze)(g.WVu),r=(0,c.Ze)(g.dGD),l=(0,c.Ze)(g.ilE),u=(0,Yn.getItemFromPath)(r,i),d=(0,Yn.getGroupFromItemPath)(r,i),v=(0,Ga.G)(a),h=(0,fn.rL)(u)&&(u==null?void 0:u.isMemberAreas)||(0,fn.rL)(d)&&!!d.isMemberAreas,y=(0,Ro.N)(Wa.Z,ja)&&!v,T=(0,fn.rL)(u)&&(u==null?void 0:u.typeName)===Tt.Yi.FOLDERS,A=Va({closePageCatalog:o});return!$e.s||l?null:e.createElement(Fe.Z.NavGroup,null,!T&&!v&&!h&&e.createElement(zn,{dataTest:"button-type-folder",LogoComponent:Fa.Z,onClick:()=>A(Tt.Yi.FOLDERS)},e.createElement(At.T,{project:"websites-content.catalog",notes:"Button to add a dropdown navigation item to organize pages."},"Dropdown")),e.createElement(zn,{dataTest:"button-type-link",LogoComponent:Ba.Z,onClick:()=>A(Tt.Yi.LINK)},e.createElement(At.T,{project:"websites-content.catalog",notes:"Button to add a link navigation item in the pages panel."},"Link")),y&&e.createElement(zn,{dataTest:"button-type-chow-now",LogoComponent:xa.Z,onClick:()=>A(Tt.Yi.CHOW_NOW)},e.createElement(At.T,{project:"websites-content.catalog",notes:"Button to add a ChowNow link navigation item in the pages panel. Only available if the ChowNow service is linked."},"ChowNow")),n)},ka=(0,Me.Z)(Ka);var Ya=t(155748),za=t(661327),Xa=t(133240),$a=t(469197),Zn=t(842132);const No=s=>{let{options:n}=s;const o=(0,Ee.wo)();return e.createElement(Fe.Z.NavGroup,null,e.createElement(Vn.Z.PopOver,{mountAt:o.body,renderTrigger:a=>{let{toggleActionListOpen:i}=a;return e.createElement(Wt.Z.Tertiary,{onClick:i,"data-test":"add-blank-options-button"},e.createElement($a.Z,{sx:{mr:2,alignSelf:"center"}}),e.createElement(At.T,{project:"websites-content.catalog",notes:"Link text to open a drawer with different options."},"Blank"))},position:"bottom-right",offset:{x:56,y:-10},style:{background:"white",borderRadius:2,boxShadow:"200",ul:{margin:0,padding:0}},bodyStyles:{borderRadius:2,p:2,minWidth:154,background:"white"}},a=>{let{onRequestClose:i}=a;return e.createElement(te.Z,{as:"ul",bg:"white",flexDirection:"column",py:1},n.map(r=>{let{Icon:l,id:u,label:d,onClick:v}=r;return e.createElement(Vn.Z.Item,{key:u,onKeyDown:h=>{const y=h.currentTarget,T=y==null?void 0:y.closest("[data-keyboard-nav-container]"),A=[];if(Array.from((T==null?void 0:T.querySelectorAll("[data-keyboard-navigable]"))??[]).forEach(F=>{(F.getAttribute("aria-disabled")===null||F.getAttribute("aria-disabled")==="false")&&A.push(F)}),A.length>0){const F=Array.prototype.indexOf.call(A,y);if(Zn.Z.isEsc(h))h.preventDefault(),i();else if(Zn.Z.isArrowDown(h)){h.preventDefault(),h.stopPropagation();const I=(F+1)%A.length;A[I].focus()}else if(Zn.Z.isArrowUp(h)){h.preventDefault(),h.stopPropagation();const I=(F-1+A.length)%A.length;A[I].focus()}else Zn.Z.isEnter(h)&&(h.preventDefault(),h.stopPropagation(),v(),i())}},"data-test":`${u}-option`,sx:{p:2,display:"flex",alignItems:"center"},onClick:()=>{i(),v()}},l&&e.createElement(l,{sx:{mr:2,height:18,width:18}}),e.createElement(Ie.Z.Body,{m:0,textTransform:"none",letterSpacing:0},d))}))}))},Qa=U.Z.isFeatureEnabled(R().SECTION_ADMIN),Zo=s=>{let{handleClosePageCatalog:n,isMemberSite:o,onAddPage:a}=s;const i=(0,e.useCallback)(l=>{a?a({type:l}):He.Y.fire("starter-page-add-collection",{typeName:l}),n()},[n,a]),r=(0,e.useMemo)(()=>{const l=[];if(l.push({Icon:Ya.Z,id:"blank-page",label:(0,E.t)("Page",null,{project:"websites-content.catalog",notes:"Option to add a new blank page from the page catalog."}),onClick:()=>i(Tt.Yi.PAGE)}),o||l.push({Icon:za.Z,id:"blank-store",label:(0,E.t)("Store",null,{project:"websites-content.catalog",notes:"Option to add a new blank store from the page catalog."}),onClick:()=>i(Tt.Yi.PRODUCTS)}),l.push({Icon:Xa.Z,id:"blank-blog",label:(0,E.t)("Blog",null,{project:"websites-content.catalog",notes:"Option to add a new blank blog from the page catalog."}),onClick:()=>i(Tt.Yi.BLOG_GRID)}),Qa){const{collectionConfigs:u}=Mo.default.getState();Object.entries(u).forEach(d=>{let[v,{collectionType:h,folder:y,title:T}]=d;y||h!==an().COLLECTION_TYPE_GENERIC&&h!==an().PORTFOLIO&&h!==an().PRODUCTS||l.push({id:v,label:T,onClick:()=>i(v)})})}return l},[i,o]);return e.createElement(No,{options:r})};var Ja=t(176515);const qa=s=>{let{isFluidEngine:n,onChangeTab:o,selectedCategory:a,selectedSubcategory:i,restrictToSingleCategory:r}=s;if($e.v&&n&&a){var l;const u=(l=rn.fh.find(d=>d.categories.some(v=>v.key===a)))===null||l===void 0?void 0:l.categories.find(d=>d.key===a);if(u!=null&&u.subcategories&&i)return{options:u.subcategories.map(d=>({id:d.key,label:Ja.D[d.key],value:d.key})).filter(d=>r?d.id===i:!0),value:i,onChange:o}}};var ln=t(540053);const Fn=(s,n)=>Object.values(s).reduce((o,a)=>{const i=a.categories.reduce((r,l)=>{if(l.subcategories&&l.subcategories.length>0){const u=l.subcategories.filter(d=>{const v=`${l.key}/${d.key}`;return n[v]&&n[v].length>0});u.length>0&&r.push({...l,subcategories:u})}else n[l.key]&&n[l.key].length>0&&r.push(l);return r},[]);return i.length>0&&(o[a.key]={...a,categories:i}),o},{}),Fo=(0,kn.U)(),_a=!U.Z.isFeatureEnabled(R().FLUID_ENGINE_OPT_OUT),ei=U.Z.isFeatureEnabled(R().SECTION_ADMIN),Xn=s=>!!s&&Object.keys(we()).some(n=>n===s);function ti(s){let{router:n}=s;const o=(0,e.useRef)(!1),a=(0,e.useRef)(!1),i=(0,c.zC)(),r=(0,c.Ze)(g.IrC),l=(0,c.Ze)(g.vOk),u=(0,c.Ze)(g.wG2),d=(0,c.Ze)(g.E6L),v=(0,c.Ze)(g.Zvl),h=(0,c.Ze)(g.Zs5),y=(0,c.Ze)(g.Nyd),T=(0,c.Ze)(g.H7P),A=(0,c.Ze)(g.PAF),F=(0,c.Ze)(g.ilE),I=(0,c.Ze)(g.Hlz),D=(0,c.Ze)(g.V3k),H=n.getCurrentLocation().pathname.toLowerCase().includes("member-site"),ie=F?Ra({category:d,subcategory:v}):{},{title:he,helpTextTitle:ne,helpText:fe,isCollection:N}=ie;(0,e.useEffect)(()=>{if(r){if(d&&u){var ue;const qe=(ue=h[d])===null||ue===void 0?void 0:ue.length;(0,ln._J)({editorType:l?"fluid_engine":"layout_engine",pageCategory:d,numOfEntries:qe})}Rn();const xe={detail:Nt(),tracer:kt.Z};(0,Ue.B1)(To,xe),(0,Ue.B1)(Io,xe),o.current||(o.current=!0,(0,Ue.L8)(Js,{tracer:kt.Z}))}},[r,u,d,h,l]),(0,e.useEffect)(()=>{r&&!(0,lt.isEmpty)(h)&&!a.current&&((0,Ue.L8)(To,{detail:Nt()}),a.current=!0)},[r,h]);const L=(0,e.useCallback)(function(){let ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;sn.default.toggleFullScreenPreviewMode(),i((0,Kn.sv)()),!ue&&(A!=null&&A.backTo)&&n.push(A==null?void 0:A.backTo)},[i,n,A]);(0,ln.lY)({deviceView:I});const G=(0,e.useCallback)((ue,xe)=>{if(Xn(ue)){const qe=Xn(xe)?xe:void 0;i((0,Kn.D2)({category:ue,subcategory:qe})),(0,ln.jg)({category:ue,subcategory:qe,catalogType:"page",editorType:l?"fluid_engine":"layout_engine"})}},[i,l]),b=ue=>{var xe;(0,Ue.L8)(Io,{detail:Nt()});const qe=y[ue];if(!qe)return;if((0,Za.rF)({selectedCategory:d,selectedSubcategory:v}),$e.s)d===we().SCHEDULING?(0,St.broadcastGuidanceTaskCompletion)({taskType:St.TaskType.ADD_SCHEDULING_PAGE}):d===we().FAQS&&(0,St.broadcastGuidanceTaskCompletion)({taskType:St.TaskType.ADD_FAQ_PAGE});else switch(d){case we().APPOINTMENTS:{(0,St.broadcastGuidanceTaskCompletion)({taskType:St.TaskType.ADD_SCHEDULING_PAGE});break}case we().FAQS:{(0,St.broadcastGuidanceTaskCompletion)({taskType:St.TaskType.ADD_FAQ_PAGE});break}}const Et={layoutId:ue,layoutIndex:d?((xe=h[d])===null||xe===void 0?void 0:xe.findIndex(ge=>ge.id===ue))+1:void 0,editorType:l?"fluid_engine":"layout_engine"};He.Y.fire("starter-page-add-collection",{...qe,typeName:d,subtypeName:v,openPageCatalogEntryPoint:T,pageCreationOptions:A,trackingPayload:Et})},Ce=(0,e.useCallback)(ue=>{He.Y.fire("starter-page-add-collection",{typeName:ue}),L()},[L]),ct=(0,e.useCallback)((ue,xe)=>{i((0,Kn.ac)(ue)),xe&&(0,xt.OH)({catalogType:"page-catalog",toFluidEngine:ue,buttonText:xe})},[i]),it=(0,e.useCallback)(ue=>{Xn(ue)&&d&&G(d,ue)},[G,d]),Je=qa({isFluidEngine:l,onChangeTab:it,selectedCategory:d,selectedSubcategory:v,restrictToSingleCategory:F}),je=(0,e.useMemo)(()=>{const ue=e.createElement(k.Z,{maxWidth:"265px"},e.createElement(Ie.Z.Subtitle,{color:"gray.400",fontSize:4,mb:4},ne),e.createElement(Ie.Z.Subtitle,{color:"gray.400",fontSize:4},fe));if($e.v&&l)return F?ue:Fo?e.createElement(Zo,{handleClosePageCatalog:L,isMemberSite:H,onAddPage:D}):null;if(N)return ue;const xe=[];if(ei){const{collectionConfigs:qe}=Mo.default.getState();Object.entries(qe).forEach(Et=>{let[ge,{collectionType:De,folder:Y,title:Se}]=Et;Y||De!==an().COLLECTION_TYPE_GENERIC&&De!==an().PORTFOLIO&&De!==an().PRODUCTS||xe.push({id:ge,label:Se,typeName:ge})})}return H?null:e.createElement(e.Fragment,null,e.createElement(on,{onClick:()=>Ce(Tt.Yi.PAGE),label:(0,E.t)("Add a blank page",null,{project:"src.seven-one"}),dataTest:"category-blank_page"}),xe.map(qe=>{let{id:Et,label:ge,typeName:De}=qe;return e.createElement(on,{key:Et,onClick:()=>Ce(De),label:(0,E.t)("Add Blank",null,{project:"src.seven-one"}),tag:ge})}))},[Ce,L,fe,ne,N,l,H,D,F]),Ke=!N&&_a,de=Ke&&!l,ut=Ke&&l,Le=(0,e.useMemo)(()=>u?Fn(de?rn.hR:rn.VW,h):de?rn.hR:rn.VW,[de,u,h]);return d?e.createElement(Hn,{categoriesConfig:Le,catalogType:hn.PAGE,isOpen:r,isLoading:!u,onRequestClose:L,selectedCategory:d,selectedSubcategory:v,onSelectCategory:G,onAddEntry:b,title:he||(0,E.t)("Add a Page",null,{project:"src.seven-one"}),entriesByCategory:h,categoryOrder:N?[d]:rn.tU,categoryMessageBundle:Na.Z,topCategoryButtons:je,bottomCategoryButtons:e.createElement(ka,{addBlankOptions:!Fo&&e.createElement(Zo,{handleClosePageCatalog:L,isMemberSite:H}),handleClosePageCatalog:L}),backdoorText:(0,E.t)("The above pages use the new Fluid Engine editor.",null,{project:"src.seven-one"}),backdoorCta:(0,E.t)("Looking for designs built with our Classic Editor?",null,{project:"src.seven-one"}),backdoorBack:(0,E.t)("Fluid Engine Pages",null,{project:"src.seven-one"}),backdoorTitle:(0,E.t)("Classic Editor Pages",null,{project:"src.seven-one"}),onToggleDoor:ct,innerTabs:Je,restrictToSingleCategory:F,isInBackdoor:de,isInFrontdoor:ut}):null}const Bo=(0,Me.Z)(ti);var ni=t(868192),oi=t(551462),Ct=t(871106),cn=t(843156),xo=t(600194);const nl="auto_layout_sidebar_explainer_dialog",dn={LAYOUT_ENGINE:"layout-engine-section",GALLERY:"gallery-section",USER_ITEMS_LIST:"user-items-list-section"},$n={AUTO_LAYOUT_BADGE:(0,E.t)("Auto",null,{project:"src.seven-one",notes:"Hovering or focusing on this element brings up a tooltip explaining the Auto Layout type of section"}),AUTO_LAYOUT_TOOLTIP:(0,E.t)("These sections let you quickly add content items and switch between layouts without having to manually rearrange them.",null,{project:"src.seven-one",notes:"This tooltip explains a new type of section layout."}),TOOLTIP_EXPLANATION:(0,E.t)("Hover or focus here for more info about auto layouts",null,{project:"src.seven-one",notes:"Hovering on this element brings up a tooltip explaining a new type of section layout"}),LEARN_MORE:(0,E.t)("Learn More",null,{project:"src.seven-one",notes:"Learn more about Auto Layout sections"})},ol=null;function bo(s){let{text:n,ctaLink:o}=s;const[a,i]=(0,e.useState)(!1),[r,l]=(0,e.useState)(null),u=(0,e.useMemo)(()=>(0,lt.debounce)(d=>i(d),10),[]);return e.createElement(e.Fragment,null,e.createElement(k.Z,{p:1,height:"34px",borderRadius:1,bg:a?"gray.100":"white",boxShadow:"300",ref:l,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)},e.createElement(xo.Z,{color:a?"white":"gray.100",display:"block"}),a?e.createElement(k.Z,{position:"absolute",top:"0px",right:"0px",width:"100px",height:"100px",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)}):null),a&&r?e.createElement(In.Z,{cacheKey:"auto-layout-badge-tooltip",container:document.head},e.createElement(O.Z,{anchor:r,isOpen:a,position:"bottom-end",margin:66,padding:0,css:{pointerEvents:"auto"}},e.createElement(k.Z,{width:"100%",height:"100%",py:2,px:3,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)},e.createElement(Ie.Z,{color:"white"},n),o?e.createElement(Wt.Z.Tertiary,{color:"white"},e.createElement("a",{href:o,target:"_blank","data-allow-link-click":!0},$n.LEARN_MORE)):null))):null)}var Gt=t(532199);function si(s){const n=s.split(">"),o=n[0]+n[1];return o.includes(dn.GALLERY)?dn.GALLERY:o.includes(dn.USER_ITEMS_LIST)?dn.USER_ITEMS_LIST:""}var pn=t(586350),Ht=t(500415),Qn=t(914239),ai=t(525710),$t=t(568688),Sn=t(334358),un=t(676619),ii=t(677215),ri=t(157530);const li=(0,kn.U)(),ci=U.Z.isFeatureEnabled(R().SECTION_ADMIN),Uo=s=>{let{handleCloseSectionCatalog:n}=s;const o=(0,c.zC)(),a=(0,c.Ze)(g.kNQ),i=(0,c.Ze)(g.jjR),r=(0,c.Ze)(g.fPO),l=(0,Qn.qu)(r),u=(0,c.Ze)(g.Zxu),[d,v]=e.useState([]),h=(0,e.useCallback)(async(y,T)=>{const A=cn.Z.addSectionFromCatalogStart();let F="",I="";if(y===Ct.gu){const{data:H}=await Gt.Z.loadBlankFluidEngine();F=H.sectionId,I="fluidEngineSection"}else if(y===Ct.XC){const{data:H}=await Gt.Z.loadBlankLayoutEngine();F=H.sectionId,I="layoutEngineSection"}else{const{data:H}=await Gt.Z.loadBlankAdminSections();F=H[Ct.A8].find(he=>he.sectionDefinitionName===T).sectionId,I="jsonSchemaSection"}if(n(),!a)return;const D=await o((0,pn.Mo)({endpointName:I,sectionId:F,sectionDefinitionName:T,afterSectionId:a,isAddAbove:i,region:l})).unwrap();cn.Z.addSectionFromCatalogFinish({collectionId:u,newSection:D,originalSectionId:null,category:"blank-section",area:l},A)},[n,o,a,i,l,u]);return(0,e.useEffect)(()=>{const y=[];ci&&!d.length&&Gt.Z.loadBlankAdminSections().then(T=>{let{data:A}=T;Object.entries(A).sort((F,I)=>{let[D]=F,[H]=I;return D.localeCompare(H)}).forEach(F=>{let[I,D]=F;console.log({sectionType:I,blankSectionsOfType:D}),D.forEach(H=>{let{sectionDefinitionName:ie}=H;y.push({id:`${I}-${ie}`,label:ie,onClick:()=>h(I,ie)})})}),v(y)})},[d,h]),e.createElement(No,{options:[{Icon:ii.Z,id:"blank-section",label:(0,E.t)("Section",null,{project:"websites-content.catalog",notes:"Option to add a new blank section from the section catalog."}),onClick:()=>h(Ct.gu)},...li?[{Icon:ri.Z,id:"blank-layout-section",label:(0,E.t)("Classic Editor",null,{project:"websites-content.catalog",notes:"Option to add a new blank layout section from the section catalog."}),onClick:()=>h(Ct.XC)}]:[],...d]})};var Bn=t(872501),di=t(178543),ui=t(415711),Jn=t(549721);const Ei=s=>{let{onChangeTab:n}=s;const o=(0,di.Z)(),a=(0,Sn.Gd)(),i=(0,c.Ze)(Jn.U0),r=(0,c.Ze)(Jn.Cw),l=(0,c.Ze)(Jn.wI);if((o||a)&&l&&Bn.t.includes(l)){const v=[{label:(0,E.t)("This site",null,{project:"src.seven-one",notes:"This is the default tab, saved sections displayed here can only be applied to the current website."}),value:f().SAVED_SECTIONS,id:"tabs-category-SAVED_SECTIONS"}];return a&&v.push({label:(0,E.t)("Your account",null,{project:"src.seven-one",notes:"This tab is only visible to circle members, saved sections displayed here can be applied to websites within the account."}),value:f().PRO_USER,id:"tabs-category-PRO_USER"}),o&&v.push({label:(0,E.t)("Team library",null,{project:"src.seven-one",notes:"This tab is only visible if the website is org-owned, saved sections displayed here can be applied to websites within the organization."}),value:f().ORGANIZATION,id:"tabs-category-ORGANIZATION"}),{options:v,value:l,onChange:n}}if($e.v&&i&&r){var d;const v=(d=un.Lc.find(h=>h.categories.some(y=>y.key===r)))===null||d===void 0?void 0:d.categories.find(h=>h.key===r);if(v!=null&&v.subcategories&&l)return{options:v.subcategories.map(h=>({id:h.key,label:ui.T[h.key],value:h.key})),value:l,onChange:n}}};var mi=t(833744),gi=t(566288),vi=t(105586),hi=t(83443),Wo=function(s){return s.CREATED_ON="createdOn",s.NAME="name",s}({}),fi=function(s){return s.ASC="asc",s.DESC="desc",s}({});const Ci={createdOn:(0,E.t)("Date Created",null,{project:"src.seven-one"}),name:(0,E.t)("A-Z",null,{project:"src.seven-one"})},pi=s=>{let{sortBy:n,sortDirection:o,setSortBy:a,setSortDirection:i,selectedSubcategory:r}=s;const l=r===f().SAVED_SECTIONS?["createdOn"]:Object.values(Wo);return e.createElement(te.Z,null,l.map(u=>{const d=n===u,v=o==="asc";return e.createElement(Wt.Z.Tertiary,{key:u,size:"medium",ml:2,sx:{opacity:d?1:.5},onClick:()=>{d?i(v?"desc":"asc"):(a(u),i("asc"))}},e.createElement(te.Z,{alignItems:"center"},!d||v?e.createElement(vi.Z,{sx:{position:"absolute"}}):e.createElement(hi.Z,{sx:{position:"absolute"}}),e.createElement(Ie.Z.Action,{ml:1,pl:4,sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},Ci[u])))}))},Si=s=>{let{searchQuery:n,selectedSubcategory:o,setSortDirection:a,setSearchQuery:i,setSortBy:r,sortBy:l,sortDirection:u}=s;const d=(0,e.useRef)(null);return(0,E.t)("Search",null,{project:"src.seven-one",notes:"Label displayed as a placeholder in a search field used for searching for saved sections by name"}),e.createElement(te.Z,{flexGrow:1,justifyContent:"space-between"},e.createElement(mi.Z.Input,{exteriorPre:e.createElement(gi.Z,{color:"gray.100",onClick:v=>{var h;v.preventDefault(),(h=d.current)===null||h===void 0||h.focus()}}),inputValue:n,inputRef:d,onChange:i,sx:{cursor:"text"},variant:"default"}),e.createElement(pi,{sortBy:l,sortDirection:u,setSortBy:r,setSortDirection:a,selectedSubcategory:o}))};var Ti=t(651780),Ai=t(967552),yi=t(443416),Ii=t(477743);const wo=s=>e.createElement(te.Z,{height:"sizes.250",width:"sizes.250",justifyContent:"center",alignItems:"center"},e.createElement(Ai.Z.Element.Icon,{...s,sx:{"&:disabled":{cursor:"not-allowed"}}})),Oi=s=>{let{page:n,setPage:o,totalPages:a}=s;return e.createElement(te.Z,{height:"sizes.350",p:2,justifyContent:"center",alignItems:"center"},e.createElement(wo,{disabled:n===0,onClick:()=>o(n-1)},e.createElement(yi.Z,{color:n===0?"gray.500":"gray.100"})),e.createElement(Ie.Z.Body,{m:0,px:2,color:"gray.300"},(0,E.t)("{currentPage} of {totalPages}",{currentPage:n+1,totalPages:a},{project:"src.seven-one"})),e.createElement(wo,{disabled:n+1===a,onClick:()=>o(n+1)},e.createElement(Ii.Z,{color:n+1===a?"gray.500":"gray.100"})))},Tn=10,Pi=500,Li=s=>s===f().ORGANIZATION?{trackSelect:()=>$t.U3.trackUserClicksEnterpriseButton({productArea:$t.Wl.SAVED_SECTIONS,objectIdentifier:"multi-select-section"}),trackDelete:()=>$t.U3.trackUserClicksEnterpriseButton({productArea:$t.Wl.SAVED_SECTIONS,objectIdentifier:"delete-section"}),scope:Ht.sX.ORGANIZATION,isAdmin:(0,Ti.RN)(),emptyText:(0,E.t)("Sections saved to your team library appear here. Use them across any site in your organization.",null,{project:"src.seven-one"}),entriesSelector:g.ptW}:s===f().PRO_USER?{trackSelect:Sn.U3.UserMultiSelectsSection,trackDelete:Sn.U3.UserDeletesSavedSection,scope:Ht.sX.ACCOUNT,isAdmin:!0,emptyText:(0,E.t)("Sections saved to your account appear here. Use them across any site where you have editing permissions.",null,{project:"src.seven-one"}),entriesSelector:g.GH_}:{trackSelect:n=>{const{section:o}=(0,g.V9S)((0,c.d6)()).find(a=>{let{section:i}=a;return i.id===n});(0,wt.rW)(o)},trackDelete:wt.tS,scope:Ht.sX.WEBSITE,isAdmin:!0,emptyText:(0,E.t)("Sections saved to your site appear here.",null,{project:"src.seven-one"}),entriesSelector:g.V9S},Di=s=>{let{onAddEntry:n,frameWidth:o,columnCount:a,isMobileView:i,searchQuery:r,sortBy:l,sortDirection:u}=s;const d=(0,c.zC)(),v=(0,e.useRef)(null),h=(0,Ee.wo)(),y=(0,c.Ze)(g.Cwv),T=(0,c.Ze)(g.wIX),F=(0,c.Ze)(g.fPO)===Gn.Z.FOOTER,[I,D]=(0,e.useState)(0),H=(0,e.useRef)(!0),{trackSelect:ie,trackDelete:he,scope:ne,isAdmin:fe,emptyText:N,entriesSelector:L}=Li(T),G=(0,c.Ze)(L),b=(0,c.Ze)(g.al$)[T],Ce=(b==null?void 0:b.isLoaded)||!1,ct=(b==null?void 0:b.queryResultsCount)||0,it=Math.floor((ct+Tn-1)/Tn);!(G||[]).length&&I>0&&D(I-1),(0,e.useEffect)(()=>{if(H.current){H.current=!1;return}const ge=(0,lt.debounce)(()=>{d((0,Xt.tx)({scope:ne,pageSize:Tn,page:0,search:r,sortBy:l,sortDirection:u})),D(0)},Pi);return ge(),()=>ge.cancel()},[r]),(0,e.useEffect)(()=>{d((0,Xt.tx)({scope:ne,pageSize:Tn,page:I,search:r,sortBy:l,sortDirection:u}))},[ne,I,l,u]);const Je=(0,e.useMemo)(()=>{if(!G)return[];const ge=De=>F&&"section"in De?De.section.sectionName!==vo.Z.JSON_SCHEMA:!0;return G.filter(ge).map(De=>({sectionId:De.id,...De.section,html:De.html,name:De.name,Accessory:De.Accessory}))},[G,r,F]),je=(Je==null?void 0:Je.length)>0,[Ke,de]=(0,e.useState)([]),ut=ge=>{n({sectionId:ge,entries:G})},Le=()=>de(Je.map(ge=>{let{id:De}=ge;return De})),ue=()=>de([]),xe=(0,e.useCallback)(ge=>{ie(ge),de(Ke.find(De=>De===ge)?Ke.filter(De=>De!==ge):[...Ke,ge])},[Ke,de,ie]),qe=(0,e.useCallback)(()=>{const ge=go({selectedSectionIds:Ke,entries:G}),De=ge.length>1;he(De),d((0,Xt.C4)({sectionIds:ge,scope:ne,pageSize:Tn,page:I,search:r,sortBy:l,sortDirection:u})),setTimeout(()=>ue(),200)},[Ke,G,d,he,ne]),Et=ge=>{(ge.metaKey||ge.ctrlKey)&&ge.key==="a"&&(ge.preventDefault(),Le())};return(0,Eo.Z)("keydown",Et,{element:h}),Ce?e.createElement(te.Z,{flexDirection:"column",height:"100%",ref:v,"data-test":`catalog-${T}`},je?e.createElement(Un,{entries:Je,columnCount:a,onAddEntry:ut,frameWidth:o,doesSupportMultiselect:fe,onClickCheckbox:xe,selectedSectionIds:Ke,hasNameEditing:!0,selectedCategory:y,selectedSubcategory:T,isMobileView:i}):r?e.createElement(te.Z,{flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",mt:-4},e.createElement(Ie.Z.Title,{color:"gray.100",m:2,textTransform:"none"},(0,E.t)("No results found.",null,{project:"src.seven-one"})),e.createElement(Ie.Z.Body,{color:"gray.300",m:0},(0,E.t)("Try searching for something else.",null,{project:"src.seven-one"}))):e.createElement(te.Z,{flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",mt:-4},e.createElement(uo.Z,{width:36,height:36}),e.createElement(Ie.Z.Title,{color:"gray.100",m:2,textTransform:"none"},(0,E.t)("Nothing saved yet.",null,{project:"src.seven-one"})),e.createElement(Ie.Z.Body,{color:"gray.300",m:0},N)),it>1&&e.createElement(Oi,{page:I,setPage:D,totalPages:it}),e.createElement(te.Z,{width:"100%",flexDirection:"row",justifyContent:"center"},e.createElement(mo,{selectedSectionIds:Ke,handleDeleteSections:qe,handleSelectAllSections:Le,handleClearSelectedSections:ue}))):e.createElement(te.Z,{justifyContent:"center",alignItems:"center",height:"100%"},e.createElement(Ye.Z,null))},Mi=s=>{let{closeSectionCatalog:n}=s;const o=(0,c.zC)(),a=(0,c.Ze)(g.kNQ),i=(0,c.Ze)(g.jjR),r=(0,c.Ze)(g.fPO),l=(0,Qn.qu)(r),u=(0,c.Ze)(g.wIX),v=(0,c.Ze)(g.Hlz)===ho.Z.PHONE||(0,K.i)(ce.breakpoints).platform==="mobile",[h,y]=(0,e.useState)(""),[T,A]=(0,e.useState)(Wo.CREATED_ON),[F,I]=(0,e.useState)(fi.ASC),D=(0,e.useCallback)(async ne=>{let{sectionId:fe,entries:N}=ne;const L=N.find(ct=>"section"in ct&&ct.section.id===fe);if(!L)return;let G,b;u===f().ORGANIZATION?(G=Ht.sX.ORGANIZATION,b=$t.U3.trackUserAddsSavedSectionToPage):u===f().PRO_USER?(G=Ht.sX.ACCOUNT,b=Sn.U3.UserAddsSavedSectionToPage):(G=Ht.sX.WEBSITE,b=()=>(0,wt.bd)(L.section));const Ce=(0,Ht.BH)({id:L.id},G);b(),n(),await o((0,pn.qG)({addPromise:Ce,afterSectionId:a,isAddAbove:i,region:l}))},[n,u,o,a,i,l]),H=u===f().ORGANIZATION||u===f().PRO_USER||(0,Pn.Z)()&&u===f().SAVED_SECTIONS,ie=(0,e.useMemo)(()=>e.createElement(Si,{searchQuery:h,selectedSubcategory:u,setSortDirection:I,setSearchQuery:y,setSortBy:A,sortBy:T,sortDirection:F}),[h,u,T,F]),he=(0,e.useCallback)(ne=>{let{columnCount:fe,frameWidth:N}=ne;return H?e.createElement(Di,{searchQuery:h,onAddEntry:D,frameWidth:N,columnCount:fe,sortBy:T,sortDirection:F,isMobileView:v}):null},[v,D,H,h,T,F]);return H?{subNavigation:ie,customCatalogEntries:he}:{}};var Ri=t(24099);const qn=(0,kn.U)(),Ni=U.Z.isFeatureEnabled(R().SECTION_ADMIN),Vo=!U.Z.isFeatureEnabled(R().FLUID_ENGINE_OPT_OUT),_n=s=>!!s&&Object.keys(f()).some(n=>n===s);function Zi(){const s=(0,c.zC)(),n=(0,c.Ze)(g.Zxu),o=(0,c.Ze)(g.fPO),a=(0,Qn.qu)(o),i=(0,c.Ze)(g.U07),r=(0,c.Ze)(g.V8S),l=(0,c.Ze)((0,g.FWA)(Wn().FLUID_ENGINE_SAVED_SECTIONS)),u=(0,c.Ze)(g.aFX),d=(0,c.Ze)(g.gxk),v=(0,c.Ze)(g.IWw),h=(0,c.Ze)(g.kNQ),y=(0,c.Ze)(g.jjR),T=(0,c.Ze)(g.Cwv),A=(0,c.Ze)(g.wIX),F=(0,c.Ze)(g.Hlz),I=o===Gn.Z.FOOTER,D=(0,e.useMemo)(()=>I?Ri.Z:i?Dn.yg:Dn.eA,[I,i]),H=(0,c.Ze)(g.V9S),[ie,he]=(0,e.useState)([]),ne=(0,e.useMemo)(()=>(0,lt.mapValues)(d,Y=>Y.map(Se=>{const ze="html"in Se?Se.html??"":"",tt=si(ze);return{...Se,html:ze,Accessory:tt===dn.USER_ITEMS_LIST?()=>e.createElement(bo,{text:$n.AUTO_LAYOUT_TOOLTIP}):tt===dn.GALLERY?()=>e.createElement(bo,{text:$n.AUTO_LAYOUT_TOOLTIP,ctaLink:ni.GALLERY_SECTION}):void 0}})),[d]);(0,ln.lY)({deviceView:F}),(0,e.useEffect)(()=>{if(u){(0,ln.co)({editorType:i?"fluid_engine":"layout_engine"}),Rn();const Y={detail:Nt(),tracer:kt.Z};(0,Ue.B1)(Oo,Y),(0,Ue.B1)(Ao,Y)}},[u,i]);const fe=(0,e.useRef)(!1);(0,e.useEffect)(()=>{u&&!(0,lt.isEmpty)(d)&&!fe.current&&((0,Ue.L8)(Ao,{detail:Nt()}),fe.current=!0)},[u,d]),(0,e.useEffect)(()=>{if(Ni){const Y=[];Gt.Z.loadBlankAdminSections().then(Se=>{let{data:ze}=Se;Object.entries(ze).sort((tt,nt)=>{let[_t]=tt,[Zt]=nt;return _t.localeCompare(Zt)}).forEach(tt=>{let[nt,_t]=tt;_t.forEach(Zt=>{let{sectionDefinitionName:ds}=Zt;Y.push({sectionDefinitionName:ds,sectionType:nt})})}),he(Y)})}},[]);const N=(0,e.useCallback)(()=>{s((0,Xt.CQ)())},[s]),L=(0,e.useCallback)((Y,Se)=>{if(_n(Y)){const ze=_n(Se)?Se:void 0;s((0,Xt.gl)({category:Y,subcategory:ze}))}(0,xt.u7)(Y,"section-catalog")},[s]),G=async Y=>{const Se=H.find(tt=>"section"in tt&&tt.section.id===Y);if(!Se)return;const ze=(0,Ht.P9)({id:Se.id});N(),await s((0,pn.qG)({addPromise:ze,afterSectionId:h,isAddAbove:y,region:a}))},b=async Y=>{const Se=cn.Z.addSectionFromCatalogStart();(0,Ue.L8)(Oo,{detail:Nt()});const ze=v[Y];if(!ze)return;T===f().FORM&&ai.cC({hasInteractedWithForm:!0}),T===f().CONTACT&&(0,St.broadcastGuidanceTaskCompletion)({taskType:St.TaskType.ADD_CONTACT_FORM});const tt=await s((0,pn.mi)({section:ze,afterSectionId:h,websiteId:ze.websiteId,isAddAbove:y,componentReplacements:ze.componentReplacements||[],region:a})).unwrap();if(cn.Z.addSectionFromCatalogFinish({collectionId:n,newSection:tt,originalSectionId:Y,category:T,area:I?"footer":"main"},Se),$e.v&&T){var nt;(0,ln.al)({layoutId:Y,layoutIndex:((nt=ne[T])===null||nt===void 0?void 0:nt.findIndex(_t=>_t.id===Y))+1,sectionId:tt.id,editorType:i?"fluid_engine":"layout_engine"})}},Ce=(0,e.useCallback)(async(Y,Se)=>{const ze=cn.Z.addSectionFromCatalogStart();let tt="",nt="";if(Y===Ct.gu){const{data:Zt}=await Gt.Z.loadBlankFluidEngine();tt=Zt.sectionId,nt="fluidEngineSection"}else if(Y===Ct.XC){const{data:Zt}=await Gt.Z.loadBlankLayoutEngine();tt=Zt.sectionId,nt="layoutEngineSection"}else{const{data:Zt}=await Gt.Z.loadBlankAdminSections();tt=Zt[Ct.A8].find(Yr=>Yr.sectionDefinitionName===Se).sectionId,nt="jsonSchemaSection"}N();const _t=await s((0,pn.Mo)({endpointName:nt,sectionId:tt,sectionDefinitionName:Se,afterSectionId:h,isAddAbove:y,region:a})).unwrap();cn.Z.addSectionFromCatalogFinish({collectionId:n,newSection:_t,originalSectionId:null,category:"blank-section",area:a},ze)},[N,s,h,y,a,n]),ct=(0,e.useCallback)((Y,Se)=>{s((0,Xt.Tj)(Y)),Se&&Vo&&(0,xt.OH)({catalogType:"section-catalog",toFluidEngine:Y,buttonText:Se})},[s]),it=(0,e.useCallback)(()=>{(0,wt.Hn)(),L(f().SAVED_SECTIONS)},[L]),Je=(0,e.useCallback)(Y=>{L(f().SAVED_SECTIONS,Y)},[L]),je=(0,e.useCallback)(Y=>{_n(Y)&&(Y===f().SAVED_SECTIONS&&it(),Y===f().ORGANIZATION&&(Je(Y),$t.U3.trackUserClicksEnterpriseButton({productArea:$t.Wl.SAVED_SECTIONS,objectIdentifier:"section-catalog-category"})),Y===f().PRO_USER&&(Je(Y),Sn.U3.UserSelectsSavedSectionCategory()),!Bn.t.includes(Y)&&T&&L(T,Y))},[L,it,Je,T]),Ke=Ei({onChangeTab:je}),de=(0,e.useMemo)(()=>{const Y=Bn.t.includes(T);return e.createElement(Fe.Z.NavItem,{is:io,key:f().SAVED_SECTIONS,onClick:it,"data-test":`category-${f().SAVED_SECTIONS}`,value:f().SAVED_SECTIONS,isSelected:Y,"data-selected":Y,"data-allow-link-click":!0},e.createElement(Fe.Z.NavText,{variant:"subtitle"},e.createElement(Ie.Z.Body,null,e.createElement(At.T,{project:"websites-content.catalog",notes:"Link to show sections that have been saved by the user."},"Saved"))))},[it,T]),ut=(0,e.useMemo)(()=>i?$e.s?qn?null:e.createElement(Fe.Z.NavGroup,null,de,e.createElement(Uo,{handleCloseSectionCatalog:N})):qn?e.createElement(Fe.Z.NavGroup,null,e.createElement(on,{onClick:()=>Ce(Ct.XC),label:(0,E.t)("Add Blank",null,{project:"src.seven-one"}),tag:(0,E.t)("Classic Editor",null,{project:"src.seven-one"})})):null:null,[Ce,i,N,de]),Le=(0,e.useMemo)(()=>$e.v&&i?qn?[e.createElement(Uo,{key:"add-blank-options",handleCloseSectionCatalog:N}),e.createElement(Fe.Z.NavGroup,{key:"saved-sections-group"},de)]:null:e.createElement(Fe.Z.NavGroup,null,e.createElement(on,{onClick:()=>Ce(i?Ct.gu:Ct.XC),label:(0,E.t)("Add a blank section",null,{project:"src.seven-one"}),dataTest:"category-blank_section"}),ie.map(Y=>{let{sectionDefinitionName:Se,sectionType:ze}=Y;return e.createElement(on,{key:Se||ze,onClick:()=>Ce(ze,Se),label:(0,E.t)("Add Blank",null,{project:"src.seven-one"}),tag:Se||ze})}),e.createElement(Fe.Z.NavItem,{key:f().SAVED_SECTIONS,onClick:it,"data-test":`category-${f().SAVED_SECTIONS}`,value:f().SAVED_SECTIONS,isSelected:Bn.t.includes(T),"data-allow-link-click":!0},e.createElement(Fe.Z.NavText,{variant:"subtitle"},(0,E.t)("Saved sections",null,{project:"src.seven-one"})))),[it,ie,T,Ce,i,de,N]),{subNavigation:ue,customCatalogEntries:xe}=Mi({closeSectionCatalog:N}),qe=Vo,Et=qe&&!i,ge=qe&&i,De=(0,e.useMemo)(()=>I?un.iC:r?Fn(Et?un.OL:un.l3,ne):Et?un.OL:un.l3,[I,Et,r,ne]);return T?e.createElement(Hn,{categoriesConfig:De,catalogType:hn.SECTION,isOpen:u,onRequestClose:N,selectedCategory:T,selectedSubcategory:A,sectionCatalogSectionId:h,onSelectCategory:L,onAddEntry:b,onAddSavedSection:G,showSavedSectionsCard:!l,title:(0,E.t)("Add a Section",null,{project:"src.seven-one"}),entriesByCategory:ne,categoryOrder:D,categoryMessageBundle:oi.Z,topCategoryButtons:Le,bottomCategoryButtons:ut,isInBackdoor:Et,isInFrontdoor:ge,backdoorText:(0,E.t)("The above sections use the new Fluid Engine editor.",null,{project:"src.seven-one"}),backdoorCta:(0,E.t)("Looking for sections built with our Classic Editor?",null,{project:"src.seven-one"}),backdoorBack:(0,E.t)("Fluid Engine Sections",null,{project:"src.seven-one"}),backdoorTitle:(0,E.t)("Classic Editor Sections",null,{project:"src.seven-one"}),onToggleDoor:ct,innerTabs:Ke,subNavigation:ue,customCatalogEntries:xe,isLoading:!r}):null}const Go=Zi;var Ho=t(681636);const Fi=(0,et.Z)(()=>Promise.all([t.e("38602"),t.e("2660"),t.e("73054"),t.e("58991"),t.e("25856"),t.e("58905"),t.e("92743"),t.e("27643"),t.e("78781"),t.e("77243"),t.e("73039"),t.e("39933"),t.e("78297"),t.e("15047"),t.e("18022"),t.e("50032"),t.e("36898"),t.e("44919")]).then(t.bind(t,465244)),()=>e.createElement(e.Fragment,null),"SiteHeaderEditor");function jo(s){let{Y:n}=s;return e.createElement(Fi,{Y:n})}jo.propTypes={Y:Ne().object.isRequired};const Ko=(0,c.a9)(s=>({isSiteHeaderLoading:!(0,g.Zl0)(s)}))(jo),ko={Desktop:e.lazy(()=>Promise.resolve().then(t.bind(t,548453))),Mobile:e.lazy(()=>Promise.resolve().then(t.bind(t,357375)))};var Bi=t(134521),xi=t.n(Bi),Yo=t(668569),zo=t(850255),bi=t(92485);const Xo=!!window.Cypress||["Mac","iPhone","iPad"].some(s=>{var n;return(n=window.navigator.platform)===null||n===void 0?void 0:n.startsWith(s)})?"metaKey":"ctrlKey";function Ui(s){return s[Xo]&&s.key.toLowerCase()==="z"&&!s.shiftKey}function Wi(s){return s[Xo]&&(s.shiftKey&&s.key.toLowerCase()==="z"||s.key==="y")}const wi=()=>{(0,Yo.hr)({isFromKeyboardShortcut:!0,editCount:(0,g.j2F)((0,c.d6)()),netEditCount:(0,g.QbO)((0,c.d6)())}),(0,c.GE)((0,zo.Yw)())},Vi=()=>{(0,Yo.Yt)({isFromKeyboardShortcut:!0,editCount:(0,g.j2F)((0,c.d6)()),netEditCount:(0,g.QbO)((0,c.d6)())}),(0,c.GE)((0,zo.KX)())};function Gi(){const s=xi()(a=>a==="undo"?wi():Vi(),150,{trailing:!1}),n=a=>{const i=(0,c.d6)();(0,bi.i)()&&!((0,g.gqq)(i)||(0,g.FCp)(i))&&(Ui(a)?(a.preventDefault(),(0,g.j3Q)(i)&&s("undo")):Wi(a)&&(a.preventDefault(),(0,g.UYk)(i)&&s("redo")))};document.addEventListener("keydown",n);const o=(0,Ee.wo)();return o==null||o.addEventListener("keydown",n),function(){s.cancel(),document.removeEventListener("keydown",n),o==null||o.removeEventListener("keydown",n)}}var Hi=t(723398),An=t.n(Hi),ji=t(559409),Ki=t.n(ji),eo=t(746933),ki=t(549842),Yi=t(834105),zi=t(571169),ve=t(757681),Xi=t(636707);const $i=s=>{let o=null;return function(i){var r,l;const u=(l=i.target)===null||l===void 0||(r=l.closest)===null||r===void 0?void 0:r.call(l,"label");if(u&&(u.getAttribute("for")||u.querySelector("input, textarea, select")))return;const d=new Date().getTime();if(o&&d-o<=250)return o=null,setTimeout(s,0);o=d}},Qi=s=>s.isControllerInitialized,Ji=s=>{const n=(0,c.Ze)(g.aEP),o=(0,c.Ze)(g.Zxu),a=(0,c.Ze)(g.gEH),i=(0,c.Ze)(g.x38),r=(0,c.Ze)(g.EeC),l=(0,c.Ze)(g.ML5),{overlayEventEmitter:u}=(0,eo.bR)(),d=(0,Ro.N)(Xi.Z,Qi),h=!!o&&r&&d&&!!(!i||a),{handleEdit:y,doExitSiteStylesEditing:T,doToggleEditModePreview:A}=(0,e.useContext)(Pe.Z);(0,e.useEffect)(()=>{if(u&&h&&([w.hn.PREVIEW_LEFT_PANEL,w.hn.PAGE_EDIT_RIGHT_PANEL].includes(n)||l)){const F=$i(()=>{var I,D;Yi.Z.getState().siteStatus===Ki().EXPIRED||ki.Z.getState().isEditingCustomCss||!((I=s.getCurrentRoute())===null||I===void 0)&&I.isPopupOverlay||(((D=s.getCurrentRoute())===null||D===void 0?void 0:D.path)||"").includes("replace-fonts")||(n===w.hn.PAGE_EDIT_RIGHT_PANEL?T():l?A(!1):((0,zi.gK)(),y()))});return u.on(ve.ot,F),()=>{u.off(ve.ot,F)}}},[u,n,h,y,T,A,s,l])},qi=s=>{let{router:n}=s;return Ji(n),null};var xn=t(434451),$o=t(70426),_i=t(663634),Qo=t(361282),yn=t(762535);function er(s){const n=s==null?void 0:s.getCurrentLocation(),o=[yn.Z.forWebsiteCheckout(),yn.Z.forChangeWebsitePlan()],a=[yn.Z.forMobilePathToPublish()],i=[yn.Z.forMobilePTCSelector(),yn.Z.forMobileLabelPurchase()],r=o.includes(n==null?void 0:n.pathname),l=a.includes(n==null?void 0:n.pathname),u=i.includes(n==null?void 0:n.pathname),d=Qo.ZP.isOverlayOpen(s);return r||l||u||d}function to(s,n,o){return n in s?Object.defineProperty(s,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[n]=o,s}const Jo=(0,et.Z)(()=>Promise.all([t.e("38602"),t.e("99414"),t.e("2660"),t.e("73054"),t.e("58991"),t.e("25856"),t.e("78931"),t.e("92743"),t.e("27643"),t.e("77243"),t.e("73039"),t.e("39933"),t.e("78297"),t.e("15047"),t.e("50032"),t.e("15432"),t.e("10984"),t.e("36898"),t.e("84194")]).then(t.bind(t,603642)),()=>e.createElement(e.Fragment,null)),tr=(0,et.Z)(()=>Promise.all([t.e("38602"),t.e("2660"),t.e("92743"),t.e("1852"),t.e("15432"),t.e("31921")]).then(t.bind(t,14991)),()=>e.createElement(e.Fragment,null)),qo=(0,et.Z)(()=>Promise.all([t.e("38602"),t.e("99414"),t.e("2660"),t.e("73054"),t.e("58991"),t.e("25856"),t.e("78931"),t.e("92743"),t.e("27643"),t.e("77243"),t.e("73039"),t.e("39933"),t.e("78297"),t.e("15047"),t.e("50032"),t.e("15432"),t.e("10984"),t.e("35335")]).then(t.bind(t,823136)),()=>e.createElement(e.Fragment,null)),_o=(0,et.Z)(()=>t.e("82178").then(t.bind(t,574031)),()=>e.createElement(e.Fragment,null)),nr=(0,et.Z)(()=>t.e("78274").then(t.bind(t,44661)),()=>e.createElement(e.Fragment,null)),or=(0,et.Z)(()=>t.e("82907").then(t.bind(t,767742)),()=>e.createElement(e.Fragment,null)),sr=(0,et.Z)(()=>Promise.all([t.e("69545"),t.e("50634")]).then(t.bind(t,834621)),()=>e.createElement(e.Fragment,null)),ar=(0,et.Z)(()=>Promise.all([t.e("69545"),t.e("27615")]).then(t.bind(t,736239)),()=>e.createElement(e.Fragment,null)),ir=(0,et.Z)(()=>t.e("48033").then(t.bind(t,912975)),()=>e.createElement(e.Fragment,null)),es=(0,et.Z)(()=>Promise.all([t.e("38602"),t.e("2660"),t.e("73054"),t.e("25856"),t.e("92743"),t.e("27643"),t.e("77243"),t.e("73039"),t.e("39933"),t.e("15047"),t.e("20628")]).then(t.bind(t,117648)),()=>e.createElement(e.Fragment,null)),rr=U.Z.isFeatureEnabled(R().SECTION_ADMIN),lr=(0,_i.cr)("new_catalog_taxonomy");var cr;class ts extends(cr=e.Component){componentDidUpdate(n){const o=(0,w.qN)(n.frameMode)&&!n.isEditModePreview,a=(0,w.qN)(this.props.frameMode)&&!this.props.isEditModePreview;if(!o&&a)this._detachUndoRedoKeyListener=Gi();else if(o&&!a){var i,r;(i=(r=this)._detachUndoRedoKeyListener)===null||i===void 0||i.call(r),this._detachUndoRedoKeyListener=null}n.deviceView!==this.props.deviceView&&(0,Ee.V6)()&&He.Y.fire("frame:device:change",{previousView:n.deviceView})}componentWillUnmount(){this.cleanUpHotKeysManager()}cleanUpHotKeysManager(){this.hotKeysManager&&this.hotKeysManager.unbindListeners()}shouldHideEditButton(){var n;const{location:o,frameMode:a,router:i}=this.props,r=o.basename+o.pathname,l=(n=o.state)===null||n===void 0?void 0:n.frameUrl;return!r||!l?!1:(0,xn.wj)(r,a)||(0,xn.PK)(r)||(0,xn.F5)(i)&&a!==w.hn.PAGE_EDIT_RIGHT_PANEL}shouldHidePreviewButton(){const{location:n}=this.props,o=n.basename+n.pathname;return o?xn.ML.some(a=>o.startsWith(a)):!1}render(){const{location:n,router:o,frameMode:a}=this.props,{platform:i}=(0,K.i)(ce.breakpoints);return e.createElement(e.Suspense,{fallback:e.createElement("p",null,e.createElement(At.T,{project:"src.seven-one"},"Loading"))},e.createElement(Lt.Z.Provider,{value:o},e.createElement(Dt.Z.Provider,{value:n},i==="mobile"?this.renderFrameMobile():this.renderFrameDesktop(),(0,w.qN)(a)&&e.createElement(Rt,{isSiteStylesEditing:a===w.hn.PAGE_EDIT_RIGHT_PANEL}))))}constructor(...n){super(...n),to(this,"renderFrameDesktop",()=>{const{children:o,deviceView:a,frameMode:i,isFrameLoaded:r,isPreviewTuckedOrHidden:l,routeWidthSize:u,toggleFullScreenPreviewMode:d,Y:v,router:h}=this.props,y=(0,w.BX)(i),T=!y&&(0,$o.VJ)(),A=p()("config-website-frame",An().frame,{[An().fullscreen]:y,[An().shiftDownForMigrationBanner]:T}),F=p()(An().contentAreaWithoutToolbar),I=p()(An().contentAreaWithToolbar);return e.createElement(Ho.Z,{isRootUsage:!0},e.createElement(ko.Desktop,{is70InManageIndexMode:!1,deviceView:a,frameMode:i,className:A,toolbar:e.createElement(jt.Z,{isHidden:i===w.hn.PREVIEW_FULL_SCREEN,frameMode:i,shouldHideEditButton:this.shouldHideEditButton(),shouldHidePreviewButton:this.shouldHidePreviewButton(),router:h}),contentAreaClassName:i===w.hn.PREVIEW_FULL_SCREEN?F:I,toggleFullScreenPreviewMode:d,isFrameLoaded:r,isPreviewTuckedOrHidden:l,routeWidthSize:u},i===w.hn.PAGE_EDIT_FULL_SCREEN&&e.createElement(e.Fragment,null,rr&&(lr?e.createElement(e.Fragment,null,e.createElement(nr,null),e.createElement(or,null),e.createElement(sr,null),e.createElement(ar,null),e.createElement(_o,null)):e.createElement(e.Fragment,null,e.createElement(_o,null),e.createElement(ir,{Y:v}))),e.createElement(es,null),e.createElement(Jo,{Y:v}),e.createElement(tr,{Y:v}),e.createElement(qo,{Y:v}),e.createElement(Ko,{Y:v}),e.createElement(Go,null)),i===w.hn.PREVIEW_FULL_SCREEN&&e.createElement(e.Fragment,null,e.createElement(Bo,null),e.createElement(Do,null)),r&&e.createElement(qi,{router:h}),e.createElement("div",{className:"preview-viewport"},o)))}),to(this,"renderFrameMobile",()=>{const{router:o,Y:a,frameMode:i,deviceView:r,isBlockEditorOpen:l,isBlockFocused:u}=this.props,d=er(o);return(0,Q.Z)()||(0,$o.VJ)()?null:e.createElement(Ho.Z,{isRootUsage:!0},e.createElement(ot.Z.Provider,null,e.createElement(rt.Z.Provider,{theme:Pt.rosetta.white},e.createElement(ko.Mobile,{deviceView:r,shouldHideDrawer:d,shouldHidePreviewButton:this.shouldHidePreviewButton(),shouldHideEditButton:this.shouldHideEditButton(),router:o},i===w.hn.PAGE_EDIT_FULL_SCREEN?e.createElement(e.Fragment,null,e.createElement(es,null),e.createElement(Jo,{Y:a,disableControls:l||u}),e.createElement(qo,{Y:a}),e.createElement(Ko,{Y:a}),e.createElement(Go,null)):e.createElement(e.Fragment,null,e.createElement(Bo,null),e.createElement(Do,null)),e.createElement("div",{className:"preview-viewport"},this.props.children))),e.createElement(ke,null)))})}}to(ts,"propTypes",{Y:Ne().object,frameMode:Ne().string.isRequired,router:Kt.Z.isRequired,toggleFullScreenPreviewMode:Ne().func,tweaksIsDirty:Ne().bool,isPreviewTuckedOrHidden:Ne().bool.isRequired,routeWidthSize:Ne().string.isRequired,isEditModePreview:Ne().bool});const dr=(0,c.a9)(s=>({deviceView:(0,g.Hlz)(s),frameMode:(0,g.aEP)(s),isBlockEditorOpen:(0,g.m1X)(s),isBlockFocused:(0,g.Xax)(s),isEditModePreview:(0,g.ML5)(s)}))(ts);var ur=t(989250),Er=t(462689),mr=t(655191);const gr=s=>{const n=Er.dI.getCollection(s);return(0,ur.j)(n)===mr.A.PRODUCT_COLLECTION};var vr=t(125582),hr=t(292165),fr=t(682345),Qt=t(629786),ns=t(17937);const En={initial:{transitionProperty:"opacity",transitionDuration:ce.time[250],transitionTimingFunction:"ease-out"},sx:{entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0},unmounted:{opacity:0}}},Cr=s=>{let{showUpsellBanner:n,showUpsellBoundingBox:o}=s;const[a,i]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{o&&(0,Qt.uy)({objectIdentifier:Qt.rP.BOUNDING_BOX_STORE_PAGES,objectType:Qt.LP.BOUNDING_BOX})},[o]),(0,e.useEffect)(()=>{o&&(n||a)&&(0,Qt.IF)({objectIdentifier:Qt.rP.BOUNDING_BOX_STORE_PAGES})},[n,a,o]),e.createElement(e.Fragment,null,e.createElement(ns.default,{timeout:{exit:250},in:o,mountOnEnter:!0,unmountOnExit:!0},r=>e.createElement(e.Fragment,null,e.createElement(k.Z,{position:"absolute",height:"calc(100% - 12px)",width:"calc(100% - 12px)",margin:"1",borderWidth:"2px",borderStyle:"solid",borderColor:"yellow.500",css:{"pointer-events":"none"},style:{...En.initial,...En.sx[r]}}),e.createElement(k.Z,{position:"absolute",height:"calc(100% - 16px)",width:"calc(100% - 16px)",margin:"8px",borderWidth:"2px",borderStyle:"solid",borderColor:"yellow.700",css:{"pointer-events":"none"},style:{...En.initial,...En.sx[r]}}))),e.createElement(ns.default,{timeout:{exit:250},mountOnEnter:!0,unmountOnExit:!0,in:(n||a)&&o},r=>e.createElement(k.Z,{backgroundColor:"white",position:"absolute",top:"3",right:"3",ml:"3",maxWidth:420,p:"4",borderWidth:"1",borderStyle:"solid",borderColor:"gray.800",borderRadius:"1",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),style:{...En.initial,...En.sx[r]}},e.createElement(te.Z,{justifyContent:"space-between"},e.createElement(Ie.Z.Subtitle,{fontSize:"2",textTransform:"uppercase",lineHeight:"2",m:"0",mb:"2"},e.createElement(At.T,{project:"apps.App"},"Upgrade to sell products")),e.createElement(xo.Z,{color:"yellow.500",height:"18px",width:"18px"})),e.createElement(Ie.Z.Caption,{lineHeight:"1"},e.createElement(At.T,{upgradeLinkButton:e.createElement(hr.Z,{onClick:()=>{(0,fr.R)(),(0,Qt.Ch)({objectIdentifier:Qt.rP.BOUNDING_BOX_STORE_PAGES})}},e.createElement(At.T,{project:"apps.App"},"upgrade to a business plan or above.")),project:"apps.App"},"To sell products to your customers, {upgradeLinkButton}")))))};var pr=t(480433),Sr=t.n(pr),Tr=t(347560),Jt=t(916661),no=t(787592),Ar=t(827302),yr=t(203119),Ir=t(313176),Or=t(196735);function Pr(){return new Promise((s,n)=>{let o=document.querySelector("#sqs-site-frame");if(o){s(o);return}const a=document.querySelector(".App-siteFrame");if(a){const i=new MutationObserver(()=>{o=document.querySelector("#sqs-site-frame"),o&&(s(o),i.disconnect())});i.observe(a,{childList:!0,subtree:!0})}else n(new Error("Missing .App-siteFrame (okay in cypress)"))})}var Lr=t(225840),Dr=t(166455),Mr=t.n(Dr),os=t(365744),Rr=t(49337);const Nr={shouldFrameBeTucked:function(s,n){const o=os.o;return n-o-s<480}};var Qe=t(409093);const Zr=()=>{const{setCursorStyle:s,overlayEventEmitter:n}=(0,eo.bR)(),o=d=>{(0,Qe.$c)(d)||(0,Qe.mr)(d)},a=(0,e.useCallback)(d=>{(0,Qe.$c)(d)||(0,Qe.Z8)(d)||(0,Qe.mr)(d)},[]),i=(0,e.useCallback)(d=>{(0,Qe.$c)(d)||(0,Qe.Z8)(d)||(0,Qe.mr)(d)},[]),r=(0,e.useCallback)(d=>{s(null)},[s]),l=(0,e.useCallback)(()=>{n.on(ve.ot,o),n.on(ve.cQ,a),n.on(ve.gi,i),n.on(ve.xN,Qe.mr),n.on(ve.Zl,r),n.on(ve.Jb,Qe.mr),n.on(ve.wQ,Qe.mr),n.on(ve.cc,Qe.mr),n.on(ve.dO,r),window.addEventListener("blur",r)},[n,i,a,r]),u=(0,e.useCallback)(()=>{n.off(ve.ot,o),n.off(ve.cQ,a),n.off(ve.gi,i),n.off(ve.xN,Qe.mr),n.off(ve.Zl,r),n.off(ve.Jb,Qe.mr),n.off(ve.wQ,Qe.mr),n.off(ve.cc,Qe.mr),n.off(ve.dO,r),window.removeEventListener("blur",r)},[n,i,a,r]);return(0,e.useEffect)(()=>(s(null),l(),function(){u(),s(null)}),[s,l,u]),null},ss=s=>{let{frameMode:n,location:o,websiteFrameNode:a}=s;const i=(0,eo.bR)(),{overlayDocumentRef:r,cursorStyle:l,setMouseDownAt:u,overlayEventEmitter:d}=i,v=(a==null?void 0:a.contentDocument)??null,h=(0,e.useRef)(null),y=(0,e.useRef)(null);return(0,e.useEffect)(()=>{l===null?(0,Qe.Yf)(y):(0,Qe.Mu)(h,y)},[l]),(0,e.useEffect)(()=>{var A;const F=b=>{d.emit(ve.ot,b)},I=b=>{u(null),d.emit(ve.gi,b)},D=b=>{const Ce=(0,Qe.tR)(b);u(Ce),d.emit(ve.cQ,b)},H=b=>{d.emit(ve.xN,b)},ie=b=>{u(null),d.emit(ve.Zl,b)},he=b=>{d.emit(ve.Jb,b)},ne=b=>{d.emit(ve.wQ,b)},fe=b=>{d.emit(ve.cc,b)},N=b=>{d.emit(ve.dO,b)},L=b=>{d.emit(ve.T5,b)},G=b=>{d.emit(ve.sF,b)};if(r.current=v,!!v)return h.current=v.querySelector("body"),v.addEventListener("scroll",L),v.addEventListener("click",F,!0),v.addEventListener("mousedown",D),v.addEventListener("mouseup",I),v.addEventListener("mouseenter",H),v.addEventListener("mouseleave",ie),v.addEventListener("mousemove",he),v.addEventListener("mouseover",ne),v.addEventListener("focus",fe),v.addEventListener("blur",N),(A=a.contentWindow)===null||A===void 0||A.addEventListener("resize",G),window.addEventListener("blur",ie),()=>{v.removeEventListener("scroll",L),v.removeEventListener("click",F,!0),v.removeEventListener("mousedown",D),v.removeEventListener("mouseup",I),v.removeEventListener("mouseenter",H),v.removeEventListener("mouseleave",ie),v.removeEventListener("mousemove",he),v.removeEventListener("mouseover",ne),v.removeEventListener("focus",fe),v.removeEventListener("blur",N),a.contentWindow&&a.contentWindow.removeEventListener("resize",G),window.removeEventListener("blur",ie)}},[d,r,v,a,u]),(0,Qe.wy)(o.pathname)&&!(0,w.qN)(n)?e.createElement(Zr,null):null};ss.propTypes={websiteFrameNode:Ne().instanceOf(HTMLIFrameElement)};const Fr=ss;var Br=t(958132),as=t(362187);function is(s,n,o){return n in s?Object.defineProperty(s,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[n]=o,s}var xr;class oo extends(xr=e.Component){render(){const{showErrorModal:n,errorTitle:o,errorMessage:a}=this.props;return n?e.createElement(pt.Z.Transition,null,e.createElement(pt.Z,{onRequestClose:this.handleDismissErrorModal},e.createElement(pt.Z.Position,{position:"center"},e.createElement(as.Z,{title:o,message:a||(0,E.t)("Try reloading the page. If the problem persists, contact us.",null,{project:"src.seven-one"}),buttons:[e.createElement(as.Z.Button,{onClick:this.handleDismissErrorModal},e.createElement(At.T,{project:"src.seven-one"},"OK"))]})))):null}constructor(...n){super(...n),is(this,"handleDismissErrorModal",()=>{const{onDismissErrorModal:o}=this.props;o()})}}is(oo,"propTypes",{onDismissErrorModal:Ne().func.isRequired,showErrorModal:Ne().bool.isRequired,errorTitle:Ne().string});const br=Jt.Z.isSevenOne()?(0,c.a9)(s=>({showErrorModal:(0,g.wxs)(s),errorTitle:(0,g.iHw)(s),errorMessage:(0,g.e$p)(s)}),{onDismissErrorModal:C.bK})(oo):oo,Ur=(0,c.UW)(br);var Wr=t(141117),wr=t(992809),mn=t.n(wr);function qt(s,n,o){return n in s?Object.defineProperty(s,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[n]=o,s}const{withRenderNothingOnError:Vr}=(0,Wr.Z)({project:"website-editing"});class Gr extends e.Component{updateForceTuck(){const{route:n}=this.props,o=this.isFullWidth(n)?!1:Nr.shouldFrameBeTucked(this.getWidth(n),document.body.clientWidth);o!==this.state.forceTuck&&this.setState({forceTuck:o})}componentDidUpdate(){!this.state.isFrameLoaded&&this.frameLoadListener===void 0&&Pr().then(a=>{this.frameLoadListener=(0,Or.Z)(a,this.handleFrameLoaded),this.destroyLoadedFrameLoadListener()}).catch(()=>{});const{frameMode:n,onSetFrameMode:o}=this.props;if(o){const a=this.computeLastFrameMode();a!==n&&o(a)}}componentDidMount(){if(this.bindLockActions(),!Jt.Z.isSevenOne()){var n,o,a,i;(o=this.props.Y)===null||o===void 0||(n=o.Global)===null||n===void 0||n.on("section-manager:enter",this.retractSidePanel),(i=this.props.Y)===null||i===void 0||(a=i.Global)===null||a===void 0||a.on("section-manager:exit",this.reshowSidePanel)}}destroyLoadedFrameLoadListener(){this.frameLoadListener&&this.state.isFrameLoaded&&this.frameLoadListener.destroy()}bindLockActions(){Jt.Z.isSevenOne()||(this.actionListener.addActionListener(sn.default.DISABLE_SEVEN_ZERO_FULL_SCREEN_PREVIEW,()=>{this.setState({is70FullScreenPreviewEnabled:!1})}),this.actionListener.addActionListener(sn.default.ENABLE_SEVEN_ZERO_FULL_SCREEN_PREVIEW,()=>{this.setState({is70FullScreenPreviewEnabled:!0})})),this.actionListener.addActionListener(sn.default.TOGGLE_FULL_SCREEN_PREVIEW_MODE,n=>{this.toggleFullScreenPreviewMode(typeof n=="boolean"?n:void 0)})}computeLastFrameMode(){const{isPageEditingOrDirty:n,hasEditableAnnotation:o,frameMode:a,location:i,route:r,isEditModePreview:l}=this.props;if(i&&i.state&&i.state.showFrameUrl)return w.hn.PREVIEW_FULL_SCREEN;if(r.isPanelRightPositioned){if(!Jt.Z.isSevenOne())throw new Error("Tried to right panel edit on a 7.0 site ",r);return w.hn.PAGE_EDIT_RIGHT_PANEL}else{if(n)return Jt.Z.isSevenOne()&&!o&&[w.hn.PREVIEW_LEFT_PANEL,w.hn.PREVIEW_FULL_SCREEN].includes(a)&&no.$e(u=>{u.setTag("owner",Mr().WEBSITE_EDITOR),u.setTag("previousFrameMode",a),no.uT("Entering page edit mode for 7.1 because dirty yet no annotations are editable")}),w.hn.PAGE_EDIT_FULL_SCREEN;if(l)return w.hn.PAGE_EDIT_FULL_SCREEN}return w.hn.PREVIEW_LEFT_PANEL}getRawWidth(n){return this.props.adjustedWidth||n&&n.width}getWidth(n){const o=this.getRawWidth(n);return o==="FULL_WITHOUT_TUCKED_FRAME"?(0,Rr.Z)()?`calc(100vw - ${this.props.offsetLeft})`:"100vw":o==="FULL"?`calc(100vw - ${2*os.o}px)`:o==="ZERO"?"0px":o}isFullWidth(n){return Ir.Z.getIsFullWidth(n,this.getRawWidth(n))}onMouseEnter(){this.setState({showUpsellBanner:!0})}onFocus(){this.setState({showUpsellBanner:!0})}onMouseLeave(){this.setState({showUpsellBanner:!1})}onBlur(){this.setState({showUpsellBanner:!1})}render(){const n=(0,Lr.getWebsiteContext)(),{frameMode:o,collectionId:a,router:i,location:r,mobile:l}=this.props,{forceTuck:u,is70FullScreenPreviewEnabled:d,is70InManageIndexMode:v,isFrameLoaded:h,showUpsellBanner:y}=this.state,{siteTitle:T}=(n==null?void 0:n.website)||{},A=r&&r.state&&r.state.frameUrl||"/",F=a&&gr(a),I=this.computeLastFrameMode()===w.hn.PAGE_EDIT_FULL_SCREEN,D=!!(F&&!I&&!l&&(0,vr.C)()),H=e.createElement(e.Fragment,null,e.createElement(Cr,{showUpsellBanner:y,showUpsellBoundingBox:D}),e.createElement(M,{key:"the-frame",id:"sqs-site-frame",siteTitle:T,iframeRef:this.props.iframeRef,frameMode:o,location:r,YPromise:this.props.YPromise,allowFullScreen:!0,frameBorder:"0",src:A,onLoad:()=>this.handleFrameLoaded(),onMouseEnter:()=>this.onMouseEnter(),onMouseLeave:()=>this.onMouseLeave(),onFocus:()=>this.onFocus(),onBlur:()=>this.onBlur()})),ie=Qo.ZP.getBackgroundRoute(i),he=u||this.isFullWidth(ie),ne=this.getWidth(ie),fe=typeof ne=="string"?ne:`${ne}px`,N=Jt.Z.isSevenOne()?e.createElement(dr,{Y:this.props.Y,toggleFullScreenPreviewMode:()=>this.toggleFullScreenPreviewMode(),location:r,router:i,isFrameLoaded:h,routeWidthSize:fe,isPreviewTuckedOrHidden:he},H):e.createElement(Ot,{Y:this.props.Y,location:r,router:i,frameMode:o,is70FullScreenPreviewEnabled:d,is70InManageIndexMode:v,toggleFullScreenPreviewMode:()=>this.toggleFullScreenPreviewMode(),isFrameLoaded:h,routeWidthSize:fe,isPreviewTuckedOrHidden:he},H);return e.createElement(e.Fragment,null,N,h&&e.createElement(Br.Z,{projectIdentifier:"FrameInteractionManager"},e.createElement(Fr,{websiteFrameNode:this.props.iframeRef.current,frameMode:o,location:r})),Jt.Z.isSevenOne()?e.createElement(Ur,null):null)}constructor(n){super(n),qt(this,"actionListener",new(Sr())(Tr.Z)),qt(this,"frameLoadListener",null),qt(this,"state",{forceTuck:!1,showUpsellBanner:!1,isFrameLoaded:!1,is70InManageIndexMode:!1,is70FullScreenPreviewEnabled:!0}),qt(this,"retractSidePanel",()=>{const o=document.querySelector(".App");o==null||o.classList.add(mn().retractSidePanelApp),o==null||o.classList.add("is70InManageIndexMode");const a=document.querySelector(".sqs-configuration-menu-header");a==null||a.classList.add(mn().retractSidePanelHeader);const i=document.querySelector(".App-sidebar");i==null||i.classList.add(mn().retractSidePanelSidebar),this.setState({is70InManageIndexMode:!0})}),qt(this,"reshowSidePanel",()=>{const o=document.querySelector(".App");o==null||o.classList.remove(mn().retractSidePanelApp),o==null||o.classList.remove("is70InManageIndexMode");const a=document.querySelector(".sqs-configuration-menu-header");a==null||a.classList.remove(mn().retractSidePanelHeader);const i=document.querySelector(".App-sidebar");i==null||i.classList.remove(mn().retractSidePanelSidebar),this.setState({is70InManageIndexMode:!1})}),qt(this,"handleFrameLoaded",()=>{this.setState({isFrameLoaded:!0},()=>{this.destroyLoadedFrameLoadListener()})}),qt(this,"toggleFullScreenPreviewMode",o=>{const{router:a}=this.props,i=a.getCurrentLocation();if(o===void 0)o=!i.state.showFrameUrl;else if(o===!!i.state.showFrameUrl)return o;const r=JSON.parse(JSON.stringify(i));try{r.state.showFrameUrl=o,a.push(r)}catch(l){(0,no.Tb)(l)}return(0,Ar.$H)(o),o})}}const Hr=(0,yr.Z)(Gr),jr=Vr(s=>e.createElement(Hr,s));var rs=t(233232),ls=t(638560),cs=t(996474);const Kr=(0,c.a9)(s=>({frameMode:(0,rs.aE)(s),isPageEditingOrDirty:(0,g.LwX)(s),hasEditableAnnotation:(0,g.l34)(s),collectionId:(0,g.Zxu)(s),isEditModePreview:(0,rs.ML)(s)}),{onSetFrameMode:C.pI})(jr),kr=s=>{const{handleEdit:n}=(0,e.useContext)(Pe.Z);return(0,e.useEffect)(()=>(ls.subscribe(cs.REOPEN_WEBSITE_EDITOR_EVENT,n),()=>{ls.unsubscribe(cs.REOPEN_WEBSITE_EDITOR_EVENT,n)}),[n]),e.createElement(c.ZP,null,e.createElement(Kr,s))}},668569:function(_,W,t){t.d(W,{Km:()=>P,Yt:()=>c,hr:()=>m});var S=t(941254),e=t(511556);const P=(C,Z,Q,J)=>{S.Z.track({actor:e.aR.USER,action:e.om.CLICK,object_type:Q,product_page:"config-panel-help",object_identifier:C,object_display_name:J,destination_url:Z})},m=C=>{let{isFromKeyboardShortcut:Z,editCount:Q,netEditCount:J}=C;S.Z.track({actor:e.aR.USER,action:e.om.CLICK,object_type:e.$l.BUTTON,object_identifier:"undo",object_value:Z?"keystroke_shortcut":"click_button",product_page:"frame-toolbar",undo_redo_edits:Q,net_undo_redo_edits:J,is_keyboard_shortcut:Z})},c=C=>{let{isFromKeyboardShortcut:Z,editCount:Q,netEditCount:J}=C;S.Z.track({actor:e.aR.USER,action:e.om.CLICK,object_type:e.$l.BUTTON,object_identifier:"redo",object_value:Z?"keystroke_shortcut":"click_button",product_page:"frame-toolbar",undo_redo_edits:Q,net_undo_redo_edits:J,is_keyboard_shortcut:Z})}},540053:function(_,W,t){t.d(W,{$F:()=>p,_J:()=>se,al:()=>X,co:()=>q,jg:()=>M,lY:()=>Q,lm:()=>J});var S=t(605254),e=t(765724),P=t(297314),m=t(102825),c=t(906194),C=t(883036),Z=t(225840);const Q=O=>{let{deviceView:x}=O;var R,U,g,oe,Oe,ye,me,w,$,Te;const K=(U=(0,Z.getWebsiteContext)())===null||U===void 0||(R=U.templateInstallation)===null||R===void 0?void 0:R.templateWebsite;(0,e.aQ)({accountId:(oe=(0,C.getAccountContext)())===null||oe===void 0||(g=oe.authenticatedAccount)===null||g===void 0?void 0:g.id,accountLocale:(ye=(0,C.getAccountContext)())===null||ye===void 0||(Oe=ye.authenticatedAccount)===null||Oe===void 0?void 0:Oe.preferredLocale,deviceOrientation:window.matchMedia("(orientation: landscape)").matches?"landscape":"portrait",displayMode:x===c.Z.PHONE?e.d1.MOBILE:e.d1.DESKTOP,selectedTemplateId:K==null?void 0:K.id,selectedTemplateIdentifier:K==null?void 0:K.identifier,isSquarespaceApp:(0,m.isNativeApp)(),websiteId:(w=(0,Z.getWebsiteContext)())===null||w===void 0||(me=w.website)===null||me===void 0?void 0:me.id,websiteLocale:(Te=(0,Z.getWebsiteContext)())===null||Te===void 0||($=Te.website)===null||$===void 0?void 0:$.language})},J=O=>{let{editorType:x}=O;e.p8.track({action:e.kA.CLICK,editor_type:x,event_name:"UserSelectsNavigationItemType",object_type:e.W9.BUTTON,object_identifier:"open-page-catalog",product_area:"pages-panel",product_section:e.lC.PAGE_CATALOG})},se=O=>{let{editorType:x,pageCategory:R,numOfEntries:U}=O;S.v?e.p8.track({action:e.kA.VIEW,editor_type:x,event_name:"UserViewsPageCatalog",object_type:e.W9.CATALOG,product_area:e.Wl.PAGES,product_section:e.lC.PAGE_CATALOG}):(0,P.Dg)(R,U)},q=O=>{let{editorType:x}=O;S.v?e.p8.track({action:e.kA.VIEW,editor_type:x,event_name:"UserViewsSectionCatalog",object_type:e.W9.CATALOG,product_area:e.lC.PAGE_EDITOR,product_section:e.lC.SECTION_CATALOG}):(0,P.Qq)()},M=O=>{let{category:x,subcategory:R,catalogType:U,editorType:g}=O;S.v?e.p8.track({action:e.kA.SELECT,editor_type:g,event_name:"UserSelectsCatalogCategory",object_type:e.W9.MENU_ITEM,object_identifier:R?`${x}, ${R}`:x,product_area:U==="page"?"pages":"page-editor",product_section:U==="page"?e.lC.PAGE_CATALOG:e.lC.SECTION_CATALOG}):(0,P.u7)(x,U==="page"?"page-catalog":"section-catalog")},X=O=>{let{layoutId:x,layoutIndex:R,sectionId:U,editorType:g}=O;e.p8.track({action:e.kA.ADD,editor_type:g,event_name:"UserAddsSection",layout_id:x,object_type:e.W9.SECTION,product_area:e.lC.PAGE_EDITOR,product_section:e.lC.SECTION_CATALOG,section_id:U,selected_order_index:R})},p=O=>{let{collectionId:x,layoutId:R,layoutIndex:U,editorType:g}=O;e.p8.track({action:e.kA.CREATE,collection_id:x,editor_type:g,event_name:"UserCreatesCollection",layout_id:R,object_type:e.W9.COLLECTION,product_area:e.Wl.PAGES,product_section:e.lC.PAGE_CATALOG,selected_order_index:U})}},153723:function(_,W,t){t.d(W,{Z:()=>se});const S={YUI:"yui",NATIVE:"native"},e={ALL:"all",SINGLE:"native"},P={[e.ALL]:"querySelectorAll",[e.SINGLE]:"querySelector"},m={[e.ALL]:"all",[e.SINGLE]:"one"},c={},C=(q,M,X,p)=>{if(p===S.NATIVE)return q[P[X]](M);if(window.Y&&p===S.YUI)return window.Y.one(q)[m[X]](M);window.Y||console.error("Tried to use window.Y before it is available!",{selector:M})},Z=function(){for(var q=arguments.length,M=new Array(q),X=0;X<q;X++)M[X]=arguments[X];const[,p,O]=M;let x=c[p],R;if(x)R=C(...M,x);else{try{R=C(...M,S.NATIVE),x=S.NATIVE}catch{R=C(...M,S.YUI),x=S.YUI}c[p]=x}return O===e.ALL?Array.from(R):R},se={single:function(){for(var q=arguments.length,M=new Array(q),X=0;X<q;X++)M[X]=arguments[X];return Z(...M,e.SINGLE)},all:function(){for(var q=arguments.length,M=new Array(q),X=0;X<q;X++)M[X]=arguments[X];return Z(...M,e.ALL)}}},168794:function(_,W,t){t.d(W,{G:()=>S});const S=e=>e.getCurrentLocation().pathname.toLowerCase().includes("member-site")},318512:function(_,W,t){t.d(W,{V:()=>J,t:()=>se});var S=t(174161),e=t(48992),P=t(175424),m=t(337061),c=t(938077),C=t(167078),Z=t(621928);const Q=(0,C.Z)(),J=Q?["\u2318","\u21E7","P"]:["CTRL","\u21E7","P"],se=q=>{let{shouldListen:M}=q;const X=(0,m.Ze)(c.EeC),p=(0,m.Ze)(c.ML5),{doToggleEditModePreview:O}=(0,S.useContext)(Z.Z),x=(0,S.useMemo)(()=>{try{return X?(0,P.wo)():null}catch{return null}},[X]),R=(0,S.useCallback)(U=>{const g=U.key==="p"&&U.shiftKey&&(Q?U.metaKey:U.ctrlKey),oe=U.key==="Escape";(g||oe&&p)&&(U.preventDefault(),O(!p))},[p,O]);(0,e.Z)("keydown",R,{shouldListen:M}),(0,e.Z)("keydown",R,{shouldListen:M,element:x==null?void 0:x.body})}},295997:function(_,W,t){t.d(W,{Dd:()=>X,V4:()=>q,so:()=>M});var S=t(174161),e=t(324270),P=t(48992),m=t(714487),c=t(175424),C=t(337061),Z=t(938077),Q=t(897820),J=t(167078);const se=(0,J.Z)(),q=se?["\u2318","\u21E7","P"]:["CTRL","\u21E7","P"],M=(0,m.t)("Preview",null,{project:"apps.App",notes:"Enter a full screen preview mode view for viewing the user's website"}),X=p=>{let{shouldListen:O}=p;const x=(0,C.zC)(),R=(0,C.Ze)(Z.EeC),U=(0,S.useMemo)(()=>{try{return R?(0,c.wo)():null}catch{return null}},[R]),g=(0,S.useCallback)(oe=>{oe.key==="p"&&oe.shiftKey&&(se?oe.metaKey:oe.ctrlKey)&&(oe==null||oe.preventDefault(),x((0,Q.C3)(null)),e.default.toggleFullScreenPreviewMode())},[x]);(0,P.Z)("keydown",g,{shouldListen:O}),(0,P.Z)("keydown",g,{shouldListen:O,element:U==null?void 0:U.body})}}}]);

//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/sourcemaps/57f2fc1a694bc92e/async-website-editor-69b5000800a5c09d-min.en-US.js.map