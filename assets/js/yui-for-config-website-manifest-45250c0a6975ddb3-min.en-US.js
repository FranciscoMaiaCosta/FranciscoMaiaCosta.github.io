(globalThis.webpackChunkextract_css=globalThis.webpackChunkextract_css||[]).push([["64412"],{977715:function(S){"use strict";S.exports={container:"a9dF6YOd8vIyP9js",headerTitles:"Zn7RluyZokUB9M3L",headerTitlesFirst:"Y2eYGEvZsOfNGPzG",iconButton:"QJDxs3eO0uXPLJjK",popoverBody:"sTDVxrtiSd8pAYmV"}},580781:function(S){"use strict";S.exports={container:"MDhJafpFBn4mPpBj",scrollableContainer:"EWKQTHdn9UEgnfQE",centerContainer:"xvvqG7Ab9Ic8VO1Q",tab:"kPkngx2sDWsIg_5l",header:"xKnRMokPRZYFAKMk",iconRow:"_TTcZ5nZU3C3mpzn",layoutIconRow:"VkkAIvmcpOsiM9PL",iconButton:"khAYS2oLUXMO3BkT",layoutButton:"c5qnsIxAvS0RHpoK",layoutIcon:"jbVfB6n2HURFwCjX",layoutIconTitle:"t7p6eML4tsQKUmDb",iconButtonContent:"VGKpj3JwFsforekC",iconText:"GHTLSbp8R0Ci8lfE","icon-blank":"Fk0ZnOk88rj8XJ7H","icon-about":"N97bwPPA3ELxKYGQ","icon-contact":"SkEtezTA2pUeOGGF","icon-details":"gZ_zDDWoaA8Cg4vp","icon-features":"VSNiz6XwgsVfYFnH","icon-images":"GYOTItrBJ5YHCbUG","icon-team":"maNmxg_nFwEmwnUB","icon-booking":"X8Z8tCqVjYIAFsSo","icon-gallery":"gh2lGjuqwe1iMkEZ","icon-products":"smu3kaoeI0CmHBA_","icon-blog":"u_31mZezWNMmXD_J","icon-events":"g5lhbnts50_iagwB","icon-album":"U1fvfgJl_ykXWt9x","icon-stacked":"qoXMmVLZ9dgOtMvp","icon-projects":"nKOLnELtBF4YaAC_","icon-project":"jrubwMHA8z8vcMwM","icon-link":"Rlc5AL2P8QMo51NN","icon-folder":"YSD2lQXH8iwSQ4VK","icon-dropdown":"W61k6lA8n0cC4POI","icon-splash-page":"Kk6EUA_7qpg353G0","icon-calendar":"Y5h8mD9x0pY_n6EA","icon-chownow":"dG73b1qyuII5zURF","icon-variation":"cMpZRquYKfIYClYF"}},24596:function(S){"use strict";S.exports={header:"IUR35uWgihET5jNP",headerButton:"ycs2pejmy4kerofX",headerTitle:"B25ChIVXCI0B7jgj"}},5973:function(S){"use strict";S.exports={fieldWrapper:"sEG7UXKpE_Efpfqx"}},647468:function(S){"use strict";S.exports={container:"FdKyBJ9hOgQvB49B",countryItem:"lx4AmncU6GYzVRmd",label:"HDN0XcIRTAM_scb_",countryName:"qBME18Knjr0uf7qw",edit:"EJnWmx1cxAkJKqaK",delete:"lHlUdXlLMrMRHiEk Fo7oVDDnqQOdxXZr"}},970634:function(S){"use strict";S.exports={body:"HXNadmEaUJkjggBd",header:"VKoTlET1gjo51ntA",description:"vkz8xBZWq40LstGZ"}},218258:function(S){"use strict";S.exports={container:"WBoiOJed8pY51mrn",checkField:"aW2IOZvMjoorfoqJ",expanded:"TFsyd4BY0csomhgs",editing:"D628ijvR5m8iaNTc",buttonsBlock:"o0X5f92tZc45dypO",upsellButton:"WnkYjyQqc4Mw32Kh",upsellLabel:"xv0ZYIJGeaEvdiod",subdivisionInput:"y7fkHEXyfgODn1MM",noSelect:"S_FwfUZCDcv7l6SG",postalCodes:"gwnCppmn9KU9cUs4",errorMessage:"HRm2MLRmxkYxmi8b"}},136364:function(S){"use strict";S.exports={restOfWorld:"a_5SojNKSEcgLwzf",restOfWorldText:"kvXPaPKmYNMy57EG",close:"R3v39jB2LAZMXEGv qfNm_ocDwQ4gvZd_",searchableList:"IVqa6pCTFCAQ2EQV",countryLabel:"IGFi0UzPy8n6DwXx",restOfWorldLabel:"I5zQPKdyxMbgPedC",selectLabel:"k0_4VB3WhHMCTmgm",selectLabelText:"zHxR_bVO8sxPigBG",countryLabelFaded:"xZ5prFEmo08YmV1u"}},5736:function(S){"use strict";S.exports={container:"iZzJuF8JNnsRXuk_",hasErrors:"kmX2Vl6Lt8Mb9pMC",tagList:"GojDilJKtSg4MGxL",tag:"HFoI80zwmUcoqOv_",selected:"lsFx9TvqvYqwI3G4",invalid:"wxt0bxPcEX0bYrXC"}},264546:function(S){"use strict";S.exports={container:"t6Vkw8ZUFwjkwnhI"}},889113:function(S){"use strict";S.exports={container:"h7h9CYl6dZoRYVKs",row:"TNCpIjpzqs1xAyjQ",select:"WFimg1VY_s7DjKOt",input:"llA9VSGSfogsbC3Q",field:"BeJdg6rr_cdWSYEM",error:"uMb4xsVOcLEGJeUi",facadeError:"FePHsK_f6PQh6c2B",inputError:"hBNODPFZwrwmRaKE"}},535025:function(S){"use strict";S.exports={damaskInputOnWhite:"VxM9cMWYEQQ781JG",damaskInputOnWhiteBorder:"fzhD6wAWSKYQbCMi"}},653631:function(S){"use strict";S.exports={banner:"hXosNv2EZ18ScLOi"}},877137:function(S){"use strict";S.exports={container:"RYqhDe3qIe0tQHwj",left:"agHSwk1FQw4blxvu",right:"kmStLi6CdW0sJjb9"}},34685:function(S){"use strict";S.exports={box:"W0bBsuTSuS8qMgHG",title:"vs3PecBlAyQAZYVD W0bBsuTSuS8qMgHG",body:"a51tZDt79w_07yMd W0bBsuTSuS8qMgHG",button:"mfP3qimZYfwhkfQI ey3Ul0FqQA8yxXQr W0bBsuTSuS8qMgHG"}},750202:function(S){"use strict";S.exports={container:"KfQb9MTcj9E5bA5v",map:"sM6A13ZmuGQxLHxB",content:"HPofNxgwDoyPAv6O",icon:"W3dcKeRtOe0U6gpL",image:"zzaUV8AlhE1N2KwF",menu:"ZYXnXut76QYpEe81",acuity:"MibnlWW2CkQK2U0Q",quote:"lKWY_Z7cyZooIRb3"}},100526:function(S){"use strict";S.exports={container:"k31TqbZIfE4UyFZ4",left:"UJhWyL_FsW8FCKZd",right:"QPjWOkwKBSYm24Av",button:"vs09xHsRcDYT7Ghy"}},24391:function(S){"use strict";S.exports={container:"pqEgjpdvP4kU7h8h"}},986039:function(S){"use strict";S.exports={container:"_BKlX8eqPd0ftA6V","text-align-right":"OZk80BqSbw4UINeZ"}},45466:function(S){"use strict";S.exports={layout:"ocX9E35ESfcUtEMp",row:"g482f56bVxAfrjUK",column:"Nm9KCZ0AkKGovNsU"}},683595:function(S){"use strict";S.exports={container:"Zqha8JcT4Y7sZXjk",search:"i1url9U1plwu4gyw",results:"nV0aFivYDKcSDHiA",result:"wSJR7iOzzxwgzuV1",isHighlighted:"yLnOo7aeVZIQRRj_",spinner:"YPatvGD3HK4anc9W",staticNavSpinner:"JU59KpdLgqccmKoZ",visibleSpinner:"dalaudF3CpQ0F2g0"}},292536:function(S){"use strict";S.exports={inputContainer:"xteqajgWKoIAM60E",form:"kNaoRUjJfckaUlAJ",input:"JkFy8VoByJs6kTKi",hidden:"S5sFY16JlI3Z5RNT",clone:"sLnB2PidW_MDCfx5"}},743990:function(S){"use strict";S.exports={}},895594:function(S,b,t){"use strict";var T=t(714487),N=t(362958),u=t(586745),c=t.n(u),f=t(134521),L=t.n(f),h=t(651404),g=t(307945),m=t(743990),C=t.n(m);YUI.add("squarespace-code-editor-legacy",function(v){function M(){try{return v.config.win.opener&&v.config.win.opener.document}catch{return!1}}v.namespace("Squarespace"),v.Squarespace.CodeEditorManager=Class.extend(v.Squarespace.Gizmo,{_name:"CodeEditorManager",initialize:function(E){(0,g.$I)(),this.container=E.container,this.syntaxOk=!0,this.saved=!0,this.currentError=null,this.initDone=!1,this.initialData=null,this._super(E),this._maxLength=128e3;var R=v.Node.create(this.getTemplateMarkup());this.container.append(R);var D=R.one(".code-area"),B=this._saveButton=R.one(".save");this._codeUnsavedEl=R.one(".code-editor-unsaved"),this.createCodeMirrorInstance(D),this._resetEditor(),B.on("click",function(){this.save()},this),this.container.one(".upload-asset").on("click",function(){this.toggleUploadPanel()},this),D.on("preview",function(){this.preview()},this),this.uploader=new v.Squarespace.Uploader({dragAndDropArea:v.one(".asset-upload-canvas"),uploadURL:"/api/uploads/css-assets",process:!1,autoUpload:!0,fileFilters:[{description:(0,T.t)("Fonts",null,{project:"scripts-v6-root"}),extensions:"*.eot;*.ttf;*.otf;*.woff;*woff2"},{description:(0,T.t)("Images",null,{project:"scripts-v6-root"}),extensions:"*.jpeg;*.jpg;*.png;*.gif"},{description:(0,T.t)("Videos",null,{project:"scripts-v6-root"}),extensions:"*.webm;*.mp4;*.ogg;*.h264"}],selectButtonLabel:(0,T.t)("Add images or fonts.",null,{project:"scripts-v6-root"}),processFile:v.bind(function(j){j.postData={contentType:"css-asset",recordType:c().CSSASSET}},this),addPlaceholder:v.bind(function(j){return this.renderPlaceholder(j.file).one(".item")},this),fileComplete:v.bind(function(j,H){this.renderItem(H.media[0],j.placeholder.get("parentNode"))},this)});var F=this.uploader.render(this.container.one(".asset-upload-canvas"));F.after(["uploaderror","jobFailure"],function(j){var H=j.fileData||F.fileDataFromFile(j.file);H.placeholder.setContent(F.makeDefaultErrorBlock(H))}),M()||(window.onunload=v.bind(function(){this.isDestroyed()||this.codeMirror.setValue(this.initialData)},this)),this.getCssAssets(),this.container.one(".asset-upload-panel").hide(),this._windowResizeBinding=v.on("windowresize",v.bind(function(){this.setEditorSize()},this)),this._bodyKeyupBinding=v.one("body").on("keyup",this._onKeyUp,this),this.codeMirror.focus(),v.Lang.isFunction(window.scrollTo)&&v.one(window).set("scrollTop",0),this.setEditorSize(),this.container.one(".asset-upload-panel").on("dragover",function(){v.all(".item").setStyle("zIndex",0)}),this.container.one(".asset-upload-panel").on("mouseenter",function(){setTimeout(function(){v.all(".item").setStyle("zIndex",999)},50)}),M()&&this._bootstrapAsDamaskPopupEditor()},destructor:function(){this.preview.cancel()},_bootstrapAsDamaskPopupEditor:function(){v.one("html").addClass("code-editor-damask"),this.getTargetWindow=function(){return null},window.addEventListener("message",v.bind(this._handlePostMessage,this)),this.onceAfter("sync",function(){this.postMessage({type:"ready"}),this.after("sync",function(){this.postMessage({type:"sync"})})}),window.addEventListener("unload",v.bind(function(){this.postMessage({type:"close"})},this))},_handlePostMessage:function(E){E.data.type==="change"&&(this.codeMirror.setValue(E.data.value),this._codeUnsavedEl.setStyle("visibility","hidden"),this.codeMirror.on("change",v.bind(function(R){this._codeUnsavedEl.setStyle("visibility","visible"),this.postMessage({type:"change",value:R.getValue()},E.source.origin)},this)))},postMessage:function(E,R){M()&&window.opener&&!window.opener.closed&&window.opener.postMessage(E,R||window.opener.location.origin)},getTemplateMarkup:function(){return'<div class="code-editor"><div class="code-container"><div class="code-area"></div><div class="asset-upload-panel"><div class="asset-upload-canvas"></div></div></div><div class="code-editor-footer"><div class="code-editor-footer-inner"><div class="code-editor-status"><div class="code-editor-unsaved">'+(0,T.t)("unsaved",null,{project:"scripts-v6-root"})+'</div><div class="code-editor-error"></div></div><div class="code-editor-buttons"><input class="upload-asset" type="button" value="'+(0,T.t)("Manage Custom Files",null,{project:"scripts-v6-root"})+'" /><input class="save" type="button" value="'+(0,T.t)("Save",null,{project:"scripts-v6-root"})+'" disabled="disabled" /></div></div></div></div>'},_onKeyUp:function(E){E.keyCode===83&&(E.ctrlKey||E.altKey)&&this.save()},getCssAssets:function(E){var R={websiteId:v.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"]),templateId:Static.SQUARESPACE_CONTEXT.templateId,recordType:c().CSSASSET};v.Data.get({url:"/api/template/GetTemplateCSSAssets",data:v.merge(R,E),success:function(D){for(var B=0;B<D.assets.length;B++)this.renderItem(D.assets[B])}},this)},removeCssAsset:function(E,R){var D={websiteId:v.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"]),templateId:Static.SQUARESPACE_CONTEXT.templateId};v.Data.post({url:"/api/template/RemoveTemplateCSSAsset",data:v.merge(D,R),success:function(B){var F=new v.Anim({node:E,duration:.25,to:{height:0,opacity:0}}),j=v.bind(function(){E.remove(),this.setEditorSize()},this);F.on("end",j),F.run()}},this)},renderPlaceholder:function(E,R){var D=v.Node.create('<div class="pseudo-item"></div>'),B=v.Node.create('<div class="item"></div>');B.plug(v.Squarespace.Plugin.ProgressSpinner,{show:!1,spinnerColor:"dark"}),D.append(B);var F=this.uploader.get("boundingBox");return F.get("parentNode").append(D),this._subscribe(D,"click",function(j){if(j.target.ancestor(".failed .button",!0)){var H=j.target.ancestor(".failed",!0),G=j.target.ancestor(".pseudo-item",!0);H.getData("errorType")===N.Z.UPLOAD&&G.transition({opacity:0,transform:"scale(0.94)",duration:.4},v.bind(function(){G.remove(),this.emptyStateCheck()},this))}},this),D.transition({opacity:1,transform:"scale(1)",duration:.6}),D},renderItem:function(E,R){var D=v.Node.create('<div class="main-image"></div>');if(D.setAttribute("data-img-src",E.assetUrl),E.contentType.startsWith("image"))D.setStyles({background:"url("+E.assetUrl+")",backgroundSize:"cover"});else if(E.contentType.startsWith("video"))D.setStyles({background:"url(/universal/images-v6/damask/video-64-dark.png)",backgroundSize:"70%",backgroundRepeat:"no-repeat",backgroundPosition:"center center"});else{var B="font"+E.id,F="styleNode-"+B,j=v.Node.create("<style>@font-face {font-family: "+B+";src: url("+E.assetUrl+");}</style>");j.set("id",F),j.appendTo(v.one("body")),D.addClass("font-swatch"),D.setStyle("fontFamily","'"+B+"'"),D.set("text",(0,T.t)("Sample Font 12345",null,{project:"scripts-v6-root"}))}var H=v.Node.create('<div class="asset-info"><a class="main-image-link" href="'+E.fullUrl+'">'+E.filename+"</a></div>"),G=v.Node.create('<div class="asset-remove"><img class="remove-x" src="/universal/images-v6/configuration/x-20x20-dark.png" /></div>'),Z=v.Node.create('<div class="item"></div>'),w=v.Node.create('<div class="item-inner"></div>');w.append(D).append(H).append(G),Z.append(w),Z.setAttribute("id","item-"+E.id),Z.on("click",v.bind(function(W){this.pasteAssetUrlForItem(Z),W.preventDefault(),W.stopPropagation()},this)),Z.one(".asset-remove").on("click",(function(W){W.halt(!0);var k=new v.Squarespace.Widgets.Confirmation({"strings.title":(0,T.t)("Are You Sure?",null,{project:"scripts-v6-root"}),"strings.message":(0,T.t)("This upload will be permanently deleted.",null,{project:"scripts-v6-root"}),"strings.confirm":(0,T.t)("Delete",null,{project:"scripts-v6-root"})});k.get("eventListeners").push(k.on("confirm",(function(){W.currentTarget.hide(),this.removeCssAsset(Z,{itemId:E.id}),W.stopPropagation()}).bind(this)))}).bind(this)),R&&R.remove();var z=this.uploader.get("boundingBox");return z.get("parentNode").append(Z),this.setEditorSize(),Z},createCodeMirrorInstance:function(E){var R="squarespace-light",D=E.getDOMNode();D.value=D.value||"",this.codeMirror=h.Z.fromTextArea(E.getDOMNode(),{mode:"text/x-less",lineNumbers:!0,theme:R,indentUnit:2,tabMode:"indent",matchBrackets:!0,autoCloseBrackets:!0,lineWrapping:!0}),this.codeMirror.on("keyup",v.bind(function(B,F){var j=B.getCursor(),H=B.getTokenAt(j),G,Z;j.ch>3&&H.string==="("&&(G=B.getTokenAt({line:j.line,ch:j.ch-1}),Z=B.getTokenAt({line:j.line,ch:j.ch+1}),G.string==="url"&&Z.string===")"&&this.showAssetCodeCompletions())},this)),this.codeMirror.on("change",function(){E.fire("preview")}),this.setEditorSize()},pasteAssetUrlForItem:function(E){var R=E.one(".main-image").getAttribute("data-img-src");this.codeMirror.replaceRange(R,this.codeMirror.getCursor())},showAssetCodeCompletions:function(){var E=this.codeMirror,R=this;if(this._completionCooldown)return;var D=[];if(v.all(".item").each(function(te){D.push({assetId:te.get("id"),displayName:te.one(".main-image-link").get("text"),url:te.one(".main-image").getAttribute("data-img-src")})}),D.length===0)return;var B=document.createElement("div");B.className="CodeMirror-completions";for(var F=B.appendChild(document.createElement("select")),j=0;j<D.length;++j){var H=F.appendChild(document.createElement("option"));H.appendChild(document.createTextNode(D[j].displayName)),H.setAttribute("data-css-asset-id",D[j].assetId)}F.firstChild.selected=!0,F.size=Math.min(10,D.length);var G=this.codeMirror.cursorCoords();B.style.position="absolute",B.style.left=G.left+"px",B.style.top=G.bottom+"px",document.body.appendChild(B);var Z=!1;function w(te){E.replaceRange(te,E.getCursor())}function z(){Z||(Z=!0,B.parentNode.removeChild(B))}function W(){w(D[F.selectedIndex].url),z(),setTimeout(function(){E.focus()},50)}function k(te){var se=te.keyCode;se===13?(te.preventDefault(),W()):(se===27||se!==38&&se!==40)&&(te.preventDefault(),z(),E.focus(),R._completionCooldown=!0,setTimeout(function(){R._completionCooldown=!1},750))}var Q=new v.Node(F);Q.on("dblclick",W),Q.on("blur",z),Q.on("keydown",k),F.focus()},setUploadCanvasSize:function(){var E=0;this.container.all(".item").each(function(D){E+=D.get("offsetHeight")}),E+=135;var R=Math.max(E,this.getAvailableHeightForEditor());this.container.one(".asset-upload-canvas").setStyles({height:R+"px"})},setEditorSize:function(E){var R=this.codeMirror.getScrollerElement();v.Node(R).setStyles({height:this.getAvailableHeightForEditor()+"px",width:E||this.getAvailableWidthForEditor()+"px"}),this.container.one(".asset-upload-panel").setStyles({height:this.getAvailableHeightForEditor()}),this.codeMirror.refresh(),this.setUploadCanvasSize()},getAvailableHeightForEditor:function(){var E=this.container.one(".code-editor-footer");return E.get("winHeight")-parseInt(E.get("offsetHeight"),10)},getAvailableWidthForEditor:function(){var E=this.container.one(".asset-upload-panel");return E.get("winWidth")-parseInt(E.get("offsetWidth"),10)},_resetEditor:function(){this._codeUnsavedEl.setStyle("visibility","hidden"),window.onbeforeunload=null,this._disableSaveButton(),this.saved=!0,this.initDone=!1,v.Data.get({url:"/api/template/GetTemplateCustomCss",data:{},success:function(E){M()||(E&&E.css?this.codeMirror.setValue(E.css):this.codeMirror.setValue("")),this.initialData=this.codeMirror.getValue(),this.initDone=!0,this.fire("sync")}},this)},getSanitizedCss:function(E){var R=this.codeMirror.getValue();return new v.Promise(function(D,B){(0,g.kS)(R,{compress:E}).then(function(F){if(F.errors&&F.errors.length){B(new Error((F.formattedErrors||F.errors||["Compile failure"]).join(`
`)));return}D(F.css)}).catch(function(F){B(F)})})},getTargetWindow:function(){return window.opener!==null&&!window.opener.closed?typeof window.opener.frames["preview-frame"]<"u"?window.opener.frames["preview-frame"]:window.opener:null},preview:L()(function(){this.saved&&this.initDone&&(this._codeUnsavedEl.setStyle("visibility","visible"),M()||(window.onbeforeunload=function(){return(0,T.t)("You have unsaved changes.",null,{project:"scripts-v6-root"})}),this.saved=!1,this._enableSaveButton()),this.getSanitizedCss(!0).then((function(E){var R=this.getTargetWindow();if(R){var D=v.one(R.document).one("body");D.all("style").each(function(B){B.hasClass("SquarespaceInjectedCustomCss")&&B.remove()}),D.append('<style type="text/css" class="SquarespaceInjectedCustomCss">'+E+"</style>")}this.setStatus(!1)}).bind(this)).catch((function(E){this.setStatus(E)}).bind(this))},1e3,{leading:!1}),_shorterThanMaxLength:function(E){var R=E.replace(/\n/g,"");return R.length<=this._maxLength},_saveTemplateCustomCss:function(E){v.Data.post({url:"/api/template/SetTemplateCustomCss",data:{css:E},success:function(R){this.saved=!0,this.initialData=E,this._disableSaveButton(),this.fire("sync")},failure:function(){this.saved=!1,this._codeUnsavedEl.setStyle("visibility","visible"),window.onbeforeunload=function(){return(0,T.t)("You have unsaved changes.",null,{project:"scripts-v6-root"})},this.setStatus({message:(0,T.t)("Failed to save. Please try again.",null,{project:"scripts-v6-root"})}),this._enableSaveButton()}},this)},save:function(E){var R=this.codeMirror.getValue();this._shorterThanMaxLength(R)?E?this._saveCSS(R):this.getSanitizedCss(!1).then((function(){this._saveCSS(R)}).bind(this)):this.setStatus({message:(0,T.t)("You have entered too much CSS, please reduce the amount before proceeding.",null,{project:"scripts-v6-root"})})},_saveCSS:function(E){this._codeUnsavedEl.setStyle("visibility","hidden"),window.onbeforeunload=null,this._saveTemplateCustomCss(E)},toggleUploadPanel:function(){var E=this.container.one(".asset-upload-panel");if(E.hasClass("asset-upload-panel-open")){var R=new v.Anim({node:E,from:{right:0},to:{right:-1*E.get("offsetWidth")},duration:.25,easing:"easeIn"});R.on("end",v.bind(function(){E.hide()},this)),this.setEditorSize(E.get("winWidth")),R.run(),E.removeClass("asset-upload-panel-open")}else{E.addClass("asset-upload-panel-open"),E.show(),E.setStyles({right:-1*E.get("offsetWidth")+"px"});var D=new v.Anim({node:E,from:{right:-1*E.get("offsetWidth")},to:{right:0},duration:.25,easing:"easeOut"});D.on("end",v.bind(function(){this.setEditorSize()},this)),D.run()}},_enableSaveButton:function(){this._saveButton.removeAttribute("disabled")},_disableSaveButton:function(){this._saveButton.set("disabled","disabled")},setStatus:function(E){var R=this.currentError;if(R){var D=R.lineHandler;D&&this.codeMirror.clearGutter(D)}this.currentError=E;var B=this.container.one(".code-editor-error");if(E===!1)this.container.removeClass("error"),B.setContent(""),this._enableSaveButton();else{this.container.addClass("error"),this._disableSaveButton();var F=E.line?E.line:(0,g.$t)(E);typeof F=="number"&&(E.lineHandler=this.codeMirror.setGutterMarker(--E.line,"%N%","error")),B.setContent(E.message)}}})},"1.0",{requires:["cookie","event","json","node","squarespace-common","squarespace-gizmo","squarespace-plugin-progress-spinner","squarespace-ui-base","squarespace-uploader","squarespace-util","squarespace-widgets-confirmation","squarespace-widgets-information","transition"]})},423542:function(){YUI.add("squarespace-content-manager-widgets-music-album",function(S){S.namespace("Squarespace.ContentManagerWidgets");var b=S.Squarespace.ContentManagerWidgets.MusicAlbum=S.Base.create("ContentManagerMusicAlbum",S.Squarespace.ContentManagerWidgets.Base,[S.Squarespace.Mixins.SaveChanges,S.Squarespace.Mixins.AddContentItemHandlerMixin],{initializer:function(){var t=this.get("collection"),T=t.items;this._trackListWidget=new S.Squarespace.Widgets.MusicAlbums.ListView({collection:t,items:T,stickyHeadersEnabled:!1}),this._detailsEditorWidget=this.add({childType:S.Squarespace.MusicAlbum.DetailsEditor,collection:t,trackList:this._trackListWidget}).item(0),this.add(this._trackListWidget),this._itemsLoaded=!1,T.load({limit:60},this._registerCallback(function(){this._itemsLoaded=!0,this.syncUI()},this))},destructor:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._loadingTimer=null,S.one("body").removeClass("sqs-content-manager-music-album-active"),this._detailsEditorWidget=null,this._trackListWidget.destroy(!0),this._trackListWidget=null},renderUI:function(){b.superclass.renderUI.call(this),S.one("body").addClass("sqs-content-manager-music-album-active");var t=S.Node.create('<div class="loading-state"></div>');new S.Squarespace.Spinner({size:100,color:"dark",render:t}).spin(),this.get("contentBox").append(t)},bindUI:function(){b.superclass.bindUI.call(this);var t=this.get("collection");this._registerEvent(this._detailsEditorWidget.on("change",this.markAsDirty,this)),this._registerEvent(t.on("save",this._updateSavedMessage,this))},syncUI:function(){b.superclass.syncUI.call(this),this._itemsLoaded?this._setLoadedState():this._setLoadingState()},_setLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this.get("boundingBox").removeClass("content-loading");var t=this.get("contentBox"),T=this._detailsEditorWidget,N=this._trackListWidget;T.get("rendered")?T.syncUI():T.render(t),N.get("rendered")?N.syncUI():N.render(t)},_setLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._loadingTimer=S.later(500,this,function(){this.get("boundingBox").addClass("content-loading")})},_updateSavedMessage:function(){},_revertChanges:function(t){return S.Squarespace.Promises.create(function(T,N){this.get("collection").load(this._registerCallback(function(u){u?N(u):T()}))},this)},_saveChanges:function(t){return S.Squarespace.Promises.create(function(T,N){this.get("collection").save((function(u){u?N(u):(T(),this.get("damask").requestFrameRefresh())}).bind(this))},this)}},{CSS_PREFIX:"sqs-content-manager-music-album",ATTRS:{multiple:{value:!0}}})},"1.0",{requires:["base","squarespace-content-manager-widgets-base","squarespace-content-manager-widgets-music-album-details-editor","squarespace-mixin-save-changes","squarespace-widgets-music-albums-list-view","squarespace-promises"]})},324431:function(){YUI.add("squarespace-dialog-checkbox-group",function(S){S.namespace("Squarespace.DialogFields");var b=S.Squarespace.DialogFields.CheckboxGroup=S.Base.create("CheckboxGroup",S.Squarespace.DialogField2,[],{initializer:function(){this.publish("check",{emitFacade:!0})},renderUI:function(){b.superclass.renderUI.call(this);var t=this.get("contentBox"),T=this.get("strings.title"),N=this.get("strings.description"),u='<div class="title">'+T+"</div>";S.Lang.isValue(N)&&(u+='<div class="description">'+N+"</div>"),u+='<div class="list"></div>',t.setHTML(u),this._childrenContainer=t.one(".list")},syncUI:function(){b.superclass.syncUI.call(this);var t=this.get("options");t.length>0&&(this.removeAll(),this._childrenContainer.empty(),t.forEach(function(T){this.add({name:T.name,defaultValue:T.value,"strings.title":T.label})},this))},bindUI:function(){b.superclass.bindUI.call(this),this.after("optionsChange",this.syncUI,this),this.after("check:dataChange",function(){this.fire("check")},this)},_selectAll:function(){this.each(function(t){t.set("data",!0)})},_deselectAll:function(){this.each(function(t){t.set("data",!1)})}},{ATTRS:{defaultChildType:{value:S.Squarespace.DialogFields.Check},options:{value:[],validator:S.Squarespace.AttrValidators.isArray},data:{value:[],getter:function(){return this._items.filter(function(t){return t.get("data")}).map(function(t){return t.get("name")})}},testAttribute:{value:"checkbox-group"}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-field-2"]})},495894:function(){YUI.add("squarespace-models-commerce-base-email-template-settings",function(S){S.namespace("Squarespace.Models"),S.Squarespace.Models.BaseEmailTemplateSettings=S.Base.create("BaseEmailTemplateSettings",S.Model,[S.Squarespace.ModelSync.REST],{url:S.Squarespace.API_ROOT+"commerce/admin/email-settings/base-template",root:S.Squarespace.API_ROOT+"commerce/admin/email-settings/base-template",isNew:function(){return!1}},{ATTRS:{_type:{value:"_base_template_",readOnly:!0},businessName:{validator:S.Squarespace.AttrValidators.isString},businessId:{validator:S.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-model-sync-rest"]})},539688:function(){YUI.add("squarespace-models-contribution-confirmed-email-settings",function(S){S.namespace("Squarespace.Models"),S.Squarespace.Models.ContributionConfirmedEmailSettings=S.Base.create("ContributionConfirmedEmailSettings",S.Model,[S.Squarespace.ModelSync.REST],{url:S.Squarespace.API_ROOT+"commerce/admin/email-settings/contribution-confirmed",root:S.Squarespace.API_ROOT+"commerce/admin/email-settings/contribution-confirmed",isNew:function(){return!1}},{ATTRS:{_type:{value:"_contribution_confirmed_",readOnly:!0},subjectFormat:{validator:S.Squarespace.AttrValidators.isString},message:{validator:S.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-model-sync-rest"]})},947586:function(){YUI.add("squarespace-navigation-item-blog",function(S){S.namespace("Squarespace.Navigation.Item"),S.Squarespace.Navigation.Item.Blog=S.Base.create("Blog",S.Squarespace.Navigation.Item.Base,[],{},{CSS_PREFIX:S.Squarespace.Navigation.Item.Base.CSS_PREFIX,ATTRS:{hasChevron:{value:!0},managerConfig:{value:{ctor:S.Squarespace.ContentManagerWidgets.Blog}}}})},"1.0",{requires:["base","squarespace-content-manager-widgets-blog","squarespace-navigation-item-base"]})},325062:function(){YUI.add("squarespace-navigation-item-cover",function(S){S.namespace("Squarespace.Navigation.Item"),S.Squarespace.Navigation.Item.Cover=S.Base.create("Cover",S.Squarespace.Navigation.Item.Base,[],{_augmentManagerCtor:function(b){return b}},{CSS_PREFIX:S.Squarespace.Navigation.Item.Base.CSS_PREFIX,ATTRS:{hasChevron:{value:!0},managerConfig:{value:{ctor:S.Squarespace.ContentManagerWidgets.CoverPage}},pathParams:{valueFn:function(){return{collectionId:this.get("collection").get("id")}}}}})},"1.0",{requires:["base","squarespace-content-manager-widgets-cover-page","squarespace-navigation-item-base","squarespace-util-authenticated"]})},271802:function(){YUI.add("squarespace-navigation-item-events",function(S){S.namespace("Squarespace.Navigation.Item"),S.Squarespace.Navigation.Item.Events=S.Base.create("Events",S.Squarespace.Navigation.Item.Base,[],{},{CSS_PREFIX:S.Squarespace.Navigation.Item.Base.CSS_PREFIX,ATTRS:{hasChevron:{value:!0},managerConfig:{value:{ctor:S.Squarespace.ContentManagerWidgets.Calendar}}}})},"1.0",{requires:["base","squarespace-content-manager-widgets-calendar","squarespace-navigation-item-base"]})},489521:function(){YUI.add("squarespace-navigation-item-link",function(S){var b=b||function(){};S.namespace("Squarespace.Navigation.Item"),S.Squarespace.Navigation.Item.Link=S.Base.create("Link",S.Squarespace.Navigation.Item.Base,[],{syncUI:b,_getHBTemplateContext:function(){return S.merge(this.get("model").toJSON(),this.get("model").get("externalLink"))},_bindModelEvents:function(){var t=this.get("model");this._registerEvent(t.after("externalLinkChange",function(T){this.set("title",T.newVal.title)},t),t.after("titleChange",function(T){this._updateTitle(T)},this),t.after("save",function(){S.Squarespace.Navigation.Events.fire("item:linkSave")},this))},showEditorDialog:function(){var t=this.get("model"),T=new S.Squarespace.Editor.NavigationExternalLinkReact({model:t});T.show()},select:b,_toggleHighlighted:b,_toggleHomepage:b,createPanel:b},{CSS_PREFIX:S.Squarespace.Navigation.Item.Base.CSS_PREFIX,ATTRS:{collectionTitle:{getter:function(){return this.get("model").get("externalLink.title")},setter:function(t){var T=this.get("model");return T.set("externalLink.title",t),T.save(),t}},isPusher:{value:!1},loadFrame:{value:!1},name:{getter:function(){return null}}}})},"1.0",{requires:["base","squarespace-editor-navigation-external-link-react","squarespace-editor-navigation-external-link","squarespace-navigation-item-base"]})},716603:function(){YUI.add("squarespace-navigation-item-page",function(S){S.namespace("Squarespace.Navigation.Item");var b=S.Squarespace.Navigation.Item.Page=S.Base.create("Page",S.Squarespace.Navigation.Item.Base,[],{bindUI:function(){b.superclass.bindUI.call(this)},_newInstanceCallback:function(t){b.superclass._newInstanceCallback.apply(this,arguments)}},{CSS_PREFIX:S.Squarespace.Navigation.Item.Base.CSS_PREFIX,ATTRS:{isPusher:{value:!1,readOnly:!1}}})},"1.0",{requires:["base","squarespace-navigation-events","squarespace-navigation-item-base","squarespace-singletons-location"]})},973331:function(){YUI.add("squarespace-navigation-item-products",function(S){S.namespace("Squarespace.Navigation.Item"),S.Squarespace.Navigation.Item.Products=S.Base.create("Products",S.Squarespace.Navigation.Item.Base,[],{},{CSS_PREFIX:S.Squarespace.Navigation.Item.Base.CSS_PREFIX,ATTRS:{hasChevron:{value:!0},managerConfig:{value:{ctor:S.Squarespace.ContentManagerWidgets.ProductsGrid}}}})},"1.0",{requires:["base","squarespace-content-manager-widgets-products-grid","squarespace-navigation-item-base"]})},944209:function(){YUI.add("squarespace-plugin-inline-input-editor",function(S){S.Event.defineOutside("click"),S.namespace("Squarespace.Plugin"),S.Squarespace.Plugin.InlineInputEditor=S.Base.create("InlineInputEditor",S.Plugin.Base,[],{initializer:function(){var b=this.get("input");this.get("host").get("boundingBox").addClass("inline-editing"),this.get("render").append(b),this._bindInputEvents(),b.focus(),this.get("autoSelect")&&b.select()},destructor:function(){this.get("host").get("boundingBox").removeClass("inline-editing"),S.Array.invoke(this._events,"detach"),this.get("input").remove(!0)},finishEditing:function(){var t=this.get("host"),T=this.constructor.NS;if(t.hasPlugin(T)){this._commitChanges();var N=this.get("onBlur");typeof N=="function"&&N()}},_bindInputEvents:function(){var b=this.get("input");this._events=[b.on(["click","contextmenu"],function(t){t.halt()}),b.on("clickoutside",function(T){T.halt(!0),b.blur(),window.navigator.userAgent.indexOf("Edge/")>0&&this.finishEditing()},this),b.on("blur",this.finishEditing,this),b.on("keyup",function(T){var N=T.target;this.set("data",N.get("value").trim()),T.keyCode===27?(T.halt(),this._clearChanges()):T.keyCode===13?(N.blur(),window.navigator.userAgent.indexOf("Edge/")>0&&this.finishEditing()):this.get("onKeyUp")(T)},this)]},_commitChanges:function(){var b={newVal:this.get("data"),prevVal:this.get("initialData")};this.get("onCommit").call(this.get("host"),b),this._unplugFromHost()},_clearChanges:function(){this.set("data",this.get("initialData")),this.get("onClear").call(this.get("host")),this._unplugFromHost()},_unplugFromHost:function(){this.get("host").unplug(this.constructor)}},{NS:"inlineInputEditor",ATTRS:{autoSelect:{value:!0},data:{validator:S.Lang.isString},initialData:{validator:S.Lang.isString,valueFn:function(){return this.get("data")},writeOnce:"initOnly"},input:{readOnly:!0,valueFn:function(){var b=S.Node.create('<input type="text" />');return b.addClass(this.get("inputClassName")),b.set("value",this.get("data")),b.set("placeholder",this.get("strings.placeholder")),b}},inputClassName:{value:"sqs-inline-input-editor",validator:S.Lang.isString},onClear:{value:function(){},validator:S.Lang.isFunction},onCommit:{validator:S.Lang.isFunction},render:{valueFn:function(){this.get("host").get("contentBox")}},onBlur:{value:function(){}},onKeyUp:{value:function(){}},strings:{value:{placeholder:""}}}})},"1.0",{requires:["array-invoke","base","node","plugin"]})},730244:function(S,b,t){"use strict";var T=t(714487),N=t(178089);YUI.add("squarespace-template-picker",function(u){var c=u.Squarespace.TemplatePicker=u.Base.create("TemplatePicker",u.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._hasTransitionedIn=!1,this._hasTransitionedOut=!1,this._escManagerTarget={close:this.destroy.bind(this)},u.Squarespace.EscManager.removeTarget(this._escManagerTarget)},renderUI:function(){c.superclass.renderUI.apply(this,arguments);var f=u.Node.create('<header class="preview-header"></header>').appendTo(this.get("contentBox"));this._closeButtonEl=f.appendChild('<a class="close-button" href="#"></a>'),f.appendChild('<div class="instructions-wrapper"></div>').append('<div class="title">'+this.get("strings.title")+"</div>").append('<div class="description">'+this.get("strings.description")+"</div>");var L=u.Node.create('<div class="preview-viewport"></div>').appendTo(this.get("contentBox"));this._viewportInnerEl=u.Node.create('<div class="inner"></div>').appendTo(L),this._framePlaceholderEl=u.Node.create('<div class="display-placeholder"></div>').appendTo(this._viewportInnerEl),this._loaderEl=u.Node.create('<div class="loading-indicator"><span class="message"></span></div>').appendTo(L),this.get("boundingBox").plug(u.Squarespace.Plugin.ScrollLock),u.one("body").addClass("preview-open"),u.later(1,this,function(){this.get("boundingBox").addClass("open")}),this.enterLoadingStateWithMessage((0,T.t)("Loading templates\u2026",null,{project:"scripts-v6-root"})),this._framePlaceholderEl.setStyle("display","block"),this._showTimer=u.later(c.TRANSITION_IN_DURATION,this,function(){this._hasTransitionedIn=!0,this._load(),this._iframeSourceTimer&&this._iframeSourceTimer.cancel()})},bindUI:function(){c.superclass.bindUI.apply(this,arguments),this._closeButtonEl.on("click",function(f){f.halt(),this.destroy()},this)},getInstalledTemplateWebsiteIds:function(){var f=this.get("installedTemplates"),L={};if(!f||!f.length)return L;for(var h=0;h<f.length;h++)L[f[h].websiteId]=!0;return L},_load:function(){var f=u.Squarespace.Context.getInstance().get("website"),L=f.get("websiteType");this._templateSwitcher=new N.Z({container:this._viewportInnerEl.getDOMNode(),installedTemplateWebsiteIds:this.getInstalledTemplateWebsiteIds(),installTemplate:u.bind(function(h){this.fire("install-template",{identifier:h.cloneIdentifier})},this),onLoad:u.bind(this._onLoad,this),websiteType:L})},_onLoad:function(){this.get("boundingBox").addClass("loaded"),this._framePlaceholderEl.setStyle("display","none")},_showSpinner:function(){this._hideSpinner(),this._spinner=new u.Squarespace.Spinner({color:"light",size:"xx-large",render:this._loaderEl})},_hideSpinner:function(){this._spinner&&(this._spinner.destroy(),this._spinner=null)},destroy:function(){u.one("body").removeClass("preview-open"),this._hasTransitionedOut||(this._hasTransitionedOut=!0,this.get("boundingBox").removeClass("open").addClass("fast"),u.later(c.TRANSITION_OUT_DURATION,this,function(){c.superclass.destroy.call(this)}),this._templateSwitcher&&(this._templateSwitcher=null))},destructor:function(){this._hideSpinner(),this._showTimer&&(this._showTimer.cancel(),this._showTimer=null),this._closeButtonEl.remove(!0),u.Squarespace.EscManager.removeTarget(this._escManagerTarget)},enterLoadingStateWithMessage:function(f){this.get("boundingBox").removeClass("loaded"),this._loaderEl.one("span.message").setContent(f),this._showSpinner()}},{CSS_PREFIX:"sqs-template-picker",TRANSITION_IN_DURATION:500,TRANSITION_OUT_DURATION:300,ATTRS:{strings:{value:{callToAction:(0,T.t)("Install Template",null,{project:"scripts-v6-root"}),title:(0,T.t)("Pick a New Template to Install",null,{project:"scripts-v6-root"}),description:(0,T.t)("Select a template to install. Installing a template will not affect your live website.",null,{project:"scripts-v6-root"})}},websiteType:{valueFn:function(){return u.Squarespace.Context.getInstance().get("website").get("websiteType")}},installedTemplates:{value:[]}}})},"1.0",{requires:["base","node","squarespace-common","squarespace-context","squarespace-escmanager","squarespace-plugin-scroll-lock","squarespace-spinner","squarespace-ss-widget","squarespace-ui-base"]})},134382:function(){YUI.add("squarespace-widgets-blog-list-view",function(S){S.namespace("Squarespace.Widgets.Blog");var b={EDIT_REQUESTED:"editRequested",BLOG_EDIT_REQUESTED:"blogEditRequested",DELETE_REQUESTED:"deleteRequested"},t=S.Squarespace.Widgets.Blog.ListView=S.Base.create("BlogListView",S.Squarespace.Widgets.List.SelectableListView,[],{initializer:function(){this.publish(b.EDIT_REQUESTED),this.publish(b.BLOG_EDIT_REQUESTED),this.publish(b.DELETE_REQUESTED)},bindUI:function(){t.superclass.bindUI.call(this),this.on("*:buttonAction",function(T){T.action==="edit"?this.fire(b.EDIT_REQUESTED,{item:T.target.get("item")}):T.action==="delete"&&this.fire(b.DELETE_REQUESTED,{item:T.target.get("item")})})},removeItems:function(T){T.each(function(N){this.fire(b.DELETE_REQUESTED,{item:N.get("item"),source:"bulk-remove"})},this)}},{CSS_PREFIX:"sqs-blog-list-view",ATTRS:{defaultChildType:{value:S.Squarespace.Widgets.Blog.ItemView}}})},"1.0",{requires:["base","squarespace-util-authenticated","squarespace-widgets-list-selectable-view","squarespace-widgets-blog-item-view"]})},41326:function(){YUI.add("squarespace-widgets-model-backed-field-editor",function(S){S.namespace("Squarespace.Widgets");var b=S.Squarespace.Widgets.ModelBackedFieldEditor=S.Base.create("ModelBackedFieldEditor",S.Squarespace.Widgets.SettingsPanel,[],{initializer:function(){this._loadAndSetDataOnFields(),this.publish("data-initialized"),this.on("data-initialized",function(){this.get("boundingBox").addClass("data-initialized")})},destructor:function(){this.get("destroyModel")&&this.get("model").destroy()},bindUI:function(){b.superclass.bindUI.call(this),this.after("dataStateChange",this._syncLoadingIndicators,this)},syncUI:function(){b.superclass.syncUI.call(this),this._syncLoadingIndicators()},_syncLoadingIndicators:function(){this._headerTray.set("loading",this.isLoading())},_loadAndSetDataOnFields:function(){this.setLoadingState(),this.get("model").load(this._registerCallback(function(){this.setLoadedState(),this.get("rendered")&&this.syncUI(),this.fire("data-initialized")},this))},_getDataByKey:function(t){var T=this.get("data");if(t.indexOf(".")>0){var N=t.split("."),u=N[0],c=N[1];return T[u][c]}return T[t]},_instantiateField:function(t,T){if(S.Lang.isString(T.name)){var N=this._getDataByKey(T.name);S.Lang.isValue(N)&&(T.data=N)}var u=new t(T);if(S.Lang.isString(T.name)){var c={source:S.guid()};this._bindFieldToModelEvents(u,T.name,c),this._bindModelToFieldEvents(u,T.name,c)}return u},_bindFieldToModelEvents:function(t,T,N){this._registerEvent(t.after("dataChange",function(u){u.source!==N.source&&this.get("model").set(T,u.newVal,N)},this))},_bindModelToFieldEvents:function(t,T,N){if(T.indexOf(".")>0){var u=T.split("."),c=u[0],f=u[1];this._registerEvent(this.get("model").after(c+"Change",function(L){L.source!==N.source&&S.Lang.isValue(L.newVal[f])&&t.set("data",L.newVal[f],N)},this))}else this._registerEvent(this.get("model").after(T+"Change",function(L){L.source!==N.source&&t.set("data",L.newVal,N)},this))},_getData:function(){return this.get("model").toJSON()},_saveChanges:function(){return new S.Squarespace.Promises.create(function(t,T){var N=S.Squarespace.FormUtils.validate(this._renderedFields);if(!S.Object.isEmpty(N)){this.fire("saved-changes-client-error"),S.Squarespace.FormUtils.showErrors(this._renderedFields,N),T({errors:N});return}this.setLoadingState(),this.get("model").save(S.bind(function(u){var c=S.Object.getValue(u,["responseJSON","errors"]),f=S.Object.getValue(u,["code"])>=400;S.Lang.isValue(c)&&!S.Object.isEmpty(c)?(this.showErrors(c),this.fire("saved-changes-failed"),T(c)):f?(this.fire("saved-changes-server-error"),T({response:u})):(this.markAsClean(),this.fire("saved-changes"),t()),this.setLoadedState()},this))},this)},_revertChanges:function(){return new S.Squarespace.Promises.create(function(t,T){this.setLoadingState(),this.get("model").load(this._registerCallback(function(){this.fire("revert-changes"),this.markAsClean(),this.setLoadedState(),this.syncUI(),t()},this))},this)},showErrors:function(t){S.Squarespace.FormUtils.showErrors(this._renderedFields,t)}},{CSS_PREFIX:"sqs-model-backed-field-editor",ATTRS:{model:{},data:{getter:function(){return this._getData()}},destroyModel:{value:!0,validator:S.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-form-utils","squarespace-promises","squarespace-settings-panel"]})},579290:function(){YUI.add("squarespace-widgets-recycle-bin-list-view",function(S){S.namespace("Squarespace.Widgets.RecycleBin");var b={RESTORE_REQUESTED:"restoreRequested",PREVIEW_REQUESTED:"previewRequested"},t=S.Squarespace.Widgets.RecycleBin.ListView=S.Base.create("RecycleBinListView",S.Squarespace.Widgets.InfiniteScrollList,[S.Squarespace.Mixins.ClickSelectableParent],{initializer:function(){this.publish(b.RESTORE_REQUESTED),this.publish(b.PREVIEW_REQUESTED)},renderUI:function(){t.superclass.renderUI.call(this),this.get("models").refresh()},bindUI:function(){t.superclass.bindUI.call(this),this.on("*:buttonAction",function(T){T.action==="restore"?this.fire(b.RESTORE_REQUESTED,{item:T.target.get("item")}):T.action==="preview"&&this.fire(b.PREVIEW_REQUESTED,{item:T.target.get("item")})}),this.after("selectionChange",function(){this.updateActionTray()})},syncUI:function(){var T=this.getFocusedWidget(),N;S.Lang.isValue(T)&&(N=T.get("item")),t.superclass.syncUI.call(this),S.Lang.isValue(N)&&this.setFocusedChildByItem(N)},getWidgetForItemById:function(T){return T&&!S.Lang.isString(T)&&(T=T.get("id")),S.Array.find(this.toJSON(),function(N){return N.get("item").get("id")===T})||null},setFocusedChildByItem:function(T){this.setFocusedChild(this.getWidgetForItemById(T.get("id")))}},{CSS_PREFIX:"sqs-recycle-bin-list",ATTRS:{"strings.noMoreModelsToLoad":null}})},"1.0",{requires:["base","squarespace-mixins-click-selectable-parent","squarespace-widgets-infinite-scroll-list","squarespace-widgets-recycle-bin-content-item-item-view"]})},791136:function(){YUI.add("squarespace-yui-for-config-website",function(S){S.namespace("Squarespace.Damask"),S.Squarespace.Damask.ConfigWebsite=S.Base.create("ConfigCoverPage",S.Squarespace.Damask.ReactFirst,[],{})},"1.0",{requires:["squarespace-yui-for-react-first","squarespace-navigation-pages","squarespace-async-wrappers-collections","squarespace-async-wrappers-cover-page-editors-for-website","squarespace-async-wrappers-popup-overlay-editors","squarespace-settings-comments","squarespace-damask-menu-design-custom-css","squarespace-damask-menu-design-templates","squarespace-navigation-pages","squarespace-damask-panel-menu-item-with-progress","squarespace-settings-commerce-checkout-form-edit","squarespace-settings-commerce-shipping","squarespace-widgets-inventory-editor-manager","squarespace-damask-menu-commerce-base-email-template","squarespace-damask-menu-commerce-contribution-confirmed"]})},608061:function(S,b,t){var T=t(195280);YUI.add("handlebars-compiler",function(N,u){N.namespace("Handlebars"),N.Handlebars.compile=T.compile,N.Handlebars.render=function(c,f,L){return N.Handlebars.compile(c)(f,L)}},"3.17.2",{requires:["handlebars-base"]})},526746:function(){YUI.add("squarespace-commerce-base-email-template-template",function(S){var b=S.Handlebars;(function(){var T=b.template,N=b.templates=b.templates||{};N["commerce-base-email-template.html"]=T({compiler:[8,">= 4.3.0"],main:function(u,c,f,L,h){return`<div class="settings-panel-fields">
  <div data-field-name="commonDescription"></div>
  <div data-field-name="headerDescription"></div>
  <div data-field-name="header"></div>
  <div data-field-name="footerDescription"></div>
  <div data-field-name="footer"></div>
  <div data-field-name="restoreDefaultsDescription"></div>
  <div data-field-name="restoreDefaults"></div>
</div>`},useData:!0})})();var t="commerce-base-email-template.html";S.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},716130:function(){YUI.add("squarespace-content-manager-blog-item-template",function(S){var b=S.Handlebars;(function(){var T=b.template,N=b.templates=b.templates||{};N["content-manager-blog-item.html"]=T({1:function(u,c,f,L,h){return"has-thumbnail"},3:function(u,c,f,L,h){return"has-comments"},5:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'      <div class="thumbnail" style="background-image: url('+u.escapeExpression((g=(g=m(f,"coverImageUrl")||(c!=null?m(c,"coverImageUrl"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"coverImageUrl",hash:{},data:h,loc:{start:{line:6,column:58},end:{line:6,column:75}}}):g))+`?format=500w)"></div>
`},7:function(u,c,f,L,h){return"has-title"},9:function(u,c,f,L,h){return"no-title"},11:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return u.escapeExpression((g=(g=m(f,"title")||(c!=null?m(c,"title"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"title",hash:{},data:h,loc:{start:{line:12,column:39},end:{line:12,column:48}}}):g))},13:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return u.escapeExpression((g=(g=m(f,"noTitle")||(c!=null?m(c,"noTitle"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"noTitle",hash:{},data:h,loc:{start:{line:12,column:56},end:{line:12,column:67}}}):g))},15:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return`</span>
      <span class="comment-count">`+u.escapeExpression((g=(g=m(f,"commentCount")||(c!=null?m(c,"commentCount"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"commentCount",hash:{},data:h,loc:{start:{line:13,column:34},end:{line:13,column:50}}}):g))+"</span>"},17:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'      <span class="status">'+u.escapeExpression((g=(g=m(f,"message")||(c!=null?m(c,"message"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"message",hash:{},data:h,loc:{start:{line:19,column:27},end:{line:19,column:38}}}):g))+`</span>
`},19:function(u,c,f,L,h){var g,m,C=u.lookupProperty||function(v,M){if(Object.prototype.hasOwnProperty.call(v,M))return v[M]};return'      <span class="event-date-descriptor">'+((g=(m=(m=C(f,"eventDateDescriptor")||(c!=null?C(c,"eventDateDescriptor"):c))!=null?m:u.hooks.helperMissing,typeof m=="function"?m.call(c??(u.nullContext||{}),{name:"eventDateDescriptor",hash:{},data:h,loc:{start:{line:23,column:42},end:{line:23,column:67}}}):m))!=null?g:"")+`</span>
`},21:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return(g=m(f,"if").call(c??(u.nullContext||{}),c!=null?m(c,"publishOn"):c,{name:"if",hash:{},fn:u.program(22,h,0),inverse:u.program(24,h,0),data:h,loc:{start:{line:25,column:6},end:{line:31,column:13}}}))!=null?g:""},22:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'        <span class="publish-on">'+u.escapeExpression((g=(g=m(f,"publishOn")||(c!=null?m(c,"publishOn"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"publishOn",hash:{},data:h,loc:{start:{line:26,column:33},end:{line:26,column:46}}}):g))+`</span>
`},24:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return(g=m(f,"if").call(c??(u.nullContext||{}),c!=null?m(c,"addedOn"):c,{name:"if",hash:{},fn:u.program(25,h,0),inverse:u.noop,data:h,loc:{start:{line:28,column:8},end:{line:30,column:15}}}))!=null?g:""},25:function(u,c,f,L,h){var g=u.lookupProperty||function(m,C){if(Object.prototype.hasOwnProperty.call(m,C))return m[C]};return'          <span class="added-on">'+u.escapeExpression((g(f,"date-format")||c&&g(c,"date-format")||u.hooks.helperMissing).call(c??(u.nullContext||{}),c!=null?g(c,"addedOn"):c,{name:"date-format",hash:{skeleton:"MMMd"},data:h,loc:{start:{line:29,column:33},end:{line:29,column:72}}}))+`</span>
`},27:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'      <span class="separator">&nbsp;&middot;&nbsp;</span> <span class="display-name">'+u.escapeExpression(u.lambda((g=c!=null?m(c,"author"):c)!=null?m(g,"displayName"):g,c))+`</span>
`},29:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return`
      <span class="separator">&nbsp;&middot;&nbsp;</span> <span class="like-count">`+u.escapeExpression((g=(g=m(f,"likeCount")||(c!=null?m(c,"likeCount"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"likeCount",hash:{},data:h,loc:{start:{line:39,column:83},end:{line:39,column:96}}}):g))+`</span>
`},31:function(u,c,f,L,h){var g,m=c??(u.nullContext||{}),C=u.hooks.helperMissing,v="function",M=u.escapeExpression,E=u.lookupProperty||function(R,D){if(Object.prototype.hasOwnProperty.call(R,D))return R[D]};return'    <div class="flag '+M((g=(g=E(f,"className")||(c!=null?E(c,"className"):c))!=null?g:C,typeof g===v?g.call(m,{name:"className",hash:{},data:h,loc:{start:{line:44,column:21},end:{line:44,column:34}}}):g))+`">
      `+M((g=(g=E(f,"message")||(c!=null?E(c,"message"):c))!=null?g:C,typeof g===v?g.call(m,{name:"message",hash:{},data:h,loc:{start:{line:45,column:6},end:{line:45,column:17}}}):g))+`
    </div>
`},compiler:[8,">= 4.3.0"],main:function(u,c,f,L,h){var g,m,C,v=c??(u.nullContext||{}),M=u.hooks.helperMissing,E="function",R=u.hooks.blockHelperMissing,D=u.lookupProperty||function(F,j){if(Object.prototype.hasOwnProperty.call(F,j))return F[j]},B=`<!-- @todo seems unused -->
<!-- Cameron-only -->

<div class="blog-list-item `+((g=D(f,"if").call(v,c!=null?D(c,"coverImageUrl"):c,{name:"if",hash:{},fn:u.program(1,h,0),inverse:u.noop,data:h,loc:{start:{line:4,column:27},end:{line:4,column:68}}}))!=null?g:"")+" "+((g=D(f,"if").call(v,c!=null?D(c,"commentCount"):c,{name:"if",hash:{},fn:u.program(3,h,0),inverse:u.noop,data:h,loc:{start:{line:4,column:69},end:{line:4,column:108}}}))!=null?g:"")+`">
`+((g=D(f,"if").call(v,c!=null?D(c,"coverImageUrl"):c,{name:"if",hash:{},fn:u.program(5,h,0),inverse:u.noop,data:h,loc:{start:{line:5,column:4},end:{line:7,column:11}}}))!=null?g:"")+`
  <header class="blog-list-item-header">
    <h2 class="`+((g=D(f,"if").call(v,c!=null?D(c,"title"):c,{name:"if",hash:{},fn:u.program(7,h,0),inverse:u.program(9,h,0),data:h,loc:{start:{line:10,column:15},end:{line:10,column:60}}}))!=null?g:"")+" "+((g=D(f,"if").call(v,c!=null?D(c,"commentCount"):c,{name:"if",hash:{},fn:u.program(3,h,0),inverse:u.noop,data:h,loc:{start:{line:10,column:61},end:{line:10,column:100}}}))!=null?g:"")+`">
      <!-- look in item-view.js for the noTitle text -->
      <span class="title">`+((g=D(f,"if").call(v,c!=null?D(c,"title"):c,{name:"if",hash:{},fn:u.program(11,h,0),inverse:u.program(13,h,0),data:h,loc:{start:{line:12,column:26},end:{line:12,column:74}}}))!=null?g:"")+((g=D(f,"if").call(v,c!=null?D(c,"commentCount"):c,{name:"if",hash:{},fn:u.program(15,h,0),inverse:u.noop,data:h,loc:{start:{line:12,column:74},end:{line:13,column:64}}}))!=null?g:"")+`
    </h2>
  </header>

  <div class="meta">
`;return g=(m=(m=D(f,"flag")||(c!=null?D(c,"flag"):c))!=null?m:M,C={name:"flag",hash:{},fn:u.program(17,h,0),inverse:u.noop,data:h,loc:{start:{line:18,column:4},end:{line:20,column:13}}},typeof m===E?m.call(v,C):m),D(f,"flag")||(g=R.call(c,g,C)),g!=null&&(B+=g),B+=`
`+((g=D(f,"if").call(v,c!=null?D(c,"eventDateDescriptor"):c,{name:"if",hash:{},fn:u.program(19,h,0),inverse:u.program(21,h,0),data:h,loc:{start:{line:22,column:4},end:{line:32,column:11}}}))!=null?g:"")+`
`+((g=D(f,"if").call(v,(g=c!=null?D(c,"author"):c)!=null?D(g,"displayName"):g,{name:"if",hash:{},fn:u.program(27,h,0),inverse:u.noop,data:h,loc:{start:{line:34,column:4},end:{line:36,column:11}}}))!=null?g:"")+`
<!--     `+((g=D(f,"if").call(v,c!=null?D(c,"likeCount"):c,{name:"if",hash:{},fn:u.program(29,h,0),inverse:u.noop,data:h,loc:{start:{line:38,column:9},end:{line:40,column:11}}}))!=null?g:"")+` -->  </div>

`,g=(m=(m=D(f,"flag")||(c!=null?D(c,"flag"):c))!=null?m:M,C={name:"flag",hash:{},fn:u.program(31,h,0),inverse:u.noop,data:h,loc:{start:{line:43,column:2},end:{line:47,column:11}}},typeof m===E?m.call(v,C):m),D(f,"flag")||(g=R.call(c,g,C)),g!=null&&(B+=g),B+`</div>
`},useData:!0})})();var t="content-manager-blog-item.html";S.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},564333:function(){YUI.add("squarespace-dialog-range-table-template",function(S){var b=S.Handlebars;(function(){var T=b.template,N=b.templates=b.templates||{};N["dialog-range-table.html"]=T({1:function(u,c,f,L,h){var g,m=c??(u.nullContext||{}),C=u.hooks.helperMissing,v="function",M=u.escapeExpression,E=u.lookupProperty||function(R,D){if(Object.prototype.hasOwnProperty.call(R,D))return R[D]};return`  <div class="field-lhs top">
    `+M((g=(g=E(f,"title")||(c!=null?E(c,"title"):c))!=null?g:C,typeof g===v?g.call(m,{name:"title",hash:{},data:h,loc:{start:{line:3,column:4},end:{line:3,column:13}}}):g))+`
  </div>
  <div class="field-rhs">
    <div class="field-description-wrapper">
      <div class="field-description">
        `+M((g=(g=E(f,"description")||(c!=null?E(c,"description"):c))!=null?g:C,typeof g===v?g.call(m,{name:"description",hash:{},data:h,loc:{start:{line:8,column:8},end:{line:8,column:23}}}):g))+`
      </div>
    </div>

    <table>
      <thead>
      <tr>
        <th>
          `+M((g=(g=E(f,"dimensionsLabel")||(c!=null?E(c,"dimensionsLabel"):c))!=null?g:C,typeof g===v?g.call(m,{name:"dimensionsLabel",hash:{},data:h,loc:{start:{line:16,column:10},end:{line:16,column:29}}}):g))+`
        </th>
        <th>
          `+M((g=(g=E(f,"valueLabel")||(c!=null?E(c,"valueLabel"):c))!=null?g:C,typeof g===v?g.call(m,{name:"valueLabel",hash:{},data:h,loc:{start:{line:19,column:10},end:{line:19,column:24}}}):g))+`
        </th>
      </tr>
      </thead>
      <tbody class="range-table-body">
      </tbody>

    </table>

    <div class="add-row">
      <img src="//assets.squarespace.com/universal/images-v6/standard/icon_add_11_light.png"/>
    </div>

  </div>
`},compiler:[8,">= 4.3.0"],main:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return(g=m(f,"with").call(c??(u.nullContext||{}),c!=null?m(c,"strings"):c,{name:"with",hash:{},fn:u.program(1,h,0),inverse:u.noop,data:h,loc:{start:{line:1,column:0},end:{line:33,column:9}}}))!=null?g:""},useData:!0})})();var t="dialog-range-table.html";S.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},882620:function(){YUI.add("squarespace-dialog-shipping-container-table-template",function(S){var b=S.Handlebars;(function(){var T=b.template,N=b.templates=b.templates||{};N["dialog-shipping-container-table.html"]=T({compiler:[8,">= 4.3.0"],main:function(u,c,f,L,h){var g,m=u.lambda,C=u.escapeExpression,v=u.lookupProperty||function(M,E){if(Object.prototype.hasOwnProperty.call(M,E))return M[E]};return`<table class="system">
  <thead>
    <tr>
      <th>
        `+C(m((g=c!=null?v(c,"strings"):c)!=null?v(g,"container"):g,c))+`
      </th>
      <th>
        `+C(m((g=c!=null?v(c,"strings"):c)!=null?v(g,"dimensions"):g,c))+`
      </th>
    </tr>
  </thead>
  <tbody class="table-body list"></tbody>
</table>

<div class="add-row">
  <img src="//assets.squarespace.com/universal/images-v6/standard/icon_add_11_light.png" />
</div>`},useData:!0})})();var t="dialog-shipping-container-table.html";S.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},839141:function(){YUI.add("squarespace-dialog-shipping-rule-list-template",function(S){var b=S.Handlebars;(function(){var T=b.template,N=b.templates=b.templates||{};N["dialog-shipping-rule-list.html"]=T({compiler:[8,">= 4.3.0"],main:function(u,c,f,L,h){return`<div class="shipping-rule-list">
  <div class="list-body">
    <div class="loading-text">Loading options&hellip;</div>
  </div>
  <div class="list-actions">
    <button class="list-add">Add Shipping Option</button>
    <button class="list-import">Import From Etsy</button>
  </div>
</div>
`},useData:!0})})();var t="dialog-shipping-rule-list.html";S.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},515643:function(){YUI.add("squarespace-dialog-shipping-system-container-table-template",function(S){var b=S.Handlebars;(function(){var T=b.template,N=b.templates=b.templates||{};N["dialog-shipping-system-container-table.html"]=T({compiler:[8,">= 4.3.0"],main:function(u,c,f,L,h){var g,m=u.lambda,C=u.escapeExpression,v=u.lookupProperty||function(M,E){if(Object.prototype.hasOwnProperty.call(M,E))return M[E]};return`<table class="system">
  <thead>
    <tr>
      <th>
        `+C(m((g=c!=null?v(c,"strings"):c)!=null?v(g,"container"):g,c))+`
      </th>
      <th>
        `+C(m((g=c!=null?v(c,"strings"):c)!=null?v(g,"dimensions"):g,c))+`
      </th>
    </tr>
  </thead>
  <tbody class="table-body list"></tbody>
</table>

`},useData:!0})})();var t="dialog-shipping-system-container-table.html";S.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},707924:function(){YUI.add("squarespace-navigation-item-list-template",function(S){var b=S.Handlebars;(function(){var T=b.template,N=b.templates=b.templates||{};N["navigation-item-list.html"]=T({1:function(u,c,f,L,h){var g,m=c??(u.nullContext||{}),C=u.lookupProperty||function(v,M){if(Object.prototype.hasOwnProperty.call(v,M))return v[M]};return`<header>
`+((g=C(f,"if").call(m,(g=c!=null?C(c,"strings"):c)!=null?C(g,"icon"):g,{name:"if",hash:{},fn:u.program(2,h,0),inverse:u.program(4,h,0),data:h,loc:{start:{line:3,column:2},end:{line:9,column:9}}}))!=null?g:"")+((g=C(f,"if").call(m,(g=c!=null?C(c,"strings"):c)!=null?C(g,"description"):g,{name:"if",hash:{},fn:u.program(6,h,0),inverse:u.noop,data:h,loc:{start:{line:10,column:2},end:{line:12,column:9}}}))!=null?g:"")+`</header>
`},2:function(u,c,f,L,h){var g,m,C=u.escapeExpression,v=u.lookupProperty||function(M,E){if(Object.prototype.hasOwnProperty.call(M,E))return M[E]};return`    <div class="header-nav-title">
      <h1 id="`+C((m=(m=v(f,"labelId")||(c!=null?v(c,"labelId"):c))!=null?m:u.hooks.helperMissing,typeof m=="function"?m.call(c??(u.nullContext||{}),{name:"labelId",hash:{},data:h,loc:{start:{line:5,column:14},end:{line:5,column:25}}}):m))+'">'+C(u.lambda((g=c!=null?v(c,"strings"):c)!=null?v(g,"title"):g,c))+`</h1>
    </div>
`},4:function(u,c,f,L,h){var g,m,C=u.escapeExpression,v=u.lookupProperty||function(M,E){if(Object.prototype.hasOwnProperty.call(M,E))return M[E]};return'    <h1 id="'+C((m=(m=v(f,"labelId")||(c!=null?v(c,"labelId"):c))!=null?m:u.hooks.helperMissing,typeof m=="function"?m.call(c??(u.nullContext||{}),{name:"labelId",hash:{},data:h,loc:{start:{line:8,column:12},end:{line:8,column:23}}}):m))+'">'+C(u.lambda((g=c!=null?v(c,"strings"):c)!=null?v(g,"title"):g,c))+`</h1>
`},6:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'    <div class="description">'+((g=u.lambda((g=c!=null?m(c,"strings"):c)!=null?m(g,"description"):g,c))!=null?g:"")+`</div>
`},8:function(u,c,f,L,h){return`<div class="product-notification"></div>
`},10:function(u,c,f,L,h){return`<div class="guidance-card"></div>
`},12:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'data-test="'+u.escapeExpression(u.lambda((g=c!=null?m(c,"strings"):c)!=null?m(g,"testAttr"):g,c))+'"'},14:function(u,c,f,L,h){return"empty-item-list-wrapper"},16:function(u,c,f,L,h){return`    <div class="error-banner"></div>
`},18:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'    <div class="empty-message">'+u.escapeExpression(u.lambda((g=c!=null?m(c,"strings"):c)!=null?m(g,"emptyMessage"):g,c))+`</div>
`},20:function(u,c,f,L,h){var g,m,C,v=u.lookupProperty||function(E,R){if(Object.prototype.hasOwnProperty.call(E,R))return E[R]},M=`<footer>
`;return g=(m=(m=v(f,"withUniqueId")||(c!=null?v(c,"withUniqueId"):c))!=null?m:u.hooks.helperMissing,C={name:"withUniqueId",hash:{},fn:u.program(21,h,0),inverse:u.noop,data:h,loc:{start:{line:38,column:2},end:{line:49,column:19}}},typeof m=="function"?m.call(c??(u.nullContext||{}),C):m),v(f,"withUniqueId")||(g=u.hooks.blockHelperMissing.call(c,g,C)),g!=null&&(M+=g),M+`</footer>
`},21:function(u,c,f,L,h){var g,m,C=c??(u.nullContext||{}),v=u.hooks.helperMissing,M="function",E=u.escapeExpression,R=u.lookupProperty||function(D,B){if(Object.prototype.hasOwnProperty.call(D,B))return D[B]};return`    <div
      class="add-page"
      data-test="add-page-button"
      role="button"
      aria-labelledby="`+E((m=(m=R(f,"uniqueId")||h&&R(h,"uniqueId"))!=null?m:v,typeof m===M?m.call(C,{name:"uniqueId",hash:{},data:h,loc:{start:{line:43,column:23},end:{line:43,column:36}}}):m))+`"
      `+((g=R(f,"if").call(C,(g=c!=null?R(c,"strings"):c)!=null?R(g,"testAttr"):g,{name:"if",hash:{},fn:u.program(22,h,0),inverse:u.noop,data:h,loc:{start:{line:44,column:6},end:{line:44,column:87}}}))!=null?g:"")+`
    >
      <span class="icon icon-add add-page-anchor"></span>
      <h3 class="title" id="`+E((m=(m=R(f,"uniqueId")||h&&R(h,"uniqueId"))!=null?m:v,typeof m===M?m.call(C,{name:"uniqueId",hash:{},data:h,loc:{start:{line:47,column:28},end:{line:47,column:41}}}):m))+'">'+E(u.lambda((g=c!=null?R(c,"strings"):c)!=null?R(g,"addText"):g,c))+`</h3>
    </div>
`},22:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'data-button="add-page-button-'+u.escapeExpression(u.lambda((g=c!=null?m(c,"strings"):c)!=null?m(g,"testAttr"):g,c))+'"'},compiler:[8,">= 4.3.0"],main:function(u,c,f,L,h){var g,m=c??(u.nullContext||{}),C=u.lookupProperty||function(v,M){if(Object.prototype.hasOwnProperty.call(v,M))return v[M]};return((g=C(f,"if").call(m,c!=null?C(c,"showHeader"):c,{name:"if",hash:{},fn:u.program(1,h,0),inverse:u.noop,data:h,loc:{start:{line:1,column:0},end:{line:14,column:7}}}))!=null?g:"")+((g=C(f,"if").call(m,c!=null?C(c,"productNotification"):c,{name:"if",hash:{},fn:u.program(8,h,0),inverse:u.noop,data:h,loc:{start:{line:15,column:0},end:{line:17,column:7}}}))!=null?g:"")+((g=C(f,"if").call(m,c!=null?C(c,"guidanceCard"):c,{name:"if",hash:{},fn:u.program(10,h,0),inverse:u.noop,data:h,loc:{start:{line:18,column:0},end:{line:20,column:7}}}))!=null?g:"")+`<section
  `+((g=C(f,"if").call(m,(g=c!=null?C(c,"strings"):c)!=null?C(g,"testAttr"):g,{name:"if",hash:{},fn:u.program(12,h,0),inverse:u.noop,data:h,loc:{start:{line:22,column:2},end:{line:22,column:65}}}))!=null?g:"")+`
  class="
    item-list-wrapper
    `+u.escapeExpression(u.lambda((g=c!=null?C(c,"strings"):c)!=null?C(g,"className"):g,c))+`
    `+((g=C(f,"if").call(m,c!=null?C(c,"empty"):c,{name:"if",hash:{},fn:u.program(14,h,0),inverse:u.noop,data:h,loc:{start:{line:26,column:4},end:{line:26,column:47}}}))!=null?g:"")+`
  ">
  <div class="item-list"></div>
`+((g=C(f,"if").call(m,c!=null?C(c,"resolutionError"):c,{name:"if",hash:{},fn:u.program(16,h,0),inverse:u.noop,data:h,loc:{start:{line:29,column:2},end:{line:31,column:9}}}))!=null?g:"")+((g=C(f,"if").call(m,(g=c!=null?C(c,"strings"):c)!=null?C(g,"emptyMessage"):g,{name:"if",hash:{},fn:u.program(18,h,0),inverse:u.noop,data:h,loc:{start:{line:32,column:2},end:{line:34,column:9}}}))!=null?g:"")+`</section>
`+((g=C(f,"if").call(m,c!=null?C(c,"showFooter"):c,{name:"if",hash:{},fn:u.program(20,h,0),inverse:u.noop,data:h,loc:{start:{line:36,column:0},end:{line:51,column:7}}}))!=null?g:"")},useData:!0})})();var t="navigation-item-list.html";S.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},545101:function(){YUI.add("squarespace-navigation-item-template",function(S){var b=S.Handlebars;(function(){var T=b.template,N=b.templates=b.templates||{};N["navigation-item.html"]=T({1:function(u,c,f,L,h){var g,m,C=c??(u.nullContext||{}),v=u.lookupProperty||function(M,E){if(Object.prototype.hasOwnProperty.call(M,E))return M[E]};return'  <div class="action-message '+((g=v(f,"if").call(C,c!=null?v(c,"actionMessageStyleOverride"):c,{name:"if",hash:{},fn:u.program(2,h,0),inverse:u.noop,data:h,loc:{start:{line:5,column:29},end:{line:5,column:85}}}))!=null?g:"")+'">'+u.escapeExpression((m=(m=v(f,"actionMessage")||(c!=null?v(c,"actionMessage"):c))!=null?m:u.hooks.helperMissing,typeof m=="function"?m.call(C,{name:"actionMessage",hash:{},data:h,loc:{start:{line:5,column:87},end:{line:5,column:104}}}):m))+`</div>
`},2:function(u,c,f,L,h){return"paywalled-label"},compiler:[8,">= 4.3.0"],main:function(u,c,f,L,h){var g,m,C=c??(u.nullContext||{}),v=u.hooks.helperMissing,M="function",E=u.escapeExpression,R=u.lookupProperty||function(D,B){if(Object.prototype.hasOwnProperty.call(D,B))return D[B]};return`<div data-test="navlist-item" class="item-wrapper">
  <span class="icon icon-`+E((m=(m=R(f,"icon")||(c!=null?R(c,"icon"):c))!=null?m:v,typeof m===M?m.call(C,{name:"icon",hash:{},data:h,loc:{start:{line:2,column:25},end:{line:2,column:33}}}):m))+`"></span>
  <div class="title" title="`+E((m=(m=R(f,"title")||(c!=null?R(c,"title"):c))!=null?m:v,typeof m===M?m.call(C,{name:"title",hash:{},data:h,loc:{start:{line:3,column:28},end:{line:3,column:37}}}):m))+'">'+E((m=(m=R(f,"title")||(c!=null?R(c,"title"):c))!=null?m:v,typeof m===M?m.call(C,{name:"title",hash:{},data:h,loc:{start:{line:3,column:39},end:{line:3,column:48}}}):m))+`</div>
`+((g=R(f,"if").call(C,c!=null?R(c,"showActionMessage"):c,{name:"if",hash:{},fn:u.program(1,h,0),inverse:u.noop,data:h,loc:{start:{line:4,column:2},end:{line:6,column:9}}}))!=null?g:"")+`  <div class="icons">
    <span class="icon icon-homepage"></span>
    <span class="icon icon-mahomepage"></span>
    <span class="icon icon-configure" data-js="navlist-item-settings"></span>
    <span class="icon icon-delete"></span>
    <span class="icon icon-chevron"></span>
  </div>
</div>
`},useData:!0})})();var t="navigation-item.html";S.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},744868:function(){YUI.add("squarespace-settings-panel-template",function(S){var b=S.Handlebars;(function(){var T=b.template,N=b.templates=b.templates||{};N["settings-panel.html"]=T({1:function(u,c,f,L,h){var g,m,C=c??(u.nullContext||{}),v=u.lookupProperty||function(M,E){if(Object.prototype.hasOwnProperty.call(M,E))return M[E]};return((g=v(f,"if").call(C,c!=null?v(c,"description"):c,{name:"if",hash:{},fn:u.program(2,h,0),inverse:u.noop,data:h,loc:{start:{line:2,column:2},end:{line:4,column:9}}}))!=null?g:"")+'  <div class="loading-message">'+((g=(m=(m=v(f,"loadingMessage")||(c!=null?v(c,"loadingMessage"):c))!=null?m:u.hooks.helperMissing,typeof m=="function"?m.call(C,{name:"loadingMessage",hash:{},data:h,loc:{start:{line:5,column:31},end:{line:5,column:51}}}):m))!=null?g:"")+`</div>
`},2:function(u,c,f,L,h){var g,m,C=u.lookupProperty||function(v,M){if(Object.prototype.hasOwnProperty.call(v,M))return v[M]};return'  <div class="panel-description">'+((g=(m=(m=C(f,"description")||(c!=null?C(c,"description"):c))!=null?m:u.hooks.helperMissing,typeof m=="function"?m.call(c??(u.nullContext||{}),{name:"description",hash:{},data:h,loc:{start:{line:3,column:33},end:{line:3,column:50}}}):m))!=null?g:"")+`</div>
`},compiler:[8,">= 4.3.0"],main:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return((g=m(f,"with").call(c??(u.nullContext||{}),c!=null?m(c,"strings"):c,{name:"with",hash:{},fn:u.program(1,h,0),inverse:u.noop,data:h,loc:{start:{line:1,column:0},end:{line:6,column:9}}}))!=null?g:"")+`
<div class="settings-panel-fields"></div>`},useData:!0})})();var t="settings-panel.html";S.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},180443:function(){YUI.add("squarespace-widgets-blog-item-view-template",function(S){var b=S.Handlebars;(function(){var T=b.template,N=b.templates=b.templates||{};N["widgets-blog-item-view.html"]=T({1:function(u,c,f,L,h){return"has-thumbnail"},3:function(u,c,f,L,h){return"has-comments"},5:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'    <div class="thumbnail" style="background-image: url('+u.escapeExpression((g=(g=m(f,"coverImageUrl")||(c!=null?m(c,"coverImageUrl"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"coverImageUrl",hash:{},data:h,loc:{start:{line:3,column:56},end:{line:3,column:73}}}):g))+`?format=300w"></div>
`},7:function(u,c,f,L,h){return"has-title"},9:function(u,c,f,L,h){return"no-title"},11:function(u,c,f,L,h){var g,m,C=u.lookupProperty||function(v,M){if(Object.prototype.hasOwnProperty.call(v,M))return v[M]};return(g=(m=(m=C(f,"title")||(c!=null?C(c,"title"):c))!=null?m:u.hooks.helperMissing,typeof m=="function"?m.call(c??(u.nullContext||{}),{name:"title",hash:{},data:h,loc:{start:{line:8,column:39},end:{line:8,column:50}}}):m))!=null?g:""},13:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return u.escapeExpression((g=(g=m(f,"noTitle")||(c!=null?m(c,"noTitle"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"noTitle",hash:{},data:h,loc:{start:{line:8,column:58},end:{line:8,column:69}}}):g))},15:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return`</span>
      <span class="comment-count">`+u.escapeExpression((g=(g=m(f,"commentCount")||(c!=null?m(c,"commentCount"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"commentCount",hash:{},data:h,loc:{start:{line:9,column:34},end:{line:9,column:50}}}):g))+"</span>"},17:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'      <span class="status">'+u.escapeExpression((g=(g=m(f,"message")||(c!=null?m(c,"message"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"message",hash:{},data:h,loc:{start:{line:15,column:27},end:{line:15,column:38}}}):g))+`</span>
`},19:function(u,c,f,L,h){var g,m,C=u.lookupProperty||function(v,M){if(Object.prototype.hasOwnProperty.call(v,M))return v[M]};return'      <span class="event-date-descriptor">'+((g=(m=(m=C(f,"eventDateDescriptor")||(c!=null?C(c,"eventDateDescriptor"):c))!=null?m:u.hooks.helperMissing,typeof m=="function"?m.call(c??(u.nullContext||{}),{name:"eventDateDescriptor",hash:{},data:h,loc:{start:{line:19,column:42},end:{line:19,column:67}}}):m))!=null?g:"")+`</span>
`},21:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return(g=m(f,"if").call(c??(u.nullContext||{}),c!=null?m(c,"publishOn"):c,{name:"if",hash:{},fn:u.program(22,h,0),inverse:u.program(24,h,0),data:h,loc:{start:{line:21,column:6},end:{line:27,column:13}}}))!=null?g:""},22:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'        <span class="publish-on">'+u.escapeExpression((g=(g=m(f,"publishOn")||(c!=null?m(c,"publishOn"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"publishOn",hash:{},data:h,loc:{start:{line:22,column:33},end:{line:22,column:46}}}):g))+`</span>
`},24:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return(g=m(f,"if").call(c??(u.nullContext||{}),c!=null?m(c,"addedOn"):c,{name:"if",hash:{},fn:u.program(25,h,0),inverse:u.noop,data:h,loc:{start:{line:24,column:8},end:{line:26,column:15}}}))!=null?g:""},25:function(u,c,f,L,h){var g=u.lookupProperty||function(m,C){if(Object.prototype.hasOwnProperty.call(m,C))return m[C]};return'          <span class="added-on">'+u.escapeExpression((g(f,"date-format")||c&&g(c,"date-format")||u.hooks.helperMissing).call(c??(u.nullContext||{}),c!=null?g(c,"addedOn"):c,{name:"date-format",hash:{time:"short",date:"short"},data:h,loc:{start:{line:25,column:33},end:{line:25,column:82}}}))+`</span>
`},27:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'      <span class="separator">&nbsp;&middot;&nbsp;</span> <span class="display-name">'+u.escapeExpression(u.lambda((g=c!=null?m(c,"author"):c)!=null?m(g,"displayName"):g,c))+`</span>
`},29:function(u,c,f,L,h){var g,m=c??(u.nullContext||{}),C=u.hooks.helperMissing,v="function",M=u.escapeExpression,E=u.lookupProperty||function(R,D){if(Object.prototype.hasOwnProperty.call(R,D))return R[D]};return'    <div class="flag '+M((g=(g=E(f,"className")||(c!=null?E(c,"className"):c))!=null?g:C,typeof g===v?g.call(m,{name:"className",hash:{},data:h,loc:{start:{line:36,column:21},end:{line:36,column:34}}}):g))+`">
      `+M((g=(g=E(f,"message")||(c!=null?E(c,"message"):c))!=null?g:C,typeof g===v?g.call(m,{name:"message",hash:{},data:h,loc:{start:{line:37,column:6},end:{line:37,column:17}}}):g))+`
    </div>
`},compiler:[8,">= 4.3.0"],main:function(u,c,f,L,h){var g,m,C,v=c??(u.nullContext||{}),M=u.hooks.helperMissing,E="function",R=u.hooks.blockHelperMissing,D=u.lookupProperty||function(F,j){if(Object.prototype.hasOwnProperty.call(F,j))return F[j]},B='<div class="blog-list-item list-item '+((g=D(f,"if").call(v,c!=null?D(c,"coverImageUrl"):c,{name:"if",hash:{},fn:u.program(1,h,0),inverse:u.noop,data:h,loc:{start:{line:1,column:37},end:{line:1,column:78}}}))!=null?g:"")+" "+((g=D(f,"if").call(v,c!=null?D(c,"commentCount"):c,{name:"if",hash:{},fn:u.program(3,h,0),inverse:u.noop,data:h,loc:{start:{line:1,column:79},end:{line:1,column:118}}}))!=null?g:"")+`">
`+((g=D(f,"if").call(v,c!=null?D(c,"coverImageUrl"):c,{name:"if",hash:{},fn:u.program(5,h,0),inverse:u.noop,data:h,loc:{start:{line:2,column:2},end:{line:4,column:9}}}))!=null?g:"")+`
  <header class="blog-list-item-header list-item-header">
    <h2 class="`+((g=D(f,"if").call(v,c!=null?D(c,"title"):c,{name:"if",hash:{},fn:u.program(7,h,0),inverse:u.program(9,h,0),data:h,loc:{start:{line:7,column:15},end:{line:7,column:60}}}))!=null?g:"")+" "+((g=D(f,"if").call(v,c!=null?D(c,"commentCount"):c,{name:"if",hash:{},fn:u.program(3,h,0),inverse:u.noop,data:h,loc:{start:{line:7,column:61},end:{line:7,column:100}}}))!=null?g:"")+`">
      <span class="title">`+((g=D(f,"if").call(v,c!=null?D(c,"title"):c,{name:"if",hash:{},fn:u.program(11,h,0),inverse:u.program(13,h,0),data:h,loc:{start:{line:8,column:26},end:{line:8,column:76}}}))!=null?g:"")+((g=D(f,"if").call(v,c!=null?D(c,"commentCount"):c,{name:"if",hash:{},fn:u.program(15,h,0),inverse:u.noop,data:h,loc:{start:{line:8,column:76},end:{line:9,column:64}}}))!=null?g:"")+`
    </h2>
  </header>

  <div class="meta">
`;return g=(m=(m=D(f,"flag")||(c!=null?D(c,"flag"):c))!=null?m:M,C={name:"flag",hash:{},fn:u.program(17,h,0),inverse:u.noop,data:h,loc:{start:{line:14,column:4},end:{line:16,column:13}}},typeof m===E?m.call(v,C):m),D(f,"flag")||(g=R.call(c,g,C)),g!=null&&(B+=g),B+=`
`+((g=D(f,"if").call(v,c!=null?D(c,"eventDateDescriptor"):c,{name:"if",hash:{},fn:u.program(19,h,0),inverse:u.program(21,h,0),data:h,loc:{start:{line:18,column:4},end:{line:28,column:11}}}))!=null?g:"")+`
`+((g=D(f,"if").call(v,(g=c!=null?D(c,"author"):c)!=null?D(g,"displayName"):g,{name:"if",hash:{},fn:u.program(27,h,0),inverse:u.noop,data:h,loc:{start:{line:30,column:4},end:{line:32,column:11}}}))!=null?g:"")+`  </div>

`,g=(m=(m=D(f,"flag")||(c!=null?D(c,"flag"):c))!=null?m:M,C={name:"flag",hash:{},fn:u.program(29,h,0),inverse:u.noop,data:h,loc:{start:{line:35,column:2},end:{line:39,column:11}}},typeof m===E?m.call(v,C):m),D(f,"flag")||(g=R.call(c,g,C)),g!=null&&(B+=g),B+`</div>
`},useData:!0})})();var t="widgets-blog-item-view.html";S.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},46865:function(){YUI.add("squarespace-widgets-infinite-scroll-list-template",function(S){var b=S.Handlebars;(function(){var T=b.template,N=b.templates=b.templates||{};N["widgets-infinite-scroll-list.html"]=T({1:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'    <img class="icon large" src="'+u.escapeExpression((g=(g=m(f,"emptyStateIconSrc")||(c!=null?m(c,"emptyStateIconSrc"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"emptyStateIconSrc",hash:{},data:h,loc:{start:{line:4,column:33},end:{line:4,column:54}}}):g))+`" />
`},compiler:[8,">= 4.3.0"],main:function(u,c,f,L,h){var g,m,C=c??(u.nullContext||{}),v=u.lookupProperty||function(M,E){if(Object.prototype.hasOwnProperty.call(M,E))return M[E]};return`<div class="children-wrapper"></div>
<div class="no-models">
`+((g=v(f,"if").call(C,c!=null?v(c,"emptyStateIconSrc"):c,{name:"if",hash:{},fn:u.program(1,h,0),inverse:u.noop,data:h,loc:{start:{line:3,column:2},end:{line:5,column:9}}}))!=null?g:"")+`  <div class="no-models-text"></div>
</div>
<div class="no-more-models">`+u.escapeExpression((m=(m=v(f,"noMoreModelsToLoad")||(c!=null?v(c,"noMoreModelsToLoad"):c))!=null?m:u.hooks.helperMissing,typeof m=="function"?m.call(C,{name:"noMoreModelsToLoad",hash:{},data:h,loc:{start:{line:8,column:28},end:{line:8,column:50}}}):m))+`</div>
<div class="spinner-wrapper"></div>`},useData:!0})})();var t="widgets-infinite-scroll-list.html";S.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},745455:function(){YUI.add("squarespace-widgets-recycle-bin-item-view-template",function(S){var b=S.Handlebars;(function(){var T=b.template,N=b.templates=b.templates||{};N["widgets-recycle-bin-item-view.html"]=T({1:function(u,c,f,L,h){return" has-thumbnail"},3:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return'    <div class="thumbnail" style="background-image: url('+u.escapeExpression((g=(g=m(f,"coverImageUrl")||(c!=null?m(c,"coverImageUrl"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"coverImageUrl",hash:{},data:h,loc:{start:{line:3,column:56},end:{line:3,column:73}}}):g))+`?format=100w)"></div>
`},5:function(u,c,f,L,h){var g,m=u.lookupProperty||function(C,v){if(Object.prototype.hasOwnProperty.call(C,v))return C[v]};return u.escapeExpression((g=(g=m(f,"icon")||(c!=null?m(c,"icon"):c))!=null?g:u.hooks.helperMissing,typeof g=="function"?g.call(c??(u.nullContext||{}),{name:"icon",hash:{},data:h,loc:{start:{line:7,column:52},end:{line:7,column:60}}}):g))},7:function(u,c,f,L,h){var g,m,C=u.lookupProperty||function(v,M){if(Object.prototype.hasOwnProperty.call(v,M))return v[M]};return(g=(m=(m=C(f,"title")||(c!=null?C(c,"title"):c))!=null?m:u.hooks.helperMissing,typeof m=="function"?m.call(c??(u.nullContext||{}),{name:"title",hash:{},data:h,loc:{start:{line:8,column:39},end:{line:8,column:50}}}):m))!=null?g:""},9:function(u,c,f,L,h){return"No Title"},compiler:[8,">= 4.3.0"],main:function(u,c,f,L,h){var g,m,C=c??(u.nullContext||{}),v=u.lookupProperty||function(M,E){if(Object.prototype.hasOwnProperty.call(M,E))return M[E]};return'<div class="list-item'+((g=v(f,"if").call(C,c!=null?v(c,"coverImageUrl"):c,{name:"if",hash:{},fn:u.program(1,h,0),inverse:u.noop,data:h,loc:{start:{line:1,column:21},end:{line:1,column:63}}}))!=null?g:"")+`">
`+((g=v(f,"if").call(C,c!=null?v(c,"coverImageUrl"):c,{name:"if",hash:{},fn:u.program(3,h,0),inverse:u.noop,data:h,loc:{start:{line:2,column:2},end:{line:4,column:9}}}))!=null?g:"")+`  <div class="list-item-header">
    <h2>
      <span class="icon collection-icon `+((g=v(f,"if").call(C,c!=null?v(c,"icon"):c,{name:"if",hash:{},fn:u.program(5,h,0),inverse:u.noop,data:h,loc:{start:{line:7,column:40},end:{line:7,column:67}}}))!=null?g:"")+`"></span>
      <span class="title">`+((g=v(f,"if").call(C,c!=null?v(c,"title"):c,{name:"if",hash:{},fn:u.program(7,h,0),inverse:u.program(9,h,0),data:h,loc:{start:{line:8,column:26},end:{line:8,column:73}}}))!=null?g:"")+`</span>
    </h2>
  </div>
  <span class="meta">`+u.escapeExpression((m=(m=v(f,"formattedUpdatedOnDate")||(c!=null?v(c,"formattedUpdatedOnDate"):c))!=null?m:u.hooks.helperMissing,typeof m=="function"?m.call(C,{name:"formattedUpdatedOnDate",hash:{},data:h,loc:{start:{line:11,column:21},end:{line:11,column:47}}}):m))+`</span>
</div>`},useData:!0})})();var t="widgets-recycle-bin-item-view.html";S.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},831369:function(S,b,t){"use strict";t.d(b,{Z:()=>E});var T=t(174161),N=t(482053),u=t(538312),c=t(934951),f=t(362187),L=t(685763),h=t(714487),g=t(513036),m=t(296883);const C=R=>{let{isOpen:D,onClose:B,onCheckAuth:F,channel:j}=R;const H=async()=>{await(0,g.eN)(),B(),F()};return T.createElement(L.Z.Transition,null,D&&T.createElement(L.Z,{onRequestClose:B},T.createElement(L.Z.Overlay,null),T.createElement(L.Z.Position,{position:"center"},T.createElement(f.Z,{title:(0,h.t)("Disconnect from {channel}",{channel:j},{project:"apps.App.Commerce"}),message:(0,h.t)("Squarespace will no longer have access to your {channel} shop.",{channel:j},{project:"apps.App.Commerce"}),buttons:[()=>T.createElement(f.Z.Button,{key:"cancel",onClick:B},T.createElement(c.T,{project:"apps.App.Commerce"},"Cancel")),()=>T.createElement(f.Z.Button,{key:"delete",variant:"danger",onClick:H},T.createElement(c.T,{project:"apps.App.Commerce"},"Disconnect"))]}))))},v=(0,m.P)(C),E=R=>{let{connectedShop:D,onCheckAuth:B}=R;const[F,j]=(0,T.useState)(!1);return T.createElement(T.Fragment,null,D!==null&&T.createElement(N.Z,{flexGrow:1,flexDirection:"column"},T.createElement(N.Z,{border:1,borderColor:"gray.800",px:4,justifyContent:"space-between",alignItems:"center"},T.createElement(u.Z.Body,{fontWeight:"medium",pr:2},D),T.createElement(u.Z.Body,{color:"green.300"},T.createElement(c.T,{project:"commerce-etsy-import"},"Connected"))),T.createElement(u.Z.Body,{color:"gray.300",borderBottom:1,borderColor:"gray.300",display:"inline-block",mt:1,mb:6,onClick:()=>j(!0),sx:{cursor:"pointer",alignSelf:"flex-start",transition:"border-color .1s ease-in-out","&:hover":{borderColor:"gray.200"}}},T.createElement(c.T,{project:"commerce-etsy-import"},"Use a different shop")),T.createElement(v,{isOpen:F,onClose:()=>j(!1),onCheckAuth:B,channel:"Etsy"})))}},71320:function(S,b,t){"use strict";t.d(b,{O:()=>T.O4,q:()=>u});var T=t(13596);const N={inventory_panel:"product-importer",product_reviews_panel:"product-reviews-importer",commerce_dashboard:"onboarding-modal",shipping_panel:"shipping-importer"},u=(c,f,L)=>{let h=`/commerce-channels/oauth/v2/etsy/initiate?jobTypes=${c}`;if(f&&(h+=`&collectionId=${f}`),L){let g=L.toUpperCase();(L==="product_reviews_panel"||L==="product_reviews_dashboard")&&(g=g.substring(8)),h+=`&fromPage=${L}&fromSection=${N[L]}&destination=${g}`}window.location.replace(h)}},10633:function(S,b,t){"use strict";t.d(b,{Z:()=>v});var T=t(456903);const N="/api/commerce/settings/checkout",c={load(){return T.default.get(N)},update(M){return T.default.put(N,M)}};var f=t(347560),L=t(560222),h=t(737063),g=t(224859);const m=M=>Promise.reject(M);class C{updateField(E,R){return{[E]:R}}load(){return E=>{c.load().then(R=>{const D=R.data;L.Z.loadSuccess(D),h.Z.loadFromCheckoutSettingsSuccess(D),this.loadSuccess(D)},R=>this.loadFailure(R.data)).catch(m),E()}}save(E){return R=>{const D={...E,continueShoppingLinkUrl:(0,g.l)(E.continueShoppingLinkUrl)};return R(D),c.update(D).then(B=>{this.saveSuccess(),L.Z.saveSuccess(),h.Z.saveSuccess()},B=>this.saveFailure(B.data)).catch(m)}}saveFailure(E){return R=>(R(E),Promise.reject(E))}constructor(){this.generateActions("loadSuccess","loadFailure","reset","saveSuccess","showOtherMailingListProviders","unload","editCheckoutForm","hideAlert")}}const v=f.Z.createActions(C)},224859:function(S,b,t){"use strict";t.d(b,{E:()=>E,l:()=>D});var T=t(437951),N=t.n(T),u=t(210362),c=t.n(u),f=t(730842),L=t(58713),h=t(714487),g=t(104002),m=t(681328),C=t(553073);const v=B=>B.links||B.items||B.children,M=B=>B.reduce((F,j)=>{const{collectionType:H,typeName:G,collectionId:Z,enabled:w}=j;if(Z&&w&&!(0,C.Z)(Z)){const W=(H===N().TEMPLATE_PAGE?m.default.getPageConfig(G):m.default.getCollectionConfig(G))||{},k=W.folderBehavior===c().INDEX,Q=v(j);F.push({...j,title:j.title||(0,h.t)("Untitled",null,{project:"apps.App.Commerce"}),isFolder:W.folder&&!k,children:Q&&!k?M(Q):null})}return F},[]),E=()=>{const{navigations:B}=m.default.getState(),F=(0,L.Z)()?f.Z.getSiteLayout():g.default.getState(),j=Object.values(B).reduce((G,Z)=>{let{name:w}=Z;return G.concat(M(v(F[w])))},[]),H=M(v(F._hidden));return j.concat(H)},R="/",D=B=>B===R||E().find(H=>{let{urlId:G}=H;return G===B})?B:R},219600:function(S,b,t){"use strict";t.d(b,{L:()=>C,Z:()=>M});var T=t(153088),N=t(170717),u=t(539034),c=t(714487),f=t(174161),L=t(845076),h=t.n(L),g=t(24596),m=t.n(g),C=function(E){return E[E.CLOSE=0]="CLOSE",E[E.BACK=1]="BACK",E[E.NONE=2]="NONE",E}({});const M=E=>{const{buttonType:R,onButtonPress:D,title:B}=E,F=()=>{switch(R){case 1:return f.createElement(N.Z,{className:h()(m().headerButton,m().backButton),onClick:D});case 0:return f.createElement(u.Z,{className:m().headerButton,label:(0,c.t)("Close",null,{project:"apps.App.Commerce"}),onClick:D})}return f.createElement(f.Fragment,null)},j=()=>f.createElement("div",{className:m().headerTitle},B);return f.createElement("div",{className:m().header},R!==2&&F(),B&&j())}},968579:function(S,b,t){"use strict";t.d(b,{DA:()=>E,Fm:()=>v,LJ:()=>M,qQ:()=>m});var T=t(461761),N=t.n(T),u=t(283635),c=null,f=null,L=null,h=null,g=null,m=function(R){return R.LOCAL_DELIVERY="local_delivery",R.SHIPPING="shipping",R.PICKUP="pickup",R}({});const C=new u.Z("CommerceShipping",{event_owner_team:"commerce_seller_operations",event_source:"web",product_area:"commerce",website_id:N()(window,"Static.SQUARESPACE_CONTEXT.website.id",null),ui_version:"YUI"}),v=function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"shipping";C.track({event_name:"CommerceShipping_ClickAddOption",actor:"user",action:"click",object_type:"button",fulfillment_option_type:R})},M=(R,D,B)=>{C.track({event_name:"CommerceShipping_ClickEditOption",action:"click",actor:"user",object_type:"button",fulfillment_option_type:R,option_name:B,option_info:{id:D,name:B}})},E=(R,D,B)=>{C.track({event_name:"CommerceShipping_ClickDeleteOption",action:"click",actor:"user",object_type:"button",fulfillment_option_type:R,option_name:B,option_info:{id:D,name:B}})}},560222:function(S,b,t){"use strict";t.d(b,{Z:()=>h});var T=t(347560),N=t(518703),u=t(192822),c=t(815211),f=t.n(c);class L{connectSuccess(m,C,v){return{accountDetail:m,lists:C,socialConfig:v}}connectMailChimp(){return m=>{m();const C={serviceProvider:f().MAILCHIMP,params:{authenticationType:"website",startSubscription:!0}};N.Z.authenticate(C).then(v=>{if(v.socialConfig){const M=v.socialConfig.externalAuthenticationId;return Promise.all([u.Z.getAccountDetail(M),u.Z.getLists(M),v.socialConfig])}},this.updateFailure).then(v=>{let[M,E,R]=v;this.connectSuccess(M.data,E,R)},this.connectFailure).catch(this.connectFailure)}}constructor(){this.generateActions("loadSuccess","connectFailure","updateFailure","disconnectMailChimp","saveSuccess","reset","changeListId","changeUseSingleOptIn","resetToDefaultConfig")}}const h=T.Z.createActions(L)},17098:function(S,b,t){"use strict";t.d(b,{Z:()=>h});var T=t(347560),N=t(456903);const c={getForCollection(g){return N.default.get(`/api/variations/${g}`)},updateVariation(g){return N.default.put(`/api/variations/${g.id}`,g)},deleteVariant(g,m){return N.default.delete(`/api/variations/${g}/${m}`)}};var f=t(172595);class L{fetchData(m){return C=>{C(m),c.getForCollection(m).then(v=>{let{data:M}=v;const E=f.Ey(M);this.fetchDataSuccess(E)})}}updateVariation(m){return C=>{C(m.collectionId);const v=f.hb(m);return c.updateVariation(v).then(this.updateVariationSuccess)}}deleteVariant(m,C){return c.deleteVariant(m,C).then(()=>{this.deleteVariantSuccess({collectionId:m,variantId:C})})}constructor(){this.generateActions("reset","updateProp","fetchDataSuccess","updateVariantWeight","updateVariantName","updateVariationSuccess","deleteVariantSuccess")}}const h=T.Z.createActions(L)},590153:function(S,b,t){"use strict";t.d(b,{Z:()=>j});var T=t(347560),N=t(17098),u=t(484623),c=t.n(u),f=t(461761),L=t.n(f),h=t(394470),g=t.n(h),m=t(805187),C=t.n(m),v=t(962398),M=t(142849),E=t(58713),R=t(730842),D=t(32161);const B={isDirty:!1,savedData:{},isLoading:!1};class F{onReset(G){this.state.isDirty&&this.setState({[G]:Object.assign({},this.state.savedData[G]),isDirty:!1})}onFetchData(){this.setState({isLoading:!0})}onFetchDataSuccess(G){const Z=Object.assign({},this.state.savedData);Z[G.collectionId]=c()(G),this.setState({isDirty:!1,isLoading:!1,[G.collectionId]:G,savedData:Z})}onNavUpdate(G){let{diff:Z}=G;Z.additions.forEach(w=>{w.length>1&&this.state[w[0]]&&this.addVariant({collectionId:w[0],variantId:w[1]})}),Z.deletions.forEach(w=>{w.length>1&&this.state[w[0]]&&this.deleteVariant({collectionId:w[0],variantId:w[1]})})}onSiteLayoutChange(G,Z){if(C()(g()(this.state,Object.keys(B))))return;const{changed:w}=(0,D.Z)(Z,G);Object.keys(w).forEach(z=>{const W=L()(Z,`${z}.items`,[]),k=L()(G,`${z}.items`,[]),{removed:Q,added:te}=(0,D.Z)(W,k);Q.forEach(se=>{var de;!((de=se.items)===null||de===void 0)&&de.length&&this.state[se.collectionId]&&se.items.forEach(Le=>{this.deleteVariant({collectionId:se.collectionId,variantId:Le.collectionId})})}),te.forEach(se=>{var de;!((de=se.items)===null||de===void 0)&&de.length&&this.state[se.collectionId]&&se.items.forEach(Le=>{this.addVariant({collectionId:se.collectionId,variantId:Le.collectionId})})})})}onUpdateVariantWeight(G){let{collectionId:Z,variantId:w,weight:z}=G;const W=this.state[Z],k=c()(W);k.variantMap[w].weight=parseInt(z,10),this.setState({[Z]:k,isDirty:!0})}onUpdateVariantName(G){let{collectionId:Z,variantId:w,variantName:z}=G;const W=this.state[Z],k=c()(W);k.variantMap[w].variantName=z,this.setState({[Z]:k,isDirty:!0})}onUpdateProp(G){let{collectionId:Z,key:w,value:z}=G;const W=this.state[Z],k=c()(W);k[w]=z,this.setState({[Z]:k,isDirty:!0})}onUpdateVariationSuccess(G){let{data:Z}=G;const w=this.state.savedData;w[Z.collectionId]=this.state[Z.collectionId],this.setState({savedData:w})}onRemoveCollection(G){for(const Z in this.state.savedData)this.state.savedData[Z].variantMap.hasOwnProperty(G)&&N.Z.deleteVariant(Z,G)}addVariant(G){let{collectionId:Z,variantId:w}=G;const z=this.state.savedData;z[Z].variantMap[w]={weight:0},this.setState({savedData:z,[Z]:Object.assign({},z[Z])})}deleteVariant(G){let{collectionId:Z,variantId:w}=G;const z=this.state.savedData;delete z[Z].variantMap[w],this.setState({savedData:z,[Z]:Object.assign({},z[Z])})}getVariation(G){return this.getState()[G]}constructor(){const G={onFetchDataSuccess:[N.Z.fetchDataSuccess,N.Z.updateVariationSuccess],onRemoveCollection:M.Z.deleteSuccess,deleteVariant:N.Z.deleteVariantSuccess};(0,E.Z)()?R.Z.onSiteLayoutChange((Z,w)=>{this.onSiteLayoutChange(Z,w)}):Object.assign(G,{onNavUpdate:v.Z.navChange}),this.bindActions(N.Z),this.bindListeners(G),this.state=B,this.exportPublicMethods({getVariation:this.getVariation})}}const j=T.Z.createStore(F,"VariationStore")},172595:function(S,b,t){"use strict";t.d(b,{Ey:()=>T,YU:()=>u,hb:()=>N});const T=c=>(c.variantMap={},Object.keys(c.variantWeights).forEach(f=>{c.variantMap[f]=c.variantWeights[f]}),delete c.variantWeights,c),N=c=>{const f=Object.assign({variantWeights:{}},c);return Object.keys(c.variantMap).forEach(L=>{f.variantWeights[L]=c.variantMap[L]}),delete f.variantMap,f},u=(c,f)=>!(!c||!f||c.isTrafficEvenlySplit||!c.variantMap[f].weight)},356130:function(S,b,t){"use strict";t.d(b,{Z:()=>G});var T=t(795478),N=t.n(T),u=t(174161),c=t(419467),f=t.n(c),L=t(845076),h=t.n(L),g=t(696049),m=t(979221),C=t(965885),v=t(238002),M=t(535025),E=t.n(M);function R(Z,w,z){return w in Z?Object.defineProperty(Z,w,{value:z,enumerable:!0,configurable:!0,writable:!0}):Z[w]=z,Z}const D=10,B=21e6,F=/^[ ,.0-9]*$/;var j;class H extends(j=u.Component){UNSAFE_componentWillMount(){this.setState(this.prepareState(this.props))}UNSAFE_componentWillReceiveProps(w){this.setState(this.prepareState(w))}prepareState(w){const{value:z,maxLength:W}=w,k=".",Q=`[^\\d${k}]`;return{editValue:z?z.toJson().decimalValue:"",decimalSeparator:k,maxLength:Math.min(W,D),nonFloatCharsRegEx:new RegExp(Q,"g")}}convertToParsableString(w){const{nonFloatCharsRegEx:z,decimalSeparator:W,zeroString:k}=this.state,Q=w.replace(z,"").replace(W,".");return/\d/.test(Q)?Q:k}convertToMoneyString(w){const{currencyCode:z,isOptional:W,formatter:k}=this.props;if(W&&w==="")return"";const Q=this.convertToParsableString(w),te=new g.default(Q,z);return k.format(te)}handleChange(w){F.test(w)&&this.setState({editValue:w})}handleBlur(){const{currencyCode:w,isOptional:z,onValue:W}=this.props,{editValue:k}=this.state;if(k===""&&z){W(null),this.setState({isFocused:!1});return}let Q=parseFloat(k||0);(Q<0||Q>B)&&(Q=0),Q=new g.default(Q,w).round(),W(Q),this.setState({editValue:Q.toFloat()+"",isFocused:!1})}handleFocus(w){const z=w.target;this.setState({isFocused:!0}),setTimeout(()=>z.select(),0)}focus(){this.inputRef.focus()}render(){const{children:w,wrapperClassName:z,errorClassName:W,errorMessage:k,inline:Q,hasErrors:te,readOnly:se,theme:de,label:Le,placeholder:it}=this.props,{editValue:he,isFocused:Je,maxLength:je}=this.state,Qe=Je?he:this.convertToMoneyString(he),Lt=h()(E().damaskInputOnWhiteBorder);return u.createElement(C.Input,{className:Lt,type:"text",ref:we=>this.inputRef=we,value:Qe,maxLength:je,wrapperClassName:z,errorClassName:W,errorMessage:k,inline:Q,hasErrors:te,readOnly:se,theme:de,label:Le,placeholder:it,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur},w)}constructor(w){super(w),this.state=H.defaultState,(0,c.bindAll)(this,"handleChange","handleBlur","handleFocus")}}R(H,"propTypes",{value:N().oneOfType([N().number,N().instanceOf(g.default)]),currencyCode:N().string.isRequired,isOptional:N().bool,formatter:N().shape({format:N().func}),onValue:N().func,wrapperClassName:N().string,errorClassName:N().string,errorMessage:N().string,hasErrors:N().bool,inline:N().bool,label:N().string,maxLength:N().number,placeholder:N().string,readOnly:N().bool,theme:v.Z}),R(H,"defaultProps",Object.freeze({value:null,isOptional:!1,formatter:m.h.formatter,maxLength:D,onValue:Z=>{}})),R(H,"defaultState",Object.freeze({isFocused:!1,editValue:"",decimalSeparator:"",maxLength:0,nonFloatCharsRegEx:null,zeroString:"0.00"}));const G=H},823125:function(S,b,t){"use strict";t.d(b,{Z:()=>C});var T=t(175663),N=t(63610),u=t(591633),c=t(161421),f=t(174161),L=t(133971),h=t(714487),g=t(696049);const C=v=>{let{initialValue:M,onChange:E,placeholder:R,dataTest:D,variant:B="default",fullWidth:F=!1,isDisabled:j=!1,errorMessage:H,hasErrors:G=!1,label:Z}=v;const w=M.currencyCode,[z,W]=(0,f.useState)({amount:M.toFloat(),currency:w}),[k,Q]=f.useState(null),{inputProps:te,formatValue:se}=(0,c.ZP)(z,W,k,(0,L.r)().symbols,h.xG),de=he=>{const Je=(0,h.jK)(w),Qe=`0-9., \xA0\u202F ${Array.from(Je).join("")}`;if(!new RegExp(`^[${Qe}]*$`).test(he))return;const we=se(he);W(we)},Le=()=>{const he=(z==null?void 0:z.amount)??NaN;if(isNaN(he)){W(we=>({...we,amount:0,mask:(0,h.xG)(0,w)})),E(new g.default(0,w));return}const je=new g.default(he,w).round((0,h.Wj)(w).digits),Qe=je.toFloat(),Lt=(0,h.xG)(Qe,w);W(we=>({...we,amount:Qe,mask:Lt})),E(je)},it=G||!!H;return f.createElement(N.p.Root,null,f.createElement(u.g.Root,{invalid:it},Z&&f.createElement(u.g.Label,{mb:1},Z),f.createElement(T.Y.Group,{disabled:j,width:F?"100%":"fit-content",display:F?"block":void 0,onBlur:Le},f.createElement(T.Y.Root,{height:44,variant:B},f.createElement(T.Y.Control,{ref:Q,placeholder:R,"data-test":D,value:te.value,onChange:he=>de(he.target.value),sx:{fontFamily:"inherit"}}))),H&&f.createElement(u.g.Error,{mt:2},H)))}},395351:function(S,b,t){"use strict";t.d(b,{Z:()=>f});var T=t(848371),N=t(399080),u=t(386773);class c{getStateFromContext(h){const g=h.authenticatedAccountWebsiteSettings;if(g)return{previewInstallationId:g.previewInstallationId,id:g.id}}handlePreviewInstallationChange(h){this.setState({previewInstallationId:h})}handleSevenOneMigrationSetAsLive(){this.handlePreviewInstallationChange()}onSave(){this.setState({$isLoading:!0})}onSaveSuccess(h){this.setState(Object.assign({},h.data,{$isLoading:!1}))}constructor(){this.state={$isLoading:!1},this.bindListeners({handlePreviewInstallationChange:N.Z.SET_PREVIEW_INSTALLATION,handleSevenOneMigrationSetAsLive:N.Z.SEVEN_ONE_MIGRATION_SET_AS_LIVE}),this.bindActions(u.Z)}}const f=(0,T.ZP)(c,"MemberWebsiteSettingsStore")},553073:function(S,b,t){"use strict";t.d(b,{Z:()=>u});var T=t(681328);function N(c){const{demoCollections:f}=T.default.getState();return f?!!f.find(L=>L.collectionId===c):!1}const u=N},164106:function(S,b,t){"use strict";var T=t(341237),N=t(941856),u=t(791136),c=t(546338),f=t(743932),L=t(474863),h=t(51852),g=t(159585),m=t(606536),C=t(797057),v=t(922770),M=t(917645),E=t(659413),R=t(132266),D=t(756426),B=t(60471),F=t(115470),j=t(585784),H=t(786763),G=t(508996),Z=t(230070),w=t(179760),z=t(244345),W=t(287917),k=t(654618),Q=t(820067),te=t(162995),se=t(514054),de=t(317375),Le=t(68367),it=t(577679),he=t(239429),Je=t(723949),je=t(383324),Qe=t(134495),Lt=t(743384),we=t(630173),Pd=t(33146),bd=t(24717),Ld=t(402359),Dd=t(353015),Nd=t(657649),Rd=t(753),xd=t(513626),Md=t(865378),Od=t(439343),Bd=t(975042),Ud=t(577089),Fd=t(245518),jd=t(989746),wd=t(481133),Wd=t(125057),Zd=t(541903),Vd=t(950122),Gd=t(130110),Hd=t(105495),qd=t(540856),Kd=t(559747),zd=t(192312),kd=t(773452),Xd=t(924999),Jd=t(931619),Qd=t(85548),$d=t(960692),Yd=t(878515),_d=t(794783),eu=t(568096),tu=t(263446),su=t(605585),nu=t(699993),au=t(305531),iu=t(991950),ou=t(918916),ru=t(668205),lu=t(480149),cu=t(95084),du=t(479839),uu=t(343140),gu=t(821303),pu=t(18709),mu=t(98315),hu=t(522353),vu=t(614722),fu=t(693373),Su=t(964129),Cu=t(3299),yu=t(794964),Eu=t(609794),Iu=t(27538),Tu=t(694671),Au=t(523572),Pu=t(913518),bu=t(399603),Lu=t(321010),Du=t(843326),Nu=t(775),Ru=t(163562),xu=t(213978),Mu=t(484989),Ou=t(827476),Bu=t(277200),Uu=t(859077),Fu=t(489565),ju=t(599302),wu=t(983810),Wu=t(687596),Zu=t(405144),Vu=t(397302),Gu=t(460974),Hu=t(872801),qu=t(623339),Ku=t(399296),zu=t(241601),ku=t(554671),Xu=t(819406),Ju=t(476008),Qu=t(165221),$u=t(669476),Yu=t(127714),_u=t(331623),eg=t(330171),tg=t(741471),sg=t(725707),ng=t(100602),ag=t(649253),ig=t(521956),og=t(221634),rg=t(34813),lg=t(398089),cg=t(455677),dg=t(677582),ug=t(464180),gg=t(869525),pg=t(185222),mg=t(367919),hg=t(82422),vg=t(112514),fg=t(367608),Sg=t(849541),Cg=t(297613),yg=t(975986),Eg=t(500393),Ig=t(584872),Tg=t(648276),Ag=t(755579),Pg=t(991206),bg=t(548543),Lg=t(553502),Dg=t(591321),Ng=t(652762),Rg=t(926654),xg=t(400982),Mg=t(527191),Og=t(482462),Bg=t(976309),Ug=t(475123),Fg=t(232630),jg=t(418360),wg=t(250172),Wg=t(852490),Zg=t(800180),Vg=t(97889),Gg=t(178577),Hg=t(217713),qg=t(815464),Kg=t(148475),zg=t(551375),kg=t(14590),Xg=t(48585),Jg=t(810873),Qg=t(525218),$g=t(422059),Yg=t(689727),_g=t(678406),ep=t(49773),tp=t(722306),sp=t(664853),np=t(89650),ap=t(46097),ip=t(102492),op=t(160714),rp=t(52976),lp=t(777402),cp=t(743294),dp=t(614430),up=t(243729),gp=t(213967),pp=t(907922),mp=t(264878),hp=t(788797),vp=t(575727),fp=t(334137),Sp=t(80141),Cp=t(685241),yp=t(297638),Ep=t(602885),Ip=t(222626),Tp=t(806287),Ap=t(588614),Pp=t(205017),bp=t(76233),Lp=t(899624),Dp=t(6580),Np=t(881754),Rp=t(154326),xp=t(970778),Mp=t(27411),Op=t(210015),Bp=t(816660),Up=t(618877),Fp=t(679810),jp=t(190598),wp=t(418393),Wp=t(514384),Zp=t(216034),Vp=t(52160),Gp=t(886231),Hp=t(135943),qp=t(331870),Kp=t(973108),zp=t(178329),kp=t(649737),Xp=t(889857),Jp=t(207793),Qp=t(832777),$p=t(121564),Yp=t(897023),_p=t(770262),em=t(908395),tm=t(108390),sm=t(82100),nm=t(879536),am=t(324187),im=t(577259),om=t(930762),rm=t(601559),lm=t(588771),cm=t(556158),dm=t(731254),um=t(743815),gm=t(859857),pm=t(270010),mm=t(564999),hm=t(658086),vm=t(371329),fm=t(429901),Sm=t(630748),Cm=t(346302),ym=t(199634),Em=t(128971),Im=t(696477),Tm=t(813767),Am=t(29076),Pm=t(181394),bm=t(226916),Lm=t(469684),Dm=t(8538),Nm=t(298164),Rm=t(107953),xm=t(233411),Mm=t(639551),Om=t(924336),Bm=t(596264),Um=t(551593),Fm=t(165648),jm=t(721323),wm=t(66873),Wm=t(585024),Zm=t(623885),Vm=t(853746),Gm=t(229183),Hm=t(459742),qm=t(678928),Km=t(89384),zm=t(162082),km=t(276852),Xm=t(419421),Jm=t(840292),Qm=t(434447),$m=t(216710),Ym=t(883189),_m=t(152841),eh=t(206996),th=t(801981),sh=t(261974),nh=t(272798),ah=t(921039),ih=t(288632),oh=t(176901),rh=t(454829),lh=t(27812),ch=t(97075),dh=t(243066),uh=t(790862),gh=t(451386),ph=t(272252),mh=t(997202),hh=t(644081),vh=t(303353),fh=t(286709),Sh=t(766559),Ch=t(845612),yh=t(411360),Eh=t(871200),Ih=t(764397),Th=t(919958),Ah=t(702723),Ph=t(860217),bh=t(717783),Lh=t(702843),Dh=t(459649),Nh=t(119350),Rh=t(634628),xh=t(649625),Mh=t(58396),Oh=t(326610),Bh=t(179758),Uh=t(470908),Fh=t(970767),jh=t(297928),wh=t(513025),Wh=t(387406),Zh=t(195307),Vh=t(767890),Gh=t(914093),Hh=t(62321),qh=t(806396),Kh=t(310501),zh=t(617598),kh=t(788589),Xh=t(461370),Jh=t(939268),Qh=t(287025),$h=t(614312),Yh=t(669413),_h=t(808574),ev=t(451535),tv=t(542413),sv=t(30076),nv=t(986182),av=t(265511),iv=t(347985),ov=t(796802),rv=t(241781),lv=t(230946),cv=t(406129),dv=t(940258),uv=t(768264),gv=t(51108),pv=t(4562),mv=t(775651),hv=t(61961),vv=t(819026),fv=t(857073),Sv=t(269385),Cv=t(853452),yv=t(20463),Ev=t(543962),Iv=t(698679),Tv=t(988755),Av=t(101848),Pv=t(898588),bv=t(608781),Lv=t(898524),Dv=t(987999),Nv=t(259322),Rv=t(744932),xv=t(836938),Mv=t(293922),Ov=t(773682),Bv=t(647251),Uv=t(983797),Fv=t(715752),jv=t(931697),wv=t(540303),Wv=t(921218),Zv=t(516774),Vv=t(769688),Gv=t(2986),Hv=t(566418),qv=t(510894),Kv=t(722595),zv=t(621317),kv=t(886297),Xv=t(789468),Jv=t(749053),Qv=t(542889),$v=t(20654),Yv=t(180207),_v=t(712815),ef=t(612533),tf=t(985531),sf=t(203034),nf=t(399704),af=t(984219),of=t(420679),rf=t(460266),lf=t(990944),cf=t(791368),df=t(43398),uf=t(966113),gf=t(496392),pf=t(585987),mf=t(850995),hf=t(501521),vf=t(166864),ff=t(651906),Sf=t(489513),Cf=t(81544),yf=t(98445),Ef=t(899028),If=t(298376),Tf=t(855424),Af=t(565931),Pf=t(585761),bf=t(953266),Lf=t(913002),Df=t(742122),Nf=t(992886),Rf=t(969736),xf=t(7837),Mf=t(295169),Of=t(578520),Bf=t(811777),Uf=t(875471),Ff=t(82364),jf=t(168851),wf=t(681083),Wf=t(75493),Zf=t(89711),Vf=t(738827),Gf=t(224381),Hf=t(352828),qf=t(274613),Kf=t(151442),zf=t(61672),kf=t(530657),Xf=t(22561),Jf=t(65302),Qf=t(716629),$f=t(623022),Yf=t(169078),_f=t(683548),eS=t(770466),tS=t(143813),sS=t(602210),nS=t(763755),aS=t(891420),iS=t(446469),oS=t(827224),rS=t(990743),lS=t(229889),cS=t(283306),dS=t(684329),uS=t(753669),gS=t(498558),pS=t(4565),mS=t(531055),hS=t(213914),vS=t(441106),fS=t(887945),SS=t(191416),CS=t(589438),yS=t(567930),ES=t(216803),IS=t(317529),TS=t(987720),AS=t(146589),PS=t(277597),bS=t(414562),LS=t(484135),DS=t(6866),NS=t(426566),RS=t(685661),xS=t(880626),MS=t(648714),OS=t(16160),BS=t(514929),US=t(490498),FS=t(351065),jS=t(587669),wS=t(40739),WS=t(584517),ZS=t(748199),VS=t(290143),GS=t(461422),HS=t(129003),qS=t(64739),KS=t(930478),zS=t(457550),kS=t(451622),XS=t(330615),JS=t(116455),QS=t(204553),$S=t(97963),YS=t(600534),_S=t(855858),eC=t(278813),tC=t(145830),sC=t(295265),nC=t(853554),aC=t(587324),iC=t(947021),oC=t(729677),rC=t(695552),lC=t(799819),cC=t(703885),dC=t(370499),uC=t(977969),gC=t(592969),pC=t(117428),mC=t(206065),hC=t(569818),vC=t(941891),fC=t(88946),SC=t(560328),CC=t(201300),yC=t(475357),EC=t(372988),IC=t(732336),TC=t(119570),AC=t(783154),PC=t(786947),bC=t(879704),LC=t(113361),DC=t(461046),NC=t(884282),RC=t(363271),xC=t(388611),MC=t(263261),OC=t(483431),BC=t(293805),UC=t(985931),FC=t(92408),jC=t(254622),wC=t(468455),WC=t(507969),ZC=t(554586),VC=t(143452),GC=t(706811),HC=t(584562),qC=t(913669),KC=t(690611),zC=t(303132),kC=t(789821),XC=t(838271),JC=t(882042),QC=t(433543),$C=t(563838),YC=t(620161),_C=t(819509),ey=t(852600),ty=t(249226),sy=t(597012),ny=t(483404),ay=t(960719),iy=t(990900),oy=t(485765),ry=t(626922),ly=t(788534),cy=t(587861),dy=t(66423),uy=t(193580),gy=t(389350),py=t(46439),my=t(106924),hy=t(825681),vy=t(291642),fy=t(107558),Sy=t(902423),Cy=t(658071),yy=t(202277),Ey=t(664059),Iy=t(953276),Ty=t(995525),Ay=t(501179),Py=t(651857),by=t(408949),Ly=t(183564),Dy=t(197807),Ny=t(229877),Ry=t(695659),xy=t(647653),My=t(930897),Oy=t(158741),By=t(772229),Uy=t(53961),Fy=t(774377),jy=t(675731),wy=t(268657),Wy=t(666545),Zy=t(829636),Vy=t(479327),Gy=t(864458),Hy=t(339027),qy=t(16761),Ky=t(575508),zy=t(604767),ky=t(722277),Xy=t(640366),Jy=t(947689),Qy=t(812588),$y=t(612581),Yy=t(687338),_y=t(417298),eE=t(933593),tE=t(977714),sE=t(536470),nE=t(290791),aE=t(892711),iE=t(90932),oE=t(899383),rE=t(427820),lE=t(677553),cE=t(485813),dE=t(884422),uE=t(906819),gE=t(522792),pE=t(911894),mE=t(322137),hE=t(697168),vE=t(264047),fE=t(133322),SE=t(385929),CE=t(520501),yE=t(856050),EE=t(985537),IE=t(79220),TE=t(476023),AE=t(628047),PE=t(613222),bE=t(929663),LE=t(650466),DE=t(709726),NE=t(942871),RE=t(302539),xE=t(477967),ME=t(412015),OE=t(453524),BE=t(827166),UE=t(962277),FE=t(39011),jE=t(894133),wE=t(203232),WE=t(685451),ZE=t(238945),VE=t(837136),GE=t(804606),HE=t(91210),qE=t(148194),KE=t(566076),zE=t(694065),kE=t(461471),XE=t(501365),JE=t(545737),QE=t(78232),$E=t(638489),YE=t(798890),_E=t(672417),eI=t(237186),tI=t(423216),sI=t(985781),nI=t(232278),aI=t(966370),iI=t(248280),oI=t(402801),rI=t(461061),lI=t(640919),cI=t(382508),dI=t(370537),uI=t(95954),gI=t(431304),pI=t(362335),mI=t(52660),hI=t(603917),vI=t(450909),fI=t(537757),SI=t(678765),CI=t(870416),yI=t(564922),EI=t(132644),II=t(165799),TI=t(366099),AI=t(4260),PI=t(262347),bI=t(715398),LI=t(776875),DI=t(26339),NI=t(825016),RI=t(660444),xI=t(975839),MI=t(202346),OI=t(136957),BI=t(186818),UI=t(557154),FI=t(542884),jI=t(920950),wI=t(430303),WI=t(178312),ZI=t(531760),VI=t(785469),GI=t(385221),HI=t(816224),qI=t(100166),KI=t(435182),zI=t(933446),kI=t(414743),XI=t(860774),JI=t(687891),QI=t(918065),$I=t(679669),YI=t(854241),_I=t(910217),eT=t(761523),tT=t(410980),sT=t(685701),nT=t(46242),aT=t(931993),iT=t(262308),oT=t(131087),rT=t(523144),lT=t(178518),cT=t(714564),dT=t(250751),uT=t(903761),gT=t(134372),pT=t(777709),mT=t(741385),hT=t(596457),vT=t(810490),fT=t(526362),ST=t(563135),CT=t(395308),yT=t(711775),ET=t(44079),IT=t(125475),TT=t(117938),AT=t(110765),PT=t(396929),bT=t(744542),LT=t(862788),DT=t(987144),NT=t(932492),RT=t(19372),xT=t(241211),MT=t(608391),OT=t(641828),BT=t(725672),UT=t(274451),FT=t(865886),jT=t(700178),wT=t(460437),WT=t(631333),ZT=t(735357),VT=t(598849),GT=t(579297),HT=t(792265),qT=t(135955),KT=t(104723),zT=t(215451),kT=t(461782),XT=t(421367),JT=t(700797),QT=t(606014),$T=t(385121),YT=t(39877),_T=t(885886),e0=t(83722),t0=t(711240),s0=t(557672),n0=t(874038),a0=t(726648),i0=t(169652),o0=t(652314),r0=t(244689),l0=t(545936),c0=t(255514),d0=t(673689),u0=t(899318),g0=t(93836),p0=t(563923),m0=t(715202),h0=t(570923),v0=t(998035),f0=t(865453),S0=t(932858),C0=t(521455),y0=t(324011),E0=t(92201),I0=t(218933),T0=t(717650),A0=t(252731),P0=t(2345),b0=t(121726),L0=t(199034),D0=t(923127),N0=t(531140),R0=t(300213),x0=t(630712),M0=t(482713),O0=t(897693),B0=t(651139),U0=t(271967),F0=t(649948),j0=t(72330),w0=t(715376),W0=t(51422),Z0=t(743924),V0=t(868908),G0=t(711738),H0=t(968634),q0=t(817495),K0=t(213419),z0=t(908126),k0=t(195665),X0=t(349898),J0=t(855873),Q0=t(269602),$0=t(442010),Y0=t(209532),_0=t(60276),eA=t(73700),tA=t(687561),sA=t(472103),nA=t(426704),aA=t(160545),iA=t(396153),oA=t(288208),rA=t(988792),lA=t(862430),cA=t(608229),dA=t(685501),uA=t(529891),gA=t(119873),pA=t(422908),mA=t(755384),hA=t(728535),vA=t(504174),fA=t(202168),SA=t(121059),CA=t(310705),yA=t(459352),EA=t(718324),IA=t(901445),TA=t(431401),AA=t(103107),PA=t(847342),bA=t(981387),LA=t(444308),DA=t(270496),NA=t(195274),RA=t(432365),xA=t(981265),MA=t(757122),OA=t(817772),BA=t(631096),UA=t(812697),FA=t(946567),jA=t(162762),wA=t(196870),WA=t(919149),ZA=t(364319),VA=t(667227),GA=t(256440),HA=t(114546),qA=t(818446),KA=t(156343),zA=t(806710),kA=t(733228),XA=t(15938),JA=t(285757),QA=t(117997),$A=t(656397),YA=t(552247),_A=t(440848),eP=t(64765),tP=t(838338),sP=t(894698),nP=t(478294),aP=t(336111),iP=t(358055),oP=t(204557),rP=t(180115),lP=t(557441),cP=t(395580),dP=t(138532),uP=t(826417),gP=t(114591),pP=t(321814),mP=t(417319),hP=t(950609),vP=t(831816),fP=t(155123),SP=t(868403),CP=t(580765),yP=t(250100),EP=t(543775),IP=t(404548),TP=t(452527),AP=t(206577),PP=t(929151),bP=t(160616),LP=t(593348),DP=t(802040),NP=t(70187),RP=t(905968),xP=t(889300),MP=t(681797),OP=t(865389),BP=t(744843),UP=t(871710),FP=t(808865),jP=t(947118),wP=t(304635),WP=t(463016),ZP=t(644409),VP=t(434982),GP=t(731687),HP=t(384271),qP=t(520341),KP=t(835612),zP=t(691647),kP=t(523462),XP=t(781349),JP=t(684483),QP=t(469771),$P=t(777682),YP=t(437101),_P=t(866058),eb=t(475678),tb=t(315339),sb=t(818866),nb=t(880262),ab=t(555060),ib=t(565186),ob=t(940811),rb=t(894946),lb=t(636970),cb=t(716830),db=t(703064),ub=t(894085),gb=t(128293),pb=t(608104),mb=t(461036),hb=t(330143),vb=t(22563),fb=t(899736),Sb=t(338065),Cb=t(338190),yb=t(67971),I=t(174161),yn=t(594127),l=t(714487),fi=t(480433),Dt=t.n(fi),Nt=t(347560),Pe=t(516614),Wt=t(399080),le=t(13795),vs=t(762379),Si=t(810573),Ci=t(246699),yi=t(444867),Zt=t.n(yi),Ei=t(24175),fs=t.n(Ei);function Ii(e){const r=e.Squarespace.Singletons.TemplateNavigationList.getHiddenNavigation().get("itemList").toArray().reduce((s,a)=>s.concat(a.get("collectionId")).concat(a.get("children").get("collectionId")),[]).map(s=>e.Squarespace.ContentCollectionCache.getById(s)).filter(s=>s&&s.get("isDemoCollection"));function n(){r.length===0&&window.location.reload(),r.pop().destroy({remove:!0},()=>n())}n()}var En=t(787592),Ti=t(551872),Ai=t(533789),We=t(337061),Vt=t(938077),ge=t(762535),ot=t(472575),Pi=t(534273),bi=Si.wl.selectHasPermission(fs().CONFIG_SETTINGS_TEMPLATE);YUI.add("squarespace-navigation-pages",function(e){e.namespace("Squarespace.Navigation");var r=["Static","SQUARESPACE_CONTEXT","hasDeletedCollections"],n=n||function(){},s=e.Squarespace.Navigation.Pages=e.Base.create("Pages",e.Squarespace.Widgets.SSWidget,[e.Squarespace.Damask.Panel.MixinPanel,e.Squarespace.Damask.Panel.MixinPanelParent],{initializer:function(){le.Z.setIsUserViewingPagesPanel(!0),this._showUtilitiesMenu=bi(Ci.h.getState()),(0,Ti.Z)(this.get("location").query),this.onceAfter("render",function(){this._unsubscribeFromEventEmitter=(0,ot.QA)(ot.gt,(function(){var a=this.get("navigationBar"),i=a?a.get("navigationViews.0"):null;i&&i.openItemListAddDialog()}).bind(this))},this)},destructor:function(){var a=this.get("websiteUtilitiesNavigationRoot");a&&a.unmount();var i=this.get("siteVersionRoot");i&&i.unmount(),this.get("navigationBar").destroy(),le.Z.setIsUserViewingPagesPanel(!1),this._showUtilitiesMenu=null,this.unsubscribeFrameFinished&&this.unsubscribeFrameFinished(),this._unsubscribeFromEventEmitter&&(this._unsubscribeFromEventEmitter(),this._unsubscribeFromEventEmitter=null)},renderUI:function(){s.superclass.renderUI.call(this)},bindUI:function(){this._registerEvent(e.Squarespace.Navigation.Events.on("item:select",this._selectCollection,this),e.Squarespace.Navigation.Events.after("collection:update",this._handleCollectionUpdate,this),e.Squarespace.Navigation.Events.on("collection:emptyTrash",this._setHasDeletedCollections.bind(this,!1)),e.Squarespace.Navigation.Events.on("itemList:linkConfigure",this.reloadFrame),e.Squarespace.Navigation.Events.on("item:linkSave",this.reloadFrame),e.Squarespace.Navigation.Events.after("itemList:dd-saved",this._handleItemListDD,this),e.Squarespace.Navigation.Events.on(["item:delete","itemList:delete"],function(a){a.selected?this.loadHomePageCollection():this.reloadFrame(),this._setHasDeletedCollections(!0)},this),e.Squarespace.Navigation.Events.on("item:initialize",this._initializeItem,this),e.Squarespace.Navigation.Events.on("item:destroy",this._destroyItem,this),e.Squarespace.Navigation.Events.on("item:registerPusher",function(a){this._registerPusher(a.item)},this),e.Squarespace.Navigation.Events.on("item:deregisterPusher",function(a){this._deregisterPusher(a.item)},this)),this.unsubscribeFrameFinished=(0,We.gH)(Vt.EeC,(function(a){a&&this.highlightCollectionFromFrame()}).bind(this)),this._homepageChangeListener=new(Dt())(Nt.Z),this._homepageChangeListener.addActionListener(Wt.Z.SET_HOMEPAGE_COLLECTION_ID,(function(a){e.Squarespace.Navigation.Events.fire("collection:homepage",{collection:this.get("homepageCollection")}),a.fromDemoContentClone||this.reloadFrame()}).bind(this)),this._memberAreaHomepageChangeListener=new(Dt())(Nt.Z),this._memberAreaHomepageChangeListener.addActionListener(le.Z.SET_MEMBER_AREA_HOMEPAGE,(function(a){e.Squarespace.Navigation.Events.fire("memberarea:homepage",a),a.fromDemoContentClone||this.reloadFrame()}).bind(this)),this._bootstrap()},syncUI:function(){if(this._showUtilitiesMenu)this._createWebsiteUtilitiesNavigation();else{var a=this.get("recycleBinNode");a&&a.toggleClass("visible",this.get("hasDeletedCollections"))}this._createSiteVersion()},reloadFrame:function(){e.Squarespace.Singletons.Location.requestFrameRefresh()},showRecycleBin:function(){this.get("router").push(ge.Z.forPagesPanel()+"/recycle-bin")},loadHomePageCollection:function(){e.Squarespace.Singletons.Location.setFrameUrlOrRefresh("/"),e.Squarespace.Navigation.Events.fire("item:active",{collection:this.get("homepageCollection")})},clearActive:function(){this.set("activePanel",null)},highlightCollectionFromFrame:function(){var a=this.get("damask").getPreviewFrameCollection(),i;a&&(i=this.get("collectionCache").getById(a.get("id")));var o={collection:i||this.get("homepageCollection")};e.Squarespace.Navigation.Events.fire("item:active",o)},_bootstrap:function(){this._createNavigationBar(),this._createRecycleBin(),this._showUtilitiesMenu&&this._createWebsiteUtilitiesNavigation(),this._createSiteVersion(),vs.Z.isFeatureEnabled(Zt().SECTION_ADMIN)&&this._createClearHidden(),e.Squarespace.Navigation.Events.fire("memberarea:homepage",{}),e.Squarespace.Navigation.Events.fire("collection:homepage",{collection:this.get("homepageCollection")}),this.highlightCollectionFromFrame()},_createClearHidden:function(){var a=this.get("contentBox").appendChild('<div class="clear-demo-collections">'+(0,l.t)("Clear Not Linked Navigation",null,{project:"src.seven-one"})+"</div>");a.on("click",function(){new e.Squarespace.Widgets.Confirmation({"strings.confirm":(0,l.t)("Clear All",null,{project:"src.seven-one"}),"strings.title":(0,l.t)("Remove All Demo Pages in Not Linked",null,{project:"src.seven-one"}),"strings.message":(0,l.t)("Be sure you know what you are doing! The page will reload once complete.",null,{project:"src.seven-one"})}).on("confirm",function(){Ii(e)},this)})},_createNavigationBar:function(){var a=new e.Squarespace.Navigation.Bar({collectionCache:this.get("collectionCache"),render:this.get("contentBox")});this.set("navigationBar",a)},_createRecycleBin:function(){var a=this.get("recycleBinNode");this.get("contentBox").appendChild(a),this._registerEvent(a.on("click",this.showRecycleBin,this))},_createWebsiteUtilitiesNavigation:function(){var a=this.get("websiteUtilitiesNavigationNode"),i=this.get("websiteUtilitiesNavigationRoot");i.render(I.createElement(Ai.Z,{shouldShowTrashMenu:this._showUtilitiesMenu&&this.get("hasDeletedCollections"),mt:8})),this.get("contentBox").appendChild(a)},_createSiteVersion:function(){var a=this.get("siteVersionNode"),i=this.get("siteVersionRoot");i.render(I.createElement(Pi.Z)),this.get("contentBox").appendChild(a)},_handleCollectionUpdate:function(a){var i=a.collection,o=a.isNew;if(o){this._selectCollection(i);return}setTimeout(function(){e.Squarespace.Singletons.Location.pointFrameToCollection(a.collection)},0)},_initializeItem:function(a){a.isPusher&&this._registerPusher(a.item)},_destroyItem:function(a){a.isPusher&&this._deregisterPusher(a.item)},_setHasDeletedCollections:function(a){this.set("hasDeletedCollections",a),this.syncUI()},_cloneDemoCollection:function(a){this.set("isCloning",!0);var i=e.Node.create("<div></div>");i.addClass("spinner-cog");var o=a.item.get("contentBox"),d=o.one(".icons");d.appendChild(i);var p=o.one(".icon-configure");p.hide(),this._loadingSpinner=new e.Squarespace.Spinner({color:"dark",size:"default",render:i});var y=(function(){this._loadingSpinner.destroy(),this._loadingSpinner=null,i.remove(!0),p.show(),this.set("isCloning",!1)}).bind(this);return a.collection.cloneToNewCollection().then((function(A){var P="/"+a.collection.get("urlId"),U={pathname:ge.Z.forPagesPanel()+"",state:{frameUrl:P}};a.item.get("isPusher")&&!a.stayInPagesPanel&&(U.pathname=ge.Z.forPagesPanel()+"/"+A),this.get("router").push(U),y()}).bind(this)).catch(function(A){a.item.get("contentBox").show(),y(),En.$e(function(P){P.setTag("project","content_browser"),P.setTag("epic","demo_content_improvement"),P.setExtra("context",JSON.stringify({collection:a.collection})),En.uT("Error auto-cloning demo content",A)})})},_selectCollection:function(a){if(this.get("inView")&&e.Lang.isValue(a.collection)){var i=e.Squarespace.Singletons.Location.getFrameUrl(),o="/"+a.collection.get("urlId"),d={pathname:ge.Z.forPagesPanel()+"",state:{frameUrl:o}},p=a.item.get("isNew");if(a.item.get("isPusher")&&!a.stayInPagesPanel&&(d.pathname=ge.Z.forPagesPanel()+"/"+a.collection.get("id")),e.Squarespace.Navigation.ListUtils.isCollectionInIndex(a.collection)&&a.collection.get("enabled")&&!e.Squarespace.Navigation.ListUtils.indexCollectionRequiresReload(a.collection)){var y=this.get("damask").get("contentBridge");d.state.frameUrl=y.getCollectionUrl(a.collection),e.Squarespace.Singletons.Location.pointFrameToCollectionInIndex(a.collection,p)}this.get("router").push(d),p&&i===o&&e.Squarespace.Singletons.Location.requestFrameRefresh()}},_handleItemListDD:function(a){a.updateStyle!=="silent"&&this.reloadFrame()}},{CSS_PREFIX:"sqs-navigation-pages",ATTRS:{collectionCache:{valueFn:function(){return e.Squarespace.ContentCollectionCache}},damask:{},hasDeletedCollections:{getter:function(){return e.Object.getValue(e.config.win,r)},setter:function(a){return e.Object.setValue(e.config.win,r,a)}},homepageCollection:{getter:function(){var a=Pe.Z.getHomepageCollectionId();return this.get("collectionCache").getById(a)}},navigationBar:{},recycleBinNode:{valueFn:function(){return e.Node.create('<div class="recycle-bin-button"><div class="icon"></div><div>'+(0,l.t)("Deleted Pages",null,{project:"scripts-v6.navigation"})+"</div></div>")},readOnly:!0,writeOnce:!0},websiteUtilitiesNavigationNode:{valueFn:function(){var a=document.createElement("div");return a.classList.add("website-utilities-navigation"),a},readOnly:!0,writeOnce:!0},websiteUtilitiesNavigationRoot:{valueFn:function(){return(0,yn.createRoot)(this.get("websiteUtilitiesNavigationNode"))},readOnly:!0,writeOnce:!0},siteVersionNode:{valueFn:function(){var a=document.createElement("div");return a.classList.add("site-version"),a},readOnly:!0,writeOnce:!0},siteVersionRoot:{valueFn:function(){return(0,yn.createRoot)(this.get("siteVersionNode"))},readOnly:!0,writeOnce:!0},title:{value:(0,l.t)("Pages",null,{project:"scripts-v6.navigation"})},isCloning:{value:!1}}})},"1.0",{requires:["squarespace-settings-collection-recycle-bin","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-panel-parent","squarespace-navigation-bar","squarespace-navigation-events","squarespace-singletons-location","squarespace-spinner"]});var Ee=t(730842);YUI.add("squarespace-settings-collection-recycle-bin",function(e){e.namespace("Squarespace.Widgets");var r=e.Squarespace.Widgets.ContentCollectionRecycleBin=e.Base.create("ContentCollectionRecycleBin",e.Squarespace.Widgets.RecycleBin.Base,[e.Squarespace.Damask.Panel.MixinPanel,e.WidgetParent],{initializer:function(){var n={restoreFn:e.Squarespace.RecycleBin.Utils.restoreCollection,"strings.confirm.title":(0,l.t)("Restore Collection",null,{project:"scripts-v6-root"}),"strings.confirm.message":(0,l.t)("Are you sure you wish to restore this collection?",null,{project:"scripts-v6-root"})},s=e.Squarespace.Widgets.RecycleBin.ContentCollectionListView;this._deletedDemoCollectionRecycleBin=this.add({childType:s,isDemoCollections:!0,itemConfig:e.merge({className:"hide-date"},n),"strings.title":(0,l.t)("Example Pages",null,{project:"scripts-v6-root"}),"strings.emptyMessage":(0,l.t)("You do not have any deleted example pages.",null,{project:"scripts-v6-root"})}).item(0),this._recycleBin=this.add({childType:s,scrollingElement:this.get("contentBox"),itemConfig:n,"strings.title":(0,l.t)("Deleted Pages",null,{project:"scripts-v6-root"}),"strings.emptyMessage":(0,l.t)("You do not have any deleted pages.",null,{project:"scripts-v6-root"})}).item(0)},destructor:function(){this._deletedDemoCollectionRecycleBin=null,this._recycleBin=null},bindUI:function(){r.superclass.bindUI.call(this),this._registerEvent(this._deletedDemoCollectionRecycleBin.after("restoreRequested",function(n){this.restore(n.item)},this)),this._registerEvent(this._recycleBin.after("restoreRequested",function(n){this.restore(n.item)},this))},_setDescription:function(){var n=e.Squarespace.Context.getInstance(),s=Math.floor(n.get("deletedCollectionGcAgeInSeconds")/60/60/24),a=(0,l.t)("Here you can restore recently deleted pages. Pages remain here for {daysBeforeRemoved} before they are automatically removed by the system.",{daysBeforeRemoved:(0,l._6)({one:"{%n} day",other:"{%n} days"},s,null,{project:"scripts-v6-root",notes:"oldKey: daysBefore"})},{project:"scripts-v6-root"});this.set("strings.description",a)},confirmEmptyBin:function(){e.Data.del({url:"/api/recycle-bin/collection",success:function(){e.Squarespace.Navigation.Events.fire("collection:emptyTrash"),e.Squarespace.Singletons.Location.goBack()},failure:function(n){}})},_restoreConfirm:function(n){this.get("contentBox").one(".controls").empty().setContent('<div class="status">'+(0,l.t)("Restoring...",null,{project:"scripts-v6-root"})+"</div>");var s=e.Squarespace.RecycleBin.Utils.restoreCollection;s(n.get("id"),function(){var a=e.Squarespace.ContentCollectionCache.getCollectionFromData(n.toJSON()),i=a.get("folder"),o={collectionId:a.get("id"),enabled:!0,title:a.get("navigationTitle"),typeName:a.get("typeName"),urlId:a.get("urlId"),collectionType:a.get("type"),restored:!0};Ee.Z.syncCollection(a.serialize());var d=e.Squarespace.Singletons.TemplateNavigationList.getHiddenNavigation(),p=d.get("itemList"),y=p.create(o);y.setNavigationItemList(p),i&&y.get("children").setTemplateNavigation(d);var A=this.get("router");A.push({pathname:ge.Z.forPagesPanel(),state:{frameUrl:"/"+o.urlId}})},this)}},{CSS_PREFIX:"collection-recycle-bin",ATTRS:{strings:{value:{title:(0,l.t)("Deleted Pages",null,{project:"scripts-v6-root"}),restoreConfirm:{title:(0,l.t)("Restore collection",null,{project:"scripts-v6-root"}),message:(0,l.t)("Are you sure you wish to restore this collection?",null,{project:"scripts-v6-root"}),button:(0,l.t)("Restore",null,{project:"scripts-v6-root"})},emptyConfirm:{title:(0,l.t)("Empty the trash",null,{project:"scripts-v6-root"}),message:(0,l.t)("Are you sure you wish to empty this pages bin? This is permanent and cannot be undone.",null,{project:"scripts-v6-root"})}}}}})},"1.0",{requires:["base","squarespace-context","squarespace-damask-panel-mixin-panel","squarespace-models-content-collection","squarespace-models-template-navigation-list","squarespace-navigation-events","squarespace-settings-recycle-bin-base","squarespace-settings-recycle-bin-utils","squarespace-singletons-location","squarespace-widgets-recycle-bin-content-collection-list-view"]}),YUI.add("squarespace-settings-recycle-bin-base",function(e){e.namespace("Squarespace.Widgets.RecycleBin");var r=e.Squarespace.Widgets.RecycleBin.Base=e.Base.create("RecycleBin",e.Squarespace.Widgets.DataWidget,[e.Squarespace.Damask.Panel.MixinPanel,e.WidgetParent],{initializer:function(){this._headerTray=this._initHeaderTray()},destructor:function(){this._headerTray=null},renderUI:function(){r.superclass.renderUI.call(this),this._headerTray.render(this.get("contentBox")),this.get("emptyButton").render(this.get("contentBox"))},_initHeaderTray:function(){return this._setDescription(),new e.Squarespace.Widgets.HeaderTray({loading:this.get("dataState")===this.getProperty("DATA_STATES").LOADING,"strings.title":this.get("strings.title")||"","strings.subtitle":this.get("strings.description")})},_setDescription:function(){},restore:function(n){var s=e.bind(this._restoreConfirm,this,n),a=new e.Squarespace.Widgets.Confirmation({"strings.confirm":this.get("strings.restoreConfirm.button"),"strings.title":this.get("strings.restoreConfirm.title"),"strings.message":this.get("strings.restoreConfirm.message")});a.on("confirm",s,this)},_restoreConfirm:function(){throw new Error("_restoreConfirm not implemented.")}},{CSS_PREFIX:"sqs-recycle-bin-settings",ATTRS:{emptyButton:{valueFn:function(){return new e.Squarespace.DialogFields.Button({name:"empty-trash",className:"minor","strings.text":(0,l.t)("Empty Trash",null,{project:"scripts-v6-root"}),onClick:e.bind(function(){new e.Squarespace.Widgets.Confirmation({"strings.title":this.get("strings.emptyConfirm.title"),"strings.message":this.get("strings.emptyConfirm.message")}).on("confirm",this.confirmEmptyBin,this)},this)})}}}})},"1.0",{requires:["squarespace-attr-validators","squarespace-widgets-data-widget","squarespace-damask-panel-mixin-panel"]});var Li=t(44348),ie=t.n(Li);YUI.add("squarespace-settings-recycle-bin-utils",function(e){e.namespace("Squarespace.RecycleBin"),e.Squarespace.RecycleBin.Utils={restoreCollection:function(r,n,s){e.Data.post({url:"/api/recycle-bin/collection/"+r+"/restore",success:function(a){e.Lang.isObject(a)&&e.Lang.isBoolean(a.hasDeletedCollections)&&e.Object.setValue(e.config.win,"Static.SQUARESPACE_CONTEXT.hasDeletedCollections".split("."),a.hasDeletedCollections),n.apply(this,arguments)}},s)},restoreItem:function(r,n,s){return r.set("workflowState",ie().DRAFT),r.save(e.bind(n,s)),r}}},"1.0",{requires:[]}),YUI.add("squarespace-widgets-recycle-bin-content-collection-list-view",function(e){e.namespace("Squarespace.Widgets.RecycleBin");var r=e.Squarespace.Widgets.RecycleBin.ContentCollectionListView=e.Base.create("ContentCollectionListView",e.Squarespace.Widgets.RecycleBin.ListView,[],{renderUI:function(){r.superclass.renderUI.call(this);var n=e.Node.create('<div class="header"><div class="title">'+this.get("strings.title")+"</div></div>");this.get("contentBox").prepend(n)},bindUI:function(){r.superclass.bindUI.call(this),this._registerEvent(this.get("models").after("load",function(n){this.get("boundingBox").toggleClass("empty",n.target.isEmpty())},this))},getEmptyStateMessage:function(){return(0,l.t)("There are no deleted pages.",null,{project:"scripts-v6.widgets"})}},{CSS_PREFIX:"sqs-recycle-bin-content-collection-list",ATTRS:{strings:{value:{modelName:"content-collection"}},isDemoCollections:{value:!1},models:{valueFn:function(){var n=e.Squarespace.API_ROOT+"recycle-bin",s={root:n,url:n};return this.get("isDemoCollections")&&(s.url+="?demo=true"),new e.Squarespace.Models.GrowableContentCollectionList(s)}},defaultChildType:{value:e.Squarespace.Widgets.RecycleBin.ContentCollectionItemView}}})},"1.0",{requires:["squarespace-models-growable-content-collection-list","squarespace-widgets-recycle-bin-list-view","squarespace-widgets-recycle-bin-content-collection-item-view"]});var Di=t(532099),In=t.n(Di);YUI.add("squarespace-models-growable-content-collection-list",function(e){e.namespace("Squarespace.Models"),e.Squarespace.Models.GrowableContentCollectionList=e.Base.create("GrowableContentCollectionList",e.Squarespace.Models.GrowableModelList,[],{model:e.Squarespace.Models.ContentCollection},{ATTRS:{paginator:{valueFn:function(){return new e.Squarespace.Models.RangePaginator({models:this,orderBy:"updatedOn",orderDirection:In().DESCENDING})}}}})},"1.0",{requires:["base","squarespace-models-content-collection","squarespace-models-growable-model-list"]});var Eb=t(579290);YUI.add("squarespace-widgets-infinite-scroll-list",function(e){e.namespace("Squarespace.Widgets");var r=e.Squarespace.Widgets.InfiniteScrollList=e.Base.create("InfiniteScrollList",e.Squarespace.Widgets.SSWidget,[e.WidgetParent,e.Squarespace.Mixins.Loadable],{destructor:function(){this._childrenContainer=null},renderUI:function(){r.superclass.renderUI.call(this);var n=this.get("contentBox");this._childrenContainer=n.one(".children-wrapper");var s=n.one(".spinner-wrapper");s&&new e.Squarespace.Spinner({render:s,size:40,color:"dark"})},bindUI:function(){r.superclass.bindUI.call(this),this._bindModels(),this.after("modelsChange",function(s){s.preVal&&s.preVal.detach(),this._bindModels(),this.syncUI()});var n=this.get("scrollingElement")||this.get("contentBox");n.plug(e.Plugin.ScrollInfo),n.scrollInfo.on("scrollDown",function(s){this._loadMoreIfAtBottom()},this)},syncUI:function(){r.superclass.syncUI.call(this);var n=this.get("models"),s=n.isEmpty(),a=this.get("loading"),i=n.get("hasNextPage"),o=this.get("contentBox"),d=o.one(".no-models");d&&(s&&!a?(this._syncEmptyState(),d.show()):d.hide(),!i&&!a&&!s?o.one(".no-more-models").show():o.one(".no-more-models").hide());var p=o.one(".spinner-wrapper");p&&(a?p.show():p.hide()),this._loadMoreIfAtBottom()},_getHBTemplateContext:function(){var n=r.superclass._getHBTemplateContext.call(this);return e.merge(n,{emptyStateIconSrc:this.get("emptyStateIconSrc"),noMoreModelsToLoad:this.get("strings.noMoreModelsToLoad")})},_syncEmptyState:function(){var n=this.get("contentBox").one(".no-models-text");n.set("text",this.getEmptyStateMessage())},getEmptyStateMessage:function(){return(0,l.t)("There are no items.",null,{project:"scripts-v6.widgets"})},_bindModels:function(){var n=this.get("models");this._registerEvent([n.after("add",function(s){this._addWidgetForModel(s.model,s.index)},this),n.after("remove",function(s){var a=this.remove(s.index);a.destroy(!0),this.syncUI()},this),n.after("reset",function(s){var a=this.removeAll();a.each(function(i){i.destroy(!0)}),this.syncUI()},this)])},_addWidgetForModel:function(n,s){this.get("selected")===1&&this.set("selected",2),this.add({model:n},s)},_loadMoreIfAtBottom:function(){var n=this.get("models");if(!(this.get("loading")||!n.get("hasNextPage")||n.get("lastError"))){var s=this.get("scrollingElement")||this.get("contentBox");s.scrollInfo.refreshDimensions(),s.scrollInfo.set("scrollMargin",s.get("clientHeight")/2);var a=s.scrollInfo.getScrollInfo();a.atBottom&&n.loadMore()}}},{CSS_PREFIX:"sqs-model-list",HANDLEBARS_TEMPLATE:"widgets-infinite-scroll-list.html",ATTRS:{models:{valueFn:function(){return new e.Squarespace.Models.GrowableModelList},validator:e.Squarespace.AttrValidators.isInstanceOf(e.Squarespace.Models.GrowableModelList)},"strings.noMoreModelsToLoad":{value:(0,l.t)("No more models to load.",null,{project:"scripts-v6.widgets"})},emptyStateIconSrc:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},loadable:{getter:function(){return this.get("models")},readOnly:!0},scrollingElement:{},defaultChildType:{value:e.Squarespace.Widgets.Model,writeOnce:"initOnly"}}})},"1.0",{requires:["node-scroll-info","squarespace-attr-validators","squarespace-mixins-loadable","squarespace-models-growable-model-list","squarespace-spinner","squarespace-ss-widget","squarespace-widgets-infinite-scroll-list-template","squarespace-widgets-model","squarespace-widgets-model-list","widget-parent"]});var Ib=t(46865);YUI.add("squarespace-widgets-model-list",function(e){e.namespace("Squarespace.Widgets");var r=e.Squarespace.Widgets.ModelList=e.Base.create("ModelList",e.Squarespace.Widgets.SSWidget,[e.WidgetParent,e.Squarespace.Mixins.Loadable],{destructor:function(){this._loadingTimer&&this._loadingTimer.cancel()},bindUI:function(){r.superclass.bindUI.call(this),this._bindModels(),this.after("modelsChange",function(){this._bindModels(),this.syncUI()},this)},syncUI:function(){r.superclass.syncUI.call(this),this.get("loading")?this._renderLoadingState():this._renderLoadedState()},_bindModels:function(){var n=this.get("models");this._registerEvent([n.after("add",function(s){n.size()===1&&this._empty(),this._addWidgetForModel(s.model)},this),n.after("remove",function(s){this._removeWidgetForModel(s.model),n.isEmpty()&&this._renderEmptyState()},this),n.after("reset",this._renderLoadedState,this)])},_renderLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._loadingTimer=e.later(500,this,function(){this._empty(),new e.Squarespace.Spinner({render:this.get("contentBox"),size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._empty();var n=this.get("models");n.isEmpty()?this._renderEmptyState():n.each(this._addWidgetForModel,this)},_renderEmptyState:function(){var n=this.get("emptyStateIconSrc"),s=this.get("strings.modelName")+"s",a=e.Node.create('<div class="no-models"></div>');e.Lang.isValue(n)&&n!==""&&a.append('<img class="icon large" src="'+n+'" />'),a.append('<div class="no-models-text">'+this.getEmptyStateMessage(s)+"</div>"),this.get("contentBox").append(a)},getEmptyStateMessage:function(n){return(0,l.t)("There are no {modelText}.",{modelText:n},{project:"scripts-v6.widgets"})},_empty:function(){var n=this.removeAll();n.each(function(s){s.destroy()}),this._childrenContainer.empty()},_addWidgetForModel:function(n){var s=this.get("models").indexOf(n);this.add({model:n},s)},_removeWidgetForModel:function(n){var s,a=this.some(function(i){if(i.get("model")===n)return s=i,!0});a&&s.destroy()}},{CSS_PREFIX:"sqs-model-list",ATTRS:{models:{valueFn:function(){return new e.Squarespace.Models.ModelList},validator:e.Squarespace.AttrValidators.isInstanceOf(e.Squarespace.Models.ModelList)},emptyStateIconSrc:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},loadable:{getter:function(){return this.get("models")},readOnly:!0},strings:{value:{modelName:"model"},validator:function(n){return e.Lang.isObject(n)?e.Object.hasKey(n,"modelName")?!0:(console.error('ModelList: Invalid "strings" attribute. Must have key "modelName".'),!1):(console.error('ModelList: Invalid "strings" attribute. Must be an object.'),!1)},writeOnce:"initOnly"},defaultChildType:{value:e.Squarespace.Widgets.Model,writeOnce:"initOnly"}}})},"1.0",{requires:["base","event-custom","squarespace-attr-validators","squarespace-mixins-loadable","squarespace-models-model-list","squarespace-spinner","squarespace-ss-widget","squarespace-widgets-model","widget-parent"]}),YUI.add("squarespace-widgets-recycle-bin-content-item-item-view",function(e){e.namespace("Squarespace.Widgets.RecycleBin");var r=e.Squarespace.Widgets.RecycleBin.ContentItemItemView=e.Base.create("RecycleBinContentItemItem",e.Squarespace.Widgets.RecycleBin.ItemView,[],{renderUI:function(){r.superclass.renderUI.call(this),this.get("boundingBox").toggleClass("previewable",this.get("previewable"))},bindUI:function(){r.superclass.bindUI.call(this),this.on("*:plainClicked",function(n){this._handleActionClick("preview")},this)}},{CSS_PREFIX:"sqs-recycle-bin-content-item-item",ATTRS:{itemType:{value:"item",writeOnce:"initOnly"},strings:{value:{typeName:"recycle-bin-item",confirm:{title:(0,l.t)("Restore Item",null,{project:"scripts-v6.widgets"}),message:(0,l.t)("Are you sure you wish to restore this item?",null,{project:"scripts-v6.widgets"}),button:(0,l.t)("Restore",null,{project:"scripts-v6.widgets"})}}},previewable:{value:!0}}})},"1.0",{requires:["squarespace-settings-recycle-bin-utils","squarespace-widgets-confirmation","squarespace-widgets-recycle-bin-item-view","squarespace-widgets-recycle-bin-item-view-template"]}),YUI.add("squarespace-widgets-recycle-bin-item-view",function(e){e.namespace("Squarespace.Widgets.RecycleBin"),e.Squarespace.Widgets.RecycleBin.ItemView=e.Base.create("RecycleBinItem",e.Squarespace.Widgets.List.BaseItem,[],{},{CSS_PREFIX:"sqs-recycle-bin-item",HANDLEBARS_TEMPLATE:"widgets-recycle-bin-item-view.html",ATTRS:{buttonList:{value:[{key:"restore",label:(0,l.t)("Restore",null,{project:"scripts-v6.widgets"})}]},strings:{value:{typeName:"recycle-bin-item"}},previewable:{validator:e.Squarespace.AttrValidators.isBoolean,value:!1},model:{},item:{getter:function(){return this.get("model")}}}})},"1.0",{requires:["squarespace-attr-validators","squarespace-content-collection-utils","squarespace-settings-recycle-bin-utils","squarespace-widgets-confirmation","squarespace-widgets-list-base-item-view"]});var Tb=t(745455),Ni=t(461761),Ze=t.n(Ni),Ri=t(437951),pe=t.n(Ri),$e=t(681328);YUI.add("squarespace-widgets-recycle-bin-content-collection-item-view",function(e){e.namespace("Squarespace.Widgets.RecycleBin");var r=e.Squarespace.Widgets.RecycleBin.ContentCollectionItemView=e.Base.create("RecycleBinContentCollectionItem",e.Squarespace.Widgets.RecycleBin.ItemView,[],{_bindClickSelectableEvents:function(){this.get("boundingBox").on(["contextmenu","click"],function(n){n.halt()})},_getHBTemplateContext:function(){var n=this.get("item");n.set("typeName",this._findTypeNameByCollection(n));var s=Ze()(window.Static,"SQUARESPACE_CONTEXT.website.timeZone");return e.merge(this.get("item").toJSON(),{title:e.Escape.html(n.get("title")),icon:e.Squarespace.ContentCollectionUtils.getIconClassNames(n),formattedUpdatedOnDate:(0,l.t)("Deleted on {date}",{date:(0,l.p6)({date:n.get("updatedOn"),zoneId:s},{date:"long"})},{project:"scripts-v6.widgets"})})},_findTypeNameByCollection:function(n){var s=$e.default.getState().collectionConfigs,a=n.get("ordering"),i=n.get("type"),o=n.get("folder"),d=n.get("index"),p=e.Object.keys(s);return e.Array.find(p,function(y){var A=s[y];return i===pe().PRODUCTS&&A.collectionType===pe().PRODUCTS||o&&A.folder||d&&A.index||a===A.ordering&&i===A.collectionType&&o===!!A.folder})},_fitText:function(){var n=this.get("contentBox").one(".title");n&&n.setStyle("width","auto"),r.superclass._fitText.apply(this,arguments),n&&n.setStyle("width",null)}},{CSS_PREFIX:"sqs-recycle-bin-content-collection-item",ATTRS:{itemType:{value:"collection",writeOnce:"initOnly"},strings:{value:{confirm:{title:(0,l.t)("Restore Collection",null,{project:"scripts-v6.widgets"}),message:(0,l.t)("Are you sure you wish to restore this collection?",null,{project:"scripts-v6.widgets"}),button:(0,l.t)("Restore",null,{project:"scripts-v6.widgets"})}}}}})},"1.0",{requires:["squarespace-content-collection-utils","squarespace-settings-recycle-bin-utils","squarespace-widgets-confirmation","squarespace-widgets-recycle-bin-item-view"]});var xi=t(976003),Ss=t.n(xi),Tn=t(413019),An=t(69637),re=t(387582),rt=t(179593),lt=t(256101),Ve=t(810965),Mi=t(989250);YUI.add("squarespace-navigation-bar",function(e){e.namespace("Squarespace.Navigation");var r="link",n=15,s=e.Squarespace.Navigation.Bar=e.Base.create("Bar",e.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._maUnsubscribe=Ve.Z.listen(e.bind(function(a){Ss()(this._prevMemberAreasHomepages,a.memberAreasHomepages)||(this._prevMemberAreasHomepages=a.memberAreasHomepages,e.Squarespace.Navigation.Events.fire("memberarea:homepage",{}))},this))},destructor:function(){e.Array.invoke(this.get("navigationViews"),"destroy",!0),this.get("dragAndDrop").destroy(!0),this.get("dialogHelper").destroy(!0),this._maUnsubscribe()},appendDemoStyle:function(){if(!document.getElementById("navigation-bar-demo-text")){var a=document.createElement("style");a.id="navigation-bar-demo-text",a.innerHTML="."+this.getClassName()+" .sqs-navigation-item-demo>div>.item-wrapper .title:after { content: '"+(0,l.t)("Demo",null,{project:"scripts-v6.navigation",notes:"Tiny [DEMO] tag after page title on demo pages"})+"'; }",document.head.appendChild(a)}},renderUI:function(){s.superclass.renderUI.call(this),this.appendDemoStyle();var a=this.get("contentBox"),i=this.get("navigationViews");e.Array.invoke(i,"render",a)},bindUI:function(){var a=e.Squarespace.Navigation.Events;this._registerEvent(a.on(["item:new","item:delete","itemList:delete"],this.syncUI,this),a.on("item:add",this._handleItemAddEvent,this),a.after("itemList:dd",this._storeNavigations,this),a.after("collection:create",function(i){var o=i.type;this._addCollection(o,i.modelList,i.opts,i.layoutKey,i.layoutTitle)},this),a.after("memberarea:create",function(i){this._addMemberArea(i.modelList,i.memberArea)},this)),a.after("memberarea:homepage:delete",function(i){le.Z.removeMemberAreasHomepage(i),this.syncUI()},this),this._bindDragAndDrop()},_storeNavigations:function(a){var i=a.sourceList.get("modelList").getTemplateNavigation(),o;a.targetList.get("modelList")._templateNavigation?o=a.targetList.get("modelList").getTemplateNavigation():o=a.targetList.get("modelList").getNavigationItemList().getTemplateNavigation();var d=[];if(d.push(o),i!==o){d.push(i);var p=a.itemView.get("parent");p&&p.memberAreaId&&le.Z.removeMemberAreasHomepage(a.itemView.get("name"))}var y=a.targetList.get("navigation"),A=a.itemView.get("collection"),P=y.get("name")===re.Z.memberAreaNavigationName,U=o.get("name")===re.Z.memberAreaNavigationName,K=P||U,O=K&&A&&e.Squarespace.ContentCollectionUtils.isDemoCollectionId(A.get("id")),q=O?A.cloneToNewCollection():e.Promise(function(J){J()});q.then(function(){var J=new e.Parallel;d.forEach(function(X){X.get("itemList").save({name:X.get("name")},J.add())}),J.done(function(){e.Squarespace.Navigation.Events.fire("itemList:dd-saved",{itemView:a.itemView,itemSourceList:a.sourceList,itemTargetList:a.targetList,itemsSort:a.targetList,updateStyle:a.updateStyle})})})},_bindDragAndDrop:function(){this.get("isLocked")||this.get("dragAndDrop").bind()},syncUI:function(){var a=this.get("boundingBox").all(".sqs-navigation-item").size(),i=this.get("isLocked");this.get("boundingBox").toggleClass("many-items",a>n).toggleClass(this.getClassName("locked"),i)},_addCollection:function(a,i,o,d,p){if(a===r){var y=i&&i._templateNavigation&&i._templateNavigation.get("name");(0,lt.oq)({typeName:a,productSection:y}),this._addLink(i,o);return}if(a.externalServiceProviderType){this._addConnectedAccountLink(a.externalServiceProviderType,i,o);return}this._addGeneric(a,i,o,d,p)},_addMemberArea:function(a,i){var o=a.add({memberAreaId:i.id,title:i.name,children:[]},{index:0}),d=o.get("children");d.setTemplateNavigation(a.getTemplateNavigation()),a.save()},_addLink:function(a,i){a.add({externalLink:{newWindow:!1,title:i.title||"",url:i.url||""}},i),a.save()},_addConnectedAccountLink:function(a,i,o){var d=rt.Z[a];i.add({externalLink:{newWindow:!1,title:d.defaultLinkTitle,externalServiceProviderType:a}},o),i.save()},_addGeneric:function(a,i,o,d,p){(0,Tn.B1)("add-page",{tracer:An.Z});var y=$e.default.getCollectionConfig(a),A=(0,l.t)("New {title}",{title:y.title},{project:"scripts-v6.navigation",notes:"Deprecated new title. Left for compatibility with old untranslated templates."}),P=y.newTitle||A,U=e.merge(y,{typeName:a,type:y.collectionType,navigationTitle:P,title:P,enabled:!0}),K=e.bind(function(O){e.Squarespace.Navigation.Events.fire("create:newPage",{collectionId:O.id,layoutKey:d}),this._addItemToModelList(O,i,o),(0,Tn.L8)("add-page",{tracer:An.Z})},this);if(Ee.Z.canHandleCollection(U))return Ee.Z.createCollection(a).then((function(O){var q=i&&i._templateNavigation&&i._templateNavigation.get("name");(0,lt.oq)({typeName:O.typeName,id:O.id,productSection:q,layoutKey:d,layoutTitle:p,collectionType:(0,Mi.j)(O)}),this.get("collectionCache").add(new e.Squarespace.Models.ContentCollection(O)),K(O)}).bind(this));this.get("collectionCache").create(U,e.bind(function(O,q){if(O){new e.Squarespace.SystemError((0,l.t)("Something Went Wrong",null,{project:"scripts-v6.navigation"}),O,"json").show();return}K(q)},this))},_handleItemAddEvent:function(a){this._addItemToModelList(a.item,a.modelList,a.opts)},_addItemToModelList:function(a,i,o){var d=i.add({collectionId:a.id,typeName:a.typeName,urlId:a.urlId,title:a.navigationTitle,folder:a.folder,enabled:a.enabled,collectionType:a.type},o);if(d.isFolder()){var p=d.get("children");p.setTemplateNavigation(i.getTemplateNavigation()),o.addChildren&&o.addChildren.forEach(function(y){p.add(y)}),p.save()}i.save()}},{createItemList:function(a,i){return new e.Squarespace.Navigation.ItemList({"strings.testAttr":a.get("testAttr"),"strings.title":a.get("title"),"strings.description":a.get("description"),"strings.emptyMessage":a.get("emptyMessage"),"strings.addText":(0,l.t)("Add Page",null,{project:"scripts-v6.navigation"}),"strings.className":a.get("className"),navigation:a,showFooter:a.get("showFooter"),showHeader:!0,isLocked:i})},CSS_PREFIX:"sqs-navigation-bar",ATTRS:{isLocked:{valueFn:function(){return!e.Squarespace.UtilAuthenticated.userHasAccessPermission(fs().CONFIG_CHANGE_STRUCTURE)}},navigations:{valueFn:function(){return e.Squarespace.Singletons.TemplateNavigationList},readOnly:!0,writeOnce:!0},navigationViews:{valueFn:function(){var a=this.get("isLocked"),i=this.get("navigations");if(!i)throw new Error("No navigations found in the TemplateNavigationList");return i.map(function(o){return s.createItemList(o,a)})},validator:e.Squarespace.AttrValidators.isArray},template:{},collectionCache:{},dialogHelper:{valueFn:function(){return new e.Squarespace.Navigation.DialogHelper({collectionCache:this.get("collectionCache")})}},dragAndDrop:{valueFn:function(){return new e.Squarespace.Navigation.DragAndDrop({node:this.get("boundingBox"),navigationViews:this.get("navigationViews")})}}}})},"1.0",{requires:["array-invoke","base","squarespace-attr-validators","squarespace-models-connected-accounts","squarespace-models-content-collection","squarespace-models-template-navigation-list","squarespace-navigation-dialog-helper","squarespace-navigation-drag-and-drop","squarespace-navigation-events","squarespace-navigation-item-list","squarespace-navigation-stacked-index-list","squarespace-ss-widget","squarespace-util-authenticated"]});var Oi=t(815211),Pn=t.n(Oi),ct=t(967361),Bi=t(935154),Ge=t.n(Bi),Gt=t(834105),Cs=t(659519),bn=t(297314),ys=t(941254),Re=t(511556);const Ui=e=>{const r=e?"add-section":"add_page";ys.Z.track({actor:Re.aR.USER,action:Re.om.CLICK,object_type:"button",object_identifier:r,product_area:Re.q5,product_page:"add-page-dialog"})},Ln=(e,r)=>{ys.Z.track({actor:Re.aR.USER,action:Re.om.CLICK,object_type:"button",object_identifier:"page_layout_type",product_area:Re.q5,product_page:"add-page-dialog",layout_type:r})},Fi=e=>{ys.Z.track({actor:Re.aR.USER,action:Re.om.CLICK,object_type:"button",object_identifier:"page_layout_option",product_area:Re.q5,product_page:"add-page-dialog-starter-layout",starter_layout_key:e})};var Ht=t(912289),qt=t(657300),ji=t(224954),wi=t.n(ji),be=t(161767),V=t(784874),Wi=t(795478),x=t.n(Wi),Zi=t(734526),Vi=t(455842),dt=t.n(Vi),Gi=t(845076),ue=t.n(Gi),Hi=t(877137),Dn=t.n(Hi);const Nn=e=>{const{floatDir:r,hSize:n,vSize:s,className:a,children:i,innerHTML:o}=e,d=ue()(a,Dn().container,{[`sqs-col-${n}`]:n,[`vsize-${s}`]:s,[Dn()[r]]:r}),p=o?{__html:o}:null;return I.createElement("div",{className:d,dangerouslySetInnerHTML:p},o?void 0:i)};Nn.propTypes={innerHTML:x().string,className:x().string,floatDir:x().oneOf(["left","right"]),hSize:x().number,vSize:x().number};const ut=Nn;var qi=t(34685),Es=t.n(qi);const Ki=()=>I.createElement(ut,null,I.createElement("div",{className:Es().title}),I.createElement("div",{className:Es().body}),I.createElement("div",{className:Es().button}));var zi=t(750202),Rt=t.n(zi);const Rn=e=>{const{blockName:r,quote:n,thumbnails:s,aspectRatio:a}=e,i=ue()(Rt().container,Rt()[r],{hasBottomMargin:s}),o=ue()(Rt()[r],Rt().icon),d={};return a&&(d.paddingTop=`${a}%`),I.createElement(ut,{className:i},I.createElement("div",{className:Rt().content,style:d},n),I.createElement("div",{className:o}))};Rn.propTypes={aspectRatio:x().number,blockName:x().string,quote:x().string,thumbnails:x().bool};const ki=Rn;var Xi=t(100526),Kt=t.n(Xi);const Ji=()=>I.createElement(ut,{className:Kt().container},I.createElement("div",{className:Kt().button}),I.createElement("div",{className:Kt().button}),I.createElement("div",{className:Kt().button}));var Qi=t(24391),$i=t.n(Qi);const xn=e=>{let{vSize:r=1}=e;return I.createElement(ut,{className:$i().container,vSize:r})};xn.propTypes={vSize:x().number};const Yi=xn;var _i=t(986039),eo=t.n(_i);const Mn=e=>{let{html:r=""}=e,n=r.replace(/<\/span><\/p>\s*<p><span>/g,"");if(r.indexOf("h1")===-1){const s='<span style="width:1px; height:1px; display: inline-block; background-color: black"></span>';n=r.split("").map(a=>s).join("")}return I.createElement(ut,{className:eo().container,innerHTML:n})};Mn.propTypes={html:x().string.isRequired};const to=Mn,so=new Map([[to,[V.Z.MARKDOWN,V.Z.HTML]],[Yi,[V.Z.HORIZONTAL_RULE,V.Z.SPACER]],[Ki,[V.Z.FORM]],[ki,[V.Z.GALLERY,V.Z.MAP,V.Z.MENU,V.Z.IMAGE,V.Z.QUOTE,V.Z.ACUITY]],[Ji,[V.Z.SOCIAL_ACCOUNT_LINKS,V.Z.SOCIAL_ACCOUNT_LINKS_V2]]]),no=e=>{for(const[r,n]of so)if(dt()(n,e))return r;return ut};var ao=t(45466),Is=t.n(ao);function zt(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}const{BlockTypeNames:io}=Zi.Z;var oo;class On extends(oo=I.Component){render(){const r=this.props.rows.map((n,s)=>this.renderRow(n,s));return I.createElement("div",{className:Is().layout},r)}constructor(...r){super(...r),zt(this,"renderBlock",(n,s)=>{const{type:a,value:i}=n,o=no(a),d=io[a];return I.createElement(o,{key:`block-${s}`,...i,blockName:d})}),zt(this,"renderColumn",(n,s)=>I.createElement("div",{key:`col-${s}`,className:`${Is().column} sqs-col-${n.span}`},n.rows&&n.rows.map((a,i)=>this.renderRow(a,i)),n.blocks&&n.blocks.map((a,i)=>this.renderBlock(a,i)))),zt(this,"renderRow",(n,s)=>{const a=n.columns.map((i,o)=>this.renderColumn(i,o));return I.createElement("div",{key:`row-${s}`,className:Is().row},a)})}}zt(On,"propTypes",{rows:x().array.isRequired,type:x().string,value:x().object});const ro=On;var lo=t(130399),co=t.n(lo),uo=t(737012),go=t.n(uo),po=t(434508),mo=t.n(po),ho=t(540039),kt=t.n(ho),vo=t(830914),Bn=t.n(vo),fo=t(853374),Ts=t.n(fo),So=t(874918),Co=t(326096),yo=t.n(Co),Eo=t(446354),Io=t.n(Eo),To=t(443020),Ao=t.n(To),Po=t(5921),bo=t.n(Po),Lo=t(449603),ve=t.n(Lo);const As=["Lorem ipsum dolor sit amet, consectetur adipiscing elit.","Suspendisse nec congue purus.","Integer tempus, elit in laoreet posuere, lectus neque blandit dui, et placerat urna diam mattis orci.","Donec ac fringilla turpis.","Mauris id fermentum nulla.","Aenean eu justo sed elit dignissim aliquam.","In sit amet felis malesuada, feugiat purus eget, varius mi.","Sed a ligula quis sapien lacinia egestas.","Nullam sit amet nisi condimentum erat iaculis auctor.","Nulla lectus ante, consequat et ex eget, feugiat tincidunt metus.","Donec eu est non lacus lacinia semper.","Quisque congue porttitor ullamcorper.","Nulla eu pretium massa.","Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae.","Vivamus a ante congue, porta nunc nec, hendrerit turpis.","Mauris egestas at nibh nec finibus.","Maecenas non leo laoreet, condimentum lorem nec, vulputate massa.","Aliquam bibendum, turpis eu mattis iaculis, ex lorem mollis sem, ut sollicitudin risus orci quis tellus.","Phasellus sodales massa malesuada tellus fringilla, nec bibendum tellus blandit.","Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.","Fusce at massa nec sapien auctor gravida in in tellus.","Vivamus sit amet semper lacus, in mollis libero.","Donec eget risus diam."],Do=()=>As[0],No=()=>As[Math.floor(Math.random()*As.length)],Un=["Ann","Anne","Anthony","Arthur","Bonnie","Carlos","Catherine","Christina","Daniel","Diana","Donald","Donna","Elizabeth","Emily","Fred","Gary","Gloria","Harold","Jacqueline","Janet","Janice","Jean","Jennifer","Jeremy","John","Jose","Joshua","Judith","Katherine","Kimberly","Laura","Linda","Louis","Margaret","Mark","Mary","Michael","Nicole","Peter","Phyllis","Robert","Rose","Roy","Sara","Sean","Shirley","Terry","Todd","Wayne","William"],Fn=["Aiko","Alexander","Amirpour","Bastien","Bennett","Brown","Campbell","Cho","Clark","Davis","Dominga","Eckart","Edwards","Garcia","Gonzalez","Green","Gupta","Hernandez","Hill","Horvat","Howard","James","Jenkins","Johnson","Jones","Kaufmann","Lee","Long","Liu","Manalad","Martinez","Mitchell","Muller","Nelson","Nowak","Ojeda","Peterson","Phillips","Price","Qillaq","Rhee","Riccardo","Roberts","Rogers","Sanchez","Sato","Scott","Sharma","Simmons","Smith","Sung","Takahashi","Tamaya","Torres","Turner","Ward","Wilson","Williams","Yang","Zhao"],Ro=()=>Un[Math.floor(Math.random()*Un.length)],xo=()=>Fn[Math.floor(Math.random()*Fn.length)],Ps=["left","center","right","justify"],jn=[4,7],bs=[(0,l.t)("Street Address",null,{project:"src.shared"}),(0,l.t)("City, State, Postal Code",null,{project:"src.shared"})],wn={vSize:12,style:2,labels:!0,terrain:!1,controls:!1},Mo={location:{mapLat:40.7207559,mapLng:-74.0007613,mapZoom:12},...wn};class Oo{getLoremText(){return No()}getCount(r){return Array.isArray(r)&&(r=Ao()(...r)),r}sentence(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return ve()(this.getCount(r),this.getLoremText).join(" ")}word(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.sentence().split(/\s/,this.getCount(r));return n&&(s=s.map(bo())),s.join(" ").replace(/,/g,"")}name(){return Ro()+" "+xo()}address(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bs,n=arguments.length>1?arguments[1]:void 0;return!n&&typeof r=="string"&&(n=r,r=bs),(!r||r.length===0)&&(r=bs),n&&(r=[n].concat(r)),r.join("<br/>")}mapAddress(r){return r?{location:r,...wn}:Mo}html(r,n,s){let{align:a,...i}=s;if(a){const d=`text-align: ${a}`;i.style=i.style?`${i.style} ${d}`:d}const o=Object.keys(i).reduce((d,p)=>(i[p]&&(d+=` ${p}="${i[p]}"`),d),"");return`<${r}${o}>${n}</${r}>`}paragraphs(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jn,s=arguments.length>2?arguments[2]:void 0;return!s&&typeof n=="string"&&dt()(Ps,n)&&(s=n,n=jn),ve()(this.getCount(r),a=>{const i=this.getCount(n);return this.html("p",this.sentence(i),{align:s})}).join("")}paragraph(r,n){return!n&&r&&dt()(Ps,r)&&(n=r,r=null),typeof r!="string"&&(r=this.sentence([1,3])),this.html("p",r,{align:n})}header(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"h3",n=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;return!s&&n&&dt()(Ps,n)&&(s=n,n=null),typeof n!="string"&&(n=this.sentence().slice(0,-1)),this.html(r,n,{align:s})}cleanHTML(r){return typeof r=="string"?r:""}exportMethods(){const r=["address","cleanHTML","header","html","mapAddress","name","paragraph","paragraphs","sentence","word"];return Io()(r,r.map(n=>this[n].bind(this)))}}const Wn=Oo;var Bo=t(726184),Zn=t.n(Bo),Uo=t(195593),Fo=t.n(Uo);const jo=Do();class wo extends Wn{getLoremText(){return jo}getCount(r){return Fo()(r)?r[0]:r}html(r,n,s){let{align:a,...i}=s;r==="p"&&(n="<span>"+n+"</span>"),a&&(i.class=ue()(i.class,`text-align-${a}`));const o=Object.keys(i).reduce((d,p)=>(i[p]&&(d+=` ${p}="${i[p]}"`),d),"");return`<${r}${o}>${n}</${r}>`}cleanHTML(r){if(r=super.cleanHTML(r),r){const n=document.createElement("div");n.innerHTML=r,["div","p","ul","ol","blockquote"].forEach(this.cleanParagraph.bind(this,n)),["h1","h2","h3"].forEach(this.cleanHeader.bind(this,n)),r=n.innerHTML}return r}cleanParagraph(r,n){Zn()(r.getElementsByTagName(n),s=>{const a=s.className?` class="${s.className}"`:"";s.outerHTML=`<p${a}><span>${s.textContent}</span></p>`})}cleanHeader(r,n){Zn()(r.getElementsByTagName(n),s=>{s.outerHTML=`<${n}>${s.textContent}</${n}>`})}}const Wo=wo,Vn={[be.Z.DEFAULT]:new Wn().exportMethods(),[be.Z.ICON]:new Wo().exportMethods()};var Gn=t(540100);const Zo=Object.keys(be.Z).map(e=>be.Z[e]);class Vo{getLabel(){return""}isForm(){return!1}getKeywords(){return[]}generateJSON(){return this.layoutJSONCreator.EmptyLayout()}generate(r){let{isMarkdownMode:n,contentGeneratorType:s,location:a,mapLocation:i}=r;return yo()(n)&&(this.isMarkdownMode=n),Zo.indexOf(s)>-1&&(this.contentGeneratorType=s,this.contentGenerator=Vn[s]),a&&(this.location=a),i&&(this.mapLocation=i),this.generateJSON()}exportMethods(){return{isForm:this.isForm(),keywords:this.getKeywords(),label:this.getLabel(),generate:this.generate.bind(this)}}constructor(){this.isMarkdownMode=!1,this.contentGeneratorType=be.Z.DEFAULT,this.contentGenerator=Vn[be.Z.DEFAULT],this.layoutJSONCreator={...Gn,TextBlock:r=>{const{MarkdownBlock:n,HTMLBlock:s}=Gn;return typeof r=="function"&&(r=r(this.contentGenerator)),this.isMarkdownMode&&this.contentGeneratorType!==be.Z.ICON&&r.search(/\s+class=/)===-1?n((0,So.$)(r),r):s(r)}}}}const Ie=Vo,Hn=[V.Z.HTML,V.Z.MARKDOWN];class Db extends Ie{getKeywords(){return[(0,l.t)("custom",null,{project:"src.shared"})]}generateJSON(){const r=this.layoutJSON,n=mo()(r.rows,s=>!this.isRowEmpty(s));return{rows:Ts()(n,this.convertRow,[],this),columns:r.columns||12}}isRowEmpty(r){let{columns:n=[]}=r;if(n.length===1){const s=n[0];return(!s.rows||s.rows.length===0)&&(!s.blocks||s.blocks.length===0)}return n.length===0}convertRow(r,n){const s=r[r.length-1];if(this.contentGeneratorType===be.Z.ICON&&s&&this.compareRow(n,s)){r.push(s);return}r.push({columns:Ts()(n.columns,this.convertColumn,[],this)})}convertColumn(r,n){const s=r[r.length-1];if(this.contentGeneratorType===be.Z.ICON&&s&&this.compareColumn(n,s)){r.push(s);return}r.push({span:typeof n.span=="number"?n.span:12,rows:n.rows&&Ts()(n.rows,this.convertRow,[],this),blocks:n.blocks&&n.blocks.map(this.convertBlock,this)})}convertBlock(r){let{type:n,value:s}=r;switch(n){case V.Z.HTML:case V.Z.MARKDOWN:return this.convertTextBlock({type:n,value:s});case V.Z.IMAGE:s=Object.assign({},s,{imageId:void 0});break;case V.Z.GALLERY:s=Object.assign({},s,{collectionId:"dummyCollection",transientGalleryId:void 0,existingGalleryId:void 0,methodOption:"transient"});break;default:}return{type:n,value:s}}convertTextBlock(r){let{type:n,value:s}=r,a="";return s&&s.html&&(a=this.contentGenerator.cleanHTML(s.html)),this.layoutJSONCreator.TextBlock(a)}compareRow(r,n){return Bn()(r.columns,n.columns,(s,a)=>{if(kt()(s)&&kt()(a))return this.compareColumn(s,a)})}compareColumn(r,n){return r.span!==n.span?!1:r.blocks&&n.blocks?Bn()(r.blocks,n.blocks,(s,a)=>{if(kt()(s)&&kt()(a))return this.compareBlock(s,a)}):r.rows&&n.rows?this.compareRow(r.rows,n.rows):!1}compareBlock(r,n){return r.type===n.type||dt()(Hn,r.type)&&dt()(Hn,n.type)}constructor(r){super(),this.layoutJSON=r}}const Nb=null;class Go extends Ie{getLabel(){return(0,l.t)("Blank",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,TextBlock:a}=this.layoutJSONCreator;return r(n(s(12,a("<p> </p>"))))}}const Ho=Go,Ls={h1:(0,l.t)("About",null,{project:"src.shared"}),h3:(0,l.t)("It all started when\u2026",null,{project:"src.shared"})};class Ds extends Ie{getKeywords(){return[(0,l.t)("About",null,{project:"src.shared"})]}}class qo extends Ds{getLabel(){return(0,l.t)("Banner",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i,ImageBlock:o}=this.layoutJSONCreator,{header:d,paragraphs:p}=this.contentGenerator;return r(n(s(12,i(d("h1",Ls.h1,"center")),o(60))),n(s(3,a(V.Z.SPACER)),s(6,a(V.Z.SPACER),i(d("h3",Ls.h3)+p(1)),a(V.Z.SPACER),a(V.Z.SOCIAL_ACCOUNT_LINKS_V2)),s(3,a(V.Z.SPACER))))}}class Ko extends Ds{getLabel(){return(0,l.t)("Vertical",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i,ImageBlock:o}=this.layoutJSONCreator,{header:d,paragraphs:p}=this.contentGenerator;return r(n(s(3,a(V.Z.SPACER)),s(6,o(100),a(V.Z.SPACER),i(d("h3",Ls.h3)+p(1)),a(V.Z.SPACER),a(V.Z.SOCIAL_ACCOUNT_LINKS_V2)),s(3,a(V.Z.SPACER))))}}class zo extends Ds{getLabel(){return(0,l.t)("Horizontal",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,TextBlock:a,ImageBlock:i}=this.layoutJSONCreator,{paragraphs:o}=this.contentGenerator;return r(n(s(6,i(100)),s(6,a(o(1)))))}}const ko=[qo,Ko,zo],gt={map:(0,l.t)("Our Office",null,{project:"src.shared"}),form:(0,l.t)("Contact Us",null,{project:"src.shared"}),formDesc:(0,l.t)("Please complete the form below",null,{project:"src.shared"})},qn=(e,r)=>({value:e(r)});class Ns extends Ie{isForm(){return!0}getKeywords(){return[(0,l.t)("Contact",null,{project:"src.shared"})]}}class Xo extends Ns{getLabel(){return(0,l.t)("Large Map",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i}=this.layoutJSONCreator,{header:o,paragraph:d,paragraphs:p,address:y,mapAddress:A}=this.contentGenerator;return r(n(s(4,i(o("h1",gt.map)),i(d(y(this.location)))),s(8,{...a(V.Z.MAP),...qn(A,this.mapLocation)})),n(s(12,a(V.Z.SPACER))),n(s(4,i(o("h2",gt.form)+p(1,2))),s(8,a(V.Z.FORM))))}}class Jo extends Ns{getLabel(){return(0,l.t)("Small Map",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i}=this.layoutJSONCreator,{header:o,paragraph:d,address:p,mapAddress:y}=this.contentGenerator;return r(n(s(8,i(o("h1",gt.form)),a(V.Z.SPACER),a(V.Z.FORM)),s(4,i(o("h3",gt.map)+d(p(this.location))),{...a(V.Z.MAP),...qn(y,this.mapLocation)})))}}class Qo extends Ns{getLabel(){return(0,l.t)("No Map",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i}=this.layoutJSONCreator,{header:o}=this.contentGenerator;return r(n(s(2,a(V.Z.SPACER)),s(8,i(o("h1",gt.form)),a(V.Z.SPACER),i(o("h3",gt.formDesc)),a(V.Z.FORM)),s(2,a(V.Z.SPACER))))}}const $o=[Xo,Jo,Qo],Rs=(e,r)=>{let{header:n}=e;return n("h1",(0,l.t)("Detail {label}",{label:r},{project:"src.shared"}))},pt=(e,r,n,s)=>{let{header:a,paragraphs:i}=e;return a("h3",(0,l.t)("Detail {label}",{label:r},{project:"src.shared"}))+i(n,s)};class xs extends Ie{getKeywords(){return[(0,l.t)("Details",null,{project:"src.shared"})]}}class Yo extends xs{getLabel(){return(0,l.t)("Text",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i}=this.layoutJSONCreator,{paragraphs:o}=this.contentGenerator;return r(n(s(3,i(d=>Rs(d,"1",1,3))),s(9,i(o(1)))),n(s(12,a(V.Z.HORIZONTAL_RULE))),n(s(3,i(d=>Rs(d,"2",1,3))),s(9,i(o(1)))),n(s(12,a(V.Z.HORIZONTAL_RULE))),n(s(3,i(d=>Rs(d,"3",1,3))),s(9,i(o(1)))))}}class _o extends xs{getLabel(){return(0,l.t)("Banner",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i,ImageBlock:o}=this.layoutJSONCreator;return r(n(s(1,a(V.Z.SPACER)),s(10,n(s(10,o(30))),n(s(5,i(d=>pt(d,"1",1,2))),s(5,i(d=>pt(d,"2",1,2)))),n(s(10,a(V.Z.SPACER),o(30))),n(s(5,i(d=>pt(d,"3",1,2))),s(5,i(d=>pt(d,"4",1,2))))),s(1,a(V.Z.SPACER))))}}class er extends xs{getLabel(){return(0,l.t)("Thumbnail",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,TextBlock:a,ImageBlock:i}=this.layoutJSONCreator;return r(n(s(6,i(75)),s(6,i(75))),n(s(12,a(o=>pt(o,"1",1,4)))),n(s(6,i(75)),s(6,i(75))),n(s(12,a(o=>pt(o,"2",1,4)))))}}const tr=[Yo,_o,er],Xt=(e,r)=>{let{header:n,paragraphs:s}=e;return n("h1",(0,l.t)("Features Overview",null,{project:"src.shared"}),"center")},mt=(e,r,n)=>{let{header:s,paragraphs:a}=e;return s("h3",(0,l.t)("Feature {featureCount}",{featureCount:r},{project:"src.shared"}))+a(1,n)};class Jt extends Ie{getKeywords(){return[(0,l.t)("Features",null,{project:"src.shared"})]}}class sr extends Jt{getLabel(){return(0,l.t)("Horizontal",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,ButtonBlock:i,TextBlock:o,ImageBlock:d}=this.layoutJSONCreator;return r(n(s(1,a(V.Z.SPACER)),s(10,o(Xt),a(V.Z.SPACER)),s(1,a(V.Z.SPACER))),n(...ve()(3,p=>s(4,d(100),o(y=>mt(y,p+1,3)),i("small","left")))))}}class nr extends Jt{getLabel(){return(0,l.t)("Vertical",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,ButtonBlock:i,TextBlock:o,ImageBlock:d}=this.layoutJSONCreator;return r(n(s(1,a(V.Z.SPACER)),s(10,o(Xt),a(V.Z.SPACER)),s(1,a(V.Z.SPACER))),...ve()(5,p=>p%2?n(s(12,a(V.Z.SPACER))):n(s(4,d(100)),s(8,o(y=>mt(y,p/2+1,2)),i("small","left")))))}}class ar extends Jt{getLabel(){return(0,l.t)("Banner",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i,ImageBlock:o}=this.layoutJSONCreator;return r(n(s(12,i(d=>Xt(d,1)),a(V.Z.SPACER),o(50),i(d=>mt(d,1)))),n(s(6,o(75)),s(6,o(75))))}}class ir extends Jt{getLabel(){return(0,l.t)("Alternating",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i,ImageBlock:o}=this.layoutJSONCreator;return r(n(s(1,a(V.Z.SPACER)),s(10,i(Xt),a(V.Z.SPACER)),s(1,a(V.Z.SPACER))),n(s(4,o(100)),s(8,i(d=>mt(d,1,2)))),n(s(12,a(V.Z.HORIZONTAL_RULE))),n(s(8,i(d=>mt(d,2,2))),s(4,o(100))),n(s(12,a(V.Z.HORIZONTAL_RULE))),n(s(4,o(100)),s(8,i(d=>mt(d,3,2)))))}}const or=[sr,nr,ar,ir],Kn=[(0,l.t)("US",null,{project:"src.shared"}),(0,l.t)("Europe",null,{project:"src.shared"}),(0,l.t)("Asia",null,{project:"src.shared"}),(0,l.t)("AU / NZ",null,{project:"src.shared"})],rr=(0,l.t)(`Sandwiches
----------

Le Paysan
Smoked turkey, brie & apple chutney
$14

Soho Mediterranean
Hummus, grilled vegetables & halloumi cheese
$15

Bacon Steak
Steak, onions, bacon & cheddar
$18`,null,{project:"src.shared",notes:"oldKey: defaultMenu"}),lr=[{title:null,description:null,sections:[{title:(0,l.t)("Sandwiches",null,{project:"src.shared"}),description:null,items:[{title:(0,l.t)("Le Paysan",null,{project:"src.shared"}),description:(0,l.t)("Smoked turkey, brie & apple chutney",null,{project:"src.shared"}),variants:[{price:14,title:""}]},{title:(0,l.t)("Soho Mediterranean",null,{project:"src.shared"}),description:(0,l.t)("Hummus, grilled vegetables & halloumi cheese",null,{project:"src.shared"}),variants:[{price:15,title:""}]},{title:(0,l.t)("Bacon Steak",null,{project:"src.shared"}),description:(0,l.t)("Steak, onions, bacon & cheddar",null,{project:"src.shared"}),variants:[{price:18,title:""}]}]}]}];class cr extends Ie{getLabel(){return(0,l.t)("Locations",null,{project:"src.shared"})}getKeywords(){return[(0,l.t)("Other",null,{project:"src.shared"})]}generateJSON(){const{Layout:r,Row:n,Column:s,TextBlock:a}=this.layoutJSONCreator,{header:i,paragraph:o,address:d}=this.contentGenerator,p=Kn.length,y=12/p;return r(n(...ve()(p,A=>s(y,a(i("h1",Kn[A])+ve()(4,()=>o(d((0,l.t)("<strong>Store Name</strong>",null,{project:"src.shared"})))).join(""))))))}}class dr extends Ie{getLabel(){return(0,l.t)("Menu",null,{project:"src.shared"})}getKeywords(){return[(0,l.t)("Other",null,{project:"src.shared"})]}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i}=this.layoutJSONCreator,{header:o,paragraphs:d}=this.contentGenerator;return r(n(s(i(o("h1",(0,l.t)("Our Menu",null,{project:"src.shared"}),"center")+d(1,2,"center")),a(V.Z.HORIZONTAL_RULE),a(V.Z.MENU,{raw:rr,menus:lr,menuStyle:"simple",currencySymbol:"$"}),a(V.Z.HORIZONTAL_RULE))))}}class ur extends Ie{getLabel(){return(0,l.t)("Online Booking with Acuity",null,{project:"src.shared"})}getKeywords(){return[(0,l.t)("Other",null,{project:"src.shared"})]}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i}=this.layoutJSONCreator,{header:o,paragraphs:d}=this.contentGenerator;return r(n(s(12,i(o("h1",(0,l.t)("Book an Appointment",null,{project:"src.shared"}),"center")+d(1,2,"center")))),n(s(2,a(V.Z.SPACER)),s(8,a(V.Z.ACUITY)),s(2,a(V.Z.SPACER))))}}const gr=[cr,dr,ur];class Ms extends Ie{getKeywords(){return[(0,l.t)("Images",null,{project:"src.shared"})]}}class pr extends Ms{getLabel(){return(0,l.t)("Horizontal Masonry",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,ImageBlock:a}=this.layoutJSONCreator;return r(n(s(6,a(75)),s(6,a(75))),n(s(4,a(75)),s(4,a(75)),s(4,a(75))),n(s(6,a(75)),s(6,a(75))))}}class mr extends Ms{getLabel(){return(0,l.t)("Grid",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,ImageBlock:a}=this.layoutJSONCreator;return r(n(s(6,a(75)),s(6,a(75))),n(s(8,a(75)),s(4,a(75),a(75))),n(s(6,a(75)),s(6,a(75))))}}class hr extends Ms{getLabel(){return(0,l.t)("Vertical Masonry",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,ImageBlock:a}=this.layoutJSONCreator;return r(n(s(4,a(160),a(75)),s(4,a(75),a(160)),s(4,a(160),a(75))))}}const vr=[pr,mr,hr],Os=(e,r)=>{let{name:n,header:s,paragraphs:a}=e;return s("h3",n())+a(1,r)};class Qt extends Ie{getKeywords(){return[(0,l.t)("Team",null,{project:"src.shared"})]}}class fr extends Qt{getLabel(){return(0,l.t)("One Column",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i,ImageBlock:o}=this.layoutJSONCreator;return r(n(s(1,a(V.Z.SPACER)),s(10,...ve()(3,()=>n(s(4,o(120)),s(6,i(d=>Os(d,3)))))),s(1,a(V.Z.SPACER))))}}class Sr extends Qt{getLabel(){return(0,l.t)("Two Columns",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i,ImageBlock:o}=this.layoutJSONCreator,{header:d}=this.contentGenerator;return r(n(s(1,a(V.Z.SPACER)),s(10,i(d("h1","Our Team","center"))),s(1,a(V.Z.SPACER))),n(...ve()(2,()=>s(6,o(75),i(p=>Os(p,1))))),n(...ve()(2,()=>s(6,o(75),i(p=>Os(p,1))))))}}class Cr extends Qt{getLabel(){return(0,l.t)("Three Columns",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,ImageBlock:i}=this.layoutJSONCreator,{name:o,paragraph:d,paragraphs:p}=this.contentGenerator;return r(...ve()(3,y=>y%2?n(s(12,a(V.Z.SPACER))):n(...ve()(3,()=>s(4,i(100,d(`<strong>${o()}</strong>`)+p()))))))}}class yr extends Qt{getLabel(){return(0,l.t)("Four Columns",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,ImageBlock:a}=this.layoutJSONCreator,{name:i,paragraph:o}=this.contentGenerator;return r(...ve()(3,()=>n(...ve()(4,()=>s(3,a(100,o(i())))))))}}const Er=[fr,Sr,Cr,yr];class zn extends Ie{getKeywords(){return[(0,l.t)("acuity",null,{project:"src.shared"}),(0,l.t)("booking",null,{project:"src.shared"})]}}class Ir extends zn{getLabel(){return(0,l.t)("Description",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i,AcuityBlock:o}=this.layoutJSONCreator,{header:d,paragraphs:p}=this.contentGenerator;return r(n(s(12,i(d("h1",(0,l.t)("Book an Appointment",null,{project:"src.shared"}),"center")),i(p(1,3)))),n(s(2,a(V.Z.SPACER)),s(8,o()),s(2,a(V.Z.SPACER))))}}class Tr extends zn{getLabel(){return(0,l.t)("No Description",null,{project:"src.shared"})}generateJSON(){const{Layout:r,Row:n,Column:s,Block:a,TextBlock:i,AcuityBlock:o}=this.layoutJSONCreator,{header:d}=this.contentGenerator;return r(n(s(12,i(d("h1",(0,l.t)("Book an Appointment",null,{project:"src.shared"}),"center")))),n(s(2,a(V.Z.SPACER)),s(8,o()),s(2,a(V.Z.SPACER))))}}const kn={Blank:Ho,About:ko,Contact:$o,Details:tr,Features:or,Misc:gr,PhotoWall:vr,Team:Er,Booking:[Ir,Tr]},Bs={};Object.keys(kn).forEach(e=>{const r=kn[e],n=go()(e);Array.isArray(r)?r.forEach((s,a)=>{Bs[`${n}-${a+1}`]=s}):Bs[n]=r});const Ye=co()(Bs,e=>new e().exportMethods()),xb=e=>new FromLayoutJSON(e).exportMethods(),Xn=(0,l.t)("Other",null,{project:"src.shared"});let $t=null;const He={generateLayout(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:be.Z.DEFAULT;return Ye[e].generate({isMarkdownMode:$t.isMarkdownMode(),location:$t.getLocationArray(),mapLocation:$t.getMapLocation(),contentGeneratorType:r})},createLayoutIcon(e){return I.createElement(ro,this.generateLayout(e,be.Z.ICON))},getLabel(e){return Ye[e].label},getAvailablePresetKeys(e){const r=Object.keys(Ye);return e?r.filter(n=>Ye[n].keywords.indexOf(e)>-1):r},containsForm(e){return Ye[e].isForm},getAvailableCategories(){const e=wi()(Object.keys(Ye).map(n=>Ye[n].keywords).flat()),r=e.indexOf(Xn);return r>-1&&(e.splice(r,1),e.push(Xn)),e},walk(e,r,n){if(e){if(Array.isArray(e)){e.forEach(s=>{this.walk(s,r,n)});return}if(typeof e=="object"){if(r(e,n)===!0)return;Object.keys(e||{}).forEach(a=>{this.walk(e[a],r,n)})}}},addFormIdPredicate(e,r){return e.type&&e.type===V.Z.FORM?(e.id="",e.value=r,!0):!1},addFormIdToLayout(e,r){const n=this.addFormIdPredicate;this.walk(e,n,r)},registerAdapter(e){$t=e}};var Us=t(35045),_e=t(829499);const Ar=()=>_e.default.getState().markdownMode,Pr=e=>(e&&typeof e.toJS=="function"&&(e=e.toJS()),e&&e.addressLine1?[e.addressLine1,e.addressLine2,e.addressCountry||e.country].filter(r=>!!r):null),Jn={isMarkdownMode:Ar,getLocationArray:()=>Pr(Us.default.getState().location),getMapLocation:()=>{const e=Us.default.getState();return e?e.toJS().location:void 0}};var ee=t(233284),br=t(690388),Ub=t(153088),et=t(916661),Qn=t(109771),Lr=t(580781),ce=t.n(Lr);const $n="about",Yn="contact",_n="details",ea="features",ta="images",sa="team",na="booking",aa="gallery",ia="products",Dr="blog",oa="events",Nr="album",Rr="index",xr="blog-grid-masonry",Mr="project-grid",Or="link",Br="chownow",Ur=[$n,Yn,_n,ea,ta,sa,na],Fr={[$n]:{presetSearchKey:"about",presetTitle:"",iconTitle:(0,l.t)("About",null,{project:"apps.App"}),iconClass:"about"},[Yn]:{presetSearchKey:"contact",presetTitle:"",iconTitle:(0,l.t)("Contact",null,{project:"apps.App"}),iconClass:"contact"},[_n]:{presetSearchKey:"details",presetTitle:"",iconTitle:(0,l.t)("Details",null,{project:"apps.App"}),iconClass:"details"},[ea]:{presetSearchKey:"features",presetTitle:"",iconTitle:(0,l.t)("Features",null,{project:"apps.App"}),iconClass:"features"},[ta]:{presetSearchKey:"photo-wall",presetTitle:"",iconTitle:(0,l.t)("Images",null,{project:"apps.App"}),iconClass:"images"},[sa]:{presetSearchKey:"team",presetTitle:"",iconTitle:(0,l.t)("Team",null,{project:"apps.App"}),iconClass:"team"},[na]:{presetSearchKey:"booking",presetTitle:"",iconTitle:(0,l.t)("Booking",null,{project:"apps.App"}),iconClass:"booking"}},jr=[aa,ia,Dr,oa,Nr,Rr],wr=[aa,ia,Mr,xr,oa],Fs={[Or]:{templateConfigType:"link",iconTitle:(0,l.t)("Link",null,{project:"apps.App"}),iconClass:"link"},[Br]:{templateConfigType:"link",iconTitle:"ChowNow",iconClass:"chownow"},blank:{templateConfigType:"page",iconTitle:(0,l.t)("Blank",null,{project:"apps.App"}),iconClass:"blank"}},xt={createNewPage:(0,l.t)("Create New Page",null,{project:"apps.App"}),createNewSection:(0,l.t)("Create New Section",null,{project:"apps.App"}),pageLayouts:(0,l.t)("Layouts",null,{project:"apps.App"}),collections:(0,l.t)("Collections",null,{project:"apps.App"}),other:(0,l.t)("Other",null,{project:"apps.App"})};function fe(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}class ra extends I.Component{render(){const{connectedAccountOptions:r,onRequestClose:n,isSectionAdd:s,region:a}=this.props,{pageModalOpen:i,selectedLayoutCategory:o,starterLayoutModalOpen:d,starterLayoutModalTitle:p}=this.state,y=ue()(a?ce().container:ce().centerContainer);let A=[];et.Z.isSevenOne()?A=wr.filter(q=>this.props.acceptTypes[q]||!1):A=jr.filter(q=>this.props.acceptTypes[q]||!1);let P=[];Object.keys(this.props.acceptTypes||{}).forEach(q=>{!A.includes(q)&&q!=="page"&&P.push(q)}),r&&(P=P.concat(r));const U=A.length<1,K=P.length<1,O=s?xt.createNewSection:xt.createNewPage;return I.createElement(I.Fragment,null,I.createElement(Qn.ZP,{customClassNames:y,isOpen:i,onRequestClose:n},I.createElement("div",{className:ce().tab},O),I.createElement("div",{className:ce().scrollableContainer},this.renderHeader(xt.pageLayouts),I.createElement("div",{className:ce().iconRow},this.renderBlank(),this.renderLayoutGroup()),!U&&this.renderHeader(xt.collections),!U&&I.createElement("div",{className:ce().iconRow},this.renderCollectionGroup(A)),!K&&this.renderHeader(xt.other),!K&&I.createElement("div",{className:ce().iconRow},this.renderOtherGroup(P)))),o&&I.createElement(Qn.ZP,{customClassNames:y,isOpen:d,onRequestClose:n},I.createElement("div",{className:ce().scrollableContainer},I.createElement("div",{className:ce().tab},p),I.createElement("div",{className:ce().layoutIconRow},this.renderLayoutPresets(p)))))}constructor(r){super(r),fe(this,"state",{pageModalOpen:!0,starterLayoutModalOpen:!1,starterLayoutModalTitle:"",selectedLayoutCategory:""}),fe(this,"layoutPageButtonOnClick",n=>{const s=n.presetSearchKey||n.iconClass,a=n.presetTitle||n.iconTitle;Ln(void 0,a),this.setState({pageModalOpen:!1,starterLayoutModalOpen:!0,starterLayoutModalTitle:a,selectedLayoutCategory:s})}),fe(this,"layoutOptionOnClick",n=>{Fi(n),this.props.onCreateNewPage({type:"page",layoutKey:n,layoutTitle:this.state.starterLayoutModalTitle}),this.props.onRequestClose()}),fe(this,"collectionButtonOnClick",n=>{let{type:s,collectionTitle:a}=n;s==="page"&&Ln("page","Blank"),this.setState({pageModalOpen:!1,starterLayoutModalOpen:!1}),this.props.onCreateNewPage({type:s,layoutTitle:a}),this.props.onRequestClose()}),fe(this,"renderHeader",n=>I.createElement("div",{className:ce().header},n)),fe(this,"renderOption",(n,s,a)=>{const i=`icon-${n}`,o=`MultiOption ${n}`;return I.createElement("button",{key:n,"data-test":o,className:ce().iconButton,onClick:a},I.createElement("div",{className:ce().iconButtonContent},I.createElement("div",{className:ce()[i]}),I.createElement("div",{className:ce().iconText},s)))}),fe(this,"renderBlank",()=>{const n=Fs.blank;if(n)return this.renderOption(n.iconClass,n.iconTitle,this.collectionButtonOnClick.bind(this,{type:n.templateConfigType,collectionTitle:n.iconTitle}))}),fe(this,"renderLayoutOption",(n,s,a)=>I.createElement("div",{key:n},I.createElement("button",{key:n,className:ce().layoutButton,onClick:a},I.createElement("div",{className:ce().layoutIcon},He.createLayoutIcon(n))),I.createElement("div",{className:ce().layoutIconTitle},s))),fe(this,"renderLayoutPresets",n=>{const s=this.state.selectedLayoutCategory;return He.getAvailablePresetKeys().filter(o=>o.includes(s)).map((o,d)=>{const p=He.getLabel(o);return this.renderLayoutOption(o,p,this.layoutOptionOnClick.bind(this,o))})}),fe(this,"renderLayoutGroup",()=>Ur.map(n=>{const s=Fr[n];if(s)return this.renderOption(s.iconClass,s.iconTitle,this.layoutPageButtonOnClick.bind(this,s))})),fe(this,"renderCollectionGroup",n=>n.map(s=>{const{icon:a,title:i}=this.props.collectionConfigs[s];return this.renderOption(a,i,this.collectionButtonOnClick.bind(this,{type:s}))})),fe(this,"renderOtherGroup",n=>n.map(s=>{let a,i,o=s;if(o==="link"){const d=Fs[o];a=d.iconClass,i=d.iconTitle}else if(o&&o.type){const d=Fs[o.type];a=d.iconClass,i=d.iconTitle,o=o.value}else{const d=this.props.collectionConfigs[o];a=d.icon,i=d.title}if(!(!a||!i))return this.renderOption(a,i,this.collectionButtonOnClick.bind(this,{type:o}))})),He.registerAdapter(Jn)}}fe(ra,"propTypes",{onRequestClose:x().func.isRequired,onCreateNewPage:x().func.isRequired,acceptTypes:x().object.isRequired,collectionConfigs:x().object.isRequired,connectedAccountOptions:x().array,isOpen:x().bool.isRequired,isSectionAdd:x().bool,region:x().object});var Wr=t(983497),la=t.n(Wr),Zr=t(503846),Vr=t(273408),Gr=t(618662),Hr=t(865772),xe=t(324270),qr=t(977715),Mt=t.n(qr),$=t(841863),Kr=t(745521);function tt(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}class ca extends I.Component{componentDidMount(){this.actionListener=new(Dt())(Nt.Z),this.actionListener.addActionListener(xe.default.TOGGLE_FULL_SCREEN_PREVIEW_MODE,()=>this.props.onRequestClose())}render(){const{anchorNode:r,existingStores:n,isFolderAddingSupported:s,onRequestClose:a,isChowNowEnabled:i,acceptTypes:o}=this.props,{catalogPopOverOpen:d,storeDialogOpen:p}=this.state,y=s||o[$.Zj]||i;return I.createElement(I.Fragment,null,I.createElement(Zr.Z,{anchor:r,bodyClassName:Mt().popoverBody,mountAt:r.ownerDocument.body,hideArrow:!0,position:"bottom",isOpen:d,closeOnClickOutside:!0,onRequestClose:a},I.createElement("div",{className:Mt().container},this.renderHeader($.ws.PAGES,!0),this.renderGroup($.js),this.renderHeader($.ws.COLLECTIONS),this.renderGroup($.a6),y&&this.renderHeader($.ws.MORE),s&&this.renderButton($.iZ[$.el].templateConfigType,$.iZ[$.el].iconName,$.iZ[$.el].iconUrl,$.iZ[$.el].iconDetail),o[$.Zj]&&this.renderButton($.iZ[$.Zj].templateConfigType,$.iZ[$.Zj].iconName,$.iZ[$.Zj].iconUrl,$.iZ[$.Zj].iconDetail),i&&this.renderButton($.iZ[$.EP].templateConfigType,$.iZ[$.EP].iconName,$.iZ[$.EP].iconUrl,$.iZ[$.EP].iconDetail))),I.createElement(Hr.Z,{existingStores:n,onRequestClose:a,openStoreCatalog:()=>this.openPageCatalog(la().STORE),storeDialogOpen:p}))}constructor(...r){super(...r),tt(this,"state",{catalogPopOverOpen:!0,linkModalOpen:!1,storeDialogOpen:!1}),tt(this,"openPageCatalog",n=>{this.isOpeningItemCatalog=!0,(0,Kr.Z)(n),this.props.onRequestClose(),this.isOpeningItemCatalog=!1}),tt(this,"handleButtonClick",n=>{if(this.isOpeningItemCatalog)return;const s=n&&n.toLowerCase();if((0,bn.iW)(s),$.YG[n]){this.props.onClick(n);return}if(n===la().STORE&&vs.Z.isFeatureEnabled(Zt().NESTED_CATEGORIES)&&this.props.existingStores.length>=1){(0,Gr.e6)(),this.setState({catalogPopOverOpen:!1,storeDialogOpen:!0});return}this.openPageCatalog({pageCategory:n})}),tt(this,"renderGroup",n=>Object.values(n).map(s=>{const{iconDetail:a,iconName:i,iconUrl:o,templateConfigType:d,testAttr:p="",renderAccessory:y}=s;return this.renderButton(d,i,o,a,p,y)})),tt(this,"renderHeader",(n,s)=>I.createElement("div",{className:ue()(Mt().headerTitles,{[Mt().headerTitlesFirst]:s})},n)),tt(this,"renderButton",(n,s,a,i,o,d)=>I.createElement(Vr.default,{key:n,clickable:!0,label:s,...d?{accessory:d}:{},detailPosition:"subtitle",detail:i,flush:!0,icon:a,iconSize:"small",className:Mt().iconButton,underlined:!1,subtitleMultiline:!0,onClick:this.handleButtonClick.bind(this,n),htmlAttributes:{"data-test":o}}))}}tt(ca,"propTypes",{anchorNode:x().any,existingStores:x().arrayOf(x().shape({collectionId:x().string.isRequired,title:x().string.isRequired}).isRequired).isRequired,isOpen:x().bool,isFolderAddingSupported:x().bool,onClick:x().func.isRequired,onRequestClose:x().func.isRequired,acceptTypes:x().object});const da=()=>Ee.Z.getCollectionsOfType(pe().PRODUCTS),zr=e=>{const[r,n]=(0,I.useState)(da());return(0,I.useEffect)(()=>Ee.Z.onCollectionsChange(()=>{n(da())}),[]),I.createElement(ca,{...e,existingStores:r})};var kr=t(662887),ua=t(830510),Yt=t(487558),js=t(998274);const Xr=()=>{const e="member-area-onboarding-wizard",r=_e.default.getState().tutorialsCompleted,n=r.includes(e);let s=!1;n||(s=!0,r.push(e),ua.Z.save(_e.default.getMergedWebsiteSettings({tutorialsCompleted:r}),!0)),(0,Yt.Ci)((0,js.hk)({isOnboarding:s}))};var ga=t(651780),ht=t(935237);YUI.add("squarespace-navigation-dialog-helper",function(e){e.namespace("Squarespace.Navigation");var r=1e3,n=400,s=["paul-ahern-ekrw","jan-cox-oo37","bardorg","sarahschwartz","financierworldwide","james-krucik-0xt8","roberto-ramirez","sharon-harris-cwr0","fitnessinthecity"],a=e.Squarespace.Navigation.DialogHelper=e.Base.create("DialogHelper",e.Base,[e.Squarespace.Mixins.EventRegistrar],{initializer:function(){this.bind()},bind:function(){this._registerEvent(e.Squarespace.Navigation.Events.on("itemList:addItem",function(i){this.ensureItemIsAddable().then(function(){e.Squarespace.Navigation.Events.fire("collection:create",{type:i.type,modelList:i.modelList,opts:i.opts})})},this),e.Squarespace.Navigation.Events.on("create:newPage",function(i){var o=i.collectionId,d=i.layoutKey;if(o&&d){He.registerAdapter(Jn);var p=He.generateLayout(d),y=He.containsForm(d),A={data:{layout:p,raw:!1}};if(y){var P=new e.Squarespace.Models.BlockFormModel,U=P.getFormModel(),K=e.merge({_type:"emailConnect"},P.get("emailConnect"));U.set("backendConnectionConfigs",[K]),U.save(function(O,q){if(q&&q.response){var J;try{J=JSON.parse(q.response)}catch{}if(J){var X=J.id,ne={formId:X};He.addFormIdToLayout(p,ne),qt.Z.getPageCollectionData(o).then(function(){qt.Z.savePageCollectionData(o,A)})}}})}else qt.Z.getPageCollectionData(o).then(function(){qt.Z.savePageCollectionData(o,A)})}},this),e.Squarespace.Navigation.Events.on("itemList:addDialog",function(o){this.ensureItemIsAddable().then((function(){var p=o.title||(0,l.t)("Create New Page",null,{project:"scripts-v6.navigation"}),y=o.config||{};this.itemList=o.itemList,this.dialogConfig=y,this.clickedNode=o.targetNode;var A={itemList:o.itemList,title:p,config:y,isSectionAdd:o.isSectionAdd,isFolderAdd:o.isFolderAdd};this.showAddItemDialog(A)}).bind(this))},this),e.Squarespace.Navigation.Events.on("item:unsupported",function(i){e.Squarespace.Logger.log("contentCollection:unsupported",{collectionId:i.collection.get("id")}),a.showUnsupportedItemAlert()}),e.Squarespace.Navigation.Events.on("itemList:linkAdd",function(i){var o=i.model.get("externalLink");if(o&&o.url&&!i.openModalForConfiguredUrl)this.createAndSaveLink(i.model,i.itemList);else if(o&&o.externalServiceProviderType)if(ct.Z.isFeatureEnabled(Ge().CHOW_NOW_INTEGRATION))this.createAndSaveLink(i.model,i.itemList);else{(0,Cs.Z)("upsell_pill_display",{identifier:"chow-now-integration",isTrial:Gt.Z.isTrial()}),this.confirmationModalContainer||(this.confirmationModalContainer=document.createElement("div"),document.body.appendChild(this.confirmationModalContainer));var d=I.createElement(br.Z,{isOpen:!0,isTrial:Gt.Z.isTrial(),onRequestClose:(function(){this.createAndSaveLink(i.model,i.itemList),ee.unmountComponentAtNode(this.confirmationModalContainer),this.confirmationModalContainer.remove(),this.confirmationModalContainer=null}).bind(this)});ee.render(d,this.confirmationModalContainer)}else this.showConfigureLinkDialog(i.model,i.itemList)},this),e.Squarespace.Navigation.Events.on("demo:editAttempt",function(i){this.showDemoCloneConfirmation(i.collection,i.callback)},this)),e.Squarespace.Navigation.Events.on("itemList:close",function(i){this.closeAddPageContainer()},this)},copyCollection:function(i,o,d){var p="/api/content/copy/collection/component-replacements",y="sourceCollectionId="+i+"&sourceWebsiteId="+o;return e.Squarespace.Promises.create(function(A,P){e.Data.post({url:p+"?"+y,data:d,json:!0,success:A,failure:P})})},getConnectedAccountOptions:function(){var i=e.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray(),o=e.Array.map(i,function(P){return P.get("serviceId")}),d=[];for(var p in rt.Z){var y=rt.Z[p],A=o.indexOf(y.serviceId)>-1;A&&d.push({type:y.slug,value:{externalServiceProviderType:y.serviceId}})}return d},getAddPageContainer:function(){return this.addPageContainer||(this.addPageContainer=document.createElement("div"),document.body.appendChild(this.addPageContainer)),this.addPageContainer},closeAddPageContainer:function(){this.addPageContainer&&(ee.unmountComponentAtNode(this.addPageContainer),this.addPageContainer.remove(),this.addPageContainer=null)},showAddItemDialog:function(i){var o=i.itemList;if(!o.get("supported")){a.showUnsupportedItemAlert();return}i.region=o.get("boundingBox").get("region"),i.anchorNode=Ze()(i,"config.dialog.anchorNode",o.get("boundingBox"));var d=o.get("acceptTypes");if(d&&(d=d.reduce(function(p,y){return p[y]=y,p},{})),i.acceptTypes=d,i.collectionConfigs=$e.default.getState().collectionConfigs,i.connectedAccountOptions=this.getConnectedAccountOptions(),i.addPageContainer=this.getAddPageContainer(),o.isMemberAreaRootNavigationItemList()){this.showAddNewMemberAreaDialog(i);return}if(et.Z.isSevenOne()&&(!i.config||!i.config.showOldDialog)){this.showSevenOneAddItemDialog(i);return}this.showV7AddItemDialog(i)},showAddNewMemberAreaDialog:function(i){Xr(),le.Z.setMemberAreaModelList(i.itemList.get("modelList")),Ve.Z.getIsUserClickSimulated()||(le.Z.setMACreationEntryPoint(ht.qp.PAGES_PANEL),le.Z.setMAEntryPointLevel2(ht.rN.CREATE_PLUS_ICON),le.Z.setMAEntryPointPath(window.location.pathname),(0,kr.X9)())},showV7AddItemDialog:function(i){var o=(function(p){var y=p.type;if(y){y.externalServiceProviderType&&(0,lt.oq)({typeName:"chow_now"});var A=e.merge(this._getNewItemPlacement(i.itemList),i.config.strings);e.Squarespace.Navigation.Events.fire("collection:create",{type:y,modelList:i.itemList.get("modelList"),opts:A,layoutKey:p.layoutKey,layoutTitle:p.layoutTitle})}}).bind(this),d={acceptTypes:i.acceptTypes,collectionConfigs:i.collectionConfigs,connectedAccountOptions:i.connectedAccountOptions,isOpen:!0,isSectionAdd:i.isSectionAdd,region:i.region,onRequestClose:this.closeAddPageContainer.bind(this),onCreateNewPage:o};ee.render(I.createElement(ra,d),i.addPageContainer),Ui(i.isSectionAdd)},showSevenOneAddItemDialog:function(i){var o=i.anchorNode;this.clickedNode&&(o=this.clickedNode.getDOMNode());var d=i.connectedAccountOptions.find(function(P){return P.value.externalServiceProviderType===Pn().CHOWNOW}),p=!!d,y=(function(P,U){if(this.closeAddPageContainer(),!!P){P===$.EP&&(P={externalServiceProviderType:Pn().CHOWNOW});var K=e.merge(this._getNewItemPlacement(i.itemList),i.config.strings);e.Squarespace.Navigation.Events.fire("collection:create",{type:P,modelList:i.itemList.get("modelList"),opts:K})}}).bind(this),A={acceptTypes:i.acceptTypes,collectionConfigs:i.collectionConfigs,isOpen:!0,isFolderAddingSupported:!i.isFolderAdd,isChowNowEnabled:p,anchorNode:o,onRequestClose:this.closeAddPageContainer.bind(this),onClick:y};ee.render(I.createElement(zr,A),i.addPageContainer),(0,bn.ad)(i.navList)},showConfigureLinkDialog:function(i,o){i.onceAfter("save",function(){e.Squarespace.Navigation.Events.fire("itemList:linkConfigure",{model:i,itemList:this})},o);var d=new e.Squarespace.Editor.NavigationExternalLinkReact({model:i,isNew:!0});d.show()},createAndSaveLink:function(i,o){i.save(),i.onceAfter("save",function(){e.Squarespace.Navigation.Events.fire("itemList:linkConfigure",{model:i,itemList:this})},o)},showDemoCloneConfirmation:function(i,o){if(!(!i||!i.get("isDemoCollection"))){var d=i.get("typeName");(0,Ht.D9)(d);var p=i.get("id"),y=e.Squarespace.CollectionDialogPortal;y&&y.exampleContentCloneConfirmationWithCollectionId(p).then(o)}},ensureItemIsAddable:function(){var i=e.Squarespace.Singletons.TemplateNavigationList.getNavigationItemCount(),o=e.Squarespace.Context.getInstance().get("website").get("identifier");return s.indexOf(o)!==-1?e.when():i>=r?(a.showPageLimitReachedDialog(),e.Squarespace.Logger.log("nav-item-limit:reached",{count:i}),e.Squarespace.Promises.rejectWith()):i>=n&&!(0,ga._X)()?(e.Squarespace.Logger.log("nav-item-limit:warning",{count:i}),a.showHighPageLimitWarningDialog()):e.when()},_getNewItemPlacement:function(i){return e.Lang.isNumber(i.get("insertIndex"))?{index:Math.min(i.get("insertIndex"),i.get("itemViews").length)}:i.get("append")?{}:{index:0}}},{showHighPageLimitWarningDialog:function(){return new e.Squarespace.Fluent.Confirm({"strings.title":(0,l.t)("Are You Sure?",null,{project:"scripts-v6.navigation"}),"strings.message":(0,l.t)("Your site has over 400 pages. Sites with this much content may load slowly. Please delete unused pages or consider consolidating your content.",null,{project:"scripts-v6.navigation"}),"strings.confirm":(0,l.t)("Continue",null,{project:"scripts-v6.navigation"})})},showPageLimitReachedDialog:function(){return new e.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Page Limit Reached",null,{project:"scripts-v6.navigation"}),"strings.message":(0,l.t)("Squarespace has a limit of 1000 pages per site. Please delete unused pages or consider consolidating your content.",null,{project:"scripts-v6.navigation"})})},showUnsupportedItemAlert:function(){return new e.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Unsupported Collection",null,{project:"scripts-v6.navigation"}),"strings.message":(0,l.t)("This page has malformed data and can not be edited. This error has been logged. Please contact customer care if this issue persists.",null,{project:"scripts-v6.navigation"})})},ATTRS:{collectionCache:{}}})},"1.0",{requires:["base","squarespace-logger","squarespace-promises","squarespace-system-error","squarespace-mixins-event-registrar","squarespace-widgets-alert","squarespace-singletons-location","squarespace-navigation-events","squarespace-content-manager-collection-dialog-portal","squarespace-editor-navigation-external-link","squarespace-editor-navigation-external-link-react","squarespace-fluent-confirmation","squarespace-models-connected-accounts","squarespace-models-content-collection","squarespace-models-template-navigation-list","squarespace-block-form-model"]});var Jr=t(148155);YUI.add("squarespace-editor-navigation-external-link",function(e){e.namespace("Squarespace.Editor").NavigationExternalLink=e.Base.create("NavigationExternalLinkModelEditor",e.Squarespace.ModelEditorDialog,[],{initializer:function(){var r=this.get("dialog");r.on("datachange",function(n){this.get("model").set(n.getName(),n.getValue())},this),r.on("remove-requested",function(){var n=this.get("model").get("title"),s=(0,l.t)("Delete {itemTitle}",{itemTitle:n},{project:"scripts-v6.editor"}),a=(0,l.t)("Are you sure you want to delete <strong>{itemTitle}<strong>?",{itemTitle:n},{project:"scripts-v6.editor"});new e.Squarespace.Widgets.Confirmation({"strings.title":s,"strings.message":a}).on("confirm",function(){this.get("model").destroy({remove:!0}),this.hide()},this)},this)},destructor:function(){this._socialAuthenticator&&(this._socialAuthenticator.destroy(),this._socialAuthenticator=null),this._connectedAccountEditor&&(this._connectedAccountEditor.destroy(),this._connectedAccountEditor=null)},getDialogData:function(){var r=this.get("model").get("externalLink");return{title:r.title,createLink:{url:r.url,newWindow:r.newWindow,externalServiceProviderType:r.externalServiceProviderType}}},sanitizeDialogData:function(r){this.get("model").set("externalLink",{title:r.title,url:Ze()(r,"createLink.url"),newWindow:Ze()(r,"createLink.newWindow"),externalServiceProviderType:Ze()(r,"createLink.externalServiceProviderType")})},_getDialogConfig:function(){var r=this.get("model").get("externalLink").externalServiceProviderType,n=e.Lang.isValue(r),s=[{ctor:e.Squarespace.DialogFields.Text,config:{name:"title","strings.title":(0,l.t)("Link Title",null,{project:"scripts-v6.editor"}),"strings.placeholder":(0,l.t)("Enter a Title",null,{project:"scripts-v6.editor"}),required:!0,submitOnEnter:!0}},{ctor:e.Squarespace.DialogFields.CreateLink,config:{"strings.title":(0,l.t)("Link",null,{project:"scripts-v6.editor"}),name:"createLink",condensed:!0,required:!n},$when:function(){return!n}}],a;if(n){var i=rt.Z[r];a=(0,l.t)("Configure {accountName} Link",{accountName:i.displayName},{project:"scripts-v6.editor"}),s.push(this._generateAccountActionButton(r))}else a=(0,l.t)("Configure Link",null,{project:"scripts-v6.editor"});var o={name:"navigationlinkconfig",waitForServerOnClose:!0,loadingText:(0,l.t)("Loading Configuration\u2026",null,{project:"scripts-v6.editor"}),style:"flyout",width:450,height:220,tabs:[{title:a,icon:"/universal/images-v6/icons/icon-settings-16-light.png",fields:s}],buttons:[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6.editor"})},{type:"remove",title:(0,l.t)("Remove Link",null,{project:"scripts-v6.editor"})},{type:"saveAndClose",title:(0,l.t)("Save",null,{project:"scripts-v6.editor"})}]};return this.get("isNew")&&o.buttons.splice(1,1),o},_generateAccountActionButton:function(r){var n=e.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray(),s=e.Array.find(n,function(a){return a.get("serviceId")===r});return s===null?{ctor:e.Squarespace.DialogFields.Button,config:{"strings.text":(0,l.t)("Connect a {accountType} Account",{accountType:rt.Z[r].displayName},{project:"scripts-v6.editor"}),onClick:e.bind(function(){this._spawnConnectedAccountCreationDialog(r)},this)}}:{ctor:e.Squarespace.DialogFields.Button,config:{"strings.text":(0,l.t)("Edit Connected Account",null,{project:"scripts-v6.editor"}),onClick:e.bind(function(){this._spawnConnectedAccountEditor(s)},this)}}},_spawnConnectedAccountCreationDialog:function(r){this._socialAuthenticator=new e.Squarespace.SocialAuthenticator,this._socialAuthenticator.addNewAccountDialog(rt.Z[r].slug),this._socialAuthenticator.after("account-added",function(){this.get("dialog").saveAndClose()},this)},_spawnConnectedAccountEditor:function(r){this._connectedAccountEditor=new e.Squarespace.Widgets.ConnectedAccount({model:r}),this._connectedAccountEditor.showEditor(),this._connectedAccountEditor.after("account-removed",function(){this.get("dialog").saveAndClose()},this)}},{ATTRS:{isNew:{value:!1},dialogConfig:{valueFn:"_getDialogConfig",validator:e.Lang.isObject}}})},"1.0",{requires:["squarespace-dialog-text","squarespace-dialog-create-link","squarespace-model-editor","squarespace-models-connected-accounts","squarespace-connected-account-widget","squarespace-social-authenticator"]}),YUI.add("squarespace-editor-navigation-external-link-react",function(e){e.namespace("Squarespace.Editor");var r=e.Squarespace.Editor.NavigationExternalLinkReact=e.Base.create("NavigationExternalLinkReact",e.Squarespace.Widgets.SSWidget,[],{initializer:function(n){this.model=n.model,this.isNew=n.isNew,this.initialValue=this.model.get("externalLink"),this.isOpen=!1,this.isSaving=!1;var s=document.createElement("div");this.reactMountNode=s,document.body.appendChild(s)},destructor:function(){this.reactMountNode&&(ee.unmountComponentAtNode(this.reactMountNode),this.reactMountNode.remove(),this.reactMountNode=null)},renderUI:function(){r.superclass.renderUI.apply(this,arguments),this.renderReact()},show:function(){this.isOpen=!0,this.renderReact()},getReactProps:function(){var n=this.model.get("externalLink");return{isOpen:this.isOpen,isEditing:!this.isNew,value:n,onSave:(function(){this.handleSave()}).bind(this),onRequestClose:(function(){this.handleClose()}).bind(this)}},renderReact:function(){ee.render(I.createElement(We.ZP,null,I.createElement(Jr.Z,this.getReactProps())),this.reactMountNode)},handleSave:function(){var n=(0,Vt.Cg4)((0,We.d6)());this.model.set("externalLink",n),this.model.save(),this.isSaving=!0,this.destroy()},handleClose:function(){this.isNew&&!this.isSaving&&this.model.destroy({remove:!0}),this.destroy(),this.isSaving=!1}},{ATTRS:{isNew:{value:!1},dialogConfig:{valueFn:"_getDialogConfig",validator:e.Lang.isObject}}})},"1.0",{requires:["base","squarespace-ss-widget"]});var pa=t(104002),ma=t(172595),ws=t(590153);YUI.add("squarespace-navigation-drag-and-drop",function(e){var r=e.SQS.DDWrappers.Plugin.DDSuperProxy;e.namespace("Squarespace.Navigation"),e.Squarespace.Navigation.DragAndDrop=e.Base.create("DragAndDrop",e.Base,[],{initializer:function(){this.LOG=new e.Squarespace.Debugger({name:"NavigationDragAndDrop",output:!1}),this._regionCache=null},destructor:function(){this.delegate&&(this.delegate.destroy(),this.delegate=null),this.LOG=null},bind:function(){var n=this.get("node");this.delegate=new e.SQS.DDWrappers.DD.Delegate({container:n,nodes:".sqs-navigation-item",dragConfig:{groups:["navigation"]},enableDragScroll:!0,enableDragConstrained:!0,dragConstrainedConfig:{constrain:null,stickY:!0}}),this.delegate.after("drag:mouseDown",this._dragMousedown,this),this.delegate.after("drag:start",this._dragStart,this),this.delegate.after("drag:align",this._dragAlign,this),this.delegate.after("drag:end",this._dragEnd,this),this.delegate.dd.plug(r,{movingClass:"sqs-navigation-item-dragging",cloneClass:"sqs-navigation-item-proxy"}),n.on("scroll",function(s){this.bustRegionCache()},this)},getRegionCache:function(n){var s=n.target.get("node");if(this._regionCache!==null&&this._regionCache.dragNode===s)return this._regionCache.cache;var a=this._evaluateRegionCache(n);return this._regionCache={dragNode:s,cache:a},e.DD.DDM._debugRegionMap&&this._debugRegions(a),this._regionCache.cache},_evaluateRegionCache:function(n){var s=this.get("navigationViews"),a=n.target.get("node"),i=this.getNavigationViewForNode(a,s),o=this._getDragType(i),d=[];function p(y){if(y===i)return;var A=y.get("boundingBox").getDOMNode();if(!A)return;var P=A.getBoundingClientRect(),U=P.top,K=P.height,O=P.top+P.height/2,q=null;y instanceof e.Squarespace.Navigation.Item.Folder?J(y):y instanceof e.Squarespace.Navigation.ItemList?X(y):ne(y);function J(_){var Ne=_.get("itemList"),ye=_.get("model").getNavigationItemList().getTemplateNavigation(),Xe=Ne.get("acceptTypes")||[];if(!Xe.includes(o)){if(Ne.get("navigation").get("name")===re.Z.memberAreaNavigationName&&o!==re.Z.MEMBER_AREA_NAVIGATION_TYPE)return;ne(_);return}if(_.get("boundingBox").hasClass("collapsed")){ne(_);return}if(_ instanceof e.Squarespace.Navigation.Item.Index&&(i.get("isHomepage")||i.get("containsHomepage"))){ne(_);return}if(_ instanceof e.Squarespace.Navigation.Item.StackedIndex&&ye.get("name")!==re.Z.memberAreaNavigationName&&i.get("collection").get("passwordProtected")){ne(_);return}if(X(Ne),!(_ instanceof e.Squarespace.Navigation.Item.MemberArea)){var bt=_.get("contentBox").one("> .item-wrapper"),Fe=bt.getDOMNode().getBoundingClientRect();d.push({min:Fe.top,max:Fe.top+Fe.height/2,action:"before",navigation:_});var hs=Ne.get("contentBox").one("> footer");if(hs){var at=hs.getDOMNode().getBoundingClientRect();d.push({min:at.top+at.height/2,max:at.top+at.height,action:"after",navigation:_})}}}function X(_){var Ne=_.get("acceptTypes")||[];if(!Ne.includes(o)){var ye=e.Squarespace.Singletons.TemplateNavigationList.getMemberAreaNavigation(),Xe=_.get("navigation")===ye;Xe&&!i.get("isHomepage")&&(q=_.get("itemViews"));return}if(_.get("boundingBox").hasClass("sqs-navigation-item-list-empty")){var bt=_.get("contentBox").one("> .item-list-wrapper > .empty-message"),Fe=bt.getDOMNode().getBoundingClientRect();d.push({min:Fe.top,max:Fe.top+Fe.height,action:"insert",navigation:_})}q=_.get("itemViews")}function ne(_){d.push({min:U,max:O,navigation:_,action:"before"}),d.push({min:O,max:U+K,navigation:_,action:"after"})}q&&q.forEach(p)}return s.forEach(p),e.DD.DDM._debugRegionMap&&this._debugRegions(d),d},_getDragType:function(n){var s=n.get("model"),a=s.get("collection");if(a)return a.get("type")===pe().TEMPLATE_PAGE?"page":a.get("typeName");var i=s.get("externalLink");return i?"link":s.isMemberArea()?re.Z.MEMBER_AREA_NAVIGATION_TYPE:null},getNavigationViewForNode:function(n,s){for(var a=0;a<s.length;a++){if(s[a].get("boundingBox")===n)return s[a];var i=[];if(s[a]instanceof e.Squarespace.Navigation.ItemList&&i.push(s[a].get("itemViews")),s[a]instanceof e.Squarespace.Navigation.Item.Folder){var o=s[a].get("itemList");if(o.get("boundingBox")===n)return o;i.push(s[a].get("itemList").get("itemViews"))}for(var d=0;d<i.length;d++)if(!(!i[d]||i[d].length===0)){var p=this.getNavigationViewForNode(n,i[d]);if(p)return p}}return null},bustRegionCache:function(){this._regionCache=null},_dragMousedown:function(n){n.target.get("node").hasClass("sqs-navigation-item-proxy")&&n.halt()},_dragStart:function(n){var s=n.target.get("node");if(!s.hasClass("sqs-navigation-item-proxy")){this.get("node").addClass("drag-in-flight");var a=this.get("navigationViews");this._sourceItem=this.getNavigationViewForNode(s,a),this._isDragLegal(this._sourceItem.get("name"))||n.halt();var i=this._sourceItem.get("boundingBox").ancestor(".sqs-navigation-item-list");this._sourceList=this.getNavigationViewForNode(i,a),this.bustRegionCache();var o=n.target.get("dragNode");s.insert(o,"after")}},_dragAlign:function(n){var s=n.target.get("node");if(!s.hasClass("sqs-navigation-item-proxy")){var a=n.pageY,i=this.getRegionCache(n),o=this.evalRegionAction(a,i);if(!o){this.LOG.isInfoEnabled()&&this.LOG.info("could not find any action given cursor top: %s",a);return}o!==this._lastAction&&(this.LOG.isInfoEnabled()&&this.LOG.info("Found!",o),this._performAction(o,s,n.target.get("dragNode")),this.bustRegionCache(),this._lastAction=o)}},evalRegionAction:function(n,s){for(var a,i=0;i<s.length;i++){var o=s[i],d=o.min,p=o.max;if(d<n&&n<p){a=o;break}}return a},_performAction:function(n,s,a){var i=n.navigation,o=s.get("parentNode");if(n.action==="before")i.get("boundingBox").insert(s,"before");else if(n.action==="after")i.get("boundingBox").insert(s,"after");else if(n.action==="insert"){var d=n.navigation.get("contentBox").one("> .item-list-wrapper > .item-list");d.appendChild(s)}else this.LOG.warn("Could not locate action for %s",n.action);s.insert(a,"after"),this._syncEmptyState(o),this._syncEmptyState(s.get("parentNode"))},_syncEmptyState:function(n){var s=n.ancestor(".sqs-navigation-item-list",!0);n.get("children").isEmpty()?s.addClass("sqs-navigation-item-list-empty"):s.removeClass("sqs-navigation-item-list-empty")},_dragEnd:function(n){var s=n.target.get("node");if(this.get("node").removeClass("drag-in-flight"),!s.hasClass("sqs-navigation-item-proxy")){this.LOG.info("drag end!");var a=this._sourceItem.get("boundingBox").ancestor(".sqs-navigation-item-list");this._targetList=this.getNavigationViewForNode(a,this.get("navigationViews"));var i=this._targetList.get("boundingBox").one(".item-list"),o=i.all("> .sqs-navigation-item:not(.sqs-navigation-item-proxy)").indexOf(this._sourceItem.get("boundingBox"));e.DD.DDM._debugRegionMap&&this._clearDebugRegions();var d={source:{item:this._sourceItem,list:this._sourceList},target:{list:this._targetList,idx:o}},p=this._sourceList.get("modelList").indexOf(this._sourceItem.get("model"));this._sourceList===this._targetList&&o===p||(e.Squarespace.Navigation.Events.fire("itemList:dd",{sourceList:d.source.list,targetList:d.target.list,itemView:d.source.item,targetIndex:d.target.idx}),this.LOG.isInfoEnabled()&&(this.LOG.info("dragActionPack",d),this.LOG.info("isSameList",d.source.list===d.target.list),this.LOG.info("dragActionPack.source.item",d.source.item.get("boundingBox").getDOMNode()),this.LOG.info("dragActionPack.source.list",d.source.list.get("boundingBox").getDOMNode()),this.LOG.info("dragActionPack.target.list",d.target.list.get("boundingBox").getDOMNode()),this.LOG.info("dragActionPack.target.idx",d.target.idx)))}},_isDragLegal:function(n){return this._isCollectionALockedVariant(n)?(new e.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Cannot Move Variant",null,{project:"scripts-v6.navigation"}),"strings.message":(0,l.t)("This page cannot be moved because it is a variant with traffic allocated to it. Please either split traffic evenly in the parent variation or unallocate all traffic before deleting.",null,{project:"scripts-v6.navigation"})}),!1):!0},_isCollectionALockedVariant:function(n){var s=pa.default.getPathToCollection(n);if(s.length>2){var a=s[s.length-2],i=s[s.length-1];if(a.typeName==="variation"){var o=ws.Z.getVariation(a.collectionId);return ma.YU(o,i.collectionId)}}return!1},_debugRegions:function(n){var s=e.one("#regions-debug")||e.one("body").appendChild(e.Node.create('<div id="regions-debug"></div>'));s.setStyles({position:"fixed",top:0,left:0,zIndex:99999999,pointerEvents:"none",color:"white",fontSize:"10px",textAlign:"right"}),s.empty(),e.Array.each(n,function(a){s.appendChild(e.Node.create('<div class="region-debug"></div>')).setStyles({position:"absolute",top:a.min,height:a.max-a.min,left:0,width:22*12+"px"}).setContent('<span style="'+["background: rgba(255,0,0,0.4)","line-height: "+(a.max-a.min)+"px","height: "+(a.max-a.min)+"px","overflow: hidden","display: inline-block"].join(";")+';">'+a.action+" &mdash; "+this._getDebugNodeIdentifier(a)+" &mdash; "+a.min+" &mdash; "+a.max+"</span>")},this)},_getDebugNodeIdentifier:function(n){var s=n.navigation;if(!s)return"unknown";var a=s.get("model");return a?a.get("title"):"~ navigation"},_clearDebugRegions:function(){var n=e.one("#regions-debug");n&&n.remove()}},{ATTRS:{node:{},navigationViews:{}}}),e.DD.DDM._debugRegionMap=!1},"1.0",{requires:["base","@sqs/yui-dd-wrappers/dd-delegate","@sqs/yui-dd-wrappers/dd-superproxy","squarespace-navigation-events"]});var Me=t(934951),Ws=t(969145),Zs=t(762005),ha=t(79637);const Qr=()=>I.createElement(Ws.Z.Provider,{theme:Zs.rosetta.white},I.createElement(ha.Z,{title:(0,l.t)("Couldn't load member areas",null,{project:"MemberAreas"}),mx:6,mt:4,mb:1},I.createElement(ha.Z.Body,null,I.createElement(Me.T,{project:"MemberAreas"},"We\u2019re unable to load member areas at this time. Wait a few minutes, then try again."))));var Vs=t(378257),vt=t(538312),_t=t(516865),va=t(640559);const $r=e=>{let{titleText:r,bodyText:n,helpLink:s,tutorialKey:a}=e;const[i,o]=(0,I.useState)(!1),d=()=>{const p=_e.default.getState().tutorialsCompleted;ua.Z.save(_e.default.getMergedWebsiteSettings({tutorialsCompleted:p.concat(a)}),!0),o(!0)};return!i&&I.createElement("div",{style:{padding:`0 ${va.GRID_SIZE_PX*3}px`,marginBottom:`${va.GRID_SIZE_PX}px`}},I.createElement(Ws.Z.Provider,{theme:Zs.rosetta.white},I.createElement(Vs.Z,null,I.createElement(Vs.Z.Body,null,I.createElement(vt.Z.Subtitle,{style:{fontSize:"14px"}},r),I.createElement(vt.Z.Body,null,n),I.createElement(_t.Z.Tertiary,{"data-test":"member-areas-product-notification-button-learn-more",onClick:()=>{window.open(s,"_blank"),d()},style:{textTransform:"uppercase"}},I.createElement(Me.T,{project:"MemberAreas"},"Learn more")),I.createElement(_t.Z.Tertiary,{"data-test":"member-areas-product-notification-button-dismiss",onClick:d,style:{textTransform:"uppercase",float:"right"}},I.createElement(Me.T,{project:"MemberAreas"},"Dismiss"))))))};var Wb=t(714011),Yr=t(103372),Gs=t.n(Yr),_r=t(545334),fa=t.n(_r),el=t(374335),tl=t.n(el),sl=t(338465),Hs=t(482053),Sa=t(219190),Ca=t(630015),nl=t(419783),qs=t(362187),De=t(685763);function al(e){let{isOpen:r,onCancel:n,onClose:s,onRemind:a}=e;return I.createElement(De.Z.Transition,null,r&&I.createElement(De.Z,{onRequestClose:n},I.createElement(De.Z.Overlay,null),I.createElement(De.Z.Position,{position:"center"},I.createElement(qs.Z,{title:(0,l.t)("Hide Steps?",null,{project:"apps.Commerce.Onboarding"}),message:(0,l.t)("You won't be able to see the steps required to complete set up. We can remind you again in 6 hours.",null,{project:"apps.Commerce.Onboarding"}),buttons:[()=>I.createElement(qs.Z.Button,{key:"remind",onClick:a},(0,l.t)("Remind Me",null,{project:"apps.Commerce.Onboarding"})),()=>I.createElement(qs.Z.Button,{key:"save",onClick:s},(0,l.t)("Hide Steps",null,{project:"apps.Commerce.Onboarding"}))]}),I.createElement(Sa.Z,{sx:{position:"absolute",cursor:"pointer",size:"22px",right:"33px",top:"27px"},onClick:n}))))}var il=t(917163),ol=t(897071),Ks=t.n(ol),zs=t(377790);const ks=new(Ks())({customSchemaName:"commerce_setup"},{event_owner_team:"commerce",event_source:"web",product_area:"commerce_onboarding",user_website_id:Ze()(window,"Static.SQUARESPACE_CONTEXT.website.id",null),...(0,zs.ZP)()}),Xs="member-areas-guidance-card",Js="pages-panel";function rl(e){ks.track({actor:"user",action:"view",object_type:"card",object_identifier:Xs,object_value:`${e}-card`,product_page:Js})}function ya(e){ks.track({actor:"user",action:"click",object_type:"card",object_identifier:Xs,object_value:`${e}-button`,product_page:Js})}function Ea(e){ks.track({actor:"user",action:"close",object_type:"card",object_identifier:Xs,object_value:e,product_page:Js})}var es=t(316428),ll=t(442332),cl=t(58713),dl=t(468361);const Qs="SYNC_PAGES_PANEL_UI",ul=(e,r)=>Math.abs(fa()(r).diff(fa()(e),"hours")),gl=async(e,r)=>{if(et.Z.isSevenOne()||e)return!1;const n=await(0,nl.g)(),s=Object.values(n).every(a=>a);if(r){const a=new Date(r);if(ul(a,new Date)<6)return!1}return!s},$s=e=>{let{isInYuiPagesPanel:r}=e;const[n,s]=(0,I.useState)(null),[a,i]=(0,I.useState)(null),[o,d]=(0,I.useState)(!1),{preferences:p}=(0,es.ZP)();return(0,I.useEffect)(()=>{async function y(){const A=await gl(!!p.memberAreasGuidanceCardHide,p.memberAreaGuidanceCardHideRemind);i(A)}y()},[]),(0,I.useEffect)(()=>{async function y(){const A=await ll.getTotalMemberSitesCount();s(A>0)}return y(),Ve.Z.listen(y),()=>{Ve.Z.unlisten(y)}},[]),(0,I.useEffect)(()=>{!Gs()(n)&&!Gs()(a)&&(document.dispatchEvent(new CustomEvent(Qs)),a&&rl(n?"continue-setup":"create-member-area"))},[n,a]),a?I.createElement(I.Fragment,null,I.createElement(sl.Z,{sx:r?{px:6,marginBottom:n?6:2}:{my:2}},I.createElement(Ws.Z.Provider,{theme:Zs.rosetta.white},I.createElement(Vs.Z,null,I.createElement(Hs.Z,{flexDirection:"column",padding:4},I.createElement(Hs.Z,{justifyContent:"spaceBetween"},I.createElement(vt.Z.Body,{margin:0,paddingBottom:1,fontWeight:"semibold"},n?(0,l.t)("Get your member site ready to publish",null,{project:"MemberAreas"}):(0,l.t)("Sell access to exclusive content",null,{project:"MemberAreas"})),I.createElement(Sa.Z,{sx:{cursor:"pointer",paddingLeft:"11px"},onClick:()=>d(!0)})),I.createElement(vt.Z.Body,{margin:0,paddingBottom:1},n?(0,l.t)("Now that you\u2019ve created a member site, finish setting it up.",null,{project:"MemberAreas"}):(0,l.t)("Get started by adding your first member site.",null,{project:"MemberAreas"})),I.createElement(_t.Z.Primary,{onClick:()=>{if(n)ya("continue-setup"),le.Z.setIsShowingChecklistWizard(!0);else{var y;ya("create-member-area"),le.Z.setMACreationEntryPoint(ht.qp.PAGES_PANEL),le.Z.setMAEntryPointLevel2(ht.rN.CREATE_CARD_CTA),le.Z.setMAEntryPointPath(window.location.pathname),le.Z.setIsUserClickSimulated(!0),(y=document.querySelector(Ca.WI))===null||y===void 0||y.click()}}},n?(0,l.t)("Continue setup",null,{project:"MemberAreas"}):(0,l.t)("Create member site",null,{project:"MemberAreas"})))))),I.createElement(al,{isOpen:o,onClose:()=>{Ea("close-do-not-show-again"),(0,es.rk)({memberAreasGuidanceCardHide:!0}),d(!1),i(!1)},onRemind:async()=>{Ea("close-remind-me-later"),(0,es.rk)({memberAreaGuidanceCardHideRemind:Date.now()}),d(!1),i(!1)},onCancel:()=>d(!1)}),!(0,cl.Z)()&&I.createElement(dl.Z,null)):null};$s.getStores=()=>[Ve.Z],$s.getPropsFromStores=()=>({...Ve.Z.getState()});const pl=(0,es.BG)((0,il.withMemberAreas)(tl()($s)));var ml=t(546109),hl=t.n(ml),ft=t(868192);YUI.add("squarespace-navigation-item-list",function(e){e.namespace("Squarespace.Navigation");var r=e.Squarespace.Navigation.ItemList=e.Base.create("ItemList",e.Squarespace.Widgets.SSWidget,[],{initializer:function(){var n=this.get("modelList"),s=[];n.each(function(a){var i=a.get("collection");(!i||!i.get("destroyed"))&&s.push(this._createItemView(a))},this),this.set("itemViews",s),this.setResolutionError(),this.setProductNotification(),this.setGuidanceCard()},destructor:function(){if(e.Array.invoke(this.get("itemViews"),"destroy",!0),this.get("resolutionError")&&this.get("navigation").get("name")===re.Z.memberAreaNavigationName){var n=this.get("contentBox").one(".error-banner");ee.unmountComponentAtNode(n.getDOMNode())}if(this.get("productNotification")&&this.get("navigation").get("name")===re.Z.memberAreaNavigationName){var s=this.get("contentBox").one(".product-notification");ee.unmountComponentAtNode(s.getDOMNode())}if(this.get("guidanceCard")&&this.get("navigation").get("name")===re.Z.memberAreaNavigationName){var a=this.get("contentBox").one(".guidance-card");ee.unmountComponentAtNode(a.getDOMNode()),document.removeEventListener(Qs,this.syncUI.bind(this))}},setResolutionError:function(){var n=this.get("navigation"),s=!1;n.get("name")===re.Z.memberAreaNavigationName&&(s=n.get("errors").includes(hl().MEMBER_AREA_RESOLUTION)),this.set("resolutionError",s)},setProductNotification:function(){var n=this.get("navigation"),s=!1;if(n.get("name")===re.Z.memberAreaNavigationName){var a="MEMBER_AREAS_MULTIPLE_FEE_OPTIONS_PRODUCT_NOTIFICATION",i=_e.default.getState().tutorialsCompleted,o=i.includes(a);s=!o}this.set("productNotification",s&&!1)},setGuidanceCard:function(){var n=this.get("strings.testAttr")===re.Z.memberAreaNavigationTestAttr;this.set("guidanceCard",n)},renderUI:function(){r.superclass.renderUI.call(this);var n=this.get("contentBox");n.setAttribute("role","navigation"),n.setAttribute("aria-labelledby",this.get("labelId"));var s=n.one(".item-list-wrapper .item-list"),a=this.get("itemViews");e.Array.invoke(a,"render",s),this.get("resolutionError")&&this.renderErrorBanner(this.get("navigation").get("name")),this.get("productNotification")&&!this.get("empty")&&this.renderProductNotification(this.get("navigation").get("name")),this.get("guidanceCard")&&this.renderGuidanceCard()},renderErrorBanner:function(n){var s=this.get("contentBox").one(".error-banner");n===re.Z.memberAreaNavigationName&&ee.render(I.createElement(Qr),s.getDOMNode())},renderProductNotification:function(n){var s=this.get("contentBox").one(".product-notification");if(n===re.Z.memberAreaNavigationName&&this.get("strings.testAttr")){var a={titleText:(0,l.t)("Introducing multiple fee options",null,{project:"MemberAreas"}),bodyText:(0,l.t)("Give members the flexibility to pay monthly, yearly, or through installments by editing your member area.",null,{project:"MemberAreas"}),helpLink:ft.PAYWALLS_AND_PRICING_PLANS_ADD_A_SECOND_PRICING_OPTION,tutorialKey:"MEMBER_AREAS_MULTIPLE_FEE_OPTIONS_PRODUCT_NOTIFICATION"};ee.render(I.createElement($r,a),s.getDOMNode())}},renderGuidanceCard:function(){var n=this.get("contentBox").one(".guidance-card");n&&this.get("strings.testAttr")===re.Z.memberAreaNavigationTestAttr&&(document.addEventListener(Qs,this.syncUI.bind(this)),ee.render(I.createElement(We.ZP,null,I.createElement(Yt.SB,null,I.createElement(pl,{isInYuiPagesPanel:!0}))),n.getDOMNode()))},showItemListAddDialog:function(n,s){var a=s&&s.ancestor(".sqs-navigation-item-folder");e.Squarespace.Navigation.Events.fire("itemList:addDialog",{targetNode:s,itemList:this,isFolderAdd:!!a,config:{showOldDialog:n}})},openItemListAddDialog:function(){e.Squarespace.Navigation.Events.fire("itemList:addDialog",{itemList:this,isFolderAdd:!1,config:{}})},bindUI:function(){this.get("boundingBox").delegate("click",function(n){n.target.ancestor("."+this.getClassName("content"))===this.get("contentBox")&&(this.get("isLocked")||this.showItemListAddDialog(n.metaKey&&vs.Z.isFeatureEnabled(Zt().SECTION_ADMIN),n.target))},"footer .add-page",this),this.after("itemViewsChange",this._syncEmptyState),this._registerEvent(this.get("modelList").after("add",function(n){if(n.model.get("restored")||n.model.get("duplicated")){this._afterModelListAdd(n.model,n.index,{});return}this.get("modelList").onceAfter("save",function(){this._afterModelListAdd(n.model,n.index,{openModalForConfiguredUrl:n.openModalForConfiguredUrl})},this)},this),e.Squarespace.Navigation.Events.on("itemList:linkConfigure",function(n){if(n.itemList===this){this._addNavigationItem(n.model);var s=n.model.get("externalLink");s&&s.externalServiceProviderType&&e.Squarespace.Navigation.Events.fire("item:new",{model:n.model})}},this),e.Squarespace.Navigation.Events.on("itemList:dd",this._handleDDEvent,this))},syncUI:function(){this._syncEmptyState(),e.Array.invoke(this.get("itemViews"),"syncUI")},destroyAllModels:function(n){var s=e.Array.some(this.get("itemViews"),function(o){return o.get("selected")}),a=this.get("modelList").toArray();function i(){if(a.length===0){e.Squarespace.Navigation.Events.fire("itemList:delete",{selected:s}),n();return}a.pop().destroy({remove:!0},i)}i()},_syncEmptyState:function(){var n=this.get("empty")&&!this.get("resolutionError"),s=this.getClassName("empty");if(this.get("strings.testAttr")===re.Z.memberAreaNavigationTestAttr&&this.get("contentBox").one(".guidance-card").hasChildNodes()){this.get("boundingBox").toggleClass(s,!1);return}this.get("boundingBox").toggleClass(s,n)},_afterModelListAdd:function(n,s,a){if(n.isLink()){this._getLinkDetails(n,a);return}this._addNavigationItem(n,s),e.Squarespace.Navigation.Events.fire("item:new",{model:n})},_addNavigationItem:function(n){var s=this.get("itemViews"),a=this.get("contentBox").one(".item-list-wrapper .item-list"),i=this._createItemView(n,{isNew:!n.get("restored"),isDuplicated:n.get("duplicated")});i.render(),this.get("append")?(s.push(i),a.append(i.get("boundingBox"))):(s.unshift(i),a.prepend(i.get("boundingBox"))),this.set("itemViews",s)},_getLinkDetails:function(n,s){e.Squarespace.Navigation.Events.fire("itemList:linkAdd",{model:n,itemList:this,openModalForConfiguredUrl:s.openModalForConfiguredUrl})},_createItemView:function(n,s){var a=r.createNavigationItem(n,e.merge({},s,{isLocked:this.get("isLocked")}));return this._registerEvent(a.after("destroy",e.bind(this._removeItemView,this,a))),a},_removeItemView:function(n,s){var a=this.get("itemViews");a=e.Array.filter(a,function(i){return i!==n}),this.set("itemViews",a,s||{})},_handleDDEvent:function(n){n.sourceList!==this&&n.targetList!==this||(n.sourceList===this&&n.targetList===this?(this._handleDDRemove(n.itemView,!0),this._handleDDAdd(n.itemView,n.targetIndex)):n.sourceList===this?this._handleDDRemove(n.itemView):n.targetList===this&&this._handleDDAdd(n.itemView,n.targetIndex))},_handleDDAdd:function(n,s){var a=n.get("model"),i=this.get("modelList"),o=this.get("itemViews");i.add(a,{index:s,silent:!0}),i instanceof e.Squarespace.Models.NavigationFolderItemList?a.setFolderItemList(i):a.setFolderItemList(null),o.splice(s,0,n),this.set("itemViews",o)},_handleDDRemove:function(n,s){var a=n.get("model"),i=this.get("modelList");i.remove(a),this._removeItemView(n,{silent:s})},isMemberAreaRootNavigationItemList:function(){var n=this.get("navigation");return n.get("name")===re.Z.memberAreaNavigationName&&n.get("itemList")===this.get("modelList")}},{createNavigationItem:function(n,s){var a=e.Squarespace.Navigation.Utils.getNavigationItemType(n);return e.Lang.isValue(a)?new a(e.merge(s,{model:n})):new e.Squarespace.Navigation.Item.Base(e.merge(s,{model:n,supported:!1}))},CSS_PREFIX:"sqs-navigation-item-list",HANDLEBARS_TEMPLATE:"navigation-item-list.html",ATTRS:{acceptTypes:{valueFn:function(){return this.get("navigation").get("acceptTypes")}},containsHomepage:{getter:function(){return this.get("itemViews").some(function(n){return n.get("isHomepage")})}},resolutionError:{value:!1,validator:e.Squarespace.AttrValidators.isBoolean},productNotification:{value:!1,validator:e.Squarespace.AttrValidators.isBoolean},guidanceCard:{value:!1,validator:e.Squarespace.AttrValidators.isBoolean},empty:{getter:function(){return this.get("itemViews").length===0}},labelId:{valueFn:function(){return e.guid()},writeOnce:!0},isLocked:{valueFn:function(){return!e.Squarespace.UtilAuthenticated.userHasAccessPermission(fs().CONFIG_SETTINGS_GENERAL)},writeOnce:!0},itemViews:{value:[],validator:e.Squarespace.AttrValidators.isArray},navigation:{validator:e.Squarespace.AttrValidators.isInstanceOf(e.Model)},modelList:{valueFn:function(){return this.get("navigation").get("itemList")},validator:e.Squarespace.AttrValidators.isInstanceOf(e.ModelList)},showFooter:{value:!0,validator:e.Squarespace.AttrValidators.isBoolean},showHeader:{value:!0,validator:e.Squarespace.AttrValidators.isBoolean},append:{value:!1,validator:e.Squarespace.AttrValidators.isBoolean},supported:{value:!0,validator:e.Squarespace.AttrValidators.isBoolean},strings:{value:{testAttr:"",title:"",description:"",emptyMessage:"",addText:"",className:"",icon:""}}}})},"1.0",{requires:["array-invoke","base","model-list","squarespace-attr-validators","squarespace-models-connected-accounts","squarespace-navigation-events","squarespace-navigation-item-base","squarespace-navigation-item-list-template","squarespace-navigation-utils","squarespace-ss-widget"]});var vl=t(523714),ts=t.n(vl),Ys=t(883583),fl=t(17098),Sl=t(142849),_s=t(843156),Ia=t(480901);YUI.add("squarespace-navigation-item-base",function(e){e.namespace("Squarespace.Navigation.Item");var r=function(){},n={"strings.title":(0,l.t)("Remove Example Page",null,{project:"scripts-v6.navigation"}),"strings.message":(0,l.t)("Are you sure you wish to remove this example page?",null,{project:"scripts-v6.navigation"})},s=[e.Squarespace.Damask.Panel.MixinPanel,e.Squarespace.Damask.Menu.MixinContentManager],a=e.Squarespace.Navigation.Item.Base=e.Base.create("Base",e.Squarespace.Widgets.SSWidget,[e.Squarespace.Damask.Panel.MixinPusher],{initializer:function(){e.Squarespace.Navigation.Events.fire("item:initialize",{item:this,isPusher:this.get("isPusher")});var i=this.get("parent");i&&i.typeName==="variation"&&(ws.Z.getVariation(i.collectionId)||fl.Z.fetchData(i.collectionId)),this._toggleHomepage()},destructor:function(){e.Squarespace.Navigation.Events.fire("item:destroy",{item:this,selected:this.get("selected"),collection:this.get("collection"),isPusher:this.get("isPusher")})},renderUI:function(){a.superclass.renderUI.call(this);var i=this.get("contentBox"),o=this.get("collection");(this.get("hasChevron")||e.Squarespace.Navigation.ListUtils.shouldAddChevron(o))&&i.one(".item-wrapper").addClass("chevron"),o&&i.setAttribute("data-collection-id",o.get("id"))},bindUI:function(){var i=this.get("contentBox").one(".item-wrapper"),o;this._registerEvent(i.on("click",function(p){e.Lang.isValue(o)||(o=e.later(300,this,function(){o=null,!p._event.defaultPrevented&&!this.get("isLoading")&&this.select()}))},this),i.one(".title").on("dblclick",function(p){if(e.Lang.isValue(o)&&(o.cancel(),o=null),this.get("isDemoCollection")){e.Squarespace.Navigation.Events.fire("demo:editAttempt",{collection:this.get("collection"),callback:this.editTitle.bind(this)});return}this.get("isMemberArea")||this.editTitle()},this),i.on("contextmenu",function(d){d.preventDefault();var p=this.get("collection");p&&_s.Z.clickCollectionSettingsGear(p.get("id"),"pages-panel"),this.showEditorDialog()},this),i.one(".icon-configure").on("click",function(d){d.halt();var p=this.get("collection");p&&_s.Z.clickCollectionSettingsGear(p.get("id"),"pages-panel"),this.showEditorDialog()},this),i.one(".icon-delete").on("click",function(d){d.halt();var p=this.get("collection");p&&(0,lt.ms)({productArea:"pages-panel",collectionType:p.get("typeName"),identifier:"delete"}),this.confirmDelete()},this),this.get("model").on("destroy",this.destroy,this),e.Squarespace.Navigation.Events.after("item:new",function(d){var p={isDisplaced:d.model.get("isDisplaced")};d.model===this.get("model")&&(d.model.get("restored")?this.select():(this._animateIn(),this._newInstanceCallback(p)))},this),e.Squarespace.Navigation.Events.after("itemList:dd-saved",this._handleDrop,this),e.Squarespace.Navigation.Events.after("item:active",this._toggleSelected,this),e.Squarespace.Navigation.Events.after("collection:homepage",this._toggleHomepage,this),e.Squarespace.Navigation.Events.after("memberarea:homepage",this._toggleHomepage,this),e.Squarespace.Navigation.Events.after("memberarea:navigationTitleChange",function(d){this._updateTitle(d.request.id,d.request.name)},this)),this.after("selectedChange",this._toggleHighlighted),this._bindModelEvents()},syncUI:function(){var i=this.get("isDemoCollection"),o=this.get("boundingBox"),d=this.get("collection");o.toggleClass(this.getClassName("demo"),i),o.toggleClass(this.getClassName("disabled"),!d.get("enabled")),this.addPageProtectionTypeClass()},addPageProtectionTypeClass:function(){var i=this.get("collection"),o=i.get("pagePermissionType"),d=this.get("boundingBox");switch(o){case ts().SCRYPT_HASH:case Ys.ZP.SCRYPT_HASH:d.addClass(this.getClassName("password-protected"));break;default:d.removeClass(this.getClassName("password-protected"));break}},_bindModelEvents:function(){var i=this.get("collection");e.Lang.isValue(i)&&this._registerEvent(i.after("navigationTitleChange",this._updateTitle,this),i.after("save",this._emitCollectionUpdate,this),i.after("clonedExampleContent",this.syncUI,this),i.after("enabledChange",this.syncUI,this),i.after("pagePermissionTypeChange",this.syncUI,this))},select:function(i){var o=e.merge({item:this,collection:this.get("collection")},i);if(!this.get("model").get("supported")){this._emitUnsupportedEvent();return}e.Squarespace.Navigation.Events.fire("item:select",o),e.Squarespace.Navigation.Events.fire("item:active",o)},_showSpinner:function(){var i=e.Node.create("<div></div>");i.addClass("spinner-cog");var o=this.get("contentBox"),d=o.one(".icons");d.appendChild(i);var p=o.one(".icon-configure");p.hide();var y=new e.Squarespace.Spinner({color:"dark",size:"default",render:i});return function(){y.destroy(),y=null,i.remove(!0),p.show()}},showEditorDialog:function(){if(!this.get("isLocked")){if(!this.get("model").get("supported")&&this.get("collection").get("type")!==pe().TEMPLATE_PAGE){this._emitUnsupportedEvent();return}if(this.get("isDemoCollection")){this.set("isLoading",!0);var i=this._showSpinner();e.Squarespace.Navigation.Events.fire("demo:editAttempt",{collection:this.get("collection"),callback:(function(){i(),this.set("isLoading",!1),this.showEditorDialog()}).bind(this)});return}e.Squarespace.CollectionDialogPortal.showCollectionConfigurationDialog(this.get("collection").get("id"))}},confirmDelete:function(i){if(this._isLockedVariant()){a.showLockedVariantAlert();return}if(!this.get("isLocked")){if(this.get("isHomepage")){a.showDeleteHomepageAlert();return}if(this.get("containsHomepage")){a.showContainsHomepageAlert();return}var o=this.get("collection"),d=o&&Ee.Z.canHandleCollection(o.serialize()),p={title:d?this.get("collectionTitle"):e.Escape.html(this.get("collectionTitle"))},y,A;if(this.get("isDemoCollection")?(y=n["strings.title"],A=n["strings.message"]):(y=e.Lang.sub(this.get("strings.deleteTitle"),p),A=e.Lang.sub(this.get("strings.deleteMessage"),p)),d){Ee.Z.deleteCollection(o.get("id"),{modalTitle:y,modalMessage:A,callback:(function(){o&&(0,lt.mS)("pages-panel",o.get("typeName"),o.get("id")),i?i():this._animateOut()}).bind(this)});return}if(this.get("isMemberArea")){(0,Yt.Ci)((0,js.ut)({memberAreaDetails:{id:this.get("model").get("memberAreaId"),name:this.get("model").get("title")}}));return}var P=a.createDeleteConfirmation({"strings.title":y,"strings.message":A,instrumentationTitle:this.get("instrumentationTitle")});P.once("confirm",function(){o&&(0,lt.mS)("pages-panel",o.get("typeName"),o.get("id")),i?i():this._animateOut()},this)}},createPanel:function(i){var o=this.get("managerConfig"),d=this.get("collection");i=e.merge(i,{collection:d,collectionConfiguration:d.getTemplateConfiguration(),panelPathName:this.get("name")}),o.defaultCollectionConfig&&(i.defaultCollectionConfig=new e.Model(o.defaultCollectionConfig));var p=this._augmentManagerCtor(o.ctor);return new p(i)},editTitle:function(i){if(!this.get("isLocked")){var o=i&&i.callback?i.callback:null;i=e.merge({newItem:!1},i,{callback:function(d,p){o!==null&&o(d,p)}}),this.plug(e.Squarespace.Plugin.InlineInputEditor,{render:this.get("contentBox").one(".title"),data:this.get("collectionTitle"),onClear:i.callback,onCommit:function(d){d.prevVal!==d.newVal&&d.newVal!==""||i.newItem?(this.set("collectionTitle",d.newVal,i),i.newItem&&e.Global.fire("newCollection")):i.callback()}})}},_augmentManagerCtor:function(i){return e.Base.create(i.NAME,i,s,{},{CSS_PREFIX:i.CSS_PREFIX})},_destroyModel:function(i,o){var d=this.get("selected");this.get("model").destroy({remove:!0,deleteCollection:!1},o||this._fireItemDelete.bind(this,d))},_fireItemDelete:function(i){e.Squarespace.Navigation.Events.fire("item:delete",{selected:i})},_updateTitle:function(i){if(i.newVal!==i.prevVal){var o=e.Escape.html(i.newVal),d=this.get("contentBox").one(".title");d.setHTML(o),d.setAttribute("title",o)}},_emitCollectionUpdate:function(i){i.options.silent||e.Squarespace.Navigation.Events.fire("collection:update",{collection:this.get("collection"),item:this})},_emitUnsupportedEvent:function(){e.Squarespace.Navigation.Events.fire("item:unsupported",{item:this,collection:this.get("collection")})},_toggleSelected:function(i){var o=i.item===this||i.collection===this.get("collection")||i.collection===(this.get("collection")&&this.get("collection").get("id"));this.set("selected",o)},_toggleHighlighted:function(i){this.get("contentBox").one(".item-wrapper").toggleClass("selected",!!i.newVal)},_toggleHomepage:function(i){var o=this.get("collection");if(o){var d=o.getId(),p=i&&i.collection&&o===i.collection||Pe.Z.getHomepageCollectionId()===d,y=Ve.Z.getMemberAreasHomepages(),A=y[(0,Ia.dn)(d)]===d;p!==this.get("isHomepage")&&this.set("isHomepage",p),A!==this.get("isMemberAreaHomepage")&&this.set("isMAHomepage",A);var P=p||A;this.get("boundingBox").toggleClass(this.getClassName("homepage"),P)}},_handleDrop:function(i){var o=this.get("collection"),d=o&&this.get("collection").get("id"),p=i&&i.itemView&&i.itemView.get("collection"),y=p&&p.get("id"),A=d&&y&&d===y,P=i.itemTargetList&&i.itemTargetList.get("navigation"),U;i.itemTargetList&&i.itemTargetList.get("modelList")._templateNavigation?U=i.itemTargetList.get("modelList").getTemplateNavigation():i.itemTargetList&&(U=i.itemTargetList.get("modelList").getNavigationItemList().getTemplateNavigation());var K=P&&P.get("name")===re.Z.memberAreaNavigationName,O=U&&U.get("name")===re.Z.memberAreaNavigationName,q=K||O;if(A&&q){var J=o.get("pagePermissionType");(J===ts().SCRYPT_HASH||J===Ys.ZP.SCRYPT_HASH)&&(o.set("pagePermissionType",ts().MEMBER_SITE),o.set("passwordProtected",!1),o.set("password",""),Sl.Z.insert(o.toJSON()),Ee.Z.syncCollection(o.serialize()),a.showPasswordPageInMemberAreaAlert())}if(A&&o&&P){var X=null;q&&(X=(0,Ia.dn)(d)),(0,Ht.Nc)({collectionType:o.get("typeName"),productSection:P.get("name"),collectionId:d,memberAreaId:X})}},_newInstanceCallback:function(i){if(e.Squarespace.Navigation.ListUtils.isCollectionInStackedIndex(this.get("collection"))){this.select(),this.set("isNew",!1);return}(!i||!i.isDisplaced)&&this.editTitle({callback:e.bind(function(){this.select(),this.set("isNew",!1)},this),newItem:!0})},_isLockedVariant:function(){var i=this.get("parent");if(i&&i.typeName==="variation"){var o=ws.Z.getVariation(i.collectionId),d=this.get("model").get("collection").get("id");return ma.YU(o,d)}return!1},_animateIn:function(){var i=this.get("boundingBox"),o=i.get("offsetHeight");i.setStyle("height",0),i.anim({height:o},{end:function(){this.get("node").setStyle("height","auto")}}).run()},_animateOut:function(){this.get("boundingBox").anim({height:0},{end:this._destroyModel.bind(this)}).run()},_getHBTemplateContext:function(){return this.get("model").toJSON()},_registerPushEvent:r},{createDeleteConfirmation:function(i){return new e.Squarespace.Widgets.Confirmation(i)},showDeleteHomepageAlert:function(){var i=(0,l.t)("Cannot Delete Homepage",null,{project:"scripts-v6.navigation"}),o=(0,l.t)("This page cannot be deleted because it is your homepage. Please assign a new homepage before deleting.",null,{project:"scripts-v6.navigation"});Ee.Z.showAlert(i,o)},showLockedVariantAlert:function(){var i=(0,l.t)("Cannot Delete Variant",null,{project:"scripts-v6.navigation"}),o=(0,l.t)("You are trying to delete a variant with traffic allocated to it. Please either split traffic evenly in the parent variation or unallocate all trafficbefore deleting.",null,{project:"scripts-v6.navigation"});Ee.Z.showAlert(i,o)},showContainsHomepageAlert:function(){var i=(0,l.t)("Cannot Delete Collection",null,{project:"scripts-v6.navigation"}),o=(0,l.t)("This collection cannot be deleted because it contains your homepage. To delete it, please move or reassign the homepage to an item outside this collection.",null,{project:"scripts-v6.navigation"});Ee.Z.showAlert(i,o)},showPasswordPageInMemberAreaAlert:function(){var i=(0,l.t)("Password protection removed",null,{project:"scripts-v6.navigation"}),o=(0,l.t)("Moving this page to Member Areas removes password protection.",null,{project:"scripts-v6.navigation"});Ee.Z.showAlert(i,o)},CSS_PREFIX:"sqs-navigation-item",HANDLEBARS_TEMPLATE:"navigation-item.html",ATTRS:{collection:{getter:function(){return this.get("model").get("collection")}},collectionTitle:{getter:function(){return this.get("collection").get("navigationTitle")},setter:function(i,o,d){d=e.merge({newItem:!1,callback:r},d);var p=this.get("collection");return p.setAttrs({title:i,navigationTitle:i}),d.newItem&&p.set("urlId",null),p.save({silent:d.newItem},d.callback),i}},containsHomepage:{value:!1,readOnly:!0},hasChevron:{value:!1,readOnly:!0},isDemoCollection:{getter:function(){var i=this.get("collection");return e.Lang.isValue(i)?i.get("isDemoCollection"):!1}},isHomepage:{value:!1},isMAHomepage:{value:!1},isMemberArea:{getter:function(){return this.name==="MemberArea"}},isLoading:{value:!1},isLocked:{value:!1,writeOnce:!0},parent:{valueFn:function(){if(!this.get("model").get("collection"))return null;var i=this.get("model").get("collection").get("id"),o=pa.default.getPathToCollection(i),d=o[o.length-2];return d}},isNew:{value:!1},isDuplicated:{value:!1},loadFrame:{value:!0},model:{validator:e.Squarespace.AttrValidators.isInstanceOf(e.Model)},name:{getter:function(){return this.get("collection")?this.get("collection").get("id"):null}},selected:{value:!1},strings:{value:{deleteTitle:(0,l.t)("Delete {title}",null,{project:"scripts-v6.navigation"}),deleteMessage:(0,l.t)("Are you sure you want to delete {title}?",null,{project:"scripts-v6.navigation"})}},supported:{valueFn:function(){return this.get("model").get("supported")},validator:e.Squarespace.AttrValidators.isBoolean},instrumentationTitle:{value:null}}})},"1.0",{requires:["anim","base","model","squarespace-attr-validators","squarespace-content-manager-collection-dialog-portal","squarespace-damask-menu-mixin-content-manager","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-pusher","squarespace-navigation-events","squarespace-navigation-item-template","squarespace-navigation-list-utils","squarespace-plugin-inline-input-editor","squarespace-ss-widget","squarespace-util-authenticated","squarespace-widgets-confirmation","squarespace-spinner"]});var Cl=t(629266),yl=t.n(Cl);YUI.add("squarespace-damask-menu-mixin-content-manager",function(e){e.namespace("Squarespace.Damask.Menu"),e.Squarespace.Damask.Menu.MixinContentManager=e.Base.create("contentNavItem",e.Base,[],{initializer:function(){this.bindEvents()},bindEvents:function(){this._listWidget&&(this.after("contentItemChange",function(n){if(e.Lang.isValue(n.contentItem)){var s=this._listWidget.getWidgetForItem(n.contentItem);this._listWidget.setFocusedChild(s,{source:"preview"})}else this._listWidget.clearSelected()},this),this._listWidget.after("*:focusedChange",function(n){if(n.newVal){var s=n.target.get("item");this.set("selectedContentItemUrlId",s.get("urlId"),{item:s,source:n.source})}},this)),this.after("selectedContentItemUrlIdChange",function(n){n.source!=="afterSave"&&e.Squarespace.Singletons.Location.pointFrameToContentItem(n.item,!0)});var r=this.get("collection").items;this._bindItemsReordering(r),this._registerEvent(r.after("*:save",function(n){if(!(n.options&&n.options.source==="bulk-save-operation")){var s={item:n.target};n.target.get("workflowState")===ie().DELETED?(this.fire("item:remove",s),e.Squarespace.Singletons.Location.pointFrameToCollection(this.get("collection",!0))):(this.fire("item:save",s),this.get("selectedContentItemUrlId")===s.item.get("id")?e.Squarespace.Singletons.Location.requestFrameRefresh():this.set("selectedContentItemUrlId",s.item.get("urlId"),{item:s.item,source:"afterSave"}))}},this)),this._registerEvent(r.after("remove",function(n){this._isContentItemPublished(n.model)&&n.source!=="reorder"&&e.Squarespace.Singletons.Location.pointFrameToCollection(this.get("collection"),!0)},this)),this._registerEvent(r.after("*:mediaProcessingStateChange",function(n){this._isContentItemPublished(n.target)&&n.newVal===yl().READY&&n.prevVal!==null&&e.Squarespace.Singletons.Location.requestFrameRefresh()},this))},_bindItemsReordering:function(r){this._registerEvent(r.on("reordered",function(){e.Squarespace.Singletons.Location.requestFrameRefresh()},this))},_isContentItemPublished:function(r){return r.get("workflowState")===ie().PUBLISHED}},{ATTRS:{selectedContentItemUrlId:{}}})},"1.0",{requires:["base","promise","squarespace-content-item-types-selector","squarespace-singletons-location"]});var Zb=t(545101),Vb=t(944209),Gb=t(707924),El=t(816130),Ta=t.n(El);YUI.add("squarespace-navigation-utils",function(e){e.namespace("Squarespace.Navigation");var r=Ta(),n=e.Squarespace.Navigation.Item,s={};s[pe().COLLECTION_TYPE_PAGE]=n.Page,s[pe().PRODUCTS]=n.Products,s[pe().TEMPLATE_PAGE]=n.TemplatePage,s[pe().SPLASH_PAGE]=n.Cover;var a={};a[r.USER]=n.Gallery,a[r.CHRONOLOGICAL]=n.Blog,a[r.CALENDAR]=n.Events,a[r.MUSIC_ALBUM]=n.MusicAlbum,a[r.KNOWLEDGE_BASE]=n.Blog,e.Squarespace.Navigation.Utils={getNavigationItemType:function(i){var o=i.get("collection"),d=i.isMemberArea();if(d)return n.MemberArea;if(!e.Lang.isValue(o))return n.Link;var p=o.getTemplateConfiguration();if(p.get("folder"))return p.get("index")?e.Squarespace.Navigation.ListUtils.isCollectionAStackedIndex(o)?n.StackedIndex:n.Index:p.get("variation")?n.Variation:n.Folder;if(i.get("isUnsupportedIndexMaybe"))return n.Index;var y=o.get("type")||p.get("collectionType"),A=p.get("ordering")||o.get("ordering");return y===pe().COLLECTION_TYPE_GENERIC?a[A]:s[y]}}},"1.0",{requires:["squarespace-navigation-item-base","squarespace-navigation-item-blog","squarespace-navigation-item-cover","squarespace-navigation-item-events","squarespace-navigation-item-folder","squarespace-navigation-item-gallery","squarespace-navigation-item-link","squarespace-navigation-item-index","squarespace-navigation-item-variation","squarespace-navigation-item-member-area","squarespace-navigation-item-music-album","squarespace-navigation-item-page","squarespace-navigation-item-products","squarespace-navigation-item-stacked-index","squarespace-navigation-item-template-page"]});var Hb=t(947586),Aa=t(631064),en=t(759352),Il=t(975049),Tl=t(226338),Al=t(653631),Pl=t.n(Al);const bl={ios:{to:"https://apps.apple.com/app/apple-store/id1361797894?pt=204072&ct=mweb_config_app-redirect_squarespace-app&mt=8"},android:{to:"https://play.google.com/store/apps/details?id=com.squarespace.android.squarespaceapp&referrer=utm_source%3Dmweb_config_app-redirect_squarespace-app"}},Pa=e=>{let{backTo:r}=e;return I.createElement(Il.Z,{title:(0,l.t)("Squarespace on Desktop",null,{project:"apps.App"}),description:(0,l.t)("To build your site, go to your computer to use all Squarespace features.",null,{project:"apps.App"}),bannerClassName:Pl().banner,backTo:r,...Tl.t.selectOS(bl)})};Pa.propTypes={backTo:x().string.isRequired};const ba=Pa;YUI.add("squarespace-content-manager-widgets-blog",function(e){e.namespace("Squarespace.ContentManagerWidgets");var r=e.Squarespace.ContentManagerWidgets.Blog=e.Base.create("ContentManagerBlog",e.Squarespace.ContentManagerWidgets.ListBase,[e.Squarespace.Mixins.RecyclableItems],{initializer:function(){this.get("searchFilterEnabled")&&this._plugSearchFilter(),this.appRedirectContainer=e.Node.create("<div></div>")},destructor:function(){e.one("body").removeClass(this.getClassName("active")),ee.unmountComponentAtNode(this.appRedirectContainer.getDOMNode()),this.appRedirectContainer.remove(!0),this.appRedirectContainer=null},renderUI:function(){this._searchFilter&&this._searchFilter.render(this.get("contentBox")),r.superclass.renderUI.call(this),e.one("body").addClass(this.getClassName("active")),ee.render(I.createElement(ba,{backTo:ge.Z.forPagesPanel()}),this.appRedirectContainer.getDOMNode())},hideSearchIfNoItems:function(){var n=this.get("collection").get("isEmpty");this.get("searchFilterEnabled")&&this._searchFilter.get("filter")==="all"&&(this._searchFilter.get("boundingBox").getDOMNode().classList.toggle("hidden",n),this._emptyPlaceholderWidget.get("boundingBox").getDOMNode().classList.toggle("with-hidden-search-filters",n))},bindUI:function(){r.superclass.bindUI.call(this),this._registerEvent(this.get("collection").after("idChange",this.refreshPage,this))},syncUI:function(){r.superclass.syncUI.call(this),this.hideSearchIfNoItems()},_addListWidget:function(){var n=this.get("collection").items;this._listWidget=new(this.getProperty("LIST_WIDGET"))({collection:this.get("collection"),items:n,stickyHeadersEnabled:!1}),this._listWidget.addTarget(this)},_refreshPagingAfterEditing:function(n){var s=n.source,a=["bulk-remove","upload","reorder",this.name];e.Lang.isValue(s)&&e.Array.indexOf(a,s)!==-1||(n.type==="ContentItemList:add"&&this._hasActiveSearch()&&this._resetSearchFilter(),this.refreshPage())},loadNextPage:function(){this.get("addingPage")||(this._hasActiveSearch()?this._searchFilter&&this._searchFilter.hasMoreItems()&&(this.set("addingPage",!0),this._searchFilter.loadNextPage()):r.superclass.addPage.call(this,"next"))},_plugSearchFilter:function(){this._searchFilter=this.add({childType:e.Squarespace.Widgets.Blog.ListSearchFilter,collectionId:this.get("collection").get("id")}).item(0);var n=e.Squarespace.Widgets.Blog.ListSearchFilter.EVENTS;this.on("*:"+n.FILTER_CHANGED,function(s){e.Lang.isString(s.filter)&&(this.set("filter",s.filter.toLowerCase()),s.silent||this.refreshPage())},this),this.on("*:"+n.SEARCH_RETURNED,function(s){var a=this._mapSearchToContentItemList(s.items);s.page!==0&&a.size()>0?this._listWidget.get("items").add(a):this._listWidget.set("items",a);var i=!s.empty||this._listWidget.get("items").size()!==0;this.set("addingPage",!1),this._emptyPlaceholderWidget.set("visible",!i)}),this.on("*:"+n.SEARCH_CLEARED,this._handleClearSearch)},_mapSearchToContentItemList:function(n){e.Array.each(n,function(a){a.body=void 0,a.location=void 0,a.excerpt=void 0,a.itemUrl&&!a.fullUrl&&(a.fullUrl=a.itemUrl),a.workflowState||(a.workflowState=this._getWorkflowStateFromFilter())},this);var s=new e.ModelList({model:e.Squarespace.Models.ContentItem,items:n});return this._registerEvent(s.on("*:save",function(a){a.target.get("fullUrl")===e.Squarespace.Singletons.Location.getFrameUrl()&&e.Squarespace.Singletons.Location.requestFrameRefresh()},this)),s},_getWorkflowStateFromFilter:function(){return this.get("filter")==="draft"?ie().DRAFT:ie().PUBLISHED},_handleClearSearch:function(){this._listWidget.set("items",this.get("collection").items),this._syncVisibility()},_resetSearchFilter:function(){this._handleClearSearch(),this._searchFilter._clearSearch()},_updatePages:function(n,s){var a=this._listWidget.get("selection"),i=[];a&&!a.isEmpty()&&a.each(function(o,d){o.get("selected")&&i.push(o.get("item").get("id"))},this),r.superclass._updatePages.call(this,n,s),i.length!==0&&this._listWidget.each(function(o,d){var p=o.get("item").get("id");i.indexOf(p)!==-1&&o.set("selected",1)})},_deleteItem:function(n){n.set("workflowState",ie().DELETED);var s=this.get("router"),a=s.getCurrentLocation(),i=a.state.frameUrl,o=n.get("fullUrl"),d=n.get("urlId"),p=o.substring(0,o.indexOf(d)),y=(0,en.Cd)(i),A=i===o,P=y===(0,en.Cd)(p),U=y==="/",K=this.get("collection").get("homepage");setTimeout((function(){n.destroy({remove:!0},e.bind(function(){this.fire(this.getProperty("EVENTS").ITEM_DELETED,{item:n}),this.loadPage(),A?s.replaceFrameUrl(p):(P||K&&U)&&xe.default.refresh("content-manager-widgets/blog _deleteItem"),this.get("collection").get("isEmpty")&&(this._searchFilter.get("contentBox").all(".filter-button").each(function(O){O.toggleClass("active",O.getAttribute("data-filter-name")==="all")}),this._searchFilter.set("filter","all"),this.get("collection").onceAfter("load",function(){this.refreshPage()},this))},this))}).bind(this),300)},_hasActiveSearch:function(){return this.get("searchFilterEnabled")&&this._searchFilter.hasActiveQuery()},_showConfigurationDialog:function(n){return et.Z.isSevenOne()?((0,Ht.Zm)({itemId:n.get("id"),collectionType:"blog",collectionId:n.get("collectionId")}),this._enterInlineEditMode(n)):r.superclass._showConfigurationDialog.call(this,n)},_enterInlineEditMode:function(n){this.pendingEnterEditMode||(this.pendingEnterEditMode=!0,(0,Aa.pC)(n.get("fullUrl"),(function(){setTimeout((function(){xe.default.enterItemEditingMode(),this.pendingEnterEditMode=!1}).bind(this),100)}).bind(this)))}},{LIST_WIDGET:e.Squarespace.Widgets.Blog.ListView,PAGINATION_WIDGET:e.Squarespace.Widgets.BlogListPagination,CSS_PREFIX:"sqs-content-manager-blog",ATTRS:{addDebounceTime:{value:5e3},fields:{value:["addedOn","publishOn","body","author","title","urlId","fullUrl","likeCount","collectionId","id","coverImageUrl","recordType","contentType","commentCount","workflowState","recordTypeLabel","updatedOn"].join(",")},filter:{value:"all"},helpSectionIdentifier:{value:"blog"},pagination:{value:void 0},multiple:{value:!0},"strings.confirmTitle":{value:(0,l.t)("Delete Post?",null,{project:"scripts-v6.content-manager-widgets"})},"strings.confirmMessage":{value:(0,l.t)("Are you sure you wish to delete this post?",null,{project:"scripts-v6.content-manager-widgets"})},"strings.emptyTitle":{value:(0,l.t)("Add Post",null,{project:"scripts-v6.content-manager-widgets"})},"strings.emptyDescription":{value:(0,l.t)("No Posts",null,{project:"scripts-v6.content-manager-widgets"})},"strings.noResultsTitle":{value:(0,l.t)("No Results",null,{project:"scripts-v6.content-manager-widgets"})},searchFilterEnabled:{value:!0}}})},"1.0",{requires:["base","squarespace-blog-list-pagination","squarespace-content-item-types-base","squarespace-content-item-types-selector","squarespace-content-manager-blog-item-template","squarespace-content-manager-widgets-base","squarespace-content-manager-widgets-list-base","squarespace-content-manager-widgets-placeholder","squarespace-settings-item-recycle-bin","squarespace-mixins-recyclable-items","squarespace-models-content-item-list","squarespace-ss-widget","squarespace-util-authenticated","squarespace-widgets-blog-list-search-filter","squarespace-widgets-blog-list-view"]}),YUI.add("squarespace-blog-list-pagination",function(e){e.namespace("Squarespace.Widgets");var r=e.Squarespace.Widgets.BlogListPagination=e.Base.create("BlogListPagination",e.Squarespace.Widgets.Pagination,[],{bindUI:function(){r.superclass.bindUI.call(this),this.get("contentBox").delegate("click",function(n){n.target.siblings().removeClass("active"),n.target.addClass("active"),this.set("filter",n.target.getAttribute("data-filter")),n.halt()},"a[data-filter]",this),this.after("filterChange",this.syncUI,this)},toggleNav:function(n){var s=this.get("contentBox").one(".nav");s.toggleClass(this.getClassName("nav-hidden"),!n)},syncUI:function(){!this.get("hasNextPage")&&!this.get("hasPreviousPage")&&this.get("filter")==="all"?this.set("visible",!1):(this.set("visible",!0),this._prevEl.toggleClass("disabled",!this.get("hasPreviousPage")),this._nextEl.toggleClass("disabled",!this.get("hasNextPage")),this.set("className",""))}},{CSS_PREFIX:"sqs-pagination",TEMPLATE:'<span class="filters"><a href="#" data-filter="all">'+(0,l.t)("All",null,{project:"scripts-v6-root"})+'</a><a href="#" data-filter="published">'+(0,l.t)("Published",null,{project:"scripts-v6-root"})+'</a><a href="#" data-filter="draft">'+(0,l.t)("Draft",null,{project:"scripts-v6-root"})+'</a></span><span class="nav"><span class="page-prev"></span><span class="page">Pages</span><span class="page-next"></span><span class="loading"></span></span>',ATTRS:{filter:{value:"all"}}})},"1.0",{requires:["base","squarespace-pagination"]}),YUI.add("squarespace-pagination",function(e){e.namespace("Squarespace.Widgets");var r=e.Squarespace.Widgets.Pagination=e.Base.create("Pagination",e.Squarespace.Widgets.SSWidget,[e.WidgetChild],{_initialData:{},initializer:function(){this._saveInitialData()},renderUI:function(){r.superclass.renderUI.apply(this,arguments);var n=this.get("contentBox");this._prevEl=n.one(".page-prev"),this._nextEl=n.one(".page-next")},bindUI:function(){r.superclass.bindUI.apply(this,arguments),this._prevEl.on("click",this.prevPage,this),this._nextEl.on("click",this.nextPage,this)},syncUI:function(){!this.get("hasNextPage")&&!this.get("hasPreviousPage")?this.set("visible",!1):(this.set("visible",!0),this._prevEl.toggleClass("disabled",!this.get("hasPreviousPage")),this._nextEl.toggleClass("disabled",!this.get("hasNextPage")))},_requestPage:function(n,s){var a=["next","previous"];!e.Lang.isValue(s)||s.hasClass("disabled")||e.Array.indexOf(a,n)===-1||this.fire("pageRequested",{start:this.get(n+"PageStart"),direction:n})},nextPage:function(){this._requestPage("next",this._nextEl)},prevPage:function(){this._requestPage("previous",this._prevEl)},reset:function(){e.Object.each(this._initialData,function(n,s){this.set(s,n)},this),this.syncUI()},_saveInitialData:function(){e.Object.each(this.constructor.ATTRS,function(n,s){this._initialData[s]=this.get(s)},this)},getData:function(){return{hasNextPage:this.get("hasNextPage"),hasPreviousPage:this.get("hasPreviousPage"),nextPageStart:this.get("nextPageStart"),previousPageStart:this.get("previousPageStart"),totalItems:this.get("totalItems")}},update:function(n){e.Lang.isObject(n)&&(this.set("hasNextPage",n.hasNextPage),this.set("hasPreviousPage",n.hasPreviousPage),this.set("nextPageStart",n.nextPageStart),this.set("previousPageStart",n.previousPageStart),this.set("totalItems",n.totalItems)),this.syncUI()}},{CSS_PREFIX:"sqs-pagination",TEMPLATE:'<span class="nav"><span class="page-prev"></span><span class="page">'+(0,l.t)("Pages",null,{project:"scripts-v6-root"})+'</span><span class="page-next"></span><span class="loading"></span></span>',ATTRS:{visible:{value:!1},nextPage:{value:!1},prevPage:{value:!1},totalItems:{}}})},"1.0",{requires:["base","squarespace-ss-widget","widget-child"]});var qb=t(716130),Ll=t(210750),La=t.n(Ll),Dl=t(457739),ss=t.n(Dl),Nl=t(586745),Da=t.n(Nl),Rl=t(522364);YUI.add("squarespace-content-manager-widgets-list-base",function(e){e.namespace("Squarespace.ContentManagerWidgets");var r={ITEM_DELETED:"itemDeleted"},n=e.Squarespace.ContentManagerWidgets.ListBase=e.Base.create("ContentManagerBlog",e.Squarespace.ContentManagerWidgets.Base,[e.Squarespace.Mixins.AddContentItemHandlerMixin],{initializer:function(){this.publish(r.ITEM_DELETED),this._addListWidget(),this._paginationWidget=this.headerTray.add({childType:this.getProperty("PAGINATION_WIDGET"),pageSize:this.get("pageSize"),filter:this.get("filter"),totalPages:0,currentPage:0}).item(0),this._emptyPlaceholderWidget=this.add({childType:e.Squarespace.ContentManagerWidgets.PlaceHolderWidget,icon:"add",strings:{title:this.get("strings.emptyTitle"),description:this.get("strings.emptyDescription")},visible:!1,onClickHandler:e.bind(this.handleAddContentRequest,this)}).item(0),this._listEndSymbol=e.Node.create('<div class="sqs-list-end">'+(0,l.t)("~ fin ~",{},{project:"scripts-v6.content-manager-widgets",notes:"end of list"})+"</div>"),this.loadPage(),_s.Z.viewManageCollection(this.get("collection").get("id")),this.actionListener=new(Dt())(Nt.Z),this.actionListener.addActionListener(Rl.Z.CONTENT_BROWSER_DELETE_ITEM,this._onContentBrowserDeleteItem.bind(this))},destructor:function(){var s=this.get("collection").items;e.Lang.isValue(s)&&s.invoke("destroy"),this._listWidget.removeTarget(this),this._listWidget.destroy(),this._listWidget=null,this._paginationWidget=null,this._emptyPlaceholderWidget=null,e.Lang.isValue(this._scroller)&&(this._scroller.unplug(e.Plugin.ScrollInfo),this._scroller=null,this._stopSpinner()),this.actionListener.removeAllActionListeners(),this.actionListener=null},renderUI:function(){n.superclass.renderUI.call(this);var s=this.get("contentBox");this._listWidget.render(s),s.append(this._listEndSymbol)},bindUI:function(){n.superclass.bindUI.call(this);var s=e.one(e.config.doc.body);this._registerEvent(s.on("keydown",this._changeCurrentPage,this)),this._bindItemEvents(),this.after("paginationChange",this._updatePagingWidgets),this.after("addingPageChange",this._handleSpinner),this._registerEvent(this._paginationWidget.on("pageRequested",this._loadPageAndScrollTop,this)),this._registerEvent(this._paginationWidget.on("filterChange",function(a){this.set("filter",a.newVal),this.refreshPage()},this)),this._bindScrollEvents(),this._registerEvent(this._listWidget.after("editRequested",function(a){this._showConfigurationDialog(a.item)},this)),this._registerEvent(this._listWidget.after("deleteRequested",function(a){a.source==="bulk-remove"?this._deleteItem(a.item):this._showDeleteConfirmation(a.item),this._setSelection(a)},this)),this._registerEvent(this.get("collection").items.after("*:save",function(a){a.target.get("workflowState")===ie().DELETED?e.Squarespace.Singletons.Location.pointFrameToCollection(this.get("collection"),!0):e.Squarespace.Singletons.Location.setFrameUrlOrRefresh(a.target.get("fullUrl"))},this))},_bindItemEvents:function(s){s=s||this.get("collection").items;var a=["add","create","remove","bulk-remove","move-items","restored-items"];this._registerEvent(s.after(a,this._refreshPagingAfterEditing,this)),this._registerEvent(s.after(["load","add","remove","reset"],e.bind(this._syncVisibility,this))),this._registerEvent(this.get("collection").after("clonedExampleContent",function(){s.reset()},this))},_eventSourceIsRecycleBin:function(s){if(!e.Lang.isValue(s))return!1;var a=e.Lang.isValue(s)?s.source:null;if(e.Lang.isValue(a)&&a==="ContentItemRecycleBin")return!0;var i=s.options||{};return a=i.source,a==="ContentItemRecycleBin"},_syncVisibility:function(s){if(!this._eventSourceIsRecycleBin(s)){var a=!this.get("collection").get("isEmpty");if(this._emptyPlaceholderWidget.set("visible",!a),this._listWidget.set("visible",a),this._listEndSymbol.toggleView(a),e.Lang.isValue(this._noItemsFoundPlaceholder)){var i=this.get("contentBox"),o=i.all(".sqs-blog-item:not(.sqs-blog-item-hidden)").size()!==0,d=i.all(".sqs-blog-item-hidden").size()!==0;this._noItemsFoundPlaceholder.set("visible",d&&!o)}this.get("filter")!=="all"&&this._paginationWidget.toggleNav(a)}},getSelectedContentItem:function(){var s=this._listWidget.getFocusedWidget();return s?s.get("item"):null},_addListWidget:function(){this._listWidget=new(this.getProperty("LIST_WIDGET"))({collection:this.get("collection"),items:this.get("collection").items}),this._listWidget.addTarget(this)},_bindScrollEvents:function(){this._scroller=e.one(this._getClosestScrollingAncestor()),this._scroller.plug(e.Plugin.ScrollInfo),this._scroller.scrollInfo.on("scrollDown",La()(this._loadNextPageWhenScrolled,50),this)},_handleSpinner:function(s){s.newVal&&!this.hasSpinner()?this._startSpinner():this.hasSpinner()&&this._stopSpinner(),this.get("boundingBox").toggleClass("fully-loaded",!this.get("nextPageStart"))},_startSpinner:function(){this._stopSpinner();var s=new e.Squarespace.Spinner({color:"dark"}),a=e.Node.create('<div class="spinner-container"></div>'),i=e.later(10,this,function(){s.render(a)});this.get("contentBox").append(a),this._currentSpinHandle={cancel:function(){s.get("rendered")||i.cancel(),s.destroy(),a.remove(!0)}}},_stopSpinner:function(){this.hasSpinner()&&(this._currentSpinHandle.cancel(),this._currentSpinHandle=null)},hasSpinner:function(){return e.Lang.isValue(this._currentSpinHandle)},_loadNextPageWhenScrolled:function(s){var a=Math.ceil(100*s.scrollBottom/s.scrollHeight);a<75||this.loadNextPage()},_refreshPagingAfterEditing:function(s){var a=s.source,i=["bulk-remove","upload","reorder",this.name];e.Lang.isValue(a)&&e.Array.indexOf(i,a)!==-1||this.refreshPage()},_loadPageAndScrollTop:function(s){var a=s.direction==="next",i={limit:this.get("pageSize"),pageAction:a?ss().NEXT:ss().PREVIOUS,start:s.start};this.loadPage(i)},_changeCurrentPage:function(s){e.Global.OPEN_DIALOGS.length||(s.keyCode===37||s.keyCode==="37"?this._paginationWidget.nextPage():(s.keyCode===39||s.keyCode==="39")&&this._paginationWidget.prevPage())},refreshPage:function(){this.loadPage()},loadPage:function(s){s=s||{};var a=this.get("collection").items;this._registerEvent(a.onceAfter(this.get("id")+"|load",this._updatePages,this,a)),a.load(e.merge(this._getOptions(),s))},loadNextPage:function(){this.addPage("next")},addPage:function(s){var a=this.get("nextPageStart"),i=s==="next",o=new e.Squarespace.Models.ContentItemList({parent:this.get("collection")});if(!(!a||this.get("addingPage"))){this.set("addingPage",!0);var d=this._getOptions();d.pageAction=i?ss().NEXT:ss().PREVIOUS,d.start=a,o.load(d,e.bind(function(p){var y=o.get("pagination").nextPageStart||null;this.set("nextPageStart",y),this.get("collection").items.add(o,{silent:!0}),this._listWidget.syncUI(),this._registerItemPushers(p,o),this.set("addingPage",!1)},this))}},_getOptions:function(){var s=this.get("filter"),a={limit:this.get("pageSize")};if(this.get("fields")&&(a.fields=this.get("fields")),s!=="all"){var i=ie()[s.toUpperCase()];e.Lang.isValue(i)&&(a.workflowState=i)}return a},_updatePages:function(s,a){var i=a.get("pagination");this._listWidget.set("items",a),this.set("pagination",e.merge(i,{}))},_updatePagingWidgets:function(s){var a;e.Object.hasKey(s,"newVal")&&e.Lang.isValue(s.newVal)&&(a=s.newVal),this._paginationWidget.update(a),this.set("nextPageStart",a.nextPageStart),this.set("page",a.currentPage),this.syncUI()},_getClosestScrollingAncestor:function(){var s=this.get("contentBox");return e.Squarespace.NodeUtils.getClosestScrollingAncestor(s)},_setSelection:function(s){var a=s.item;this._listWidget.getWidgetForItem(a).set("selected",0)},_showConfigurationDialog:function(s){var a=e.Squarespace.ContentItemEditorFactory.getEditor(s),i=new a({model:s});s.load({forceReload:!0},(function(d,p){if(!d)try{var y=this.get("collection"),A=y.get("type"),P=p.recordType,U="blog";A===pe().COLLECTION_TYPE_GENERIC&&P===Da().EVENT&&(U="events"),(0,Ht.Zm)({itemId:p.id,collectionType:U,collectionId:y.get("id")})}catch{window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.captureMessage("track edit collection failed")}i.show()}).bind(this))},_showDeleteConfirmation:function(s){new e.Squarespace.Widgets.Confirmation({"strings.title":this.get("strings.confirmTitle"),"strings.message":this.get("strings.confirmMessage")}).on("confirm",function(){s.set("selected",0),this._deleteItem(s)},this)},_deleteItem:function(s){s.set("workflowState",ie().DELETED),s.sync("delete",{},e.bind(function(){this.fire(this.getProperty("EVENTS").ITEM_DELETED,{item:s}),this.loadPage()},this))},scrollToTop:function(){for(var s=this.get("contentBox");s.get("parentNode");){if(s.get("scrollTop")>0){s.anim({scroll:[0,0]}).run();break}s=s.get("parentNode")}},hasUnsavedChanges:function(){return!1},_onContentBrowserDeleteItem:function(s){this.get("collection").items.each(function(a){a.get("id")===s&&a.destroy()})}},{LIST_WIDGET:e.Squarespace.Widgets.List.SelectableListView,PAGINATION_WIDGET:e.Squarespace.Widgets.Pagination,EVENTS:r,CSS_PREFIX:"sqs-content-manager-list-base",ATTRS:{addingPage:{value:!1},fields:{},filter:{value:"all"},helpSectionIdentifier:{value:"list"},pagination:{value:void 0},multiple:{value:!0},"strings.emptyDescription":{value:(0,l.t)("This list contains no items. Click here to add your first item.",null,{project:"scripts-v6.content-manager-widgets"})},"strings.noResultsDescription":{value:(0,l.t)("No results found. Please refine your search.",null,{project:"scripts-v6.content-manager-widgets"})},"strings.noResultsTitle":{value:(0,l.t)("No Results",null,{project:"scripts-v6.content-manager-widgets"})},pageSize:{value:20},searchFilterEnabled:{value:!1}}})},"1.0",{requires:["base","node-scroll-info","squarespace-content-item-types-base","squarespace-content-item-types-selector","squarespace-content-manager-widgets-base","squarespace-content-manager-widgets-placeholder","squarespace-models-content-item-list","squarespace-node-utils","squarespace-pagination","squarespace-singletons-location","squarespace-spinner","squarespace-ss-widget","squarespace-widgets-list-selectable-view"]}),YUI.add("squarespace-content-manager-widgets-placeholder",function(e){var r=e.Squarespace.ContentManagerWidgets.PlaceHolderWidget=e.Base.create("PlaceHolderWidget",e.Squarespace.Widgets.SSWidget,[e.WidgetChild],{renderUI:function(){this.get("boundingBox").addClass(this.getClassName("icon-"+this.get("icon"))),this.get("contentBox").appendChild(e.Lang.sub(r.TEMPLATE,this.get("strings"))),this.get("onClickHandler")&&this.get("boundingBox").addClass(this.getClassName("clickable"))},bindUI:function(){var n=this.get("onClickHandler");n&&this.get("boundingBox").on("click",n,this)}},{CSS_PREFIX:"sqs-content-manager-placeholder",TEMPLATE:'<div class="title">{title}</div><div class="description">{description}</div>',ATTRS:{icon:{value:"add"},strings:{value:{title:(0,l.t)("Empty",null,{project:"scripts-v6.content-manager-widgets"}),description:(0,l.t)("There are no items to display.",null,{project:"scripts-v6.content-manager-widgets"})}},onClickHandler:{value:null}}})},"1.0",{requires:["base","squarespace-ss-widget","widget-child"]});var xl=t(596530),Na=t(897820);YUI.add("squarespace-settings-item-recycle-bin",function(e){e.namespace("Squarespace.Widgets");var r=e.Squarespace.Widgets.ContentItemRecycleBin=e.Base.create("ContentItemRecycleBin",e.Squarespace.Widgets.RecycleBin.Base,[e.Squarespace.Damask.Panel.MixinPanel],{initializer:function(){this._recycleBin=this.add({childType:e.Squarespace.Widgets.RecycleBin.ContentItemListView,collection:this.get("collection"),scrollingElement:this.get("contentBox")}).item(0),this._queuedItems=[],(0,We.GE)((0,Na.W8)())},renderUI:function(){r.superclass.renderUI.call(this),this.get("emptyButton").render(this.get("contentBox"))},bindUI:function(){r.superclass.bindUI.call(this),this._registerEvent(this._recycleBin.after("previewRequested",function(n){e.Squarespace.Singletons.Location.setFrameUrl(n.item.get("fullUrl"))})),this._registerEvent(this._recycleBin.after("restoreRequested",function(n){n.source==="bulk-restore"?this._startBulkRestore(n):this._startIndividualRestore(n)},this)),this._registerEvent(this._recycleBin.after("itemsChange",function(n){var s=n.newVal.item(0);e.Lang.isValue(s)&&e.Squarespace.Singletons.Location.setFrameUrl(s.get("fullUrl"))},this))},destructor:function(){(0,We.GE)((0,Na.kI)())},_setDescription:function(){var n=(0,xl.getEnvContext)(),s=n?Math.floor(n.workflowStateDeletedItemGcAgeInSeconds/60/60/24):0,a=(0,l.t)("Your Recycle Bin lets you restore items you have deleted in the past. Items will stay in the Recycle Bin for {daysBeforeRemoved} before they are removed by the system.",{daysBeforeRemoved:(0,l._6)({one:"{%n} day",other:"{%n} days"},s,null,{project:"scripts-v6-root",notes:"oldKey: daysBefore"})},{project:"scripts-v6-root"});this.set("strings.description",a)},setFocusedChildByItem:function(n){n&&this._recycleBin.setFocusedChildByItem(n)},confirmEmptyBin:function(){var n=this.get("collection");n.deleteTrashItems((function(s,a){if(a){new e.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Server Request Failed",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("Failed to empty the items bin.",null,{project:"scripts-v6-root"})});return}n.fire("empty-trash"),e.Squarespace.Singletons.Location.goBack()}).bind(this))},_startIndividualRestore:function(n){if(!this._shouldCheckPlanLimit()){this.restore(n.item);return}this._checkPlanLimit(1).then(e.bind(function(){this.restore(n.item)},this))},_startBulkRestore:function(n){if(!this._shouldCheckPlanLimit()){this._restoreItems(n.items);return}var s=n.items.size();this._checkPlanLimit(s).then(e.bind(function(a){this._restoreItems(n.items)},this))},_shouldCheckPlanLimit:function(){return this.get("collection").get("type")===pe().PRODUCTS},_restoreItems:function(n){n.each(function(s){this._restoreConfirm(s.get("item"))},this)},_restoreConfirm:function(n){this.get("contentBox").one(".controls").empty().setContent('<div class="status">'+(0,l.t)("Restoring...",null,{project:"scripts-v6-root"})+"</div>");var s=e.Squarespace.RecycleBin.Utils.restoreItem;s(n,function(){this.get("collection").items.fire("restored-items",{item:n}),e.Squarespace.Singletons.Location.goBack(),this.get("contentBox").one(".controls").empty().setContent('<div class="status"><span class="restore-msg">'+(0,l.t)("Restore successful.",null,{project:"scripts-v6-root"})+'</span><span class="button button-edit-page"><a href="#">'+(0,l.t)("View",null,{project:"scripts-v6-root"})+"</a></span></div>")},this)},_checkPlanLimit:function(n,s){return e.Squarespace.ProductViolations.isAllowedToAddItemToCollection(this.get("collection"),n)}},{CSS_PREFIX:"item-recycle-bin",ATTRS:{strings:{value:{title:(0,l.t)("Recycle Bin",null,{project:"scripts-v6-root"}),restoreConfirm:{title:(0,l.t)("Restore Item",null,{project:"scripts-v6-root"}),message:(0,l.t)("Are you sure you wish to restore this item?",null,{project:"scripts-v6-root"}),button:(0,l.t)("Restore",null,{project:"scripts-v6-root"})},emptyConfirm:{title:(0,l.t)("Empty the trash",null,{project:"scripts-v6-root"}),message:(0,l.t)("Are you sure you wish to empty this recycle bin? This is permanent and cannot be undone.",null,{project:"scripts-v6-root"})}}},filter:{value:"DELETED",writeOnce:"initOnly"},collection:{value:null,validator:e.Squarespace.AttrValidators.isObject},multiple:{value:!0}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-context","squarespace-damask-panel-mixin-panel","squarespace-dialog-button","squarespace-promises","squarespace-settings-recycle-bin-base","squarespace-settings-recycle-bin-utils","squarespace-singletons-location","squarespace-upsell-product-violations","squarespace-widgets-alert","squarespace-widgets-list-selectable-view","squarespace-widgets-recycle-bin-content-item-list-view"]}),YUI.add("squarespace-widgets-recycle-bin-content-item-list-view",function(e){e.namespace("Squarespace.Widgets.RecycleBin");var r={RESTORE_REQUESTED:"restoreRequested",PREVIEW_REQUESTED:"previewRequested"};e.Squarespace.Widgets.RecycleBin.ContentItemListView=e.Base.create("ContentItemListView",e.Squarespace.Widgets.RecycleBin.ListView,[e.Squarespace.Mixins.ContentCollectionBulkActionable],{restoreSelected:function(){var n=this.get("selection");this.fire(r.RESTORE_REQUESTED,{items:n,source:"bulk-restore"})},_getTrayButtons:function(){return[{label:(0,l.t)("Restore",null,{project:"scripts-v6.widgets"}),action:this.restoreSelected,context:this,className:"light no-frame"},{label:(0,l.t)("Delete",null,{project:"scripts-v6.widgets"}),action:this.removeSelected,context:this,className:"dark no-frame"}]}},{CSS_PREFIX:"sqs-recycle-bin-content-item-list",ATTRS:{strings:{value:{modelName:"content-item"}},model:{getter:function(){return this.get("collection")}},collection:{},models:{valueFn:function(){var n=this.get("collection").get("id"),s=e.Squarespace.API_ROOT+"content-collections/"+n+"/content-items";return new e.Squarespace.Models.GrowableContentItemList({root:s,url:s+"?workflowState="+ie().DELETED})}},defaultChildType:{value:e.Squarespace.Widgets.RecycleBin.ContentItemItemView}}})},"1.0",{requires:["base","squarespace-content-collection-bulk-actionable","squarespace-mixins-click-selectable-parent","squarespace-models-growable-content-item-list","squarespace-widgets-infinite-scroll-list","squarespace-widgets-recycle-bin-list-view","squarespace-widgets-recycle-bin-content-item-item-view"]}),YUI.add("squarespace-models-growable-content-item-list",function(e){e.namespace("Squarespace.Models"),e.Squarespace.Models.GrowableContentItemList=e.Base.create("GrowableContentItemList",e.Squarespace.Models.GrowableModelList,[],{model:e.Squarespace.Models.ContentItem},{ATTRS:{paginator:{valueFn:function(){return new e.Squarespace.Models.RangePaginator({models:this,orderBy:"updatedOn",orderDirection:In().DESCENDING})}}}})},"1.0",{requires:["base","squarespace-models-content-item","squarespace-models-growable-model-list"]}),YUI.add("squarespace-mixins-recyclable-items",function(e){e.namespace("Squarespace.Mixins"),e.Squarespace.Mixins.RecyclableItems=e.Base.create("recyclableItems",e.Base,[e.Squarespace.Mixins.EventRegistrar],{initializer:function(){if(!(this instanceof e.Squarespace.ContentManagerWidgets.ListBase))throw new Error("This needs to be mixed to a Content Manager List Base.");e.Do.after(this._renderButton,this,"renderUI",this),e.Do.after(this.checkDeletedItems,this,"renderUI",this),e.Do.after(this._bindListeners,this,"bindUI",this)},destructor:function(){this._binButton=null,e.Squarespace.Mixins.EventRegistrar.prototype.destructor.call(this)},_renderButton:function(){this._plugItemsBin()},_bindListeners:function(){this._binButton.on("click",function(r){r.halt(),this.showRecycleBin()},this),this._bindRecycleBinListeners()},_plugItemsBin:function(){e.Lang.isValue(this._binButton)||(this._binButton=this.get("boundingBox").appendChild('<div class="recycle-bin-button"><div class="icon"></div></div>'))},_syncRecycleBinVisibility:function(r){this._binButton&&this._binButton.toggleClass("visible",!!r)},_bindRecycleBinListeners:function(){var r=this.get("collection"),n=r.items;this._registerEvent(n.after("*:save",this.checkDeletedItems,this)),this._registerEvent(n.on("*:destroy",this._syncRecycleBinVisibility,this)),this._registerEvent(r.on("empty-trash",function(){this._syncRecycleBinVisibility(!1)},this));var s=e.Squarespace.ContentManagerWidgets.ListBase.EVENTS;this.on(s.ITEM_DELETED,function(a){this._syncRecycleBinVisibility(!0)},this)},checkDeletedItems:function(){var r=e.Squarespace.Promises.create(function(n,s){e.Data.get({url:"/api/content-collections/"+this.get("collection").get("id")+"/content-items",data:{workflowState:ie().DELETED,limit:1,fields:"id"},success:function(a){n(a.results.length!==0)},failure:function(a){s(a)}},this)},this);r.then(e.bind(this._syncRecycleBinVisibility,this))},showRecycleBin:function(){var r=this.get("collection"),n=ge.Z.forPagesPanel()+"/"+r.get("id")+"/recycle-bin",s=this.get("router");s.cacheAttrs(n,{collection:r}),s.push(n)}})},"1.0",{requires:["base","squarespace-settings-item-recycle-bin","squarespace-mixins-event-registrar","squarespace-promises","squarespace-singletons-location","squarespace-util"]}),YUI.add("squarespace-widgets-blog-list-search-filter",function(e){e.namespace("Squarespace.Widgets.Blog");var r={FILTER_CHANGED:"filterChanged",SEARCH_RETURNED:"searchReturned",SEARCH_CLEARED:"searchCleared"},n=e.Squarespace.Widgets.Blog.ListSearchFilter=e.Base.create("SearchFilter",e.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.publish(r.FILTER_CHANGED),this.publish(r.SEARCH_RETURNED),this.publish(r.SEARCH_CLEARED)},renderUI:function(){n.superclass.renderUI.call(this),this._addFilters()},bindUI:function(){n.superclass.bindUI.call(this);var s=this.get("contentBox");s.delegate("click",this._changeFilter,".filter-button",this),s.delegate("click",this._clearSearch,".btn-clear",this);var a=s.one("input"),i=La()(this._onKeyUp,200);this._registerEvent(a.on("keyup",function(o){o.keyCode===27&&(o.halt(),this._clearSearch())},this)),this._registerEvent(a.on("keyup",i,this)),this.after("filterChange",function(o){this.fire(r.FILTER_CHANGED,{filter:o.newVal,silent:this.hasActiveQuery()}),this.hasActiveQuery()&&this._search()}),this.after("queryChange",function(){this.get("contentBox").one(".btn-clear").toggleClass("empty-query",!this.hasActiveQuery()),this.hasActiveQuery()?(this.setAttrs({loadedItemCount:0,totalCount:0,page:0}),this._search()):this.fire(r.SEARCH_CLEARED)})},hasActiveQuery:function(){return this.get("query")!==""},loadNextPage:function(){this.hasMoreItems()&&(this.set("page",this.get("page")+1),this._search())},hasMoreItems:function(){return this.get("totalCount")>this.get("loadedItemCount")},_clearSearch:function(){this.setAttrs({query:"",loadedItemCount:0,totalCount:0,page:0}),this.get("contentBox").one("input").set("value","")},_onKeyUp:function(s){this.set("query",s.target.get("value"))},_addFilters:function(){var s=this.get("filterList"),a=this.get("contentBox").one(".search-filter-by-type");a.empty(),e.Array.each(s,function(i){var o=e.Node.create('<div class="filter-button" data-filter-name="'+i.key+'">'+i.label+"</div>");i.key===this.get("filter")&&o.addClass("active"),a.append(o)},this)},_changeFilter:function(s){var a=e.one(s.target).getAttribute("data-filter-name");this.get("contentBox").all(".filter-button").each(function(i){i.toggleClass("active",s.target===i)}),this.set("filter",a)},_search:function(){var s=this.get("page"),a=this.get("query"),i=this.get("limit"),o={q:a,p:s,size:i,f_collectionId:this.get("collectionId")};this.get("filter")!=="all"&&(o.f_workflowState=ie()[this.get("filter").toUpperCase()]),s===0&&this.set("loadedItemCount",0),e.Data.get({url:"/api/search/GeneralSearch",data:o,success:this._searchSuccess,failure:this._searchError},this)},_fireEmptySearchReturn:function(){this.fire(r.SEARCH_RETURNED,{empty:!0,items:[]})},_searchError:function(){this._fireEmptySearchReturn()},_searchSuccess:function(s){if(s.serviceError){this._fireEmptySearchReturn();return}this.set("totalCount",parseInt(s.totalCount,10)),this.set("loadedItemCount",this.get("loadedItemCount")+s.items.length),this.fire(r.SEARCH_RETURNED,{items:s.items,page:this.get("page"),empty:s.items.length<1})}},{CSS_PREFIX:"sqs-blog-list-search-filter",EVENTS:r,TEMPLATE:'<div class="search-filter-wrapper"><div class="search-filter-input"><input class="search-filter" placeholder="'+(0,l.t)("Search items\u2026",null,{project:"scripts-v6.widgets"})+'" type="text"><div class="btn-clear empty-query">Clear</div></div><div class="search-filter-by-type"> </div></div>',ATTRS:{collectionId:{},filter:{value:"all",validator:function(s){return e.Array.some(this.get("filterList"),function(a){return s===a.key})}},filterList:{value:[{key:"all",label:(0,l.t)("All",null,{project:"scripts-v6.widgets"})},{key:"draft",label:(0,l.t)("Drafts",null,{project:"scripts-v6.widgets"})},{key:"needs_review",label:(0,l.t)("Review",null,{project:"scripts-v6.widgets"})},{key:"scheduled",label:(0,l.t)("Scheduled",null,{project:"scripts-v6.widgets"})}]},page:{validator:e.Squarespace.AttrValidators.isNumber,value:0},limit:{validator:e.Squarespace.AttrValidators.isNumber,value:20},query:{value:"",setter:function(s){return e.Lang.trim(s)},validator:e.Squarespace.AttrValidators.isString},loadedItemCount:{validator:e.Squarespace.AttrValidators.isNumber,value:0},totalCount:{validator:e.Squarespace.AttrValidators.isNumber,value:0}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-ss-widget","widget-child","widget-parent"]});var Kb=t(134382);YUI.add("squarespace-widgets-blog-item-view",function(e){e.namespace("Squarespace.Widgets.Blog");var r=e.Squarespace.Widgets.Blog.ItemView=e.Base.create("BlogListItem",e.Squarespace.Widgets.List.BaseItem,[],{destructor:function(){this.unsubscribeFrameFinished&&this.unsubscribeFrameFinished()},bindUI:function(){r.superclass.bindUI.call(this),this.unsubscribeFrameFinished=(0,We.gH)(Vt.EeC,(function(n){if(n){var s=CONFIG_PANEL.get("previewFrame").get("contentBridge").get("contentItem");this._reloadItemIfAnExternalContentItemHasTheSameID(s),this._bindExternalChanges()}}).bind(this))},syncUI:function(){r.superclass.syncUI.call(this);var n=this.get("item").get("workflowState"),s=this._getTemplateContextForWorkflow(n),a=s.className;this.set("className",this.getClassName(a)),this.get("contentBox").one(".meta .status").setContent(s.message)},_reloadItemIfAnExternalContentItemHasTheSameID:function(n,s){n&&n.get("id")===this.get("item").get("id")&&(s?n.onceAfter("save",(function(){this.get("item").load()}).bind(this)):this.get("item").load())},_bindExternalChanges:function(){var n=window.CONFIG_PANEL.get("contentBridge").get("controller");n&&this._registerEvent(n.after("cmcSave70",function(s){this._reloadItemIfAnExternalContentItemHasTheSameID(s.model,!0)},this)),this._registerEvent(window.Y.Global.on("blogPostSave",function(s){this._reloadItemIfAnExternalContentItemHasTheSameID(s.model,!1)},this))},_getHBTemplateContext:function(){var n=r.superclass._getHBTemplateContext.call(this),s=this._getTemplateContextForWorkflow(n.workflowState);return e.Object.isEmpty(s)||(n.flag=s),s.message=s.message===(0,l.t)("Needs Review",null,{project:"scripts-v6.widgets"})?(0,l.t)("Review",null,{project:"scripts-v6.widgets"}):s.message,e.Lang.isString(n.title)&&(n.title=n.title.replace(/<em>|<\/em>/g,"")),n.noTitle=(0,l.t)("No Title",null,{project:"scripts-v6.widgets"}),e.Lang.isValue(n.proxyForId)&&(n.flag={className:"example-content",message:(0,l.t)("Example",null,{project:"scripts-v6.widgets"})}),n},_getTemplateContextForWorkflow:function(n){switch(n){case ie().SCHEDULED:return{className:"scheduled",message:(0,l.t)("Scheduled",null,{project:"scripts-v6.widgets"})};case ie().NEEDS_REVIEW:return{className:"needs-review",message:(0,l.t)("Needs Review",null,{project:"scripts-v6.widgets"})};case ie().DRAFT:return{className:"draft",message:(0,l.t)("Draft",null,{project:"scripts-v6.widgets"})};case ie().DELETED:return{className:"deleted",message:(0,l.t)("Deleted",null,{project:"scripts-v6.widgets"})};default:return{className:"published"}}}},{CSS_PREFIX:"sqs-blog-item",HANDLEBARS_TEMPLATE:"widgets-blog-item-view.html",ATTRS:{item:{}}})},"1.0",{requires:["base","squarespace-content-item-types-editor","squarespace-util","squarespace-widgets-blog-item-view-template","squarespace-widgets-confirmation","squarespace-widgets-list-base-item-view","widget-child"]});var zb=t(180443),kb=t(325062),Xb=t(271802);YUI.add("squarespace-content-manager-widgets-calendar",function(e){e.namespace("Squarespace.ContentManagerWidgets");var r=e.Squarespace.ContentManagerWidgets.Calendar=e.Base.create("ContentManagerCalendar",e.Squarespace.ContentManagerWidgets.ListBase,[],{initializer:function(){this.appRedirectContainer=e.Node.create("<div></div>")},destructor:function(){ee.unmountComponentAtNode(this.appRedirectContainer.getDOMNode()),this.appRedirectContainer.remove(!0),this.appRedirectContainer=null},bindUI:function(){r.superclass.bindUI.call(this),this.get("items")&&this._registerEvent(this.get("items").after(["*:save","*:remove","*:destroy"],this.refreshPage,this))},renderUI:function(){r.superclass.renderUI.call(this),ee.render(I.createElement(ba,{backTo:ge.Z.forPagesPanel()}),this.appRedirectContainer.getDOMNode())},syncUI:function(){r.superclass.syncUI.call(this);var n=this.get("collection").get("isEmpty");this._emptyPlaceholderWidget.set("visible",n),this._listWidget.set("visible",!n)},_showConfigurationDialog:function(n){return et.Z.isSevenOne()?this._enterInlineEditMode(n):r.superclass._showConfigurationDialog.call(this,n)},_enterInlineEditMode:function(n){(0,Aa.pC)(n.get("fullUrl"),function(){setTimeout(function(){xe.default.enterItemEditingMode()},100)})}},{LIST_WIDGET:e.Squarespace.Widgets.Event.ListView,PAGINATION_WIDGET:e.Squarespace.Widgets.Pagination,CSS_PREFIX:"sqs-content-manager-calendar",ATTRS:{fields:{value:null},pageSize:{value:40},searchFilterEnabled:{value:!1},"strings.confirmTitle":{value:(0,l.t)("Remove Event?",null,{project:"scripts-v6.content-manager-widgets"})},"strings.confirmMessage":{value:(0,l.t)("Are you sure you wish to remove this event?",null,{project:"scripts-v6.content-manager-widgets"})},"strings.emptyTitle":{value:(0,l.t)("Add Event",null,{project:"scripts-v6.content-manager-widgets"})},"strings.emptyDescription":{value:(0,l.t)("There are no events. Click here to add your first item.",null,{project:"scripts-v6.content-manager-widgets"})},multiple:{value:!0}}})},"1.0",{requires:["base","squarespace-widgets-event-list-view","squarespace-ss-widget","squarespace-content-manager-widgets-list-base","squarespace-content-manager-widgets-base","squarespace-content-manager-widgets-placeholder","squarespace-content-manager-blog-item-template","squarespace-content-item-types-selector","squarespace-content-item-types-base","squarespace-util-authenticated"]}),YUI.add("squarespace-widgets-event-list-view",function(e){e.namespace("Squarespace.Widgets.Event");var r={EDIT_REQUESTED:"editRequested",EVENT_EDIT_REQUESTED:"eventEditRequested",DELETE_REQUESTED:"deleteRequested"},n=e.Squarespace.Widgets.Event.ListView=e.Base.create("EventListView",e.Squarespace.Widgets.List.SelectableListView,[],{bindUI:function(){n.superclass.bindUI.call(this),this.on("*:buttonAction",function(s){s.action==="edit"?this.fire(r.EDIT_REQUESTED,{item:s.target.get("item")}):s.action==="delete"&&this.fire(r.DELETE_REQUESTED,{item:s.target.get("item")})})},_uiAddChild:function(s,a){var i=s.get("boundingBox");a.contains(i)||a.appendChild(s.get("boundingBox"))},_syncListItems:function(){var s=this.get("items");if(s){this.setLoadedState();var a=[];this.each(function(P){P.set("selected",0),a.push(P)}),e.Array.each(a,function(P){P.destroy()});var i=this.get("contentBox").one(".past-events"),o=i.one(".items"),d=this.get("contentBox").one(".upcoming-events"),p=d.one(".items"),y=s.getPastEvents();i.toggleClass("hidden",y.length===0),e.Array.each(y,function(P){this.add({item:P,render:o,"strings.typeName":(0,l.t)("event",null,{project:"scripts-v6.widgets"})})},this);var A=s.getUpcomingEvents();d.toggleClass("hidden",A.length===0),A=A.reverse(),e.Array.each(A,function(P){this.add({item:P,render:p})},this)}}},{CSS_PREFIX:"sqs-event-list-view",TEMPLATE:'<div class="upcoming-events events-list"><header class="events-header">'+(0,l.t)("Upcoming Events",null,{project:"scripts-v6.widgets"})+'</header><div class="items"></div></div><div class="past-events events-list"><header class="events-header">'+(0,l.t)("Past Events",null,{project:"scripts-v6.widgets"})+'</header><div class="items"></div></div>',ATTRS:{defaultChildType:{value:e.Squarespace.Widgets.Blog.ItemView},model:{getter:function(){return this.get("collection")}}}})},"1.0",{requires:["base","squarespace-util-authenticated","squarespace-widgets-blog-item-view","squarespace-widgets-list-selectable-view"]}),YUI.add("squarespace-navigation-item-folder",function(e){e.namespace("Squarespace.Navigation.Item");var r=r||function(){},n="collapsedFolder",s=e.Squarespace.Navigation.Item.Folder=e.Base.create("Folder",e.Squarespace.Navigation.Item.Base,[],{destructor:function(){this.get("itemList").destroy()},renderUI:function(){s.superclass.renderUI.apply(this,arguments);var a=this.get("contentBox");this.get("itemList").render(a),this.get("isCollapsed")&&this.get("itemList").get("boundingBox").setStyle("height",0)},bindUI:function(){s.superclass.bindUI.call(this);var a=this.get("contentBox").one(".icons .icon-chevron");this._registerEvent(a.on("click",function(i){i.halt();var o=this.get("isCollapsed");this.set("isCollapsed",!o)},this)),this.after("isCollapsedChange",function(i){i.newVal?this._animateCollapse():this._animateExpand(),this.syncUI()})},syncUI:function(){s.superclass.syncUI.call(this),this.get("boundingBox").toggleClass("collapsed",this.get("isCollapsed"))},select:function(){this.get("supported")?this.get("collection").get("typeName")==="variation"?e.Squarespace.Singletons.Location.go(ge.Z.forPagesPanel()+"/variation/"+this.get("collection").get("id")):e.Squarespace.Singletons.Location.go(ge.Z.forPagesPanel()):this._emitUnsupportedEvent()},_destroyModel:function(a,i){this.get("itemList").destroyAllModels((function(){s.superclass._destroyModel.call(this,a,i)}).bind(this))},_fireItemDelete:r,_newInstanceCallback:function(){this.editTitle({callback:e.bind(function(){e.Squarespace.Navigation.Events.fire("collection:update",{collection:this.get("collection"),item:this,isNew:!0}),this.set("isNew",!1)},this),newItem:!0})},_getHBTemplateContext:function(){return e.merge(this.get("model").toJSON(),{isFolder:!0})},_animateCollapse:function(){var a=this.get("itemList").get("boundingBox");a.setStyle("height",a.get("offsetHeight")),a.anim({height:0}).run()},_animateExpand:function(){var a=this.get("model").get("children").size(),i=this.get("itemList").get("boundingBox"),o=this.get("boundingBox").one(".item-wrapper").get("offsetHeight"),d=o*(a+1);a===0&&(d*=2),i.setStyle("height",0);var p=i.anim({height:d});p.once("end",function(){this.get("node").setStyle("height","auto")}),p.run()}},{CSS_PREFIX:"sqs-navigation-item-folder",HANDLEBARS_TEMPLATE:"navigation-item.html",ATTRS:{addText:{getter:function(){return this.get("strings.itemListAddText")||this.get("collection").getTemplateConfiguration().get("addText")}},containsHomepage:{getter:function(){return this.get("itemList").get("containsHomepage")}},hasChevron:{value:!0},itemList:{valueFn:function(){return new e.Squarespace.Navigation.ItemList({navigation:this.get("collection").getTemplateConfiguration(),modelList:this.get("model").get("children"),showFooter:this.get("isFooterVisible"),showHeader:!1,append:!0,isLocked:this.get("isLocked"),supported:this.get("supported"),"strings.emptyMessage":this.get("strings.itemListEmptyMessage"),"strings.addText":this.get("addText")})},readOnly:!0},isCollapsed:{valueFn:function(){if(!localStorage)return!1;var a=this.get("localStorageKey");return localStorage.getItem(a)==="true"||!1},setter:function(a){try{var i=this.get("localStorageKey");localStorage.setItem(i,a)}catch{}return a}},isFooterVisible:{valueFn:function(){return!0}},isPusher:{value:!1},loadFrame:{value:!1},localStorageKey:{getter:function(){return n+"-"+this.get("collection").get("id")}},navigation:{validator:e.Squarespace.AttrValidators.isInstanceOf(e.Model)},"strings.itemListEmptyMessage":{value:(0,l.t)("Empty Dropdown",null,{project:"scripts-v6.navigation"})},"strings.itemListAddText":{value:(0,l.t)("Add Page",null,{project:"scripts-v6.navigation"})}}})},"1.0",{requires:["anim","base","squarespace-attr-validators","squarespace-navigation-events","squarespace-navigation-item-base","squarespace-navigation-item-template","squarespace-singletons-location"]}),YUI.add("squarespace-navigation-item-gallery",function(e){e.namespace("Squarespace.Navigation.Item"),e.Squarespace.Navigation.Item.Gallery=e.Base.create("Gallery",e.Squarespace.Navigation.Item.Base,[],{},{CSS_PREFIX:e.Squarespace.Navigation.Item.Base.CSS_PREFIX,ATTRS:{hasChevron:{value:!0},managerConfig:{value:{ctor:e.Squarespace.ContentManagerWidgets.Gallery,defaultCollectionConfig:{acceptTypes:["image"],addText:(0,l.t)("Add Image",null,{project:"scripts-v6.navigation"})}}}}})},"1.0",{requires:["base","squarespace-content-manager-widgets-gallery","squarespace-navigation-item-base"]}),YUI.add("squarespace-content-manager-widgets-gallery",function(e){e.namespace("Squarespace.ContentManagerWidgets");var r=e.Squarespace.ContentManagerWidgets.Gallery=e.Base.create("ContentManagerGallery",e.Squarespace.ContentManagerWidgets.Base,[e.WidgetChild],{initializer:function(){this._contentItemGrid=this._createContentItemGrid(),this._itemsLoaded=!1,this._loadItems()},destructor:function(){e.one("body").removeClass("sqs-content-manager-gallery-active"),e.Lang.isValue(this.get("collection").items)&&this.get("collection").items.detach(this.get("id")+"|*"),this._contentItemGrid.destroy()},renderUI:function(){r.superclass.renderUI.call(this),e.one("body").addClass("sqs-content-manager-gallery-active");var n=e.Node.create('<div class="loading-state"></div>');new e.Squarespace.Spinner({size:100,color:"dark",render:n}).spin(),this.get("contentBox").append(n)},bindUI:function(){r.superclass.bindUI.call(this);var n=this.get("collection");this._registerEvent(n.after("synchronizingChange",function(s){!s.newVal&&s.prevVal&&this._loadItems()},this)),this._registerEvent(n.after("idChange",this._loadItems,this)),this._registerEvent(this._contentItemGrid.after("itemSaved",n.load,n)),this._registerEvent(n.items.after("*:save",function(s){var a=s.target.get("workflowState");(a===ie().DELETED||a===ie().PUBLISHED)&&e.Squarespace.Singletons.Location.pointFrameToCollection(this.get("collection"),!0)},this))},syncUI:function(){r.superclass.syncUI.call(this),this._itemsLoaded?this._setLoadedState():this._setLoadingState(),this.get("collection").get("isDemoCollection")&&this._contentItemGrid.set("dragSelectionEnabled",!1)},handleAddContentRequest:function(){this._contentItemGrid.handleAddContentRequest.apply(this._contentItemGrid,arguments)},_loadItems:function(){this.get("collection").items.load({limit:this.get("pageSize"),html:!1},this._registerCallback(function(){this._itemsLoaded=!0,this.syncUI()},this))},_setLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this.get("boundingBox").removeClass("content-loading");var n=this._contentItemGrid;n.get("rendered")?n.syncUI():n.render(this.get("contentBox")),this.fire("gallery-loaded")},_setLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._loadingTimer=this._registerTimer(e.later(500,this,function(){this.get("boundingBox").addClass("content-loading")}))},_createContentItemGrid:function(){return new e.Squarespace.ContentItemGrid(e.merge({collectionConfiguration:this.get("collectionConfiguration"),moveable:!0,dragRegion:this.get("boundingBox"),model:this.get("collection"),collection:this.get("collection"),contentItemImageOptions:{editable:!0,progressSpinnerSize:45,showActionOverlay:!0},showEmptyState:!0,imageSize:230,"strings.emptyUploadText":"<h1>"+(0,l.t)("Add Media",null,{project:"scripts-v6.content-manager-widgets"})+"</h1><p>"+(0,l.t)("This Gallery contains no items. Drag and drop images from your desktop to add some.",null,{project:"scripts-v6.content-manager-widgets"})+"</p>"},this.get("galleryOptions")))}},{CSS_PREFIX:"sqs-content-manager-gallery",ATTRS:{pageSize:{value:250},galleryOptions:{valueFn:function(){var n={minMargin:15,imageSize:120,dragRegion:this.get("boundingBox")};return n}},helpSectionIdentifier:{value:"gallery"},damask:{}}})},"1.0",{requires:["base","squarespace-ss-widget","squarespace-content-item-grid","squarespace-content-manager-widgets-base","squarespace-singletons-location","squarespace-spinner"]});var Jb=t(489521);YUI.add("squarespace-navigation-item-index",function(e){e.namespace("Squarespace.Navigation.Item"),e.Squarespace.Navigation.Item.Index=e.Base.create("Index",e.Squarespace.Navigation.Item.Folder,[],{select:function(){e.Squarespace.Navigation.Item.Base.prototype.select.call(this)},createPanel:function(){return null},_newInstanceCallback:function(){e.Squarespace.Navigation.Item.Base.prototype._newInstanceCallback.call(this)}},{CSS_PREFIX:e.Squarespace.Navigation.Item.Folder.CSS_PREFIX,ATTRS:{"strings.itemListEmptyMessage":{value:(0,l.t)("Empty Index",null,{project:"scripts-v6.navigation"})},"strings.itemListAddText":{value:""}}})},"1.0",{requires:["base","squarespace-navigation-item-base","squarespace-navigation-item-folder"]}),YUI.add("squarespace-navigation-item-variation",function(e){e.namespace("Squarespace.Navigation.Item"),e.Squarespace.Navigation.Item.Variation=e.Base.create("Variation",e.Squarespace.Navigation.Item.Folder,[],{select:function(){e.Squarespace.Navigation.Item.Base.prototype.select.call(this),e.Squarespace.Singletons.Location.go(ge.Z.forPagesPanel()+"/variation/"+this.get("collection").get("id"))}},{CSS_PREFIX:e.Squarespace.Navigation.Item.Folder.CSS_PREFIX,ATTRS:{"strings.itemListEmptyMessage":{value:(0,l.t)("Empty Variation",null,{project:"scripts-v6.navigation"})},"strings.itemListAddText":{value:""}}})},"1.0",{requires:["base","squarespace-navigation-item-base","squarespace-navigation-item-folder","squarespace-singletons-location"]}),YUI.add("squarespace-navigation-item-member-area",function(e){var r=r||function(){},n="collapsedMemberArea";e.namespace("Squarespace.Navigation.Item");var s=e.Squarespace.Navigation.Item.MemberArea=e.Base.create("MemberArea",e.Squarespace.Navigation.Item.Folder,[],{bindUI:function(){s.superclass.bindUI.call(this),this.configWebsiteUnsubscribe=(0,ot.QA)(ot.dM,(function(a){this.get("collectionId")===a.memberAreaId&&this._deleteMemberArea()}).bind(this)),this.configWebsiteUpdateActionMessageUnsubscribe=(0,ot.QA)(ot.ME,(function(a){this.get("collectionId")===a.memberSiteId&&(this.get("model").setAttrs({pagePermissionType:a.pagePermissionType}),this.updateActionMessage())}).bind(this))},destructor:function(){this.configWebsiteUnsubscribe&&this.configWebsiteUnsubscribe(),this.configWebsiteUpdateActionMessageUnsubscribe&&this.configWebsiteUpdateActionMessageUnsubscribe()},_deleteMemberArea:function(){this._moveMemberAreaPages(),this.get("model").destroy()},_moveMemberAreaPages:function(){for(var a=e.Squarespace.Singletons.TemplateNavigationList.getHiddenNavigation(),i=a.get("itemList"),o=this.get("model").get("children"),d=0;d<o.size();d++){var p=o.item(d),y=p.get("collection");y&&le.Z.removeMemberAreasHomepage(y.getId()),p.setIsDisplaced(!0),i.add(p)}i.save()},select:r,renderUI:function(){s.superclass.renderUI.call(this),this.get("boundingBox").setAttribute("data-test",Ca.En)},syncUI:function(){this.get("boundingBox").toggleClass("collapsed",this.get("isCollapsed"))},createPanel:function(){return null},isPaywalled:function(){var a=this.get("model").get("pagePermissionType");return a===ts().PRICING_PLAN||a===Ys.ZP.PRICING_PLAN},getActionStyleOverride:function(){return!!this.isPaywalled()},getActionMessage:function(){if(this.isPaywalled()){if(this.isPaywalled())return(0,l.t)("Paywalled",null,{project:"scripts-v6.navigation",notes:"Tiny tag below the member site title indicating it is paywalled."})}else return(0,l.t)("Pricing plan required",null,{project:"scripts-v6.navigation",notes:"Tiny tag below the member site title indicating it is not paywalled."});return""},_getHBTemplateContext:function(){return e.merge(s.superclass._getHBTemplateContext.apply(this,arguments),{title:this.get("collectionTitle"),showActionMessage:!0,actionMessage:this.getActionMessage(),actionMessageStyleOverride:this.getActionStyleOverride()})},_newInstanceCallback:function(){},showEditorDialog:function(){Ve.Z.getIsUserClickSimulated()||(le.Z.setMACreationEntryPoint(ht.qp.PAGES_PANEL),le.Z.setMAEntryPointLevel2(ht.rN.SETTINGS_GEAR_ICON),le.Z.setMAEntryPointPath(window.location.pathname)),(0,Yt.Ci)((0,js.l2)({memberAreaDetails:{id:this.get("model").get("memberAreaId"),name:this.get("model").get("title")}}))},_updateTitle:function(a,i){var o=this.get("model").get("title"),d=this.get("model").get("memberAreaId");if(!(i===o||d!==a)){var p=e.Escape.html(i),y=this.get("contentBox").one(".title");y.setHTML(p),y.setAttribute("title",p)}},updateActionMessage:function(){var a=this.get("contentBox").one(".action-message");if(!a){var i=this.get("contentBox").one(".item-wrapper");i.insert('<div class="action-message"></div>',i.get("lastChild")),a=this.get("contentBox").one(".action-message")}var o=this.getActionMessage();this.getActionStyleOverride()?a.addClass("paywalled-label"):a.removeClass("paywalled-label"),a.setHTML(o)}},{CSS_PREFIX:e.Squarespace.Navigation.Item.Folder.CSS_PREFIX,ATTRS:{"strings.itemListEmptyMessage":{value:(0,l.t)("Member site is empty",null,{project:"scripts-v6.navigation"})},"strings.itemListAddText":{value:(0,l.t)("Add Page",null,{project:"scripts-v6.navigation"})},addText:{getter:function(){return this.get("strings.itemListAddText")}},itemList:{valueFn:function(){var a=["subscription","gallery-block","template-page"],i=$e.default.getState().collectionConfigs,o=e.Array.filter(e.Object.keys(i),function(d){var p=i[d];return p.folder&&!p.index?!1:a.indexOf(d)===-1}).concat(["link"]);return new e.Squarespace.Navigation.ItemList({navigation:e.Squarespace.Singletons.TemplateNavigationList.getMemberAreaNavigation(),modelList:this.get("model").get("children"),showFooter:this.get("isFooterVisible"),showHeader:!1,append:!0,isLocked:this.get("isLocked"),supported:this.get("supported"),"strings.emptyMessage":this.get("strings.itemListEmptyMessage"),"strings.addText":this.get("addText"),acceptTypes:o})},readOnly:!0},localStorageKey:{getter:function(){return n+"-"+this.get("memberAreaId")}},collectionId:{getter:function(){return this.get("model").get("memberAreaId")}},collectionTitle:{getter:function(){return this.get("model").get("title")}},memberAreaDefaultLandingPageId:{getter:function(){return this.get("model").get("memberAreaDefaultLandingPageId")}},pagePermissionType:{getter:function(){return this.get("model").get("pagePermissionType")}}}})},"1.0",{requires:["base","squarespace-navigation-events","squarespace-navigation-item-base","squarespace-navigation-item-folder","squarespace-models-template-navigation-list"]}),YUI.add("squarespace-navigation-item-music-album",function(e){e.namespace("Squarespace.Navigation.Item"),e.Squarespace.Navigation.Item.MusicAlbum=e.Base.create("MusicAlbum",e.Squarespace.Navigation.Item.Base,[],{},{CSS_PREFIX:e.Squarespace.Navigation.Item.Base.CSS_PREFIX,ATTRS:{hasChevron:{value:!0},managerConfig:{value:{ctor:e.Squarespace.ContentManagerWidgets.MusicAlbum,defaultCollectionConfig:{acceptTypes:["audio"],addText:(0,l.t)("Add Track",null,{project:"scripts-v6.navigation"})}}}}})},"1.0",{requires:["base","squarespace-content-manager-widgets-music-album","squarespace-navigation-item-base"]});var Qb=t(423542),$b=t(719881),Ml=t(712953),Ol=t(508417);YUI.add("squarespace-content-manager-widgets-music-album-details-editor",function(e){e.namespace("Squarespace.MusicAlbum");var r=e.Squarespace.MusicAlbum.DetailsEditor=e.Base.create("detailsEditor",e.Squarespace.Widgets.SSWidget,[e.WidgetParent,e.WidgetChild],{initializer:function(){var n=this.get("collection"),s={};this._imageField=this.add({childType:e.Squarespace.DialogFields.FileImage,required:!1,height:282,square:!0,name:"mainImage",autoSaveFocalPoint:!0,contentLabel:(0,l.t)("Album Art",null,{project:"scripts-v6.content-manager-widgets"}),strings:s,description:(0,l.t)("The image to be used to represent this page if it is placed within an index",null,{project:"scripts-v6.content-manager-widgets"}),fieldStyle:"normal",titleStyle:"top",data:n.get("metadata.albumCover")||null,spinnerColor:"dark"}).item(0),this._albumNameField=this.add({childType:e.Squarespace.DialogFields.Text,strings:{title:(0,l.t)("Album Info",null,{project:"scripts-v6.content-manager-widgets"}),placeholder:(0,l.t)("Album Name",null,{project:"scripts-v6.content-manager-widgets"})},className:"thin album-name",render:this.get("contentBox").one(".album-name"),data:n.get("title")}).item(0),this._artistNameField=this.add({childType:e.Squarespace.DialogFields.Text,strings:{placeholder:(0,l.t)("Artist Name",null,{project:"scripts-v6.content-manager-widgets"})},className:"thin",render:this.get("contentBox").one(".artist-name"),data:n.get("metadata.artistName")}).item(0),this._descriptionField=this.add({childType:e.Squarespace.DialogFields.Wysiwyg,newRTEConfig:{onGeneratedTextUpdate:this._onGeneratedTextUpdate,placeholder:(0,l.t)("Write here\u2026",null,{project:"scripts-v6.content-item-types"}),toolbarOptions:["aiWriter","divider","bold","italic","link","clearFormatting"],toolbarProps:{shiftPadding:{top:98}},trackingProductArea:"pages-panel",trackingProductAreaLevel2:"album-description",sx:{mt:2}},name:"description",editorHeight:176,classNames:"title",saveOnEnter:!0,data:n.get("metadata.albumDescription"),preventThrottling:!0,strings:{title:(0,l.t)("Description",null,{project:"scripts-v6.content-manager-widgets"})}}).item(0),this.publish("change"),n.load(this._registerCallback(function(){var a={silent:!0};this._imageField.set("data",n.get("metadata.albumCover")||null,a),this._albumNameField.set("data",n.get("title"),a),this._artistNameField.set("data",n.get("metadata.artistName"),a),this._descriptionField.set("data",n.get("metadata.albumDescription"),a)},this))},_onGeneratedTextUpdate:e.bind(function(n){this.generatedResponses=n},this),_onSave:e.bind(function(){var n=(0,Ml.y)({generatedResponses:this.generatedResponses,savedResponses:this.savedResponses});n.idsToSave.length>0&&((0,Ol.A)(n.idsToSave),this.savedResponses=n.savedResponses)},this),destructor:function(){this._artistNameField=null,this._descriptionField=null,this._imageField=null,this._albumNameField=null,this.generatedResponses=null,this.savedResponses=[]},renderUI:function(){r.superclass.renderUI.call(this);var n=this.get("contentBox");this._imageField.render(n.one(".main-image")),this._albumNameField.render(n.one(".album-name")),this._artistNameField.render(n.one(".artist-name")),this._descriptionField.render(n.one(".description"))},bindUI:function(){r.superclass.bindUI.call(this);var n=this.get("collection");e.Lang.isObject(n.get("metadata"))||n.set("metadata",{}),n.set("metadata.typeName","music-album"),this._imageField.on("dataChange",function(s){if(!s.silent){var a=s.newVal;n.set("metadata.albumCoverId",a instanceof e.Squarespace.Models.ContentItem?a.get("id"):null),this.fire("change")}},this),this._albumNameField.on("dataChange",function(s){s.silent||this.fire("change")},this),this._artistNameField.on("dataChange",function(s){s.silent||this.fire("change")},this),this._descriptionField.on("dataChange",function(s){s.silent||this.fire("change")},this),e.Do.before(function(){n.set("title",this._albumNameField.get("data")),n.set("metadata.artistName",this._artistNameField.get("data")),n.set("metadata.albumDescription",this._descriptionField.get("data")),this._onSave()},this.get("parent"),"_saveChanges",this)}},{CSS_PREFIX:"sqs-music-album-details-editor",TEMPLATE:'<div class="main-image"><div class="title">'+(0,l.t)("Album Art",null,{project:"scripts-v6.content-manager-widgets"})+'</div></div><div class="strings artist-strings"><div class="album-name"></div><div class="artist-name"></div><div class="description"></div></div>',ATTRS:{collection:{value:null,validator:function(n){return n instanceof e.Squarespace.Models.ContentCollection}}}})},"1.0",{requires:["base","squarespace-dialog-file-image","squarespace-dialog-text","squarespace-models-content-collection","squarespace-ss-widget","squarespace-dialog-wysiwyg","widget-parent"]});var Yb=t(716603),_b=t(973331),ns=t(181298),tn=t(313176),Oe=t(489204);const as=new(Ks())({customSchemaName:"product_page_panel"},{event_owner_team:"commerce",event_source:"web",product_area:"commerce-merch",user_website_id:Ze()(window,"Static.SQUARESPACE_CONTEXT.website.id",null),...(0,zs.ZP)()}),Bl=e=>{let{collectionId:r,collectionTitle:n}=e;as.track({actor:"user",action:"view",object_type:"panel",object_identifier:"product-page-panel",object_display_name:n,object_id:r,product_design_identifier:"product-collections-v1"})},Ra=e=>{let{collectionId:r,objectValue:n}=e;as.track({actor:"user",action:"click",object_type:"button",object_id:r,object_identifier:"product-page-panel-expand-collapse-button",object_value:n,indirect_object_type:"panel",indirect_object_identifier:"product-page-panel",product_design_identifier:"product-collections-v1"})},Ul=e=>{let{collectionId:r,indirectObjectId:n,numberOfProductsMoved:s}=e;as.track({actor:"user",action:"move",object_type:"commerceproduct",object_id:r,object_identifier:"product-page-panel-products",object_value:s.toString(),indirect_object_id:n,indirect_object_type:"panel",indirect_object_identifier:"product-page-panel",product_design_identifier:"product-collections-v1"})},Fl=e=>{let{collectionId:r,collectionTitle:n,itemCount:s}=e;as.track({actor:"user",action:"input",object_type:"searchquery",object_id:r,object_display_name:n,object_identifier:"product-page-panel-input-searchquery",product_design_identifier:"product-collections-v1",item_count:s})};var jl=t(945664),xa="sqs-content-manager-product-grid-active",Ot="sqs-content-manager-product-grid-minimized",sn="sqs-content-manager-product-grid-maximized",wl="sqs-content-manager-panel-width-transition",nn="sqs-content-manager-product-grid-hide-resize-btn",an=1030,on=140,Ma=210;YUI.add("squarespace-content-manager-widgets-products-grid",function(e){var r=e.namespace("Squarespace.ContentManagerWidgets").ProductsGrid=e.Base.create("ContentManagerProducts",e.Squarespace.ContentManagerWidgets.Gallery,[],{initializer:function(){this._contentItemGrid.set("onDelete",function(n){var s=n.map(function(i){return i.get("id")});if(s.length){var a=s.map(function(i){return{id:i}});return(0,jl.F)(a)}return e.Promise.resolve()})},destructor:function(){e.one("body").removeClass(xa),e.one("body").removeClass(Ot),e.one("body").removeClass(sn),this._addPaymentMethodsCard&&this._addPaymentMethodsCard.destroy(),this._setupWizardCard&&this._setupWizardCard.destroy()},renderUI:function(){r.superclass.renderUI.apply(this,arguments),Bl({collectionId:this.get("collection").get("id"),collectionTitle:this.get("collection").get("title")}),e.one("body").addClass(xa),e.one("body").addClass(Ot),this._parentNode.addClass(wl),this.once("gallery-loaded",(function(){this.widthBelowBreakpoint=!1,this._renderResizeButton(),this._bindResizeButton(),this._bindReorderAnalytics(),window.innerWidth<an&&(this.widthBelowBreakpoint=!0,this._resizeProductsGrid(),this._resizeButton.addClass(nn))}).bind(this)),!ct.Z.isFeatureEnabled(Ge().COMMERCE)&&!ct.Z.isFeatureInAllPlans(Ge().COMMERCE)&&!(0,ga.A8)()&&this._renderOptionalUpgradeBanner()},bindUI:function(){r.superclass.bindUI.apply(this,arguments),this._bindQuickSearch(),this._registerEvent(this._contentItemGrid.after("selectedChange",this._syncSelectedIndicator,this))},handleAddContentRequest:function(){r.superclass.handleAddContentRequest.apply(this,[{analytics:{productPage:"collection-panel"}}])},_renderResizeButton:function(){var n=this._contentItemGrid.get("boundingBox"),s=e.Node.create('<div class="sqs-resize-button-container"><div class="sqs-resize-button" /></div>');this._resizeButton=s,n.appendChild(s)},_renderOptionalUpgradeBanner:function(){var n=this.get("contentBox"),s=(0,l.t)("To take orders, you will need to upgrade to the Business or a Commerce plan.",null,{project:"scripts-v6.content-manager-widgets"}),a=new e.Squarespace.Widgets.CommerceUpgradeBanner({dismissAction:e.bind(function(){this.get("upsellBanner").hide()},this),message:s,identifier:"product-grid"});a.render(n),this.set("upsellBanner",a)},_syncSelectedIndicator:function(){this.get("boundingBox").toggleClass("sqs-content-item-grid-has-selected-items",this._contentItemGrid.get("selected")!==0)},_getHeaderTrayOptions:function(){var n=r.superclass._getHeaderTrayOptions.apply(this,arguments);return n.buttons=[].concat(n.buttons,[{label:(0,l.t)("Search",null,{project:"scripts-v6.content-manager-widgets"}),className:"search",action:"revealQuickSearch"}]),n.inlineTitleEditingEnabled=!1,n.searchFieldEnabled=!0,n.itemIdRequestHandler=this._quickSearchItemIdRequestHandler.bind(this),n},_quickSearchItemIdRequestHandler:function(){var n=this._contentItemGrid,s=n.get("defaultChildType"),a=[];return n.each(function(i){i instanceof s&&a.push(i.get("item"))}),a.sort(function(i,o){var d=i.get("displayIndex"),p=o.get("displayIndex");return d<p?-1:d>p?1:0}).map(function(i){return i.get("id")})},_bindQuickSearch:function(){this._registerEvent(this.headerTray.on("QuickSearch:attemptedClose",function(){this._resetGridSearchStates()},this)),this._registerEvent(this.headerTray.on("QuickSearch:onResult",function(n){var s=n.results.map(function(o){return o.id}),a=this._contentItemGrid,i=a.get("defaultChildType");Fl({collectionId:this.get("collection").get("id"),collectionTitle:this.get("collection").get("title"),itemCount:n.results.length}),a.each(function(o){if(o instanceof i){var d=o.get("item").get("id"),p=!1;s.indexOf(d)>-1&&(p=!0),o.set("faded",!p)}})},this)),this._registerEvent(this.headerTray.on("QuickSearch:onSearchClear",function(n){this._resetGridSearchStates()},this)),this._registerEvent(this.headerTray.after("QuickSearch:focusedItemIdChange",function(n){var s=n.newVal,a=this._contentItemGrid,i=a.get("defaultChildType"),o=null;if(a.each(function(U){if(U instanceof i){var K=U.get("item").get("id"),O=!1;K===s&&(O=!0,o=U),U.set("selected",O?1:0)}}),o){var d=o.get("boundingBox").get("offsetTop"),p=o.get("boundingBox").get("offsetHeight"),y=this._contentItemGrid.get("boundingBox"),A=y.get("offsetHeight"),P=d+p/2-A/2;y.anim({scroll:[0,P]}).run()}},this))},_bindReorderAnalytics:function(){this._registerEvent(this._contentItemGrid._ddDelegate.on("reorder:reordered",function(n){var s=n.reordered,a=this._isMinimized()?"collapsed_view":"expanded_view";Ul({indirectObjectId:a,numberOfProductsMoved:s.length,collectionId:this.get("collection").get("id")})},this))},_bindResizeButton:function(){this._resizeButton&&(this._registerEvent(this._resizeButton.one(".sqs-resize-button").on("click",function(){this._resizeProductsGrid(),this._isMinimized()?Ra({collectionId:this.get("collection").get("id"),objectValue:"collapse"}):Ra({collectionId:this.get("collection").get("id"),objectValue:"expand"})},this)),this._registerEvent(this._contentItemGrid._resizeEmitter.on("resize",function(){window.innerWidth<an&&!this.widthBelowBreakpoint?(this.widthBelowBreakpoint=!0,this._resizeButton.addClass(nn),this._wasPreviouslyMinimized=this._isMinimized(),this._wasPreviouslyMinimized&&this._resizeProductsGrid()):window.innerWidth>=an&&this.widthBelowBreakpoint&&(this.widthBelowBreakpoint=!1,this._resizeButton.removeClass(nn),this._wasPreviouslyMinimized&&!this._isMinimized()&&this._resizeProductsGrid())},this)))},_isMinimized:function(){return e.one("body").hasClass(Ot)},_resizeProductsGrid:function(){var n=0;if(this.get("collection").items&&this.get("collection").items.size()>0&&(n=this.get("contentBox").one(".sqs-content-item-product").getDOMNode().getBoundingClientRect().width),this._isMinimized()){var s=window.innerWidth-ns.GRID_PX*2,a=this._contentItemGrid.get("minMargin"),i=Math.floor(s/(2*a+Ma)),o=100/i;this._contentItemGrid._stylesheet.set("innerHTML",this._contentItemGrid._stylesheet.get("innerHTML").concat(".sqs-content-item-product { min-width: "+n+"px !important; width: "+o+"% !important }")),this._parentNode.setStyle("width",tn.Z.getCSSPanelWidth(Oe.Z.FULL)),this.get("widthCallback")(Oe.Z.FULL),e.one("body").replaceClass(Ot,sn),e.Global.once("manual-resize",(function(){this._contentItemGrid.set("imageSize",Ma)}).bind(this))}else this._contentItemGrid._stylesheet.set("innerHTML",this._contentItemGrid._stylesheet.get("innerHTML").concat(".sqs-content-item-product { min-width: "+on+"px !important;  max-width: "+n+"px; width: 33.3% !important }")),this._parentNode.setStyle("width",tn.Z.getCSSPanelWidth(Oe.Z.FULL_WITHOUT_TUCKED_FRAME)),this.get("widthCallback")(Oe.Z.WIDE),e.one("body").replaceClass(sn,Ot),e.Global.once("manual-resize",(function(){this._contentItemGrid.set("imageSize",on)}).bind(this))},_resetGridSearchStates:function(){var n=this._contentItemGrid,s=n.get("defaultChildType");n.each(function(a){a instanceof s&&a.set("faded",!1)})}},{CSS_PREFIX:"sqs-content-manager-widgets-products-grid",ATTRS:{resizeable:{value:!0},resizeableMinWidth:{value:ns.COLUMN_WIDTH_PX*3},upsellBanner:{value:null},galleryOptions:{valueFn:function(){var n={},s=e.Squarespace.ContentManagerWidgets.Gallery.ATTRS.galleryOptions.valueFn;return s&&(n=s.apply(this,arguments)),n.defaultChildType=e.Squarespace.ContentItemProduct,n.imageSize=on,n.contentItemImageOptions=n.contentItemImageOptions||{},n.contentItemImageOptions.showActionOverlay=!1,n.showActionTray=!0,n.actionTrayCtor=e.Squarespace.Widgets.ProductGridActionTray,n.buttonsOrder=["moveToCollection","moveToBeginning","moveToEnd"],n.moveable=!0,n.useBoundingBoxAsScrollNode=!0,n["strings.emptyTitle"]=(0,l.t)("Add Products",null,{project:"scripts-v6.content-manager-widgets"}),n["strings.emptyDesc"]=(0,l.t)("No Products",null,{project:"scripts-v6.content-manager-widgets"})+"<br/>"+(0,l.t)("Click here to add your first product.",null,{project:"scripts-v6.content-manager-widgets"}),n["strings.removeLabel"]=(0,l.t)("Delete",null,{project:"scripts-v6.content-manager-widgets"}),n}}}})},"1.0",{requires:["base","squarespace-content-item-product","squarespace-content-manager-widgets-gallery","squarespace-widgets-commerce-upgrade-banner"]});var Wl=t(296923),Zl=t.n(Wl),Vl=t(713820),Gl=Vl.ProductComposerOrchestrator;YUI.add("squarespace-content-item-product",function(e){e.namespace("Squarespace");var r=e.Squarespace.ContentItemProduct=e.Base.create("ContentItemProduct",e.Squarespace.ContentItemImage,[],{bindUI:function(){r.superclass.bindUI.apply(this,arguments),this.after("fadedChange",function(n){this.get("boundingBox").toggleClass("faded",n.newVal)}),this.after("image-preview-loaded",function(){this._swapImageForBackgroundImage()},this)},_swapImageForBackgroundImage:function(){var n=this.get("contentBox"),s=n.one(".inside img");if(!(!s||s.hasClass("backgrounded"))){var a=this.get("item").get("mediaFocalPoint");s.get("parentNode").setStyles({backgroundImage:'url("'+s.getAttribute("src")+'")',backgroundSize:"cover",backgroundPosition:a.y*100+"% "+a.x*100+"%"}),s.addClass("backgrounded")}},syncUI:function(){r.superclass.syncUI.apply(this,arguments),this.get("preventLoad")&&this._showItemSpecificInformation()},_showItemSpecificInformation:function(){var n=this.get("item"),s=this.get("contentBox"),a=s.one(".inside");s.all(".product-meta").remove();var i=[];this._isProductSoldOut()&&!this._isUnlimited()&&i.push("sold-out");var o=e.Squarespace.Commerce.onSale(n.toJSON()),d=this.get("item").get("title"),p=d.length===0;p&&(d=(0,l.t)("Unnamed Product",null,{project:"scripts-v6-root"}));var y=e.Node.create('<div class="product-meta"><div class="title '+(p?"empty":"")+'">'+d+'</div><div class="logistics"><div class="price '+(o?"on-sale":"")+'">'+this._getPriceLabel()+'</div><div class="stock '+i.join(" ")+'">'+this._getStockLabel()+"</div></div></div>");if(s.append(y),a.all(".notice").remove(),this.get("showWorkflowState")){var A=n.get("workflowState"),P=(0,l.t)("Hidden",null,{project:"scripts-v6-root"});if(A===ie().SCHEDULED&&(P=(0,l.t)("Scheduled",null,{project:"scripts-v6-root"})),A!==ie().PUBLISHED){var U=e.Node.create('<div class="notice">'+P+"</div>");a.append(U)}}},_getPriceLabel:function(){var n=this.get("item");return e.Squarespace.Commerce.priceString(n.toJSON()).replace(/\.00/g,"")},_getStockLabel:function(){var n=this.get("item").get("structuredContent");if(n&&n.get("subscriptionPlan"))return(0,l.t)("Subscription",null,{project:"scripts-v6-root"});if(this._isUnlimited())return"&infin;";var s=this._getStockCount();return(0,l._6)({one:"1 Unit",other:"{%n} Units"},s,null,{project:"scripts-v6-root"})},_isUnlimited:function(){return this.get("item").get("variants").reduce(function(n,s){return n?s.unlimited&&n:!1},!0)},_getStockCount:function(){return this.get("item").get("variants").reduce(function(n,s){var a=s.qtyInStock;return e.Lang.isNumber(a)?a+n:n},0)},_isProductSoldOut:function(){var n=this.get("item").get("productType");return n===Zl().DIGITAL?!1:this._getStockCount()===0},getDragSelectableRegionNode:function(){return this.get("contentBox")},isValidMouseDownTarget:function(n){return n!==this.get("boundingBox")},buildEditor:function(){var n=r.superclass.buildEditor.apply(this,arguments);return n.on("savingClose",(function(){var s=this.get("item");s.load({forceReload:!0},this.syncUI)}).bind(this)),n},editItem:function(){var n=this.get("item");Gl.openProductComposer({productId:n.get("id"),onSavingClose:(function(){n.load({forceReload:!0},this.syncUI),xe.default.refresh()}).bind(this)})}},{CSS_PREFIX:"sqs-content-item-product",ATTRS:{imageLoaderMode:{value:"fill"},showActionOverlay:{value:!1},faded:{value:!1},imageLoaderUseFixedRatioRenderer:{value:!0}}})},"1.0",{requires:["base","squarespace-commerce-utils","squarespace-content-item-image"]});var Hl=t(559409),Oa=t.n(Hl),Ba=t(995821),Ua=t(506739);YUI.add("squarespace-widgets-commerce-upgrade-banner",function(e){e.namespace("Squarespace.Widgets");var r=e.Squarespace.Widgets.CommerceUpgradeBanner=e.Base.create("CommerceUpgradeBanner",e.Squarespace.Widgets.SSWidget,[],{renderUI:function(){r.superclass.renderUI.call(this),this.get("contentBox").append('<div class="message">'+this._getMessage()+'</div><div class="upgradeButton">'+(0,l.t)("Upgrade Now",null,{project:"scripts-v6.widgets"})+'</div><div class="dismissButton"></div>'),this._track("upsell_commerce_banner_shown")},bindUI:function(){r.superclass.renderUI.call(this);var n=this.get("contentBox");this._registerEvent(n.one(".upgradeButton").on("click",this._gotoUpgrade,this)),this._registerEvent(n.one(".dismissButton").on("click",this._dismiss,this))},_dismiss:function(){this._track("upsell_commerce_banner_dismiss"),this.get("dismissAction")()},_gotoUpgrade:function(){this._track("upsell_commerce_banner_upgrade_click");var n=e.Squarespace.Context.getInstance().get("website").get("siteStatus.value");n===Oa().TRIAL?e.Squarespace.Singletons.Location.go(Ba.Z[Ua.Z.TRIAL_UPGRADE_PLAN]):e.Squarespace.Singletons.Location.go(Ba.Z[Ua.Z.UPGRADE_PLAN])},_getMessage:function(){return this.get("message")},_track:function(n){var s=e.Squarespace.Context.getInstance().get("website").get("siteStatus.value"),a=s===Oa().TRIAL;(0,Cs.Z)(n,{isTrial:a,identifier:this.get("identifier")})}},{CSS_PREFIX:"sqs-commerce-upgrade-banner",ATTRS:{identifier:{value:""},dismissAction:{validator:e.Squarespace.AttrValidators.isFunctionOrNull},message:{value:""}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-ui-base","squarespace-util","squarespace-ss-widget"]}),YUI.add("squarespace-navigation-item-stacked-index",function(e){e.namespace("Squarespace.Navigation.Item");var r=e.Squarespace.Navigation.Item.StackedIndex=e.Base.create("Index",e.Squarespace.Navigation.Item.Index,[],{_getSectionForCollectionId:function(n){for(var s=this.get("itemList"),a=s.get("itemViews"),i=0;i<a.length;i++)if(a[i].get("collection").get("id")===n)return a[i];return null},_deleteCollectionInIndex:function(n){if(n.collectionId){var s=this._getSectionForCollectionId(n.collectionId);s&&s.confirmDelete(function(){s.get("boundingBox").setStyle("height",0),s._destroyModel(null,function(){e.Global.fire("stack:collection:deleted",{collectionId:n.collectionId})})})}},_getCollectionAtIndex:function(n){if(!(!n.stackCollectionId||n.stackCollectionId!==this.get("collection").get("id"))){var s=this.get("itemList").get("itemViews");return s[n.itemIndex]?s[n.itemIndex].get("collection"):null}},_reorderCollectionByIndex:function(n){var s=n.collection||this._getCollectionAtIndex({stackCollectionId:n.indexCollectionId,itemIndex:n.index});if(s){var a=this._getSectionForCollectionId(s.get("id"));a&&this.get("itemList").moveStackItem(a,n.targetIndex)}},bindUI:function(){r.superclass.bindUI.call(this),this._registerEvent(e.Global.on("stack:requestReorder",this._reorderCollectionByIndex,this),e.Global.on("stack:collection:requestDelete",this._deleteCollectionInIndex,this))}},{CSS_PREFIX:e.Squarespace.Navigation.Item.Folder.CSS_PREFIX,ATTRS:{itemList:{valueFn:function(){return new e.Squarespace.StackedIndex.List({"strings.emptyMessage":(0,l.t)("Empty index",null,{project:"scripts-v6.navigation"}),"strings.addText":(0,l.t)("Add Section",null,{project:"scripts-v6.navigation"}),indexCollection:this.get("collection"),navigation:this.get("collection").getTemplateConfiguration(),modelList:this.get("model").get("children"),showFooter:!0,showHeader:!1,append:!0,supported:this.get("supported")})},readOnly:!0}}})},"1.0",{requires:["base","squarespace-navigation-item-base","squarespace-navigation-item-folder","squarespace-navigation-item-index"]}),YUI.add("squarespace-navigation-item-template-page",function(e){e.namespace("Squarespace.Navigation.Item");var r=r||function(){};e.Squarespace.Navigation.Item.TemplatePage=e.Base.create("TemplatePage",e.Squarespace.Navigation.Item.Base,[],{createPanel:function(){return null},confirmDelete:function(){new e.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Cannot Delete Template Page",null,{project:"scripts-v6.navigation"}),"strings.message":(0,l.t)("This page is a page that is provided by the template you are currently using. It cannot be removed while you are using this template.",null,{project:"scripts-v6.navigation"})})},_destroyModel:r},{CSS_PREFIX:e.Squarespace.Navigation.Item.Base.CSS_PREFIX,ATTRS:{isPusher:{value:!1}}})},"1.0",{requires:["base","squarespace-navigation-item-base","squarespace-widgets-alert"]}),YUI.add("squarespace-navigation-stacked-index-list",function(e){var r={page:{title:(0,l.t)("Content",null,{project:"scripts-v6.navigation"}),icon:null,navigationTitle:(0,l.t)("New Section",null,{project:"scripts-v6.navigation"})}};e.namespace("Squarespace.StackedIndex");var n=e.Squarespace.StackedIndex.List=e.Base.create("List",e.Squarespace.Navigation.ItemList,[],{bindUI:function(){n.superclass.bindUI.call(this),this._registerEvent(e.Global.on("stack:requestNewItem",this._requestAddItemToStack,this))},showItemListAddDialog:function(){e.Squarespace.Navigation.Events.fire("itemList:addDialog",{itemList:this,config:{strings:r},isSectionAdd:!0})},_requestAddItemToStack:function(s){if(s.indexCollection.get("id")===this.get("indexCollection").get("id")){e.Lang.isNumber(s.insertIndex)?this.set("insertIndex",s.insertIndex):this.set("insertIndex",null);var a={dialog:s.dialogConfig,strings:r},i=this.get("acceptTypes");if(i.length===1){var o={};e.Lang.isNumber(this.get("insertIndex"))?o.index=this.get("insertIndex"):this.get("append")||(o.index=0),e.Squarespace.Navigation.Events.fire("itemList:addItem",{type:i[0],modelList:this.get("modelList"),opts:e.merge(o,a.strings)});return}e.Squarespace.Navigation.Events.fire("itemList:addDialog",{itemList:this,title:(0,l.t)("Create new section",null,{project:"scripts-v6.navigation"}),config:a,isSectionAdd:!0})}},_addNavigationItem:function(s,a){var i=this.get("itemViews"),o=this.get("contentBox").one(".item-list-wrapper .item-list"),d=o.get("children")._nodes,p=this._createItemView(s,{isNew:!s.get("restored"),isDuplicated:s.get("duplicated")});p.render(),e.Lang.isNumber(a)&&d[a]?(i.splice(a,0,p),o.insertBefore(p.get("boundingBox"),d[a])):this.get("append")?(i.push(p),o.append(p.get("boundingBox"))):(i.unshift(p),o.prepend(p.get("boundingBox"))),this.set("itemViews",i)},moveStackItem:function(s,a){var i=this.get("modelList").indexOf(s.get("model"));if(i!==a){a<0&&(a=0),a>=this.get("modelList").length&&(a=this.get("modelList").length-1);var o={source:{item:s,list:this},target:{list:this,idx:a}},d=this.get("contentBox").one(".item-list-wrapper .item-list"),p=d.get("children")._nodes;i<a?d.insertBefore(s.get("boundingBox"),p[a+1]):d.insertBefore(s.get("boundingBox"),p[a]),e.Squarespace.Navigation.Events.fire("itemList:dd",{sourceList:o.source.list,targetList:o.target.list,itemView:o.source.item,targetIndex:o.target.idx,updateStyle:"silent"})}},_createItemView:function(s,a){var i=n.createNavigationItem(s,e.merge({},a,{isLocked:this.get("isLocked")}));return this._registerEvent(i.after("destroy",e.bind(this._removeItemView,this,i))),i}},{createNavigationItem:function(s,a){var i=e.merge(a,{model:s,instrumentationTitle:(0,l.t)("Delete Index Section",null,{project:"scripts-v6.navigation"}),strings:{deleteTitle:"",deleteMessage:(0,l.t)("Are you sure you want to delete this section?",null,{project:"scripts-v6.navigation"})}}),o=e.Squarespace.Navigation.Utils.getNavigationItemType(s);return e.Lang.isValue(o)?new o(i):new e.Squarespace.Navigation.Item.Base(e.merge(i,{supported:!1}))},CSS_PREFIX:"sqs-navigation-item-list",HANDLEBARS_TEMPLATE:"navigation-item-list.html",ATTRS:{indexCollection:{value:null},insertIndex:{value:null,validator:e.Squarespace.AttrValidators.isNullOrNumber}}})},"B)",{requires:["array-invoke","base","model-list","squarespace-navigation-item-list"]}),YUI.add("squarespace-async-wrappers-collections",function(e){e.namespace("Squarespace.AsyncWrappers");var r={GALLERY:"gallery",PAGE:"page",PRODUCTS:"products",PROJECT:"project"},n={};n[r.GALLERY]=Oe.Z.WIDE,n[r.PRODUCTS]=Oe.Z.WIDE,n[r.PAGE]=Oe.Z.PAGES,n[r.PROJECT]=Oe.Z.PAGES;function s(){return e.Array.flatten(e.Squarespace.Singletons.TemplateNavigationList.toArray().map(function(a){return a.get("itemList").toArray().map(function(i){return[].concat(i,i.get("children").toArray())})}))}e.Squarespace.AsyncWrappers.CollectionEditor=e.Base.create("CollectionEditor",e.Squarespace.Damask.Panel.AsyncDataPanel,[],{destructor:function(){var a=this.constructor.superclass.destructor;a&&a.apply(this,arguments),this.cleanup&&this.cleanup()},getPanel:function(a,i,o){var d=e.Squarespace.ContentCollectionCache.getById(a.id);if(!d){o(ge.Z.forPagesPanel());return}this.set("typeName",this.getTypeNameForCollection(d)),this.setPanelWidth(),this.ensureFrameURL(d),this.renderPanel(a,i,o,d)},setPanelWidth:function(){var a=this.get("width"),i=tn.Z.getCSSPanelWidth(a);this.get("boundingBox").setStyle("width",i)},ensureFrameURL:function(a){var i=this.get("location.state.frameUrl"),o="/"+a.get("urlId");i!==o&&!e.Squarespace.Navigation.ListUtils.isCollectionInIndex(a)&&!e.Squarespace.Navigation.ListUtils.indexCollectionRequiresReload(a)&&this.get("router").replaceFrameUrl(o)},renderPanel:function(a,i,o,d){var p=null,y=s().find(function(q){var J=q.get("collection");if(!J)return!1;var X=J.get("id")===a.id;return!X&&e.Squarespace.ContentCollectionUtils.isIndex(J)&&(p=e.Array.find(q.get("children")._items,function(ne){return ne.get("collectionId")===a.id}),p)?p:X});y=p||y;var A=e.Squarespace.Navigation.Utils.getNavigationItemType(y),P=A.ATTRS.managerConfig&&A.ATTRS.managerConfig.value;if(!P){o(ge.Z.forPagesPanel());return}var U={};P.config&&typeof P.config=="function"&&(U=P.config(y.get("collection")));var K=e.merge(U,{collection:d,collectionConfiguration:d.getTemplateConfiguration(),damask:this.get("damask")});P.defaultCollectionConfig&&(K.defaultCollectionConfig=new e.Model(P.defaultCollectionConfig));var O=e.Base.create(P.ctor.NAME,P.ctor,[e.Squarespace.Damask.Menu.MixinContentManager],{},{CSS_PREFIX:P.ctor.CSS_PREFIX});setTimeout(function(){i(new O(K))},0)},getTypeNameForCollection:function(a){return e.Squarespace.ContentCollectionUtils.isProduct(a)?r.PRODUCTS:e.Squarespace.ContentCollectionUtils.isGallery(a)?r.GALLERY:e.Squarespace.ContentCollectionUtils.isPage(a)?r.PAGE:e.Squarespace.Navigation.ListUtils.isCollectionAPortfolio(a)?r.PROJECT:a.get("typeName")}},{ATTRS:{typeName:{},width:{readOnly:!0,getter:function(){var a=n[this.get("typeName")];return a||Oe.Z.PANEL}}}})},"1.0",{requires:["base","model","squarespace-damask-panel-async-data-panel","squarespace-models-content-collection","squarespace-models-template-navigation-list","squarespace-navigation-list-utils"]});var ql=t(963351),Fa=t.n(ql),Kl=t(434927),Se=t.n(Kl);YUI.add("squarespace-async-wrappers-cover-page-editors-for-website",function(e){e.namespace("Squarespace.AsyncWrappers");var r={video:function(o,d){return{strings:{title:(0,l.t)("Video",null,{project:"scripts-v6.async-wrappers"}),description:(0,l.t)("Paste the URL of a video (Vimeo, YouTube, Animoto, Wistia, etc.) you'd like to embed, and Squarespace will attempt to locate and format this video for your site.",null,{project:"scripts-v6.async-wrappers"})},slideSummary:o,sliceAreas:d.filterBySliceTypes(e.Squarespace.SliceTypeGroups.VIDEO),sliceTypeOrdering:[Se().VIDEO]}},audio:function(o,d){return{strings:{title:(0,l.t)("Audio",null,{project:"scripts-v6.async-wrappers"}),description:(0,l.t)("Add one or more tracks to create a playlist of songs. Then organize your tracks to create an album.",null,{project:"scripts-v6.async-wrappers"})},slideSummary:o,sliceAreas:d.filterBySliceTypes(e.Squarespace.SliceTypeGroups.AUDIO),sliceTypeOrdering:[Se().ALBUM]}},location:function(o,d){return{strings:{title:(0,l.t)("Map Location",null,{project:"scripts-v6.async-wrappers"}),description:(0,l.t)("Input your address into the fields below to let people know where you, your business, or your next event can be found. To edit how this location appears in text, navigate to the Branding & Text panel.",null,{project:"scripts-v6.async-wrappers"})},slideSummary:o,sliceAreas:d.filterBySliceTypes(e.Squarespace.SliceTypeGroups.LOCATION),sliceTypeOrdering:[Se().MAP]}},twitter:function(o,d){return{strings:{title:(0,l.t)("Twitter",null,{project:"scripts-v6.async-wrappers"}),description:(0,l.t)("Pick the account below you would like to import content from, or press Add Account to connect a new one.",null,{project:"scripts-v6.async-wrappers"})},slideSummary:o,sliceAreas:d.filterBySliceTypes(e.Squarespace.SliceTypeGroups.TWITTER),sliceTypeOrdering:[Se().TWITTER]}},action:function(o,d){return{strings:{title:(0,l.t)("Action",null,{project:"scripts-v6.async-wrappers"}),description:(0,l.t)("Your Cover Page should have a clear goal. Choose which type best meets your needs.",null,{project:"scripts-v6.async-wrappers"})},slideSummary:o,sliceAreas:d.filterBySliceTypes(e.Squarespace.SliceTypeGroups.ACTION),sliceTypeOrdering:[Se().ACTION,Se().CUSTOM_FORM]}}};function n(o,d){var p=new e.Squarespace.Models.SlideSummary({url:e.Lang.sub("{root}content-collections/{collectionId}/slide-summary",{root:e.Squarespace.API_ROOT,collectionId:o}),slideType:Fa().COVER_PAGE});p.load(function(){d(p)})}function s(o,d){var p=new e.Squarespace.Models.SlideLayoutList({slide:o.get("slide")});p.load(function(){d(p)})}function a(o,d,p){var y=o.get("slide"),A=y.get("layoutIdentifier"),P=d.getByIdentifier(A);o.get("slices").updateForLayout(P,y),o.after("load",function(){o.get("slices").updateForLayout(P,y)}),p()}function i(o,d){n(o,function(p){s(p,function(y){a(p,y,function(){d(p,y)})})})}e.Squarespace.AsyncWrappers.CoverPageEditorForWebsite=e.Base.create("CoverPageEditor",e.Squarespace.Damask.Panel.AsyncDataPanel,[],{getPanel:function(o,d,p){var y=this.get("location.pathname"),A=y.slice(y.lastIndexOf("/")).substr(1);i(o.id,function(P,U){var K=P.get("slide"),O=K.get("layoutIdentifier"),q=U.getByIdentifier(O),J=q.get("sliceAreas"),X=r[A](P,J);setTimeout(function(){d(new e.Squarespace.Widgets.SliceGroupEditor(X))})})}})},"1.0",{requires:["base","squarespace-damask-panel-async-data-panel"]});const zl=[Se().BUTTONS,Se().NAVIGATION,Se().CUSTOM_FORM,Se().NEWSLETTER,Se().ACTION,Se().POPUP_OVERLAY_ACTION];YUI.add("squarespace-async-wrappers-popup-overlay-editors",function(e){e.namespace("Squarespace.AsyncWrappers");var r={action:function(o,d){return{strings:{title:(0,l.t)("Action",null,{project:"scripts-v6.async-wrappers"}),description:(0,l.t)("Create buttons or a newsletter forms",null,{project:"scripts-v6.async-wrappers"})},slideSummary:o,sliceAreas:d.filterBySliceTypes(zl),sliceTypeOrdering:[Se().POPUP_OVERLAY_ACTION]}}};function n(o,d){var p=new e.Squarespace.Models.SlideSummary({url:e.Lang.sub("{root}popup-overlay/slide-summary",{root:e.Squarespace.API_ROOT}),slideType:Fa().POPUP_OVERLAY});p.load(function(){d(p)})}function s(o,d){var p=new e.Squarespace.Models.SlideLayoutList({slide:o.get("slide")});p.load(function(){d(p)})}function a(o,d,p){var y=o.get("slide"),A=y.get("layoutIdentifier"),P=d.getByIdentifier(A);o.get("slices").updateForLayout(P,y),o.after("load",function(){o.get("slices").updateForLayout(P,y)}),p()}function i(o,d){n(o,function(p){s(p,function(y){a(p,y,function(){d(p,y)})})})}e.Squarespace.AsyncWrappers.PopupOverlayEditor=e.Base.create("PopupOverlayEditor",e.Squarespace.Damask.Panel.AsyncDataPanel,[],{getPanel:function(o,d,p){var y=this.get("location.pathname"),A=y.slice(y.lastIndexOf("/")).substr(1);i(o.id,function(P,U){var K=P.get("slide"),O=K.get("layoutIdentifier"),q=U.getByIdentifier(O),J=q.get("sliceAreas"),X=r[A](P,J);setTimeout(function(){d(new e.Squarespace.Widgets.SliceGroupEditor(X))})})}})},"lord-4give-rick-4-this-code",{requires:["base","squarespace-damask-panel-async-data-panel"]});var kl=t(995620),me=t.n(kl),Xl=t(254345),Bt=t.n(Xl),ja=t(629539),Jl=t(53678),Ql=t(187304),wa=t(291910);YUI.add("squarespace-settings-comments",function(e){var r=function(){};e.namespace("Squarespace.Settings.Site"),e.namespace("Squarespace.Widgets");var n=e.namespace("Squarespace.Settings.Site").CommentModeration=e.Squarespace.Widgets.CommentModeration=e.Base.create("CommentModeration",e.Squarespace.Widgets.SSWidget,[e.Squarespace.Damask.Panel.MixinPanel],{initializer:function(){this.hideReplyForm=this.replyFormAnimGenerator("out"),this.showReplyForm=this.replyFormAnimGenerator("in"),this.itemId=Static.SQUARESPACE_CONTEXT.commentTargetId,this.eventMap={},this.destroyed=!1,this.responseDelayThreshold=200,this.extending=!1,this.firstLoad=!0,this.deleting=!1,this.sortType=Bt().NEWEST_FIRST,this.numDisplayed=0,this.threadedViewActive=!1,this.targettedCommentId="",this.lastThreadViewed=null,this._status=me().AWAITING_MODERATION,this.flagged=!1,this.targetRoot="",this.currentPage=1,this.commentIdToTargetData={},this.commentIdToCommentData={},this._noApproveActionTrayButtons=[{label:(0,l.t)("Delete",null,{project:"scripts-v6.settings"}),action:this.onBatchDeleteClick,context:this},{label:(0,l.t)("Deselect",null,{project:"scripts-v6.settings"}),action:this.deselectAll,context:this},{label:(0,l.t)("Select All",null,{project:"scripts-v6.settings"}),action:this.selectAll,context:this}],this._fullActionTrayButtons=[{label:(0,l.t)("Approve",null,{project:"scripts-v6.settings"}),action:this.approveSelectedComments,context:this},{label:(0,l.t)("Delete",null,{project:"scripts-v6.settings"}),action:this.onBatchDeleteClick,context:this},{label:(0,l.t)("Deselect",null,{project:"scripts-v6.settings"}),action:this.deselectAll,context:this},{label:(0,l.t)("Select All",null,{project:"scripts-v6.settings"}),action:this.selectAll,context:this}],this._actionTray=new e.Squarespace.Widgets.ActionTray({scrollNode:this.get("contentBox")}),this.statusToClassNameMap={},this.statusToClassNameMap[me().AWAITING_MODERATION.toString()]="unmoderated",this.statusToClassNameMap[me().APPROVED.toString()]="approved",this.statusToClassNameMap[me().DELETED.toString()]="deleted",this.numSelected=0,this.targetNameMap={}},statusToClassName:function(s){return e.Object.getValue(this.statusToClassNameMap,s)||""},bindUI:function(){n.superclass.bindUI.call(this),this.eventMap={"hide-threaded":e.delegate("click",this.hideThreaded,".panel-top-container",".threaded-exit-btn",this),"clear-flags":e.delegate("click",this.clearFlags,".panel-top-container",".clear-btn",this),"select-filter":e.delegate("click",this.selectFilter,".panel-top-container",".settings-filters div",this),"view-target":e.delegate("click",this.targetLinkOnClick,".squarespace-comment-moderation",".target-link",this),"toggle-selected":e.delegate("click",this.toggleSelected,".squarespace-comment-moderation",".comment",this),"sort-toggle":e.delegate("click",this.sortToggle,".squarespace-comment-moderation",".sort-toggle",this),"approve-inline":e.delegate("click",this.approveSingleComment,".squarespace-comment-moderation",".approve-inline",this),"show-threaded":e.delegate("click",this.showThreaded,".squarespace-comment-moderation",".in-reply",this),"show-reply-area":e.delegate("click",this.showReplyForm,".squarespace-comment-moderation",".reply-inline",this),reply:e.delegate("click",this.onPostReplyBtnClick,".squarespace-comment-moderation",".post-reply-btn",this),"delete-inline":e.delegate("click",this.onInlineDeleteClick,".squarespace-comment-moderation",".delete-inline",this),"deselect-all":e.delegate("click",this.deselectAll,".comment-moderation-footer",".deselect-all",this),"select-all":e.delegate("click",this.selectAll,".comment-moderation-footer",".select-all",this),"approve-selected":e.delegate("click",this.approveSelectedComments,".settings",".approve",this),"delete-selected":e.delegate("click",this.onBatchDeleteClick,".settings",".delete",this),"check-scroll":this.get("contentBox").on("scroll",this.checkScroll,this)}},renderUI:function(){n.superclass.renderUI.call(this);var s=this.get("boundingBox"),a=this.get("contentBox");s.addClass("sqs-settings-panel"),a.addClass("sqs-settings-panel-content");var i='<div class="squarespace-comment-moderation"><div class="panel-top-container clear"><div class="title-container"><div class="title">'+(0,l.t)("Comments",null,{project:"scripts-v6.settings"})+'</div></div><div class="settings-filters tabs"><div class="unmoderated filter">'+(0,l.t)("Unmoderated",null,{project:"scripts-v6.settings"})+'</div><div class="comment-count unmoderated-count"></div><div class="approved filter">'+(0,l.t)("Approved",null,{project:"scripts-v6.settings"})+'</div><div class="flagged filter">'+(0,l.t)("Flagged",null,{project:"scripts-v6.settings"})+'</div><div class="comment-count flagged-count"></div></div></div><div class="moderation-body"></div></div>';this.footer=e.Node.create('<div class="comment-moderation-footer"></div>'),a.append(i),s.append(this.footer),this._actionTray.render(this.footer),this.refreshCommentData()},syncUI:function(){n.superclass.syncUI.call(this)},confirmViewTarget:function(s,a){var i=function(){window.location=s};new e.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("View Post",null,{project:"scripts-v6.settings"}),"strings.message":(0,l.t)('Are you sure you want to leave this page and view "{name}"?',{name:a},{project:"scripts-v6.settings"})}).on("confirm",i,this)},targetLinkOnClick:function(s){this.confirmViewTarget(s.target.getAttribute("href"),s.target.get("text")),s.stopImmediatePropagation()},getAvatarUrl:function(s){return!s||!s.avatarAssetUrl?"/universal/images-v6/default-avatar.png?format=36w":s.avatarAssetUrl},replyFormAnimGenerator:function(s){var a=!1,i=function(o){switch(o){case"in":return function(d){if(!a){var p=d.target.ancestor(".comment");if(p.hasClass("replyOpen"))this.hideReplyForm(d);else{p.addClass("replyOpen");var y=e.Node.create('<div class="inline-reply-area-container"></div>'),A=e.Node.create('<textarea class="inline-reply-area"></textarea>'),P=this.getAvatarUrl(Static.SQUARESPACE_CONTEXT.account),U=e.Node.create('<div class="inline-reply-avatar"><img src="'+P+'"></div>');A.setStyles({height:200}),y.append(A),y.append('<input type="button" value="'+(0,l.t)("Post Reply",null,{project:"scripts-v6.settings"})+'" class="post-reply-btn"></input>');var K=e.Node.create("<input>");K.append(y);var O=e.Node.create('<div class="reply-form-container"></div>');O.append(U),O.append(y);var q=O.cloneNode(!0);q.setStyles({visibility:"hidden",display:"block",position:"absolute"}),p.append(q);var J=parseInt(q.getComputedStyle("height"),10)+5;q.remove(!0),O.setStyle("height",0),p.append(O);var X=new e.Anim({node:O,to:{height:J},duration:.3,easing:e.Easing.easeOutStrong});a=!0,X.on("end",function(){a=!1;var ne=e.one("body"),_=O.getY()+O.get("offsetHeight")-(ne.get("docScrollY")+ne.get("winHeight")-parseInt(this.footer.getComputedStyle("height"),10));if(_>=0){var Ne=O.ancestor(".main-content"),ye=Ne.get("scrollTop"),Xe=new e.Anim({node:O.ancestor(".main-content"),to:{scrollTop:ye+_+parseInt(O.ancestor(".comment").getComputedStyle("paddingBottom"),10)+parseInt(this.footer.getComputedStyle("height"),10)*3},duration:.3,easing:e.Easing.easeOutStrong});Xe.run()}},this),X.run()}}};case"out":return function(d){if(!a){var p=d.target.ancestor(".comment"),y=p.one(".reply-form-container"),A=new e.Anim({node:y,to:{height:0},duration:.2,easing:e.Easing.easeOutStrong});a=!0,A.on("end",function(){a=!1,y.remove(!0),p.removeClass("replyOpen")}),A.run()}};default:return function(){}}};return i(s)},onPostReplyBtnClick:function(s){var a=s.target.ancestor(".comment"),i=a.getAttribute("data-commentid"),o=a.one(".inline-reply-area").get("value"),d=wa.T.sanitize((0,Ql.Z)(o)),p=null,y=null;o===""?this.showEmptyText():(p=function(){y=this.showReply(d,a).addClass("pending"),this.hideReplyForm(s),this.sendReply({text:o,parentId:i,success:function(A){y.setAttribute("data-commentId",A.comment.id),y.setAttribute("data-parentId",i),y.removeClass("pending")}},this)},new e.Squarespace.Widgets.Confirmation({"strings.confirm":(0,l.t)("Post Comment",null,{project:"scripts-v6.settings"}),"strings.title":(0,l.t)("Post Comment",null,{project:"scripts-v6.settings"}),"strings.message":(0,l.t)("Are you sure you want to post this comment?",null,{project:"scripts-v6.settings"})}).on("confirm",p,this))},showReply:function(s,a){var i={comments:[{memberAccount:Static.SQUARESPACE_CONTEXT.authenticatedAccount,parentId:a.get("data-commentId"),status:me().APPROVED,parentAuthorName:a.one(".user-info .author").get("text"),addedOn:new Date,body:s,targetName:a.one(".target-link").get("text")}]},o=this.dataToNodes(i).shift();return o.setStyle("paddingLeft",parseInt(a.getStyle("paddingLeft"),10)+40),a.insert(o,"after"),o},sendReply:function(s,a){var i=Static.SQUARESPACE_CONTEXT.authenticatedAccount||{displayName:"",email:"",websiteUrl:""},o={targetId:this.targetNameMap[s.parentId].id,body:s.text,replyToId:s.parentId,authorName:i.displayName,authorEmail:i.email,websiteUrl:i.websiteUrl,targetType:this.commentIdToTargetData[s.parentId].type};e.Data.post({url:"/api/comment/CreateComment",data:o,success:function(d){this.destroyed||(this.targetNameMap[d.comment.id]=this.targetNameMap[s.parentId],this.commentIdToCommentData[d.comment.id]=d.comment,this.commentIdToTargetData[d.comment.id]=this.commentIdToTargetData[s.parentId],d.comment.parentAuthorName=this.commentIdToCommentData[s.parentId].parentAuthorName,e.Lang.isFunction(s.success)&&s.success.call(a||this,d))},failure:function(d){this.destroyed||e.Lang.isFunction(s.failure)&&s.failure.call(a||this,d)}},this)},getThreadNodes:function(s){var a=[];return this.getThreadNodesRec(s,a),a},getThreadNodesRec:function(s,a){a.push(s);var i=s.getAttribute("data-commentId");e.all('.comment[data-parentId="'+i+'"]').each(function(o){this.getThreadNodesRec(o,a)},this)},onInlineDeleteClick:function(s){var a=this.getThreadNodes(s.target.ancestor(".comment"));this.deleteConfirm(a)},onBatchDeleteClick:function(s){var a=[],i={};e.all(".comment.selected").each(function(o){a.push(o),i[o.getAttribute("data-commentId")]=!0}),a=a.filter(function(o){return!o.hasAttribute("data-parentId")||e.Lang.isUndefined(i[o.getAttribute("data-parentId")])}).map(function(o){return this.getThreadNodes(o)},this),this.batchDeleteConfirm(a)},batchDeleteConfirm:function(s){var a=s.map(function(A){return A[0].getAttribute("data-commentId")}),i=s.reduce(function(A,P){return A+P.length},0),o=function(){this.deleting=!1,s.forEach(function(A){this.unsetPreDelete(A)},this)},d=function(){this.deleting=!1,s.forEach(function(A){this.unsetPreDelete(A),this.deselect(A),this.setDeleted(A)},this),this.deleteComments(a,!1,i),this.numSelected=0,this._actionTray.set("count",0)},p=function(){this.deleting=!1,s.forEach(function(A){this.unsetPreDelete(A),this.deselect(A),this.setDeleted(A)},this),this.deleteComments(a,!0,i),this.numSelected=0,this._actionTray.set("count",0)};s.forEach(function(A){this.setPreDelete(A)},this),this.deleting=!0;var y=new e.Squarespace.Widgets.Confirmation({style:e.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,width:370,"strings.reject":(0,l.t)("Delete",null,{project:"scripts-v6.settings"}),"strings.confirm":(0,l.t)("Delete & Report Spam",null,{project:"scripts-v6.settings"}),"strings.title":(0,l._6)({one:"Delete Comment",other:"Delete {%n} Comments"},i,null,{project:"scripts-v6.settings",notes:"oldKey: deleteCommentsTitle"}),"strings.message":(0,l._6)({one:"Are you sure you wish to delete this comment?",other:"Are you sure you wish to delete these comments?"},i,null,{project:"scripts-v6.settings",notes:"oldKey: deleteCommentsMessage"})});y.on("cancel",o,this),y.on("reject",d,this),y.on("confirm",p,this)},deleteConfirm:function(s){var a=function(){this.deleting=!1,this.unsetPreDelete(s)},i=s[0],o=function(){this.deleting=!1,this.unsetPreDelete(s),this.deselect(s),this.setDeleted(s),this.deleteComments([i.getAttribute("data-commentId")],!1,s.length)},d=function(){this.deleting=!1,this.unsetPreDelete(s),this.deselect(s),this.setDeleted(s),this.deleteComments([i.getAttribute("data-commentId")],!0,s.length)};this.deleting=!0,this.setPreDelete(s);var p=new e.Squarespace.Widgets.Confirmation({style:e.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,width:370,"strings.reject":(0,l.t)("Delete",null,{project:"scripts-v6.settings"}),"strings.confirm":(0,l.t)("Delete & Report Spam",null,{project:"scripts-v6.settings"}),"strings.title":s.length===1?(0,l.t)("Delete Comment",null,{project:"scripts-v6.settings"}):(0,l.t)("Delete {commentCount} Comments",{commentCount:s.length},{project:"scripts-v6.settings"}),"strings.message":s.length>1?(0,l.t)("Are you sure you wish to delete these comments?",null,{project:"scripts-v6.settings"}):(0,l.t)("Are you sure you wish to delete this comment?",null,{project:"scripts-v6.settings"})});p.on("cancel",a,this),p.on("reject",o,this),p.on("confirm",d,this)},unsetPreDelete:function(s){s.forEach(function(a){a.removeClass("pending-delete")})},setPreDelete:function(s){s.forEach(function(a){a.addClass("pending-delete")})},setDeleted:function(s){var a=e.Node.create('<div class="delete-anim-wrapper"></div>'),i=s[0];i.insert(a,"after"),s.forEach(function(d){a.append(d)}),this.numDisplayed-=s.length;var o=new e.Anim({node:a,duration:.3,easing:e.Easing.easeOutStrong,to:{height:0}});o.on("end",function(){a.remove(!0),this.numDisplayed||this.showNoCommentAlert()},this),o.run()},deleteComments:function(s,a,i){e.Data.post({url:"/api/comment/admin/DeleteComments",data:{comments:s,markAsSpam:a},success:function(o){this.refreshCommentCounts(),new e.Squarespace.Widgets.Information({"strings.title":(0,l._6)({one:"Comment Deleted",other:"Comments Deleted"},i,null,{project:"scripts-v6.settings",notes:"oldKey: totalCommentsDeletedTitle"}),"strings.message":(0,l._6)({one:"{%n} comment has been deleted.",other:"{%n} comments have been deleted."},i,null,{project:"scripts-v6.settings",notes:"oldKey: totalCommentsDeletedMessage"})})}},this)},showEmptyText:function(){new e.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Enter Comment Text",null,{project:"scripts-v6.settings"}),"strings.message":(0,l.t)("Enter text in the field above to post a comment.",null,{project:"scripts-v6.settings"})})},clearFlags:function(s){var a=function(){e.Data.post({url:"/api/comment/admin/ClearFlagCounts",success:function(){this.destroyed||(s.target.remove(!0),this.refreshCommentData(),this.refreshCommentCounts())}},this)};new e.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("Clear Flags",null,{project:"scripts-v6.settings"}),"strings.message":(0,l.t)("Are you sure you wish to clear flags on these comments?",null,{project:"scripts-v6.settings"})}).on("confirm",a,this)},toggleSelected:function(s){if(!this.deleting&&!s.target.hasClass("approve-inline")&&!s.target.hasClass("delete-inline")&&!s.target.hasClass("reply-inline")&&!s.target.hasClass("inline-reply-area")&&!s.target.hasClass("inline-reply-area")&&!s.target.hasClass("post-reply-btn")&&!s.target.hasClass("context-inline")&&!s.target.hasClass("in-reply")){var a=s.target.ancestor(".comment");a||(a=s.target),a.hasClass("selected")?(this.decNumSelected(),this.animToUnselected(a)):(this.incNumSelected(),this.animToSelected(a))}},selectAll:function(s){e.all(".comment").each(function(a){a.hasClass("selected")||(this.animToSelected(a),this.incNumSelected())},this)},deselectAll:function(s){e.all(".comment").each(function(a){a.hasClass("selected")&&(this.animToUnselected(a),this.decNumSelected())},this)},deselect:function(s){s.forEach(function(a){a.hasClass("selected")&&(this.animToUnselected(a),this.decNumSelected())},this)},select:function(s){s.forEach(function(a){a.hasClass("selected")||(this.animToSelected(a),this.incNumSelected())},this)},selectFilter:function(s){if(this._actionTray.set("count",0),!this.deleting)if(this.threadedViewActive)this.hideThreaded(),this.selectFilter(s);else{var a=this._status,i=this.flagged,o=s.target.ancestor(".settings-filters");this.flagged=!1,s.target.hasClass("approved")?this._status=me().APPROVED:s.target.hasClass("unmoderated")?this._status=me().AWAITING_MODERATION:s.target.hasClass("flagged")&&(this.flagged=!0);var d=e.one(".clear-btn");d&&d.remove(!0);var p=this._status!==a||this.flagged!==i;(this.itemId||p)&&(this.itemId=null,o.all(".active").each(function(y){y.removeClass("active")}),s.target.addClass("active"),this.refreshCommentData())}},sortToggle:function(s){var a=e.one(".sort-toggle");this.sortType===Bt().OLDEST_FIRST?(this.sortType=Bt().NEWEST_FIRST,a.set("innerHTML",(0,l.t)("Newest first",null,{project:"scripts-v6.settings"})),this.refreshCommentData()):(this.sortType=Bt().OLDEST_FIRST,a.set("innerHTML",(0,l.t)("Oldest first",null,{project:"scripts-v6.settings"})),this.refreshCommentData())},toApproved:function(s){s.removeClass("unmoderated"),s.removeClass("deleted"),s.addClass("approved"),this.animToUnselected(s),s.all(".avatar, .user-info, .comment-body").each(function(a){a.removeClass("unmoderated"),a.removeClass("deleted"),a.setStyle("textDecoration","none")},this)},approveSelectedComments:function(s){var a=s.buttonConfig&&s.buttonConfig.label||s.target.hasClass&&!s.target.hasClass("inactive");if(a){var i=this.getSelectedIds();i.length&&e.Data.post({url:"/api/comment/admin/ApproveComments",data:{comments:i},success:function(o){this.destroyed||(e.all(".squarespace-comment-moderation .selected").each(function(d){if(this._status===me().APPROVED||this.threadedViewActive)this.toApproved(d),this.threadedViewActive&&this.toApproved(e.one(".moderation-body .comment[data-commentid="+d.getAttribute("data-commentid")+"]"));else{this.numDisplayed-=1;var p=new e.Anim({node:d,duration:.3,to:{opacity:0},easing:e.Easing.easeOutStrong});p.on("end",function(){d.remove(!0),this.numDisplayed||this.showNoCommentAlert()},this),p.run()}},this),this.numSelected=0,this._actionTray.set("count",this.numSelected),new e.Squarespace.Widgets.Information({"strings.title":(0,l.t)("Comments Approved",null,{project:"scripts-v6.settings"}),"strings.message":(0,l.t)("The selected comments have been approved.",null,{project:"scripts-v6.settings"})}),this.refreshCommentCounts())}},this)}},toDeleted:function(s){s.removeClass("unmoderated"),s.removeClass("approved"),s.addClass("deleted"),this.animToUnselected(s),s.all(".avatar, .user-info, .comment-body").each(function(a){a.removeClass("unmoderated"),a.removeClass("approved"),a.addClass("deleted")})},reset:function(){for(;this.numSelected>0;)this.decNumSelected();e.all(".moderation-body .selected").each(function(s){this.animToUnselected(s)},this)},showThreaded:function(s){var a=s.target,i=e.one(".moderation-body"),o,d,p=Number.MAX_VALUE,y={},A,P;this.reset(),s.target.hasClass("comment")||(a=s.target.ancestor(".comment")),o=a.getAttribute("data-commentid"),this.targettedCommentId!==o&&this.targetRoot!==o&&(this.targettedCommentId=o,this.lastThreadViewed=a,e.Data.get({url:"/api/comment/GetThread",data:{commentId:o,sortBy:Bt().NEWEST_FIRST},success:function(U){if(!this.destroyed){for(this.reset(),this.threadedViewActive=!0,e.one(".threaded-view")&&this.hideThreaded(s),e.one(".threaded-exit-button")||e.one(".panel-top-container").append('<input class="threaded-exit-btn" type="button" value="'+(0,l.t)("Exit Thread",null,{project:"scripts-v6.settings"})+'"></input>'),d=0;d<U.comments.length;d++)U.comments[d].comment.depth<p&&(p=U.comments[d].comment.depth),U.comments[d].comment.depth===0&&(this.targetRoot=U.comments[d].comment.id),y[U.comments[d].comment.id]=U.comments[d].comment.depth,this.targetNameMap[U.comments[d].comment.id]={name:U.comments[d].targetName,id:U.comments[d].targetId};for(A=this.dataToNodes(this.dataToRenderable(U)),P=e.Node.create('<div class="moderation-body threaded-view"></div>'),d=0;d<A.length;d++)P.append(A[d]);A=P,A.setStyle("zIndex",11e3),A.all(".comment").each(function(K){K.setStyle("marginLeft",(y[K.getAttribute("data-commentid")]-p)*40+"px")},this),i.setStyle("display","none"),this.get("contentBox").one(".squarespace-comment-moderation").append(A),e.one(".panel-top-container").scrollIntoView(),this.animToSelected(A.one(".comment[data-commentid="+o+"]"))}},failure:function(U){}},this))},hideThreaded:function(s){var a=e.one(".threaded-view"),i=e.one(".moderation-body"),o=e.one(".threaded-exit-btn");this.reset(),this.threadedViewActive=!1,a.remove(!0),o.remove(),this.targettedCommentId="",this.targetRoot="",i.setStyle("display","block"),this.lastThreadViewed.scrollIntoView(!0)},checkScroll:function(s){if(!e.one(".moderation-body.threaded-view")&&this.numDisplayed&&this.currentPage<this.numPages&&!this.extending){var a=this.get("contentBox"),i=(a.get("scrollTop")+e.DOM.viewportRegion().height)/a.get("scrollHeight");this.lastScrollRatio<i&&i>=.8&&this.extendComments(a),this.lastScrollRatio=i}},checkScrollCameron:function(s){if(!e.one(".moderation-body.threaded-view")&&this.numDisplayed&&this.currentPage<this.numPages&&!this.extending){var a=e.one("body"),i=(a.get("scrollTop")+e.DOM.viewportRegion().height)/a.get("scrollHeight");this.lastScrollRatio<i&&i>=.8&&this.extendComments(e.one(".main-content")),this.lastScrollRatio=i}},onLoading:function(){var s=e.one(".moderation-body");s!==null&&s.empty()},postLoading:r,onExtendLoading:r,extendPostLoading:r,extendComments:function(s){this.extending=!0;var a=s.get("scrollTop");this.extending=!0,e.Data.get({url:"/api/comment/admin/GetAllComments",data:{sortType:this.sortType,page:this.currentPage+1,commentStatus:this._status,flagged:this.flagged,itemId:this.itemId},success:function(i){if(!this.destroyed){this.currentPage+=1;var o=i;this.populateDataMaps(o),this.data.comments=this.data.comments.concat(o.comments),this.renderExtend(o),s.set("scrollTop",a),this.extending=!1}},failure:function(i){this.extending=!1}},this)},incNumSelected:function(){this.numSelected+=1,this._actionTray.set("count",this.numSelected)},decNumSelected:function(){this.numSelected-=1,this._actionTray.set("count",this.numSelected)},fadeOutComment:function(s,a){s.wrap('<div class="temporary-wrapper"></div>');var i=s.ancestor(".temporary-wrapper"),o=s.get("offsetHeight"),d=new e.Anim({node:s,duration:.3,to:{opacity:0},easing:e.Easing.easeOutStrong}),p=new e.Anim({node:i,duration:.3,to:{height:0},easing:e.Easing.easeOutStrong});i.setStyle("height",o),d.on("end",function(){e.later(80,this,function(){s.remove(!0),p.on("end",function(){i.remove(!0),this.fire(a+"-animation-complete"),e.one(".moderation-body").get("children").size()||this.refreshCommentData()},this),p.run()})},this),d.run()},animToDeleted:function(s){this.fadeOutComment(s,"delete")},animToApproved:function(s){this.fadeOutComment(s,"approve")},approveSingleComment:function(s){var a=s.target;a.hasClass("comment")||(a=a.ancestor(".comment")),e.Data.post({url:"/api/comment/admin/ApproveComments",data:{comments:[a.getAttribute("data-commentid")]},success:function(i){this.destroyed||(this._status===me().APPROVED||this.threadedViewActive||this.flagged&&this.commentIdToCommentData[a.getAttribute("data-commentid")].flagCount>this.flagThreshold?(this.toApproved(a),this.threadedViewActive&&this.toApproved(e.one(".moderation-body .comment[data-commentid="+a.getAttribute("data-commentid")+"]"))):(this.eventMap["approve-inline"].detach(),this.once("approve-animation-complete",function(){this.eventMap["approve-inline"]=e.delegate("click",this.approveSingleComment,".squarespace-comment-moderation",".approve-inline",this),this.numDisplayed-=1,this.numDisplayed||this.showNoCommentAlert()},this),this.animToApproved(a)),this.refreshCommentCounts())},failure:function(i){}},this)},destructor:function(){this.destroyed=!0,e.Object.each(this.eventMap,function(s){s.detach()},this),this.eventMap=null},animToSelected:function(s){s.addClass("selected")},animToUnselected:function(s){s.removeClass("selected")},refreshCommentData:function(){this.onLoading(),e.Data.get({url:"/api/comment/admin/GetAllComments",data:{sortType:this.sortType,itemId:this.itemId,page:1,commentStatus:this._status,flagged:this.flagged},success:function(s){if(!this.destroyed){if(!this.itemId&&!this.flagged&&s.comments.length>0&&s.comments[0].comment.status!==this._status)return;if(this.get("contentBox").toggleClass("viewing-item",!!this.itemId),s.comments=s.comments.filter(function(i){return e.Lang.isUndefined(i.targetId)?!1:i}),this.numPages=Math.max(Math.ceil(s.totalComments/25),1),this.data=s,this.currentPage=1,this.numDisplayed=this.data.comments.length,this.numSelected=0,this.flagThreshold=this.data.flagThreshold,s.comments.length)this.populateDataMaps(s),this.flagged||e.one("."+this.statusToClassName(this._status)).addClass("active"),this._actionTray.set("buttons",this._noApproveActionTrayButtons),this._status!==me().APPROVED&&this._actionTray.set("buttons",this._fullActionTrayButtons);else if(this.firstLoad){this._status=me().APPROVED;var a=e.one(".settings-filters");a&&(a.one(".approved ").addClass("active"),a.one(".unmoderated").removeClass("active")),this.firstLoad=!1,this.refreshCommentData();return}else this.flagged?e.one(".flagged").addClass("active"):e.one("."+this.statusToClassName(this._status)).addClass("active"),e.all(".comment-moderation-footer [type=button]").each(function(i){i.remove(!0)},this);this.firstLoad=!1,this.postLoading(),this._renderManager(s),e.one("window").set("scrollTop",0),this.refreshCommentCounts()}}},this)},populateDataMaps:function(s){for(var a=0,i=s.comments.length;a<i;a++)this.targetNameMap[s.comments[a].comment.id]={name:s.comments[a].targetName,id:s.comments[a].targetId},this.commentIdToTargetData[s.comments[a].comment.id]={name:s.comments[a].targetName,id:s.comments[a].targetId,urlId:s.comments[a].targetUrlId,type:s.comments[a].targetType},this.commentIdToTargetData[s.comments[a].comment.id].collectionUrlId=s.comments[a].targetCollectionUrlId||void 0,this.commentIdToCommentData[s.comments[a].comment.id]=s.comments[a].comment},refreshCommentCounts:function(){var s=function(a){if(!this.destroyed||!this.get("destroyed")){var i=e.one(".settings-filters"),o=i.one(".flagged-count"),d=i.one(".unmoderated-count"),p=parseInt(o.get("text"),10),y=parseInt(d.get("text"),10),A=a.unmoderatedCount,P=a.flagCount,U=e.one(".clear-btn");if(P>0?!U&&this.flagged&&e.one(".panel-top-container").append('<div class="clear-btn">'+(0,l.t)("Clear Flags",null,{project:"scripts-v6.settings"})+"</div>"):U&&U.remove(!0),p!==P){var K=i.one(".flagged-count");K.set("innerHTML",P>0?P:""),P>0?K.addClass("visible"):K.removeClass("visible")}if(y!==A){Static.SQUARESPACE_CONTEXT.website.unmoderatedCommentCount=A,Jl.Z.update({unmoderatedCommentCount:A});var O=i.one(".unmoderated-count");O.set("innerHTML",A>0?A:""),A>0?O.addClass("visible"):O.removeClass("visible")}e.Global.fire("sqsContextChange")}};e.Data.get({url:"/api/comment/admin/GetModerationCounts",success:s},this)},dataToRenderable:function(s){for(var a={comments:[]},i=0;i<s.comments.length;i++)a.comments.push(s.comments[i].comment),s.comments[i].parentAuthorName&&(a.comments[i].parentAuthorName=s.comments[i].parentAuthorName);return a},renderExtend:function(s){var a,i,o;this.data.comments.length&&(a=this.get("contentBox").one(".moderation-body"),i=this.dataToRenderable(s),i.comments.length&&(o=a.cloneNode(!0),e.Array.each(this.dataToNodes(i),function(d){o.append(d)},this),a.replace(o)))},showNoCommentAlert:function(){var s;this.flagged?s=(0,l.t)("There are no comments currently flagged.",null,{project:"scripts-v6.settings"}):this._status===me().APPROVED?s=(0,l.t)("There are no comments to display.",null,{project:"scripts-v6.settings"}):this._status===me().AWAITING_MODERATION&&(s=(0,l.t)("There are no comments awaiting moderation.",null,{project:"scripts-v6.settings"}));var a=e.one(".moderation-body"),i='<div class="no-comments"><img class="icon large" src="/universal/images-v6/configuration/no-comments.png"><div class="empty-text">'+s+"</div></div>";a.empty(),a.append(i)},_renderManager:function(s){var a=e.one(".moderation-body"),i=a.cloneNode(!0).empty(),o=this.dataToRenderable(s);if(!o.comments.length)this.showNoCommentAlert();else{for(var d=this.dataToNodes(o),p=0;p<d.length;p++)i.append(d[p]);a.replace(i)}},escapeComment:function(s){s.authorName=e.Squarespace.Escaping.escapeForHtml(s.authorName),s.memberAccount&&(s.memberAccount.displayName=e.Squarespace.Escaping.escapeForHtml(s.memberAccount.displayName),s.memberAccount.email=e.Squarespace.Escaping.escapeForHtml(s.memberAccount.email),s.memberAccount.bio=e.Squarespace.Escaping.escapeForHtml(s.memberAccount.bio))},getTargetUrlForComment:function(s){var a=this.commentIdToTargetData[s.id||s.parentId];return e.Lang.isUndefined(a)?"":"/"+(a.collectionUrlId?a.collectionUrlId+"/":"")+a.urlId},_getAuthorString:function(s){var a="",i=function(o){return"("+o+")"};return s.memberAccount?a=s.memberAccount.displayName:(a=s.authorName,s.authorEmail?a+=" "+i(s.authorEmail):s.authorUrl&&(a='<a target="_blank" href="'+e.Escape.html(s.authorUrl)+'">'+s.authorName+"</a>")),a},_getTargetName:function(s){var a=s.targetName||e.Squarespace.Escaping.escapeForHtml(this.targetNameMap[s.id].name)||"---";return a.length>30&&(a=a.trim().substr(0,30)+"\u2026"),a},dataToNodes:function(s){var a=this._status!==me().AWAITING_MODERATION,i=e.Array.map(s.comments,function(o,d){this.escapeComment(o);var p=this.getAvatarUrl(o.memberAccount),y=(0,ja.Z)(o.addedOn).capitalize(),A=this._getTargetName(o),P=a?'<span class="target-link" href="'+this.getTargetUrlForComment(o)+'">'+A+"</span>":A,U=(0,l.t)(" on {commentTarget}",{commentTarget:P},{project:"scripts-v6.settings"})+'<span class="in-reply"></span></span>';o.parentAuthorName&&(U=(0,l.t)(' on {commentTarget}<span class="in-reply"> in reply to {parentCommentAuthorName}</span>',{commentTarget:P,parentCommentAuthorName:e.Escape.html(o.parentAuthorName)},{project:"scripts-v6.settings",notes:"on Article Title in reply to Jane Doe"}));var K='<div data-commentid="'+o.id+'" class="comment '+(this.statusToClassName(o.status.toString())||"")+'"><div class="comment-header"><div class="avatar"><img src="'+p+'"></div><div class="user-info"><span class="author">'+this._getAuthorString(o)+'</span><span class="date"> '+y+'</span><span class="target">'+U+'</span></div><div class="inline-btn-container"><div class="inline-btn delete-inline"></div><div class="inline-btn approve-inline"></div><div class="inline-btn reply-inline"></div></div></div><div class="comment-body"></div></div>',O=e.Node.create(K);return O.one(".comment-body").set("innerHTML",wa.T.sanitize(o.body)),O},this);return i},getSelectedIds:function(){var s=[];return e.all(".squarespace-comment-moderation .selected").each(function(a){s.push(a.getAttribute("data-commentid"))}),s}},{CSS_PREFIX:"sqs-comment-moderation"})},"1.0",{requires:["anim","escape","node","oop","squarespace-escaping-utils","squarespace-damask-panel-mixin-panel","squarespace-tray","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-information"]});var $l=t(134521),Yl=t.n($l),Wa=t(929759);function Za(){var e=Y.Squarespace.Damask.ContextGlobals,r=e&&e.getWindow().get("Static"),n=r&&r.SQUARESPACE_CONTEXT&&r.SQUARESPACE_CONTEXT.collection;return n&&n.type===pe().SPLASH_PAGE}YUI.add("squarespace-damask-menu-design-custom-css",function(e){var r=e.Base.create("CustomCSSCodeEditorAdaptor",e.Squarespace.CodeEditorManager,[],{getTemplateMarkup:function(){return'<div class="code-editor"><div class="code-container"><div class="code-area"></div><div class="asset-upload-panel"><div class="asset-upload-canvas"></div></div><div class="code-editor-error"></div></div><div class="code-editor-footer"><div class="code-editor-unsaved">'+(0,l.t)("unsaved",null,{project:"scripts-v6.damask"})+'</div><input class="save" type="button" value="'+(0,l.t)("Save",null,{project:"scripts-v6.damask"})+'" disabled="disabled" /></div><div class="button-block"><input class="upload-asset button" type="button" value="'+(0,l.t)("Manage Custom Files",null,{project:"scripts-v6.damask"})+'" /></div></div>'},getAvailableHeightForEditor:function(){var s=this.container.ancestor(".sqs-settings-panel-content"),a=s.one(".sqs-header-tray"),i=this.container.one(".button-block");return s.get("offsetHeight")-a.get("offsetHeight")-i.get("offsetHeight")-ns.GRID_PX*4},setEditorSize:function(){var s=this.codeMirror.getScrollerElement(),a=this.getAvailableHeightForEditor();a<400&&(a=400),e.Node(s).setStyles({height:a+"px"}),this.container.one(".asset-upload-panel").setStyles({height:a*.5+"px"}),this.codeMirror.refresh(),this.setUploadCanvasSize()},setUploadCanvasSize:function(){var s=0;this.container.all(".item, .sqs-uploader").each(function(a){s+=a.get("offsetHeight")}),this.container.one(".asset-upload-canvas").setStyles({height:s+"px"})},toggleUploadPanel:function(s){var a=this.container.one(".asset-upload-panel"),i="asset-upload-panel-open";if(!(s&&!a.hasClass(i)))if(a.hasClass(i)){a.removeClass(i);var o=new e.Anim({node:a,from:{top:"50%"},to:{top:"100%"},duration:.25,easing:"easeIn"});o.on("end",function(){a.hide()}),o.run()}else{a.addClass(i),a.show();var d=new e.Anim({node:a,from:{top:"100%"},to:{top:"50%"},duration:.25,easing:"easeIn"});d.on("end",e.bind(function(){this.setEditorSize()},this)),d.run()}},getTargetWindow:function(){return this._target||null},setTarget:function(s){this._target=s},preview:Yl()(function(){(0,Vt.EeC)((0,We.d6)())&&(Za()||this.getSanitizedCss(!0).then((function(s){var a=this.getTargetWindow();if(e.Lang.isValue(a)){var i=e.one(a).one("body");e.Lang.isValue(i)&&(i.all("style").each(function(o){o.hasClass("SquarespaceInjectedCustomCss")&&o.remove()}),i.append('<style type="text/css" class="SquarespaceInjectedCustomCss">'+s+"</style>")),this.setStatus(!1)}}).bind(this)).catch((function(s){this.setStatus(s)}).bind(this)))},1e3,{leading:!1})},{});e.namespace("Squarespace.Damask.Menu.Design");var n=e.Squarespace.Damask.Menu.Design.CustomCSS=e.Base.create("CustomCSS",e.Squarespace.Widgets.SettingsPanel,[e.Squarespace.Damask.Panel.MixinPanel],{destructor:function(){this.editor._target=null,this.editor._windowResizeBinding.detach(),this.editor._bodyKeyupBinding.detach(),this.editor.destroy(),this.closePopupEditor()},renderUI:function(){n.superclass.renderUI.apply(this,arguments),setTimeout((function(){this.editor=new r({container:e.one(".settings-panel-fields")}),this.editor.codeMirror.on("change",e.bind(function(){this._editorDataChange()},this)),this.editor.codeMirror.on("keyup",e.bind(function(s,a){a.which===27&&a.stopPropagation()},this)),this.editor.codeMirror.on("focus",e.bind(function(){this.editor.toggleUploadPanel(!0)},this)),this._registerEvent(this.editor.on("sync",function(){this.markAsClean()},this)),this.editor.once("sync",function(){this.editor.codeMirror.on("change",e.bind(function(){this.markAsDirty()},this))},this),this.once("inViewChange",function(){this.editor.setEditorSize()}),this._setEditorTarget(),this._resetPreviewFrameCss()}).bind(this),0)},_editorDataChange:function(){this.set("hasData",this.editor.codeMirror.getValue().length>0)},_setEditorTarget:function(){var s=this.get("damask").get("previewFrame");if(!s){this._registerEvent(this.get("damask").onceAfter("previewFrameChange",(function(){this._setEditorTarget()}).bind(this)));return}var a=s.get("iframe").get("contentDocument");this.editor.setTarget(a),this.editor.preview()},_resetPreviewFrameCss:function(){if(!Za()){var s=this.get("damask").get("previewFrame"),a=s.get("iframe").get("contentWindow.Y"),i=a.one('[href*="/site.css"]');if(!i){console.warn("site.css not found, aborting reset");return}var o=i.get("href");o.indexOf("?")>0?o+="&":o+="?",o+="nocustom=true",a.Get.css(o,function(){i.remove()})}},_revertChanges:function(){return this.editor._resetEditor(),(0,Wa.gI)("custom-css"),e.when(!0)},_saveChanges:function(){return this.editor.save(!0),(0,Wa.rI)("custom-css"),e.when(!0)},openPopupEditor:function(){if(e.Lang.isValue(this.popup)&&!this.popup.closed){this.popup.focus();return}this.popup=e.config.win.open("/config/editor","customcss","width=700,height=600,scrollbars=no,menubar=no,status=no,titlebar=no,toolbar=no"),this._messageListener=e.bind(this._handlePostMessage,this),window.addEventListener("message",this._messageListener),et.Z.isSevenOne()?xe.default.setEditingCustomCss(!0):xe.default.toggleFullScreenPreviewMode();var s=this.get("damask").get("previewFrame");this._registerEvent(s.onceAfter(e.Squarespace.Damask.Preview.Frame.EVENTS.CONTRACTED,this.closePopupEditor,this))},postMessage:function(s,a){!e.Lang.isValue(this.popup)||this.popup.closed||this.popup.postMessage(s,a||this.popup.location.origin)},_handlePostMessage:function(s){switch(s.data.type){case"ready":this.postMessage({type:"change",value:this.editor.codeMirror.getValue()},s.source.origin);break;case"change":this.editor.codeMirror.setValue(s.data.value);break;case"close":this.closePopupEditor();break;case"sync":this._revertChanges();break}},closePopupEditor:function(){e.Lang.isValue(this.popup)&&!this.popup.closed&&(this.popup.updateDamaskEditor=null,this.popup.onbeforeunload=null,this.popup.close(),this.popup=null),e.Lang.isValue(this._messageListener)&&(window.removeEventListener("message",this._messageListener),this._messageListener=null),et.Z.isSevenOne()?xe.default.setEditingCustomCss(!1):xe.default.toggleFullScreenPreviewMode(!1)}},{CSS_PREFIX:"sqs-custom-css",ATTRS:{buttons:{value:[{label:(0,l.t)("Open in Window",null,{project:"scripts-v6.damask"}),action:function(){this.openPopupEditor()}}]},hasData:{validator:e.Lang.isBoolean,value:!1},"strings.title":{value:(0,l.t)("Custom CSS",null,{project:"scripts-v6.damask"})},"strings.description":{value:(0,l.t)('This area will allow you to inject custom CSS rules into your site.<br /><br /><strong>With custom code modifications, functionality or full compatibility with Squarespace is not guaranteed. <a href="{supportLink}" target="_blank">Learn more</a></strong> <br /><br />Note: Custom CSS does not apply to Cover Pages.',{supportLink:ft.USING_CSS_EDITOR},{project:"scripts-v6.damask"})}}})},"1.0",{requires:["base","node","squarespace-code-editor-legacy","squarespace-dialog-description","squarespace-models-composite","squarespace-settings-panel","squarespace-damask-panel-mixin-panel"]});var t1=t(895594);YUI.add("squarespace-models-composite",function(e){e.namespace("Squarespace.Models").Composite=e.Base.create("CompositeModel",e.Model,[],{initializer:function(){this.LOG=new e.Squarespace.Debugger({name:this.name})},destructor:function(){var r=this.get("id");e.Array.each(this.get("models"),function(n){n.instance.detach(r+"|*")})},_setModels:function(r){e.Array.each(r,this._registerModel,this)},_registerModel:function(r){var n=r.instance;if(!e.Lang.isValue(n)){this.LOG.error("Rejecting model configuration. Missing `instance` field.",r);return}var s=e.guid();e.Array.each(r.attrs,function(a){var i=e.guid();this.addAttr(a,{value:n.get(a)},!0),n.after(s+"|"+a+"Change",function(o){o.source!==i&&(Ss()(o.newVal,o.prevVal)||this.set(a,o.newVal,{source:i}))},this),this.after(a+"Change",function(o){o.source!==i&&(Ss()(o.newVal,o.prevVal)||n.set(a,o.newVal,{source:i}))},this)},this)},sync:function(r,n,s){r==="read"?this._read(n,s):(r==="create"||r==="update")&&this._save(n,s)},_read:function(r,n){var s=new e.Parallel({context:this}),a={};e.Array.each(this.get("models"),function(i){i.instance.load(s.add(function(o,d){var p={};e.Array.each(i.attrs,function(y){p[y]=i.instance.get(y)}),this.LOG.info("Loaded",i.instance.name,p,o,d),a=e.merge(a,p)}))}),s.done(function(){this.LOG.info("complete!",a),n(null,a)})},_save:function(r,n){var s=new e.Parallel({context:this}),a={};e.Array.each(this.get("models"),function(i){i.instance.save(s.add(function(o,d){this.LOG.info("Saved ",i.instance.name,o,d),e.Lang.isObject(o)&&(o.responseJSON.errors?a=e.merge(o.responseJSON.errors,a):a[i.instance.name]=o)},this))}),s.done(function(){e.Object.isEmpty(a)?(this.LOG.info("Successfully saved!"),n()):(this.LOG.info("Save completed with errors",a),n(a))})},isNew:function(){return!1}},{ATTRS:{models:{setter:"_setModels"}}})},"1.0",{requires:["parallel","squarespace-debugger"]}),YUI.add("squarespace-settings-panel",function(e){e.namespace("Squarespace.Widgets");var r=e.Squarespace.Widgets.SettingsPanel=e.Base.create("SettingsPanel",e.Squarespace.Widgets.DataWidget,[e.WidgetParent,e.Squarespace.Mixins.SaveChanges],{initializer:function(n){var s=this.get("initialDataUrl");s?this._loadInitialPanelData(s):this.setLoadedState(),this._headerTray=this._initHeaderTray(),this.publish("fields-rendered"),this.publish("saved-changes",{broadcast:2}),this.publish("revert-changes",{broadcast:2}),this.publish("saved-changes-failed")},destructor:function(){this._headerTray&&(this._headerTray.destroy(),this._headerTray=null),e.Array.each(this._renderedFields,function(n){n.destroy()})},_initHeaderTray:function(){var n=this._getButtonConfigurationForHeaderTray();return this.add(new e.Squarespace.Widgets.HeaderTray({loading:this.get("dataState")===this.getProperty("DATA_STATES").LOADING,"strings.title":this.get("strings.title")||"","strings.subtitle":this.get("strings.description"),buttons:n})).item(0)},_getButtonConfigurationForHeaderTray:function(){var n=e.clone(this.get("buttons"));return e.Array.each(n,function(s){s.type==="save"?(s.className=s.className||"",s.action=s.action||function(a){this._initSaveChanges()}):s.type==="add"&&(s.className=s.className||"add ",s.action=s.action||this.addItem),s.context=s.context||this},this),this._hasSaveButton=!1,n=e.Array.filter(n,function(s){return s.type==="save"?(this._hasSaveButton=!0,!1):!0},this),n},_loadInitialPanelData:function(n){this.setLoadingState(),e.Data.get({url:n,data:this.get("initialSendData"),success:function(s){if(!this.get("destroyed")){e.Lang.isFunction(this._processResponseData)&&(s=this._processResponseData(s));var a=this.get("initialDataPropertyName"),i=s;s&&a&&(i=s[a]),this.setLoadedState(),this.set("responseData",s),this.set("data",i),this.markAsClean()}},failure:function(s){this.setLoadedState(),this.set("data",s)}},this)},renderUI:function(){r.superclass.renderUI.call(this),this._headerTray.setAttrs({buttons:this._getButtonConfigurationForHeaderTray()});var n=this.get("contentBox");this._headerTray.render(n),n.prepend(this._headerTray.get("boundingBox")),n.addClass("sqs-settings-panel-content");var s=this.get("contentBox").one(".panel-description");e.Lang.isValue(s)&&s.remove(!0)},bindUI:function(){r.superclass.bindUI.call(this),this.after("stringsChange",function(n){(n.subAttrName==="strings.title"||n.subAttrName==="strings.description"||!n.subAttrName)&&this._syncHeaderTray()}),this.after("buttonsChange",function(n){this._headerTray.set("buttons",e.Array.filter(this._getButtonConfigurationForHeaderTray(),function(s){return s.type!=="save"}))})},syncUI:function(){r.superclass.syncUI.call(this),this._headerTray.set("loading",this.isLoading()),this.loadedSuccessfully()&&this._syncRenderedFields(),this._syncHeaderTray()},_syncHeaderTray:function(){this._headerTray.set("strings.title",this.get("strings.title"));var n=this.get("strings.description");this._headerTray.set("strings.subtitle",n)},_syncRenderedFields:function(){var n=this._renderedFields,s=this.get("data");e.Array.each(n,function(o){o.destroy()}),this._renderedFields=n=[];var a=e.Squarespace.ObjectBuilder.makeArray(this.get("fields"),this.get("panelConfigContext"),s);if(a.length!==0){if(n=e.Array.map(a,function(o){var d=o.config;return e.Lang.isObject(s)&&e.Lang.isString(d.name)&&e.Lang.isValue(s[d.name])&&(d.data=s[d.name]),e.Lang.isValue(d.submitOnEnter)||(d.submitOnEnter=this.get("submitOnEnter")),this._instantiateField(o.ctor,d)},this),this.getProperty("TEMPLATED"))e.Squarespace.FormUtils.template(this.get("contentBox"),n);else{var i=this.get("contentBox").one(".settings-panel-fields");if(!i)throw new Error("The contentBox does not seem to have a .settings-panel-fields element. This is a required element.");e.Array.each(n,function(o){o.render(i)})}this._changedFields=[],e.Array.each(n,function(o){this._registerEvent(o.after("dataChange",function(d){if(!d.silent){var p=d.target.get("name");p&&!this._changedFields.contains(p)&&this._changedFields.push(p),this.markAsDirty()}},this)),this.get("submitOnEnter")&&this._registerEvent(o.after("submit",this._onEnter,this))},this),this._renderedFields=n,this.fire("fields-rendered",{fields:n}),this.set("fieldsRendered",!0)}},getChangedFields:function(){return this._changedFields},_instantiateField:function(n,s){return new n(s)},getField:function(n){return e.Array.find(this._renderedFields,function(s){return s.get("name")===n})},_getSanitizedPanelData:function(){return e.merge(this.get("data"),e.Squarespace.FormUtils.getData(this._renderedFields))},_saveChanges:function(){return new e.Promise(e.bind(function(n,s){var a=e.Squarespace.FormUtils.validate(this._renderedFields);if(e.Object.keys(a).length>0){e.Squarespace.FormUtils.showErrors(this._renderedFields,a),s({errors:a});return}e.Data.post({url:this.get("saveUrl"),data:this._getSanitizedPanelData(),json:this.get("postChangesAsJson"),success:function(i){this._onSaveSuccess(i),n()},failure:function(i){this._onSaveFailure(i),s(i.errors)}},this)},this))},_onSaveSuccess:function(n){this.showSuccessConfirmation(),this.fire("saved-changes",{responseData:n})},_onSaveFailure:function(n){e.Squarespace.FormUtils.showErrors(this._renderedFields,n.errors),this.fire("saved-changes-failed",{responseData:n})},_revertChanges:function(){this.fire("revert-changes");var n=this.get("initialDataUrl");return n?(this.setLoadingState(),this._loadInitialPanelData(n)):(this._syncRenderedFields(),this.markAsClean()),e.when(!0)},_onEnter:function(){this._initSaveChanges()},showSuccessConfirmation:function(n,s){var a=this.get("strings");n=n||a.saveSuccessfulTitle,s=s||a.saveSuccessfulDescription,new e.Squarespace.Widgets.Information({"strings.title":n,"strings.message":s})},addItem:function(){throw new Error("Add Item was called by no implementation was added!")}},{ASYNC_DATA:!0,CSS_PREFIX:"sqs-settings-panel",HANDLEBARS_TEMPLATE:"settings-panel.html",TEMPLATED:!1,ATTRS:{strings:{value:{title:"",description:"",saveSuccessfulTitle:(0,l.t)("Settings Saved",null,{project:"scripts-v6.settings"}),saveSuccessfulDescription:(0,l.t)("Your settings have been saved.",null,{project:"scripts-v6.settings"}),loadingMessage:(0,l.t)("Loading\u2026",null,{project:"scripts-v6.settings"})}},buttons:{value:[{label:(0,l.t)("Save",null,{project:"scripts-v6.settings"}),type:"save"}],validator:e.Lang.isArray},fields:{value:[]},fieldsRendered:{value:!1},initialDataUrl:{value:null},initialSendData:{value:{}},postChangesAsJson:{value:!1,validator:e.Lang.isBoolean},initialDataPropertyName:{value:null},panelConfigContext:{value:{}},saveUrl:{value:null},submitOnEnter:{value:!1,validator:e.Squarespace.AttrValidators.isBoolean},damask:{value:{}}}})},"1.0",{requires:["base","squarespace-dialog","squarespace-form-utils","squarespace-mixin-save-changes","squarespace-object-builder","squarespace-settings-panel-template","squarespace-tray","squarespace-widgets-data-widget","squarespace-widgets-information","widget-anim"]});var s1=t(744868);YUI.add("squarespace-damask-menu-design-templates",function(e){var r={width:420,name:"advancedTemplateInstallation",tabs:[{title:(0,l.t)("Template Installation (Manual Override)",null,{project:"scripts-v6.damask"}),scroll:!1,fields:[{ctor:e.Squarespace.DialogFields.Text,config:{name:"identifier",description:(0,l.t)("The identifier of the template you wish to install.",null,{project:"scripts-v6.damask"}),submitOnEnter:!0}}]}]};e.namespace("Squarespace.Damask.Menu.Design");var n=e.Squarespace.Damask.Menu.Design.Templates=e.Base.create("Templates",e.Squarespace.Settings.Site.Templates,[e.Squarespace.Damask.Panel.MixinPanel],{addItem:function(s){if(e.Squarespace.UtilAuthenticated.isSquarespaceAdmin()&&s.domEvent.altKey){this._showAdvancedTemplateInstallation();return}n.superclass.addItem.apply(this,arguments)},_showAdvancedTemplateInstallation:function(){var s=new e.Model({identifier:""}),a=new e.Squarespace.ModelEditorDialog({dialogConfig:r,model:s});a.show(),s.on("save",function(){var i=s.get("identifier");this.installTemplate(i)},this)}},{ATTRS:{strings:{value:{installTemplateText:(0,l.t)("Install New Template",null,{project:"scripts-v6.damask"})}}}})},"1.0",{requires:["base","squarespace-damask-panel-mixin-panel","squarespace-settings-site-templates","squarespace-util-authenticated"]});var is=t(620993),_l=t(395351);YUI.add("squarespace-settings-site-templates",function(e){var r=e.namespace("Squarespace.Settings.Site").Templates=e.Base.create("templateSettings",e.Squarespace.Widgets.SettingsPanel,[],{isAllowedToTemplateSwitch:function(){return!$e.default.isTemplateOwner()},initializer:function(){this.isAllowedToTemplateSwitch()?(this.set("strings.title",(0,l.t)("Template",null,{project:"scripts-v6.settings"})),this.set("strings.description",(0,l.t)('You can switch <a href="{templatesKBLink}" target="new">templates</a> at any time. Previewing a template allows you to make style changes without changing the live template visitors see.<br /><br /><a target="new" href="{templateSwitchingKBLink}">Learn more</a>',{templateSwitchingKBLink:ft.TEMPLATE_SWITCHING,templatesKBLink:ft.TEMPLATES},{project:"scripts-v6.settings"})),this._installedTemplates=e.Squarespace.Singletons.TemplateInstallationListCache,this._registerEvent(this._installedTemplates.once("load",function(){this.setLoadedState(),this.syncUI()},this)),this.setLoadingState(),this._installedTemplates.load(),Wt.Z.loadAll()):(this.set("strings.title",(0,l.t)("Templates (Disabled)",null,{project:"scripts-v6.settings"})),this.set("strings.description","<strong>"+(0,l.t)("Your site has Developer Mode enabled, template switching is disabled.",null,{project:"scripts-v6.settings"})+"</strong> "))},destructor:function(){this._unlistenTemplateInstallationStore&&(this._unlistenTemplateInstallationStore(),this._unlistenTemplateInstallationStore=null),this._developerShortcutButton&&(this._developerShortcutButton.destroy(),this._developerShortcutButton=null)},renderUI:function(){r.superclass.renderUI.call(this),this.isAllowedToTemplateSwitch()?this.get("contentBox").append('<div class="active-template"></div><div class="templates clearfix"></div>'):(this._developerShortcutButton=new e.Squarespace.Widgets.Button({"strings.text":(0,l.t)("View Template Settings",null,{project:"scripts-v6.settings"}),onClick:function(){e.Squarespace.Singletons.Location.go("/settings/advanced/developer")}}),this._developerShortcutButton.render(this.get("contentBox")))},bindUI:function(){r.superclass.bindUI.call(this),this.isAllowedToTemplateSwitch()&&(this._registerEvent(this._installedTemplates.on("add",this._onNewInstallation,this)),this.after("liveInstallationIdChange",this._onLiveInstallationIdChange),this._unlistenTemplateInstallationStore=Pe.Z.listen(this._onInstallationChange.bind(this)))},syncUI:function(){if(r.superclass.syncUI.call(this),this.isAllowedToTemplateSwitch()){var s=[];this.each(function(a){a instanceof n&&s.push(a)}),e.Array.each(s,function(a){this.remove(this.indexOf(a))},this),this.isAllowedToTemplateSwitch()&&this.loadedSuccessfully()&&this._installedTemplates.sort().each(function(a){this._renderInstalledTemplate(a)},this)}},_onNewInstallation:function(s){Wt.Z.loadAll();var a;this.each(function(o,d){o instanceof n&&(o.get("boundingBox").plug(e.Squarespace.PositionAnimator).positionAnimator.hold(),!e.Lang.isValue(a)&&(a=o))});var i=this._renderInstalledTemplate(s.model);e.Lang.isValue(a)&&a.get("boundingBox").insert(i.get("boundingBox"),"after"),this.each(function(o){o instanceof n&&o.positionAnimator&&o.positionAnimator.release()})},_onInstallationChange:function(){this.set("liveInstallationId",Pe.Z.getState().liveInstallationId),this.each(function(s){s instanceof n&&s.syncUI()})},_onLiveInstallationIdChange:function(s){var a=s.prevVal,i=s.newVal;if(a&&i!==a){var o;this.each(function(d){d instanceof n&&(d.get("boundingBox").plug(e.Squarespace.PositionAnimator).positionAnimator.hold(),d.get("model").get("id")===i&&(o=d))}),this.get("contentBox").one(".templates").prepend(o.get("boundingBox")),this.each(function(d){d instanceof n&&d.get("boundingBox").positionAnimator.release()})}},_renderInstalledTemplate:function(s){return this.add({childType:n,model:s,render:this.get("contentBox").one(".templates"),damask:this.get("damask")}).item(0)},addItem:function(s){s.domEvent.stopPropagation(),(0,is.U)("install-new-template",Pe.Z.getState().liveInstallation);var a=new e.Squarespace.TemplatePicker({render:!0,installedTemplates:this._installedTemplates.toJSON().map(function(i){var o=null;return i.templateWebsiteTaxonomy&&(o=i.templateWebsiteTaxonomy.websiteId),{templateId:i.templateId,websiteId:o}}),templateSwitcher:!0});a.once("install-template",function(i){a.destroy(),this.installTemplate(i.identifier)},this)},installTemplate:function(s){e.Squarespace.Models.TemplateInstallation.createWithTemplateWebsiteIdentifier(s).then(e.bind(function(a){var i=Pe.Z.getState().liveInstallation,o=a.toJSON(),d={previewInstallation:o,liveInstallation:i};(0,is.U)("start-with-template",d),new e.Squarespace.Widgets.Information({"strings.title":(0,l.t)("Installation Successful",null,{project:"scripts-v6.settings"}),"strings.message":(0,l.t)("The requested template has been successfully installed.",null,{project:"scripts-v6.settings"})}),this._installedTemplates.add(a)},this),e.bind(function(a){new e.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Cannot Install Template",null,{project:"scripts-v6.settings"}),"strings.message":a.error})}))},_uiAddChild:function(s,a){if(s instanceof n){a=this.get("contentBox").one(".templates");var i=s.get("boundingBox");a.contains(i)||a.appendChild(s.get("boundingBox"))}else r.superclass._uiAddChild.apply(this,arguments)}},{CSS_PREFIX:"sqs-template-settings",ATTRS:{damask:{},strings:{value:{installTemplateText:(0,l.t)("Install Template",null,{project:"scripts-v6.settings"})}},buttons:{valueFn:function(){return $e.default.isTemplateOwner()?[]:[{label:this.get("strings.installTemplateText"),type:"add"}]}}}}),n=e.Base.create("InstalledTemplateView",e.Squarespace.Widgets.SSWidget,[e.WidgetChild],{renderUI:function(){this.get("boundingBox").setAttribute("data-test","installed-template");var s=this.get("contentBox");s.appendChild(e.Node.create('<div class="thumbnail-wrapper"></div>')).appendChild(e.Node.create('<div class="button-wrapper"></div>')).appendChild(e.Node.create('<div class="buttons"></div>')).append(e.Node.create('<div class="button button-edit" data-action="preview">'+(0,l.t)("Preview",null,{project:"scripts-v6.settings"})+"</div>")).append(e.Node.create('<div class="button button-remove" data-action="remove">'+(0,l.t)("Uninstall",null,{project:"scripts-v6.settings"})+"</div>")).append(e.Node.create('<div class="button button-previewing">'+(0,l.t)("Previewing",null,{project:"scripts-v6.settings"})+"</div>")),s.appendChild(e.Node.create('<div class="meta-wrapper"></div>')).append(e.Node.create('<div class="header"></div>').append('<div class="title"></div>').append('<div class="indicator"></div>')).append(e.Node.create('<div class="installed-on"></div>'))},bindUI:function(){this.get("contentBox").one(".buttons").delegate("click",function(i){var o=i.target.getAttribute("data-action");o==="preview"?this._setAsPreviewTemplate():o==="remove"&&this._removeTemplate()},"div[data-action]",this);var s=this.get("contentBox").one(".button-wrapper"),a=this.get("boundingBox");this.unlistenToInstallationStore=Pe.Z.listen(function(){s.unplug(e.Squarespace.Plugins.LoadingOverlay),a.removeClass("show-overlay");var i=Pe.Z.getState().error;i&&new e.Squarespace.SystemError("",i.responseJSON,"json").show()})},syncUI:function(){var s=this.get("model"),a=this.get("boundingBox"),i=this.get("contentBox"),o=i.one(".header");o.one(".title").setContent(s.get("displayName")),o.one(".indicator").addClass("hidden"),a.removeClass("active-template"),a.removeClass("preview-template"),s.get("isLiveTemplate")?(o.one(".indicator").removeClass("hidden").setContent((0,l.t)("Live",null,{project:"scripts-v6.settings",notes:"Indicates that a template is currently active for the site"})),a.addClass("active-template")):s.get("isPreviewTemplate")&&a.addClass("preview-template"),i.one(".thumbnail-wrapper").setStyles({backgroundImage:"url("+en.is(s.getThumbnailAssetUrl("500w"))+")"}),i.one(".installed-on").setContent((0,l.t)("Installed {date}.",{date:(0,ja.Z)(new Date(s.get("installedOn")))},{project:"scripts-v6.settings"}))},destructor:function(){this.unlistenToInstallationStore()},_setAsPreviewTemplate:function(){var s=this.get("model"),a=this.get("contentBox").one(".button-wrapper"),i=this.get("boundingBox"),o=Pe.Z.getState().liveInstallation,d=s.toJSON(),p={previewInstallation:d,liveInstallation:o};(0,is.U)("preview-template-from-panel",p),a.plug(e.Squarespace.Plugins.LoadingOverlay),i.addClass("show-overlay");var y=_l.Z.getState();Wt.Z.setPreviewInstallation(y,s.get("id"),s.get("templateId"))},_removeTemplate:function(){var s=this.get("model"),a=this.get("boundingBox");a.addClass("show-overlay");var i=new e.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("Uninstall Template",null,{project:"scripts-v6.settings"}),"strings.message":(0,l.t)("Are you sure you wish to uninstall the template <strong>{name}</strong>?",{name:s.get("displayName")},{project:"scripts-v6.settings"})});i.on("confirm",function(){var o=Pe.Z.getState().liveInstallation,d=s.toJSON(),p={previewInstallation:d,liveInstallation:o};(0,is.U)("uninstall-template",p),s.destroy({remove:!0},e.bind(function(y,A){var P;if(A&&A.responseText)try{P=JSON.parse(A.responseText)}catch{}if(a.removeClass("show-overlay"),e.Lang.isObject(P)&&P.error){new e.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("Something went wrong",null,{project:"scripts-v6.settings"}),"strings.message":P.error,"strings.confirm":(0,l.t)("Okay",null,{project:"scripts-v6.settings"}),style:e.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY});return}var U=this.get("parent");U.each(function(K){K instanceof n&&K.get("boundingBox").plug(e.Squarespace.PositionAnimator).positionAnimator.hold()}),this.destroy(),U.each(function(K){K instanceof n&&K.get("boundingBox").positionAnimator.release(!0)})},this))},this),i.on("cancel",function(){a.removeClass("show-overlay")},this)}},{CSS_PREFIX:"sqs-installed-template",ATTRS:{liveInstallationId:{valueFn:function(){return Pe.Z.getState().liveInstallationId}},model:{},damask:{}}})},"1.0",{requires:["squarespace-ss-widget","squarespace-settings-panel","model-sync-rest","squarespace-template-picker","squarespace-models-template-installation","promise","parallel","squarespace-plugin-loading-overlay","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-information"]});var n1=t(730244);YUI.add("squarespace-damask-panel-menu-item-with-progress",function(e){e.namespace("Squarespace.Damask.Panel");var r=e.Squarespace.Damask.Panel.MenuItemWithProgress=e.Base.create("MenuItemWithProgress",e.Squarespace.Damask.Panel.MenuItem,[],{bindUI:function(){r.superclass.bindUI.apply(this,arguments),this.after("progressChange",this.syncUI,this)},syncUI:function(){r.superclass.syncUI.apply(this,arguments),e.Lang.isValue(this.get("progress"))&&(this._syncProgressIndicator(),this._syncProgressPulser())},_syncProgressIndicator:function(){var n=this.get("contentBox"),s=this.get("progress"),a=n.one(".progress");e.Lang.isValue(a)||(n.append('<div class="progress"></div>'),a=n.one(".progress")),a.toggleClass("done",s.complete),a.setContent(e.Lang.sub((0,l.t)("{current} of {max}",null,{project:"scripts-v6.damask"}),s))},_syncProgressPulser:function(){var n=this.get("boundingBox"),s=this.get("progress");e.Lang.isValue(n.pulseWarn)||this.get("boundingBox").plug(e.Squarespace.Plugin.PulseWarn,{iterations:2,useClass:!0,targetClass:"warn",interval:600}),s.current<s.max&&this._registerTimer(e.later(500,this,function(){n&&n.pulseWarn&&n.pulseWarn.warn()}))}},{CSS_PREFIX:"sqs-damask-menu-item",ATTRS:{progress:{value:null,validator:e.Squarespace.AttrValidators.isObjectOrNull}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-damask-panel-menu-item","squarespace-plugin-pulsewarn"]});var ec=t(640695),tc=t(10633),sc=t(377688),nc=t(259093),ac=t.n(nc),ic=t(96563);YUI.add("squarespace-settings-commerce-checkout-form-edit",function(e){var r=function(){var n=new e.Squarespace.Models.Form({root:e.Squarespace.API_ROOT+"settings/store-settings/checkout-form",url:e.Squarespace.API_ROOT+"settings/store-settings/checkout-form",name:(0,l.t)("Additional Information",null,{project:"scripts-v6.settings"}),fields:[{type:"textarea",id:"textarea-yui_3_10_1_1_1394561158755_6106",locked:!1,title:(0,l.t)("Note / Additional Info",null,{project:"scripts-v6.settings"}),description:"",placeholder:"",required:!1,textarea:!0}],submissionMessage:{html:(0,l.t)("Thank you!",null,{project:"scripts-v6.settings"})}});function s(){n.set("type",ac().CHECKOUT_PAGE);var a=new e.Squarespace.FormModelEditor({model:n,dialogConfigStrings:{title:(0,l.t)("Edit Custom Checkout Form",null,{project:"scripts-v6.settings"}),loadingText:(0,l.t)("Editing Form\u2026",null,{project:"scripts-v6.settings"})},buttons:[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6.settings"})},{type:"saveAndClose",title:(0,l.t)("Save",null,{project:"scripts-v6.settings"})}],minimumLength:1,fieldsets:[ic.Z.BUILD],excludedFieldTypes:[sc.Z.HIDDEN]});a.show();var i=a.get("dialog").getField("formFields");i.before("*:removeClicked",function(o){i.get("data").length<1&&o.halt()})}n.load(s)};ec.Z.addActionListener(tc.Z.EDIT_CHECKOUT_FORM,r)},"1.0",{requires:["squarespace-editor-form","squarespace-models-form"]});var rn=t(711679),oc=t(273564);YUI.add("squarespace-settings-commerce-shipping",function(e){e.namespace("Squarespace.Settings.Commerce");var r=e.Squarespace.Settings.Commerce.Shipping=e.Base.create("shippingSettings",e.Squarespace.Widgets.SettingsPanel,[e.Squarespace.Damask.Panel.MixinPanel],{hasUnsavedChanges:function(){return!1},_syncRenderedFields:function(){r.superclass._syncRenderedFields.call(this)},_processResponseData:function(n){return n.rules=n,n},addItem:function(){this.getField("rules").showShippingTypeChooser()},renderUI:function(){r.superclass.renderUI.call(this);var n=this.get("contentBox");if(ct.Z.isFeatureGated(Ge().COMMERCE)){var s=n.one(".title"),a=s.insertBefore('<div class="header-feature-gate-panel"></div>',s.next()),i;Gt.Z.isTrial()?i=(0,l.t)("{commerceDefaultTrial} Real-Time Carrier Rates are only available on Commerce Advanced.",{commerceDefaultTrial:rn.Z.getCommerceDefaultTrial()},{project:"scripts-v6.settings"}):i=(0,l.t)("Upgrade to the Business or Commerce plans to use shipping settings. Real-Time Carrier Rates are only available on Commerce Advanced. Your current plan doesn't include these features.",null,{project:"scripts-v6.settings"}),oc.renderPanelNode({node:a.getDOMNode(),analyticsId:"commerce-shipping-panel-header",upsellCopyOverrides:{upgradeDescription:i}})}}},{CSS_PREFIX:"sqs-shipping-settings",ATTRS:{initialDataUrl:{value:"/api/commerce/shipping-options"},"strings.title":{value:(0,l.t)("Shipping",null,{project:"scripts-v6.settings"})},"strings.description":{value:(0,l.t)("Shipping Settings lets you control what shipping options are available to customers and configure your label printing integration.",null,{project:"scripts-v6.settings"})},fields:{value:[{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Shipping Options",null,{project:"scripts-v6.settings"}),text:(0,l.t)("Create shipping options for your customers to choose from. The costs are automatically applied to physical products. Countries not served by any of your shipping options will not be accepted at checkout.",null,{project:"scripts-v6.settings"}),className:"shipping-options-description"}},{ctor:e.Squarespace.DialogFields.ShippingRuleList,config:{name:"rules"}}].filter(function(n){return!n.isDisabled})}}})},"1.0",{requires:["anim","node","oop","squarespace-commerce-utils","squarespace-damask-panel-mixin-panel","squarespace-dialog-description","squarespace-dialog-flow","squarespace-dialog-range-table","squarespace-dialog-select","squarespace-dialog-shipping-container-table","squarespace-dialog-shipping-rule-list","squarespace-dialog-stringset","squarespace-dialog-warning-banner","squarespace-dialog-feature-gate-description","squarespace-localities","squarespace-models-website-settings","squarespace-tray"]}),YUI.add("squarespace-dialog-range-table",function(e){e.namespace("Squarespace.DialogFields");var r=e.Squarespace.DialogFields.RangeTableRow=e.Base.create("rangeTableRow",e.Squarespace.DialogField2,[],{renderUI:function(){r.superclass.renderUI.call(this),this.get("contentBox").appendChild(e.Node.create(e.Handlebars.render(this._getTemplate(),this.getAttrs())))},bindUI:function(){r.superclass.bindUI.call(this),this._bindPriceInput(),this._isLastRow()||this._bindRangeInput(),!this._isFirstRow()&&!this._isLastRow()&&this._registerEvent(this.get("contentBox").one(".remove-row").on("click",this._remove,this)),this.get("contentBox").all("input").on("focus",function(s){s.currentTarget.scrollIntoView()}),this.after(["fromChange","toChange"],this.syncUI)},syncUI:function(){r.superclass.syncUI.call(this);var s=this.get("contentBox");s.one(".fromRange").setHTML(parseFloat(this.get("from")).toFixed(2)),this._isLastRow()||s.one('input[name="toRange"]').set("value",parseFloat(this.get("to")).toFixed(2))},getData:function(){return{from:this.get("from"),to:this.get("to"),priceCents:this.get("priceCents")}},fixRange:function(s){if(this._isFirstRow()){this.set("from",0);return}this.set("from",s.get("to")+.01),this.get("from")>=this.get("to")&&this.set("to",this.get("from")+.01),this._isLastRow()&&this.set("to",-1)},_bindRangeInput:function(){var s=this.get("contentBox").one('input[name="toRange"]').plug(e.Squarespace.Plugin.NumericFormatter,{displayFormatter:function(a){return a.toFixed(2)}});this._registerEvent(s.after("blur",function(a){this.set("to",parseFloat(a.currentTarget.get("value")))},this))},_bindPriceInput:function(){var s=this.get("contentBox"),a=s.one('input[name="priceCents"]').plug(e.Squarespace.Plugin.MoneyFormatter);this._registerEvent(a.after("blur",function(i){this.set("priceCents",i.currentTarget.moneyFormatterPlugin.get("data"))},this))},_getTemplate:function(){return this._isFirstRow()?this.getProperty("FIRST_ROW_TEMPLATE"):this._isLastRow()?this.getProperty("LAST_ROW_TEMPLATE"):this.getProperty("ROW_TEMPLATE")},_isFirstRow:function(){return this.get("index")===0},_isLastRow:function(){return this.get("index")===this.get("parent").size()-1},_remove:function(s){this.remove(!0),s.stopPropagation()},BOUNDING_TEMPLATE:'<tr class="range-row"></tr>',CONTENT_TEMPLATE:null},{FIRST_ROW_TEMPLATE:'<td><span class="fromRange">{{from}}</span>&nbsp;'+(0,l.t)("to",{},{project:"scripts-v6.dialog",notes:"range, ex: from 1 [to] 2"})+'&nbsp;<input name="toRange" type="text" value="{{to}}" /></td><td><input type="text" name="priceCents" value="{{priceCents}}" /></td>',ROW_TEMPLATE:'<td><span class="fromRange">{{from}}</span>&nbsp;'+(0,l.t)("to",{},{project:"scripts-v6.dialog",notes:"range, ex: from 1 [to] 2"})+'&nbsp;<input name="toRange" type="text" value="{{to}}" /></td><td><input type="text" name="priceCents" value="{{priceCents}}" /></td><td class="remove"><div class="remove-row"></div></td>',LAST_ROW_TEMPLATE:'<td><span class="fromRange">{{from}}</span>&nbsp;'+(0,l.t)("to",{},{project:"scripts-v6.dialog",notes:"range, ex: from 1 [to] 2"})+'&nbsp;<span class="infinite">\u221E</span></td><td><input type="text" name="priceCents" value="{{priceCents}}" /></td>',ATTRS:{from:{value:0,validator:e.Squarespace.AttrValidators.isNumber},to:{value:1,validator:e.Squarespace.AttrValidators.isNumber},priceCents:{value:100,validator:e.Squarespace.AttrValidators.isNumber}}}),n=e.Squarespace.DialogFields.RangeTable=e.Base.create("rangeTable",e.Squarespace.DialogField2,[],{renderUI:function(){n.superclass.renderUI.call(this),this._childrenContainer=e.one(".range-table-body"),this.add(this.get("data")),this._updateRowData()},bindUI:function(){n.superclass.bindUI.call(this),this.after(["addChild","removeChild"],this._updateRowData,this);var s=this.get("contentBox");s.delegate("blur",this._updateRowData,"input",this),this._registerEvent(s.one(".add-row").on("click",this._insertRow,this))},_insertRow:function(){var s=this.item(this.size()-2);this.add({from:s.get("to"),to:Math.floor(s.get("to")+1),priceCents:s.get("priceCents")},this.size()-1),this.get("contentBox").one(".add-row").scrollIntoView()},_updateRowData:function(){this._fixRanges(),this.set("data",this._items.map(function(s){return s.getData()}))},_fixRanges:function(){this.each(function(s,a){s.fixRange(this.item(a-1))},this)}},{CSS_PREFIX:"sqs-range-table",HANDLEBARS_TEMPLATE:"dialog-range-table.html",ATTRS:{data:{value:[{from:0,to:1,priceCents:100},{from:1.01,to:-1,priceCents:150}],validator:e.Squarespace.AttrValidators.isArray},defaultChildType:{value:e.Squarespace.DialogFields.RangeTableRow}}})},"1.0",{requires:["base","json","squarespace-animations","squarespace-dialog-field-2","squarespace-dialog-range-table-template","squarespace-plugin-money-formatter","squarespace-plugin-numeric-formatter"]});var a1=t(564333),rc=t(251917),Ut=t.n(rc);YUI.add("squarespace-dialog-shipping-container-table",function(e){e.namespace("Squarespace");var r=e.Squarespace.Commerce.ShippingEnums,n=e.Base.create("containerRow",e.Squarespace.DialogField2,[],{renderUI:function(){n.superclass.renderUI.call(this);var a=this.get("contentBox"),i=e.Lang.sub(this.getProperty("ROW_TEMPLATE"),this.getAttrs());a.setHTML(i);var o=a.all(".right input");o.plug(e.Squarespace.Plugin.NumericFormatter,{displayFormatter:function(d){return d.toFixed(2)},postfixUnit:this.get("parent").get("unit")})},bindUI:function(){n.superclass.bindUI.call(this);var a=this.get("contentBox");a.one(".remove").on("click",this._remove,this),a.one('input[name="name"]').on("change",function(i){this.set("name",i.target.get("value"))},this),a.one('input[name="length"]').on("change",function(i){this.set("containerLength",i.target.numericFormatterPlugin.get("data"))},this),a.one('input[name="width"]').on("change",function(i){this.set("containerWidth",i.target.numericFormatterPlugin.get("data"))},this),a.one('input[name="height"]').on("change",function(i){this.set("containerHeight",i.target.numericFormatterPlugin.get("data"))},this)},_remove:function(a){var i=this.get("parent");this.remove(!0),a.stopPropagation(),i.fire("rowRemoved")},BOUNDING_TEMPLATE:'<tr class="row user-row"></tr>',CONTENT_TEMPLATE:null},{ROW_TEMPLATE:'<td class="left"><input type="text" class="name" name="name" value="{name}" /></td><td class="right"><input type="text" placeholder="length" class="length" name="length" value="{containerLength}" /><span class="dimensionSeparator">\u2715</span> <input type="text" placeholder="width" class="width" name="width" value="{containerWidth}" /><span class="dimensionSeparator">\u2715</span> <input type="text" placeholder="height" class="height" name="height" value="{containerHeight}" /></td><td class="remove"><div class="remove-row"></div></td>',ATTRS:{name:{value:(0,l.t)("Custom Box",null,{project:"scripts-v6-root"})},containerLength:{value:0},containerWidth:{value:0},containerHeight:{value:0},data:{value:{},getter:function(){return{name:this.get("name"),length:this.get("containerLength"),width:this.get("containerWidth"),height:this.get("containerHeight")}}}}}),s=e.Squarespace.DialogFields.ShippingContainerTable=e.Base.create("shippingContainerTable",e.Squarespace.DialogField2,[],{renderUI:function(){s.superclass.renderUI.call(this),this._childrenContainer=this.get("contentBox").one(".list")},bindUI:function(){s.superclass.bindUI.call(this),this.after(["rowAdded","rowRemoved"],function(){this._syncData(),this.syncUI()}),this.after("containerRow:change",this._syncData);var a=this.get("contentBox");a.on("click",this.clearError,this),a.one(".add-row").on("click",this._addRow,this),a.delegate("click",function(i){i.stopPropagation(),this._addRow()},".empty-message",this)},syncUI:function(){s.superclass.syncUI.call(this),this.removeAll(),this._childrenContainer.empty(),this._addRows(),this._syncEmptyMessage()},setErrorAnchor:function(a){this.each(function(i){var o=this._containerKey(i.get("data"));o==a&&this._set("errorFlyoutAnchor",i.get("boundingBox"))},this)},_syncEmptyMessage:function(){var a=this.get("contentBox"),i=a.one("thead"),o=a.one(".add-row");if(this.size()===0){i.hide(),o.hide();var d='<tr class="empty-message"><td colspan="2" class="empty-message-content">'+(0,l.t)("Add a Custom Container",null,{project:"scripts-v6-root"})+"</td></tr>";this._childrenContainer.append(d)}else i.show(),o.show()},_addRows:function(){var a=this.get("unit");this.get("data").forEach(function(i){this.add({containerLength:i.length,containerWidth:i.width,containerHeight:i.height,name:i.name,unit:a})},this)},_addRow:function(){this.add({}),this.fire("rowAdded"),this.get("contentBox").one(".add-row").scrollIntoView()},_containerKey:function(a){var i=[a.length,a.width,a.height].sort();return i=i.map(function(o){return o.toFixed(3)}),i[0]+"x"+i[1]+"x"+i[2]},_syncData:function(){var a=[];this.each(function(i){a.push(i.get("data"))}),this.set("data",a,{noSyncUI:!0})}},{CSS_PREFIX:"sqs-shipping-container-table",HANDLEBARS_TEMPLATE:"dialog-shipping-container-table.html",ATTRS:{defaultChildType:{value:n},strings:{value:{container:(0,l.t)("Container",null,{project:"scripts-v6-root"}),dimensions:(0,l.t)("Dimensions",null,{project:"scripts-v6-root"})}},carrier:{value:null},measurementStandard:{value:Ut().IMPERIAL},unit:{valueFn:function(){return this.get("measurementStandard")===Ut().IMPERIAL?'"':"cm"}},carrierServices:{valueFn:function(){return r.CarrierTypeServicesMap[this.get("carrier")]}},data:{value:[]}}})},"1.0",{requires:["base","handlebars","json","squarespace-animations","squarespace-commerce-shipping-enums","squarespace-commerce-utils","squarespace-dialog-field-2","squarespace-dialog-shipping-container-table-template","squarespace-plugin-numeric-formatter","squarespace-ss-widget"]});var i1=t(608061);YUI.add("squarespace-commerce-shipping-enums",function(e){e.namespace("Squarespace.Commerce");var r=e.Squarespace.Commerce.ShippingEnums={},n=r.CarrierTypes={FEDEX:"FEDEX",UPS:"UPS",USPS:"USPS"},s=r.FedexServiceTypes={GROUND_HOME_DELIVERY:(0,l.t)("FedEx Ground Home Delivery\xAE",null,{project:"scripts-v6-root"}),PRIORITY_OVERNIGHT:(0,l.t)("FedEx Priority Overnight\xAE",null,{project:"scripts-v6-root"}),STANDARD_OVERNIGHT:(0,l.t)("FedEx Standard Overnight\xAE",null,{project:"scripts-v6-root"}),FEDEX_2_DAY:(0,l.t)("FedEx 2Day\xAE",null,{project:"scripts-v6-root"}),FEDEX_EXPRESS_SAVER:(0,l.t)("FedEx Express Saver\xAE",null,{project:"scripts-v6-root"}),FIRST_OVERNIGHT:(0,l.t)("FedEx First Overnight\xAE",null,{project:"scripts-v6-root"})},a=r.UPSServiceTypes={GROUND:(0,l.t)("UPS Ground",null,{project:"scripts-v6-root"}),NEXT_DAY_AIR:(0,l.t)("UPS Next Day Air\xAE",null,{project:"scripts-v6-root"}),NEXT_DAY_AIR_SAVER:(0,l.t)("UPS Next Day Air Saver\xAE",null,{project:"scripts-v6-root"}),TWO_DAY_AIR:(0,l.t)("UPS 2nd Day Air\xAE",null,{project:"scripts-v6-root"}),THREE_DAY_SELECT:(0,l.t)("UPS 3 Day Select\xAE",null,{project:"scripts-v6-root"})},i=r.USPSServiceTypes={PRIORITY:(0,l.t)("USPS\xAE Priority Mail\xAE",null,{project:"scripts-v6-root"}),EXPRESS:(0,l.t)("USPS\xAE Priority Mail Express\xAE",null,{project:"scripts-v6-root"}),STANDARD:(0,l.t)("USPS\xAE Ground Advantage\u2122",null,{project:"scripts-v6-root"})},o=r.CarrierTypeServicesMap={};o[n.FEDEX]=s,o[n.UPS]=a,o[n.USPS]=i},"1.0",{requires:[]});var o1=t(882620),r1=t(814710),lc=t(722370),ae=t.n(lc),ln=t(413951),Va=t(554468),Te=t(87597),cn=t.n(Te),dn=t(587175),os=t(979221),cc=t(885878),dc=t.n(cc),uc=t(286465),Ga=t(526974),Ha=t(219600),gc=t(513036),pc=t(831369),qa=t(71320),mc=t(296883);const hc=e=>{let{onClose:r,onImportStart:n}=e;const[s,a]=(0,I.useState)(null),i=()=>s!==null,o=async()=>{const d=await(0,gc.Qe)();a(d.shopName)};return(0,I.useEffect)(()=>{o()},[s]),I.createElement(De.Z.Transition,null,I.createElement(De.Z,{onRequestClose:r},I.createElement(De.Z.Overlay,null),I.createElement(De.Z.Position,{position:"center"},I.createElement(De.Z.Dialog.ResponsiveProvider,{aspectRatio:.98,maxWidth:400},I.createElement(De.Z.Dialog,null,I.createElement(Hs.Z,{flexDirection:"column",height:"100%",p:6},I.createElement(Ha.Z,{buttonType:Ha.L.CLOSE,onButtonPress:r}),I.createElement(vt.Z.Title,null,I.createElement(Me.T,{project:"commerce-etsy-import"},"Import Etsy shipping profiles")),I.createElement(vt.Z.Subtitle,{color:"gray.300",flexGrow:1},i()?I.createElement(Me.T,{project:"commerce-etsy-import"},"This will only import fixed shipping price details including: name, fees, and shipping zones."):I.createElement(Me.T,{project:"commerce-etsy-import"},"Login and import details from your fixed price shipping profile, including: name, fees, and shipping zones.")),I.createElement(pc.Z,{connectedShop:s,onCheckAuth:o}),I.createElement(_t.Z.Primary,{onClick:()=>{i()?(n(),r()):(0,qa.q)([qa.O.Shipping],void 0,"shipping_panel")},width:"100%",size:"large"},i()?I.createElement(Me.T,{project:"commerce-etsy-import"},"Start Import"):I.createElement(Me.T,{project:"commerce-etsy-import"},"Login and Import"))))))))},vc=(0,mc.P)(hc);var oe=t(456900);const fc=[oe.Z.US,oe.Z.CA,oe.Z.AU,oe.Z.GB,oe.Z.FR,oe.Z.NZ,oe.Z.NO,oe.Z.SE,oe.Z.ES,oe.Z.IE];function St(e){return fc.includes(e)}const Ka=Object.freeze({[oe.Z.US]:{subdivisionsLabel:(0,l.t)("states/territories",null,{project:"apps.App.Commerce"}),postalCodesLabel:(0,l.t)("ZIP Codes",null,{project:"apps.App.Commerce"}),postalCodeErrorLabel:(0,l.t)("ZIP Codes need to be 5 digits.",null,{project:"apps.App.Commerce"}),postalCodeRegExp:/^[0-9]{5}$/,examplePostalCodes:(0,l.t)("(e.g. 90210, 33139, 10004)",null,{project:"apps.App.Commerce"})},[oe.Z.CA]:{subdivisionsLabel:(0,l.t)("provinces/territories",null,{project:"apps.App.Commerce"}),postalCodesLabel:(0,l.t)("FSAs",null,{project:"apps.App.Commerce",notes:"An FSA is a Canadian Postal Code"}),postalCodeErrorLabel:(0,l.t)("An FSA code is invalid.",null,{project:"apps.App.Commerce"}),postalCodeRegExp:/^[A-Z][0-9][A-Z]$/i,examplePostalCodes:(0,l.t)("(e.g. V2Y, M4N, H3P)",null,{project:"apps.App.Commerce"})},[oe.Z.AU]:{subdivisionsLabel:(0,l.t)("states/territories",null,{project:"apps.App.Commerce"}),postalCodesLabel:(0,l.t)("Postal Codes",null,{project:"apps.App.Commerce"}),postalCodeErrorLabel:(0,l.t)("Postal Codes need to be 4 digits.",null,{project:"apps.App.Commerce"}),postalCodeRegExp:/^[0-9]{4}$/,examplePostalCodes:""},[oe.Z.GB]:{subdivisionsLabel:(0,l.t)("regions",null,{project:"apps.App.Commerce"}),postalCodesLabel:(0,l.t)("Postcodes",null,{project:"apps.App.Commerce"}),postalCodeErrorLabel:(0,l.t)("Enter only the 1-4 character outcode portion of postcodes.",null,{project:"apps.App.Commerce"}),postalCodeRegExp:/^[A-Z][A-Z]?([0-9][A-Z0-9]?)?$/,examplePostalCodes:(0,l.t)("(e.g. BT, BT1, NW, NW8)",null,{project:"apps.App.Commerce"})},[oe.Z.FR]:{subdivisionsLabel:(0,l.t)("regions",null,{project:"apps.App.Commerce"}),postalCodesLabel:(0,l.t)("Postcodes",null,{project:"apps.App.Commerce"}),postalCodeErrorLabel:(0,l.t)("Postal Codes need to be 5 digits",null,{project:"apps.App.Commerce"}),postalCodeRegExp:/^[0-9]{5}$/,examplePostalCodes:(0,l.t)("(e.g. 31400, 64200, 86360, 65000)",null,{project:"apps.App.Commerce"})},[oe.Z.NZ]:{subdivisionsLabel:(0,l.t)("regions",null,{project:"apps.App.Commerce"}),postalCodesLabel:(0,l.t)("Postcodes",null,{project:"apps.App.Commerce"}),postalCodeErrorLabel:(0,l.t)("Postcodes need to be 4 digits",null,{project:"apps.App.Commerce"}),postalCodeRegExp:/^[0-9]{4}$/,examplePostalCodes:(0,l.t)("(e.g. 6021, 7420, 9371, 9382)",null,{project:"apps.App.Commerce"})},[oe.Z.NO]:{subdivisionsLabel:(0,l.t)("regions",null,{project:"apps.App.Commerce"}),postalCodesLabel:(0,l.t)("Postal Codes",null,{project:"apps.App.Commerce"}),postalCodeErrorLabel:(0,l.t)("Postal Codes need to be 4 digits",null,{project:"apps.App.Commerce"}),postalCodeRegExp:/^[0-9]{4}$/,examplePostalCodes:(0,l.t)("(e.g. 6856, 9105, 9170, 2609)",null,{project:"apps.App.Commerce"})},[oe.Z.SE]:{subdivisionsLabel:(0,l.t)("provinces",null,{project:"apps.App.Commerce"}),postalCodesLabel:(0,l.t)("Postcodes",null,{project:"apps.App.Commerce"}),postalCodeErrorLabel:(0,l.t)("Enter up to 3 digits of the postcode",null,{project:"apps.App.Commerce"}),postalCodeRegExp:/^[0-9]{1,3}$/,examplePostalCodes:(0,l.t)("(e.g. 1, 203, 42)",null,{project:"apps.App.Commerce"})},[oe.Z.ES]:{subdivisionsLabel:(0,l.t)("provinces",null,{project:"apps.App.Commerce"}),postalCodesLabel:(0,l.t)("Postcodes",null,{project:"apps.App.Commerce"}),postalCodeErrorLabel:(0,l.t)("Postal Codes need to be 5 digits",null,{project:"apps.App.Commerce"}),postalCodeRegExp:/^[0-9]{5}$/,examplePostalCodes:(0,l.t)("(e.g. 08038, 47005, 29001)",null,{project:"apps.App.Commerce"})},[oe.Z.IE]:{subdivisionsLabel:(0,l.t)("counties",null,{project:"apps.App.Commerce"}),postalCodesLabel:(0,l.t)("Routing keys ",null,{project:"apps.App.Commerce",notes:"The first three characters of an Irish postal code (eircode)"}),postalCodeErrorLabel:(0,l.t)("Enter only the first three characters of the Eircode",null,{project:"apps.App.Commerce"}),postalCodeRegExp:/^[A-Z0-9]{3}$/,examplePostalCodes:(0,l.t)("(e.g. A65, P75, H14)",null,{project:"apps.App.Commerce"})},UNKNOWN:{subdivisionLabel:(0,l.t)("regions",null,{project:"apps.App.Commerce"}),postalCodesLabel:(0,l.t)("postal codes",null,{project:"apps.App.Commerce"}),postalCodeErrorLabel:(0,l.t)("Invalid postal code.",null,{project:"apps.App.Commerce"}),postalCodeRegExp:new RegExp,examplePostalCodes:""}}),rs=e=>St(e)?Ka[e]:Ka.UNKNOWN,Sc=Object.freeze({showSelected:!0,showExcluded:!0,showLabel:!0,showSubdivisionsLabel:!0,showPostalCodes:!0,showParentheses:!1,maxRegionsToDisplay:3,maxPostalCodesToDisplay:5}),za=e=>{if(!Array.isArray(e)||e.length===0)return"";const r=[...e],n=r.length,s=r.pop();return n===1?s:n===2?(0,l.t)("{firstItem} and {lastItem}",{firstItem:r[0],lastItem:s},{project:"apps.App.Commerce"}):(0,l.t)("{firstItems}, and {lastItem}",{firstItems:r.join(", "),lastItem:s},{project:"apps.App.Commerce",notes:"{firstItems} is a comma-separated list with 3+ items"})},Cc=e=>{const{allChildrenSelected:r,children:n,twoLetterIsoCode:s}=e,a=Object.values(n),i=a.length,o=Object.values(a).filter(P=>P.selected),d=r?i:o.length,p=o.some(P=>P.postalCodes&&P.postalCodes.length),{subdivisionsLabel:y,postalCodesLabel:A}=rs(s);return{allSelected:r,subdivisions:a,totalSubdivisions:i,selectedSubdivisions:o,numberSelected:d,hasPostalCodes:p,subdivisionsLabel:y,postalCodesLabel:A}},yc=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const{maxPostalCodesToDisplay:s}=n,{postalCodes:a=[],localizedName:i}=e,o=a.map(p=>Number(p));if(o.every(p=>!isNaN(p))&&a.length>3){const p=Math.max(...o),y=Math.min(...o);if(p-y+1===a.length){const A=`${y}\u2013${p}`;return(0,l.t)("{postalCodesRange} in {region}",{postalCodesRange:A,region:i},{project:"apps.App.Commerce",notes:'for examples, "90210-90219 in California'})}}return a.length>s?(0,l.t)("{number} {postalCodesLabel} in {region}",{number:a.length,postalCodesLabel:r,region:i},{project:"apps.App.Commerce",notes:'for example, "7 ZIP Codes in Nebraska" or "12 postal codes", always plural'}):a.length?(0,l.t)("{formattedPostalCodes} in {region}",{formattedPostalCodes:a.join(", "),region:i},{project:"apps.App.Commerce",notes:'for example, "90210, 90211 in California", 2+ comma-separated postal codes'}):e.localizedName},Ec=(e,r)=>{const{showSelected:n,showExcluded:s,showLabel:a,showSubdivisionsLabel:i,showPostalCodes:o,maxRegionsToDisplay:d}=r,{allSelected:p,subdivisions:y,totalSubdivisions:A,selectedSubdivisions:P,numberSelected:U,hasPostalCodes:K,subdivisionsLabel:O,postalCodesLabel:q}=Cc(e);let J=(0,l.t)("{numberSelected} of {totalSubdivisions}",{numberSelected:U,totalSubdivisions:A},{project:"apps.App.Commerce"});if(a&&(J=(0,l.t)("{numberSelected} of {totalSubdivisions} selected",{numberSelected:U,totalSubdivisions:A},{project:"apps.App.Commerce"}),i&&(J=(0,l.t)("{numberSelected} of {totalSubdivisions} {subdivisionsLabel}",{numberSelected:U,totalSubdivisions:A,subdivisionsLabel:O},{project:"apps.App.Commerce",notes:'for example, "6 of 12 provinces" or "12 of 50 states"'}))),U===0)return"";if(p&&A>0||U===A)return J;if(n&&U<=d){const X=za(Object.values(P).map(ne=>ne.localizedName));return K&&o?U>1?(0,l.t)("Select {postalCodesLabel} in {list}",{postalCodesLabel:q,list:X},{project:"apps.App.Commerce",notes:'{list} always has 2 or more regions, for example "Select ZIP Codes in Alaska and Hawaii"'}):yc(Object.values(P)[0],q,r):X}if(s&&A-U<=d){const X=y.filter(ne=>!ne.selected).map(ne=>ne.localizedName);return(0,l.t)("Excluding {list}",{list:za(X)},{project:"apps.App.Commerce",notes:'{list} can contain one or several regions, for example "Excluding Alaska, Hawaii, and Nebraska"'})}return J},un=(e,r)=>{r={...Sc,...r};const n=Ec(e,r);return n&&r.showParentheses?`(${n})`:n},ka=e=>un(e,{showSelected:!1,showExcluded:!1,showSubdivisionsLabel:!1,showPostalCodes:!1,showParentheses:!0}),Ic=e=>un(e,{showSelected:!1,showExcluded:!1,showLabel:!1,showPostalCodes:!1,showParentheses:!0});var Tc=t(478300),Ac=t(475814),Pc=t(423394),bc=t(87880),ls=t.n(bc);const l1=e=>e===CountryCode.GB,cs={},Lc=(e,r)=>r.reduce((n,s)=>{const{twoLetterIsoCode:a,localizedName:i}=s;return n[a]={type:ls().SUBDIVISION,parent:e,localizedName:i,twoLetterIsoCode:a},n},{}),Dc=(e,r)=>e.reduce((n,s)=>{const{twoLetterIsoCode:a,localizedName:i}=s,o=(0,Tc.Wh)(a,r),d=St?Lc(s,o):{},p=!!(d&&Object.keys(d).length);return n[a]={type:ls().COUNTRY,localizedName:i,twoLetterIsoCode:a,children:d,hasChildren:p},n},{}),Nc=e=>{const r=(0,Ac.Wh)(e);return Dc(r,e)};function Xa(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:(0,Pc.uu)();return cs[e]||(cs[e]=Nc(e)),cs[e]}var Rc=t(484623),gn=t.n(Rc);function Ja(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e=gn()(e),Object.values(r).forEach(n=>{const{twoLetterIsoCode:s,children:a}=n,i=e[s];if(!i)return;i.selected=!0;const o=!(a&&Object.values(a).length);i.allChildrenSelected=o,a&&Object.values(i.children).forEach(d=>{const p=a[d.twoLetterIsoCode];p?(d.selected=p.selected!==!1,d.postalCodes=p.children?Object.keys(p.children):p.postalCodes):d.selected=o})}),e}function Qa(e){const r={};return e.forEach(function(n){const s=n.key;let a={};n.children&&(a=Qa(n.children)),r[s]={selected:!0,twoLetterIsoCode:s,children:a,type:n.regionType}}),r}const $a=Qa;function Ya(e){const r=[];return Object.values(e).forEach(n=>{let s=[];n.selected&&(n.children&&!n.allChildrenSelected&&(s=Ya(n.children)),!s.length&&n.postalCodes&&(s=n.postalCodes.map(a=>({key:a,children:[],regionType:ls().POSTAL_CODE}))),r.push({key:n.twoLetterIsoCode,children:s,regionType:n.type}))}),r}const xc=Ya;var _a=t(541585);const Mc="shipping-panel";var c1=null;const Oc=new Map([["FEDEX",{value:"carrier-fedex",name:"Carrier Calculated via FedEx"}],["FLAT",{value:"flat-rate",name:"Flat Rate"}],["UPS",{value:"carrier-ups",name:"Carrier Calculated via UPS"}],["USPS",{value:"carrier-usps",name:"Carrier Calculated via USPS"}],["WEIGHT_RANGE",{value:"weight-based",name:"Depending on Weight"}]]),Bc=new(Ks())({customSchemaName:"commerce_setup"},{event_owner_team:"commerce",event_source:"web",product_area:"commerce-core",user_website_id:Ze()(window,"Static.SQUARESPACE_CONTEXT.website.id",null),...(0,zs.ZP)()}),Uc=(e,r,n)=>{const{availableEverywhere:s,name:a,regions:i,formula:{formulaName:o,perItemFeeCents:d,perOrderFeeCents:p},id:y}=e,A=Oc.get(o),P=y||n;if(!A)return;const U={};(o==="FLAT"||o==="WEIGHT_RANGE")&&(U.shipping_option_name=a,U.shipping_zones=s?"world":i==null?void 0:i.map(K=>{let{key:O}=K;return O}).join(",")),o==="FLAT"&&(U.flatrate_orderfee=p,U.flatrate_feeperitem=d),Bc.track({actor:"user",action:r?"update":"add",object_identifier:"shipping-option",object_type:"setting",object_display_name:A.name,object_value:A.value,object_id:P,product_page:Mc,currency_code:Va.Z.getStoreCurrency(),...U})};var Ct=t(968579),Fc=t(154440);YUI.add("squarespace-dialog-shipping-rule-list",function(e){e.namespace("Squarespace.DialogFields");var r=Xa(),n=4,s=e.Squarespace.Commerce.ShippingEnums,a=e.Squarespace.DialogFields.ShippingRuleList=e.Base.create("ShippingRuleList",e.Squarespace.DialogField2,[],{initializer:function(){this.shippingImportModalRoot=e.Node.create('<div class="shipping-import-modal"></div>')},destructor:function(){ee.unmountComponentAtNode(this.shippingImportModalRoot.getDOMNode()),this.shippingImportModalRoot.remove(!0),this.shippingImportModalRoot=null},bindUI:function(){a.superclass.bindUI.call(this),e.on("custom:refreshOptions",function(){e.Data.get({headers:{"Content-Type":"application/json"},url:"/api/commerce/shipping-options",success:function(o){this._updateRules(o),this.get("data").onImportEnd()}},this)},this);var i=this.get("contentBox");i.delegate("click",this.showShippingTypeChooser,".list-add",this),i.delegate("click",function(o){this._addEditOption(o.currentTarget,!0)},".rule",this),i.delegate("click",this._openShippingImportModal,".list-import",this)},syncUI:function(){a.superclass.syncUI.call(this);var i=this.get("contentBox"),o=i.one(".list-import");this.get("data").isImportInProgress&&o.setAttribute("disabled","disabled"),o.hide();var d=uc.Z.hasRole(dc().ADMIN);d&&(o.setContent((0,l.t)("Import from Etsy",null,{project:"scripts-v6.dialog"})),o.show()),this.get("data").forceEtsyImportScreen&&this._openShippingImportModal(),this._updateRules(this.get("data").shippingOptions)},_customRender:function(i){var o=this.get("contentBox");o.one(".list-body").empty();var d=o.one(".list-add");i.length===0&&o.one(".list-body").append('<div class="no-options"></div>'),d.setContent((0,l.t)("Add Shipping Option",null,{project:"scripts-v6.dialog"})),d.show(),i.forEach(function(p){p.countries=this._getFullCountryList(p.regions),o.one(".list-body").append(this._createRuleNode(p))},this)},_createRuleNode:function(i){var o=e.Node.create(this._createRuleEl(i));return i.isValid||o.append('<div class="warning"></div>'),o.setData(i),o},_createRuleEl:function(i){var o=this.getProperty("SHIPPING_RULE_TEMPLATES"),d=this._getShipsToString(i),p;if(i.markup.markupType===cn().FIXED_AMOUNT?p=os.h.formatter.format((0,dn.$f)(i.markup.markupValue)):p=(0,l.uf)(i.markup.markupValue)+"%",i.rateType===ae().FLAT)return e.Lang.sub(o.FLAT,{name:i.name,perOrderFeeCents:os.h.formatter.format((0,dn.$f)(i.perOrderFeeCents)),perItemFeeCents:os.h.formatter.format((0,dn.$f)(i.perItemFeeCents)),shipsTo:d});if(i.rateType===ae().WEIGHT_RANGE)return e.Lang.sub(o.WEIGHT_RANGE,{name:i.name,shipsTo:d});if(i.rateType===ae().FEDEX)return e.Lang.sub(o.FEDEX,{name:i.name,markup:p,shipsTo:d});if(i.rateType===ae().UPS)return e.Lang.sub(o.UPS,{name:i.name,markup:p,shipsTo:d});if(i.rateType===ae().USPS)return e.Lang.sub(o.USPS,{name:i.name,markup:p,shipsTo:d})},_getShipsToString:function(i){var o=this._getShortCountryList(i.regions,n);return i.availableEverywhere?(0,l.t)("Rest of the world",null,{project:"scripts-v6.dialog"}):i.regions.length>n?(0,l.t)("{sub1}, and {sub2} other countries",{sub1:o.join(", "),sub2:i.regions.length-n+1},{project:"scripts-v6.dialog"}):o.join(", ")},_unwrapFormulaField:function(i){if(e.Lang.isObject(i.formula)){var o=i.formula;return delete i.formula,i.markup={markupType:o.markupType||cn().PERCENTAGE,markupValue:o.markupValue||0},e.merge(i,o)}return i},showUnsupportedProductsWarning:function(i){var o=new e.Squarespace.EditingDialog({style:"flyout",name:"unsupported-products",savingText:(0,l.t)("Moving to Inventory\u2026",null,{project:"scripts-v6.dialog"}),width:410,overlay:.5,closeOthers:!1,buttons:[{type:"cancel",title:(0,l.t)("Ignore",null,{project:"scripts-v6.dialog"})},{type:"saveAndClose",title:(0,l.t)("Fix",null,{project:"scripts-v6.dialog"})}],primaryTabs:[{title:(0,l.t)("Unable to Calculate Shipping Rates",null,{project:"scripts-v6.dialog"}),fields:[{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,l.t)('The shipping rates for some of your products cannot be calculated and will be ignored at checkout. <br /><br /><strong>You may be undercharging for shipping as a result.</strong> <br /><br />To fix this issue you must populate the weight and dimensions of all of your products and make sure they do not exceed any carrier limits. <a href="{uspsCalculatedShippingLink}" target="_blank">Learn more</a>',{uspsCalculatedShippingLink:ft.CALCULATED_SHIPPING_RATES},{project:"scripts-v6.dialog"})}}]}]}),d=!0;this._registerEvent(o.on("send-requested",function(){d=!1,e.later(500,this,function(){e.Squarespace.Singletons.Location.go("/commerce/inventory/"),this.close()})})),this._registerEvent(o.on("close",function(){d&&this._addEditOption(i,!1)},this)),o.show()},_updateRules:function(i){e.Lang.isArray(i)?i=i.map(this._unwrapFormulaField):i=[],this._customRender(i)},_getCountryTags:function(){return e.Object.values(e.Squarespace.Localities.COUNTRY_OPTIONS).filter(function(i){return!i.empty}).map(function(i){return i.title})},_openShippingImportModal:function(){(0,_a.wm)(),ee.render(I.createElement(vc,{onClose:this._unMountShippingImportModal.bind(this),onImportStart:this.get("data").onImportStart}),this.shippingImportModalRoot.getDOMNode()),e.one(".sqs-shipping-rule-list").prepend(this.shippingImportModalRoot)},_unMountShippingImportModal:function(){(0,_a.Wq)(),ee.unmountComponentAtNode(this.shippingImportModalRoot.getDOMNode())},showShippingTypeChooser:function(){(0,Ct.Fm)(Ct.qQ.SHIPING);var i=[{value:ae().FLAT,title:(0,l.t)("Flat Rate",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Define a charge for every order and a flat fee for each item.",null,{project:"scripts-v6.dialog"})},{value:ae().WEIGHT_RANGE,title:(0,l.t)("Depending on Weight",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Let the cost depend on the total weight of the purchase.",null,{project:"scripts-v6.dialog"})}],o=ct.Z.isFeatureEnabled(Ge().REAL_TIME_SHIPPING_RATES),d=rn.Z.getUpsellCopy(Ge().REAL_TIME_SHIPPING_RATES),p=!o;i.push({value:ae().FEDEX,title:(0,l.t)("Carrier Calculated via FedEx",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Request a quote from FedEx using weight, distance, and package size.",null,{project:"scripts-v6.dialog"}),upsellLocked:p,upsellInfo:d,renderNewUpsellLogo:!0},{value:ae().UPS,title:(0,l.t)("Carrier Calculated via UPS",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Request a quote from UPS using weight, distance, and package size.",null,{project:"scripts-v6.dialog"}),upsellLocked:p,upsellInfo:d,renderNewUpsellLogo:!0},{value:ae().USPS,title:(0,l.t)("Carrier Calculated via USPS",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Request a quote from the USPS using weight, distance, and package size.",null,{project:"scripts-v6.dialog"}),upsellLocked:p,upsellInfo:d,renderNewUpsellLogo:!0});var y=new e.Squarespace.DialogFlow({fieldName:"rateType",title:(0,l.t)("Add Shipping Option",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Shipping Options may be calculated by a variety of methods. Choose how you would like your option's costs to be calculated.",null,{project:"scripts-v6.dialog"}),options:i,nextDialogGenerator:e.bind(this._buildAddEditOptionDialog,this)}),A=_e.default.getState(),P=e.Object.getValue(A,["storeSettings","contactLocation","addressCountry"]);e.Squarespace.Localities.countryCodeFromName(P)||(P=Us.default.getState().getIn(["location","addressCountry"])),e.Squarespace.Localities.countryCodeFromName(P)||(P=ln.Z.US),y.showPrescreen({countries:[P],availableEverywhere:!1,regions:[]})},_buildAddEditOptionDialog:function(i){var o=i.id===void 0,d=i.rateType,p=this._isCarrierCalculated(d),y=this._buildAddEditButtons(o),A=570;i.rateType===ae().FEDEX&&(A=590);var P;this._ruleEditDialog=P=new e.Squarespace.EditingDialog({name:"addEditRule",style:"flyout",savingText:(0,l.t)("Saving Shipping Option\u2026",null,{project:"scripts-v6.dialog"}),initialData:i,overlay:.5,width:A,height:460,closeOthers:!1,discardChangesConfirmation:!0,buttons:y,primaryTabs:this._getPrimaryTabs(i),secondaryTabs:this._getSecondaryTabs(i)});var U=function(O){P.close(),this._updateRules(O),(0,Fc.oS)()},K=function(O){var q=O.errors||{};q.containerKey&&(P.getField("customContainers").setErrorAnchor(q.containerKey),delete q.containerKey),e.Object.each(q,function(J,X){var ne={};ne[X]=J,P.showErrors(ne)},this)};return this._registerEvent(P.on("send-requested",function(){var O=P.getData();O.rateType===ae().FLAT?(O.formula={formulaName:"FLAT",perOrderFeeCents:O.perOrderFeeCents,perItemFeeCents:O.perItemFeeCents},delete O.perOrderFeeCents,delete O.perItemFeeCents):O.rateType===ae().WEIGHT_RANGE?(O.formula={formulaName:"WEIGHT_RANGE",ranges:O.ranges},delete O.ranges):this._isCarrierCalculated(O.rateType)&&(O.formula={formulaName:O.formulaName,selectedServices:O.selectedServices,markupType:O.markup.markupType,markupValue:O.markup.markupValue,customContainers:O.customContainers,useOnlinePrice:O.useOnlinePrice,useSystemContainers:O.useSystemContainers},delete O.useSystemContainers,delete O.useOnlinePrice,delete O.customContainers,delete O.markup,delete O.serviceType),O.countries=O.countries.map(function(X){return e.Squarespace.Localities.countryCodeFromName(X)}).filter(function(X){return X!==null}),O.shippingZones&&(O.regions=xc(O.shippingZones.regions),O.availableEverywhere=O.shippingZones.restOfWorld,delete O.shippingZones);var q="post",J="";i.id!==void 0&&(q="put",J="/"+i.id),e.Data[q]({headers:{"Content-Type":"application/json"},url:"/api/commerce/shipping-options"+J,data:e.JSON.stringify(O),success:function(X){U.call(this,X),Uc(O,q==="put",X[X.length-1].id),q==="post"&&(0,Ga.broadcastGuidanceTaskCompletion)({skipPersist:!0,taskType:Ga.TaskType.ADD_FULFILLMENT_METHOD})},failure:K},this)},this)),this._registerEvent(P.on("remove-requested",function(){(0,Ct.DA)(Ct.qQ.SHIPING,i.id,i.name);var O=function(){P.clearEdited(),e.Data.del({url:"/api/commerce/shipping-options/"+i.id,success:U},this)};new e.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("Remove Shipping Option",null,{project:"scripts-v6.dialog"}),"strings.message":(0,l.t)("Are you sure you wish to remove this shipping option?",null,{project:"scripts-v6.dialog"})}).on("confirm",O,this)},this)),this._registerEvent(P.on("datachange",function(O){if(O.getName()==="availableEverywhere"){var q=P.getField("countries");O.getValue()===!0?q.temporaryHide():q.temporaryShow()}},this)),P.after("shown",function(){if(p){var q=P.getField("carrierType").get("data"),J=P.getField("selectedServices"),X=P.getField("useOnlinePrice"),ne=P.getField("useSystemContainers"),_=P.getField("systemContainers");if(this._registerEvent(J.after("check",function(ye){ye=ye||{};var Xe=J.get("data")||i.selectedServices;this._fetchSystemContainers(q,Xe,function(bt){var Fe=bt.containers||[],hs=bt.unsupportedServices;_.set("data",Fe);var at=this._onlyGroundServices(Xe,hs);ne.set("visible",!at),_.set("isSupported",!at),ye.initialSync&&P.clearEdited()},this)},this)),J.fire("check",{initialSync:!0}),X){var Ne=function(ye){ye.target===ye.currentTarget.one(".learn-more-link")&&ye.stopPropagation()};this._registerEvent(X.get("contentBox").on("click",Ne))}}else{var O=P.getField("shippingZones");O.set("containerEl",P.mainEl.getDOMNode())}},this),P},_addEditOption:function(i,o){var d={countries:["US"]};d.regions={},d.availableEverywhere=!1;var p=i.getData(),y=e.merge(d,p);if(o&&!y.isValid){this.showUnsupportedProductsWarning(i);return}(0,Ct.LJ)(Ct.qQ.SHIPING,p.id,p.name);var A=this._buildAddEditOptionDialog(y);A.show()},_getSecondaryTabs:function(i){if(!this._isCarrierCalculated(i.rateType))return[{tabTitle:(0,l.t)("Shipping Zones",null,{project:"scripts-v6.dialog"}),scroll:!1,fields:[{ctor:e.Squarespace.DialogFields.RegionalShipping,name:"shippingZones",config:{data:{restOfWorld:i.availableEverywhere,regions:i.availableEverywhere?{}:$a(i.regions)}}}]}]},_getPrimaryTabs:function(i){var o=i.rateType,d={ctor:e.Squarespace.DialogFields.Text,config:{name:"name",className:"thin",maxLength:65,"strings.title":(0,l.t)("Option Name",null,{project:"scripts-v6.dialog"}),"strings.description":(0,l.t)('e.g. "FedEx Next Day", "USPS Express Mail"',null,{project:"scripts-v6.dialog"}),required:!0}},p=e.Squarespace.Commerce.measurementStandard(),y=e.Squarespace.Commerce.weightUnit(),A=Va.Z.getStoreCurrency();if(o===ae().FLAT)return[{title:(0,l.t)("Edit Flat Rate",null,{project:"scripts-v6.dialog"}),tabTitle:(0,l.t)("Formula",null,{project:"scripts-v6.dialog"}),fields:[d,{type:"splitter",fields:[{ctor:e.Squarespace.DialogFields.MoneyText,config:{name:"perOrderFeeCents",width:.5,required:!0,"strings.title":(0,l.t)("Per Order Fee",null,{project:"scripts-v6.dialog"}),"strings.description":(0,l.t)("A base fee for every order placed",null,{project:"scripts-v6.dialog"})}},{ctor:e.Squarespace.DialogFields.MoneyText,config:{name:"perItemFeeCents",width:.5,required:!0,"strings.title":(0,l.t)("Fee Per Item",null,{project:"scripts-v6.dialog"}),"strings.description":(0,l.t)("An additional fee for each physical item in the order",null,{project:"scripts-v6.dialog"})}}]},{type:"hidden",name:"rateType"}]}];if(o===ae().WEIGHT_RANGE)return[{title:(0,l.t)("Weight Range Rate",null,{project:"scripts-v6.dialog"}),tabTitle:(0,l.t)("Formula",null,{project:"scripts-v6.dialog"}),scroll:!0,fields:[d,{ctor:e.Squarespace.DialogFields.RangeTable,name:"ranges",strings:{title:(0,l.t)("Weight Ranges",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Depending on the total order weight, you can charge different amounts for shipping.",null,{project:"scripts-v6.dialog"}),dimensionsLabel:e.Lang.sub((0,l.t)("Weight ({units})",null,{project:"scripts-v6.dialog"}),{units:y}),valueLabel:(0,l.t)("Cost",null,{project:"scripts-v6.dialog"})}},{type:"hidden",name:"rateType"}]}];if(o===ae().FEDEX)return[{title:(0,l.t)("FedEx Real-Time Rates",null,{project:"scripts-v6.dialog"}),tabTitle:(0,l.t)("Formula",null,{project:"scripts-v6.dialog"}),fields:[{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Configure FedEx Rates",null,{project:"scripts-v6.dialog"}),text:(0,l.t)('Quotes are requested directly from FedEx using weight, distance, and package size. Compare quotes by using the <a href="https://www.fedex.com/ratefinder/home" target="_blank">FedEx Rate Calculator</a>.',null,{project:"scripts-v6.dialog"})}},{ctor:e.Squarespace.DialogFields.CheckboxGroup,config:{name:"selectedServices",options:this._buildServiceOptions(s.CarrierTypes.FEDEX,i.selectedServices),strings:{title:(0,l.t)("Available Services",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Select the services you would like your store to support.",null,{project:"scripts-v6.dialog"})},className:"checkbox-group"}},{type:"splitter",fields:[{ctor:e.Squarespace.DialogFields.MarkupInput,config:{name:"markup",title:(0,l.t)("Markup",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Add a markup to the shipping costs estimated by FedEx.",null,{project:"scripts-v6.dialog"}),storeCurrency:A,width:.5}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"zipOrigination",width:.5,className:"thin","strings.title":(0,l.t)("Ship from ZIP Code",null,{project:"scripts-v6.dialog"}),"strings.description":(0,l.t)("The ZIP Code where you will be shipping from.",null,{project:"scripts-v6.dialog"})}}]},{type:"hidden",name:"formulaName",data:"FEDEX"},{type:"hidden",name:"carrierType",data:s.CarrierTypes.FEDEX},{type:"hidden",name:"rateType"}]},{title:(0,l.t)("FedEx Real-Time Rates",null,{project:"scripts-v6.dialog"}),tabTitle:(0,l.t)("FedEx Containers",null,{project:"scripts-v6.dialog"}),scroll:!0,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("FedEx Containers",null,{project:"scripts-v6.dialog"}),text:(0,l.t)("Please indicate if you would like containers provided by FedEx to be considered when calculating shipping costs. Shipping costs will be estimated at checkout by packing the order into as few of these containers as possible. ",null,{project:"scripts-v6.dialog"})}},{ctor:e.Squarespace.DialogFields.Check,name:"useSystemContainers","strings.title":(0,l.t)("Use FedEx Containers",null,{project:"scripts-v6.dialog"}),defaultValue:!0},{ctor:e.Squarespace.DialogFields.ShippingSystemContainerTable,config:{name:"systemContainers",visible:i.useSystemContainers,measurementStandard:p}}]},{title:(0,l.t)("FedEx Real-Time Rates",null,{project:"scripts-v6.dialog"}),tabTitle:(0,l.t)("Custom Containers",null,{project:"scripts-v6.dialog"}),scroll:!0,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Custom Containers",null,{project:"scripts-v6.dialog"}),text:(0,l.t)("Add any custom boxes you use for shipping. Shipping costs will be estimated at checkout by packing the order into as few of these containers as possible.",null,{project:"scripts-v6.dialog"})}},{ctor:e.Squarespace.DialogFields.ShippingContainerTable,config:{carrier:s.CarrierTypes.FEDEX,name:"customContainers",selectedServices:i.selectedServices,useSystemContainers:i.useSystemContainers,measurementStandard:p}}]}];if(o===ae().UPS)return[{title:(0,l.t)("UPS Real-Time Rates",null,{project:"scripts-v6.dialog"}),tabTitle:(0,l.t)("Formula",null,{project:"scripts-v6.dialog"}),fields:[{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Configure UPS Rates",null,{project:"scripts-v6.dialog"}),text:(0,l.t)('Quotes are requested directly from UPS using weight, distance, and package size. Compare quotes by using the <a href="https://wwwapps.ups.com/ctc/request" target="_blank">UPS Rate Calculator</a>.',null,{project:"scripts-v6.dialog"})}},{ctor:e.Squarespace.DialogFields.CheckboxGroup,config:{name:"selectedServices",options:this._buildServiceOptions(s.CarrierTypes.UPS,i.selectedServices),strings:{title:(0,l.t)("Available Services",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Select the services you would like your store to support.",null,{project:"scripts-v6.dialog"})},className:"checkbox-group"}},{type:"splitter",fields:[{ctor:e.Squarespace.DialogFields.MarkupInput,config:{name:"markup",title:(0,l.t)("Markup",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Add a markup to the shipping costs estimated by UPS.",null,{project:"scripts-v6.dialog"}),storeCurrency:A,width:.5}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"zipOrigination",width:.5,className:"thin","strings.title":(0,l.t)("Ship from ZIP Code",null,{project:"scripts-v6.dialog"}),"strings.description":(0,l.t)("The ZIP Code where you will be shipping from.",null,{project:"scripts-v6.dialog"})}}]},{type:"hidden",name:"formulaName",data:"UPS"},{type:"hidden",name:"carrierType",data:s.CarrierTypes.UPS},{type:"hidden",name:"rateType"}]},{title:(0,l.t)("UPS Real-Time Rates",null,{project:"scripts-v6.dialog"}),tabTitle:(0,l.t)("UPS Containers",null,{project:"scripts-v6.dialog"}),scroll:!0,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("UPS Containers",null,{project:"scripts-v6.dialog"}),text:(0,l.t)("Please indicate if you would like containers provided by UPS to be considered when calculating shipping costs. Shipping costs will be estimated at checkout by packing the order into as few of these containers as possible. ",null,{project:"scripts-v6.dialog"})}},{ctor:e.Squarespace.DialogFields.Check,name:"useSystemContainers","strings.title":(0,l.t)("Use UPS Containers",null,{project:"scripts-v6.dialog"}),defaultValue:!0},{ctor:e.Squarespace.DialogFields.ShippingSystemContainerTable,config:{name:"systemContainers",visible:i.useSystemContainers,measurementStandard:p}}]},{title:(0,l.t)("UPS Real-Time Rates",null,{project:"scripts-v6.dialog"}),tabTitle:(0,l.t)("Custom Containers",null,{project:"scripts-v6.dialog"}),scroll:!0,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Custom Containers",null,{project:"scripts-v6.dialog"}),text:(0,l.t)("Add any custom boxes you use for shipping. Shipping costs will be estimated at checkout by packing the order into as few of these containers as possible.",null,{project:"scripts-v6.dialog"})}},{ctor:e.Squarespace.DialogFields.ShippingContainerTable,config:{carrier:s.CarrierTypes.UPS,name:"customContainers",selectedServices:i.selectedServices,useSystemContainers:i.useSystemContainers,measurementStandard:p}}]}];if(o===ae().USPS)return[{title:(0,l.t)("USPS Real-Time Rates",null,{project:"scripts-v6.dialog"}),tabTitle:(0,l.t)("Formula",null,{project:"scripts-v6.dialog"}),fields:[{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Configure USPS Rates",null,{project:"scripts-v6.dialog"}),text:(0,l.t)('Quotes are requested directly from the USPS using weight, distance, and package size. Compare quotes by using the <a href="http://postcalc.usps.com/" target="_blank">USPS Postage Price Calculator</a>.',null,{project:"scripts-v6.dialog"})}},{ctor:e.Squarespace.DialogFields.CheckboxGroup,config:{name:"selectedServices",options:this._buildServiceOptions(s.CarrierTypes.USPS,i.selectedServices),strings:{title:(0,l.t)("Available Services",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Select the services you would like your store to support.",null,{project:"scripts-v6.dialog"})},className:"checkbox-group"}},{type:"splitter",fields:[{ctor:e.Squarespace.DialogFields.MarkupInput,config:{name:"markup",title:(0,l.t)("Markup",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Add a markup to the shipping costs estimated by USPS.",null,{project:"scripts-v6.dialog"}),storeCurrency:A,width:.5}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"zipOrigination",width:.5,className:"thin","strings.title":(0,l.t)("Ship from ZIP Code",null,{project:"scripts-v6.dialog"}),"strings.description":(0,l.t)("The ZIP Code where you will be shipping from.",null,{project:"scripts-v6.dialog"})}}]},{type:"hidden",name:"formulaName",data:"USPS"},{type:"hidden",name:"carrierType",data:s.CarrierTypes.USPS},{type:"hidden",name:"rateType"}]},{title:(0,l.t)("USPS Real-Time Rates",null,{project:"scripts-v6.dialog"}),tabTitle:(0,l.t)("Flat Rate Boxes",null,{project:"scripts-v6.dialog"}),scroll:!0,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Flat Rate Boxes",null,{project:"scripts-v6.dialog"}),text:(0,l.t)("Please indicate if you would like flat rate boxes provided by the USPS to be considered when calculating shipping costs. Shipping costs will be estimated at checkout by packing the order into as few of these boxes as possible. ",null,{project:"scripts-v6.dialog"})}},{ctor:e.Squarespace.DialogFields.Check,name:"useSystemContainers","strings.title":(0,l.t)("Use Flat Rate Boxes",null,{project:"scripts-v6.dialog"}),defaultValue:!0},{ctor:e.Squarespace.DialogFields.ShippingSystemContainerTable,config:{name:"systemContainers",visible:i.useSystemContainers,measurementStandard:p}}]},{title:(0,l.t)("USPS Real-Time Rates",null,{project:"scripts-v6.dialog"}),tabTitle:(0,l.t)("Custom Containers",null,{project:"scripts-v6.dialog"}),scroll:!0,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Custom Containers",null,{project:"scripts-v6.dialog"}),text:(0,l.t)("Add any custom boxes you use for shipping. Shipping costs will be estimated at checkout by packing the order into as few of these containers as possible.",null,{project:"scripts-v6.dialog"})}},{ctor:e.Squarespace.DialogFields.ShippingContainerTable,config:{carrier:s.CarrierTypes.USPS,name:"customContainers",selectedServices:i.selectedServices,useSystemContainers:i.useSystemContainers,measurementStandard:p}}]}];throw new Error("Shipping Rate Type not supported: "+o)},_buildServiceOptions:function(i,o){o=o||[];var d=s.CarrierTypeServicesMap[i],p=[];return e.Object.each(d,function(y,A){p.push({name:A,label:y,value:o.indexOf(A)!==-1})}),p},_buildAddEditButtons:function(i){var o=[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6.dialog"})}];return i||o.push({type:"remove",title:(0,l.t)("Remove",null,{project:"scripts-v6.dialog"})}),o.push({type:"saveAndClose",title:(0,l.t)("Save",null,{project:"scripts-v6.dialog"})}),o},_isCarrierCalculated:function(i){return i===ae().FEDEX||i===ae().UPS||i===ae().USPS},_fetchSystemContainers:function(i,o,d,p){e.Data.get({url:e.Squarespace.API_ROOT+"commerce/shipping-options/containers",data:{carrierType:i,selectedServices:o},success:d.bind(p)})},_markSelectedServices:function(i,o){return i.map(function(d){return{name:d.name,label:d.label,value:o.indexOf(d.name)>-1}})},_onlyGroundServices:function(i,o){var d=e.Array.some(i,function(p){if(o.indexOf(p)===-1)return!0});return!d},_getFullCountryList:function(i){return i.map(function(o){return ln.Z[o.key]}).filter(function(o){return o})},_getShortCountryList:function(i,o){var d=[],p=Ja(r,$a(i));return i.length>o&&(i=i.slice(0,o-1)),i.forEach(function(y){var A=ln.Z[y.key];if(A){var P=p[y.key],U=Ic(P);U&&Object.keys(P.children).length&&St(y.key)&&(A+=" "+U),d.push(A)}}),d}},{CSS_PREFIX:"sqs-shipping-rule-list",HANDLEBARS_TEMPLATE:"dialog-shipping-rule-list.html",SHIPPING_RULE_TEMPLATES:{FLAT:'<div class="rule"><div class="name">{name}</div><div class="description">'+(0,l.t)("Flat Rate: {perOrderFeeCents} per order, {perItemFeeCents} per item",null,{project:"scripts-v6.dialog"})+'</div><div class="description shipsTo">{shipsTo}</div></div>',WEIGHT_RANGE:'<div class="rule"><div class="name">{name}</div><div class="description">'+(0,l.t)("Weight Ranges",null,{project:"scripts-v6.dialog"})+'</div><div class="description shipsTo">{shipsTo}</div></div>',FEDEX:'<div class="rule"><div class="name">{name}</div><div class="description">'+(0,l.t)("Calculated by FedEx (with {markup} markup)",null,{project:"scripts-v6.dialog"})+'</div><div class="description shipsTo">{shipsTo}</div></div>',UPS:'<div class="rule"><div class="name">{name}</div><div class="description">'+(0,l.t)("Calculated by UPS (with {markup} markup)",null,{project:"scripts-v6.dialog"})+'</div><div class="description shipsTo">{shipsTo}</div></div>',USPS:'<div class="rule"><div class="name">{name}</div><div class="description">'+(0,l.t)("Calculated by the Postal Service (with {markup} markup)",null,{project:"scripts-v6.dialog"})+'</div><div class="description shipsTo">{shipsTo}</div></div>'},ATTRS:{readOnly:{value:!0}}})},"1.0",{requires:["base","squarespace-commerce-shipping-enums","squarespace-commerce-utils","squarespace-dialog","squarespace-dialog-check","squarespace-dialog-checkbox-group","squarespace-dialog-field-2","squarespace-dialog-flow","squarespace-dialog-markup-input","squarespace-dialog-regional-shipping","squarespace-dialog-shipping-container-table","squarespace-dialog-shipping-rule-list-template","squarespace-dialog-shipping-system-container-table","squarespace-localities","squarespace-singletons-location","squarespace-util-authenticated","squarespace-widgets-confirmation"]});var d1=t(324431),jc=t(696049),wc=t(823125),ds=t(965885),Wc=t(889113),qe=t.n(Wc);const ei=e=>{const{hasErrors:r,errorMessage:n,renderField:s,children:a,...i}=e,o=ue()({[qe().facadeError]:r}),d=ue()(qe().input,{[qe().inputError]:r});return I.createElement("div",{className:qe().container},I.createElement("div",{className:qe().row},I.createElement(ds.Select,{wrapperClassName:qe().select,className:o,...i},a),s(d)),r&&I.createElement("div",{className:ue()(qe().row,qe().error)},n))};ei.propTypes={hasErrors:x().bool,errorMessage:x().string,renderField:x().func.isRequired};const ti=ei;var si=t(204482),Zc=t(535025),Vc=t.n(Zc);function yt(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}const{isBackspaceKey:Gc,isDeleteKey:Hc,isEnterKey:qc,isNumericKey:Kc,isTabKey:zc,hasShiftModifierKey:kc}=si,Xc=[110,190,37,39],Jc=[zc,Hc,Gc,qc,Kc,kc,e=>{let{keyCode:r}=e;return Xc.includes(r)}];class pn extends I.Component{isWithinRange(r){return r>=0&&r<=this.props.maxValue}UNSAFE_componentWillReceiveProps(r){let{value:n}=r;this.state.isEditing||this.setState({value:n})}render(){const{isEditing:r,value:n}=this.state,s=ue()(Vc().damaskInputOnWhiteBorder);return I.createElement(ds.Input,{...this.props,className:s,value:n+(r?"":"%"),onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange,onKeyDown:this.handleKeyDown})}constructor(r){super(r),yt(this,"handleKeyDown",s=>{Jc.some(i=>i(s))||s.preventDefault()}),yt(this,"handleChange",s=>{const a=this.props.onChange;if(s===""){a(0),this.setState({value:""});return}const i=parseFloat(s);this.isWithinRange(i)&&(a(i),this.setState({value:i}))}),yt(this,"handleFocus",s=>{this.setState({isEditing:!0});const a=s.target;setTimeout(()=>a.select(),0)}),yt(this,"handleBlur",s=>{const a=s.target.value;if(a==="")this.setState({isEditing:!1,value:0});else{const i=parseFloat(a);this.setState({isEditing:!1,value:isNaN(i)?0:i})}});const n=r.value;this.state={isEditing:!1,value:this.isWithinRange(n)?n:0}}}yt(pn,"propTypes",{value:x().number.isRequired,onChange:x().func.isRequired,maxValue:x().number}),yt(pn,"defaultProps",{maxValue:100});const Qc=pn;var $c=t(5973),Yc=t.n($c),_c=t(663634),ed=t(356130);function Et(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}const ni=[I.createElement("option",{key:Te.PERCENTAGE,value:Te.PERCENTAGE},(0,l.t)("Percentage",null,{project:"apps.App.Commerce"})),I.createElement("option",{key:Te.FIXED_AMOUNT,value:Te.FIXED_AMOUNT},(0,l.t)("Amount",null,{project:"apps.App.Commerce"}))];class ai extends I.Component{render(){const{value:r,template:n}=this.state,{title:s,description:a}=this.props;return I.createElement("div",{className:Yc().fieldWrapper},I.createElement("div",{className:"title"},s),n===Te.FIXED_AMOUNT?this.renderFixedAmountInput(r):this.renderPercentageInput(r),I.createElement("div",{className:"description"},a))}constructor(r){super(r),Et(this,"handleTemplateChange",a=>{this.setState({template:a,value:0})}),Et(this,"handleFixedAmountBlur",a=>{const{storeCurrency:i}=this.props,o=(0,l.Wj)(i).digits;this.props.onInputChange({markupType:Te.FIXED_AMOUNT,markupValue:Math.round(a.multiply(Math.pow(10,o)).toFloat())})}),Et(this,"handlePercentageChange",a=>{this.props.onInputChange({markupType:Te.PERCENTAGE,markupValue:a})}),Et(this,"renderPercentageInput",a=>I.createElement(ti,{value:Te.PERCENTAGE,onChange:this.handleTemplateChange,hasErrors:!1,renderField:i=>I.createElement(Qc,{maxValue:1e4,value:a,onChange:this.handlePercentageChange,wrapperClassName:i})},ni)),Et(this,"renderFixedAmountInput",a=>{const{storeCurrency:i}=this.props,o=(0,l.Wj)(i).digits,d=new jc.default(a/Math.pow(10,o),i),p=!(0,_c.cr)(Zt().CLDR_NUMBER_FORMATTER);return I.createElement(ti,{value:Te.FIXED_AMOUNT,onChange:this.handleTemplateChange,hasErrors:!1,renderField:y=>p?I.createElement(ed.Z,{value:d,currencyCode:i,formatter:os.h.formatter,onValue:this.handleFixedAmountBlur,wrapperClassName:y}):I.createElement(wc.Z,{initialValue:d,onChange:this.handleFixedAmountBlur,variant:"base"})},ni)});const{value:n,template:s}=this.props;this.state={template:s,value:n}}}Et(ai,"propTypes",{template:x().oneOf([Te.FIXED_AMOUNT,Te.PERCENTAGE]),value:x().number,storeCurrency:x().string,onInputChange:x().func});const td=ai;YUI.add("squarespace-dialog-markup-input",function(e){e.Squarespace.DialogFields.MarkupInput=e.Base.create("MarkupInput",e.Squarespace.DialogField2,[],{renderUI:function(){e.Squarespace.DialogFields.MarkupInput.superclass.renderUI.call(this);var r=this.get("data"),n=this.get("boundingBox"),s=this.get("title");s&&n.setAttribute("data-testValue",s),this.reactInstance=ee.render(I.createElement(td,{value:r.markupValue,title:this.get("title"),description:this.get("description"),template:r.markupType,storeCurrency:this.get("storeCurrency"),onInputChange:this._onInputChange.bind(this)}),this.get("contentBox").getDOMNode())},_onInputChange:function(r){this.set("data",r)},didDataChange:function(){var r=this._initialData,n=this.get("data");return JSON.stringify(r)!==JSON.stringify(n)},destructor:function(){ee.unmountComponentAtNode(this.get("contentBox").getDOMNode()),this.reactInstance=null}},{ATTRS:{title:{validator:e.Lang.isString},description:{validator:e.Lang.isString},storeCurrency:{validator:e.Lang.isString},data:{value:{markupType:cn().PERCENTAGE,markupValue:0},validator:e.Lang.isObject}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2"]});var u1=t(101311),ii=t(249260),It=t(587732);const oi=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;const{postalCodeRegExp:n,postalCodeErrorLabel:s}=rs(r);let a=!1,i=!1;const o=[],d=[],p=new Set;return e.forEach(y=>{const A=n.test(y),P=A&&p.has(y);a=a||P,i=i||!A,p.add(y),o.push({postalCode:y,isValid:A&&!P})}),i&&d.push(s),a&&d.push((0,l.t)("You\u2019ve entered a duplicate value.",null,{project:"apps.App.Commerce"})),{annotatedPostalCodes:o,errorMessages:d}};var sd=t(321550),nd=t(292536),Ft=t.n(nd);function Tt(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}const{isBackspaceKey:ad,isArrowLeftKey:id,isArrowRightKey:od,isCommaKey:rd}=si;var ld;class mn extends(ld=I.Component){render(){const{isHidden:r,maxLength:n,onBlur:s,onChange:a,onSubmit:i,placeholder:o,value:d}=this.props,p=ue()(Ft().input,{[Ft().hidden]:r}),y=d.length>0?d:o;return I.createElement("form",{className:Ft().form,onSubmit:i},I.createElement("div",{className:Ft().inputContainer},I.createElement("div",{className:Ft().clone},y),I.createElement("input",{autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",className:p,maxLength:n,onChange:a,onSubmit:i,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,placeholder:o,ref:"input",type:"text",value:d,onBlur:s})))}constructor(...r){super(...r),Tt(this,"state",{lastValue:""}),Tt(this,"focus",()=>{this.refs.input.focus()}),Tt(this,"handleKeyDown",n=>{const{onSubmit:s,value:a}=this.props;this.setState({lastValue:a}),rd(n)&&(n.preventDefault(),s())}),Tt(this,"handleKeyUp",n=>{const{onBackspaceKeyUp:s,onLeftKeyUp:a,onRightKeyUp:i,value:o}=this.props,{lastValue:d}=this.state;o.length===0&&d.length===0&&(ad(n)?s():id(n)?a():od(n)&&i())})}}Tt(mn,"propTypes",{isHidden:x().bool.isRequired,maxLength:x().number,onChange:x().func.isRequired,onBackspaceKeyUp:x().func.isRequired,onBlur:x().func,onLeftKeyUp:x().func.isRequired,onRightKeyUp:x().func.isRequired,onSubmit:x().func.isRequired,placeholder:x().string,value:x().any.isRequired}),Tt(mn,"defaultProps",{maxLength:50});const cd=mn;var dd=t(5736),jt=t.n(dd);function Ce(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}const ud=6e3,ri=",";class At extends I.Component{render(){const{containerClassName:r,placeholder:n,postalCodes:s,hasErrors:a}=this.props,{selectedIndex:i,newInput:o}=this.state,d=s.length?"":n,p=ue()(jt().container,r,{[jt().hasErrors]:a});return I.createElement("div",{className:p,onClick:this.handleFieldClick},s.map(this.renderTag),I.createElement(cd,{isHidden:i!==-1,maxLength:ud,onChange:this.handleInputChange,onBackspaceKeyUp:this.handleBackspaceKey,onBlur:this.handleAddTag,onLeftKeyUp:this.handleLeftKey,onRightKeyUp:this.handleRightKey,onSubmit:this.handleAddTag,placeholder:d,value:o,textInput:!0,ref:this.tagInput}))}constructor(r){super(r),Ce(this,"flattenPostalCodes",n=>n.map(s=>s.postalCode)),Ce(this,"handleAddTag",n=>{n&&n.preventDefault();const{postalCodes:s,onPostalCodesChange:a}=this.props,{newInput:i}=this.state,o=this.normalizeTag(i),d=this.flattenPostalCodes(s);if(o.length){let p;o.indexOf(ri)!==-1?p=o.split(ri).map(y=>y.trim()):p=o.split(/\s+/),a([...d,...p])}this.setState({newInput:""})}),Ce(this,"handleDeleteTag",(n,s)=>{s&&s.stopPropagation();const{postalCodes:a,onPostalCodesChange:i}=this.props,{selectedIndex:o}=this.state,d=o>0?o-1:o,p=this.flattenPostalCodes(a);p.splice(n,1),i(p),this.setState({selectedIndex:d})}),Ce(this,"handleFieldClick",n=>{n.target.tagName==="INPUT"&&this.setState({selectedIndex:-1}),this.tagInput.current.focus()}),Ce(this,"handleInputChange",n=>{const s=n.target.value;this.setState({selectedIndex:s.length>0?-1:this.state.selectedIndex,newInput:s})}),Ce(this,"handleBackspaceKey",()=>{const{selectedIndex:n}=this.state,{postalCodes:s}=this.props;n!==-1?this.handleDeleteTag(n):s.length>0&&this.setState({selectedIndex:s.length-1})}),Ce(this,"handleLeftKey",()=>{const{selectedIndex:n}=this.state,{postalCodes:s}=this.props;let a=-1;s.length>0&&(a=n!==-1?Math.max(n-1,0):s.length-1),this.setState({selectedIndex:a})}),Ce(this,"handleRightKey",()=>{const{selectedIndex:n}=this.state,{postalCodes:s}=this.props;if(n!==-1){const a=n<s.length-1?n+1:-1;this.setState({selectedIndex:a})}}),Ce(this,"normalizeTag",n=>n?n.toUpperCase().trim():""),Ce(this,"renderTag",(n,s)=>{let{postalCode:a,isValid:i}=n;const{selectedIndex:o}=this.state,d=ue()(jt().tag,{[jt().invalid]:!i},{[jt().selected]:o!==-1&&s===o});return I.createElement("span",{className:d,key:`${a}-${s}`,onClick:this.handleDeleteTag.bind(this,s)},a)}),this.tagInput=I.createRef(),this.state=At.defaultState}}Ce(At,"propTypes",{hasErrors:x().bool,postalCodes:x().arrayOf(x().object),containerClassName:x().string,placeholder:x().string,onPostalCodesChange:x().func.isRequired}),Ce(At,"defaultProps",{hasErrors:!1,placeholder:"",postalCodes:[]}),Ce(At,"defaultState",{selectedIndex:-1,newInput:""});var gd=t(218258),Be=t.n(gd);function us(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}class gs extends I.Component{renderPostalCodes(){const{postalCodes:r}=this.props;return I.createElement("div",{className:Be().postalCodes},r.map(n=>n.postalCode).join(", "))}render(){const{country:r,selected:n,onSelect:s,showPostalCodeEditor:a,postalCodes:i,postalCodeErrors:o,testHook:d,canEditPostalCodes:p,children:y,onPostalCodesChange:A}=this.props,{postalCodesLabel:P,examplePostalCodes:U}=rs(r.twoLetterIsoCode),K=!!i.length,O=K&&n&&!a,q=!!o.length,J=(0,l.t)("Add {postalCodesLabel}",{postalCodesLabel:P},{project:"apps.App.Commerce"});let X=J;return a?X=(0,l.t)("Done",null,{project:"apps.App.Commerce"}):K&&(X=(0,l.t)("Edit",null,{project:"apps.App.Commerce"})),I.createElement("div",{className:ue()(Be().container,{[Be().editing]:a,[Be().expanded]:O||a})},I.createElement("div",{className:Be().subdivisionInput},I.createElement(sd.Z,{className:Be().checkField,focusable:!1,indented:!0,underlined:!1,value:n,onChange:s},I.createElement("span",{"data-test":d,className:Be().noSelect},y)),I.createElement("div",{className:Be().buttonsBlock},a&&K&&I.createElement("button",{onClick:this.onClearClick},I.createElement(Me.T,{project:"apps.App.Commerce"},"Clear")),p&&I.createElement("button",{disabled:q,onClick:this.onEditorToggleClick},X))),a&&I.createElement(At,{hasErrors:q,postalCodes:i,placeholder:`${J} ${U}`,onPostalCodesChange:A}),O&&this.renderPostalCodes(),o.length>0&&I.createElement("div",{className:Be().errorMessage},o.join(" ")))}constructor(...r){super(...r),us(this,"onClearClick",n=>{n&&n.stopPropagation();const{onPostalCodesChange:s}=this.props;s([])}),us(this,"onEditorToggleClick",()=>{const{selected:n,onEditorToggle:s,onSelect:a}=this.props;n||a(),s()})}}us(gs,"propTypes",{canEditPostalCodes:x().bool,children:x().node,country:x().object,postalCodes:x().arrayOf(x().shape({postalCode:x().string,isValid:x().bool})),postalCodeErrors:x().arrayOf(x().string),selected:x().bool,showPostalCodeEditor:x().bool,testHook:x().string,onEditorToggle:x().func,onPostalCodesChange:x().func,onSelect:x().func}),us(gs,"defaultProps",Object.freeze({canEditPostalCodes:!1,country:{},postalCodes:[],postalCodeErrors:[],showPostalCodeEditor:!1,selected:!1,onEditorToggle:()=>{},onPostalCodesChange:()=>{},onSelect:()=>{}}));var pd=t(970634),hn=t.n(pd);function Ue(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}const li={cancel:(0,l.t)("Cancel",null,{project:"apps.App.Commerce"}),done:(0,l.t)("Done",null,{project:"apps.App.Commerce"})},ci=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return!!(e.postalCodes&&e.postalCodes.length)},ps=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.values(e).every(r=>r.selected&&!ci(r))},di=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.values(e).some(r=>r.selected)};class vn extends I.Component{renderSubdivisions(){const{country:r}=this.state;return Object.values(r.children).map(this.renderSubdivision)}render(){const{parent:r,margin:n,onClose:s,onRequestClose:a}=this.props,{hasInvalidPostalCodes:i,someSelected:o,country:d}=this.state,p=r.offsetWidth-n,y=r.offsetHeight-n,A=n/2,{top:P,left:U}=r.getBoundingClientRect(),K={top:P+A,left:U+A},O=(0,l.t)("Edit {countryName}",{countryName:d.localizedName},{project:"apps.App.Commerce"}),q=(0,l.t)("All {subdivisionsLabel}",{subdivisionsLabel:rs(d.twoLetterIsoCode).subdivisionsLabel},{project:"apps.App.Commerce"});return I.createElement(It.Z,{isOpen:!0,anchor:K,width:p,height:y,position:{join:ii.Z.TOP_LEFT,to:ii.Z.TOP_LEFT},hasAnchorPointer:!1,onRequestClose:a||s},I.createElement(It.Z.Header,{hasRule:!0,className:hn().header},I.createElement("div",null,O),I.createElement("div",{className:hn().description},ka(d))),I.createElement(It.Z.Body,{className:hn().body,style:{maxHeight:y,overflowY:"scroll"}},I.createElement(gs,{canEditPostalCodes:!1,selected:d.allChildrenSelected,testHook:"region-all",onSelect:this.handleSelectAll},q),this.renderSubdivisions()),I.createElement(It.Z.Footer,null,I.createElement(It.Z.Button,{onClick:s},li.cancel),I.createElement(It.Z.Button,{disabled:!o||i,onClick:this.handleSave,"data-test":"regions-done-button"},li.done)))}constructor(r){super(r),Ue(this,"bindSelect",a=>()=>{const{country:i}=this.state,{children:o}=i,d=o[a].selected;o[a].selected=!d,i.allChildrenSelected=ps(o),this.setState({someSelected:di(o),country:i})}),Ue(this,"bindPostalCodesChange",a=>i=>{const{country:o}=this.state,{children:d}=o,{errorMessages:p}=oi(i,o.twoLetterIsoCode);d[a].postalCodes=i,o.allChildrenSelected=ps(d),this.setState({country:o,hasInvalidPostalCodes:!!p.length})}),Ue(this,"bindEditorToggle",a=>()=>{const{editingSubdivision:i}=this.state;i!==a?this.setState({editingSubdivision:a}):this.setState({editingSubdivision:null})}),Ue(this,"handleSelectAll",()=>{const{country:a}=this.state,{allChildrenSelected:i,children:o}=a,d=!i;Object.values(o).forEach(p=>p.selected=d),a.allChildrenSelected=d,this.setState({country:a,someSelected:d})}),Ue(this,"trackChanges",()=>{const{country:a}=this.props,{country:i}=this.state,o=JSON.stringify(a)!==JSON.stringify(i),d=Object.values(i.children),p=i.allChildrenSelected?d:d.filter(A=>A.selected),y=p.filter(A=>ci(A)).length;(0,Cs.Z)("merchant_regional_shipping_changed",{didChange:o,selected:p.length,selectedWithPostalCodes:y,total:d.length})}),Ue(this,"handleSave",()=>{const{country:a}=this.state;a.allChildrenSelected=ps(a.children),this.setState({country:a}),this.trackChanges(),this.props.onSave(this.state.country)}),Ue(this,"renderSubdivision",a=>{let{twoLetterIsoCode:i,localizedName:o,selected:d,postalCodes:p}=a;const{allSelected:y,country:A,hasInvalidPostalCodes:P,editingSubdivision:U}=this.state,{annotatedPostalCodes:K,errorMessages:O}=oi(p,A.twoLetterIsoCode),q=y||d;return I.createElement(gs,{canEditPostalCodes:!P,country:A,key:i,selected:q,showPostalCodeEditor:U===i,postalCodes:K,postalCodeErrors:O,testHook:`region-${i}`,onPostalCodesChange:this.bindPostalCodesChange(i),onEditorToggle:this.bindEditorToggle(i),onSelect:this.bindSelect(i)},o)});const{country:n}=this.props,s=gn()(n);s.allChildrenSelected=ps(s.children),this.state={country:s,editingSubdivision:null,hasInvalidPostalCodes:!1,someSelected:di(s.children)}}}Ue(vn,"propTypes",{parent:x().instanceOf(HTMLElement).isRequired,margin:x().number,country:x().shape({allChildrenSelected:x().bool,children:x().objectOf(x().objectOf),hasChildren:x().bool,selected:x().bool,twoLetterIsoCode:x().string,localizedName:x().string,type:x().oneOf(Object.values(ls()))}).isRequired,onClose:x().func,onSave:x().func,onRequestClose:x().func}),Ue(vn,"defaultProps",Object.freeze({margin:0,onClose:()=>{},onSave:()=>{},onRequestClose:()=>{}}));var md=t(647468),st=t.n(md);function fn(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}const Sn={edit:(0,l.t)("Edit",null,{project:"apps.App.Commerce"}),delete:(0,l.t)("Delete",null,{project:"apps.App.Commerce"})};class ui extends I.Component{renderSelectedRegions(){const{country:r}=this.props,n=r.localizedName;if(r.hasChildren&&St(r.twoLetterIsoCode)){const s=un(r);return I.createElement(I.Fragment,null,I.createElement("div",{className:st().countryName},n),s)}return I.createElement("div",{className:st().countryName},n)}shouldShowEditButton(){const{country:r}=this.props;return r.hasChildren&&St(r.twoLetterIsoCode)}render(){const{country:r,canDelete:n}=this.props;return I.createElement("li",{key:r.twoLetterIsoCode,className:st().countryItem},I.createElement("span",{className:st().label},this.renderSelectedRegions()),this.shouldShowEditButton()&&I.createElement("button",{className:st().edit,"data-test":"edit-selected-country",onClick:this.handleEdit,title:Sn.edit},Sn.edit),n&&I.createElement("button",{className:st().delete,onClick:this.handleDelete,title:Sn.delete}))}constructor(...r){super(...r),fn(this,"handleEdit",n=>{n.stopPropagation();const{onEdit:s,country:a}=this.props;s(a)}),fn(this,"handleDelete",n=>{n.stopPropagation();const{onDelete:s,country:a}=this.props;s(a)})}}fn(ui,"propTypes",{allRegions:x().object.isRequired,country:x().object.isRequired,canDelete:x().bool.isRequired,onEdit:x().func.isRequired,onDelete:x().func.isRequired});function Cn(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}class gi extends I.Component{render(){const{shippableRegions:r,selectedRegions:n}=this.props,s=Object.values(n),i=!(n.length===1);return I.createElement("ul",{className:st().container},s.map(o=>I.createElement(ui,{key:o.twoLetterIsoCode,allRegions:r,country:o,canDelete:i,onEdit:this.handleEdit,onDelete:this.handleDelete})))}constructor(...r){super(...r),Cn(this,"handleEdit",n=>this.props.onEdit(n)),Cn(this,"handleDelete",n=>this.props.onDelete(n))}}Cn(gi,"propTypes",{shippableRegions:x().object.isRequired,selectedRegions:x().object.isRequired,onEdit:x().func.isRequired,onDelete:x().func.isRequired});const pi=e=>{const r=/[\u0300-\u036f]/g;return typeof String.prototype.normalize=="function"?e.normalize("NFD").replace(r,""):e};var hd=t(261503),vd=t(136364),Ae=t.n(vd);function Ke(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}const wt={alreadySelected:(0,l.t)("already selected",null,{project:"apps.App.Commerce"}),restOfWorld:e=>(0,l.t)("Rest of the World ({num} Countries)",{num:e},{project:"apps.App.Commerce"}),restOfWorldUnavailable:(0,l.t)("Delete added countries to select Rest of the World",null,{project:"apps.App.Commerce"}),selectCountries:(0,l.t)("Select Countries",null,{project:"apps.App.Commerce"})},mi=e=>{let{available:r=!0,numberOfCountries:n=0}=e;const s=ue()(Ae().countryLabel,Ae().restOfWorldLabel,{[Ae().countryLabelFaded]:!r});return I.createElement(I.Fragment,null,I.createElement("div",{className:s,"data-test":"rest-of-world"},r?wt.restOfWorld(n):wt.restOfWorldUnavailable),I.createElement("div",{className:Ae().selectLabel},I.createElement("span",{className:Ae().selectLabelText},wt.selectCountries)))};mi.propTypes={available:x().bool,numberOfCountries:x().number};const hi=e=>{let{countries:r,...n}=e;const{localizedName:s,selected:a,twoLetterIsoCode:i}=n;let o=s;if(a){o+=` (${wt.alreadySelected})`;const d=ue()(Ae().countryLabel,Ae().countryLabelFaded);return I.createElement("div",{className:d},o)}return St(n.twoLetterIsoCode)&&(o+=" "+ka(n)),I.createElement("div",{"data-test":`country-${i}`,className:Ae().countryLabel},o)};hi.propTypes={countries:x().object.isRequired,twoLetterIsoCode:x().string.isRequired,localizedName:x().string.isRequired};class nt extends I.Component{render(){const{areRegionsSelected:r,restOfWorld:n,countries:s,errorMessage:a,isLoading:i,placeholder:o}=this.props,{searchString:d,isOpen:p}=this.state;if(n&&!p)return I.createElement("div",{className:Ae().restOfWorld},I.createElement("div",{className:Ae().restOfWorldText},wt.restOfWorld(this.numberOfCountries)),I.createElement("div",{onClick:this.handleClearRestOfWorld,className:Ae().close}));const y=pi(d).toLowerCase();let A=Object.values(s).map(P=>({...P,allChildrenSelected:!0}));return y!==""?A=A.filter(P=>{let{twoLetterIsoCode:U,localizedName:K}=P;return U.toLowerCase().includes(y)||pi(K).toLowerCase().includes(y)}):A=[{restOfWorld:!0},...A],I.createElement(hd.Z,{onRef:P=>this.searchRef=P,placeholder:o,isLoading:i,isOpen:p,onChange:this.handleChange,onSelect:this.handleSelect,onFocus:this.handleFocus,onBlur:this.handleBlur,searchString:d,items:A,errorMessage:a,className:Ae().searchableList},P=>P.restOfWorld?I.createElement(mi,{available:!r,numberOfCountries:this.numberOfCountries}):I.createElement(hi,{countries:s,...P}))}constructor(r){super(r),Ke(this,"handleClearRestOfWorld",s=>{s.stopPropagation(),this.props.onRestOfWorldChange(!1),setTimeout(()=>this.searchRef.focusInput(),0)}),Ke(this,"handleChange",s=>{this.setState({searchString:s})}),Ke(this,"handleSelect",s=>{const a=s.target.value,{areRegionsSelected:i,onRestOfWorldChange:o,onSelect:d}=this.props,{restOfWorld:p,selected:y}=a;if(!y){if(this.setState(nt.defaultState),p){i||o(!0);return}d(a)}}),Ke(this,"handleBlur",()=>{this.setState({isOpen:!1}),this.props.onBlur()}),Ke(this,"handleFocus",()=>{this.setState({isOpen:!0})});const{countries:n}=this.props;this.numberOfCountries=Object.keys(n).length,this.searchref=null,this.state=nt.defaultState}}Ke(nt,"propTypes",{areRegionsSelected:x().bool.isRequired,placeholder:x().string.isRequired,isLoading:x().bool.isRequired,countries:x().object.isRequired,restOfWorld:x().bool.isRequired,onRestOfWorldChange:x().func.isRequired,onSelect:x().func.isRequired,onBlur:x().func,onFocus:x().func,errorMessage:x().string}),Ke(nt,"defaultProps",{errorMessage:null,onBlur:()=>{},onFocus:()=>{}}),Ke(nt,"defaultState",Object.freeze({searchString:"",isOpen:!1}));var fd=t(264546),Sd=t.n(fd);function ze(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}class ke extends I.Component{render(){const{title:r,description:n,placeholder:s,restOfWorld:a,regions:i,selectedRegions:o,containerEl:d}=this.props,{editCountry:p,isLoading:y}=this.state;return I.createElement("div",{className:Sd().container},I.createElement(ds.Description,{title:r}),I.createElement(nt,{areRegionsSelected:!!Object.keys(o).length,restOfWorld:a,countries:i,placeholder:s,isLoading:y,onRestOfWorldChange:this.handleRestOfWorldChange,onSelect:this.handleCountrySelect}),I.createElement(ds.Description,null,n),I.createElement(gi,{shippableRegions:i,selectedRegions:o,onDelete:this.handleCountryRemoval,onEdit:this.handleCountryEdit}),p&&I.createElement(vn,{parent:d,margin:ns.GRID_PX,country:p,onClose:this.handleCountryEditClose,onSave:this.handleCountryChange}))}constructor(r){super(r),ze(this,"handleCountrySelect",n=>{this.props.onSelect(n)}),ze(this,"handleCountryChange",n=>{this.setState(ke.defaultState),this.props.onChange(n)}),ze(this,"handleCountryEdit",n=>{this.setState({editCountry:n})}),ze(this,"handleCountryEditClose",()=>{this.setState(ke.defaultState)}),ze(this,"handleCountryRemoval",n=>{this.props.onRemove(n)}),ze(this,"handleRestOfWorldChange",n=>{this.setState(ke.defaultState),this.props.onRestOfWorldChange(n)}),this.state=ke.defaultState}}ze(ke,"propTypes",{title:x().string.isRequired,description:x().string.isRequired,placeholder:x().string.isRequired,restOfWorld:x().bool.isRequired,regions:x().object.isRequired,selectedRegions:x().object.isRequired,onRemove:x().func.isRequired,onSelect:x().func.isRequired,onChange:x().func.isRequired,onRestOfWorldChange:x().func.isRequired,containerEl:x().instanceOf(HTMLElement)}),ze(ke,"defaultState",Object.freeze({editCountry:null,isLoading:!1}));function Cd(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce((r,n)=>(e[n].selected&&(r[n]=gn()(e[n])),r),{})}YUI.add("squarespace-dialog-regional-shipping",function(e){var r={title:(0,l.t)("Ships To",null,{project:"scripts-v6.dialog"}),description:(0,l.t)("Define the countries, states, provinces, and postal codes for this shipping option.",null,{project:"scripts-v6.dialog"}),searchPlaceholder:(0,l.t)("Add Country",null,{project:"scripts-v6.dialog"})},n=e.Squarespace.DialogFields.RegionalShipping=e.Base.create("RegionalShipping",e.Squarespace.DialogField2,[],{initializer:function(){this.allRegions=Xa(),this.reactInstance=null},bindUI:function(){n.superclass.bindUI.call(this),this.after("dataChange",this.syncUI,this),this.after("containerElChange",this.syncUI,this)},syncUI:function(){n.superclass.syncUI.call(this);var s=this.get("contentBox"),a=this.get("containerEl"),i=this.get("data"),o=Ja(this.allRegions,i.regions),d=!!i.restOfWorld,p=I.createElement(ke,{containerEl:a,title:r.title,description:r.description,placeholder:r.searchPlaceholder,restOfWorld:d,onRestOfWorldChange:this.onRestOfWorldChange.bind(this),regions:o,selectedRegions:Cd(o),onChange:this.onChange.bind(this),onSelect:this.onSelect.bind(this),onRemove:this.onRemove.bind(this)});this.reactInstance=ee.render(p,s.getDOMNode())},onSelect:function(s){var a=this.get("data"),i=e.clone(a,!0),o=i.regions;o[s.twoLetterIsoCode]=e.merge(s,{selected:!0}),this.set("data",i)},onRemove:function(s){var a=this.get("data"),i=e.clone(a,!0),o=i.regions;delete o[s.twoLetterIsoCode],this.set("data",i)},onChange:function(s){var a=this.get("data"),i=e.clone(a,!0),o=i.regions;o[s.twoLetterIsoCode]=s,this.set("data",i)},onRestOfWorldChange:function(s){var a=this.get("data");a.restOfWorld=s,this.set("data",a)},didDataChange:function(){var s=this._initialData,a=this.get("data");return JSON.stringify(s)!==JSON.stringify(a)},destructor:function(){var s=this.get("contentBox");ee.unmountComponentAtNode(s.getDOMNode()),this.reactInstance=null}},{ATTRS:{data:{value:{restOfWorld:!1,regions:{}},validator:e.Squarespace.AttrValidators.isObject},containerEl:{value:null,validator:e.Squarespace.AttrValidators.isNullOrInstanceOf(HTMLElement)},errorFlyoutAnchor:{getter:function(){return this.get("contentBox").one("input.u-field-search")}}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2"]});var p1=t(839141);YUI.add("squarespace-dialog-shipping-system-container-table",function(e){e.namespace("Squarespace");var r=function(a){return a.toFixed(2)},n=e.Base.create("containerRow",e.Squarespace.DialogField2,[],{renderUI:function(){n.superclass.renderUI.call(this);var a=this.get("contentBox"),i=this.getProperty("ROW_TEMPLATE"),o=e.Lang.sub(i,this.getAttrs());a.setHTML(o)},BOUNDING_TEMPLATE:'<tr class="row"></tr>',CONTENT_TEMPLATE:null},{ROW_TEMPLATE:'<td class="left">{name}</td><td class="right">{containerLength}{space}{unit} \u2715 {containerWidth}{space}{unit} \u2715 {containerHeight}{space}{unit}</td>',ATTRS:{name:{value:(0,l.t)("Custom Box",null,{project:"scripts-v6-root"})},containerLength:{value:0,setter:r},containerWidth:{value:0,setter:r},containerHeight:{value:0,setter:r},space:{value:""},unit:{value:""}}}),s=e.Squarespace.DialogFields.ShippingSystemContainerTable=e.Base.create("shippingSystemContainerTable",e.Squarespace.DialogField2,[],{renderUI:function(){s.superclass.renderUI.call(this),this._childrenContainer=this.get("contentBox").one(".list")},bindUI:function(){s.superclass.bindUI.call(this),this.after("dataChange",this.syncUI,this),this.after("isSupportedChange",this.syncUI,this)},syncUI:function(){s.superclass.syncUI.call(this),this.removeAll(),this._childrenContainer.empty(),this._syncUnsupportedServiceWarning(),this._addRows()},_syncUnsupportedServiceWarning:function(){var a=this.get("contentBox").one("thead");if(this.get("isSupported"))a.show();else{a.hide();var i='<tr class="empty-message"><td colspan="2" class="empty-message-content"><div class="warning-icon"></div>'+(0,l.t)("Carrier containers are not available for the selected services.",null,{project:"scripts-v6-root"})+"</td></tr>";this._childrenContainer.append(i)}},_addRows:function(){var a=this.get("measurementStandard")===Ut().IMPERIAL?"":" ",i=this.get("unit");this.get("data").forEach(function(o){this.add({name:o.name,containerLength:o.length,containerWidth:o.width,containerHeight:o.height,space:a,unit:i})},this)}},{CSS_PREFIX:"sqs-shipping-system-container-table",HANDLEBARS_TEMPLATE:"dialog-shipping-system-container-table.html",ATTRS:{defaultChildType:{value:n},strings:{value:{container:(0,l.t)("Container",null,{project:"scripts-v6-root"}),dimensions:(0,l.t)("Dimensions",null,{project:"scripts-v6-root"})}},measurementStandard:{value:Ut().IMPERIAL},isSupported:{value:!0},unit:{valueFn:function(){return this.get("measurementStandard")===Ut().IMPERIAL?'"':"cm"}},data:{value:[]}}})},"1.0",{requires:["base","handlebars","json","squarespace-animations","squarespace-commerce-shipping-enums","squarespace-commerce-utils","squarespace-dialog-field-2","squarespace-dialog-shipping-system-container-table-template","squarespace-plugin-numeric-formatter","squarespace-ss-widget"]});var m1=t(515643),yd=t(689891),Ed=t(860921),Id=t.n(Ed);YUI.add("squarespace-dialog-feature-gate-description",function(e){e.namespace("Squarespace.DialogFields");var r=e.Squarespace.DialogFields.FeatureGateDescription=e.Base.create("FeatureGateDescriptionField",e.Squarespace.DialogFields.DescriptionField,[],{destructor:function(){this.upsellMenuEl&&(ee.unmountComponentAtNode(this.upsellLogoEl),this.upsellLogoEl.remove(),this.upsellLogoEl=null,this.upsellLogo=null)},renderUI:function(){if(r.superclass.renderUI.call(this),this.get("isFeatureGated")){var n=Gt.Z.isTrial();this.upsellLogoEl=document.createElement("span");var s=rn.Z.getUpsellCopy(this.get("feature"));this.upsellLogo=ee.render(I.createElement(yd.Z,{isTrial:n,analyticsId:this.get("analyticsId"),learnMoreUrl:this.get("learnMoreUrl"),upgradeTitle:s.upgradeTitle,upgradeDescription:s.upgradeDescription,knockout:!0}),this.upsellLogoEl),this.get("contentBox").one(".custom-field-description").append(this.upsellLogoEl)}},syncUI:Id()},{CSS_PREFIX:"sqs-feature-gate-description",ATTRS:{learnMoreUrl:{value:""},analyticsId:{value:""},feature:{value:null},isFeatureGated:{value:!1}}});e.Squarespace.DialogFields.FeatureGateDescriptionField=e.Squarespace.DialogFields.FeatureGateDescription},"1.0",{requires:["base","node","squarespace-dialog-description","squarespace-dialog-field-2"]});var Pt=t(429593);YUI.add("squarespace-widgets-inventory-editor-manager",function(e){var r=new(Dt())(Nt.Z),n=function(){var i=new e.Squarespace.Widgets.InventoryEditor;return i.once("duplicate",function(o){var d=n();i.destroy(),d.attachEditorEventListeners(o),Pt.Z.commerceDuplicateProduct(o.get("model").toJSON())}),i.once("savingClose",function(o){i.destroy(),Pt.Z.commerceSaveProduct(o.item)}),i.once("nonSavingClose",function(){i.destroy(),Pt.Z.commerceCloseCreateProductDialog()}),i},s=function(i){var o,d,p=!1;i&&typeof i=="object"?(o=i.productId,d=i.zIndex,p=i.isDuplicateProduct):o=i;var y=n();Gs()(o)?y.showInventoryEditor():y.showInventoryEditorForProduct({productId:o,zIndex:d,isDuplicateProduct:p}).then(function(){Pt.Z.commerceCreateProductDialogShown()})},a=function(i){var o=n();o.chooseProductTypeForCollection(i)};r.addActionListener(Pt.Z.COMMERCE_OPEN_CREATE_PRODUCT_DIALOG,s),r.addActionListener(Pt.Z.COMMERCE_OPEN_CHOOSE_PRODUCT_TYPE,a)},"1.0",{requires:["squarespace-widgets-inventory-editor"]});var ms=t(119978),Td=t(251678),vi=t(157484);YUI.add("squarespace-widgets-inventory-editor",function(e){e.namespace("Squarespace.Widgets"),e.Squarespace.Widgets.InventoryEditor=e.Base.create("InventoryEditor",e.Widget,[],{initializer:function(){var r=["savingClose","nonSavingClose"];e.Array.each(r,function(n){this.publish(n,{emitFacade:!0,broadcast:2})},this)},destructor:function(){this.detachAll()},attachEditorEventListeners:function(r){var n=this;r.once("duplicate",function(s){n.fire("duplicate",s)}),r.onceAfter("savingClose",function(){n.fire("savingClose",{item:this.get("model").getAttrs()})}),r.onceAfter("nonSavingClose",function(){n.fire("nonSavingClose")})},showInventoryEditorForProduct:function(r){(0,ms.L1)("collection-panel");var n=new e.Squarespace.Models.ContentItem({id:r.productId});return new e.Promise((function(s){n.load((function(){var a=n.get("collectionId"),i=e.Squarespace.ContentCollectionCache.getById(a);i&&!i.ordering&&i.load();var o=e.Squarespace.ContentItemEditorFactory.getEditor(n),d=new o({model:n,isDuplicateItemEditor:r.isDuplicateProduct});d.get("editorConfiguration").zIndex=r.zIndex,this.attachEditorEventListeners(d),d.show(),s()}).bind(this))}).bind(this))},chooseProductTypeForCollection:function(r,n){var s=e.Squarespace.ContentCollectionCache;s.getCollectionById(r,(function(a){this._addProductToCollection(a,n)}).bind(this))},showInventoryEditor:function(r){var n=this._createCollectionSelectDialog(),s=0;if(e.Squarespace.ContentCollectionCache.filter(function(a){a.get("type")===pe().PRODUCTS&&!a.get("isDemoCollection")&&s++}),s===0){new e.Squarespace.Widgets.Confirmation({position:e.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.title":(0,l.t)("No Product Pages",null,{project:"scripts-v6.widgets"}),"strings.message":(0,l.t)("Before you can add products, you need to first make a Product Page to hold them.",null,{project:"scripts-v6.widgets"}),"strings.confirm":(0,l.t)("Go to Pages",null,{project:"scripts-v6.widgets"})}).after("confirm",function(){e.Squarespace.Singletons.Location.go(ge.Z.forPagesPanel())});return}n.after("datachange",(function(){n.temporaryHide();var a=n.getData().collectionId;this.chooseProductTypeForCollection(a,r)}).bind(this)),n.onceAfter("close",(function(){this.fire("nonSavingClose")}).bind(this)),n.show()},_createCollectionSelectDialog:function(){var r=[];return ct.Z.isFeatureGated(Ge().COMMERCE)&&r.push({ctor:e.Squarespace.DialogFields.FeatureGateMenu,config:{learnMoreUrl:ft.PREMIUM_FEATURES,analyticsId:"commerce-add-product-dialog",feature:Ge().ADD_COMMERCE_PRODUCTS}}),r.push({ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Select a Page",null,{project:"scripts-v6.widgets"}),text:(0,l.t)("Select a page to put your new product into.",null,{project:"scripts-v6.widgets"})}}),r.push({ctor:e.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",mode:"page",showCollectionTagsAndCategories:!1,showGroupTitles:!1,emptyMessage:(0,l.t)("Before you can add products, you need to create a Product Page to hold them. ",null,{project:"scripts-v6.widgets"}),className:"inventory-collection-picker",collectionFilter:{collectionType:pe().PRODUCTS,ordering:Ta().USER,folder:!1}}}),new e.Squarespace.EditingDialog({name:"inventoryAddProductCollectionSelect",overlay:.5,width:500,height:300,scroll:!0,style:"flyout",closeOthers:!1,buttons:[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6.widgets"})}],discardChangesConfirmation:!1,tabs:[{title:(0,l.t)("Add Product",null,{project:"scripts-v6.widgets"}),name:"addProduct",icon:"/universal/images-v6/icons/icon-plus-16-light.png",scroll:!0,fields:r}]})},_addProductToCollection:function(r,n){(0,ms.qe)("collection-panel"),(0,ms.sc)(vi.MX.YUI_EDITOR);var s=this,a=new e.Squarespace.ContentItemTypes.Selector({model:new e.Model($e.default.getState().collectionConfigs.products),onContentItemTypeSelected:function(i,o){var d=new e.Squarespace.Models.ContentItem({collectionId:r.get("id"),displayIndex:r.get("nextDisplayIndex"),recordType:Da().STORE_ITEM,structuredContent:i.structuredContent});r.items.add(d),(0,ms.xU)((0,Td.Z)(d.getAttrs().structuredContent.getAttrs().productType),vi.MX.YUI_EDITOR);var p=e.Squarespace.ContentItemEditorFactory,y=new(p.getEditor(d))({model:d});y.onceAfter("savingClose",function(){s.fire("savingClose",{item:d.getAttrs()})}),y.onceAfter("nonSavingClose",function(){s.fire("nonSavingClose")}),d.after("save",function(A){var P=A.options.headers;e.Lang.isValue(P)&&P["X-AutoSave"]||(r.items.add(d),n&&n.add(d))}),e.Lang.isFunction(o)&&o(),y.show()}});a.get("dialog").onceAfter("overlay-click",(function(){this.fire("nonSavingClose")}).bind(this)),r.load(function(){e.Squarespace.ProductViolations.isAllowedToAddItemToCollection(r,1).then(function(){a.show()})})}},{CSS_PREFIX:"sqs-inventory-editor",ATTRS:{}})},"1.0",{requires:["base","promise","squarespace-commerce-utils","squarespace-content-item-types-editor","squarespace-content-item-types-selector","squarespace-dialog","squarespace-dialog-feature-gate-menu","squarespace-models-content-collection","squarespace-models-content-item","squarespace-singletons-location","squarespace-ui-base","squarespace-upsell-product-violations","squarespace-util","squarespace-widgets-confirmation"]});var Ad=t(199155);YUI.add("squarespace-dialog-feature-gate-menu",function(e){e.namespace("Squarespace.DialogFields");var r=e.Squarespace.DialogFields.FeatureGateMenu=e.Base.create("FeatureGateMenuField",e.Squarespace.DialogField2,[],{destructor:function(){this.upsellMenuEl&&(ee.unmountComponentAtNode(this.upsellMenuEl),this.upsellMenuEl.remove(),this.upsellMenuEl=null,this.upsellMenu=null)},renderUI:function(){r.superclass.renderUI.call(this),this.upsellMenuEl=document.createElement("span"),this.upsellMenu=ee.render(I.createElement(Ad.Z,{iconOnly:!1,isYUILabelRender:!0,analyticsId:this.get("analyticsId"),isTrial:!1}),this.upsellMenuEl),this.get("contentBox").one(".dialog-field-feature-gate-menu").append(this.upsellMenuEl)},bindUI:function(){r.superclass.bindUI.call(this)},syncUI:function(){r.superclass.syncUI.call(this)},setLearnMoreUrl:function(n){this.set("learnMoreUrl",n)},setAnalyticsId:function(n){this.set("analyticsId",n)},setFeature:function(n){this.set("feature")}},{CSS_PREFIX:"sqs-feature-gate-menu-field",TEMPLATE:'<div class="dialog-field-feature-gate-menu"></div>',ATTRS:{learnMoreUrl:{value:""},analyticsId:{value:""},feature:{value:null}}});e.Squarespace.DialogFields.FeatureGateMenuField=e.Squarespace.DialogFields.FeatureGateMenu},"1.0",{requires:["base","node","squarespace-dialog-field-2"]}),YUI.add("squarespace-damask-menu-commerce-base-email-template",function(e){e.namespace("Squarespace.Damask.Menu.Commerce");var r=e.Squarespace.Damask.Menu.Commerce.BaseTemplate=e.Base.create("BaseTemplate",e.Squarespace.Widgets.ModelBackedFieldEditor,[e.Squarespace.Damask.Panel.MixinPanel,e.Squarespace.Damask.Panel.MixinPanelParent],{renderUI:function(){r.superclass.renderUI.call(this)}},{CSS_PREFIX:"sqs-damask-menu-commerce-base-template",ATTRS:{"strings.title":{value:(0,l.t)("Header And Footer",null,{project:"scripts-v6.damask"})},emailAddress:{valueFn:function(){return e.Squarespace.Context.getInstance().get("authenticatedAccount").get("email")}},urlExtension:{value:"base-template"},restoreDefaultsMessage:{valueFn:function(){return(0,l.t)("Restore default settings for header and footer?",null,{project:"scripts-v6.damask"})}},model:{readOnly:!0,valueFn:function(){return new e.Squarespace.Models.BaseEmailTemplateSettings}},fields:{valueFn:function(){return[{ctor:e.Squarespace.DialogFields.Description,config:{name:"headerDescription",title:(0,l.t)("Header",null,{project:"scripts-v6.damask"}),className:"titleField"}},{ctor:e.Squarespace.DialogFields.jsonTemplateCode,config:{$dontRecurse:!0,name:"header",fieldStyle:"normal",className:"codeTextArea"}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"headerDescription",text:(0,l.t)("This is included at the top of every email.",null,{project:"scripts-v6.damask"}),className:"descriptionField"}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"footerDescription",title:(0,l.t)("Footer",null,{project:"scripts-v6.damask"}),className:"titleField"}},{ctor:e.Squarespace.DialogFields.jsonTemplateCode,config:{$dontRecurse:!0,name:"footer",fieldStyle:"normal",className:"codeTextArea"}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"footerDescription",text:(0,l.t)("This is included at the bottom of every email.",null,{project:"scripts-v6.damask"}),className:"descriptionField"}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"businessNameDescription",title:(0,l.t)("Business Name",null,{project:"scripts-v6.damask"}),className:"titleField"}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"businessNameDescription",text:(0,l.t)("This is the legal name of your business. It will appear on all invoices and emails sent to your customers.",null,{project:"scripts-v6.damask"}),className:"descriptionField"}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"businessName","strings.placeholder":(0,l.t)("Legal Business Name",null,{project:"scripts-v6.damask"})}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"contactLocationDescription",title:(0,l.t)("Business Address",null,{project:"scripts-v6.damask"}),className:"titleField"}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"contactLocationDescription",text:(0,l.t)("This is the legal address of your business. It will appear on all invoices and emails sent to your customers.",null,{project:"scripts-v6.damask"}),className:"descriptionField"}},{ctor:e.Squarespace.DialogFields.Map,config:{name:"contactLocation",showTitle:!1,googleTrackingContext:{productPage:"commerce-customer-notifications-business-address",productSection:"panel"}}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"businessIdDescription",title:(0,l.t)("Tax Registration ID",null,{project:"scripts-v6.damask"}),className:"titleField"}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"businessIdDescription",text:(0,l.t)("This is your business\u2019s tax registration number. It will appear on all invoices and emails sent to your customers.",null,{project:"scripts-v6.damask"}),className:"descriptionField"}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"businessId","strings.placeholder":(0,l.t)("Tax Registration ID",null,{project:"scripts-v6.damask"})}},{ctor:e.Squarespace.DialogFields.Button,config:{$dontRecurse:!0,"strings.text":(0,l.t)("Send Test Email",null,{project:"scripts-v6.damask"}),name:"previewDonationEmail",onClick:this._sendPreview,context:this,className:"sendTestEmailButton"}},{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,l.t)("Addressed to {emailAddress}",{emailAddress:this.get("emailAddress")},{project:"scripts-v6.damask"}),className:"addressedTo"}},{ctor:e.Squarespace.DialogFields.Button,config:{name:"restoreDefaults",$dontRecurse:!0,"strings.text":(0,l.t)("Restore Defaults",null,{project:"scripts-v6.damask"}),onClick:this._restoreDefaults,context:this}}]}}}})},"1.0",{requires:["base","squarespace-commerce-base-email-template-template","squarespace-damask-panel-mixin-panel","squarespace-models-commerce-base-email-template-settings","squarespace-dialog-description","squarespace-dialog-structured-input","squarespace-widgets-model-backed-field-editor"]});var h1=t(526746),v1=t(495894),f1=t(41326);YUI.add("squarespace-damask-menu-commerce-contribution-confirmed",function(e){e.namespace("Squarespace.Damask.Menu.Commerce");var r=e.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","siteTitle"]),n={variables:{"%d":{title:(0,l.t)("Donation Title",null,{project:"scripts-v6.damask"}),description:(0,l.t)("The name of the donation.",null,{project:"scripts-v6.damask"}),exampleText:(0,l.t)("Our Cause",null,{project:"scripts-v6.damask"})},"%s":{title:(0,l.t)("Site Name",null,{project:"scripts-v6.damask"}),description:(0,l.t)("The title of your website.",null,{project:"scripts-v6.damask"}),exampleText:r}}};e.Squarespace.Damask.Menu.ContributionConfirmed=e.Base.create("ContributionConfirmed",e.Squarespace.Widgets.ModelBackedFieldEditor,[e.Squarespace.Damask.Panel.MixinPanel],{},{CSS_PREFIX:"sqs-damask-menu-commerce-email-contribution-confirmed",ATTRS:{"strings.title":{value:(0,l.t)("Donation Confirmation",null,{project:"scripts-v6.damask"})},emailAddress:{valueFn:function(){return e.Squarespace.Context.getInstance().get("authenticatedAccount").get("email")}},model:{readOnly:!0,valueFn:function(){return new e.Squarespace.Models.ContributionConfirmedEmailSettings}},urlExtension:{value:"contribution-confirmed"},fields:{valueFn:function(){return[{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,l.t)("You could use the following variables in the Subject Line and Title of your donation confirmation:",null,{project:"scripts-v6.damask"})+"<div>%d - "+n.variables["%d"].description+"</div><div>%s - "+n.variables["%s"].description+"</div>",className:"subDesktopPanelDescription"}},{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Subject Line",null,{project:"scripts-v6.damask"}),className:"fieldTitle"}},{ctor:e.Squarespace.DialogFields.StructuredInput,config:e.merge(n,{name:"subjectFormat",placeholder:(0,l.t)("%s: Thank You",null,{project:"scripts-v6.damask"}),className:"input"})},{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Title",null,{project:"scripts-v6.damask"}),className:"fieldTitle"}},{ctor:e.Squarespace.DialogFields.StructuredInput,config:e.merge(n,{name:"titleFormat",placeholder:(0,l.t)("Thank You",null,{project:"scripts-v6.damask"}),className:"input"})},{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Message",null,{project:"scripts-v6.damask"}),className:"fieldTitle"}},{ctor:e.Squarespace.DialogFields.jsonTemplateCode,config:{$dontRecurse:!0,name:"message",className:"input"}},{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Header",null,{project:"scripts-v6.damask"}),className:"fieldTitle"}},{ctor:e.Squarespace.DialogFields.jsonTemplateCode,config:{$dontRecurse:!0,name:"header",fieldStyle:"normal",className:"input"}},{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,l.t)("This is included at the top of every donation email.",null,{project:"scripts-v6.damask"}),className:"fieldDescription"}},{ctor:e.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Footer",null,{project:"scripts-v6.damask"}),className:"fieldTitle"}},{ctor:e.Squarespace.DialogFields.jsonTemplateCode,config:{$dontRecurse:!0,name:"footer",fieldStyle:"normal",className:"input"}},{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,l.t)("This is included at the bottom of every donation email.",null,{project:"scripts-v6.damask"}),className:"fieldDescription"}},{ctor:e.Squarespace.DialogFields.Button,config:{$dontRecurse:!0,"strings.text":(0,l.t)("Send Test Email",null,{project:"scripts-v6.damask"}),name:"previewDonationEmail",onClick:this._sendPreview,context:this,className:"sendTestEmailButton"}},{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,l.t)("Addressed to {email}",{email:this.get("emailAddress")},{project:"scripts-v6.damask"}),className:"addressedTo fieldDescription"}},{ctor:e.Squarespace.DialogFields.Button,config:{$dontRecurse:!0,"strings.text":(0,l.t)("Restore Defaults",null,{project:"scripts-v6.damask"}),onClick:this._restoreDefaults,context:this,className:"restoreDefaultsButton"}}]}}}})},"1.0",{requires:["base","squarespace-damask-panel-mixin-panel","squarespace-dialog-description","squarespace-dialog-structured-input","squarespace-models-contribution-confirmed-email-settings","squarespace-widgets-model-backed-field-editor"]});var S1=t(539688)},975049:function(S,b,t){"use strict";t.d(b,{Z:()=>R});var T=t(174161),N=t(795478),u=t.n(N),c=t(685763),f=t(549216),L=t(567713),h=t(952523),g=t(657010),m=t(161381);function C(D,B,F){return B in D?Object.defineProperty(D,B,{value:F,enumerable:!0,configurable:!0,writable:!0}):D[B]=F,D}var v;class M extends(v=T.Component){componentDidMount(){(0,h.M1)()}render(){const{bannerClassName:B,closeButtonLabel:F,title:j,description:H,onRequestContinue:G}=this.props;return T.createElement(c.Z.Transition,null,T.createElement(c.Z,null,T.createElement(c.Z.Overlay,null),T.createElement(c.Z.Position,{position:"center"},T.createElement(c.Z.Dialog,null,T.createElement(c.Z.TouchScroll,null,T.createElement(f.Z,{closeButtonLabel:F,onRequestContinue:G,onRequestClose:this.handleClose,closeButtonDataTest:"mobile-app-deferral-close"},T.createElement(f.Z.Banner,{className:B}),T.createElement(f.Z.Content,{title:j,description:H})))))))}constructor(...B){super(...B),C(this,"handleClose",()=>{const{backTo:F,router:j}=this.props;this.props.onRequestClose&&this.props.onRequestClose(),(0,h.dp)(),j.push(F)}),C(this,"handleButtonClick",()=>{const{to:F}=this.props;(0,h.ET)(F)})}}C(M,"propTypes",{backTo:u().string,bannerClassName:u().string,closeButtonLabel:u().string,title:u().string,description:u().string,to:u().string,onRequestClose:u().func,onRequestContinue:u().func,router:g.Z}),C(M,"defaultProps",{backTo:"/"});const E=D=>T.createElement(L.Z.Renderer,{...D,render:{"mobile-0":M,default:null}}),R=(0,m.Z)(E)},261503:function(S,b,t){"use strict";t.d(b,{Z:()=>G});var T=t(101311),N=t(714487),u=t(845076),c=t.n(u),f=t(795478),L=t.n(f),h=t(174161),g=t(233284),m=t(965885),C=t(87706),v=t(204482),M=t(101099),E=t(683595),R=t.n(E),D=t(535025),B=t.n(D);function F(Z,w,z){return w in Z?Object.defineProperty(Z,w,{value:z,enumerable:!0,configurable:!0,writable:!0}):Z[w]=z,Z}var j;class H extends(j=h.Component){componentDidMount(){this.props.onRef(this)}componentDidUpdate(){this.scrollIntoViewIfNeeded()}componentWillUnmount(){this.props.onRef(null)}focusInput(){this.refs.search.focus()}blurInput(){this.refs.search.blur()}render(){const{className:w,disabled:z,errorMessage:W,hideSearchIcon:k,isLoading:Q,isOpen:te,items:se,label:de,placeholder:Le,searchString:it,onReset:he}=this.props,Je=c()(R().container,w),je=c()(R().spinner,{[R().visibleSpinner]:Q,[R().staticNavSpinner]:!0});return h.createElement("div",{className:Je},h.createElement(m.Search,{className:B().damaskInputOnWhite,ref:"search",wrapperClassName:R().search,isDisabled:z,errorMessage:W,hideSearchIcon:k,label:de,placeholder:Le,value:it,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,onFocus:this.handleFocus,onReset:he}),h.createElement(C.Z,{className:je,verticalAlign:"center",horizontalAlign:"center"}),te&&h.createElement("div",{className:c()(R().results,"u-searchable-list-results")},se.map(this.renderItem)))}constructor(...w){var z;super(...w),z=this,F(this,"state",{selectedIndex:0}),F(this,"disableEscManager",()=>{window.Y&&window.Y.Squarespace.EscManager.disable()}),F(this,"enableEscManager",()=>{window.Y&&window.Y.Squarespace.EscManager.enable()}),F(this,"scrollIntoViewIfNeeded",()=>{const W=this.refs[`item-${this.state.selectedIndex}`];if(W){const k=g.findDOMNode(W);(0,M.Z)(k)}}),F(this,"move",function(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;const k=z.state.selectedIndex,Q=z.props.items.length,te=Math.abs(Q+k+W)%Q;z.setState({selectedIndex:te})}),F(this,"resetSelectedIndex",()=>{this.setState({selectedIndex:0})}),F(this,"setIsClicking",W=>{this.isClicking=W}),F(this,"handleBlur",W=>{this.enableEscManager(),this.isClicking||(this.resetSelectedIndex(),this.props.onBlur(W))}),F(this,"handleFocus",W=>{this.disableEscManager(),this.isClicking||this.props.onFocus(W)}),F(this,"handleSelect",W=>{this.props.onSelect({target:{value:W}}),this.blurInput()}),F(this,"handleChange",W=>{this.resetSelectedIndex(),this.props.onChange(W)}),F(this,"handleEnter",()=>{const W=this.props.items[this.state.selectedIndex];W&&this.handleSelect(W)}),F(this,"handleKeyDown",W=>{v.isEnterKey(W)?this.handleEnter():v.isArrowUpKey(W)?(W.preventDefault(),this.move(-1)):v.isEscapeKey(W)||v.isTabKey(W)?this.props.onEscape(W):v.isArrowDownKey(W)&&(W.preventDefault(),this.move(1))}),F(this,"createItemClickHandler",W=>k=>{k.stopPropagation(),this.handleSelect(W),this.setIsClicking(!1)}),F(this,"renderItem",(W,k)=>{const{children:Q}=this.props,{selectedIndex:te}=this.state,se=te===k,de=c()(R().result,"u-searchable-list-result",{[R().isHighlighted]:se,"u-searchable-list-isHighlighted":se});return h.createElement("div",{key:k,ref:`item-${k}`,className:de,onClick:this.createItemClickHandler(W),onMouseDown:()=>{this.setIsClicking(!0)},onMouseEnter:()=>{this.setState({selectedIndex:k})}},Q(W,se))})}}F(H,"propTypes",{errorMessage:L().string,hideSearchIcon:L().bool,isLoading:L().bool,isOpen:L().bool.isRequired,items:L().array.isRequired,label:L().string,onBlur:L().func.isRequired,onChange:L().func.isRequired,onFocus:L().func.isRequired,onEscape:L().func,onSelect:L().func.isRequired,onReset:L().func,onRef:L().func,placeholder:L().string,searchString:L().string.isRequired,disabled:L().bool}),F(H,"defaultProps",{isLoading:!1,isOpen:!1,onBlur:()=>{},onEscape:()=>{},onFocus:()=>{},onRef:()=>{},placeholder:(0,N.t)("Search",null,{project:"src.shared"})});const G=H},456900:function(S,b,t){"use strict";t.d(b,{Z:()=>L});var T=t(714487),N=t(413951);const u=(0,T.vK)(),c={...N.Z,...u},f={};Object.keys(c).forEach(h=>f[h]=h);const L=f},475814:function(S,b,t){"use strict";t.d(b,{Wh:()=>L});var T=t(413951),N=t(423394);const u=h=>(g,m)=>g.localizedName.localeCompare(m.localizedName,h),c=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(0,N.uu)();return h.sort(u(g))},f={},L=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:(0,N.uu)();if(!f[h]){const g=Object.keys(T.Z).map(m=>({twoLetterIsoCode:m,localizedName:T.Z[m]}));f[h]=c(g,h)}return f[h]}},952523:function(S,b,t){"use strict";t.d(b,{DP:()=>f,ET:()=>L,M1:()=>c,dp:()=>u});var T=t(941254),N=t(511556);const u=()=>{T.Z.track({actor:N.aR.USER,action:"close",object_type:"modal",object_identifier:"close-mobile-app-redirect"})},c=()=>{T.Z.track({actor:N.aR.USER,action:N.om.VIEW,object_type:"modal",object_identifier:"mobile-app-redirect"})},f=()=>{T.Z.track({actor:N.aR.USER,action:N.om.CLICK,object_type:"button",object_identifier:"bypass-mobile-app-redirect"})},L=h=>{T.Z.track({actor:N.aR.USER,action:N.om.CLICK,object_type:"button",object_identifier:"download-in-app-store",destination_url:h})}},620993:function(S,b,t){"use strict";t.d(b,{U:()=>u});var T=t(941254),N=t(511556);const u=(c,f)=>{let L=null,h=null,g=null;if(f){const{previewInstallation:m,liveInstallation:C}=f;C&&m?(C.sourceWebsiteId&&(L=C.sourceWebsiteId),C.templateWebsiteTaxonomy&&(h=C.templateWebsiteTaxonomy.websiteIdentifier),m.templateWebsiteTaxonomy&&(g=m.templateWebsiteTaxonomy.websiteIdentifier)):(f.sourceWebsiteId&&(L=f.sourceWebsiteId),f.templateWebsiteTaxonomy&&(h=f.templateWebsiteTaxonomy.websiteIdentifier))}T.Z.track({actor:N.aR.USER,action:N.om.CLICK,object_type:"button",object_identifier:c,product_area:N.c5.AREA_DESIGN_EDITOR,product_page:"template",object_value:g,selected_template_id:L,selected_template_identifier:h})}},178089:function(S,b,t){"use strict";t.d(b,{Z:()=>B});var T=t(994336),N=t.n(T),u=t(284443),c=t.n(u),f=t(589242),L=t(693661);function h(F,j,H){return j in F?Object.defineProperty(F,j,{value:H,enumerable:!0,configurable:!0,writable:!0}):F[j]=H,F}var g,m,C,v,M;class E{static isSupportedFrontsiteSubdomainLocale(j){return Object.keys(L.Z).includes(j)}static buildSubDomainsForLocale(){return f.Z.translationFiles.reduce((j,H,G)=>{if(H!==`${f.Z.defaultLocale}`&&f.Z.supportedLanguageTags[G]&&E.isSupportedFrontsiteSubdomainLocale(H)){const Z=f.Z.supportedLanguageTags[G];j[H]={prod:Z,staging:`www-staging-${Z}-origin`}}return j},{})}static getSubdomain(j){const H=j||E.templatesLocale,G=E.subDomainsForLocale[H]||E.subDomains;return N().get("sqs-use-staging-template-switcher")==="true"?G.staging:G.prod}static getFrameOriginUrl(j){return`https://${E.getSubdomain(j)}.squarespace.com`}static getUrls(j,H){const G=H||E.templatesLocale,Z=L.Z[G]||E.templateStoreRoute,w=E.pathForWebsiteType[j]||E.pathForWebsiteType[c().CLASSIC],z=this.getFrameOriginUrl(H),W=new URLSearchParams;return W.set("locale_redirect","false"),W.set("parent_path",window.location.pathname),{origin:z,source:`${z}/${Z}/${E.embeddedRoute}/${w}/?${W.toString()}`}}}h(E,"embeddedRoute","embedded"),h(E,"appDomain",((C=window)===null||C===void 0||(m=C.Static)===null||m===void 0||(g=m.SQUARESPACE_CONTEXT)===null||g===void 0?void 0:g.appDomain)||""),h(E,"subDomainsForLocale",E.buildSubDomainsForLocale()),h(E,"templatesLocale",((M=window.Static)===null||M===void 0||(v=M.SQUARESPACE_CONTEXT)===null||v===void 0?void 0:v.templateLocale)||""),h(E,"templateStoreRoute","templates"),h(E,"subDomains",{prod:"www",staging:"www-staging"}),h(E,"pathForWebsiteType",{[c().CLASSIC]:"template-switcher",[c().COVER_PAGE]:"change-cover-page",[c().PARKING_PAGE]:"change-parking-page"});function R(F,j,H){return j in F?Object.defineProperty(F,j,{value:H,enumerable:!0,configurable:!0,writable:!0}):F[j]=H,F}var D=null;class B{destroy(){this.iframe&&(this.iframe.removeEventListener("load",this.handleIframeLoad),this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe),this.iframe=null),window.removeEventListener("message",this.handlePostMessage)}constructor(j){R(this,"iframe",void 0),R(this,"installTemplate",void 0),R(this,"installedTemplateWebsiteIds",void 0),R(this,"onLoad",void 0),R(this,"iframeUrls",void 0),R(this,"handleIframeLoad",()=>{var H,G;this.onLoad(),(G=this.iframe)===null||G===void 0||(H=G.contentWindow)===null||H===void 0||H.postMessage({installedTemplateWebsiteIds:this.installedTemplateWebsiteIds,type:"connect_template_switcher",url:window.location.origin},this.iframeUrls.origin)}),R(this,"handlePostMessage",H=>{H.origin===this.iframeUrls.origin&&H.data.type==="install_template"&&(this.installTemplate({cloneIdentifier:H.data.id,isBlueprint:H.data.isBlueprint}),window.removeEventListener("message",this.handlePostMessage))}),this.iframeUrls=E.getUrls(j.websiteType,j.locale),this.installTemplate=j.installTemplate,this.installedTemplateWebsiteIds=j.installedTemplateWebsiteIds,this.onLoad=j.onLoad,this.iframe=document.createElement("iframe"),this.iframe.setAttribute("data-test","template-switcher-iframe"),this.iframe.src=this.iframeUrls.source,this.iframe.addEventListener("load",this.handleIframeLoad),j.container.appendChild(this.iframe),window.addEventListener("message",this.handlePostMessage)}}},693661:function(S,b,t){"use strict";t.d(b,{Z:()=>N});const N={"es-419":"plantillas","fr-FR":"modeles","de-DE":"vorlagen","pt-BR":"templates","it-IT":"templates","ja-JP":"templates"}}}]);

//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/sourcemaps/bf93c2fec26e491d/yui-for-config-website-manifest-45250c0a6975ddb3-min.en-US.js.map