"use strict";(globalThis.webpackChunkextract_css=globalThis.webpackChunkextract_css||[]).push([["51568"],{367485:function(ge,U,a){a.d(U,{Z:()=>Y});var e=a(174161),d=a(516865),l=a(338465),u=a(538312),A=a(685763),M=a(766519),T=a(352635),b=a(260175),j=a(934951),P=a(637760);const p=z=>{let{children:h,aspectRatio:N,...K}=z;const{platform:ce}=(0,b.i)(T.breakpoints);return ce==="mobile"||N?e.createElement(A.Z.Dialog.ResponsiveProvider,{maxWidth:400,aspectRatio:N},e.createElement(A.Z.Dialog,{width:"sizes.750",...K},h)):e.createElement(A.Z.Dialog,{width:"sizes.750",...K},h)},f=z=>{let{isLoading:h,onClose:N,title:K,subtitle:ce,leadingButton:v,trailingButton:s,aspectRatio:se,children:m,...le}=z;return e.createElement(A.Z,{onRequestClose:N},e.createElement(A.Z.Overlay,null),e.createElement(A.Z.Position,{position:"center"},e.createElement(p,{aspectRatio:se,...le},e.createElement(P.Z,{leadingButton:v??e.createElement(d.Z.Tertiary,{onClick:N},e.createElement(j.T,{project:"apps.App"},"Close")),trailingButton:s,isLoading:h}),e.createElement(M.Z.Container,{margin:6},e.createElement(M.Z.Item,{columns:12},e.createElement(l.Z,{mb:6},e.createElement(u.Z.Title,{py:1,m:0},K),e.createElement(u.Z.Subtitle,{color:"gray.400",pt:1,pb:6,m:0},ce),m))))))},Y=Object.assign(z=>{let{isOpen:h,...N}=z;return e.createElement(A.Z.Transition,null,h?e.createElement(f,N):null)},{Body:f})},637760:function(ge,U,a){a.d(U,{Z:()=>M});var e=a(174161),d=a(338465),l=a(766519),u=a(394954),A=a(766400);const M=T=>{let{leadingButton:b,trailingButton:j,isLoading:P,...p}=T;return e.createElement(d.Z,{py:2,...p},e.createElement(l.Z.Container,{alignItems:"center",gridConstraint:12,height:"sizes.300",margin:6},e.createElement(l.Z.Item,{columns:6},e.createElement(u.Z,{justifyContent:"flex-start",alignItems:"left",direction:"row",space:1},b)),e.createElement(l.Z.Item,{columns:6},e.createElement(u.Z,{justifyContent:"flex-end",direction:"row",space:1},P?e.createElement(A.Z,{size:0}):j))))}},656285:function(ge,U,a){a.d(U,{ZP:()=>T,j7:()=>u});var e=a(931229),d=a.n(e),l=function(b){return b.TRANSFERRING_DOMAIN="TRANSFERRING_DOMAIN",b.LINKED_DOMAIN="LINKED_DOMAIN",b}(l||{});const u=b=>b==="LINKED_DOMAIN",A={[d().LINKED]:"LINKED_DOMAIN"},M=b=>A[b.type],T=l},10605:function(ge,U,a){a.d(U,{Z:()=>Qa});var e=a(174161),d=a(934951),l=a(338465),u=a(538312),A=a(482053),M=a(766519),T=a(394954),b=a(513738),j=a(868192),P=a(334389),p=a.n(P),f=a(456903);const w="/api/rest/domains",z={getPresets(t){return f.default.get(`${w}/${t}/presets`)},addDnsPreset(t,n){return f.default.post(`${w}/${t}/presets`,n)},deleteDnsPreset(t,n){return f.default.delete(`${w}/${t}/presets/${n}`)},getCustomRecords(t){return f.default.get(`${w}/${t}/custom-record-set`)},setCustomRecords(t,n){return f.default.put(`${w}/${t}/custom-record-set`,{records:n})}};var h=a(931191),N=function(t){return t.DELETE="delete-record",t.ADD="add-record",t}({});const K={[p().GOOGLE_APPS_MAIL]:"google-workspace",[p().ZOHO_MAIL]:"zoho-mail",[p().SQUARESPACE_APEX_FORWARDING]:"forward-domain",[p().SQUARESPACE_SUBDOMAIN_FORWARDING]:"forward-subdomain",[p().SQUARESPACE_SUBDOMAIN_WEBSITE]:"forward-subdomain",[p().SQUARESPACE_WEBSITE]:"sqsp-defaults",[p().GOOGLE_APPS_VERIFICATION]:"google-workspace-verification"};var ce=a(860092),v=a.n(ce),s=a(714487),se=a(961697),m=function(t){return t.subdomain="subdomain",t.type="type",t.priority="priority",t.data="data",t}({});const le=t=>{switch(t.type){case v().AAAA:case v().A:return t.ip;case v().MX:case v().CNAME:return t.hostname;case v().TXT:return t.text;case v().SRV:return`${t.weight.toString()} ${t.port.toString()} ${t.hostname}`;default:return""}},Ce={subdomain:"",type:"",priority:null,data:""},ae=t=>({subdomain:t.subdomain,type:t.type,priority:"priority"in t?t.priority:null,data:le(t)}),H={subdomain:{accessor:"subdomain",Header:(0,s.t)("Host",null,{project:"apps.App"}),maxWidth:"346px",minWidth:"130px"},type:{accessor:"type",Header:(0,s.t)("Type",null,{project:"apps.App"}),maxWidth:"173px",minWidth:"130px"},priority:{accessor:"priority",Header:(0,s.t)("Priority",null,{project:"apps.App"}),maxWidth:"173px",minWidth:"100px",renderCell:t=>{let{value:n}=t;return e.createElement(u.Z.Body,{m:0,color:n!==null?"":"gray.600"},n!==null?n:(0,s.t)("N/A",null,{project:"apps.App"}))}},data:{accessor:"data",Header:(0,s.t)("Data",null,{project:"apps.App"}),minWidth:"360px"}},me=(t,n)=>{const r=(0,se.Z)(t),i=n.templateId===p().SQUARESPACE_SUBDOMAIN_WEBSITE;if(!r||!i)return!1;const o=t.indexOf(".");return t.substring(0,o)===n.existingRecords[0].subdomain},Se=t=>{const[n,r,i]=t.split(" ");return{hostname:i,weight:parseInt(n,10),port:parseInt(r,10)}},Te=t=>{switch(t.type){case v().A:return{type:v().A,subdomain:t.subdomain,ip:t.data};case v().AAAA:return{type:v().AAAA,subdomain:t.subdomain,ip:t.data};case v().CNAME:return{type:v().CNAME,subdomain:t.subdomain,hostname:t.data,priority:""};case v().MX:return{type:v().MX,subdomain:t.subdomain,hostname:t.data,priority:t.priority};case v().SRV:return{type:v().SRV,subdomain:t.subdomain,priority:t.priority,...Se(t.data)};case v().TXT:return{type:v().TXT,subdomain:t.subdomain,text:t.data,priority:""}}},ne=t=>t===v().MX||t===v().SRV,ye="/api/transferring-domains",Ne={getCustomRecords(t){return f.default.get(`${ye}/${t}/custom-record-set`)},setCustomRecords(t,n){return f.default.put(`${ye}/${t}/custom-record-set`,{records:n})},getPresets(t){return f.default.get(`${ye}/${t}/presets`)},addDnsPreset(t,n){return f.default.post(`${ye}/${t}/presets`,n)},deleteDnsPreset(t,n){return f.default.delete(`${ye}/${t}/presets/${n}`)}};var pe=a(656285);const Me="LOAD_DNS_PRESET_RECORDS",Ze="LOAD_DNS_PRESET_RECORDS_SUCCESS",he="LOAD_DNS_PRESET_RECORDS_FAILURE",je="LOAD_DNS_CUSTOM_RECORDS",ot="LOAD_DNS_CUSTOM_RECORDS_SUCCESS",_e="LOAD_DNS_CUSTOM_RECORDS_FAILURE",St="UPDATE_DNS_CUSTOM_RECORDS",Ge="UPDATE_DNS_CUSTOM_RECORDS_SUCCESS",Le="DNS_CUSTOM_RECORDS_FAILURE",Ke="DELETE_DNS_CUSTOM_RECORDS_SUCCESS",ke="CUSTOM_RECORDS_CONFIRM_CANCEL",Ve="CUSTOM_RECORDS_CONFIRM_DELETE",He="DISMISS_CUSTOM_RECORDS_ERROR",xe="STAGE_PRESET_TO_ADD",st="CLEAR_STAGED_PRESET",Xe="ADD_DNS_PRESET",$e="ADD_DNS_PRESET_SUCCESS",Be="ADD_DNS_PRESET_FAILURE",ze="DISMISS_ADD_PRESET_ERROR",we="DELETE_DNS_PRESET_SUCCESS",Qe="DELETE_DNS_PRESET_FAILURE",Ye="DISMISS_DELETE_PRESET_ERROR",Je={isLoadingPresets:!0,isAddingPreset:!1,presetPendingData:null,loadPresetRecordsError:null,addPresetError:null,presets:[],presetsByTemplateId:new Set,deletePresetError:null,customRecords:[],isLoadingCustomRecords:!0,loadCustomRecordsError:null,customRecordsError:null,variant:pe.ZP.LINKED_DOMAIN},qe=(t,n)=>{switch(n.type){case Me:return{...t,isLoadingPresets:!0,loadPresetRecordsError:null};case Ze:var r;return{...t,isLoadingPresets:!1,presetsByTemplateId:new Set((r=n.payload.presets)===null||r===void 0?void 0:r.map(i=>i.templateId)),...n.payload};case he:return{...t,isLoadingPresets:!1,loadPresetRecordsError:n.payload};case je:return{...t,isLoadingCustomRecords:!0,loadCustomRecordsError:null};case ot:return{...t,isLoadingCustomRecords:!1,...n.payload};case _e:return{...t,isLoadingCustomRecords:!1,loadCustomRecordsError:n.payload};case Ge:return{...t,...n.payload};case Le:return{...t,customRecordsError:{errorType:n.payload.errorType,error:n.payload.error}};case Ke:return{...t,...n.payload};case ke:return{...t,customRecordsError:{errorType:"CONFIRM_CANCEL",handleConfirm:n.payload.handleConfirm}};case Ve:return{...t,customRecordsError:{errorType:"CONFIRM_DELETE",handleConfirm:n.payload.handleConfirm}};case He:return{...t,customRecordsError:null};case xe:return{...t,presetPendingData:n.payload};case st:return{...t,presetPendingData:null};case Xe:return{...t,isAddingPreset:!0};case $e:{const i=[...t.presets,n.payload];return{...t,presetPendingData:null,isAddingPreset:!1,presets:i,presetsByTemplateId:new Set(i.map(o=>o.templateId))}}case Be:return{...t,presetPendingData:null,isAddingPreset:!1,addPresetError:n.payload};case ze:return{...t,addPresetError:null};case we:{const i=[...t.presets.slice(0,n.payload.presetIndexToRemove),...t.presets.slice(n.payload.presetIndexToRemove+1)];return{...t,presets:i,presetsByTemplateId:new Set(i.map(o=>o.templateId))}}case Qe:return{...t,deletePresetError:n.payload};case Ye:return{...t,deletePresetError:null};default:return t}},lt=(t,n,r)=>{const[i,o]=(0,e.useReducer)(qe,{...Je,variant:r}),c=t==null?void 0:t.id,D=(0,e.useRef)(r===pe.ZP.TRANSFERRING_DOMAIN?Ne:z),y=(0,e.useCallback)(async()=>{o({type:Me});try{const{data:E}=await D.current.getPresets(c);o({type:Ze,payload:{presets:E.results}})}catch(E){o({type:he,payload:E})}},[c]),S=(0,e.useCallback)(async()=>{o({type:je});try{const{data:E}=await D.current.getCustomRecords(c);o({type:ot,payload:{customRecords:E.records}})}catch(E){o({type:_e,payload:E})}},[c]),Z=E=>i.presetsByTemplateId.has(E.templateId),C=async(E,Q)=>{if(o({type:Xe}),E.cannotBeDuplicated&&Z(E)){o({type:Be,payload:{preset:E}}),h.Z.viewPresetDNSRecordError({domain:t,errorDetails:N.ADD,errorMessage:"preset already exists"});return}const ve=E.templateId===p().SQUARESPACE_APEX_FORWARDING,oe=i.presets.findIndex(fe=>fe.templateId===p().SQUARESPACE_WEBSITE),ee=i.presets[oe];if(ve&&ee)try{await D.current.deleteDnsPreset(c,ee.id),o({type:we,payload:{presetIndexToRemove:oe}})}catch(fe){var te,Et;o({type:Be,payload:{preset:E,error:fe}}),h.Z.viewPresetDNSRecordError({domain:t,errorDetails:N.ADD,errorMessage:(Et=fe.response)===null||Et===void 0||(te=Et.data)===null||te===void 0?void 0:te.message});return}const{subdomain:Ya="@",...Ja}=Q||{};try{const{data:fe}=await D.current.addDnsPreset(c,{templateId:E.templateId,type:E.type,subdomain:Ya,data:Ja});o({type:$e,payload:fe}),h.Z.saveDNSPreset({domain:t,presetName:K[E.templateId]}),n==null||n.show({content:e.createElement(u.Z.Body,{margin:0},e.createElement(d.T,{project:"apps.App",presetName:E.displayName},"{presetName} was added"))})}catch(fe){var Dt,gt;o({type:Be,payload:{preset:E,error:fe}}),h.Z.viewPresetDNSRecordError({domain:t,errorDetails:N.ADD,errorMessage:(gt=fe.response)===null||gt===void 0||(Dt=gt.data)===null||Dt===void 0?void 0:Dt.message})}},O=E=>{if(h.Z.addDNSPreset({domain:t,presetName:K[E.templateId]}),E.requiresAdditionalData){o({type:xe,payload:E});return}C(E)},W=()=>{o({type:st})},I=()=>{o({type:ze})},_=async E=>{const Q=i.presets.findIndex(ee=>ee.id===E.id);try{await D.current.deleteDnsPreset(c,E.id),o({type:we,payload:{presetIndexToRemove:Q}}),h.Z.deleteDNSPreset({domain:t,presetName:K[E.templateId]}),n==null||n.show({content:e.createElement(u.Z.Body,{margin:0},e.createElement(d.T,{project:"apps.App",presetName:E.displayName},"{presetName} was deleted"))})}catch(ee){var ve,oe;o({type:Qe,payload:{preset:E,error:ee}}),h.Z.viewPresetDNSRecordError({domain:t,errorDetails:N.DELETE,errorMessage:(oe=ee.response)===null||oe===void 0||(ve=oe.data)===null||ve===void 0?void 0:ve.message})}},De=()=>{o({type:Ye})},B=async E=>{try{const Q=await D.current.setCustomRecords(c,E),{data:ve}=Q;return Promise.resolve(ve)}catch(Q){return Promise.reject(Q)}},R=async(E,Q)=>{const ve=[...i.customRecords.slice(0,E),Te(Q),...i.customRecords.slice(E+1)];try{const te=await B(ve);return te.records?(o({type:Ge,payload:{customRecords:te.records}}),h.Z.saveCustomDNSRecord({domain:t,variant:r,updateValue:Q.type}),n==null||n.show({content:e.createElement(u.Z.Body,{margin:0},e.createElement(d.T,{project:"apps.App"},"A custom record was saved"))}),Promise.resolve()):Promise.reject("SAVE_ERROR")}catch(te){var oe,ee;return o({type:Le,payload:{errorType:"SAVE_ERROR",error:te}}),h.Z.viewCustomDNSRecordError({domain:t,variant:r,errorDetails:N.ADD,errorMessage:(ee=te.response)===null||ee===void 0||(oe=ee.data)===null||oe===void 0?void 0:oe.message}),Promise.reject("SAVE_ERROR")}},k=async E=>{const Q=i.customRecords[E],ve=[...i.customRecords.slice(0,E),...i.customRecords.slice(E+1)];try{const te=await B(ve);return te.records?(o({type:Ke,payload:{customRecords:te.records}}),h.Z.deleteCustomDNSRecord({domain:t,variant:r,updateValue:Q.type}),n==null||n.show({content:e.createElement(u.Z.Body,{margin:0},e.createElement(d.T,{project:"apps.App"},"A custom record was deleted"))}),Promise.resolve()):Promise.reject("DELETE_ERROR")}catch(te){var oe,ee;return o({type:Le,payload:{errorType:"DELETE_ERROR",error:te}}),h.Z.viewCustomDNSRecordError({domain:t,variant:r,errorMessage:(ee=te.response)===null||ee===void 0||(oe=ee.data)===null||oe===void 0?void 0:oe.message,errorDetails:N.DELETE}),Promise.reject("DELETE_ERROR")}},G=()=>{o({type:Le,payload:{errorType:"SINGLE_EDIT_ERROR"}})},re=E=>{o({type:ke,payload:{errorType:"CONFIRM_CANCEL",handleConfirm:E}})},$=E=>{o({type:Ve,payload:{errorType:"CONFIRM_DELETE",handleConfirm:E}})},L=()=>{o({type:He})};return(0,e.useEffect)(()=>{c&&(y(),S())},[c,y,S]),{state:i,loadDnsPresetRecords:y,loadDnsCustomRecords:S,clickPreset:O,clearStagedPreset:W,addPresetWithData:C,dismissAddPresetError:I,deletePreset:_,dismissDeletePresetError:De,updateCustomRecord:R,deleteCustomRecord:k,customRecordsSingleEditError:G,customRecordConfirmCancel:re,customRecordConfirmDelete:$,dismissCustomRecordsError:L,hasPreset:Z}};var F=a(567713),g=a(685763),x=a(362187),J=a(762005),ie=a(969145),ue=a(217169),X=a(619506),Re=a(766400),q=a(251196),V=a(516865),it=a(640367),de=a.n(it);const yt="dns-presets-focus-lock",At=[{templateId:p().SQUARESPACE_WEBSITE,displayName:(0,s.t)("Squarespace defaults",null,{project:"apps.App"}),type:de().SQUARESPACE_WEBSITE,requiresAdditionalData:!1,cannotBeDuplicated:!0},{templateId:p().GOOGLE_APPS_MAIL,displayName:(0,s.t)("Google Workspace MX",null,{project:"apps.App"}),type:de().MAIL,requiresAdditionalData:!1,cannotBeDuplicated:!0,isDisabledIfMxConflict:!0},{templateId:p().ZOHO_MAIL,displayName:(0,s.t)("Zoho Mail MX",null,{project:"apps.App"}),type:de().MAIL,requiresAdditionalData:!1,cannotBeDuplicated:!0,isDisabledIfMxConflict:!0},{templateId:p().SQUARESPACE_APEX_FORWARDING,displayName:(0,s.t)("Forward domain",null,{project:"apps.App"}),type:de().FORWARDING,requiresAdditionalData:!0,cannotBeDuplicated:!0},{templateId:p().SQUARESPACE_SUBDOMAIN_FORWARDING,displayName:(0,s.t)("Subdomain",null,{project:"apps.App"}),type:de().FORWARDING,requiresAdditionalData:!0,cannotBeDuplicated:!1},{templateId:p().GOOGLE_APPS_VERIFICATION,displayName:(0,s.t)("Google Workspace verification",null,{project:"apps.App"}),type:de().VERIFICATION,requiresAdditionalData:!0,cannotBeDuplicated:!1}],vt=t=>t===pe.ZP.LINKED_DOMAIN?At:At.filter(n=>n.type!==de().FORWARDING),Ht={templateId:p().SQUARESPACE_SUBDOMAIN_WEBSITE,displayName:(0,s.t)("Subdomain",null,{project:"apps.App"}),type:de().SQUARESPACE_WEBSITE,requiresAdditionalData:!1},Ct=e.createContext(void 0);function Pe(){const t=(0,e.useContext)(Ct);if(!t)throw new Error("useDnsManagementContext must be used within a DnsManagementContext provider");return t}const Xt=t=>t.reduce((n,r)=>{var i;return r.type!==((i=n[n.length-1])===null||i===void 0?void 0:i[0].type)?n.push([r]):n[n.length-1].push(r),n},[]),Rt=t=>{const[n,r]=(0,e.useState)(!1),{state:{variant:i},hasPreset:o}=Pe(),c=vt(i);return e.createElement(ue.default,{disabled:!n,group:yt},e.createElement(X.Z.PopOver,{style:{marginTop:2},position:"bottom",onRequestOpen:()=>r(!0),onRequestClose:()=>r(!1),isOpen:n,renderTrigger:()=>e.createElement(V.Z.Primary,{"data-test":"dns-presets-menu-toggle",size:"medium",mb:0,onClick:()=>{r(!n)}},e.createElement(l.Z,{sx:{visibility:t.isLoading?"hidden":"visible"}},e.createElement(d.T,{project:"apps.App"},"Add Preset")),t.isLoading&&e.createElement(Re.Z,{sx:{position:"absolute"},size:0,color:"light"}))},()=>e.createElement(T.Z,{"data-testid":"dns-presets-menu-desktop",space:1,py:2,divider:e.createElement(q.Z,{bg:"gray.800"})},Xt(c).map((D,y)=>e.createElement(A.Z,{key:y,flexDirection:"column"},D.map((S,Z)=>e.createElement(ue.default,{key:Z,disabled:!n,group:yt},e.createElement(X.Z.Item,{onClick:()=>{r(!1),t.clickPreset(S)},isDisabled:S.cannotBeDuplicated&&o(S)||S.isDisabledIfMxConflict&&t.hasEmailForwarding,sx:{px:4,py:2}},S.displayName))))))))},$t=t=>{const{state:{variant:n},hasPreset:r}=Pe(),i=vt(n);return e.createElement(X.Z.Sheet,{renderTrigger:o=>{let{toggleActionListOpen:c}=o;return e.createElement(V.Z.Primary,{"data-test":"dns-presets-menu-toggle",size:"medium",onClick:c,mb:0},e.createElement(l.Z,{sx:{visibility:t.isLoading?"hidden":"visible"}},e.createElement(d.T,{project:"apps.App"},"Add Preset")),t.isLoading&&e.createElement(Re.Z,{sx:{position:"absolute"},size:0,color:"light"}))},renderHeader:()=>e.createElement(A.Z,{height:"sizes.300",flexDirection:"column",alignItems:"center",sx:{position:"relative"}},e.createElement(q.Z,{bg:"gray.600",width:"sizes.150",height:"2px",sx:{position:"absolute",top:1}}),e.createElement(u.Z.Body,{fontWeight:"medium"},e.createElement(d.T,{project:"apps.App"},"Add Preset")))},o=>{let{onRequestClose:c}=o;return e.createElement(T.Z,{"data-testid":"dns-presets-menu-mobile",mb:5,divider:e.createElement(q.Z,null),sx:{overflow:"scroll"}},i.map(D=>e.createElement(X.Z.Item,{key:D.templateId,onClick:()=>{c(),t.clickPreset(D)},isDisabled:D.cannotBeDuplicated&&r(D)||D.isDisabledIfMxConflict&&t.hasEmailForwarding},D.displayName)))})};var Oe=a(906046),be=a(47362),Ue=a(115350),Ae=a(240524),et=a(367485);const zt=e.createElement("a",{href:j.FORWARDING_A_SQUARESPACE_DOMAIN_ABS,target:"_blank"},e.createElement(d.T,{project:"apps.App"},"Learn more about forwarding a domain")),Qt=(0,Ue.Z)(Oe.Z,q.Z),Yt=t=>{let{domainName:n,state:r,clearStagedPreset:i,addPresetWithData:o}=t;const[c,D]=(0,e.useState)(""),[y,S]=(0,e.useState)(!1),Z=C=>{if(C.preventDefault(),!(0,Ae.isURL)(c))return S(!0);o(r.presetPendingData,{forwardingUrl:c})};return e.createElement(et.Z.Body,{"data-test":"forward-domain-preset-modal",isLoading:r.isAddingPreset,aspectRatio:2/3,onClose:i,title:(0,s.t)("Forward domain",null,{project:"apps.App"}),subtitle:e.createElement(d.T,{project:"apps.App",learnMoreLink:zt},"Point visitors towards a different website. This will delete any Squarespace default records if you have them. {learnMoreLink}"),trailingButton:e.createElement(V.Z.Tertiary,{"data-test":"add-forward-domain-preset-button",onClick:Z},e.createElement(d.T,{project:"apps.App"},"Add"))},e.createElement(u.Z.Label,null,e.createElement(d.T,{project:"apps.App",domainName:n},"Forward {domainName} to")),e.createElement(Qt,{as:"form",onSubmit:Z,body:e.createElement(be.Z,{"data-test":"forward-domain-forwarding-url-input",onChange:C=>{D(C),S(!1)},placeholder:(0,s.t)("URL",null,{project:"apps.App"}),value:c,autoFocus:!0}),post:y?e.createElement(u.Z.Caption,{color:"red.300"},e.createElement(d.T,{project:"apps.App"},"Not a valid url.")):null}))},Jt=t=>{var n;const r=((n=t.state.presetPendingData)===null||n===void 0?void 0:n.templateId)===p().SQUARESPACE_APEX_FORWARDING;return e.createElement(g.Z.Transition,null,r?e.createElement(Yt,t):null)};var Pt=a(942849);const qt=e.createElement("a",{href:j.FORWARD_A_SQUARESPACE_DOMAIN_FORWARD_A_SUBDOMAIN_ABS,target:"_blank"},e.createElement(d.T,{project:"apps.App"},"Learn more about forwarding a subdomain")),ft=(0,Ue.Z)(Oe.Z,q.Z);var nn=null;const ea=t=>{let{domainName:n,state:r,clearStagedPreset:i,addPresetWithData:o}=t;const[c,D]=(0,e.useState)(""),[y,S]=(0,e.useState)(!1),[Z,C]=(0,e.useState)(0),[O,W]=(0,e.useState)(""),[I,_]=(0,e.useState)(!1),De=B=>{B.preventDefault();const R=(0,Ae.isURL)(`${c}.${n}`),k=(0,Ae.isURL)(O)||Z===0;if(!R||!k){S(!R),_(!k);return}const G=Z===0?[Ht,{subdomain:c}]:[r.presetPendingData,{subdomain:c,forwardingUrl:O}];o(...G)};return e.createElement(et.Z.Body,{"data-test":"forward-subdomain-preset-modal",isLoading:r.isAddingPreset,aspectRatio:2/3,onClose:i,title:(0,s.t)("Forward subdomain",null,{project:"apps.App"}),subtitle:e.createElement(d.T,{project:"apps.App",learnMoreLink:qt},"Create a subdomain to extend part of your brand, like a store or blog. {learnMoreLink}"),trailingButton:e.createElement(V.Z.Tertiary,{"data-test":"add-forward-subdomain-preset-button",onClick:De},e.createElement(d.T,{project:"apps.App"},"Add"))},e.createElement(l.Z,{as:"form",onSubmit:De},e.createElement(u.Z.Label,null,e.createElement(d.T,{project:"apps.App"},"Subdomain")),e.createElement(ft,{body:e.createElement(A.Z,{justifyContent:"space-between"},e.createElement(be.Z,{"data-test":"subdomain-input",sx:{flex:"33%",width:0},onChange:D,placeholder:(0,s.t)("subdomain",null,{project:"apps.App"}),value:c,autoFocus:!0}),e.createElement(u.Z.Body,{m:0,color:"gray.300",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},`.${n}`)),post:y?e.createElement(u.Z.Caption,{color:"red.300"},e.createElement(d.T,{project:"apps.App"},"Not a valid subdomain.")):null}),e.createElement(u.Z.Label,{mt:7,mb:2},e.createElement(d.T,{project:"apps.App"},"Forward to")),e.createElement(u.Z.Body,{as:"label",sx:{display:"flex",alignItems:"center",cursor:"pointer",mb:2}},e.createElement(Pt.Z,{"data-test":"my-squarespace-site-radio-option",mr:2,name:"forward-to",onChange:B=>{C(B),W(""),_(!1)},checked:Z===0,value:0}),e.createElement(d.T,{project:"apps.App"},"My Squarespace site\u2019s homepage")),e.createElement(u.Z.Body,{as:"label",sx:{display:"flex",alignItems:"center",cursor:"pointer"}},e.createElement(Pt.Z,{"data-test":"another-website-radio-option",mr:2,name:"forward-to",onChange:C,checked:Z===1,value:1}),e.createElement(d.T,{project:"apps.App"},"Another website or Squarespace page")),Z===1&&e.createElement(l.Z,{ml:5},e.createElement(ft,{body:e.createElement(be.Z,{"data-test":"forward-subdomain-forwarding-url-input",onChange:B=>{W(B),_(!1)},placeholder:(0,s.t)("URL",null,{project:"apps.App"}),value:O,autoFocus:!0}),post:I?e.createElement(u.Z.Caption,{color:"red.300"},e.createElement(d.T,{project:"apps.App"},"Not a valid url.")):null}))))},ta=t=>{var n;const r=((n=t.state.presetPendingData)===null||n===void 0?void 0:n.templateId)===p().SQUARESPACE_SUBDOMAIN_FORWARDING;return e.createElement(g.Z.Transition,null,r?e.createElement(ea,t):null)};var aa=a(594114);const na="https://support.google.com/a/answer/183895",ra=(0,Ue.Z)(Oe.Z,q.Z),oa=e.createElement("a",{target:"_blank",href:na},e.createElement(d.T,{project:"apps.App"},"Step 1 of this guide.")),sa=t=>{let{state:n,clearStagedPreset:r,addPresetWithData:i}=t;const[o,c]=(0,e.useState)(""),[D,y]=(0,e.useState)(!1),S=Z=>{if(Z.preventDefault(),!o)return y(!0);i(n.presetPendingData,{value:o})};return e.createElement(et.Z.Body,{"data-test":"google-workspace-preset-modal",isLoading:n.isAddingPreset,aspectRatio:2/3,onClose:r,title:(0,s.t)("{googleProduct} verification",{googleProduct:aa.x},{project:"apps.App"}),subtitle:e.createElement(d.T,{project:"apps.App",learnMoreLink:oa},"Confirm you own this domain by entering a verification code from Google.To get the code, follow the instructions in {learnMoreLink}"),trailingButton:e.createElement(V.Z.Tertiary,{"data-test":"add-google-workspace-preset-button",onClick:S},e.createElement(d.T,{project:"apps.App"},"Add"))},e.createElement(ra,{as:"form",onSubmit:S,body:e.createElement(be.Z,{"data-test":"google-workspace-verification-record-input",onChange:Z=>{c(Z),y(!1)},placeholder:(0,s.t)("Verification code",null,{project:"apps.App"}),value:o}),post:D?e.createElement(u.Z.Caption,{color:"red.300"},e.createElement(d.T,{project:"apps.App"},"Required field.")):null}))},la=t=>{var n;const r=((n=t.state.presetPendingData)===null||n===void 0?void 0:n.templateId)===p().GOOGLE_APPS_VERIFICATION;return e.createElement(g.Z.Transition,null,r?e.createElement(sa,t):null)};var Tt=a(611630);const ia=t=>{const{state:{forwardingEmails:n}}=(0,Tt.Z)(t.domainName),r=(n==null?void 0:n.length)>0;return e.createElement(ie.Z.Provider,{theme:J.rosetta.white},e.createElement(F.Z.Renderer,{...t,hasEmailForwarding:r,isLoading:t.state.isAddingPreset&&!t.state.presetPendingData,render:{default:$t,"desktop-50":Rt,"desktop-100":Rt}}),e.createElement(Jt,t),e.createElement(ta,t),e.createElement(la,t),e.createElement(g.Z.Transition,null,t.state.addPresetError&&e.createElement(g.Z,{onRequestClose:t.dismissAddPresetError},e.createElement(g.Z.Overlay,null),e.createElement(g.Z.Position,{position:"center"},e.createElement(x.Z,{title:(0,s.t)("{presetName} couldn't be added",{presetName:t.state.addPresetError.preset.displayName},{project:"apps.App"}),message:t.state.addPresetError.preset.cannotBeDuplicated&&!t.state.addPresetError.error?(0,s.t)("We were unable to add these records because they already exist.",null,{project:"apps.App"}):(0,s.t)("We were unable to add these records. Try again later. If this problem continues, contact Customer Support.",null,{project:"apps.App"}),buttons:[i=>{let{onRequestClose:o}=i;return e.createElement(x.Z.Button,{key:"ok",onClick:o},e.createElement(d.T,{project:"apps.App"},"OK"))}]})))))},dt=t=>{let{onClick:n,sectionHeader:r,isLoading:i}=t;const o=()=>e.createElement(l.Z,{mb:7,mt:8,"data-test":"load-dns-records-error"},e.createElement(u.Z.Body,{m:0,color:"gray.300",fontWeight:"medium"},e.createElement(d.T,{project:"apps.App"},"Unable to load records")),e.createElement(u.Z.Body,{m:0,color:"gray.300"},e.createElement(d.T,{project:"apps.App"},"Something went wrong. Please try again")),e.createElement(l.Z,{mt:2},e.createElement(V.Z.Secondary,{onClick:n,size:"small"},e.createElement(d.T,{project:"apps.App"},"Retry"))));return e.createElement(l.Z,null,r&&e.createElement(u.Z.Subtitle,{mb:2},r),e.createElement(l.Z,{border:i?0:1,borderColor:"gray.800",css:{textAlign:"center",alignSelf:"center"}},i?e.createElement(A.Z,{my:"88px",alignItems:"center",justifyContent:"center","data-testid":"loading-records-indicator"},e.createElement(Re.Z,{"data-test":"loading-records-indicator"})):o()))};var ht=a(79637);const da=t=>{let{domain:n,transfer:r,variant:i,children:o}=t;const[c,D]=(0,e.useState)(null),[y,S]=(0,e.useState)(null),Z={[pe.ZP.TRANSFERRING_DOMAIN]:{domain:r,domainName:(r==null?void 0:r.domainName)||""},[pe.ZP.LINKED_DOMAIN]:{domain:n,domainName:(n==null?void 0:n.name)||""}},C=(0,pe.j7)(i),O=lt(Z[i].domain,c,i),{state:{loadCustomRecordsError:W,loadPresetRecordsError:I}}=O,_=W&&I,{domainName:De}=Z[i],B=(0,e.useRef)(!1);(0,e.useEffect)(()=>{!B.current&&(n||r)&&(C?h.Z.viewDNSRecords(n):h.Z.viewTransferDNSRecords(r),B.current=!0)},[n,r]);const{state:{forwardingEmails:R}}=(0,Tt.Z)(n==null?void 0:n.name),k=(R==null?void 0:R.length)>0;return e.createElement(Ct.Provider,{value:O},e.createElement(l.Z,{ref:G=>S(G),sx:{maxWidth:"1440px",mb:"10",mx:"auto",overflowX:"scroll"}},e.createElement(M.Z.Container,{margin:0,gridConstraint:12,breakpoints:[559,679,720,1199,1679,1/0]},e.createElement(M.Z.Item,{columns:[12,12,12,8,8,8],margin:0,mb:{_:4,"desktop-100":6}},e.createElement(T.Z,null,C&&e.createElement(u.Z.Title,null,e.createElement(d.T,{project:"apps.App"},"DNS Settings")),e.createElement(u.Z.Subtitle,{my:1,color:"gray.300"},e.createElement(d.T,{project:"apps.App",learMoreLink:e.createElement("a",{href:j.ADVANCED_DNS_SETTINGS_LANDING,target:"_blank"},e.createElement(d.T,{project:"apps.App"},"Learn more about DNS settings"))},"DNS records point to services your domain uses, like forwarding your domain or setting up an email service. {learMoreLink}")))),C&&e.createElement(M.Z.Item,{margin:0,mb:6,columns:[12,12,12,4,4,4]},e.createElement(A.Z,{alignItems:"flex-start",justifyContent:{_:"flex-start","desktop-50":"flex-end","desktop-100":"flex-end"}},e.createElement(ia,{domainName:De,...O}))),k&&e.createElement(M.Z.Item,{columns:[12],m:0,mb:{_:4,"desktop-100":6}},e.createElement(ht.Z,{variant:"info",title:(0,s.t)("MX records can\u2019t be added to this domain",null,{project:"domains"}),body:(0,s.t)("You can\u2019t add MX records to a domain with email forwarding rules. To add MX records, first delete any email forwarding rules you created for this domain.",null,{project:"domains"})}))),_?e.createElement(dt,{onClick:()=>{O.loadDnsCustomRecords(),O.loadDnsPresetRecords()}}):o),y&&e.createElement(b.Z.Container,{ref:G=>{D(G)},mountAt:y,"data-test":"toast-container"}))};var ca=a(798589);const ma=()=>{const{isSubDesktop:t}=ca;return e.createElement(ht.Z,{layout:t()?"column":"row",title:(0,s.t)("You\u2019re using custom nameservers",null,{project:"apps.App"}),body:(0,s.t)("Your DNS records are managed with your third-party nameserver provider. To activate the DNS records below, switch to Squarespace nameservers.",null,{project:"apps.App"}),mb:2})};var tt=a(967552),Ee=a(926742),ct=a(317527),It=a(35045),pa=a(902863);const Mt=t=>{let{preset:n,domainName:r,exteriorAccessory:i,"data-test":o="dns-preset-table--header"}=t;const{displayName:c,data:D}=n,y=D&&D.forwardingUrl?e.createElement(A.Z,{flexDirection:"row",flexWrap:"wrap",alignItems:"center"},e.createElement(u.Z.Body,{my:0},r),e.createElement(pa.Z,{height:15}),e.createElement(u.Z.Body,{my:0},D.forwardingUrl)):null;return e.createElement(A.Z,{"data-test":o,"data-testid":o,justifyContent:"space-between",alignItems:"center"},e.createElement(T.Z,null,e.createElement(u.Z.Subtitle,null,c),y),i)};var ua=a(374335),Ea=a.n(ua),Ie=a(102258),Da=a(931229),ga=a.n(Da),Zt=a(666244),Sa=a(417505),ya=a(53678);const Aa=t=>t.isVerified&&t.type!==ga().APPLICATION,va=t=>{let{preset:n,deletePreset:r,onClose:i,domainsById:o,primaryDomain:c}=t;const[D,y]=(0,e.useState)("");return e.createElement(et.Z.Body,{"data-test":"delete-subdomain-modal",aspectRatio:2/3,onClose:i,title:(0,s.t)("Set new primary domain",null,{project:"apps.App"}),subtitle:(0,s.t)("{domain} is currently your primary domain. Set a new primary domain before deleting this preset.",{domain:c},{project:"apps.App"}),trailingButton:e.createElement(V.Z.Tertiary,{onClick:()=>{Sa.Z.updatePrimaryDomain(D).then(S=>{ya.Z.update(S.data),r(n),i()})}},e.createElement(d.T,{project:"apps.App"},"Set & Delete"))},e.createElement(u.Z.Label,null,e.createElement(d.T,{project:"apps.App"},"Primary domain")),e.createElement(Ie.Z,{onChange:y,placeholder:(0,s.t)("Select",null,{project:"apps.App"}),value:D},Object.values(o).filter(Aa).map(S=>e.createElement(Ie.Z.Option,{key:S.name,value:S.name},S.name))))},Ca=t=>{const{isOpen:n,...r}=t;return e.createElement(g.Z.Transition,null,n?e.createElement(va,r):null)},Ot=Ea()({getStores(){return[Zt.default]},getPropsFromStores(){const{domainsById:t}=Zt.default.getState();return{domainsById:t}}},Ca),bt=t=>{let{isOpen:n,onClose:r,onConfirm:i,isSquarespaceDefaults:o}=t;return e.createElement(g.Z.Transition,null,n&&e.createElement(g.Z,{onRequestClose:r},e.createElement(g.Z.Overlay,null),e.createElement(g.Z.Position,{position:"center"},e.createElement(x.Z,{"data-test":"delete-preset-confirmation",title:o?(0,s.t)("Delete Squarespace defaults?",null,{project:"apps.App"}):(0,s.t)("Delete these records?",null,{project:"apps.App"}),message:o?(0,s.t)("If you do this, your domain will no longer point to your Squarespace site. Be sure to forward your domain or restore these defaults from presets.",null,{project:"apps.App"}):(0,s.t)("You cannot undo this action.",null,{project:"apps.App"}),buttons:[c=>{let{onRequestClose:D}=c;return e.createElement(x.Z.Button,{key:"cancel","data-test":"delete-preset-confirmation-close",onClick:D},e.createElement(d.T,{project:"apps.App"},"Cancel"))},()=>e.createElement(x.Z.Button,{key:"delete","data-test":"delete-preset-confirmation-confirm",variant:"danger",onClick:i},e.createElement(d.T,{project:"apps.App"},"Delete"))]}))))},Ra=[H[m.subdomain],H[m.type],H[m.priority],H[m.data]],Pa=t=>e.createElement(Ee.Z.Grid.BodyCell,{...t,p:2}),fa=t=>e.createElement(Ee.Z.Grid.BodyRow,{...t,BodyCellRenderer:Pa,"data-test":"dns-record-row","data-testid":"dns-record-row"}),Nt=t=>{let{domainName:n,preset:r,deletePreset:i}=t;const[o,c]=(0,e.useState)(!1),[D,y]=(0,e.useState)(!1),{primaryDomain:S}=It.default.getState(),{id:Z,existingRecords:C}=r,O=C.map(ae),{state:{variant:W}}=Pe(),_=!(W===pe.ZP.TRANSFERRING_DOMAIN)&&e.createElement(tt.Z.Element.Icon,{"data-test":"delete-preset-button",mr:0,onClick:()=>{if(me(S,r)){c(!0);return}y(!0)},"aria-label":(0,s.t)("Delete preset {presetName}",{presetName:r.displayName},{project:"domains"})},e.createElement(ct.Z,{color:"red.300"}));return e.createElement(l.Z,{"data-testid":"dns-panel--desktop-preset",key:Z,py:6,px:4,borderColor:"gray.800",borderStyle:"solid",borderWidth:1},e.createElement(Mt,{domainName:n,preset:r,exteriorAccessory:_}),e.createElement(Ee.Z,{data:O,columns:Ra},e.createElement(Ee.Z.Grid,{p:0},e.createElement(Ee.Z.Grid.Head,null),e.createElement(Ee.Z.Grid.Body,{BodyRowRenderer:fa}))),e.createElement(Ot,{isOpen:o,onClose:()=>c(!1),preset:r,deletePreset:i,primaryDomain:S}),e.createElement(bt,{isOpen:D,onClose:()=>y(!1),onConfirm:()=>{i(r),y(!1)},isSquarespaceDefaults:r.templateId===p().SQUARESPACE_WEBSITE}))},jt={fontSize:{_:4,"mobile-0":2,"mobile-100":2},lineHeight:{_:2,"mobile-0":1,"mobile-100":1}},at=t=>{let{name:n,value:r}=t;return e.createElement(A.Z,{justifyContent:"flex-start",alignItems:"center",role:"cell"},e.createElement(u.Z.Body,{m:0,minWidth:"sizes.450",color:"gray.300",sx:jt},n),e.createElement(u.Z.Body,{m:0,color:r===null?"gray.600":"gray.100",sx:{...jt,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},r!==null?r:(0,s.t)("N/A",null,{project:"apps.App"})))},Lt=t=>{let{subdomain:n,type:r,priority:i,data:o,exteriorAccessory:c}=t;return e.createElement(e.Fragment,{key:n+r+o},e.createElement(A.Z,{my:3,justifyContent:"space-between"},e.createElement(T.Z,{space:1,"data-test":"dns-record-row","data-testid":"dns-record-row",role:"row",sx:{minWidth:0}},e.createElement(at,{name:(0,s.t)("Host",null,{project:"apps.App"}),value:n}),e.createElement(at,{name:(0,s.t)("Record",null,{project:"apps.App"}),value:r}),e.createElement(at,{name:(0,s.t)("Priority",null,{project:"apps.App"}),value:i}),e.createElement(at,{name:(0,s.t)("Data",null,{project:"apps.App"}),value:o})),c&&e.createElement(l.Z,{mr:2},c)),e.createElement(q.Z,null))},Ta=t=>{let{preset:n,domainName:r,deletePreset:i}=t;const[o,c]=(0,e.useState)(!1),[D,y]=(0,e.useState)(!1),{primaryDomain:S}=It.default.getState(),{id:Z,existingRecords:C}=n,O=C.map(ae),{state:{variant:W}}=Pe(),_=!(W===pe.ZP.TRANSFERRING_DOMAIN)&&e.createElement(tt.Z.Element.Icon,{"data-test":"delete-preset-button",mr:0,onClick:()=>{if(me(S,n)){c(!0);return}y(!0)},"aria-label":(0,s.t)("Delete preset {presetName}",{presetName:n.displayName},{project:"domains"})},e.createElement(ct.Z,{color:"red.300"}));return e.createElement(l.Z,{key:Z,"data-testid":"dns-panel--mobile-preset",pb:6},e.createElement(Mt,{domainName:r,preset:n,exteriorAccessory:_}),O.map(Lt),e.createElement(Ot,{isOpen:o,onClose:()=>c(!1),preset:n,deletePreset:i,primaryDomain:S}),e.createElement(bt,{isOpen:D,onClose:()=>y(!1),onConfirm:()=>{i(n),y(!1)},isSquarespaceDefaults:n.templateId===p().SQUARESPACE_WEBSITE}))},xt=["squarespaceWebsitePreset","gSuiteMailPreset","zohoMailPreset","domainForwardingPreset","subdomainForwardingPreset","squarespaceSubdomainPreset","gSuiteVerificationPreset"],ha=(t,n)=>xt.indexOf(t.displayKey)-xt.indexOf(n.displayKey),Ia=(t,n)=>t===de().FORWARDING?n===pe.ZP.LINKED_DOMAIN:!0,Ma=t=>{let{domain:n,domainName:r}=t;const{state:{variant:i,presets:o=[],deletePresetError:c,loadPresetRecordsError:D,isLoadingPresets:y},dismissDeletePresetError:S,loadDnsPresetRecords:Z,deletePreset:C}=Pe();return D||y?e.createElement(dt,{onClick:Z,sectionHeader:(0,s.t)("Preset records",null,{project:"apps.App"}),isLoading:y}):e.createElement(l.Z,{"data-test":"dns-panel--presets",mb:6},e.createElement(T.Z,{space:6},o.sort(ha).map(O=>Ia(O.type,i)&&e.createElement(F.Z.Renderer,{key:O.id,preset:O,domainName:r,domain:n,deletePreset:C,render:{default:Ta,"desktop-50":Nt,"desktop-100":Nt}}))),e.createElement(g.Z.Transition,null,c&&e.createElement(g.Z,{onRequestClose:S},e.createElement(g.Z.Overlay,null),e.createElement(g.Z.Position,{position:"center"},e.createElement(x.Z,{"data-test":"delete-dns-preset-error",title:(0,s.t)("{presetName} couldn't be deleted",{presetName:c.preset.displayName},{project:"apps.App"}),message:(0,s.t)("We were unable to delete these records. Try again later. If this problem continues, contact Customer Support.",null,{project:"apps.App"}),buttons:[O=>{let{onRequestClose:W}=O;return e.createElement(x.Z.Button,{key:"ok",onClick:W},e.createElement(d.T,{project:"apps.App"},"OK"))}]})))))};var Za=a(543121);const Oa=t=>{const n={};return t.subdomain||(n[m.subdomain]=(0,s.t)("Host required",null,{project:"apps.App"})),t.type||(n[m.type]=(0,s.t)("Type required",null,{project:"apps.App"})),!t.priority&&ne(t.type)&&(n[m.priority]=(0,s.t)("Priority required",null,{project:"apps.App"})),t.data||(n[m.data]=(0,s.t)("Data required",null,{project:"apps.App"})),n},ba=/^[a-z\d_]([a-z\d\-_]{0,61}[a-z\d_])?$/i,Bt=t=>{if(!t)return!1;const n=t.split("."),r=()=>{const o=(t.match(/\*/g)||[]).length;return o===0?!0:t[0]==="*"&&o===1};return t.length<=255&&t.indexOf("..")===-1&&r()&&(n.every(o=>ba.test(o)||o===""||o==="*")||t==="@")},Na=t=>Ae.isInt(`${t}`,{min:0,max:255}),ja=t=>{const{hostname:n,weight:r,port:i}=Se(t);return!Ae.isInt(`${r}`)||!Ae.isInt(`${i}`)||!Ae.isURL(n)?(0,s.t)("Enter valid SRV data",null,{project:"apps.App"}):""},La=t=>Ae.isURL(t)?"":(0,s.t)("Enter valid mail server",null,{project:"apps.App"}),xa=t=>Ae.isIP(t)||!Bt(t)?(0,s.t)("Enter valid alias data",null,{project:"apps.App"}):"",Ba=()=>"",wa=t=>Ae.isIP(t.trim(),4)?"":(0,s.t)("Enter valid IP address",null,{project:"apps.App"}),Ua=t=>Ae.isIP(t.trim(),6)?"":(0,s.t)("Enter valid IPv6 address",null,{project:"apps.App"}),Fa=()=>"",Wa={[v().A]:wa,[v().AAAA]:Ua,[v().CNAME]:xa,[v().MX]:La,[v().SRV]:ja,[v().TXT]:Ba},wt=(t,n,r)=>{if(r.find((D,y)=>D.type===v().CNAME&&D.subdomain===t.subdomain&&n!==y))return{isValid:!1,[m.subdomain]:(0,s.t)("This host is already in use by a CNAME record.",null,{project:"apps.App"})};const o=t.type&&Wa[t.type],c={subdomain:Bt(t.subdomain)?"":(0,s.t)("Enter valid host",null,{project:"apps.App"}),priority:!Na(t.priority)&&ne(t.type)?(0,s.t)("Enter value 0-255",null,{project:"apps.App"}):"",data:o&&t.data?o(t.data):Fa(),...Oa(t)};return Object.values(c).filter(D=>!!D).length>0?{...c,isValid:!1}:{isValid:!0}},nt=(0,s.t)("N/A",null,{project:"apps.App"}),mt={default:{[m.subdomain]:(0,s.t)("Host",null,{project:"apps.App"}),[m.priority]:"0-255",[m.data]:(0,s.t)("Data",null,{project:"apps.App"})},[v().A]:{[m.subdomain]:"@",[m.priority]:nt,[m.data]:(0,s.t)("IP address",null,{project:"apps.App"})},[v().AAAA]:{[m.subdomain]:"www",[m.priority]:nt,[m.data]:(0,s.t)("IPv6 address",null,{project:"apps.App"})},[v().CNAME]:{[m.subdomain]:"www",[m.priority]:nt,[m.data]:(0,s.t)("Alias data",null,{project:"apps.App"})},[v().MX]:{[m.subdomain]:"@",[m.priority]:"0-255",[m.data]:(0,s.t)("Mail server",null,{project:"apps.App"})},[v().TXT]:{[m.subdomain]:"@",[m.priority]:nt,[m.data]:(0,s.t)("Text",null,{project:"apps.App"})},[v().SRV]:{[m.subdomain]:"_http._tcp",[m.priority]:"0-255",[m.data]:"5 8080 example.com"}},rt=(t,n)=>{if(n){const r=mt[n];return r?r[t]:mt.default[t]}return mt.default[t]};var Ut=a(419467);const _a=t=>e.createElement(Ee.Z.Grid.BodyCell,{...t,p:2,css:{alignItems:"flex-start"}}),Ga=(0,Ue.Z)(Oe.Z,q.Z),pt=t=>{let{onChange:n,value:r,field:i,recordType:o,validationError:c,"data-test":D,autoFocus:y=!1}=t;return e.createElement(l.Z,{width:"100%",sx:{alignSelf:"flex-start"}},e.createElement(Ga,{variant:"floating",post:c&&e.createElement(u.Z.Caption,{color:"red.300"},c),body:e.createElement(be.Z,{"data-test":D,autoFocus:y,onChange:n,placeholder:rt(i,o),value:r||"",type:i===m.priority?"number":"string"})}))},Ft=t=>{let{trackAddCustomRecordClick:n,banner:r,shouldUsePrimaryButton:i}=t;const[o,c]=(0,e.useState)(null),[D,y]=(0,e.useState)(null),[S,Z]=(0,e.useState)([]),[C,O]=(0,e.useState)(null),{state:{customRecords:W},...I}=Pe(),_=(0,e.useCallback)(R=>{const k=()=>y(R.row.index),G=()=>y(null);return e.createElement(Ee.Z.Grid.BodyRow,{...R,"data-test":"dns-record-row","data-testid":"dns-record-row",onMouseEnter:k,onMouseLeave:G,tabIndex:0,onFocus:k,onBlur:G,css:{":focus-within":{".rowActions":{visibility:"visible"}}},BodyCellRenderer:_a})},[]);(0,e.useEffect)(()=>{Z(W.map(R=>ae(R)))},[W]);const De=i?V.Z.Primary:V.Z.Secondary,B=e.createElement(De,{size:"medium","data-test":"add-record-button",my:1,disabled:o!==null,onClick:()=>{n();const R=S.length;Z([...S,{...Ce}]),c(R)}},e.createElement(d.T,{project:"apps.App"},"Add record"));return e.createElement(e.Fragment,null,e.createElement(A.Z,{"data-testid":"desktop-custom-records",justifyContent:"space-between",alignItems:"center"},e.createElement(u.Z.Subtitle,null,e.createElement(d.T,{project:"apps.App"},"Custom Records")),B),r&&e.createElement(r,{my:3,layout:"row"}),e.createElement(Ee.Z,{data:S,onDataChange:Z,columns:[{...H[m.subdomain],tooltip:(0,s.t)("This is also called name or host name.",null,{project:"apps.App"}),renderCell:(R,k)=>{let{EditableCell:G}=k;return R.row.index===o?e.createElement(G,{cell:R},re=>{let{onChange:$,value:L}=re;return e.createElement(pt,{"data-test":"dns-subdomain-input",onChange:E=>{C!=null&&C[m.subdomain]&&O({...C,[m.subdomain]:""}),$(E)},autoFocus:!0,value:L,recordType:R==null?void 0:R.row.values.type,field:m.subdomain,validationError:C==null?void 0:C[m.subdomain]})}):e.createElement(u.Z.Body,{sx:{m:0,pr:4,overflow:"hidden",wordBreak:"break-word"}},R.value)}},{...H[m.type],tooltip:(0,s.t)("This is also called record type.",null,{project:"apps.App"}),renderCell:(R,k)=>{let{EditableCell:G}=k;return R.row.index===o?e.createElement(G,{cell:R},re=>{let{onChange:$,value:L}=re;return e.createElement(Oe.Z,{sx:{alignSelf:"flex-start",py:0},width:"100%",body:e.createElement(Ie.Z,{"data-test":"dns-type-dropdown",variant:"floating",value:L,placeholder:(0,s.t)("Type",null,{project:"apps.App"}),onChange:E=>{O(null),$(E)},errors:C!=null&&C[m.type]?{message:C==null?void 0:C[m.type]}:null},kt.map(E=>e.createElement(Ie.Z.Option,{"data-test":`dns-type-dropdown-option-${E}`,key:E,value:E},E)))})}):R.value}},{...H[m.priority],renderCell:(R,k)=>{let{EditableCell:G}=k;const re=!R.row.values.type||ne(R.row.values.type);return R.row.index===o&&re?e.createElement(G,{cell:R},$=>{let{onChange:L,value:E}=$;return e.createElement(pt,{"data-test":"dns-priority-input",onChange:Q=>{C!=null&&C[m.priority]&&O({...C,[m.priority]:""}),L(Q)},value:E,recordType:R==null?void 0:R.row.values.type,field:m.priority,validationError:C==null?void 0:C[m.priority]})}):re?R.value:e.createElement(u.Z.Body,{m:0,color:"gray.600"},e.createElement(d.T,{project:"apps.App"},"N/A"))}},{...H[m.data],tooltip:(0,s.t)("This is also called value or points to.",null,{project:"apps.App"}),renderCell:(R,k)=>{let{EditableCell:G}=k;if(R.row.index===o)return e.createElement(A.Z,{width:"100%",alignItems:"center",justifyContent:"space-between",sx:{alignSelf:"flex-start"}},e.createElement(l.Z,{m:0,p:0,sx:{flex:"4 1 0"}},e.createElement(G,{cell:R},$=>{let{onChange:L,value:E}=$;return e.createElement(pt,{"data-test":"dns-data-input",onChange:Q=>{C!=null&&C[m.data]&&O({...C,[m.data]:""}),L(Q)},value:E,recordType:R==null?void 0:R.row.values.type,field:m.data,validationError:C==null?void 0:C[m.data]})})),e.createElement(A.Z,{sx:{flex:"1 1 0"},alignItems:"center"},e.createElement(V.Z.Tertiary,{"aria-label":(0,s.t)("cancel editing record",null,{project:"apps.App"}),size:"small",mx:3,onClick:()=>{const $=W.map(E=>ae(E)),L=()=>{Z($),c(null),O(null)};if((0,Ut.isEqual)(S[o],$[o])||(0,Ut.isEqual)(S[S.length-1],Ce)){L();return}I.customRecordConfirmCancel(L)}},e.createElement(d.T,{project:"apps.App"},"Cancel")),e.createElement(V.Z.Tertiary,{"aria-label":(0,s.t)("save record",null,{project:"apps.App"}),size:"small","data-test":"dns-save-custom-record-button",onClick:()=>{const $=wt(S[o],o,W);$.isValid?I.updateCustomRecord(o,S[o]).then(()=>{c(null),O(null)}).catch(()=>{O(null)}):O($)}},e.createElement(d.T,{project:"apps.App"},"Save"))));const re=R.row.index===D;return e.createElement(A.Z,{width:"100%",alignItems:"center",justifyContent:"space-between"},e.createElement(u.Z.Body,{sx:{m:0,pr:4,overflow:"hidden",wordBreak:"break-word"}},R.value),e.createElement(A.Z,{className:"rowActions",alignItems:"center",sx:{visibility:re?"visible":"hidden"}},e.createElement(tt.Z.Element.Icon,{"aria-label":(0,s.t)("delete record",null,{project:"apps.App"}),mr:2,onClick:()=>{I.customRecordConfirmDelete(()=>{I.deleteCustomRecord(R.row.index).then(()=>{c(null),O(null)}).catch(()=>{O(null)})})}},e.createElement(ct.Z,{color:"red.300"})),e.createElement(tt.Z.Element.Icon,{"aria-label":(0,s.t)("edit record",null,{project:"apps.App"}),onClick:()=>{o?I.customRecordsSingleEditError():c(R.row.index)}},e.createElement(Za.Z,null))))}}]},e.createElement(Ee.Z.Grid,{p:0},e.createElement(Ee.Z.Grid.Head,null),e.createElement(Ee.Z.Grid.Body,{BodyRowRenderer:_})),!S.length&&e.createElement(l.Z,{pt:8,css:{textAlign:"center"}},e.createElement(u.Z.Body,{"data-test":"no-custom-records",color:"gray.300"},e.createElement(d.T,{project:"apps.App"},"No custom records")))))};var Wt=a(352635),_t=a(290858),Ka=a(418698),Fe=a(561463),ka=a(883970);const Gt=t=>{let{label:n,tooltipText:r}=t;const[i,o]=(0,e.useState)(!1),[c,D]=(0,e.useState)(null),y=()=>o(!0),S=()=>o(!1);return e.createElement(A.Z,{ref:D,mb:2},e.createElement(u.Z.Body,{my:0,mr:1,color:"gray.300"},n),r&&e.createElement(e.Fragment,null,e.createElement(l.Z,{onBlur:S,onClick:y,onFocus:y,tabIndex:"0"},e.createElement(ka.Z,{color:"gray.300"})),i&&e.createElement(Ka.Z,{isOpen:!0,anchor:c,onRequestClose:S,position:"top"},r)))},Va=(0,Ue.Z)(Oe.Z,q.Z),ut=t=>{let{label:n,value:r,onChange:i,tooltipText:o,placeholder:c,inputType:D,validationError:y,disabled:S=!1,"data-test":Z}=t;return e.createElement(e.Fragment,null,e.createElement(Gt,{label:n,tooltipText:o}),e.createElement(Va,{variant:"floating",post:y&&e.createElement(u.Z.Caption,{color:"red.300"},y),body:e.createElement(be.Z,{"data-test":Z,disabled:S,onChange:i,placeholder:c,value:r||"",type:D})}))},Ha=t=>{let{isOpen:n,recordToEdit:r,recordIndex:i,onRequestClose:o}=t;const[c,D]=(0,e.useState)(""),[y,S]=(0,e.useState)(null),[Z,C]=(0,e.useState)(null),[O,W]=(0,e.useState)(""),[I,_]=(0,e.useState)(null),[De,B]=(0,e.useState)(!1),{state:{customRecords:R},updateCustomRecord:k,customRecordConfirmCancel:G}=Pe();(0,e.useEffect)(()=>{r&&(D(r.subdomain),S(r.type),C(r.priority),W(r.data),B(!1))},[r]);const re=()=>{D(""),S(null),C(null),W(""),_(null),B(!1)},$=!(y&&ne(y));return e.createElement(Fe.Z.Portal,null,e.createElement(Fe.Z.Container,{zIndex:999},n&&e.createElement(Fe.Z.Overlay,null),e.createElement(Fe.Z.Drawer,{currentDockIndex:n?1:0,docks:[0,window.innerHeight],renderHeader:()=>e.createElement(M.Z.Container,{alignItems:"center",gridConstraint:12,height:"sizes.300"},e.createElement(M.Z.Item,{columns:6},e.createElement(V.Z.Tertiary,{autoFocus:!0,onClick:()=>{De?G(()=>{o(),re()}):(o(),re())}},e.createElement(d.T,{project:"apps.App"},"Cancel"))),e.createElement(M.Z.Item,{columns:6},e.createElement(A.Z,{justifyContent:"flex-end"},e.createElement(V.Z.Tertiary,{"data-test":"dns-save-custom-record-button",onClick:()=>{if(i===null)return;const L={subdomain:c,type:y,priority:Z,data:O},E=wt(L,i,R);E.isValid?k(i,L).then(()=>{o(),re(),B(!1)}).catch(()=>{_(null)}):_(E)}},e.createElement(d.T,{project:"apps.App"},"Save"))))),renderBody:()=>e.createElement(l.Z,{mx:3,mt:8},e.createElement(u.Z.Title,null,r?(0,s.t)("Edit custom record",null,{project:"apps.App"}):(0,s.t)("Add custom record",null,{project:"apps.App"})),e.createElement(T.Z,{mt:7,space:6,"data-test":"dns-custom-records-input-form"},e.createElement(ut,{"data-test":"dns-subdomain-input",label:(0,s.t)("Host",null,{project:"apps.App"}),value:c,onChange:L=>{I!=null&&I[m.subdomain]&&_({...I,[m.subdomain]:""}),D(L),B(!0)},placeholder:rt(m.subdomain,y),tooltipText:(0,s.t)("This is also called name or host name.",null,{project:"apps.App"}),validationError:I==null?void 0:I[m.subdomain]}),e.createElement(l.Z,null,e.createElement(Gt,{label:(0,s.t)("Type",null,{project:"apps.App"}),tooltipText:(0,s.t)("This is also called record type.",null,{project:"apps.App"})}),e.createElement(Ie.Z,{"data-test":"dns-type-dropdown",variant:"floating",value:y,placeholder:(0,s.t)("Type",null,{project:"apps.App"}),onChange:L=>{Z&&ne(L)&&C(null),S(L),B(!0),_(null)},renderDisplay:e.forwardRef((L,E)=>e.createElement(e.Fragment,null,L.isOpen&&e.createElement(Fe.Z.Overlay,{onClick:()=>L.setIsOpen(!1)}),e.createElement(Ie.Z.Display,{...L,errors:I!=null&&I[m.type]?{message:I==null?void 0:I[m.type]}:null,ref:E})))},kt.map(L=>e.createElement(Ie.Z.Option,{"data-test":`dns-type-dropdown-option-${L}`,key:L,value:L},L)))),e.createElement(ut,{"data-test":"dns-priority-input",disabled:$,label:(0,s.t)("Priority",null,{project:"apps.App"}),value:Z,onChange:L=>{I!=null&&I[m.priority]&&_({...I,[m.priority]:""}),C(L),B(!0)},inputType:"number",placeholder:rt(m.priority,y),validationError:I==null?void 0:I[m.priority]}),e.createElement(ut,{"data-test":"dns-data-input",label:(0,s.t)("Data",null,{project:"apps.App"}),value:O,onChange:L=>{I!=null&&I[m.data]&&_({...I,[m.data]:""}),W(L),B(!0)},placeholder:rt(m.data,y),tooltipText:(0,s.t)("This is also called value or points to.",null,{project:"apps.App"}),validationError:I==null?void 0:I[m.data]})))})))},Xa=t=>{let{trackAddCustomRecordClick:n,banner:r,shouldUsePrimaryButton:i}=t;const[o,c]=(0,e.useState)({isOpen:!1,recordToEditIndex:null}),{state:{customRecords:D},...y}=Pe(),S=D.map(B=>ae(B)),[Z,C]=(0,_t.Z)(),[O,W]=(0,_t.Z)(),I=i?V.Z.Primary:V.Z.Secondary,_=e.createElement(I,{size:"medium","data-test":"add-record-button",my:2,onClick:()=>{n(),c({isOpen:!0,recordToEditIndex:S.length})}},e.createElement(d.T,{project:"apps.App"},"Add record")),De=B=>{let{recordIndex:R}=B;return e.createElement(X.Z.Sheet,{docks:[0,W.height+C.height+parseInt(Wt.sizes.sizes[450],10)],renderHeader:()=>e.createElement(A.Z,{pb:5,pt:2,flexDirection:"column",alignItems:"center",ref:Z},e.createElement(q.Z,{bg:"gray.600",width:Wt.space[4],height:"2px"}),e.createElement(u.Z.Body,{textAlign:"center",fontWeight:"medium"},(0,s.t)("Custom Records",null,{project:"apps.App"})))},k=>{let{onRequestClose:G}=k;return e.createElement(l.Z,{ref:O,px:3,pb:4},e.createElement(T.Z,{space:2,divider:e.createElement(q.Z,null)},e.createElement(u.Z.Action,{py:2,onClick:()=>{G(),c({isOpen:!0,recordToEditIndex:R})}},e.createElement(d.T,{project:"apps.App"},"Edit")),e.createElement(u.Z.Action,{py:2,color:"red.300",onClick:()=>{y.customRecordConfirmDelete(()=>{y.deleteCustomRecord(R).then(()=>{G()})})}},e.createElement(d.T,{project:"apps.App"},"Delete"))))})};return e.createElement(e.Fragment,null,e.createElement(A.Z,{"data-testid":"mobile-custom-records",justifyContent:"space-between",alignItems:"center"},e.createElement(u.Z.Subtitle,{m:0},e.createElement(d.T,{project:"apps.App"},"Custom Records")),_),r&&e.createElement(r,{my:2,layout:"column"}),e.createElement(Ha,{isOpen:o.isOpen,recordToEdit:o.recordToEditIndex!==null?S[o.recordToEditIndex]:null,recordIndex:o.recordToEditIndex,onRequestClose:()=>{c({isOpen:!1,recordToEditIndex:null})}}),S.map((B,R)=>e.createElement(Lt,{key:B.data+B.type,...B,exteriorAccessory:e.createElement(De,{recordIndex:R})})),!S.length&&e.createElement(l.Z,{py:5,css:{textAlign:"center"}},e.createElement(u.Z.Body,{"data-test":"no-custom-records",color:"gray.300"},e.createElement(d.T,{project:"apps.App"},"No custom records"))))},$a=(t,n)=>{switch(t){case"SAVE_ERROR":var r,i;return{title:(0,s.t)("Custom record not saved",null,{project:"apps.App"}),message:(n==null||(i=n.response)===null||i===void 0||(r=i.data)===null||r===void 0?void 0:r.message)||(0,s.t)("We were unable to save this record. Try again later. If this problem continues, contact Customer Support.",null,{project:"apps.App"})};case"SINGLE_EDIT_ERROR":return{title:(0,s.t)("You can only edit one record at a time.",null,{project:"apps.App"}),message:(0,s.t)("Save your changes before editing another record.",null,{project:"apps.App"})};case"CONFIRM_CANCEL":return{title:(0,s.t)("Discard changes?",null,{project:"apps.App"}),message:(0,s.t)("Your most recent changes will not be saved.",null,{project:"apps.App"})};case"ALREADY_EXISTS":return{title:(0,s.t)("Record couldn\u2019t be saved",null,{project:"apps.App"}),message:(0,s.t)("This record couldn\u2019t be saved because it already exists.",null,{project:"apps.App"})};case"CONFIRM_DELETE":return{title:(0,s.t)("Delete this record?",null,{project:"apps.App"}),message:(0,s.t)("This can\u2019t be undone.",null,{project:"apps.App"})};case"DELETE_ERROR":return{title:(0,s.t)("Custom record couldn\u2019t be deleted",null,{project:"apps.App"}),message:(0,s.t)("We were unable to delete this record. Try again later. If this problem continues, contact Customer Support.",null,{project:"apps.App"})};default:return{title:(0,s.t)("Unknown Error",null,{project:"apps.App"}),message:(0,s.t)("An unknown error occurred. Try again later. If this problem continues, contact Customer Support.",null,{project:"apps.App"})}}},Kt={CONFIRM_CANCEL:{label:(0,s.t)("Discard",null,{project:"apps.App"}),key:"discard"},CONFIRM_DELETE:{label:(0,s.t)("Delete",null,{project:"apps.App"}),key:"delete"}},za=t=>{let{isOpen:n,onClose:r,error:i,errorType:o,handleConfirm:c}=t;const{title:D,message:y}=$a(o,i);return e.createElement(g.Z.Transition,null,n&&e.createElement(g.Z,{onRequestClose:r},e.createElement(g.Z.Overlay,null),e.createElement(g.Z.Position,{position:"center"},e.createElement(x.Z,{"data-test":"custom-records-error",title:D,message:y,buttons:(o==="CONFIRM_CANCEL"||o==="CONFIRM_DELETE")&&c?[()=>e.createElement(x.Z.Button,{key:"cancel",onClick:r},e.createElement(d.T,{project:"apps.App"},"Cancel")),()=>e.createElement(x.Z.Button,{variant:"danger",key:Kt[o].key,onClick:()=>{c(),r()}},Kt[o].label)]:[()=>e.createElement(x.Z.Button,{key:"ok",onClick:r},e.createElement(d.T,{project:"apps.App"},"OK"))]}))))},kt=[v().A,v().AAAA,v().CNAME,v().MX,v().SRV,v().TXT],Qa=Object.assign(da,{CustomNameserversInUseBanner:ma,DnsPresetsTables:Ma,DnsCustomRecords:t=>{const{state:{loadCustomRecordsError:n,isLoadingCustomRecords:r,customRecordsError:i},...o}=Pe();return n||r?e.createElement(dt,{onClick:o.loadDnsCustomRecords,sectionHeader:(0,s.t)("Custom records",null,{project:"apps.App"}),isLoading:r}):e.createElement(l.Z,{width:"100%"},e.createElement(F.Z.Renderer,{...t,render:{default:Xa,"desktop-50":Ft,"desktop-100":Ft}}),i&&e.createElement(za,{isOpen:!!i,onClose:o.dismissCustomRecordsError,...i}))}})},803941:function(ge,U,a){a.d(U,{z:()=>ce,A:()=>K});var e=a(174161),d=a(516865),l=a(251196),u=a(934951),A=a(997305),M=a(915772),T=a(714487),b=a(53678),j=a(338465),P=a(538312),p=a(482053),f=a(685763),w=a(102258);const z=v=>{let{isOpen:s,title:se,message:m,subdomains:le,domainName:Ce,primaryDomain:ae,onSet:H,onCancel:me}=v;const[Se,Te]=(0,e.useState)(ae);return e.createElement(f.Z.Transition,null,s&&e.createElement(f.Z,{onRequestClose:me,"data-testid":"primary-domain-selector-modal"},e.createElement(f.Z.Overlay,null),e.createElement(f.Z.Position,{position:"center"},e.createElement(f.Z.Dialog,null,e.createElement(j.Z,{px:6,pt:5,pb:3,width:"sizes.750"},e.createElement(P.Z.Title,null,se),e.createElement(P.Z.Body,{m:0,mt:2},m),e.createElement(P.Z.Body,{m:0,mt:4},e.createElement(u.T,{project:"domains"},"Select which domain or subdomain you would like to set as primary.")),e.createElement(w.Z,{placeholder:(0,T.t)("Select domain or subdomain",null,{project:"domains"}),value:Se,autoFocus:!0,onChange:Te,mt:2,"aria-label":(0,T.t)("Select domain or subdomain",null,{project:"domains"})},le.map(ne=>{const ye=ne?`${ne}.${Ce}`:Ce;return e.createElement(w.Z.Option,{key:ne,value:ye},ye)})),e.createElement(p.Z,{mt:4,alignItems:"center",justifyContent:"flex-end",gap:2},e.createElement(d.Z.Tertiary,{size:"1",onClick:me},e.createElement(u.T,{project:"domains"},"Cancel")),e.createElement(d.Z.Tertiary,{size:"1",onClick:()=>H(Se)},e.createElement(u.T,{project:"domains"},"Set"))))))))};var h=a(35045);const N={confirm:{title:(0,T.t)("Set as primary domain?",null,{project:"domains"}),message:v=>{let{name:s}=v;return(0,T.t)("Are you sure you want to change your primary site URL to {name}? External links to your site may break.",{name:s},{project:"domains"})}},success:{title:(0,T.t)("Primary domain has been updated",null,{project:"domains"}),message:v=>{let{name:s}=v;return(0,T.t)("{name} is set as the primary domain",{name:s},{project:"domains"})},dismiss:(0,T.t)("OK",null,{project:"domains"})},error:{title:(0,T.t)("Primary domain not set",null,{project:"domains"}),message:(0,T.t)("We were unable to set as primary domain. Try again later. If this problem continues, contact Customer Support.",null,{project:"domains"})}},K=v=>{let{domain:s,onClick:se}=v;const[m,le]=(0,e.useState)(!1),[Ce,ae]=(0,e.useState)(!1),[H,me]=(0,e.useState)(!1),{primaryDomain:Se}=h.default.getState(),{availableSubdomains:Te=[]}=s,ne=["","www",...Te],ye=()=>{se==null||se(),me(!0)},We=he=>{b.Z.updatePrimaryDomain(he).then(()=>{me(!1),le(!0)}).catch(()=>ae(!0))},Ne=()=>{me(!1)},pe=e.createElement(z,{isOpen:H,subdomains:ne,title:N.confirm.title,message:N.confirm.message(s),domainName:s.name,primaryDomain:Se,onSet:We,onCancel:Ne}),Me=e.createElement(A.Z,{title:N.success.title,message:N.success.message(s),dismissText:N.success.dismiss,isOpen:m,onDismiss:()=>le(!1),testAttr:"save-changes-success-alert"}),Ze=e.createElement(M.Z,{content:N.error,isOpen:Ce,onClose:()=>{ae(!1),me(!1)}});return{handleSetAsPrimaryDomain:ye,SelectModal:pe,SuccessModal:Me,ErrorModal:Ze}},ce=v=>{let{domain:s,onClick:se,isPrimaryDomain:m=!1}=v;const{handleSetAsPrimaryDomain:le,SelectModal:Ce,SuccessModal:ae,ErrorModal:H}=K({domain:s,onClick:se});return e.createElement(e.Fragment,null,e.createElement(d.Z.Tertiary,{"data-testid":"set-primary-domain-button",size:"medium",disabled:m,onClick:le},e.createElement(u.T,{project:"domains"},"Set as Primary Domain")),e.createElement(l.Z,null),Ce,ae,H)}},360564:function(ge,U,a){a.d(U,{TJ:()=>d.Z,oh:()=>ae,Ay:()=>e.Z,Sh:()=>se,e4:()=>Ne,AD:()=>ze,ew:()=>St,zJ:()=>Ge.z,pf:()=>xe,Cb:()=>lt});var e=a(10605),d=a(284396),l=a(174161),u=a(931229),A=a.n(u),M=a(482053),T=a(538312),b=a(292165),j=a(571199),P=a(224031),p=a(714487),f=a(934951),w=a(389535),Y=a(483563),z=a(867006),h=a.n(z),N=a(906046),K=a(251196),ce=a(35123);const v=F=>{const{certificates:g}=F;switch((0,ce.Q)(g)){case h().ISSUED:return(0,p.t)("Issued",null,{project:"src.shared"});case h().PROCESSING:return(0,p.t)("Processing",null,{project:"src.shared"});default:return(0,p.t)("Unavailable",null,{project:"src.shared"})}},se=F=>{let{domain:g}=F;return l.createElement(l.Fragment,null,l.createElement(N.Z,{label:l.createElement(T.Z.Body,{py:0,my:0},l.createElement(f.T,{project:"domains"},"SSL Certificate Status")),interiorAccessory:l.createElement(T.Z.Body,{m:0,color:"gray.300"},v(g))}),l.createElement(K.Z,null))},m={overflow:"hidden",clipPath:"rect(0,0,0,0)",position:"absolute",width:"1px",height:"1px",border:0,wordWrap:"normal"},le={thirdParty:(0,p.t)("Third Party",null,{project:"domains"}),tooltip:(0,p.t)("SSL secures the connection between a browser and website to protect visitor information on your site. Squarespace uses Let\u2019s Encrypt to provide SSL/TLS certificates at no cost for any verified domain and keeps your certificate up to date automatically.",null,{project:"domains"})},ae=F=>{let{domain:g,isPrimaryDomain:x}=F;const J=g.type===A().APPLICATION,ie=(0,Y.vc)(g),ue=(0,Y.gF)(g)&&!J,X=(0,Y.CG)(g)&&!ue,Re=(0,l.useRef)(null),[q,V]=(0,l.useState)(!1),it=g.type!==A().LINKED?"Squarespace":le.thirdParty;return(0,l.useEffect)(()=>{var de;return q?(de=Re.current)===null||de===void 0?void 0:de.focus():void 0},[g.name]),(0,l.useEffect)(()=>V(!0),[]),l.createElement(l.Fragment,null,l.createElement(M.Z,{alignItems:"center",flexWrap:"wrap",gap:2,mb:1},l.createElement(b.Z,{ref:Re,href:`https://${g.name}`,target:"_blank",onClick:()=>w.Z.clickDomainName(g),sx:{textDecoration:"none",flexShrink:0,maxWidth:"100%"}},l.createElement(T.Z.Title,{sx:{wordBreak:"break-word",display:"inline"}},g.name),l.createElement(T.Z.Body,{sx:m},l.createElement(f.T,{project:"domains"},"opens in a new window")),l.createElement(P.Z,{sx:{ml:2,verticalAlign:"text-bottom"}})),x&&l.createElement(j.Z,{usage:"badge",status:"default",label:(0,p.t)("Primary",null,{project:"domains"})}),J&&l.createElement(j.Z,{usage:"badge",status:"info",label:(0,p.t)("Never expires",null,{project:"domains"})}),X&&l.createElement(j.Z,{usage:"badge",status:"success",label:(0,p.t)("Active",null,{project:"domains"})}),ue&&l.createElement(j.Z,{usage:"badge",status:"warning",label:(0,p.t)("Expiring soon",null,{project:"domains"})}),ie&&l.createElement(j.Z,{usage:"badge",status:"error",label:(0,p.t)("Expired",null,{project:"domains"})})),!J&&l.createElement(T.Z.Body,{m:0,color:"gray.300",display:"flex",gap:1},l.createElement(f.T,{project:"domains",registrar:it,"data-testid":"domain-provider"},"Provider: {registrar}"),l.createElement("span",null,"\u2022"),l.createElement(f.T,{project:"domains",status:v(g)},"SSL Certificate: {status}"),l.createElement(xe,{body:le.tooltip})))};var H=a(161381),me=a(516865),Se=a(594114),Te=a(762535),ne=a(468657);const We=F=>{let{domain:g,router:x,entryLocation:J}=F;const ie={description:(0,p.t)("Professional email with your domain",null,{project:"domains"}),action:(0,p.t)("Add",null,{project:"domains"}),triggerEvents:()=>{ne.Z.clickAddEmail(J,g),w.Z.clickAddEmail(g)},ariaLabel:(0,p.t)("Add email with {googleProduct} to your domain",{googleProduct:Se.x},{notes:"GOOGLE_WORKSPACE_NAME the current name of the Google product, Google Workspace (previously Google Apps, GSuite)",project:"domains"})},ue={description:(0,p._6)({one:"{licensedUsersCount} user",other:"{licensedUsersCount} users"},g.licensedEmailUsers||0,{licensedUsersCount:g.licensedEmailUsers},{project:"domains"}),action:(0,p.t)("Manage",null,{project:"domains"}),triggerEvents:()=>{ne.Z.clickManageEmail(J,g),w.Z.clickManageEmail(g)},ariaLabel:(0,p.t)("Manage your {googleProduct} email",{googleProduct:Se.x},{notes:"GOOGLE_WORKSPACE_NAME the current name of the Google product, Google Workspace (previously Google Apps, GSuite)",project:"domains"})},X=g.purchasedGoogleApps?ue:ie,Re=()=>{X.triggerEvents(),x.push(Te.Z.forGoogleWorkspace())};return l.createElement(l.Fragment,null,l.createElement(N.Z,{label:Se.x,description:X.description,exteriorAccessory:l.createElement(me.Z.Tertiary,{"data-test":"email-product-pusher-cta","aria-label":X.ariaLabel},l.createElement(T.Z.Action,null,X.action)),onClick:Re}),l.createElement(K.Z,null))},Ne=(0,H.Z)(We);var pe=a(458327),Me=a(621942),Ze=a(567713),he=a(627613),je=a(416543);const _e=F=>{let{router:g}=F;const{platform:x}=(0,l.useContext)(Ze.Z.Context);return x!=="mobile"||(0,je.Z)()?null:l.createElement(he.Z.SubPanel.Header,{appKey:"domains"},l.createElement(Me.Z,{"data-test":"dns-settings-menu-header-back",onClick:()=>g.push(Te.Z.forDomains()),label:(0,p.t)("Domains",null,{project:"domains"})}))},St=(0,H.Z)(_e);var Ge=a(803941);const Le=F=>{let{label:g,subtitle:x,tooltip:J,children:ie}=F;return React.createElement(Flex,{sx:{flexDirection:"column",justifyContent:"space-between"}},React.createElement(Flex,{sx:{columnGap:1,alignItems:"center"}},React.createElement(Text.Label,{style:{whiteSpace:"nowrap"}},g),J),React.createElement(Text.Subtitle,null,x),ie)};var Ke=a(967552),ke=a(418698),Ve=a(883970),He=a(352635);const xe=F=>{let{trigger:g,body:x}=F;const[J,ie]=(0,l.useState)(!1),ue=(0,l.useRef)(),X=x.replace(/\W/g,"-").toLowerCase().substring(0,20);return l.createElement(l.Fragment,null,l.createElement(Ke.Z.Element.Icon,{"aria-describedby":X,"aria-label":(0,p.t)("More info",null,{project:"domains"}),onBlur:()=>ie(!1),onClick:()=>ie(!J),size:He.sizes.sizes[150],ref:ue},g||l.createElement(Ve.Z,{color:"gray.300"})),l.createElement(ke.Z,{id:X,isOpen:J,anchor:ue.current,position:"top"},l.createElement(T.Z.Body,{color:"white",m:0,sx:{whiteSpace:"pre-line"}},x)))};var st=a(46512),Xe=a(597001),$e=a(432402);const ze=(0,je.Z)()?F=>{let{isLarge:g,children:x}=F;return l.createElement(Xe.Z,{contentWidth:g?$e.O2.LARGE:void 0,isInSidebar:!1},x)}:F=>{let{isLarge:g,children:x}=F;return l.createElement(he.Z.SubPanel,{gridOverrides:g?{gridConstraint:[12]}:void 0,appKey:"domains"},x)};var we=a(106793),Qe=a(700416),Ye=a(53678);const Je="www.",qe=(0,p.t)("Add \u201Cwww\u201D to the beginning of your domain",null,{project:"domains"}),lt=F=>{let{domain:g,primaryDomain:x,showDescription:J}=F;const ie=x.startsWith(Je),{fetch:ue,isLoading:X}=(0,Qe.Z)(Ye.Z.updatePrimaryDomain),Re=q=>{if(X)return;const V=q?Je+g.name:g.name;ue(V)};return(0,Y.$D)(g.name,x)?l.createElement(N.Z,{"data-test":"www-prefix-toggle-cell",label:(0,p.t)('Use "www" prefix',null,{project:"domains"}),description:J?qe:"",post:l.createElement(K.Z,null),interiorAccessory:l.createElement(we.Z,{"data-test":"www-prefix-toggle","aria-label":qe,checked:ie,value:ie,onChange:Re})}):null}},915772:function(ge,U,a){a.d(U,{Z:()=>T});var e=a(174161),d=a(685763),l=a(934951),u=a(714487),A=a(362187);const T=b=>{let{isOpen:j,content:P,onClose:p}=b;const f={title:(0,u.t)("Unable to save changes",null,{project:"domains"}),message:(0,u.t)("Unable to save changes at this time. Please try again later.",null,{project:"domains"}),...P};return e.createElement(d.Z.Transition,null,j&&e.createElement(d.Z,{onRequestClose:p},e.createElement(d.Z.Overlay,null),e.createElement(d.Z.Position,{position:"center"},e.createElement(A.Z,{"data-testid":"save-changes-error-alert",title:f.title,message:f.message,buttons:[()=>e.createElement(A.Z.Button,{key:"error-ok",onClick:p},e.createElement(l.T,{project:"domains"},"OK"))]}))))}},483563:function(ge,U,a){a.d(U,{$D:()=>z,CG:()=>p,_3:()=>Y,gF:()=>w,vc:()=>f});var e=a(545334),d=a.n(e),l=a(180830),u=a.n(l),A=a(803018),M=a.n(A),T=a(613702),b=a.n(T);const j=15,P=h=>h.tld===TLD.DE&&!h.isActivated,p=h=>h.subscriptionState===b().ACTIVE,f=h=>h.subscriptionState===b().EXPIRED,w=h=>{const{autoRenew:N,managedDomainExpiration:K,subscriptionState:ce}=h;return ce===b().EXPIRED||ce===b().PASTDUE?!1:d()(K).diff(Date.now(),"days")<j&&!N},Y=h=>{const{planLevel:N,currentPromotion:K}=h;return(K==null?void 0:K.isForever)||N===M().FREE},z=(h,N)=>h===(N==null?void 0:N.replace(/^(www\.)/,""))},931191:function(ge,U,a){a.d(U,{Z:()=>b});var e=a(413344),d=a(250463),l=a(656285),u=a(389535);const A=(j,P)=>!!j.domainName||P===l.ZP.TRANSFERRING_DOMAIN,M=function(j){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.ZP.LINKED_DOMAIN;return A(j,P)?{product_page:d.ax.TRANSFERRING_DOMAIN,domain_name:j.domainName,top_level_domain_name:(0,e.Z)(j.domainName)}:{product_page:d.ax.LINKED_DOMAIN,domain_name:j.name,top_level_domain_name:(0,e.Z)(j.name),is_purchased_free:j.isPurchasedFree,domain_expiration_date:j.managedDomainExpiration,registration_date:j.registeredOn}};class T extends u.b{viewDNSRecords(P){super.trackManagementEvent({event_name:"DomainManagement_ViewDNSRecords",action:"view",object_type:"dns-record",object_identifier:"dns-management-panel",...M(P)})}viewTransferDNSRecords(P){super.trackManagementEvent({event_name:"DomainManagement_ViewDNSRecords",action:"view",object_type:"dns-record",object_identifier:"dns-management-panel",product_page:d.ax.TRANSFERRING_DOMAIN,domain_name:P.domainName,top_level_domain_name:(0,e.Z)(P.domainName)})}addCustomDNSRecord(P){super.trackManagementEvent({event_name:"DomainManagement_AddCustomDnsRecord",action:"click",object_type:"button",object_identifier:"add-custom-records-button",...M(P)})}addCustomTransferDNSRecord(P){super.trackManagementEvent({event_name:"DomainManagement_AddCustomDnsRecord",action:"click",object_type:"button",object_identifier:"add-custom-records-button",product_page:d.ax.TRANSFERRING_DOMAIN,domain_name:P.domainName,top_level_domain_name:(0,e.Z)(P.domainName)})}saveCustomDNSRecord(P){let{domain:p,variant:f,updateValue:w}=P;super.trackManagementEvent({event_name:"DomainManagement_SaveCustomDNSRecord",action:"save",object_type:"custom-record",object_identifier:"custom-record",...M(p,f),update_value:w})}deleteCustomDNSRecord(P){let{domain:p,variant:f,updateValue:w}=P;super.trackManagementEvent({event_name:"DomainManagement_DeleteDNSCustomRecord",action:"delete",object_type:"custom-record",object_identifier:"custom-record",...M(p,f),update_value:w})}viewCustomDNSRecordError(P){let{domain:p,variant:f,errorDetails:w,errorMessage:Y}=P;super.trackManagementEvent({event_name:"DomainManagement_ViewCustomDNSRecordError",action:"view",object_type:"preset-record-error",object_identifier:"preset-record-error",...M(p,f),error_details:w,error_message:Y})}addDNSPreset(P){let{domain:p,presetName:f}=P;super.trackManagementEvent({event_name:"DomainManagement_AddPresetDNSRecord",action:"click",object_type:"button",object_identifier:"preset-record",...M(p),dns_preset_name:f})}saveDNSPreset(P){let{domain:p,presetName:f}=P;super.trackManagementEvent({event_name:"DomainManagement_SavePresetDNSRecord",action:"save",object_type:"preset-record",object_identifier:"preset-record",...M(p),dns_preset_name:f})}deleteDNSPreset(P){let{domain:p,presetName:f}=P;super.trackManagementEvent({event_name:"DomainManagement_DeleteDNSPresetRecord",action:"delete",object_type:"preset-record",object_identifier:"preset-record",...M(p),dns_preset_name:f})}viewPresetDNSRecordError(P){let{domain:p,errorDetails:f,errorMessage:w}=P;super.trackManagementEvent({event_name:"DomainManagement_ViewPresetDNSRecordError",action:"view",object_type:"preset-record-error",object_identifier:"preset-record-error",...M(p),error_details:f,error_message:w})}constructor(){super()}}const b=new T},700416:function(ge,U,a){a.d(U,{Z:()=>l});var e=a(174161);const l=u=>{const[A,M]=(0,e.useState)(!1),[T,b]=(0,e.useState)(!1),[j,P]=(0,e.useState)(null),p=(0,e.useCallback)(async function(){for(var Y=arguments.length,z=new Array(Y),h=0;h<Y;h++)z[h]=arguments[h];M(!0),P(null);try{await u(...z),b(!0)}catch(N){P(N)}finally{M(!1)}},[u]),f=(0,e.useCallback)(()=>{b(!1)},[]),w=(0,e.useCallback)(()=>{P(null)},[]);return{isLoading:A,shouldShowAck:T,error:j,dismissAck:f,dismissError:w,fetch:p}}},416543:function(ge,U,a){a.d(U,{Z:()=>T});var e=a(40543),d=a(225840),l=a(284443),u=a.n(l);const A=(0,e.getBillingContext)(),M=(0,d.getWebsiteContext)(),T=()=>{var b;return(M==null||(b=M.website)===null||b===void 0?void 0:b.websiteType)!==u().PARKING_PAGE||(A==null?void 0:A.isStandaloneCampaigns)}},35123:function(ge,U,a){a.d(U,{Q:()=>l});var e=a(867006),d=a.n(e);function l(u){if(u.length===0)return null;const A=u.map(M=>M.certificateStatus).filter((M,T,b)=>M===d().NOT_FOUND?!1:b.indexOf(M)===T);return A.length===1&&A.includes(d().ISSUED)?d().ISSUED:A.includes(d().FAILED_DNS)?d().FAILED_DNS:A.includes(d().FAILED)||A.includes(d().NOT_FOUND)?d().FAILED:A.includes(d().PROCESSING)?d().PROCESSING:d().UNKNOWN}}}]);

//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/sourcemaps/73efed5011ad27c7/51568-696117e3d73925b2-min.en-US.js.map