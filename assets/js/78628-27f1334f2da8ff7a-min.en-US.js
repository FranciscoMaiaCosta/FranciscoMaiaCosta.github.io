"use strict";(globalThis.webpackChunkextract_css=globalThis.webpackChunkextract_css||[]).push([["78628"],{14518:function(S){S.exports={linkEditorModal:"UMhscA8U1O0mZGGW"}},424479:function(S){S.exports={container:"BMe9bbUTSJEJe2Y3",icon:"FfHhmwoxGELCb93s",titleAndButton:"emS24AhcXELrizF1",title:"BO26ViZ8loqeXPfW",button:"Ign05txtaa8deMVZ",descriptionContainer:"h7tvSLVZKWYYPqrx",connected:"ii1HfJ9UlvAifdCx",labelAndSelect:"Ip5XEBhcCxQUpfBF",label:"nLM5q797ZTUJhGz_",select:"EC4ay0j6gRi2yOMd",description:"CB8mZ9EAjDMPhV6S",innerDescription:"eXzy_T9fq8LzPSFN",postDescription:"VqMWlnqyNZEJXYaV"}},340524:function(S){S.exports={container:"MlVNKsLvLrQmmAk2",disconnected:"AOBxTLqZKRcIo8HS",icon:"wWXVoakTPbs4NlL2",descriptionContainer:"cm6peFFmGoMN6ot6",connected:"TIT4RbAWanUxIhk8",button:"R85NFqvbqdAH2Qzj",input:"Tg0zSaBvF88EHNa1",title:"Z9c8v9iWeg4CEydw",description:"kF3G3GZGNaYN4iNH"}},582015:function(S){S.exports={container:"z98HKt0Gs4CJVrQF",disconnected:"sWtdBTVXFDoymiD2",icon:"YP0_DBn6ExI9OhQ9",descriptionContainer:"UV0wxLXB3X474CQS",sectionContainer:"_IfzQWiuHG0X0uB6",connected:"Cwwg8bWLggEJWUqW",button:"s3KhAOkClUYniuzL",select:"_K_9HszFv1ssFr1O",check:"qZ5nGUaKaQK50VhI nsFDSpiBtzUzwIqz",active:"ESEd8yKX4agZNaAG",checkWrapper:"fQrGUgfgvcRNUSAR",title:"FToGpi7dG0MBv_40",description:"kutpRR6rJPAnO3Ea"}},728520:function(S,u,t){t.d(u,{Z:()=>i});var m=t(347560),E=t(225059),e=t(277945),o=t(821991),g=t(442122),h=t(114690),p=t(654669),_=t(228501),l=t(963351),r=t.n(l);class n{fetchData(a){return C=>{C(a);const v=[e.Z.read(a),o.Z.read(a),_.Z.readAllForType(r().COVER_PAGE)];Promise.all(v).then(f=>{let[s,c,P]=f;this.fetchDataSuccess({navTitle:s.data.navigationTitle,slide:c.data.slide,layouts:P.data.results})}).catch(()=>this.fetchDataFailure())}}fetchLockScreenData(){return a=>{a();const C=[(0,g.m)(),_.Z.readAllForType(r().LOCK_SCREEN)];Promise.all(C).then(v=>{let[f,s]=v;this.fetchDataSuccess({slide:f.data.slide,layouts:s.data.results})}).catch(()=>this.fetchDataFailure())}}fetchPopupOverlayData(){return a=>{a();const C=[h.Z.read(),_.Z.readAllForType(r().POPUP_OVERLAY)];Promise.all(C).then(v=>{let[f,s]=v;this.fetchDataSuccess({slide:f.data.slide,layouts:s.data.results})}).catch(()=>this.fetchDataFailure())}}selectLayout(a,C){return v=>{v(C),E.Z.renderPreview(a,C)}}save(a){return C=>(C(),p.Z.update(a).then(v=>{let{data:f}=v;return this.saveSuccess(f)}).catch(v=>{let{response:f}=v;const{message:s}=f.data;return this.saveFailure(s),Promise.reject(s)}))}constructor(){this.generateActions("fetchDataSuccess","fetchDataFailure","selectCategory","saveSuccess","saveFailure")}}const i=m.Z.createActions(n)},103197:function(S,u,t){t.d(u,{Z:()=>r});var m=t(347560),E=t(114690),e=t(228501),o=t(963351),g=t.n(o),h=t(467661),p=t.n(h),_=t(830510);class l{save(i){return _.Z.save(i).then(()=>this.saveSuccess(i.popupOverlaySettings.style)).catch(()=>this.saveFailure())}fetchData(i){return d=>{d();const a=i?i.style:p().NONE,C=[E.Z.read(),e.Z.readAllForType(g().POPUP_OVERLAY)];return Promise.all(C).then(v=>{let[f,s]=v;this.fetchDataSuccess({summary:f.data,layouts:s.data.results,popupStyle:a})}).catch(()=>this.fetchDataFailure())}}discard(){return i=>(i(),Promise.resolve())}constructor(){this.generateActions("fetchDataSuccess","fetchDataFailure","updatePopupStyle","saveFailure","saveSuccess","show","hide")}}const r=m.Z.createActions(l)},225059:function(S,u,t){t.d(u,{Z:()=>o});var m=t(654669),E=t(347560);class e{update(h){return p=>(p(h.id),m.Z.update(h).then(_=>{let{data:l}=_;return this.insert(l)}).catch(_=>{let{response:l}=_;return Promise.reject(l.data.message)}))}upsertSlices(h){return p=>(p(h),m.Z.upsertSlices(h).then(_=>{let{data:l}=_;return this.insertSlices(l.slices)}).catch(_=>{let{response:l}=_;return Promise.reject(l.data.message)}))}renderPreview(h,p){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return l=>(l(),m.Z.renderPreview(h,_?p:null).then(r=>{let{data:n}=r;const{renderedSlide:i,pageClasses:d,slideType:a}=n;this.renderPreviewSuccess(i,d,p,a)}))}renderPreviewSuccess(h,p,_,l){return r=>{r();try{window.Y.Global.fire("slideUpdate",{renderedSlide:h,pageClasses:p,layoutId:_,slideType:l})}catch(n){console.error(n)}}}save(h){return p=>{p();const _=Object.values(h).filter(l=>!l.isDemo);return m.Z.upsertSlices(_).then(l=>{let{data:r}=l;const{slices:n}=r;return this.saveSuccess(n),n}).catch(l=>{let{response:r}=l;const{message:n}=r.data;return this.saveFailure(n),Promise.reject(n)})}}discard(h){return p=>{p(h.id);const{id:_,layoutIdentifier:l}=h;return this.renderPreview(_,l,!1),Promise.resolve()}}constructor(){this.generateActions("insert","insertSlices","saveSuccess","saveFailure")}}const o=E.Z.createActions(e)},990347:function(S,u,t){t.d(u,{Z:()=>E});var m=t(347560);const E=m.Z.generateActions("setGroupsExpanded","setHoveredField","domUpdated","domMutated")},246512:function(S,u,t){t.d(u,{Z:()=>K});var m=t(374335),E=t.n(m),e=t(35045),o=t(153088),g=t(845076),h=t.n(g),p=t(687048),_=t.n(p),l=t(795478),r=t.n(l),n=t(174161),i=t(444867),d=t.n(i),a=t(857),C=t(762379),v=t(225840),f=t(646430),s=t(14518),c=t.n(s);function P(I,T,A){return T in I?Object.defineProperty(I,T,{value:A,enumerable:!0,configurable:!0,writable:!0}):I[T]=A,I}var L,U;const O=C.Z.isFeatureEnabled(d().NESTED_CATEGORIES)?{CONTENT_PICKER:{websiteId:(U=(0,v.getWebsiteContext)())===null||U===void 0||(L=U.website)===null||L===void 0?void 0:L.id,versions:{collection:{product:f.$}}}}:{};class D extends n.Component{render(){const T=h()(c().linkEditorModal,this.props.modalClassName),A=h()(this.props.className);return n.createElement("div",{onClick:M=>M.stopPropagation()},n.createElement(a.Z,{...this.props,htmlAttributes:{"data-test":"CC-LinkEditor-Input"},autocompleteContentItems:!1,value:this.state.value,className:A,modalClassName:T,onChange:this.handleOnChange,componentProps:O}))}constructor(T){super(T),P(this,"handleOnChange",A=>{this.setState({value:A}),this.props.onChange&&this.props.onChange(A)}),this.state={value:_()(T.value)?T.value():T.value}}}P(D,"propTypes",{value:r().oneOfType([r().shape({url:r().string,newWindow:r().bool,name:r().string}),r().func]).isRequired,onChange:r().func.isRequired,isCoverPageOnly:r().bool}),P(D,"defaultProps",{isCoverPageOnly:!0});const K=E()({getStores(){return[e.default]},getPropsFromStores(){const{id:I}=e.default.getState();return{websiteId:I}}},D)},646430:function(S,u,t){t.d(u,{$:()=>m});const m="1.1"},821991:function(S,u,t){t.d(u,{Z:()=>e});var m=t(456903);const e={read(o){return m.default.get(`/api/content-collections/${o}/slide-summary`)}}},442122:function(S,u,t){t.d(u,{m:()=>E});var m=t(456903);const E=()=>m.default.get("/api/lock-screen/slide-summary")},114690:function(S,u,t){t.d(u,{Z:()=>e});var m=t(456903);const e={read(){return m.default.get("/api/popup-overlay/slide-summary")}}},654669:function(S,u,t){t.d(u,{Z:()=>e});var m=t(456903);const e={update(o){return m.default.put(`/api/slides/${o.id}`,o)},upsertSlices(o){const g=o[0].slideId;return m.default.put(`/api/slides/${g}/slices`,{slices:o})},renderPreview(o){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return m.default.get("/api/slides/preview",{params:{slideId:o,layoutId:g}})}}},228501:function(S,u,t){t.d(u,{Z:()=>e});var m=t(456903);const e={readAllForType(o){return m.default.get("/api/slide-layouts",{params:{slideTypes:o}})}}},737063:function(S,u,t){t.d(u,{Z:()=>d});var m=t(347560),E=t(456903),e=t(444867),o=t.n(e),g=t(762379);const p="/api/composer/mailing-lists",l={getLists(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;return g.Z.isFeatureEnabled(o().CAMPAIGNS_API_MOCK)?Promise.resolve({results:[{id:"ffffffffffffffffffffffff",name:"Mocked Campaigns API Response",count:1}],hasNextPage:!1}):E.default.get(a).then(C=>{let{data:v}=C;return v})}};var r=t(43594),n=t.n(r);class i{loadFromSavedData(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return f=>v?l.getLists().then(this.loadFromSavedDataSuccess).catch(this.connectFailure):C.connectionState!==n().CONNECTED?this.reset():(f({savedData:C,listId:C.listId}),l.getLists().then(this.loadFromSavedDataSuccess).catch(this.connectFailure))}connect(){return C=>(C(),l.getLists().then(this.connectSuccess).catch(this.connectFailure))}constructor(){this.generateActions("loadFromCheckoutSettingsSuccess","loadFromSavedDataSuccess","changeSelectedListId","resetSelectedListId","showValidationError","connectSuccess","connectFailure","saveSuccess","disconnect","reset")}}const d=m.Z.createActions(i)},116762:function(S,u,t){t.d(u,{Z:()=>e});var m=t(347560);class E{constructor(){this.generateActions("loadInitialData","loadInitialCaptchaData","toggleSingleOptIn","changeSiteKey","changeSecretKey","toggleCaptchaEnabled","selectCaptchaTheme","selectCaptchaAlignment","saveSuccess","reset")}}const e=m.Z.createActions(E)},850756:function(S,u,t){t.d(u,{Z:()=>h});var m=t(347560),E=t(518703),e=t(815211),o=t.n(e);class g{connect(_){return l=>{const r={serviceProvider:o().GOOGLEDOCS2};E.Z.authenticate(r).then(n=>{n.socialConfig?this.connectSuccess({socialConfig:n.socialConfig}):this.connectFailure()},this.connectFailure).catch(this.connectFailure),l()}}constructor(){this.generateActions("connectFailure","connectSuccess","disconnect","changeSpreadsheetName","closeDidFailAlert","loadFromSavedData","reset","saveSuccess","showFormNameError")}}const h=m.Z.createActions(g)},774859:function(S,u,t){t.d(u,{Z:()=>p});var m=t(347560),E=t(192822),e=t(518703),o=t(815211),g=t.n(o);class h{loadFromSavedData(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r=>{if(!l.socialConfig||!l.socialConfig.externalAuthenticationId)return this.loadFromSavedDataSuccess({savedData:l});const n=l.socialConfig.externalAuthenticationId;E.Z.getLists(n).then(i=>{this.loadFromSavedDataSuccess({savedData:l,lists:i})},this.connectFailure).catch(this.connectFailure),r()}}connectSuccess(l,r,n){return{accountDetail:l,lists:r,socialConfig:n}}connectMailChimp(l){return r=>{const n={serviceProvider:g().MAILCHIMP,params:{authenticationType:"website",startSubscription:!0}};e.Z.authenticate(n).then(i=>{if(i.socialConfig){const d=i.socialConfig.externalAuthenticationId;return Promise.all([E.Z.getAccountDetail(d),E.Z.getLists(d),i.socialConfig])}},this.updateFailure).then(i=>{let[d,a,C]=i;this.connectSuccess(d.data,a,C)},this.connectFailure).catch(this.connectFailure),r()}}constructor(){this.generateActions("loadSuccess","loadFromSavedDataSuccess","connectFailure","updateFailure","disconnectMailChimp","closeDidFailAlert","saveSuccess","reset","changeListId","changeUseSingleOptIn","mailChimpValidationError","closeNoListsAlert","savePreviousSettings","restorePreviousSettings")}}const p=m.Z.createActions(h)},651404:function(S,u,t){t.d(u,{Z:()=>V});var m=t(690251),E=t.n(m),e=t(923729),o=t.n(e),g=t(974680),h=t.n(g),p=t(994083),_=t.n(p),l=t(392625),r=t.n(l),n=t(108435),i=t.n(n),d=t(753085),a=t.n(d),C=t(655279),v=t.n(C),f=t(826688),s=t.n(f),c=t(1996),P=t.n(c),L=t(233746),U=t.n(L),O=t(504224),D=t.n(O),R=t(207738),K=t.n(R),I=t(734823),T=t.n(I),A=t(770141),M=t.n(A),W=t(75928),B=t.n(W),y=t(390922),Z=t.n(y),N=t(559216),F=t.n(N),x=t(635064),X=t.n(x),G=t(881026),z=t.n(G),j=t(632754),Y=t.n(j);const V=E()},921089:function(S,u,t){t.d(u,{Z:()=>D});var m=t(795478),E=t.n(m),e=t(174161),o=t(845076),g=t.n(o),h=t(965885),p=t(374335),_=t.n(p),l=t(782618),r=t(737063),n=t(934951),i=t(714487),d=t(424479),a=t.n(d);const C={CONNECTING:(0,i.t)("Connecting...",null,{project:"src.shared"}),CONNECTION_ERROR:(0,i.t)("There was an issue retrieving your Squarespace Email Campaigns lists. Please try again later.",null,{project:"src.shared"}),CONNECT:(0,i.t)("Click to connect",null,{project:"src.shared"}),NO_LISTS:(0,i.t)("Click here to create a mailing list. Then come back to this page to link it with this block.",null,{project:"src.shared"})},v=R=>{let{isConnecting:K=!1,hasConnectionError:I=!1,isConnected:T=!1,isMissingLists:A=!1,wasRemoved:M=!1}=R;return K?C.CONNECTING:I?C.CONNECTION_ERROR:!T||M?C.CONNECT:A?C.NO_LISTS:""},s=R=>{let{isConnecting:K=!1,hasConnectionError:I=!1,isConnected:T=!1,lists:A=[],wasRemoved:M=!1}=R;const W=T&&!M&&A.length===0,B=v({isConnecting:K,hasConnectionError:I,isConnected:T,isMissingLists:W,wasRemoved:M});return B&&e.createElement("div",{className:g()(a().description,a().innerDescription)},e.createElement("span",null,B))};function c(R,K,I){return K in R?Object.defineProperty(R,K,{value:I,enumerable:!0,configurable:!0,writable:!0}):R[K]=I,R}const{hostname:P}=document.location,L=`https://${P}/config/marketing/campaigns`;var U;class O extends(U=e.Component){render(){const{isConnected:K,isConnecting:I,hasConnectionError:T,lists:A,wasRemoved:M}=this.props,W=K&&!M&&A.length>0,B=g()(a().container,{[a().connected]:W});return e.createElement(e.Fragment,null,e.createElement("div",{className:B,onClick:this.handleContainerClick},e.createElement("div",{className:a().titleAndButton},e.createElement("div",{className:a().title},e.createElement(n.T,{project:"src.shared"},"Squarespace Email Campaigns")),e.createElement("div",{className:a().button,onClick:this.handleDisconnectIconClick},e.createElement("div",{className:a().icon}))),e.createElement("div",{className:a().descriptionContainer},e.createElement(s,{isConnected:K,isConnecting:I,hasConnectionError:T,wasRemoved:M,lists:A}),W&&this.renderSelect())),K&&!M&&e.createElement("p",{className:g()(a().description,a().postDescription)},e.createElement(n.T,{campaignsDashboard:e.createElement("a",{href:L,target:"_blank"},e.createElement(n.T,{project:"src.shared"},"Email Campaigns dashboard")),project:"src.shared"},"To manage this mailing list and customize the confirmation email, go to the {campaignsDashboard}.")))}constructor(...K){super(...K),c(this,"handleContainerClick",I=>{I.stopPropagation();const{isConnected:T,lists:A}=this.props;if(!T)return r.Z.connect();A.length===0&&window.open(L)}),c(this,"handleDisconnectIconClick",()=>{this.props.isConnected&&r.Z.disconnect()}),c(this,"handleChange",I=>{r.Z.changeSelectedListId(I)}),c(this,"renderMailingListOptions",()=>{const{lists:I}=this.props;return I.map(T=>{let{id:A,name:M}=T;return e.createElement("option",{key:A,value:A},M)})}),c(this,"renderSelect",()=>{const{lists:I,selectedListId:T}=this.props,A=I.find(M=>{let{id:W}=M;return W===T})?T:"";return e.createElement("div",{className:a().labelAndSelect},e.createElement(h.Label,{className:a().label},e.createElement(n.T,{project:"src.shared"},"Mailing List")),e.createElement(h.Select,{wrapperClassName:a().select,value:A,onChange:this.handleChange,type:"light"},this.renderMailingListOptions()))})}}c(O,"propTypes",{initialData:E().object,isConnecting:E().bool.isRequired,isConnected:E().bool.isRequired,isDirty:E().bool,lists:E().array.isRequired,selectedListId:E().string,wasRemoved:E().bool,hasConnectionError:E().bool});const D=_()({getStores(){return[l.Z]},componentDidConnect(R){r.Z.loadFromSavedData.defer(R.initialData)},getPropsFromStores(){return{...l.Z.getState()}}},O)},690388:function(S,u,t){t.d(u,{Z:()=>v});var m=t(795478),E=t.n(m),e=t(174161),o=t(934951),g=t(338465),h=t(516865),p=t(538312),_=t(685763);function l(f,s,c){return s in f?Object.defineProperty(f,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):f[s]=c,f}var r;class n extends(r=e.Component){render(){const{confirmTitle:s,confirmDescription:c,isOpen:P,onRequestClose:L,premiumFeatureLabel:U,...O}=this.props;return e.createElement(_.Z.Transition,null,P&&e.createElement(_.Z,{onRequestClose:L},e.createElement(_.Z.Overlay,null),e.createElement(_.Z.Position,{position:"center"},e.createElement(_.Z.Dialog,O,e.createElement(g.Z,{pb:2,pt:5,px:6,tabIndex:0,width:"sizes.700"},e.createElement(h.Z.Tertiary,{mb:4,onClick:L,"data-test":"modal-button-test"},e.createElement(o.T,{project:"src.shared"},"Close")),e.createElement(p.Z.Title,{py:1},s||U),e.createElement(p.Z.Subtitle,{color:"gray.300",pb:4,pt:1},c))))))}}l(n,"propTypes",{confirmDescription:E().node.isRequired,confirmTitle:E().string.isRequired,isOpen:E().bool.isRequired,onRequestClose:E().func.isRequired,premiumFeatureLabel:E().string.isRequired});const i=n;var d=t(553763);const v=(f=>s=>{let{isTrial:c,confirmDescription:P,confirmTitle:L,...U}=s;return P||(P=c?d.Z.trialConfirmDescription:d.Z.confirmDescription),L||(L=c?d.Z.trialConfirmTitle:d.Z.confirmTitle),e.createElement(f,{premiumFeatureLabel:d.Z.premiumFeatureLabel,confirmDescription:P,confirmTitle:L,...U})})(i)},799694:function(S,u,t){t.d(u,{Z:()=>L});var m=t(101311),E=t(795478),e=t.n(E),o=t(174161),g=t(340524),h=t.n(g),p=t(965885),_=t(374335),l=t.n(_),r=t(850756),n=t(757182),i=t(283238),d=t(845076),a=t.n(d),C=t(714487),v=t(934951);function f(U,O,D){return O in U?Object.defineProperty(U,O,{value:D,enumerable:!0,configurable:!0,writable:!0}):U[O]=D,U}var s;class c extends(s=o.Component){render(){const{isConnected:O}=this.props,D=a()(h().container,{[h().connected]:O,[h().disconnected]:!O});return o.createElement("div",{className:D,onClick:this.handleContainerClick},o.createElement("div",{className:h().descriptionContainer},o.createElement("div",{className:h().title},o.createElement(v.T,{project:"src.shared"},"Google Drive")),o.createElement("div",{className:h().description},this.getDescription())),this.renderOAuthFailedAlert(),O&&this.renderInput(),this.renderIcon())}constructor(...O){super(...O),f(this,"handleContainerClick",()=>{!this.props.isConnected&&!this.props.showConnectionFailedAlert&&r.Z.connect()}),f(this,"getDescription",()=>{const{isConnected:D,isConnecting:R,showConnectionFailedError:K,username:I}=this.props;return K?(0,C.t)("Error connecting to Google Drive",null,{project:"src.shared"}):D?(0,C.t)("As {username}",{username:I},{project:"src.shared"}):R?(0,C.t)("Connecting\u2026",null,{project:"src.shared"}):(0,C.t)("Click to connect",null,{project:"src.shared"})}),f(this,"handleIconClick",()=>{const{isConnected:D}=this.props;D&&r.Z.disconnect()}),f(this,"renderOAuthFailedAlert",()=>{const{showConnectionFailedAlert:D}=this.props;return o.createElement(i.Z,{isOpen:D,onDismiss:r.Z.closeDidFailAlert,title:(0,C.t)("External Authentication Error",null,{project:"src.shared"}),dismissText:(0,C.t)("Okay",null,{project:"src.shared"}),anchor:"window"},o.createElement(v.T,{project:"src.shared"},"Unable to connect to external service."))}),f(this,"renderIcon",()=>o.createElement("div",{"data-test":"GoogleDriveConfig",className:h().button,onClick:this.handleIconClick},o.createElement("div",{className:h().icon}))),f(this,"renderInput",()=>{const{showFormNameRequiredError:D,googleDriveSpreadsheetName:R}=this.props;return o.createElement(p.Input,{wrapperClassName:h().input,placeholder:(0,C.t)("Spreadsheet Name",null,{project:"src.shared"}),value:R,onChange:K=>{r.Z.changeSpreadsheetName(K)},errorMessage:D?(0,C.t)("Form name is required",null,{project:"src.shared"}):null})})}}f(c,"propTypes",{isConnecting:e().bool,isConnected:e().bool,username:e().string,showConnectionFailedAlert:e().bool,showConnectionFailedError:e().bool,googleDriveSpreadsheetName:e().string,showFormNameRequiredError:e().bool,googleDriveConfig:e().object});const L=l()({getStores(){return[n.Z]},getPropsFromStores(){return n.Z.getState()}},c)},631805:function(S,u,t){t.d(u,{Z:()=>I});var m=t(101311),E=t(795478),e=t.n(E),o=t(174161),g=t(965885),h=t(774859),p=t(283238),_=t(845076),l=t.n(_),r=t(374335),n=t.n(r),i=t(834105),d=t(559409),a=t.n(d),C=t(967361),v=t(935154),f=t.n(v),s=t(714487),c=t(934951),P=t(273564),L=t(690388),U=t(582015),O=t.n(U);function D(T,A,M){return A in T?Object.defineProperty(T,A,{value:M,enumerable:!0,configurable:!0,writable:!0}):T[A]=M,T}var R;class K extends(R=o.Component){render(){const{isMailChimpConnected:A}=this.props,M=l()(O().container,{[O().connected]:A,[O().disconnected]:!A}),W=A?"mailchimp-config-connected":void 0;return[o.createElement("div",{key:"container",className:M,onClick:this.handleContainerClick,"data-test":W},o.createElement("div",{className:O().sectionContainer},o.createElement("div",{"data-test":"MailChimpConfig-descriptionContainer",className:O().descriptionContainer},o.createElement("div",{className:O().title},o.createElement(c.T,{project:"src.shared"},"MailChimp")),o.createElement("div",{className:O().description},this.getDescription())),A&&this.renderSelect(),this.renderIcon()),A&&this.renderDoubleOptInConfig()),this.renderNoListsAlert(),this.renderOAuthFailedAlert(),this.renderMailchimpWarning()]}constructor(...A){super(...A),D(this,"state",{showMailchimpWarning:!1}),D(this,"handleContainerClick",()=>{const{isMailChimpConnected:M,shouldShowMailchimpWarning:W,showConnectionFailedAlert:B}=this.props;M||(W?((0,P.trackInternal)("upsell_confirmation_mailchimp_show"),this.setState({showMailchimpWarning:!0})):B||h.Z.connectMailChimp())}),D(this,"getDescription",()=>{const{isMailChimpConnected:M,isConnecting:W,mailChimpError:B,mailChimpUsername:y}=this.props;return B?(0,s.t)("Error connecting to MailChimp",null,{project:"src.shared"}):M?(0,s.t)("As {username}",{username:y},{project:"src.shared"}):W?(0,s.t)("Connecting\u2026",null,{project:"src.shared"}):(0,s.t)("Click to connect",null,{project:"src.shared"})}),D(this,"handleIconClick",()=>{const{isMailChimpConnected:M}=this.props;M&&h.Z.disconnectMailChimp()}),D(this,"handleCloseMailchimpWarning",()=>{this.setState({showMailchimpWarning:!1}),h.Z.connectMailChimp()}),D(this,"renderMailingListOptions",()=>{const{mailChimpLists:M}=this.props;return M.map(W=>{let{title:B,value:y}=W;return o.createElement("option",{key:y,value:y},B)})}),D(this,"renderOAuthFailedAlert",()=>{const{showConnectionFailedAlert:M}=this.props;return o.createElement(p.Z,{key:"oauth-failed-alert",isOpen:M,onDismiss:h.Z.closeDidFailAlert,title:(0,s.t)("External Authentication Error",null,{project:"src.shared"}),dismissText:(0,s.t)("Okay",null,{project:"src.shared"}),anchor:"window"},o.createElement(c.T,{project:"src.shared"},"Unable to connect to external service."))}),D(this,"renderNoListsAlert",()=>{const{showNoMailChimpListsAlert:M}=this.props;return o.createElement(p.Z,{key:"no-lists-alert",isOpen:M,onDismiss:h.Z.closeNoListsAlert,title:(0,s.t)("No MailChimp Lists Created",null,{project:"src.shared"}),dismissText:(0,s.t)("Okay",null,{project:"src.shared"}),anchor:"window"},o.createElement(c.T,{project:"src.shared"},"Connecting to MailChimp requires an existing MailChimp mailing list. Please create one to continue."))}),D(this,"renderIcon",()=>o.createElement("div",{className:O().button,onClick:this.handleIconClick},o.createElement("div",{"data-test":"mailchimp-config-icon",className:O().icon}))),D(this,"renderSelect",()=>{const{mailChimpListId:M,showMailingListRequiredError:W}=this.props,B=[o.createElement("option",{key:"placeholder-option",value:""},(0,s.t)("Select Lists",null,{project:"src.shared"}))],y=this.renderMailingListOptions(),Z=W?(0,s.t)("Select a list",null,{project:"src.shared"}):null,N=y.some(F=>F.props.value===M)?M:"";return o.createElement(g.Select,{wrapperClassName:O().select,value:N,onChange:F=>{h.Z.changeListId(F)},type:"light",errorMessage:Z},B.concat(y))}),D(this,"renderDoubleOptInConfig",()=>{const{mailChimpUseSingleOptIn:M}=this.props,W=!M,B=l()(O().check,{[O().active]:W});return o.createElement("div",{className:O().sectionContainer},o.createElement(g.Check,{className:B,wrapperClassName:O().checkWrapper,title:(0,s.t)("Require double opt-in after subscribing",null,{project:"src.shared"}),value:W,onChange:y=>{h.Z.changeUseSingleOptIn(!y)}}))}),D(this,"renderMailchimpWarning",()=>{const{showMailchimpWarning:M}=this.state;return o.createElement(L.Z,{key:"mailchimp-warning",isOpen:M,isTrial:i.Z.isTrial(),onRequestClose:this.handleCloseMailchimpWarning})})}}D(K,"propTypes",{isConnecting:e().bool.isRequired,isMailChimpConnected:e().bool.isRequired,mailChimpError:e().bool.isRequired,mailChimpListId:e().string,mailChimpLists:e().arrayOf(e().object),mailChimpUsername:e().string,mailChimpUseSingleOptIn:e().bool,showConnectionFailedAlert:e().bool.isRequired,showMailingListRequiredError:e().bool.isRequired,showNoMailChimpListsAlert:e().bool.isRequired,shouldShowMailchimpWarning:e().bool.isRequired});const I=n()({getStores(){return[i.Z,C.Z]},getPropsFromStores(){const{siteStatus:T}=i.Z.getState();return{shouldShowMailchimpWarning:!C.Z.isFeatureInAllPlans(f().MAILCHIMP_INTEGRATION)&&T===a().TRIAL}}},K)},782618:function(S,u,t){t.d(u,{Z:()=>r});var m=t(347560),E=t(43594),e=t.n(E),o=t(481312),g=t.n(o),h=t(737063);function p(n,i,d){return i in n?Object.defineProperty(n,i,{value:d,enumerable:!0,configurable:!0,writable:!0}):n[i]=d,n}const _={initialData:{connectionState:e().DISCONNECTED,listId:null,lists:[]},isConnecting:!1,isConnected:!1,isDirty:!1,lists:[],selectedListId:null,wasRemoved:!1,hasConnectionError:!1};class l{onLoadFromSavedData(i){let{savedData:d,listId:a}=i;this.setState({initialData:{...d,lists:[]},selectedListId:a})}onLoadFromSavedDataSuccess(i){let{results:d}=i;const a=this.state.initialData.listId!==null;this.setState({isConnected:!0,isDirty:!a,lists:d,initialData:{...this.state.initialData,lists:d}})}onLoadFromCheckoutSettingsSuccess(i){const{storeMailingListSettings:d}=i,{isCampaignsConnected:a,campaignsListId:C,campaignsMailingLists:v}=d;this.setState({isConnected:a,isDirty:!1,selectedListId:C,lists:v,initialData:{connectionState:a?e().CONNECTED:e().DISCONNECTED,listId:C,lists:v}})}onChangeSelectedListId(i){i&&this.setState({isDirty:!0,selectedListId:i})}onResetSelectedListId(){this.setState({isDirty:!0,selectedListId:null})}onConnect(){this.setState({isConnecting:!0,hasConnectionError:!1})}onConnectSuccess(i){let{results:d}=i;const a={isConnecting:!1,isConnected:!0,lists:d,wasRemoved:!1};if(!this.state.selectedListId){const[{id:C}]=d;a.selectedListId=C,a.isDirty=!0}this.setState(a)}onConnectFailure(){this.setState({isConnecting:!1,hasConnectionError:!0})}onDisconnect(){this.setState({..._,initialData:this.state.initialData,isDirty:!0,wasRemoved:!0})}onSaveSuccess(){this.setState({isDirty:!1,initialData:this.getConnectionData()})}onReset(){const{initialData:i}=this.state;this.setState({..._,isConnected:i.connectionState===e().CONNECTED,selectedListId:i.listId,lists:i.lists,initialData:i})}constructor(){p(this,"isReady",()=>this.state.hasConnectionError||this.state.isConnected),p(this,"isConnected",()=>this.state.isConnected&&this.state.selectedListId),p(this,"getConnectionData",()=>this.isConnected()?{backendType:g().CAMPAIGNS,connectionState:e().CONNECTED,listId:this.state.selectedListId,lists:this.state.lists}:{backendType:g().CAMPAIGNS,connectionState:e().DISCONNECTED,listId:null,lists:[]}),this.state={..._},this.bindActions(h.Z),this.exportPublicMethods({getConnectionData:this.getConnectionData,isConnected:this.isConnected,isReady:this.isReady})}}const r=m.Z.createStore(l,"CampaignsConfigStore")},289461:function(S,u,t){t.d(u,{Z:()=>v});var m=t(941834),E=t.n(m),e=t(976003),o=t.n(e),g=t(347560),h=t(649315),p=t.n(h),_=t(953203),l=t.n(_),r=t(116762);function n(f,s,c){return s in f?Object.defineProperty(f,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):f[s]=c,f}const i={useSingleOptIn:!1,captchaEnabled:!1,captchaTheme:l().LIGHT,captchaAlignment:p().CENTER},d=()=>({initialCaptchaConfig:{captchaConfigSiteKey:"",captchaConfigSecret:""},captchaConfigSiteKey:"",captchaConfigSecret:"",captchaKeysChanged:!1,forms:(0,m.Map)({})}),a=f=>f||"unsaved_form";class C{onLoadInitialCaptchaData(s){let{captchaConfigSiteKey:c,captchaConfigSecret:P}=s;this.setState({initialCaptchaConfig:{captchaConfigSiteKey:c,captchaConfigSecret:P},captchaConfigSiteKey:c,captchaConfigSecret:P,captchaKeysChanged:!1})}onLoadInitialData(s){let[c,P]=s;if(c=a(c),c&&!this.isFormDataAvailable(c)){const L={initialConfig:P,verificationConfig:P,isDirty:!1};this.setState({forms:this.state.forms.set(c,L)})}}onToggleSingleOptIn(s){s=a(s);const c=this.state.forms.get(s);c&&this._onChangeProperty(s,"useSingleOptIn",!c.verificationConfig.useSingleOptIn)}onChangeSiteKey(s){this.setState({captchaConfigSiteKey:s}),this.setState({captchaKeysChanged:this._hasCaptchaKeysChanged()})}onChangeSecretKey(s){this.setState({captchaConfigSecret:s}),this.setState({captchaKeysChanged:this._hasCaptchaKeysChanged()})}onToggleCaptchaEnabled(s){s=a(s);const c=this.state.forms.get(s);if(!c)return;const{initialConfig:P,verificationConfig:L}=c,{captchaEnabled:U,useSingleOptIn:O}=L,D={captchaEnabled:!U};U&&O&&(D.useSingleOptIn=!1);const R={...L,...D};this.setState({forms:this.state.forms.set(s,{...c,verificationConfig:R,isDirty:!o()(R,P)})})}onSelectCaptchaTheme(s){let[c,P]=s;this._onChangeProperty(c,"captchaTheme",P)}onSelectCaptchaAlignment(s){let[c,P]=s;this._onChangeProperty(c,"captchaAlignment",P)}onSaveSuccess(s){s=a(s);const c=this.state.forms.get(s);c&&this.setState({initialCaptchaConfig:{captchaConfigSiteKey:this.state.captchaConfigSiteKey,captchaConfigSecret:this.state.captchaConfigSecret},captchaKeysChanged:!1,forms:this.state.forms.set(s,{...c,isDirty:!1,initialConfig:c.verificationConfig})})}onReset(s){s=a(s),this.state.forms.get(s)&&this.setState({captchaConfigSecret:this.state.initialCaptchaConfig.captchaConfigSecret,captchaConfigSiteKey:this.state.initialCaptchaConfig.captchaConfigSiteKey,captchaKeysChanged:!1,forms:this.state.forms.update(s,P=>({...P,verificationConfig:{...P.initialConfig},isDirty:!1}))})}getVerificationData(s){s=a(s);let c=this.state.forms.get(s);c||(c={initialConfig:{...i},verificationConfig:{...i},isDirty:!1});const{isDirty:P,verificationConfig:L}=c,{captchaEnabled:U,captchaAlignment:O,captchaTheme:D,useSingleOptIn:R,isCampaignsConnected:K}=L;return{captchaEnabled:U,captchaAlignment:O,captchaTheme:D,useSingleOptIn:R,isCampaignsConnected:K,isDirty:P}}isFormDataAvailable(s){return!!this.state.forms.get(s)}getCaptchaConfig(){const{captchaConfigSiteKey:s,captchaConfigSecret:c,captchaKeysChanged:P}=this.state;return{captchaConfigSecret:c,captchaConfigSiteKey:s,captchaKeysChanged:P}}constructor(){n(this,"_onChangeProperty",(s,c,P)=>{if(!i.hasOwnProperty(c))throw new Error("Invalid prop");s=a(s);const L=this.state.forms.get(s);if(!L)return;const{initialConfig:U,verificationConfig:O}=L,D={};D[c]=P;const R={...O,...D};this.setState({forms:this.state.forms.set(s,{...L,verificationConfig:R,isDirty:!o()(R,U)})})}),n(this,"_hasCaptchaKeysChanged",()=>{const{initialCaptchaConfig:s,captchaConfigSiteKey:c,captchaConfigSecret:P}=this.state,{captchaConfigSiteKey:L,captchaConfigSecret:U}=s;return L!==c||U!==P}),this.state=d(),this.bindActions(r.Z),this.exportPublicMethods({isFormDataAvailable:this.isFormDataAvailable,getVerificationData:this.getVerificationData,getCaptchaConfig:this.getCaptchaConfig})}}n(C,"config",{onSerialize(f){return{...f,forms:f.forms.toJS()}},onDeserialize(f){return{...f,forms:(0,m.fromJS)(f.forms)}}});const v=g.Z.createStore(C,"CampaignsVerificationStore")},757182:function(S,u,t){t.d(u,{Z:()=>_});var m=t(347560),E=t(850756),e=t(43594),o=t.n(e);const g={wasRemoved:!1,isConnecting:!1,isDirty:!1,showConnectionFailedError:!1,showConnectionFailedAlert:!1,showFormNameRequiredError:!1},h={googleDriveConfig:{},username:"",isConnected:!1,googleDriveSpreadsheetName:""};class p{onLoadFromSavedData(r){const n=r||{},{connectionState:i,username:d,socialConfig:a,spreadsheetName:C}=n,v={...h,isConnected:i===o().CONNECTED,username:d,googleDriveConfig:a,googleDriveSpreadsheetName:C};this.setState({...v,initialState:v})}onConnect(){this.setState({wasRemoved:!1,isConnecting:!0})}onConnectSuccess(r){const n=r.socialConfig;this.setState({isConnecting:!1,isConnected:!0,isDirty:!0,showConnectionFailedError:!1,username:n.profileUserName,googleDriveSpreadsheetName:"",googleDriveConfig:n})}onConnectFailure(){this.setState({showConnectionFailedAlert:!0,showConnectionFailedError:!0,isConnecting:!1})}onChangeSpreadsheetName(r){typeof r=="string"&&this.setState({isDirty:!0,googleDriveSpreadsheetName:r,showFormNameRequiredError:r.length===0})}onShowFormNameError(){typeof this.state.googleDriveSpreadsheetName=="string"&&this.setState({isDirty:!0,showFormNameRequiredError:this.state.googleDriveSpreadsheetName.length===0})}onDisconnect(){this.setState({wasRemoved:!0,isDirty:!0,googleDriveConfig:{},isConnected:!1,username:"",googleDriveSpreadsheetName:"",showFormNameRequiredError:!1})}onCloseDidFailAlert(){this.setState({showConnectionFailedAlert:!1})}onReset(){this.setState({...g,...this.state.initialState})}onSaveSuccess(){const{googleDriveConfig:r,username:n,isConnected:i,googleDriveSpreadsheetName:d}=this.state;this.setState({...g,initialState:{username:n,googleDriveConfig:r,isConnected:i,googleDriveSpreadsheetName:d}})}constructor(){this.state={...g,...h,initialState:h},this.bindActions(E.Z)}}const _=m.Z.createStore(p,"GoogleDriveConfigStore")},941982:function(S,u,t){t.d(u,{Z:()=>l});var m=t(347560),E=t(941834),e=t.n(E),o=t(774859),g=t(662835),h=t(43594),p=t.n(h);class _{onSavePreviousSettings(){const n=this.state.mailChimpConfig;this.setState({previousMailChimpConfig:n,mailChimpConfig:new g.Z})}onRestorePreviousSettings(){const n=this.state.previousMailChimpConfig;n&&this.setState({mailChimpConfig:n,previousMailChimpConfig:null})}onMailChimpValidationError(){this.setState({showMailingListRequiredError:!0})}onConnectMailChimp(){this.setState({wasRemoved:!1,isConnecting:!0})}onLoadSuccess(n){const{storeMailingListSettings:i}=n,d=g.Z.buildFromJson(i),a=d.isMailChimpConnected,{mailChimpLists:C}=d.mailChimpConnectionInfo,v=a&&(!C||C.length===0);this.setState({isDirty:!1,initialMailChimpConfig:d,mailChimpConfig:d,showNoMailChimpListsAlert:v})}onLoadFromSavedDataSuccess(n){let{savedData:i,lists:d=[]}=n;const a=i.connectionState===p().CONNECTED&&d.length===0,C=g.Z.buildFromJson({isMailChimpConnected:i.connectionState===p().CONNECTED,mailChimpListId:i.list,mailChimpUsername:i.username,mailChimpUseSingleOptIn:i.useSingleOptIn,mailChimpConnectionInfo:{mailChimpLists:d},mailChimpOAuthConfig:i.socialConfig});this.setState({isDirty:!1,isConnecting:!1,mailChimpConfig:C,initialMailChimpConfig:C,showNoMailChimpListsAlert:a})}onConnectFailure(){const{mailChimpConfig:n}=this.state,{mailChimpConnectionInfo:i}=n,d=i.merge({mailChimpError:!0}),a=n.merge({mailChimpConnectionInfo:d});this.setState({initialMailChimpConfig:a,mailChimpConfig:a})}onChangeListId(n){const{initialMailChimpConfig:i,mailChimpConfig:d}=this.state,a=d.merge({mailChimpListId:n});this.setState({isDirty:!e().is(a,i),mailChimpConfig:a,showMailingListRequiredError:!1})}onChangeUseSingleOptIn(n){const{initialMailChimpConfig:i,mailChimpConfig:d}=this.state,a=d.merge({mailChimpUseSingleOptIn:n});this.setState({isDirty:!e().is(a,i),mailChimpConfig:a})}onConnectSuccess(n){let i=this.state.mailChimpConfig.mailChimpListId;n.accountDetail.list&&(i=n.accountDetail.list);const d=n.lists,a=d.length===0,C=g.Z.buildFromJson({isMailChimpConnected:!0,mailChimpListId:i,mailChimpUsername:n.accountDetail.username,mailChimpUseSingleOptIn:!0,mailChimpConnectionInfo:{mailChimpLists:d},mailChimpOAuthConfig:n.socialConfig});this.setState({isDirty:!(n.accountDetail&&n.accountDetail.connected),isConnecting:!1,mailChimpConfig:C,showNoMailChimpListsAlert:a})}onDisconnectMailChimp(){const{mailChimpListId:n}=this.state.mailChimpConfig,i=g.Z.buildFromJson({mailChimpListId:n});this.setState({wasRemoved:!0,isDirty:!0,mailChimpConfig:i})}onSaveSuccess(){this.setState({isDirty:!1,showMailingListRequiredError:!1,initialMailChimpConfig:this.state.mailChimpConfig})}onUpdateFailure(){this.setState({showConnectionFailedAlert:!0,isConnecting:!1})}onCloseDidFailAlert(){this.setState({showConnectionFailedAlert:!1})}onCloseNoListsAlert(){this.setState({showNoMailChimpListsAlert:!1})}onReset(){const{initialMailChimpConfig:n}=this.state;this.setState({isDirty:!1,showMailingListRequiredError:!1,mailChimpConfig:n})}constructor(){const n=new g.Z;this.state={initialMailChimpConfig:n,mailChimpConfig:n,isDirty:!1,showConnectionFailedAlert:!1,isConnecting:!1,showMailingListRequiredError:!1,showNoMailChimpListsAlert:!1,previousMailChimpConfig:null,wasRemoved:!1},this.bindActions(o.Z)}}const l=m.Z.createStore(_,"MailChimpConfigStore")},192822:function(S,u,t){t.d(u,{Z:()=>p});var m=t(456903);const E="/api/external/GetMailChimpAccountDetail",e="/api/external/GetMailChimpLists",o=(_,l)=>{const r=_.title.toLowerCase(),n=l.title.toLowerCase();return r<n?-1:r>n?1:0},g=_=>{const l=_.data;return Object.keys(l).filter(r=>r!=="").map(r=>({value:r,title:l[r].title})).sort(o)},p={getAccountDetail(_){return m.default.get(E,{params:{connectedAccountId:_}})},getLists(_){return m.default.get(e,{params:{connectedAccountId:_}}).then(g)}}},662835:function(S,u,t){t.d(u,{Z:()=>h});var m=t(941834);const E=(0,m.Record)({mailChimpLists:[],mailChimpError:!1}),e=(0,m.Record)({externalAuthenticationId:null,oauthError:!1}),o={mailChimpUsername:"",mailChimpUseSingleOptIn:!0,isMailChimpConnected:!1,mailChimpListId:"",mailChimpConnectionInfo:new E,mailChimpOAuthConfig:null};class g extends(0,m.Record)(o){static buildFromJson(_){let{mailChimpUsername:l,mailChimpUseSingleOptIn:r,isMailChimpConnected:n,mailChimpListId:i,mailChimpConnectionInfo:d,mailChimpOAuthConfig:a}=_;return new g({mailChimpUsername:l||"",mailChimpUseSingleOptIn:!!r,isMailChimpConnected:!!n,mailChimpListId:i||"",mailChimpConnectionInfo:new E(d),mailChimpOAuthConfig:a?new e(a):null})}}const h=g}}]);

//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/sourcemaps/cec1a222f3bc025c/78628-27f1334f2da8ff7a-min.en-US.js.map