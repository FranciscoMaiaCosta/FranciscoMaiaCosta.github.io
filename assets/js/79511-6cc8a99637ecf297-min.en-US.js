"use strict";(globalThis.webpackChunkextract_css=globalThis.webpackChunkextract_css||[]).push([["79511"],{535025:function(D){D.exports={damaskInputOnWhite:"VxM9cMWYEQQ781JG",damaskInputOnWhiteBorder:"fzhD6wAWSKYQbCMi"}},874233:function(D){D.exports={buttonLink:"Bw_jnkV1Mqsh0c7I"}},140812:function(D){D.exports={disabledLabel:"GwOBSTAhUVcle5oA",disabledOption:"HgNXTJA60V4SqvcE",disabledSsoOption:"gNGv69xmMhcfSOz_",radioGroup:"TAPUBzkMnNoIbpQg",option:"gpRnP9vuy0s5adcK"}},494741:function(D,y,e){e.d(y,{Z:()=>G});var t=e(160553),l=e.n(t),u=e(174161),w=e(539799),d=e(908558),g=e(559143);const G=A=>{let{onBackClick:j,...T}=A;const{isSettingsModalEnabled:Y}=(0,g.ZP)();if(!Y){const E={...T,onSaveClick:T.onSave,onDiscardClick:T.onCancel};return u.createElement(w.Z,l()({onBackClick:j},E))}return u.createElement(d.ZP,T)}},186806:function(D,y,e){e.d(y,{Z:()=>T});var t=e(934951),l=e(338465),u=e(538312),w=e(516865),d=e(174161),g=e(191088),P=e(651780),G=e(568688),A=e(688405);function j(Y){let{productArea:E,...K}=Y;var W;const Q=(W=(0,P.Xu)())===null||W===void 0?void 0:W.accountManagerEmail,N=(0,d.useCallback)(()=>{G.U3.trackUserClicksEnterpriseButton({objectIdentifier:"contact-account-manager",productArea:E})},[E]);return d.createElement(l.Z,{mt:3,...K,border:"1px solid",borderColor:"gray.800",boxSizing:"content-box"},d.createElement(l.Z,{"data-testid":A.o,p:3,px:4},d.createElement(g.Z,{sx:{display:"block"}}),d.createElement(u.Z.Body,{my:1,fontWeight:600},d.createElement(t.T,{project:"enterprise"},"Looking to set this site or specific pages behind SSO?")),d.createElement(u.Z.Body,{my:1},d.createElement(t.T,{project:"enterprise"},"Contact your account manager to learn more about how to gain access to this Enterprise feature.")),Q&&d.createElement(w.Z,{as:"a",href:`mailto:${Q}`,onClick:N,mt:1},d.createElement(t.T,{project:"enterprise"},"Contact Account Manager"))))}const T=j},492626:function(D,y,e){e.d(y,{O:()=>ut});var t=e(174161),l=e(568688),u=e(828323),w=e(79637),d=e(362187),g=e(394954),P=e(685763),G=e(766400),A=e(538312),j=e(516865),T=e(482053),Y=e(896511),E=e(934951),K=e(755732),W=e(338465),Q=e(102258),N=e(365697),dt=e(765678),m=e(305981),pt=e(672702),ot=e(628143);const yt=H=>{switch(H){case N.ZF.OKTA:return m.T.oktaButtonPlaceholder;case N.ZF.AZURE:return m.T.azureButtonPlaceholder;case N.ZF.CLASSLINK:return m.T.classlinkButtonPlaceholder;case N.ZF.GOOGLE_SSO:return m.T.googleButtonPlaceholder;default:return""}},F=H=>{let{closeModal:M,settings:L,isOpen:x,addSso:z,collectionId:at,productArea:J}=H;const[C,B]=(0,t.useState)(""),[st,nt]=(0,t.useState)(""),V=()=>{M(),B(""),nt("")},r=async()=>{const I=L.find(it=>it.id===C),X=await(0,pt.hr)({buttonLabel:st,ssoSettingsId:C,...at?{collectionId:at}:{}});l.U3.trackUserModifiesSsoProtections({action:l.aU.ADD,objectValue:(I==null?void 0:I.loginMethod)||C,productArea:J}),z(X),V()},mt=(0,t.useCallback)(()=>{l.U3.trackUserClicksEnterpriseLink({productArea:J,objectIdentifier:"sso-credentials-link"})},[J]),k=I=>{B(I);const X=L.filter(it=>it.id===I);X.length&&nt(yt(X[0].loginMethod))};return t.createElement(P.Z.Transition,null,x&&t.createElement(P.Z,{onRequestClose:V},t.createElement(P.Z.Overlay,null),t.createElement(P.Z.Position,{position:"center"},t.createElement(P.Z.Dialog,null,t.createElement(W.Z,{tabIndex:0,pt:5,pb:6,px:6,width:"sizes.750",display:"flex",sx:{justifyContent:"center",flexDirection:"column"}},t.createElement(T.Z,{justifyContent:"space-between"},t.createElement(j.Z.Tertiary,{size:"small",onClick:V},m.T.cancel),t.createElement(j.Z.Primary,{size:"small",disabled:st.length===0||C.length===0,onClick:r,"data-test":"save-sso-protection"},m.T.saveForm)),t.createElement(A.Z.Title,{as:"h2",mt:4,mb:0},m.T.selectSso),t.createElement(A.Z.Body,{mb:4,color:"gray.300",fontWeight:"medium"},t.createElement(E.T,{ssoManagerLink:t.createElement(dt.Z,{to:"/config/settings/sso-manager",onClick:mt},t.createElement(E.T,{project:"enterprise"},"SSO Credentials Settings")),project:"enterprise"},"The SSO credentials selected will ensure only authorized users can gain access. New SSO credentials can be added in {ssoManagerLink}.")),t.createElement(A.Z.Label,{mb:1},m.T.ssoCredentials),t.createElement(Q.Z,{onChange:k,placeholder:"Select a saved SSO",placement:"bottom",value:C,variant:"floating","data-test":"select-sso-protection-dropdown"},L.map(I=>t.createElement(Q.Z.Option,{value:I.id},t.createElement(T.Z,{flexDirection:"column"},t.createElement(A.Z.Body,{mt:0,mb:1,fontWeight:"semibold"},I.friendlyName),t.createElement(A.Z.Caption,{m:0,color:"gray.100"},N.Lo[I.loginMethod]))))),t.createElement(ot.M,{value:st,onChange:nt,isTextArea:!1,label:m.T.buttonLabel,caption:m.T.buttonLabelCaption,isButtonLabelInput:!0,"data-test":"friendly-name-input"}))))))};var Pt=e(874233),Tt=e.n(Pt),vt=e(202797),Ct=e(688405);const ft=H=>{let{collectionId:M,productArea:L}=H;const{ssoSettings:x,isLoading:z,error:at,updateCount:J}=(0,t.useContext)(vt.W),[C,B]=(0,t.useState)({}),[st,nt]=(0,t.useState)(!0),[V,r]=(0,t.useState)(!!at),[mt,k]=(0,t.useState)(!1),I=Object.values(C).reduce((p,R)=>({...p,[R.ssoSettingsId]:!0}),{}),X=Object.values(x).filter(p=>!I[p.id]),it=Object.keys(C).length===0?m.T.selectSso:m.T.additionalSso,h=(0,t.useCallback)(()=>{l.U3.trackUserClicksEnterpriseLink({productArea:L,objectIdentifier:"sso-credentials-link"})},[L]);(0,t.useEffect)(()=>{let p=!0;return(async()=>{try{const q={collectionId:M,onlyWebsiteLevel:!M};let _=await(0,pt.X1)(q);if(p){nt(!1),_=_.filter(St=>x[St.ssoSettingsId]);const rt=_.reduce((St,gt)=>({...St,[gt.id]:gt}),{});B(rt)}}catch{p&&r(!0)}})(),()=>{p=!1}},[M,x]);const bt=p=>{B(R=>({...R,[p.id]:p})),J({ssoSettingsId:p.ssoSettingsId,increment:1,collectionId:M})},lt=p=>{const R=x[p.ssoSettingsId];l.U3.trackUserModifiesSsoProtections({action:l.aU.UPDATE,productArea:L,objectValue:R.loginMethod}),B(q=>({...q,[p.id]:p}))},At=(p,R)=>{const q=x[R];l.U3.trackUserModifiesSsoProtections({action:l.aU.DELETE,productArea:L,objectValue:q.loginMethod}),B(_=>{const rt={..._};return delete rt[p],{...rt}}),J({ssoSettingsId:R,increment:-1,collectionId:M})},Ot=(0,t.useCallback)(()=>{k(!0)},[]),It=()=>t.createElement(t.Fragment,null,Object.keys(C).length>0&&t.createElement(g.Z,{sx:{cursor:"auto"},mt:2},t.createElement(A.Z.Label,{my:2,color:"gray.100"},m.T.ssoDetails),t.createElement(u.Z,{allowMultipleItemsOpen:!0},Object.values(C).map(p=>t.createElement(K.J,{...p,...x[p.ssoSettingsId],key:p.id,protectionId:p.id,updateSso:lt,deleteSso:At,setShowError:()=>r(!0)})))),Object.keys(x).length?t.createElement(t.Fragment,null,t.createElement(F,{closeModal:()=>k(!1),settings:X,isOpen:mt,addSso:bt,collectionId:M,productArea:L}),X.length>0&&t.createElement(j.Z.Tertiary,{onClick:Ot,className:Tt().buttonLink,mt:2},it)):t.createElement(w.Z,{layout:"row",mt:2,title:m.T.noCredentialsTitle,body:t.createElement(E.T,{managerPanel:t.createElement(Y.Z,{to:"/config/settings/sso-manager",onClick:h},t.createElement(E.T,{project:"enterprise"},"SSO Credentials settings panel")),project:"enterprise"},"You can add new SSO credentials within the {managerPanel}.")}));return t.createElement(T.Z,{"data-testid":Ct.k,flexDirection:"column"},t.createElement(P.Z.Transition,null,V&&t.createElement(P.Z,{onRequestClose:()=>r(!1)},t.createElement(P.Z.Overlay,null),t.createElement(P.Z.Position,{position:"center"},t.createElement(d.Z,{title:m.T.errorTitle,message:m.T.errorMessage,buttons:[()=>t.createElement(d.Z.Button,{key:"cancel",onClick:()=>r(!1)},m.T.close)]})))),z||st?t.createElement(G.Z,{mt:4}):It())},ut=H=>{let{collectionId:M,productArea:L}=H;return t.createElement(vt.oA,null,t.createElement(ft,{collectionId:M||"",productArea:L}))}},688405:function(D,y,e){e.d(y,{k:()=>t,o:()=>l});const t="sso-picker-wrapper",l="sso-locked-wrapper"},402310:function(D,y,e){e.d(y,{I:()=>l,W:()=>t});const t="site_published_confetti",l="congratulations-modal"},320920:function(D,y,e){e.d(y,{Z:()=>j});var t=e(174161),l=e(685763),u=e(964364),w=e(766400),d=e(180852),g=e(567713);const P=e.p+"blogging-for-my-business-desktop-28e7ec5e8ceb39b2.jpg",G=e.p+"blogging-for-my-business-mobile-d48ea01fe103a7c2.jpg",j=T=>{let{children:Y,onClose:E,customNavigation:K,closeOnBackButton:W=!0,...Q}=T;const[N]=(0,t.useState)(()=>new d.Z.History),{platform:dt}=(0,t.useContext)(g.Z.Context),m=dt==="desktop"?P:G;return t.createElement(l.Z,{onRequestClose:E,closeOnBackButton:W,"data-id":Q["data-id"]},t.createElement(l.Z.Overlay,null),t.createElement(l.Z.Position,{position:"center"},t.createElement(l.Z.Dialog.ResponsiveProvider,null,t.createElement(l.Z.Dialog,null,t.createElement(d.Z.SplitScreen,null,t.createElement(d.Z.SplitScreen.Panel,null,t.createElement(d.Z,{currentStepId:"pageless-wizard-1",onRequestStep:()=>{},history:N,closeButtonProps:{onClick:E},stepCount:1},t.createElement(d.Z.Step,{id:"pageless-wizard-1",nextStepId:"pageless-wizard-2",stepNumber:1,hideNavigation:!K,hideProgress:!0,hideNext:!0,hideBack:!0,...K?{renderNavigation:()=>t.createElement("div",{style:{pointerEvents:"all"}},K)}:{}},Y))),t.createElement(d.Z.SplitScreen.Panel,{backgroundColor:"gray.900",overflow:"hidden",display:"flex"},t.createElement(u.Z,{src:m,sx:{display:"block",width:"100%",objectFit:"cover"},fallback:t.createElement(w.Z,{m:"auto"})})))))))}},568800:function(D,y,e){e.d(y,{K:()=>t,r:()=>l});var t=function(u){return u.PUBLIC="PUBLIC",u.PASSWORD="PASSWORD",u.PRIVATE="PRIVATE",u.SSO="SSO",u}({}),l=function(u){return u.PUBLIC="none",u.PASSWORD="password",u.PRIVATE="owner_login",u.SSO="sso",u}({})},726789:function(D,y,e){e.r(y),e.d(y,{default:()=>re});var t=e(174161),l=e(559409),u=e.n(l),w=e(931229),d=e.n(w),g=e(651780),P=e(374335),G=e.n(P),A=e(666244),j=e(436679),T=e(211489),Y=e(621106),E=e(35045),K=e(834105),W=e(829499),Q=e(46512),N=e(814710),dt=e(284443),m=e.n(dt),pt=e(965885),ot=e(721247),yt=e(387582),F=e(568688),Pt=e(597001),Tt=e(494741),vt=e(753941),Ct=e(326499),ft=e(896511),ut=e(338465),H=e(482053),M=e(526974),L=e(366010),x=e(140812),z=e.n(x),at=e(492626),J=e(186806),C=e(516865),B=e(538312),st=e(742054),nt=e(5175),V=e(685763),r=e(714487),mt=e(663634);const k={close:(0,r.t)("Close",null,{project:"enterprise"}),enterprise:(0,r.t)("Enterprise",null,{project:"enterprise"}),modalTitle:(0,r.t)("Enhanced Security with Squarespace Enterprise",null,{project:"enterprise"}),modalDescription:(0,r.t)("Customize who can view websites and pages by requiring SSO authentication. Available only on Enterprise plans.",null,{project:"enterprise"}),talkToUs:(0,r.t)("Talk to us",null,{project:"enterprise"})},I="https://www.squarespace.com/enterprise?source=cms",X=()=>!(0,g._X)()&&(0,mt.cr)("disabled-sso-visibility"),it=()=>{const[a,s]=(0,t.useState)(!1),n=()=>{s(!0),F.U3.trackUserClicksEnterpriseButton({objectIdentifier:"open-sso-feature-gate-modal",productArea:F.Wl.SITE_AVAILABILITY})},i=()=>{s(!1)},o=()=>{F.U3.trackUserClicksEnterpriseLink({objectIdentifier:"sso-contact-sales",productArea:F.Wl.SITE_AVAILABILITY})};return t.createElement(t.Fragment,null,t.createElement(C.Z.Base,{onClick:n,ml:4,color:"blue.100",sx:{"&::after":{content:'""',height:"2px",backgroundColor:"blue.100",position:"absolute",bottom:0,left:0,width:0,transition:"width 0.3s linear"},"&:focus::after, &:hover::after":{width:"calc(100% + 16px)"},minHeight:"22px"}},t.createElement(nt.Z,{size:"sizes.150",color:"blue.100",sx:{marginRight:"6px"}}),k.enterprise),t.createElement(V.Z.Transition,null,a&&t.createElement(V.Z,{onRequestClose:i},t.createElement(V.Z.Overlay,null),t.createElement(V.Z.Position,{position:"center"},t.createElement(V.Z.Dialog,null,t.createElement(ut.Z,{pb:6,pt:5,px:6,tabIndex:0,width:"sizes.700"},t.createElement(C.Z.Tertiary,{mb:4,onClick:i},k.close),t.createElement(B.Z.Title,{py:1},k.modalTitle),t.createElement(B.Z.Subtitle,{color:"gray.300",pb:4,pt:3,m:0},k.modalDescription),t.createElement(st.Yz.Primary,{size:"large",width:"100%",onClick:o,as:"a",href:`${I}#contact-block`,target:"_blank"},k.talkToUs)))))))};var h=e(934951),bt=e(747002),lt=e(897595),At=e(283635);class Ot extends At.Z{trackUserSiteVisibilityEvent(s){let{object_identifier:n,...i}=s;return super.track({...i,event_name:"UserChangesSiteVisibility",action:"save",object_type:"web",object_identifier:n||"site-availability-panel",object_display_name:"Site Visibility"})}updateSiteVisibility(s){let{domainType:n,billingPeriod:i,hasFreeDomainPromo:o,isPublishModalShown:c,siteTitle:v,isSiteTitleCustom:Z,siteVisibilityStatus:U,websitePlanType:f,websiteType:O,customObjectIdentifier:b}=s;return this.trackUserSiteVisibilityEvent({billing_period:i,domain_type:n,has_free_domain_promo:o,is_custom_site_title:Z,is_publish_modal_shown:c,site_title:v,site_visibility_status:U,website_type:O,plan_type:f,...b?{object_identifier:b}:{}})}constructor(){super("UserSiteVisibility",{event_owner_team:"cms",product_area:"panel",event_source:"web",actor:"user",custom_schema_name:"CMSDev"})}}const It=new Ot;var p=e(706516),R=e(633910),q=e(100666),_=e(180852),rt=e(394954),St=e(906046),gt=e(47362),Wt=e(320920),S=e(568800),xt=e(361282),Rt=e(161381),Kt=e(868192),Nt=e(456903);const Ft=a=>t.createElement("a",{href:a,target:"_blank"},t.createElement(h.T,{project:"apps.App"},"Learn more")),Lt=a=>{let{sx:s}=a;const[n,i]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{var o;!((o=W.default.getState())===null||o===void 0)&&o.displayAiContentDisclaimer?i(!0):Nt.default.get("/api/blueprint/session").then(c=>{c!=null&&c.data&&i(!0)}).catch(()=>{i(!1)})},[]),n?t.createElement(B.Z.Caption,{"data-testid":"ai-notice",sx:{display:"block",...s}},t.createElement(h.T,{project:"apps.App",learnMoreLink:Ft(Kt.USING_SQUARESPACE_AI_ABS)},"Your site may contain content generated by third party AI. You are responsible for any content you publish. {learnMoreLink}")):null},zt=a=>{let{isPublishing:s,siteVisibility:n,onClose:i,onPublish:o,domainName:c,productArea:v,router:Z,location:U}=a;const f=n===S.K.PUBLIC&&!s;return(0,t.useEffect)(()=>{(0,lt.xF)({productArea:v})},[v]),t.createElement(V.Z.Transition,null,!f&&t.createElement(Wt.Z,{closeOnBackButton:!1,customNavigation:t.createElement(C.Z.Primary,{size:"large",onClick:()=>{(0,lt.AT)({productArea:v,identifier:"publish-button"}),o()},disabled:s},s?t.createElement(h.T,{project:"apps.App"},"Publishing..."):t.createElement(h.T,{project:"apps.App"},"Publish")),onClose:i},t.createElement(_.Z.Step.Content,null,t.createElement(_.Z.Step.Content.Title,null,t.createElement(h.T,{project:"apps.App"},"Publish your site")),t.createElement(rt.Z,null,t.createElement(B.Z.Subtitle,{color:"gray.300",mt:{_:2,"mobile-*":3},mb:{_:3,"mobile-*":4},mr:3},t.createElement(h.T,{project:"apps.App"},"Start selling by making your site visible online.")," ",t.createElement("a",{href:"",onClick:O=>{O.preventDefault(),(0,lt.AT)({productArea:v,identifier:"more-options"}),i();const et=U.pathname.startsWith("/commerce")?{pathname:"/settings/site-visibility",state:{backTo:xt.ZP.getBackgroundLocation(Z).pathname}}:"/settings/site-visibility";Z.push(et)}},t.createElement(h.T,{project:"apps.App"},"More options."))),t.createElement(St.Z,{backgroundColor:"gray.900",height:"sizes.250",py:0,px:2,body:t.createElement(gt.Z,{readOnly:!0,value:c,color:"gray.100",my:2}),exteriorAccessory:t.createElement(B.Z.Body,{m:0,color:"gray.300"},t.createElement(h.T,{project:"apps.App"},"Private"))}),t.createElement(Lt,{sx:{mt:2}})))))},kt=(0,Rt.Z)(zt);var Bt=e(305981),wt=e(154440),Gt=e(535025),Yt=e.n(Gt),Ht=e(62882),Xt=e(39957),$t=e(402310);function tt(a,s,n){return s in a?Object.defineProperty(a,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[s]=n,a}const Qt=t.lazy(()=>Promise.all([e.e("78636"),e.e("81807")]).then(e.bind(e,960496))),ht=a=>a.showOwnerLogin?S.K.PRIVATE:a.initialHasPassword?S.K.PASSWORD:a.isWebsiteInTrial?S.K.PRIVATE:a.protectionType===S.r.SSO?S.K.SSO:S.K.PUBLIC;class Jt extends t.Component{static getDerivedStateFromProps(s,n){let{siteVisibility:i}=n;return{siteVisibility:i||ht(s),initialSiteVisibility:ht(s)}}componentDidMount(){this.setIsSiteTitleCustom()}setSiteVisibility(s){const{isWebsiteInTrial:n}=this.props;s===S.K.PUBLIC&&n||this.setState({siteVisibility:s})}checkIsDirty(){const{initialSiteVisibility:s,siteVisibility:n,hasPassword:i,password:o}=this.state;return n===S.K.SSO&&!(0,g.$h)()?!1:s!==n||i&&o.length>0}renderPasswordOption(){const{siteVisibility:s,password:n,passwordFocused:i,showPasswordErrorMessage:o}=this.state,{initialHasPassword:c,websiteType:v}=this.props,{enter:Z,leave:U}=ot.CSSTransitionGroupPresets.ExpandCollapse.transitions,f=n||(c&&!i?yt.Z.PASSWORD_MASK:""),O=s===S.K.PASSWORD&&![m().PARKING_PAGE,m().COVER_PAGE].includes(v);return t.createElement(t.Fragment,null,t.createElement(h.T,{project:"apps.App"},"Anyone with the password can see this site."),t.createElement(ot.CSSTransitionGroup,{key:"site-wide-password",transitions:{enter:Z,leave:U}},O&&t.createElement(ut.Z,{width:{default:"253px","mobile-*":"100%"}},t.createElement(pt.Input,{className:Yt().damaskInputOnWhite,type:"password",placeholder:(0,r.t)("Password",null,{project:"apps.App"}),onFocus:()=>this.setPasswordFocused(!0),onBlur:()=>this.setPasswordFocused(!1),onChange:this.handlePasswordChange,value:f,errorMessage:o?(0,r.t)("Please enter a password",null,{project:"apps.App"}):void 0}))))}renderSsoOption(s){const{siteVisibility:n}=this.state,{enter:i,leave:o}=ot.CSSTransitionGroupPresets.ExpandCollapse.transitions,c=n===S.K.SSO,v=()=>{F.U3.trackUserClicksEnterpriseLink({productArea:F.Wl.SITE_AVAILABILITY,objectIdentifier:"sso-credentials-link"})},Z=s?"50%":"100%";return t.createElement(ut.Z,{sx:{cursor:"initial",opacity:Z}},s?t.createElement(h.T,{project:"enterprise"},"Only authorized single sign-on (SSO) users can see the site."):(0,g.X3)()?t.createElement(h.T,{project:"enterprise"},"Site must be activated before SSO protection can be used."):t.createElement(h.T,{managerPanel:(0,g.$h)()?t.createElement(ft.Z,{to:"/config/settings/sso-manager",onClick:v},t.createElement(h.T,{project:"enterprise"},"SSO Credentials settings panel")):t.createElement(h.T,{project:"enterprise"},"SSO Credentials settings panel"),project:"enterprise"},"Anyone authorized to login with the selected SSO can view the site. New SSO options can be set up and managed in the {managerPanel}."),t.createElement(ot.CSSTransitionGroup,{key:"sso-settings",transitions:{enter:i,leave:o}},c?(0,g.$h)()?t.createElement(at.O,{key:"picker",productArea:F.Wl.SITE_AVAILABILITY}):t.createElement(J.Z,{key:"lockedMessage",productArea:F.Wl.SITE_AVAILABILITY}):null))}getSsoOptions(){const s=(0,g.$h)()||(0,g._X)(),{disable:n}=this.props,i={isDisabled:!0,labelClassList:z().disabledLabel,optionClassList:z().disabledSsoOption};return s?[{value:S.K.SSO,label:t.createElement(t.Fragment,null,Bt.T.ssoProtected),description:this.renderSsoOption(!1),...(n==null?void 0:n.sso)&&this.disabledOptions}]:X()?[{value:S.K.SSO,label:t.createElement(H.Z,{alignItems:"center"},t.createElement("span",{style:{opacity:"50%"}},Bt.T.ssoProtected),t.createElement(it,null)),description:this.renderSsoOption(!0),...i}]:[]}renderSiteVisibilitySelector(){const{siteVisibility:s}=this.state,{disable:n}=this.props,i=[{value:S.K.PUBLIC,label:(0,r.t)("Public",null,{project:"apps.App"}),description:(0,r.t)("Anyone can see the site.",null,{project:"apps.App"}),...(n==null?void 0:n.public)&&this.disabledOptions},{value:S.K.PASSWORD,label:(0,r.t)("Password Protected",null,{project:"apps.App"}),description:this.renderPasswordOption()},{value:S.K.PRIVATE,label:(0,r.t)("Private",null,{project:"apps.App"}),description:(0,r.t)("Only contributors can see the site.",null,{project:"apps.App"})}];return t.createElement("div",{className:z().radioGroup},t.createElement(pt.RadioGroup,{value:s,onChange:o=>{this.setSiteVisibility(o)},options:[...i,...this.getSsoOptions()]}))}renderCongratulationsModal(){const{isWebsiteInTrial:s,onCloseModal:n}=this.props,{showCongratulationsModal:i,isSiteTitleCustom:o}=this.state;return s||!i?null:t.createElement(t.Suspense,{fallback:null},t.createElement(Qt,{domainName:this.getDomainName(),hasAddedSiteTitle:o??!1,onClose:()=>{n==null||n(),this.setState({showCongratulationsModal:!1})}}))}renderPanel(){const{saving:s}=this.state,n=this.checkIsDirty();return t.createElement(Pt.Z,{isSaving:s},t.createElement(Tt.Z,{onCancel:()=>this.resetChanges(),onSave:()=>this.saveChanges(),isDirty:n,isSaving:s}),t.createElement(Ht.Z,null,i=>t.createElement(Xt.O,i)),t.createElement(vt.Z,null,(0,r.t)("Site Availability",null,{project:"apps.App"})),t.createElement(Ct.Z,null,(0,r.t)("Control who your site is available to.",null,{project:"apps.App"})),this.props.children,this.renderSiteVisibilitySelector(),t.createElement(Lt,{sx:{mt:5}}))}renderModal(){const{siteVisibility:s,saving:n,showCongratulationsModal:i}=this.state,{onCloseModal:o,productArea:c}=this.props;return!o||!c||i?null:t.createElement(t.Fragment,null,t.createElement(kt,{productArea:c,domainName:this.getDomainName(),siteVisibility:s,isPublishing:n,onPublish:()=>{this.saveChanges(S.K.PUBLIC)},onClose:o}))}render(){const{onCloseModal:s}=this.props;return t.createElement(t.Fragment,null,s?this.renderModal():this.renderPanel(),this.renderCongratulationsModal())}constructor(s){super(s),tt(this,"disabledOptions",void 0),tt(this,"resetChanges",()=>(this.setState({hasPassword:this.props.initialHasPassword,password:"",passwordFocused:!1,initialSiteVisibility:ht(this.props),saving:!1},()=>{this.setSiteVisibility(this.state.initialSiteVisibility)}),L.Z.updateBanner(),Promise.resolve())),tt(this,"sendSiteVisibilityV2Metrics",o=>{const{siteVisibility:c,isSiteTitleCustom:v}=this.state,{siteTitle:Z,websiteType:U,primaryDomainType:f,domainDiscountStatus:O,websitePlanType:b,billingPeriod:et,productArea:$}=this.props;return It.updateSiteVisibility({siteVisibilityStatus:c.toLowerCase(),isPublishModalShown:o,hasFreeDomainPromo:O==null?void 0:O.isAvailable,siteTitle:Z,isSiteTitleCustom:v,websiteType:(0,R.Z)(U),websitePlanType:b,billingPeriod:et,domainType:(0,p.Z)(f),customObjectIdentifier:$})}),tt(this,"saveChanges",o=>{const{siteVisibility:c,initialSiteVisibility:v}=this.state,{tutorialsCompleted:Z,onSave:U,productArea:f,onCloseModal:O}=this.props,b=o||c;this.setState({saving:!0});let et=!1,$,Et;if(b===S.K.PASSWORD){if($=this.state.password,Et=this.state.hasPassword,$.length===0){this.setState({saving:!1,showPasswordErrorMessage:!0});return}}else b===S.K.PRIVATE&&(et=!0);const Dt=S.r[b];let ct=!1;return v!==b&&b===S.K.PUBLIC&&((0,M.broadcastGuidanceTaskCompletion)({taskType:M.TaskType.PUBLISH_SITE}),Z.includes($t.W)||(ct=!0)),E.default.save({hasPassword:Et,password:$,showOwnerLogin:et,protectionType:Dt}).then(()=>{var Mt;this.setState({saving:!1,passwordFocused:!1,password:""}),this.setState({showCongratulationsModal:ct}),ct||O==null||O(),v!==b&&((0,lt.Mt)(b.toLowerCase(),f),this.sendSiteVisibilityV2Metrics(ct),(0,wt.oS)()),!((Mt=window)===null||Mt===void 0)&&Mt.FS&&window.FS.event("Website - Site Availability Change",{from:v,to:b}),U==null||U()})}),tt(this,"handlePasswordChange",o=>{this.setState({password:o,showPasswordErrorMessage:!1})}),tt(this,"setPasswordFocused",o=>{this.setState({passwordFocused:o})}),tt(this,"setIsSiteTitleCustom",()=>q.Z.getIsSiteTitleCustom().then(o=>{var c;return this.setState({isSiteTitleCustom:(c=o.data)===null||c===void 0?void 0:c.value})}).catch(console.error)),tt(this,"getDomainName",()=>{const{primaryDomain:o,identifier:c}=this.props;return o||(0,bt.zv)(c)});const{initialHasPassword:n}=s,i=ht(s);this.state={hasPassword:n,password:"",passwordFocused:!1,initialSiteVisibility:i,siteVisibility:i,saving:!1,showPasswordErrorMessage:!1,showCongratulationsModal:!1},this.disabledOptions={isDisabled:!0,labelClassList:z().disabledLabel,optionClassList:z().disabledOption,...s.tooltip&&{wrappedComponent:s.tooltip}}}}const Ut=Jt;var ce=e(101311),qt=e(995821),_t=e(506739),te=e(348969),Vt=e(79637),ee=e(421190),se=e(170379);const ne=a=>{let{children:s}=a;return t.createElement(te.Z,{className:z().option,title:(0,r.t)("Upgrade to publish",null,{project:"apps.App"}),description:(0,r.t)("You must upgrade your trial to a paid site to make it public. Upgrade using the link above.",null,{project:"apps.App"})},s)},ie=()=>{const{push:a}=(0,ee.Z)();return t.createElement(C.Z.Primary,{onClick:()=>a(qt.Z[_t.Z.TRIAL_UPGRADE_PLAN]),size:"medium",sx:{width:{_:"auto","mobile-*":"100%"}}},t.createElement(h.T,{project:"scripts-v6.domains"},"Upgrade to Publish"))},oe=()=>{const[a,s]=(0,t.useState)(!1);return(0,g.RN)()?t.createElement(t.Fragment,null,t.createElement(Vt.Z,{title:(0,r.t)("Activate to publish",null,{project:"apps.App"}),body:(0,r.t)("Activate your trial site to make it public.",null,{project:"apps.App"}),buttons:[t.createElement(C.Z.Tertiary,{onClick:()=>s(!0)},t.createElement(h.T,{project:"apps.App"},"Activate"))]}),t.createElement(se.Z,{isOpen:a,onClose:()=>s(!1)})):t.createElement(Vt.Z,{title:(0,r.t)("No Permission",null,{project:"apps.App"}),body:(0,r.t)("A Team Admin must activate this trial site to make it public.",null,{project:"apps.App"})})};var Zt=e(28589),ae=e(913170),jt=e.n(ae);const le=a=>{const s=a.isWebsiteInTrial,n={public:s,sso:(0,g.A8)()};return(0,g.A8)()?t.createElement(Ut,{...a,disable:n},s&&oe()):t.createElement(Ut,{...a,disable:n,tooltip:ne},s&&ie())},re=G()({componentDidConnect(){const{domainDiscountStatus:a}=T.Z.getState(),{domainsByName:s}=A.default.getState(),{primaryDomain:n}=E.default.getState();a||Y.Z.loadDiscountStatus.defer(),(!s||!s[n])&&j.default.load(),Zt.ZP.getOrLoadByPlanType(jt().WEBSITE)},getStores(){return[K.Z,E.default,W.default,A.default,T.Z,Zt.ZP]},getPropsFromStores(){const{hasPassword:a,primaryDomain:s,websiteType:n,siteTitle:i,showOwnerLogin:o,identifier:c,protectionType:v}=E.default.getState(),{tutorialsCompleted:Z}=W.default.getState(),{domainDiscountStatus:U}=T.Z.getState(),{plan:f}=Zt.ZP.getByPlanType(jt().WEBSITE)??{},O=f==null?void 0:f.displayName,b=f==null?void 0:f.periodDisplayName,{domainsByName:et={}}=A.default.getState(),$=et[s==null?void 0:s.replace("www.","")],Et=($==null?void 0:$.type)||d().APPLICATION,{siteStatus:Dt}=K.Z.getState(),ct=Dt===u().TRIAL;return{initialHasPassword:a,hasPassword:a,primaryDomain:s,primaryDomainType:Et,websiteType:n,siteTitle:i,isWebsiteInTrial:ct,showOwnerLogin:o,identifier:c,tutorialsCompleted:Z,websitePlanType:O,billingPeriod:b,domainDiscountStatus:U,protectionType:v}}},le)}}]);

//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/sourcemaps/a7275c47fba842ca/79511-6cc8a99637ecf297-min.en-US.js.map