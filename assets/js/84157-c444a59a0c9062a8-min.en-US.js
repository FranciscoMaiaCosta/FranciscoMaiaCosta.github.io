"use strict";(globalThis.webpackChunkextract_css=globalThis.webpackChunkextract_css||[]).push([["84157"],{793255:function(T){T.exports={button:"Dm0_F2yq78cVhD2y",unavailable:"s1SOABtne4wGTXsX",deprecatedButton:"NB6YkBqdIdMvmIOC"}},158775:function(T){T.exports={textAreaField:"iK2dpu0xbxYxqf4m",previewText:"wzAAZekXRQ0C0jbk",blurb:"M5QRSF20MXYn_5JM",email:"XPQh3n0es0AQsn4Q"}},143292:function(T){T.exports={bounce:"zP4U9L5GuH4X0s7s"}},548133:function(T){T.exports={}},354489:function(T){T.exports={popOverZIndex:"M6QamVudBRMrM24r",formView:"UNwCunU4UnADSxdM",closeAction:"WIHYStyNLTAoK_yP",upperCase:"kbW6Pj4bnX4UUGhf",flyoutTitle:"yEL4a45t0EUKfAed",flyoutTitleColor:"zw2xxo3p5oU11E0T",fullSlugPrefix:"NnKD1WC8gZwecQfE",flyoutTitleSelected:"UEULH2X1dps2GIGG",fixedWidth:"x7QwhpTlcKUKkmGB",hideDetailedEditor:"OgP1mqGF3Cw5bKs3",showEditor:"E95gfeR0i0v17Jhy",buttonAlignment:"Ho9nKOPrIQTu7JPN",childCategory:"L6maWBoEK0jqb6kz",category:"eS8NOw2h5cosX0Fm",deleteButton:"q1irceAg9X4fOaGo",categoryPopover:"NGsxNsvMBZHZ6yGn",dragPreview:"AcqJaJwKaoohgNMp",expandIcon:"zOn9nk9x3Uf9GXtB",dragIcon:"h6v9w1tQLD4qHO0N",expandCollapse:"n0o76k3SD3UVrD8Q",dragHandleContainer:"BS3bqw1VdUIOWVw4",rotateChevron:"cCJZnICz6EImhGOC",disclosure:"mu4wkx7qjgWvDNE8",openDisclosure:"r0MpeexpqBE3HYhQ",hovered:"fO4NiyDcLaGkcqAx",separator:"ZwS9efcID9A51ix8",addButton:"bUEkSxc7z8sFGVQu",tailDropTarget:"Yx0uKuG6OIosYkv_",grabbing:"_ScZd7pIYjTMgBWo",reorderAfter:"di4rjYlJ1XkuBu41",reorderBefore:"ZcBvu4jOPu8VhSlw",iconContainer:"eYAW3nZUvtAtgy07",disabledButton:"ZqlvokxHccckP4aE",addIcon:"i96_2F9Thsj9o9aG",addIconHeader:"CNyjiiGpDx8rigaM",hidden:"dDTu4U4kyRYs9sWc",pointer:"XeKozRy_U0cPC0e8",translucent:"zVkgIWLsSvrOnxKF",filterPadding:"uCz8JXmbRsbgieJz",addContainer:"vEHOZqEC8kOXuPjg",inputWidth:"Jh2ng1HWS4u93FV1",dragLayerStyle:"uvQZ2iLH88q0xOpI",flyoutWidth:"y3JPg2NmJRsqJD4K",flyoutHeader:"Naccc6hLyk33t4Wb",showError:"a0Hy32YJ56IA3c7Q",showLoading:"veA6974OpUwXFj8c",editPanelMargin:"fDb2TOZglPIbFeBe",popupStyles:"arOWMe1f8_kq25cY",searchContainer:"TBqb95snjToa38Xg"}},238599:function(T){T.exports={}},627343:function(T){T.exports={}},639632:function(T){T.exports={}},661787:function(T,t,e){e.d(t,{$:()=>i});var n=e(174161);const o=(0,n.lazy)(()=>Promise.all([e.e("3017"),e.e("60164")]).then(e.bind(e,486514))),i=r=>n.createElement(n.Suspense,{fallback:null},n.createElement(o,r))},15294:function(T,t,e){e.r(t),e.d(t,{GeneratedResponseStatus:()=>n.O,isCampaignsPayload:()=>o.Gw,isPageEditorTrackingPayload:()=>o.H8,isProductComposerTrackingPayload:()=>o.hm});var n=e(734932),o=e(604041)},156286:function(T,t,e){e.d(t,{w:()=>h});var n=e(642979),o=e.n(n),i=e(392338),r=e.n(i),u=e(805396);const a=":";class h{constructor(g){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o()(this,"xhr",null),o()(this,"state","initializing"),o()(this,"isStreaming",!1),o()(this,"progress",0),o()(this,"chunk",""),o()(this,"chunks",[]),o()(this,"isError",!1),o()(this,"aggregatedText",""),this.url=g,this.headers=f.headers||{},this.payload=f.payload!==void 0?f.payload:"",this.method=f.method||this.payload&&"POST"||"GET",this.withCredentials=!!f.withCredentials,this.formatting=f.formatting??"html",this.onData=f.onData,this.onClose=f.onClose,this.onOpen=f.onOpen,this.onError=f.onError}setState(g){this.state=g}onStreamFailure(){var g,f;const s=((g=this.xhr)===null||g===void 0?void 0:g.status)||500;if((f=this.xhr)!==null&&f!==void 0&&f.responseText.includes('"errorCode":')){var m,l;const p=JSON.parse((m=this.xhr)===null||m===void 0?void 0:m.responseText);(l=this.onError)===null||l===void 0||l.call(this,p)}else{var d;(d=this.onError)===null||d===void 0||d.call(this,{status:s})}this.close()}onStreamPartialError(g){var f;const s=JSON.parse(g.replace("data:",""));(f=this.onError)===null||f===void 0||f.call(this,s),this.close()}onStreamAbort(){this.close()}onStreamProgress(){if(!this.xhr)return;if(this.xhr.status!==200){this.isError=!0,this.onStreamFailure();return}if(this.state==="connecting"){var g;this.setState("open"),(g=this.onOpen)===null||g===void 0||g.call(this)}const f=this.xhr.responseText.substring(this.progress);this.progress+=f.length;const s=this,m=f.split(/(\r\n|\r|\n){2}/g);for(let l=0;l<m.length;l++){const d=m[l];if(d.includes('"errorCode":')&&d.includes('"contextId":')){s.onStreamPartialError(d);break}else d.trim().length===0?s.addChunk():s.chunk+=d}this.updateData()}addChunk(){const g=this.parseEventChunk(this.chunk);g.length&&(this.chunks=this.chunks.concat(g)),this.chunk=""}onStreamLoaded(){this.onStreamProgress(),this.chunk=""}getIsStreaming(){return this.isStreaming}updateData(){!this.interval&&this.chunks.length&&(this.interval=setInterval(()=>{let g=0;for(;g<3;){if(this.chunks.length){const[m]=this.chunks;this.chunks=this.chunks.slice(1);const l=this.state==="closed"&&!this.chunks.length;if(this.isStreaming=!l,m){var f;this.aggregatedText+=m.text,(f=this.onData)===null||f===void 0||f.call(this,{responseId:m.responseId,text:this.formatting==="html"?(0,u.i)(this.aggregatedText):this.aggregatedText},l)}if(l){var s;(s=this.onClose)===null||s===void 0||s.call(this)}}g++}},150))}parseEventChunk(g){if(!g||g.length===0)return[];const f=[];return g.split(/\n|\r\n|\r/).forEach(s=>{s=s.trimRight();const m=s.indexOf(a);if(m<=0)return[];const l=s.substring(0,m),d=s.substring(m+1).trimLeft();l==="data"&&f.push(d)}),f.length?f.map(s=>{if(s.includes('"')&&s.includes("{")&&s.includes("}"))return JSON.parse(s);throw`Received non-object JSON from stream: ${s}`}):[]}onReadyStateChange(){if(this.xhr&&this.xhr.readyState===XMLHttpRequest.DONE){if(!this.chunks.length&&!this.isError){var g;(g=this.onClose)===null||g===void 0||g.call(this)}this.setState("closed")}}stream(){this.setState("connecting"),this.aggregatedText="",this.xhr=new XMLHttpRequest,this.xhr.addEventListener("progress",this.onStreamProgress.bind(this)),this.xhr.addEventListener("load",this.onStreamLoaded.bind(this)),this.xhr.addEventListener("readystatechange",this.onReadyStateChange.bind(this)),this.xhr.addEventListener("error",this.onStreamFailure.bind(this)),this.xhr.addEventListener("abort",this.onStreamAbort.bind(this)),this.xhr.open(this.method,this.url);for(const g in this.headers)this.xhr.setRequestHeader(g,this.headers[g]);this.xhr.overrideMimeType("text/event-stream"),this.xhr.withCredentials=this.withCredentials,this.xhr.send(this.payload)}close(){var g;this.interval&&clearInterval(this.interval),this.aggregatedText="",this.interval=void 0,(g=this.xhr)===null||g===void 0||g.abort(),this.xhr=null,this.isError=!1,this.isStreaming=!1,this.chunks=[],this.setState("closed")}}},428563:function(T,t,e){e.d(t,{P:()=>n});let n=function(o){return o.Default="default_text_generator",o.BrandPreview="brand_identity_preview",o}({})},231031:function(T,t,e){e.d(t,{Bk:()=>v,hy:()=>f,vd:()=>g});var n=e(300036);const o="2",i=s=>!!s&&s.hasOwnProperty("type")&&s.hasOwnProperty("errorCode")&&s.hasOwnProperty("subtype"),r=s=>i(s)&&s.type==="Bad Request"&&(s.errorCode==="PROMPT_TOO_LONG"||s.subtype===o),u=s=>i(s)&&(s.errorCode==="OPEN_AI_FAILURE"||s.type==="Upstream Error"),a=s=>i(s)&&s.type==="Rate Limited",h=s=>i(s)&&(s.errorCode==="OPEN_AI_TIMEOUT"||s.type==="Upstream Timeout"),v=(s,m)=>!!s&&s.status===m,g=s=>i(s)?s.errorCode:void 0,f=s=>{if(s)return r(s)?(0,n.t)("The prompt is too long. Please try a shorter prompt.",null,{project:"assetManagement.aiWriter"}):a(s)||v(s,429)?(0,n._6)({one:"You have hit the limit for number of AI uses. You\u2019ll need to wait {%n} second before trying again.",other:"You have hit the limit for number of AI uses. You\u2019ll need to wait {%n} seconds before trying again."},i(s)&&s.retryAfter?s.retryAfter:60,null,{project:"assetManagement.aiWriter"}):h(s)||v(s,504)?(0,n.t)("Text generation timed out, please try again.",null,{project:"assetManagement.aiWriter"}):u(s)||v(s,502)||v(s,503)?(0,n.t)("Squarespace AI is currently unavailable, please try again later.",null,{project:"assetManagement.aiWriter"}):(0,n.t)("Something went wrong. Please try again later.",null,{project:"assetManagement.aiWriter"})}},903816:function(T,t,e){e.d(t,{N:()=>a});var n=e(456903),o=e(64745),i=e(505685),r=e(428563);const u=o.Z.isCancel,a=h=>{let{brandName:v,cancelToken:g,commandId:f,eventingMetadata:s,locale:m="en-US",profile:l=r.P.Default,promptPassThrough:d,prompt:p,websiteId:E}=h;const b="/api/v1/ai-content-generator/text/generate";return n.default.post(b,{brandName:v,commandId:f,eventingMetadata:{mediaType:"text",...s},locale:m,profile:l,prompt:p,websiteId:E},{cancelToken:g,params:{promptPassThrough:d}}).then(O=>({data:O.data})).catch(O=>{var C,S,P;if(u(O))return{error:{status:"CANCELLED"}};if(i.Z.withSquarespaceScope(()=>{i.Z.captureException(O)}),!O||!(O!=null&&(C=O.response)!==null&&C!==void 0&&C.data)){var y;return{error:{status:(O==null||(y=O.response)===null||y===void 0?void 0:y.status)||500}}}return{error:{...O.response.data,retryAfter:parseInt((S=O.response.headers)===null||S===void 0?void 0:S["retry-after"],10),status:O==null||(P=O.response)===null||P===void 0?void 0:P.status}}})}},985142:function(T,t,e){e.d(t,{Z:()=>h});var n=e(994336),o=e.n(n),i=e(505685),r=e(428563),u=e(156286);const a="/api/v1/ai-content-generator/text/generate/stream",h=v=>{let{brandName:g,commandId:f,eventingMetadata:s,locale:m="en-US",onClose:l,onData:d,onError:p,profile:E=r.P.Default,prompt:b,websiteId:O}=v;return new u.w(a,{method:"POST",payload:JSON.stringify({brandName:g,commandId:f,eventingMetadata:{mediaType:"text",productSection:"RTE",...s},locale:m,prompt:b,profile:E,websiteId:O}),headers:{"X-CSRF-Token":o().get("crumb")||"","Content-Type":"application/json;charset=UTF-8",Accept:"application/json, text/plain, */*"},onClose:l,onData:d,onError:C=>{i.Z.withSquarespaceScope(()=>{i.Z.captureException(C)}),p(C)}})}},839974:function(T,t,e){e.d(t,{Y:()=>m});var n=e(174161),o=e(903816),i=e(231031),r=e(255709),u=e(76316),a=e(723202),h=e(126472),v=e(565983),g=e(228866),f=e(69003),s=e(771691);const m=l=>{let{brandName:d,errorCopy:p,onClick:E,onError:b,onTextGenerated:O,prompt:C,tooltipText:S,trackingPayload:P,websiteId:y}=l;const[c,j]=(0,n.useState)(null),[N,Z]=(0,n.useState)(),z=(0,g.D)({recheckInterval:1e3}),k=(0,n.useMemo)(()=>z==="disabled"||z==="unavailable"?r.Je:S,[z,S]),X=(0,n.useCallback)(()=>{j(null),Z("busy"),(0,o.N)({brandName:d,eventingMetadata:{productArea:P.productArea,productSection:P.productSection},prompt:C,promptPassThrough:!0,websiteId:y}).then(I=>{Z("done"),"data"in I?(O(I.data.text),(0,u.c)({responseId:I.data.responseId})):(b==null||b(),(0,a.R)({errorCode:(0,i.vd)(I.error),errorMessage:p}))})},[d,p,b,O,C,P,y]),ie=(0,n.useCallback)(()=>{if(z==="unavailable"){j("ai-unavailable");return}if((0,h.M)(),!(0,f.EJ)()){j("ai-terms");return}E?E(X):X()},[z,X,E]),D=(0,n.useCallback)(()=>{(0,f.qv)(),j(null),E?E(X):X()},[X,E]);return(0,v.aQ)(P),n.createElement(s.r,{aiServiceState:z,animation:N,closeModal:()=>j(null),currentModal:c,locale:P.accountLocale,onClick:ie,onTermsContinue:D,tooltipText:k})}},771691:function(T,t,e){e.d(t,{r:()=>v});var n=e(174161),o=e(661787),i=e(418698),r=e(967552),u=e(352635),a=e(490087),h=e(467485);const v=g=>{let{aiServiceState:f,animation:s,closeModal:m,currentModal:l,locale:d,onClick:p,onTermsContinue:E,tooltipText:b}=g;const O=f==="unavailable",C=f==="disabled",[S,P]=(0,n.useState)(null),[y,c]=(0,n.useState)(!1),j=()=>c(!0),N=()=>c(!1),Z=(0,n.useMemo)(()=>n.createElement(o.$,{animation:s,isUnavailable:O||C}),[s,C,O]);return n.createElement(n.Fragment,null,n.createElement(r.Z.Element.Icon,{ref:P,disabled:C||s==="busy",label:b,onBlur:N,onFocus:j,onMouseLeave:N,onMouseOver:j,onClick:p,sx:{"&>span":{borderRadius:"4px",cursor:O||C?"not-allowed !important":void 0,...!C&&s!=="busy"&&{"&:hover":{backgroundColor:u.colors.gray[700]}}}}},Z),n.createElement(a.H,{ariaTitle:"ai-terms-title",isOpen:l==="ai-terms",locale:d,onCancel:m,onContinue:E}),n.createElement(h.u,{closeModal:m,isOpen:l==="ai-unavailable"}),n.createElement(i.Z,{anchor:S,delay:{enter:500,exit:0},isOpen:y&&s!=="busy",margin:2,position:"bottom",width:"225px",sx:{textAlign:"center"}},b))}},735680:function(T,t,e){e.d(t,{z:()=>f});var n=e(174161),o=e(565983),i=e(484248);const r=s=>{let{modal_type:m}=s;o.zT.track({event_name:"UserConfirmsTOSChoice",action:i.kA.Click,object_type:i.W9.Checkbox,object_identifier:i.GN.TOSModalConfirmation,modal_type:m})},u=s=>{let{modal_type:m,object_display_name:l}=s;o.zT.track({event_name:"UserViewsTOSModal",action:i.kA.View,object_type:i.W9.Modal,object_identifier:i.GN.TOSModal,object_display_name:l,modal_type:m})};var a=e(69003),h=e(365093),v=e(490087);const g="ai-terms-title",f=s=>{let{onCancel:m,onContinue:l,modalClassName:d,hideVideo:p=!1}=s;const{isModalOpen:E,setCurrentModal:b}=(0,h.u)(),O=E("ai-terms"),C=()=>{b(null),m==null||m()},S=()=>{(0,a.qv)(),r({modal_type:g}),l()};return(0,n.useEffect)(()=>{O&&u({modal_type:g,object_display_name:v.h})},[O]),n.createElement(v.H,{ariaTitle:g,onCancel:C,onContinue:S,locale:o.G9.defaultConfig.member_account_locale,isOpen:O,modalClassName:d,hideVideo:p})}},490087:function(T,t,e){e.d(t,{H:()=>b,h:()=>m});var n=e(174161),o=e(338465),i=e(516865),r=e(223563),u=e(682578),a=e(300036),h=e(490048),v=e(908255),g=e(822382),f=e(106464),s=e(965483);const m=(0,a.t)("Squarespace AI is a generative writing assistant which uses artificial intelligence to get you from blank page to first draft in a flash.",null,{project:"assetManagement.aiWriter"}),l=(0,a.t)("Cancel",null,{project:"assetManagement.aiWriter"}),d=(0,a.t)("OK",null,{project:"assetManagement.aiWriter"}),p="https://www.squarespace.com/blog/how-to-personalize-ai-content",E=(0,a.t)("{aiTutorialLink} personalized AI content for your website.",{aiTutorialLink:`<a target="_blank" href=${p}>${(0,a.t)("See how to create",null,{project:"assetManagement.aiWriter",notes:"link to guide for creating AI content on website"})}</a>`},{project:"assetManagement.aiWriter",notes:'{aiTutorialLink} is a link that is translated separately, the text for which says "See how to create"'}),b=O=>{let{ariaTitle:C,isOpen:S,locale:P,onCancel:y,onContinue:c,modalClassName:j,hideVideo:N}=O;const Z=(0,n.useMemo)(()=>(0,a.t)("By using Squarespace AI, you agree to the {termsLink} and that you are publishing the text and responsible for any use.",{termsLink:`<a target="_blank" href=${(0,r.f)(P)}>${(0,a.t)("Content Generation Terms",null,{project:"assetManagement.aiWriter"})}</a>`},{project:"assetManagement.aiWriter"}),[P]);return n.createElement(h.q,{ariaTitle:C,closeModal:y,isOpen:S,className:j,isMountedAtDocument:!0},!N&&n.createElement(s.N,{videoSrc:u.T}),n.createElement(o.Z,{pb:3,pt:5,px:6},n.createElement(v.z,{id:C},n.createElement(a.T,{project:"assetManagement.aiWriter"},"Introducing Squarespace AI")),n.createElement(g.u,{as:"p",mb:4},m),n.createElement(g.u,{as:"p",mb:4},n.createElement(o.Z,{as:"span",dangerouslySetInnerHTML:{__html:E}})),n.createElement(g.u,{as:"p"},n.createElement(o.Z,{as:"span",dangerouslySetInnerHTML:{__html:Z}})),n.createElement(f.n,null,n.createElement(i.Z.Tertiary,{mr:3,onClick:y,size:"medium"},l),n.createElement(i.Z.Tertiary,{onClick:c,size:"medium"},d))))}},309109:function(T,t,e){e.d(t,{J:()=>p});var n=e(174161),o=e(365093),i=e(747409),r=e(365570),u=e(639126),a=e(338465),h=e(352635),v=e(100310);const g=8,f=E=>{let{children:b,closeAIWriter:O,isAIWriterOpen:C,popoverProps:S,trigger:P}=E;const[y,c]=(0,n.useState)("sizes.750");return(0,n.useEffect)(()=>{var j;const N=(j=S.anchorBounds)===null||j===void 0?void 0:j.width;if(N){const Z=document.documentElement.clientWidth-g,z=Z<N?Z:N;c(`${z}px`)}},[S.anchorBounds]),S.anchor?n.createElement(v.Z,null,j=>n.createElement(u.Z.Position,{desktopPlacement:"top-start",floatingOffset:-40,trigger:P,open:C,onOpenChange:N=>{N||O()}},n.createElement(u.Z,{className:S.className,zIndex:j,position:"relative"},n.createElement(a.Z,{width:y,minWidth:"300px",maxWidth:h.sizes.sizes[900]},b)))):null};var s=e(481531),m=e(793255),l=e.n(m);const d=E=>{let{brandName:b,generatorProfile:O,modalClassName:C,onButtonClick:S,onCloseModal:P,onInsertText:y,popoverProps:c,selectedText:j,trackingPayload:N,websiteId:Z}=E;const[z,k]=(0,n.useState)(!1),{isModalOpen:X}=(0,o.u)(),ie=(0,n.useCallback)(()=>{X()||(k(!1),P==null||P())},[X,P]),D=(0,n.useCallback)(()=>{k(!0),S==null||S()},[S]);return n.createElement(n.Fragment,null,n.createElement(f,{isAIWriterOpen:z,closeAIWriter:ie,popoverProps:c,trigger:n.createElement(r.C,{className:l().deprecatedButton,modalClassName:C,openAIWriter:D,selectedText:j,sx:{marginX:"4px",marginY:"4px"},trackingPayload:N,variant:"deprecated"})},n.createElement(i.N,{brandName:b,closeAIWriter:ie,generatorProfile:O,onInsertText:y,popoverClassName:c.className,selectedText:j,websiteId:Z})),n.createElement(s.U,{brandName:b,modalClassName:C,websiteId:Z}))},p=E=>n.createElement(o.G,null,n.createElement(d,E))},747409:function(T,t,e){e.d(t,{N:()=>c});var n=e(174161),o=e(120733),i=e(443416),r=e(338465),u=e(482053),a=e(331474),h=e(300036),v=e(20268),g=e(426206),f=e(565983),s=e(484248);const m=()=>{f.G9.track({event_name:"UserStopsAIRequest",action:s.kA.Click,object_identifier:s.GN.AIStopRequest,object_type:s.W9.TextEditor})};var l=e(17500),d=e(538312),p=e(231031),E=e(828654),b=e(723202);const O=()=>{const j=(0,a.useSelector)(E.n),N=(0,n.useMemo)(()=>(0,p.vd)(j),[j]),Z=(0,n.useMemo)(()=>(0,p.hy)(j),[j]);return(0,n.useEffect)(()=>{Z&&(0,b.R)({errorCode:N,errorMessage:Z})},[N,Z]),Z?n.createElement(d.Z.Body,{color:"red.300",pl:8,mt:2,mb:1},Z):null};var C=e(562884);let S;function P(){return S||(S=(0,v.c)()),S}const y=(0,h.t)("Back",null,{project:"assetManagement.aiWriter"}),c=j=>{let{brandName:N,closeAIWriter:Z,containerWidth:z,generatorProfile:k,onFocus:X,onInsertText:ie,popoverClassName:D,selectedText:I,shouldHidePromptOptions:A,websiteId:W}=j;const[U,K]=(0,n.useState)(!1),H=(0,n.useRef)(null);(0,n.useEffect)(()=>{K(!0)},[]);const R=(0,n.useMemo)(()=>P(),[]),J=(0,n.useCallback)(()=>{var F;H.current&&(m(),(F=H.current)===null||F===void 0||F.close(),R.dispatch((0,g.n7)()))},[R]),_=(0,n.useCallback)(F=>{H.current=F},[]);return(0,n.useEffect)(()=>()=>{J()},[J]),n.createElement(a.Provider,{store:R},n.createElement(r.Z,null,n.createElement(u.Z,{width:z||"100%",sx:{alignItems:"flex-end"}},U&&n.createElement(o.Z.Action,{icon:n.createElement(i.Z,null),label:y,onClick:Z,sx:{marginRight:1,width:"36px",p:{_:"7px","mobile-*":"7px"}}}),n.createElement(l.S,{onError:F=>console.error({error:F}),message:"Something went wrong"},n.createElement(C.V,{brandName:N,closeAIWriter:Z,generatorProfile:k,onFocus:X,onInsertText:ie,popoverClassName:D,selectedText:I,setSSESource:_,shouldHidePromptOptions:A,stopStreaming:J,websiteId:W}))),n.createElement(O,null)))}},365570:function(T,t,e){e.d(t,{C:()=>j});var n=e(174161),o=e(661787),i=e(120733),r=e(967552),u=e(969145),a=e(352635),h=e(260175),v=e(845076),g=e.n(v),f=e(255709),s=e(232342),m=e(565983),l=e(484248);const d=N=>{let{isTextSelected:Z,modalId:z,modalText:k}=N;m.G9.track({event_name:"UserViewsAIModal",action:l.kA.View,object_display_name:k,object_identifier:z,object_type:l.W9.Modal,object_value:Z?"highlighted":"cursor"})};var p=e(126472),E=e(69003),b=e(228866),O=e(735680),C=e(365093),S=e(626205),P=e(793255),y=e.n(P);const c=N=>{let{aiServiceState:Z,isSelectionOverLimit:z}=N;return Z==="disabled"||Z==="unavailable"?f.Je:z?f.hd:f.v_},j=(0,n.forwardRef)((N,Z)=>{let{className:z,modalClassName:k,openAIWriter:X,selectedText:ie,sx:D,trackingPayload:I,variant:A="default"}=N;const{setCurrentModal:W}=(0,C.u)(),U=(0,E.hk)(),K=((ie==null?void 0:ie.length)||0)>s.J,H=(0,b.D)(),R=(0,n.useCallback)(()=>{d({isTextSelected:!!ie,modalId:l.GN.AILaunchModal,modalText:S.IS}),W(null),X()},[X,ie,W]),J=(0,n.useCallback)(()=>{if(H==="unavailable"){W("ai-unavailable");return}U||(0,E.az)(),(0,p.M)({isTextSelected:!!ie}),(0,E.EJ)()?R():W("ai-terms")},[H,R,U,ie,W]);(0,m.aQ)(I);const{breakpoints:_}=(0,u.F)(),{platform:F}=(0,h.i)(_),Q=(0,n.useMemo)(()=>{if(A==="deprecated"){const le=g()(y().button,z,{[y().overLimit]:K&&H!=="unavailable",[y().unavailable]:!K&&H==="unavailable"});return n.createElement(r.Z.Element.Icon,{disabled:H==="disabled","data-test":"ai-writer-btn",className:le,onClick:J,ref:Z,sx:{height:F==="mobile"?"sizes.250":"sizes.200",width:F==="mobile"?"sizes.250":"sizes.200",marginX:0,marginY:0,...D},title:c({aiServiceState:H,isSelectionOverLimit:K})},n.createElement(o.$,{animation:!U&&!K&&H==="ready"?"wiggle":void 0,color:H==="disabled"||K?a.colors.gray[500]:void 0,isUnavailable:H==="unavailable"}))}return n.createElement(i.Z.Action,{icon:n.createElement(o.$,{animation:!U&&!K&&H==="ready"?"wiggle":void 0,color:K?a.colors.gray[500]:void 0,isUnavailable:H==="unavailable"}),"data-test":"ai-writer-btn",isDisabled:H==="disabled",label:c({aiServiceState:H,isSelectionOverLimit:K}),onClick:J,sx:{cursor:H==="unavailable"?"not-allowed !important":void 0}})},[H,z,J,U,K,F,Z,D,A]);return n.createElement(n.Fragment,null,Q,n.createElement(O.z,{onContinue:R,modalClassName:k}))})},481531:function(T,t,e){e.d(t,{U:()=>r});var n=e(174161),o=e(504513),i=e(457748);const r=u=>{let{brandName:a,modalClassName:h,websiteId:v}=u;return n.createElement(n.Fragment,null,n.createElement(o.v,{brandName:a,className:h,websiteId:v}),n.createElement(i.A,{modalClassName:h}))}},741919:function(T,t,e){e.d(t,{U:()=>O});var n=e(174161),o=e(766400),i=e(292165),r=e(516865),u=e(338465),a=e(538312),h=e(352635),v=e(358111),g=e(300036),f=e(552869),s=e(768995),m=e(158775),l=e.n(m);const d=C=>{let{isDisabled:S=!1,maxLength:P,onChange:y,placeholder:c,value:j}=C;return n.createElement(s.default,{characterCountFormat:"decrement",className:l().textAreaField,isDark:!0,isDisabled:S,maxLength:P,onChange:y,placeholder:c,renderCharacterCount:!0,value:j})};var p=e(482053),E=e(740907);const b=C=>{let{isDisabled:S,onSelectTone:P,selectedOption:y}=C;const c=[[E.m.SOPHISTICATED,E.m.PLAYFUL,E.m.PROFESSIONAL],[E.m.FRIENDLY,E.m.BOLD,E.m.QUIRKY,E.m.INNOVATIVE,E.m.CUSTOM]];return n.createElement(n.Fragment,null,c.map(j=>n.createElement(p.Z,{key:`personality_types_${j[0]}`,sx:{flexDirection:"row",gap:1,mb:"5px"}},j.map(N=>n.createElement(r.Z.Base,{"aria-label":N,disabled:S,key:N,onClick:()=>P==null?void 0:P(N),sx:{backgroundColor:"gray.800",border:N===y?"1px solid black":"1px solid transparent",borderRadius:"14px",height:"sizes.175",flex:1,letterSpacing:0,minHeight:"sizes.175",padding:0,textTransform:"none"}},n.createElement(a.Z.Caption,{sx:{color:S?"gray.500":"gray.100"}},f.fS[N]))))))},O=C=>{let{closeModal:S,customTone:P,descriptionValue:y,errorMessage:c,isDisabled:j,onCustomToneChange:N,onDescriptionChange:Z,onSave:z,onSelectTone:k,selectedTone:X,showLoadingSpinner:ie,isFormChanged:D}=C;const I=(0,n.useMemo)(()=>ie?n.createElement(o.Z,{py:3,size:0}):D?n.createElement(n.Fragment,null,n.createElement(r.Z.Tertiary,{onClick:z,disabled:((P==null?void 0:P.length)??0)>f.Au||((y==null?void 0:y.length)??0)>f.Us},n.createElement(g.T,{project:"assetManagement.aiWriter"},"Save")),n.createElement(r.Z.Tertiary,{onClick:S,sx:{pl:2}},n.createElement(g.T,{project:"assetManagement.aiWriter"},"Cancel"))):n.createElement(r.Z.Tertiary,{onClick:S},n.createElement(g.T,{project:"assetManagement.aiWriter"},"Close")),[S,P,y,D,z,ie]);return n.createElement(u.Z,{sx:{...S?{height:"100%",overflow:"auto",px:h.space[6],py:h.space[5],width:"450px"}:{width:"100%"}}},S&&n.createElement(n.Fragment,null,n.createElement(u.Z,{sx:{height:"sizes.200"}},I)," ",n.createElement(u.Z,{sx:{height:"sizes.250",width:"sizes.700"}},c?n.createElement(a.Z.Body,{my:0,color:"red.300",sx:{lineHeight:1}},c):null)),n.createElement(a.Z.Title,null,n.createElement(g.T,{project:"assetManagement.aiWriter"},"Brand Identity")),n.createElement(a.Z.Subtitle,{sx:{color:"gray.300"}},n.createElement(g.T,{project:"assetManagement.aiWriter"},"A Brand Identity describes who you are, what you do and what makes you special. Squarespace AI uses this to generate better content."),"\xA0",n.createElement(i.Z,{href:v.$,target:"_blank"},n.createElement(g.T,{project:"assetManagement.aiWriter",notes:"link to the KB guide"},"Learn more"))),n.createElement(a.Z.Subtitle,{mt:7,mb:2},n.createElement(g.T,{project:"assetManagement.aiWriter",notes:"user input description of their brand"},"Description")),n.createElement(d,{isDisabled:j,maxLength:f.Us,onChange:Z,placeholder:(0,g.t)("Describe your site or business...",null,{project:"assetManagement.aiWriter"}),value:y??""}),n.createElement(u.Z,{mt:1,mb:h.space[6],sx:{lineHeight:1}},n.createElement(a.Z.Caption,null,(0,g.t)("Describe what your site or business is about, your values, what you sell if anything, where you're located, who's involved, etc.",null,{project:"assetManagement.aiWriter"}))),n.createElement(a.Z.Subtitle,{mb:2},n.createElement(g.T,{project:"assetManagement.aiWriter",notes:"user chosen personality/tone for their brand"},"Personality")),n.createElement(b,{isDisabled:j,selectedOption:X,onSelectTone:k}),X==="custom"?n.createElement(d,{isDisabled:j,maxLength:f.Au,onChange:N,placeholder:(0,g.t)("Describe your brand personality...",null,{project:"assetManagement.aiWriter"}),value:P}):null)}},504513:function(T,t,e){e.d(t,{v:()=>v});var n=e(174161),o=e(69003),i=e(365093),r=e(490048),u=e(454382),a=e(250672),h=e(564388);const v=g=>{let{brandName:f,className:s,websiteId:m}=g;const{isModalOpen:l,setCurrentModal:d}=(0,i.u)(),[p,E]=(0,n.useState)(!1),{getBrandIdentity:b,formState:O,setDescriptionValue:C,setCustomTone:S,setSelectedTone:P,discardChanges:y,saveChanges:c}=(0,a.q)({websiteId:m,brandName:f}),j=(0,h.s)({brandName:f,customTone:O.customTone,descriptionValue:O.description,isOpen:l("brand-identity"),selectedTone:O.selectedTone,websiteId:m}),N=(0,n.useCallback)(()=>{O.isFormChanged?E(!0):d(null)},[d,O.isFormChanged]),Z=()=>{y(),E(!1),d(null)};return(0,n.useEffect)(()=>{l("brand-identity")&&b()},[l,b]),n.createElement(r.q,{className:s,closeModal:N,isMountedAtDocument:!0,isOpen:l("brand-identity"),height:"675px",width:"sizes.900",sx:{display:"flex",flexDirection:"row"}},n.createElement(u.J,{formState:O,setCustomTone:S,setDescriptionValue:C,setSelectedTone:P,onCancelDiscardChanges:()=>E(!1),onCloseModal:N,onDiscardChanges:Z,isDiscardModalOpen:p,onSave:()=>{c().then(z=>{z&&(d(null),(0,o.yA)({blurbPreview:j.blurbPreview,emailPreview:j.emailPreview}))})},previewState:j}))}},454382:function(T,t,e){e.d(t,{J:()=>l});var n=e(174161),o=e(740907),i=e(210750),r=e.n(i),u=e(220757),a=e(521744),h=e(762242),v=e(851978),g=e(565983),f=e(741919),s=e(483137),m=e(693141);const l=d=>{let{formState:p,isDiscardModalOpen:E,onCancelDiscardChanges:b,onCloseModal:O,onDiscardChanges:C,onSave:S,previewUIStyle:P={},previewState:y,setDescriptionValue:c,setCustomTone:j,setSelectedTone:N,trackingPayload:Z}=d;const{description:z,customTone:k,selectedTone:X,isFormChanged:ie,isBrandLoading:D,showLoadingSpinner:I,errorMessage:A}=p,{blurbPreview:W,emailPreview:U,debouncedGetGeneratedPreview:K,status:H}=y,R=(0,n.useCallback)(()=>{K()},[K]);Z&&(0,g.Ll)(Z);const J=(0,n.useMemo)(()=>r()(u.R,1e3),[]),_=(0,n.useMemo)(()=>r()(a._,1e3),[]),F=(0,n.useCallback)(()=>{(0,h.u)({customTone:k,description:z,tone:X}),C()},[k,z,X,C]);return n.createElement(n.Fragment,null,n.createElement(f.U,{isFormChanged:ie,closeModal:O,customTone:k,descriptionValue:z,isDisabled:D,errorMessage:A,onCustomToneChange:Q=>{j(Q),Q.length&&_({customTone:Q,description:z,tone:o.m.CUSTOM}),R()},onDescriptionChange:Q=>{c(Q),J({description:Q}),R()},onSelectTone:Q=>{N(Q),(0,v.e)({customTone:k,description:z,tone:Q}),(Q!==o.m.CUSTOM||Q===o.m.CUSTOM&&k!==null&&k!==void 0&&k.length)&&R()},onSave:S,selectedTone:X,showLoadingSpinner:I}),n.createElement(s.V,{showPreviewHeader:!O,blurb:W,emailCampaign:U,status:H,sx:P}),n.createElement(m.V,{closeModal:b,isOpen:E,onDiscardClick:F}))}},483137:function(T,t,e){e.d(t,{V:()=>m,u:()=>s});var n=e(174161),o=e(661787),i=e(538312),r=e(482053),u=e(352635),a=e(845076),h=e.n(a),v=e(300036),g=e(158775),f=e.n(g);const s=(0,v.t)("Error Creating Preview",null,{project:"assetManagement.aiWriter"}),m=l=>{let{blurb:d,emailCampaign:p,status:E="idle",sx:b={},showPreviewHeader:O=!1}=l;const C=(0,n.useMemo)(()=>{if(E==="loading")return"busy";if(E==="complete")return"done";if(E==="idle")return"listening"},[E]),S=(0,n.useMemo)(()=>E==="idle"&&!d&&!p?null:E==="error"?n.createElement(i.Z.Subtitle,{mt:4},s):E==="loading"&&!d&&!p?n.createElement(i.Z.Subtitle,{mt:4},n.createElement(v.T,{project:"assetManagement.aiWriter",notes:"creating preview of blurb and email campaign in brand identity modal"},"Creating Preview...")):O?null:n.createElement(i.Z.Subtitle,{mt:1,mb:6},n.createElement(v.T,{project:"assetManagement.aiWriter",notes:"displaying preview of blurb and email campaign in brand identity modal"},"Preview")),[d,p,E,O]),P=!!d||!!p,y=E==="loading"?u.colors.gray[500]:void 0;return n.createElement(n.Fragment,null,O&&n.createElement(i.Z.Subtitle,{mt:3,mb:1},n.createElement(v.T,{project:"assetManagement.aiWriter",notes:"displaying preview of blurb and email campaign in brand identity modal"},"Preview")),n.createElement(r.Z,{py:P?10:0,sx:{alignItems:"center",backgroundColor:"gray.800",flexDirection:"column",height:"675px",justifyContent:P?"flex-start":"center",overflow:"auto",width:"450px",...b}},n.createElement(o.$,{animation:C,sx:{...O&&(d||p)?{mb:6}:{}}}),S,n.createElement(r.Z,{sx:{alignItems:"flex-start",flexDirection:"column",width:"296px"}},d?n.createElement(n.Fragment,null,n.createElement(i.Z.Label,{color:y},n.createElement(v.T,{project:"assetManagement.aiWriter",notes:"AI generated blurb using brand identity"},"Blurb")),n.createElement(i.Z.Subtitle,{className:h()(f().previewText,f().blurb),color:y,mt:1,mb:6},d)):null,p?n.createElement(n.Fragment,null,n.createElement(i.Z.Label,{mt:0,color:y},n.createElement(v.T,{project:"assetManagement.aiWriter",notes:"AI generated email campaign using brand identity"},"Email Campaign")),n.createElement(i.Z.Body,{className:h()(f().previewText,f().email),color:y,mt:1},p)):null)))}},693141:function(T,t,e){e.d(t,{V:()=>g});var n=e(174161),o=e(338465),i=e(516865),r=e(300036),u=e(490048),a=e(908255),h=e(822382),v=e(106464);const g=f=>{let{closeModal:s,isOpen:m,onDiscardClick:l}=f;return n.createElement(u.q,{closeModal:s,isOpen:m},n.createElement(o.Z,{px:6,pt:5,pb:3},n.createElement(a.z,{id:"discard-brand-id-modal"},n.createElement(r.T,{project:"assetManagement.aiWriter"},"Discard Changes?")),n.createElement(h.u,null,n.createElement(r.T,{project:"assetManagement.aiWriter"},"You\xA0ve made changes, are you sure you want to discard them?")),n.createElement(v.n,null,n.createElement(i.Z.Tertiary,{onClick:s,mr:2},n.createElement(r.T,{project:"assetManagement.aiWriter"},"Cancel")),n.createElement(i.Z.Tertiary,{onClick:l},n.createElement(r.T,{project:"assetManagement.aiWriter",notes:"discard changes made to brand identity"},"Discard")))))}},681109:function(T,t,e){e.d(t,{h:()=>g});var n=e(174161),o=e(338465),i=e(516865),r=e(300036),u=e(490048),a=e(908255),h=e(822382),v=e(106464);const g=f=>{let{closeModal:s,errorMessage:m,isOpen:l}=f;return n.createElement(u.q,{closeModal:s,isOpen:l},n.createElement(o.Z,{px:6,pt:5,pb:3},n.createElement(a.z,{id:"brand-id-save-error-modal"},n.createElement(r.T,{project:"assetManagement.aiWriter"},"Error Saving")),n.createElement(h.u,null,m),n.createElement(v.n,null,n.createElement(i.Z.Tertiary,{onClick:s},n.createElement(r.T,{project:"assetManagement.aiWriter"},"Ok")))))}},552869:function(T,t,e){e.d(t,{Au:()=>a,S5:()=>v,Us:()=>u,fS:()=>g,hc:()=>f,lg:()=>s,mO:()=>m,w0:()=>h});var n=e(392338),o=e.n(n),i=e(740907),r=e(300036);const u=400,a=100,h=20,v=l=>l!==void 0&&Object.values(i.m).includes(l),g={[i.m.PROFESSIONAL]:(0,r.t)("Professional",null,{project:"assetManagement.aiWriter",notes:"Professional personality option for brand identity"}),[i.m.SOPHISTICATED]:(0,r.t)("Sophisticated",null,{project:"assetManagement.aiWriter",notes:"Sophisticated personality option for brand identity"}),[i.m.FRIENDLY]:(0,r.t)("Friendly",null,{project:"assetManagement.aiWriter",notes:"Friendly personality option for brand identity"}),[i.m.PLAYFUL]:(0,r.t)("Playful",null,{project:"assetManagement.aiWriter",notes:"Playful personality option for brand identity"}),[i.m.BOLD]:(0,r.t)("Bold",null,{project:"assetManagement.aiWriter",notes:"Bold personality option for brand identity"}),[i.m.QUIRKY]:(0,r.t)("Quirky",null,{project:"assetManagement.aiWriter",notes:"Quirky personality option for brand identity"}),[i.m.INNOVATIVE]:(0,r.t)("Innovative",null,{project:"assetManagement.aiWriter",notes:"Innovative personality option for brand identity"}),[i.m.CUSTOM]:(0,r.t)("Custom",null,{project:"assetManagement.aiWriter",notes:"Custom personality option for brand identity"})},f=l=>{let{brandName:d,description:p,tone:E}=l;return`Write a short one-sentence blurb for a business named: ${d}, described as: "${p}" in a tone that is ${E}. Respond in plaintext.`},s=l=>{let{brandName:d,description:p,tone:E}=l;return`Write a compelling paragraph about a business named: ${d}, described as "${p}" that is introducing a new sale. The paragraph should be short and not include any new lines and match a tone of "${E}". Respond in plaintext.`},m=l=>{let{selectedTone:d,customTone:p}=l;return d==="custom"&&(p!=null&&p.trim().length)?p.trim():d&&d!=="custom"?d:"neutral"}},250672:function(T,t,e){e.d(t,{q:()=>d});var n=e(174161),o=e(740907),i=e(972242),r=e(911576),u=e(57714),a=e(565983),h=e(484248);const v=p=>{let{customTone:E,description:b,errorCode:O,tone:C,visualTone:S}=p;a.MH.track({event_name:"UserViewsSaveError",action:h.kA.View,custom_personality_text:E,description_text:b,object_identifier:h.GN.BrandSaveError,object_type:h.W9.Error,object_value:O,personality:C,visual_tone:S})};var g=e(552869);let f=function(p){return p[p.CUSTOM_TONE=0]="CUSTOM_TONE",p[p.DESCRIPTION=1]="DESCRIPTION",p[p.ERROR_MESSAGE=2]="ERROR_MESSAGE",p[p.IS_BRAND_LOADING=3]="IS_BRAND_LOADING",p[p.IS_FORM_CHANGED=4]="IS_FORM_CHANGED",p[p.SELECTED_TONE=5]="SELECTED_TONE",p[p.SHOW_LOADING_SPINNER=6]="SHOW_LOADING_SPINNER",p[p.SET_BRAND_DATA=7]="SET_BRAND_DATA",p}({});const s={initialState:{customTone:"",description:"",selectedTone:void 0,visualTone:void 0},customTone:"",description:"",errorMessage:"",isBrandLoading:!1,isFormChanged:!1,selectedTone:void 0,visualTone:void 0,showLoadingSpinner:!1},m=(p,E)=>p.description!==E.description||p.customTone!==E.customTone||p.selectedTone!==E.selectedTone||p.visualTone!==E.visualTone,l=(p,E)=>{switch(E.type){case f.CUSTOM_TONE:return{...p,customTone:E.payload,isFormChanged:m(p.initialState,{...p,customTone:E.payload})};case f.DESCRIPTION:return{...p,description:E.payload,isFormChanged:m(p.initialState,{...p,description:E.payload})};case f.ERROR_MESSAGE:return{...p,errorMessage:E.payload};case f.IS_BRAND_LOADING:return{...p,isBrandLoading:E.payload};case f.IS_FORM_CHANGED:return{...p,isFormChanged:E.payload};case f.SELECTED_TONE:return{...p,selectedTone:E.payload,isFormChanged:m(p.initialState,{...p,selectedTone:E.payload})};case f.SHOW_LOADING_SPINNER:return{...p,showLoadingSpinner:E.payload};case f.SET_BRAND_DATA:return{...p,initialState:{description:E.payload.description,customTone:E.payload.customTone,selectedTone:E.payload.selectedTone,visualTone:E.payload.visualTone},description:E.payload.description,customTone:E.payload.customTone,selectedTone:E.payload.selectedTone,visualTone:E.payload.visualTone,errorMessage:"",isFormChanged:!1};default:return p}},d=p=>{let{brandName:E,websiteId:b}=p;const[O,C]=(0,n.useReducer)(l,s),[S,P]=(0,n.useState)(void 0),y=(0,n.useCallback)(I=>{C({type:f.DESCRIPTION,payload:I})},[]),c=(0,n.useCallback)(I=>{C({type:f.CUSTOM_TONE,payload:I})},[]),j=(0,n.useCallback)(I=>{C({type:f.SELECTED_TONE,payload:I})},[]),N=(0,n.useCallback)(I=>C({type:f.IS_BRAND_LOADING,payload:I}),[]),Z=(0,n.useCallback)(I=>C({type:f.SHOW_LOADING_SPINNER,payload:I}),[]),z=(0,n.useCallback)(I=>C({type:f.ERROR_MESSAGE,payload:I}),[]),k=(0,n.useCallback)(()=>C({type:f.SET_BRAND_DATA,payload:O.initialState}),[C,O.initialState]),X=(0,n.useCallback)(I=>{C({type:f.SET_BRAND_DATA,payload:I})},[C]),ie=(0,n.useCallback)(()=>{const I=setTimeout(()=>Z(!0),300);return N(!0),(0,i.c)({method:"GET",websiteId:b}).then(A=>{if(clearTimeout(I),Z(!1),N(!1),"data"in A){var W;const U=A.data.description,K=(0,g.S5)(A.data.tone)?void 0:A.data.tone,H=(0,g.S5)(A.data.tone)?A.data.tone:o.m.CUSTOM,R=A.data.visualTone;X({description:U,customTone:K||"",selectedTone:H,visualTone:R}),P({brandCategoryId:(W=A.data.brandCategory)===null||W===void 0?void 0:W.id,id:A.data.id,version:A.data.version})}})},[b,X,N,P,Z]),D=(0,n.useCallback)(()=>(Z(!0),z(""),(0,i.c)({brandCategoryId:S==null?void 0:S.brandCategoryId,brandId:S==null?void 0:S.id,brandName:E,description:O.description,method:S?"PUT":"POST",tone:(0,g.mO)({selectedTone:O.selectedTone,customTone:O.customTone}),visualTone:O.visualTone,websiteId:b,version:S==null?void 0:S.version}).then(I=>{if(Z(!1),"data"in I){var A;return(0,u.$)({customTone:O.customTone,description:O.description,tone:O.selectedTone,visualTone:O.visualTone}),X({description:O.description,selectedTone:O.selectedTone,visualTone:O.visualTone,customTone:O.customTone}),P({brandCategoryId:(A=I.data.brandCategory)===null||A===void 0?void 0:A.id,id:I.data.id,version:I.data.version}),!0}if("error"in I){const W=(0,r.HT)(I.error);return z(W),v({customTone:O.customTone,description:O.description,errorCode:(0,r.rr)(I.error)??W,tone:O.selectedTone,visualTone:O.visualTone}),!1}return!1}).catch(I=>(console.log("Save Failed",I),!1))),[E,S,X,z,Z,O.customTone,O.description,O.selectedTone,O.visualTone,b]);return{discardChanges:k,formState:O,getBrandIdentity:ie,saveChanges:D,setCustomTone:c,setDescriptionValue:y,setSelectedTone:j}}},564388:function(T,t,e){e.d(t,{s:()=>C});var n=e(174161),o=e(64745),i=e(210750),r=e.n(i),u=e(903816),a=e(428563),h=e(231031),v=e(484248),g=e(526191),f=e(122078),s=e(565983);const m=S=>{let{customTone:P,description:y,errorCode:c,promptType:j,tone:N}=S;s.MH.track({event_name:"SystemGeneratesPreviewPromptError",actor:"system",action:v.kA.Generate,custom_personality_text:P,description_text:y,object_identifier:j,object_type:v.W9.Error,object_value:c,personality:N})};var l=e(69003),d=e(483137),p=e(552869);const{CancelToken:E}=o.Z,b=()=>{const S=E.source();return{cancelToken:S.token,onCancel:S.cancel}},O=S=>{if(typeof S=="object"&&"data"in S)return S.data.text},C=S=>{let{brandName:P,customTone:y,descriptionValue:c,isOpen:j=!0,selectedTone:N,websiteId:Z}=S;const[z,k]=(0,n.useState)("idle"),[X,ie]=(0,n.useState)(),[D,I]=(0,n.useState)(),A=(0,n.useRef)(),W=(0,n.useRef)(),U=()=>{var _,F;(_=A.current)===null||_===void 0||_.call(A),(F=W.current)===null||F===void 0||F.call(W)};(0,n.useEffect)(()=>{if(j){const{blurbPreview:_,emailPreview:F}=(0,l.R0)();ie(_),I(F),k("idle")}else U();return()=>{U()}},[j]);const K=(0,n.useCallback)(()=>{const _=c==null?void 0:c.trim(),F=y==null?void 0:y.trim();if(!(_!=null&&_.length)||_.length>p.Us||_.length<p.w0||F!=null&&F.length&&(F==null?void 0:F.length)>p.Au)return;z==="loading"&&U(),k("loading");const{cancelToken:Q,onCancel:le}=b(),{cancelToken:re,onCancel:pe}=b();A.current=le,W.current=pe;const Ce=Date.now(),Oe=(0,p.mO)({selectedTone:N,customTone:F}),ce=s.MH.defaultConfig.website_locale,fe={productArea:s.MH.defaultConfig.product_area,productAreaLevel2:s.MH.defaultConfig.product_area_level_2,productSection:s.MH.defaultConfig.product_section};Promise.all([(0,u.N)({brandName:P,cancelToken:Q,eventingMetadata:fe,locale:ce,profile:a.P.BrandPreview,promptPassThrough:!0,prompt:(0,p.hc)({brandName:P,description:_,tone:Oe}),websiteId:Z}),(0,u.N)({brandName:P,cancelToken:re,eventingMetadata:fe,locale:ce,profile:a.P.BrandPreview,promptPassThrough:!0,prompt:(0,p.lg)({brandName:P,description:_,tone:Oe}),websiteId:Z})]).then(de=>{const ge=[];let Te=0;if(de.forEach((me,be)=>{"error"in me&&!(0,h.Bk)(me.error,"CANCELLED")?(m({customTone:y,description:c,errorCode:(0,h.vd)(me.error),promptType:be===0?v.GN.BlurbPrompt:v.GN.EmailPrompt,tone:N}),Te++):"data"in me&&me.data.responseId&&ge.push(me.data.responseId)}),Te===de.length)k("error"),ie(void 0),I(void 0),(0,g.A)({customTone:y,description:c,errorCode:d.u,tone:N});else if(ge.length){k("complete");const me=O(de[0]),be=O(de[1]);ie(me),I(be),(0,f.S)({customTone:y,description:_,previewDuration:Date.now()-Ce,responseIds:ge,tone:N})}})},[P,A,W,y,c,N,z,Z]),H=(0,n.useRef)();(0,n.useEffect)(()=>{H.current=K},[K]);const R=(0,n.useMemo)(()=>r()(()=>{var _;return(_=H.current)===null||_===void 0?void 0:_.call(H)},2e3),[]),J=(0,n.useCallback)(()=>{U(),k("idle"),ie(void 0),I(void 0)},[]);return{blurbPreview:X,emailPreview:D,debouncedGetGeneratedPreview:R,discardChanges:J,status:z}}},17500:function(T,t,e){e.d(t,{S:()=>i});var n=e(174161),o=e(505685);class i extends n.Component{constructor(u){super(u),this.state={hasError:!1,error:null}}static getDerivedStateFromError(u){return{hasError:!0,error:u}}componentDidCatch(u){var a;(a=this.props)===null||a===void 0||a.onError(u),o.Z.withSquarespaceScope(()=>{o.Z.captureException(u)})}render(){return this.state.hasError?n.createElement(n.Fragment,null,this.props.message):this.props.children}}},365093:function(T,t,e){e.d(t,{G:()=>i,u:()=>r});var n=e(174161);const o=(0,n.createContext)({isModalOpen:()=>!1,setCurrentModal:()=>{}}),i=u=>{let{children:a}=u;const[h,v]=(0,n.useState)(null),g=(0,n.useCallback)(f=>f?h===f:!!h,[h]);return n.createElement(o.Provider,{value:{isModalOpen:g,setCurrentModal:v}},a)},r=()=>(0,n.useContext)(o)},822382:function(T,t,e){e.d(t,{u:()=>i});var n=e(174161),o=e(538312);const i=r=>{let{children:u,dataTest:a,as:h,mb:v}=r;return n.createElement(o.Z.Body,{as:h,m:0,mb:v,width:"100%","data-test":a},u)}},106464:function(T,t,e){e.d(t,{n:()=>i});var n=e(174161),o=e(482053);const i=r=>{let{children:u,mt:a=2}=r;return n.createElement(o.Z,{flexWrap:"wrap",justifyContent:"flex-end",mt:a},u)}},563002:function(T,t,e){e.d(t,{_:()=>r});var n=e(174161),o=e(685763),i=e(338465);const r=u=>{let{children:a,closeModal:h,isOpen:v,className:g,isMountedAtDocument:f=!1}=u;const s=(0,n.useRef)(),m=()=>f?document.body:s.current;return n.createElement(n.Fragment,null,!f&&n.createElement(i.Z,{ref:s}),n.createElement(o.Z.Transition,null,v&&n.createElement(o.Z,{mountAt:m(),onRequestClose:h,className:g},n.createElement(o.Z.Overlay,null),n.createElement(o.Z.Position,{position:"center"},a))))}},490048:function(T,t,e){e.d(t,{q:()=>u});var n=e(174161),o=e(362187),i=e(563002),r=e(908255);const u=a=>{let{ariaTitle:h="modal-title",buttons:v=[],children:g,closeModal:f,height:s,isOpen:m,message:l,title:d,width:p="sizes.700",className:E,isMountedAtDocument:b,sx:O}=a;const C=g?{p:0}:{px:6,pt:5,pb:3};return n.createElement(i._,{isOpen:m,closeModal:f,className:E,isMountedAtDocument:b},n.createElement(o.Z,{sx:{height:s,width:p,maxWidth:p,...C,...O},"aria-labelledby":h,title:n.createElement(r.z,{id:h},d),message:l,buttons:v},g))}},908255:function(T,t,e){e.d(t,{z:()=>i});var n=e(174161),o=e(538312);const i=r=>{let{children:u,dataTest:a,fontSize:h=4,id:v}=r;return n.createElement(o.Z.Subtitle,{"data-test":a,id:v,as:"h2",fontWeight:"semibold",m:0,mb:2,fontSize:h,lineHeight:1.25},u)}},457748:function(T,t,e){e.d(t,{A:()=>r});var n=e(174161),o=e(365093),i=e(467485);const r=u=>{let{modalClassName:a}=u;const{isModalOpen:h,setCurrentModal:v}=(0,o.u)(),g=()=>v(null),f=h("ai-unavailable");return n.createElement(i.u,{closeModal:g,isOpen:f,modalClassName:a})}},467485:function(T,t,e){e.d(t,{u:()=>g});var n=e(174161),o=e(338465),i=e(516865),r=e(300036),u=e(490048),a=e(908255),h=e(822382),v=e(106464);const g=f=>{let{closeModal:s,isOpen:m,modalClassName:l}=f;return n.createElement(u.q,{className:l,closeModal:s,isMountedAtDocument:!0,isOpen:m},n.createElement(o.Z,{px:6,pt:5,pb:3},n.createElement(a.z,{id:"service-unavailable-title"},n.createElement(r.T,{project:"assetManagement.aiWriter"},"Squarespace AI is Unavailable")),n.createElement(h.u,null,n.createElement(r.T,{project:"assetManagement.aiWriter"},"Squarespace AI is currently unavailable, please try again later.")),n.createElement(v.n,null,n.createElement(i.Z.Tertiary,{onClick:s,mr:2},n.createElement(r.T,{project:"assetManagement.aiWriter"},"Ok")))))}},965483:function(T,t,e){e.d(t,{N:()=>r});var n=e(174161),o=e(338465),i=e(857631);const r=u=>{let{videoSrc:a}=u;return n.createElement(o.Z,{sx:{width:"100%",height:"192.5px"}},n.createElement(i.VideoPlayer,{environment:(0,i.getEnvironment)(),src:a}))}},562884:function(T,t,e){e.d(t,{V:()=>S});var n=e(174161),o=e(210750),i=e.n(o),r=e(331474),u=e(985142),a=e(232342),h=e(828654),v=e(426206),g=e(76316),f=e(565983),s=e(484248);const m=P=>{let{inputText:y}=P;f.G9.track({event_name:"UserInputsTextInBlock",action:s.kA.Input,object_identifier:s.GN.AIUserInputText,object_type:s.W9.TextEditor,object_value:y})};var l=e(393316);const d=()=>{f.G9.track({event_name:"UserReachesCharacterLimit",action:s.kA.View,object_identifier:s.GN.AIErrorCharacterLimit,object_type:s.W9.TextEditor})};var p=e(205865),E=e(365093),b=e(626205),O=e(66956);const C=22,S=P=>{let{brandName:y,closeAIWriter:c,generatorProfile:j,onFocus:N,onInsertText:Z,popoverClassName:z,selectedText:k,setSSESource:X,shouldHidePromptOptions:ie,stopStreaming:D,websiteId:I}=P;const[A,W]=(0,n.useState)(""),[U,K]=(0,n.useState)(),[H,R]=(0,n.useState)(null),[J,_]=(0,n.useState)(!1),{setCurrentModal:F}=(0,E.u)(),Q=(0,r.useDispatch)(),{error:le,streamingState:re}=(0,r.useSelector)(h.e),{getState:pe}=(0,r.useStore)(),Ce=!!k,Oe=(0,n.useCallback)(me=>{let{selectedTextPrompt:be}=me,ye;Ce?be?ye=b.$N[be].id:ye=7:ye=0;let Se;if(be){var Pe;Se=(Pe=b.$N[be])===null||Pe===void 0?void 0:Pe.eventingKey}else if(U){var Ae;Se=(Ae=b.Z_[U])===null||Ae===void 0?void 0:Ae.eventingKey}const Ue=(0,p.r)({commandId:ye,inputValue:A,isTextSelected:Ce,selectedText:k}),Le={blockId:f.G9.defaultConfig.block_id,campaignId:f.G9.defaultConfig.campaign_id,collectionId:f.G9.defaultConfig.collection_id,isHighlighted:Ce,productId:f.G9.defaultConfig.product_id,productArea:f.G9.defaultConfig.product_area??"unknown",productSection:f.G9.defaultConfig.product_section,sectionId:f.G9.defaultConfig.section_id,selectedPrompt:Se};Q((0,v.jX)());const $=(0,u.Z)({prompt:Ue,brandName:y,commandId:ye,locale:f.G9.defaultConfig.website_locale,eventingMetadata:Le,profile:j,onClose:()=>{const{responseId:x}=(0,h.e)(pe());Q((0,v.mG)()),H==null||H.focus(),K(void 0),(0,g.c)({responseId:x||void 0})},onData:(x,B)=>{_(!B);const{responseId:w}=(0,h.e)(pe());B&&(X(null),W("")),Z({textContent:x.text,isStreaming:!B,responseId:w}),Q((0,v.Zg)({responseId:x.responseId||null}))},onError:x=>{Q((0,v.Vo)({error:x}))},websiteId:I});$.stream(),X($)},[y,Q,j,pe,Ce,Z,U,k,X,H,A,I]),ce=(0,n.useCallback)(()=>{J&&(D(),_(!1),setTimeout(()=>H==null?void 0:H.focus()))},[J,D,H]),fe=(0,n.useMemo)(()=>{const me=(k==null?void 0:k.length)||0;return A.length+me},[k,A]),de=(0,n.useMemo)(()=>fe>=100&&re!=="streaming",[fe,re]),ge=(0,n.useMemo)(()=>{if(re==="streaming")return 1;if(!A&&!de||A.length<50)return;const me=2,be=H?Math.round(H.scrollHeight/C):1,ye=Math.min(be,O.R);return de?Math.max(me,ye):ye},[de,re,H,A]),Te=(0,n.useMemo)(()=>i()(m,1e3),[]);return n.createElement(n.Fragment,null,n.createElement(O.v,{closeAIWriter:c,fullPromptLength:fe,hasError:!!le,isLoading:J,numRows:ge,onFocus:N,onInfoButtonClick:()=>{(0,l.R)(),F("brand-identity")},onPromptKeyChange:K,onSubmit:Oe,onStop:ce,popoverClassName:z,ref:R,selectedText:k,setValue:me=>{W(me),Q((0,v.Ud)()),me.length===0?K(void 0):Te({inputText:me}),me.length>=a.J&&d()},shouldHidePromptOptions:ie,shouldShowCharCount:de,streamingState:re,value:A}))}},66956:function(T,t,e){e.d(t,{v:()=>Ce,R:()=>re});var n=e(160553),o=e.n(n),i=e(174161),r=e(661787),u=e(120733),a=e(522429),h=e(999928),v=e(334406),g=e(482053),f=e(338465),s=e(969145),m=e(352635),l=e(260175),d=e(759078),p=e(246120),E=e(100310),b=e(204482),O=e(232342),C=e(300036),S=e(565983),P=e(484248);const y=Oe=>{let{selectedOption:ce}=Oe;S.G9.track({event_name:"UserSelectsOptionFromDropdown",action:P.kA.Click,object_identifier:P.GN.AIModalDropdown,object_type:P.W9.TextEditor,object_value:ce})};var c=e(600194),j=e(967552),N=e(69003),Z=e(143292),z=e.n(Z);const k=Oe=>{let{onInfoButtonClick:ce}=Oe;const[fe,de]=(0,i.useState)(!1),{breakpoints:ge}=(0,s.F)(),{platform:Te}=(0,l.i)(ge),me=Te==="mobile",be=(0,N.nO)();return i.createElement(j.Z.Element.Icon,{className:!be&&!fe?z().bounce:void 0,"data-test":"brand-identity-launcher",onClick:()=>{ce==null||ce(),(0,N.vW)()},onMouseEnter:()=>de(!0),onMouseLeave:()=>de(!1),onFocus:()=>de(!0),onBlur:()=>de(!1),style:{margin:0,alignSelf:"start",height:me?"44px":"36px",width:me?"44px":"36px"}},i.createElement(c.Z,{color:"gray.300"}))};var X=e(626205),ie=e(418698);const D=Oe=>{let{children:ce,dataTest:fe,isDisabled:de,isMobile:ge,label:Te,onClick:me,sx:be}=Oe;const[ye,Se]=(0,i.useState)(null),[Pe,Ae]=(0,i.useState)(!1),Ue=ge?void 0:()=>Ae(!0),Le=ge?void 0:()=>Ae(!1);return i.createElement(i.Fragment,null,i.createElement(j.Z.Element.Icon,{ref:Se,"data-test":fe,disabled:de,onBlur:Le,onClick:me,onFocus:Ue,onMouseLeave:Le,onMouseOver:Ue,sx:{"&:disabled":{cursor:"not-allowed"},...be}},ce),i.createElement(ie.Z,{anchor:ye,delay:{enter:500,exit:0},isOpen:Pe,px:2,py:1},Te))};var I=e(517629);const A=(0,I.keyframes)`
  0% {
    background-image: linear-gradient(
        to right,
        transparent,
        rgba(255, 255, 255, 0.5) 50%,
        transparent 55%,
        transparent
    );
    background-repeat: no-repeat;
    background-size: 200% 100%;
    background-position: 200% center;
  }
  100% {
    background-image: linear-gradient(
        to right,
        transparent,
        rgba(255, 255, 255, 0.5) 50%,
        transparent 55%,
        transparent
    );
    background-repeat: no-repeat;
    background-size: 200% 100%;
    background-position: -200% center;
  }
`,W=Oe=>{let{progress:ce=0}=Oe;return i.createElement(f.Z,{sx:{position:"absolute",borderRadius:"6px",animationName:A.toString(),animationDuration:"4s",animationIterationCount:"infinite",left:0,top:0,width:0,height:"100%",backgroundColor:"gray.800",transition:"all 3000ms ease-out"},style:{width:`${ce}%`,transitionDuration:ce?"60000ms":"0ms"}})};var U=e(538312);const K=1800,H=1900,R={inline:{alignSelf:"start",my:1},floating:{margin:0,position:"absolute",bottom:1,right:1}},J=Oe=>{let{characterCount:ce,position:fe="inline",sx:de={}}=Oe,ge="gray.300";return ce>=H?ge="red.300":ce>=K&&(ge="orange.300"),i.createElement(U.Z.Body,{sx:{color:ge,...R[fe],...de}},O.J-ce)};var _=e(394954),F=e(251196),Q=e(516865);const le=Oe=>{let{isSubmitDisabled:ce,onPromptSelected:fe,options:de=X.Z_,popoverClassName:ge,style:Te={},sx:me={}}=Oe;return i.createElement(_.Z,{className:ge,direction:"row",divider:i.createElement(F.Z.Vertical,{my:1,mx:1}),style:Te,sx:{overflow:"hidden",transition:"max-width 0.3s ease-in-out",...me}},Object.keys(de).map(be=>{const{displayedText:ye,prompt:Se}=de[be];return i.createElement(Q.Z.Base,{key:Se,onClick:()=>fe({prompt:Se,key:be}),"aria-label":Se,disabled:ce,sx:{borderRadius:"6px",letterSpacing:0,px:2,textTransform:"none",whiteSpace:"nowrap","&:focus":{boxShadow:"none"},"&.focus-visible":{outline:"2px solid black",outlineOffset:-2},"&:hover":{backgroundColor:"gray.900"}}},i.createElement(U.Z.Body,{sx:{my:0}},ye??Se))}))},re=4,pe={marginTop:1,maxHeight:"240px"},Ce=(0,i.forwardRef)((Oe,ce)=>{let{closeAIWriter:fe,fullPromptLength:de,hasError:ge,isLoading:Te,numRows:me,onFocus:be,onInfoButtonClick:ye,onPromptKeyChange:Se,onStop:Pe,onSubmit:Ae,popoverClassName:Ue,selectedText:Le,setValue:$,shouldHidePromptOptions:x,shouldShowCharCount:B,streamingState:w,value:M}=Oe;const{breakpoints:q}=(0,s.F)(),{platform:V}=(0,l.i)(q),ae=V==="mobile",[ue,ve]=(0,i.useState)(null),Me=!x&&!ge&&!M.length&&w!=="streaming";(0,i.useEffect)(()=>{ue&&setTimeout(()=>ue.focus())},[ue,w]);const oe=(0,d.Z)(ue),te=(0,p.Z)(ce,ve),se=(0,i.useMemo)(()=>{if(Te||w==="streaming")return"busy";if(!(ge||de>O.J))return"listening"},[de,ge,Te,w]),L=(0,i.useMemo)(()=>w==="streaming"||de>O.J,[de,w]),G=(0,i.useMemo)(()=>!M||L,[L,M]),Y=(0,i.useCallback)(Ee=>{let{prompt:Ie,key:Re}=Ee;$(Ie),y({selectedOption:Ie}),Le?Ae({selectedTextPrompt:Re}):(Se(Re),ue&&(ue.focus(),ue.setSelectionRange(Ie.length,Ie.length)))},[Se,Ae,Le,$,ue]),ee=(0,i.useMemo)(()=>M.length===0?i.createElement(k,{onInfoButtonClick:ye}):Te||w==="streaming"?i.createElement(D,{dataTest:"stop-ai-stream",label:(0,C.t)("Stop",null,{project:"assetManagement.aiWriter"}),onClick:Pe,sx:{mr:0,mt:0,height:ae?"sizes.250":"sizes.200",width:ae?"sizes.250":"sizes.200"}},i.createElement(h.Z,null)):i.createElement(D,{dataTest:"start-ai-stream",isDisabled:G,label:(0,C.t)("Write",null,{project:"assetManagement.aiWriter"}),onClick:()=>Ae({}),sx:{mr:0,mt:0,height:ae?"sizes.250":"sizes.200",width:ae?"sizes.250":"sizes.200"}},i.createElement(v.Z,{color:G?"gray.300":void 0})),[ae,Te,G,w,ye,Pe,Ae,M]),ne=ge||de>=H?oe?"red.300":"red.700":de>=K?"orange.300":"gray.400",he=Ee=>i.createElement(g.Z,{sx:{flexDirection:"column",flexGrow:1}},ae?i.createElement(le,{isSubmitDisabled:L,onPromptSelected:Y,options:Le?X.$N:X.Z_,popoverClassName:Ue,style:Me?pe:{},sx:{marginBottom:"8px",maxHeight:0,transition:"max-height 0.3s ease-in-out"}}):null,i.createElement(g.Z,o()({"data-test":"UserPromptInputUI",sx:{backgroundColor:"gray.900",borderRadius:"6px",flexGrow:1,position:"relative",...(oe||!!ge)&&{outline:"1px solid",outlineColor:ne}},ref:Ee.drawerRef},Ee),i.createElement(W,{progress:Te?100:void 0}),i.createElement(r.$,{animation:se,color:m.colors.gray[100],sx:{marginTop:ae?"4px":void 0}}),i.createElement(f.Z,{sx:{width:"100%",display:"flex",position:"relative"}},i.createElement(a.Z,{ref:te,onChange:$,onFocus:Ie=>{Ie.stopPropagation(),be==null||be()},onKeyPress:Ie=>{Ie.key==="Enter"&&!Ie.shiftKey&&(Ie.preventDefault(),G||Ae({}))},onKeyUp:Ie=>{b.isEscapeKey(Ie)&&(Ie.preventDefault(),Ie.stopPropagation(),fe())},placeholder:X.IS,value:M,rows:me,my:ae?2:"8px",mr:4,sx:{fontWeight:"400","&:disabled":{color:"gray.300"},...w==="streaming"&&{textOverflow:"ellipsis",overflowX:"hidden !important",whiteSpace:"nowrap"}},disabled:!!Te||w==="streaming"}),B&&i.createElement(J,{sx:M.length===0?{}:{px:1},position:(me||0)>=2?"floating":"inline",characterCount:de}),ee)));return i.createElement(E.Z,null,Ee=>i.createElement(u.Z.Drawer,{open:Me&&!ae,placement:"bottom-start",renderTrigger:he,zIndex:Ee},i.createElement(le,{isSubmitDisabled:L,onPromptSelected:Y,options:Le?X.$N:X.Z_,popoverClassName:Ue})))})},626205:function(T,t,e){e.d(t,{$N:()=>i,IS:()=>r,Z_:()=>o});var n=e(300036);const o={paragraph:{displayedText:(0,n.t)("Paragraph",null,{project:"assetManagement.aiWriter"}),prompt:(0,n.t)("Write a paragraph about ",null,{project:"assetManagement.aiWriter"}),eventingKey:"WRITE_A_PARAGRAPH_ABOUT"},salesPitch:{displayedText:(0,n.t)("Pitch",null,{project:"assetManagement.aiWriter"}),prompt:(0,n.t)("Write a sales pitch about ",null,{project:"assetManagement.aiWriter"}),eventingKey:"WRITE_A_SALES_PITCH_ABOUT"},blurb:{displayedText:(0,n.t)("Blurb",null,{project:"assetManagement.aiWriter"}),prompt:(0,n.t)("Write a blurb about ",null,{project:"assetManagement.aiWriter"}),eventingKey:"WRITE_A_BLURB_ABOUT"}},i={simplify:{prompt:(0,n.t)("Simplify",null,{project:"assetManagement.aiWriter"}),id:2,eventingKey:"SIMPLIFY"},shorten:{prompt:(0,n.t)("Shorten",null,{project:"assetManagement.aiWriter"}),id:3,eventingKey:"SHORTEN"},lengthen:{prompt:(0,n.t)("Lengthen",null,{project:"assetManagement.aiWriter"}),id:4,eventingKey:"LENGTHEN"}},r=(0,n.t)("What do you need?",null,{project:"assetManagement.aiWriter"})},223563:function(T,t,e){e.d(t,{f:()=>i,z:()=>n});const n="https://www.squarespace.com/cgterms",o={"en-US":"https://www.squarespace.com/cgterms","es-419":"https://es.squarespace.com/condiciones-generacion-contenido","de-DE":"https://de.squarespace.com/bedingungen-fuer-die-generierung-von-inhalten","fr-FR":"https://fr.squarespace.com/conditions-relatives-a-la-generation-de-contenu","it-IT":"https://it.squarespace.com/terminicg","ja-JP":"https://ja.squarespace.com/cgterms","pt-BR":"https://pt.squarespace.com/termosgc"},i=r=>r&&r in o?o[r]:o["en-US"]},232342:function(T,t,e){e.d(t,{J:()=>n});const n=2e3},358111:function(T,t,e){e.d(t,{$:()=>n});const n="https://support.squarespace.com/hc/articles/16282290976013"},255709:function(T,t,e){e.d(t,{Je:()=>i,hd:()=>r,v_:()=>o});var n=e(300036);const o=(0,n.t)("Squarespace AI",null,{project:"assetManagement.aiWriter"}),i=(0,n.t)("Squarespace AI (Unavailable)",null,{project:"assetManagement.aiWriter"}),r=(0,n.t)(`Squarespace AI
Text selection exceeds allowed length.`,null,{project:"assetManagement.aiWriter"})},682578:function(T,t,e){e.d(t,{T:()=>n});const n="https://www.youtube.com/watch?v=YDNDfZz2X2E"},824830:function(T,t,e){e.r(t),e.d(t,{useAIModalContext:()=>S.u,TextSelectedPromptOptions:()=>c.$N,setAITermsCookie:()=>Pe.qv,ModalBodyUI:()=>p.u,getHasSeenBrandIdentityCookie:()=>Pe.nO,ErrorBoundary:()=>j.S,KBGuideLink:()=>B.$,ModalDialogUI:()=>O.q,useGeneratedPreview:()=>R.s,UserPromptInput:()=>P.V,AIWriterLauncher:()=>z.C,ModalButtonsUI:()=>E.n,getAITermsLink:()=>$.f,TutorialVideoPlayer:()=>X.N,getFormattedPrompt:()=>Le.r,getGenerateTextStream:()=>o.Z,trackViewPreviewError:()=>me.A,ModalTitleUI:()=>C.z,getRTEItemConfig:()=>re.L,setLegalTrackingPayload:()=>pe.oT,BrandToneLabels:()=>W.fS,trackSaveBrandIdentity:()=>be.$,AITermsModalUI:()=>r.H,BrandIdentityFormUI:()=>I.U,iconTitleTooBig:()=>M.hd,BrandIdentityPanel:()=>D.J,AIStandaloneButton:()=>J.Y,CharacterLimit:()=>x.J,DefaultPromptOptions:()=>c.Z_,setBrandPreviewCookies:()=>Pe.yA,setTrackingPayload:()=>pe.aQ,trackInputDescription:()=>Te.R,trackOpenBrandIdentity:()=>Oe.R,trackSelectTone:()=>ce.e,useTakeRate:()=>Se.R,DiscardModalUI:()=>U.V,useBrandIdentityForm:()=>K.q,iconTitleUnavailable:()=>M.Je,filterIdsToSave:()=>Se.y,AITermsLink:()=>$.z,setI18nInstance:()=>F.U,AIModalContextProvider:()=>S.G,AIStandaloneButtonUI:()=>_.r,getBrandPreviewCookies:()=>Pe.R0,setBrandIdTrackingPayload:()=>pe.Ll,trackInputCustomTone:()=>ge._,brandIdentityApi:()=>n.c,AITermsModal:()=>u.z,getAINewFeatureCookie:()=>Pe.hk,ManagedModals:()=>k.U,ModalContainerUI:()=>b._,SaveErrorModal:()=>H.h,ServiceUnavailableModal:()=>a.A,trackDiscardChanges:()=>fe.u,AnimatedBoltUI:()=>d,AIWriterContent:()=>Z.N,markdownToHTML:()=>Ae.i,createAIWriterStore:()=>Q.c,setAINewFeatureCookie:()=>Pe.az,BrandIdentityPreviewUI:()=>A.V,useAIServiceState:()=>Ue.D,BrandIdentityModal:()=>ie.v,TextBarTutorialLink:()=>w.T,AI_WRITER_RTE_COMMAND:()=>le.V,getApiHealthCheck:()=>ye.m,setHasSeenBrandIdentityCookie:()=>Pe.vW,trackUserSavesGeneratedText:()=>Ce.A,UserPromptInputUI:()=>y.v,iconTitle:()=>M.v_,trackViewPreview:()=>de.S,getAITermsCookie:()=>Pe.EJ,isDefaultBrandTone:()=>W.S5,AIWriter:()=>N.J,GenerateTextSSE:()=>i.w});var n=e(972242),o=e(985142),i=e(156286),r=e(490087),u=e(735680),a=e(457748),h=e(174161),v=e(338465),g=e(517629);const f=(0,g.keyframes)`
	0% {
		transform: translateY(0%);
	}
	10% {
		transform: translateY(0%);
		animation-timing-function: ease-in;
	}
	30% {
		transform: translateY(100%);
		animation-timing-function: ease-in;
	}
	40% {
		transform: translateY(100%) translateX(100%);
		animation-timing-function: ease-in;
	}
	41% {
		transform: translateY(-100%) translateX(100%);
		animation-timing-function: ease-in;
	}
	42% {
		transform: translateY(-100%);
	}
	70% {
		transform: translateY(-100%);
		animation-timing-function: ease-in;
	}
	/* 80% {
		transform: translateY(-20%);
		animation-timing-function: ease-in;
	} */
	85% {
		transform: translateY(0%);
		animation-timing-function: ease-out;
	}
	90% {
		transform: translateY(-10%);
		animation-timing-function: ease-in;
	}
	95% {
		transform: translateY(0%);
		animation-timing-function: ease-out;
	}
	100% {
		transform: translateY(-5%);
		animation-timing-function: ease-in;
	}
`,s={fill:"currentColor"},m={animationName:f.toString(),animationDuration:"1s"},l={strokeDasharray:29.25,strokeDashoffset:0},d=q=>{let{animation:V,color:ae,onMouseEnter:ue,onMouseLeave:ve,sx:Me}=q;return h.createElement(v.Z,{sx:{color:ae,lineHeight:0,overflow:"hidden",zIndex:0,...Me},onMouseEnter:ue,onMouseLeave:ve},h.createElement(v.Z,{as:"svg",sx:{flex:0,strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",stroke:"none",paintOrder:"stroke fill markers",...V==="load"?l:s,...V==="slam"&&m},width:"36px",height:"36px",viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg"},h.createElement(v.Z,{as:"mask",id:"bolt-mask"},h.createElement(v.Z,{as:"path",d:"M19 7H18L12 21H17V29H18L24 15H19V7Z",fill:"white"})),h.createElement(v.Z,{as:"path",id:"bolt-path",d:"M19 7H18L12 21H17V29H18L24 15H19V7Z",stroke:ae||"black",strokeWidth:"2",mask:"url(#bolt-mask)"},h.createElement(v.Z,{as:"animate",attributeName:"stroke-dashoffset",from:"0",to:"58.5",dur:"2s",repeatCount:"indefinite"}))))};var p=e(822382),E=e(106464),b=e(563002),O=e(490048),C=e(908255),S=e(365093),P=e(562884),y=e(66956),c=e(626205),j=e(17500),N=e(309109),Z=e(747409),z=e(365570),k=e(481531),X=e(965483),ie=e(504513),D=e(454382),I=e(741919),A=e(483137),W=e(552869),U=e(693141),K=e(250672),H=e(681109),R=e(564388),J=e(839974),_=e(771691),F=e(811699),Q=e(20268),le=e(378201),re=e(489548),pe=e(565983),Ce=e(508417),Oe=e(393316),ce=e(851978),fe=e(762242),de=e(122078),ge=e(521744),Te=e(220757),me=e(526191),be=e(57714),ye=e(644297),Se=e(712953),Pe=e(69003),Ae=e(805396),Ue=e(228866),Le=e(205865),$=e(223563),x=e(232342),B=e(358111),w=e(682578),M=e(255709)},20268:function(T,t,e){e.d(t,{c:()=>u});var n=e(851939),o=e(426206);const i={streamingState:"idle",responseId:null},r=(0,n.createReducer)(i,a=>{a.addCase(o.jX,h=>{h.streamingState="streaming",h.responseId=null,h.error=void 0}).addCase(o.Zg,(h,v)=>{let{payload:g}=v;h.responseId=g.responseId}).addCase(o.mG,h=>{h.streamingState="complete"}).addCase(o.n7,h=>{h.streamingState="idle",h.error=void 0}).addCase(o.Vo,(h,v)=>{let{payload:g}=v;h.error=g.error,h.streamingState="idle"}).addCase(o.Ud,h=>{h.responseId=null,h.streamingState="idle",h.error=void 0})}),u=()=>(0,n.configureStore)({reducer:{generateTextStream:r},middleware:a=>[...a({immutableCheck:!1})],devTools:{name:"ai-writer-store"}})},426206:function(T,t,e){e.d(t,{Ud:()=>h,Vo:()=>a,Zg:()=>i,jX:()=>o,mG:()=>u,n7:()=>r});var n=e(851939);const o=(0,n.createAction)("GENERATE_TEXT_STREAM_START"),i=(0,n.createAction)("GENERATE_TEXT_STREAM_UPDATE"),r=(0,n.createAction)("GENERATE_TEXT_STREAM_CANCEL"),u=(0,n.createAction)("GENERATE_TEXT_STREAM_END"),a=(0,n.createAction)("GENERATE_TEXT_STREAM_ERROR"),h=(0,n.createAction)("GENERATE_TEXT_STREAM_RESET")},828654:function(T,t,e){e.d(t,{e:()=>o,n:()=>i});var n=e(697710);const o=r=>r.generateTextStream,i=(0,n.P1)(o,r=>{let{error:u}=r;return u})},489548:function(T,t,e){e.d(t,{L:()=>o});var n=e(378201);const o=i=>{let{RTEField:r}=i;return{suppressActiveState:!0,collapses:!1,command:n.V,renderer:r}}},762242:function(T,t,e){e.d(t,{u:()=>i});var n=e(565983),o=e(484248);const i=r=>{let{customTone:u,description:a,tone:h}=r;n.MH.track({event_name:"UserDiscardsBrandIDChanges",action:o.kA.Discard,custom_personality_text:u,description_text:a,object_identifier:o.GN.BrandDiscardChanges,object_type:o.W9.Changes,personality:h})}},521744:function(T,t,e){e.d(t,{_:()=>i});var n=e(565983),o=e(484248);const i=r=>{let{customTone:u,description:a,tone:h}=r;n.MH.track({event_name:"UserInputsCustomPersonality",action:o.kA.Input,custom_personality_text:u,description:a,object_idenfitier:o.GN.BrandCustomTone,object_type:o.W9.TextEditor,object_value:u,personality:h})}},220757:function(T,t,e){e.d(t,{R:()=>i});var n=e(565983),o=e(484248);const i=r=>{let{description:u}=r;n.MH.track({event_name:"UserInputsBrandDescription",action:o.kA.Click,description_text:u,object_identifier:o.GN.BrandDescription,object_type:o.W9.TextEditor})}},393316:function(T,t,e){e.d(t,{R:()=>i});var n=e(565983),o=e(484248);const i=()=>{n.MH.track({event_name:"UserOpensBrandIDService",action:o.kA.Click,object_identifier:o.GN.OpenBrandIdentity,object_type:o.W9.Button})}},57714:function(T,t,e){e.d(t,{$:()=>i});var n=e(565983),o=e(484248);const i=r=>{let{customTone:u,description:a,tone:h,visualTone:v}=r;n.MH.track({event_name:"UserSavesBrandIDChanges",action:o.kA.Save,custom_personality_text:u,description_text:a,object_identifier:o.GN.BrandSaveChanges,object_type:o.W9.Changes,personality:h,visual_tone:v})}},851978:function(T,t,e){e.d(t,{e:()=>i});var n=e(565983),o=e(484248);const i=r=>{let{customTone:u,description:a,tone:h}=r;n.MH.track({event_name:"UserSelectsPersonality",action:o.kA.Click,custom_personality_text:u,description_text:a,object_identifier:o.GN.BrandToneOption,object_type:o.W9.Button,personality:h})}},122078:function(T,t,e){e.d(t,{S:()=>i});var n=e(565983),o=e(484248);const i=r=>{let{customTone:u,description:a,previewDuration:h,responseIds:v,tone:g}=r;n.MH.track({event_name:"UserViewsBrandIDPreview",action:o.kA.View,custom_personality_text:u,description_text:a,object_identifier:o.GN.BrandPreview,object_type:o.W9.Preview,personality:g,preview_generation_duration_ms:h,response_id_list:v})}},526191:function(T,t,e){e.d(t,{A:()=>i});var n=e(565983),o=e(484248);const i=r=>{let{customTone:u,description:a,errorCode:h,tone:v}=r;n.MH.track({event_name:"UserViewsPreviewError",action:o.kA.View,custom_personality_text:u,description_text:a,object_identifier:o.GN.BrandPreviewError,object_type:o.W9.Error,object_value:h,personality:v})}},126472:function(T,t,e){e.d(t,{M:()=>i});var n=e(565983),o=e(484248);const i=function(){let{isTextSelected:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.G9.track({event_name:"UserClicksAILaunch",action:o.kA.Click,object_identifier:o.GN.AILaunchButton,object_type:o.W9.TextEditor,object_value:r?"highlighted":"cursor"})}},76316:function(T,t,e){e.d(t,{c:()=>i});var n=e(565983),o=e(484248);const i=r=>{let{responseId:u}=r;n.G9.track({actor:"system",event_name:"SystemInsertsAIText",action:o.kA.Insert,object_identifier:o.GN.AIInsertText,object_type:o.W9.Text,response_id:u})}},723202:function(T,t,e){e.d(t,{R:()=>i});var n=e(565983),o=e(484248);const i=r=>{let{errorCode:u,errorMessage:a}=r;n.G9.track({event_name:"UserViewsErrorModal",action:o.kA.View,object_display_name:a,object_identifier:o.GN.AIErrorModal,object_type:o.W9.Modal,object_value:u})}},69003:function(T,t,e){e.d(t,{EJ:()=>s,R0:()=>b,az:()=>m,hk:()=>l,nO:()=>p,qv:()=>f,vW:()=>d,yA:()=>E});var n=e(994336),o=e.n(n),i=e(545334),r=e.n(i);const u="ai_terms",a="ai_new_feature",h="brand_identity_view",v="brand_id_blurb",g="brand_id_email",f=()=>{const O=r()().add(400,"days").toString();o().set(u,"true",{expires:O})},s=()=>{const O=o().get(u);return!!O&&O==="true"},m=()=>{const O=r()().add(400,"days").toString();o().set(a,"true",{expires:O})},l=()=>{const O=o().get(a);return!!O&&O==="true"},d=()=>{const O=r()().add(400,"days").toString();o().set(h,"true",{expires:O})},p=()=>{const O=o().get(h);return!!O&&O==="true"},E=O=>{let{blurbPreview:C,emailPreview:S}=O;C&&o().set(v,C),S&&o().set(g,S)},b=()=>({blurbPreview:o().get(v),emailPreview:o().get(g)})},644297:function(T,t,e){e.d(t,{m:()=>r});var n=e(456903),o=e(428563),i=e(505685);const r=async function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.P.Default;const a="/api/v1/ai-content-generator/health/upstream";return n.default.get(a,{params:{profile:u}}).then(h=>h.data).catch(h=>(i.Z.withSquarespaceScope(()=>{i.Z.captureException(h)}),{isHealthy:!1}))}},205865:function(T,t,e){e.d(t,{r:()=>n});const n=o=>{let{commandId:i,inputValue:r="",isTextSelected:u=!1,selectedText:a}=o;return u&&a?i===7?`${r.trim()}: ${a}`:a:r}},805396:function(T,t,e){e.d(t,{i:()=>u});var n=e(952552);const o=a=>{var h;return((h=a.match(/&quot;/g))===null||h===void 0?void 0:h.length)===2?a.replace(/^&quot;(.*?)&quot;$/,"$1"):a},i={heading(a,h){const v=Math.max(h,4);return`<h${v}>${o(a)}</h${v}>`},link(a,h,v){return`<a href="#${v.toLowerCase().replace(/[^\w]+/g,"-")}"${h?` title="${h}"`:""}>${v}</a>`},paragraph(a){return`<p>${o(a)}</p>`},strong(a){return`<strong>${o(a)}</strong>`}},r=new n.Marked({async:!1,renderer:i});r.use({renderer:i,async:!1});const u=a=>r.parse(a)},228866:function(T,t,e){e.d(t,{D:()=>i});var n=e(174161),o=e(644297);const i=function(){let{recheckInterval:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const[u,a]=(0,n.useState)("disabled"),h=(0,n.useRef)(),v=(0,n.useCallback)(async()=>{const g=await(0,o.m)();a(g.isHealthy?"ready":"unavailable")},[]);return(0,n.useEffect)(()=>(r?h.current=setInterval(()=>{u==="ready"?clearInterval(h.current):v()},r):u!=="ready"&&v(),()=>{clearInterval(h.current)}),[u,v,r]),u}},598640:function(T,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionPriority=void 0;let e=t.ExtensionPriority=function(n){return n[n.Default=100]="Default",n[n.TextHighlight=101]="TextHighlight",n[n.TextAttributes=102]="TextAttributes",n}({})},633578:function(T,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isVisibleToolbarOption=void 0;const e=n=>!!n.ToolbarOptionComponent;t.isVisibleToolbarOption=e},641448:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ExtensionPriority",{enumerable:!0,get:function(){return n.ExtensionPriority}}),t.HIGHLIGHT=void 0,Object.defineProperty(t,"RTEOption",{enumerable:!0,get:function(){return o.RTEOption}}),Object.defineProperty(t,"ToolbarOptionComponentType",{enumerable:!0,get:function(){return o.ToolbarOptionComponentType}}),Object.defineProperty(t,"ToolbarOptionProps",{enumerable:!0,get:function(){return o.ToolbarOptionProps}}),Object.defineProperty(t,"VisibleToolbarOption",{enumerable:!0,get:function(){return o.VisibleToolbarOption}}),Object.defineProperty(t,"isVisibleToolbarOption",{enumerable:!0,get:function(){return o.isVisibleToolbarOption}});var n=e(598640),o=e(633578);const i=t.HIGHLIGHT="highlight"},667698:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n={ExtensionPriority:!0,isVisibleToolbarOption:!0,setTrackingPayload:!0,RTEEvents:!0};Object.defineProperty(t,"ExtensionPriority",{enumerable:!0,get:function(){return o.ExtensionPriority}}),Object.defineProperty(t,"RTEEvents",{enumerable:!0,get:function(){return r.RTEEvents}}),Object.defineProperty(t,"isVisibleToolbarOption",{enumerable:!0,get:function(){return o.isVisibleToolbarOption}}),Object.defineProperty(t,"setTrackingPayload",{enumerable:!0,get:function(){return r.setTrackingPayload}});var o=e(641448),i=e(303095);Object.keys(i).forEach(function(a){a==="default"||a==="__esModule"||Object.prototype.hasOwnProperty.call(n,a)||a in t&&t[a]===i[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return i[a]}})});var r=e(160060),u=e(346273);Object.keys(u).forEach(function(a){a==="default"||a==="__esModule"||Object.prototype.hasOwnProperty.call(n,a)||a in t&&t[a]===u[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return u[a]}})})},888910:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.AIWriterOptionExtension=void 0;var n=e(770841),o=e(346273),i=e(219879);const r=t.AIWriterOptionExtension=n.Extension.create({name:"aiWriter",addCommands(){return{closeAIWriter:()=>u=>{let{chain:a}=u;return this.editor.storage.aiWriter.AIWriterContent=null,this.editor.storage.aiWriter.isAIWriterOpen=!1,a().clearAllTempBackgroundSelection().run()},openAIWriter:()=>()=>(this.editor.storage.aiWriter.isAIWriterOpen=!0,!0),setAIModalProps:u=>()=>(this.editor.storage.aiWriter.aiModalProps=u,!0),setAIWriterContent:u=>a=>{let{editor:h}=a;return h.storage.aiWriter.AIWriterContent=u,!0}}},addExtensions(){return[o.TempBackgroundSelectionMark.extend({name:"aiWriterBackgroundSelectionMark"}),i.GeneratedTextSelectionNode.extend({addOptions:()=>({getGeneratedResponses:this.options.onUpdate})})]},addStorage(){return{AIWriterContent:null,isAIWriterOpen:!1}},onDestroy(){this.storage.AIWriterContent=null,this.storage.isAIWriterOpen=!1,this.editor.commands.clearAllTempBackgroundSelection()},addKeyboardShortcuts(){return{"Mod-/":()=>this.editor.commands.openAIWriter()}},addOptions(){return{onUpdate:void 0}}})},219879:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratedTextSelectionNode=t.GENERATED_TEXT_SELECTION_NODE_NAME=t.AI_CONTENT_WRAPPER_TAG=void 0;var n=e(15294),o=e(770841),i=e(840692),r=e(890724),u=e(346273);const a=t.AI_CONTENT_WRAPPER_TAG="gen-text",h=t.GENERATED_TEXT_SELECTION_NODE_NAME="generatedTextSelection";let v={};const g=t.GeneratedTextSelectionNode=o.Node.create({name:h,group:"block list",content:"block*",selectable:!0,addCommands(){return{insertCustomContent:f=>{let{responseId:s,content:m}=f;return l=>{var d;let{chain:p,state:E}=l;const{selection:b}=E,{$from:O}=b;return this.storage.originalContent[s]={from:((d=this.storage.originalContent[s])===null||d===void 0?void 0:d.from)||O.pos,status:n.GeneratedResponseStatus.Unedited},p().deleteSelection().insertContent(m.replaceAll("<li></li>","")).run()}},updateTextSelection:f=>{let{isTakeRateEnabled:s,responseId:m}=f;return l=>{let{chain:d,state:p}=l;const{selection:E}=p,{$from:b,$to:O}=E;if(!s){var C;return d().setTextSelection({from:((C=this.storage.originalContent[m||-1])===null||C===void 0?void 0:C.from)||b.pos,to:O.pos}).setMeta("addToHistory",!1).run()}return p.doc.descendants((S,P)=>{if(S.type.name===this.name&&S.attrs.responseId===m)return d().setNodeSelection(P).setMeta("addToHistory",!1).run()}),!1}},cacheStyling:()=>f=>{const{$from:s}=f.state.selection,m=s.node(s.depth);return this.storage.stylingCache={marks:s.marks(),node:{type:m.type,attrs:m.attrs}},!1},applyStyling:()=>f=>{const{chain:s,dispatch:m,state:l}=f,{$from:d,$to:p}=l.selection,E=this.storage.stylingCache,b=E==null?void 0:E.node,O=E==null?void 0:E.marks;if(!m)return!1;let C=!1;for(let P=d.depth;P>0;P--)d.node(P).type.name==="listItem"&&(C=!0);const S=s();return!C&&b&&S.command(P=>{let{tr:y}=P;const c=l.schema.nodes[b.type.name];return!c||b.type.name===this.type.name?!1:(l.doc.descendants((j,N)=>{N>=d.pos&&N<=p.pos&&j.type.name==="paragraph"&&(y=y.replaceWith(N,N+j.nodeSize,c.create(b.attrs,j.content)))}),m(y),!0)}),S.command(P=>{let{tr:y}=P;return(O==null?void 0:O.length)===0?!1:(O==null||O.forEach(c=>{y=y.addMark(d.pos,p.pos,c)}),m(y),!0)}).run()},insertGeneratedContent:f=>{let{responseId:s,content:m}=f;return l=>{const{chain:d,dispatch:p}=l,{schema:E,selection:b}=l.state,{$from:O}=b;if(p){var C;let S=!1;for(let j=O.depth;j>0;j--){const N=O.node(j);if(N.type.name===this.name&&N.attrs.responseId===s){S=!0;break}}const P=document.createElement(a);P.innerHTML=m;const y=i.DOMParser.fromSchema(this.type.schema).parse(P),c=E.nodes[this.name].create({responseId:s},y.content);return this.storage.originalContent[s]={text:c.textContent,from:((C=this.storage.originalContent[s])===null||C===void 0?void 0:C.from)||O.pos,status:n.GeneratedResponseStatus.Unedited},S?d().deleteNode(this.type).command(j=>{let{tr:N,state:Z}=j;const z=Z.schema.nodes.paragraph.createAndFill();if(!z)return!1;const k=Z.selection.$from.before(1);let X=N.insert(k,z);return X=X.setSelection(r.Selection.near(X.doc.resolve(k),1)),p(X),!0}).insertContent({type:this.name,attrs:{responseId:s},content:c.toJSON().content},{updateSelection:!0,parseOptions:{preserveWhitespace:!1}}).run():d().insertContent({type:this.name,attrs:{responseId:s},content:c.toJSON().content},{updateSelection:!0,parseOptions:{preserveWhitespace:!1}}).run()}return!1}}}},addKeyboardShortcuts(){return{Enter:f=>{let{editor:s}=f;const{view:m,state:l}=s;if(!(0,u.hasParentNodeOfType)(l.selection,l.schema.nodes[this.name]))return!1;const{$from:p}=l.selection;let E=null,b=l.tr;for(let y=p.depth;y>0;y--){const c=p.node(y);if(c.type.name==="listItem")return!1;if(c.type.name===this.name){E=c;break}}if(!E)return!1;const O=l.schema.nodes.paragraph.createAndFill();if(!O||!E)return!1;const C=m.endOfTextblock("right",l),S=p.pos===p.start();if(p.pos===p.start(-1)+E.nodeSize-3){let y;p.after()===p.after(1)-1?(y=p.after(1),b=b.insert(y,O)):(y=p.after(),b=b.split(r.Selection.near(b.doc.resolve(y),1).from)),b=b.setSelection(r.Selection.near(b.doc.resolve(y),1))}else{if(C)return!1;if(S){const y=p.before()-1;b=b.insert(y,O),b=b.setSelection(r.Selection.near(b.doc.resolve(y),1))}else b=b.split(p.pos,1)}return m.dispatch?(m.dispatch(b.scrollIntoView()),!0):!1}}},addAttributes(){return{responseId:{default:null,parseHTML:f=>f.getAttribute("data-content-id"),renderHTML:f=>f.responseId?{"data-content-id":f.responseId}:{}},isEdited:{default:!1,parseHTML:f=>f.getAttribute("data-content-edited"),renderHTML:f=>f.isEdited?{"data-content-edited":f.isEdited}:{}}}},addOptions(){return{getGeneratedResponses:void 0}},addStorage(){return{originalContent:{}}},onCreate(){const{editor:f,storage:s}=this;s.originalContent={...v},f.state.doc.descendants(m=>{if(m.type.name===this.name){const l=v[m.attrs.responseId]||{};s.originalContent[m.attrs.responseId]={...l,status:n.GeneratedResponseStatus.Cached}}})},onUpdate(){var f;const{editor:s,options:m,storage:l}=this;if(Object.keys(l.originalContent).length===0)return!1;const{view:d,state:p}=s;let E=p.tr,b=!1;const O={};p.doc.descendants((C,S)=>{if(C.type.name===this.name&&l.originalContent[C.attrs.responseId]){const{status:P,text:y}=l.originalContent[C.attrs.responseId]||{},c=C.textContent!==y;P!==n.GeneratedResponseStatus.Cached&&c!==C.attrs.isEdited&&(b=!0,l.originalContent[C.attrs.responseId]={...l.originalContent[C.attrs.responseId],text:y,status:c?n.GeneratedResponseStatus.Edited:n.GeneratedResponseStatus.Unedited},E=E.setNodeMarkup(S,this.type,{...C.attrs,isEdited:c})),O[C.attrs.responseId]=l.originalContent[C.attrs.responseId]}}),Object.keys(l.originalContent).forEach(C=>{O[C]||(O[C]={...l.originalContent[C],status:n.GeneratedResponseStatus.Deleted})}),v={...v,...l.originalContent},b&&(E.setMeta("addToHistory",!1),d.dispatch(E)),m==null||(f=m.getGeneratedResponses)===null||f===void 0||f.call(m,O)},parseHTML(){return[{tag:a}]},renderHTML(f){let{HTMLAttributes:s}=f;return[a,s,0]}})},442090:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.aiWriterOptionConfig=void 0;var n=e(888910);const o=i=>({tiptapExtension:n.AIWriterOptionExtension.configure({onUpdate:i.onGeneratedTextUpdate}),optionId:"aiWriter",parentExtensions:["tempBackgroundSelection"]});t.aiWriterOptionConfig=o},889094:function(T,t){Object.defineProperty(t,"__esModule",{value:!0}),t.aiWriterOptionUtils=void 0;const e=400,n=900,o=8,i=u=>{var a,h;const v=(a=u.view.state)===null||a===void 0?void 0:a.doc,g=(h=u.view.state)===null||h===void 0?void 0:h.selection,f=(g==null?void 0:g.from)||0,s=g==null?void 0:g.to;return{selectedText:s?v==null?void 0:v.cut(f,s).textContent:void 0}},r=(u,a)=>{var h,v,g,f;const s=P=>{let{textContent:y,responseId:c}=P;if(!c){a&&u.chain().cacheStyling().run();return}const j=u.chain();a?j.insertGeneratedContent({responseId:c,content:y}):j.insertCustomContent({responseId:c,content:y}),j.clearAllTempBackgroundSelection().run();const N=u.chain().updateTextSelection({isTakeRateEnabled:!!a,responseId:c}).setTempBackgroundSelection();a&&N.applyStyling(),N.setMeta("addToHistory",!1).run()},m=function(){let{shouldFocusRTE:P}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(u.storage.aiWriter.isAIWriterOpen){const y=u.chain().closeAIWriter().clearAllTempBackgroundSelection();P&&y.focus(),y.run()}},l=()=>{u.chain().openAIWriter().setTempBackgroundSelection().run()},d=!!((h=u.storage)!==null&&h!==void 0&&(h=h.aiWriter)!==null&&h!==void 0&&h.AIWriterContent)&&!!((v=u.storage)!==null&&v!==void 0&&(v=v.aiWriter)!==null&&v!==void 0&&v.isAIWriterOpen),p=((g=u.storage)===null||g===void 0||(g=g.aiWriter)===null||g===void 0?void 0:g.AIWriterContent)||null,E=P=>{p||u.chain().setAIWriterContent(P).run()},b=((f=u.storage)===null||f===void 0||(f=f.aiWriter)===null||f===void 0?void 0:f.aiModalProps)||null,{selectedText:O}=i(u);return{aiModalProps:b,AIWriterContent:p,closeAIWriter:m,getContainerWidth:P=>{let{anchorWidth:y}=P;const c=document.documentElement.clientWidth-o,j=c<e?c:e,N=c<n?c:n;return y?j>y?`${j}px`:N<y?`${N}px`:`${y}px`:"sizes.750"},insertText:s,isAIWriterOpen:d,openAIWriter:l,selectedText:O,setAIModalProps:P=>{u.chain().setAIModalProps(P).run()},setAIWriterContent:E}};t.aiWriterOptionUtils=r},968721:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"aiWriterOptionConfig",{enumerable:!0,get:function(){return n.aiWriterOptionConfig}}),Object.defineProperty(t,"aiWriterOptionUtils",{enumerable:!0,get:function(){return o.aiWriterOptionUtils}});var n=e(442090),o=e(889094)},511044:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.BlockquoteOptionExtension=void 0;var n=e(585836),o=e(187121);const i=t.BlockquoteOptionExtension=n.Blockquote.extend({addKeyboardShortcuts(){return{'Mod-Shift-"':()=>{const{toggleBlockquote:r}=(0,o.blockquoteOptionUtils)(this.editor);return r({isKeyboardShortcut:!0})}}}})},124389:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.blockquoteOptionConfig=void 0;var n=e(511044);const o=()=>({tiptapExtension:n.BlockquoteOptionExtension,optionId:"blockquote"});t.blockquoteOptionConfig=o},187121:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.getIsBlockquoteActive=t.blockquoteOptionUtils=void 0;var n=e(164749),o=e(763017),i=e(301582),r=e(161172),u=e(838322);const a=v=>!!v.isActive("blockquote");t.getIsBlockquoteActive=a;const h=v=>{const g=()=>(0,r.getIsScaledTextActive)(v)||(0,o.getIsBulletListActive)(v)||(0,i.getIsNumberedListActive)(v);return{toggleBlockquote:function(){let{isKeyboardShortcut:s,skipTracking:m}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(g())return!1;m||(0,n.trackToggleBlockQuote)({enabled:a(v),isKeyboardShortcut:s});const l=a(v),{bubbleUpCommandOnHighlightNode:d}=(0,u.textHighlightOptionUtils)(v);return d({chainCommandCallback:p=>p.toggleBlockquote().focus(),offset:l?-1:1}).run()},getIsBlockquoteDisabled:g}};t.blockquoteOptionUtils=h},777620:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n={blockquoteOptionConfig:!0};Object.defineProperty(t,"blockquoteOptionConfig",{enumerable:!0,get:function(){return o.blockquoteOptionConfig}});var o=e(124389),i=e(187121);Object.keys(i).forEach(function(r){r==="default"||r==="__esModule"||Object.prototype.hasOwnProperty.call(n,r)||r in t&&t[r]===i[r]||Object.defineProperty(t,r,{enumerable:!0,get:function(){return i[r]}})})},554163:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.BoldOptionExtension=void 0;var n=e(179286),o=e(632359);const i=t.BoldOptionExtension=n.Bold.extend({addKeyboardShortcuts(){return{"Mod-b":()=>{const{toggleBold:r}=(0,o.boldOptionUtils)(this.editor);return r({isKeyboardShortcut:!0})}}}})},379969:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.boldOptionConfig=void 0;var n=e(554163);const o=()=>({tiptapExtension:n.BoldOptionExtension,optionId:"bold"});t.boldOptionConfig=o},632359:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.boldOptionUtils=void 0;var n=e(160060),o=e(812162);const i=r=>{const u=()=>!!(r!=null&&r.isActive("bold")),{getIsTextStyleActive:a}=(0,o.textStyleOptionUtils)(r);return{toggleBold:function(){let{isKeyboardShortcut:g,skipTracking:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return f||(0,n.trackEmphasizeText)({enabled:u(),isKeyboardShortcut:g,option:n.OptionObjectIdentifier.Bold}),r==null?void 0:r.chain().toggleBold().focus().run()},getIsBoldActive:u,getIsBoldDisabled:()=>a("monospace")}};t.boldOptionUtils=i},430458:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BoldOptionExtension",{enumerable:!0,get:function(){return n.BoldOptionExtension}}),Object.defineProperty(t,"boldOptionConfig",{enumerable:!0,get:function(){return o.boldOptionConfig}}),Object.defineProperty(t,"boldOptionUtils",{enumerable:!0,get:function(){return i.boldOptionUtils}});var n=e(554163),o=e(379969),i=e(632359)},500096:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.BulletListOptionExtension=void 0;var n=e(69205),o=e(172719),i=e(53509);const r=t.BulletListOptionExtension=n.BulletList.extend({addExtensions(){return[i.ListItemExtension]},addKeyboardShortcuts(){return{"Mod-Alt-B":()=>{const{toggleBulletList:u}=(0,o.bulletListOptionUtils)(this.editor);return u({isKeyboardShortcut:!0})}}}})},53509:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.ListItemExtension=void 0;var n=e(596399);const o=t.ListItemExtension=n.ListItem.extend({content:"(paragraph|block) block*"})},590977:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.bulletListOptionConfig=void 0;var n=e(500096);const o=()=>({tiptapExtension:n.BulletListOptionExtension.configure({HTMLAttributes:{"data-rte-list":!0}}),optionId:"bulletList"});t.bulletListOptionConfig=o},172719:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.getIsBulletListActive=t.bulletListOptionUtils=void 0;var n=e(571861),o=e(777620),i=e(301582),r=e(161172),u=e(838322);const a=v=>!!v.isActive("bulletList");t.getIsBulletListActive=a;const h=v=>{const g=()=>(0,r.getIsScaledTextActive)(v)||(0,o.getIsBlockquoteActive)(v);return{toggleBulletList:function(){let{isKeyboardShortcut:s,skipTracking:m}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(g())return!1;m||(0,n.trackToggleList)({enabled:a(v),isKeyboardShortcut:s,isOrdered:!1});const l=a(v),d=(0,i.getIsNumberedListActive)(v),{bubbleUpCommandOnHighlightNode:p}=(0,u.textHighlightOptionUtils)(v);return p({chainCommandCallback:E=>E.toggleBulletList().focus(),offset:d?0:l?-2:2}).run()},getIsBulletListDisabled:g}};t.bulletListOptionUtils=h},763017:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n={bulletListOptionConfig:!0};Object.defineProperty(t,"bulletListOptionConfig",{enumerable:!0,get:function(){return o.bulletListOptionConfig}});var o=e(590977),i=e(172719);Object.keys(i).forEach(function(r){r==="default"||r==="__esModule"||Object.prototype.hasOwnProperty.call(n,r)||r in t&&t[r]===i[r]||Object.defineProperty(t,r,{enumerable:!0,get:function(){return i[r]}})})},547415:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.characterCountOptionConfig=void 0;var n=e(305137);const o=i=>{let{limit:r}=i;return{tiptapExtension:n.CharacterCount.configure({limit:r}),optionId:"characterCount"}};t.characterCountOptionConfig=o},780304:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"characterCountOptionConfig",{enumerable:!0,get:function(){return n.characterCountOptionConfig}});var n=e(547415)},499292:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.ClearFormattingOptionExtension=void 0;var n=e(770841),o=e(348789);const i=t.ClearFormattingOptionExtension=n.Extension.create({name:"clearFormatting",addKeyboardShortcuts(){return{"Mod-\\":()=>{const{clearFormatting:r}=(0,o.clearFormattingOptionUtils)(this.editor);return r({isKeyboardShortcut:!0})}}}})},870140:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.clearFormattingOptionConfig=void 0;var n=e(499292);const o=()=>({tiptapExtension:n.ClearFormattingOptionExtension,optionId:"clearFormatting"});t.clearFormattingOptionConfig=o},348789:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.clearFormattingOptionUtils=void 0;var n=e(160060);const o=i=>({clearFormatting:function(){let{isKeyboardShortcut:u,skipTracking:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return a||(0,n.trackClearFormatting)({isKeyboardShortcut:u}),i==null?void 0:i.chain().focus().unsetAllMarks().command(h=>{let{commands:v}=h;return v.removeHighlight?v.removeHighlight():!0}).run()}});t.clearFormattingOptionUtils=o},113481:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"clearFormattingOptionConfig",{enumerable:!0,get:function(){return n.clearFormattingOptionConfig}}),Object.defineProperty(t,"clearFormattingOptionUtils",{enumerable:!0,get:function(){return o.clearFormattingOptionUtils}});var n=e(870140),o=e(348789)},907529:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.EllipsisExtension=void 0;var n=e(770841);function o(r){return!!r.tiptapExtension}const i=t.EllipsisExtension=n.Extension.create({name:"more",addExtensions(){return this.options.toolbarOptions.filter(o).map(r=>r.tiptapExtension)}})},303510:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.ellipsisOptionConfig=void 0;var n=e(907529);const o=i=>{const{toolbarOptions:r}=i;return{tiptapExtension:n.EllipsisExtension.configure({toolbarOptions:r}),optionId:"more"}};t.ellipsisOptionConfig=o},181675:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ellipsisOptionConfig",{enumerable:!0,get:function(){return n.ellipsisOptionConfig}});var n=e(303510)},826651:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.IndentationOptionExtension=void 0,e(392338);var n=e(770841),o=e(890724),i=e(691214);const r=0,u=t.IndentationOptionExtension=n.Extension.create({name:"indentation",addOptions(){return{types:["listItem","paragraph","textStyleHeading","textStyleParagraph","textStyleCodeBlock"],maxLevel:Number.MAX_SAFE_INTEGER,setIndentAttributes:a=>({style:a.indent?`margin-left: ${a.indent*40}px`:null})}},addGlobalAttributes(){return[{types:this.options.types,attributes:{indent:{default:null,renderHTML:a=>({"data-indent":a.indent||null,...this.options.setIndentAttributes(a)}),parseHTML:a=>{const h=Number(a.dataset.indent);if(h&&h>r)return h;const v=a.style.marginLeft;return/^\d+px$/.test(v)?Math.round(Number.parseInt(v)/40)??null:null}}}}]},addCommands(){const a=(g,f,s)=>{var m;const l=g==null||(m=g.doc)===null||m===void 0?void 0:m.nodeAt(f);if(l){const d=(l.attrs.indent||0)+s,{maxLevel:p}=this.options,E=Math.min(p,Math.max(r,d));if(E!==l.attrs.indent){const{indent:b,...O}=l.attrs,C=E>r?{...O,indent:E}:O;return g.setNodeMarkup(f,l.type,C,l.marks)}}return g},h=(g,f)=>{const{doc:s,selection:m}=g,l=m&&(m instanceof o.TextSelection||m instanceof o.AllSelection);if(s&&l){const{from:d,to:p}=m;s.nodesBetween(d,p,(E,b)=>this.options.types.includes(E.type.name)?(g=a(g,b,f),!1):!0)}return g},v=g=>()=>f=>{let{tr:s,state:m,dispatch:l}=f;const{selection:d}=m;return s=s.setSelection(d),s=h(s,g),s.docChanged?(l==null||l(s),!0):!1};return{indent:v(1),outdent:v(-1)}},addKeyboardShortcuts(){return{"Mod-]":()=>{const{indent:a}=(0,i.indentationOptionUtils)(this.editor);return a({isKeyboardShortcut:!0})},"Mod-[":()=>{const{outdent:a}=(0,i.indentationOptionUtils)(this.editor);return a({isKeyboardShortcut:!0})}}}})},366110:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.indentationOptionConfig=void 0;var n=e(826651);const o=i=>({tiptapExtension:n.IndentationOptionExtension.configure(i),optionId:"indent"});t.indentationOptionConfig=o},691214:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.indentationOptionUtils=t.getIsIndentationActive=void 0;var n=e(986029),o=e(209741),i=e(161172);const r=a=>{const{$anchor:h}=a.view.state.selection,v=h.parent.attrs.indent;return v&&v>0};t.getIsIndentationActive=r;const u=a=>{const h=()=>(0,i.getIsScaledTextActive)(a);return{indent:function(){let{isKeyboardShortcut:f,skipTracking:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return h()?!1:(s||(0,n.trackChangeIndentation)({isIndent:!0,isKeyboardShortcut:f}),(0,o.hasParentNodeOfType)(a.state.selection,a.schema.nodes.listItem)?a==null?void 0:a.chain().sinkListItem("listItem").focus().run():a==null?void 0:a.chain().indent().focus().run())},outdent:function(){let{isKeyboardShortcut:f,skipTracking:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return h()?!1:(s||(0,n.trackChangeIndentation)({isIndent:!1,isKeyboardShortcut:f}),(0,o.hasParentNodeOfType)(a.state.selection,a.schema.nodes.listItem)?a==null?void 0:a.chain().liftListItem("listItem").focus().run():a==null?void 0:a.chain().outdent().focus().run())},getIsIndentationDisabled:h}};t.indentationOptionUtils=u},651408:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n={indentationOptionConfig:!0,IndentationOptions:!0};Object.defineProperty(t,"IndentationOptions",{enumerable:!0,get:function(){return r.IndentationOptions}}),Object.defineProperty(t,"indentationOptionConfig",{enumerable:!0,get:function(){return o.indentationOptionConfig}});var o=e(366110),i=e(691214);Object.keys(i).forEach(function(u){u==="default"||u==="__esModule"||Object.prototype.hasOwnProperty.call(n,u)||u in t&&t[u]===i[u]||Object.defineProperty(t,u,{enumerable:!0,get:function(){return i[u]}})});var r=e(826651)},303095:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n=e(968721);Object.keys(n).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===n[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return n[c]}})});var o=e(777620);Object.keys(o).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===o[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return o[c]}})});var i=e(430458);Object.keys(i).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===i[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return i[c]}})});var r=e(763017);Object.keys(r).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===r[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return r[c]}})});var u=e(780304);Object.keys(u).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===u[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return u[c]}})});var a=e(113481);Object.keys(a).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===a[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return a[c]}})});var h=e(181675);Object.keys(h).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===h[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return h[c]}})});var v=e(651408);Object.keys(v).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===v[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return v[c]}})});var g=e(579708);Object.keys(g).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===g[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return g[c]}})});var f=e(939317);Object.keys(f).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===f[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return f[c]}})});var s=e(395466);Object.keys(s).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===s[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return s[c]}})});var m=e(301582);Object.keys(m).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===m[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return m[c]}})});var l=e(161172);Object.keys(l).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===l[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return l[c]}})});var d=e(468724);Object.keys(d).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===d[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return d[c]}})});var p=e(15301);Object.keys(p).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===p[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return p[c]}})});var E=e(803952);Object.keys(E).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===E[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return E[c]}})});var b=e(20538);Object.keys(b).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===b[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return b[c]}})});var O=e(693189);Object.keys(O).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===O[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return O[c]}})});var C=e(838322);Object.keys(C).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===C[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return C[c]}})});var S=e(812162);Object.keys(S).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===S[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return S[c]}})});var P=e(916094);Object.keys(P).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===P[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return P[c]}})});var y=e(871969);Object.keys(y).forEach(function(c){c==="default"||c==="__esModule"||c in t&&t[c]===y[c]||Object.defineProperty(t,c,{enumerable:!0,get:function(){return y[c]}})})},515674:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.ItalicOptionExtension=void 0;var n=e(651022),o=e(274499);const i=t.ItalicOptionExtension=n.Italic.extend({addKeyboardShortcuts(){return{"Mod-i":()=>{const{toggleItalic:r}=(0,o.italicOptionUtils)(this.editor);return r({isKeyboardShortcut:!0})}}}})},579708:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"italicOptionConfig",{enumerable:!0,get:function(){return n.italicOptionConfig}}),Object.defineProperty(t,"italicOptionUtils",{enumerable:!0,get:function(){return o.italicOptionUtils}});var n=e(761978),o=e(274499)},761978:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.italicOptionConfig=void 0;var n=e(515674);const o=()=>({tiptapExtension:n.ItalicOptionExtension,optionId:"italic"});t.italicOptionConfig=o},274499:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.italicOptionUtils=void 0;var n=e(160060),o=e(812162);const i=r=>{const u=()=>!!(r!=null&&r.isActive("italic")),{getIsTextStyleActive:a}=(0,o.textStyleOptionUtils)(r);return{toggleItalic:function(){let{isKeyboardShortcut:g,skipTracking:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return f||(0,n.trackEmphasizeText)({enabled:u(),isKeyboardShortcut:g,option:n.OptionObjectIdentifier.Italic}),r==null?void 0:r.chain().toggleItalic().focus().run()},getIsItalicActive:u,getIsItalicDisabled:()=>a("monospace")}};t.italicOptionUtils=i},615307:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.MinLetterSpacing=t.MaxLetterSpacing=t.LetterSpacingOptionExtension=void 0;var n=e(770841);const o=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))$/,i=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))/g,r=t.MinLetterSpacing=1,u=t.MaxLetterSpacing=5,a=t.LetterSpacingOptionExtension=n.Mark.create({name:"letterSpacing",addOptions(){return{minLetterSpacing:r,maxLetterSpacing:u,HTMLAttributes:{}}},addAttributes(){return{letterSpacing:{default:this.options.minLetterSpacing,parseHTML:h=>h.getAttribute("data-letter-spacing"),renderHTML:h=>{const v=h.letterSpacing;if(v<=this.options.minLetterSpacing)return{};const g=v>0?(v-1)*.1:0;return{"data-letter-spacing":v,style:`letter-spacing: ${g}em`}}}}},parseHTML(){return[{tag:"span"}]},renderHTML(h){let{HTMLAttributes:v}=h;return["span",(0,n.mergeAttributes)(this.options.HTMLAttributes,v),0]},addCommands(){return{setLetterSpacing:h=>v=>{let{commands:g,chain:f}=v;return h.letterSpacing<=this.options.minLetterSpacing?f().unsetMark(this.name).clearNodes().run():g.setMark(this.name,h)}}},addInputRules(){return[(0,n.markInputRule)({find:o,type:this.type})]},addPasteRules(){return[(0,n.markPasteRule)({find:i,type:this.type})]}})},939317:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MaxLetterSpacing",{enumerable:!0,get:function(){return i.MaxLetterSpacing}}),Object.defineProperty(t,"MinLetterSpacing",{enumerable:!0,get:function(){return i.MinLetterSpacing}}),Object.defineProperty(t,"letterSpacingOptionConfig",{enumerable:!0,get:function(){return n.letterSpacingOptionConfig}}),Object.defineProperty(t,"letterSpacingOptionUtils",{enumerable:!0,get:function(){return o.letterSpacingOptionUtils}});var n=e(327700),o=e(304992),i=e(615307)},327700:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.letterSpacingOptionConfig=void 0;var n=e(615307);const o=()=>({tiptapExtension:n.LetterSpacingOptionExtension,optionId:"letterSpacing"});t.letterSpacingOptionConfig=o},304992:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.letterSpacingOptionUtils=void 0;var n=e(917402),o=e(615307);const i=r=>({setLetterSpacing:v=>{let{letterSpacing:g,isIncrease:f,skipTracking:s}=v;return s||(0,n.trackChangeLetterSpacing)({value:g,isIncrease:f}),r==null?void 0:r.chain().setLetterSpacing({letterSpacing:g}).focus().run()},getIsActive:v=>v===o.MinLetterSpacing?!1:!!(r!=null&&r.isActive({letterSpacing:v})),getLetterSpacing:()=>r.getAttributes("letterSpacing")});t.letterSpacingOptionUtils=i},786939:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.LinkOptionExtension=void 0;var n=e(770841),o=e(269787),i=e(796760);const r=t.LinkOptionExtension=n.Extension.create({name:"linkEditor",addKeyboardShortcuts(){return{"Mod-k":()=>{const{setLinkEditorOpen:u,getIsLinkDisabled:a}=(0,i.linkOptionUtils)(this.editor);return a()?!1:u(!0)}}},addExtensions(){return[o.Link.configure({openOnClick:!1,protocols:["ftp","mailto","https"],linkOnPaste:!0,HTMLAttributes:{target:null,rel:null}})]},addStorage(){return{isLinkEditorOpen:!1}}})},395466:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LinkOptionExtension",{enumerable:!0,get:function(){return o.LinkOptionExtension}}),Object.defineProperty(t,"linkOptionConfig",{enumerable:!0,get:function(){return n.linkOptionConfig}});var n=e(405418),o=e(786939)},405418:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.linkOptionConfig=void 0;var n=e(786939);const o=()=>({tiptapExtension:n.LinkOptionExtension,optionId:"link"});t.linkOptionConfig=o},796760:function(T,t){Object.defineProperty(t,"__esModule",{value:!0}),t.linkOptionUtils=void 0;const e=n=>{const o=()=>{const{state:a}=n,{selection:h}=a,{from:v,to:g}=h;return{from:v,to:g}};return{getIsLinkDisabled:()=>{const{from:a,to:h}=o();return!n.isActive("link")&&a===h},onLinkChange:a=>{let{url:h,newWindow:v}=a;if(h){const g=v?{target:"_blank"}:{target:null};return n.chain().setLink({href:h,...g}).run()}return n.chain().unsetLink().run()},setLinkEditorOpen:a=>{const h=!n.state.selection.empty||n.isActive("link");return a&&h?(n.storage.linkEditor.isLinkEditorOpen=!0,!0):(n.storage.linkEditor.isLinkEditorOpen=!1,!0)}}};t.linkOptionUtils=e},211370:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.NumberedListOptionExtension=void 0;var n=e(757348),o=e(611730);const i=t.NumberedListOptionExtension=n.OrderedList.extend({name:"numberedList",addKeyboardShortcuts(){return{"Mod-Alt-9":()=>{const{toggleNumberedList:r}=(0,o.numberedListOptionUtils)(this.editor);return r({isKeyboardShortcut:!0})}}}})},301582:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n={numberedListOptionConfig:!0};Object.defineProperty(t,"numberedListOptionConfig",{enumerable:!0,get:function(){return o.numberedListOptionConfig}});var o=e(262734),i=e(611730);Object.keys(i).forEach(function(r){r==="default"||r==="__esModule"||Object.prototype.hasOwnProperty.call(n,r)||r in t&&t[r]===i[r]||Object.defineProperty(t,r,{enumerable:!0,get:function(){return i[r]}})})},262734:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.numberedListOptionConfig=void 0;var n=e(211370);const o=()=>({tiptapExtension:n.NumberedListOptionExtension.configure({HTMLAttributes:{"data-rte-list":!0}}),optionId:"numberedList"});t.numberedListOptionConfig=o},611730:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.numberedListOptionUtils=t.getIsNumberedListActive=void 0;var n=e(571861),o=e(777620),i=e(763017),r=e(161172),u=e(838322);const a=v=>!!v.isActive("numberedList");t.getIsNumberedListActive=a;const h=v=>{const g=()=>(0,r.getIsScaledTextActive)(v)||(0,o.getIsBlockquoteActive)(v);return{toggleNumberedList:function(){let{isKeyboardShortcut:s,skipTracking:m}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(g())return!1;m||(0,n.trackToggleList)({enabled:a(v),isKeyboardShortcut:s,isOrdered:!0});const l=(0,i.getIsBulletListActive)(v),d=a(v),{bubbleUpCommandOnHighlightNode:p}=(0,u.textHighlightOptionUtils)(v);return p({chainCommandCallback:E=>E.toggleOrderedList().focus(),offset:l?0:d?-2:2}).run()},getIsNumberedListDisabled:g}};t.numberedListOptionUtils=h},23105:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.toggleScaledText=t.handleScaledTextEnter=void 0;var n=e(890724),o=e(346273),i=e(219879),r=e(67691);const u=(m,l,d)=>m===l&&m>0&&(m===d.doc.resolve(m).before()||m===d.doc.resolve(m).after()),a=(m,l,d,p)=>{let E=!1;return d.doc.nodesBetween(m,l,(b,O)=>{if(b.type===p)return E=!0,!1;const C=d.doc.resolve(O);for(let S=C.depth;S>0;S--)if(C.node(S).type===p)return E=!0,!1;return!0}),E};function h(m){let{from:l,to:d,state:p,scaledTextType:E,isUnwrapping:b}=m;const O=[];return p.doc.nodesBetween(l,d,(C,S)=>{if(b){if(C.type===E)return O.push({pos:S,end:S+C.nodeSize,node:C}),!1}else if(C.isBlock&&C.type.name!==r.SCALED_TEXT_OPTION_EXTENSION_NAME&&C.type.name!==i.GENERATED_TEXT_SELECTION_NODE_NAME)return O.push({pos:S,end:S+C.nodeSize,node:C}),!1;return!0}),O.sort((C,S)=>S.pos-C.pos)}const v=(m,l,d)=>{try{const p=Math.max(0,Math.min(l,m.doc.content.size)),E=Math.max(p,Math.min(d,m.doc.content.size));return p===E?n.Selection.near(m.doc.resolve(p)):n.TextSelection.create(m.doc,p,E)}catch{const p=Math.max(0,Math.min(l,m.doc.content.size));return n.Selection.near(m.doc.resolve(p))}};function g(m){let{tr:l,state:d,originalFrom:p,originalTo:E,isUnwrapping:b,scaledTextType:O,isBubbleUp:C}=m;if(C||p===E)return l;try{const S=[];if(d.doc.nodesBetween(p,E,(ie,D)=>(b?ie.type===O:ie.isBlock&&ie.type.name!==r.SCALED_TEXT_OPTION_EXTENSION_NAME&&ie.type.name!==i.GENERATED_TEXT_SELECTION_NODE_NAME)?(S.push({start:D,end:D+ie.nodeSize}),!1):!0),S.length===0)return l;const P=S[0].start,y=S[S.length-1].end,c=l.mapping.map(P),j=l.mapping.map(y);let N=c,Z=j;const z=l.doc.resolve(c),k=l.doc.resolve(j);b?(N=z.parent.isTextblock?z.start():c,Z=k.parent.isTextblock?k.end()-1:j):(z.parent.type.name===r.SCALED_TEXT_OPTION_EXTENSION_NAME?N=Math.min(z.start()+1,z.end()-1):z.parent.isTextblock&&(N=z.start()),k.parent.type.name===r.SCALED_TEXT_OPTION_EXTENSION_NAME?Z=Math.max(k.start()+1,k.end()-1):k.parent.isTextblock&&(Z=k.end()-1));const X=v(l,N,Z);return l.setSelection(X)}catch{const S=l.mapping.map(p),P=l.mapping.map(E),y=v(l,S,P);return l.setSelection(y)}}const f=()=>m=>{var l;let{commands:d,state:p,dispatch:E}=m;(l=d.setTextAlign)===null||l===void 0||l.call(d,"left");const{selection:b}=p,{from:O,to:C}=b;if(!E)return!1;const S=O,P=C,y=p.schema.nodes.scaledText,c=u(O,C,p),j=a(O,C,p,y);let N=p.tr;const Z=h({from:O,to:C,state:p,scaledTextType:y,isUnwrapping:j});if(Z.length===0&&!j)return d.toggleWrap(r.SCALED_TEXT_OPTION_EXTENSION_NAME);for(const{pos:z,end:k,node:X}of Z)if(j)N=N.replaceWith(z,k,X.content);else{const ie=y.create({},X);N=N.replaceWith(z,k,ie)}return N.docChanged?(N=g({tr:N,state:p,originalFrom:S,originalTo:P,isUnwrapping:j,scaledTextType:y,isBubbleUp:c}),E(N.scrollIntoView()),!0):!1};t.toggleScaledText=f;const s=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"paragraph";return l=>{let{state:d,dispatch:p,view:E}=l;const b=d.schema.nodes.scaledText;if(!(0,o.hasParentNodeOfType)(d.selection,b))return!1;const{$from:C}=d.selection,S=E.endOfTextblock("left",d),P=E.endOfTextblock("right",d);let y=d.tr;const c=d.schema.nodes[m].createAndFill();if(P&&c){const j=C.after();y=y.insert(j,c),y=y.setSelection(n.Selection.near(y.doc.resolve(j),1))}else if(S&&c){const j=C.before()-1;y=y.insert(j,c),y=y.setSelection(n.Selection.near(y.doc.resolve(j),1))}else y=y.split(C.pos,2);return p&&p(y.scrollIntoView()),!0}};t.handleScaledTextEnter=s},211663:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.ScaledTextNodeView=void 0;var o=n(e(642979)),i=e(368195);e(238599);class r{constructor(a,h){(0,o.default)(this,"resizeObserver",null),(0,o.default)(this,"scaledTextNode",null),(0,o.default)(this,"ignoreMutation",()=>!0),(0,o.default)(this,"update",v=>v.type.name!==this.extension.name||v.sameMarkup(this.node)?!1:(this.render(),!0)),(0,o.default)(this,"destroy",()=>{this.unbindListeners()}),(0,o.default)(this,"render",()=>{const v=document.createElement("div"),g=document.createElement("span");v.classList.add("sqsrte-scaled-text-container"),v.classList.add("loaded"),g.classList.add("sqsrte-scaled-text"),v.appendChild(g),this.dom=v,this.contentDOM=g}),this.node=a,this.extension=h,this.additionalListeners=h.options.additionalListeners,this.destructors=[],this.render(),this.bindListeners()}bindListeners(){var a;this.dom&&(this.scaledTextNode=(0,i.createScaledTextNode)(this.dom),this.destructors.push(()=>{var h;return(h=this.scaledTextNode)===null||h===void 0?void 0:h.destroy()})),(a=this.additionalListeners)===null||a===void 0||a.forEach(h=>{if(this.scaledTextNode){const v=h(this.scaledTextNode.update);this.destructors.push(v)}})}unbindListeners(){this.destructors.forEach(a=>a==null?void 0:a())}}t.ScaledTextNodeView=r},67691:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.ScaledTextOptionExtension=t.SCALED_TEXT_OPTION_EXTENSION_NAME=void 0;var n=e(770841),o=e(23105),i=e(211663),r=e(768183);const u=t.SCALED_TEXT_OPTION_EXTENSION_NAME="scaledText",a=t.ScaledTextOptionExtension=n.Node.create({name:u,addOptions(){return{additionalListeners:[]}},defining:!0,draggable:!0,selectable:!1,content:"block",marks:"",group:"block",parseHTML(){return[{tag:"div.sqsrte-scaled-text-container",consuming:!0,contentElement:"span.sqsrte-scaled-text"}]},renderHTML(){return["div",{class:"sqsrte-scaled-text-container"},["span",{class:"sqsrte-scaled-text"},0]]},addCommands(){return{toggleScaledText:o.toggleScaledText,handleScaledTextEnter:o.handleScaledTextEnter}},addKeyboardShortcuts(){return{"Mod-Shift-S":()=>{const{toggleScaledText:h}=(0,r.scaledTextOptionUtils)(this.editor);return h({isKeyboardShortcut:!0}),!0},Enter:()=>{if(this.editor.isActive(u)){const{handleScaledTextEnter:h}=(0,r.scaledTextOptionUtils)(this.editor);return h({newNodeType:"paragraph"}),!0}return!1},"Shift-Enter":()=>{if(this.editor.isActive(u)){const{handleScaledTextEnter:h}=(0,r.scaledTextOptionUtils)(this.editor);return h({newNodeType:u}),!0}return!1},"Mod-Enter":()=>{if(this.editor.isActive(u)){const{handleScaledTextEnter:h}=(0,r.scaledTextOptionUtils)(this.editor);return h({newNodeType:u}),!0}return!1}}},addNodeView(){return h=>{let{node:v}=h;return new i.ScaledTextNodeView(v,this)}}})},161172:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n={scaledTextOptionConfig:!0};Object.defineProperty(t,"scaledTextOptionConfig",{enumerable:!0,get:function(){return o.scaledTextOptionConfig}});var o=e(274509),i=e(768183);Object.keys(i).forEach(function(r){r==="default"||r==="__esModule"||Object.prototype.hasOwnProperty.call(n,r)||r in t&&t[r]===i[r]||Object.defineProperty(t,r,{enumerable:!0,get:function(){return i[r]}})})},274509:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.scaledTextOptionConfig=void 0;var n=e(67691);const o=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{tiptapExtension:n.ScaledTextOptionExtension.configure({additionalListeners:i==null?void 0:i.additionalListeners}),optionId:"scaledText"}};t.scaledTextOptionConfig=o},768183:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.scaledTextOptionUtils=t.getIsScaledTextActive=void 0;var n=e(160060),o=e(777620),i=e(763017),r=e(651408),u=e(301582),a=e(838322);const h=g=>!!(g!=null&&g.isActive("scaledText"));t.getIsScaledTextActive=h;const v=g=>{const f=()=>(0,r.getIsIndentationActive)(g)||(0,o.getIsBlockquoteActive)(g)||(0,i.getIsBulletListActive)(g)||(0,u.getIsNumberedListActive)(g);return{toggleScaledText:function(){let{isKeyboardShortcut:l=!1,skipTracking:d}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(f())return!1;d||(0,n.trackToggleScaledText)({enabled:h(g),isKeyboardShortcut:l});const p=h(g),{bubbleUpCommandOnHighlightNode:E}=(0,a.textHighlightOptionUtils)(g);return E({chainCommandCallback:b=>b.toggleScaledText().focus(),offset:p?-1:1}).run()},handleScaledTextEnter:l=>{let{newNodeType:d}=l;g==null||g.chain().handleScaledTextEnter(d).run()},getIsScaledTextDisabled:f}};t.scaledTextOptionUtils=v},12399:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.StrikethroughOptionExtension=void 0;var n=e(237871),o=e(27177);const i=t.StrikethroughOptionExtension=n.Strike.extend({addKeyboardShortcuts(){return{"Mod-Shift-x":()=>{const{toggleStrikethrough:r}=(0,o.strikethroughOptionUtils)(this.editor);return r({isKeyboardShortcut:!0})}}}})},468724:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"strikethroughOptionConfig",{enumerable:!0,get:function(){return n.strikethroughOptionConfig}}),Object.defineProperty(t,"strikethroughOptionUtils",{enumerable:!0,get:function(){return o.strikethroughOptionUtils}});var n=e(344688),o=e(27177)},344688:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.strikethroughOptionConfig=void 0;var n=e(12399);const o=()=>({tiptapExtension:n.StrikethroughOptionExtension,optionId:"strikethrough"});t.strikethroughOptionConfig=o},27177:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.strikethroughOptionUtils=void 0;var n=e(160060),o=e(812162);const i=r=>{const u=()=>!!(r!=null&&r.isActive("strike")),{getIsTextStyleActive:a}=(0,o.textStyleOptionUtils)(r);return{toggleStrikethrough:function(){let{isKeyboardShortcut:g,skipTracking:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return f||(0,n.trackEmphasizeText)({enabled:u(),isKeyboardShortcut:g,option:n.OptionObjectIdentifier.Strikethrough}),r==null?void 0:r.chain().toggleStrike().focus().run()},getIsActive:u,getIsDisabled:()=>a("monospace")}};t.strikethroughOptionUtils=i},786835:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptOptionExtension=void 0;var n=e(546931),o=e(465160);const i=t.SubscriptOptionExtension=n.Subscript.extend({addKeyboardShortcuts(){return{"Mod-,":r=>{let{editor:u}=r;const{toggleSubscript:a}=(0,o.subscriptOptionUtils)(u);return a({isKeyboardShortcut:!0})}}}})},15301:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"subscriptOptionConfig",{enumerable:!0,get:function(){return n.subscriptOptionConfig}}),Object.defineProperty(t,"subscriptOptionUtils",{enumerable:!0,get:function(){return o.subscriptOptionUtils}});var n=e(601397),o=e(465160)},601397:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptOptionConfig=void 0;var n=e(786835);const o=()=>({tiptapExtension:n.SubscriptOptionExtension,optionId:"subscript"});t.subscriptOptionConfig=o},465160:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptOptionUtils=void 0;var n=e(160060),o=e(812162);const i=r=>{const u=()=>!!(r!=null&&r.isActive("subscript")),{getIsTextStyleActive:a}=(0,o.textStyleOptionUtils)(r);return{toggleSubscript:function(){let{isKeyboardShortcut:g,skipTracking:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return f||(0,n.trackEmphasizeText)({enabled:u(),isKeyboardShortcut:g,option:n.OptionObjectIdentifier.Subscript}),r==null?void 0:r.chain().toggleSubscript().focus().run()},getIsActive:u,getIsDisabled:()=>a("monospace")}};t.subscriptOptionUtils=i},992240:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.SuperscriptOptionExtension=void 0;var n=e(279604),o=e(923650);const i=t.SuperscriptOptionExtension=n.Superscript.extend({addKeyboardShortcuts(){return{"Mod-.":r=>{let{editor:u}=r;const{toggleSuperscript:a}=(0,o.superscriptOptionUtils)(u);return a({isKeyboardShortcut:!0})}}}})},803952:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"superscriptOptionConfig",{enumerable:!0,get:function(){return n.superscriptOptionConfig}}),Object.defineProperty(t,"superscriptOptionUtils",{enumerable:!0,get:function(){return o.superscriptOptionUtils}});var n=e(461947),o=e(923650)},461947:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.superscriptOptionConfig=void 0;var n=e(992240);const o=()=>({tiptapExtension:n.SuperscriptOptionExtension,optionId:"superscript"});t.superscriptOptionConfig=o},923650:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.superscriptOptionUtils=void 0;var n=e(160060),o=e(812162);const i=r=>{const u=()=>!!(r!=null&&r.isActive("superscript")),{getIsTextStyleActive:a}=(0,o.textStyleOptionUtils)(r);return{toggleSuperscript:function(){let{isKeyboardShortcut:g,skipTracking:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return f||(0,n.trackEmphasizeText)({enabled:u(),isKeyboardShortcut:g,option:n.OptionObjectIdentifier.Superscript}),r==null?void 0:r.chain().toggleSuperscript().focus().run()},getIsActive:u,getIsDisabled:()=>a("monospace")}};t.superscriptOptionUtils=i},210642:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.TextAlignOptionExtension=void 0;var n=e(969396),o=e(643998),i=e(863932);const r=t.TextAlignOptionExtension=n.TextAlign.extend({addKeyboardShortcuts(){const{setTextAlign:u}=(0,i.textAlignOptionUtils)(this.editor);return{"Mod-Shift-l":()=>u({alignment:o.Alignments.Left,isKeyboardShortcut:!0}),"Mod-Shift-e":()=>u({alignment:o.Alignments.Center,isKeyboardShortcut:!0}),"Mod-Shift-r":()=>u({alignment:o.Alignments.Right,isKeyboardShortcut:!0}),"Mod-Shift-j":()=>u({alignment:o.Alignments.Justify,isKeyboardShortcut:!0})}}})},643998:function(T,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Alignments=void 0;let e=t.Alignments=function(n){return n.Left="left",n.Right="right",n.Center="center",n.Justify="justify",n}({})},20538:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Alignments",{enumerable:!0,get:function(){return i.Alignments}}),Object.defineProperty(t,"textAlignOptionConfig",{enumerable:!0,get:function(){return n.textAlignOptionConfig}}),Object.defineProperty(t,"textAlignOptionUtils",{enumerable:!0,get:function(){return o.textAlignOptionUtils}});var n=e(366952),o=e(863932),i=e(643998)},366952:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.textAlignOptionConfig=void 0;var n=e(643998),o=e(210642);const i=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const u=r==null?void 0:r.alignments,a=[...Object.values(n.Alignments)];return{tiptapExtension:o.TextAlignOptionExtension.configure({alignments:u??a,types:["paragraph","textStyleHeading","textStyleParagraph","textStyleCodeBlock","heading"]}),optionId:"textAlign"}};t.textAlignOptionConfig=i},863932:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.textAlignOptionUtils=void 0;var n=e(629691),o=e(161172);const i=r=>{const u=()=>(0,o.getIsScaledTextActive)(r);return{setTextAlign:v=>{let{alignment:g,isKeyboardShortcut:f,skipTracking:s}=v;return u()?!1:(s||(0,n.trackAlignText)({alignment:g,isKeyboardShortcut:f}),r==null||r.chain().setTextAlign(g).focus().run(),!0)},getIsAlignmentActive:v=>!!(r!=null&&r.isActive({textAlign:v})),getIsAlignmentDisabled:u}};t.textAlignOptionUtils=i},460384:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.TextColorOptionExtension=void 0,e(392338);var n=e(770841);const o=t.TextColorOptionExtension=n.Mark.create({name:"textColor",addStorage(){const i=this.options.colorPalette,r=i==null?void 0:i.find(h=>h.colorId.includes("black")),u={colorId:"custom",cssColor:"#000000"},a=this.options.usePaletteAsCustomColor;return r&&a?{defaultBlack:{colorId:"custom",cssColor:r.cssColor}}:r?{defaultBlack:{colorId:r.colorId,cssColor:null}}:{defaultBlack:u}},addOptions(){return{colorPalette:[],customClassName:"",HTMLAttributes:{}}},addAttributes(){return{colorId:{default:null},cssColor:{default:null}}},parseHTML(){return[{tag:"span",getAttrs:i=>{if(i instanceof HTMLElement){if(!this.options.usePaletteAsCustomColor){const h=Array.from(i.classList).find(v=>{var g;return(g=this.options.colorPalette)===null||g===void 0?void 0:g.some(f=>f.colorId===v)});if(h)return{colorId:h,cssColor:null}}const r=i.getAttribute("style"),u=r==null?void 0:r.match(/(?:^|;)color\: *([^;]+)(?:;|$)/);if(u)return{colorId:"custom",cssColor:u[1]}}return!1}}]},renderHTML(i){let{HTMLAttributes:r}=i;const{colorId:u,cssColor:a}=r;if(!u)return"";let h=`color: ${a};`,v=this.options.customClassName;return this.options.colorPalette&&u!=="custom"&&(h=this.options.usePaletteAsCustomColor?h:void 0,v=this.options.usePaletteAsCustomColor?v:u),["span",(0,n.mergeAttributes)({class:v,style:h}),0]},addCommands(){return{setTextColor:i=>r=>{let{commands:u}=r;return u.setMark(this.name,i)}}}})},693189:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n=e(369e3);Object.keys(n).forEach(function(r){r==="default"||r==="__esModule"||r in t&&t[r]===n[r]||Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[r]}})});var o=e(626033);Object.keys(o).forEach(function(r){r==="default"||r==="__esModule"||r in t&&t[r]===o[r]||Object.defineProperty(t,r,{enumerable:!0,get:function(){return o[r]}})});var i=e(460384);Object.keys(i).forEach(function(r){r==="default"||r==="__esModule"||r in t&&t[r]===i[r]||Object.defineProperty(t,r,{enumerable:!0,get:function(){return i[r]}})})},369e3:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.textColorOptionConfig=void 0;var n=e(460384);const o=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{colorPalette:r,customClassName:u,usePaletteAsCustomColor:a}=i;return{tiptapExtension:n.TextColorOptionExtension.configure({colorPalette:r,customClassName:u,usePaletteAsCustomColor:a}),optionId:"textColor"}};t.textColorOptionConfig=o},626033:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.textColorOptionUtils=t.getCSSColorFromPaletteIdentifier=void 0;var n=e(608289),o=e(812162);const i=(a,h)=>{const{cssColor:v}=a.find(g=>g.colorId===h);return v};t.getCSSColorFromPaletteIdentifier=i;const r=a=>{let{colorId:h,colorPalette:v,cssColor:g}=a;return v&&h!=="custom"?{isPaletteColor:!0,color:i(v,h)}:v&&g&&v.some(s=>s.cssColor===g)?{isPaletteColor:!0,color:g}:{isPaletteColor:!1,color:g}},u=a=>{const{getIsTextStyleActive:h}=(0,o.textStyleOptionUtils)(a);return{setTextColor:s=>{let{colorId:m,colorPalette:l,cssColor:d,shouldFocusRTE:p,skipTracking:E}=s;E||(0,n.trackChangeTextColor)(r({colorId:m,colorPalette:l,cssColor:d}));const b=a==null?void 0:a.chain().setTextColor({colorId:m,cssColor:d});return p&&b.focus(),b.run()},getValue:()=>{const s=a.getAttributes("textColor");return!s.hasOwnProperty("colorId")||!s.hasOwnProperty("cssColor")?a.storage.textColor.defaultBlack:{colorId:s.colorId,cssColor:s.cssColor}},getIsDisabled:()=>h("monospace")}};t.textColorOptionUtils=u},23264:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.TextAttributesPluginKey=t.TextAttributesExtension=void 0,e(392338);var n=e(770841),o=e(890724),i=e(79306),r=e(598640);const u=t.TextAttributesPluginKey=new o.PluginKey("textAttributesPlugin"),a=["highlight"],h=g=>a.includes(g.type.name),v=t.TextAttributesExtension=n.Extension.create({name:"textAttributes",priority:r.ExtensionPriority.TextAttributes,addOptions(){return{textAttributes:{},onUpdate:void 0,additionalListeners:[]}},addGlobalAttributes(){return[{types:a,attributes:{id:{default:(0,i.v4)(),rendered:!0,isRequired:!0,parseHTML:g=>g.getAttribute("data-text-attribute-id"),renderHTML:g=>({"data-text-attribute-id":g.id})}}}]},onCreate(){let g=!1;const f=new Set,{textAttributes:s}=u.getState(this.editor.state);let m=this.editor.state.tr;if((0,n.findChildren)(this.editor.state.doc,h).forEach(p=>{let{node:E,pos:b}=p;if(E.attrs.id===null||f.has(E.attrs.id)){g=!0;const O=(0,i.v4)(),C=E.type.create({...E.attrs,id:O});m=m.replaceWith(b,b+E.nodeSize,C),f.add(C.attrs.id);const S=E.attrs.id;S&&s[S]&&(s[O]={...s[S],id:O})}else f.add(E.attrs.id)}),g){var l,d;m=m.setMeta(u,{textAttributes:s}),(l=(d=this.editor.view).dispatch)===null||l===void 0||l.call(d,m)}},onUpdate(){const{onUpdate:g}=this.options;if(g){const s=u.getState(this.editor.state).textAttributes;g(s)}},addProseMirrorPlugins(){const g=this;return[new o.Plugin({key:u,state:{init:()=>({textAttributes:g.options.textAttributes??{}}),apply:(f,s)=>{const m=f.getMeta(u);return m?{textAttributes:m.textAttributes}:s}},view:f=>{var s;const m=d=>{const{state:p,dispatch:E}=f,b=p.tr.setMeta(u,{textAttributes:d});E==null||E(b)},l=(s=this.options.additionalListeners)===null||s===void 0?void 0:s.map(d=>d(m));return{destroy(){l==null||l.forEach(d=>d())}}},appendTransaction:(f,s,m)=>{if(!f.some(b=>{let{docChanged:O}=b;return O})||s.doc.eq(m.doc))return;let l=!1;const d=new Set,{textAttributes:p}=u.getState(this.editor.state);let E=m.tr;if((0,n.findChildren)(E.doc,h).forEach(b=>{let{node:O,pos:C}=b;if(O.attrs.id===null){E=E.replaceWith(C,C+O.nodeSize,O.type.create({...O.attrs,id:(0,i.v4)()})),l=!0;return}if(d.has(O.attrs.id)){const S=(0,i.v4)(),P=O.type.create({...O.attrs,id:S});E=E.replaceWith(C,C+O.nodeSize,P);const y=O.attrs.id;y&&p[y]&&(p[S]={...p[y],id:S}),d.add(S),l=!0;return}d.add(O.attrs.id)}),d.size!==Object.keys(p).length){for(const b in p)d.has(b)||delete p[b];l=!0}if(l&&(E=E.setMeta(u,{textAttributes:p})),!!E.steps.length)return E}})]}})},844871:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.TextHighlightsPluginKey=t.TextHighlightOptionExtension=t.TextAttributeId=void 0,e(392338);var n=e(770841),o=e(840692),i=e(890724),r=e(79306),u=e(641448),a=e(598640),h=e(23264),v=e(89602);const g=t.TextHighlightsPluginKey=new i.PluginKey("textHighlight"),f=t.TextAttributeId="data-text-attribute-id";function s(D,I){let A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{selection:{from:W,to:U}}=D,{currentFrom:K,currentTo:H,updatedTr:R}=m(D.tr,D,W,U);return l({tr:R,highlightType:I,attributes:A,from:K,to:H})}function m(D,I,A,W){const{schema:U}=I,K=[];I.doc.nodesBetween(A,W,(J,_)=>{var F;return J.type.name===(U==null||(F=U.nodes)===null||F===void 0||(F=F[u.HIGHLIGHT])===null||F===void 0?void 0:F.name)&&K.push({node:J,pos:_,end:_+J.nodeSize}),!0}),K.sort((J,_)=>_.pos-J.pos);let H=A,R=W;for(const{node:J,pos:_,end:F}of K)_<H&&(H=Math.max(_,H-(F-_))),F>R&&(R=Math.min(F,R+(F-_))),D=D.replaceWith(_,F,J.content);return{currentFrom:H,currentTo:R,updatedTr:D}}function l(D){let{tr:I,highlightType:A,attributes:W,from:U,to:K}=D;const H=I.mapping.map(U),R=I.mapping.map(K),J=I.doc.slice(H,R);if(J.content.size===0)return null;const _=A.create(W,J.content);return I.replaceWith(H,R,_)}function d(D){const{selection:I,apply:A,tr:W}=D,{from:U,to:K}=I;if(U!==K)return U>=0&&K>U;let H=-1;if(D.doc.nodesBetween(U,U,(R,J)=>(0,v.isHighlightNode)(R)?(H=J,!1):!0),H!==-1){const R=W.setSelection(k(D.doc,H+1));return A(R),!0}return!1}function p(D){const{content:I,openStart:A,openEnd:W}=D,U=K=>{const H=[];return K.forEach(R=>{if((0,v.isHighlightNode)(R)){const J=(0,r.v4)(),_={...R.attrs,id:J};let F=R.content;R.content.size>0&&(F=U(R.content)),H.push(R.type.create(_,F,R.marks))}else if(R.content&&R.content.size>0){const J=U(R.content);H.push(R.copy(J))}else H.push(R)}),o.Fragment.from(H)};return new o.Slice(U(I),A,W)}function E(D,I){const{content:A,openStart:W,openEnd:U}=D,{state:K}=I,{textAttributes:H}=h.TextAttributesPluginKey.getState(K),R=J=>{const _=[];return J.forEach(F=>{if((0,v.isHighlightNode)(F)){const Q=F.attrs.id,le=JSON.stringify((H==null?void 0:H[Q])||{}),re={...F.attrs,id:Q,"data-temp-text-attributes":le};let pe=F.content;F.content.size>0&&(pe=R(F.content)),_.push(F.type.create(re,pe,F.marks))}else if(F.content&&F.content.size>0){const Q=R(F.content);_.push(F.copy(Q))}else _.push(F)}),o.Fragment.from(_)};return new o.Slice(R(A),W,U)}function b(D){if(!D||D.size===0)return!1;for(let I=0;I<D.childCount;I++){const A=D.child(I);if(A.isText&&A.text&&A.text.trim().length>0||A.content&&A.content.size>0&&b(A.content))return!0}return!1}function O(D,I,A){const W=D.doc.nodeAt(A);if(!W||!(0,v.isHighlightNode)(W))return null;const U=I.doc.nodeAt(A);if(!U||!(0,v.isHighlightNode)(U))return null;const K=W.content,H=U.content;return K.eq(H)?null:{highlightNode:W,newHighlightNode:U,oldContent:K,newContent:H,relativePos:0}}function C(D,I,A){if(!D)return{pastedFragment:null,isAtBeginning:!1,isAtEnd:!1,relativePos:0};const{oldContent:W,newContent:U}=D,K=I-A-1,H=K===0,R=K===W.size,J=W.size,_=U.size;if(_<=J)return{pastedFragment:null,isAtBeginning:H,isAtEnd:R,relativePos:K};let F=null;if(H){const Q=_-J;F=U.cut(0,Q)}else if(R){const Q=_-J;F=U.cut(_-Q,_)}else{const Q=W.cut(0,K),le=W.cut(K,W.size),re=Q.size,pe=_-le.size;pe>re&&(F=U.cut(re,pe))}return{pastedFragment:F,isAtBeginning:H,isAtEnd:R,relativePos:K}}function S(D,I,A){const{pastedFragment:W,highlightNode:U,oldContent:K}=A;D=D.insert(I,W),I+=W.size;const H=I;if(b(K)){const R=U.type.create(U.attrs,K,U.marks);D=D.insert(I,R)}return{newTr:D,insertPos:I,finalCursorPos:H}}function P(D,I,A){const{pastedFragment:W,highlightNode:U,oldContent:K}=A;if(b(K)){const R=U.type.create(U.attrs,K,U.marks);D=D.insert(I,R),I+=R.nodeSize}D=D.insert(I,W);const H=I+W.size;return{newTr:D,insertPos:I,finalCursorPos:H}}function y(D,I,A){const{pastedFragment:W,highlightNode:U,oldContent:K,relativePos:H,originalAttributes:R,existingTextAttributes:J,updateBlockModelTextAttributes:_}=A,F=K.cut(0,H),Q=K.cut(H,K.size);if(b(F)){const re=U.type.create(U.attrs,F,U.marks);D=D.insert(I,re),I+=re.nodeSize}D=D.insert(I,W);const le=I+W.size;if(I=le,b(Q)){const re=(0,r.v4)(),pe=U.type.create({...U.attrs,id:re},Q,U.marks);if(D=D.insert(I,pe),R){const Ce={...J,[re]:{...R,id:re}};D=D.setMeta(h.TextAttributesPluginKey,{textAttributes:Ce}),D=D.setMeta("updateBlockModelTextAttributes",_==null?void 0:_(Ce))}}return{newTr:D,finalCursorPos:le}}function c(D,I){const{newState:A,oldState:W,updateBlockModelTextAttributes:U}=I,{highlightPos:K,cursorPos:H}=D,R=O(W,A,K);if(!R)return null;const{pastedFragment:J,isAtBeginning:_,isAtEnd:F,relativePos:Q}=C(R,H,K);if(!J||!b(J))return null;R.relativePos=Q;const{highlightNode:le,newHighlightNode:re}=R,pe=le.attrs.id,{textAttributes:Ce}=h.TextAttributesPluginKey.getState(A),Oe=Ce[pe];let ce=A.tr;ce=ce.delete(K,K+re.nodeSize);const fe=K;let de;if(_){const ge=S(ce,fe,{pastedFragment:J,highlightNode:le,oldContent:R.oldContent});ce=ge.newTr,de=ge.finalCursorPos}else if(F){const ge=P(ce,fe,{pastedFragment:J,highlightNode:le,oldContent:R.oldContent});ce=ge.newTr,de=ge.finalCursorPos}else{const ge=y(ce,fe,{pastedFragment:J,highlightNode:le,oldContent:R.oldContent,relativePos:Q,originalAttributes:Oe,existingTextAttributes:Ce,updateBlockModelTextAttributes:U});ce=ge.newTr,de=ge.finalCursorPos}return de&&(ce=ce.setSelection(k(ce.doc,de))),ce}function j(D,I,A){const W={},U=[];D.doc.descendants((H,R)=>{if((0,v.isHighlightNode)(H)&&H.attrs["data-temp-text-attributes"])try{const J=JSON.parse(H.attrs["data-temp-text-attributes"]);J.id=H.attrs.id,W[H.attrs.id]=J,U.push({node:H,pos:R})}catch(J){console.error("Error parsing special data:",J)}return!0}),U.forEach(H=>{let{node:R,pos:J}=H;const _={...R.attrs};delete _["data-temp-text-attributes"],I=I.setNodeMarkup(J,void 0,_)});const{textAttributes:K}=h.TextAttributesPluginKey.getState(D);if(Object.keys(W).length>0){const H={...K,...W};I=I.setMeta(h.TextAttributesPluginKey,{textAttributes:H}),I=I.setMeta("updateBlockModelTextAttributes",A==null?void 0:A(H))}return I}const N={getHighlightContext(D,I){return(0,v.isHighlightNode)(I.parent)?{highlightNode:I.parent,highlightNodeStart:I.before(),highlightNodeEnd:I.after(),cursorRelativePos:I.pos-I.before()-1}:null},getBlockContext(D){for(let A=D.depth;A>=0;A--){var I;const W=D.node(A);if((I=W.type.spec.group)!==null&&I!==void 0&&I.includes("block"))return{parentBlockNode:W,parentBlockStart:D.before(A),parentBlockEnd:D.after(A)}}return null},getListItemContext(D,I){for(let A=I.depth;A>=0;A--){const W=I.node(A);if(W.type.name==="listItem")return{listItemNode:W,listItemStart:I.before(A),listItemEnd:I.after(A),listItemDepth:A}}return{listItemNode:null,listItemStart:-1,listItemEnd:-1,listItemDepth:-1}},getCursorPositionFlags(D,I,A,W){return{isAtLeftEdge:D.endOfTextblock("left",I),isAtRightEdge:D.endOfTextblock("right",I),isAtStart:W===0,isAtEnd:W===A.content.size}}},Z={createNewBlockOrListItem(D,I){const A=D.type.createAndFill(D.attrs);if(!A)throw new Error("Could not create new block");return I.listItemNode?I.listItemNode.type.create(I.listItemNode.attrs,o.Fragment.from(A)):A},isEmptyListItemContent(D){if(!(D!=null&&D.content))return!0;for(let I=0;I<D.content.childCount;I++){const A=D.content.child(I);if(A.type.name==="paragraph"){if(A.content.size===0)continue;for(let W=0;W<A.content.childCount;W++)if(A.content.child(W).type.name!=="hardBreak")return!1}else if(A.type.name!=="hardBreak")return!1}return!0},cleanupEmptyListItems(D){const I=[];return D.doc.descendants((A,W)=>(A.type.name==="listItem"&&this.isEmptyListItemContent(A)&&I.push({start:W,end:W+A.nodeSize}),!0)),I.sort((A,W)=>W.start-A.start).reduce((A,W)=>{let{start:U,end:K}=W;return A.delete(U,K)},D)}},z={handleRightEdge(D,I){const{blockContext:A,listItemContext:W}=I,U=Z.createNewBlockOrListItem(A.parentBlockNode,W),K=D.tr.insert(A.parentBlockEnd,U);return K.setSelection(k(K.doc,A.parentBlockEnd+1))},handleLeftEdge(D,I){const{blockContext:A,listItemContext:W,highlightContext:U}=I,K=Z.createNewBlockOrListItem(A.parentBlockNode,W),H=D.tr.insert(A.parentBlockStart,K),R=A.parentBlockStart+K.nodeSize,J=this.calculateHighlightCursorPosition(U,A.parentBlockStart,R);return H.setSelection(k(H.doc,J))},handleMiddleSplit(D,I){const{highlightContext:A,listItemContext:W}=I,{highlightNode:U,cursorRelativePos:K}=A,H=U.content.cut(0,K),R=U.content.cut(K);return W.listItemNode?this.handleListItemSplit(D,I,{before:H,after:R}):this.handleBlockSplit(D,I,{before:H,after:R})},calculateHighlightCursorPosition(D,I,A){if(!D)return A+1;const W=D.highlightNodeStart-I,U=A+W+1;return Math.max(1,U)},handleListItemSplit(D,I,A){const{highlightContext:W,blockContext:U,listItemContext:K,textAttributes:H,updateBlockModelTextAttributes:R}=I,{highlightNode:J,highlightNodeStart:_,highlightNodeEnd:F}=W,{parentBlockNode:Q,parentBlockStart:le}=U,re=Q.content,pe=_-le-1,Ce=F-le-1,Oe=re.cut(0,pe),ce=re.cut(Ce);let fe=D.tr.delete(K.listItemStart,K.listItemEnd),de=K.listItemStart;const ge=o.Fragment.empty.append(Oe).append(A.before.size>0?this.createHighlightFragment(J,A.before):o.Fragment.empty);if(ge.size>0){const Se=Q.type.create(Q.attrs,ge),Pe=K.listItemNode.type.create(K.listItemNode.attrs,o.Fragment.from(Se));fe=fe.insert(de,Pe),de+=Pe.nodeSize}const Te=(0,r.v4)(),me=o.Fragment.empty.append(A.after.size>0?this.createHighlightFragment({...J,attrs:{...J.attrs,id:Te}},A.after):o.Fragment.empty).append(ce),be=Q.type.create(Q.attrs,me.size>0?me:o.Fragment.empty),ye=K.listItemNode.type.create(K.listItemNode.attrs,o.Fragment.from(be));return fe=fe.insert(de,ye),A.after.size>0&&(fe=this.updateTextAttributes(fe,Te,H,R)),fe.setSelection(k(fe.doc,de+1))},handleBlockSplit(D,I,A){const{highlightContext:W,blockContext:U,textAttributes:K,updateBlockModelTextAttributes:H}=I,{highlightNode:R,highlightNodeStart:J,highlightNodeEnd:_}=W,{parentBlockNode:F,parentBlockStart:Q,parentBlockEnd:le}=U,re=F.content,pe=J-Q-1,Ce=_-Q-1,Oe=re.cut(0,pe),ce=re.cut(Ce);let fe=D.tr.delete(Q,le),de=Q;const ge=o.Fragment.empty.append(Oe).append(A.before.size>0?this.createHighlightFragment(R,A.before):o.Fragment.empty);if(ge.size>0){const ye=F.type.create(F.attrs,ge);fe=fe.insert(de,ye),de+=ye.nodeSize}const Te=(0,r.v4)(),me=o.Fragment.empty.append(A.after.size>0?this.createHighlightFragment({...R,attrs:{...R.attrs,id:Te}},A.after):o.Fragment.empty).append(ce),be=F.type.create(F.attrs,me.size>0?me:o.Fragment.empty);return fe=fe.insert(de,be),A.after.size>0&&(fe=this.updateTextAttributes(fe,Te,K,H)),fe.setSelection(k(fe.doc,de+1))},createHighlightFragment(D,I){return I.size>0?o.Fragment.from(D.type.create(D.attrs,I,D.marks)):o.Fragment.empty},updateTextAttributes(D,I,A,W){if(!A.original)return D;const U={...A.existing,[I]:{...A.original,id:I}};return D=D.setMeta(h.TextAttributesPluginKey,{textAttributes:U}),D=D.setMeta("updateBlockModelTextAttributes",W==null?void 0:W(U)),D}};function k(D,I){try{const A=D.content.size,W=Math.max(1,Math.min(I,A-1));return i.TextSelection.create(D,W)}catch(A){return console.warn("Invalid cursor position, falling back to start:",A),i.TextSelection.create(D,1)}}function X(D,I,A){const{selection:W}=I,{$from:U,empty:K}=W;if(!K)return!1;const H=N.getHighlightContext(I,U);if(!H)return!1;const R=N.getBlockContext(U);if(!R)return!1;const J=N.getListItemContext(I,U),_=N.getCursorPositionFlags(D,I,H.highlightNode,H.cursorRelativePos),{textAttributes:F}=h.TextAttributesPluginKey.getState(I),Q=F[H.highlightNode.attrs.id],le={highlightContext:H,blockContext:R,listItemContext:J,positionFlags:_,textAttributes:{existing:F,original:Q},updateBlockModelTextAttributes:A};try{var re;let pe;const{highlightNodeEnd:Ce}=H,{parentBlockNode:Oe,parentBlockStart:ce}=R,de=Ce-ce-1<Oe.content.size;return(_.isAtRightEdge||_.isAtEnd)&&!de?pe=z.handleRightEdge(I,le):_.isAtLeftEdge||_.isAtStart?pe=z.handleLeftEdge(I,le):(pe=z.handleMiddleSplit(I,le),pe=Z.cleanupEmptyListItems(pe)),(re=D.dispatch)===null||re===void 0||re.call(D,pe.scrollIntoView()),!0}catch(pe){return console.error("Error handling Enter in highlight:",pe),!1}}const ie=t.TextHighlightOptionExtension=n.Node.create({name:u.HIGHLIGHT,priority:a.ExtensionPriority.TextHighlight,group:"inline",inline:!0,selectable:!0,content:"inline*",whitespace:"pre",marks:"_",defining:!0,atom:!1,isolating:!1,onCreate(){this.editor.view.dispatch(this.editor.state.tr.setMeta("initializationComplete",!0))},addStorage(){return{textAttributes:{},isPasting:!1,pasteAfterHighlight:null,name:"text-attributes-storage"}},addAttributes(){return{"data-temp-text-attributes":{default:null}}},addOptions(){return{textAttributes:{},onUpdate:void 0,updateBlockModelTextAttributes:void 0,additionalListeners:[],HTMLAttributes:{},pluginView:()=>({})}},addExtensions(){return[h.TextAttributesExtension.configure({textAttributes:this.options.textAttributes,onUpdate:this.options.onUpdate,updateBlockModelTextAttributes:this.options.updateBlockModelTextAttributes,additionalListeners:this.options.additionalListeners})]},parseHTML(){return[{tag:"span.sqsrte-text-highlight",getAttrs:D=>{if(typeof D=="string")return!1;const I=D.getAttribute("data-temp-text-attributes");return{id:D.getAttribute("data-text-attribute-id"),"data-text-attribute-id":I?JSON.parse(I):null}}}]},renderHTML(D){let{HTMLAttributes:I}=D;return["span",(0,n.mergeAttributes)({class:"sqsrte-text-highlight"},this.options.HTMLAttributes??{},I),0]},addCommands(){var D=this;return{setHighlight:function(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return A=>{let{state:W,dispatch:U}=A;try{if(!d(W))return!1;const K=D.type,H=s(W,K,I);return H?(U&&U(H),!0):!1}catch(K){return console.error("Error applying highlight:",K),!1}}},removeHighlight:()=>I=>{let{state:A,dispatch:W}=I;try{const{selection:{from:U,to:K}}=A;if(U<0||K<U)return!1;let H=U,R=K,J=U;if(U===K){let le=-1;if(A.doc.nodesBetween(U,U,(re,pe)=>(0,v.isHighlightNode)(re)?(le=pe,J=U-pe-1,!1):!0),le===-1)return!1;H=le+1,R=le+A.doc.nodeAt(le).nodeSize-1}const{updatedTr:_}=m(A.tr,A,H,R);if(_.steps.length===0)return!1;const F=U===K?Math.max(0,Math.min(J+(H-1),_.doc.content.size)):Math.max(0,Math.min(_.mapping.map(U,-1),_.doc.content.size)),Q=_.setSelection(k(_.doc,F));return W&&W(Q),!0}catch(U){return console.error("Error removing highlight:",U),!1}}}},addKeyboardShortcuts(){return{Enter:D=>{let{editor:I}=D;return X(I.view,I.state,this.options.updateBlockModelTextAttributes)}}},addProseMirrorPlugins(){return[new i.Plugin({key:g,view:this.options.pluginView,props:{transformPasted:(I,A)=>{this.storage.isPasting=!0;const{state:W}=A,{selection:U}=W,{$head:K,empty:H}=U;if(H&&(0,v.isHighlightNode)(K.parent)){const R=_=>{let F=!1;return _.forEach(Q=>(0,v.isHighlightNode)(Q)||Q.content&&Q.content.size>0&&R(Q.content)?(F=!0,!1):!0),F};R(I.content)||(this.storage.pasteAfterHighlight={highlightPos:K.before(),highlightNodeSize:K.parent.nodeSize,cursorPos:K.pos})}return A.dom.querySelectorAll(".sqsrte-text-highlight").forEach(R=>{var J;(J=R.textContent)!==null&&J!==void 0&&J.trim()||R.remove()}),p(I)},transformCopied:E},appendTransaction:(I,A,W)=>{if(!I.some(R=>{let{docChanged:J}=R;return J})||A.doc.eq(W.doc))return;let U=W.tr;const{isPasting:K,pasteAfterHighlight:H}=this.storage;if(K){if(this.storage.isPasting=!1,H){const R={newState:W,oldState:A,tr:U,updateBlockModelTextAttributes:this.options.updateBlockModelTextAttributes},J=c(H,R);J&&(U=J),this.storage.pasteAfterHighlight=null}U=j(W,U,this.options.updateBlockModelTextAttributes)}if(U.steps.length)return U},state:{init:()=>({initialized:!1}),apply:(I,A)=>I.getMeta("initializationComplete")?{initialized:!0}:A}})]}})},838322:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"HIGHLIGHT",{enumerable:!0,get:function(){return u.HIGHLIGHT}}),Object.defineProperty(t,"TextAttributeId",{enumerable:!0,get:function(){return n.TextAttributeId}}),Object.defineProperty(t,"TextAttributesPluginKey",{enumerable:!0,get:function(){return r.TextAttributesPluginKey}}),Object.defineProperty(t,"TextHighlightOptionExtension",{enumerable:!0,get:function(){return n.TextHighlightOptionExtension}}),Object.defineProperty(t,"TextHighlightsPluginKey",{enumerable:!0,get:function(){return n.TextHighlightsPluginKey}}),Object.defineProperty(t,"textHighlightOptionConfig",{enumerable:!0,get:function(){return o.textHighlightOptionConfig}}),Object.defineProperty(t,"textHighlightOptionUtils",{enumerable:!0,get:function(){return i.textHighlightOptionUtils}});var n=e(844871),o=e(849955),i=e(89602),r=e(23264),u=e(641448)},849955:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.textHighlightOptionConfig=void 0;var n=e(641448),o=e(844871);const i=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{tiptapExtension:o.TextHighlightOptionExtension.configure({textAttributes:r.textAttributes,onUpdate:r.onUpdate,updateBlockModelTextAttributes:r.updateBlockModelTextAttributes,additionalListeners:r.additionalListeners,pluginView:r.pluginView}),optionId:n.HIGHLIGHT}};t.textHighlightOptionConfig=i},89602:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.textHighlightOptionUtils=t.isHighlightNode=void 0;var n=e(890724),o=e(641448),i=e(160060);const r=a=>a.type.name===o.HIGHLIGHT;t.isHighlightNode=r;const u=a=>{const h=()=>!!(a!=null&&a.isActive("highlight"));return{getIsActive:h,getIsDisabled:()=>{const{selection:m}=a.state,{from:l,to:d}=m;return!h()&&l===d},setHighlight:m=>{let{id:l,skipTracking:d}=m;if(d||(0,i.trackSetHighlight)({enabled:h()}),!a)return!1;const p=a.state,{selection:E}=p,{from:b,to:O}=E,C=b===O?O:O+1;return a.chain().focus().setHighlight({id:l}).setTextSelection({from:b,to:C}).run()},getHighlightId:()=>{if(!a)return{id:void 0};const m=a.state,{selection:l}=m,{from:d,to:p}=l;let E;return m.doc.nodesBetween(d,p,(b,O)=>{if(r(b)&&b.attrs.id){const C=O,S=O+b.nodeSize;if(C===d-1&&S===p+1||C===d&&S===p||d===p)return E=b.attrs.id,!1}return!0}),E?{id:E}:{id:void 0}},bubbleUpCommandOnHighlightNode:m=>{let{chainCommandCallback:l,offset:d}=m;const{$from:p,$to:E}=a.state.selection,b=r(p.parent);let O=a==null?void 0:a.chain();return b&&(O=O.command(C=>{let{tr:S,dispatch:P}=C;const y=p.before(p.depth),c=n.TextSelection.create(S.doc,y);return S.setSelection(c),P&&P(S),!0})),O=l(O),b&&(O=O.setTextSelection({from:p.pos+d,to:E.pos+d})),O}}};t.textHighlightOptionUtils=u},577867:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.ParagraphExtension=void 0;var n=e(67960),o=e(524470);const i=t.ParagraphExtension=n.Paragraph.extend({addAttributes(){var r;return{...(r=this.parent)===null||r===void 0?void 0:r.call(this),class:{renderHTML:u=>({class:u.class??null,...o.REQUIRED_TEXT_ATTRIBUTES})}}}})},369679:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.TextStyleOptionExtension=void 0,e(392338);var n=e(770841),o=e(374618),i=e(580311),r=e(524470),u=e(577867),a=e(353360);const h=o.CodeBlock.extend({name:"textStyleCodeBlock",content:"inline*",marks:function(){if(!this.editor)return"";const s=this.editor.options.extensions.map(l=>{let{name:d}=l;return d}),m=[];return s.includes("linkEditor")&&m.push("link"),m.join(" ")},addCommands(){var s;return{...(s=this.parent)===null||s===void 0?void 0:s.call(this),setCodeBlockStyle:m=>{let{trackingCallback:l}=m;return d=>{let{commands:p}=d;l==null||l();const E={...this.editor.getAttributes("textStyleHeading"),...this.editor.getAttributes("textStyleParagraph"),...this.editor.getAttributes("textStyleCodeBlock"),...this.editor.getAttributes("paragraph"),...this.editor.getAttributes("heading")};return p.setNode("textStyleCodeBlock",{...E})}}}},addKeyboardShortcuts(){const{setTextStyle:s}=(0,a.textStyleOptionUtils)(this.editor);return{"Mod-alt-m":()=>s({textStyle:"monospace",isKeyboardShortcut:!0}),Enter:()=>this.editor.commands.exitCode(),"Shift-Enter":()=>this.editor.commands.newlineInCode(),"Mod-Enter":()=>this.editor.commands.newlineInCode()}}}),v=u.ParagraphExtension.extend({name:"textStyleParagraph",addGlobalAttributes(){return[{types:["paragraph"],attributes:{class:{parseHTML:s=>["sqsrte-small","sqsrte-large"].find(d=>s.classList.contains(d))??null}}}]},addCommands(){var s;return{...(s=this.parent)===null||s===void 0?void 0:s.call(this),setParagraphClassName:m=>{let{style:l,className:d,trackingCallback:p}=m;return E=>{let{chain:b}=E;const O={...this.editor.getAttributes("textStyleHeading"),...this.editor.getAttributes("textStyleParagraph"),...this.editor.getAttributes("textStyleCodeBlock"),...this.editor.getAttributes("paragraph"),...this.editor.getAttributes("heading")};return this.options.textStyles.includes(l)?(p==null||p(),b().setParagraph().updateAttributes("textStyleParagraph",{...O,class:d}).run()):!1}},setParagraphTextStyle:m=>{let{trackingCallback:l}=m;return d=>{let{chain:p}=d;const E={...this.editor.getAttributes("textStyleHeading"),...this.editor.getAttributes("textStyleParagraph"),...this.editor.getAttributes("textStyleCodeBlock"),...this.editor.getAttributes("paragraph"),...this.editor.getAttributes("heading")};return this.options.textStyles.includes("paragraph2")?(l==null||l(),p().setParagraph().updateAttributes("textStyleParagraph",{...E,class:null}).run()):!1}}}},addKeyboardShortcuts(){const{setTextStyle:s}=(0,a.textStyleOptionUtils)(this.editor);return{"Mod-alt-2":()=>s({textStyle:"paragraph1",isKeyboardShortcut:!0}),"Mod-alt-1":()=>s({textStyle:"paragraph2",isKeyboardShortcut:!0}),"Mod-alt-0":()=>s({textStyle:"paragraph3",isKeyboardShortcut:!0})}}}),g=i.Heading.extend({name:"textStyleHeading",addCommands(){var s;return{...(s=this.parent)===null||s===void 0?void 0:s.call(this),setHeadingStyle:m=>{let{level:l,trackingCallback:d}=m;return p=>{let{commands:E}=p;const b={...this.editor.getAttributes("textStyleHeading"),...this.editor.getAttributes("textStyleParagraph"),...this.editor.getAttributes("textStyleCodeBlock"),...this.editor.getAttributes("paragraph"),...this.editor.getAttributes("heading")};return this.options.levels.includes(l)?(d==null||d(),E.setNode("textStyleHeading",{...b,level:l})):!1}}}},addKeyboardShortcuts(){const{setTextStyle:s}=(0,a.textStyleOptionUtils)(this.editor);return{"Mod-alt-6":()=>s({textStyle:"heading1",isKeyboardShortcut:!0}),"Mod-alt-5":()=>s({textStyle:"heading2",isKeyboardShortcut:!0}),"Mod-alt-4":()=>s({textStyle:"heading3",isKeyboardShortcut:!0}),"Mod-alt-3":()=>s({textStyle:"heading4",isKeyboardShortcut:!0})}},addAttributes(){var s;return{...(s=this.parent)===null||s===void 0?void 0:s.call(this),class:{renderHTML:()=>r.REQUIRED_TEXT_ATTRIBUTES}}}}),f=t.TextStyleOptionExtension=n.Extension.create({name:"textStyle",onTransaction(s){let{transaction:m}=s;(0,a.textStyleOptionUtils)(this.editor).handleMaintainStyleOnDeleteAll(m)},addKeyboardShortcuts(){return{Enter:s=>{let{editor:m}=s;return(0,a.textStyleOptionUtils)(m).handleMaintainStyleOnEnter()}}},addExtensions(){const m=this.options.textStyles.filter(p=>["heading1","heading2","heading3","heading4"].includes(p)).map(p=>r.styleToLevelMap[p]),l=this.options.textStyles.filter(p=>["paragraph1","paragraph2","paragraph3"].includes(p)),d=this.options.textStyles.includes("monospace")?[h]:[];return[g.configure({levels:m}),v.configure({textStyles:l}),...d]}})},524470:function(T,t){Object.defineProperty(t,"__esModule",{value:!0}),t.styleToLevelMap=t.REQUIRED_TEXT_ATTRIBUTES=void 0;const e=t.REQUIRED_TEXT_ATTRIBUTES={"data-rte-preserve-empty":"true",style:"white-space:pre-wrap;"},n=t.styleToLevelMap={heading1:1,heading2:2,heading3:3,heading4:4,paragraph1:5,paragraph2:6,paragraph3:7,monospace:8}},812162:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ParagraphExtension",{enumerable:!0,get:function(){return i.ParagraphExtension}}),Object.defineProperty(t,"textStyleOptionConfig",{enumerable:!0,get:function(){return n.textStyleOptionConfig}}),Object.defineProperty(t,"textStyleOptionUtils",{enumerable:!0,get:function(){return o.textStyleOptionUtils}});var n=e(209960),o=e(353360),i=e(577867)},209960:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.textStyleOptionConfig=void 0;var n=e(369679);const o=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{styles:r}=i,u=["heading1","heading2","heading3","heading4","paragraph1","paragraph2","paragraph3","monospace"],a=r==null?void 0:r.map(h=>h.style);return{tiptapExtension:n.TextStyleOptionExtension.configure({textStyles:a??u}),optionId:"textStyle"}};t.textStyleOptionConfig=o},353360:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.textStyleOptionUtils=void 0,e(392338);var n=e(808076),o=e(524470);const i=2,r=u=>{const a=s=>{let{isKeyboardShortcut:m,skipTracking:l,textStyle:d}=s;const p=l?()=>{}:()=>(0,n.trackSelectTextStyle)({isKeyboardShortcut:m,textStyle:d});switch(d){case"paragraph1":return u==null?void 0:u.chain().setParagraphClassName({className:"sqsrte-large",style:d,trackingCallback:p}).focus().run();case"paragraph2":return u==null?void 0:u.chain().setParagraphTextStyle({trackingCallback:p}).focus().run();case"paragraph3":return u==null?void 0:u.chain().setParagraphClassName({className:"sqsrte-small",style:d,trackingCallback:p}).focus().run();case"monospace":return u==null?void 0:u.chain().setCodeBlockStyle({trackingCallback:p}).focus().run();default:return u==null?void 0:u.chain().setHeadingStyle({level:o.styleToLevelMap[d],trackingCallback:p}).focus().run()}},h=s=>["paragraph","textStyleParagraph"].includes(s);return{setTextStyle:a,getIsTextStyleActive:s=>{const{$from:m}=u.state.selection,l=m.node(),{attrs:d}=l,{name:p}=l.type;switch(s){case"paragraph1":return h(p)&&d.class==="sqsrte-large";case"paragraph2":return h(p)&&d.class===null;case"paragraph3":return h(p)&&d.class==="sqsrte-small";case"monospace":return p==="textStyleCodeBlock";default:return p==="textStyleHeading"&&d.level===o.styleToLevelMap[s]}},handleMaintainStyleOnDeleteAll:s=>{if(s.steps.length>0){const m=s.steps[0].toJSON(),l=!s.getMeta("preventUpdate");if(m.stepType==="replace"&&s.doc.content.size===i&&s.before.content.size>i&&l){const d=s.before.nodeAt(0);if(d){const p=u.state.tr.replaceWith(0,s.doc.content.size,d.type.create(d.attrs,null,d.marks));u.view.dispatch(p)}}}},handleMaintainStyleOnEnter:()=>{const{state:s,view:m}=u,{dispatch:l}=m,{selection:d,tr:p}=s,{$from:E,empty:b}=d;if(b&&m.endOfTextblock("right")){for(let C=E.depth;C>0;C--)if(E.node(C).type.name==="listItem")return!1;const O=s.storedMarks||E.marks();return p.split(E.pos),O&&p.setStoredMarks(O),l(p),!0}return!1}}};t.textStyleOptionUtils=r},624111:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.UnderlineOptionExtension=void 0;var n=e(797854),o=e(448191);const i=t.UnderlineOptionExtension=n.Underline.extend({addKeyboardShortcuts(){return{"Mod-u":r=>{let{editor:u}=r;const{toggleUnderline:a}=(0,o.underlineOptionUtils)(u);return a({isKeyboardShortcut:!0})}}}})},916094:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"underlineOptionConfig",{enumerable:!0,get:function(){return n.underlineOptionConfig}}),Object.defineProperty(t,"underlineOptionUtils",{enumerable:!0,get:function(){return o.underlineOptionUtils}});var n=e(337696),o=e(448191)},337696:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.underlineOptionConfig=void 0;var n=e(624111);const o=()=>({tiptapExtension:n.UnderlineOptionExtension,optionId:"underline"});t.underlineOptionConfig=o},448191:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.underlineOptionUtils=void 0;var n=e(160060),o=e(812162);const i=r=>{const u=()=>!!(r!=null&&r.isActive("underline")),{getIsTextStyleActive:a}=(0,o.textStyleOptionUtils)(r);return{toggleUnderline:function(){let{isKeyboardShortcut:g,skipTracking:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return f||(0,n.trackEmphasizeText)({enabled:u(),isKeyboardShortcut:g,option:n.OptionObjectIdentifier.Underline}),r==null?void 0:r.chain().toggleUnderline().focus().run()},getIsUnderlineActive:u,getIsUnderlineDisabled:()=>a("monospace")}};t.underlineOptionUtils=i},77796:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.UndoRedoOptionExtension=void 0;var n=e(861647),o=e(278463);const i=t.UndoRedoOptionExtension=n.History.extend({addKeyboardShortcuts(){const{undo:r,redo:u}=(0,o.undoRedoOptionUtils)(this.editor);return{"Mod-z":()=>r({isKeyboardShortcut:!0}),"Mod-Shift-z":()=>u({isKeyboardShortcut:!0}),"Mod-y":()=>u({isKeyboardShortcut:!0})}}})},871969:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"undoRedoOptionConfig",{enumerable:!0,get:function(){return n.undoRedoOptionConfig}}),Object.defineProperty(t,"undoRedoOptionUtils",{enumerable:!0,get:function(){return o.undoRedoOptionUtils}});var n=e(314223),o=e(278463)},314223:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.undoRedoOptionConfig=void 0;var n=e(77796);const o=()=>({tiptapExtension:n.UndoRedoOptionExtension,optionId:"undoRedo"});t.undoRedoOptionConfig=o},278463:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.undoRedoOptionUtils=void 0;var n=e(807126);const o=i=>{const r=()=>i==null?void 0:i.can().redo(),u=()=>i==null?void 0:i.can().undo();return{canRedo:r,canUndo:u,redo:function(){let{isKeyboardShortcut:v,skipTracking:g}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r()?(g||(0,n.trackUndoRedo)({isKeyboardShortcut:v,isUndo:!1}),i==null?void 0:i.commands.redo()):!1},undo:function(){let{isKeyboardShortcut:v,skipTracking:g}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return u()?(g||(0,n.trackUndoRedo)({isKeyboardShortcut:v,isUndo:!0}),i==null?void 0:i.commands.undo()):!1}}};t.undoRedoOptionUtils=o},579068:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.setTrackingPayload=t.RTEEvents=void 0,e(392338);var o=e(15294),i=n(e(24175)),r=a(e(221661));function u(l){if(typeof WeakMap!="function")return null;var d=new WeakMap,p=new WeakMap;return(u=function(E){return E?p:d})(l)}function a(l,d){if(!d&&l&&l.__esModule)return l;if(l===null||typeof l!="object"&&typeof l!="function")return{default:l};var p=u(d);if(p&&p.has(l))return p.get(l);var E={__proto__:null},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in l)if(O!=="default"&&Object.prototype.hasOwnProperty.call(l,O)){var C=b?Object.getOwnPropertyDescriptor(l,O):null;C&&(C.get||C.set)?Object.defineProperty(E,O,C):E[O]=l[O]}return E.default=l,p&&p.set(l,E),E}const h=function(){var l,d;let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return typeof p=="string"?new URL(p).hostname:((l=p.Static)===null||l===void 0||(l=l.SQUARESPACE_CONTEXT)===null||l===void 0?void 0:l.appDomain)??((d=p.location)===null||d===void 0?void 0:d.host)??""},v=function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return/\.(sqsp|squarespace)\.net$/.test(h(l))},g="SquarespaceAdminEvents";class f{constructor(d){let{customSchemaName:p}=d;this.customSchemaName=p;const E={event_owner_team:"content",event_source:"web",actor:"user"},b=!1,O=b?r.SourceEnvironment.DEV:v()?r.SourceEnvironment.STAGING:r.SourceEnvironment.PROD;this.clientConfig={customSchemaName:p,logging:b,sourceEnvironment:O},this.defaultConfig={...E},this.tracker=null}setTrackingValues(d){this.defaultConfig.context_website_id=d.websiteId,this.defaultConfig.member_account_id=d.accountId,this.defaultConfig.member_account_locale=d.accountLocale,this.defaultConfig.product_area=d.productArea??"unknown",this.defaultConfig.product_area_level_2=d.productAreaLevel2,this.defaultConfig.product_section=d.productSection,this.defaultConfig.user_member_account_id=d.accountId,this.defaultConfig.user_website_id=d.websiteId,this.defaultConfig.website_locale=d.websiteLocale,(0,o.isCampaignsPayload)(d)&&(this.defaultConfig.campaign_id=d.campaignId,this.defaultConfig.composer_type=d.composerType,this.defaultConfig.property_path=d.propertyPath,this.defaultConfig.section_type=d.sectionType),(0,o.isPageEditorTrackingPayload)(d)&&(this.defaultConfig.block_id=d.blockId,this.defaultConfig.collection_id=d.collectionId,this.defaultConfig.layout_type=d.layoutType,this.defaultConfig.section_id=d.sectionId,this.defaultConfig.selected_template_id=d.selectedTemplateId,this.defaultConfig.selected_template_identifier=d.selectedTemplateIdentifier),(0,o.isProductComposerTrackingPayload)(d)&&(this.defaultConfig.product_id=d.productId),window.BroadcastChannel&&d.accessPermissions&&d.accessPermissions.includes(i.default.ADMIN)&&(this.bc=new BroadcastChannel(g)),this.tracker=new r.default(this.clientConfig,this.defaultConfig)}track(d){this.tracker&&(this.clientConfig.logging&&console.log(d.event_name,{...this.defaultConfig,...d}),this.tracker.track(d),this.bc&&this.bc.postMessage({squarespaceEventPayload:d}))}}const s=t.RTEEvents=new f({customSchemaName:"RichTextEditor"}),m=l=>{if(!l)return console.warn("RichTextEditor tracking payload is not set");s.setTrackingValues(l)};t.setTrackingPayload=m},519050:function(T,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TrackObjectType=t.TrackAction=t.OptionObjectIdentifier=void 0;let e=t.TrackAction=function(i){return i.Click="click",i}({}),n=t.TrackObjectType=function(i){return i.Button="button",i.Dropdown="dropdown",i}({}),o=t.OptionObjectIdentifier=function(i){return i.Blockquote="blockquote",i.Bold="bold",i.ClearFormatting="clearFormatting",i.Code="code",i.CustomColor="custom",i.DecreaseSpacing="decrease",i.Highlight="highlight",i.IncreaseSpacing="increase",i.Indent="indent",i.Italic="italics",i.OrderedList="orderedList",i.Outdent="outdent",i.PaletteColor="palette",i.Redo="redo",i.ScaleText="scaleText",i.Strikethrough="strikethrough",i.Subscript="subscript",i.Superscript="superscript",i.TextStyleDropdown="text-style-dropdown",i.Underline="underline",i.Undo="undo",i.UnorderedList="unorderedList",i}({})},160060:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"OptionObjectIdentifier",{enumerable:!0,get:function(){return u.OptionObjectIdentifier}}),Object.defineProperty(t,"RTEEvents",{enumerable:!0,get:function(){return n.RTEEvents}}),Object.defineProperty(t,"setTrackingPayload",{enumerable:!0,get:function(){return n.setTrackingPayload}}),Object.defineProperty(t,"trackClearFormatting",{enumerable:!0,get:function(){return o.trackClearFormatting}}),Object.defineProperty(t,"trackEmphasizeText",{enumerable:!0,get:function(){return i.trackEmphasizeText}}),Object.defineProperty(t,"trackSetHighlight",{enumerable:!0,get:function(){return a.trackSetHighlight}}),Object.defineProperty(t,"trackToggleScaledText",{enumerable:!0,get:function(){return r.trackToggleScaledText}});var n=e(579068),o=e(801098),i=e(765929),r=e(994435),u=e(519050),a=e(929615)},629691:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.trackAlignText=void 0;var n=e(579068),o=e(519050);const i=r=>{let{alignment:u,isKeyboardShortcut:a=!1}=r;n.RTEEvents.track({action:o.TrackAction.Click,event_name:"UserAlignsText",is_keyboard_shortcut:a,object_identifier:u,object_type:o.TrackObjectType.Button})};t.trackAlignText=i},986029:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.trackChangeIndentation=void 0;var n=e(579068),o=e(519050);const i=r=>{let{isIndent:u,isKeyboardShortcut:a=!1}=r;n.RTEEvents.track({action:o.TrackAction.Click,event_name:"UserChangesIndentation",is_keyboard_shortcut:a,object_identifier:u?o.OptionObjectIdentifier.Indent:o.OptionObjectIdentifier.Outdent,object_type:o.TrackObjectType.Button})};t.trackChangeIndentation=i},917402:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.trackChangeLetterSpacing=void 0;var n=e(579068),o=e(519050);const i=r=>{let{isIncrease:u,value:a}=r;n.RTEEvents.track({action:o.TrackAction.Click,event_name:"UserChangesLetterSpacing",object_identifier:u?o.OptionObjectIdentifier.IncreaseSpacing:o.OptionObjectIdentifier.DecreaseSpacing,object_type:o.TrackObjectType.Button,object_value:a.toString()})};t.trackChangeLetterSpacing=i},608289:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.trackChangeTextColor=void 0;var n=e(579068),o=e(519050);const i=r=>{let{color:u,isPaletteColor:a}=r;n.RTEEvents.track({action:o.TrackAction.Click,event_name:"UserChangesLocalTextColor",object_identifier:a?o.OptionObjectIdentifier.PaletteColor:o.OptionObjectIdentifier.CustomColor,object_type:o.TrackObjectType.Button,object_value:u})};t.trackChangeTextColor=i},801098:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.trackClearFormatting=void 0;var n=e(579068),o=e(519050);const i=r=>{let{isKeyboardShortcut:u=!1}=r;n.RTEEvents.track({action:o.TrackAction.Click,event_name:"UserClearsFormatting",is_keyboard_shortcut:u,object_identifier:o.OptionObjectIdentifier.ClearFormatting,object_type:o.TrackObjectType.Button})};t.trackClearFormatting=i},765929:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.trackEmphasizeText=void 0;var n=e(579068),o=e(519050);const i=r=>{let{enabled:u,isKeyboardShortcut:a=!1,option:h}=r;n.RTEEvents.track({action:o.TrackAction.Click,event_name:"UserEmphasizesText",is_keyboard_shortcut:a,object_identifier:h,object_type:o.TrackObjectType.Button,object_value:u?"enabled":"disabled"})};t.trackEmphasizeText=i},808076:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.trackSelectTextStyle=void 0;var n=e(579068),o=e(519050);const i=r=>{let{isKeyboardShortcut:u,textStyle:a}=r;n.RTEEvents.track({action:o.TrackAction.Click,event_name:"UserSelectsTextStyle",is_keyboard_shortcut:u,object_identifier:o.OptionObjectIdentifier.TextStyleDropdown,object_type:o.TrackObjectType.Dropdown,object_value:a})};t.trackSelectTextStyle=i},929615:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.trackSetHighlight=void 0;var n=e(579068),o=e(519050);const i=r=>{let{enabled:u,isKeyboardShortcut:a=!1}=r;n.RTEEvents.track({action:o.TrackAction.Click,event_name:"UserSetsTextHighlight",is_keyboard_shortcut:a,object_identifier:o.OptionObjectIdentifier.Highlight,object_type:o.TrackObjectType.Button,object_value:u?"enabled":"disabled"})};t.trackSetHighlight=i},164749:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.trackToggleBlockQuote=void 0;var n=e(579068),o=e(519050);const i=r=>{let{enabled:u,isKeyboardShortcut:a=!1}=r;n.RTEEvents.track({action:o.TrackAction.Click,event_name:"UserTogglesBlockQuote",is_keyboard_shortcut:a,object_identifier:o.OptionObjectIdentifier.Blockquote,object_type:o.TrackObjectType.Button,object_value:u?"enabled":"disabled"})};t.trackToggleBlockQuote=i},571861:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.trackToggleList=void 0;var n=e(579068),o=e(519050);const i=r=>{let{enabled:u,isKeyboardShortcut:a=!1,isOrdered:h}=r;n.RTEEvents.track({action:o.TrackAction.Click,event_name:"UserTogglesList",is_keyboard_shortcut:a,object_identifier:h?o.OptionObjectIdentifier.OrderedList:o.OptionObjectIdentifier.UnorderedList,object_type:o.TrackObjectType.Button,object_value:u?"enabled":"disabled"})};t.trackToggleList=i},994435:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.trackToggleScaledText=void 0;var n=e(579068),o=e(519050);const i=r=>{let{enabled:u,isKeyboardShortcut:a=!1}=r;n.RTEEvents.track({action:o.TrackAction.Click,event_name:"UserTogglesScaledText",is_keyboard_shortcut:a,object_identifier:o.OptionObjectIdentifier.ScaleText,object_type:o.TrackObjectType.Button,object_value:u?"enabled":"disabled"})};t.trackToggleScaledText=i},807126:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.trackUndoRedo=void 0;var n=e(579068),o=e(519050);const i=r=>{let{isKeyboardShortcut:u=!1,isUndo:a}=r;n.RTEEvents.track({action:o.TrackAction.Click,event_name:"UserClicksUndoRedo",is_keyboard_shortcut:u,object_identifier:a?o.OptionObjectIdentifier.Undo:o.OptionObjectIdentifier.Redo,object_type:o.TrackObjectType.Button})};t.trackUndoRedo=i},742686:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.PlainTextExtension=void 0;var n=e(20578);const o=t.PlainTextExtension=n.Document.extend({name:"plainText",content:"text*"})},609469:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PlainTextExtension",{enumerable:!0,get:function(){return n.PlainTextExtension}});var n=e(742686)},800817:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.TempBackgroundSelectionMark=void 0;var n=e(770841);const o=t.TempBackgroundSelectionMark=n.Mark.create({name:"tempBackgroundSelection",addCommands(){return{unsetTempBackgroundSelection:()=>i=>{let{commands:r}=i;return r.unsetMark(this.name)},setTempBackgroundSelection:()=>i=>{let{commands:r}=i;return r.setMark(this.name)},clearAllTempBackgroundSelection:()=>i=>{let{editor:r,chain:u}=i;const a=r.state.selection;return r.isActive(this.name)?u().selectAll().unsetTempBackgroundSelection().setTextSelection(a).run():!1}}},addOptions(){return{HTMLAttributes:{style:"background: #7676764D; padding: 3px 0px; margin: -3px 0px; color: inherit;"}}},onFocus(){this.editor.commands.clearAllTempBackgroundSelection()},parseHTML(){return[{tag:"mark"}]},renderHTML(i){let{HTMLAttributes:r}=i;return["mark",(0,n.mergeAttributes)(this.options.HTMLAttributes,r),0]}})},580168:function(T,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getChildNodesFromEditor=void 0;const e=o=>{const i=[];return o.forEach(r=>{i.push(r)}),i},n=o=>e(o.state.doc.content);t.getChildNodesFromEditor=n},499694:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getChildNodesFromEditor",{enumerable:!0,get:function(){return n.getChildNodesFromEditor}});var n=e(580168)},562697:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.getHTMLFromNode=void 0;var n=e(840692);const o=document.createElement("div"),i=r=>{const a=n.DOMSerializer.fromSchema(r.type.schema).serializeNode(r);o.appendChild(a);const h=o.innerHTML;return o.innerHTML="",h};t.getHTMLFromNode=i},500112:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getHTMLFromNode",{enumerable:!0,get:function(){return n.getHTMLFromNode}});var n=e(562697)},794475:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.headlessRichTextEditor=void 0;var n=e(770841),o=e(244449);const i=r=>{let{content:u,onUpdate:a,editorOptions:h}=r;const v=(0,o.normalizeExtensions)({editorOptions:h});return new n.Editor({content:u,extensions:v,onUpdate:g=>{let{editor:f}=g;const s=f.getHTML();a==null||a(s)}})};t.headlessRichTextEditor=i},346273:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PlainTextExtension",{enumerable:!0,get:function(){return a.PlainTextExtension}}),Object.defineProperty(t,"TempBackgroundSelectionMark",{enumerable:!0,get:function(){return v.TempBackgroundSelectionMark}}),Object.defineProperty(t,"getChildNodesFromEditor",{enumerable:!0,get:function(){return o.getChildNodesFromEditor}}),Object.defineProperty(t,"getHTMLFromNode",{enumerable:!0,get:function(){return i.getHTMLFromNode}}),Object.defineProperty(t,"hasParentNodeOfType",{enumerable:!0,get:function(){return u.hasParentNodeOfType}}),Object.defineProperty(t,"headlessRichTextEditor",{enumerable:!0,get:function(){return n.headlessRichTextEditor}}),Object.defineProperty(t,"normalizeExtensions",{enumerable:!0,get:function(){return r.normalizeExtensions}}),Object.defineProperty(t,"selectionUtils",{enumerable:!0,get:function(){return h.selectionUtils}});var n=e(794475),o=e(499694),i=e(500112),r=e(244449),u=e(209741),a=e(609469),h=e(131376),v=e(800817)},244449:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeExtensions=void 0;var n=e(20578),o=e(426432),i=e(976136),r=e(703686),u=e(728758),a=e(577867),h=e(800817);const v=[n.Document,a.ParagraphExtension,r.Text,o.HardBreak,u.Typography],g=l=>{let{hasNumberedList:d,hasBulletList:p}=l;if(!(!d&&!p)&&!(d&&p))throw"Due to a configuration issue with the underlying listItem extension, numberedListOption and bulletListOption both must be present or neither must be present."},f=l=>{let d=!1,p=!1;l.forEach(E=>{E.optionId==="bulletList"&&(p=!0),E.optionId==="numberedList"&&(d=!0)}),g({hasNumberedList:d,hasBulletList:p})},s=l=>{let d=!1;return l.reduce((p,E)=>{var b;return(b=E.parentExtensions)===null||b===void 0||b.forEach(O=>{!d&&O==="tempBackgroundSelection"&&(p.push(h.TempBackgroundSelectionMark),d=!0)}),p},[])},m=l=>{let{placeholder:d,editorOptions:p}=l;f(p);const E=s(p),b=[...v,...E];return p.forEach(O=>{O.tiptapExtension&&b.push(O.tiptapExtension)}),d&&b.push(i.Placeholder.configure({placeholder:d})),b};t.normalizeExtensions=m},209741:function(T,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hasParentNodeOfType=void 0;const e=(i,r)=>{for(let u=r.depth;u>0;u--){const a=r.node(u);if(i(a))return{pos:r.before(Math.max(u,0)),start:r.start(u),depth:u,node:a}}},n=(i,r)=>e(i,r.$from),o=(i,r)=>!!n(u=>u.type===r,i);t.hasParentNodeOfType=o},131376:function(T,t){Object.defineProperty(t,"__esModule",{value:!0}),t.selectionUtils=void 0;const e=n=>({deleteSelection:()=>n.chain().deleteSelection().run(),selectAll:()=>n.chain().selectAll().run(),setNodeSelection:a=>n.chain().setNodeSelection(a).run(),setTextSelection:a=>n.chain().setTextSelection(a).run()});t.selectionUtils=e},215586:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.FieldInput=void 0;var o=n(e(160553)),i=v(e(174161)),r=e(778008),u=e(436700),a=n(e(845076));e(548133);function h(f){if(typeof WeakMap!="function")return null;var s=new WeakMap,m=new WeakMap;return(h=function(l){return l?m:s})(f)}function v(f,s){if(!s&&f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var m=h(s);if(m&&m.has(f))return m.get(f);var l={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in f)if(p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)){var E=d?Object.getOwnPropertyDescriptor(f,p):null;E&&(E.get||E.set)?Object.defineProperty(l,p,E):l[p]=f[p]}return l.default=f,m&&m.set(f,l),l}const g=t.FieldInput=(0,i.forwardRef)((f,s)=>{let{className:m,"aria-placeholder":l,onClick:d,shouldShowFocus:p,sx:E,useSuggestedRTEStyleOverrides:b,...O}=f;const{borders:C}=(0,u.useTheme)();return i.default.createElement(r.Box,(0,o.default)({ref:s,"data-test":"rte-input",ariaPlaceholder:l,className:(0,a.default)(m,{suggestedRTEStyleOverrides:b}),bg:"bg.inset",display:"block",minHeight:"110px",onClick:d,px:2,py:"0.1px",sx:{fontFamily:"ui",fontSize:3,lineHeight:2,...p&&{outline:C[2],outlineColor:"border.strong"},"&:focus-within":{outline:C[2],outlineColor:"border.strong"},"& [contenteditable]":{outline:"none"},"& .tiptap p.is-editor-empty:first-of-type::before":{color:"fg.disabled",content:"attr(data-placeholder)",float:"left",height:"0",pointerEvents:"none"},...E}},O))})},372555:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.UnstyledInput=void 0;var o=n(e(160553)),i=a(e(174161)),r=e(778008);e(548133);function u(v){if(typeof WeakMap!="function")return null;var g=new WeakMap,f=new WeakMap;return(u=function(s){return s?f:g})(v)}function a(v,g){if(!g&&v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var f=u(g);if(f&&f.has(v))return f.get(v);var s={__proto__:null},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in v)if(l!=="default"&&Object.prototype.hasOwnProperty.call(v,l)){var d=m?Object.getOwnPropertyDescriptor(v,l):null;d&&(d.get||d.set)?Object.defineProperty(s,l,d):s[l]=v[l]}return s.default=v,f&&f.set(v,s),s}const h=t.UnstyledInput=(0,i.forwardRef)((v,g)=>{let{"aria-placeholder":f,onClick:s,sx:m,...l}=v;return i.default.createElement(r.Box,(0,o.default)({"data-test":"rte-input",ref:g,ariaPlaceholder:f,display:"block",onClick:s,sx:{"& .tiptap p.is-editor-empty:first-of-type::before":{color:"fg.disabled",content:"attr(data-placeholder)",float:"left",height:"0",pointerEvents:"none"},...m}},l))})},927479:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"FieldInput",{enumerable:!0,get:function(){return n.FieldInput}}),Object.defineProperty(t,"UnstyledInput",{enumerable:!0,get:function(){return o.UnstyledInput}});var n=e(215586),o=e(372555)},151290:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.PlainTextEditor=void 0;var n=h(e(174161)),o=e(667698),i=e(703686),r=e(107512),u=e(927479);function a(g){if(typeof WeakMap!="function")return null;var f=new WeakMap,s=new WeakMap;return(a=function(m){return m?s:f})(g)}function h(g,f){if(!f&&g&&g.__esModule)return g;if(g===null||typeof g!="object"&&typeof g!="function")return{default:g};var s=a(f);if(s&&s.has(g))return s.get(g);var m={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in g)if(d!=="default"&&Object.prototype.hasOwnProperty.call(g,d)){var p=l?Object.getOwnPropertyDescriptor(g,d):null;p&&(p.get||p.set)?Object.defineProperty(m,d,p):m[d]=g[d]}return m.default=g,s&&s.set(g,m),m}const v=g=>{var f;let{content:s,editable:m,inputRef:l,onUpdate:d,renderInput:p=C=>n.default.createElement(u.FieldInput,C)}=g;const E=(0,n.useRef)(null),b=l||E,O=(0,r.useEditor)({content:s,editable:m,extensions:[i.Text,o.PlainTextExtension],onUpdate:C=>{let{editor:S}=C;const P=S.getHTML();d==null||d(P)}},[m]);return(0,n.useEffect)(()=>(b.current&&O&&b.current.append(O.options.element),()=>{O==null||O.destroy()}),[O,b]),(0,n.useEffect)(()=>{O&&s!==void 0&&s!==O.getHTML()&&O.commands.setContent(s)},[s,O]),O?p({disabled:!m,onClick:()=>O.chain().focus().run(),ref:b,shouldShowFocus:(f=O.storage.popOver)===null||f===void 0?void 0:f.isOpen}):null};t.PlainTextEditor=v},276822:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.RichTextEditor=void 0;var n=f(e(174161)),o=e(667698),i=e(778008),r=e(107512),u=e(79306),a=e(22038),h=e(927479),v=e(383656);function g(m){if(typeof WeakMap!="function")return null;var l=new WeakMap,d=new WeakMap;return(g=function(p){return p?d:l})(m)}function f(m,l){if(!l&&m&&m.__esModule)return m;if(m===null||typeof m!="object"&&typeof m!="function")return{default:m};var d=g(l);if(d&&d.has(m))return d.get(m);var p={__proto__:null},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in m)if(b!=="default"&&Object.prototype.hasOwnProperty.call(m,b)){var O=E?Object.getOwnPropertyDescriptor(m,b):null;O&&(O.get||O.set)?Object.defineProperty(p,b,O):p[b]=m[b]}return p.default=m,d&&d.set(m,p),p}const s=m=>{var l;let{baseZIndex:d,content:p,editable:E=!0,inputRef:b,onUpdate:O,placeholder:C,renderInput:S=U=>n.default.createElement(h.FieldInput,U),editorOptions:P,toolbarProps:y,trackingPayload:c,handleDOMEvents:j,onEditorReady:N}=m;(0,o.setTrackingPayload)(c);const Z=(0,n.useRef)(null),z=b||Z,k=(0,r.useEditor)({content:p,editable:E,extensions:(0,o.normalizeExtensions)({placeholder:C,editorOptions:P}),parseOptions:{preserveWhitespace:"full"},onUpdate:U=>{let{editor:K}=U;const H=K.getHTML();O==null||O(H)}},[E,...P,C]),X=(0,n.useMemo)(()=>P.filter(o.isVisibleToolbarOption),[P]);(0,n.useEffect)(()=>(z.current&&k&&z.current.append(k.options.element),()=>{k==null||k.destroy()}),[k,z]),(0,n.useEffect)(()=>{k&&p!==void 0&&p!==k.getHTML()&&k.chain().setContent(p,!1,{preserveWhitespace:"full"}).setMeta("addToHistory",!1).run()},[p,k]),(0,n.useEffect)(()=>{k&&(k.view.setProps({handleDOMEvents:j}),N&&N(k))},[k,j,N]);const ie=k==null?void 0:k.storage.popOver,D=!!X.length||!!ie,I=(0,n.useMemo)(()=>{var U;const K=k==null||(U=k.storage.linkEditor)===null||U===void 0?void 0:U.contextProvider;return k!=null&&k.storage.popOver?K?()=>n.default.createElement(K,null,n.default.createElement(a.PopOverComponent,{editor:k})):()=>n.default.createElement(a.PopOverComponent,{editor:k}):()=>null},[k]),A=(0,n.useMemo)(()=>(0,u.v4)(),[]);if(!k||!D)return null;const W=n.default.createElement(i.Box,{"data-id":"rte-input-ref-box","data-rte-id":A},S({"aria-placeholder":C,onClick:()=>k.chain().focus().run(),ref:z,shouldShowFocus:(l=k.storage.popOver)===null||l===void 0?void 0:l.isOpen}));return n.default.createElement(n.default.Fragment,null,n.default.createElement(I,null),n.default.createElement(v.ToolbarRenderer,{baseZIndex:d,editable:E,editor:k,input:W,rteId:A,toolbarProps:y,trackingPayload:c,visibleToolbarOptions:X}))};t.RichTextEditor=s},516976:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.AIWriterToolbar=void 0;var o=n(e(160553)),i=f(e(174161)),r=e(824830),u=e(778008),a=e(923842),h=e(200358),v=e(15159);function g(l){if(typeof WeakMap!="function")return null;var d=new WeakMap,p=new WeakMap;return(g=function(E){return E?p:d})(l)}function f(l,d){if(!d&&l&&l.__esModule)return l;if(l===null||typeof l!="object"&&typeof l!="function")return{default:l};var p=g(d);if(p&&p.has(l))return p.get(l);var E={__proto__:null},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in l)if(O!=="default"&&Object.prototype.hasOwnProperty.call(l,O)){var C=b?Object.getOwnPropertyDescriptor(l,O):null;C&&(C.get||C.set)?Object.defineProperty(E,O,C):E[O]=l[O]}return E.default=l,p&&p.set(l,E),E}const s=l=>{let{baseZIndex:d,editor:p,options:E,rteId:b,toolbarProps:O={},trigger:C}=l;const{open:S,onOpenChange:P,...y}=O,[c,j]=(0,i.useState)(!1),N=P??j,Z=S??c,{aiModalProps:z,AIWriterContent:k,closeAIWriter:X,getContainerWidth:ie,isAIWriterOpen:D}=(0,h.aiWriterOptionUtils)(p),[I,A]=(0,a.useMeasure)(),[W,U]=(0,i.useState)("0"),{isModalOpen:K}=(0,r.useAIModalContext)();(0,i.useEffect)(()=>{if(A.width){const J=ie({anchorWidth:A.width});U(J)}},[A,ie]);const H=i.default.createElement(u.Flex,{gap:"4px",ref:I},E),R=D&&k?i.default.createElement(k,{containerWidth:W,editor:p}):null;return i.default.createElement(i.default.Fragment,null,i.default.createElement(v.Toolbar,(0,o.default)({baseZIndex:d,onOpenChange:J=>{!J&&!K()?(X(),N(!1)):N(!0)},open:Z,options:R||H,rteId:b,trigger:C},y)),z&&i.default.createElement(r.ManagedModals,z))},m=l=>i.default.createElement(r.AIModalContextProvider,null,i.default.createElement(s,l));t.AIWriterToolbar=m},15159:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0;var n=g(e(174161)),o=e(278290),i=e(894458),r=e(778008),u=e(436700),a=e(923842),h=e(164880);function v(s){if(typeof WeakMap!="function")return null;var m=new WeakMap,l=new WeakMap;return(v=function(d){return d?l:m})(s)}function g(s,m){if(!m&&s&&s.__esModule)return s;if(s===null||typeof s!="object"&&typeof s!="function")return{default:s};var l=v(m);if(l&&l.has(s))return l.get(s);var d={__proto__:null},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in s)if(E!=="default"&&Object.prototype.hasOwnProperty.call(s,E)){var b=p?Object.getOwnPropertyDescriptor(s,E):null;b&&(b.get||b.set)?Object.defineProperty(d,E,b):d[E]=s[E]}return d.default=s,l&&l.set(s,d),d}const f=s=>{let{baseZIndex:m,className:l,isInModal:d,offset:p={mainAxis:10},onOpenChange:E,open:b,options:O,placement:C="top-start",rootNode:S,rteId:P,shiftPadding:y,trigger:c}=s;const[j,N]=(0,n.useState)(),Z={...S&&{root:S}},{shouldHideToolbar:z}=(0,h.useScrollHidesToolbar)({ref:j,open:b,shiftPadding:y}),{breakpoints:k}=(0,u.useTheme)(),{platform:X}=(0,a.getBreakpoint)(k),ie=X==="mobile";return n.default.createElement(i.Toolbox.Position,{desktopPlacement:C,mobilePlacement:"bottom",trigger:c,onOpenChange:E,open:b,floatingPortalProps:Z,middleware:[(0,o.offset)(p),(0,o.flip)({mainAxis:!1}),(0,o.shift)({crossAxis:!0,padding:y,elementContext:d?"reference":"floating",limiter:(0,o.limitShift)()})]},n.default.createElement(a.ZIndexStack,{baseIndex:m},D=>n.default.createElement(n.default.Fragment,null,n.default.createElement(r.Box,{ref:N}),n.default.createElement(i.Toolbox,{className:h.RTE_TOOLBAR_TARGET+" "+l,"data-no-focus-lock":!0,"data-toolbar-id":P,"data-test":"rte-toolbar",sx:{position:"relative",zIndex:D,background:"white",...z&&{visibility:"hidden"},...ie&&{width:"auto"}}},O))))};t.Toolbar=f},970189:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarRenderer=void 0;var o=n(e(160553)),i=h(e(174161)),r=e(516976),u=e(15159);function a(g){if(typeof WeakMap!="function")return null;var f=new WeakMap,s=new WeakMap;return(a=function(m){return m?s:f})(g)}function h(g,f){if(!f&&g&&g.__esModule)return g;if(g===null||typeof g!="object"&&typeof g!="function")return{default:g};var s=a(f);if(s&&s.has(g))return s.get(g);var m={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in g)if(d!=="default"&&Object.prototype.hasOwnProperty.call(g,d)){var p=l?Object.getOwnPropertyDescriptor(g,d):null;p&&(p.get||p.set)?Object.defineProperty(m,d,p):m[d]=g[d]}return m.default=g,s&&s.set(g,m),m}const v=g=>{let{baseZIndex:f,editable:s,editor:m,input:l,rteId:d,toolbarProps:p={},trackingPayload:E,visibleToolbarOptions:b}=g;const{open:O,onOpenChange:C}=p,[S,P]=(0,i.useState)(!1),y=C??P,c=O??S,j=z=>{s&&y(z)},N=b.find(z=>z.optionId==="aiWriter"),Z=b.map((z,k)=>{const X=z.ToolbarOptionComponent;return i.default.createElement(X,(0,o.default)({baseZIndex:f,key:`${z.optionId}-${k}`},z,{editor:m,trackingPayload:E}))});return N?i.default.createElement(r.AIWriterToolbar,{baseZIndex:f,editor:m,options:Z,rteId:d,toolbarProps:{...p,open:c,onOpenChange:j},trigger:l}):i.default.createElement(u.Toolbar,(0,o.default)({baseZIndex:f,options:Z,rteId:d,trigger:l},p,{open:c,onOpenChange:j}))};t.ToolbarRenderer=v},383656:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Toolbar",{enumerable:!0,get:function(){return n.Toolbar}}),Object.defineProperty(t,"ToolbarRenderer",{enumerable:!0,get:function(){return o.ToolbarRenderer}});var n=e(15159),o=e(970189)},164880:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.useScrollHidesToolbar=t.RTE_TOOLBAR_TARGET=void 0;var n=e(174161);const o=t.RTE_TOOLBAR_TARGET="rte-toolbar-target",i=()=>document.getElementById("sqs-site-frame"),r=()=>{var s;const m=i();return(m==null?void 0:m.contentDocument)||(m==null||(s=m.contentWindow)===null||s===void 0?void 0:s.document)},u=s=>{const m=[],l=r();for(l&&m.push(l);s;){const d=window.getComputedStyle(s).overflowY;(d==="scroll"||d==="auto")&&m.push(s),s=s.parentElement||void 0}return m},a=()=>{var s;const m=(s=document.getElementsByClassName(o))===null||s===void 0?void 0:s[0];if(!m){var l;const d=r();return d==null||(l=d.getElementsByClassName(o))===null||l===void 0?void 0:l[0]}return m},h=()=>{var s;const m=a(),l=m==null?void 0:m.getAttribute("data-toolbar-id");if(!l)return;const d=(s=document.querySelectorAll(`[data-rte-id="${l}"]`))===null||s===void 0?void 0:s[0];if(!d){var p;const E=r();return E==null||(p=E.querySelectorAll(`[data-rte-id="${l}"]`))===null||p===void 0?void 0:p[0]}return d},v=s=>s?typeof s=="number"?{top:s,right:s,bottom:s,left:s}:{top:s.top||0,right:s.right||0,bottom:s.bottom||0,left:s.left||0}:{top:0,bottom:0,left:0,right:0},g=s=>{if(!s.getBoundingClientRect){var m;return((m=document.scrollingElement)===null||m===void 0?void 0:m.getBoundingClientRect())||{top:0,bottom:1e3}}return s.getBoundingClientRect()},f=s=>{let{ref:m,open:l,shiftPadding:d}=s;const[p,E]=(0,n.useState)(!1),b=(0,n.useCallback)(O=>{let C=!0;const S=O.target,P=h();if(S&&P){const y=g(S),c=P.getBoundingClientRect(),j=v(d),N=c.bottom>y.top+j.top,Z=c.top>y.top;C=N||Z}E(!C)},[E,d]);return(0,n.useEffect)(()=>{if(m&&l){const O=u(h());if(O.length){for(const C of O)C.addEventListener("scroll",b);return()=>{for(const C of O)C.removeEventListener("scroll",b)}}}},[b,m,l]),{shouldHideToolbar:p}};t.useScrollHidesToolbar=f},504932:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n={RichTextEditor:!0,PlainTextEditor:!0};Object.defineProperty(t,"PlainTextEditor",{enumerable:!0,get:function(){return i.PlainTextEditor}}),Object.defineProperty(t,"RichTextEditor",{enumerable:!0,get:function(){return o.RichTextEditor}});var o=e(276822),i=e(151290),r=e(200358);Object.keys(r).forEach(function(a){a==="default"||a==="__esModule"||Object.prototype.hasOwnProperty.call(n,a)||a in t&&t[a]===r[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return r[a]}})});var u=e(927479);Object.keys(u).forEach(function(a){a==="default"||a==="__esModule"||Object.prototype.hasOwnProperty.call(n,a)||a in t&&t[a]===u[a]||Object.defineProperty(t,a,{enumerable:!0,get:function(){return u[a]}})})},252691:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.aiWriterOption=void 0;var n=u(e(174161)),o=e(824830),i=e(667698);function r(g){if(typeof WeakMap!="function")return null;var f=new WeakMap,s=new WeakMap;return(r=function(m){return m?s:f})(g)}function u(g,f){if(!f&&g&&g.__esModule)return g;if(g===null||typeof g!="object"&&typeof g!="function")return{default:g};var s=r(f);if(s&&s.has(g))return s.get(g);var m={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in g)if(d!=="default"&&Object.prototype.hasOwnProperty.call(g,d)){var p=l?Object.getOwnPropertyDescriptor(g,d):null;p&&(p.get||p.set)?Object.defineProperty(m,d,p):m[d]=g[d]}return m.default=g,s&&s.set(g,m),m}const a=g=>{let{brandName:f,modalClassName:s,websiteId:m,isTakeRateEnabled:l}=g;return d=>{let{containerWidth:p,editor:E}=d;const{closeAIWriter:b,insertText:O,selectedText:C}=(0,i.aiWriterOptionUtils)(E,l),S=E.isFocused;return n.default.createElement(o.AIWriterContent,{brandName:f,closeAIWriter:()=>b({shouldFocusRTE:!0}),containerWidth:p,onFocus:()=>E.commands.setTempBackgroundSelection(),onInsertText:O,popoverClassName:s,selectedText:C,shouldHidePromptOptions:S,websiteId:m})}},h=g=>{let{brandName:f,modalClassName:s,onGeneratedTextUpdate:m}=g;return l=>{let{editor:d,trackingPayload:p}=l;const{aiModalProps:E,openAIWriter:b,selectedText:O,setAIModalProps:C,setAIWriterContent:S}=(0,i.aiWriterOptionUtils)(d);return E||C({brandName:f,modalClassName:s,websiteId:(p==null?void 0:p.websiteId)||""}),(0,n.useEffect)(()=>{const P=a({brandName:f,modalClassName:s,websiteId:(p==null?void 0:p.websiteId)||"",isTakeRateEnabled:!!m});S(P)},[S,p==null?void 0:p.websiteId]),p?n.default.createElement(o.AIWriterLauncher,{modalClassName:s,openAIWriter:()=>b(),selectedText:O,trackingPayload:p}):(console.warn("tracking payload not provided for RTE to pass to AI Writer"),n.default.createElement("div",null))}},v=g=>({...(0,i.aiWriterOptionConfig)(g),ToolbarOptionComponent:h(g)});t.aiWriterOption=v},262603:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"aiWriterOption",{enumerable:!0,get:function(){return n.aiWriterOption}}),Object.defineProperty(t,"aiWriterOptionUtils",{enumerable:!0,get:function(){return o.aiWriterOptionUtils}});var n=e(252691),o=e(667698)},145273:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.blockquoteOption=t.BlockquoteComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Quote",{},{project:"rich-text-editor"}),v=s=>{let{isActive:m,isDisabled:l,onClick:d}=s;return o.default.createElement(r.Tool.Toggleable,{icon:o.default.createElement(u.Quote,null),isActive:m,isDisabled:l,label:h,onClick:d})};t.BlockquoteComponent=v;const g=s=>{let{editor:m}=s;const{toggleBlockquote:l,getIsBlockquoteDisabled:d}=(0,i.blockquoteOptionUtils)(m);return o.default.createElement(v,{isActive:(0,i.getIsBlockquoteActive)(m),isDisabled:d(),onClick:()=>{l()}})},f=()=>({...(0,i.blockquoteOptionConfig)(),ToolbarOptionComponent:g});t.blockquoteOption=f},23750:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"blockquoteOption",{enumerable:!0,get:function(){return o.blockquoteOption}}),Object.defineProperty(t,"blockquoteOptionUtils",{enumerable:!0,get:function(){return n.blockquoteOptionUtils}});var n=e(667698),o=e(145273)},434611:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.boldOption=t.BoldComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Bold",{},{project:"rich-text-editor"}),v=s=>{let{isActive:m,isDisabled:l,onClick:d}=s;return o.default.createElement(r.Tool.Toggleable,{icon:o.default.createElement(u.Bold,null),isActive:m,isDisabled:l,label:h,onClick:d})};t.BoldComponent=v;const g=s=>{let{editor:m}=s;const{toggleBold:l,getIsBoldActive:d,getIsBoldDisabled:p}=(0,i.boldOptionUtils)(m);return o.default.createElement(v,{isActive:d(),isDisabled:p(),onClick:()=>{l()}})},f=()=>({...(0,i.boldOptionConfig)(),ToolbarOptionComponent:g});t.boldOption=f},928864:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"boldOption",{enumerable:!0,get:function(){return o.boldOption}}),Object.defineProperty(t,"boldOptionUtils",{enumerable:!0,get:function(){return n.boldOptionUtils}});var n=e(667698),o=e(434611)},233237:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.bulletListOption=t.BulletListComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Bullet List",{},{project:"rich-text-editor"}),v=s=>{let{isActive:m,isDisabled:l,onClick:d}=s;return o.default.createElement(r.Tool.Toggleable,{icon:o.default.createElement(u.BulletedList,null),isActive:m,isDisabled:l,label:h,onClick:d})};t.BulletListComponent=v;const g=s=>{let{editor:m}=s;const{toggleBulletList:l,getIsBulletListDisabled:d}=(0,i.bulletListOptionUtils)(m);return o.default.createElement(v,{isActive:(0,i.getIsBulletListActive)(m),isDisabled:d(),onClick:()=>{l()}})},f=()=>({...(0,i.bulletListOptionConfig)(),ToolbarOptionComponent:g});t.bulletListOption=f},493670:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"bulletListOption",{enumerable:!0,get:function(){return o.bulletListOption}}),Object.defineProperty(t,"bulletListOptionUtils",{enumerable:!0,get:function(){return n.bulletListOptionUtils}});var n=e(667698),o=e(233237)},809676:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.characterCountOption=void 0;var n=e(667698);const o=i=>({...(0,n.characterCountOptionConfig)(i)});t.characterCountOption=o},60509:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"characterCountOption",{enumerable:!0,get:function(){return n.characterCountOption}});var n=e(809676)},618607:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.clearFormattingOption=t.ClearFormattingComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Clear Formatting",null,{project:"rich-text-editor"}),v=s=>{let{onClick:m}=s;return o.default.createElement(r.Tool.Action,{icon:o.default.createElement(u.ClearFormatting,null),label:h,onClick:m})};t.ClearFormattingComponent=v;const g=s=>{let{editor:m}=s;const{clearFormatting:l}=(0,i.clearFormattingOptionUtils)(m);return o.default.createElement(v,{onClick:()=>{l()}})},f=()=>({...(0,i.clearFormattingOptionConfig)(),ToolbarOptionComponent:g});t.clearFormattingOption=f},804039:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"clearFormattingOption",{enumerable:!0,get:function(){return o.clearFormattingOption}}),Object.defineProperty(t,"clearFormattingOptionUtils",{enumerable:!0,get:function(){return n.clearFormattingOptionUtils}});var n=e(667698),o=e(618607)},448782:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.dividerOption=t.DividerComponent=void 0;var o=n(e(174161)),i=e(894458);const r=()=>o.default.createElement(i.Toolbox.Divider,{height:22});t.DividerComponent=r;const u=()=>o.default.createElement(r,null),a=()=>({ToolbarOptionComponent:u,optionId:"divider"});t.dividerOption=a},74687:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"dividerOption",{enumerable:!0,get:function(){return n.dividerOption}});var n=e(448782)},140442:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.ellipsisOption=t.EllipsisComponent=void 0;var o=n(e(160553)),i=n(e(174161)),r=e(667698),u=e(894458),a=e(488475),h=e(923842),v=e(29347);const g=(0,v.t)("More options",{},{project:"rich-text-editor"}),f=l=>{let{baseZIndex:d,editor:p,toolbarOptions:E}=l;return i.default.createElement(h.ZIndexStack,{baseIndex:d},b=>i.default.createElement(u.Tool.Drawer,{gap:1,renderTrigger:O=>i.default.createElement(u.Tool.Drawer.Trigger,(0,o.default)({},O,{label:g}),i.default.createElement(a.Ellipses,null)),zIndex:b},E.map(O=>{const C=O.ToolbarOptionComponent;return i.default.createElement(C,(0,o.default)({key:O.optionId},O,{editor:p}))})))};t.EllipsisComponent=f;const s=l=>{let{baseZIndex:d,editor:p,toolbarOptions:E}=l;return i.default.createElement(f,{baseZIndex:d,editor:p,toolbarOptions:E})},m=l=>({...(0,r.ellipsisOptionConfig)(l),ToolbarOptionComponent:d=>i.default.createElement(s,(0,o.default)({},d,{toolbarOptions:l.toolbarOptions})),optionId:"more"});t.ellipsisOption=m},16176:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ellipsisOption",{enumerable:!0,get:function(){return n.ellipsisOption}});var n=e(140442)},517321:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.indentationOption=t.OutdentComponent=t.IndentationOptionComponent=t.IndentComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Indent",{},{project:"rich-text-editor"}),v=(0,a.t)("Outdent",{},{project:"rich-text-editor"}),g=l=>{let{isDisabled:d,onClick:p}=l;return o.default.createElement(r.Tool.Action,{icon:o.default.createElement(u.IncreaseIndent,null),isDisabled:d,label:h,onClick:p})};t.IndentComponent=g;const f=l=>{let{isDisabled:d,onClick:p}=l;return o.default.createElement(r.Tool.Action,{icon:o.default.createElement(u.DecreaseIndent,null),isDisabled:d,label:v,onClick:p})};t.OutdentComponent=f;const s=l=>{let{indent:d,isDisabled:p,outdent:E}=l;return o.default.createElement(o.default.Fragment,null,o.default.createElement(f,{isDisabled:p,onClick:()=>{E()}}),o.default.createElement(g,{isDisabled:p,onClick:()=>{d()}}))};t.IndentationOptionComponent=s;const m=l=>({...(0,i.indentationOptionConfig)(l),ToolbarOptionComponent:d=>{let{editor:p}=d;const{getIsIndentationDisabled:E,indent:b,outdent:O}=(0,i.indentationOptionUtils)(p);return o.default.createElement(s,{indent:b,isDisabled:E(),outdent:O})}});t.indentationOption=m},124648:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"indentationOption",{enumerable:!0,get:function(){return o.indentationOption}}),Object.defineProperty(t,"indentationOptionUtils",{enumerable:!0,get:function(){return n.indentationOptionUtils}});var n=e(667698),o=e(517321)},200358:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n={aiWriterOption:!0,aiWriterOptionUtils:!0,blockquoteOption:!0,blockquoteOptionUtils:!0,bulletListOption:!0,bulletListOptionUtils:!0,characterCountOption:!0,dividerOption:!0,ellipsisOption:!0,indentationOption:!0,indentationOptionUtils:!0,italicOption:!0,italicOptionUtils:!0,letterSpacingOption:!0,letterSpacingOptionUtils:!0,linkOption:!0,numberedListOption:!0,numberedListOptionUtils:!0,scaledTextOption:!0,scaledTextOptionUtils:!0,strikethroughOption:!0,strikethroughOptionUtils:!0,subscriptOption:!0,subscriptOptionUtils:!0,superscriptOption:!0,superscriptOptionUtils:!0,textAlignOption:!0,textAlignOptionUtils:!0,textColorOption:!0,textColorOptionUtils:!0,textHighlightOption:!0,textHighlightOptionUtils:!0,textStyleOption:!0,textStyleOptionUtils:!0,underlineOption:!0,underlineOptionUtils:!0,undoRedoOption:!0,undoRedoOptionUtils:!0};Object.defineProperty(t,"aiWriterOption",{enumerable:!0,get:function(){return o.aiWriterOption}}),Object.defineProperty(t,"aiWriterOptionUtils",{enumerable:!0,get:function(){return o.aiWriterOptionUtils}}),Object.defineProperty(t,"blockquoteOption",{enumerable:!0,get:function(){return i.blockquoteOption}}),Object.defineProperty(t,"blockquoteOptionUtils",{enumerable:!0,get:function(){return i.blockquoteOptionUtils}}),Object.defineProperty(t,"bulletListOption",{enumerable:!0,get:function(){return u.bulletListOption}}),Object.defineProperty(t,"bulletListOptionUtils",{enumerable:!0,get:function(){return u.bulletListOptionUtils}}),Object.defineProperty(t,"characterCountOption",{enumerable:!0,get:function(){return a.characterCountOption}}),Object.defineProperty(t,"dividerOption",{enumerable:!0,get:function(){return v.dividerOption}}),Object.defineProperty(t,"ellipsisOption",{enumerable:!0,get:function(){return g.ellipsisOption}}),Object.defineProperty(t,"indentationOption",{enumerable:!0,get:function(){return f.indentationOption}}),Object.defineProperty(t,"indentationOptionUtils",{enumerable:!0,get:function(){return f.indentationOptionUtils}}),Object.defineProperty(t,"italicOption",{enumerable:!0,get:function(){return s.italicOption}}),Object.defineProperty(t,"italicOptionUtils",{enumerable:!0,get:function(){return s.italicOptionUtils}}),Object.defineProperty(t,"letterSpacingOption",{enumerable:!0,get:function(){return m.letterSpacingOption}}),Object.defineProperty(t,"letterSpacingOptionUtils",{enumerable:!0,get:function(){return m.letterSpacingOptionUtils}}),Object.defineProperty(t,"linkOption",{enumerable:!0,get:function(){return l.linkOption}}),Object.defineProperty(t,"numberedListOption",{enumerable:!0,get:function(){return d.numberedListOption}}),Object.defineProperty(t,"numberedListOptionUtils",{enumerable:!0,get:function(){return d.numberedListOptionUtils}}),Object.defineProperty(t,"scaledTextOption",{enumerable:!0,get:function(){return p.scaledTextOption}}),Object.defineProperty(t,"scaledTextOptionUtils",{enumerable:!0,get:function(){return p.scaledTextOptionUtils}}),Object.defineProperty(t,"strikethroughOption",{enumerable:!0,get:function(){return E.strikethroughOption}}),Object.defineProperty(t,"strikethroughOptionUtils",{enumerable:!0,get:function(){return E.strikethroughOptionUtils}}),Object.defineProperty(t,"subscriptOption",{enumerable:!0,get:function(){return b.subscriptOption}}),Object.defineProperty(t,"subscriptOptionUtils",{enumerable:!0,get:function(){return b.subscriptOptionUtils}}),Object.defineProperty(t,"superscriptOption",{enumerable:!0,get:function(){return O.superscriptOption}}),Object.defineProperty(t,"superscriptOptionUtils",{enumerable:!0,get:function(){return O.superscriptOptionUtils}}),Object.defineProperty(t,"textAlignOption",{enumerable:!0,get:function(){return C.textAlignOption}}),Object.defineProperty(t,"textAlignOptionUtils",{enumerable:!0,get:function(){return C.textAlignOptionUtils}}),Object.defineProperty(t,"textColorOption",{enumerable:!0,get:function(){return S.textColorOption}}),Object.defineProperty(t,"textColorOptionUtils",{enumerable:!0,get:function(){return S.textColorOptionUtils}}),Object.defineProperty(t,"textHighlightOption",{enumerable:!0,get:function(){return P.textHighlightOption}}),Object.defineProperty(t,"textHighlightOptionUtils",{enumerable:!0,get:function(){return P.textHighlightOptionUtils}}),Object.defineProperty(t,"textStyleOption",{enumerable:!0,get:function(){return y.textStyleOption}}),Object.defineProperty(t,"textStyleOptionUtils",{enumerable:!0,get:function(){return y.textStyleOptionUtils}}),Object.defineProperty(t,"underlineOption",{enumerable:!0,get:function(){return c.underlineOption}}),Object.defineProperty(t,"underlineOptionUtils",{enumerable:!0,get:function(){return c.underlineOptionUtils}}),Object.defineProperty(t,"undoRedoOption",{enumerable:!0,get:function(){return j.undoRedoOption}}),Object.defineProperty(t,"undoRedoOptionUtils",{enumerable:!0,get:function(){return j.undoRedoOptionUtils}});var o=e(262603),i=e(23750),r=e(928864);Object.keys(r).forEach(function(N){N==="default"||N==="__esModule"||Object.prototype.hasOwnProperty.call(n,N)||N in t&&t[N]===r[N]||Object.defineProperty(t,N,{enumerable:!0,get:function(){return r[N]}})});var u=e(493670),a=e(60509),h=e(804039);Object.keys(h).forEach(function(N){N==="default"||N==="__esModule"||Object.prototype.hasOwnProperty.call(n,N)||N in t&&t[N]===h[N]||Object.defineProperty(t,N,{enumerable:!0,get:function(){return h[N]}})});var v=e(74687),g=e(16176),f=e(124648),s=e(907480),m=e(228153),l=e(971535),d=e(723420),p=e(579910),E=e(998913),b=e(776886),O=e(177094),C=e(81691),S=e(427918),P=e(455705),y=e(832067),c=e(992777),j=e(420291)},907480:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"italicOption",{enumerable:!0,get:function(){return o.italicOption}}),Object.defineProperty(t,"italicOptionUtils",{enumerable:!0,get:function(){return n.italicOptionUtils}});var n=e(667698),o=e(997190)},997190:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.italicOption=t.ItalicComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Italic",{},{project:"rich-text-editor"}),v=s=>{let{isActive:m,isDisabled:l,onClick:d}=s;return o.default.createElement(r.Tool.Toggleable,{icon:o.default.createElement(u.Italic,null),isActive:m,isDisabled:l,label:h,onClick:d})};t.ItalicComponent=v;const g=s=>{let{editor:m}=s;const{toggleItalic:l,getIsItalicActive:d,getIsItalicDisabled:p}=(0,i.italicOptionUtils)(m);return o.default.createElement(v,{isActive:d(),isDisabled:p(),onClick:()=>{l()}})},f=()=>({...(0,i.italicOptionConfig)(),ToolbarOptionComponent:g});t.italicOption=f},228153:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"letterSpacingOption",{enumerable:!0,get:function(){return o.letterSpacingOption}}),Object.defineProperty(t,"letterSpacingOptionUtils",{enumerable:!0,get:function(){return n.letterSpacingOptionUtils}});var n=e(667698),o=e(611941)},611941:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.letterSpacingOption=t.LetterSpacingComponent=void 0;var o=n(e(160553)),i=s(e(174161)),r=e(667698),u=e(894458),a=e(488475),h=e(778008),v=e(923842),g=e(29347);function f(E){if(typeof WeakMap!="function")return null;var b=new WeakMap,O=new WeakMap;return(f=function(C){return C?O:b})(E)}function s(E,b){if(!b&&E&&E.__esModule)return E;if(E===null||typeof E!="object"&&typeof E!="function")return{default:E};var O=f(b);if(O&&O.has(E))return O.get(E);var C={__proto__:null},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in E)if(P!=="default"&&Object.prototype.hasOwnProperty.call(E,P)){var y=S?Object.getOwnPropertyDescriptor(E,P):null;y&&(y.get||y.set)?Object.defineProperty(C,P,y):C[P]=E[P]}return C.default=E,O&&O.set(E,C),C}const m=(0,g.t)("Letter Spacing",{},{project:"rich-text-editor"}),l=E=>{let{baseZIndex:b,onClick:O,getIsActive:C,getLetterSpacing:S}=E;const[P,y]=(0,i.useState)(r.MinLetterSpacing);return(0,i.useEffect)(()=>{const{letterSpacing:c}=S();c===void 0?y(r.MinLetterSpacing):c>=r.MinLetterSpacing&&c<=r.MaxLetterSpacing&&y(c)},[S]),i.default.createElement(v.ZIndexStack,{baseIndex:b},c=>i.default.createElement(u.Tool.Drawer,{gap:1,p:1,renderTrigger:j=>i.default.createElement(u.Tool.Drawer.Trigger,(0,o.default)({},j,{label:m,isActive:C(P)}),i.default.createElement(a.LetterSpacing,null)),zIndex:c},i.default.createElement(h.Text.Body,{m:0},(0,g.t)("{letterSpacing}\xD7",{letterSpacing:P},{project:"rich-text-editor",notes:"the amount of spacing between the letters, expressed as a multiple"})),i.default.createElement(u.Tool.Action,{icon:i.default.createElement(a.Minus,{color:P<=r.MinLetterSpacing?"fg.disabled":"fg.default"}),label:(0,g.t)("Decrease",{},{project:"rich-text-editor"}),isDisabled:P<=r.MinLetterSpacing,onClick:()=>{const j=P<=r.MinLetterSpacing?r.MinLetterSpacing:P-1;y(j),O(j,!1)}}),i.default.createElement(u.Tool.Action,{icon:i.default.createElement(a.Plus,{color:P>=r.MaxLetterSpacing?"fg.disabled":"fg.default"}),isDisabled:P>=r.MaxLetterSpacing,label:(0,g.t)("Increase",{},{project:"rich-text-editor"}),onClick:()=>{const j=P>=r.MaxLetterSpacing?r.MaxLetterSpacing:P+1;y(j),O(j,!0)}})))};t.LetterSpacingComponent=l;const d=E=>{let{baseZIndex:b,editor:O}=E;const{getIsActive:C,setLetterSpacing:S,getLetterSpacing:P}=(0,r.letterSpacingOptionUtils)(O);return i.default.createElement(l,{baseZIndex:b,getIsActive:y=>C(y),getLetterSpacing:P,onClick:(y,c)=>{S({letterSpacing:y,isIncrease:c})}})},p=()=>({...(0,r.letterSpacingOptionConfig)(),ToolbarOptionComponent:d});t.letterSpacingOption=p},71150:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.LinkEditorExtension=void 0;var n=e(770841),o=e(269787),i=e(92682),r=e(22038);const u=t.LinkEditorExtension=n.Extension.create({name:"linkEditor",addKeyboardShortcuts(){return{"Mod-k":()=>{const{setLinkEditorOpen:a,getIsDisabled:h}=(0,i.linkExtensionUtils)(this.editor);return h()?!1:a(!0)}}},addExtensions(){return[o.Link.configure({openOnClick:!1,protocols:["ftp","mailto","https"],linkOnPaste:!0,HTMLAttributes:{target:null,rel:null}}),r.PopOverExtension]},addStorage(){var a;return{isLinkEditorOpen:!1,currentSelection:void 0,ignoreSelection:!1,selectedLinkNode:null,contextProvider:(a=this.options)===null||a===void 0||(a=a.popOverConfig)===null||a===void 0?void 0:a.contextProvider}},onFocus(){var a;(0,i.linkExtensionUtils)(this.editor).handleShowLinkPreview({modalClassName:this.options.modalClassName,mountAt:(a=this.options.popOverConfig)===null||a===void 0?void 0:a.mountAt})},onBlur(a){var h;const v=a.event.relatedTarget;(h=document.querySelector(".rte-PopOver"))!==null&&h!==void 0&&h.contains(v)||(this.editor.storage.linkEditor.selectedLinkNode=null)},onUpdate(){var a;(0,i.linkExtensionUtils)(this.editor).handleShowLinkPreview({modalClassName:this.options.modalClassName,mountAt:(a=this.options.popOverConfig)===null||a===void 0?void 0:a.mountAt})},onSelectionUpdate(){if(this.editor.isFocused){var a;(0,i.linkExtensionUtils)(this.editor).handleShowLinkPreview({modalClassName:this.options.modalClassName,mountAt:(a=this.options.popOverConfig)===null||a===void 0?void 0:a.mountAt})}}})},404817:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.getLinkPreviewComponent=void 0;var n=u(e(174161)),o=e(561637),i=e(92682);function r(h){if(typeof WeakMap!="function")return null;var v=new WeakMap,g=new WeakMap;return(r=function(f){return f?g:v})(h)}function u(h,v){if(!v&&h&&h.__esModule)return h;if(h===null||typeof h!="object"&&typeof h!="function")return{default:h};var g=r(v);if(g&&g.has(h))return g.get(h);var f={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in h)if(m!=="default"&&Object.prototype.hasOwnProperty.call(h,m)){var l=s?Object.getOwnPropertyDescriptor(h,m):null;l&&(l.get||l.set)?Object.defineProperty(f,m,l):f[m]=h[m]}return f.default=h,g&&g.set(h,f),f}const a=function(){let{modalClassName:h}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return v=>{let{editor:g}=v;const f=g.getAttributes("link"),[s,m]=(0,n.useState)(!1),{onLinkChange:l}=(0,i.linkExtensionUtils)(g);(0,n.useEffect)(()=>()=>{g.storage.linkEditor.selectedLinkNode=null},[g]);const d=(0,n.useCallback)(p=>{const E=document.querySelector(".rte-PopOver");if(p.target instanceof Node)if(E!=null&&E.contains(p.target)){const b=g.state.selection;g.chain().extendMarkRange("link").setTempBackgroundSelection().setTextSelection(b).run()}else g.view.dom.contains(p.target)&&m(!1)},[g]);return(0,n.useEffect)(()=>(document.addEventListener("mouseup",d),()=>{document.removeEventListener("mouseup",d)}),[d]),s?n.default.createElement(o.LinkEditor,{customBoxCss:{className:h},onChange:p=>{l(p)},disableFocusLock:!0,onRequestClose:()=>{m(!1)},trackingPayload:(0,i.getLinkEditorTrackingPayload)(),value:{url:f.href,newWindow:f.target==="_blank"},initialShouldShowLinkPreview:!1}):n.default.createElement(o.LinkPreview,{customBoxCss:{className:h},url:f.href??"",trackingPayload:(0,i.getLinkEditorTrackingPayload)(),handleOpenLinkEditor:()=>{(0,i.linkExtensionUtils)(g).setLinkTempSelection(),m(!0)},removeLink:()=>g.chain().unsetLink().hidePopOver().focus().run()})}};t.getLinkPreviewComponent=a},22038:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.PopOverExtension=t.PopOverComponent=void 0;var o=n(e(160553)),i=h(e(174161)),r=e(670563),u=e(770841);function a(f){if(typeof WeakMap!="function")return null;var s=new WeakMap,m=new WeakMap;return(a=function(l){return l?m:s})(f)}function h(f,s){if(!s&&f&&f.__esModule)return f;if(f===null||typeof f!="object"&&typeof f!="function")return{default:f};var m=a(s);if(m&&m.has(f))return m.get(f);var l={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in f)if(p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)){var E=d?Object.getOwnPropertyDescriptor(f,p):null;E&&(E.get||E.set)?Object.defineProperty(l,p,E):l[p]=f[p]}return l.default=f,m&&m.set(f,l),l}const v=f=>{let{editor:s}=f;const{popOverContent:m,popOverProps:l}=(0,i.useMemo)(()=>s.storage.popOver,[s.storage.popOver]),d=m,p=E=>{const b=s.view.dom,O=E.target;let C=s.chain();b.contains(O)||(C=C.hidePopOver()),C.clearAllTempBackgroundSelection().run()};return i.default.createElement(r.PopOver,(0,o.default)({},l,{anchorPoint:l.anchorPoint??{x:"center",y:"bottom"},bodyStyles:l.bodyStyles??{padding:1,borderRadius:2},className:"rte-PopOver",closeOnClickOutside:l.closeOnClickOutside??!0,hideArrow:l.hideArrow??!0,offset:l.offset??{y:11},onRequestClose:E=>{l.onRequestClose&&l.onRequestClose(E),p(E)},position:l.position??"bottom",style:l.style??{borderRadius:2},mountAt:l.mountAt??document.querySelector('[data-js="rte-popOver-mountAt"]')}),l.isOpen&&d?i.default.createElement(d,{editor:s}):null)};t.PopOverComponent=v;const g=t.PopOverExtension=u.Extension.create({name:"popOver",addCommands(){return{hidePopOver:()=>f=>{let{editor:s}=f;if(!s.storage.popOver)throw"PopOver extension not found";return s.storage.popOver={popOverContent:null,popOverProps:{isOpen:!1,anchor:null}},!0},showPopOver:f=>{let{popOverContent:s,...m}=f;return l=>{let{editor:d}=l;if(!this.editor.storage.popOver)throw"PopOver extension not found";return d.storage.popOver={popOverContent:s,popOverProps:{...m,isOpen:!0}},!0}}}},addStorage(){return{popOverProps:{isOpen:!1,anchor:null},popOverContent:null}}})},971535:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"linkOption",{enumerable:!0,get:function(){return n.linkOption}});var n=e(947570)},92682:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.linkExtensionUtils=t.getLinkEditorTrackingPayload=t.findTag=void 0;var n=e(667698),o=e(404817);const i=(a,h)=>"tagName"in a?a.tagName===h?a:a.closest(h):a.parentElement?i(a.parentElement,h):null;t.findTag=i;const r=a=>{const h=()=>{const{state:l}=a,{selection:d}=l,{from:p,to:E}=d;return{from:p,to:E}},v=()=>{const l=h(),d=a.isActive("link")?a.chain().extendMarkRange("link"):a.chain();return a.isActive("link")&&a.commands.extendMarkRange("link"),a.storage.linkEditor.currentSelection=h(),d.setTextSelection(l).run()};return{getCurrentSelection:h,getIsDisabled:()=>{const{from:l,to:d}=h();return!a.isActive("link")&&l===d},handleShowLinkPreview:l=>{let{modalClassName:d,mountAt:p}=l;if(!a.storage.linkEditor.ignoreSelection){const{from:E}=a.view.state.selection,b=1,O=a.isActive("link"),C=a.view.domAtPos(E,b).node,S=i(C,"a"),P=a.storage.linkEditor.selectedLinkNode;S&&O&&S!==P?(a.chain().focus().extendMarkRange("link").hidePopOver().showPopOver({anchor:S,mountAt:p,popOverContent:(0,o.getLinkPreviewComponent)({modalClassName:d})}).run(),a.storage.linkEditor.selectedLinkNode=S):O||(a.storage.linkEditor.selectedLinkNode=null,a.commands.hidePopOver())}},onLinkChange:l=>{let{url:d,newWindow:p}=l;if(a.storage.linkEditor){const E=h();if(d){const b=p?{target:"_blank"}:{target:null};return a.chain().setTextSelection(a.storage.linkEditor.currentSelection).setLink({href:d,...b}).setTextSelection(E).run()}return a.chain().setTextSelection(a.storage.linkEditor.currentSelection).unsetLink().setTextSelection(E).run()}},setLinkEditorOpen:l=>{if(a.storage.linkEditor&&a.storage.linkEditor){const d=!a.state.selection.empty||a.isActive("link");return l&&d?(a.storage.linkEditor.ignoreSelection=!0,a.commands.hidePopOver(),v(),a.storage.linkEditor.ignoreSelection=!1,a.storage.linkEditor.isLinkEditorOpen=!0,a.storage.linkEditor.currentSelection=h(),!0):(a.storage.linkEditor.isLinkEditorOpen=!1,a.storage.linkEditor.ignoreSelection=!0,a.commands.clearAllTempBackgroundSelection(),a.storage.linkEditor.ignoreSelection=!1,!0)}return!1},setLinkTempSelection:v}};t.linkExtensionUtils=r;const u=()=>{const a=n.RTEEvents.defaultConfig;return{accountId:a.member_account_id,accountLocale:a.member_account_locale,selectedTemplateIdentifier:a.selected_template_identifier,websiteId:a.user_website_id,websiteLocale:a.website_locale,trackingLocation:"inline-editor"}};t.getLinkEditorTrackingPayload=u},947570:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.linkOption=t.LinkComponent=void 0;var o=n(e(160553)),i=n(e(174161)),r=e(561637),u=e(894458),a=e(488475),h=e(923842),v=e(29347),g=e(71150),f=e(92682);e(627343);const s=(0,v.t)("Link",{},{project:"rich-text-editor"}),m=p=>{let{baseZIndex:E,isActive:b,isDisabled:O,isLinkEditorOpen:C,isLinkEditorUAUEnabled:S,linkAttrs:P,linkTypes:y,modalClassName:c,setLinkEditorOpen:j,toggleLink:N}=p;return i.default.createElement("div",{"data-js":"rte-popOver-mountAt"},i.default.createElement(h.ZIndexStack,{baseIndex:E},Z=>i.default.createElement(u.Tool.Drawer,{isDisabled:O,open:C,onOpenChange:j,renderTrigger:z=>i.default.createElement(u.Tool.Drawer.Trigger,(0,o.default)({},z,{isActive:b,label:s}),i.default.createElement(a.Link,null)),zIndex:Z},i.default.createElement(r.LinkEditor,{customBoxCss:{className:c},disableFocusLock:!0,onChange:N,onRequestClose:()=>{j(!1)},value:P,trackingPayload:(0,f.getLinkEditorTrackingPayload)(),linkTypes:y,isLinkEditorUAUEnabled:S}))))};t.LinkComponent=m;const l=p=>{let{isLinkEditorUAUEnabled:E=!1,linkTypes:b,modalClassName:O}=p;return C=>{let{baseZIndex:S,editor:P}=C;const y=P.isActive("link"),c=P.getAttributes("link");return i.default.createElement(m,{baseZIndex:S,isActive:y,isDisabled:(0,f.linkExtensionUtils)(P).getIsDisabled(),isLinkEditorOpen:P.storage.linkEditor.isLinkEditorOpen,isLinkEditorUAUEnabled:E,linkAttrs:{url:c.href,newWindow:c.target==="_blank"},linkTypes:b,modalClassName:O,setLinkEditorOpen:(0,f.linkExtensionUtils)(P).setLinkEditorOpen,toggleLink:(0,f.linkExtensionUtils)(P).onLinkChange})}},d=function(){let{isLinkEditorUAUEnabled:p,linkTypes:E=r.ALL_LINK_TYPES,modalClassName:b,popOverConfig:O}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{tiptapExtension:g.LinkEditorExtension.configure({modalClassName:b,popOverConfig:O}),ToolbarOptionComponent:l({isLinkEditorUAUEnabled:p,linkTypes:E,modalClassName:b}),optionId:"link",parentExtensions:["tempBackgroundSelection"]}};t.linkOption=d},723420:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"numberedListOption",{enumerable:!0,get:function(){return o.numberedListOption}}),Object.defineProperty(t,"numberedListOptionUtils",{enumerable:!0,get:function(){return n.numberedListOptionUtils}});var n=e(667698),o=e(344313)},344313:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.numberedListOption=t.NumberedListComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Numbered List",{},{project:"rich-text-editor"}),v=s=>{let{isActive:m,isDisabled:l,onClick:d}=s;return o.default.createElement(r.Tool.Toggleable,{icon:o.default.createElement(u.NumberedList,null),isActive:m,isDisabled:l,label:h,onClick:d})};t.NumberedListComponent=v;const g=s=>{let{editor:m}=s;const{toggleNumberedList:l,getIsNumberedListDisabled:d}=(0,i.numberedListOptionUtils)(m);return o.default.createElement(v,{isActive:(0,i.getIsNumberedListActive)(m),isDisabled:d(),onClick:()=>{l()}})},f=()=>({...(0,i.numberedListOptionConfig)(),ToolbarOptionComponent:g});t.numberedListOption=f},579910:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"scaledTextOption",{enumerable:!0,get:function(){return o.scaledTextOption}}),Object.defineProperty(t,"scaledTextOptionUtils",{enumerable:!0,get:function(){return n.scaledTextOptionUtils}});var n=e(667698),o=e(666314)},666314:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.scaledTextOption=t.ScaledTextComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Scaled Text",{},{project:"rich-text-editor"}),v=s=>{let{isActive:m,isDisabled:l,onClick:d}=s;return o.default.createElement(r.Tool.Toggleable,{icon:o.default.createElement(u.TextScale,null),isActive:m,isDisabled:l,label:h,onClick:d})};t.ScaledTextComponent=v;const g=s=>{let{editor:m}=s;const{toggleScaledText:l,getIsScaledTextDisabled:d}=(0,i.scaledTextOptionUtils)(m);return o.default.createElement(v,{isActive:(0,i.getIsScaledTextActive)(m),isDisabled:d(),onClick:()=>{l()}})},f=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{...(0,i.scaledTextOptionConfig)(s),ToolbarOptionComponent:g}};t.scaledTextOption=f},998913:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"strikethroughOption",{enumerable:!0,get:function(){return o.strikethroughOption}}),Object.defineProperty(t,"strikethroughOptionUtils",{enumerable:!0,get:function(){return n.strikethroughOptionUtils}});var n=e(667698),o=e(709655)},709655:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.strikethroughOption=t.StrikethroughComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Strike",{},{project:"rich-text-editor"}),v=s=>{let{isActive:m,isDisabled:l,onClick:d}=s;return o.default.createElement(r.Tool.Toggleable,{icon:o.default.createElement(u.Strikethrough,null),isActive:m,isDisabled:l,label:h,onClick:d})};t.StrikethroughComponent=v;const g=s=>{let{editor:m}=s;const{toggleStrikethrough:l,getIsActive:d,getIsDisabled:p}=(0,i.strikethroughOptionUtils)(m);return o.default.createElement(v,{isActive:d(),isDisabled:p(),onClick:()=>{l()}})},f=()=>({...(0,i.strikethroughOptionConfig)(),ToolbarOptionComponent:g});t.strikethroughOption=f},776886:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"subscriptOption",{enumerable:!0,get:function(){return o.subscriptOption}}),Object.defineProperty(t,"subscriptOptionUtils",{enumerable:!0,get:function(){return n.subscriptOptionUtils}});var n=e(667698),o=e(211441)},211441:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptOption=t.SubscriptComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Subscript",{},{project:"rich-text-editor"}),v=s=>{let{isActive:m,isDisabled:l,onClick:d}=s;return o.default.createElement(r.Tool.Toggleable,{icon:o.default.createElement(u.Subscript,null),isActive:m,isDisabled:l,label:h,onClick:d})};t.SubscriptComponent=v;const g=s=>{let{editor:m}=s;const{toggleSubscript:l,getIsActive:d,getIsDisabled:p}=(0,i.subscriptOptionUtils)(m);return o.default.createElement(v,{isActive:d(),isDisabled:p(),onClick:()=>{l()}})},f=()=>({...(0,i.subscriptOptionConfig)(),ToolbarOptionComponent:g});t.subscriptOption=f},177094:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"superscriptOption",{enumerable:!0,get:function(){return o.superscriptOption}}),Object.defineProperty(t,"superscriptOptionUtils",{enumerable:!0,get:function(){return n.superscriptOptionUtils}});var n=e(667698),o=e(513472)},513472:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.superscriptOption=t.SuperscriptComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Superscript",{},{project:"rich-text-editor"}),v=s=>{let{isActive:m,isDisabled:l,onClick:d}=s;return o.default.createElement(r.Tool.Toggleable,{icon:o.default.createElement(u.Superscript,null),isActive:m,isDisabled:l,label:h,onClick:d})};t.SuperscriptComponent=v;const g=s=>{let{editor:m}=s;const{toggleSuperscript:l,getIsActive:d,getIsDisabled:p}=(0,i.superscriptOptionUtils)(m);return o.default.createElement(v,{isActive:d(),isDisabled:p(),onClick:()=>{l()}})},f=()=>({...(0,i.superscriptOptionConfig)(),ToolbarOptionComponent:g});t.superscriptOption=f},81691:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"textAlignOption",{enumerable:!0,get:function(){return o.textAlignOption}}),Object.defineProperty(t,"textAlignOptionUtils",{enumerable:!0,get:function(){return n.textAlignOptionUtils}});var n=e(667698),o=e(777721)},777721:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.textAlignOption=t.TextAlignComponent=void 0,e(392338);var o=n(e(160553)),i=s(e(174161)),r=e(667698),u=e(894458),a=e(488475),h=e(778008),v=e(923842),g=e(29347);function f(C){if(typeof WeakMap!="function")return null;var S=new WeakMap,P=new WeakMap;return(f=function(y){return y?P:S})(C)}function s(C,S){if(!S&&C&&C.__esModule)return C;if(C===null||typeof C!="object"&&typeof C!="function")return{default:C};var P=f(S);if(P&&P.has(C))return P.get(C);var y={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in C)if(j!=="default"&&Object.prototype.hasOwnProperty.call(C,j)){var N=c?Object.getOwnPropertyDescriptor(C,j):null;N&&(N.get||N.set)?Object.defineProperty(y,j,N):y[j]=C[j]}return y.default=C,P&&P.set(C,y),y}const m=(0,g.t)("Text Alignment",{},{project:"rich-text-editor"}),l={[r.Alignments.Left]:(0,g.t)("left",{},{project:"rich-text-editor"}),[r.Alignments.Right]:(0,g.t)("right",{},{project:"rich-text-editor"}),[r.Alignments.Center]:(0,g.t)("center",{},{project:"rich-text-editor"}),[r.Alignments.Justify]:(0,g.t)("justify",{},{project:"rich-text-editor"})},d=C=>{let{keybinding:S,...P}=C;return i.default.createElement(h.Flex,(0,o.default)({justifyContent:"center",bg:"gray.200",borderRadius:1,alignItems:"center",py:"sizes.25",px:"sizes.50",width:"sizes.125",height:"sizes.125"},P),i.default.createElement(h.Text.Label,{color:"gray.600"},S))},p=[{alignment:r.Alignments.Left,icon:i.default.createElement(a.TextAlignLeft,null),label:i.default.createElement(h.Flex,{alignItems:"center",gap:2},i.default.createElement(h.Text.Body,{color:"gray.800",m:0},(0,g.t)("Align Left",{},{project:"rich-text-editor"})),i.default.createElement(h.Flex,{gap:"3px"},i.default.createElement(d,{keybinding:"\u2318"}),i.default.createElement(d,{width:"fit-content",px:1,keybinding:"Shift"}),i.default.createElement(d,{keybinding:"L"})))},{alignment:r.Alignments.Center,icon:i.default.createElement(a.TextAlignCenter,null),label:i.default.createElement(h.Flex,{alignItems:"center",gap:2},i.default.createElement(h.Text.Body,{color:"gray.800",m:0},(0,g.t)("Align Center",{},{project:"rich-text-editor"})),i.default.createElement(h.Flex,{gap:"3px"},i.default.createElement(d,{keybinding:"\u2318"}),i.default.createElement(d,{width:"fit-content",px:1,keybinding:"Shift"}),i.default.createElement(d,{keybinding:"E"})))},{alignment:r.Alignments.Right,icon:i.default.createElement(a.TextAlignRight,null),label:i.default.createElement(h.Flex,{alignItems:"center",gap:2},i.default.createElement(h.Text.Body,{color:"gray.800",m:0},(0,g.t)("Align Right",{},{project:"rich-text-editor"})),i.default.createElement(h.Flex,{gap:"3px"},i.default.createElement(d,{keybinding:"\u2318"}),i.default.createElement(d,{width:"fit-content",px:1,keybinding:"Shift"}),i.default.createElement(d,{keybinding:"R"})))},{alignment:r.Alignments.Justify,icon:i.default.createElement(a.TextAlignJustify,null),label:i.default.createElement(h.Flex,{alignItems:"center",gap:2},i.default.createElement(h.Text.Body,{color:"gray.800",m:0},(0,g.t)("Align Justify",{},{project:"rich-text-editor"})),i.default.createElement(h.Flex,{gap:"3px"},i.default.createElement(d,{keybinding:"\u2318"}),i.default.createElement(d,{width:"fit-content",px:1,keybinding:"Shift"}),i.default.createElement(d,{keybinding:"J"})))}],E=C=>{let{baseZIndex:S,className:P,getIsAlignmentActive:y,getIsAlignmentDisabled:c,onClick:j,alignments:N,editor:Z}=C;const[z,k]=(0,i.useState)(!1),[X,ie]=(0,i.useState)(i.default.createElement(a.TextAlignLeft,null)),D=c(),I=p.filter(W=>{let{alignment:U}=W;return N.includes(U)}),A=I.find(W=>{let{alignment:U}=W;return y(U)});return(0,i.useEffect)(()=>{ie((A==null?void 0:A.icon)??i.default.createElement(a.TextAlignLeft,null))},[A]),(0,i.useEffect)(()=>{var W;if(!z||!(Z!=null&&(W=Z.view)!==null&&W!==void 0&&W.dom))return;const U=()=>{k(!1)};return Z.view.dom.addEventListener("click",U),()=>{Z.view.dom.removeEventListener("click",U)}},[z,Z]),i.default.createElement(v.ZIndexStack,{baseIndex:S},W=>i.default.createElement(u.Tool.Drawer,{gap:1,onOpenChange:k,open:z,renderTrigger:U=>i.default.createElement(u.Tool.Drawer.Trigger,(0,o.default)({},U,{label:m,isDisabled:D}),X),zIndex:W},i.default.createElement(h.Flex,{className:P??""},I.map(U=>{let{alignment:K,label:H,icon:R}=U;return i.default.createElement(u.Tool.Toggleable,{key:K,"aria-label":(0,g.t)("Text align: {alignment}",{alignment:l[K]},{project:"rich-text-editor"}),label:H,icon:R,isActive:y(K),onClick:()=>{j(K),ie(R)}})}))))};t.TextAlignComponent=E;const b=C=>{let{baseZIndex:S,className:P,editor:y,alignments:c}=C;const{setTextAlign:j,getIsAlignmentActive:N,getIsAlignmentDisabled:Z}=(0,r.textAlignOptionUtils)(y);return i.default.createElement(E,{baseZIndex:S,className:P,getIsAlignmentActive:N,getIsAlignmentDisabled:Z,alignments:c,onClick:z=>{j({alignment:z})},editor:y})},O=function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const S=C==null?void 0:C.alignments,P=C==null?void 0:C.className,y=[...Object.values(r.Alignments)];return{...(0,r.textAlignOptionConfig)(C),ToolbarOptionComponent:c=>i.default.createElement(b,(0,o.default)({alignments:S??y,className:P},c))}};t.textAlignOption=O},908304:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.TextColorIcon=void 0;var o=n(e(461761)),i=n(e(174161)),r=e(778008),u=e(436700);const a=h=>{let{chosenColor:v,color:g}=h;const{colors:f}=(0,u.useTheme)(),s=g?(0,o.default)(f,g,g):f.gray[100];return i.default.createElement(r.Box,{height:22,width:22,position:"relative"},i.default.createElement("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.default.createElement("path",{d:"M5 16V15C6.30203 11.3621 7.69797 7.63786 9 4H13L17 15V16H14.464L13.4031 13H8.48435L7.43951 16H5ZM9 11H13L11.3456 6.5H10.6062L9 11Z",fill:s})),i.default.createElement(r.Box,{position:"absolute",top:"18px",left:"2px",width:"18px",height:"3px",css:{backgroundColor:v??"#000"}}))};t.TextColorIcon=a},427918:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ColorPalette",{enumerable:!0,get:function(){return n.ColorPalette}}),Object.defineProperty(t,"textColorOption",{enumerable:!0,get:function(){return o.textColorOption}}),Object.defineProperty(t,"textColorOptionUtils",{enumerable:!0,get:function(){return n.textColorOptionUtils}});var n=e(667698),o=e(812766)},812766:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.textColorOption=t.TextColorComponent=void 0;var o=n(e(160553)),i=n(e(210750)),r=l(e(174161)),u=e(667698),a=e(894458),h=e(670563),v=e(778008),g=e(923842),f=e(29347),s=e(908304);function m(y){if(typeof WeakMap!="function")return null;var c=new WeakMap,j=new WeakMap;return(m=function(N){return N?j:c})(y)}function l(y,c){if(!c&&y&&y.__esModule)return y;if(y===null||typeof y!="object"&&typeof y!="function")return{default:y};var j=m(c);if(j&&j.has(y))return j.get(y);var N={__proto__:null},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var z in y)if(z!=="default"&&Object.prototype.hasOwnProperty.call(y,z)){var k=Z?Object.getOwnPropertyDescriptor(y,z):null;k&&(k.get||k.set)?Object.defineProperty(N,z,k):N[z]=y[z]}return N.default=y,j&&j.set(y,N),N}const d=a.ColorPicker.Input.HEX,p=(0,f.t)("Text Color",{},{project:"rich-text-editor"});var E=function(y){return y.Palette="palette",y.Custom="custom",y}(E||{});const b={identifier:E.Palette,label:(0,f.t)("Palette",{},{project:"rich-text-editor"})},O={identifier:E.Custom,label:(0,f.t)("Custom",{},{project:"rich-text-editor"})},C=y=>{let{baseZIndex:c,className:j,colorPalette:N,getValue:Z,isDisabled:z,onChange:k,editor:X}=y;const[ie,D]=(0,r.useState)(!1),[I,A]=(0,r.useState)(()=>Z().colorId!=="custom"&&N?b.identifier:O.identifier),W=(0,r.useRef)(null),U=(0,r.useRef)(null),K=(0,r.useCallback)(F=>{D(F)},[]);(0,r.useEffect)(()=>{var F;if(!ie||!(X!=null&&(F=X.view)!==null&&F!==void 0&&F.dom))return;const Q=le=>{const re=le.target;if(X.view.dom.contains(re)){var pe,Ce;const Oe=(pe=W.current)===null||pe===void 0?void 0:pe.contains(re),ce=(Ce=U.current)===null||Ce===void 0?void 0:Ce.contains(re);!Oe&&!ce&&D(!1)}};return X.view.dom.addEventListener("click",Q),()=>{X.view.dom.removeEventListener("click",Q)}},[ie,X]);const H=(0,r.useMemo)(()=>{const F=Z();return F.colorId!=="custom"&&N?(0,u.getCSSColorFromPaletteIdentifier)(N,F.colorId):F.cssColor},[N,Z]),R=F=>{A(F)},J=(0,i.default)(F=>{let{colorId:Q,cssColor:le,shouldFocusRTE:re}=F;k({colorId:Q,cssColor:le,shouldFocusRTE:re})},50),_=F=>{let{colorId:Q,cssColor:le}=F;Q!=="custom"&&N?(D(!1),J({colorId:Q,cssColor:le,shouldFocusRTE:!0})):J({colorId:Q,cssColor:le})};return r.default.createElement(g.ZIndexStack,{baseIndex:c},F=>r.default.createElement(a.Tool.Drawer,{isDisabled:z,onOpenChange:K,open:ie,renderTrigger:Q=>r.default.createElement(a.Tool.Drawer.Trigger,(0,o.default)({},Q,{ref:U,label:p}),r.default.createElement(s.TextColorIcon,{chosenColor:H})),width:"276px",py:0,px:2,zIndex:F},r.default.createElement(v.Box,{width:"100%",ref:W,role:"presentation",onClick:Q=>{Q.stopPropagation()},onMouseDown:Q=>{Q.stopPropagation()},className:j},N?r.default.createElement(h.Tabs,{options:[{label:b.label,value:b.identifier},{label:O.label,value:O.identifier}],fitted:!0,value:I,onChange:R}):null,I===b.identifier&&N?r.default.createElement(v.Flex,{justifyContent:"space-between",alignItems:"center",px:2,py:3},N.map(Q=>r.default.createElement(a.ColorPicker.Swatch.Selectable,{key:Q.colorId,color:Q.cssColor,isSelected:H===Q.cssColor,onChange:()=>_({colorId:Q.colorId,cssColor:Q.cssColor}),"aria-label":Q.label}))):r.default.createElement(v.Box,{pt:2,pb:3},r.default.createElement(a.ColorPicker,{value:H,onChange:Q=>_({colorId:"custom",cssColor:Q})},r.default.createElement(a.ColorPicker.Map,null),r.default.createElement(a.ColorPicker.Hue,null),r.default.createElement(d,null))))))};t.TextColorComponent=C;const S=y=>{let{editor:c,colorPalette:j,baseZIndex:N,className:Z}=y;const{setTextColor:z,getValue:k,getIsDisabled:X}=(0,u.textColorOptionUtils)(c);return r.default.createElement(C,{baseZIndex:N,className:Z,colorPalette:j,getValue:k,isDisabled:X(),onChange:ie=>{let{colorId:D,cssColor:I,shouldFocusRTE:A}=ie;z({colorId:D,colorPalette:j,cssColor:I,shouldFocusRTE:A})},editor:c})},P=function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{...(0,u.textColorOptionConfig)(y),ToolbarOptionComponent:c=>r.default.createElement(S,(0,o.default)({colorPalette:y.colorPalette,className:y.colorPickerContainerClassName},c))}};t.textColorOption=P},118483:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.TextHighlightPluginView=u;var o=e(667698),i=e(368195),r=n(e(976003));e(639632);function u(){const a={};let h=null;return{update(v,g){const{schema:f}=v.state;if(!g||!f.nodes.highlight)return;const s=g&&g.doc.eq(v.state.doc),m=o.TextHighlightsPluginKey.getState(v.state);if(!(m!=null&&m.initialized))return;const{textAttributes:l}=o.TextAttributesPluginKey.getState(v.state);if(s&&!(h!==l))return;const p=Array.from(v.dom.querySelectorAll(".sqsrte-text-highlight")),E=Object.entries(a).reduce((b,O)=>{let[C,S]=O;return(!(l!=null&&l[C])||!v.docView.dom.ownerDocument.contains(S.node))&&b.push(C),b},[]);E.length&&E.forEach(b=>{a[b]&&(a[b].destroy(),delete a[b])}),!(!l||Object.keys(l).length===0)&&(p.forEach(b=>{const O=b.getAttribute(o.TextAttributeId);if(!O)return;if(!!a[O]){const P=l[O],y=h?h[O]:null;P&&!(0,r.default)(P,y)?a[O].onStateChange(P,!0):s||a[O]._onMutation()}else{var S;const P=(S=v.dom.parentElement)===null||S===void 0?void 0:S.querySelectorAll(`[class=TextShape-node][data-text-attribute-id="${O}"]`);P==null||P.forEach(y=>{y.remove()}),a[O]=new i.TextShape(b,l,v.dom.parentElement)}}),h=l)}}}},455705:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"textHighlightOption",{enumerable:!0,get:function(){return o.textHighlightOption}}),Object.defineProperty(t,"textHighlightOptionUtils",{enumerable:!0,get:function(){return n.textHighlightOptionUtils}});var n=e(667698),o=e(190016)},190016:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.textHighlightOption=t.TextHighlightComponent=void 0;var o=n(e(160553)),i=m(e(174161)),r=e(667698),u=e(894458),a=e(488475),h=e(923842),v=e(79306),g=e(29347),f=e(118483);function s(b){if(typeof WeakMap!="function")return null;var O=new WeakMap,C=new WeakMap;return(s=function(S){return S?C:O})(b)}function m(b,O){if(!O&&b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var C=s(O);if(C&&C.has(b))return C.get(b);var S={__proto__:null},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in b)if(y!=="default"&&Object.prototype.hasOwnProperty.call(b,y)){var c=P?Object.getOwnPropertyDescriptor(b,y):null;c&&(c.get||c.set)?Object.defineProperty(S,y,c):S[y]=b[y]}return S.default=b,C&&C.set(b,S),S}const l=(0,g.t)("Text Highlight",{},{project:"rich-text-editor"}),d=b=>{let{baseZIndex:O,isActive:C,onClick:S,onChange:P,isDisabled:y,node:c,highlight:j,ModalComponent:N,editor:Z}=b;const[z,k]=(0,i.useState)(!1),X=(0,i.useRef)(!0),ie=(0,i.useRef)(null),D=(0,i.useRef)(null),I={editorView:{dom:c},onClick:U=>{U.stopPropagation()}},A=(0,i.useCallback)(()=>{X.current&&k(!1)},[]),W=(0,i.useCallback)(U=>{X.current&&k(U)},[]);return(0,i.useEffect)(()=>(X.current=!0,()=>{X.current=!1,k(!1)}),[]),(0,i.useEffect)(()=>{y&&z&&X.current&&k(!1)},[y]),(0,i.useEffect)(()=>{if(!z)return;const U=K=>{var H,R,J;const _=K.target,F=Z==null||(H=Z.view)===null||H===void 0||(H=H.dom)===null||H===void 0?void 0:H.contains(_),Q=(R=ie.current)===null||R===void 0?void 0:R.contains(_),le=(J=D.current)===null||J===void 0?void 0:J.contains(_);!F&&!Q&&!le&&k(!1)};return document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[z,Z]),i.default.createElement(h.ZIndexStack,{baseIndex:O},U=>i.default.createElement(u.Tool.Drawer,{isDisabled:y,open:z,onOpenChange:W,renderTrigger:K=>i.default.createElement(u.Tool.Drawer.Trigger,(0,o.default)({},K,{ref:D,isActive:C,label:l}),i.default.createElement(a.TextHighlight,null)),zIndex:U,sx:{display:"none"}},N&&z&&i.default.createElement("div",{ref:ie,role:"presentation",onClick:K=>{K.stopPropagation()},onMouseDown:K=>{K.stopPropagation()},className:"escmanager-ignore sqs-prevent-block-focus-change"},i.default.createElement(N,{modalMountAt:document.body,itemConfigEditorProps:I,onRequestClose:A,onChange:P,value:j,onClick:S}))))};t.TextHighlightComponent=d;const p=b=>{let{editor:O,onClick:C,node:S,onChange:P,ModalComponent:y}=b;const{getIsActive:c,setHighlight:j,getHighlightId:N,getIsDisabled:Z}=(0,r.textHighlightOptionUtils)(O),z=N();return i.default.createElement(d,{isActive:c(),isDisabled:Z(),node:S,highlight:z,ModalComponent:y,editor:O,onChange:k=>{let{id:X}=k;!z.id&&X&&j({id:X}),P==null||P(X,z,O,r.TextAttributesPluginKey)},onClick:()=>{const k=(0,v.v4)();C==null||C(k),j({id:k})}})},E=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{...(0,r.textHighlightOptionConfig)({...b,pluginView:f.TextHighlightPluginView}),ToolbarOptionComponent:O=>i.default.createElement(p,(0,o.default)({},O,{onClick:b.onClick,node:b.node,onChange:b.onChange,ModalComponent:b.ModalComponent}))}};t.textHighlightOption=E},711227:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.textStyles=void 0;var n=e(29347);const o=t.textStyles=[{label:(0,n.t)("Heading 1",{},{project:"rich-text-editor"}),textStyle:"heading1",keyBinding:"6"},{label:(0,n.t)("Heading 2",{},{project:"rich-text-editor"}),textStyle:"heading2",keyBinding:"5"},{label:(0,n.t)("Heading 3",{},{project:"rich-text-editor"}),textStyle:"heading3",keyBinding:"4"},{label:(0,n.t)("Heading 4",{},{project:"rich-text-editor"}),textStyle:"heading4",keyBinding:"3"},{label:(0,n.t)("Paragraph 1",{},{project:"rich-text-editor"}),textStyle:"paragraph1",keyBinding:"2"},{label:(0,n.t)("Paragraph 2",{},{project:"rich-text-editor"}),textStyle:"paragraph2",keyBinding:"1"},{label:(0,n.t)("Paragraph 3",{},{project:"rich-text-editor"}),textStyle:"paragraph3",keyBinding:"0"},{label:(0,n.t)("Monospace",{},{project:"rich-text-editor"}),textStyle:"monospace",keyBinding:"M"}]},832067:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"textStyleOption",{enumerable:!0,get:function(){return o.textStyleOption}}),Object.defineProperty(t,"textStyleOptionUtils",{enumerable:!0,get:function(){return n.textStyleOptionUtils}});var n=e(667698),o=e(842979)},842979:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.textStyleOption=t.TextStyleComponent=void 0;var o=n(e(160553)),i=m(e(174161)),r=e(667698),u=e(894458),a=e(488475),h=e(778008),v=e(923842),g=e(29347),f=e(711227);function s(O){if(typeof WeakMap!="function")return null;var C=new WeakMap,S=new WeakMap;return(s=function(P){return P?S:C})(O)}function m(O,C){if(!C&&O&&O.__esModule)return O;if(O===null||typeof O!="object"&&typeof O!="function")return{default:O};var S=s(C);if(S&&S.has(O))return S.get(O);var P={__proto__:null},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in O)if(c!=="default"&&Object.prototype.hasOwnProperty.call(O,c)){var j=y?Object.getOwnPropertyDescriptor(O,c):null;j&&(j.get||j.set)?Object.defineProperty(P,c,j):P[c]=O[c]}return P.default=O,S&&S.set(O,P),P}const l=(0,g.t)("Text Style",{},{project:"rich-text-editor"}),d=O=>{let{children:C}=O;return i.default.createElement(h.Flex,{justifyContent:"center",bg:"bg.default",borderRadius:1,alignItems:"center",py:"sizes.25",px:"sizes.50",width:"sizes.125",height:"sizes.125"},C)},p=O=>{let{baseZIndex:C,getIsTextStyleActive:S,onClick:P,styles:y,defaultSelectedStyle:c,customLabels:j,className:N}=O;const z=f.textStyles.filter(W=>{let{textStyle:U}=W;return y.find(K=>K===U)}).reduce((W,U)=>{const K=j==null?void 0:j.find(H=>H.style===U.textStyle);return W.concat([{...U,label:(K==null?void 0:K.customLabel)??U.label}])},[]),k=z.find(W=>W.textStyle===c.style),[X,ie]=(0,i.useState)((k==null?void 0:k.label)??""),[D,I]=(0,i.useState)(!1),A=z.find(W=>{let{textStyle:U}=W;return S(U)});return(0,i.useEffect)(()=>{ie((A==null?void 0:A.label)??(k==null?void 0:k.label)??"")},[A==null?void 0:A.label,k==null?void 0:k.label]),i.default.createElement(v.ZIndexStack,{baseIndex:C},W=>i.default.createElement(u.Tool.Drawer,{flexDirection:"column",open:D,onOpenChange:I,p:0,renderTrigger:U=>i.default.createElement(u.Tool.Drawer.Trigger,(0,o.default)({},U,{label:l}),i.default.createElement(u.Tool.Dropdown,{label:X,sx:{whiteSpace:"nowrap",p:{lineHeight:1}}})),zIndex:W},i.default.createElement("div",{className:N??""},z.map(U=>{let{label:K,textStyle:H,keyBinding:R}=U;return i.default.createElement(u.Tool.Drawer.Item,{key:`${H}`,onChange:J=>{ie(J),P(H),I(!1)},value:K,sx:{"&:hover":{backgroundColor:"bg.default"}}},i.default.createElement(h.Flex,{width:"125px",gap:1},i.default.createElement(a.Checkmark,{sx:{fill:S(H)?"inherit":"transparent"}}),i.default.createElement(h.Text.Body,{m:0,key:K},K)),i.default.createElement(h.Flex,{gap:1},i.default.createElement(d,null,i.default.createElement(h.Text.Label,null,"\u2318")),i.default.createElement(d,null,i.default.createElement(h.Text.Label,null,"\u2325")),i.default.createElement(d,null,i.default.createElement(h.Text.Label,null,R))))}))))};t.TextStyleComponent=p;const E=O=>{let{baseZIndex:C,editor:S,styles:P,defaultSelectedStyle:y,customLabels:c,className:j}=O;const{getIsTextStyleActive:N,setTextStyle:Z}=(0,r.textStyleOptionUtils)(S);return i.default.createElement(p,{baseZIndex:C,className:j,customLabels:c,styles:P,defaultSelectedStyle:y,getIsTextStyleActive:N,onClick:z=>{Z({textStyle:z})}})},b=function(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{styles:C,defaultSelectedStyle:S,className:P}=O,y=["heading1","heading2","heading3","heading4","paragraph1","paragraph2","paragraph3","monospace"],c=C==null?void 0:C.map(j=>j.style);return{...(0,r.textStyleOptionConfig)(O),ToolbarOptionComponent:j=>i.default.createElement(E,(0,o.default)({className:P,styles:c??y,defaultSelectedStyle:S??{style:"paragraph2"},customLabels:C},j))}};t.textStyleOption=b},992777:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"underlineOption",{enumerable:!0,get:function(){return o.underlineOption}}),Object.defineProperty(t,"underlineOptionUtils",{enumerable:!0,get:function(){return n.underlineOptionUtils}});var n=e(667698),o=e(927346)},927346:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.underlineOption=t.UnderlineComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Underline",{},{project:"rich-text-editor"}),v=s=>{let{isActive:m,isDisabled:l,onClick:d}=s;return o.default.createElement(r.Tool.Toggleable,{icon:o.default.createElement(u.Underline,null),isActive:m,isDisabled:l,label:h,onClick:d})};t.UnderlineComponent=v;const g=s=>{let{editor:m}=s;const{toggleUnderline:l,getIsUnderlineActive:d,getIsUnderlineDisabled:p}=(0,i.underlineOptionUtils)(m);return o.default.createElement(v,{isActive:d(),isDisabled:p(),onClick:()=>{l()}})},f=function(){let{hideOptionInToolbar:s}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{...(0,i.underlineOptionConfig)(),ToolbarOptionComponent:s?void 0:g}};t.underlineOption=f},420291:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"undoRedoOption",{enumerable:!0,get:function(){return o.undoRedoOption}}),Object.defineProperty(t,"undoRedoOptionUtils",{enumerable:!0,get:function(){return n.undoRedoOptionUtils}});var n=e(667698),o=e(608859)},608859:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.undoRedoOption=t.UndoRedoOptionComponent=t.UndoComponent=t.RedoComponent=void 0;var o=n(e(174161)),i=e(667698),r=e(894458),u=e(488475),a=e(29347);const h=(0,a.t)("Redo",{},{project:"rich-text-editor"}),v=(0,a.t)("Undo",{},{project:"rich-text-editor"}),g=l=>{let{disabled:d,onClick:p}=l;return o.default.createElement(r.Tool.Action,{isDisabled:d,icon:o.default.createElement(u.Redo,null),label:h,onClick:p})};t.RedoComponent=g;const f=l=>{let{disabled:d,onClick:p}=l;return o.default.createElement(r.Tool.Action,{isDisabled:d,icon:o.default.createElement(u.Undo,null),label:v,onClick:p})};t.UndoComponent=f;const s=l=>{let{canRedo:d,canUndo:p,redo:E,undo:b}=l;return o.default.createElement(o.default.Fragment,null,o.default.createElement(f,{onClick:()=>{b()},disabled:!p()}),o.default.createElement(g,{onClick:()=>{E()},disabled:!d()}))};t.UndoRedoOptionComponent=s;const m=function(){let{hideOptionsInToolbar:l}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{...(0,i.undoRedoOptionConfig)(),ToolbarOptionComponent:l?void 0:d=>{let{editor:p}=d;const{canRedo:E,canUndo:b,redo:O,undo:C}=(0,i.undoRedoOptionUtils)(p);return o.default.createElement(s,{canRedo:E,canUndo:b,redo:O,undo:C})}}};t.undoRedoOption=m},29347:function(T,t,e){var n=e(241225);Object.defineProperty(t,"__esModule",{value:!0}),t.t=t.pluralize=t.parseNumber=t.getCurrencySymbol=t.formatQuantity=t.formatNumber=t.formatIcuMessage=t.formatCurrencyToParts=t.formatCurrency=void 0;var o=n(e(555912)),i=n(e(470407)),r=e(698779);const u=(0,r.getI18nInstance)(),a=new o.default(u),h=new i.default(u),{formatIcuMessage:v}=a;t.formatIcuMessage=v;const{parseNumber:g}=h;t.parseNumber=g;const{formatNumber:f,formatCurrency:s,formatCurrencyToParts:m,getCurrencySymbol:l,formatQuantity:d,translate:p,pluralize:E}=u;t.pluralize=E,t.t=p,t.formatQuantity=d,t.getCurrencySymbol=l,t.formatCurrencyToParts=m,t.formatCurrency=s,t.formatNumber=f},495037:function(T,t,e){Object.defineProperty(t,"__esModule",{value:!0});var n={headlessRichTextEditor:!0,getChildNodesFromEditor:!0,getHTMLFromNode:!0,setTrackingPayload:!0,RTETrackingPayload:!0,TextAttributesPluginKey:!0};Object.defineProperty(t,"RTETrackingPayload",{enumerable:!0,get:function(){return o.RTETrackingPayload}}),Object.defineProperty(t,"TextAttributesPluginKey",{enumerable:!0,get:function(){return o.TextAttributesPluginKey}}),Object.defineProperty(t,"getChildNodesFromEditor",{enumerable:!0,get:function(){return o.getChildNodesFromEditor}}),Object.defineProperty(t,"getHTMLFromNode",{enumerable:!0,get:function(){return o.getHTMLFromNode}}),Object.defineProperty(t,"headlessRichTextEditor",{enumerable:!0,get:function(){return o.headlessRichTextEditor}}),Object.defineProperty(t,"setTrackingPayload",{enumerable:!0,get:function(){return o.setTrackingPayload}});var o=e(667698),i=e(504932);Object.keys(i).forEach(function(r){r==="default"||r==="__esModule"||Object.prototype.hasOwnProperty.call(n,r)||r in t&&t[r]===i[r]||Object.defineProperty(t,r,{enumerable:!0,get:function(){return i[r]}})})},368195:function(T,t,e){e.r(t),e.d(t,{TextShape:()=>o.df,TextHighlightMarkClassName:()=>o.KM,TextAttributeId:()=>o.Ae,createScaledTextNode:()=>n.Z});var n=e(896093),o=e(944933)},896093:function(T,t,e){e.d(t,{Z:()=>a});var n=e(642979),o=e.n(n),i=e(210750),r=e.n(i);class u{constructor(v){o()(this,"update",r()(()=>{this.container.classList.remove("loaded");const g=this.container.getBoundingClientRect().width,{fontSize:f}=window.getComputedStyle(this.textNode),s=parseFloat(f),m=this.textNode.getBoundingClientRect().width,l=g/m,d=`${Math.max(1,Math.round(l*s*10)/10)}px`;this.textNode.style.fontSize=d,this.container.classList.add("loaded")},40,{leading:!0,trailing:!0})),o()(this,"destroy",()=>{this.observer.disconnect(),u.cache.delete(this.container)}),u.cache.set(v,this),this.container=v,this.textNode=this.container.querySelector(".sqsrte-scaled-text"),this.observer=new ResizeObserver(this.update),this.observer.observe(this.container),this.observer.observe(this.textNode)}refresh(){this.observer.unobserve(this.textNode),this.textNode=this.container.querySelector(".sqsrte-scaled-text"),this.observer.observe(this.textNode)}}o()(u,"cache",new WeakMap);function a(h){if(!h)return;if(u.cache.has(h)){const g=u.cache.get(h);return g.refresh(),g}return new u(h)}},750438:function(T,t,e){e.d(t,{Z:()=>Le});var n=e(642979),o=e.n(n),i=e(392338),r=e(708380),u=e(749189),a=e(210750),h=e.n(a),v=e(976003),g=e.n(v);function f($){return $&&$.constructor&&$.constructor.name==="Object"}function s($,x){return!$&&!x||Array.isArray($)&&Array.isArray(x)||f($)&&f(x)||typeof $=="string"&&typeof x=="string"||!isNaN($)&&!isNaN(x)}function m($){let{newPointer:x,oldPointer:B}=$;const w=new Set;return x.forEach(M=>{B.includes(M)||w.add(M)}),Array.isArray(B)&&B.forEach(M=>{x.includes(M)||w.add(M)}),Array.from(w)}function l($,x){let B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(typeof $!="object"||typeof x!="object")throw new Error(`${l.name} parameters must be Arrays or Objects, received: ${$} and ${x}`);if(!g()($,x)){if(Array.isArray($)&&Array.isArray(x))return m({newPointer:$,oldPointer:x});const M=Object.keys($).map(V=>{const ae=$[V],ue=x[V];if(!s(ae,ue))return`${B}${V}`;if(f(ae)&&f(ue))return l(ae,ue,`${B}${V}.`);if(Array.isArray(ae)){if(g()(ae,ue))return null;const ve=m({newPointer:ae,oldPointer:ue});return`${B}${V}[${ve}]`}return g()(ae,ue)?null:`${B}${V}`}).filter(V=>!!V);return m({newPointer:Object.keys($),oldPointer:Object.keys(x)}).forEach(V=>{M.includes(`${B}${V}`)||M.push(`${B}${V}`)}),M.flat()}return[]}const d=l,p=$=>`<svg>${$}</svg>`,E=function(){return`<path d="${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"M0,0"}" vector-effect="non-scaling-stroke" />`},b=($,x)=>{const B=x[0]-$[0],w=x[1]-$[1];return{length:Math.sqrt(Math.pow(B,2)+Math.pow(w,2)),angle:Math.atan2(w,B)}},O=($,x)=>(B,w,M,q)=>{const ue=$(w||B,M||B),ve=ue.angle+(q?Math.PI:0),Me=ue.length*.5*x,oe=B[0]+Math.cos(ve)*Me,te=B[1]+Math.sin(ve)*Me;return[oe,te]},C=function($){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(B,w,M)=>{const[q,V]=M[w-1],ae=$(M[w-1],M[w-2],B),ue=$(B,M[w-1],M[w+1],!0),ve=x&&w===M.length-1?" z":"";return`c ${ae[0]-q},${ae[1]-V} ${ue[0]-q},${ue[1]-V} ${B[0]-q},${B[1]-V}${ve}`}},S=function($,x){let B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return $.reduce((w,M,q,V)=>q===0?B?"":`M ${M[0]},${M[1]}`:`${w} ${x(M,q,V)}`,"")};class P{constructor(x,B){o()(this,"node",document.createElement("svg")),o()(this,"paths",[]),o()(this,"pathsLen",[]),o()(this,"lastWidth",-1),o()(this,"lastHeight",-1),o()(this,"setRefs",()=>{this.svg=this.container.querySelector("svg"),this.paths=Array.from(this.container.querySelectorAll("path"))});const{uniforms:w}=B;this.uniforms={progress:{value:-1},...w},this.container=x}calculatePathLengths(){this.pathsLen=this.paths.map(x=>x.getTotalLength())}onSetSize(x,B){}onUpdate(){}onDestroy(){}setSize(x,B){x===this.lastWidth&&B===this.lastHeight||(this.onSetSize(x,B),this.calculatePathLengths(),this.lastWidth=x,this.lastHeight=B,this.update())}update(){const{progressDraw:x}=this.uniforms;this.paths.forEach((B,w)=>{const M=Math.ceil(this.pathsLen[w]);M&&(B.setAttribute("stroke-dasharray",M),B.setAttribute("stroke-dashoffset",M*2+x.value*-M))}),this.onUpdate()}destroy(){this.onDestroy(),this.node.remove()}}class y extends P{constructor(x,B){super(x,B),x.innerHTML=p(E()),this.setRefs()}onSetSize(x,B){const w=Math.min(x*.2,10),M=Math.min(B*.25,5),q=x+w*2,V=B+M*2,ae=[`M${-w+q*.35},${-M+V*.95}`,`C ${-w+q*.554},${-M+V*.994} ${-w+q},${-M+V*.94} ${-w+q},${-M+V*.52}`,`C ${-w+q},${-M+V*.165} ${-w+q*.706},0 ${-w+q*.496},0`,`S ${-w+q*.01},${-M+V*.165} ${-w+q*.01},${-M+V*.508}`,`S ${-w+q*.241},${-M+V*1.039} ${-w+q*.74},${-M+V*.994}`];this.paths[0].setAttribute("d",ae.join(" "))}}class c extends P{constructor(x,B){super(x,B),this.bezierCalc=C(O(b,.5)),x.innerHTML=p(E()+E()),this.setRefs()}onSetSize(x,B){this.paths.forEach((w,M)=>{const q=c.paths[M].map(V=>[V[0]*x,V[1]*B]);w.setAttribute("d",S(q,this.bezierCalc))})}}c.paths=[[[0,1],[.5,.55],[1,.25]],[[0,.23],[.6,.6],[1,.9]]];class j extends P{constructor(x,B){super(x,B),this.bezierCalc=C(O(b,.7)),x.innerHTML=p(E()+E()),this.setRefs()}onSetSize(x,B){this.paths.forEach((w,M)=>{const q=j.paths[M].map(V=>[V[0]*x,V[1]*B]);w.setAttribute("d",S(q,this.bezierCalc))})}}j.paths=[[[0,.22],[.25,.21],[.5,.2],[.75,.21],[1,.24]],[[0,.92],[.25,.9],[.5,.88],[.75,.9],[1,.92]]];class N extends P{constructor(x,B){super(x,B),this.bezierCalc=C(O(b,.5)),x.innerHTML=p(E()),this.setRefs()}onSetSize(x,B){const w=this.uniforms.fontSize.value,M=w*.25,q=w*.12,V=Math.floor(x/(M*.7)),ae=B*.97,ue=[[0,ae],[M,ae-q],[M*.7,ae]],ve=S(ue,this.bezierCalc,!0);this.paths[0].setAttribute("d",`M0,${ae} ${ve.repeat(V)}`)}}class Z extends P{constructor(x,B){super(x,B),this.bezierCalc=C(O(b,.3)),x.innerHTML=p(E()),this.setRefs()}onSetSize(x,B){const w=Z.path.map(M=>[M[0]*x,M[1]*B]);this.paths[0].setAttribute("d",S(w,this.bezierCalc))}}Z.path=[[0,.88],[.5,.85],[1,.9],[.6,.85],[.1,.95],[.5,.93],[.8,.95],[.5,1],[.3,1]];class z extends P{constructor(x,B){super(x,B),this.bezierCalc=C(O(b,.5)),x.innerHTML=p(E()),this.setRefs()}onSetSize(x,B){const w=z.paths[0].map(M=>[M[0]*x,M[1]*B]);this.paths[0].setAttribute("d",S(w,this.bezierCalc))}}z.paths=[[[0,.55],[.5,.55],[1,.55]]];class k extends P{constructor(x,B){super(x,B),this.bezierCalc=C(O(b,.5)),x.innerHTML=p(E()),this.setRefs()}onSetSize(x,B){const w=k.paths[0].map(M=>[M[0]*x,M[1]*B]);this.paths[0].setAttribute("d",S(w,this.bezierCalc))}}k.paths=[[[0,.33],[.6,.6],[1,.88]]];class X extends P{constructor(x,B){super(x,B),x.innerHTML=p(E()),this.setRefs()}onSetSize(x,B){this.paths[0].setAttribute("d",`M0,${B*.9} L${x},${B*.9}`)}}class ie extends P{constructor(x,B){super(x,B),x.innerHTML=p(E()),this.setRefs()}onSetSize(x,B){const w=[[0,B*.99],[x*.5,B*.88],[x,B*.89],[x*.98,B*.92]],M=[.5,.5,.5,.1],q=(V,ae,ue)=>{const ve=O(b,M[ae]),[Me,oe]=ue[ae-1],te=ve(ue[ae-1],ue[ae-2],V),se=ve(V,ue[ae-1],ue[ae+1],!0);return`c ${te[0]-Me},${te[1]-oe} ${se[0]-Me},${se[1]-oe} ${V[0]-Me},${V[1]-oe}`};this.paths[0].setAttribute("d",S(w,q))}}class D extends P{constructor(x,B){super(x,B),this.bezierCalc=C(O(b,.5)),x.innerHTML=p(E()+E()),this.setRefs()}onSetSize(x,B){this.paths.forEach((w,M)=>{const q=D.paths[M].map(V=>[V[0]*x,V[1]*B]);w.setAttribute("d",S(q,this.bezierCalc))})}}D.paths=[[[0,.9],[.5,.9],[1,.9]],[[0,1],[.5,1],[1,1]]];class I extends P{constructor(x,B){super(x,B),this.bezierCalc=C(O(b,.5)),x.innerHTML=p(E()),this.setRefs()}onSetSize(x,B){const w=this.uniforms.fontSize.value,M=w*.25,q=w*.15,V=Math.ceil(x/M)+1,ae=B*.97,ue=[...Array(V)].map((ve,Me)=>[Me*M,Me%2===0?ae:ae-q]);this.paths[0].setAttribute("d",S(ue,this.bezierCalc))}}const A={circle:y,cross:c,enclose:j,jagged:N,marker:z,scribble:Z,strike:z,strikeDiagonal:k,underline:X,underlineCurve:ie,underlineDouble:D,wave:I},W=Object.keys(A),U=A,K=($,x)=>{for(var B in x)$.setProperty(B,x[B])},H=$=>({left:$.left,right:$.right,top:$.top,bottom:$.bottom,x:$.x,y:$.y,width:Math.max(0,Math.round($.width)),height:Math.max(0,Math.round($.height))}),R=$=>{for(;$&&$.nodeType!==Node.ELEMENT_NODE;)$=$.parentNode;return $};class J{constructor(x,B){o()(this,"currentShapeType",null),this.state={...J.defaultState,...B},this.uniforms={thickness:{value:.1},...B.uniforms},this.container=x,this.node=document.createElement("div"),this.node.className="TextShape-node",this.onUpdateState(),this.container.appendChild(this.node),this.update()}onUpdateState(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.state={...this.state,...x};const{id:B,isFront:w,shape:M,color:q,thickness:V,linecap:ae,fontSize:ue,blend:ve,opacity:Me}=this.state;this.node.dataset.textAttributeId=B,this.node.dataset.shape=M,this.node.dataset.fontSize=ue,this.node.dataset.isFront=w,Object.assign(this.node.style,{fontSize:`${ue}px`}),this.uniforms.fontSize.value=ue,this.uniforms.thickness.value=V.unit==="em"?ue*parseFloat(V.value):V.value,K(this.node.style,{"--stroke":q,"--stroke-width":`${V.value}${V.unit}`,"--stroke-linecap":ae,"--stroke-linejoin":ae==="round"?"round":"bevel","--blend":ve,"--opacity":Me}),M!==this.currentShapeType&&this.createShape(M)}createShape(x){this.shape&&this.shape.destroy(),this.currentShapeType=x,this.shape=U[x]?new U[x](this.node,{uniforms:this.uniforms}):null}setSizeAndPosition(x,B,w){const M=1/w,q=this.uniforms.thickness.value-this.uniforms.fontSize.value*.25,V=Math.round(x.width*M-q),ae=Math.round(x.height*M),ue=x.x*M,ve=x.y*M,Me=B.x*M,oe=B.y*M;this.node.dataset.index=x.index,Object.assign(this.node.style,{width:`${V}px`,height:`${ae}px`,left:`${Math.round(ue-Me+q*.5)}px`,top:`${Math.round(ve-oe)}px`}),this.shape&&this.shape.setSize(V,ae)}update(){const{animation:x}=this.state,{progressReveal:B}=this.uniforms,w=x==="fadeScale"?.5+B.value*.5:1;this.node.style.opacity=B.value,this.node.style.transform=`scale(${w})`,this.shape&&this.shape.update()}destroy(){this.shape&&(this.shape.destroy(),delete this.shape),this.node.remove(),delete this.node,delete this.container}}J.defaultState={};var _=e(860921),F=e.n(_),Q=e(700436),le=e.n(Q);class re{constructor(x){o()(this,"setState",B=>{this.state={...this.state,...B}}),this.props={...this.constructor.defaultProps,...x},this.state={...this.constructor.defaultState,...this.constructor.state},window.Y&&window.Y.Global&&window.Y.Global.after("frame:device:change",this.flushResizeOnDeviceChange,this)}flushResizeOnDeviceChange(){this.onResize&&this.onResize.flush&&this.onResize.flush()}destroy(){window.Y&&window.Y.Global&&window.Y.Global.detach("frame:device:change",this.flushResizeOnDeviceChange,this)}}o()(re,"defaultProps",{}),o()(re,"defaultState",{});const pe=($,x,B)=>$*(1-B)+x*B,Ce=null,Oe=$=>$*$,ce=function($){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;return-B*($/=w)*($-2)+x},fe=$=>$<.5?2*$*$:-1+(4-2*$)*$;class de extends re{constructor(x){super(x),o()(this,"tick",()=>{const{ease:w,from:M,to:q,duration:V,onUpdate:ae,onComplete:ue}=this.props,ve=Date.now()-this.lastUpdate;if(this.lastUpdate+=ve,this.time=(this.lastUpdate-this.startTime)/1e3,this.time>V&&(this.time=V),ae(pe(M,q,w(this.time/V))),this.time>=V){ue(q);return}this.frame=requestAnimationFrame(this.tick)});const{autoStart:B}=this.props;this.state={isActive:!1},this.startTime=null,this.lastUpdate=null,this.frame=null,B&&this.start()}start(){this.state.isActive||(this.setState({isActive:!0}),this.startTime=Date.now(),this.lastUpdate=this.startTime,this.frame=requestAnimationFrame(this.tick))}destroy(){cancelAnimationFrame(this.frame)}}o()(de,"defaultProps",{autoStart:!0,duration:1,ease:ce,from:0,onComplete:F(),onUpdate:F(),to:0});class ge{constructor(x,B){o()(this,"timeout",{ready:null}),o()(this,"tween",null),o()(this,"initAnimation",()=>{this.animateTo(0)}),o()(this,"onUpdateDraw",q=>{const{onUpdate:V}=this.props;this.uniforms.progressDraw.value=q,V()}),o()(this,"onUpdateReveal",q=>{const{onUpdate:V}=this.props;this.uniforms.progressReveal.value=q,V()}),o()(this,"onAnimationComplete",()=>{}),this.props={...ge.defaultProps,...B};const{uniforms:w,config:M}=this.props;this.node=x,this.config={isAnimationEnabled:!1,animation:"draw",direction:"right",duration:1,...M},this.uniforms={progressDraw:{value:-1},...w},this.reset()}setConfig(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const B={...this.config,...x};d(this.config,B).length&&(this.config={...B})}ready(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250;const{onUpdate:B}=this.props;this.reset(),B(),this.timeout.ready=setTimeout(this.initAnimation,x)}setInitialState(){const{isAnimationEnabled:x,animation:B,direction:w}=this.config;if(x&&B==="draw"){this.uniforms.progressReveal.value=1,this.uniforms.progressDraw.value=w==="right"?-1:1;return}if(x&&(B==="fade"||B==="fadeScale")){this.uniforms.progressReveal.value=0,this.uniforms.progressDraw.value=0;return}this.uniforms.progressReveal.value=1,this.uniforms.progressDraw.value=0}reset(){const{onUpdate:x}=this.props;clearTimeout(this.timeout.ready),this.destroyTween(),this.setInitialState(),x()}animateTo(x){const{animation:B,duration:w}=this.config;if(this.destroyTween(),B==="draw"){const V=le()(Math.abs(this.uniforms.progressDraw.value-x),.2,1);this.tween=new de({duration:w*V,from:this.uniforms.progressDraw.value,to:x,onUpdate:this.onUpdateDraw,onComplete:this.onAnimationComplete});return}const M=1-Math.abs(x),q=le()(Math.abs(this.uniforms.progressReveal.value-M),.2,1);this.tween=new de({duration:w*q,from:this.uniforms.progressReveal.value,to:M,onUpdate:this.onUpdateReveal,onComplete:this.onAnimationComplete})}destroyTween(){this.tween&&(this.tween.destroy(),this.tween=null)}destroy(){var x;this.destroyTween(),(x=this.timeout)!==null&&x!==void 0&&x.ready&&clearTimeout(this.timeout.ready)}}ge.defaultProps={config:{},onUpdate:F(),uniforms:{}};const Te=function($){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const B=[],w=document.createTreeWalker($,NodeFilter.SHOW_TEXT,null,!1);let M;for(;M=w.nextNode();)x&&!M.parentNode.closest(x)&&B.push(M);return B};function me($){return Array.from($.getClientRects()).map(H)}function be($,x){return x.reduce((B,w)=>([...w.textContent.matchAll(/ /g)].forEach(M=>{$.setStart(w,M.index),$.setEnd(w,M.index+1),B.push(H($.getBoundingClientRect()))}),B),[])}function ye($){const B=R($.commonAncestorContainer).closest(".catalog-entry-container");if(!B)return 1;const w=window.getComputedStyle(B);return new DOMMatrix(w.transform).a||1}const Se=($,x)=>{let{rows:B}=$.reduce((w,M)=>{let q=w.rows[w.rowIndex];return(!q||q.y!==M.y&&(q.y<M.y||q.y+q.height>M.y+M.height)&&Math.abs(q.endX-M.x)>1)&&(w.rowIndex+=1,w.rows[w.rowIndex]={left:M.left,right:M.right,top:M.top,bottom:M.bottom,x:M.x,endX:M.x,y:M.y,width:0,height:M.height},q=w.rows[w.rowIndex]),q.endX=Math.max(q.endX,M.right),q.width=Math.max(0,q.endX-q.x),w},{rowIndex:-1,rows:[]});return B.sort((w,M)=>M.width-w.width).sort((w,M)=>M.y-w.y),B=B.reduce((w,M)=>{if(w.length){const V=w[w.length-1];if(M.y===V.y&&M.x===V.x||M.y===V.y&&M.endX===V.endX)return w}const q=x.findIndex(V=>M.endX===V.right&&M.y===V.y);return~q&&(M.width-=x[q].width),w.push(M),w},[]),B},Pe=$=>{if(!$||!$.length)return{scale:1,rowRects:[]};const x=document.createRange();x.setStart($[0],0),x.setEnd($[$.length-1],$[$.length-1].length);const B=me(x),w=ye(x),M=be(x,$),q=Se(B,M);return x.detach(),{scale:w,rowRects:q.reverse().map((V,ae)=>(V.index=ae,V))}};class Ae{constructor(x,B,w){o()(this,"textNodes",[]),o()(this,"rowsPool",[]),o()(this,"intersectionScroll",null),o()(this,"uniforms",{progressReveal:{value:-1},progressDraw:{value:0},fontSize:{value:1}}),o()(this,"rAFID",null),o()(this,"timeoutGlobalAnimation",null),o()(this,"isTickingGlobalAnimation",!1),o()(this,"prefersReducedMotion",!0),o()(this,"_onMutation",()=>{this.isDestroyed||this.onResized()}),o()(this,"onResized",()=>{this.isDestroyed||(this.refreshFontSize(),this.refreshRows())}),o()(this,"onPrefersReducedMotionChange",ve=>{this.prefersReducedMotion=!ve.matches}),o()(this,"onIntersection",ve=>{ve&&(parseInt(window.getComputedStyle(this.parentNode).opacity)&&this.animation.ready(0),this.destroyIntersectionScroll())}),o()(this,"onGlobalAnimationStart",()=>{this.onResized(),this.startGlobalAnimationWatch()}),o()(this,"onGlobalAnimationEnd",()=>{this.onResized()}),o()(this,"tickSyncGlobalAnimation",()=>{this.onResized(),this.isTickingGlobalAnimation&&(this.rAFID=requestAnimationFrame(this.tickSyncGlobalAnimation))}),o()(this,"update",()=>{this.rowsPool.forEach(ve=>ve.update())}),this.node=x;let M={};try{const ve=this.node.dataset.textAttributeId;M=B[ve]||{}}catch{}this.prefersReducedMotion=!window.matchMedia("(prefers-reduced-motion: no-preference)").matches,this.state=this.getStateFromProps({...M,isAnimationEnabled:!this.prefersReducedMotion&&M.isAnimationEnabled}),this.container=w||this.node.closest("div"),this.parentNode=this.node.closest("h1, h2, h3, h4, h5, h6, p, div, pre"),this.onMutation=h()(this._onMutation,10),Object.assign(this.container.style,{position:"relative",zIndex:0}),this.bindListeners();const{isAnimationEnabled:q,animation:V,direction:ae,duration:ue}=this.state;this.animation=new ge(this.node,{uniforms:this.uniforms,onUpdate:this.update,config:{isAnimationEnabled:q,animation:V,direction:ae,duration:ue}})}getStateFromProps(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const B={...Ae.defaultState,...x};return typeof B.duration=="string"&&(B.duration=parseInt(B.duration,10)),B}onStateChange(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const w=this.getStateFromProps({...this.state,...x}),M=d(this.state,w);if(this.state={...this.state,...w},this.rowsPool.forEach(ve=>ve.onUpdateState(this.state)),!B||!M.length)return;const{isAnimationEnabled:q,animation:V,direction:ae,duration:ue}=this.state;this.animation.setConfig({isAnimationEnabled:q,animation:V,direction:ae,duration:ue}),Ue(M)&&this.animation.ready(0),this.onMutation()}bindListeners(){r.Z.on(this.onResized,0),this.intersectionScroll=new u.Z(this.node,{onIntersection:this.onIntersection,normalize:!1}),this.parentNode.addEventListener("transitionstart",this.onGlobalAnimationStart),this.parentNode.addEventListener("transitionend",this.onGlobalAnimationEnd),window.ResizeObserver&&(this.observerResize=new ResizeObserver(this.onMutation),this.observerResize.observe(this.container),this.observerResize.observe(this.node)),window.MutationObserver&&(this.observerMutation=new MutationObserver(this.onMutation),this.observerMutation.observe(this.node,{attributes:!0,childList:!0,subtree:!0})),this.mediaQueryList=window.matchMedia("(prefers-reduced-motion: no-preference)"),this.mediaQueryList.addEventListener?this.mediaQueryList.addEventListener("change",this.onPrefersReducedMotionChange):this.mediaQueryList.addListener(this.onPrefersReducedMotionChange)}unbindListeners(){this.parentNode.removeEventListener("transitionstart",this.onGlobalAnimationStart),this.parentNode.removeEventListener("transitionend",this.onGlobalAnimationEnd),this.destroyIntersectionScroll(),this.observerResize&&(this.observerResize.disconnect(),this.observerResize=null),this.observerMutation&&(this.observerMutation.disconnect(),this.observerMutation=null),r.Z.off(this.onResized),this.mediaQueryList.removeEventListener?this.mediaQueryList.removeEventListener("change",this.onPrefersReducedMotionChange):this.mediaQueryList.removeListener(this.onPrefersReducedMotionChange)}startGlobalAnimationWatch(){clearTimeout(this.timeoutGlobalAnimation),this.timeoutGlobalAnimation=setTimeout(()=>{this.isTickingGlobalAnimation=!1},2e3),!this.isTickingGlobalAnimation&&(this.animation.ready(0),this.isTickingGlobalAnimation=!0,this.rAFID=requestAnimationFrame(this.tickSyncGlobalAnimation))}refreshFontSize(){const x=window.getComputedStyle(this.node),B=parseInt(x.fontSize);Number.isNaN(B)||this.onStateChange({fontSize:B},!1)}refreshTextNodes(){const x=this.node.ownerDocument;if(!x.contains(this.node)){const B=this.container.getAttribute("id"),w=this.node.getAttribute("data-text-attribute-id"),M=x.querySelector(`[id="${B}"]`),q=M&&M.querySelector(`.sqsrte-text-highlight[data-text-attribute-id="${w}"]`);q&&(this.container=M,this.node=q)}this.textNodes=Te(this.node,".TextShape-node")}refreshRows(){this.refreshTextNodes();const x=this.container.getBoundingClientRect(),{rowRects:B,scale:w}=Pe(this.textNodes);this.rowsPool.splice(B.length).forEach(q=>q.destroy());for(let q=0,V=B.length;q<V;q+=1){const ae=B[q],ue=this.rowsPool[q]||new J(this.container,{...this.state,uniforms:this.uniforms});this.rowsPool[q]=ue,ue.setSizeAndPosition(ae,x,w)}}destroyIntersectionScroll(){this.intersectionScroll&&(this.intersectionScroll.destroy(),this.intersectionScroll=null)}destroy(){this.isDestroyed=!0,this.unbindListeners(),this.animation.destroy(),this.onMutation.cancel(),this.rowsPool.forEach(x=>x.destroy()),clearTimeout(this.timeoutGlobalAnimation),cancelAnimationFrame(this.rAFID),delete this.rowsPool,delete this.node,delete this.state,delete this.animation}}Ae.ANIMATION_CHANGE_PROPS=["shape","isAnimationEnabled","animation","duration","direction"];function Ue($){return $.some(x=>Ae.ANIMATION_CHANGE_PROPS.includes(x))}Ae.defaultState={fontSize:12,isFront:!0,isAnimationEnabled:!1,animation:"draw",duration:.75,direction:"right",color:"currentcolor",shape:"wave",thickness:{unit:"em",value:.06},linecap:"square",blend:"none"};const Le=Ae},944933:function(T,t,e){e.d(t,{Ae:()=>o,KM:()=>i,df:()=>n.Z});var n=e(750438);const o="data-text-attribute-id",i="sqsrte-text-highlight"},917749:function(T,t,e){e.d(t,{Z:()=>_});var n=e(153088),o=e(687006),i=e(175823),r=e(621942),u=e(399081),a=e(765742),h=e(985102),v=e(845076),g=e.n(v),f=e(174161),s=e(323379),m=e(934951),l=e(714487),d=e(338465),p=e(516865),E=e(161381),b=e(618662),O=e(762535);const C=F=>{const Q=window.Y.Squarespace.Singletons.TemplateNavigationList.item(0).get("itemList");window.Y.Squarespace.Navigation.Events.fire("collection:create",{type:"link",modelList:Q,opts:{index:0,...F,openModalForConfiguredUrl:!0}})},S=F=>{let{callerName:Q,displayName:le,fullUrl:re,requestCloseOriginatingModal:pe,router:Ce,selectedCategory:Oe}=F;const ce=()=>{(0,b.Au)("add-to-site-header",!0,Oe,Q),pe(()=>{Ce.push(O.Z.forPagesPanel()),setTimeout(()=>{C({newWindow:!1,title:le,url:re})},0)})};return f.createElement(d.Z,{mx:2,mt:1,px:2},f.createElement(p.Z.Tertiary,{onClick:ce},f.createElement(m.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Add to your main navigation")))},P=(0,E.Z)(S);var y=e(354489),c=e.n(y);const N={$schema:"http://json-schema.org/draft-04/schema",properties:{displayName:{type:"string"},menuVisibility:{type:"boolean"},pageVisibility:{type:"boolean"},shortSlug:{type:"string"},fullSlug:{type:"string"}},type:"object"};var Z=e(59337);const z=F=>{switch(F){case Z.k.VIDEO_COLLECTION:return(0,l.t)("When enabled, this category will be visible in your video filters.",null,{project:"commerce.lessons"});case Z.k.PRODUCTS:default:return(0,l.t)("When enabled, this Category will be visible in your store filters.",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})}},k=F=>({$mapping:"#/menuVisibility",properties:{className:c().filterPadding,description:z(F),label:(0,l.t)("Filter Visibility",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})},$conditional:{$if:{"#/menuVisibilityDisabled":{eq:!0}},$then:{properties:{isDisabled:!0}}},$sideEffects:[{$if:{$pointer:"#/menuVisibility",$comparator:{eq:!0}},$then:{set:{$mapping:"#/pageVisibility",value:!0}}}],type:"BooleanField"}),X={$mapping:"#/pageVisibility",properties:{label:(0,l.t)("Enable Page",null,{project:"apps.App.Commerce.NestedCategoriesEditor"}),description:(0,l.t)("Disabled pages can\u2019t be accessed by your site visitors.",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})},$conditional:{$if:{"#/pageVisibilityDisabled":{eq:!0}},$then:{properties:{isDisabled:!0}}},$sideEffects:[{$if:{$pointer:"#/pageVisibility",$comparator:{eq:!1}},$then:{set:{$mapping:"#/menuVisibility",value:!1}}}],type:"BooleanField"},ie={$mapping:"#/shortSlug",type:"PrefixSuffixField",properties:{label:(0,l.t)("URL slug",null,{project:"apps.App.Commerce.NestedCategoriesEditor"}),prefix:"/",includePrefixOnChange:!1},$conditional:{$if:{"#/shortSlug":{exists:!0}},$then:{properties:{prefix:{$data:"#/fullSlug"},className:c().fullSlugPrefix,includePrefixOnChange:!1}}}},D={type:"addLinkToSiteNavButton"},I={$mapping:"#/displayName",properties:{label:(0,l.t)("Name",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})},type:"TextareaField"},A={type:"spacer",properties:{gridMultiplier:2}},U=function(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Z.k.PRODUCTS;return[I,ie,A,X,k(F),A,D]};var K=e(271685);const H=()=>null,R=F=>{const Q=(0,l.t)("Couldn't update categories",null,{project:"apps.App.Commerce.NestedCategoriesEditor"}),le=(0,l.t)("Try again",null,{project:"apps.App.Commerce.NestedCategoriesEditor"}),[re,pe]=(0,f.useState)(F.selectedCategory),[Ce,Oe]=(0,f.useState)(F.selectedCategory),[ce,fe]=(0,f.useState)(!1),[de,ge]=(0,f.useState)(Q),[Te,me]=(0,f.useState)(le),be=(0,f.useRef)(!0),{renderCustomEditingHeader:ye}=F,Se=(0,f.useRef)(re),Pe=(0,f.useRef)(Ce);(0,f.useEffect)(()=>{Se.current=re},[re]),(0,f.useEffect)(()=>{Pe.current=Ce},[Ce]);const Ae=re==null?void 0:re.menuVisibility,Ue=re==null?void 0:re.pageVisibility,Le=()=>{if(re){const V=re;return{...V,pageVisibility:V.ancestorPageHidden?!1:V.pageVisibility,menuVisibility:V.ancestorMenuHidden?!1:V.menuVisibility,menuVisibilityDisabled:V.ancestorMenuHidden,pageVisibilityDisabled:V.ancestorPageHidden,fullSlug:V.slugPrefix}}return{displayName:"",id:"",menuVisibility:!1,pageVisibility:!1,shortSlug:"",fullSlug:"",orderedItemIds:[],slugPrefix:""}},$=async()=>{var V;if(!((V=Se.current)===null||V===void 0)&&V.displayName){Oe(Se.current);const{categoryTree:ae}=await(0,K.yr)(Se.current,F.model.websiteId,F.model.collectionId,F.categoriesType).catch(ue=>{var ve,Me,oe;throw!((oe=ue.response.data)===null||oe===void 0||(Me=oe.details)===null||Me===void 0||(ve=Me.shortSlug[0])===null||ve===void 0)&&ve.includes("properly formatted")&&(me((0,l.t)("URL slugs can only contain letters A-z and numbers 0-9.",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})),ge((0,l.t)("Invalid characters",null,{project:"apps.App.Commerce.NestedCategoriesEditor"}))),fe(!0),ue});F.onCategoryUpdate&&F.onCategoryUpdate(ae)}else fe(!0)};(0,f.useEffect)(()=>{const V=Se.current.menuVisibility,ae=Se.current.pageVisibility;if(be.current){be.current=!1;return}Pe.current.menuVisibility!==V&&(0,b.Au)("filter-visibility",!!V,re,F.callerName),Pe.current.pageVisibility!==ae&&(0,b.Au)("page-visibility",!!ae,re,F.callerName),$()},[Ae,Ue]);const x=Le(),B=f.useMemo(()=>({TextareaField:V=>f.createElement(a.textarea,{...V,onBlur:()=>{Pe.current.displayName!==Se.current.displayName&&((0,b.Au)("name",V.value,re,F.callerName),$())}}),PrefixSuffixField:V=>f.createElement(h.default,{...V,onBlur:()=>{Pe.current.shortSlug!==Se.current.shortSlug&&((0,b.Au)("slug",V.value,re,F.callerName),$())}}),addLinkToSiteNavButton:()=>f.createElement(P,{callerName:F.callerName,displayName:x.displayName,fullUrl:`/${F.collectionUrlId}${x.slugPrefix}${x.shortSlug}`,requestCloseOriginatingModal:F.requestCloseOriginatingModal,selectedCategory:re}),BooleanField:V=>f.createElement(a.boolean,{...V,onChange:ae=>{V.onChange(ae)}})}),[F.collectionUrlId,F.requestCloseOriginatingModal]),w=F.stylesOverride||c(),M=V=>{const ae=V.value;pe({...re,...ae})},q=()=>{fe(!1),me(le),ge(Q)};return f.createElement("div",{className:g()(c().popupStyles,w.popupStyles)},f.createElement(u.Z,{isOpen:ce,onDismiss:q,onRequestClose:q,title:de,message:Te,buttonLabel:(0,l.t)("OK",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})}),ye&&ye(),f.createElement("div",{className:g()({[c().hidden]:ye})},f.createElement("div",{className:g()(c().closeAction)},f.createElement(r.Z,{onClick:F.closeCategoryDetails},f.createElement(m.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Back")))),f.createElement("div",{className:g()(c().flyoutTitle,c().flyoutTitleSelected)},f.createElement(m.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Edit Category")),f.createElement("div",{className:c().formView},f.createElement(s.Z,{components:{hidden:a.hidden,spacer:a.spacer,ContextField:a.context,...B},configurations:{default:{schema:N,uiSchema:U(F.categoriesType),value:Le()}},panelClassName:c().editPanelMargin,renderHeader:H,onChange:M})))};R.defaultProps={categoriesType:"products"};const _=R},59337:function(T,t,e){e.d(t,{k:()=>q,Z:()=>Me});var n=e(153088),o=e(352635),i=e(906046),r=e(251196),u=e(766400),a=e(47362),h=e(685763),v=e(418698),g=e(115350),f=e(516865),s=e(538312),m=e(482053),l=e(338465),d=e(640188),p=e(566288),E=e(958846),b=e(612020),O=e(727751),C=e(134280),S=e(399081),P=e(845076),y=e.n(P),c=e(174161);const N=oe=>{let{children:te}=oe;const[se,L]=(0,c.useState)(!1);return te({isHovering:se,onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1)})};var Z=e(773630),z=e(964779),k=e(934951),X=e(714487),ie=e(397372),D=e(271685),I=e(917749),A=e(419467),W=e(996118),U=e(57102),K=e(200718),H=e(354489),R=e.n(H);function J(oe,te,se){return te in oe?Object.defineProperty(oe,te,{value:se,enumerable:!0,configurable:!0,writable:!0}):oe[te]=se,oe}var _=null;const F="item",Q=45,le=Q*1/3,re=Q*2/3;class pe extends c.Component{componentDidMount(){const{connectDragPreview:te}=this.props;te&&te((0,W.r)(),{captureDraggingState:!0})}render(){const{connectDragSource:te,connectDropTarget:se}=this.props;return se(te(c.createElement("div",{ref:L=>this.dom=L},this.props.children)))}componentDidUpdate(te,se){if(!(this.props.dragSourceId===this.props.item.id||this.props.dragSourceId.length===0||this.props.dragSourceId===te.dragSourceId&&this.state.dragState===se.dragState)&&this.props.isOver)switch(this.state.dragState){case"REPARENT":this.props.reparentHover(this.props.dragSourceId,this.props.item);return;case"REORDERBEFORE":this.props.reorderBefore(this.props.dragSourceId,this.props.item);return;case"REORDERAFTER":this.props.reorderAfter(this.props.dragSourceId,this.props.item)}}constructor(te){super(te),J(this,"dom",void 0),this.dom=null}}const Ce={beginDrag(oe,te){return{item:oe.item.id,name:oe.item.displayName}},canDrag(oe){return!oe.preventDrag},isDragging(oe,te){return oe.item.id===te.getItem().item},endDrag(oe,te){te.didDrop()||oe.cancelDrag(oe.item.id)}},Oe=(oe,te)=>({connectDragSource:oe.dragSource(),connectDragPreview:oe.dragPreview()}),ce={drop(oe,te,se){const L=se.getDecoratedComponentInstance().dom.getBoundingClientRect(),G=(L.bottom+L.top)/2,Y=L.bottom-te.getClientOffset().y;if(Y>=le&&Y<re&&oe.canReparent){oe.reparentDrop(te.getItem().item,oe.item);return}G-te.getClientOffset().y<0?oe.reorderDrop(te.getItem().item,oe.item):oe.reorderDrop(te.getItem().item,oe.item,!0)},hover(oe,te,se){if(te.getItem().item===oe.item.id)return;const L=se.dom.getBoundingClientRect(),G=(L.bottom+L.top)/2,Y=L.bottom-te.getClientOffset().y;if(Y>=le&&Y<re&&oe.canReparent){se.setState({dragState:"REPARENT"});return}G-te.getClientOffset().y<0?se.setState({dragState:"REORDERAFTER"}):se.setState({dragState:"REORDERBEFORE"})}},fe=(oe,te)=>!te.getItem()||!te.isOver()?{connectDropTarget:oe.dropTarget(),dragSourceId:"",isOver:te.isOver(),dragState:"RESET"}:{connectDropTarget:oe.dropTarget(),dragSourceId:te.getItem().item,isOver:te.isOver()},de=(0,A.flow)([(0,U.E)(F,Ce,Oe),(0,K.G)(F,ce,fe)])(pe),ge=oe=>{let{connectDropTarget:te,children:se}=oe;return te(c.createElement("div",{style:{height:12,marginTop:2},className:R().tailDropTarget},se))},Te={drop(oe,te){var se;const L=(se=te.getItem())===null||se===void 0?void 0:se.item;L&&oe.reorderDrop(L,oe.lastItem,!1)}},me=(oe,te)=>({connectDropTarget:oe.dropTarget(),isOver:te.isOver()}),be=(0,K.G)(F,Te,me)(ge);var ye=e(962017);const Pe=oe=>{const{category:te,toggleDropdownVisibility:se,toggleAddCategoryInput:L,deleteCategory:G,summonDetailedEditor:Y,treeDepth:ee}=oe,ne={"&:hover":{backgroundColor:"gray.900"},py:"2",px:{_:"4","mobile-*":"3"},border:"0",borderWidth:"0"},he=te.level>=ee;return c.createElement(ye.Z,{className:R().categoryPopover,anchor:te.anchorNode,isOpen:te.showEditingPopover||!1,closeOnClickOutside:!0,onRequestClose:se(!1,te),position:"bottom-center",ignoreTargetSelectors:[`.${R().disclosure}`],hideArrow:!0},c.createElement(m.Z,{flexDirection:"column",py:1},c.createElement(f.Z.Secondary,{sx:ne,onClick:Y(te),"data-test":"category-dropdown-edit-btn"},c.createElement(k.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Edit")),!he&&c.createElement(f.Z.Secondary,{sx:ne,onClick:L(te),disabled:he},c.createElement(k.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Add")),c.createElement(f.Z.Secondary,{"data-test":"category-dropdown-delete-btn",color:"red",sx:ne,onClick:G(te)},c.createElement(k.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Delete"))))};var Ae=e(736206),Ue=e(362187),Le=e(516408);const $={position:"fixed",pointerEvents:"none",left:0,top:0,width:"100%",height:"100%"},x=18,B=oe=>{const{isDragging:te,item:se,getClientOffset:L,currentOffset:G}=(0,Le.f)(ne=>({item:ne.getItem(),itemType:ne.getItemType(),initialOffset:ne.getInitialSourceClientOffset(),currentOffset:ne.getSourceClientOffset(),isDragging:ne.isDragging(),getClientOffset:ne.getClientOffset()}));function Y(){return c.createElement("div",{className:R().dragLayerStyle},se.name)}function ee(){const{parentOffset:ne}=oe;if(!G)return{display:"none"};let{x:he,y:Ee}=G;return L&&ne&&(he=L.x-ne.x,Ee=L.y-ne.y-x),{transform:`translate(${he}px, ${Ee}px)`}}return te?c.createElement("div",{style:$},c.createElement("div",{style:ee()},Y())):null};var w=e(618662);function M(oe,te,se){return te in oe?Object.defineProperty(oe,te,{value:se,enumerable:!0,configurable:!0,writable:!0}):oe[te]=se,oe}var q=function(oe){return oe.VIDEO_COLLECTION="lessons",oe.PRODUCTS="products",oe}({});const V=(0,g.Z)(i.Z,r.Z),ae=oe=>c.createElement(V,{as:"label",...oe});function ue(oe){return oe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var ve;class Me extends(ve=c.Component){async componentDidMount(){this.props.callerName!=="product-settings-modal"&&(0,w.n4)("nested-categories","product-editor",this.props.callerName),setTimeout(async()=>{await this.updateCategories().then(()=>{this.setState({firstTreeLoadPending:!1})}).catch(()=>{this.setState({showError:!0,firstTreeLoadPending:!1})})},250)}componentWillUnmount(){this.observer&&this.observer.disconnect()}componentDidUpdate(){this.scrollTarget&&this.scrollContainer&&!this.observer&&this.observer!==null&&(this.observer=null,(0,Ae.Z)().then(()=>{const te={root:this.scrollContainer,threshold:.5},se=this.scrollTarget,L=G=>{this.setState({isHeaderIntersecting:G[0].isIntersecting})};this.observer=new IntersectionObserver(L,te),se&&this.observer.observe(se)}))}renderHeader(te){return this.props.renderHeader?this.props.renderHeader():c.createElement("div",{className:R().flyoutHeader},c.createElement("div",{className:y()({[R().flyoutTitleSelected]:te>0},R().flyoutTitle,R().flyoutTitleColor)},this.renderCategoryHeaderText(te)))}render(){var te;const se=this.state.categoriesTree,L=this.props.stylesOverride||R(),G=se.getTopLevelCategoryIds(),Y=se.getAllCategories().filter(ee=>ee.selected).length;return c.createElement("div",{onClick:this.overrideProductEditorClick,ref:ee=>{this.topLevelContainer=ee}},c.createElement(Z.W,{backend:z.PD},c.createElement(S.Z,{isOpen:this.state.showErrorModal,onDismiss:this.dismissErrorModal,onRequestClose:this.dismissErrorModal,title:this.state.errorTitle,message:this.state.errorMessage,buttonLabel:(0,X.t)("OK",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})}),c.createElement(B,{parentOffset:this.props.containerNode?this.props.containerNode.getBoundingClientRect():(te=this.topLevelContainer)===null||te===void 0?void 0:te.getBoundingClientRect()}),c.createElement("div",{className:y()({[R().showEditor]:this.state.showDetailedEditor})},c.createElement("div",{className:R().fixedWidth},c.createElement("div",{className:y()(R().popupStyles,L.popupStyles)},!this.props.renderHeader&&c.createElement("div",{className:y()(R().flyoutHeader,R().closeAction)},c.createElement(f.Z.Tertiary,{onClick:this.closeModal,"data-test":"categories-editor-done-btn"},c.createElement(k.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Done")),!this.state.isHeaderIntersecting&&!this.state.showError&&!this.props.isLoading&&c.createElement("div",{className:y()({[R().flyoutTitleSelected]:Y>0},R().flyoutTitleColor)},this.renderCategoryHeaderText(Y))),(this.props.isLoading||this.state.firstTreeLoadPending)&&c.createElement("div",{className:y()(R().flyoutWidth,L.flyoutWidth,R().showLoading)},c.createElement(u.Z,null)),this.state.showError&&c.createElement("div",{className:y()(R().flyoutWidth,L.flyoutWidth,R().showError)},c.createElement("div",null,c.createElement(s.Z.Title,{css:{color:o.colors.gray[400]}},c.createElement(k.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Couldn't Load Categories"))),c.createElement("div",null,c.createElement(s.Z.Subtitle,{css:{color:o.colors.gray[400]}},c.createElement(k.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Try reloading."))),c.createElement("button",{className:R().upperCase,onClick:this.updateCategories},c.createElement(s.Z.Caption,{css:{color:o.colors.gray[100]}},c.createElement(k.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Reload")))),!this.state.showError&&!this.props.isLoading&&!this.state.firstTreeLoadPending&&c.createElement("div",{className:y()(R().flyoutWidth,L.flyoutWidth),ref:ee=>{this.scrollContainer=ee}},this.state.showEmptyState?this.renderNoCategoryState():c.createElement(c.Fragment,null,this.props.renderHeader?this.renderHeader(Y):c.createElement("div",{ref:ee=>{this.scrollTarget=ee}},this.renderHeader(Y)),c.createElement("form",{onSubmit:this.addCategory,className:y()(R().searchContainer,R().pointer)},c.createElement(ae,{minHeight:"sizes.200",paddingX:"14px",paddingY:this.state.searchTerm?"4px":2,exteriorPre:c.createElement(p.Z,null),body:c.createElement(a.Z,{autoFocus:!0,value:this.state.searchTerm,sx:{textOverflow:"ellipsis"},onChange:this.searchCategories,"data-test":"pc2-add-category",placeholder:G.length>0?(0,X.t)("Add or Search for a Category",null,{project:"apps.App.Commerce.NestedCategoriesEditor"}):(0,X.t)("Add a Category",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})}),exteriorAccessory:this.state.searchTerm&&c.createElement(f.Z.Tertiary,{type:"submit","data-test":"add-category-button",disabled:!this.state.searchTerm},c.createElement(k.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Add"))}))),this.state.isLoadingNetworkRequest&&c.createElement("div",{className:y()(R().flyoutWidth,L.flyoutWidth,R().showLoading)},c.createElement(u.Z,null)),!this.state.showError&&!this.props.isLoading&&!this.state.isLoadingNetworkRequest&&G.sort(this.sortCategoriesByReference).map(ee=>{const ne=se.findNode(ee);let he=!1,Ee=!1;return(ne.displayName.toUpperCase().includes(this.state.searchTerm.toUpperCase())||se.descendantNameContainsString(ne,this.state.searchTerm))&&(he=!0,ne.displayName.toUpperCase().includes(this.state.searchTerm.toUpperCase())||(Ee=!0)),this.createMarkup(ne,!1,he,Ee)}),(G==null?void 0:G.length)>0&&c.createElement(be,{lastItem:se.findNode(G[G.length-1]),reorderDrop:this.reorderDrop}),this.state.showRemoveCategoryConfirmation&&this.renderRemoveConfirmation()))),c.createElement("div",{className:y()(R().fixedWidth,{[R().hideDetailedEditor]:!this.state.showDetailedEditor})},this.state.showDetailedEditor&&c.createElement(I.Z,{categoriesType:this.props.categoriesType,callerName:this.props.callerName,collectionUrlId:this.props.collectionUrlId,selectedCategory:this.state.selectedCategory,requestCloseOriginatingModal:this.props.requestCloseOriginatingModal,stylesOverride:L,closeCategoryDetails:this.closeCategoryDetails,model:this.props.model})))))}renderRemoveConfirmation(){const{deleteCategoryButtonDisabled:te}=this.state;return c.createElement(h.Z.Transition,null,this.state.showRemoveCategoryConfirmation&&c.createElement(h.Z,{onRequestClose:this.cancelDelete,className:R().categoryPopover},c.createElement(h.Z.Overlay,null),c.createElement(h.Z.Position,{position:"center"},c.createElement(Ue.Z,{title:(0,X.t)("Delete category?",null,{project:"apps.App.Commerce.NestedCategoriesEditor"}),message:this.props.maxTreeDepth===1?this.FLAT_TREE_DELETE_MESSAGE:this.NESTED_TREE_DELETE_MESSAGE,buttons:[()=>c.createElement(Ue.Z.Button,{key:"Cancel",onClick:this.cancelDelete},(0,X.t)("Cancel",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})),()=>c.createElement(Ue.Z.Button,{key:"Confirm",onClick:te?()=>{}:this.deleteCategory(this.state.deleteCategory),"data-test":"confirm-delete-category"},(0,X.t)("Delete",null,{project:"apps.App.Commerce.NestedCategoriesEditor"}))]}))))}refreshTree(){const te=this.state.categoriesApiResponse.categoryTree,se=ie.C.constructCategoriesTree(te,this.state.selectedCategories,this.state.rootCategory),L=se.getExplicitIdsOnly(this.state.selectedCategories);this.setState({categoriesTree:se,selectedCategories:L}),this.setNames(se),this.props.onTreeRefresh&&this.props.onTreeRefresh(te)}constructor(...te){var se;super(...te),se=this,M(this,"defaultErrorTitle",(0,X.t)("Couldn't update category",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})),M(this,"defaultErrorMessage",(0,X.t)("Try again",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})),M(this,"createCategoryErrorTitle",(0,X.t)("Couldn't create category",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})),M(this,"FLAT_TREE_DELETE_MESSAGE",(0,X.t)("Are you sure you would like to delete this category? All items with this category will be updated.",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})),M(this,"NESTED_TREE_DELETE_MESSAGE",(0,X.t)("Removing this category will also delete all of the sub-categories within it.",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})),M(this,"CATEGORY_CREATE_UNIQUE_ERROR_TYPE","DisplayNameNotUniqueValidationError"),M(this,"CATEGORY_CREATE_LIMIT_ERROR_TYPE","CategoryLimitExceededValidationError"),M(this,"CATEGORY_CREATE_CHARACTER_LIMIT_ERROR_TYPE","FieldTooLongValidationError"),M(this,"state",{categoriesApiResponse:{categoryTree:[]},showError:!1,showErrorModal:!1,categoriesTree:new ie.C({},{}),newCategoryName:"",searchTerm:"",isHeaderIntersecting:!0,selectedCategories:this.props.model.categoryIds||[],showEmptyState:!1,showAddField:!1,showDetailedEditor:!1,showRemoveCategoryConfirmation:!1,firstTreeLoadPending:!0,errorTitle:this.defaultErrorTitle,errorMessage:this.defaultErrorMessage,isLoadingNetworkRequest:!1,deleteCategoryButtonDisabled:!1}),M(this,"scrollTarget",void 0),M(this,"scrollContainer",void 0),M(this,"topLevelContainer",void 0),M(this,"observer",void 0),M(this,"dismissErrorModal",()=>{this.setState({showErrorModal:!1})}),M(this,"isValidDragOperation",(L,G)=>{if(!L||!G||G.id===L)return!1;const Y=this.state.categoriesTree.findNode(L);return!(this.state.categoriesTree.isChild(Y,G)||this.state.searchTerm)}),M(this,"cancelDrag",L=>{const G=this.state.categoriesTree.cloneTree();G.findNode(L).isDragging=!1,this.clearHoveredState(G),this.setState({categoriesTree:G})}),M(this,"toggleHideChildren",L=>async G=>{G.preventDefault(),G.stopPropagation();const Y=this.state.categoriesTree.cloneTree(),ee=Y.findNode(L.id);ee.hideChildren=!ee.hideChildren,this.setState({categoriesTree:Y})}),M(this,"initializeDragHoverState",L=>{const{nodeId:G,tree:Y}=L;let{dropNode:ee}=L;if(!G||!ee||ee.id===G)return;let ne=this.state.categoriesTree.findNode(G);if(!(this.state.categoriesTree.isChild(ne,ee)||this.state.searchTerm))return ne=Y.findNode(G),ee=Y.findNode(ee.id),ne.isDragging=!0,{node:ne,dropNodeInTree:ee}}),M(this,"renderCategoryHeaderText",L=>c.createElement(c.Fragment,null,L>0?c.createElement(k.CN,{n:L,forms:{one:"1 category selected",other:"{%n} categories selected"},project:"apps.App.Commerce.NestedCategoriesEditor"}):c.createElement(k.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Select a Category"))),M(this,"renderNoCategoryState",()=>c.createElement(m.Z,{flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:this.state.showAddField?0:2},c.createElement(s.Z.Title,{color:"gray.400",textAlign:"center"},c.createElement(k.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"No Categories")),c.createElement(s.Z.Body,{color:"gray.400",textAlign:"center"},c.createElement(k.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Organize products into categories like \u201CNew Arrivals\u201D or \u201CAccessories.\u201D")),c.createElement(l.Z,{mt:6},c.createElement(f.Z.Tertiary,{onClick:()=>{this.setState({showEmptyState:!1,showAddField:!0})}},c.createElement(k.T,{project:"apps.App.Commerce.NestedCategoriesEditor"},"Create Category"))))),M(this,"renderToolTip",L=>{let G;return c.createElement(N,null,Y=>{let{isHovering:ee,onMouseEnter:ne,onMouseLeave:he}=Y;return c.createElement(c.Fragment,null,c.createElement("div",{className:R().iconContainer,ref:Ee=>{G=Ee},onMouseEnter:ne,"data-test":"hoverContainer",onMouseLeave:he},c.createElement(E.Z,{"data-test":"hide-icon",width:16,height:16})),c.createElement(v.Z,{"data-test":"tooltip",anchor:G,isOpen:ee,position:"top",onRequestClose:()=>null},L?(0,X.t)("Disabled",null,{project:"apps.App.Commerce.NestedCategoriesEditor"}):(0,X.t)("Not visible in filters",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})))})}),M(this,"renderCategoryDropdownButton",L=>this.state.searchTerm?null:c.createElement(c.Fragment,null,Object.keys(L.children||{}).length>0&&c.createElement("button",{className:y()(R().expandCollapse),onClick:this.toggleHideChildren(L),"data-test":"expand-icon"},c.createElement(b.Z,{className:y()(R().expandIcon,{[R().rotateChevron]:L.hideChildren})})))),M(this,"clearHoveredState",L=>{L.getAllCategories().forEach(G=>{G.isPreviewParent=!1,G.isReorderAfter=!1,G.isReorderBefore=!1})}),M(this,"reorderDrop",async(L,G,Y)=>{if(!this.isValidDragOperation(L,G)){this.cancelDrag(L);return}Y||this.canReorderAfter(G,L)||(Y=!0);const ee=this.state.categoriesTree.cloneTree();this.clearHoveredState(ee);const ne=ee.findNode(L);G=ee.findNode(G.id)||ne,ne.isDragging=!1,ne.hideChildren=!0;const he=ee.findNode(ne.parentCategoryId)||this.state.rootCategory,Ee=ee.findNode(G.parentCategoryId)||this.state.rootCategory;if(he!==Ee&&!this.isCombinedTreeDepthBelowLimit(Ee,ne)){this.cancelDrag(L);return}if(G.id===L)return;let Ie;if(G.displayIndex>ne.displayIndex&&Ee===he?Ie=Y?G.displayIndex-1:G.displayIndex:Ie=Y?G.displayIndex:G.displayIndex+1,Ie===ne.displayIndex&&Ee===he){this.cancelDrag(L);return}ne.displayIndex=Ie,ne.parentCategoryId=Ee.id,ne.parentNode=Ee;try{if(this.setState({isLoadingNetworkRequest:!0}),he===Ee&&await(0,D.yr)(ne,this.props.model.websiteId,this.props.model.collectionId,this.props.categoriesType).catch(Re=>{throw this.setErrorState(Re),Re}),he!==Ee){const Re=he.level||0,xe=Ee.level||0;(0,w.BD)(ne,Re+1,xe+1,this.props.callerName);const{collectionId:De}=this.props.model;await(0,D.nE)(L,De,ne.parentCategoryId,ne.displayIndex)}else(0,w.B0)(ne,ne.displayIndex,this.props.callerName);await this.updateCategories()}finally{this.setState({isLoadingNetworkRequest:!1})}}),M(this,"reorderBefore",(L,G)=>{this.reorder(L,G,!0)}),M(this,"reorder",(L,G,Y)=>{if(!this.isValidDragOperation(L,G))return;Y||this.canReorderAfter(G,L)||(Y=!0);const ee=this.state.categoriesTree.cloneTree(),ne=this.initializeDragHoverState({nodeId:L,dropNode:G,tree:ee});if(!ne)return;this.clearHoveredState(ee);const{node:he}=ne;he.isDragging=!0,Y?G.isReorderBefore=!0:G.isReorderAfter=!0,this.setState({categoriesTree:ee})}),M(this,"reparentHover",(L,G)=>{if(!this.isValidDragOperation(L,G)||!this.canReparent(G,this.state.categoriesTree.findNode(L)))return;const Y=this.state.categoriesTree.cloneTree();this.clearHoveredState(Y);const ee=this.initializeDragHoverState({nodeId:L,dropNode:G,tree:Y});if(!ee)return;const{node:ne,dropNodeInTree:he}=ee,Ee=he;ne.isDragging=!0,Ee.isPreviewParent=!0,this.setState({categoriesTree:Y})}),M(this,"reparentDrop",async(L,G)=>{if(!this.isValidDragOperation(L,G)||!this.canReparent(G,this.state.categoriesTree.findNode(L))){this.cancelDrag(L);return}try{this.setState({isLoadingNetworkRequest:!0});const Y=this.state.categoriesTree.cloneTree();let ee=Y.findNode(L);ee=Y.findNode(L),ee.parentCategoryId=G.id,ee.parentNode=G,ee.displayIndex=1;const{collectionId:ne}=this.props.model;await(0,D.nE)(L,ne,G.id,ee.displayIndex),await this.updateCategories(),(0,w.BD)(ee,ee.level||1,(ee.parentNode.level||0)+1,this.props.callerName)}finally{this.setState({isLoadingNetworkRequest:!1})}}),M(this,"closeCategoryDetails",async()=>{this.setState({showDetailedEditor:!1}),await this.updateCategories()}),M(this,"deleteCategory",L=>async()=>{try{this.setState({isLoadingNetworkRequest:!0,deleteCategoryButtonDisabled:!0});const{collectionId:G}=this.props.model;await(0,D.uu)(L.id,G,this.props.model.websiteId,this.props.categoriesType).catch(ne=>{throw this.setErrorState(ne),ne});let Y=[...this.state.selectedCategories];const ee=this.state.categoriesTree.getSelectedSubnodes(L,new Set([]));Y=Y.filter(ne=>!ee.has(ne)),L.parentCategoryId&&Y.push(L.parentCategoryId),this.setState({selectedCategories:Y,showRemoveCategoryConfirmation:!1,deleteCategory:void 0}),(0,w.k6)(L,this.props.callerName)}finally{await this.updateCategories(),this.setState({isLoadingNetworkRequest:!1,deleteCategory:void 0,showRemoveCategoryConfirmation:!1,deleteCategoryButtonDisabled:!1})}}),M(this,"deleteCategoryModal",L=>()=>{const G=this.state.categoriesTree.cloneTree(),Y=G.findNode(L.id);Y.showEditingPopover=!1,this.setState({showRemoveCategoryConfirmation:!0,categoriesTree:G,deleteCategory:L})}),M(this,"cancelDelete",()=>{this.setState({showRemoveCategoryConfirmation:!1,deleteCategory:void 0})}),M(this,"toggleAddCategoryInput",L=>G=>{if(G.preventDefault(),G.stopPropagation(),L){const Y=this.state.categoriesTree.cloneTree(),ee=Y.findNode(L.id);ee.showEditingPopover=!1,ee.showAddField=!ee.showAddField,this.state.parentToAdd&&this.state.parentToAdd.id!==L.id&&Y.findNode(this.state.parentToAdd.id)&&(Y.findNode(this.state.parentToAdd.id).showAddField=!1),this.setState({categoriesTree:Y,newCategoryName:"",parentToAdd:ee,showAddField:!1})}else{const Y=this.state.categoriesTree.cloneTree();if(this.state.parentToAdd){const ee=Y.findNode(this.state.parentToAdd.id);ee.showAddField=!1}this.setState({categoriesTree:Y,newCategoryName:"",parentToAdd:void 0,showAddField:!this.state.showAddField})}}),M(this,"toggleCategory",L=>async()=>{const G=this.state.categoriesTree.cloneTree(),Y=G.findNode(L.id),{toggleCategory:ee}=this.props;if(!Y.id)return;const{websiteId:ne,collectionId:he,productId:Ee,productTitle:Ie,productType:Re}=this.props.model;let xe=[...this.state.selectedCategories];if(Y.selected){if(Y.parentNode){const je=this.state.rootCategory;(Y.parentCategoryId===je.id?this.state.categoriesTree.getTopLevelCategoryIds():Object.values(this.state.categoriesTree.findNode(Y.parentCategoryId).children).map(Be=>Be.id)).some(Be=>G.findNode(Be).selected&&Be!==Y.id)||(Y.parentNode.selected=!0,xe.push(Y.parentNode.id))}const De=G.getSelectedSubnodes(Y,new Set([]));(0,w.eY)(L,this.props.callerName,{websiteId:ne,collectionId:he,productId:Ee,productTitle:Ie,productType:Re}),ee||(0,D.Yp)([Y.id],Ee,ne,he,this.props.categoriesType).then(()=>{this.updateCategories()}).catch(je=>{throw this.setErrorState(je),je}),xe=xe.filter(je=>!De.has(je))}else{(0,w.f2)(Y,this.props.callerName,{websiteId:ne,collectionId:he,productId:Ee,productTitle:Ie,productType:Re});let De=Y,je=null;for(;De.parentNode;)if(De=De.parentNode,xe.includes(De.id)){je=De;break}ee||(0,D._j)([Y.id],Ee,ne,he,this.props.categoriesType).then(()=>{this.updateCategories()}).catch(Ne=>{throw this.setErrorState(Ne),Ne}),xe.push(Y.id),Y.selected=!0,je&&(je.selected=!1,xe=xe.filter(Ne=>Ne!==je.id))}ee==null||ee([...xe,this.state.rootCategory.id]),this.setState({categoriesTree:G,selectedCategories:xe},()=>this.refreshTree())}),M(this,"updateCategoryName",L=>{this.setState({newCategoryName:L.target.value})}),M(this,"searchCategories",L=>{this.setState({searchTerm:L})}),M(this,"canReorderAfter",(L,G)=>L.hideChildren||L.id===G||Object.keys(L.children).length===0||Object.keys(L.children).length===1&&L.children[G]),M(this,"isCombinedTreeDepthBelowLimit",(L,G)=>{const Y=this.props.maxTreeDepth;return!(L.level>=Y||G&&this.state.categoriesTree.getSubTreeDepth(G)+L.level>Y)}),M(this,"canReparent",(L,G)=>this.isCombinedTreeDepthBelowLimit(L,G)?!!(!L.children||Object.keys(L.children).length===0||L.hideChildren):!1),M(this,"createMarkup",(L,G,Y,ee)=>{const ne=y()({[R().hidden]:!Y,[R().childCategory]:G,[R().category]:!G}),he=y()(R().separator,{[R().hovered]:L.isPreviewParent,[R().reorderAfter]:L.isReorderAfter,[R().reorderBefore]:L.isReorderBefore,[R().translucent]:L.isDragging,[R().grabbing]:this.isDragInProgress()}),Ee=!L.pageVisibility||L.ancestorPageHidden,Ie=!L.menuVisibility||L.ancestorMenuHidden,Re=Object.values(L.children||{}).sort(this.sortCategories),xe=Re[Re.length-1];return c.createElement("div",{className:`${ne}`,key:L.id,"data-test":"category-list-item"},c.createElement("div",null,c.createElement(de,{reorderDrop:this.reorderDrop,canReparent:this.canReparent(L),reparentDrop:this.reparentDrop,preventDrag:this.state.searchTerm,reorderBefore:this.reorderBefore,reparentHover:this.reparentHover,cancelDrag:this.cancelDrag,item:L,reorderAfter:this.reorder,key:L.id},c.createElement("div",{className:`${he}`,"data-test":"separator"},c.createElement("div",{className:R().dragHandleContainer},c.createElement(O.Z,{className:y()(R().dragIcon),tabIndex:0})),this.renderCategoryDropdownButton(L),c.createElement("div",{className:y()({[R().translucent]:ee})},this.boldString(L.displayName)),c.createElement("div",{className:R().buttonAlignment},(Ee||Ie)&&this.renderToolTip(Ee),!this.isDragInProgress()&&c.createElement("button",{className:y()(R().iconContainer),"data-test":"category-dropdown-options",onClick:this.toggleDropdownVisibility(!0,L),ref:De=>{L.anchorNode=De}},c.createElement("div",{className:y()({[R().openDisclosure]:L.showEditingPopover},R().disclosure)},c.createElement(C.Z,{width:16,height:16}))),!this.isDragInProgress()&&!this.props.hideCheckbox&&c.createElement(d.Z,{className:R().iconContainer,"data-test":"category-checkbox",value:L.selected,onChange:this.toggleCategory(L)}),c.createElement("div",{onClick:this.overrideProductEditorClick},c.createElement(Pe,{category:L,toggleDropdownVisibility:this.toggleDropdownVisibility,toggleAddCategoryInput:this.toggleAddCategoryInput,deleteCategory:this.deleteCategoryModal,summonDetailedEditor:this.props.customSummonDetailedEditor||this.summonDetailedEditor,treeDepth:this.props.maxTreeDepth})))))),L.showAddField&&!this.state.searchTerm&&c.createElement("div",{className:R().childCategory},c.createElement("form",{onSubmit:this.addCategory},c.createElement("input",{autoFocus:!0,className:y()(R().inputWidth),value:this.state.newCategoryName,placeholder:(0,X.t)("Add Category\u2026",null,{project:"apps.App.Commerce.NestedCategoriesEditor"}),onBlur:this.addCategory,onChange:this.updateCategoryName,onClick:this.overrideProductEditorClick}))),Object.keys(L.children||{}).length>0?Object.values(L.children||{}).sort(this.sortCategories).map(De=>{let je=!1,Ne=!1;return De=this.state.categoriesTree.findNode(De.id),(De.displayName.toUpperCase().includes(this.state.searchTerm.toUpperCase())||this.state.categoriesTree.descendantNameContainsString(De,this.state.searchTerm))&&(je=!0,De.displayName.toUpperCase().includes(this.state.searchTerm.toUpperCase())||(Ne=!0)),!L.hideChildren&&!L.isDragging&&this.createMarkup(De,!0,je,Ne)}):null,Re.length>0&&!L.hideChildren&&!L.isDragging&&c.createElement(be,{lastItem:xe,reorderDrop:this.reorderDrop}))}),M(this,"boldString",L=>{if(!this.state.searchTerm)return L;const G=this.state.searchTerm,Y=new RegExp(`(${ue(G)})`,"gi");return L.split(Y).map((ne,he)=>ne.toUpperCase()===G.toUpperCase()?c.createElement("b",{key:`${ne}_${he}`},ne):ne)}),M(this,"isDragInProgress",()=>this.state.categoriesTree.getAllCategories().some(L=>L.isDragging||!1)),M(this,"toggleDropdownVisibility",(L,G)=>Y=>{Y.preventDefault(),Y.stopPropagation();const ee=this.state.categoriesTree.cloneTree(),ne=ee.findNode(G.id);ee.getAllCategories().forEach(he=>{he.showEditingPopover=!1}),ne.showEditingPopover?ne.showEditingPopover=!1:ne.showEditingPopover=L,this.setState({categoriesTree:ee})}),M(this,"summonDetailedEditor",L=>G=>{G.preventDefault(),G.stopPropagation(),L.showEditingPopover=!1,this.setState({selectedCategory:L,showDetailedEditor:!0})}),M(this,"overrideProductEditorClick",L=>{L.stopPropagation()}),M(this,"sortCategoriesByReference",(L,G)=>{const Y=this.state.categoriesTree.findNode(L),ee=this.state.categoriesTree.findNode(G);return this.sortCategories(Y,ee)}),M(this,"sortCategories",(L,G)=>L.displayIndex<G.displayIndex?-1:1),M(this,"addCategory",async L=>{L.preventDefault(),L.stopPropagation();try{this.setState({isLoadingNetworkRequest:!0});const G=this.state.parentToAdd,Y=this.state.searchTerm||this.state.newCategoryName;if(Y&&Y.length>0){const ee={displayName:Y,id:(G==null?void 0:G.id)||this.state.rootCategory.id,shortSlug:Y.toLowerCase().trim().replace(/\s+/g,""),orderedItemIds:[]},ne=await(0,D.sw)(ee,this.props.model.websiteId,this.props.model.collectionId,this.props.categoriesType).catch(he=>{throw this.setErrorState(he,Y),he});this.setState({searchTerm:"",newCategoryName:"",parentToAdd:void 0,showAddField:!1}),await this.updateCategories(),(0,w.Vj)(ee,this.props.callerName),this.props.callerName==="product-composer"&&this.toggleCategory(ne)()}}finally{this.setState({isLoadingNetworkRequest:!1})}}),M(this,"updateCategories",async()=>{const L=await(0,D.CP)(this.props.model.collectionId,this.props.model.websiteId,this.props.categoriesType).catch(Y=>{throw this.setErrorState(Y),Y}),G=L.categoryTree[0];this.setState({showEmptyState:this.props.isEmptyState&&L.categoryTree.length<2,showAddField:!this.props.isEmptyState&&L.categoryTree.length<2,categoriesApiResponse:L,rootCategory:{...G,menuVisibility:!G.menuHidden,pageVisibility:G.pageRendering==="LIST_VIEW"},showError:!1},()=>{this.refreshTree()})}),M(this,"setNames",L=>{if(this.props.setCategories){const G=L.getAllCategories().filter(Y=>Y.selected).map(Y=>({id:Y.id,name:Y.displayName}));this.props.setCategories(G)}}),M(this,"closeModal",()=>{const{closeModal:L}=this.props;L()}),M(this,"setErrorState",function(L){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Category";var Y,ee,ne,he,Ee,Ie,Re;const xe=(ne=L.response)===null||ne===void 0||(ee=ne.data)===null||ee===void 0||(Y=ee.details)===null||Y===void 0?void 0:Y["detail.errors"];switch((xe==null||(Ee=xe.displayName)===null||Ee===void 0||(he=Ee[0])===null||he===void 0?void 0:he.type)||(xe==null||(Re=xe.misc)===null||Re===void 0||(Ie=Re[0])===null||Ie===void 0?void 0:Ie.type)){case se.CATEGORY_CREATE_UNIQUE_ERROR_TYPE:se.setState({showErrorModal:!0,errorTitle:(0,X.t)("{name} already exists",{name:G},{project:"apps.App.Commerce.NestedCategoriesEditor"}),errorMessage:(0,X.t)("Please create a unique name for your new category.",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})});break;case se.CATEGORY_CREATE_LIMIT_ERROR_TYPE:se.setState({showErrorModal:!0,errorTitle:se.createCategoryErrorTitle,errorMessage:(0,X.t)("The limit of 1,000 categories has been exceeded.",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})});break;case se.CATEGORY_CREATE_CHARACTER_LIMIT_ERROR_TYPE:se.setState({showErrorModal:!0,errorTitle:se.createCategoryErrorTitle,errorMessage:(0,X.t)("Display name must be less than 100 characters.",null,{project:"apps.App.Commerce.NestedCategoriesEditor"})});break;default:se.setState({showErrorModal:!0,errorTitle:se.defaultErrorTitle,errorMessage:se.defaultErrorMessage})}})}}M(Me,"defaultProps",{categoriesType:"products",maxTreeDepth:3})},958320:function(T,t,e){e.d(t,{Z:()=>o});var n=e(59337);const o=n.Z},944481:function(T,t,e){e.d(t,{D:()=>n});const n=o=>o.replace(new RegExp("%c","g"),"%p")},435769:function(T,t,e){e.d(t,{Z:()=>i});var n=e(174161);const o=async()=>await Promise.resolve().then(e.bind(e,836708)),i=r=>{const[u,a]=n.useState(null);return u?n.createElement(u.default,r):(o().then(h=>a(h)),n.createElement(n.Fragment,null))}},429566:function(T,t,e){e.d(t,{Z:()=>u});var n=e(174161),o=e(714487),i=e(556353);function r(a,h,v){let{timeFormatLocal:g="LT",timeFormat24Hour:f="HH:mm"}=v;const s=(0,n.useRef)((0,o.o0)("")),[m,l]=(0,n.useState)(),[d,p]=(0,n.useState)(),[E]=(0,i.Z)(a,100);(0,n.useEffect)(()=>{const O=E?E.trim().length>0:!1;if(O){const C=(0,o.o0)(E,f,g);if(O&&C!==s.current){p(void 0);const[P,y]=C.split(":").map(c=>parseInt(c,10));l({hours:P,minutes:y})}else p(new Error("invalid time")),l(void 0)}else p(void 0),l(void 0)},[E,f,g]);const b=n.useCallback(()=>{h(O=>{const C=(0,o.o0)(O,g,g);return C!==s.current?C:O})},[g,h]);return{structuredValue:m,formatTime:b,error:d}}const u=r},763064:function(T,t,e){e.d(t,{l:()=>o,q:()=>n});const n=(i,r,u)=>Object.keys(r).reduce((a,h)=>a.replace(i[h],r[h].exampleText),u),o=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(i).reduce((r,u)=>(r[u]=new RegExp(u,"g"),r),{})}}}]);

//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/sourcemaps/62beb78294c687b0/84157-c444a59a0c9062a8-min.en-US.js.map