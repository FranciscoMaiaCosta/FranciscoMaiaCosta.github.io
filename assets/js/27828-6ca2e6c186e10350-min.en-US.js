(globalThis.webpackChunkextract_css=globalThis.webpackChunkextract_css||[]).push([["27828"],{319340:function(c){"use strict";c.exports={}},24861:function(c){"use strict";c.exports={blogPaywallExcerptAnnotationButton:"awV26Tw2bew03HsC"}},462731:function(c){"use strict";c.exports={container:"XCXrctRgcR1ftMPJ",childContainer:"_zFHoLpsvsKW0qri",show:"DF3aiNNzDnM5x4Vq",item:"S_bim5TYnfk5IS1d",firstItem:"G1sZty8Q9kWfrzM9",lastItem:"bTOguhCDA7wA5rQV",onlyItem:"MVkw4DFZgsMDTtAp",childOpen:"Gju4mjpZE78DLZdS",disabled:"Z5_AFAxokioh0Yxg",label:"RcDPddDFd7cyVAVK",shortcut:"O32ZyscgpsDzvWKc",shortcutLabel:"hZFSU2zJ_AwVIggf",arrowRight:"ug7phiv7UTk7BvHQ",ctrlIcon:"M7z7PAV0cy8ijMt_",deleteIcon:"ed89rnfA7cw4Gq17",divideLine:"zefyOR_oFIBjHCQo"}},435876:function(c){"use strict";c.exports={container:"okEnE2LaEA8_U5PB",mobileEditing:"yW_3j706fzwdZpqE",wrapper:"BQ6HdBsu1UQl8_ew",manageItemsWrapper:"adOQ5IEIIpAzfkDB",iconWithMinWidth:"fj8gM6lQX_kWkoby",smallButtonsWrapper:"za67_MCHi9MYyrtW"}},473370:function(c){"use strict";c.exports={}},471849:function(c){"use strict";c.exports={positioner:"EeasxBVmRIOwysak",sectionWrapper:"jLC8D_w1W24YsqfM"}},26613:function(c){"use strict";c.exports={}},146399:function(c){"use strict";c.exports={titleEditor:"DvfdZYFNcboULy1Z"}},569958:function(c){"use strict";c.exports={popoverWrapper:"QJtc3Joz6C0eyIVn",reactBlockAnnotation:"tidILMJ7AVANuKwS"}},740839:function(c){"use strict";c.exports={iconListsContainer:"l7WMEN8_jQF1Lr0F",iconCategory:"RzezE8xIc6cTsBpW",iconList:"DX1kgP41newlVtdi",iconWrapper:"FgfuS318spjpy6uI",premiumLogo:"TNb2qi709HUixqei"}},610509:function(c){"use strict";c.exports={portalWrapper:"CpSvyvLnJQsQ3UKs"}},796672:function(c){"use strict";c.exports={handlesWrapper:"_D4ORX5JT3AI_0C5",hideHandles:"YNR4xv0mkAXaD5Na",moveHandle:"swPMXZTmqoccLMnt",resizeHandle:"AufPh7xwNhAVJnhh",topMoveHandle:"AUQY_f5DA4sqbt5F swPMXZTmqoccLMnt",bottomMoveHandle:"O0WOhDOb5ErxsR0R swPMXZTmqoccLMnt",rightMoveHandle:"mlGFxmeurXgeFOqj swPMXZTmqoccLMnt",leftMoveHandle:"gka1yX7_w7KkEn5J swPMXZTmqoccLMnt",hiddenHandle:"T30zJVwbmAwT1Yjh",dot:"gL5ykYuobP4ct3sd",globalDot:"A62ESWyfStE2qMVu",topResizeHandle:"UrnsIZnYoRsKnlBz AufPh7xwNhAVJnhh",rightResizeHandle:"tDbqCXeFpXU7R1LF AufPh7xwNhAVJnhh",bottomResizeHandle:"QIYN37As3U8BKuyx AufPh7xwNhAVJnhh",leftResizeHandle:"JTviQQZ7hsNHiMXC AufPh7xwNhAVJnhh",topLeftResizeHandle:"GkPDKCLKj88tU8_J AufPh7xwNhAVJnhh",topRightResizeHandle:"iySKLwz2J0HKSM8s AufPh7xwNhAVJnhh",bottomLeftResizeHandle:"wkheYZdSCVw4u9LB AufPh7xwNhAVJnhh",bottomRightResizeHandle:"pmAm3XVyLFIjHS1M AufPh7xwNhAVJnhh",shiftedToLeft:"XRIoNnwV040xBKt1",shiftedToRight:"lcDVYKiKRm8NRgWL"}},602548:function(c){"use strict";c.exports={labelTagContainer:"Unx8iBGQoN_6obZ3",visible:"IxtYqtJZD4Qw7jeX",hasAccessory:"wRougGbaTjcXs8IH",accessory:"FQhRr9mwxbY22psb",globalAccessory:"BPHrU5NB8ikT7Qnz"}},235246:function(c){"use strict";c.exports={gridRow:"j5pgMCbsyWcvUnNz",gridIndicator:"USHOVB6BGuQgmGSJ",middleColumn:"fOqsT6ahjO0bNGnn",defaultGrid:"yJDg06ZYcQMm5a6q",isBlockCentered:"WnYuGt6Ph9w0U5ud",gridIsVisible:"JY_VJQCWdrUbNX3x"}},728993:function(c){"use strict";c.exports={isDragging:"zRw4AmSDpCI0RFo0",noFocusOutline:"jOETkeBEPQIE5pqC",isGhost:"r9ZM1opxumwrB5SA",layerItemLabel:"SD8gU4_qBBwEXGcm",isDisabled:"CUshD78n2NEL7v7P",layerItem:"MBF95nchvUdsEfh6",isEnabled:"VuqZYi26onUJ6kW2",isChild:"SRK0_etSQnmB1U_N",isParent:"Ta9LVXKflcIJPFdO",isLastInTopLevelGroup:"OaoOpDLnEj4xd9Eu",isHovered:"lv6oPrO2BtknaJmr",isBlockFocused:"MJwX6fFtCoU4oMtc",nodeBranch:"xzy8fbdpAEcGgSoA",layerItemActionButton:"ltSUMzQaeSw_c3tT",nestedBranch:"PcJTJEVWrR8JxBNO",connectedBranch:"izxZy9lrmFsEi4Uc",endBranch:"bE0B4azrDYMExn8y",visible:"jnQE6G17Qw921FRl"}},954713:function(c){"use strict";c.exports={emptyStateContainer:"nZX0xKUsG3Qetijg",sortableListWrapper:"qJ3qo2pCdmYHAdFt",bulkActionActive:"AWyXhbKADkQ7QpWR"}},889657:function(c){"use strict";c.exports={}},213588:function(c){"use strict";c.exports={wrapper:"S0UkzbeuLQAryngn",resizingTickLeft:"E2139S6S4cRG7sDf",showAtTop:"TJbwoRWwgKgMqE69",showAtBottom:"rHx3kAq1uacd5a5i",resizingTickRight:"yiEHYuWM740BOoKr",resizingTickTop:"xuwKxtoLdFUNkmbj",showAtLeft:"OzQEv6WFx6YMsJfS",showAtRight:"F9DdEaU0n0Ytl7Vu",resizingTickBottom:"fGmA9sXOTnwRfJH1"}},510884:function(c){"use strict";c.exports={dragHandle:"voI3Mc1PfFISybEV",isMobileApp:"sz2fVBgoZbwusmdn",isMobile:"g4RUZ6W4n5UU_LC3",isVisible:"D4LRn9qrNaEBfSU5",hasRoom:"Mrx2ohbbD1IPogFh",isDragging:"P2Bmvy4ZCYFBweeP",dragImg:"xQ3fiEfBYNg4yXyY"}},917334:function(c){"use strict";c.exports={pin:"i2N1IxiAdAycOWAB",delayAnimation:"AamHp1eFNIfJS9C5",pinned:"qrP4wgx5qcAU3ulW",pinAnim:"LVxYcVqNRQwNIvDR"}},508257:function(c){"use strict";c.exports={wrapper:"H6yj7ixRs1cTtYmf",isScrolled:"LmqFESUrXUMcBM6R",panels:"XlM4Mrq_4SYSml7c",backContainer:"z8ObY5PSBKwqgD51",instructionsContainer:"zk91rSp56xkFJjs8","transition-enter":"sGBO8c0bCaEg8NdN","transition-leave":"XrW2smn4EDcoKedd"}},652381:function(c){"use strict";c.exports={search:"oXI9cY48LjYv6vE2",add:"a8b4viyaJIjehBXG undefined",clear:"HZWd_CE5fqkadX8B",clearLight:"d3LAxcAtW6YrZevw",trash:"AYwyX_Ynf8MXiVD8",trashLight:"SKSjPMwB4gIngHna",check:"FDqB4dmGuaw4cHHk",checkDark:"nRQSyqVgYr8eFeVj",checkAfter:"_u2oYbtj68LoZilC",checkDarkAfter:"u1XPHD4A_T4XlDA_",checkDarkSmallAfter:"aJQ20CueYjUXlVWu",checkDarkBefore:"eK_8Bf90Wb8e_FrV",aureusCheck:"AB6q7RYLkl4SOs3Z",upload:"XlIQzHkz3BQh1f00",avatar:"vkWxZXXgTBsfF5wk",gearSmall:"zTKyqvawqZwKzO3r",pencilSmall:"IaNWZlnUPMY9wlMR",trashSmall:"PKG_ogH0kIACd2rE",chevronLight:"C2Rit6eZ4R4O5PQt",chevronRight:"hBQviy3i3uYs5f1A",chevronDark:"a3xATzrb4LE_13lL",circleLogoDark:"K3K0SqdmJT8o_M2X",gettyLogo:"uhNJRNr7v4j1JC0A",gettyIconLight:"vWtWm0BCWa4y3n2W",chevronUpDark:"U7Pjxz3mrsgqqLbw",chevronDownDark:"rsO7ZdO2I0ayG_3D",arrowDark:"DIIbaY1dPEMvLbl9",file:"YVPn1uml9ADgv49K",shoppingCart:"McmQhAhCTvMa6onC",squarespace:"fg8PZ0ijiF0U_1Qk",zoomin:"RL2yLWwtZl0Z2D2i",zoomout:"okxRkXvp_okTRezo",squarespaceLight:"ch1mSdUUOEsetW9R",actionButton:"IqX0xUNT6cAvG_tO",delete:"_Zk9F6fQaVM6fWuo",top:"rPSkDz_moBecALnJ",bottom:"qCGAI2Qkik44dwUS",right:"zM8tOb26BVcmG1sj",left:"QOVMTmYPlcOuuLIW"}},462938:function(c){"use strict";c.exports={panel:"x9rlSNw9eYYTbSZw",relWrapper:"jffDupk3iYX7jwtY"}},561669:function(c){"use strict";c.exports={container:"fsd3lNSEXnw0BqvA",contentItemContainer:"Ydq0ld0KZsEWcMl8",flexContainer:"E8huqYWIt90foYM7",field:"bXXJQuYv9r4P7ejN",description:"qqKbuxd7IcsbbA10",label:"lR335QusZcgh7VXq",buttonLink:"LQY5UWmlas9QUcyj"}},178652:function(c){"use strict";c.exports={container:"GEfryL_qBTIDa_8n",image:"YYstJh9oruYqYEdR",url:"E87TsCLV9cE5TCYq",title:"UKSMDljwnLw1axoH",description:"tAbip25vey4b7j_G",helperDescription:"J01DQSTSVY0QqXyL",leftAligned:"EytulWCc4d8t3L5P",leftAlignedContainer:"pZel4kVXT7YZ6xzf",leftAlignedContainerFullWidth:"S9b_gXhX1Tgf7USi",leftAlignedDescription:"GMlzzsxXtPg8OEn5",leftAlignedImage:"hd5kjGYb1385TPRU"}},229861:function(c){"use strict";c.exports={field:"lF64gnNCgrg4yXjz",label:"aAoCp8bPxku5l3LJ"}},586724:function(c){"use strict";c.exports={noPointerEvents:"tIu4qK06_vYhTS3P",restorePointerEvents:"WGR0WUUuntg5W1nL",popoverWrapper:"fgnqmBnwo0cT_Coa",mobilePopoverWrapper:"UDaLo7gy51Q2YXHy",reactBlockAnnotation:"eGe0jxkzk44taVDE",headerElementLabelTag:"s3hUF9Om5sJodzLK",headerElementLabelTagOnOutline:"Mp2lYQAqZtwXX1r6",hovering:"PF31btTsSgDnVM8R",showing:"XF8ONvTXwwvEFPvf",headerFocusVisible:"u70TU_2ODQYvpVjf"}},313380:function(c){"use strict";c.exports={container:"_OBmfQTHPhkiUgP8"}},723681:function(c){"use strict";c.exports={container:"WIsBKkOZRkCrKNQw",title:"tbnqbJz4YMoGy44i",previewTitle:"T8cSyNsvF4Q89vzP",label:"MJvkOR2J8gYdHpUi",description:"NtogVXTOK9InXBhw",helperDescription:"sHPa1pFOdngdcH34",url:"EzOaKhUd0VWPqLkr"}},417925:function(c){"use strict";c.exports={search:"kQcUeEuy3MlqZLuj",add:"D4Bm3NrbnckhKb2u",clear:"dD3WfC1OL0AEF1m1",clearLight:"ZQd7C5lpSyATuoMX",trash:"RZmiQMN6WUUMCgDw",trashLight:"PIZBowHUBAYdFDXB",check:"fG2Ayvuzm6MPIw_8",checkDark:"NCIJ5a9YqHADMMOU",checkAfter:"lJVwhmzBX8AFf3Qu",checkDarkAfter:"Vk2Q36s2FoAzLcVy",checkDarkSmallAfter:"HUHAWO1g3Mcw_9CS",checkDarkBefore:"Df7EtjXNaOY4d9ee",aureusCheck:"vdoIgI8lUIsScAoV",upload:"pkK7spPGdfMGDW_g",avatar:"WWUmPdYlA2MfRuZ4",gearSmall:"bs2CBHu_I58milDb",pencilSmall:"r08TqVJfYArv_zYI",trashSmall:"mNZgTRGGUgYTINkC",chevronLight:"eDqW2zFxh0K0WuLs",chevronRight:"bKQZ_6x7L8_IvO8g",chevronDark:"CqwfgLY27sAxHtZz",circleLogoDark:"p8jMzB9rEvsE5gm7",gettyLogo:"craUONU4Lz8cRI7R",gettyIconLight:"_BLH2uy2BrwbLnq3",chevronUpDark:"Ngu7YQgokxEoKNdY",chevronDownDark:"_CRtpZB7o94nz5pz",arrowDark:"Mrn8_9lEhswysc2X",file:"eWFBupHtoWLg5TrF",shoppingCart:"vwKoKCEC278xXkYt",squarespace:"dwcEwh5_lQg9D_4K",zoomin:"BrwSWH1MM0BFPEGP",zoomout:"Llj06ZrPmfMTke8r",squarespaceLight:"AUY73DiMa6EJJccg",container:"aIrokS0ZBkQC5S8m",leftTransitionGroup:"Dw4JXntqHU8_ZTeO",rightTransitionGroup:"v6JJ5hNFGOMMkE14",flexTabContainer:"i3eydKNxCUsk7g_e",tab:"ah7IeeTbgsKa4i5v",active:"O37lngnLga0jSLZM",error:"CZxFJQD7a2gxrqOV",scrollIndicatorMask:"xJ5NRc1y8NrtxdZH",scrollIndicatorIcon:"BHMx0I1HQozWWJ9f"}},953563:function(c){"use strict";c.exports={dissolve:"b5LNrZs5pl4oq8ZE"}},853333:function(c){"use strict";c.exports={}},786498:function(c){"use strict";c.exports={linkModal:"ZEquQuyhQGEOmNCJ",editorContainer:"W7jhUWP_8th4w8I4",noPointerEvents:"o1dQIAkVkRkOP3wq",pointerEvents:"WciwDsBylg0STXY4"}},361411:function(c){"use strict";c.exports={container:"BCcc6UiyPu4cPcX0 krbZpf73c_0wmSEL",link:"DDmuqzxOuQyYrfiq",linkText:"_Jpgxv55TZgav4B1",actionButton:"fZIh2EbwxIcVU8Cr"}},861637:function(c){"use strict";c.exports={overlay:"y8vFCS786fMpJANF",close:"DpMvGSxP7R4pGHl5 NXvp6UrRxEolcsJB",container:"Dd8DMcbAgc3kIRtQ",button:"SJSSRbbzEKjRRGSE qfo4YX0DqoEiY5Sl Pcv4O7V33jYm_lIT gSeYdpv_3d8xGwlQ",desktopLogo:"hqqxSDJUMhIEg4y9 JHuzcnFMRkMKYaiG",desktopHeader:"ciaTall7J3wVE7AX",mobileLogo:"J83srRemc388pb2E JHuzcnFMRkMKYaiG",mobileHeader:"nuFFYQ6TOkRseADt",title:"f3qZ3YNy4IAxY3Ck",link:"gidYsCMMYzciT1iS",anchor:"degQQqYl218CAMt9",message:"Bw_BpkSH7nwzQmb5"}},989387:function(c){"use strict";c.exports={}},820396:function(c){"use strict";c.exports={noPointerEvents:"VN7fspdfcZgUVgW6",restorePointerEvents:"e0b1a8PgG2YaSr47",modal:"eHG3602w0OeNXBPE",rendererCustomSpacing:"tflZUAOxRis7pD78",scrollContainer:"PA4Ewvr41EGTsIAF"}},520114:function(c){"use strict";c.exports={selectPreview:"wFqqIddQoAccVadm",optionPreview:"mvVQTdsjaQEMv93X",noPointerEvents:"HfTOaViUrTAqdNfc",restorePointerEvents:"m8r9B2pxV_UmsyKd"}},831483:function(c){"use strict";c.exports={popoverContainer:"qRQPltU_miE302yH"}},492145:function(c){"use strict";c.exports={}},769967:function(c){"use strict";c.exports={}},530330:function(c){"use strict";c.exports={}},323209:function(c){"use strict";c.exports={}},259049:function(c){"use strict";c.exports={}},540767:function(c){"use strict";c.exports={}},597605:function(c){"use strict";c.exports={}},382035:function(c){"use strict";c.exports={}},742843:function(c){"use strict";c.exports={}},899715:function(c){"use strict";c.exports={}},148289:function(c){"use strict";c.exports={}},692853:function(c){"use strict";c.exports={}},687833:function(c){"use strict";c.exports={}},966522:function(c){"use strict";c.exports={}},531982:function(c){"use strict";c.exports={}},794367:function(c){"use strict";c.exports={}},236153:function(c){"use strict";c.exports={}},648200:function(c){"use strict";c.exports={}},869003:function(c){"use strict";c.exports={}},842186:function(c){"use strict";c.exports={}},252152:function(c){"use strict";c.exports={}},664350:function(c){"use strict";c.exports={}},459913:function(c){"use strict";c.exports={}},792606:function(c){"use strict";c.exports={}},490268:function(c){"use strict";c.exports={}},639236:function(c){"use strict";c.exports={}},797057:function(){YUI.add("@sqs/layout-engine/aspect-ratio-manager",function(c){var b=c.Base.create("AspectRatioManager",c.Base,[],{initializeBlock:function(t,l){var d=l;c.Lang.isObject(d)&&(d=d.aspectRatio),c.Lang.isValue(d)&&(t.addClass("sqs-intrinsic"),t.setStyle("paddingBottom",d+"%"),t.one("> div")&&t.one("> div").addClass("sqs-intrinsic-content"))},destroyBlock:function(t){var l=t.one(".sqs-intrinsic");l&&(l.removeClass("sqs-intrinsic"),l.setStyle("padding-bottom",null),l.one(".sqs-intrinsic-content")&&l.one(".sqs-intrinsic-content").removeClass("sqs-intrinsic-content"))},initAllBlocks:function(){var t=c.all(".sqs-block[data-aspect-ratio]:not(.sqs-block-image)");t.each(function(l){c.SQS.LayoutEngine.AspectRatioManager.initializeBlock(l.one(".sqs-block-content"),c.JSON.parse(l.getAttribute("data-aspect-ratio")))},this)}});c.namespace("SQS.LayoutEngine"),c.SQS.LayoutEngine.AspectRatioManager=new b,c.config.win.Squarespace&&c.config.win.Squarespace.onInitialize&&c.config.win.Squarespace.onInitialize(c,c.SQS.LayoutEngine.AspectRatioManager.initAllBlocks)},"1.0",{requires:["base"]})},441106:function(){YUI.add("@sqs/layout-engine/block-content-base",function(c){var b=function(){};c.namespace("SQS.LayoutEngine.BlockContent");var t=c.SQS.LayoutEngine.BlockContent.Base=function(){c.before(this._bindUIBlock,this,"bindUI"),c.before(this._syncUIBlock,this,"syncUI")};t.prototype={_bindDOM:b,_bindUIBlock:function(){this.after("editableChange",this.syncUI,this)},_syncUIBlock:function(){this.syncEditable()},syncEditable:function(){var l=this.get("editable"),d=this.get("editor");c.Lang.isValue(d)&&(l&&!this.hasPlugin(d.NS)?this.plug(d):!l&&this.hasPlugin(d.NS)&&this.unplug(d))},toJSON:function(){var l=this.get("model").toJSON();return delete l.id,l},destructor:function(){this.unplug()},_onDocFocus:b},t.ATTRS={tabIndex:{value:null},editable:{value:!1,lazyAdd:!1}}},"1.0",{requires:[]})},388611:function(){YUI.add("@sqs/layout-engine/block-content-html-editor-base",function(c){var b=function(){};c.namespace("SQS.LayoutEngine.BlockContent"),c.SQS.LayoutEngine.BlockContent.HtmlEditorBase=c.Base.create("contentHtmlEditor",c.Plugin.Base,[],{initializer:function(){var t=this.get("host");this.block=t.get("block")||t.get("parent"),this.initEngine(this.block),this.afterHostEvent("focusedChange",function(l){l.newVal?this._afterFocus(l):this._afterBlur(l)},this),this.once("initializedChange",this.syncEditorUI,this),t.get("boundingBox").addClass("sqs-editing")},syncEditorUI:b,_getVisualEditorData:function(){throw new Error("_getVisualEditorData() not implemented.")},initEngine:function(t){var l=this.get("host").get("model").get("engine");switch(l){case"text":case"textNoBreak":this.initTextEngine();break}},initTextEngine:function(){var t=this.get("host"),l=t.get("model").get("engine"),d=t.get("placeholderText"),o=t.get("boundingBox"),e=t.get("contentBox");this.titleEditable=c.Node.create('<textarea class="sqs-textarea-editor" placeholder="'+d+'" autocapitalize="on">'+c.Escape.html(t.get("model").get("html"))+"</textarea>"),o.appendChild(this.titleEditable);var a=this.textarea=o.one("textarea"),r=["font","text-align","text-rendering","letter-spacing","text-transform","color"],s=this.get("host").get("referenceNode")||e;r.forEach(function(n){var i=s.getComputedStyle(n);a.setStyle(n,i),s!==e&&e.setStyle(n,i)},this),l==="textNoBreak"&&a.on("keydown",function(n){n.keyCode===13&&n.preventDefault()},this),a.on("valuechange",function(n){var i=c.Escape.html(n.target.get("value"));i.indexOf(`
`)!==-1&&(i=i.replace(/\n/g," "),a.set("value",i)),this.get("host").get("model").set("html",n.target.get("value")),this.get("host").syncUI()},this)},_giveEditorFocus:b,_afterFocus:function(t){this._giveEditorFocus()},_afterBlur:function(){this._save(),this._fireContentUpdate()},_save:function(t){var l=this.get("host").get("model");this.visualEditor?typeof t!="string"&&(t=this._getVisualEditorData()):this.textarea&&(t=this.textarea.get("value")),c.Lang.isValue(t)&&l.setAttrs({source:t,html:t}),this.block&&this.block.get("isNewBlock")&&this.block.set("isNewBlock",!1)},_fireContentUpdate:function(){this.block&&this.block.fire("widget:contentUpdate")},_destroyVisualEditor:function(){throw new Error("_destroyVisualEditor not implemented.")},destructor:function(){this.get("host").get("boundingBox").removeClass("sqs-editing"),this._destroyVisualEditor(),this.titleEditable&&this.titleEditable.remove()}},{NS:"contentEditor",ATTRS:{tabIndex:{value:0}}})},"2.0",{requires:["node","base","plugin"]})},213914:function(c,b,t){"use strict";var l=t(714487),d=t(208935),o=t(591214),e=t.n(o);YUI.add("@sqs/layout-engine/block-content-html",function(a){a.namespace("SQS.LayoutEngine.BlockContent"),a.SQS.LayoutEngine.BlockContent.Html=a.Base.create("html",a.Widget,[a.WidgetChild,a.SQS.LayoutEngine.BlockContent.Base,a.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(r){r&&r.toolbarOptions&&this.set("toolbarOptions",r.toolbarOptions,{silent:!0}),(!r||!r.model)&&this.set("model",{});var s=this.get("boundingBox");if(s.addClass(d.DISABLE_YUI_DRAG_CLASSNAME),this.get("copyReferenceNodeClassNames")){var n=this.get("referenceNode").get("className");s.addClass(n)}},bindUI:function(){this._registerEvent(this.get("model").after("change",this._syncEmptyState,this))},showRteToolbar:function(){this.contentEditor&&this.contentEditor.showRteToolbar()},scrollAndFocusRte:function(){this.contentEditor&&this.contentEditor.scrollAndFocusRte()},syncUI:function(r){var s=r?r.immediate:!1,n=this.get("model").get("html");(!this.get("editable")||["visual","wysiwyg"].indexOf(this.get("model").get("engine"))===-1)&&this.get("contentBox").set("innerHTML",n),this.hasPlugin("contentEditor")&&this.contentEditor.syncEditorUI(n,{immediate:s}),this._syncEmptyState()},isEmpty:function(){return e()(this.get("model").get("html"))},_syncEmptyState:function(){var r=this.get("boundingBox");r&&r.getDOMNode()&&r.toggleClass("sqs-empty",this.isEmpty())},setContent:function(r,s){this.get("model").set("html",r||"",s),this.syncUI(),this.get("parent")&&this.get("parent").fire("widget:contentUpdate")}},{CSS_PREFIX:"sqs-html",ATTRS:{block:{value:null},model:{lazyAdd:!1,writeOnce:!0,setter:function(r){if(a.instanceOf(r,a.SQS.LayoutEngine.ContentModel.Html))return r;if(a.Lang.isObject(r))return new a.SQS.LayoutEngine.ContentModel.Html(r)}},placeholderText:{value:(0,l.t)("Write here\u2026",null,{project:"scripts-v6.layout-engine"})},editor:{},afterBindEditorEvents:{},type:{value:"full"},isInline:{value:!1},isLinkable:{value:!0},tabIndex:{value:null},toolbarOptions:{value:{removeBlock:!1}},commands:{},referenceNode:{},copyReferenceNodeClassNames:{value:!1}}}),a.namespace("SQS.LayoutEngine.ContentModel"),a.SQS.LayoutEngine.ContentModel.Html=a.Base.create("HtmlContentModel",a.Model,[],{},{ATTRS:{engine:{value:"wysiwyg"},source:{value:""},html:{value:""},textAttributes:{value:[]}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-content-base","@sqs/layout-engine/event-registrar","widget","widget-child"]})},612581:function(c,b,t){"use strict";var l=t(948265),d=t.n(l);YUI.add("@sqs/layout-engine/block-content-image-editor-base",function(o){o.namespace("SQS.LayoutEngine.BlockContent"),o.SQS.LayoutEngine.BlockContent.ImageEditorBase=o.Base.create("ImageEditor",o.Plugin.Base,[],{initializer:function(){var e=this.get("host"),a=this._model=e.get("model");this._bb=e.get("boundingBox"),this._cb=e.get("contentBox"),a.on("aspectRatioChange",e.blur,this),a.after(["imageIdChange","isBase64Change"],this.syncUploadUI,this),this.syncUploadUI()},syncUploadUI:function(){console.info("ImageEditorBase: No syncUploadUI method provided")},jobUpdate:function(e){e.status==d().SUCCESS&&this._model.setAttrs({isBase64:!1,processing:!1})},uploadProgress:function(e){var a=e.lowresImage,r=e.itemRepresentation;if(e.failed){this._updateModel({completed:null,processing:!1,baseAssetUrl:null,isBase64:!1,imageId:null});return}var s={completed:e.completed||0};if(o.Lang.isNumber(e.completed)&&e.completed==1&&(s.processing=!0),o.Lang.isValue(a)){this._bb.toggleClass("uploading",e.completed!==1);var n=e.dimensions.split("x"),i=parseInt(n[0],10),u=parseInt(n[1],10);s.isBase64=!0,s.baseAssetUrl=a,s.completed=0,s.dimensions={width:i,height:u},s.aspectRatio=u/i*100}o.Lang.isObject(r)&&(s.baseAssetUrl=r.assetUrl,s.imageId=r.id),this._updateModel(s)},_updateModel:function(e){this._model.setAttrs(e),this.get("host").get("parent")&&this.get("host").get("parent").get("isNewBlock")&&this.get("host").get("parent").set("isNewBlock",!1)},destructor:function(){this._model=null,this._cb=null,this._bb=null}},{NS:"contentEditor",ATTRS:{editing:{value:!1},tabIndex:{value:0},focused:{value:!1,readOnly:!0}}})},"2.0",{requires:["node","base","plugin"]})},887945:function(c,b,t){"use strict";var l=t(174161),d=t(594127),o=t(714487),e=t(629266),a=t.n(e),r=t(497147),s=t(723796),n=t(190602),i=t(689700),u=t(233488),h=t.n(u),g=t(970671),p=i.fE,f=i.iM,m=i._x,_=s.Em.createLogger("block-content/image","orange",!1),v=s.Em.createWarningLogger("block-content/image"),E=s.Em.createGroup("%c[block-content/image]","orange",[],!1),S=[a().QUEUED,a().PROCESSING],y=[a().ERROR,a().DOWNLOAD_ERROR,a().ERROR_TOO_LARGE,a().ERROR_FILE_NOT_FOUND,a().ERROR_UNSUPPORTED_IMAGE_TYPE];YUI.add("@sqs/layout-engine/block-content-image",function(C){C.namespace("SQS.LayoutEngine.BlockContent");var O=C.SQS.LayoutEngine.BlockContent.Image=C.Base.create("image",C.Widget,[C.WidgetChild,C.SQS.LayoutEngine.BlockContent.Base],{destructor:function(){this.emptyImageNode(),this.destroyUploader(),this._overlay&&(this._overlay.remove(!0),this._editingChangeHandle.detach())},render:function(){_("ImageBlockContent - render");var A=this.get("model");if(!A.isEmpty()&&!A.isImageDataLoaded()){var I=C.Lang.isValue(this.get("parent"));if(I){var D=C.bind(function(){this.get("parent").set("stack",null)},this),T=this.get("parent").get("stack");T&&(D=T.add(D))}_("ImageBlockContent - Loading image data"),A.loadImageData().then(C.bind(function(){_("ImageBlockContent - Loaded image data: ",{baseAssetUrl:A.get("baseAssetUrl"),dimensions:A.get("dimensions")}),C.Lang.isValue(this.get("boundingBox"))&&C.Lang.isValue(this.get("boundingBox").getDOMNode())&&this.syncUI(),I&&D(),this.fire("image-loaded")},this))}O.superclass.render.apply(this,arguments)},syncUI:function(){if(!this.get("contentBox").getDOMNode()){_("ImageBlockContent - image contentBox no longer present to render into");return}E.group("syncUI"),this._syncImageRendering(),this._syncAspectRatio(),this._syncStretch(),this._adjustImage();var A=this.get("model"),I=A.get("designLayout")==="fluid",D=A.get("dimensions");if(I&&D){var T=this.get("contentBox").getDOMNode(),B=A.get("stretch"),N=A.get("imageMask"),P=A.get("imageCropType"),x=P===h().MASK,R=r.Z[N],w={width:100,height:R},k=x?w:D;f(T),p(T,k,B)}E.groupEnd()},bindUI:function(){var A=this.get("model");A.after(["imageIdChange","completedChange","errorChange","processingChange"],this.syncUI,this),A.after("baseAssetUrlChange",function(){this._loadImage({forceImageUpdate:!0})},this),A.after(["dimensionsChange","imageCropTypeChange","stretchChange"],function(I){I.silent||this._syncStretch()},this),A.after(["aspectRatioChange","dimensionsChange","stretchChange"],function(I){I.silent||this._syncAspectRatio()},this),A.after(["focalPointChange","aspectRatioChange","dimensionsChange","stretchChange"],function(D){D.silent||(this._syncImageRendering(),this._adjustImage())},this),C.Lang.isValue(A.get("vSize"))&&A.after("vSizeChange",function(I){if(!I.silent){var D=this.get("contentBox").get("offsetHeight"),T=this.get("contentBox").get("offsetWidth"),B=D/T*100;_("ImageBlockContent - vSizeChange - recalculating aspectRatio",B),A.set("aspectRatio",B)}},this)},emptyImageNode:function(){this.imgNode&&(this.imgNode.remove(!0),this.imgNode=null)},showEmptyImageState:function(){var A=this.get("model"),I=this.get("boundingBox");I.addClass("sqs-empty"),this.emptyImageNode(),A.get("error")&&(_("ImageBlockContent - Image emptied with error",A.get("error")),this.set("editing",!1),this.errorNode||(I.addClass("sqs-error"),this.errorNode=this.get("contentBox").appendChild('<div class="error-wrapper"><div class="message"></div><a href="#" class="clear">Clear</a></div>'),this.errorNode.one("a.clear").on("click",function(D){D.halt(),this.errorNode.remove(),this.errorNode=null,this.set("editing",!0),A.setAttrs({error:null,imageId:null})},this)),this.errorNode.one(".message").setContent(A.get("error")))},createUploader:function(){var A=this.get("model"),I=this.get("contentBox").getDOMNode(),D=I.id;this.destroyUploader();var T=l.createElement(g.Z,null,l.createElement(n.Z,{fieldId:D,handleChange:function(N){A.set("imageId",N.id)}}));this.reactRoot=(0,d.createRoot)(this.get("contentBox").getDOMNode()),this.reactRoot.render(T);var B=A.get("designLayout")==="fluid";B&&m(I)},destroyUploader:function(){if(this.reactRoot){this.reactRoot.unmount(),this.reactRoot=null,this.imgNode&&!this.imgNode.getDOMNode().isConnected&&(this.imgNode=null);var A=this.get("model"),I=this.get("contentBox");A.isEmpty()||(this._overlay=C.Node.create('<div class="sqs-editing-overlay"></div>'),I.append(this._overlay),this._editingChangeHandle=A.on("editingChange",function(D){D.newVal?this._overlay.hide():this._overlay.show()},this))}},_imageStateIsEmpty:function(){var A=this.get("model");return A.isEmpty()||A.get("error")||!A.get("isBase64")&&A.get("processing")},_syncImageRendering:function(){_("ImageBlockContent - _syncImageRendering");var A=this.get("boundingBox");if(A.getDOMNode()){if(this._imageStateIsEmpty()){this.showEmptyImageState();return}if(this.errorNode&&(this.errorNode.remove(),this.errorNode=null,A.removeClass("sqs-error")),!this.imgNode){this.imgNode=C.Node.create("<img>"),this.imgNode.setAttribute("crossOrigin","Anonymous"),this.imgNode.on("load",this._fireContentUpdate,this);var I=this.get("contentBox");I.append(this.imgNode)}A.removeClass("sqs-empty")}},_syncAspectRatio:function(A){var I=this.get("model"),D=I.get("aspectRatio"),T=I.get("dimensions"),B=this.get("contentBox"),N=this.get("contentBox").getDOMNode(),P=I.get("designLayout")==="fluid";if(!(!N||P)){var x=I.get("vSize");if(C.Lang.isValue(x)){_("ImageBlockContent - Applying vSize value",x,"(pixel value: "+x*24+")"),B.setStyle("paddingBottom",x*24);return}D||(_("ImageBlockContent - Image not loaded or missing aspect ratio, calculating..."),T?(_("ImageBlockContent - Applying evaluated aspectRatio (from dimensions)",D),D=T.height/T.width*100):(_("ImageBlockContent - Evaluating `aspectRatio` to 16:9 (no dimensions found)"),D=56.25)),D=parseFloat(D)+"%",_("ImageBlockContent - Applying aspectRatio",D),B.setStyle("paddingBottom",D)}},_syncStretch:function(){var A=this.get("boundingBox"),I=this.get("model"),D=I.get("stretch"),T=I.get("dimensions"),B=!D&&C.Lang.isValue(T),N=I.get("designLayout")==="fluid";if(A.getDOMNode()){var P=this.get("contentBox").getDOMNode();if(N){var x=this._getFluidImageObjectFit(),R=P.querySelector("img");R&&(R.style.objectFit=x);return}A.setStyle("maxWidth",B?T.width:null),A.toggleClass("stretch",B)}},_getFluidImageObjectFit:function(){var A=this.get("model"),I=A.get("stretch"),D=A.get("imageCropType"),T=D===h().MASK,B=I||T,N=B?"cover":"contain";return N},_attemptToEvaluateDimensions:function(){var A=this.get("model");if(C.Lang.isValue(A.get("baseAssetUrl"))){_("ImageBlockContent - Dimensions missing, attempting to evaluate dimensions in the browser");var I=new Image;I.addEventListener("load",C.bind(function(){_("ImageBlockContent - Image dimensions after load",{width:I.width,height:I.height}),A.set("dimensions",{width:I.width,height:I.height}),this.syncUI()},this)),I.src=A.get("baseAssetUrl")}},_adjustImage:function(){if(!this.imgNode){v("_adjustImage called without an imgNode in existence.");return}_("ImageBlockContent - _adjustImage");var A=this.get("model"),I=this.get("boundingBox");if(!(A.isEmpty()||!A.isImageDataLoaded()||!I.getDOMNode())){var D=A.get("dimensions");if(!C.Lang.isValue(D)){this._attemptToEvaluateDimensions();return}I.addClass("sqs-intrinsic intrinsic"),this._loadImage({forceImageUpdate:!1})}},_loadImage:function(A){A=A||{};var I=this.get("model"),D=I.get("focalPoint").split(","),T={x:parseFloat(D[0]),y:parseFloat(D[1])},B={focalPoint:T,mode:"fill",fixedRatio:!0,stretch:I.get("stretch"),useAdvancedPositioning:!0,forceImageUpdate:A.forceImageUpdate},N=I.get("designLayout")==="fluid";N&&(B=this._buildFluidImageData(B)),I.get("isBase64")||(B.source=I.get("baseAssetUrl")),I.get("dimensions")&&(B.dimensions=I.get("dimensions")),_("ImageBlockContent - Image adjusted, triggering load with ImageLoader",B),this.imgNode&&ImageLoader.load(this.imgNode,B)},_buildFluidImageData:function(A){var I=JSON.parse(JSON.stringify(A));return I.mode=this._getFluidImageObjectFit(),I.fixedRatio=!1,I.stretch=!0,I},_fireContentUpdate:function(){_("ImageBlockContent - _fireContentUpdate"),this.get("parent")&&this.get("parent").fire("widget:contentUpdate")}},{CSS_PREFIX:"sqs-image",ATTRS:{model:{writeOnce:!0,setter:function(A){if(C.Lang.isObject(A))return new C.SQS.LayoutEngine.ContentModel.Image(A);if(C.instanceOf(A,C.SQS.LayoutEngine.ContentModel.Image))return A},value:{},lazyAdd:!1},tabIndex:{value:null},editor:{valueFn:function(){console.error("Must implement Image Editor")}}}});C.namespace("SQS.LayoutEngine.ContentModel"),C.SQS.LayoutEngine.ContentModel.Image=C.Base.create("ImageContentModel",C.Model,[],{initializer:function(){this.setImageContentItem({id:this.get("imageId"),collectionId:this.get("collectionId")}),this.after("imageIdChange",function(A){if(_("ImageContentModel - imageIdChange",{newId:A.newVal}),!A.newVal){this.set("dimensions",null),this.set("processing",null),this.set("error",null),this.set("baseAssetUrl",null),this.set("aspectRatio",null),this.set("stretch",!1),this.set("licensedAssetPreview",null),this.set("licensedAssetId",null);return}this.setImageContentItem({id:A.newVal,collectionId:this.get("collectionId")})},this)},setImageContentItem:function(A){var I=C.SQS.LayoutEngine.ContentItem.getCtor();return this._imageContentItem=new I(A),this._imageContentItem.after("mediaProcessingStateChange",function(D){D.newVal===a().READY&&(_("ImageContentModel - image MediaProcessingState.READY"),this.loadImageData())},this),this._imageContentItem},getImageContentItemField:function(A){return this._imageContentItem.get(A)},setItemData:function(A){this._imageContentItem.setAttrs(A),C.Lang.isString(A.id)&&this.set("imageId",A.id)},isEmpty:function(){return!this.get("imageId")&&!this.get("isBase64")},isImageDataLoaded:function(){var A=this.get("baseAssetUrl");return C.Lang.isValue(A)},loadImageData:function(){var I=!C.Lang.isValue(this._itemPromise)||this._itemPromise.getStatus()!=="pending";return I?(_("ImageContentModel - loadImageData"),this._itemPromise=new C.Promise(C.bind(function(D,T){this._imageContentItem.load(C.bind(function(B){E.group("ImageContentModel - content item loaded",this._imageContentItem),B?B.notFound?this.set("error",(0,o.t)("The requested image could not be found.",null,{project:"scripts-v6.layout-engine"})):this.set("error",B.error):this.applyAttrsFromContentItem(this._imageContentItem),E.groupEnd(),D(),this._itemPromise=null},this))},this)),this._itemPromise):this._itemPromise},applyAttrsFromContentItem:function(A){E.group("applyAttrsFromContentItem. Ensure no syncUIs!");var I=A.get("mediaProcessingState");if(y.indexOf(I)!==-1)this.set("error",(0,o.t)("There was an error while processing the image.",null,{project:"scripts-v6.layout-engine"}));else if(S.indexOf(I)!==-1)this.set("processing",!0);else{this.set("licensedAssetPreview",A.get("licensedAssetPreview")),this.set("licensedAssetId",A.get("licensedAssetId")),this.set("processing",!1),this.set("dimensions",A.get("originalSize"),{silent:!0}),this.set("focalPoint",A.get("mediaFocalPoint"),{silent:!0}),this.set("filename",A.get("filename")),this.set("baseAssetUrl",A.get("assetUrl"));var D=this.get("dimensions");if(!C.Lang.isValue(this.get("aspectRatio"))&&C.Lang.isValue(D)){var T=D.height/D.width*100;this.set("aspectRatio",T,{silent:!0})}}E.groupEnd()},saveFocalPoint:function(){this._imageContentItem.set("mediaFocalPoint",this.get("focalPoint")),this._imageContentItem.save({fields:["mediaFocalPoint"]})},reset:function(){this.set("aspectRatio",void 0),this.set("baseAssetUrl",void 0)}},{ATTRS:{imageId:{},isBase64:{},baseAssetUrl:{value:null},dimensions:{setter:function(A){if(C.Lang.isString(A)){var I=A.split("x");return{width:I[0],height:I[1]}}else if(C.Lang.isValue(A))return A}},aspectRatio:{setter:function(A){return A=parseFloat(A),C.Lang.isNumber(A)?A:null}},focalPoint:{value:"0.5, 0.5",setter:function(A){return C.Lang.isObject(A)?A.x+","+A.y:A||"0.5, 0.5"}},scale:{value:"cover",setter:function(A){return A==="cover"||A==="contain"?A:"cover"}},filename:{value:null,validator:C.Squarespace.AttrValidators.isNullOrString},licensedAssetPreview:{value:null},licensedAssetId:{value:null,validator:C.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["model","widget","widget-child","promise","@sqs/layout-engine/content-item-content-item","@sqs/layout-engine/block-content-base"]})},97075:function(){YUI.add("@sqs/layout-engine/block-label",function(c){var b=c.namespace("SQS.LayoutEngine.Block").Label=c.Base.create("blockLabel",c.Widget,[c.WidgetChild],{renderUI:function(){b.superclass.renderUI.call(this),this.get("contentBox").empty(),this.get("contentBox").setHTML(this.get("label"))}},{CSS_PREFIX:"sqs-blocklabel",NS:"blockLabel",ATTRS:{label:{value:null}}})},"1.0",{requires:["base","widget","widget-child"]})},995525:function(){YUI.add("@sqs/layout-engine/block-model-gallery",function(c){c.namespace("SQS.LayoutEngine.BlockModel");var b=c.SQS.LayoutEngine.BlockModel.Gallery=c.Base.create("GalleryBlockModel",c.Model,[],{toJSON:function(){var t=b.superclass.toJSON.call(this);return delete t.transientGallery,t}},{ATTRS:{"active-alignment":{},"aspect-ratio":{},aspectRatio:{},"auto-crop":{value:!0},autoplay:{},"autoplay-duration":{},blockAnimation:{value:"none"},collectionId:{},controls:{},design:{value:"grid"},existingGalleryId:{},lightbox:{},lightboxTheme:{},"max-width":{},"meta-position":{},padding:{},"show-meta":{value:!0},"show-meta-basic":{value:!0},"show-meta-only-title":{value:!1},"show-meta-only-description":{value:!1},"show-meta-on-hover":{},"square-thumbs":{value:!0},"thumbnail-strip-height":{},"thumbnail-strip-margin":{},thumbnails:{},"thumbnails-per-row":{},vSize:{},transientGallery:{setter:function(t){var l=this.get("transientGallery");return c.Lang.isValue(l)&&c.Lang.isFunction(l.destroy)&&l.destroy(),c.instanceOf(t,c.Model)?t:new c.Model(t)},value:{}},transientGalleryId:{getter:function(t){return!c.Lang.isValue(t)&&c.Lang.isValue(this.get("transientGallery"))?this.get("transientGallery").get("id"):t}}}})},"1.0",{requires:["base","model"]})},283306:function(c,b,t){"use strict";var l=t(626818),d=t.n(l),o=t(233488),e=t.n(o),a=t(145280),r=t.n(a),s=t(916661),n=t(108461),i=s.Z.isSevenOne();YUI.add("@sqs/layout-engine/block-model-image",function(u){u.namespace("SQS.LayoutEngine.BlockModel"),u.SQS.LayoutEngine.BlockModel.Image=u.Base.create("ImageBlockModel",u.Model,[],{initializer:function(){var h=this.get("description");h||this.set("description",{html:""}),this._initializedImageId=this.get("imageId"),this.on("imageIdChange",function(p){p.newVal===null&&!this._isInitializedImageId(p.prevVal)&&this._destroyImage(p.prevVal)});var g=this.get("title");g||this.set("title",{engine:"wysiwyg",source:"",html:""})},_isInitializedImageId:function(h){return this._initializedImageId===h},_destroyImage:function(h){var g=u.SQS.LayoutEngine.ContentItem.getCtor();new g({id:h}).destroy({remove:!0})},sync:function(h,g,p){var f=u.SQS.LayoutEngine.ContentItem.getCtor();if((h==="create"||h==="update")&&new f({id:this.get("imageId"),filename:this.get("filename")}).save({fields:["filename"]}),h==="delete"){var m=this.get("imageId");m&&!this._isInitializedImageId(m)&&this._destroyImage(m)}p()},toJSON:function(){return{imageId:this.get("imageId"),linkTo:this.get("linkTo"),newwindow:this.get("newwindow"),imageLink:this.get("imageLink"),buttonText:this.get("buttonText"),lightbox:this.get("lightbox"),lightboxTheme:this.get("lightboxTheme"),combinationAnimation:this.get("combinationAnimation"),individualImageAnimation:this.get("individualImageAnimation"),individualTextAnimation:this.get("individualTextAnimation"),vSize:this.get("vSize"),aspectRatio:this.get("aspectRatio"),layout:this.get("layout"),stretch:this.get("stretch"),description:this.get("description"),floatDir:this.get("floatDir"),hSize:this.get("hSize"),title:this.get("title"),subtitle:this.get("subtitle"),designLayout:this.get("designLayout"),imagePosition:this.get("imagePosition"),mapping:this.get("mapping"),imageCropType:this.get("imageCropType"),imageMask:this.get("imageMask"),borderRadii:this.get("borderRadii"),imageOverlay:this.get("imageOverlay"),imageEffect:this.get("imageEffect")}}},{ATTRS:{layout:{value:"caption-below"},linkTo:{value:""},newwindow:{value:!1},imageLink:{value:"none"},buttonText:{value:""},lightbox:{value:!1},lightboxTheme:{value:"dark"},combinationAnimation:{valueFn:function(){return i?n.Z.SITE_DEFAULT.value:n.Z.NONE.value}},individualImageAnimation:{valueFn:function(){return i?n.Z.SITE_DEFAULT.value:n.Z.NONE.value}},individualTextAnimation:{valueFn:function(){return i?n.Z.SITE_DEFAULT.value:n.Z.NONE.value}},stretch:{value:!1},filename:{value:null},mapping:{value:null},description:{setter:function(h){return u.Lang.isString(h)?{engine:"wysiwyg",source:"",html:h}:h},value:{engine:"wysiwyg",source:"",html:""}},aspectRatio:{value:null},title:{setter:function(h){return u.Lang.isString(h)?{engine:"wysiwyg",source:"",html:h}:h},value:{engine:"wysiwyg",source:"",html:""}},subtitle:{setter:function(h){return u.Lang.isString(h)?{engine:"wysiwyg",source:"",html:h}:h},value:{engine:"wysiwyg",source:"",html:""}},designLayout:{value:"inline"},imagePosition:{value:"left"},imageCropType:{value:e().CSS_STYLES},imageMask:{value:d().CIRCLE},borderRadii:{value:{topLeft:{value:0,unit:"px"},topRight:{value:0,unit:"px"},bottomLeft:{value:0,unit:"px"},bottomRight:{value:0,unit:"px"}}},imageOverlay:{value:{enabled:!1,color:{type:"THEME_COLOR"},blendMode:r().NORMAL}},imageEffect:{value:{type:"none"}}}})},"1.0",{requires:["base","model","@sqs/layout-engine/content-item-content-item"]})},203232:function(c,b,t){"use strict";var l=t(526186),d=t(86487),o=t.n(d),e=t(86851),a=t(112792),r=t.n(a),s=t(449603),n=t.n(s),i=t(971676),u=t.n(i),h={},g=function(v,E){var S=function(y){var C={},O=[];return r()(y,function(A,I,D){if(A.type==="array"){n()(A.cycles,function(){O.push(S(D[I].items)),C[I]=O});return}if(A.type==="object")return I?(C[I]=S(D[I].properties),C):(C=S(D[I].properties),C);C[I]=E||null}),C};return S(v.properties)};h.blockSchemaToYuiAttrs=function(v){if(!v){console.warn("No blockName provided");return}var E=o()[v];if(!E){console.warn("No definition for blockName"+v);return}var S=e.objectUtils.flatten(E.defaultData||{}),y=g(E.schema,{value:null});return Object.keys(S).forEach(function(C){u()(y,C,{value:S[C]})}),y};const p=h;var f=t(916661),m=t(108461),_=f.Z.isSevenOne();YUI.add("@sqs/layout-engine/block-model-quote",function(v){v.namespace("SQS.LayoutEngine.BlockModel"),v.SQS.LayoutEngine.BlockModel.Quote=v.Base.create("QuoteBlockModel",v.Model,[],{},{ATTRS:Object.assign(p.blockSchemaToYuiAttrs("quote"),{blockAnimation:{valueFn:function(){return _?m.Z.SITE_DEFAULT.value:m.Z.NONE.value}}})})},"1.0",{requires:["base","model"]})},564922:function(c,b,t){"use strict";var l=t(976003),d=t.n(l),o=t(660426);YUI.add("@sqs/layout-engine/block-model-video",function(e){e.namespace("SQS.LayoutEngine.BlockModel"),e.SQS.LayoutEngine.BlockModel.Video=e.Base.create("VideoBlockModel",e.Model,[],{toJSON:function(){var a={blockAnimation:this.get("blockAnimation"),layout:this.get("layout"),overlay:this.get("overlay"),description:this.get("description"),hSize:this.get("hSize"),vSize:this.get("vSize"),floatDir:this.get("floatDir"),isOldBlock:this.get("isOldBlock"),settings:this.get("settings")},r=this.get("customThumb");e.Lang.isValue(r)&&(a.customThumb=r.get("id"));var s=this.get("oembed"),n=e.Lang.isObject(s),i=["html","url","width","height","providerName","thumbnailUrl","resolvedBy"];e.Array.forEach(i,function(p){a[p]=n?s[p]:this.get(p)},this);var u=this.get("nativeVideo");e.Lang.isValue(u)&&(a.nativeVideo=u.get("id"),a.resolvedBy="native");var h=this.get("nativeVideoAssetId");h&&(a.nativeVideoAssetId=h);var g=this.get("customThumbAssetId");return g&&(a.customThumbAssetId=g),a}},{ATTRS:{blockAnimation:{value:"none"},customThumb:{setter:function(a){if(e.Lang.isString(a)){var r=e.SQS.LayoutEngine.ContentItem.getCtor();return new r({id:a})}return a}},nativeVideo:{setter:function(a){if(e.Lang.isString(a)){var r=e.SQS.LayoutEngine.ContentItem.getCtor();return new r({id:a})}return a}},nativeVideoAssetId:{value:null},customThumbAssetId:{value:null},oembed:{},layout:{value:"caption-hidden"},overlay:{value:!1},description:{value:{}},isOldBlock:{value:!0},settings:{getter:function(a){var r={muted:!1,autoPlay:!1,loop:!1,controls:o.Vo.Full};return d()(r,a)?void 0:a}}}})},"1.0",{requires:["base","model","@sqs/layout-engine/content-item-content-item"]})},243066:function(c,b,t){"use strict";var l=t(714487);YUI.add("@sqs/layout-engine/block-search",function(d){d.namespace("SQS.LayoutEngine.Layout");var o=d.SQS.LayoutEngine.Layout.BlockSearch=d.Base.create("search",d.Widget,[d.WidgetChild,d.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(){this.publish("clear")},renderUI:function(){o.superclass.renderUI.call(this),this.get("contentBox").append('<input type="text">'),this.get("contentBox").append('<div class="btn-clear hidden">Clear</div>'),this._searchField=this.get("contentBox").one("input[type]"),this._searchField.setAttribute("autocomplete","off"),this._searchField.setAttribute("data-test",this.get("testAttribute")),this._searchField.setAttribute("name",this.get("name")),this._searchField.setAttribute("placeholder",this.get("placeHolderText"))},bindUI:function(){o.superclass.bindUI.call(this),this.after("dataChange",this._afterDataChange),this._searchField.after("valuechange",this._afterValueChange,this),this._searchField.on("click",function(e){e.halt()}),this._searchField.after("keyup",function(e){e.keyCode===13?(d.SQS.LayoutEngine.Events.fire("layout-engine:block-menu-search-query-enter",{query:this.get("data")}),this.fire("submit")):e.keyCode===27?e.halt():this.fire("keyup",e)},this),this._registerEvent(this.get("contentBox").delegate("click",function(){this.fire("clear")},".btn-clear",this)),this.on("clear",this.clearSearch,this,!0),this.after("dataChange",this._checkForEmptySearch)},clearSearch:function(e){this.set("data",""),e&&this.focus()},focus:function(){this._searchField.focus()},_afterValueChange:function(e){e.dataSync||this.set("data",e.newVal,{dataSync:!0})},_afterDataChange:function(e){e.dataSync||this._searchField.set("value",e.newVal||"",{dataSync:!0})},_checkForEmptySearch:function(e){this.get("contentBox").one(".btn-clear").toggleClass("hidden",e.newVal==="")}},{CSS_PREFIX:"sqs-search",ATTRS:{testAttribute:{value:"search"},placeHolderText:{value:(0,l.t)("Search Content Blocks",null,{project:"scripts-v6.layout-engine"})},name:{value:"search"}}})},"1.0",{requires:["base","widget","widget-child","@sqs/layout-engine/event-registrar","@sqs/layout-engine/events"]})},261974:function(c,b,t){"use strict";var l=t(714487),d=t(784874),o=t(337061),e=t(897820),a=t(414998),r=t(929698),s=t(104495),n=t(120497),i=(0,n.Z)(),u=!1,h=function(){};YUI.add("@sqs/layout-engine/block-base",function(g){g.namespace("SQS.LayoutEngine.Block"),g.SQS.LayoutEngine.Block.Base=g.Base.create("block-base",g.Widget,[],{initializer:function(f){(!f||!f.model)&&this._setDefaultContent(),g.before(this._renderUIBlock,this,"renderUI"),g.after(this._bindUIBlock,this,"bindUI"),g.after(this._syncUIBlock,this,"syncUI"),this.publish("resized",{emitFacade:!0,defaultFn:this._updateBlockSizing}),this.publish("blockModelChange",{emitFacade:!0}),this.envInit()},envInit:function(){},_setDefaultContent:function(){var f=this.get("defaultContentModel");g.Lang.isValue(f)&&this.get("model").setAttrs(f)},_renderUIBlock:function(){this.get("boundingBox").addClass("sqs-block "+this.get("classNames")),this.get("contentBox").addClass("sqs-block-content"),this.get("boundingBox").setAttribute("id","block-"+this.get("id"));var f=[d.Z.BUTTON,d.Z.FORM];f.includes(this.get("type"))&&d.Z[this.get("type")]&&this.get("boundingBox").setAttribute("data-sqsp-block",d.Z[this.get("type")].toLowerCase()),this._addSizeAndFloatClasses()},_bindUIBlock:function(){this.get("model").after(["*:change","change"],this._fireModelChange,this),this.after("editableChange",this.syncEditable,this),this.after("visibleChange",this.syncVisible,this)},_syncUIBlock:function(){this.get("editable")&&this.syncEditable(),this.syncVisible()},_sizeAttrChanged:g.SQS.LayoutEngine.Block.Utils.getWhitelistingFn(["floatDir","hSize","vSize","dimensions","aspectRatio"]),_fireModelChange:function(f){this._sizeAttrChanged(f.changed)&&this.fire("resized"),this.fire("blockModelChange",{blockType:this.get("type"),changed:f.changed})},_bindDOM:h,syncEditable:function(){var f=this.get("editor");if(!f){console.warn("[le] No Editor configured for "+this.get("blockTypeName")+" block");return}var m=this.get("editable");m?this.hasPlugin(f.NS)?u&&console.log("[le] There is no valid editor plugin for this block",this):(u&&console.log("[le] Plugging in a new editor instance for block",this),this.plug(f,this.get("editorConfig"))):this.hasPlugin(f.NS)&&(u&&console.log("[le] Unplugging editor for block",this),this.unplug(f.NS))},syncVisible:function(){this.get("boundingBox").toggleClass("sqs-block-hidden",!this.get("visible"))},checkBlockInView:function(){if(i){for(var f=this.get("boundingBox").getDOMNode(),m=0,_=f.offsetHeight,v=f;v;)m+=v.offsetTop,v=v.offsetParent;return m-=g.config.win.scrollY,m+_>=0&&m<=g.config.win.innerHeight}var E=this.get("boundingBox"),S=E.getDOMNode().getBoundingClientRect(),y=S.top,C=S.bottom;return C>=0&&y<=g.config.win.innerHeight},_updateBlockSizing:function(){var f=this.get("model");this._removeSizeAndFloatClasses(),this._addSizeAndFloatClasses(),!f.get("floatDir")&&g.Lang.isValue(f.get("hSize"))&&f.set("hSize",null)},_removeSizeAndFloatClasses:function(){var f=this.get("boundingBox"),m=/(?:\s|^)(sqs-col-\d+?|sqs-float-\w+?|vsize-\d+?)(?=\s|$)/g;f.set("className",f.get("className").replace(m,""))},_addSizeAndFloatClasses:function(){var f=this.get("boundingBox"),m=this.get("model"),_=m.get("floatDir"),v=m.get("hSize"),E=m.get("vSize");_&&v&&f.addClass("sqs-float-"+_+" sqs-col-"+v),E&&f.addClass("vsize-"+E)},inPromotedLayout:function(){var f=this.get("contentBox");return g.Lang.isValue(f.ancestor('[data-type="promoted-block"]',!1,function(m){return m.hasClass("sqs-layout")}))},toJSON:function(){var f={type:this.get("type"),id:this.get("id"),value:this.get("model").toJSON()};return delete f.value.promoted,f},getEditorOnlyValues:function(){return null},queueForDestruction:function(f){f=f||{},this.hide(),this.get("boundingBox").addClass("sqs-destroyme"),f.coalescing||g.SQS.LayoutEngine.Events.fire("layout-engine:delete-block",this)},removeBlock:function(){var f=this.get("boundingBox");f.ancestor(".sqs-block-remover")&&f.unwrap(),this.queueForDestruction();var m=this.get("boundingBox").ancestor(".sqs-layout"),_=this.get("editController");_.cleanGrids(m),_.alignInsertPoints(m)},isEmpty:function(){return!1},destructor:function(){var f=this.get("id")+"|*";g.Global.detach(f),g.detach(f),this.unplug(),this.get("boundingBox").purge(!0),(0,o.GE)(e.pq(this.get("id")))},getGuid:function(){var f=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return f()+f()+f()+f()+f()},getProperty:function(f){for(var m=this.constructor,_=this.constructor[f];g.Lang.isUndefined(_)&&m.superclass;){m=m.superclass.constructor;if(g.Lang.isUndefined(m))break;_=m[f]}return _}},{THROTTLE_DATACHANGE_TIME_MS:1e4,MODEL:g.Model,ATTRS:{blockTypeName:{valueFn:function(){return this.name.split("block-")[1].replace(/-/g,"_").toUpperCase()}},type:{valueFn:function(){return d.Z[this.get("blockTypeName")]}},id:{getter:function(f){var m=f;return g.Lang.isValue(m)||(m=this.getGuid(),this.set("id",m)),m}},model:{writeOnce:!0,lazyAdd:!1,value:{},setter:function(f){return g.instanceOf(f,g.Model)?f:new(this.getProperty("MODEL"))(f||{})}},classNames:{valueFn:function(){return(0,r.CO)(this.get("type"))}},floatDir:{value:null},hSize:{value:null},vSize:{},tabIndex:{value:null},focused:{setter:function(f){return this.get("editable")?f:!1}},editable:{value:!1},includeEditor:{value:!0},editController:{writeOnce:!0},editor:{readOnly:!0,valueFn:function(){return g.SQS.LayoutEngine.Block.Editor.Base}},editMode:{writeOnce:!0,validator:function(f){return f in s.Z}},editOnStart:{value:!1,validator:g.Lang.isBoolean},mobileEditor:{readOnly:!0,value:null},editorConfig:{value:null},isWidgetParent:{readOnly:!0,value:!1},isNewBlock:{value:!1},defaultContentModel:{},floatable:{value:!0},lockedLayout:{valueFn:function(){var f=this.get("boundingBox"),m=g.Lang.isValue(f)?f.ancestor(".sqs-layout"):null;return g.Lang.isValue(m)&&m.hasClass("sqs-locked-layout")}},promoted:{value:!1,validator:g.Lang.isBoolean},blockName:{valueFn:function(){return a.A[this.get("type")]}},blockPositionData:{valueFn:function(){var f=g.one(g.config.doc.body),m=this.get("boundingBox"),_={body:f,boundBox:m};return _}},strings:{value:{promoteAction:(0,l.t)("Promote this block",null,{project:"scripts-v6.layout-engine"}),unpromoteAction:(0,l.t)("Unpromote this block",null,{project:"scripts-v6.layout-engine"})}}}});var p=g.SQS.LayoutEngine.Block.ParentBase=g.Base.create("block-parent-base",g.SQS.LayoutEngine.Block.Base,[g.WidgetParent],{syncEditable:function(){p.superclass.syncEditable.call(this);var f=this.get("editable");this.each(function(m){m.set("editable",f)},this)},toJSON:function(){return p.superclass.toJSON.apply(this,arguments)}},{ATTRS:{editor:{readOnly:!0,value:null},isWidgetParent:{value:!0},multiple:{value:!0}}})},"1.0",{requires:["base","event","model","@sqs/layout-engine/block-editor-base","@sqs/layout-engine/layout-block-focus-handler","@sqs/layout-engine/block-utils","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/events","widget-parent","widget"]})},426566:function(c,b,t){"use strict";var l=t(210750),d=t.n(l),o=t(537807),e=t(276860);YUI.add("@sqs/layout-engine/block-model-csr-base",function(a){a.namespace("SQS.LayoutEngine.Block"),a.SQS.LayoutEngine.Block.ModelCsrBase=a.Base.create("block-csr",a.SQS.LayoutEngine.Block.Base,[],{initializer:function(){this.previousBlockValue=this.get("model").toJSON()},renderUI:function(){this._renderBlock()},bindUI:function(){this.debouncedRender=d()(function(s){this._renderBlock(s)},this.get("contentRefreshRate"),!0,!0),this.get("model").after("change",this.debouncedRender,this)},_renderSuccess:function(s){var n=this.get("contentBox");n.empty(),s.html instanceof HTMLCollection&&s.html.length>1?Array.from(s.html).forEach(function(i){n.appendChild(i)}):n.insert(s.html)},_renderBlock:function(s){this._renderTemplate().then((function(n){var i=this.get("contentBox");if(i.getDOMNode()!==null){this._renderSuccess({html:n}),this.fire("widget:contentUpdate");var u=this.get("model").toJSON();(0,e.Kv)(u,this.previousBlockValue)||this.fire("block:renderedAfterDataChange"),this.previousBlockValue=u}}).bind(this))},_renderTemplate:function(){var r=this.toJSON();return(0,o.A1)({type:r.type,value:r.value,id:r.id,containerStyles:r.containerStyles})},destructor:function(){this.debouncedRender&&this.debouncedRender.cancel()}},{CSS_PREFIX:"sqs-block-csr",MODEL:a.Model,ATTRS:{contentRefreshRate:{value:200}}})},"1.0",{requires:["base","model","node","@sqs/layout-engine/block-base"]})},272798:function(c,b,t){"use strict";var l=t(352635),d=t(260175),o=t(84687),e=t(337061),a=t(897820),r=t(938077),s=t(784874),n=t(472575),i=t(511063),u=t(981721),h=a.D7,g=a.is;YUI.add("@sqs/layout-engine/block-editor-base",function(p){var f=function(){};p.namespace("SQS.LayoutEngine.Block.Editor"),p.SQS.LayoutEngine.Block.Editor.Base=p.Base.create("blockEditorBase",p.Plugin.Base,[p.SQS.LayoutEngine.Mixins.EventRegistrar],{_syncEditableButtons:f,_handleBlockFocusChange:f,beforeLayoutDrag:f,afterLayoutDrag:f,envInit:f,initializer:function(){var m=this.get("host");this._model=m.get("model"),this._bb=m.get("boundingBox"),this._cb=m.get("contentBox"),this.editingEventListeners=[],this._createEditingOverlay(),this._createEditingOutline(),this._createResizingOutline(),this._createLabel(),this._syncEditableButtons(),this._bindEvents(),this._executeOrBindPlugInsertPoint(),this.once("initializedChange",this._onceInitializedChange,this),this.envInit()},_bindEvents:function(){this._setEditingEvent(this.get("editingEvent")),this.on("editingButtonsChange",this._syncEditableButtons,this),this.afterHostEvent("dropped",this._afterDropped,this),this.after("editingChange",this._afterEditingChange,this),this.on("editingEventChange",this._onEditingEventChange,this),this.after("dropZoneLockedChange",this._afterDropZoneLockedChange,this),this.after(["resizableChange","resizeNodeChange"],this._syncResizable,this),(0,i.Z)()&&(this.detachCurrentBlockIdListener=(0,e.gH)(r.MIi,(function(m){var _=this.get("host").get("id");this.set("editing",_===m)}).bind(this))),this.detachFocusedBlockIdListener=(0,e.gH)(r.Ouw,(function(m,_){var v=this.get("host").get("id");m===v?this._syncResizable():_===v&&this.closeEditor()}).bind(this)),this._handles.push(this._model.after("blockEditor|floatDirChange",this._floatChange,this)),this._handles.push(this.get("host").get("boundingBox").on("gesturemovestart",function(m){(0,o.Z)(".yui3-resize-handle",!0)&&m.stopPropagation()})),this.on("remove",this.removeBlock,this),this.configWebsiteUnsubscribe=(0,n.QA)(n.LN,(function(){this.closeEditor()}).bind(this))},_onceInitializedChange:function(){this._initFocused(),this._syncResizable(),this._initEditable(),this._initLockedLayout(),this._initLayoutDrop()},_initLockedLayout:function(){var m=this.get("host").get("boundingBox");m.toggleClass("sqs-block-locked-layout",this.get("lockedLayout"))},_createLabel:function(){var m=this.get("blockLabel");if(m){var _=m.generateID();this._bb.setAttribute("aria-labelledby",_),m.appendTo(this._bb)}},_createEditingOverlay:function(){var m=this.get("editingOverlay");m&&m.appendTo(this._bb)},_removeEditingOverlay:function(){var m=this.get("editingOverlay");p.Lang.isValue(m)&&m.remove(!0)},_createEditingOutline:function(){var m="sqs-block-outline",_=this.get("host").get("editorSettings");_&&_.isGlobal&&(m+=" sqs-global-block-outline"),p.Node.create('<div class="'+m+'"></div>').appendTo(this._bb)},_createResizingOutline:function(){p.Node.create('<div class="sqs-block-resizing-outline"><div class="sqs-block-resizing-inner"></div></div>').appendTo(this._bb)},_executeOrBindPlugInsertPoint:function(){this._layoutHasInsertPoints()&&(this._canPlugInsertPointsNow()?this._plugInsertPoint():(this._handles.push(this.onceAfterHostEvent("renderedChange",function(m){this._canPlugInsertPointsNow()&&this._plugInsertPoint()},this)),this.afterHostEvent("layout-rendered",this._plugInsertPoint,this)))},_canPlugInsertPointsNow:function(){var m=this.get("host"),_=m.get("contentBox");return m.get("rendered")&&!_.ancestor(".sqs-layout-rendering")},_updateModel:function(m){this._model.setAttrs(m),this.get("host").get("isNewBlock")&&this.get("host").set("isNewBlock",!1)},_afterEditingChange:function(m){p.Lang.isValue(this._bb.getDOMNode())&&this._bb.toggleClass("sqs-block-editing",m.newVal)},_initEditable:function(){var m=this.get("host");if(m.get("editable")){this._bb.addClass("sqs-block-editable");var _=this.get("defaultEditingMode"),v=m.get("editOnStart");_&&v&&this.openEditor()}},_initFocused:function(){var m=this.get("host");(m.get("isNewBlock")||m.get("editOnStart"))&&(0,e.GE)(a.lT(m.get("id")))},_syncResizable:function(){var m=this.get("host").get("id")===(0,r.Ouw)((0,e.d6)());this._setBlockResizable(this.get("resizable")&&m)},_hasResizablePlugin:function(){var m=p.SQS.LayoutEngine.Block.Plugin.Resizable,_=this.get("host");return _.hasPlugin(m.NS)},_setBlockResizable:function(m){var _=p.SQS.LayoutEngine.Block.Plugin.Resizable,v=this.get("host"),E=this._hasResizablePlugin();m&&!E?v.plug(_,{resizeNode:this.get("resizeNode"),blockEditor:this}):!m&&E&&v.unplug(_.NS)},cleanBlock:function(){this._syncEditableButtons()},_initLayoutDrop:function(){this.get("lockedLayout")||(this.drop=new p.SQS.LayoutEngine.Layout.Drop({node:this._bb,groups:["blocks"],lock:!!this._model.get("floatDir")}))},_plugInsertPoint:function(){this.get("host").hasPlugin(p.SQS.LayoutEngine.Layout.InsertPoint.NS)||this.get("host").plug(p.SQS.LayoutEngine.Layout.InsertPoint,{layoutNode:this._bb.ancestor(".sqs-layout"),divideSelectors:this.get("selectorsForInsertPoints")})},_layoutHasInsertPoints:function(){return this.get("host").get("editController").get("supportsInsertPoints")&&!this.get("lockedLayout")},_floatChange:function(){this.set("dropZoneLocked",!!this._model.get("floatDir")),this._bb.one(".sqs-helper")&&(this.get("host").get("model").get("floatDir")?this._bb.one(".sqs-helper").show():this._bb.one(".sqs-helper").hide())},_afterDropped:function(m){m.target.blockEditor.syncPromoteOverlay&&m.target.blockEditor.syncPromoteOverlay();var _=this._cb.ancestor(".sqs-layout").all(".sqs-block").getDOMNodes();p.Array.each(_,function(v){var E=p.Widget.getByNode(v);E.set("promoted",this._model.layout.isPromotedBlock(E))},this)},_afterDropZoneLockedChange:function(m){this.drop&&this.drop.set("lock",m.newVal)},_onEditingEventChange:function(m){this._setEditingEvent(m.newVal)},_setEditingEvent:function(m){this.editingEventListeners.length>0&&(p.Array.each(this.editingEventListeners,function(v){v.detach()}),this.editingEventListeners=[]),m&&(p.Lang.isString(m)&&(m=[m]),p.Array.each(m,function(v){var E=this.get("host"),S=E.get("boundingBox").on(v,function(C){if(v==="contextmenu"&&C.halt(),!(C.shiftKey||C.metaKey||C.ctrlKey)){var O=C&&C.target&&(0,o.Z)(C.target,".sqs-layout-insert-point-container",!0);O||((0,u.Ft)()&&C.stopPropagation(),v==="dblclick"&&E.get("type")===s.Z.HTML?E.set("showRteToolbar",!0):this.openEditor())}},this);this.editingEventListeners.push(S)},this))},onEditClicked:function(){this.fire("edit")},openEditor:function(){var m=this.get("host");if(!m.get("isDeprecated")&&m.get("includeEditor")!==!1){(0,i.Z)()||this.set("editing",!0);var _=m.get("id");(0,e.GE)(h(_))}},closeEditor:function(){(0,i.Z)()||this.set("editing",!1),(0,e.GE)(g())},removeBlock:function(m){var _=this.get("host");_.removeBlock(m===!0),(0,e.GE)(a.pq(_.get("id"))),this._model.destroy({remove:!0}),this.destroy()},destructor:function(){this.get("host").detach("blockEditor|*"),this.get("host").get("model").detach("blockEditor|*"),this.detachFocusedBlockIdListener&&this.detachFocusedBlockIdListener(),this.detachCurrentBlockIdListener&&this.detachCurrentBlockIdListener(),this.configWebsiteUnsubscribe&&this.configWebsiteUnsubscribe(),this.editingEventListeners&&(p.Array.each(this.editingEventListeners,function(m){m.detach()}),this.editingEventListeners=null),this.drop&&this.drop.destroy(),this._removeEditingOverlay(),this.get("host").get("boundingBox").removeClass("sqs-block-editable"),this.get("host").get("boundingBox").removeClass("sqs-block-editing"),this.get("host").unplug(p.SQS.LayoutEngine.Layout.InsertPoint),this._setBlockResizable(!1),this._editingButtons&&this._editingButtons.destroy(),this._model=null,this._bb=null,this._cb=null}},{NS:"blockEditor",ATTRS:{editing:{value:!1,setter:function(m){return!!(m&&this.get("host").get("editable"))}},editingOverlay:{valueFn:function(){return null},validator:function(m){return m===null||m instanceof p.Node}},blockLabel:{valueFn:function(){var m=this.get("host");if(m.get("blockName")){var _=m.get("blockName"),v=m.get("editorSettings"),E="sqs-block-label-tag";return v&&v.isGlobal&&(E+=" sqs-global-block-label-tag"),p.Node.create('<span data-test="block-label" class="'+E+'">'+_+"</span>")}return null},validator:function(m){return m===null||m instanceof p.Node}},dropZoneLocked:{value:!1},lockedLayout:{getter:function(){return this.get("host").get("lockedLayout")}},selectorsForInsertPoints:{value:"",validator:p.Lang.isString},minHSize:{value:1,validator:p.Lang.isNumber},resizable:{value:!1},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},resizeDefaultSize:{value:75},resizeSnapToDefaultSize:{value:!0},snapToThreshold:{value:10,validator:p.Lang.isNumber},editingEvent:{value:null,lazyAdd:!1},editingButtons:{value:!1},includeEdit:{value:!0},defaultEditingMode:{value:!1},isMobile:{valueFn:function(){var m=d.i(l.breakpoints)||{};return m.platform==="mobile"}}}})},"1.0",{requires:["base","plugin","@sqs/layout-engine/event-registrar","@sqs/layout-engine/layout-block-focus-handler","@sqs/layout-engine/layout-insert-point-controller","@sqs/layout-engine/block-plugin-resizable","@sqs/layout-engine/layout-drop","@sqs/layout-engine/layout-utils","@sqs/layout-engine/widget-resize"]})},501179:function(c,b,t){"use strict";var l=t(413019),d=t(784874),o=!1;YUI.add("@sqs/layout-engine/block-gallery",function(e){e.namespace("SQS.LayoutEngine.Block");var a=e.SQS.LayoutEngine.Block.Gallery=e.Base.create("block-gallery",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.SQS.LayoutEngine.Block.MixinAspectRatio,e.SQS.LayoutEngine.Block.MixinAnimatedBlock],{renderUI:function(r){o&&(console.group("[le] gallery block - renderUI"),r&&console.log("[le] because model changed",r),console.groupEnd()),this._renderBlock(r)},bindUI:function(){this.get("model").after("change",this.renderUI,this),this.after("resized",this.syncUI,this),this.after("widgetContentChange",this._setWidgetContent,this)},show:function(){a.superclass.show.call(this,arguments),this._setWidgetContent()},_updateGalleryData:function(){var r=this.get("boundingBox"),s=this.get("model").getAttrs();o&&console.log("[le] updating bounding box block data from gallery model",r,s),r.setData("block",s)},_renderBlock:function(r){this._updateGalleryData(),this._isRerenderNeeded(r)?this._queueRenderBlock():this.fire("widget:contentUpdate")},_queueRenderBlock:function(){this.requestingContent=!0,this._pendingRenderRequest&&(e.config.win.clearTimeout(this._pendingRenderRequest),this._pendingRenderRequest=null),this._pendingRenderRequest=e.config.win.setTimeout((function(){a.superclass._renderBlock.call(this,!0)}).bind(this),100)},_renderSuccess:function(r){this.requestingContent=!1,this.set("widgetContent",r.html)},_setWidgetContent:function(){if(this.requestingContent){o&&console.log("[le] gallery - still requestingContent, skip _setWidgetContent");return}var r=this.get("contentBox");if(r.getDOMNode()===null){console.error("[le] gallery - missing contentBox dom node!",this);return}r.empty();var s=e.Node.create(this.get("widgetContent"));r.setHTML(s),this.get("model").get("aspectRatio")&&r.one(".sqs-state-message")&&r.one(".sqs-state-message").wrap("<div></div>"),this._updateAspectRatio(),e.Object.getValue(e,["SQS","Gallery","Manager"])?e.SQS.Gallery.Manager.initializeBlock(this.get("boundingBox")):console.error("[le] gallery - could not initialize the gallery block - yui-gallery manager not found.")},_isRerenderNeeded:function(r){var s=e.Lang.isValue(r)&&e.Object.hasKey(r,"changed");if(!s)return o&&console.log("[le] gallery block - forced rerender"),!0;var n=!e.SQS.LayoutEngine.Block.Utils.checkWhitelist(this.get("modelWhiteList"),r.changed);return n&&o&&console.log("[le] gallery block - non-whitelisted attr was changed, rerender needed",r),n},_shouldGetWidgetRendering:function(r){return(0,l.L8)("deprecated_scriptsle_block_gallery_shouldGetWidgetRendering"),this._isRerenderNeeded(r)}},{ATTRS:{modelWhiteList:{setter:function(r){return e.Lang.isArray(r)?r:e.Lang.isString(r)?[r]:[]},value:["active-alignment","aspectRatio","autoplay","autoplay-duration","lightbox","lightboxTheme","methodOption","padding","thumbnail-strip-height","thumbnail-strip-margin","transientGallery","vSize"]},type:{value:d.Z.GALLERY},vSize:{valueFn:function(){return this.get("model").get("design")==="slider"?10:null}},widgetContent:{value:""}},MODEL:e.SQS.LayoutEngine.BlockModel.Gallery})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-utils","@sqs/layout-engine/block-model-gallery","@sqs/layout-engine/block-mixin-aspect-ratio","@sqs/layout-engine/block-mixin-animated-block","@sqs/yui-gallery/manager"]})},206996:function(c,b,t){"use strict";var l=t(734526);YUI.add("@sqs/layout-engine/block/generic-base",function(d){var o=d.SQS.LayoutEngine.Block.GenericBase=d.Base.create("block-generic-base",d.SQS.LayoutEngine.Block.ModelSyncBase,[d.SQS.LayoutEngine.Mixins.EventRegistrar],{renderUI:function(){o.superclass.renderUI.call(this);var e="sqs-block-"+l.Z.BlockTypeKebab[this.get("type")];this.get("boundingBox").addClass(e),this.get("contentBox").addClass(e+"-content")},bindUI:function(){o.superclass.bindUI.call(this);var e=0;this._registerEvent(this.get("boundingBox").on("click",(function(){Date.now()-e<500&&d.SQS.LayoutEngine.Events.fire("layout-engine:edit-block",{block:this}),e=Date.now()}).bind(this)))}},{CSS_PREFIX:"sqs-schema-block",ATTRS:{isSchemaBlock:{value:!0}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/event-registrar","@sqs/layout-engine/events","@sqs/layout-engine/block-schema-editor-base"]})},864458:function(c,b,t){"use strict";var l=t(784874),d=t(202560);YUI.add("@sqs/layout-engine/block-horizontal-rule",function(o){o.namespace("SQS.LayoutEngine.ContentModel").HorizontalRule=o.Base.create("HorizontalRuleContentModel",o.Model,[],{},{}),o.namespace("SQS.LayoutEngine.Block").HorizontalRule=o.Base.create("block-horizontalrule",o.SQS.LayoutEngine.Block.Base,[],{},{CSS_PREFIX:(0,d.u)(l.Z.HORIZONTAL_RULE),MODEL:o.SQS.LayoutEngine.ContentModel.HorizontalRule,ATTRS:{type:{value:l.Z.HORIZONTAL_RULE}}})},"1.0",{requires:["base","@sqs/layout-engine/block-base"]})},229889:function(c,b,t){"use strict";var l=t(714487),d=t(233488),o=t.n(d),e=t(352635),a=t(260175),r=t(425364),s=t(655191),n=t(784874),i=t(553772),u=t(497147),h=t(223919),g=t(76902),p=t(636485),f=t(337061),m=t(487558),_=t(661614),v=t(989250),E=t(673951),S=t(436715),y=t(689700),C=t(938077),O=t(687808),A=t(202560),I=t(174161),D=t(594127),T=t(419467),B=t(760220);function N(Se){let{isEditable:lt,isHidden:Lt,containerClassName:Pt,onMouseDown:Ce=()=>{},...je}=Se;const{value:Le}=je;return Lt?null:lt?I.createElement("div",{className:Pt,onMouseDown:Ce},I.createElement(B.Z,{...je,variant:"contextual"})):I.createElement("div",{className:Pt,dangerouslySetInnerHTML:{__html:Le},onMouseDown:Ce})}function P(Se,lt){if(lt.has(Se))throw new TypeError("Cannot initialize the same private elements twice on an object")}function x(Se,lt){return lt.get?lt.get.call(Se):lt.value}function R(Se,lt,Lt){if(lt.set)lt.set.call(Se,Lt);else{if(!lt.writable)throw new TypeError("attempted to set read only private field");lt.value=Lt}}function w(Se,lt,Lt){if(!lt.has(Se))throw new TypeError("attempted to "+Lt+" private field on non-instance");return lt.get(Se)}function k(Se,lt){var Lt=w(Se,lt,"get");return x(Se,Lt)}function q(Se,lt,Lt){P(Se,lt),lt.set(Se,Lt)}function F(Se,lt,Lt){var Pt=w(Se,lt,"set");return R(Se,Pt,Lt),Lt}function z(Se,lt,Lt){if(!lt.has(Se))throw new TypeError("attempted to get private field on non-instance");return Lt}function j(Se,lt){P(Se,lt),lt.add(Se)}var X=new WeakMap,J=new WeakMap,Q=new WeakMap,ie=new WeakMap,ce=new WeakMap,pe=new WeakMap,ye=new WeakMap,Ae=new WeakSet;class Je{show(){if(!k(this,X))throw new Error("Called show on a destroyed RichTextEditorWrapper");F(this,J,!1),this.rerender()}hide(){if(!k(this,X))throw new Error("Called hide on a destroyed RichTextEditorWrapper");F(this,J,!0),this.rerender()}rerender(){if(!k(this,X))throw new Error("Called rerender on a destroyed RichTextEditorWrapper");z(this,Ae,ke).call(this,k(this,ie))}update(lt){if(!k(this,X))throw new Error("Called update on a destroyed RichTextEditorWrapper");z(this,Ae,ke).call(this,lt)}updateValue(lt){lt!==k(this,ie).value&&this.update({...k(this,ie),value:lt})}setEditable(lt){F(this,Q,lt),this.rerender()}destroy(){if(k(this,X)){const lt=k(this,X);F(this,X,null),setTimeout(()=>{lt.unmount()},0)}}constructor({mountNode:lt,initialProps:Lt,containerClasses:Pt=[],isEditable:Ce=!0}){j(this,Ae),q(this,X,{writable:!0,value:void 0}),q(this,J,{writable:!0,value:!1}),q(this,Q,{writable:!0,value:!0}),q(this,ie,{writable:!0,value:void 0}),q(this,ce,{writable:!0,value:void 0}),q(this,pe,{writable:!0,value:void 0}),q(this,ye,{writable:!0,value:void 0}),F(this,ce,lt.ownerDocument.createElement("div")),k(this,ce).classList.add(...Pt),lt.appendChild(k(this,ce)),F(this,pe,lt.ownerDocument!==document),F(this,ye,Pt.join(" ")),F(this,X,(0,D.createRoot)(lt)),F(this,ie,(0,T.cloneDeep)(Lt)),F(this,Q,Ce),z(this,Ae,ke).call(this,Lt)}}function ke(Se){if(F(this,ie,Se),!k(this,X))throw new Error("Called render on a destroyed RichTextEditorWrapper");k(this,X).render(I.createElement(N,{...k(this,ie),isHidden:k(this,J),isEditable:k(this,Q),containerClassName:k(this,ye),isCrossFrame:k(this,pe)}))}function Fe(){for(var Se=arguments.length,lt=new Array(Se),Lt=0;Lt<Se;Lt++)lt[Lt]=arguments[Lt];return new Je(...lt)}var Ie=y.fE,ht=y.mU,me=y.S_,Ee={designLayout:"design-layout",imagePosition:"image-position",combinationAnimation:"combination-animation",individualImageAnimation:"individual-animation",individualTextAnimation:"individual-text-animation"};YUI.add("@sqs/layout-engine/block-image",function(Se){var lt=E.qu,Lt=!lt,Pt=["caption-hidden","caption-below","caption-overlay","caption-overlay-hover"];Se.namespace("SQS.LayoutEngine.Block"),Se.SQS.LayoutEngine.Block.Image=Se.Base.create("block-image",Se.SQS.LayoutEngine.Block.ParentBase,[Se.SQS.LayoutEngine.Mixins.EventRegistrar,Se.SQS.LayoutEngine.Block.MixinAnimatedBlock,Se.SQS.LayoutEngine.Block.MixinImageEffect],{initializer:function(Ce){this._debug=!1,this.set("contentItemId",Ce.contentItemId||null),this.set("collectionId",Ce.collectionId||null)},renderUI:function(Ce){var je=this.get("model");this.renderEditableImage(),this.renderEditableCaption(),this._toggleValidCaptionOrientationClass();var Le=this.get("contentBox"),ci=je.get("designLayout"),Jt="design-layout-"+ci+" image-position-"+je.get("imagePosition");Le.addClass(Jt),Le.setAttribute("data-scrolled",!0),this._renderTitles(),this._renderButton(),this.setV2Class(),this._setImageMaskClipPathAndBorderRadii(),ci==="fluid"&&(this._createImageEffectContainer(),this._createImageOverlay())},setV2Class:function(){var Ce=this.get("model"),je=this.get("contentBox"),Le=Ce.get("designLayout");Le&&Le.match(/poster|card|overlap|collage|stack/)?je.addClass("image-block-v2"):je.removeClass("image-block-v2")},_hasMatrixBasedAnimation:function(){var Ce={"slide-up":!0,"tilt-up":!0,"tilt-down":!0,"focus-in":!0},je=this.get("model").get("individualImageAnimation"),Le=this.get("model").get("combinationAnimation");return Ce[je]||Ce[Le]},_createImageOverlay:function(){var Ce=this.get("contentBox"),je=Ce.one(".sqs-image-content"),Le=this.get("model").get("imageOverlay"),ci="position: absolute; z-index: 3; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; pointer-events: none;",Jt=Se.Node.create('<div class="fluidImageOverlay"></div>');if(Jt.setAttribute("style",ci),Le&&Le.enabled){Jt.setStyle("opacity",1),Jt.setStyle("mix-blend-mode",Le.blendMode);var Ft=(0,C.pgi)((0,f.d6)()),ti=(0,O.Rv)(Le.color,Ft);ti&&Jt.setStyle("background-color",ti)}je.appendChild(Jt)},_setImageOverlay:function(){var Ce=this.get("model"),je=this.get("contentBox"),Le=je.one(".fluidImageOverlay");if(Le){var ci=Ce.get("imageOverlay");if(ci&&ci.enabled){Le.setStyle("opacity",1),Le.setStyle("mix-blend-mode",ci.blendMode);var Jt=(0,C.pgi)((0,f.d6)()),Ft=(0,O.Rv)(ci.color,Jt);Le.setStyle("background-color",Ft||null)}else Le.setStyle("opacity",0)}},_setImageMaskClipPathAndBorderRadii:function(){var Ce=this.get("model"),je=Ce.get("imageCropType"),Le=Ce.get("imageMask"),ci=Ce.get("borderRadii"),Jt=this.get("contentBox"),Ft=Jt.one(".sqs-image"),ti=Jt.one(".sqs-image-content"),gi=Ce.get("designLayout")==="fluid";if(this._removeImageMaskAndBorderRadiiFromNode(Ft),this._removeImageMaskAndBorderRadiiFromNode(ti),gi){this._setFluidImageMask();return}if(je===o().MASK){this._hasMatrixBasedAnimation()?this._setNewImageMaskOnNode(Le,ti):this._setNewImageMaskOnNode(Le,Ft);return}this._hasMatrixBasedAnimation()?this._setNewBorderRadiiStylesOnNode(ci,ti):this._setNewBorderRadiiStylesOnNode(ci,Ft)},_setFluidImageMask:function(){var Ce=this.get("model"),je=Ce.get("imageCropType"),Le=Ce.get("imageMask"),ci=Ce.get("borderRadii"),Jt=this.get("contentBox"),Ft=Jt.one(".sqs-image-content"),ti=Ce.get("stretch"),gi=!ti,qt=Ft.getDOMNode(),Mt=this.contentImage.get("model").get("dimensions"),Vt=je===o().MASK,Ti=u.Z[Le],Ni={width:100,height:Ti},ui=Vt?Ni:Mt;if(Vt?(this._setNewImageMaskOnNode(Le,Ft),qt.setAttribute("data-shape-mask",Le)):(qt.removeAttribute("data-shape-mask"),this._setNewBorderRadiiStylesOnNode(ci,Ft)),Ie(qt,ui,ti),gi){var gn=this;ht(qt,ui,gn)}else me(qt)},_removeImageMaskAndBorderRadiiFromNode:function(Ce){var je=Ce.getAttribute("style").replace(/(clip-.+?;)|(-webkit-clip-.+?;)|(border-.+?;)|(overflow.+?;)|(-webkit-transform.+?;)/g,"");Ce.setAttribute("style",je)},_setNewImageMaskOnNode:function(Ce,je){var Le=je.getAttribute("style"),ci=Le+"clip-path: url(#"+p.Z.baseIDString+Ce+");";ci=ci+"-webkit-clip-path: url(#"+p.Z.baseIDString+Ce+");",je.setAttribute("style",ci)},_setNewBorderRadiiStylesOnNode:function(Ce,je){if(Ce){var Le=je.getAttribute("style"),ci="overflow: hidden;",Jt="-webkit-transform: translate3d(0, 0, 0);",Ft="-webkit-mask-image: -webkit-radial-gradient(white, black);";Le.indexOf(ci)===-1&&(Le+=ci),Le.indexOf(Jt)===-1&&(Le+=Jt),Le.indexOf(Ft)===-1&&(Le+=Ft),Le=Object.entries(Ce).reduce(function(ti,gi){if(!parseInt(gi[1].value))return ti;var qt=gi[0].replace(/([A-Z])/g,"-$1").toLowerCase(),Mt=gi[1].value+gi[1].unit,Vt="border-"+qt+"-radius: "+Mt+";";return ti+Vt},Le),je.setAttribute("style",Le)}},renderEditableImage:function(Ce){var je=this.get("model"),Le=Se.Node.create("<div></div>");je.get("designLayout")==="fluid"&&(Le.addClass("fluid-image-editor-wrapper"),Le.setAttribute("data-animation-role","image"));var ci=this.get("contentBox");ci.appendChild(Le),this.contentImage=this.add({editor:this.get("imageContentEditor"),childType:this.get("imageContentWidget"),editable:this.get("editable"),model:this._getImageContentModelJSON(),render:Le}).item(0),this.contentImage.set("editing",!0),this.contentImage.addTarget(this)},_getIsRTEInModal:function(){var Ce=this.get("contentBox").getDOMNode(),je=Ce.closest(".standard-dialog-wrapper");return!!je},renderEditableCaption:function(){if(this.get("contentBox").addClass("image-block-outer-wrapper"),this._usesNewRTEForCaption()){var Ce=this.get("contentBox").getDOMNode();this.newCaptionRTEMountNode=Ce.ownerDocument.createElement("div"),this.newCaptionRTEMountNode.classList.add("image-caption-wrapper","sqs-image-caption"),Ce.appendChild(this.newCaptionRTEMountNode);var je=this._getHTMLContentModelJSON("description.html").html||"";this.newCaptionRTEInterface=Fe({mountNode:this.newCaptionRTEMountNode,initialProps:{value:je,onChange:(function(Jt){var Ft=this.get("model"),ti=Ft.get("description.html");Jt!==ti&&Ft.set("description.html",Jt)}).bind(this),toolbarOptions:["undoRedo","aiWriter","divider","bold","italic","link","divider","clearFormatting"],toolbarProps:{isInModal:this._getIsRTEInModal(),shiftPadding:this._getIsRTEInModal()?0:{top:65}},trackingProductAreaLevel2:"image-block",isEditable:this.get("editable"),baseZIndex:Se.Squarespace.DIALOG_ZINDEX_BASE+100,onMouseDown:(function(Jt){Jt.stopPropagation(),Se.SQS.LayoutEngine.Singletons.BlockFocusHandler.handleRteMousedown(Jt,this)}).bind(this),placeholder:(0,l.t)("Add an image description",null,{project:"scripts-v6.layout-engine"})},containerClasses:["image-caption"]});return}var Le={block:this.get("parent")?void 0:this,childType:Se.SQS.LayoutEngine.BlockContent.Html,editor:this.get("htmlContentEditor"),afterBindEditorEvents:function(){this.visualEditor.addRteFocusListener((function(Jt){Jt.isFocused&&this.block.contentCaption&&this.block.contentCaption.get("boundingBox").addClass("sqs-html-focused")}).bind(this)),this.visualEditor.addRteBlurListener((function(Jt){!Jt.isFocused&&this.block.contentCaption&&this.block.contentCaption.get("boundingBox").removeClass("sqs-html-focused")}).bind(this))},editable:this.get("editable"),model:this._getHTMLContentModelJSON("description.html"),placeholderText:(0,l.t)("Add an image description",null,{project:"scripts-v6.layout-engine"}),toolbarOptions:{aiWriter:(0,a.i)(e.breakpoints).platform!=="mobile"&&!Se.Object.hasKey(window,"MOBILEAPP")},type:this.get("htmlContentEditorType")||i.rg.SIMPLE};this.contentCaption=this.add(Le).item(0);var ci=this.contentCaption.get("boundingBox");ci.addClass("image-caption-wrapper sqs-image-caption"),this.contentCaption.get("contentBox").addClass("image-caption")},_toggleValidCaptionOrientationClass:function(){var Ce=this.get("contentBox"),je=this.get("model").get("layout");Se.Array.each(Pt,function(Le){Ce.removeClass("layout-"+Le)},this),Ce.addClass("layout-"+je)},_renderTitles:function(){this.cardWrapper=Se.Node.create('<div class="image-card-wrapper sqs-image-card image-block-animation-text"></div>'),this.card=Se.Node.create('<div class="image-card sqs-dynamic-text-container"></div>'),this.cardWrapper.appendChild(this.card),this.get("contentBox").appendChild(this.cardWrapper),this.contentTitle=this.add({block:this.get("parent")?void 0:this,childType:Se.SQS.LayoutEngine.BlockContent.Html,editor:this.get("htmlContentEditor"),editable:this.get("editable"),model:this._getHTMLContentModelJSON("title.html"),placeholderText:(0,l.t)("Add an image title",null,{project:"scripts-v6.layout-engine"}),render:this.card,type:this.get("htmlContentEditorType")||i.rg.SIMPLE,toolbarOptions:{aiWriter:(0,a.i)(e.breakpoints).platform!=="mobile"&&!Se.Object.hasKey(window,"MOBILEAPP"),align:!1,undoRedo:!1,underline:!1,strikethrough:!1}}).item(0),this.contentTitle.get("boundingBox").addClass("image-title-wrapper"),this.contentTitle.get("contentBox").addClass("image-title sqs-dynamic-text"),this.contentSubtitle=this.add({block:this.get("parent")?void 0:this,childType:Se.SQS.LayoutEngine.BlockContent.Html,editor:this.get("htmlContentEditor"),editable:this.get("editable"),model:this._getHTMLContentModelJSON("subtitle.html"),placeholderText:(0,l.t)("Add a subtitle",null,{project:"scripts-v6.layout-engine"}),render:this.card,type:this.get("htmlContentEditorType")||i.rg.SIMPLE,toolbarOptions:{aiWriter:(0,a.i)(e.breakpoints).platform!=="mobile"&&!Se.Object.hasKey(window,"MOBILEAPP"),align:!1,undoRedo:!1,underline:!1,strikethrough:!1}}).item(0),this.contentSubtitle.get("boundingBox").addClass("image-subtitle-wrapper"),this.contentSubtitle.get("contentBox").addClass("image-subtitle sqs-dynamic-text")},destroyButton:function(){this.buttonListener&&(this.buttonListener.detach(),this.buttonListener=null),this.contentButton&&(this.contentButton=null),this.buttonLink&&(this.buttonLink.remove(!0),this.buttonLink=null,this.buttonInner.remove(!0),this.buttonInner=null,this.button.remove(!0),this.button=null,this.buttonWrapper.remove(!0),this.buttonWrapper=null)},_renderButton:function(){var Ce=this.get("contentBox").one(".image-card");if(Ce){this.buttonLink=Se.Node.create('<a class="sqs-button-element--primary"></a>'),this.buttonInner=Se.Node.create('<div class="image-button-inner"></div>'),this.buttonInner.appendChild(this.buttonLink),this.button=Se.Node.create('<div class="image-button sqs-dynamic-text"></div>'),this.button.appendChild(this.buttonInner),this.buttonWrapper=Se.Node.create('<div class="image-button-wrapper"></div>'),this.buttonWrapper.appendChild(this.button),Ce.appendChild(this.buttonWrapper);var je=this.get("addButtonText")||(0,l.t)("Write a subtitle here\u2026",null,{project:"scripts-v6.layout-engine"});Lt?this.contentButton=this.add({block:this.get("parent")?void 0:this,childType:Se.SQS.LayoutEngine.BlockContent.Html,editable:this.get("editable"),editor:this.get("htmlContentEditor"),isLinkable:!1,isInline:!0,model:this._getHTMLContentModelJSON("buttonText"),placeholderText:je,render:this.buttonLink,toolbarOptions:{undoRedo:!1},type:i.rg.PLAIN_TEXT}).item(0):this.syncButtonText(),this._syncButtonVisibility()}},syncButtonEditor:function(){if(this.contentButton){var Ce=this.get("model"),je=Ce.get("buttonText");this.contentButton.setContent(je)}},syncButtonText:function(){var Ce=this.get("contentBox").one(".image-button a"),je=this.get("model").get("buttonText"),Le=je||this.get("addButtonText");Ce.setContent(Le)},syncTitleEditor:function(){if(this.contentTitle){var Ce=this.get("model"),je=Ce.get("title.html");this.contentTitle.setContent(je)}},syncSubtitleEditor:function(){if(this.contentSubtitle){var Ce=this.get("model"),je=Ce.get("subtitle.html");this.contentSubtitle.setContent(je)}},_syncButtonVisibility:function(){var Ce=this.get("contentBox").one(".image-button-wrapper"),je=this.get("model").get("imageLink");Ce&&je==="button"?Ce.setStyle("display","block"):Ce.setStyle("display","none")},_getImageContentModelJSON:function(){var Ce=this.get("model"),je=Ce.get("designLayout"),Le=null;(!je||je.match(/inline|poster|stack|fluid/))&&(Le=Ce.get("aspectRatio"));var ci={imageId:Ce.get("imageId"),aspectRatio:Le,scale:Ce.get("scale"),collectionId:Se.Lang.isValue(Ce.layout)?Ce.layout.get("collectionId"):null,stretch:Ce.get("stretch"),imageCropType:Ce.get("imageCropType"),imageMask:Ce.get("imageMask"),designLayout:Ce.get("designLayout")},Jt=Ce.get("vSize");return Se.Lang.isValue(Jt)&&(ci.vSize=Jt),ci},_getHTMLContentModelJSON:function(Ce){var je=this.get("model");return{html:je.get(Ce)||""}},bindUI:function(){var Ce=this.get("model"),je=this.contentImage.get("model");if(["imageId","scale"].forEach((function(Ft){var ti=Ft+"Change";je.after(ti,function(qt){qt.silent||(this._debug&&console.log("[le/block/image] "+ti,"(prevVal: "+qt.prevVal+")","(newVal: "+qt.newVal+")"),Ce.set(Ft,qt.newVal))},this)}).bind(this)),je.on("aspectRatioChange",function(ti){ti.silent||(this._debug&&console.log("[le/block/image] aspectRatioChange","(prevVal: "+ti.prevVal+")","(newVal: "+ti.newVal+")"),Ce.set("aspectRatio",ti.newVal))},this),!this._usesNewRTEForCaption()){var Le=this.contentCaption?this.contentCaption.get("model"):null;Le&&Le.after("htmlChange",function(Ft){Le.get("html")!==Ce.get("description.html")&&Ce.set("description.html",Ft.newVal,{source:Ft.source})})}this.after("editableChange",this.syncUI,this);var ci=Ce.get("vSize");Se.Lang.isValue(ci)&&this._registerEvent(Ce.on("vSizeChange",function(Ft){je.set("vSize",Ft.newVal)},this)),this._registerEvent(Ce.after("stretchChange",function(){je.set("stretch",Ce.get("stretch")),this._syncStretch()},this),Ce.after("aspectRatioChange",function(){je.set("aspectRatio",Ce.get("aspectRatio"))}),je.after("dimensionsChange",function(){this._syncStretch()},this),Ce.after("layoutChange",function(){this._toggleValidCaptionOrientationClass()},this),Ce.after("filenameChange",function(Ft){je.setItemData({filename:Ft.newVal})}),Ce.after("descriptionChange",function(){var Ft=Ce.get("description").html;if(this._usesNewRTEForCaption()){this.newCaptionRTEInterface.updateValue(Ft);return}this.contentCaption.get("model").get("html")!==Ft&&this.contentCaption.setContent(Ft)},this)),this.bindWysiwygs(),this._registerEvent(Ce.after("imageLinkChange",function(){this._syncButtonVisibility(),this._syncDynamicElements()},this)),Ce.after(["borderRadiiChange","imageMaskChange","imageCropTypeChange"],function(ti){var gi=this._getImageContentModelJSON(),qt=u.Z[ti.newVal],Mt=ti.newVal===o().MASK;if(this.contentImage.get("model").setAttrs({imageMask:gi.imageMask,imageCropType:gi.imageCropType,stretch:gi.stretch}),Mt){var Vt=this.get("model").get("imageMask");qt=u.Z[Vt]}this.contentImage.get("model").setAttrs({aspectRatio:qt||gi.aspectRatio}),this._setImageMaskClipPathAndBorderRadii()},this),Ce.after(["imageOverlayChange"],function(){this._setImageOverlay()},this),Ce.after(["designLayoutChange","imagePositionChange","combinationAnimationChange","individualTextAnimationChange","individualImageAnimationChange"],function(ti){var gi=this.get("contentBox"),qt=this._getImageContentModelJSON();this.contentImage.set("model",qt),this.contentImage.get("model").setAttrs({designLayout:qt.designLayout,aspectRatio:qt.aspectRatio,imagePosition:qt.imagePosition,combinationAnimation:qt.combinationAnimation,individualImageAnimation:qt.individualImageAnimation,individualTextAnimation:qt.individualTextAnimation}),this.setV2Class(),this.contentImage._adjustImage(),this.updateAnimationClassname(ti,Ee,gi);var Mt=ti.attrName==="individualImageAnimation"||ti.attrName==="individualTextAnimation";if(Mt){var Vt=Ee.combinationAnimation+"-custom";gi.addClass(Vt)}this.rerunAnimation(gi),this._setImageMaskClipPathAndBorderRadii()},this);var Jt=this.contentImage.get("boundingBox");this._registerEvent(Jt.delegate("click",this._onImageClick,"img",this)),this._registerEvent(this.get("model").after("linkToChange",this._syncLinkTo,this)),this._registerEvent(Ce.after("designLayoutChange",this._syncDynamicElements,this),Se.SQS.LayoutEngine.Events.after("layout-engine:reload-images",function(){Se.later(1,this,this._syncDynamicElements)},this),Se.Global.after("tweak:change",this._syncDynamicElements,this),Se.Global.after("colors:updateThemeStyles",this._setImageOverlay,this))},bindWysiwygs:function(){var Ce=this.get("model"),je=this.contentTitle?this.contentTitle.get("model"):null,Le=this.contentSubtitle?this.contentSubtitle.get("model"):null;je&&Le&&(this._registerEvent(je.after("htmlChange",function(Ft){Ce.set("title.html",Ft.newVal,r.SetDetails.FROM_WYSIWYG)}),Le.after("htmlChange",function(Ft){Ce.set("subtitle.html",Ft.newVal,r.SetDetails.FROM_WYSIWYG)})),this._registerEvent(Ce.after("titleChange",function(Ft){h.N(Ft)||this._isFluidImage()||this.syncTitleEditor()},this)),this._registerEvent(Ce.after("subtitleChange",function(Ft){h.N(Ft)||this._isFluidImage()||this.syncSubtitleEditor()},this)));var ci=this.contentButton?this.contentButton.get("model"):null;ci&&(this.buttonListener=ci.after("htmlChange",function(Ft){Ce.set("buttonText",Ft.newVal,r.SetDetails.FROM_WYSIWYG)},this)),this._registerEvent(Ce.after("buttonTextChange",function(Ft){h.N(Ft)||(Lt?this.syncButtonEditor():this.syncButtonText())},this))},syncUI:function(){var Ce=!!this.get("model").get("imageId"),je=this.get("editable"),Le=this.get("model").get("layout")==="caption-hidden",ci=!this._getHTMLContentModelJSON("description.html").html;this._usesNewRTEForCaption()&&this.newCaptionRTEInterface&&this.newCaptionRTEInterface.setEditable(je);var Jt=!Ce||(0,S.yR)(this.get("boundingBox").getDOMNode())||!je&&(Le||ci),Ft=this._usesNewRTEForCaption()?this.newCaptionRTEInterface:this.contentCaption;Ft&&(Jt?Ft.hide():Ft.show()),this._syncLinkTo(),this._syncStretch(),this._syncContainers()},_syncStretch:function(){var Ce=this._usesNewRTEForCaption()?this.newCaptionRTEMountNode:this.contentCaption?this.contentCaption.get("boundingBox").getDOMNode():null;if(Ce){if(this.get("model").get("stretch")){Ce.style.maxWidth=null;return}var je=this.contentImage.get("model").get("dimensions"),Le=je?je.width.endsWith("px")?je.width:je.width+"px":null;Ce.style.maxWidth=Le||null}},_syncContainers:function(){var Ce=this.get("model"),je=Ce.get("designLayout"),Le=Ce.get("imageId");!Le||je!=="fluid"||(this._recreateImageEffectContainer(),this._recreateImageOverlay())},_recreateImageOverlay:function(){var Ce=this.get("contentBox"),je=Ce.one(".fluidImageOverlay");je||this._createImageOverlay()},_onImageClick:function(){var Ce=this.get("model").get("linkTo"),je=this.get("model").get("newwindow");Se.Lang.isString(Ce)&&Ce.length>0&&(je?window.open(Ce):window.top.location=Ce)},_syncLinkTo:function(){var Ce=this.contentImage.get("boundingBox").one("img");if(Se.Lang.isValue(Ce)){var je=this.get("model").get("linkTo");Se.Lang.isString(je)&&je.length>0?Ce.setStyle("cursor","pointer"):Ce.setStyle("cursor","auto")}},_syncDynamicElements:function(){var Ce=this.get("contentBox");if(Ce.getDOMNode()){Ce.toggleClass("sqs-narrow-width",Ce.get("offsetWidth")<415);var je=Ce.one(".sqs-dynamic-text-container");je&&(0,g.Z)(je.getDOMNode())}},_isFluidImage:function(){var Ce=this.get("contentBox");return(0,S.yR)(Ce.getDOMNode())},_usesNewRTEForCaption:function(){var Ce=this.get("contentItemId");if(!Ce)return!1;var je=(0,_.PF)((0,m.UT)(),Ce);if(!je)return!1;var Le=!!(je&&(0,v.V)(je)===s.J.BLOG_ITEM);return!!Le},destructor:function(){this._usesNewRTEForCaption()&&(this.newCaptionRTEInterface.destroy(),this.newCaptionRTEInterface=null),this.destroyButton(),this.clearAnimationTimeout(),this._destroyImageEffect()}},{CSS_PREFIX:(0,A.u)(n.Z.IMAGE),MODEL:Se.SQS.LayoutEngine.BlockModel.Image,ATTRS:{htmlContentEditor:{},htmlContentEditorType:{value:i.rg.SIMPLE},defaultContentModel:{},imageContentWidget:{valueFn:function(){return Se.SQS.LayoutEngine.BlockContent.Image}},stack:{},type:{value:n.Z.IMAGE},addButtonText:{value:(0,l.t)("Add Button Text",null,{project:"scripts-v6.layout-engine"})}}})},"1.0",{requires:["base","model","widget-parent","@sqs/layout-engine/event-registrar","@sqs/layout-engine/block-model-image","@sqs/layout-engine/block-content-html","@sqs/layout-engine/block-content-image","@sqs/layout-engine/block-base","@sqs/layout-engine/block-mixin-animated-block","@sqs/layout-engine/block-mixin-image-effect"]})},264047:function(c,b,t){"use strict";var l=t(784874),d=t(952552),o=t(202560);YUI.add("@sqs/layout-engine/block-block-markdown",function(e){e.namespace("SQS.LayoutEngine.ContentModel").MarkdownBlock=e.Base.create("MarkdownContentModel",e.Model,[],{},{ATTRS:{wysiwyg:{value:{engine:"code",mode:"markdown",isSource:!1,source:""}},html:{value:""}}}),e.namespace("SQS.LayoutEngine.Block").Markdown=e.Base.create("block-markdown",e.SQS.LayoutEngine.Block.Base,[],{initializer:function(){},bindUI:function(){this.get("model").on("change",this.syncUI,this)},syncUI:function(){var a=this.get("model").get("html");this.get("contentBox").empty(),this.get("contentBox").setHTML(a),this.fire("widget:contentUpdate")},markdownToHTML:function(a,r){return a?(d.marked.use({breaks:!!r,async:!1}),(0,d.marked)(a)):""},_populateEmptyHtml:function(){var a=this.get("model"),r=a.get("wysiwyg.source");r&&!a.get("html")&&a.set("html",this.markdownToHTML(r))},isEmpty:function(){return!this.get("model").get("html")}},{CSS_PREFIX:(0,o.u)(l.Z.MARKDOWN),MODEL:e.SQS.LayoutEngine.ContentModel.MarkdownBlock,ATTRS:{editor:{valueFn:function(){return e.SQS.LayoutEngine.Block.Editor.Markdown}},type:{value:l.Z.MARKDOWN}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-base"]})},191416:function(){YUI.add("@sqs/layout-engine/block-mixin-animated-block",function(c){var b=250;c.SQS.LayoutEngine.Block.MixinAnimatedBlock=c.Base.create("animatedBlock",c.Base,[],{clearAnimationTimeout:function(){this._retriggerAnimationTimeout&&window.clearTimeout(this._retriggerAnimationTimeout)},isInDefaultView:function(t){if(!t)return!1;var l=t.getDOMNode();return!(!l||!l.ownerDocument||!l.ownerDocument.defaultView)},updateAnimationClassname:function(l,d,o){if(this.isInDefaultView(o)){var e=o.getDOMNode().ownerDocument.documentElement;this._blockAnimationScrollTop=e.scrollTop,o.addClass("animation-disabled");var a=d[l.attrName],r=a+"-"+l.prevVal,s=a+"-"+l.newVal;o.removeClass(r),o.addClass(s)}},rerunAnimation:function(l){this.clearAnimationTimeout(),this.isInDefaultView(l)&&(l.removeClass("animation-loaded"),this._retriggerAnimationTimeout=window.setTimeout((function(){if(this.isInDefaultView(l)){if(l.removeClass("animation-disabled"),this._blockAnimationScrollTop){var d=l.getDOMNode().ownerDocument.documentElement,o=Math.max(this._blockAnimationScrollTop-1,0);d.scrollTo(d.scrollLeft,o),d.scrollTo(d.scrollLeft,this._blockAnimationScrollTop),this._blockAnimationScrollTop=null}l.addClass("animation-loaded")}}).bind(this),b))}},{})},"1.0",{requires:["base"]})},620161:function(){YUI.add("@sqs/layout-engine/block-mixin-aspect-ratio",function(c){c.namespace("SQS.LayoutEngine.Block"),c.SQS.LayoutEngine.Block.MixinAspectRatio=c.Base.create("aspectRatio",c.Base,[],{initializer:function(){this.get("definitionName")!=="website.components.imageFluid"&&(this.get("boundingBox").addClass("sqs-aspect-ratio"),this.after("intrinsicWrapperChange",this._swapIntrisincWrapper,this),c.after(this._bindAspectRatio,this,"bindUI"),c.after(this._updateAspectRatio,this,"renderUI"),c.after(this._updateAspectRatio,this,"syncUI"),c.after(this._updateAspectRatio,this,"_renderSuccess"))},_bindAspectRatio:function(){this.get("model").after("change",this._afterModelChange,this)},_afterModelChange:function(b){this._updateAspectRatio()},_swapIntrisincWrapper:function(b){var t=this.get("model").get("aspectRatio");c.Lang.isValue(b.prevVal)&&this.destroyBlock(b.prevVal),c.Lang.isValue(b.newVal)&&t&&this.initializeBlock(b.newVal,t)},_updateAspectRatio:function(b){var t=this.get("model").get("aspectRatio"),l=this.get("intrinsicWrapper");c.Lang.isValue(t)?!l.hasClass("sqs-intrinsic")||l.one("> div")&&!l.one("> div").hasClass("sqs-intrinsic-content")?this.initializeBlock(l,t):this._setPadding(t):this.destroyBlock(l)},_setPadding:function(b){this.get("intrinsicWrapper").setStyle("paddingBottom",b+"%")},initializeBlock:function(b,t){c.Lang.isValue(t)&&(b.addClass("sqs-intrinsic"),b.setStyle("paddingBottom",t+"%"),b.one("> div")&&b.one("> div").addClass("sqs-intrinsic-content"))},destroyBlock:function(b){b.hasClass("sqs-intrinsic")&&(b.removeClass("sqs-intrinsic"),b.setStyle("padding-bottom",null),b.one(".sqs-intrinsic-content")&&b.one(".sqs-intrinsic-content").removeClass("sqs-intrinsic-content"))}},{ATTRS:{intrinsicWrapper:{getter:function(){return this.get("contentBox")}}}})},"1.0",{requires:["base","node","@sqs/layout-engine/aspect-ratio-manager"]})},604767:function(){YUI.add("@sqs/layout-engine/block-mixin-coalesceable",function(c){c.namespace("SQS.LayoutEngine.Block"),c.SQS.LayoutEngine.Block.MixinCoalesceable=c.Base.create("block-coalesceable",c.Base,[],{initializer:function(){this.get("host").get("editController").set("contentParentBlockSelector","."+this.get("host").getClassName()),c.Do.after(this._attemptToCoalesce,this,"cleanBlock")},insertContentIntoModel:function(b){throw new Error("Coalesceable requires insertContentIntoModel method implementation")},_attemptToCoalesce:function(b){if(!(this.get("host").get("isNewBlock")||this.get("host").get("model").get("floatDir"))){var t=this._getCoalescableSiblingGroup();t.length>1&&c.Widget.getByNode(t[0]).blockEditor.coalesceFollowingBlocks()}},_getCoalescableSiblingGroup:function(b){var t=b||this._bb,l=t.ancestor().get("children"),d=l.size(),o=l.indexOf(t),e="."+this.get("host").getClassName()+":not(.sqs-destroyme)",a=t.test(e)?[t]:[],r;if(d===0)return a;if(o>0)for(r=o-1;r>=0&&l.item(r).test(e)&&this._isCoalesceable(l.item(r));r--)a.unshift(l.item(r));if(o<d-1)for(r=o+1;r<d&&l.item(r).test(e)&&this._isCoalesceable(l.item(r));r++)a.push(l.item(r));return a},_isCoalesceable:function(b){return console.warn("Please implement the mixer's own _isCoalesceable method."),!0},coalesceFollowingBlocks:function(){var b=this._getCoalescableSiblingGroup();if(b.indexOf(this._bb)===0){var t=c.Array.reduce(b,"",function(d,o){var e=c.Widget.getByNode(o);return o!==this._bb&&e.queueForDestruction({coalescing:!0}),d+`
`+e.get("model").get("html").trim()},this),l=b.map(function(d){return c.Widget.getByNode(d)});this.insertContentIntoModel(t,l),this.get("host").syncUI()}}})},"1.0",{requires:["base","node","widget"]})},685661:function(c,b,t){"use strict";var l=t(646715),d=t.n(l),o=t(878148),e=t.n(o),a=t(337061),r=t(938077),s=t(767665),n=t(436715),i=t(770001),u=t(687808),h=t(59001);YUI.add("@sqs/layout-engine/block-mixin-container-styles",function(g){var p=g.SQS.LayoutEngine.Block.MixinContainerStyles=g.Base.create("containerStyles",g.SQS.LayoutEngine.Block.Base,[],{initializer:function(){g.after(this._bindContainerStyles,this,"bindUI"),g.after(this._renderContainerStyles,this,"renderUI"),this.after("renderedChange",this._setContainerStylesDefaults,this)},_bindContainerStyles:function(){this.on("containerStylesChange",this._renderContainerStyles,this),this.colorsListener=g.Global.on("colors:updateThemeStyles",this._renderContainerStyles,this),this.detachColorsLoadedListener=(0,a.gH)(r.FXv,(function(f){f&&(this._renderContainerStyles(),this.detachColorsLoadedListener(),this.detachColorsLoadedListener=null)}).bind(this))},toJSON:function(){var f=p.superclass.toJSON.call(this);return f.containerStyles=this.get("containerStyles"),f},_renderContainerStyles:function(f){var m=this.get("boundingBox"),_=f&&f.newVal?f.newVal:this.get("containerStyles");if(_){var v=_.backgroundEnabled,E=_.stroke&&_.stroke.style!=="none";m.toggleClass("sqs-stretched",!!_.stretchedToFill),v||E?this._applyBlockBackgroundStyles(m,_):this._resetBlockBackgroundStyles(m);var S=this._parentNode._node;(0,s.Hv)(S,_.blendMode);var y=null;_.blur&&_.blur.enabled&&_.blur.filterType===e().BACKDROP&&(y=_.borderRadii),(0,s.O)(S,null,_.blur,y)}},_applyBlockBackgroundStyles:function(f,m){var _=(0,r.pgi)((0,a.d6)());if(f.setStyle("box-sizing","border-box"),f.setStyle("height","100%"),m.backgroundEnabled){f.addClass("sqs-background-enabled");var v=m.backgroundColor&&_?(0,u.Rv)(m.backgroundColor,_):null;f.setStyle("background-color",v||null)}else f.removeClass("sqs-background-enabled"),f.setStyle("background-color","");if(m.stroke&&m.stroke!=="none"){var E=m.stroke.color&&_?(0,u.Rv)(m.stroke.color,_):null;f.setStyle("border-color",E||null),f.setStyle("border-style",m.stroke.style),f.setStyle("border-width",m.stroke.thickness.value+m.stroke.thickness.unit)}else f.setStyle("border-style",""),f.setStyle("border-width",""),f.setStyle("border-color","");var S=m.padding;f.setStyle("padding","");for(var y in S){var C=S[y].value+S[y].unit,O="padding-"+y;f.setStyle(O,C),f._node.style.setProperty("--block-container-"+O,C)}var A=m.borderRadii;for(var I in A)f.setStyle("border-"+h.Z[I],A[I].value+A[I].unit)},_resetBlockBackgroundStyles:function(f){f.removeClass("sqs-background-enabled"),f.setStyle("background-color",""),f.setStyle("border-radius",""),f.setStyle("box-sizing",""),f.setStyle("border-style",""),f.setStyle("border-width",""),f.setStyle("border-color",""),["padding","padding-left","padding-right","padding-top","padding-bottom"].forEach(function(m){f.setStyle(m,""),f._node.style.removeProperty("--block-container-"+m)})},_setContainerStylesDefaults:function(){this.set("containerStyles",this.get("containerStyles"),{silent:!0})},_getValidatedContainerStyles:function(){var f=(0,i.eH)({blockType:this.get("type"),isBlockInFluidEngine:(0,n.yR)(this.get("boundingBox").getDOMNode())});return f},destructor:function(){this.detachColorsLoadedListener&&this.detachColorsLoadedListener(),this.colorsListener&&this.colorsListener.detach()}},{ATTRS:{containerStyles:{setter:function(f){if(this.get("rendered"))return d()({},this._getValidatedContainerStyles(),f)}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-base"]})},589438:function(c,b,t){"use strict";var l=t(809468);YUI.add("@sqs/layout-engine/block-mixin-image-effect",function(d){d.SQS.LayoutEngine.Block.MixinImageEffect=d.Base.create("imageEffect",d.Base,[],{initializer:function(){d.after(this._bindEvents,this,"bindUI")},_createImageEffectContainer:function(){var o=this.get("contentBox"),e=o.one(".sqs-image-content"),a="position: absolute; inset: 0; margin: auto; z-index: 2; pointer-events: none;",r=d.Node.create('<div class="imageEffectContainer"></div>');r.setAttribute("style",a),e.appendChild(r),this._setImageEffectInstance=this._setImageEffectInstance.bind(this)},_recreateImageEffectContainer:function(){var o=this.get("contentBox"),e=o.one(".imageEffectContainer");e||this._createImageEffectContainer()},_setImageEffectInstance:function(o){this.imageEffectInstance=o,this.imageEffectInstancePending=!1},_updateImageEffect:function(){var o=this.get("contentBox"),e=o.one(".sqs-image-content"),a=e.one("img");if(!(!a||!a._node.src)){var r=this.get("model"),s=r.get("imageEffect"),n=s?s.type:"none",i=this.contentImage.get("model"),u=i.get("focalPoint");if(this.imageEffectInstance&&this.imageEffectInstance.getType()!==n&&(this.imageEffectInstance.destroy(),this.imageEffectInstance=null),n!=="none"&&!this.imageEffectInstancePending){if(s=Object.assign({},s,{focalPoint:this._focalPointStringToObject(u)}),!this.imageEffectInstance){this.imageEffectInstancePending=!0,l.Z.createImageEffect(a._node,s).then(this._setImageEffectInstance);return}this.imageEffectInstance.updateProps(s)}}},_focalPointStringToObject:function(o){var e=o.split(",");if(e.length===2){var a=parseFloat(e[0]),r=parseFloat(e[1]);return{x:a,y:r}}return{x:.5,y:.5}},_updateImageEffectImage:function(){var o=this.get("contentBox"),e=o.one(".sqs-image-content"),a=e.one("img");if(a){if(!this.imageEffectInstance){this._updateImageEffect();return}this.imageEffectInstance.updateImage(a._node)}},_updateImageEffectFocalPoint:function(o){if(this.imageEffectInstance){var e=this.contentImage.get("model"),a=e.get("focalPoint");this.imageEffectInstance.updateProps({focalPoint:this._focalPointStringToObject(a)})}},_destroyImageEffect:function(){this.imageEffectInstance&&(this.imageEffectInstance.destroy(),this.imageEffectInstance=null)},_bindEvents:function(){var o=this.get("model"),e=this.contentImage.get("model");o.after("imageEffectChange",function(){this._updateImageEffect()},this),e.after("imageIdChange",function(r){r.newVal||this._destroyImageEffect()},this),e.after("focalPointChange",function(){this._updateImageEffectFocalPoint()},this),this.after("widget:contentUpdate",function(){this._updateImageEffectImage()},this)}},{})},"1.0",{requires:["base"]})},722277:function(c,b,t){"use strict";var l=t(472575);YUI.add("@sqs/layout-engine/block-mixin-splitable",function(d){var o=o||function(){},e=["p","ul","ol","blockquote","h1","h2","h3","h4","h5","h6"];d.namespace("SQS.LayoutEngine.Block"),d.SQS.LayoutEngine.Block.MixinSplitable=d.Base.create("block-splitable",d.Base,[],{initializer:function(){this.get("host").get("editController").set("contentParentBlockSelector","."+this.get("host").getClassName())},split:function(a,r){var s=a.ancestor().get("children"),n=!1;(!a.ancestor(".sqs-block")||a.ancestor(".sqs-block")!==this._bb)&&(n=!0);var i="",u="",h=[];if(s.each(function(f,m){n?u+=f.getDOMNode().outerHTML:(f===a&&(n=!0),i+=f.getDOMNode().outerHTML);var _=d.Widget.getByNode(f);_.get("blockWidget")&&(_=_.get("blockWidget")),h.push(_)},this),u.length>0){var g=new(this.get("host")).constructor({editable:this.get("host").get("editable"),render:!1,isNewBlock:!1,editMode:this.get("host").get("editMode"),editorConfig:{defaultEditingMode:!1},editController:this.get("host").get("editController"),definitionName:"website.components.html",model:{containerStyles:this.get("host").get("containerStyles")}});g.render(this._bb.ancestor(".sqs-layout")),g.blockEditor.insertContentIntoModel(u,h),g.syncUI(),this.insertContentIntoModel(i,h),this.get("host").syncUI(),this._bb.insert(g.get("boundingBox"),"after");var p=this._bb.ancestor(".sqs-layout").LayoutBuilder;p.registerBlock(g)}this._bb.insert(r,"after")},insertContentIntoModel:function(a){throw new Error("Splitable requires insertContentIntoModel method implementation")},getBlockLevelElementsForDropZone:function(){var a=this.get("selectorsForDropZone"),r=this._cb.all(a);return r},getOverlays:function(){return this.get("host").get("boundingBox").all(".sqs-content-overlay")},_initLayoutDrop:function(){var a=this.get("host").get("definitionName");a&&a!=="website.components.html"&&d.SQS.LayoutEngine.Block.Editor.Base.prototype._initLayoutDrop.call(this)},_updateDropOverlays:function(){var a=d.DD.DDM.activeDrag;if(!(this.get("destroyed")||!a||!a.get("node").inDoc(d.config.doc))){this.overlays&&this.overlays.length&&this._destroyDropOverlays();var r=new d.NodeList;a.get("node")!==this._bb&&(r=this.getBlockLevelElementsForDropZone()),r.size()<1&&(r=d.all(this._bb)),this.overlays=d.Array.map(this._addOverlayDOMNodes(r),function(s,n){var i=r.item(n);return{node:d.one(s),alignNode:i,regionData:this._getRegionData(i,r.item(n-1),r.item(n+1)),drop:null}},this),this._positionOverlayNodes()}},_addOverlayDOMNodes:function(a){for(var r=a.size(),s=[];r-- >0;)s.push(d.DOM.create('<div class="sqs-content-overlay">'));return this._bb.append(s),s},_getRegionData:function(a,r,s){var n=this._bb.get("region"),i=s?s.get("region"):{},u=r?r.get("region"):{},h=a.get("region"),g=r?h.top:n.top;u.height&&(g-=(g-u.bottom)/2);var p=s?h.bottom:n.bottom;return i.height&&(p+=(i.top-h.bottom)/2),{height:p-g,top:g-n.top,isFirstContent:!r,isLastContent:!s}},_positionOverlayNodes:function(){d.Array.each(this.overlays,function(a){var r=a.node,s=a.regionData;r.setData("alignNode",a.alignNode),r.setData("isAdjacentToBlockEdge",{top:s.isFirstContent,bottom:s.isLastContent}),r.setStyles({top:s.top,height:s.height}),this.get("lockedLayout")||(a.drop=new d.SQS.LayoutEngine.Layout.Drop({node:r,groups:["blocks"],locked:!1})),r.on("click",this._destroyDropOverlays,this)},this)},_destroyDropOverlays:function(){this.overlays&&(d.Array.each(this.overlays,function(a){d.Lang.isValue(a.drop)&&a.drop.destroy(),a.node.detach(),a.node.remove(!0)}),this.overlays=null)},beforeLayoutDrag:function(){this._updateDropOverlays(),(0,l.I6)(l.ow)},afterLayoutDrag:function(){this._destroyDropOverlays(),(0,l.I6)(l.NT)},_afterDropZoneLockedChange:function(a){d.Array.each(this._overlays,function(r){r.drop.set("lock",a.newVal)}),a.newVal?this._destroyDropOverlays():this._updateDropOverlays()},destructor:function(){this._destroyDropOverlays()}},{ATTRS:{selectorsForInsertPoints:{valueFn:function(){return d.Array.map(e,function(a){return".sqs-block-content > "+a+", .sqs-html-content > "+a}).join(", ")}},selectorsForDropZone:{valueFn:function(){return d.Array.map(e,function(a){return".sqs-block-content > "+a+", .sqs-html-content:not(.rte) > "+a}).join(", ")}}}})},"1.0",{requires:["base","node","widget","@sqs/layout-engine/layout-drop"]})},801981:function(c,b,t){"use strict";var l=t(734526),d=t(210750),o=t.n(d),e=t(5921),a=t.n(e),r=t(714487),s=t(276860),n=t(581729),i=!1;function u(h){return a()(h.replace(/[-|_]/g," ").toLowerCase())}YUI.add("@sqs/layout-engine/block-model-sync-base",function(h){h.namespace("SQS.LayoutEngine.Block"),h.SQS.LayoutEngine.Block.ModelSyncBase=h.Base.create("block-modelsync",h.SQS.LayoutEngine.Block.Base,[],{initializer:function(){this.previousBlockValue=this.get("model").toJSON(),this.get("blockTypeName")==="MODELSYNC"&&h.Lang.isValue(this.get("type"))&&this.set("blockTypeName",l.Z.BlockTypeKeys[this.get("type")]),this._networkListener=h.Global.on("network:online",this._onNetworkReconnect.bind(this));var g=h.bind(function(p){i&&console.log("[le] modelsync-base - model changed",p),this._renderBlock(p)},this);this._debouncedAfterChange=o()(g,this.get("contentRefreshRate"),!0,!0)},renderUI:function(){this._renderBlock()},bindUI:function(){this._afterChangeListener=this.get("model").after("change",this._debouncedAfterChange,this)},_onNetworkReconnect:function(){this.get("isDisplayingOfflineState")&&this._renderBlock()},_updateOfflineState:function(g){var p=g.error&&g.status===0;this.set("isDisplayingOfflineState",p)},_renderFinished:function(){i&&console.log("[le] modelsync-base - _renderBlock finished",this),this.fire("widget:contentUpdate"),this.set("stack",null)},_renderBlock:function(p){var f=u(this.get("blockTypeName"));i&&console.log("[le] modelsync-base - _renderBlock",f,this);var m=h.bind(this._renderFinished,this),_=this.get("stack");_&&(m=_.add(m));function v(A){if(this.get("contentBox").getDOMNode()!==null){this._renderSuccess({html:A}),this._updateOfflineState({});var I=this.get("model").toJSON();(0,s.Kv)(I,this.previousBlockValue)||this.fire("block:renderedAfterDataChange"),this.previousBlockValue=I,m();return}console.warn("[le] modelsync-base - _renderBlock post success - no dom node in response")}try{var E=this.toJSON(),S=this.getEditorOnlyValues();S&&(E.value=h.merge({},S,E.value));var y,C;E.value&&E.value.collectionId?y=E.value.collectionId:this.get("collectionId")&&(y=this.get("collectionId")),this.get("contentItemId")&&(C=this.get("contentItemId")),(0,n.Qo)({blockWidgetJson:E,collectionId:y,contentItemId:C},{ignoreCache:p}).then(function(A){return A.html}).then(v.bind(this)).catch((function(A){if(this.get("contentBox").getDOMNode()!==null){this._renderError(A),this._updateOfflineState(A),m();return}console.warn("[le] modelsync - _renderBlock post failure - no dom node")}).bind(this))}catch(A){var O=(0,r.t)("Error: {blockName} Block could not be rendered.",{blockName:f},{project:"scripts-v6.layout-engine"});A instanceof TypeError&&console.warn(h.Lang.sub("Error: {message}",A)),this._renderError({error:O})}},_cleanWidgetContent:function(){var g=this.get("contentBox").one(".sqs-state-message, .state-message");h.Lang.isValue(g)&&this.get("model").get("aspectRatio")&&g.wrap("<div></div>")},_setWidgetContent:function(){var g=this.get("contentBox"),p=g.getDOMNode();if(p){var f=this.get("widgetContent");f=this._preloadImagesInReplacedNode(p,f),g.empty(),g.insert(f),this._cleanWidgetContent()}},_preloadImagesInReplacedNode:function(g,p){if(!p)return h.one(null);var f=typeof p=="string",m;if(f){var _=document.createElement("div");_.innerHTML=p,m=_}else h.instanceOf(p,h.Node)?m=p.getDOMNode():m=p;var v=g.querySelectorAll("img"),E=m.querySelectorAll("img");return E.forEach(function(S){if(!S.src){var y=Array.from(v).find(function(C){return C.classList.contains("loaded")&&C.dataset.src===S.dataset.src});y&&(S.src=y.src,S.dataset.forceImageUpdate="true")}}),f?_.innerHTML:h.one(m)},_renderSuccess:function(g){i&&console.log("[le] modelsync-base _renderSuccess",g),this.set("widgetContent",g.html),this._setWidgetContent()},_renderError:function(g){var p=(0,r.t)("Error: {sub1} Block could not be rendered.",{sub1:u(this.get("blockTypeName"))},{project:"scripts-v6.layout-engine"}),f=this._getNewStateMessageNode({classNames:"error",title:g&&g.title,message:g&&g.error||p});this.get("boundingBox").addClass("sqs-block-error"),this.get("contentBox").empty(),this.get("contentBox").append(f)},_getNewStateMessageNode:function(g){g=h.merge({classNames:"warning",message:(0,r.t)("There was an error.",null,{project:"scripts-v6.layout-engine"})},g);var p=h.Node.create('<div class="sqs-blockStatus"><div class="sqs-blockStatus-box">'+(g.title?'<div class="sqs-blockStatus-box-title">'+g.title+"</div>":"")+'<div class="sqs-blockStatus-box-message">'+g.message+"</div></div></div>");if(h.Lang.isValue(g.button)){g.button=h.merge({text:"OK",classNames:""},g.button);var f=h.Node.create('<div class="sqs-blockStatus-box-button">'+g.button.text+"</div>").appendTo(p.one(".sqs-blockStatus-box"));h.Lang.isFunction(g.button.onClick)&&f.on("click",g.button.onClick)}return p},_getStackFinished:function(){var g=this.get("stack");return g?g.add():function(){}},destructor:function(){this._networkListener&&(this._networkListener.detach(),this._networkListener=null),this._debouncedAfterChange&&(this._debouncedAfterChange.cancel(),this._debouncedAfterChange=null),this._afterChangeListener&&(this._afterChangeListener.detach(),this._afterChangeListener=null)}},{CSS_PREFIX:"sqs-block-modelsync",MODEL:h.Model,ATTRS:{isDeprecated:{value:!1,readOnly:!0},stack:{},widgetContent:{value:""},isDisplayingOfflineState:{value:!1},collectionId:{},contentItemId:{},contentRefreshRate:{value:200}}})},"1.0",{requires:["base","model","node","@sqs/layout-engine/block-base"]})},702723:function(){YUI.add("@sqs/layout-engine/block-plugin-resizable",function(c){c.namespace("SQS.LayoutEngine.Block.Plugin.Resizable"),c.SQS.LayoutEngine.Block.Plugin.Resizable=c.Base.create("resizableBlock",c.Plugin.Base,[],{initializer:function(b){c.after(this._initResize,this,"renderUI"),c.after(this._initResize,this,"syncUI"),c.after(this._initResize,this,"_renderBlock"),c.after(this._initResize,this,"_renderSuccess"),this.get("host").get("rendered")?this._initResize():this.afterHostEvent("renderedChange",this._initResize,this)},destructor:function(){this._destroyResize()},_toggleResize:function(b){b?this._initResize():this._destroyResize()},_syncAspectRatio:function(){var b=this.get("model"),t=b.get("aspectRatio"),l=b.get("dimensions"),d=b.get("vSize");d?t=this._calculateAspectRatio():t||(t=l?l.height/l.width*100:75),this.get("host").get("model").set("aspectRatio",t,{silent:!0})},_initResize:function(){var b,t=this.get("host"),l=this.get("resizeNode"),d=t.hasPlugin(c.SQS.LayoutEngine.WidgetResize.NS);b={resizeNode:l,wrap:!1,minHeight:1},t.plug(c.SQS.LayoutEngine.WidgetResize,b);var o=l.one(".yui3-resize-handles-wrapper");this.get("host").get("boundingBox").appendChild(o),d||this._bindResizeEvents()},_destroyResize:function(){var b=this.get("resizeNode");if(this.get("host").unplug(c.SQS.LayoutEngine.WidgetResize),!this.get("blockEditor").get("resizable")&&!c.Lang.isValue(this.get("model").get("aspectRatio"))){var t=b.one(".sqs-intrinsic");if(t){t.setStyle("paddingBottom",null),t.removeClass("sqs-intrinsic");var l=t.one(".sqs-intrinsic-content");l&&l.removeClass("sqs-intrinsic-content")}}b.setStyles({width:null,height:null,border:null,margin:null,padding:null}),b.one(".yui3-resize-handles-wrapper")&&b.one(".yui3-resize-handles-wrapper").remove(!0)},_bindResizeEvents:function(){var b=this.get("host")[c.SQS.LayoutEngine.WidgetResize.NS];b.on("resize:start",this._nullVSize,this),b.on("resize:resize",this._adjustNodePosition,this),b.on("resize:resize",this._updateAspectRatio,this),b.on("resize:end",this._resetMouseDelta,this),b.after("resize:end",this._updateAspectRatio,this),b.on("resize:start",this._disableInsertPoints,this),b.on("resize:end",this._enableInsertPoints,this)},_disableInsertPoints:function(){c.SQS.LayoutEngine.Singletons.InsertPointController.disable()},_enableInsertPoints:function(){c.SQS.LayoutEngine.Singletons.InsertPointController.enable()},_nullVSize:function(b){c.SQS.LayoutEngine.Singletons.InsertPointController.hide();var t=this.get("model");c.Lang.isValue(t.get("vSize"))&&(this._syncAspectRatio(),t.set("vSize",null,{silent:!0}))},_adjustNodePosition:function(b){var t=this.get("resizeNode"),l=t[c.Plugin.Resize.NS],d=this.get("snapToThreshold"),o=t.get("region"),e=this.get("host").get("boundingBox").get("region"),a=l.get("activeHandleNode"),r=a.get("region"),s=this.get("model").get("dimensions"),n=l.delegate.dd,i=n.mouseXY[1];c.Lang.isNumber(this._mouseDelta)||(this._mouseDelta=r.bottom-r.height/2-i);var u,h;s?(u=o.width/s.width,h=parseInt(s.height,10)*u):(u=.75,h=o.height);var g=o.top+(e.bottom-o.bottom),p=h+g,f=p-r.height/2;i>p-d&&i<p+d&&(n.actXY[1]=f)},_calculateAspectRatio:function(){var b=this.get("resizeNode").get("region"),t=parseInt(this.get("resizeNode").getStyle("paddingLeft"),10);t+=parseInt(this.get("resizeNode").getStyle("paddingRight"),10);var l=parseInt(this.get("resizeNode").getStyle("paddingBottom"),10);return l+=parseInt(this.get("resizeNode").getStyle("paddingTop"),10),c.Lang.isNumber(l)||(l=0),c.Lang.isNumber(t)||(t=0),100*(b.height-l)/(b.width-t)},_updateAspectRatio:function(b,t){var l=this._calculateAspectRatio();t?this.get("model").set("aspectRatio",l,{silent:!0}):this.get("model").set("aspectRatio",l)},_resetMoustDelta:function(b){this.mouseDelta=null,this.get("host").get("editController").alignInsertPoints()}},{NS:"resizableBlock",ATTRS:{resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},model:{valueFn:function(){return this.get("host").get("model")}},blockEditor:{value:null}}})},"1.0",{requires:["base","plugin","@sqs/layout-engine/widget-resize"]})},894133:function(c,b,t){"use strict";var l=t(784874),d=t(202560),o={blockAnimation:"block-animation"};YUI.add("@sqs/layout-engine/block-quote",function(e){e.namespace("SQS.LayoutEngine.Block");var a=e.SQS.LayoutEngine.Block.Quote=e.Base.create("block-quote",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.SQS.LayoutEngine.Block.MixinAnimatedBlock],{bindUI:function(){a.superclass.bindUI.call(this),this.after("widget:contentUpdate",this.handleAnimationChange,this)},handleAnimationChange:function(s){this.clearAnimationTimeout();var n=this.get("contentBox"),i=n.one("figure");this.updateAnimationClassname(s,o,i),this.rerunAnimation(i)},destructor:function(){this.clearAnimationTimeout()}},{CSS_PREFIX:(0,d.u)(l.Z.QUOTE),MODEL:e.SQS.LayoutEngine.BlockModel.Quote,ATTRS:{}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-model-quote","@sqs/layout-engine/block-mixin-animated-block"]})},387406:function(c,b,t){"use strict";var l=t(526186),d=t(304003),o=t.n(d),e=t(690411),a=t.n(e),r=t(737012),s=t.n(r),n=t(86487),i=t.n(n),u=t(723796),h=t(784874),g=u.Em.createLogger("le/schema-editor-base","orange");YUI.add("@sqs/layout-engine/block-schema-editor-base",function(p){p.namespace("SQS.LayoutEngine.Block.Editor"),p.SQS.LayoutEngine.Block.Editor.SchemaBase=p.Base.create("schema-editor-base",p.SQS.LayoutEngine.Block.Editor.Base,[],{initializer:function(){var f=this.get("host");g("initializer",this,{block:f}),this.get("eventNames").forEach((function(_){this.publish(_,{prefix:"EditingDialog",broadcast:2,emitFacade:!0})}).bind(this)),this.after("editingChange",this.afterEditingChange,this);var m=f.get("model");this._registerEvent(m.after("change",this.updateHost,this)),this.immediatelyEditNewlyCreatedBlock()},afterEditingChange:function(f){f.newVal!==f.prevVal&&(g("editingChange",f.newVal,this),f.newVal?this._afterBlockEditModeEnabled():this.fire("dismiss"))},_afterBlockEditModeEnabled:function(){this._afterBlockEditModeEnabledWithConfig(this.getEditorConfig())},_afterBlockEditModeEnabledWithConfig:function(f){this.setParams(f),this.fire("show")},immediatelyEditNewlyCreatedBlock:function(){this.get("host").get("isNewBlock")&&!this.get("editing")&&this.get("includeEdit")&&this.get("host").get("type")!==h.Z.HTML&&this.onceAfter("initializedChange",function(){g("block initialized, enable editing to show dialog"),this.openEditor()},this)},getEditorConfigKey:function(){var f=this.get("host"),m=f.get("blockTypeName").toLowerCase();return m},getEditorConfig:function(){var f=this.getEditorConfigKey(),m=i()[this.getEditorConfigKey()];if(!m){console.log("No schema for blockType:"+f);return}return p.merge(this.get("defaultEditorConfig"),m)},updateHost:function(){this.get("host").syncUI()},setParams:function(f){f&&(this.params=p.merge({},f))}},{NS:"blockEditor",ATTRS:{defaultEditorConfig:{valueFn:function(){return{name:"editor-block-"+s()(this.get("blockTypeName")).replace(/(^legacy\-|\-legacy$|\-v2$)/,"")}}},editingButtons:{value:!0},eventNames:{value:["show","dismiss"]},blockTypeName:{valueFn:function(){return a()(o()(this.get("host").get("blockTypeName")))}}}})},"1.0",{requires:["@sqs/layout-engine/block-editor-base"]})},484135:function(c,b,t){"use strict";var l=t(714487),d=t(734526),o=t(304003),e=t.n(o),a=t(690411),r=t.n(a);YUI.add("@sqs/layout-engine/block-unrenderable",function(s){function n(i){return i?s.UA.mobile?(0,l.t)("{blockName} blocks cannot be rendered in the mobile editor.",{blockName:i},{project:"scripts-v6.layout-engine"}):(0,l.t)("{blockName} blocks cannot be rendered.",{blockName:i},{project:"scripts-v6.layout-engine"}):s.UA.mobile?(0,l.t)("This block cannot be rendered in the mobile editor.",null,{project:"scripts-v6.layout-engine"}):(0,l.t)("This block cannot be rendered.",null,{project:"scripts-v6.layout-engine"})}s.namespace("SQS.LayoutEngine.Block"),s.SQS.LayoutEngine.Block.Unrenderable=s.Base.create("block-unrenderable",s.SQS.LayoutEngine.Block.Base,[],{renderUI:function(){var i=this.get("blockType");this.get("contentBox").addClass("sqs-blockStatus-box").setHTML('<div class="sqs-blockStatus-box-message">'+n(i)+"</div>")}},{CSS_PREFIX:"sqs-blockStatus",ATTRS:{blockType:{valueFn:function(){return r()(e()(d.Z.BlockTypeKeys[this.get("type")]))}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-base"]})},58396:function(){YUI.add("@sqs/layout-engine/block-utils",function(c){c.namespace("SQS.LayoutEngine.Block"),c.SQS.LayoutEngine.Block.Utils={getWhitelistingFn:function(b){return function(t){return c.SQS.LayoutEngine.Block.Utils.checkWhitelist(b,t)}},checkWhitelist:function(b,t){return c.Lang.isArray(t)||(t=c.Object.keys(t)),c.Array.every(t,function(l){return c.Array.indexOf(b,l)!==-1})}}},"1.0",{requires:["base"]})},870416:function(c,b,t){"use strict";var l=t(629266),d=t.n(l),o=t(784874),e=t(210750),a=t.n(e),r=t(976003),s=t.n(r),n=t(461761),i=t.n(n),u=t(202560);YUI.add("@sqs/layout-engine/block-video",function(h){h.namespace("SQS.LayoutEngine.Block");var g=h.SQS.LayoutEngine.Block.Video=h.Base.create("block-video",h.SQS.LayoutEngine.Block.ModelSyncBase,[h.SQS.LayoutEngine.Block.MixinAnimatedBlock],{bindUI:function(){var p=this.get("model"),f=function(v){this._updateDescription(v),(this._shouldRenderOnDescriptionClear(v)||this._hasChanges(v))&&this._renderBlock(),this._handleCustomThumbChange(v)},m=this.get("contentRefreshRate");p.after("change",a()(f,m,{leading:!0,trailing:!0}),this);var _=p.get("customThumb");_&&this._bindImageListeners(_)},syncUI:function(){this.get("contentBox").all(".intrinsic").addClass("sqs-intrinsic")},_renderBlock:function(){var p=this.get("model"),f=p.get("customThumb");if(f){var m=f.get("mediaProcessingState");if(m&&m!==d().READY)return}return g.superclass._renderBlock.call(this,!0)},_handleCustomThumbChange:function(p){var f=p.changed,m=i()(f,"customThumb.prevVal");m&&m.detach(this.get("id")+"|*");var _=i()(f,"customThumb.newVal");_&&this._bindImageListeners(_)},_bindImageListeners:function(p){var f=this.get("id");p.after(f+"|mediaProcessingStateChange",function(m){m.newVal===d().READY&&this._renderBlock()},this),p.after(f+"|mediaFocalPointChange",function(m){var _=this.get("contentBox").one(".sqs-video-overlay img"),v=_&&_.hasClass("loaded"),E=m.target.get("mediaProcessingState")===d().READY;if(_&&(v||E)){var S=_.loader;_.setAttribute("data-image-focal-point",m.newVal.x+","+m.newVal.y),S.fire("refresh")}var y=this.get("contentBox").one(".sqs-native-video");if(y){var C=y.nativevideoloader.getVideoPlayer();C.thumbnailFocalPoint={x:m.newVal.x,y:m.newVal.y}}},this)},_updateDescription:function(p){var f=this.get("contentBox").one(".video-caption"),m=null,_=null,v=i()(p,"changed.description");v&&f&&(m=i()(v,"newVal.html"),_=f.getContent(),m!==_&&f.setContent(m))},_shouldRenderOnDescriptionClear:function(p){var f=this.get("contentBox").one(".video-caption"),m=i()(p,"changed.description.newVal.html"),_=i()(p,"changed.description.prevVal.html"),v=m!==_,E=function(){var S=f&&f.get("firstChild"),y=S&&S.getContent();return y===""}();return v&&E},_hasChanges:function(p){var f=p.changed;return this._isSettingsChanged(f)||this._isUrlChanged(f)||this._isDescriptionChanged(f)||this._isNativeVideoChanged(f)||this._isCustomThumbChanged(f)||this._isVideoAssetChanged(f)||this._isThumbnailAssetChanged(f)},_isNativeVideoChanged:function(p){var f=i()(p,"nativeVideo.prevVal"),m=f?f.getId():void 0,_=i()(p,"nativeVideo.newVal"),v=_?_.getId():void 0;return m!==v},_isCustomThumbChanged:function(p){var f=i()(p,"customThumb.prevVal"),m=f?f.getId():void 0,_=i()(p,"customThumb.newVal"),v=_?_.getId():void 0;return m!==v},_isVideoAssetChanged:function(p){var f=i()(p,"nativeVideoAssetId.newVal");return!s()(i()(p,"nativeVideoAssetId.prevVal"),f)&&f},_isThumbnailAssetChanged:function(p){var f=i()(p,"customThumbAssetId.newVal");return!s()(i()(p,"customThumbAssetId.prevVal"),f)&&f},_isUrlChanged:function(p){return!s()(i()(p,"url.prevVal"),i()(p,"url.newVal"))},_isSettingsChanged:function(p){return!s()(i()(p,"settings.prevVal"),i()(p,"settings.newVal"))},_isDescriptionChanged:function(p){var f=this.get("contentBox").one(".video-caption"),m=i()(p,"description.newVal.html");return!f&&m}},{CSS_PREFIX:(0,u.u)(o.Z.VIDEO),MODEL:h.SQS.LayoutEngine.BlockModel.Video,ATTRS:{type:{value:o.Z.VIDEO}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-model-video","@sqs/layout-engine/block-mixin-animated-block"]})},684329:function(){YUI.add("@sqs/layout-engine/content-item-content-item",function(c){c.namespace("SQS.LayoutEngine.ContentItem"),c.SQS.LayoutEngine.ContentItem.getCtor=function(){var b=c.Object.getValue(c,"Squarespace.Models.ContentItem".split("."));return b||c.SQS.LayoutEngine.ContentItem.Reference}},"1.0",{requires:["@sqs/layout-engine/content-item-reference"]})},4565:function(){YUI.add("@sqs/layout-engine/content-item/embed",function(c){c.namespace("SQS.LayoutEngine.ContentItem"),c.SQS.LayoutEngine.ContentItem.Embed=c.Base.create("Embed",c.Model,[],{},{ATTRS:{_type:{value:"Embed",validator:function(b){return b==="Embed"},readOnly:!0},embed:{value:null},oembed:{value:null},overlay:{value:!0}}})},"1.0",{requires:["base","model"]})},753669:function(c,b,t){"use strict";var l=t(629266),d=t.n(l),o=t(586745),e=t.n(o),a=t(44348),r=t.n(a),s=t(726692),n=t.n(s);YUI.add("@sqs/layout-engine/content-item-reference",function(i){i.namespace("SQS.LayoutEngine.ContentItem");var u=i.SQS.LayoutEngine.ContentItem.Reference=i.Base.create("Item",i.Model,[i.SQS.LayoutEngine.ModelSync.REST],{root:"content-items",url:"content-items/{id}",initializer:function(h){this._needsJobListener&&this._bindJobListener(),this._updateNextDisplayIndex(),i.Do.after(function(){var g=this.get("collectionId"),p="/api/";return i.Lang.isValue(g)&&(p+="content-collections/"+g+"/"),p+=i.Do.currentRetVal,new i.Do.AlterReturn("Adding prefix to url.",p)},this,"getURL",this)},destructor:function(){this._jobListener&&this._jobListener.detach()},toJSON:function(){var h=u.superclass.toJSON.call(this),g=h.structuredContent;return i.Lang.isValue(g)&&(h.structuredContent=g.toJSON()),h.items=[],h},serialize:function(h){var g=this.toJSON();return delete g.items,delete g.author,delete g.fullUrl,delete g.assetUrl,delete g.resolved,delete g.postItemInjectCode,delete g.promotedBlock,delete g.promotedBlockType,delete g.nextDisplayIndex,delete g.mediaIsUploading,delete g.hasFileData,delete g.isGlobalFakeContentItem,delete g.childrenGroups,i.JSON.stringify(g)},save:function(h,g){this.isNew()||!(i.Lang.isObject(h)&&h.fields)?u.superclass.save.call(this,h,g):this._saveFields(h.fields,g)},autoSave:function(h,g){i.Lang.isFunction(h)?(g=h,h={}):i.Lang.isValue(h)||(h={}),h.headers=i.merge(h.headers,{"X-AutoSave":!0}),this.save(h,g)},like:function(h){i.Data.post({url:this.getURL()+"/sentiment/like",success:function(g){i.Lang.isFunction(h)&&h(null,g)},failure:function(g){i.Lang.isFunction(h)&&h(g,null)}},this)},dislike:function(h){i.Data.post({url:this.getURL()+"/sentiment/dislike",success:function(g){i.Lang.isFunction(h)&&h(null,g)},failure:function(g){i.Lang.isFunction(h)&&h(g,null)}},this)},clearFileData:function(){this.setAttrs({systemDataId:null,systemDataOrigin:null,mediaProcessingState:null,systemDataSourceType:null,systemDataVariants:null,filename:null}),i.Data.post({url:"/api/commondata/ClearEmbeddedAsset",data:{itemId:this.get("id")}})},clearChildGroup:function(h,g){i.Data.post({url:"/api/commondata/ClearChildGroup",data:{childType:h,itemId:this.get("id")},success:function(p){i.Lang.isFunction(g)&&g(null,p)},failure:function(p){i.Lang.isFunction(g)&&g(p,null)}})},getAssetUrlForFormat:function(h){return i.Lang.sub("{assetUrl}?format={format}",{assetUrl:this.get("assetUrl"),format:h})},getId:function(){return this.get("id")},_needsJobListener:function(){var h=this.get("mediaprocessingState");return h===d().QUEUED||h===d().PROCESSING},_bindJobListener:function(){!Static||!Static.JOB_MANAGER||(this._jobListener=Static.JOB_MANAGER.on("completed",function(h){var g=this.get("id"),p=h.get("data.contentItemId"),f=h.get("data.globalContentItemId");p===g?(this.load(),this._jobListener.detach()):i.Lang.isValue(f)&&f===g&&(i.Data.get({url:"/api/rest/global-content-items/"+f,success:function(m){this.set("assetUrl",m.assetUrl),this.setAttrs(m)}},this),this._jobListener.detach())},this))},_updateNextDisplayIndex:function(){var h=0;this._set("nextDisplayIndex",h)},_saveFields:function(h,g){if(h.length>1)throw"Saving multiple fields is not currently supported.";var p=h[0],f={field:p,itemId:this.get("id"),value:this.get(p)};i.Data.post({url:"/api/commondata/SaveItemField",data:i.merge({},f),success:function(m){i.Lang.isFunction(g)&&g(null,m.item)},failure:function(m){i.Lang.isFunction(g)&&g.call(m,null)}},this)},_getStructuredContentCtor:function(){switch(this.get("recordType")){case e().EMBED:case e().VIDEO:return i.SQS.LayoutEngine.ContentItem.Embed;default:return null}}},{ATTRS:{id:{value:null},collectionId:{value:null},parentId:{value:null},authorId:{valueFn:function(){var h=i.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount"]);return h?h.id:null}},proxyForId:{value:null},recordType:{value:e().TEXT,writeOnce:!0},childType:{value:null},addedOn:{valueFn:function(){return new Date().getTime()},writeOnce:"initOnly"},updatedOn:{value:null,writeOnce:"initOnly"},publishOn:{valueFn:function(){return new Date().getTime()}},unsaved:{value:null},urlId:{value:null},title:{value:null},body:{value:null},excerpt:{value:null},displayIndex:{value:0},starred:{value:!1},passthrough:{value:!1},tags:{value:[]},categories:{value:[]},workflowState:{setter:function(h){return h},value:r().DRAFT},systemDataId:{value:null},systemDataVariants:{value:null},systemDataOrigin:{value:null},contentType:{value:null},filename:{value:null},dataSize:{value:null},sourceUrl:{value:null},mediaProcessingState:{value:null},mediaFocalPoint:{value:{x:.5,y:.5},setter:function(h){if(i.Lang.isString(h)){h=h.split(",");var g=parseFloat(h[0]),p=parseFloat(h[1]);return{x:!isNaN(g)&&g<=1?g:.5,y:!isNaN(p)&&p<=1?p:.5}}return h}},colorData:{value:null},clickthroughUrl:{value:null},location:{value:null},customContent:{value:null},likeCount:{value:0},dislikeCount:{value:0},commentCount:{value:0},publicCommentCount:{value:0},commentState:{valueFn:function(){var h=i.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings"]),g=h.commentEnableByDefault,p=h.commentsEnabled;return g||p?n().ENABLED:n().DISABLED}},commentDisableOn:{valueFn:function(){var h=i.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","commentDisableAfterDaysDefault"]);return h?i.Date.addDays(new Date,h).getTime():null}},pushedServices:{value:{}},shareStates:{value:[]},structuredContent:{valueFn:function(){var h=this._getStructuredContentCtor();return i.Lang.isNull(h)?null:new h},setter:function(h){if(h instanceof i.Model)return h;var g=this._getStructuredContentCtor();return i.Lang.isNull(g)?null:new g(h)}},childrenGroups:{value:{}},author:{value:null},fullUrl:{value:null},assetUrl:{value:null,getter:function(h){return i.SQS.LayoutEngine.UrlUtils.isSecure()?i.SQS.LayoutEngine.UrlUtils.securifyURL(h):h}},resolved:{value:!1},postItemInjectCode:{value:null},promotedBlock:{value:null},promotedBlockType:{value:null},nextDisplayIndex:{value:0,readOnly:!0},mediaIsUploading:{value:!1},hasFileData:{getter:function(){var h=this.get("mediaProcessingState"),g=h===d().QUEUED;return this.get("isGlobalFakeContentItem")?!this.isNew():this.get("systemDataOrigin")==="USER_UPLOAD"&&g||g?!0:i.Lang.isValue(this.get("systemDataId"))}},isGlobalFakeContentItem:{value:!1}}})},"1.0",{requires:["base","json","model","@sqs/layout-engine/model-sync-rest","@sqs/layout-engine/content-item/embed","@sqs/layout-engine/url-utils"]})},688239:function(){YUI.add("@sqs/layout-engine/tablet-dd-overrides",function(c){c.DD.Drag.START_EVENT="gesturemovestart";var b=c.DD.Drag.prototype._unprep;c.DD.Drag.prototype._unprep=function(){var e=this.get("node");b.call(this),e.detachAll("gesturemoveend")};var t="node",l="dragNode",d="offsetHeight",o="offsetWidth";c.DD.DDM.set("throttleTime",30),c.mix(c.DD.DDM,{_pg_size:function(){if(this.activeDrag){var e=c.one("body"),a=e.get("docHeight"),r=e.get("docWidth");this._pg.setStyles({height:a+"px",width:r+"px"})}},_createPG:function(){var e=c.Node.create("<div></div>"),a=c.one("body"),r;e.setStyles({top:"0",left:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:"red",display:"none",height:"5px",width:"5px"}),e.set("id",c.stamp(e)),e.addClass(c.DD.DDM.CSS_PREFIX+"-shim"),a.prepend(e),this._pg=e,this._pg.on("pointerup",c.bind(this._end,this)),r=c.one("win"),c.on("window:resize",c.bind(this._pg_size,this)),r.on("scroll",c.bind(this._pg_size,this))},_move:function(e){if(this.activeDrag){if(this._modernLongpress===!1||!e._event.cancelable){c.DD.DDM.stopDrag();return}this.activeDrag.get("lock")===!1&&(e.preventDefault(),this.activeDrag._move.call(this.activeDrag,e),this._dropMove())}},_setupListeners:function(){this._createPG(),this._active=!0,this._setupModernTouchListeners(),c.one(c.config.doc).on("gesturemove",c.throttle(c.bind(this._move,this),this.get("throttleTime"))),c.one(c.config.doc).on("pointercancel",this._end,this)},_setupModernTouchListeners:function(){var e=(function(s){this._modernTouchTimer=window.setTimeout((function(){this._modernTouchmoved||(this._modernLongpress=!0)}).bind(this),300)}).bind(this);c.config.doc.addEventListener("pointerdown",e,{passive:!1});var a=(function(s){this._modernLongpress?s.preventDefault():this._modernTouchmoved=!0}).bind(this);c.config.doc.addEventListener("pointermove",a,{passive:!1});var r=(function(s){window.clearTimeout(this._modernTouchTimer),this._modernLongpress=!1,this._modernTouchmoved=!1}).bind(this);c.config.doc.addEventListener("pointerup",r),this.on("destroy",function(){c.config.doc.removeEventListener("pointerdown",e,{passive:!1}),c.config.doc.removeEventListener("pointermove",a,{passive:!1}),c.config.doc.removeEventListener("pointerup",r)})},_attachEventsOnPgActivate:function(){}},!0),c.mix(c.DD.Drag.prototype,{initializer:function(){if(this.get(t).dd=this,!this.get(t).get("id")){var e=c.stamp(this.get(t));this.get(t).set("id",e)}this.actXY=[],this._invalids=c.clone(this._invalidsDefault,!0),this._createEvents(),this.get(l)||this.set(l,this.get(t)),this.get("dragDelegate")||this.once("initializedChange",c.bind(this._prep,this)),this.set("groups",this.get("groups"))},_prep:function(){this._dragThreshMet=!1;var e=this.get("node"),a=c.DD.DDM;e.addClass(a.CSS_PREFIX+"-draggable"),this.get("dragDelegate")||e.on(c.DD.Drag.START_EVENT,c.bind(this._handleMouseDownEvent,this),{minDistance:this.get("clickPixelThresh"),minTime:this.get("clickTimeThresh")}),e.on("pointerup",c.bind(this._handleMouseUp,this),{standAlone:!0}),e.on("dragstart",c.bind(this._fixDragStart,this))},_handleMouseUp:function(e){this.fire("drag:mouseup"),this._fixIEMouseUp(),this.get("dragging")&&e.preventDefault(),c.DD.DDM.activeDrag&&setTimeout(function(){c.DD.DDM._end()},0)}},!0),c.mix(c.DD.Drop.prototype,{initializer:function(){c.later(100,this,this._createEvents);var e=this.get(t),a;e.get("id")||(a=c.stamp(e),e.set("id",a)),e.addClass(c.DD.DDM.CSS_PREFIX+"-drop"),this.set("groups",this.get("groups")),c.DD.DDM.activeDrag&&c.DD.DDM.activeDrag.get("lock")===!1&&c.DD.DDM._addActiveShim(this)},_createShim:function(){if(!(!this.get(t)||!this.get(t)._node)){var e=c.DD.DDM;if(!e._pg){c.later(10,this,this._createShim);return}if(!this.shim){var a=this.get("node");this.get("useShim")&&(a=c.Node.create('<div id="'+this.get(t).get("id")+'_shim"></div>'),a.setStyles({height:this.get(t).get(d)+"px",width:this.get(t).get(o)+"px",backgroundColor:"yellow",opacity:".5",zIndex:"1",overflow:"hidden",top:"-900px",left:"-900px",position:"absolute"}),e._pg.appendChild(a),e.on("ddm:start",c.bind(this._handleOverEvent,this)),e.on("ddm:end",c.bind(this._handleOutEvent,this))),this.shim=a}}},_handleOverEvent:function(){this.shim&&this.shim.getDOMNode()&&this.shim.setStyle("zIndex","999"),c.DD.DDM._addActiveShim(this)},_handleOutEvent:function(){this.shim&&this.shim.getDOMNode()&&this.shim.setStyle("zIndex","1"),c.DD.DDM._removeActiveShim(this)},_handleOut:function(e){var a=c.DD.DDM;(!a.isOverTarget(this)||e)&&this.overTarget&&(this.overTarget=!1,a.activeDrag&&(this.get(t).removeClass(a.CSS_PREFIX+"-drop-over"),a.activeDrag.get(t).removeClass(a.CSS_PREFIX+"-drag-over"),this.fire("drop:exit",{drop:this,drag:a.activeDrag}),a.activeDrag.fire("drag:exit",{drop:this,drag:a.activeDrag}),delete a.otherDrops[this]))}},!0),c.DD.DDM.on("drag:start",function(){var e=c.config.doc.activeElement;e&&e.blur()})},"1.0",{requires:["dd","@sqs/yui-dd-wrappers/dd-behaviors"]})},845612:function(){YUI.add("@sqs/yui-dd-wrappers/mixins-event-registrar",function(c){c.namespace("SQS.DDWrappers.Mixins"),c.SQS.DDWrappers.Mixins.EventRegistrar=c.Base.create("eventRegistrar",c.Base,[],{destructor:function(){c.Array.invoke(this.get("eventListeners"),"detach")},_registerEvent:function(){if(c.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var b=0,t=arguments.length;b<t;b++)c.Lang.isValue(arguments[b])&&this.get("eventListeners").push(arguments[b])}},{ATTRS:{eventListeners:{value:[]}}})},"1.0",{requires:["array-invoke","base"]})},303353:function(){YUI.add("@sqs/yui-dd-wrappers/copies-position-animator",function(c){c.namespace("SQS.DDWrappers.Copies.PositionAnimator"),c.SQS.DDWrappers.Copies.PositionAnimator=c.Base.create("PositionAnimator",c.Plugin.Base,[],{hold:function(){this.set("originalTop",this.get("host").get("offsetTop")),this.set("originalLeft",this.get("host").get("offsetLeft")),this.previousPosition=this.get("host").getStyle("position")},release:function(b){var t=this.get("host").get("offsetTop"),l=this.get("host").get("offsetLeft"),d=this.get("baseSpeed")+(b?0:Math.random()*.2),o=b?0:200*Math.random(),e=this.get("originalTop")-t,a=this.get("originalLeft")-l;this.get("host").setStyles({position:"relative",top:e,left:a,transition:"none"});var r=this,s=this.get("host").anim({top:0,left:0},{from:{top:e,left:a},duration:d,end:function(){this.get("node")._node&&(this.get("node").setStyles({position:this.previousPosition,top:null,left:null,transition:null}),r.get("releasedFn")&&r.get("releasedFn")(),r.fire("released"))}});c.later(o,s,s.run)},destructor:function(){}},{NS:"positionAnimator",ATTRS:{originalTop:{},originalLeft:{},releasedFn:{value:!1},baseSpeed:{value:.2}}})},"1.0",{requires:["base","node","plugin"]})},644081:function(){YUI.add("@sqs/yui-dd-wrappers/dd-behaviors",function(c){var b="node",t="nodes",l="offsetHeight",d="offsetWidth",o="dragNode",e="dragging",a="drag:afterMouseDown",r="container",s=300;c.mix(c.DD.DDM,{bindTouchEvents:function(){var u=!1,h;function g(f){return function(m){if(clearTimeout(h),!(Array.from(m.targetTouches)>1)){if(m.type==="touchstart"){h=setTimeout(function(){p(f,m),u=!0},s);return}if(m.type==="touchend"){p(f,m),u=!1;return}if(!u){u=!1;return}m.preventDefault(),p(f,m)}}}function p(f,m){var _=m.touches[0],v=_?_.target:m.target,E=c.config.doc.createEvent("Event");E.initEvent(f,!0,!0),Object.keys(m).forEach(function(S){S!=="isTrusted"&&(E[S]=m[S])}),_&&Object.keys(_.__proto__).forEach(function(S){E[S]=_[S]}),v.dispatchEvent(E)}c.config.doc.addEventListener("touchstart",g("mousedown"),!0),c.config.doc.addEventListener("touchmove",g("mousemove"),{passive:!1}),c.config.doc.addEventListener("touchend",g("mouseup"),!0)},_setupListeners:function(){this._createPG(),this._active=!0,c.one(c.config.doc).on("gesturemove",c.throttle(c.bind(this._move,this),this.get("throttleTime")),{standAlone:!0}),c.UA.mobile&&this.bindTouchEvents()},_pg_size:function(){if(this.activeDrag){var u=c.one(document.documentElement),h=Math.max(u.get("scrollHeight"),u.get("docHeight")),g=Math.max(u.get("scrollWidth"),u.get("docWidth"));this._pg.setStyles({position:"fixed",height:h+"px",width:g+"px"})}},_move:function(u){this.activeDrag&&this.activeDrag.get("lock")===!1&&this.activeDrag.get("dragNode")&&this.activeDrag.get("dragNode").getDOMNode()&&(this.activeDrag._move.call(this.activeDrag,u),this._dropMove())},_createPG:function(){var u=c.Node.create("<div></div>"),h=c.one("body"),g;u.setStyles({top:"0",left:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:"red",display:"none",height:"5px",width:"5px"}),u.set("id",c.stamp(u)),u.addClass(c.DD.DDM.CSS_PREFIX+"-shim"),h.prepend(u),this._pg=u,g=c.one("win"),c.on("window:resize",c.bind(this._pg_size,this)),g.on("scroll",c.bind(this._pg_size,this))},_pg_activate:function(){this._pg||this._createPG();var u=this.activeDrag.get("activeHandle"),h="auto";u&&(h=u.getStyle("cursor")),h==="auto"&&(h=this.get("dragCursor")),this._pg_size(),this._pg.setStyles({top:0,left:0,display:"block",opacity:this._debugShim?".5":"0",cursor:h}),this._attachEventsOnPgActivate()},_pg_deactivate:function(){this._pg.setStyle("display","none"),this._pg.detachAll(),this._mouseEventsOutsideWindow&&(c.Array.invoke(this._mouseEventsOutsideWindow,"detachAll"),this._mouseEventsOutsideWindow=[])},_attachEventsOnPgActivate:function(){this._pg.on("mousemove",c.throttle(c.bind(this._move,this),this.get("throttleTime"))),this._pg.on("mouseup",c.bind(this._end,this)),this._mouseEventsOutsideWindow=[],this._pg.on("mouseleave",function(){for(var u=[0,0],h=c.config.win,g,p;h.frameElement;)g=h.frameElement.getClientRects()[0],u[0]+=g.left,u[1]+=g.top,h=h.parent,p=!0;this._mouseEventsOutsideWindow.push(c.one(h).on("mousemove",c.throttle(c.bind(function(f){p&&(f.clientX-=u[0],f.clientY-=u[1],f.pageX=c.config.doc.body.scrollLeft+f.clientX,f.pageY=c.config.doc.body.scrollTop+f.clientY),this._move(f)},this),this.get("throttleTime"))),c.one(h).on("mouseup",c.bind(this._end,this))),this._pg.once("mouseenter",function(){this._mouseEventsOutsideWindow&&(c.Array.invoke(this._mouseEventsOutsideWindow,"detachAll"),this._mouseEventsOutsideWindow=[])},this)},this)}},!0);var n=c.clone(c.DD.Drop.prototype._createShim);c.DD.Drop.prototype._createShim=function(){this.get(b)._node!==null&&c.Env&&n.call(this)},c.mix(c.DD.Drag.ATTRS,{dragDelegate:{value:null}},!0);var i=c.clone(c.DD.Drag.prototype._unprep);c.mix(c.DD.Drag.prototype,{_prep:function(){this._dragThreshMet=!1;var u=this.get(b);u.addClass(c.DD.DDM.CSS_PREFIX+"-draggable"),this.get("dragDelegate")||u.on(c.DD.Drag.START_EVENT,c.bind(this._handleMouseDownEvent,this)),u.on("mouseup",c.bind(this._handleMouseUp,this)),u.on("dragstart",c.bind(this._fixDragStart,this))},_unprep:function(){this.get(b)._node!==null&&i.call(this)},start:function(){var u=c.DD.DDM;if(!this.get("lock")&&!this.get(e)){var h=this.get(b),g,p,f;this._startTime=new Date().getTime(),u._start(),h.addClass(u.CSS_PREFIX+"-dragging"),this.fire("drag:start",{pageX:this.nodeXY[0],pageY:this.nodeXY[1],startTime:this._startTime}),h=this.get(o),this.proxy&&(this.get(b).removeClass(u.CSS_PREFIX+"-dragging"),h.addClass(u.CSS_PREFIX+"-dragging")),f=this.nodeXY,g=h.get(d),p=h.get(l),this.get("startCentered")&&this._setStartPosition([f[0]+g/2,f[1]+p/2]),this.region={0:f[0],1:f[1],area:0,top:f[1],right:f[0]+g,bottom:f[1]+p,left:f[0]},this.set(e,!0)}return this},_defMouseDownFn:function(u){var h=u.ev;if(this._dragThreshMet=!1,this._ev_md=h,this.get("primaryButtonOnly")&&h.button>1)return!1;this.validClick(h)&&(this._fixIEMouseDown(h),c.DD.Drag.START_EVENT.indexOf("gesture")!==0&&(this.get("haltDown")?h.halt():h.preventDefault()),this._setStartPosition([h.pageX,h.pageY]),c.DD.DDM.activeDrag=this,(this.get("clickTimeThresh")||!this.get("clickPixelThresh"))&&(this._clickTimeout=c.later(this.get("clickTimeThresh"),this,this._timeoutCheck))),this.fire(a,{ev:h})}},!0),c.mix(c.DD.Delegate.prototype,{initializer:function(){var u=this.get("container");!(u instanceof c.Node)&&c.Lang.isFunction(u.getDOMNode)&&this.set("container",c.Node(u.getDOMNode())),this._handles=[];var h=this.get(r),g=c.merge({clickTimeThresh:this.get("clickTimeThresh"),clickPixelThresh:this.get("clickPixelThresh"),dragDelegate:this,bubbleTargets:this},this.get("dragConfig"));g.node=this.get("dragNode").cloneNode(!0),this.get("handles")&&(g.handles=this.get("handles")),this.dd=new c.DD.Drag(g),this.dd.after("drag:end",c.bind(this._afterDragEnd,this)),this.dd.on("dragNodeChange",c.bind(this._onNodeChange,this)),this.dd.after("drag:mouseup",function(){this._unprep()}),this._handles.push(c.delegate(c.DD.Drag.START_EVENT,c.bind(this._delMouseDown,this),h,this.get(t))),this._handles.push(c.on("mouseenter",c.bind(this._onMouseEnter,this),h)),this._handles.push(c.on("mouseleave",c.bind(this._onMouseLeave,this),h)),c.later(50,this,this.syncTargets),c.DD.DDM.regDelegate(this)}},!0)},"1.0",{requires:["array-invoke","dd","dd-scroll","oop","plugin","@sqs/yui-dd-wrappers/copies-position-animator","@sqs/yui-dd-wrappers/dd-superproxy"]})},286709:function(){YUI.add("@sqs/yui-dd-wrappers/dd-superproxy",function(c){var b="dd-flying-back";c.namespace("SQS.DDWrappers.Plugin").DDSuperProxy=c.Base.create("DDSuperProxy",c.Plugin.DDProxy,[],{_init:function(){var t=c.DD.DDM;if(!t._proxy){t._createFrame(),c.on("domready",c.bind(this._init,this));return}this._hands||(this._hands=[]);var l,d,o=this.get("host"),e=o.get("dragNode");e.compareTo(o.get("node"))&&t._proxy&&o.set("dragNode",t._proxy),c.each(this._hands,function(a){a.detach()}),l=t.on("ddm:start",c.bind(function(){t.activeDrag===o&&o.get("node").inDoc()&&t._setFrame(o)},this)),d=o.on("drag:end",c.bind(function(){this.get("flyBack")?this._flyBackAndCleanupProxy():(this.get("moveOnEnd")&&o.get("node").setXY(o.lastXY),this._cleanupProxy())},this)),this._hands=[l,d]},clone:function(){var t=this.get("host"),l=t.get("node"),d=l.cloneNode(!0);return delete d._yuid,d.setAttribute("id",c.guid()),d.setStyle("position","absolute"),d.all('input[type="radio"]').removeAttribute("name"),this.get("cloneClass")&&d.addClass(this.get("cloneClass")),this.get("containerNode").appendChild(d),t.set("dragNode",d),this.get("hideOriginalNode")&&(this._originalHostVisiblity=l.getStyle("visibility"),l.setStyles({visibility:"hidden"})),d},_cleanupProxy:function(){var t=this.get("host"),l=t.get("node"),d=t.get("dragNode");this.get("hideOnEnd")?d.setStyle("display","none"):this.get("hideOriginalNode")&&l.setStyles({visibility:this._originalHostVisiblity||null}),this.get("cloneNode")&&(d.remove(),t.set("dragNode",c.DD.DDM._proxy))},_flyBackAndCleanupProxy:function(){var t=this.get("host"),l=t.get("node"),d=t.get("dragNode"),o=l.getDOMNode().getBoundingClientRect(),e=d.getDOMNode().getBoundingClientRect(),a=e.top-o.top,r=e.left-o.left;this._cleanupProxy();var s=[];l.addClass(b),l.setStyles({transition:"none",zIndex:Math.pow(10,6)}),l.setStyles({transform:"translate("+r+"px, "+a+"px)"});var n=this.get("flyBackDuration"),i="transform";c.UA.webkit&&(i="-webkit-transform"),s.push({requireTicks:1,transition:i+" "+n+"s cubic-bezier(0.445, 0.05, 0.55, 0.95)"}),s.push({requireTicks:1,transform:"translate(0px, 0px)"});function u(){l.setStyles({zIndex:null,transition:null}),l.removeClass(b)}function h(){if(s.length!==0){if(c.Lang.isNumber(s[0].requireTicks)&&s[0].numTicks!==s[0].requireTicks){c.Lang.isNumber(s[0].numTicks)?s[0].numTicks++:s[0].numTicks=0,c.config.win.requestAnimationFrame(h);return}var g=s.shift();c.UA.webkit&&g.transform&&(g.webkitTransform=g.transform),l.setStyles(g),c.config.win.requestAnimationFrame(h),s.length===0&&c.later(44,this,function(){u()})}}c.config.win.requestAnimationFrame(h)}},{NS:"proxy",ATTRS:{cloneNode:{value:!0},hideOriginalNode:{value:!0},cloneClass:{value:null},movingClass:{value:null},flyBack:{value:!0},flyBackDuration:{value:.3},moveOnEnd:{value:!0},hideOnEnd:{value:!1},containerNode:{getter:function(t){return t||this.get("host").get("node").get("parentNode")}}}})},"1.0",{requires:["anim","dd-proxy"]})},997202:function(){YUI.add("@sqs/yui-dd-wrappers/dd-delegate",function(c){c.namespace("SQS.DDWrappers.DD");var b=9,t=c.Node.create("<div>Temp Node</div>"),l=!1;l&&(c.DD.DDM._debugShim=!0);var d=c.SQS.DDWrappers.DD.Delegate=c.Base.create("ddDelegate",c.DD.Delegate,[c.SQS.DDWrappers.Mixins.EventRegistrar],{initializer:function(o){this._syncDragReorderPlugin(),this.after(["enableDragReorderChange","dragReorderConfigChange"],this._syncDragReorderPlugin),this._syncDragScrollPlugin(),this.after(["enableDragScrollChange","dragScrollConfigChange","scrollNodeChange"],this._syncDragScrollPlugin),this._syncDragConstrainedPlugin(),this.after(["enableDragConstrainedChange","dragConstrainedConfigChange"],this._syncDragConstrainedPlugin),this.on("scroll:end",function(){var e=c.Plugin.DDConstrained;this.dd[e.NS]&&this.dd[e.NS].resetCache()}),this.on("reorder:sync",function(){c.later(300,this,this.syncTargets)})},destructor:function(){this._scrollListener&&(this._scrollListener.detach(),this._scrollListener=null),this._cancelDragUnlockDelay(),this.dd.unplug(),this.unplug()},_syncDragReorderPlugin:function(){var o=c.SQS.DDWrappers.DD.Reorder;this._syncPlugin(o,this.get("dragReorderConfig"),this.get("enableDragReorder"))},_syncDragScrollPlugin:function(){var o=c.SQS.DDWrappers.DD.Scroll;this._syncPlugin(o,this.get("dragScrollConfig"),this.get("enableDragScroll"))},_syncDragConstrainedPlugin:function(){var o=c.Plugin.DDConstrained;this._syncPlugin(o,this.get("dragConstrainedConfig"),this.get("enableDragConstrained"))},_syncPlugin:function(o,e,a){var r=this.dd.hasPlugin(o.NS);a?r?this.dd[o.NS].setAttrs(e):this.dd.plug(o,c.merge(e,{bubbleTargets:this})):r&&this.dd.unplug(o.NS)},_onDragMouseDownMobile:function(){this._cancelDragUnlockDelay(),this._preventDragStartOnScrollMobile(),this.dd.set("lock",!0),this._dragUnlockDelay=c.later(this.dd.get("clickTimeThresh"),this,function(){this.dd.set("lock",!1)})},_cancelDragUnlockDelay:function(){this._dragUnlockDelay&&(this._dragUnlockDelay.cancel(),this._dragUnlockDelay=null)},_preventDragStartOnScrollMobile:function(){var o=this.get("scrollEmitterNode");this._scrollListener&&this._scrollListener.detach(),this._scrollListener=o.on(["scroll","overScroll"],function(){this._scrollListener.detach(),this._cancelDragUnlockDelay()},this)},_afterDragEnd:function(){c.DD.DDM._noShim=this._shimState;var o=this.dd.get("node");this.set("lastNode",o),o&&c.Lang.isValue(o._node)&&o.removeClass(c.DD.DDM.CSS_PREFIX+"-dragging"),this.dd._unprep(),this.dd.set("node",t)},syncTargets:function(){if(d.superclass.syncTargets.apply(this,arguments),this.dd.get("dragging")){var o=c.Plugin.DDConstrained;this.dd[o.NS]&&this.dd[o.NS].resetCache();var e=c.SQS.DDWrappers.DD.Scroll;this.dd[e.NS]&&this.dd[e.NS].resetCache()}},createDrop:function(o,e){var a=this.dd.get("dragging");if(a){if(o===this.dd.get("dragNode")||o===this.dd.get("node"))return;d.superclass.createDrop.apply(this,arguments),o.drop._activateShim()}else d.superclass.createDrop.apply(this,arguments)},_delMouseDown:function(o){var e=o.currentTarget,a=this.dd,r=e,s=this.get("dragConfig"),n=this.get("nodes"),i=this.get("invalidHandles");e.test(n)&&!e.test(this.get("invalid"))&&(!i||!o.target.ancestor(i,!0,n))&&(this._shimState=c.DD.DDM._noShim,c.DD.DDM._noShim=!0,this.set("currentNode",e),a.set("node",e),s&&s.dragNode?r=s.dragNode:a.proxy&&(r=c.DD.DDM._proxy),a.set("dragNode",r),a._prep(),a.fire("drag:mouseDown",{ev:o}))}},{ATTRS:{invalidHandles:{value:""},enableDragReorder:{value:!1},dragReorderConfig:{value:{},setter:function(o){return c.merge({nodesSelector:this.get("nodes"),container:this.get("container")},o)}},enableDragConstrained:{value:!1},dragConstrainedConfig:{value:{},setter:function(o){return c.merge({constrain:this.get("container")},o)}},enableDragScroll:{valueFn:function(){return this.get("enableDragReorder")}},dragScrollConfig:{value:{},getter:function(o){var e=c.merge(o,{scrollNode:this.get("scrollNode"),scrollEmitterNode:this.get("scrollEmitterNode"),contentNode:this.get("container").one(this.get("nodes"))||this.get("container")});if(this.get("enableDragConstrained")){var a=this.get("dragConstrainedConfig.constrain");a instanceof c.Node&&e.scrollNode.contains(a)&&(e.constraintNode=a)}return e}},scrollNode:{valueFn:function(){return c.one(this.get("container")).ancestor(function(o){var e=o.getComputedStyle("overflowY");return e==="auto"||e==="scroll"},!0)||c.one(c.config.doc.body)}},scrollEmitterNode:{valueFn:function(){var o=this.get("scrollNode");if(o.test("html, body")){for(var e=o.getDOMNode();e.nodeType!==b;)e=e.parentNode;return c.one(e)}return o}},target:{value:!0}}})},"1.0",{requires:["base","dd","dd-constrain","@sqs/yui-dd-wrappers/dd-behaviors","@sqs/yui-dd-wrappers/dd-reorder","@sqs/yui-dd-wrappers/dd-scroll","@sqs/yui-dd-wrappers/mixins-event-registrar"]})},766559:function(){var c={globalGrid:22};function b(t,l,d){var o;return function(){var e=this,a=arguments,r=function(){o=null,d||t.apply(e,a)},s=d&&!o;clearTimeout(o),o=setTimeout(r,l),s&&t.apply(e,a)}}YUI.add("@sqs/yui-dd-wrappers/dd-reorder",function(t){var l="dd-drag-grouped-item",d=2;t.namespace("SQS.DDWrappers.DD");var o=t.SQS.DDWrappers.DD.Reorder=t.Base.create("reorder",t.Plugin.Base,[t.SQS.DDWrappers.Mixins.EventRegistrar],{initializer:function(){this.publish("reorder"),this.publish("reordered"),this.publish("sync",{emitFacade:!0,defaultFn:this._syncDropShims}),this.onHostEvent("drag:start",this._onDragStart),this.onHostEvent("drag:enter",this._onDragEnter),this.onHostEvent("drag:align",this._onDragAlign),this.onHostEvent("drag:end",this._onDragEnd),this._plugProxyToHost()},_plugProxyToHost:function(){var e=this.get("host"),a=t.SQS.DDWrappers.Plugin.DDSuperProxy,r=this.getAttrs(["movingClass","cloneClass"]);e.hasPlugin(a.NS)?e[a.NS].setAttrs(r):e.plug(a,r)},_onDragStart:function(){var e=this._getAllReorderableNodes(),a=this._filterReorderingNodesFrom(e),r=a.length>1,s=this.get("host").get("node"),n=this.get("host").get("dragNode");a.forEach(function(i){i.setData("startIndex",e.indexOf(i)),r&&i!==s&&i.addClass(l)}),r&&(a.length>1&&n.append(t.Lang.sub(o.TEMPLATE_ITEMS_COUNT,{count:a.length})),this.fire("sync")),this.set("reorderingNodes",a)},_filterReorderingNodesFrom:function(e){var a=this.get("selectedClassSelector"),r=this.get("host").get("node"),s=[r];if(this.get("enableGrouping")&&r.test(a)){var n=e.filter(function(i){return i=t.one(i),i!==r&&i.test(a)});s=s.concat(t.Array.map(n.getDOMNodes(),t.Node))}return s},_onDragEnter:function(e){if(!e.drop.get("node").hasClass(l)){var a=this._reorderNodes(e.drop.get("node"),e.drag.get("node"));this._fireReorderEvent(a)}},_fireReorderEvent:function(e){var a=this.get("host"),r=a.get("node").getData("startIndex"),s=e;this.get("enableGrouping")&&t.Array.some(this.get("reorderingNodes").slice(1),function(n){var i=n.getData("startIndex");return i<e||i===e&&i>r?(s--,!1):!0}),this.fire("reorder",{reorder:{node:a.get("node"),proxyNode:a.get("dragNode"),newIndex:e,visibleIndex:s}})},_onDragAlign:function(e){if(this.get("enableGrouping")){var a=this.get("host").get("dragNode"),r={};r.top=parseInt(a.getComputedStyle("top"),10),r.left=parseInt(a.getComputedStyle("left"),10);var s=this.get("reorderingNodes"),n=s.length,i=Math.pow(10,5);s.slice(1).forEach(function(u,h){if(h+1>d){u.setStyles({visibility:"hidden"});return}u.setStyles({top:r.top+(h+1)*c.globalGrid,left:r.left+(h+1)*c.globalGrid,zIndex:i+(n-h)})}),a.setStyles({zIndex:i+n})}},_onDragEnd:function(e){var a=this.get("reorderingNodes");a.length>1&&this._insertGroupNodesInOrder(a);var r=this._getAllReorderableNodes(),s=!1,n=t.Array.map(a,function(i){var u=i.getData("startIndex"),h=r.indexOf(i);return i.clearData("startIndex"),!s&&u!==h&&(s=!0),{node:i,newIndex:h,oldIndex:u}}).sort(function(i,u){return u.newIndex<i.newIndex});s&&this.fire("reordered",{reordered:this.get("enableGrouping")?n:n[0],allSiblings:r}),this.set("reorderingNodes",[]),r.unplug(t.SQS.DDWrappers.Copies.PositionAnimator.NS)},_getAllReorderableNodes:function(){var e=this.get("nodesSelector"),a=this.get("cloneClass");return a&&(e+=":not(."+a+")"),this.get("enableGrouping")&&(e+=":not(."+l+")"),this.get("container").all(e)},_insertGroupNodesInOrder:function(e){t.Array.invoke(e,"removeClass",l),this._reorderNodes(e[0],e.slice(1)),e.slice(1).forEach(function(a){a.setStyles({top:null,left:null,zIndex:null,visibility:null})})},_getNodesInBetween:function(e,a){var r=Math.min.apply(Math,e),s=Math.max.apply(Math,e),n=this.get("host").get("node").getDOMNode();return a.slice(r,s+1).filter(function(i){return i!==n})},_reorderNodes:function(e,a){var r=this._getAllReorderableNodes(),s=t.Lang.isArray(a),n=s?a[0]:a,i=r.indexOf(e),u=r.indexOf(n),h=[i,u];s&&h.push(r.indexOf(a[a.length-1]));var g=this._getNodesInBetween(h,r);if(this._rememberCurrentPosition(g),!s)e.insert(n,u<i?"after":"before");else{var p=e.getData("startIndex");a.forEach(function(f){f.getData("startIndex")<p?e.insert(f,"before"):(e.insert(f,"after"),e=f)})}return this._animateToMovedPosition(g),i},_rememberCurrentPosition:function(e){e.each(function(a){a.positionAnimator||a.plug(t.SQS.DDWrappers.Copies.PositionAnimator,{releasedFn:this._syncDropShims}),a.positionAnimator.hold()},this)},_animateToMovedPosition:function(e){e.each(function(a){a.positionAnimator.release(!0)},this)},_syncDropShims:b(function(){t.DD.DDM.syncActiveShims(!0)},30)},{TEMPLATE_ITEMS_COUNT:'<div class="dd-reorder-items-count">{count}</div>',NS:"dd-reorder",ATTRS:{container:{valueFn:function(){return this.get("host").get("container")},getter:function(e){return typeof e=="string"?t.one(e):e},validator:function(e){return typeof e=="string"||e instanceof t.Node}},nodesSelector:{value:""},selectedClassSelector:{value:".selected"},enableGrouping:{value:!1},movingClass:{value:"yui3-dd-super-proxy-moving"},cloneClass:{value:"yui3-dd-super-proxy-clone"},reorderingNodes:{value:[]}}})},"1.0",{requires:["array-invoke","base","plugin","@sqs/yui-dd-wrappers/copies-position-animator","@sqs/yui-dd-wrappers/dd-superproxy","@sqs/yui-dd-wrappers/mixins-event-registrar"]})},411360:function(){YUI.add("@sqs/yui-dd-wrappers/dd-scroll",function(c){c.namespace("SQS.DDWrappers.DD");var b={NONE:0,UP:-1,DOWN:1},t={};c.Object.each(b,function(d,o){t[d]=o.toLowerCase()});var l=c.SQS.DDWrappers.DD.Scroll=c.Base.create("scroll",c.Plugin.Base,[c.SQS.DDWrappers.Mixins.EventRegistrar],{initializer:function(){this.publish("start"),this.publish("end"),this._registerEvent(this.get("host").before("drag:start",this._prepareScrollOnDragStart,this)),this.onHostEvent("drag:drag",this._forceContentNodeDimension),this.onHostEvent("drag:end",this._cleanScrollPrep),this.onHostEvent("drag:enter",this._onDragEnterDropZone),this.onHostEvent("drag:exit",this._onDragExitDropZone),this.after("lockedChange",this._syncDirectionAndRelativeMouseY),this.after("directionChange",this._afterDirectionChange),this.after("scrollingChange",this._afterScrollingChange),this.set("isScrollNodeBody"),this.after("scrollNodeChange",this.set.bind(this,"isScrollNodeBody"))},destructor:function(){this._cleanScrollPrep(),this._stopScroll()},_afterScrollingChange:function(d){d.newVal?this.fire("start",{direction:t[this.get("direction")]}):this.fire("end",{isScrollLocked:this.get("locked")})},_prepareScrollOnDragStart:function(){var d=this.get("scrollNode"),o=this.get("contentNode"),e=this.get("isScrollNodeBody"),a=d.get("scrollHeight"),r=e?c.config.win.innerHeight:d.get("clientHeight");if(this._dragListener&&this._dragListener.detach(),a>r){var s=d.get("region");e&&(s=c.merge(s,{bottom:s.top+r,height:r})),this._dragListener=this.onHostEvent("drag:drag",this._syncDirectionAndRelativeMouseY),this.setAttrs({scrollNodeRegion:s,scrollTopLimit:this._getScrollTopLimit(a,r),locked:!!(c.DD.DDM.activeDrop&&c.DD.DDM.activeDrop.get("lockScroll")),lockableTargets:c.Array.filter(c.DD.DDM.targets,function(n){return n.get("lockScroll")})})}this.setAttrs({contentNodeHeight:o.getComputedStyle("height"),contentNodeWidth:o.getComputedStyle("width")}),d.setStyle("overflowX","hidden")},resetCache:function(){var d=this.get("scrollNode"),o=this.get("contentNode"),e=d.get("scrollHeight"),a=this.get("isScrollNodeBody")?c.config.win.innerHeight:d.get("clientHeight");this.setAttrs({scrollTopLimit:this._getScrollTopLimit(e,a),contentNodeHeight:o.getComputedStyle("height")})},_getScrollTopLimit:function(d,o){var e=0,a=d-o,r=this._getConstraintNodeOffset();return r&&(e=l.clampValue(r.top,e,a),a=l.clampValue(r.bottom-o,e,a)),{min:e,max:a}},_getConstraintNodeOffset:function(d){var o=this.get("constraintNode");if(!o)return null;var e=o.get("region"),a=this.get("contentNode").get("region");return d=typeof d=="number"?d:30,{top:e.top-d-a.top,bottom:e.bottom+d-a.top}},_cleanScrollPrep:function(){this._dragListener&&(this._dragListener.detach(),this._dragListener=null),this._delayTimer&&(this._delayTimer.cancel(),this._delayTimer=null),this.set("direction",b.NONE),this.get("scrollNode").setStyle("overflowX",null);var d=this.get("contentNode");d&&d.getDOMNode()&&d.setStyles({height:null,width:null})},_afterDirectionChange:function(d){if(this._delayTimer&&(this._delayTimer.cancel(),this._delayTimer=null),d.newVal===b.NONE){this._stopScroll();return}this._delayTimer=c.later(this.get("initialDelay"),this,this._startScroll)},_syncDirectionAndRelativeMouseY:function(){if(this.get("locked")){this.set("direction",b.NONE);return}this.set("relativeMouseY",this._getRelativeMouseY()),this.set("direction",this._getNewScrollDirection())},_getRelativeMouseY:function(){var d=this.get("scrollNodeRegion"),o=this.get("host").mouseXY[1];return this.get("isScrollNodeBody")&&(o+=d.top-this._getCurrentScrollTop()),{top:o-d.top,bottom:d.bottom-o}},_getNewScrollDirection:function(){var d=this.get("relativeMouseY"),o=this.get("pixelThreshold"),e=this.get("scrollTopLimit"),a=b.NONE,r=this._getCurrentScrollTop();return d.top<=o?r>e.min&&(a=b.UP):d.bottom<=o&&r<e.max&&(a=b.DOWN),a},_startScroll:function(){c.Lang.isValue(this._scrollAnim)||(this._bindScrollEvents(),this._scrollAnim=new c.Anim({node:this.get("scrollNode"),duration:.24,easing:"easeNone",to:{scroll:[0,this._getNextScrollTop()]}}),this._scrollAnim.on("end",this._onScrollAnimEnd,this),this._scrollAnim.on("tween",this._getSyncActiveDragPosFn(),this),this.set("scrolling",!0),this._scrollAnim.run())},_bindScrollEvents:function(){var d=this.get("scrollEmitterNode"),o=l.NS;d.detach(o+"|*"),d.on(o+"|scroll",c.throttle(c.bind(function(){this._scrollAnim&&this._repositionLockableDropTargets()},this),20),this)},_getWeightedScrollSpeed:function(){var d=this.get("direction"),o=this.get("pixelThreshold"),e=this.get("relativeMouseY")[d===b.UP?"top":"bottom"];return Math.min(this.get("defaultSpeed")*(o-e)/o,this.get("maxSpeed"))},_getNextScrollTop:function(){var d=this.get("scrollTopLimit"),o=this.get("direction")*this._getWeightedScrollSpeed();return l.clampValue(this._getCurrentScrollTop()+o,d.min,d.max)},_getCurrentScrollTop:function(){return this.get("scrollNode").get("scrollTop")},_onScrollAnimEnd:function(){var d=this._getNextScrollTop(),o=this._getCurrentScrollTop();d!==o?(this._scrollAnim.set("to.scroll",[0,d]),this._scrollAnim.run()):(this.set("direction",b.NONE),this.set("scrolling",!1))},_getSyncActiveDragPosFn:function(){var d=this.get("host"),o=this._getCurrentScrollTop();return this.get("isScrollNodeBody")?function(){var e=this._getCurrentScrollTop(),a=e-o;d.mouseXY=[d.mouseXY[0],d.mouseXY[1]+a],d._alignNode(d.mouseXY),o=e}:function(){d._alignNode(d.mouseXY)}},_stopScroll:function(){this.get("scrollEmitterNode").detach(l.NS+"|*");var d=this._scrollAnim;d&&(d.get("running")&&(d.detach("end"),d.stop()),this._destroyScrollAnim()),this.set("scrolling",!1),c.DD.DDM.syncActiveShims()},_destroyScrollAnim:function(){this._scrollAnim.destroy(!0),this._scrollAnim=null},_onDragEnterDropZone:function(d){d.drop.get("lockScroll")&&this.set("locked",!0)},_onDragExitDropZone:function(d){d.drop.get("lockScroll")&&this.set("locked",!1)},_repositionLockableDropTargets:function(){c.Array.each(this.get("lockableTargets"),function(d){d.sizeShim()})},_forceContentNodeDimension:function(){this.get("contentNode").setStyles({width:this.get("contentNodeWidth"),height:this.get("contentNodeHeight")})}},{clampValue:function(d,o,e){return Math.max(o,Math.min(d,e))},NS:"ddScroll",ATTRS:{scrollNode:{value:null},isScrollNodeBody:{setter:function(){return this.get("scrollNode").test("body, html")}},scrollEmitterNode:{value:null,writeOnce:!0},contentNode:{value:null,setter:function(d){var o=this.get("scrollNode");if(this.get("isScrollNodeBody"))return o;var e=d&&d.ancestor(function(a){return a&&a.ancestor()===o},!0);return e||(e=o.get("children").item(0)||o),e}},constraintNode:{value:null},scrollNodeRegion:{value:null},contentNodeHeight:{value:"0px"},contentNodeWidth:{value:"0px"},scrollTopLimit:{value:{min:0,max:0}},relativeMouseY:{value:{top:0,bottom:0}},locked:{value:!1},scrolling:{value:!1},direction:{value:b.NONE},lockableTargets:{value:[]},initialDelay:{value:150},maxSpeed:{value:c.UA.mobile?300:800},defaultSpeed:{value:c.UA.mobile?150:400},pixelThreshold:{value:80}}})},"1.0",{requires:["base","@sqs/yui-dd-wrappers/mixins-event-registrar"]})},764397:function(){YUI.add("@sqs/layout-engine/dimensions",function(c){"use strict";var b=null,t=["marginLeft","borderLeftWidth","paddingLeft","paddingRight","borderRightWidth","marginRight"],l=["marginTop","borderTopWidth","paddingTop","paddingBottom","borderBottomWidth","marginBottom"];c.Node.emToPx=function(d){return b||(b=c.config.doc.createElement("div"),b.style.position="absolute",b.style.top="-10000px",b.style.left="-10000px",b.style.visibility="hidden",b.style.width="10em",b.style.height="10em",c.config.doc.body.appendChild(b)),(d||1)*(b.offsetWidth/10)},c.Node.prototype.totalWidth=function(){return this._node.offsetWidth+this.parseDimensionStyle("marginLeft")+this.parseDimensionStyle("marginRight")},c.Node.prototype.totalHeight=function(){return this._node.offsetHeight+this.parseDimensionStyle("marginTop")+this.parseDimensionStyle("marginBottom")},c.Node.prototype.insideWidth=function(){return this._node.clientWidth-this.parseDimensionStyle("paddingLeft")-this.parseDimensionStyle("paddingRight")},c.Node.prototype.insideHeight=function(){return this._node.clientHeight-this.parseDimensionStyle("paddingTop")-this.parseDimensionStyle("paddingBottom")},c.Node.prototype.horizMarginBorderPadding=function(){return c.Array.reduce(t,0,function(d,o){return d+this.parseDimensionStyle(o)},this)},c.Node.prototype.vertMarginBorderPadding=function(){return c.Array.reduce(l,0,function(d,o){return d+this.parseDimensionStyle(o)},this)},c.Node.prototype.parseDimensionStyle=function(d){var o=this.getComputedStyle(d);if(!o||!/^[0-9]/.test(o))return 0;var e=parseFloat(o,10);return/em$/.test(o)&&(e*=c.Node.emToPx(1)),Math.round(e)}},"1.0",{requires:["node-style","array-extras"]})},326610:function(c,b,t){"use strict";var l=t(406167),d=t.n(l),o=t(636485),e=!1,a=function(){};YUI.add("@sqs/layout-engine/edit-controller-base",function(r){r.namespace("SQS.LayoutEngine"),r.SQS.LayoutEngine.EditControllerBase=r.Base.create("editcontroller",r.Base,[r.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(){e&&console.log("[le] edit-controller-base - initializer"),this._scrollNodes=[],this.changedLayouts=[],this._nodeIdToLayoutBuilderMap={},o.Z.initialize(),this.after("editingChange",this._syncEditing,this),this.after("dropInfoChange",this._afterDropInfoChange,this)},_syncEditing:function(s){s.silent||(e&&console.log("[le] edit-controller-base - _syncEditing",s),s.newVal?this._enableEditing():this._disableEditing())},_afterDropInfoChange:function(s){s.newVal?this.alignInsertMarker(s.newVal):this.hideInsertMarker()},getLayoutNodes:function(){return r.all(".sqs-layout")},pluginLayoutBuilder:function(s,n,i,u){var h=r.SQS.LayoutEngine.Layout.Builder.NS;return s.hasPlugin(h)||(r.Lang.isValue(i)||(i=this.get("defaultEditMode")),s.plug(r.SQS.LayoutEngine.Layout.Builder,{editController:this,layout:n,editMode:i,startupBlockId:u})),s[h]},destroyLayoutBuilder:function(s){s.unplug(r.SQS.LayoutEngine.Layout.Builder.NS),delete this._nodeIdToLayoutBuilderMap[s.generateID()]},pluginLayoutEditor:function(s){e&&console.log("[le] edit-controller-base - plugin a layout editor for",s);var n=s.layoutNode,i=s.layoutModel,u=s.scrollNode||this.get("scrollNode"),h=s.editMode||this.get("defaultEditMode"),g=s.startupBlockId||null,p=s.layoutTutorialPromise||r.when(),f=s.dragDropLock;if(this.get("editing")||this.set("editing",!0,{silent:!0}),!n.hasPlugin(r.SQS.LayoutEngine.Layout.Builder.NS)){var m=n.generateID();this._nodeIdToLayoutBuilderMap[m]=this.pluginLayoutBuilder(n,i,h,g)}var _=n.plug(r.SQS.LayoutEngine.Layout.Editor,{editMode:h,editController:this,scrollNode:u,forceSingleColumn:this.get("forceSingleColumn"),markdownMode:this.get("markdownMode"),columns:r.SQS.LayoutEngine.Layout.Utils.getValFromClass(n,"sqs-grid-"),startupBlockId:g,layoutTutorialPromise:p,dragDropLock:f})[r.SQS.LayoutEngine.Layout.Editor.NS];return r.one(r.config.doc.body).addClass("sqs-layout-editing"),this.initializeBlockTrash(),_},layoutBuilderForNodeId:function(s){return this._nodeIdToLayoutBuilderMap[s]},initializeBlockTrash:function(){this._blockTrashInstance||(this._blockTrashInstance=new r.SQS.LayoutEngine.Layout.BlockTrash({editController:this}))},getBlockTrashInstance:function(){return this.initializeBlockTrash(),this._blockTrashInstance},destroyBlockTrashInstance:function(){this._blockTrashInstance&&(this._blockTrashInstance.destroy(),this._blockTrashInstance=null)},destroyLayoutEditor:function(s){var n=r.SQS.LayoutEngine.Layout.Editor.NS;this.destroyLayoutBuilder(s),this._destroyInsertMarkerInstance(),this._destroyInsertMenus(),s.unplug(n);var i=this.getLayoutNodes().some(function(u){return u.hasPlugin(n)});i||r.one(r.config.doc.body).removeClass("sqs-layout-editing")},layoutBeforeDragStart:function(){this.getLayoutNodes().each(function(s){r.Lang.isObject(s.LayoutEditor)&&s.LayoutEditor.beforeDrag()},this)},layoutDragStart:function(s){r.one("html").addClass("sqs-dragging-block"),this.changedLayouts.push(s),this.setInsertMarkerLayout(s)},processEdgeInfo:function(s){var n=s.newVal;if(!n||!r.DD.DDM.activeDrag){this.set("dropInfo",null);return}var i=this.get("dropBlockInfo"),u=this._getDropTarget(n.node),h=i.ancestors,g=i.parentLayout,p=u.getData("isAdjacentToBlockEdge"),f=n.direction,m=this.getType(u),_=this._getClosestBlock(u);if(!i.blockNode||i.blockNode!==_){var v=".sqs-block, .sqs-col, .sqs-row, .sqs-layout";h=_.ancestors(v,!0,".sqs-layout"),g=h.shift(),this.set("dropBlockInfo",{blockNode:_,parentLayout:g,ancestors:h})}var E=r.DD.DDM.activeDrag.get("dragWidget");if(E){var S=E.get("floatable")&&m==="content"&&this._isHorizontalDirection(f);!S&&(this.get("forceSingleColumn")||g.LayoutEditor.get("columns")===1)&&(f=n.quad.y),this._isTraversableDirection(f,p)&&(u=this._getTraversedDropNode(u,f,n),m=this.getType(u),S=S&&m==="content"),m==="content"?!S&&this._isHorizontalDirection(f)&&(u=u.ancestor(this.get("contentParentBlockSelector")),m=this.getType(u)):m==="block"&&this._isHorizontalDirection(f)&&this._isOnlyBlockInColumn(u)&&(u=u.ancestor(".sqs-col"),m=this.getType(u)),this.set("dropInfo",{node:u,type:m,direction:f,region:this._getDropRegion(u,n),shouldFloat:S,isSelf:u.getStyle("visibility")==="hidden"})}},_getClosestBlock:function(s){var n=this.getType(s);return n==="content"?s.ancestor(".sqs-block"):s},_getDropTarget:function(s){return s.hasClass("sqs-content-overlay")?s.getData("alignNode"):s},_getDropRegion:function(s,n){return s===n.node?n.region:s.get("region")},_isTraversableDirection:function(s,n){var i=!0;return n&&n[s]!==void 0&&(i=n[s]),i},_getTraversableDepth:function(s,n,i){for(var u=i.size(),h=0;s&&this._canTraverseToParent(s,n);)h++,s=i.item(--u);return h},_canTraverseToParent:function(s,n){var i=s.hasClass("sqs-col"),u=!this.get("forceSingleColumn");return i&&this._isVerticalDirection(n)||u&&this._canTraverseHorizontallyFromColumn(n,s)||!i&&u&&this._isHorizontalDirection(n)||this._canTraverseVerticallyFromBlockOrRow(n,s)},_getTraversedDropNode:function(s,n,i){var u=this.get("dropBlockInfo.ancestors");this.get("forceSingleColumn")&&(u=u.filter(".sqs-block"));var h=this._getTraversableDepth(s,n,u);if(h){var g=u.size(),p=g-h,f=Math.min(i.region.width,i.region.height)/4,m=Math.floor(g*i.distance/f);m=Math.max(p,Math.min(g,m)),s=u.item(m)||s}return s},_isHorizontalDirection:function(s){return s==="left"||s==="right"},_isVerticalDirection:function(s){return s==="top"||s==="bottom"},_canTraverseHorizontallyFromColumn:function(s,n){return s==="left"&&!n.previous(".sqs-col")||s==="right"&&!n.next(".sqs-col")},_canTraverseVerticallyFromBlockOrRow:function(s,n){return s==="top"&&!n.previous(".sqs-block, .sqs-row")||s==="bottom"&&!n.next(".sqs-block, .sqs-row")},_isOnlyBlockInColumn:function(s){return s.siblings(".sqs-block:not(.sqs-float), .sqs-row").size()===0},getType:function(s){if(!s)return"unknown";if(s.hasClass("sqs-block")||s.hasClass("free-block"))return"block";if(s.hasClass("sqs-col"))return"column";if(s.hasClass("sqs-row"))return"row";if(s.ancestor(this.get("contentParentBlockSelector")))return"content"},layoutDragEnd:function(){r.one("html").removeClass("sqs-dragging-block"),this.insertBlockToLayout(!0,!1),this.getLayoutNodes().each(function(s){s.hasPlugin(r.SQS.LayoutEngine.Layout.Editor.NS)&&s.LayoutEditor.afterDrag(),s.hasPlugin(r.SQS.LayoutEngine.Layout.Builder.NS)&&s.LayoutBuilder.fire("widget:contentUpdate")},this),this.changedLayouts.length&&this.cleanGrids()},insertBlockToLayout:function(s,n){var i=this.get("dropInfo"),u=this.get("selection");if(!(!r.Lang.isValue(i)||!r.Lang.isValue(i.node)||!u)){var h=this._getBlockNodeListFromSelection(u,i);if(h.size()){var g=i.node.ancestor(".sqs-layout");if(!g)return;var p=[],f=!1;h.each(function(m){g.LayoutEditor.insertBlock(m,i,s),p.push(r.Widget.getByNode(m))}),r.Array.each(this.changedLayouts,function(m){m===g?f=!0:m.LayoutBuilder.deregisterBlocks(p)}),f||this.changedLayouts.push(g),h.each(function(m){r.SQS.LayoutEngine.Events.fire("layout-engine:insert-block",{blockWidget:r.Widget.getByNode(m),isMoveBlock:s,isFromCurrentLayout:f,isDragDrop:n})}),this.cleanGrids(),r.Array.each(p,function(m){m&&!m.get("destroyed")&&(g.LayoutBuilder.registerBlock(m),m.show())}),this.setAttrs({dropInfo:null,dropBlockInfo:{},selection:null})}}},_getBlockNodeListFromSelection:function(s,n){if(s){if(r.SQS.LayoutEngine.Layout.Utils.isBlock(s)&&!s.hasClass("sqs-destroyme"))return new r.NodeList(s);if(!r.Lang.isValue(n))return new r.NodeList(s)}return new r.NodeList},cleanGrids:function(s){s?r.Lang.isArray(s)||(s=[s]):(s=this.changedLayouts||[],this.changedLayouts=[]),s.forEach(function(n){n.LayoutEditor.cleanGrid()},this)},_enableEditing:function(){r.one("html").addClass("sqs-page-editing")},_disableEditing:function(){r.one("html").removeClass("sqs-page-editing"),r.detach("editCtrl|*"),this.getLayoutNodes().each(function(s){if(s.hasPlugin(r.SQS.LayoutEngine.Layout.Editor.NS)){var n=s.LayoutEditor.dragDelegate;n.detach("editCtrl|*"),n.dd.detach("editCtrl|*"),s.unplug(r.SQS.LayoutEngine.Layout.Editor)}},this)},enableInsertPoints:a,disableInsertPoints:a,alignInsertPoints:a,getRenderableBlocks:function(s){var n=s;r.Lang.isValue(this._renderableBlockMap)||this._initRenderableBlocksMap();var i=this._renderableBlockMap[n];if(!r.Lang.isValue(i)){var u=this._renderableBlockCtorMap[n];if(!r.Lang.isValue(u))return null;i=this._renderableBlockMap[n]=new u}return i},getInsertMenu:function(s,n){return r.Lang.isValue(this._insertMenuMap)||this._initInsertMenuCtorMap(),r.Lang.isValue(n)?this._upsertInsertMenu(s,n):this._insertMenuMap[s]},_upsertInsertMenu:function(s,n){var i=this._insertMenuMap[s];if(r.Lang.isValue(i))i.setAttrs(n);else{var u=this._insertMenuCtorMap[s];if(!r.Lang.isValue(u))return null;i=this._insertMenuMap[s]=new u(r.merge(n,{editController:this}))}return i},_destroyInsertMenus:function(){this._insertMenuMap&&(Object.keys(this._insertMenuMap).forEach((function(s){this._insertMenuMap[s].destroy()}).bind(this)),this._insertMenuMap={})},_initRenderableBlocksMap:function(){this._renderableBlockCtorMap={},this._renderableBlockMap={},r.Array.each(this.get("renderableBlockSet"),function(s){r.Lang.isValue(s.ctor)&&(this._renderableBlockCtorMap[s.editMode]=s.ctor)},this)},_initInsertMenuCtorMap:function(){this._insertMenuCtorMap={},this._insertMenuMap={},r.Array.each(this.get("insertMenuSet"),function(s){r.Lang.isValue(s.ctor)&&(this._insertMenuCtorMap[s.editMode]=s.ctor)},this)},_createInsertMarkerInstance:function(s){this._insertMarkerInstance=new r.SQS.LayoutEngine.Layout.InsertMarker({render:s})},setInsertMarkerLayout:function(s){var n=this._insertMarkerInstance;!n||n&&n.get("destroyed")?this._createInsertMarkerInstance(s):s!==n.get("render")&&(this._destroyInsertMarkerInstance(),this._createInsertMarkerInstance(s))},_destroyInsertMarkerInstance:function(){this._insertMarkerInstance&&(this._insertMarkerInstance.destroy(),delete this._insertMarkerInstance)},alignInsertMarker:function(s){var n=this._insertMarkerInstance;!r.Lang.isObject(s)||!n||n.get("locked")||(n.set("info",s),n.show())},hideInsertMarker:function(){this._insertMarkerInstance&&this._insertMarkerInstance.hide()},toggleInsertMarkerLock:function(s){this._insertMarkerInstance&&this._insertMarkerInstance.set("locked",s)},updateInsertMarkerConstrainNode:function(s){var n=this._insertMarkerInstance;n&&(r.Lang.isValue(s)&&n.set("constrainZIndex",s),n.positionConstrainNode())},hideBlockMenus:function(){r.Object.each(this._insertMenuMap,function(s){s.hide()})},destructor:function(){r.one(r.config.doc).detach("editCtrl|*"),this.getLayoutNodes().each((function(s){this.destroyLayoutEditor(s)}).bind(this)),r.Object.each(this._insertMenuMap,function(s){s.destroy(!0)}),this._insertMenuMap=null,this.set("editing",!1)}},{ATTRS:{contentParentBlockSelector:{getter:function(s){return r.Lang.isValue(s)?s:""},setter:function(s,n){var i=this.get(n);return i.length===0?s:i.indexOf(s)>-1?i:i+", "+s}},editing:{value:!1},scrollNode:{valueFn:function(){return r.one(d()(r.config.doc))},lazyAdd:!1},dropInfo:{value:{node:null,direction:"",distance:0,quad:null,region:null}},dropBlockInfo:{value:{blockNode:null,ancestors:null,parentLayout:null}},selection:{},markdownMode:{value:!1},forceSingleColumn:{value:!1},renderableBlockSet:{valueFn:function(){console.error("Edit Controller Error: renderableBlockSet not implemented")}},insertMenuSet:{valueFn:function(){console.error("Edit Controller Error: insertMenuSet not implemented")}},supportsInsertPoints:{value:!1},supportsRedirectsInBlockEditor:{value:!0}}})},"1.0",{requires:["array-invoke","base","event","json-parse","node","parallel","plugin","promise","@sqs/layout-engine/event-registrar","@sqs/layout-engine/layout-builder","@sqs/layout-engine/layout-editor","@sqs/layout-engine/layout-insert-marker","@sqs/layout-engine/layout-utils","@sqs/layout-engine/layout-trash","@sqs/layout-engine/models-layout"]})},216803:function(c,b,t){"use strict";var l=t(352635),d=t(260175),o=t(337061),e=t(938077),a=t(929698),r=t(673951),s=t(104495),n=e.Ouw,i=e.m1X;YUI.add("@sqs/layout-engine/edit-controller-web-app",function(u){u.namespace("SQS.LayoutEngine");var h=u.SQS.LayoutEngine.EditControllerWebApp=u.Base.create("editcontroller",u.SQS.LayoutEngine.EditControllerBase,[],{initializer:function(){u.on("key",this._onDeleteKeyHandler,u.config.doc,"down:backspace,46",this),u.on("key",this._onEnterKeyHandler,u.config.doc,"down:enter,13",this),this._registerEvent(u.SQS.LayoutEngine.Events.on("layout-engine:remove-confirmed",function(p){this._removeBlocks(p.selected)},this),u.SQS.LayoutEngine.Events.on("layout-engine:open-block-menu",function(p){this.showBlockMenu(p)},this),{detach:(0,o.gH)(n,this.hideBlockMenus.bind(this))})},pluginLayoutEditor:function(){this.disableInsertPoints();var g=h.superclass.pluginLayoutEditor.apply(this,arguments);return this.enableInsertPoints(),g},layoutDragStart:function(g){h.superclass.layoutDragStart.apply(this,[g]),this.disableInsertPoints()},layoutDragEnd:function(){h.superclass.layoutDragEnd.call(this),this.enableInsertPoints(),this.alignInsertPoints(null,!0)},_disableEditing:function(){this._destroyBlockMenu(),this._destroyInsertPointController(),h.superclass._disableEditing.call(this)},destroyLayoutEditor:function(){this.disableInsertPoints(),h.superclass.destroyLayoutEditor.apply(this,arguments),this.enableInsertPoints()},_destroyBlockMenu:function(){u.SQS.LayoutEngine.Singletons.BlockMenu&&u.SQS.LayoutEngine.Singletons.BlockMenu.destroy()},showBlockMenu:function(g){g=u.merge({editMode:this.get("defaultEditMode"),direction:"bottom",type:"row",targetNode:null,layoutNode:null,scrollNode:null},g);var p=this.getInsertMenu(g.editMode,g);p.show()},_onDeleteKeyHandler:function(g){if(!g.target.ancestor("input, textarea, [contenteditable=true], [contenteditable=plaintext-only]",!0)&&!i((0,o.d6)())){var p=u.all(".sqs-layout.sqs-editing .sqs-block-focused:not(.sqs-block-locked-layout)");p.size()>0&&(g.halt(!0),u.SQS.LayoutEngine.Events.fire("layout-engine:remove-requested",{selected:p}))}},_onEnterKeyHandler:function(g){if(!g.target.ancestor("input, textarea, [contenteditable=true], [contenteditable=plaintext-only]",!0)&&!i((0,o.d6)())){g.halt();var p=n((0,o.d6)());p&&(0,a.n6)((0,a.q5)(p))}},_removeBlocks:function(p){var f=[];p.each(function(_){var v=u.Widget.getByNode(_);v&&(v.queueForDestruction(),f.push(_.ancestor(".sqs-layout")))}),f=u.Array.unique(f),u.Array.each(f,function(_){_.LayoutEditor.cleanGrid(!0)})},_destroyInsertPointController:function(){u.SQS.LayoutEngine.Singletons.InsertPointController&&u.SQS.LayoutEngine.Singletons.InsertPointController.destroy()},enableInsertPoints:function(){u.SQS.LayoutEngine.Singletons.InsertPointController&&this.get("supportsInsertPoints")&&(r.Ay?u.SQS.LayoutEngine.Singletons.InsertPointController._toggleDisabled(!1):u.SQS.LayoutEngine.Singletons.InsertPointController.debouncedToggleDisabled(!1))},disableInsertPoints:function(){this.get("supportsInsertPoints")&&(u.SQS.LayoutEngine.Singletons.InsertPointController&&(r.Ay?u.SQS.LayoutEngine.Singletons.InsertPointController._toggleDisabled(!0):u.SQS.LayoutEngine.Singletons.InsertPointController.debouncedToggleDisabled(!0)),this.hideInsertMarker())},alignInsertPoints:function(g,p){u.SQS.LayoutEngine.Singletons.InsertPointController&&this.get("supportsInsertPoints")&&u.SQS.LayoutEngine.Singletons.InsertPointController.alignInsertPoints(g,p)},destructor:function(){this._destroyInsertPointController()}},{ATTRS:{defaultEditMode:{readOnly:!0,value:s.Z.WEB_APP},supportsInsertPoints:{valueFn:function(){var g=d.i(l.breakpoints);return g.platform!=="mobile"||r.Ay}}}})},"1.0",{requires:["base","event","json-parse","node","parallel","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/layout-editor","@sqs/layout-engine/layout-insert-point","@sqs/layout-engine/layout-insert-point-controller","@sqs/layout-engine/models-layout","@sqs/layout-engine/events"]})},514384:function(){YUI.add("@sqs/layout-engine/events",function(c){c.namespace("SQS.LayoutEngine");var b=new c.EventTarget;b.publish("layout-engine:reload-images"),b.publish("layout-engine:remove-requested",{emitFacade:!0,defaultFn:function(t){b.fire("layout-engine:remove-confirmed",t)}}),b.publish("layout-engine:remove-confirmed"),b.publish("layout-engine:open-block-menu"),b.publish("layout-engine:block-menu-shown"),b.publish("layout-engine:block-menu-hidden"),b.publish("layout-engine:block-menu-search-query-change"),b.publish("layout-engine:block-menu-search-query-enter"),b.publish("layout-engine:edit-block"),b.publish("layout-engine:insert-block"),b.publish("layout-engine:delete-block"),c.Lang.isValue(c.SQS.LayoutEngine.Events)||(c.SQS.LayoutEngine.Events=b)},"1.0",{requires:["event"]})},790862:function(){YUI.add("@sqs/layout-engine/layout-insert-block-icon-base",function(c){c.namespace("SQS.LayoutEngine.LayoutInsert"),c.SQS.LayoutEngine.LayoutInsert.BlockIconBase=c.Base.create("blockIcon",c.Widget,[],{renderUI:function(){this.get("contentBox").setHTML('<div class="label">'+this.get("label")+"</div>")},queueForDestruction:function(){this.get("boundingBox").addClass("sqs-destroyme")}},{CSS_PREFIX:"sqs-blockicon",ATTRS:{categoryLabel:{},ctor:{value:null},defaultContentModel:{},floatable:{valueFn:function(){var b=this.get("ctor"),t=b.ATTRS.floatable||b.superclass.constructor.ATTRS.floatable;return t&&t.value!==void 0?t.value:!0}},id:{},label:{},tags:{},isReactDeleting:{}}})},"1.0",{requires:["base","widget"]})},451386:function(c,b,t){"use strict";var l=t(379835),d=t.n(l),o=t(406167),e=t.n(o),a=t(187913),r=t(673951),s=t(487558),n=t(661614),i=t(224299),u=t(784874),h=function(){};YUI.add("@sqs/layout-engine/layout-insert-block-menu-mixin",function(g){g.namespace("SQS.LayoutEngine.Layout"),g.SQS.LayoutEngine.Layout.InsertBlockMenuMixin=g.Base.create("layout-insert-block-menu-mixin",g.Base,[],{initializer:function(){this._icons=[],this._bb=this.get("boundingBox"),this._cb=this.get("contentBox"),this._ec=this.get("editController"),r.qu||this._initDragDelegate(this._getDragDelegateConfig()),this._initClickDelegate(),this.on("focusedChange",this._onFocusedChange,this),this._bindInstrumentationEvents()},destructor:function(){this._destroyScrollAnim(),this.dragDelegate&&this.dragDelegate.destroy(),this._detachClickDelegate(),this._bb=null,this._cb=null,this._ec=null,this.debouncedDragDrag&&this.debouncedDragDrag.cancel()},_bindInstrumentationEvents:function(){this.after("visibleChange",function(p){var f=g.Object.getValue(g.config.win,"Static.IN_BACKEND".split(".")),m=p.newVal?"layout-engine:block-menu-shown":"layout-engine:block-menu-hidden";g.SQS.LayoutEngine.Events.fire(m,{backend:f})},this)},renderUI:function(){this._renderMenuIcons(g.Array.filter(this._getInsertableBlockItems(),g.Lang.isValue))},_getInsertableBlockItems:function(){return[]},_renderMenuIcons:function(p){console.warn("Unimplemented method _renderMenuIcons.")},_getDragDelegateConfig:function(){return null},_initDragDelegate:function(p){var f=this.get("reactNodes");this.dragDelegate=new g.SQS.LayoutEngine.Layout.DragDelegate(g.merge({container:this._bb,nodes:f,dragConfig:{groups:["blocks"],clickTimeThresh:a.h},enableDragScroll:!0,scrollNode:this.get("scrollNode"),dragProxyConfig:{cloneNode:!0,hideOriginalNode:!1,moveOnEnd:!1,flyBack:!1,containerNode:g.one(g.config.doc.body)},extraSyncShims:!0,editController:this.get("editController")},p)),this.dragDelegate.before("drag:start",this._ec.layoutBeforeDragStart,this._ec),this.dragDelegate.on("drag:start",this._dragStart,this),this.dragDelegate.on("drag:end",this._dragEnd,this),this.after("scrollNodeChange",function(m){this.dragDelegate.set("scrollNode",m.newVal)},this)},_initClickDelegate:function(){var p=g.UA.mobile?"tap":"click";this.clickDelegate=g.delegate(p,this._onClick,this._bb,this.get("nodes"),this)},_detachClickDelegate:function(){this.clickDelegate&&this.clickDelegate.detach()},_dragStart:function(p){this._detachClickDelegate(),this._ec.set("selection",null),this._ec.set("dropInfo",null),this._ec.layoutDragStart(this.get("layoutNode")),this.hideMenu()},_dragDrag:function(p){var f=this.get("isDragging");f&&p.pageX>g.config.doc.body.offsetWidth-this._menuWidth/3?this.set("isDragging",!1):!f&&p.pageX<g.config.doc.body.offsetWidth-this._menuWidth&&this.set("isDragging",!0)},_dragEnd:function(p){this.hide(),this.handleReactDrop(),this._ec.layoutDragEnd(),this._initClickDelegate()},_onClick:function(p){p.preventDefault(),this.hideMenu(),this.createBlock(p.target,"click")},_getDefaultDropInfo:function(){return null},createBlock:function(p,f){if((f!=="dragDrop"||this._ec.get("dropInfo")===null)&&this._ec.set("dropInfo",this._getDefaultDropInfo()),!g.Object.getValue(this._ec.get("dropInfo"),["node","_node"]))return Promise.reject(new Error("[block-menu] No target node to drop a new block around."));var m=!g.Widget.getByNode(p),_=m?p:g.Widget.getByNode(p),v={value:_.get("defaultContentModel"),type:_.get("type")};return v.type===u.Z.WEBSITE_COMPONENT&&(v.definitionName=_.get("id")),(0,i.p)(v).then((function(E){E.type===u.Z.WEBSITE_COMPONENT&&_.set("defaultContentModel",E.value);var S=this._instantiateNewBlock(p,f);S&&(S.trackEngagementCreate&&S.trackEngagementCreate({interaction:f}),this._ec.set("selection",S.get("boundingBox")),this._ec.insertBlockToLayout(!1,f==="dragDrop"),this._afterNewBlockInsert(S))}).bind(this))},_instantiateNewBlock:function(p,f){var m,_,v=!g.Widget.getByNode(p),E=v?p:g.Widget.getByNode(p),S=E.get("ctor"),y=(0,s.UT)(),C=(0,n.GC)(y)||null,O=(0,n.g6)(y)||null,A={editable:!1,visible:!1,isNewBlock:!0,editOnStart:!0,editMode:this.get("editMode"),editController:this.get("editController"),collectionId:C,contentItemId:O};if(!v&&p.hasClass("sqs-destroyme"))return p.removeClass("sqs-destroyme"),null;if(v&&p.get("isReactDeleting"))return null;var I=this._ec.get("dropInfo").node;return I&&(m=I.ancestor(".sqs-layout")),A.render=m||!0,_=E.get("defaultContentModel"),_&&(A.defaultContentModel=_),new S(A)},_afterNewBlockInsert:function(p){var f=p.get("boundingBox"),m=this.get("layoutNode")||f.ancestor(".sqs-layout"),_=m[g.SQS.LayoutEngine.Layout.Builder.NS].get("layout");p.onceAfter("editableChange",function(){setTimeout(this._scrollToBlockNode.bind(this,f),300)},this),p.setAttrs({editable:!0,collectionId:g.Lang.isValue(_)?_.get("collectionId"):null,contentItemId:g.Lang.isValue(_)&&(_.get("contentItemId")||_.get("parentItemId"))||null})},_scrollToBlockNode:function(p){this._destroyScrollAnim();var f=this.get("scrollNode").getDOMNode(),m=p.getDOMNode();if(!(!f||!m)){var _=this._getScrollOffsets(m,f);if(_){var v={onEnd:this._destroyScrollAnim.bind(this)};this._scrollAnim=d()(f,_,v)}}},_getScrollOffsets:function(p,f){var m=0,_=0;if(e()(g.config.doc)===f){var v=g.config.win.innerHeight,E=p.getBoundingClientRect(),S=44;if(E.top>0&&E.top<v-S)return;var y=g.config.doc.documentElement.getBoundingClientRect(),C=66;m=E.left-y.left,_=E.top-y.top-C}else{var O=22;m=p.offsetLeft,_=p.offsetTop-O}return{left:m,top:_}},_destroyScrollAnim:function(){this._scrollAnim&&(this._scrollAnim.isRunning()&&this._scrollAnim.pause(),this._scrollAnim=null)},hideMenu:h,_onFocusedChange:h,handleReactDrop:h},{ATTRS:{nodes:{value:".sqs-blockicon"},reactNodes:{value:".sqs-react-blockicon"},scrollNode:{},layoutNode:{},editController:{valueFn:function(){console.error("Block Menu Error, must pass editController instance")}}}})},"1.0",{requires:["anim","anim-easing","base","@sqs/layout-engine/block/generic-base","@sqs/layout-engine/layout-drag"]})},27812:function(c,b,t){"use strict";var l=t(406167),d=t.n(l),o=t(734526),e=t(675641),a=t(174161),r=t(594127),s=t(730131),n=t.n(s),i=t(663634),u=t(859817),h=t.n(u),g=t(584204),p=t(970671),f=t(337061),m=t(897820),_=t(175424),v=t(334001),E=t(916661),S=t(66947),y=t(787592),C=t(166455),O=t.n(C),A=t(160021),I=m.OA,D=m.oo;function T(B){if(!B)return null;var N=B.closest("[data-section-id], [data-collection-id]",!0);if(!N)return null;var P=N.getAttribute("data-section-id")||N.getAttribute("data-collection-id");return P||null}YUI.add("@sqs/layout-engine/layout-insert-block-menu-web-base",function(B){B.namespace("SQS.LayoutEngine.Layout");var N=B.SQS.LayoutEngine.Layout.InsertBlockMenuWebBase=B.Base.create("layoutInsertBlockMenuBase",B.Overlay,[B.WidgetParent,B.SQS.LayoutEngine.Layout.InsertBlockMenuMixin],{initializer:function(){B.Event.defineOutside("mousedown"),this._bb=this.get("boundingBox"),this._cb=this.get("contentBox"),this._bb.set("dataset.test","insert-block-menu"),this._bb.addClass("react-block-selector"),this.selectorContainer=B.Node.create("<div></div>"),this._cb.append(this.selectorContainer),this._cb.plug(B.SQS.LayoutEngine.Copies.Plugin.ScrollLock),this.on("hasLoadedIconsAndCategoriesChange",B.bind(function(P){this.renderReactBlockSelector(this.get("isBlockSelectorShown"))},this)),this.loadCategoriesAndIconConfigs(),this._hasRenderedBefore=!1},loadCategoriesAndIconConfigs:function(){var P=this._getInsertableBlockItems(),x=this.getIconConfigs(),R={includeDeprecated:!1,templateVersion:E.Z.getVersion(),editingEngine:n().LAYOUT_ENGINE},w=v.Z.fetchAll(R,B);w.then(B.bind(function(k){var q=(0,S.uL)(P,x,k);this._categories=q.categories,this._iconConfigs=q.iconConfigs,this.set("hasLoadedIconsAndCategories",!0)},this)).catch(B.bind(function(k){y.$e(function(q){q.setTag("owner",O().CONTENT_RENDERING);var F=new Error("Error merging Website Component Definitions into categories. Omitting website components.",{cause:k});y.Tb(F)}),this._categories=P,this._iconConfigs=x,this.set("hasLoadedIconsAndCategories",!0)},this))},bindUI:function(){this.get("boundingBox").on("mousedownoutside",this._onMouseDownOutside,this)},renderUI:function(){this.get("visible")||this._cb.hide()},renderReactBlockSelector:function(P){var x=this._categories,R=this._iconConfigs;this.reactRoot||(this.reactRoot=(0,r.createRoot)(this.selectorContainer.getDOMNode())),P?this.reactRoot.render(a.createElement(p.Z,null,a.createElement(u.StatsigProvider,{client:(0,i.GC)()},a.createElement(f.ZP,{},a.createElement(g.Z,{categories:x,iconConfigs:R,handleIconSelect:this.handleIconSelect.bind(this),isInFrame:!!(0,_.nO)(B.config.win),activeSectionNode:this.get("targetNode").getDOMNode(),escFocusSelector:".sqs-layout-insert-point-active button",isLoading:!this._categories||!this._iconConfigs}))))):(this.reactRoot.unmount(),this.reactRoot=null)},renderAddBlockErrorModal:function(P){this.reactRoot||(this.reactRoot=(0,r.createRoot)(this.selectorContainer.getDOMNode())),P?this.reactRoot.render(a.createElement(p.Z,null,a.createElement(u.StatsigProvider,{client:(0,i.GC)()},a.createElement(A.Z,{isOpen:P,onRequestClose:this.handleCloseErrorModal.bind(this)})))):(this.reactRoot.unmount(),this.reactRoot=null)},handleCloseErrorModal:function(){this.renderAddBlockErrorModal(!1)},getIconConfigs:function(){var P=this.get("editController").getRenderableBlocks(this.get("editMode")),x=B.merge(o.Z.BlockTypeKeys,e.Z),R=this._getInsertableBlockItems(),w={};return B.Array.each(R,function(k){B.Array.each(k.items,function(q){if(x[q]){var F=P.get(x[q]);w[q]=Object.assign(F,{type:q})}},this)},this),this._iconConfigs=w,w},createIconNode:function(P,x){var R=this.get("blockIcon"),w=new R(P);return w.set("type",P.type),w.set("categoryLabel",x),w.set("defaultContentModel",P.defaultContentModel),w},handleIconSelect:function(P,x,R){var w=this.createIconNode(P,x);this.createBlock(w,R).catch((function(k){y.Tb(k||new Error("Unknown error thrown when trying to create block from selector")),this.renderAddBlockErrorModal(!0)}).bind(this)),this.hideMenu()},handleReactDrop:function(){var P=B.DD.DDM.activeDrag.get("node"),x=P.getAttribute("data-item-type"),R=P.getAttribute("data-category-label"),w=this._iconConfigs[x],k=this.createIconNode(w,R);P.hasClass("sqs-destroyme")&&k.set("isReactDeleting",!0),this.createBlock(k,"dragDrop").catch((function(q){y.Tb(q),this.renderAddBlockErrorModal(!0)}).bind(this))},destructor:function(){this.get("contentBox").unplug(B.SQS.LayoutEngine.Plugin.ScrollLock),this._hideOnScroll&&this._hideOnScroll.detach(),this._categories&&(this._categories=null),this._iconConfigs&&(this._iconConfigs=null)},_onMouseDownOutside:function(P){(!this.get("align.node")||P.target.getDOMNode()!==this.get("align.node").getDOMNode())&&this.hide()},_getDefaultDropInfo:function(){var P=this.get("targetNode");return{node:P,region:P.get("region"),direction:this.get("direction"),layout:this.get("layoutNode").LayoutEditor}},show:function(){if(!this._hasRenderedBefore){this._showFirstTime();return}this.set("isBlockSelectorShown",!0),B.Lang.isValue(this.get("zIndexBase"))&&this.set("zIndex",this.get("zIndexBase")+1),this._cb.show(),N.superclass.show.call(this);var P=T(this.get("targetNode").getDOMNode())||this._cb.generateID();(0,f.GE)(I(P)),this._bindHideOnScroll(),this.renderReactBlockSelector(!0)},_showFirstTime:function(){this._hasRenderedBefore=!0,this.hide({skipDispatch:!0}),this.show()},hide:function(P){this.set("isBlockSelectorShown",!1),N.superclass.hide.call(this),this._cb.show(),this._cb.set("scrollTop",0),B.Lang.isValue(this._hideOnScroll)&&B.Lang.isFunction(this._hideOnScroll.detach)&&this._hideOnScroll.detach();var x=P?P.skipDispatch:!1;if(!x){var R=T(this.get("targetNode").getDOMNode());(0,f.GE)(D(R))}this.renderReactBlockSelector(!1)},hideMenu:function(){this._cb.hide(),this._cb.set("scrollTop",0),B.DD.DDM.activeDrag||this.hide()},_bindHideOnScroll:function(){var P=this.get("layoutScrollNode"),x=P.get("scrollTop"),R=15;B.Lang.isValue(this._hideOnScroll)&&B.Lang.isFunction(this._hideOnScroll.detach)&&this._hideOnScroll.detach(),this._hideOnScroll=P.on("scroll",function(){var w=Math.abs(P.get("scrollTop")-x);w>R&&(this._hideOnScroll.detach(),this.hide())},this)}},{CSS_PREFIX:"sqs-layout-insert-block-menu",ATTRS:{hasLoadedIconsAndCategories:{value:!1},render:{value:!0},blockIcon:{valueFn:function(){return B.SQS.LayoutEngine.LayoutInsert.BlockIconBase}},constrain:{value:!0},tabIndex:{value:0},visible:{value:!1},width:{value:420},height:{value:542},zIndex:{value:30011},direction:{value:"top"},targetNode:{getter:function(P){if(P)return P;var x=this.get("layoutNode");if(x&&x.getDOMNode()){var R=x.get("children").filter(".sqs-row");return R.item(R.size()-1)}}},scrollNode:{getter:function(P){var x=this.get("layoutNode").ancestor(".sqs-layout-scroll");return x||B.one(d()(B.config.doc))}},layoutScrollNode:{getter:function(){var P=this.get("layoutNode").ancestor(".sqs-layout-scroll");return P||B.one(B.config.doc)}},layoutNode:{},zIndexBase:{}}})},"1.0",{requires:["@sqs/layout-engine/block-label","@sqs/layout-engine/block-search","@sqs/layout-engine/events","@sqs/layout-engine/layout-insert-block-icon-base","@sqs/layout-engine/layout-insert-block-menu-mixin","@sqs/layout-engine/plugin-scroll-lock","array-invoke","event-outside","overlay","widget-parent"]})},970767:function(){YUI.add("@sqs/layout-engine/layout-insert-marker",function(c){var b=c.SQS.LayoutEngine.Layout.Utils.convertToValueInPixel,t=c.namespace("SQS.LayoutEngine.Layout").InsertMarker=c.Base.create("insert-marker",c.Overlay,[],{renderUI:function(){this.constrainNode=this._createConstrainNode(),c.soon(this.positionConstrainNode.bind(this))},bindUI:function(){var l=this.get("boundingBox");this.after("infoChange",this._syncInfoToMarker,this),this.after("lockedChange",this._onLockedChange,this),this.on("floatChange",function(d){l.toggleClass("float",!!d.newVal)},this),c.DD.DDM.on("insertMarker|ddm:end",this.hide,this)},_onLockedChange:function(l){l.newVal?this.hide():this.show()},positionConstrainNode:function(){if(this.constrainNode){var l=this.get("boundingBox");if(!(!l||!l.inDoc())){var d=l.get("parentNode");if(d){var o=d.ancestor(".sqs-layout",!0)||c.one(".sqs-layout.sqs-editing");if(o){var e=c.one(c.config.doc.body),a=o.ancestor(".sqs-layout-wrapper")||o.ancestor(".sqs-content-manager")||e,r=a.get("region"),s=a===e?0:r.top;this.constrainNode.setStyles({left:Math.max(r.left,0),right:Math.max(c.config.win.innerWidth-r.right,0),top:Math.max(s,0),bottom:Math.max(c.config.win.innerHeight-r.bottom,0),height:"auto",zIndex:this.get("constrainZIndex")})}}}}},_createConstrainNode:function(){var l=t.CSS_PREFIX+"-constrain",d=c.Node.create('<div class="'+l+'"></div>');return c.one("body").append(d),d},_syncInfoToMarker:function(){var l=this.get("info");if(!l||!l.node){console.warn("There is no marker info nor info node.");return}if(!this.get("locked")){var d=l.node,o=l.type,e=l.direction,a=l.region,r=c.WidgetPositionAlign,s=!1,n,i,u={node:d,points:[]};switch(e){case"top":u.points=[r.LC,r.TL],s=!0;break;case"bottom":u.points=[r.LC,r.BL],s=!0;break;case"left":u.points=[r.TC,r.TL];break;case"right":u.points=[r.TC,r.TR]}var h;l.isSelf?(h=c.DD.DDM.activeDrag.get("dragNodeRegion"),i=h.width,n=h.height,u.points=[r.TL,r.TL],this.set("float",!0)):l.shouldFloat?(h=c.DD.DDM.activeDrag.get("dragNodeRegion"),i=a.width/2,h&&h.height!==0?n=i*(h.height/h.width):n=i*(9/16),u.points[0]=e==="left"?r.TL:r.TR,this.set("float",!0)):(s?(n=this.get("lineThickness"),o==="content"?i=d.ancestor(".sqs-block").get("clientWidth"):i=a.width):(o==="column"?n=a.height:n=a.bottom-a.top,i=this.get("lineThickness")),this.set("float",!1)),this.setAttrs({width:i,height:n,align:u})}},destructor:function(){this.constrainNode&&this.constrainNode.remove(),c.DD.DDM.detach("insertMarker|*")},_getRegion:function(l){var d;return l?(l=c.Node.one(l),l&&(d=l.get("region"))):(d=this._posNode.get("viewportRegion"),d.height=c.config.win.innerHeight,d.bottom=d.height+c.config.win.pageYOffset),d},_getCollapsedVerticalMargin:function(l,d,o){var e=0;switch(o){case"top":e=Math.max(b(d.getStyle("marginBottom")),b(l.getStyle("marginTop")));break;case"bottom":e=Math.max(b(l.getStyle("marginBottom")),b(d.getStyle("marginTop")))}return e},move:function(){var l="xy",d=arguments,o=c.Lang.isArray(d[0])?d[0]:[d[0],d[1]],e=c.one("html");if(!e.hasClass("scrolling")){var a=this.get("info"),r=a.node,s=a.type==="content";if(s){var n=r.ancestor(".sqs-block"),i,u=0,h=0;n&&(a.direction==="right"?u=b(n.getStyle("paddingRight")):u=b(n.getStyle("paddingLeft"))*-1),a.direction==="top"||this.get("float")?(i=r.previous(),i===null&&n?h=b(n.getStyle("paddingTop"))*-1:i?h=this._getCollapsedVerticalMargin(r,i,a.direction)*-1/2:h=b(r.getStyle("marginTop"))*-1/2):a.direction==="bottom"&&(i=r.next(),i===null&&n?h=b(n.getStyle("paddingBottom")):i?h=this._getCollapsedVerticalMargin(r,i,a.direction)/2:h=b(r.getStyle("marginBottom"))/2),o=[o[0]+u,o[1]+h]}this.set(l,o)}}},{CSS_PREFIX:"sqs-layout-insert-marker",ATTRS:{zIndex:{value:8950},constrainZIndex:{valueFn:function(){this.get("zIndex")},validator:function(l){return c.Lang.isString(l)||c.Lang.isNumber(l)}},info:{value:{node:null,type:"",direction:"",region:null,shouldFloat:!1,isSelf:!1},lazyAdd:!1},locked:{value:!1},lineThickness:{valueFn:function(){return c.UA.mobile?2:3}}}})},"1.0",{requires:["node","event","overlay","@sqs/layout-engine/layout-utils"]})},176901:function(c,b,t){"use strict";var l=t(210750),d=t.n(l);YUI.add("@sqs/layout-engine/layout-insert-point-controller",function(o){o.namespace("SQS.LayoutEngine.Layout"),o.SQS.LayoutEngine.Layout.InsertPointController=o.Base.create("insertPointController",o.Base,[],{initializer:function(){this._insertPointGroups=[],this._insertPointsByNodeId={},this._layoutNodesToAlign=[],this._resizeEmitter=new o.SQS.LayoutEngine.ResizeEmitter,this.after("visibleChange",this._afterVisibleChange,this),this.after("enabledChange",this._afterEnabledChange,this)},destructor:function(){this.debouncedToggleDisabled&&this.debouncedToggleDisabled.cancel&&this.debouncedToggleDisabled.cancel(),this._disable(),this._resizeEmitter.destroy(),this._debounceAlignInsertPoints.cancel(),this.destroyAllInsertPoints()},registerInsertPoint:function(e,a){if(!a){console.log("[IPC] No layout node found."),e.destroy();return}var r=this._findInsertPointGroup(a);o.Lang.isNull(r)&&(r=this._initNewInsertPointGroup(a)),r.insertPoints.push(e),this._buildInsertPointsByNodeIdObject(),this._setInsertPointNodes(),r.events.push(e.after("insertPointsChange",function(){this._setInsertPointNodes(),this._buildInsertPointsByNodeIdObject()},this))},_buildInsertPointsByNodeIdObject:function(){this._insertPointsByNodeId={},o.each(this._insertPointGroups,function(e){o.each(e.insertPoints,function(a){this._attachInsertPointsByBlockObject(a.get("insertPoints"))},this)},this)},_attachInsertPointsByBlockObject:function(e){o.Array.each(e,function(a){if(!(!a.triggerNode||!a.triggerNode.inDoc())){var r=a.triggerNode.generateID();this._insertPointsByNodeId[r]=this._insertPointsByNodeId[r]||[],this._insertPointsByNodeId[r].push(a.node)}},this)},deregisterInsertPoint:function(e,a){var r=this._findInsertPointGroup(a);o.Lang.isNull(r)||(r.insertPoints.remove(e),this._removeInsertPointsFromBlockObject(e.get("insertPoints")),r.insertPoints.length===0&&this._deleteInsertPointGroup(r))},_removeInsertPointsFromBlockObject:function(e){o.Array.each(e,function(a){if(a.triggerNode){var r=a.triggerNode.generateID();this._insertPointsByNodeId[r]=this._insertPointsByNodeId[r]||[];var s=this._insertPointsByNodeId[r],n=s.indexOf(a.node);n!==-1&&s.splice(n,1)}},this)},_findInsertPointGroup:function(e){return o.Array.find(this._insertPointGroups,function(a){return a.layoutNode===e})},_initNewInsertPointGroup:function(e){var a={layoutNode:e,insertPoints:[],events:[]};return e.LayoutBuilder&&a.events.push(e.LayoutBuilder.on("widget:contentUpdate",function(){this.alignInsertPoints(e)},this)),e.LayoutEditor&&a.events.push(e.LayoutEditor.on("destroy",function(){this.destroyAllInsertPoints(e)},this)),this._insertPointGroups.push(a),a},_deleteInsertPointGroup:function(e){o.Array.each(e.events,function(a){a.detach()}),this._insertPointGroups.remove(e)},destroyAllInsertPoints:function(e){var a=this._insertPointGroups;a.length>1&&o.Lang.isValue(e)&&(a=o.Array.filter(a,function(r){return r.layoutNode===e})),o.Array.each(a,function(r){o.Array.each(r.insertPoints,function(s){s.destroy()}),this._deleteInsertPointGroup(r)},this)},alignInsertPoints:function(e,a){o.Lang.isValue(e)&&o.Array.indexOf(this._layoutNodesToAlign,e)===-1&&this._layoutNodesToAlign.push(e),a?this._alignInsertPoints(!0):this._debounceAlignInsertPoints()},_alignInsertPoints:function(e){if(!(!e&&!this.get("enabled"))){var a=this._insertPointGroups,r=this._layoutNodesToAlign;a.length>1&&r.length&&(a=o.Array.filter(a,function(s){return o.Array.indexOf(r,s.layoutNode)>-1})),o.Array.each(a,function(s){o.Array.each(s.insertPoints,function(n){n.align(e)})},this),this.set("visible",!0),this._layoutNodesToAlign=[]}},_debounceAlignInsertPoints:d()(function(){this._alignInsertPoints()},50),_setInsertPointNodes:function(){this.set("insertPointNodes",o.all(".sqs-layout-insert-point"))},hide:function(){this.set("visible",!1)},show:function(){this.set("visible",!0),this.alignInsertPoints()},_afterEnabledChange:function(e){e.newVal?this._enable():this._disable()},_afterVisibleChange:function(e){this.toggleVisible(e.newVal)},toggleVisible:function(e){o.one("html").toggleClass("sqs-hide-insert-points",!e)},debouncedToggleDisabled:d()(function(e){this._toggleDisabled(e)},30),_toggleDisabled:function(e){if(e){this.disable();return}o&&o.config&&o.config.doc&&!o.config.doc.querySelector(".sqs-block-editing:not(.sqs-block-html)")&&this.enable()},disable:function(){this.setAttrs({visible:!1,enabled:!1})},_disable:function(){this._mousemove&&this._mousemove.detach(),this._mouseenter&&(o.config.doc.removeEventListener("mouseenter",this._mouseenter),this._mouseenter=null),this._mouseleave&&(o.config.doc.removeEventListener("mouseleave",this._mouseleave),this._mouseleave=null),this._onResizeStart&&(this._onResizeStart.detach(),this._onResizeStart=null),this._onResizeEnd&&(this._onResizeEnd.detach(),this._onResizeEnd=null)},enable:function(){this.set("enabled",!0)},_enable:function(){this.alignInsertPoints(),this._mousemove=o.one(o.config.doc).on("mousemove",o.throttle(this._onMouseMove,100),this),this._onResizeStart=this._resizeEmitter.on("resize:start",this.hide,this),this._onResizeEnd=this._resizeEmitter.on("resize:end",this.show,this)},_onTriggerNodeMouseenter:function(e){var a=e.target.id;this._showInsertPointsForNodeId(a)},_showInsertPointsForNodeId:function(e){var a=this._insertPointsByNodeId[e]||[];o.each(a,function(r){r.addClass("sqs-fullsize")})},_onTriggerNodeMouseleave:function(e){var a=e.target.id;this._insertPointsByNodeId[a]&&o.each(this._insertPointsByNodeId[a],function(r){r.removeClass("sqs-fullsize")})},_onMouseMove:function(e){var a=e.pageX,r=e.pageY;o.Lang.isValue(this.get("insertPointNodes"))&&this.get("insertPointNodes").each(function(s){if(s.getData("ipType")==="row"){var n=s.getXY(),i=n[0]-12,u=Math.sqrt(Math.pow(a-i,2)+Math.pow(r-n[1],2)),h=u<=50?1:0;h!==s.lastScale&&(s.toggleClass("sqs-fullsize",h>=1),s.lastScale=h)}})}},{ATTRS:{enabled:{value:!1},visible:{value:!1},insertPointNodes:{}}}),o.namespace("SQS.LayoutEngine.Singletons"),o.SQS.LayoutEngine.Singletons.InsertPointController=new o.SQS.LayoutEngine.Layout.InsertPointController},"1.0",{requires:["base","node","event","@sqs/layout-engine/resize-emitters","@sqs/layout-engine/layout-insert-block-menu-web-base"]})},317529:function(c,b,t){"use strict";var l=t(208935),d=t(387582),o=t(673951);YUI.add("@sqs/layout-engine/layout-insert-point",function(e){var a=!1;e.namespace("SQS.LayoutEngine.Layout");var r=e.SQS.LayoutEngine.Layout.InsertPoint=e.Base.create("LayoutInsertPoint",e.Plugin.Base,[],{initializer:function(){var s=this.get("host");this._blockNode=s.get("boundingBox"),this.after("insertPointsChange",this._bindInsertPointEvents),this._bindInsertPointEvents(),this.onHostEvent("destroy",function(){this.get("controller").alignInsertPoints(this._getLayoutNode())},this),this.onHostEvent("resized",function(n){n.source==="columnChanged"&&this.align(!0)},this),this.afterHostEvent("dropped",this._getInsertPoints,this),this.get("controller").get("enabled")&&this.align(),this.registerWithController(),this.publish("click",{broadcast:2,emitFacade:!0})},destructor:function(){this._clearInsertPointNodes(),this._clearInsertPointEvents(),this.deregisterWithController()},_getEditMode:function(){return this.get("host").get("editMode")},_getLayoutNode:function(){var s=this.get("layoutNode");return s||(s=this._blockNode.ancestor(".sqs-layout"),s&&this.set("layoutNode",s)),s},_getNewInsertPointNode:function(s,n){var i,u=r.CSS_PREFIX,h=[l.BLOCK_FOCUS_IGNORE_CLASSNAME,u,u+"-type-"+s,u+"-position-"+n].join(" ");i=e.DOM.create('<div class="'+h+'"><button class="'+u+'-button" data-test="insert-point-trigger"><span class="insert-point-icon"></span></button><span class="sqs-layout-insert-point-line"></span></div>');var g;return s==="row"?(this._rowDocumentFragment=this._rowDocumentFragment||e.config.doc.createDocumentFragment(),g=this._rowDocumentFragment):g=this._blockDocumentFragment,g.appendChild(i),e.one(i)},_buildInsertPointConfig:function(s){var n=s.type,i=s.anchorNode,u=s.position,h=s.lastIP,g=s.contentNodeIndex,p=this._getNewInsertPointNode(n,u),f=n==="row"?null:i.ancestor(".sqs-block, .sqs-row",!0);return n==="block"&&u==="bottom"&&p.addClass(r.CSS_PREFIX+"-topmost"),p.setData("ipType",n),a&&console.log("[IP] creating an IP for "+n+" "+u,"lastIP?: "+h),{type:n,position:u,alignTo:i,node:p,triggerNode:f,offset:n==="row"?[-10,0]:null,contentNodeIndex:g}},_getInitInsertPoints:function(){var s=this.get("host"),n=[],i=this._getLayoutNode();if(!i||!s||!s.get("boundingBox"))return console.warn("Could not init insert points",this.getAttrs()),n;this._blockNode||(this._blockNode=s.get("boundingBox")),this._blockDocumentFragment=e.config.doc.createDocumentFragment();var u=this._blockNode,h=u.ancestor(".sqs-col"),g=h?h.ancestor(".sqs-row"):null;if(!h){a&&console.log("[IP] Block is not inserted into a column");return}var p=this._isInMultiColumnRow(h),f=this._isFirstColumnInRow(h)&&this._isFirstBlockInColumn(),m=this._isLastBlockInColumn()&&this._isLastColumnInRow(h);p&&f&&n.push(this._buildInsertPointConfig({type:"row",anchorNode:g,position:"top"})),n.push(this._buildInsertPointConfig({type:"block",anchorNode:u,position:"top"})),n.push(this._buildInsertPointConfig({type:"block",anchorNode:u,position:"bottom",lastIP:m})),p&&m&&n.push(this._buildInsertPointConfig({type:"row",anchorNode:g,position:"bottom"})),this.get("divideSelectors")&&(n=n.concat(this._getDivideInsertPoints()));var _=this._blockNode,v="."+r.CSS_PREFIX+"-container",E=_.one(v);if(E||(E=this._createContainer(),_.prepend(E)),E.appendChild(this._blockDocumentFragment),this._blockDocumentFragment=null,this._rowDocumentFragment){var S=g.get("children").filter(v).item(0);S||(S=this._createContainer(),g.prepend(S)),S.appendChild(this._rowDocumentFragment),this._rowDocumentFragment=null}return n},_createContainer:function(){return e.Node.create('<div class="'+r.CSS_PREFIX+'-container"></div>')},_getAlignNodeForInsertPoint:function(s){var n=s.alignTo;return n&&n.inDoc()?n:s.contentNodeIndex?this._getDivideNodeAtIndex(s.contentNodeIndex):null},_isFirstColumnInRow:function(s){return!s.previous(".sqs-col")},_isLastColumnInRow:function(s){return!s.next(".sqs-col")},_isInMultiColumnRow:function(s){return s&&s.siblings(".sqs-col").size()>0},_isLastRowInLayout:function(s){for(;s;){if(s.next(".sqs-row, .sqs-block"))return!1;s=s.ancestor(".sqs-row",!1,".sqs-layout")}return!this._blockNode.next(".sqs-row")},_isFirstBlockInColumn:function(){return!this._blockNode.previous(".sqs-block:not(.sqs-destroyme)")},_isLastBlockInColumn:function(){return!this._blockNode.next(".sqs-block:not(.sqs-destroyme)")},_getDivideInsertPoints:function(){var s=this.get("divideSelectors"),n=this._savedDivideNodes=this._blockNode.all(s),i=[];return n.size()>1&&n.each(function(u,h){h!==0&&i.push(this._buildInsertPointConfig({type:"content",anchorNode:u,position:"top",contentNodeIndex:h}))},this),i},_getDivideNodeAtIndex:function(s){var n=this.get("divideSelectors"),i=this._savedDivideNodes=this._blockNode.all(n);return i.item(s)},_getInsertPoints:function(s){var n=this._blockNode,i=n.hasClass("sqs-float-left")||n.hasClass("sqs-float-right"),u=this._isInMultiColumnRow(n.ancestor(".sqs-col")),h=this.get("insertPoints")||[],g=this.get("divideSelectors"),p=g?n.all(g):null,f=this.get("host").get("editController"),m=f.getInsertMenu(this._getEditMode());return e.Lang.isValue(m)&&m.get("visible")?h:(!h.length&&!i?h=this._getInitInsertPoints():i?h=[]:p&&(!this._savedDivideNodes||!this._listsAreEqual(p,this._savedDivideNodes))?h=this._getInitInsertPoints():(s||u)&&(h=this._getInitInsertPoints()),this.get("insertPoints")!==h&&this.set("insertPoints",h),h||[])},_listsAreEqual:function(s,n){return s.size()===n.size()&&!s.some(function(i){return n.indexOf(i)===-1})},_bindInsertPointEvents:function(){this._insertPointEvents||(this._insertPointEvents=[]),e.Array.each(this.get("insertPoints"),function(s){var n=s.node;!n||!n.getDOMNode()||(this._insertPointEvents.push(n.on("click",function(i){this._onClick(s)},this)),o.Ay?this._onMouseEnter(s):(this._insertPointEvents.push(n.on("mouseenter",function(){this._onMouseEnter(s)},this)),this._insertPointEvents.push(n.on("mouseleave",this._onMouseLeave,this))))},this)},_clearInsertPointNodes:function(s){s=s||this.get("insertPoints")||[],e.Array.each(s,function(n){n.node&&n.node.getDOMNode()&&n.node.remove()})},_clearInsertPointEvents:function(){if(this._insertPointEvents)for(var s=0,n=this._insertPointEvents.length;s<n;s++)this._insertPointEvents[s].detach();this._insertPointEvents=[]},align:function(s){var n=this._blockNode;if(!n||!n.getDOMNode()){this.destroy();return}if(!(!s&&!this.get("controller").get("enabled"))){var i=this._getInsertPoints(s),u=i.length;i=e.Array.filter(i,function(p){var f=this._getAlignNodeForInsertPoint(p);return!f||!f.ancestor()||!f._node.offsetParent?(console.warn("No node to align insert point to."),p.node.remove(),!1):!0},this);var h=e.Array.filter(i,function(p){return p.type==="content"}),g=e.Array.map(h,function(p){var f=this._getAlignNodeForInsertPoint(p),m=f._node;if(!m.isConnected)throw new Error("Trying to align insert point to disconnected Node");var _=m.offsetLeft,v=m.offsetTop,E=f.previous();if(E)if(m.offsetParent&&window.getComputedStyle(m.offsetParent).position==="relative"){var S=this._blockNode._node.getBoundingClientRect(),y=E._node.getBoundingClientRect(),C=m.getBoundingClientRect(),O=getComputedStyle(this._blockNode._node),A=parseFloat(O.borderTopWidth)||0,I=C.top-S.top-A,D=y.top-S.top,T=y.height+D,B=(I-T)/2;v=I-Math.round(B);var N=parseFloat(O.borderLeftWidth)||0;_=Math.round(C.left-S.left-N)}else{var P=E._node.clientHeight+E._node.offsetTop,x=(m.offsetTop-P)/2;v-=x}return{node:p.node._node,width:m.offsetWidth,xy:[_,v]}},this);this._massSetXY(g),i.length!==u&&this.set("insertPoints",i)}},_massSetXY:function(s){var n=e.DOM,i="position",u="top",h="left",g="width";e.Array.each(s,function(p){p.pos=n.getStyle(p.node,i),p.delta=n._getOffset(p.node),p.currentXY=n.getXY(p.node)}),e.Array.each(s,function(p){n.setStyle(p.node,h,p.xy[0]),n.setStyle(p.node,u,p.xy[1]),n.setStyle(p.node,g,p.width)},this)},registerWithController:function(){this.get("controller").registerInsertPoint(this,this._getLayoutNode())},deregisterWithController:function(){this.get("controller").deregisterInsertPoint(this,this._getLayoutNode())},_onMouseEnter:function(s){var n=this._getAlignNodeForInsertPoint(s);if(!n||!n.inDoc()){console.warn("no alignNode",n),this.align();return}document.documentElement.classList.add("sqs-insert-point-focused-in-frame"),e.one("html").addClass("sqs-insert-point-focused")},_onMouseLeave:function(){document.documentElement.classList.remove("sqs-insert-point-focused-in-frame"),e.one("html").removeClass("sqs-insert-point-focused")},_onClick:function(s){this.fire("click",{backend:e.Object.getValue(e.config.win,"Static.IN_BACKEND".split("."))});var n=r.CSS_PREFIX+"-active";s.node.addClass(n),this.openBlockMenu(s),o.Ay||this.toggleInsertPointsDisabled(!0);var i=this.get("host").get("editController"),u=i.getInsertMenu(this._getEditMode());u.after("insertPoint|visibleChange",function(h){h.newVal||(u.detach("insertPoint|visibleChange"),s.node.removeClass(n),this.toggleInsertPointsDisabled(!1))},this),this._logMaxNumBlocks()},_logMaxNumBlocks:function(){var s=this._getLayoutNode().all(".sqs-block:not(.sqs-block-html,.sqs-destroyme)").size();s>d.Z.MAX_BLOCKS_PER_LAYOUT&&console.warn("Appears to have "+s+" blocks in this layout.")},openBlockMenu:function(s){var n={align:{node:s.node,points:[e.WidgetPositionAlign.LC,e.WidgetPositionAlign.RC]},targetNode:this._getAlignNodeForInsertPoint(s),direction:s.position,type:s.type,layoutNode:this._getLayoutNode(),scrollNode:this._getLayoutNode().LayoutEditor.get("scrollNode"),editMode:this._getEditMode()};e.SQS.LayoutEngine.Events.fire("layout-engine:open-block-menu",n)},toggleInsertPointsDisabled:function(s){var n=this.get("host").get("editController");s?n.disableInsertPoints():n.enableInsertPoints()}},{NS:"insertPoint",CSS_PREFIX:"sqs-layout-insert-point",ATTRS:{insertPoints:{valueFn:"_getInitInsertPoints",setter:function(s){return this._clearInsertPointNodes(),this._clearInsertPointEvents(),s}},layoutNode:{value:null,validator:function(s){return s===null||e.instanceOf(s,e.Node)}},controller:{valueFn:function(){return e.SQS.LayoutEngine.Singletons.InsertPointController}},divideSelectors:{value:""}}})},"1.0",{requires:["plugin","@sqs/layout-engine/events","@sqs/layout-engine/layout-insert-point-controller"]})},288632:function(c,b,t){"use strict";var l=t(461761),d=t.n(l),o=t(723796),e=t(780512),a=t(92485),r=t(167078),s=t(337061),n=t(897820),i=t(938077),u=t(929698),h=t(88565),g=t(673951),p=o.Em.createLogger("block-focus-handler","springgreen",!1),f=e.Z?{START:"mousedown",MOVE:"mousemove",END:"mouseup"}:{START:"gesturemovestart",MOVE:"gesturemove",END:"gesturemoveend"};YUI.add("@sqs/layout-engine/layout-block-focus-handler",function(m){m.namespace("SQS.LayoutEngine.Block");var _=m.SQS.LayoutEngine.Block.BlockFocusHandler=m.Base.create("BlockFocusHandler",m.Base,[],{initializer:function(){var v=m.one(m.config.doc),E=m.SQS.LayoutEngine._hDocFocus;this._ensureDefaultFocusIsRemoved(),E||(E={},E=m.SQS.LayoutEngine._hDocFocus=v.on(f.START,m.bind(this._onDocMouseDown,this)),m.config.doc.addEventListener("click",this._captureClicks.bind(this),{capture:!0}),E.listeners={count:0}),E.listeners[m.stamp(this,!0)]=!0,E.listeners.count++;var S=m.throttle(m.bind(this._unfocusIfOutOfViewport,this),30);this._onScroll=v.on("scroll",S),this._onGestureMove=v.on(f.MOVE,S)},_getBlockDialog:function(v){return v&&d()(v,"blockEditor.configDialog")},_isSchemaEditorOpen:function(){var v=i.Pr$((0,s.d6)());return!!(v&&v.blockEditor&&v.blockEditor.get("isBlockEditorOpen"))},_isEditorDialogOpen:function(){var v=i.Pr$((0,s.d6)()),E=this._getBlockDialog(v);return E&&E.get("visible")},_isDialogOpen:function(){return this._isSchemaEditorOpen()||this._isEditorDialogOpen()},_captureClicks:function(E){if(this.isClosingDialog){if(E.target.className.indexOf("confirmation-button")>-1)return;E.preventDefault(),E.stopImmediatePropagation(),E.stopPropagation()}},_ensureDefaultFocusIsRemoved:function(){m.Widget._hDocFocus&&m.Widget._hDocFocus.detach()},preventBlockFocus:function(){this._detachMouseEvents()},_isActiveBlockDialogEvent:function(v){if(!v||!this._isDialogOpen())return!1;var E=i.Pr$((0,s.d6)()),S=this._getBlockDialog(E);if(S)for(var y=S.get("dialog"),C=[y].concat(y.childDialogs),O=0;O<C.length;O++){var A=C[O];if(A.el&&(A.el===v.target||A.el.contains(v.target)))return!0}return!1},_onDocMouseDown:function(v){var E=m.one(m.config.doc);this._detachMouseEvents(),this._ensureDefaultFocusIsRemoved(),this._hDocMouseUp=E.on(f.END,m.bind(this._onDocMouseUp,this))},_onDocMouseUp:function(v){this._detachMouseEvents(),this._onDocFocus(v)},_changeFocusedBlock:function(v){if(!(!v||!v.target||v.button===3)){var E=v.target.getDOMNode?v.target.getDOMNode():v.target;if(!(E.closest((0,h.Ud)(h.Mi))||E.dataset.isContextMenu||E.parentElement&&E.parentElement.classList.contains("context-menu-modal-position"))){var S=u.TX(E),y=i.Pr$((0,s.d6)()),C=!!E.closest('[data-block-focus-handler-id="react-block-annotation"]');if(y&&!C){var O=function(){(0,s.GE)(n.wv())},A=this._isDialogOpen();if(A){this._handleDialogOpenFocusChange(v,O);return}var I=y===S;if(I)return;if(!S){O();return}}S&&(0,s.GE)(n.lT(S.get("id")))}}},_handleDialogOpenFocusChange:function(v,E){if(!this._isSchemaEditorOpen()){var S=i.Pr$((0,s.d6)());if(S){var y=this._getBlockDialog(S);if(y){var C=y.get("dialog");if(C){this.isClosingDialog=!0;var O=m.bind(function(){this.isClosingDialog=!1,E()},this),A=m.bind(function(){this.isClosingDialog=!1},this);this._onDialogClose(C,O,A),a.i()?C.saveAndClose():C.close(v,!1)}}}}},_onDocFocus:function(v){if(!g.qu){var E=(0,r.Z)()?"metaKey":"ctrlKey";if(!(v._event.target.closest("[data-fluid-engine]")&&(v[E]||v.shiftKey))){if(u.Nn(v)){p("focus maintained");return}if(this._isActiveBlockDialogEvent(v)){p("event took place in active block dialog");return}this._changeFocusedBlock(v)}}},handleRteMousedown:function(v,E,S){var y=E.get("id")===i.Ouw((0,s.d6)());if(y){E.get("editable")&&E.get("editController")&&E.get("editController").hideBlockMenus();return}var C=v.target.getDOMNode?v.target.getDOMNode():v.target,O=u.TX(C);(0,s.GE)(n.lT(O.get("id")))},_onDialogClose:function(v,E,S){var y,C;y=v.once("dismiss",function(){C.detach(),typeof E=="function"&&E()},this),C=v.once("cancel-close",function(){y.detach(),typeof S=="function"&&S()},this)},_unfocusIfOutOfViewport:function(){var v=i.Pr$((0,s.d6)());if(v){var E=i.Hlz((0,s.d6)()),S=i.kPT((0,s.d6)());E&&S||(!v.get("boundingBox").getDOMNode()||!v.checkBlockInView())&&(0,s.GE)(n.wv())}},_detachMouseEvents:function(){this._hDocMouseUp&&this._hDocMouseUp.detach()},destructor:function(){m.Widget.prototype._unbindDOM.call(this),this._detachMouseEvents(),this._onScroll&&this._onScroll.detach(),this._onGestureMove&&this._onGestureMove.detach()}});m.namespace("SQS.LayoutEngine.Singletons"),m.SQS.LayoutEngine.Singletons.BlockFocusHandler=new _},"1.0",{requires:["base","model","event","widget","widget-parent","@sqs/layout-engine/events"]})},883189:function(c,b,t){"use strict";var l=t(935215),d=t.n(l),o=t(484623),e=t.n(o),a=t(714487),r=t(408549),s=t(734526),n=t(784874),i=t(276860),u=t(322470),h=t.n(u),g=t(104495),p=t(965455),f=t(426728),m=t(787592),_=t(166455),v=t.n(_);YUI.add("@sqs/layout-engine/layout-builder",function(E){E.namespace("SQS.LayoutEngine.Layout"),E.SQS.LayoutEngine.Layout.Builder=E.Base.create("LayoutBuilder",E.Plugin.Base,[E.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(C){this.publish("layoutRendered",{defaultFn:function(D){D.layout.setAttribute("data-blocks-rendered",""),D.layout.all(".sqs-block:not(.yui3-dd-dragging)").getDOMNodes().forEach(function(T){E.Widget.getByNode(T).fire("layout-rendered")}),E.SQS.LayoutEngine.Events.fire("layout-engine:layout-rendered",{node:D.layout})},emitFacade:!0}),this._blockSet=new S,this._registerEvent(this._blockSet.on("add",this._onBlockSetAdd,this),this._blockSet.on("remove",this._onBlockSetRemove,this));var O=this.get("host"),A=this._getContent();O.addClass("sqs-layout sqs-grid-"+this.get("columns")),A||(A=this.toJSON(),this._setContent(A)),O.empty();var I=e()(A);this._cleanupImportedHTML(I),this.fromJSON(O,I)},_onBlockSetAdd:function(C){var O=C.block;O.addTarget(this),O.get("model").layout=this.get("layout"),this._registerEvent(O.get("model").after("change",this.syncDOMToContent,this),O.after("containerStylesChange",this.syncDOMToContent,this),O.after("destroy",function(){var A=this.get("host").LayoutEditor;A&&A.cleanGrid()},this))},_onBlockSetRemove:function(C){var O=C.block;O.removeTarget(this),this.syncDOMToContent()},fromJSON:function(C,O){var A=this.get("host"),I=new E.Parallel;this._isBuildingFromJSON=!0;var D=this._fromJSON(C,O,I);return this._isBuildingFromJSON=!1,A.addClass("sqs-layout-rendering"),setTimeout((function(){I.done(E.bind(function(){A.removeClass("sqs-layout-rendering"),this.fire("layoutRendered",{layout:C}),this.syncDOMToContent(!0),this.fire("syncContentFromJSON")},this))}).bind(this),0),D},_fromJSON:function(C,O,A){var I=null,D=null;return E.Lang.isString(O.collectionId)&&(I=O.collectionId),E.Lang.isString(O.contentItemId)?D=O.contentItemId:E.Lang.isString(O.parentItemId)&&(D=O.parentItemId),this.blocks=[],O.blocks?this._renderBlocks(O.blocks,C,A,I,D):O.rows?this._renderRows(O.rows,C,A,I,D):O.columns&&this._renderColumns(O.columns,C,A,I,D),C},_renderRows:function(C,O,A,I,D){C.forEach(function(T){var B=this.createRow();O.append(B),T.collectionId=I,T.contentItemId=D,this._fromJSON(B,T,A)},this)},_renderColumns:function(C,O,A,I,D){C.forEach(function(T){var B=this.createColumn(null,C.length>1?T.span:null);O.append(B),T.collectionId=I,T.contentItemId=D,this._fromJSON(B,T,A)},this)},_renderBlocks:function(C,O,A,I,D){C.forEach(function(T){T.collectionId=I,T.contentItemId=D,this._renderBlock(T,O,A)},this)},_renderBlock:function(C,O,A){var I;if(E.Lang.isNumber(C.type)){var D=s.Z.BlockTypeKeys,T=this.get("editController"),B=T.getRenderableBlocks(this.get("editMode")),N=D[C.type],P=N?B.get(N):null;if(E.Lang.isValue(P)){var x=P.isSchemaBlock?E.SQS.LayoutEngine.SchemaBase:P.ctor;I=new x({editMode:this.get("editMode"),editController:T,id:C.id,definitionName:C.definitionName,editorSettings:(0,f.L)(C),model:C.value,stack:A,type:C.type,isNewBlock:C.isNewBlock,collectionId:C.collectionId,contentItemId:C.contentItemId,containerStyles:C.containerStyles}),this.registerBlock(I),this._registerEvent(I.on("save",this.syncDOMToContent,this))}else I=new E.SQS.LayoutEngine.Block.Unrenderable({editMode:this.get("editMode"),editController:T,id:C.id,model:C.value,stack:A,type:C.type});return I.render(O),I}},createRow:function(C){return E.Node.create('<div class="sqs-row"></div>').setContent(C)},createColumn:function(C,O){E.Lang.isValue(O)||(O=this.get("columns"));var A=Math.min(O,this.get("columns"));return E.Node.create('<div class="sqs-col sqs-col-'+A+'"></div>').setContent(C)},toJSON:function(C){C=C||this.get("host");var O={};if(!C)throw new Error("Invalid node passed toJSON().");if(C.hasClass("sqs-row"))O.columns=[],C.get("children").filter(".sqs-col").each(function(D){O.columns.push(this.toJSON(D))},this);else if(C.hasClass("sqs-col")||C.hasClass("sqs-layout")){C.test("[class*='sqs-col-']")?O.span=E.SQS.LayoutEngine.Layout.Utils.getValFromClass(C,"sqs-col-"):C.test("[class*='sqs-grid-']")?O.span=E.SQS.LayoutEngine.Layout.Utils.getValFromClass(C,"sqs-grid-"):C.test("[class*='columns-']")?O.span=E.SQS.LayoutEngine.Layout.Utils.getValFromClass(C,"columns-"):console.error("Cannot find r.span from the wrappers");var A=[],I=[];C.get("children").each(function(D){if(D.test(".sqs-row"))A.length!==0&&(I.push({columns:[{span:O.span,blocks:e()(A)}]}),A=[]),I.push(this.toJSON(D));else if(D.test(".sqs-block")){var T=E.Widget.getByNode(D),B;if(T?B=T.toJSON():(B={id:D.getAttribute("id"),type:D.getData("block-type"),value:E.JSON.parse(D.getData("block-json"))},B.type===n.Z.WEBSITE_COMPONENT&&(B.definitionName=D.getData("definition-name"))),B.type===n.Z.WEBSITE_COMPONENT&&!B.definitionName&&m.$e(function(N){N.setTag("owner",v().CONTENT_RENDERING),N.setTag("definitionName",D.getData("definition-name")),m.Tb("attempt to save a website component without definitionName")}),!B)throw new Error("Block has no JSON.");A.push(B)}},this),I.length===0?O.blocks=A:(A.length!==0&&((E.Lang.isUndefined(O.span)||E.Lang.isNull(O.span))&&console.error("Block column span is invalid: ",O.span),I.push({columns:[{span:O.span,blocks:e()(A)}]})),O.rows=I)}return(O.rows&&O.rows.length===0||O.columns&&O.columns.length===0)&&(delete O.rows,delete O.columns,O.blocks=[],C.get("children").filter(".sqs-block").each(function(D){var T=D.getData("block");T&&O.blocks.push(T.toJSON())},this)),O},syncDOMToContent:function(C){if(!this._isBuildingFromJSON){var O=this.get("host").LayoutEditor;O&&O.handleEmptyLayout(O.getBlockNodes()),this._setContent(this.toJSON(),C===!0)}},_updateNewBlockModel:function(C,O,A){switch(A){case n.Z.CHART:O.dataTableId||(C.dataTable=O.dataTable);case n.Z.NEWSLETTER:Object.assign(C,h()(O,i.po[A]))}},_handleChangedBlocks:function(C,O,A){if(C.length!==0){var I=E.SQS.LayoutEngine.Layout.Utils.getBlocksFromJSON(O);C.forEach((function(D){var T=D.after,B=this._blockSet.getById(T.id),N=I.find(function(w){return w.id===T.id}),P=B.get("model"),x=i.T6(P.toJSON(),N.value,N.type);if(x){var R=d()(T).filter(function(w){return!N.value.hasOwnProperty(w)&&typeof T[w]<"u"}).concat(Object.keys(D.before.value).filter(function(w){return!T.value.hasOwnProperty(w)})).reduce(function(w,k){return w[k]=void 0,w},Object.assign({},N.value));this._updateNewBlockModel(R,P.toJSON(),N.type),P.setAttrs(R,{silent:A||!1}),D.after.containerStyles&&B.set("containerStyles",D.after.containerStyles,{silent:A||!1}),B.syncUI({immediate:!0}),A&&B._renderBlock&&B._renderBlock()}}).bind(this))}},syncBlockContentFromJSON:function(C,O,A){this._handleChangedBlocks(O,C,A),this._setContent(C,A)},_setContent:function(C,O){this.get("layout").setAttrs(C,{silent:O})},_getContent:function(){return this.get("layout").toJSON()},registerBlock:function(C){this._blockSet.add(C)},deregisterBlock:function(C){this._blockSet.remove(C)},deregisterBlocks:function(C){E.Array.each(C,function(O){this._blockSet.remove(O)},this)},_cleanupImportedHTML:function(C){if(C.rows)this._cleanupImportedHTML(C.rows);else if(E.Lang.isArray(C.columns))this._cleanupImportedHTML(C.columns);else if(E.Lang.isArray(C))for(var O=0;O<C.length;O++)this._cleanupImportedHTML(C[O]);else if(C.blocks){for(var A=[],I=0;I<C.blocks.length;I++)if(C.blocks[I].type==n.Z.HTML&&C.blocks[I].value&&C.blocks[I].value.html){var D=E.guid(),T=C.blocks[I].value.html,B=T.toLowerCase();if((B.indexOf("<iframe")!==-1||B.indexOf("<img")!==-1)&&F(B,"<iframe")+F(B,"<img")<125){var N=E.Node.create('<div id="'+D+'"/>');try{N.setContent("<div>"+T+"</div>")}catch(X){console.error("Skipping over error while trying to clean import html: ",X);continue}var P=j(N,"iframe, img");if(P=E.one(P),P.get("id")!=D){var x=z(P.get("childNodes"),N);A.push({find:C.blocks[I],replaceWith:x})}}}if(A.length>0)for(var R=0;R<A.length;R++){for(var w=A[R],k=[C.blocks.indexOf(w.find),1],q=0;q<w.replaceWith.length;q++)k.push(w.replaceWith[q]);C.blocks.splice.apply(C.blocks,k)}}function F(X,J){return X.split(J).length-1}function z(X,J){var Q=[],ie,ce=new RegExp("/static/([a-z0-9]{24})/([a-z0-9]{24})/([a-z0-9]{24})/[a-z0-9]{13}","i");return X.each(function(pe){if(E.one(pe).test("iframe"))ie=E.SQS.LayoutEngine.PageLayoutTools.makeBlock(n.Z.EMBED,{html:pe.get("outerHTML"),resolvedBy:"manual",title:"",url:""}),Q.push(ie);else if(E.one(pe).test("img")&&ce.test(pe.get("src"))){var ye=J.one('img[src="'+pe.getAttribute("src")+'"]'),Ae=null;ye&&(Ae=ye.ancestor("a"),(!Ae||!Ae.test("a"))&&(Ae=null));for(var Je=pe.get("src").match(ce),ke=[],Fe=0;Fe<Je.length;Fe++)Je[Fe].length==24&&ke.push(Je[Fe]);var Ie=null;if(ke.length==3&&(Ie=ke[2]),!Ie){window.trackClientError&&window.trackClientError({url:document.location.href,message:(0,a.t)("Error creating image block from imported html. Could not find valid objectId.",null,{project:"scripts-v6.layout-engine"}),file:"builder.js",line:"LayoutBuilder._cleanupImportedHTML / makeNewBlocks"}),console.error("Error cleaning up an image: ",pe);return}var ht="";E.Lang.trim(pe.get("title"))!=""?ht=pe.get("title"):E.Lang.trim(pe.get("alt"))!=""&&(ht=pe.get("alt"));var me={description:ht,linkTo:Ae?Ae.getAttribute("href"):"",newwindow:Ae?Ae.hasAttribute("_blank"):!1,imageId:Ie};ie=E.SQS.LayoutEngine.PageLayoutTools.makeBlock(n.Z.IMAGE,me),Q.push(ie)}else E.one(pe).test("img")?(ie=E.SQS.LayoutEngine.PageLayoutTools.makeBlock(n.Z.CODE,{wysiwyg:{engine:"code",mode:"htmlmixed",isSource:!1,source:""},html:'<img src="'+pe.get("src")+'" title="'+pe.get("title")+'" alt="'+pe.get("alt")+'"/>'}),Q.push(ie)):pe.getContent()&&y(pe)!==""&&((!ie||ie.type==n.Z.EMBED||ie.type==n.Z.IMAGE||ie.type==n.Z.CODE)&&(ie=E.SQS.LayoutEngine.PageLayoutTools.makeBlock(n.Z.HTML,{html:"",wysiwyg:{html:""}}),Q.push(ie)),ie.value.html+=pe.get("outerHTML"))}),Q}function j(X,J){var Q=[],ie=["h1","h2","h3","h4","h5","h6","p","ul","ol","li","blockquote"],ce=["a","strong","em","b","i","cite"],pe={ul:["li","ol","ul"],ol:["li","ul","ol"],li:["ol","ul","li"],blockquote:["ul","ol","li","p"]},ye={li:["ul","ol"]},Ae=["br","table","tr","div"],Je=E.Node.create("<div></div>"),ke=[],Fe="",Ie=[],ht="",me=!1;function Ee(Mt,Vt){for(Vt(Mt),Mt=Mt.firstChild;Mt;)Ee(Mt,Vt),Mt=Mt.nextSibling}function Se(Mt){var Vt=Mt.tagName;return Vt=Vt?Vt.toLowerCase():"textNode",Vt=Vt==="b"?"strong":Vt,Vt=Vt==="i"?"em":Vt,Vt}function lt(Mt){return E.Array.indexOf(ce,Se(Mt))>=0}function Lt(Mt){return E.Array.indexOf(ie,Se(Mt))>=0}function Pt(Mt){return E.Array.indexOf(Ae,Se(Mt))>=0}function Ce(Mt){return Mt.nodeType==3&&E.Lang.trim(E.one(Mt).get("text"))!=""}function je(Mt,Vt,Ti){for(var Ni=[],ui=[],gn=Vt.length-1;gn>=0;gn--){var zi=Vt[gn],Mn=!1;me&&gn===Vt.length-1&&zi===Se(Mt)?Mn=!0:zi==="strong"&&!Ti.ancestor(zi)?Ti.ancestor("b")||(Mn=!0):zi==="em"&&!Ti.ancestor(zi)?Ti.ancestor("i")||(Mn=!0):Ti.ancestor(zi)||(Mn=!0),Mn?ui.push(zi):Ni.unshift(zi)}return{closed:ui,nodes:Ni}}function Le(Mt,Vt){return E.Array.indexOf(Vt,Se(Mt))>=0}function ci(){var Mt,Vt;for(Mt=ke.length-1;Mt>=0;Mt--)gi(ke[Mt]);for(Mt=Ie.length-1;Mt>=0;Mt--)Vt=Mt===0,Ft(Ie[Mt],Vt)}function Jt(Mt,Vt){Ie.length===0?ye.hasOwnProperty(Mt)?(ht+="<p>",Ie.push("p")):(ht+="<"+Mt+">",Ie.push(Mt)):pe.hasOwnProperty(Ie[Ie.length-1])&&E.Array.indexOf(pe[Ie[Ie.length-1]],Mt)>=0&&(Fe.length>0?qt(Mt):(ht+="<"+Mt+">",Ie.push(Mt)))}function Ft(Mt,Vt){gi(null,!0),ht+="</"+Mt+">",Q.push(ht),ht="",Vt&&Ie.pop(),Ie.length===0&&me&&(me=!1)}function ti(Mt,Vt){if(ke.push(Mt),Mt=="a"){var Ti=Vt.getAttribute("target"),Ni="";E.Lang.isValue(Ti)&&Ti.length>0&&(Ni=(0,r.Z)(' target="{targetAttribute}"',{targetAttribute:Ti})),Fe+='<a href="'+Vt.get("href")+'"'+Ni+">"}else Fe+="<"+Mt+">"}function gi(Mt,Vt){Mt&&(Fe+="</"+Mt+">"),Vt&&(ht+=Fe,Fe="")}function qt(Mt){ht+=Fe,Fe="",Ie.push(Mt),Q.push(ht),ht="<"+Mt+">",me=!0}return Ee(X._node,function(Mt){var Vt,Ti=E.one(Mt),Ni=Se(Mt),ui=Ti.get("text"),gn=je(Mt,ke,Ti),zi=je(Mt,Ie,Ti);if(gn.closed.length>0)for(ke=gn.nodes,Vt=0;Vt<gn.closed.length;Vt++)gi(gn.closed[Vt]);if(zi.closed.length>0)for(Ie=zi.nodes,Vt=0;Vt<zi.closed.length;Vt++)Ft(zi.closed[Vt]);if(Ti.test(J))Q.push(Ti.get("outerHTML"));else if(lt(Mt)){if(Ni==="a"&&Ti.one(">"+J))return;Le(Mt,ke)||ti(Ni,Ti)}else if(Lt(Mt))Jt(Ni,Mt);else if(Ce(Mt))E.Lang.trim(ui)!=""&&(Ie.length||Jt("p",Mt),ui=ui.replace(/</g,"&lt;").replace(/>/g,"&gt;"),Fe+=ui);else if(Pt(Mt)){if(Ie.length>0){var Mn=Ie[Ie.length-1];Ft(Mn,!0),Jt(Mn,Mt)}else if(Fe.length>0){for(Vt=ke.length-1;Vt>=0;Vt--)gi(ke[Vt]);Jt("p",Mt),Ft("p",!0)}}}),ci(),Q.length<=1&&Q.push("<p></p>"),Je.append(E.Node.create(Q.join(""))),E.Node.create(Je.get("innerHTML"))._node}}},{NS:"LayoutBuilder",ATTRS:{columns:{valueFn:function(){return this.get("layout").get("columns")}},editController:{writeOnce:!0,validator:function(C){return E.instanceOf(C,E.SQS.LayoutEngine.EditControllerBase)}},layout:{writeOnce:!0,validator:function(C){return E.instanceOf(C,E.SQS.LayoutEngine.Models.PageLayout)}},editMode:{writeOnce:!0,validator:function(C){return C in g.Z}}}});var S=E.Base.create("BlockSet",E.Base,[],{initializer:function(){this._blockMap={}},add:function(C){this._containsBlock(C)||(this._blockMap[C.get("id")]=C,C.after("destroy",function(){this.remove(C)},this),this.fire("add",{block:C}))},getById:function(C){var O=this._blockMap[C];return E.Lang.isValue(O)?O:null},_containsBlock:function(C){return C&&E.Lang.isValue(this._blockMap[C.get("id")])},remove:function(C){this._containsBlock(C)&&(delete this._blockMap[C.get("id")],this.fire("remove",{block:C}))}});E.SQS.LayoutEngine.PageLayoutTools={sanitizeImportedECB:function(C){var O=C.get("layout").toJSON();if((0,i.tp)(O)&&E.Lang.isValue(C.get("html"))){var A=C.get("html");C.get("layout").setAttrs({rows:[{columns:[{span:12,rows:[{columns:[{span:12,blocks:[this.makeBlock(n.Z.HTML,{html:A,wysiwyg:{html:A}})]}]}]}]}]})}},convertLayoutToNewColumnCount:function(C,O){C.set("columns",O),C.get("rows").each(A);function A(D){var T=[];E.Array.each(D.columns||D.get("columns"),I)}function I(D){D.span=O,D.rows&&E.Array.each(D.rows,A)}},makeBlock:function(C,O){return{type:C,id:(0,p.x)(),value:O}}};function y(C){var O=[];return C.get("nodeType")==3?C.get("nodeValue"):(C.get("childNodes").each(function(A){O.push(y(A))}),O.join(" "))}},"1.0",{requires:["array-invoke","base","json","node","squarespace-util","@sqs/layout-engine/layout-utils","@sqs/layout-engine/block/generic-base","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/event-registrar","@sqs/layout-engine/layout-utils","@sqs/layout-engine/models-layout"]})},272252:function(c,b,t){"use strict";var l=t(337061),d=t(897820);YUI.add("@sqs/layout-engine/layout-drag",function(o){o.namespace("SQS.LayoutEngine.Layout"),o.SQS.LayoutEngine.Layout.DragDelegate=o.Base.create("LayoutDragDelegate",o.SQS.DDWrappers.DD.Delegate,[],{initializer:function(){this.dd.plug(o.SQS.DDWrappers.Plugin.DDSuperProxy,this.get("dragProxyConfig")),this.before("drag:start",this._beforeDragStart),this.after("drag:start",this._afterDragStart),this.on("drag:over",this._dragOver),this.on("drag:end",this._dragEnd),this.on("scroll:start",this._onDDScrollStart),this.on("scroll:end",this._onDDScrollEnd),o.UA.mobile&&this.get("preventScrollOnTouch")&&this._preventScrollOnTouch();var e=this.get("editController");this.after("edgeInfoChange",e.processEdgeInfo,e)},_preventScrollOnTouch:function(){this.on("drag:mouseDown",function(e){e.ev.preventDefault()},this),this.get("container").on("touchmove",function(e){this.dd.get("lock")||e.preventDefault()},this)},_beforeDragStart:function(){o.DD.DDM.syncActiveShims(),o.SQS.LayoutEngine.Singletons.BlockFocusHandler.preventBlockFocus(),(0,l.GE)(d.wv());var e=o.DD.DDM.activeDrag.get("node"),a=o.Widget.getByNode(e);this.dd.setAttrs({dragWidget:a,dragNodeRegion:e.get("region")}),(0,l.GE)(d.dC(e.getDOMNode().id))},_afterDragStart:function(){this.get("extraSyncShims")&&o.later(250,this,function(){o.DD.DDM.syncActiveShims()})},_dragOver:function(e){if(!e.drop.get("lock")){var a=this.getNearestEdge();a&&this.set("edgeInfo",a)}},_dragEnd:function(){var e=o.DD.DDM.activeDrag.get("node");o.Object.getValue(e,"_node")&&e.setStyles({position:null,top:null,left:null}),this.dd.setAttrs({dragWidget:null,dragNodeRegion:null}),(0,l.GE)(d.cq())},getNearestEdge:function(){var e=null,a=o.DD.DDM.activeDrop,r=a.get("node"),s=r.ancestor(".sqs-block:not(.sqs-destroyme)",!0,".sqs-layout");if(!s)return e;var n=r.get("region"),i=n.left,u=n.top,h=n.width+parseInt(r.getComputedStyle("marginLeft"),10)+parseInt(r.getComputedStyle("marginRight"),10),g=n.height+parseInt(r.getComputedStyle("marginTop"),10)+parseInt(r.getComputedStyle("marginBottom"),10),p=o.DD.DDM.activeDrag.mouseXY,f={x:p[0]<i+h/2?"left":"right",y:p[1]<u+g/2?"top":"bottom"},m=f.x==="left"?p[0]-i:i+h-p[0],_=f.y==="top"?p[1]-u:u+g-p[1],v=h,E=Math.min(h,g),S=m/v*100,y=_/E*100,C=S<y?f.x:f.y,O=S<y?m:_;return isNaN(O)||(e={node:r,direction:C,distance:O,quad:f,region:n}),e},_onDDScrollStart:function(e){this.set("edgeInfo",null),this._updateInsertMarkerLock(!0),o.one("html").addClass("scrolling scrolling-"+e.direction)},_onDDScrollEnd:function(e){e.isScrollLocked||this._updateInsertMarkerLock(!1);var a=o.one("html");a.removeClass("scrolling"),a.removeClass("scrolling-down"),a.removeClass("scrolling-up")},_updateInsertMarkerLock:function(e){var a=this.get("editController");a&&a.toggleInsertMarkerLock(e)}},{ATTRS:{container:{valueFn:function(){return o.one(o.config.doc.body)},lazyAdd:!1},nodes:{value:".sqs-block"},groups:{value:null,lazyAdd:!1},invalid:{value:".sqs-dd-invalid",validator:o.Lang.isString},editController:{value:null},edgeInfo:{value:{node:null,direction:"",distance:0,quad:null,region:null}},extraSyncShims:{value:!1,validator:o.Lang.isBoolean},scrollNode:{setter:function(e){return e.hasClass("sqs-layout")&&e.ancestor(".sqs-layout-scroll")||e}},preventScrollOnTouch:{value:!1},dragProxyConfig:{value:{}}}})},"1.0",{requires:["base","@sqs/layout-engine/layout-block-focus-handler","@sqs/yui-dd-wrappers/dd-delegate","@sqs/yui-dd-wrappers/dd-superproxy","@sqs/layout-engine/scroll-into-view"]})},649625:function(){YUI.add("@sqs/layout-engine/layout-drop",function(c){c.namespace("SQS.LayoutEngine.Layout").Drop=c.Base.create("LayoutDrop",c.DD.Drop,[],{initializer:function(){c.DD.DDM.activeDrag&&this._activateShim()},_activateShim:function(){var b=c.DD.DDM,t="node";if(!b.activeDrag||this.get("lock"))return!1;var l=this.get(t);this.inGroup(b.activeDrag.get("groups"))?(l.removeClass(b.CSS_PREFIX+"-drop-active-invalid"),l.addClass(b.CSS_PREFIX+"-drop-active-valid"),b._addValid(this),this.overTarget=!1,this.get("useShim")||(this.shim=this.get(t)),this.sizeShim()):(b._removeValid(this),l.removeClass(b.CSS_PREFIX+"-drop-active-valid"),l.addClass(b.CSS_PREFIX+"-drop-active-invalid"))},sizeShim:function(){var b=c.DD.DDM,t="node",l="offsetHeight",d="offsetWidth";if(!b.activeDrag||this.get("lock"))return!1;if(!this.shim)return c.later(100,this,this.sizeShim),!1;var o=this.get(t),e=o.get(l),a=o.get(d),r=this.get("padding"),s=o.getXY(),n,i,u;a=a+r.left+r.right,e=e+r.top+r.bottom,s[0]=s[0]-r.left,s[1]=s[1]-r.top,b.activeDrag.get("dragMode")===b.INTERSECT&&(n=b.activeDrag,i=n.get(t).get(l),u=n.get(t).get(d),e=e+i,a=a+u,s[0]=s[0]-(u-n.deltaXY[0]),s[1]=s[1]-(i-n.deltaXY[1])),this.get("useShim")&&this.shim.setStyles({height:e+"px",width:a+"px",top:s[1]+"px",left:s[0]+"px"}),this.region={0:s[0],1:s[1],area:0,top:s[1],right:s[0]+a,bottom:s[1]+e,left:s[0]}}},{ATTRS:{lockScroll:{value:!1}}})},"1.0",{requires:["base","dd-drop"]})},470908:function(c,b,t){"use strict";var l=t(208935),d=t(784874),o=t(734526),e=t(406167),a=t.n(e),r=t(337061),s=t(938077),n=t(673951),i=t(104495),u=t(187913),h=t(965455),g=!1,p=new RegExp("^[\\s]*$"),f="[\\u200B-\\u200D\\uFEFF]";YUI.add("@sqs/layout-engine/layout-editor",function(m){var _=m.SQS.LayoutEngine.Layout.Utils.getValFromClass;m.namespace("SQS.LayoutEngine.Layout"),m.SQS.LayoutEngine.Layout.Editor=m.Base.create("LayoutEditor",m.Plugin.Base,[],{initializer:function(v){this._host=this.get("host"),this._builder=this._host.LayoutBuilder,this._layout=this._builder.get("layout"),this.toggleBlocksEditable(!0),m.SQS.LayoutEngine.Events.fire("layout-engine:reload-images"),this._initializeFloatResizerNodes(),this._initializeColumnResizerNodes(),!n.qu&&!this.get("dragDropLock")&&(this._initDD(v),this._initColumnResizer(),this._initFloatResizer()),this._host.addClass("sqs-editing"),this.get("layoutTutorialPromise").then((function(){!this.get("destroyed")&&this._layout.isBlank()&&this._toggleInsertPointGuide(!0)}).bind(this))},destructor:function(){this.get("editController").hideBlockMenus(),this._host.removeClass("sqs-editing"),this.toggleBlocksEditable(!1),this._toggleInsertPointGuide(!1),this._insertPointClickedListener&&(this._insertPointClickedListener.detach(),this._insertPointClickedListener=null),this._destroyDD(),this._destroyFloatResizer(),this._destroyColumnResizer(),this._destroyResizeHelperNodes(),this._handleEmptyLayoutOnDestroy(),this._host=null},_initDD:function(v){if(!this.get("lockedLayout")){var E=[".sqs-dd-invalid",".sqs-edit-dialog-open",".sqs-helper",".sqs-block-locked-layout"],S=["."+l.DISABLE_YUI_DRAG_CLASSNAME,".sqs-block-focused .sqs-dd-invalid-handle-on-focus"],y=this.dragDelegate=new m.SQS.LayoutEngine.Layout.DragDelegate({container:this._host,nodes:".sqs-block",invalid:E.join(", "),invalidHandles:S.join(", "),dragConfig:{groups:["blocks"],clickTimeThresh:u.h,haltDown:null},extraSyncShims:!0,enableDragScroll:!0,scrollNode:this.get("scrollNode"),editController:this.get("editController"),dragProxyConfig:{cloneNode:!0,hideOriginalNode:!0,moveOnEnd:!1,flyBack:!1}});try{y.dd.removeInvalid("textarea")}catch(C){if(window.MOBILEAPP)console.warn("Error removing invalid textarea from delegate in Mobile App",C);else throw C}y.before("drag:mouseDown",this._beforeDragMousedown,this),y.before("drag:start",this._beforeDragStart,this),y.on("drag:start",this._onDragStart,this),y.after("drag:end",this._afterDragEnd,this),this.on("dragDropLockChange",function(C){y.set("lockTarget",C.newVal),m.Array.each(m.DD.DDM.targets,function(O){this._host.contains(O.get("node"))&&(C.newVal?(O.set("lock",!0),O._deactivateShim()):(O.set("lock",!1),O._activateShim()))},this),this.get("editController").toggleInsertMarkerLock(C.newVal)},this)}},_destroyDD:function(){this.dragDelegate&&(this.dragDelegate.destroy(),this.dragDelegate=null)},_initColumnResizer:function(){this.resizers=new m.DD.Delegate({container:this._host,nodes:".sqs-helper",invalid:".no-editing .sqs-helper, .sqs-float-right .sqs-helper, .sqs-float-left .sqs-helper",dragConfig:{groups:["resizers"],move:!1}}),this.resizers.on("drag:mouseDown",this._onResizerDragMousedown,this),this.resizers.on("drag:start",this._onResizerDragStart,this),this.resizers.on("drag:drag",this._onResizerDragDrag,this),this.resizers.on("drag:end",this._onResizerDragEnd,this)},_destroyColumnResizer:function(){this.resizers&&(this.resizers.destroy(),this.resizers=null)},_onResizerDragMousedown:function(v){var E=v.target.get("node"),S=E.ancestor(".sqs-row",!0);this.calcGridStops(S)},calcGridStops:function(v){var E=parseInt(v.getStyle("width"),10),S=parseInt(v.getStyle("paddingLeft"),10),y=v.ancestor(".sqs-col"),C=this.get("columns"),O=y?this.getElSize(y):C,A=E/O,I=v.getXY()[0];this.gridStops=[];for(var D=0;D<C-1;D++)this.gridStops.push(I+S+Math.round(A*(D+1)))},_onResizerDragStart:function(v){var E=v.target.get("node"),S=v.target.nodeXY[0],y=this.get("gutterSize");m.one("html").addClass("sqs-resizing-column"),this.leftColumn=E.ancestor(".sqs-col"),this.rightColumn=this.leftColumn.next(),this.leftOrigSize=this.getElSize(this.leftColumn),this.rightOrigSize=this.getElSize(this.rightColumn),this.origResizerPos=this.xToColumn(S+y/2),this._host.addClass("sqs-resizing"),this.leftColumn.addClass("sqs-resizing sqs-resizing-left"),this.rightColumn.addClass("sqs-resizing sqs-resizing-right"),this.saveOriginalSizes(E.ancestor(".sqs-row")),this.get("editController").disableInsertPoints()},xToColumn:function(v){var E=(this.gridStops[1]-this.gridStops[0])/2,S=this.gridStops[0],y=this.gridStops[this.gridStops.length];if(v<S)return 0;if(v>y)return this.get("columns")-1;for(var C=0;C<this.gridStops.length;C++){var O=this.gridStops[C];if(v>O-E&&v<O+E)return C}},_onResizerDragDrag:function(v){for(var E,S,y,C,O,A,I,D=v.target.mouseXY[0],T=this.gridStops[1]-this.gridStops[0],B=this.get("columns"),N=0,P=this.gridStops.length;N<P;N++){var x=this.gridStops[N];if(D<this.gridStops[0]-T)E=this.getMinColSize(this.leftColumn),S=this.rightOrigSize+this.leftOrigSize-E,this.setElSize(this.leftColumn,E),this.setElSize(this.rightColumn,S);else if(D>this.gridStops[this.gridStops.length-1]+T)S=this.getMinColSize(this.rightColumn),E=this.leftOrigSize+this.rightOrigSize-S,this.setElSize(this.leftColumn,E),this.setElSize(this.rightColumn,S);else if(D>x-T/2&&D<x+T/2){if(I=N-this.origResizerPos,E=this.leftOrigSize+I,S=this.rightOrigSize-I,y=this.getMinColSize(this.leftColumn),C=this.getMinColSize(this.rightColumn),O=this.getMaxColSize(this.leftColumn),A=this.getMaxColSize(this.rightColumn),E<y||E>O||S<C||S>A||E===this.getElSize(this.leftColumn))break;E=Math.min(Math.max(1,E),B),S=Math.min(Math.max(1,S),B),this.setElSize(this.leftColumn,E),this.setElSize(this.rightColumn,S);break}}},_onResizerDragEnd:function(){var v=this._host.all(".sqs-col");m.one("html").removeClass("sqs-resizing-column"),this._host.all(".sqs-col.sqs-resizing").each(function(E){var S=this.getElSize(E);E.get("children").filter(".sqs-float-left, .sqs-float-right").each(function(y){var C=this.getElSize(y);if(C>S+1){var O=m.Widget.getByNode(y);O&&O.get("model").set("floatDir",null)}},this),E.all(".sqs-block").each(function(y){m.Widget.getByNode(y).fire("resized")})},this),this._host.removeClass("sqs-resizing"),v.removeClass("sqs-resizing-left"),v.removeClass("sqs-resizing-right"),v.removeClass("sqs-resizing"),this.cleanGrid(),this.get("editController").enableInsertPoints()},getBlockNodes:function(v){var E=this._host.all(".sqs-block:not(.sqs-destroyme)"),S=this._host.all(".sqs-block-markdown .sqs-block").getDOMNodes(),y=E.filter(function(C){return S.indexOf(C)===-1});return v?y.filter(v):y},getBlocks:function(){var v=[],E=this.getBlockNodes();return E.each(function(S){var y=m.Widget.getByNode(S);y&&v.push(y)},this),v},beforeDrag:function(){m.Array.each(this.getBlocks(),function(v){v.blockEditor&&v.blockEditor.beforeLayoutDrag()},this)},afterDrag:function(){m.Array.each(this.getBlocks(),function(v){v.blockEditor&&v.blockEditor.afterLayoutDrag()},this)},toggleBlocksEditable:function(v){g&&console.log("[le] editor - toggleBlogsEditable",v,this),m.Array.each(this.getBlocks(),function(E){g&&console.log("[le] editor - toggleBlogsEditable block",E),v?this._enableEditingBlock(E):this._disableEditingBlock(E)},this)},_enableEditingBlock:function(v){var E=v.get("boundingBox").getAttribute("id"),S=this.get("startupBlockId"),y={editOnStart:E===S,editable:!0,promoted:this._layout.isPromotedBlock(v)};E===S&&m.Lang.isFunction(v.ensureLoadedThenShowDialog)?v.ensureLoadedThenShowDialog(function(){v.setAttrs(y)}):v.setAttrs(y)},_disableEditingBlock:function(v){v.setAttrs({editable:!1,promoted:this._layout.isPromotedBlock(v),isNewBlock:!1})},_beforeDragStart:function(v){this.get("editController").layoutBeforeDragStart()},_beforeDragMousedown:function(v){var E=v.ev.currentTarget,S=m.Widget.getByNode(E);if(S){var y=s.Pr$((0,r.d6)());y&&y!==S&&v.halt()}},_onDragStart:function(){var v=m.DD.DDM.activeDrag.get("node"),E=this.get("editController");E.set("selection",v),E.layoutDragStart(this.get("host"))},_afterDragEnd:function(){this.get("editController").layoutDragEnd()},_initFloatResizer:function(){this.floatResizers=new m.DD.Delegate({container:this.get("host"),nodes:".sqs-float-right .sqs-helper, .sqs-float-left .sqs-helper",invalid:".no-editing .sqs-helper",dragConfig:{move:!1}}),this.floatResizers.dd.addToGroup("floaters"),this.floatResizers.on("drag:mouseDown",this._onFloatResizerDragMousedown,this),this.floatResizers.on("drag:start",this._onFloatResizerDragStart,this),this.floatResizers.on("drag:drag",this._onFloatResizerDragDrag,this),this.floatResizers.on("drag:end",this._onFloatResizerDragEnd,this)},_onFloatResizerDragMousedown:function(v){this.get("editController").layoutBeforeDragStart()},_onFloatResizerDragStart:function(v){m.one("html").addClass("sqs-dragging-block");var E=v.target.get("node").ancestor(".sqs-col"),S=m.Widget.getByNode(v.target.get("node"));this._currentWidth=S.get("model").get("hSize"),this._minWidth=Math.max(S.blockEditor.get("minHSize"),1),this._maxWidth=parseInt(_(E,"sqs-col-"),10),this._steps=parseInt(E.get("region").width/this._maxWidth,10),this.get("editController").disableInsertPoints()},_onFloatResizerDragDrag:function(v){var E=m.Widget.getByNode(v.target.get("node")),S=Math.floor((v.target.mouseXY[0]-v.target.startXY[0])/this._steps);this._isFloatingRight(E)&&(S=-1*S);var y=S+this._currentWidth;y>=this._minWidth&&y<=this._maxWidth&&(this._newHSize=y,this._removeHSizeClasses(E),E.get("boundingBox").addClass("sqs-col-"+y))},_isFloatingRight:function(v){return v.get("model").get("floatDir")==="right"},_removeHSizeClasses:function(v){var E=v.get("boundingBox"),S=/(?:\s|^)(sqs-col-\d+?)(?=\s|$)/g;E.set("className",E.get("className").replace(S,""))},_onFloatResizerDragEnd:function(v){var E=m.Widget.getByNode(v.target.get("node")),S={hSize:this._newHSize};this._newHSize===this._maxWidth&&(S.floatDir=null),E.get("model").setAttrs(S),E.get("boundingBox").removeClass("yui3-dd-dragging"),m.one("html").removeClass("sqs-dragging-block"),this.afterDrag(),this.get("editController").enableInsertPoints(),this._builder.syncDOMToContent(),this._newHSize=null},_destroyFloatResizer:function(){this.floatResizers&&(this.floatResizers.destroy(),this.floatResizers=null)},getBlockByNode:function(v){return m.Widget.getByNode(v.ancestor(".sqs-block",!0))},_handleColumnInsertBlock:function(v,E){v.direction==="left"||v.direction==="right"?this.insertColumn(v.node,E,v.direction):v.direction==="bottom"?v.node.append(E):v.direction==="top"&&(E.filter?v.node.prepend(E.filter(function(S){return!v.node.get("children").item("0").compareTo(S)})):v.node.prepend(E))},_unfloatBlockByNode:function(v){if(this._blockIsFloating(v)){var E=m.Widget.getByNode(v);E&&E.get("model").set("floatDir",null)}},_handleFloatingBlockEdgeCases:function(v,E){var S=v.node.previous();S===E&&(this._blockIsFloating(S)||this._unfloatBlockByNode(S.previous())),this._blockIsFloating(S)&&(v.node=this._getTopFloatingBlock(S))},_handleBlockInsertBlock:function(v,E){v.direction==="top"?(this._handleFloatingBlockEdgeCases(v,E),v.node.insert(E,"before")):v.direction==="bottom"?v.node.insert(E,"after"):(v.direction==="left"||v.direction==="right")&&(v.node.siblings("*:not(.sqs-helper)").size()===0?this.insertColumn(v.node.ancestor(".sqs-col",!0),E,v.direction):this.splitBlock(v.node,E,v.direction))},_handleContentInsertBlock:function(v,E){var S=v.node.getData("alignNode")||v.node,y=this.getBlockByNode(S),C=y.get("boundingBox"),O=C.previous();if(v.direction==="bottom")S.next()?y.blockEditor.split(S,E):C.insert(E,"after");else if(S.previous()?y.blockEditor.split(S.previous(),E):O&&O.test("[class*=sqs-float-]")?(O=O.previous(".sqs-block:not(.sqs-float-left):not(.sqs-float-right)")||O,O.insert(E,"after")):C.insert(E,"before"),v.direction==="left"||v.direction==="right"){var A=Math.floor(this.getParentSize(C)/2);A>0&&m.Widget.getByNode(E).get("model").setAttrs({hSize:A,floatDir:v.direction})}},_handleRowBlockInsert:function(v,E){v.direction==="left"?this.insertColumn(v.node.one(".sqs-col:first-child"),E,v.direction):v.direction==="right"?this.insertColumn(v.node.one(".sqs-col:last-child"),E,v.direction):(v.direction==="top"||v.direction==="bottom")&&this.insertRow(v.node,E,v.direction)},_blockShouldFloatInContent:function(v){if(v.direction==="left"||v.direction==="right"){var E=v.node.getData("alignNode")||v.node,S=this.getBlockByNode(E),y=S?S.get("boundingBox"):E,C=Math.floor(this.getParentSize(y)/2);return C>0}return!1},_getTopFloatingBlock:function(v){return!v||!v.previous()||this._blockIsFloating(v)&&!this._blockIsFloating(v.previous())?m.Lang.isValue(v)?v:null:this._getTopFloatingBlock(v.previous())},_blockIsFloating:function(v){var E=m.Widget.getByNode(v);return m.Lang.isValue(E)&&!!(E.get("model")&&E.get("model").get("floatDir"))},insertBlock:function(v,E,S){var y=!1,C=E,O=m.Widget.getByNode(v);if(this._builder.registerBlock(O),m.Object.getValue(C,"type")||(C.type=this.getType(C.node)),!(!C||!C.type||!O)){var A=m.SQS.LayoutEngine.Layout.Utils.getColumnWidth(O.get("contentBox"));C.type==="content"?(y=this._blockShouldFloatInContent(C),this._handleContentInsertBlock(C,v)):C.type==="block"?this._handleBlockInsertBlock(C,v):C.type==="column"?this._handleColumnInsertBlock(C,v):C.type==="row"&&this._handleRowBlockInsert(C,v),y||O.get("model").setAttrs({hSize:null,floatDir:null}),this._builder.syncDOMToContent(),O.fire("dropped",{dropInfo:C,floating:!!y,oldCol:A}),O.set("visible",!0)}},insertRow:function(v,E,S){var y=this._builder,C=y.get("columns"),O=y.createColumn(E,C),A=y.createRow(O),I=S==="top"?"before":"after";v.insert(A,I)},insertColumn:function(v,E,S){if(v===null){console.warn("Tried to insert a null column");return}var y=v.ancestor(".sqs-row"),C=y.get("children").filter(".sqs-col"),O=C.size(),A=this.getMaxAvailableSpace(v)-this._getMinColumnsWidth(C),I=Math.floor(this.getParentSize(v)/(O+1));E.test(".sqs-block")?I=Math.max(I,this.getMinBlockSize(E)):E.test(".sqs-col")&&(I=Math.max(I,this.getMinColSize(E)));var D=I<1||I>A;if(D)return S==="left"?v.prepend(E):S==="right"&&v.append(E),!1;var T=this._builder.createColumn(E,0);return v.insert(T,S==="left"?"before":"after"),this.saveOriginalSizes(v.ancestor(".sqs-row")),this.resizeColumn(T,Math.round(I)),!0},getParentSize:function(v){var E=v.ancestor(".sqs-col");return E!==null?this.getElSize(E):this._builder.get("columns")},getMaxAvailableSpace:function(v){return v.ancestor(".sqs-col")?this.getMaxColSize(v.ancestor(".sqs-col")):this.getMaxColSize(v)},getElSize:function(v){return _(v,"sqs-col-")},_foldColumnsSize:function(v,E){var S=0;return v.each(function(y){S+=parseInt(E.call(this,y),10)},this),S},_getMinColumnsWidth:function(v){return this._foldColumnsSize(v,this.getMinColSize)},_getColumnsWidth:function(v){return this._foldColumnsSize(v,this.getElSize)},resizeColumn:function(v,E,S){var y=this.getParentSize(v),C=v.ancestor(".sqs-row").get("children").filter(".sqs-col"),O=C.filter(function(w){return w!==v.getDOMNode()}),A=y-this._getMinColumnsWidth(O);if(!S&&(E===0||O.size()===0||A<1))return!1;this.saveOriginalSizes(v.ancestor(".sqs-row"));for(var I=this.getElSize(v),D=I+E,T=Math.min(A,D),B=this._getResizeInfo(O),N=this._getColumnsWidth(O),P,x=E,R=E>0?-1:1;x!==P&&x!==0;)P=x,m.Array.each(B,function(w,k){var q=w.node,F=this.getElSize(q),z=this.getMinColSize(q);if(x!==0&&F+R>=z&&y>=N+R)this.setElSize(q,F+R,S),x+=R;else for(;x!==0&&F+R<z&&R>0&&y>=N+R;)F+=R,this.setElSize(q,F,S),x+=R},this);O.each(function(w){w.all(" > .sqs-block").each(function(k){var q=m.Widget.getByNode(k);q&&q.fire("resized")})}),x!==0&&console.error("[le] Column resizing has leftovers"),this.setElSize(v,T,S)},_getResizeInfo:function(v){var E=[];return v.each(function(S,y){E.push({node:S,idx:y,min:this.getMinColSize(S),size:this.getElSize(S)})},this),E.length>1&&E.sort(function(S,y){return S.size-S.min-(y.size-y.min)}),E},getMinColSize:function(v){var E=v.get("children").filter(".sqs-row"),S=1;return E>0&&S!==0?E.each(function(y,C){var O=y.get("children").filter(".sqs-col"),A=O.size();O.each(function(I){A+=this.getMinColSize(I)-1},this),S=Math.max(S,A)},this):v.all(".sqs-block").each(function(y){var C=m.Widget.getByNode(y);C.blockEditor&&(S=Math.max(S,this.getMinBlockSize(C)))},this),parseInt(S,10)},getMinBlockSize:function(v){return v instanceof m.Node&&(v=m.Widget.getByNode(v)),m.Lang.isValue(v)?m.Lang.isValue(v.blockEditor)?parseInt(v.blockEditor.get("minHSize")||1,10):1:(console.warn("[le] Error, cannot get minimum block size of a non-block"),1)},getMaxColSize:function(v){var E=v.ancestor(".sqs-col"),S=E?this.getElSize(E):this.get("columns");return v.siblings(".sqs-col").each(function(y){S=S-this.getMinColSize(y)},this),S},saveOriginalSizes:function(v){v.all(".sqs-col").each(function(E){this.cleanOriginalSizes(E),E.addClass("origsize-"+this.getElSize(E))},this),v.all(".sqs-block").each(function(E){this.getElSize(E)&&(this.cleanOriginalSizes(E),E.addClass("origsize-"+this.getElSize(E)))},this)},getElOrigSize:function(v){return _(v,"origsize-")},setElSize:function(v,E,S){var y=this.getElSize(v),C=this.getElOrigSize(v)||y,O=this.getMinColSize(v);E=!S&&E<O?O:E,v.all(".sqs-block").each(function(A){var I=this.getElOrigSize(A);I&&this.setElSize(A,Math.max(1,Math.floor(E/C*I)))},this),this.updateColumnSize(v,E,y),v.get("children").filter(".sqs-row").each(function(A){var I=E-C,D=I;A.get("children").filter(".sqs-col").each(function(T,B){var N=this.getElOrigSize(T)||this.getElSize(T),P=this.getMinColSize(T),x=N/C,R=I>0?Math.min(D,Math.ceil(x*I)):Math.max(D,Math.floor(x*I)),w=Math.max(P,N+R);R=w-N,w=N+R,D=D-R,this.setElSize(T,w)},this)},this)},updateColumnSize:function(v,E,S){!v||E===S||(m.Lang.isValue(S)&&v.removeClass("sqs-col-"+S),v.addClass("sqs-col-"+E),this._builder.syncDOMToContent())},getColSpace:function(v){return this.getElSize(v)-this.getMinColSize(v)},splitBlock:function(v,E,S){var y=this.getParentSize(v),C=S==="left"?"before":"after";if(Math.floor(y/2)===0){v.insert(E,C);return}var O=this._builder.createRow();v.insert(O,"before");var A=this._builder.createColumn(v,y),I=this._builder.createColumn(E,0);O.append(A),A.insert(I,C),this.resizeColumn(I,Math.round(y/2))},getClassName:function(v){return m.ClassNameManager.getClassName(v)},getType:function(v){if(v.hasClass("sqs-block")||v.hasClass("free-block"))return"block";if(v.hasClass("sqs-col"))return"column";if(v.hasClass("sqs-row"))return"row";if(v.ancestor(this.get("editController").get("contentParentBlockSelector"),!0))return"content";if(v.hasClass("sqs-layout"))return"layout";v.hasClass("sqs-layout-insert-marker")||v.hasClass("sqs-layout-insert-point")||v.hasClass("sqs-layout-insert-point-container")||console.log("Unknown node type (tagName: %s, class: %s, id: %s)",v.get("tagName"),v.get("class"),v.get("id"))},_initializeFloatResizerNodes:function(){var v=this.getBlockNodes();v.each(function(E){var S=E.get("children").filter(".sqs-helper").item(0),y=m.Widget.getByNode(E);if(!y)throw new Error("[_initializeFloatResizerNodes] Could not find the corresponding block widget for node");y.get("destroyed")||(y.get("model").get("floatDir")?m.Lang.isNull(S)&&this._appendResizerNodeTo(E):S&&S.remove())},this)},cleanGrid:function(v){this.get("forceSingleColumn")&&this.collapseGrid(),this.cleanBlocks(),this.cleanColumns(),this.cleanRows(),m.SQS.LayoutEngine.Events.fire("layout-engine:reload-images")},collapseGrid:function(){var v=this._host.all(".sqs-row > .sqs-col");if(!(v.size()<2)){var E=this._host.one(".sqs-row").one("> .sqs-col"),S=this._host.all(".sqs-row > .sqs-col > *");S.each(function(y){E.appendChild(y)},this),v.each(function(y){y!==E&&y.remove()},this),this.resizeColumn(E,12,!0)}},cleanBlocks:function(){var v=this.getBlockNodes();this.handleEmptyLayout(v),v.each(function(E){var S=m.Widget.getByNode(E);if(!S)throw new Error("[cleanBlocks] Could not find the corresponding block widget for node");if(!S.get("destroyed")){E.hasClass("sqs-col-Infinity")&&(E.removeClass("sqs-col-Infinity"),this.cleanOriginalSizes(E)),S.blockEditor&&S.blockEditor.cleanBlock(),S.get("model").get("floatDir")&&!this._isBlockFloatValid(E)&&S.get("model").set("floatDir",null);var y=E.get("children").filter(".sqs-helper").item(0);S.get("model").get("floatDir")?m.Lang.isNull(y)&&this._appendResizerNodeTo(E):y&&y.remove()}},this),this.deleteQueuedBlocks()},_isLayoutEngineEmpty:function(){var v=this.getBlockNodes(),E=v.size(),S=this.get("markdownMode")?"markdown":"html";return E===0||E===1&&v.item(0).hasClass("sqs-block-"+S)&&this._isBlank(v.item(0).get("innerText"))},handleEmptyLayout:function(v){var E=v.size()===0,S=this._isLayoutEngineEmpty(),y=m.Array.some(v.getDOMNodes(),function(C){return C=m.one(C),!C.hasClass("sqs-float-left")&&!C.hasClass("sqs-float-right")});!this.get("lockedLayout")&&(E||!y)&&this._insertTextBlockAtEnd(this._host.one(".sqs-row .sqs-col")),this._host.toggleClass("empty",S)},_handleEmptyLayoutOnDestroy:function(){var v=this.get("host");this._isLayoutEngineEmpty()&&v.addClass("empty")},_isBlank:function(v){return!m.Lang.isValue(v)||p.test(v.replace(/&nbsp;/g,"").replace(new RegExp(f,"g"),""))},_toggleInsertPointGuide:function(v){this._host.toggleClass("le-guide-on",v),this._insertPointClickedListener&&(this._insertPointClickedListener.detach(),this._insertPointClickedListener=null),v&&(this._insertPointClickedListener=m.Global.once("LayoutInsertPoint:click",this._toggleInsertPointGuide.bind(this,!1)))},_isBlockFloatValid:function(v){var E=v.next();if(!E)return!1;var S=m.Widget.getByNode(E);if(!S)return!1;var y=S.get("model");return y&&y.get("floatDir")?this._isBlockFloatValid(E):E.test(this.get("editController").get("contentParentBlockSelector"))},deleteQueuedBlocks:function(){var v=this.get("host"),E=v.all(".sqs-destroyme"),S=!1;E.size()!==0&&(E.each(function(y){var C=m.Widget.getByNode(y);!S&&!y.next(".sqs-block, .sqs-row")&&(S=!0),C&&!C.get("destroyed")&&(C.destroy(),this._builder.deregisterBlock(C))},this),S&&this.get("editController").alignInsertPoints(v,!0))},_insertTextBlockAtEnd:function(v){var E=m.Widget.getByNode(v.all(".sqs-block").pop()),S=E&&parseInt(E.get("type"),10);if(!E||m.Lang.isNumber(S)&&S!==d.Z.HTML&&S!==d.Z.MARKDOWN){var y=this.get("markdownMode")?d.Z.MARKDOWN:d.Z.HTML,C=this.get("editController").getRenderableBlocks(this.get("editMode")),O=C.get(o.Z.BlockTypeKeys[y]).ctor,A=new O({editable:!0,render:v,visible:!0,editMode:this.get("editMode"),editController:this.get("editController")});this._builder.registerBlock(A),this._builder.syncDOMToContent()}},_appendResizerNodeTo:function(v){v.appendChild('<div class="sqs-helper"><div class="sqs-resizer"><div class="sqs-line"></div></div></div>')},_destroyResizeHelperNodes:function(){this.get("host").all(".sqs-helper").remove(!0)},_initializeColumnResizerNodes:function(){this._host.all(".sqs-row > .sqs-col").each(function(v){v.one("> .sqs-helper")||this._appendResizerNodeTo(v)},this)},cleanColumns:function(){this._host.all(".sqs-row > .sqs-col").each(function(v,E){var S=v.all("> *:not(.sqs-helper)").size()===0,y=this._host.all(".sqs-col").size()>1;if(S&&y){this.resizeColumn(v,-1*this.getElSize(v),!0);var C=v.siblings(".sqs-col");v.remove(),C.each(function(O){O.all(".sqs-block").each(function(A){var I=m.Widget.getByNode(A);I&&I.fire("resized",{source:"columnChanged"})})});return}this.cleanOriginalSizes(v)},this),this._initializeColumnResizerNodes()},cleanOriginalSizes:function(v){var E=v.get("className").split(" ");m.Array.each(E,function(S){S.substring(0,8)==="origsize"&&v.removeClass(S)},this)},cleanRows:function(){this._host.all(".sqs-row").each(function(v){var E=v.get("parentNode"),S=v.get("children").filter(".sqs-col"),y=v.next()&&this.getType(v.next())==="row"?v.next():null,C=y?y.get("children").filter(".sqs-col"):null;if(v.all(".sqs-block").size()===0&&this._host.all(".sqs-row").size()>1){v.remove();return}this.getType(E)==="column"&&S.size()===1&&(S.each(function(O){O.get("children").filter(".sqs-helper").remove(),v.insert(O.get("children"),"after")},this),v.remove()),S.size()===1&&y&&C.size()===1&&(y.one(".sqs-col").prepend(v.one(".sqs-col").get("children")),v.remove())},this)}},{NS:"LayoutEditor",ATTRS:{scrollNode:{valueFn:function(){return m.one(a()(m.config.doc))},lazyAdd:!1},columns:{value:12},gutterSize:{value:24},dragDropLock:{value:!1},lockedLayout:{valueFn:function(){return this.get("host").hasClass("sqs-locked-layout")},readOnly:!0},id:{valueFn:function(){return"layout-"+(0,h.x)()}},forceSingleColumn:{value:!1},markdownMode:{getter:function(){return!!m.Object.getValue(window,"Static.SQUARESPACE_CONTEXT.websiteSettings.markdownMode".split("."))}},editController:{writeOnce:!0,validator:function(v){return m.instanceOf(v,m.SQS.LayoutEngine.EditControllerBase)}},editMode:{writeOnce:!0,validator:function(v){return v in i.Z}},layoutTutorialPromise:{value:m.when()},startupBlockId:{value:null,validator:m.Lang.isString}}})},"2.0",{requires:["base","dd-delegate","dd-scroll","event-custom-base","plugin","promise","squarespace-util","@sqs/layout-engine/layout-block-focus-handler","@sqs/yui-dd-wrappers/dd-behaviors","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/layout-builder","@sqs/layout-engine/layout-drag","@sqs/layout-engine/events","@sqs/layout-engine/layout-insert-marker","@sqs/layout-engine/layout-utils","@sqs/layout-engine/scroll-into-view"]})},297928:function(){YUI.add("@sqs/layout-engine/layout-trash",function(c){c.namespace("SQS.LayoutEngine.Layout"),c.SQS.LayoutEngine.Layout.BlockTrash=c.Base.create("blocktrash",c.Widget,[],{initializer:function(){var b=this.get("id");this.blockToRemove=null,this.drop=new c.SQS.LayoutEngine.Layout.Drop({node:this.get("boundingBox"),groups:["blocks"],lockScroll:!0}),this.drop.on(["drop:enter","drop:over"],this._onDropOver,this),this.drop.on("drop:hit",this._onDropHit,this),this.drop.on("drop:exit",this._onDropExit,this),c.DD.DDM.before(b+"|ddm:end",this._beforeDDMEnd,this),this.after("markerLockChange",this._updateMarkerLock,this)},_onDropOver:function(){this.blockToRemove=c.DD.DDM.activeDrag.get("node"),this.set("markerLock",!0)},_onDropExit:function(){this.blockToRemove=null,this.set("markerLock",!1)},_beforeDDMEnd:function(){var b=c.Widget.getByNode(this.blockToRemove);b&&(b.queueForDestruction?b.queueForDestruction():this.blockToRemove.addClass("sqs-destroyme")),this.set("markerLock",!1),c.one(c.config.doc).detach(this.get("id")+"|scroll"),this.blockToRemove=null},_updateMarkerLock:function(b){this.get("editController").toggleInsertMarkerLock(b.newVal)},destructor:function(){var b=this.get("id");this.drop.detach(),this.drop.destroy(),c.DD.DDM.detach(b+"|*"),c.one(c.config.doc).detach(b+"|scroll")}},{CSS_PREFIX:"sqs-blocktrash",ATTRS:{render:{value:!0},markerLock:{value:!1},editController:{value:null},winHeight:{valueFn:function(){return c.config.win.innerHeight},lazyAdd:!1}}})},"1.0",{requires:["dd","widget","@sqs/layout-engine/layout-drop","@sqs/layout-engine/layout-insert-marker"]})},513025:function(c,b,t){"use strict";var l=t(784874),d=t(276860),o=t(663634);YUI.add("@sqs/layout-engine/models-layout",function(e){var a={type:l.Z.HTML,value:{html:""}},r={type:l.Z.MARKDOWN},s={type:l.Z.WEBSITE_COMPONENT,definitionName:"website.components.html",value:{html:""}},n=e.namespace("SQS.LayoutEngine.Models").PageLayout=e.Base.create("PageLayout",e.Model,[],{toJSON:function(){var p=n.superclass.toJSON.call(this);return p.rows=this.get("rows").toJSON(),delete p.promotedBlockTypes,delete p.parentLayout,p},isEmpty:function(){return(0,d.tp)(this.toJSON())},isBlank:function(){return(0,d.FF)(this.toJSON())},_getDefaultRows:function(){return[{columns:[{span:this.get("columns"),blocks:[this._getDefaultBlock()]}]}]},_getDefaultBlock:function(){var p=window.Static||{};return e.Object.getValue(p,"SQUARESPACE_CONTEXT.websiteSettings.markdownMode".split("."))?r:(0,o.cr)("cdk_website_components_html_enabled")?s:a},togglePromote:function(p){var f,m;if(!this.get("legacyPromotedLayout"))f=this.get("promotedBlockId");else{var _=this._getPromotedBlockInfo(this.toJSON(),this.get("promotedBlockTypes"));e.Lang.isValue(_)&&(f=_.block.id)}if(e.Lang.isValue(f)){var v=e.one("#block-"+f);m=e.Widget.getByNode(v)}m===p?(this.set("promotedBlockId",null),p.set("promoted",!1)):(this.set("promotedBlockId",p.get("id")),p.set("promoted",!0),e.Lang.isValue(m)&&m.set("promoted",!1)),this.set("legacyPromotedLayout",!1)},isPromotedBlock:function(p){var f=this.get("promotedBlockId"),m=this.get("legacyPromotedLayout");if(e.Lang.isValue(p)&&p.inPromotedLayout){var _=p.get("id");return m?p.inPromotedLayout():f===_}return!1},_getPromotedBlockInfo:function(p,f){if(this.get("legacyPromotedLayout")){if(e.Lang.isArray(p.rows)&&p.rows.length>0)return this._getPromotedBlockInfo(p.rows[0],f);if(e.Lang.isArray(p.columns)&&p.columns.length>0)return this._getPromotedBlockInfo(p.columns[0],f);if(e.Lang.isArray(p.blocks)&&p.blocks.length>0){var m=p.blocks[0];return e.Lang.isValue(m.floatDir)||f.indexOf(m.type)===-1?!1:{block:m,span:p.span,parentBlocksList:p.blocks}}}else return this._findBlockById(this.get("promotedBlockId"),p)},_findBlockById:function(p,f){for(var m=function(S){return S.id===p},_=[f];_.length>0;){var v=_.shift();if(e.Lang.isArray(v.rows))_.push.apply(_,v.rows);else if(e.Lang.isArray(v.columns))_.push.apply(_,v.columns);else if(e.Lang.isArray(v.blocks)){var E=e.Array.find(v.blocks,m,this);if(e.Lang.isValue(E))return{block:E,span:v.span,parentBlocksList:v.blocks}}}return!1},_findPromotedBlock:function(p){e.Array.find(p.blocks,function(f){return f.get("id")===this.get("promotedBlockId")})},getMainPageLayout:function(p){var f=e.clone(this.toJSON()),m=this._getPromotedBlockInfo(f,p);e.Lang.isObject(m)&&m.span==this.get("columns")&&m.parentBlocksList.remove(m.block);var _=new n(e.merge(f,{columns:this.get("columns"),parentLayout:this,promotedBlockId:this.get("promotedBlockId"),legacyPromotedLayout:this.get("legacyPromotedLayout"),span:this.get("span")}));return _},getPromotedPageLayout:function(p){var f=this.toJSON(),m=this._getPromotedBlockInfo(f,p);if(!e.Lang.isObject(m)||m.span!==this.get("columns"))return new n({columns:this.get("columns"),parentLayout:this,promotedBlockId:this.get("promotedBlockId"),legacyPromotedLayout:this.get("legacyPromotedLayout"),span:this.get("span")});var _=e.clone(m.block),v=new n({rows:[{columns:[{blocks:[_],span:m.span}]}],parentLayout:this,promotedBlockId:this.get("promotedBlockId"),legacyPromotedLayout:this.get("legacyPromotedLayout"),span:this.get("span")});return v}},{ATTRS:{rows:{valueFn:"_getDefaultRows",setter:function(p){if(e.Lang.isArray(p))return p.length===0&&(p=this._getDefaultRows()),new g({items:p});if(e.instanceOf(p,g))return p}},columns:{value:12},legacyPromotedLayout:{value:!0,validator:e.Lang.isBoolean,getter:function(p){var f=this.get("parentLayout");return e.Lang.isValue(f)?f.get("legacyPromotedLayout"):p},setter:function(p){var f=this.get("parentLayout");return e.Lang.isValue(f)?f.set("legacyPromotedLayout",p):p}},promotedBlockId:{value:null,getter:function(p){var f=this.get("parentLayout");return e.Lang.isValue(f)?f.get("promotedBlockId"):p},setter:function(p){var f=this.get("parentLayout");return e.Lang.isValue(f)?f.set("promotedBlockId",p):p}},promotedBlockTypes:{value:[],validator:e.Lang.isArray},parentLayout:{value:null},collectionId:{value:null},parentItemId:{value:null}}}),i=e.namespace("SQS.LayoutEngine.Models").EditableContentBlock=e.Base.create("EditableContentBlock",e.Model,[],{toJSON:function(){var p=i.superclass.toJSON.call(this);return p.layout=this.get("layout").toJSON(),e.Lang.isValue(p.updatedOn)||(p.updatedOn=new Date),p.updatedOn=p.updatedOn.getTime(),p},_setLayout:function(p,f,m){var _=this.get("layout");return e.instanceOf(_,n)?(_.setAttrs(p,m),_):e.instanceOf(p,n)?p:new n(p)}},{ATTRS:{layout:{valueFn:function(){return new n},setter:"_setLayout"},updatedOn:{setter:function(p){return e.Lang.isNumber(p)?new Date(p):e.Lang.isDate(p)?p:(console.warn("Invalid updatedOn field set: ",p),e.Attribute.INVALID_VALUE)}}}}),u=e.Base.create("BlockList",e.ModelList,[],{});e.Base.create("Column",e.Model,[],{},{ATTRS:{blocks:{value:[],setter:function(p){if(e.Lang.isArray(p))return new u({items:p});if(e.instanceOf(p,u))return p}}}});var h=e.Base.create("Row",e.Model,[],{}),g=e.Base.create("RowList",e.ModelList,[],{model:h})},"1.0",{requires:["base","model","model-list"]})},634628:function(){YUI.add("@sqs/layout-engine/plugin-resize-grid",function(c){c.namespace("SQS.LayoutEngine.Plugin.ResizeGrid");var b=c.SQS.LayoutEngine.Plugin.ResizeGrid=c.Base.create("resizeGrid",c.Plugin.Base,[c.SQS.LayoutEngine.Mixins.EventRegistrar],{initializer:function(){var t=c.Array.filter(["resizeNode","contentNode","layoutNode"],function(l){return!this.get(l)},this);t.length?console.log("Warning - The following properties are missing and required for %s: %s",b.NS,t.join()):(this._bindResizeEvents(),this._bindMouseEvents())},_updateContentOffsets:function(){var t=this.get("resizeNode").getDOMNode().getBoundingClientRect(),l=this.get("contentNode").getDOMNode().getBoundingClientRect(),d=this.get("layoutNode").getDOMNode().getBoundingClientRect(),o=t.bottom-l.bottom,e=(l.top-d.top)%this.get("gridSize");this.setAttrs({contentGridOffset:e,contentPaddingOffset:o})},_bindResizeEvents:function(){var t=this.get("host");this._registerEvent(t.on("resize:start",this._updateContentOffsets,this),t.after("resize:align",this._afterResizeAlign,this))},_bindMouseEvents:function(){this._registerEvent(c.one("body").on("mousemove",function(t){this.set("enabled",t.shiftKey)},this))},_afterResizeAlign:function(){this._checkHeight()},_snapHeightToGrid:function(t){var l=this.get("gridSize"),d=this.get("contentPaddingOffset"),o=this.get("contentGridOffset"),e=d-o;return Math.round((t-e)/l)*l+e},_checkHeight:function(){if(this.get("enabled")){var t=this.get("host"),l=t.info,d=this._snapHeightToGrid(l.offsetHeight);l.offsetHeight!==d&&t._checkSize("offsetHeight",d)}}},{NS:"resizeGrid",ATTRS:{gridSize:{value:20},contentPaddingOffset:{value:null},contentGridOffset:{value:null},resizeNode:{value:null},contentNode:{value:null},layoutNode:{value:null},enabled:{value:!1}}})},"1.0",{requires:["base","plugin","@sqs/layout-engine/event-registrar"]})},871200:function(){YUI.add("@sqs/layout-engine/scroll-into-view",function(c){"use strict";c.Node.prototype.scrollIntoView=function(){var b=c.Node.getDOMNode(this.get("offsetParent"));if(!b)return this;var t={top:this.get("offsetTop"),bottom:this.get("offsetTop")+this.get("offsetHeight"),left:this.get("offsetLeft"),right:this.get("offsetLeft")+this.get("offsetWidth")};for(t.move=function(h,g){this.top+=g,this.bottom+=g,this.left+=h,this.right+=h};;){for(;;){var l=b.offsetParent===null,d=c.one(b),o=c.Node.getDOMNode(d)===c.config.doc.body,e=o?c.DOM.winWidth():b.clientWidth,a=o?c.DOM.winHeight():b.clientHeight;if(b.scrollWidth-d.horizMarginBorderPadding()>e||b.scrollHeight-d.vertMarginBorderPadding()>a)break;if(l)return this;t.move(b.offsetLeft-b.scrollLeft,b.offsetTop-b.scrollTop),b=b.offsetParent||b.parentNode}var r=l?c.config.doc.documentElement.scrollLeft||c.config.doc.body.scrollLeft:b.scrollLeft,s=l?c.config.doc.documentElement.scrollTop||c.config.doc.body.scrollTop:b.scrollTop,n={top:s,bottom:s+(l?c.DOM.winHeight():b.clientHeight),left:r,right:r+(l?c.DOM.winWidth():b.clientWidth)},i=0;d.getStyle("overflowY")=="hidden"||(t.top<n.top?i=t.top-n.top:t.bottom>n.bottom&&(i=Math.min(t.bottom-n.bottom,t.top-n.top)));var u=0;if(d.getStyle("overflowX")=="hidden"||(t.left<n.left?u=t.left-n.left:t.right>n.right&&(u=Math.min(t.right-n.right,t.left-n.left))),l){(u||i)&&window.scrollBy(u,i);break}else b.scrollLeft+=u,b.scrollTop+=i,t.move(b.offsetLeft-b.scrollLeft,b.offsetTop-b.scrollTop),b=b.offsetParent}return this}},"1.0",{requires:["dom-screen","@sqs/layout-engine/dimensions"]})},187913:function(c,b,t){"use strict";t.d(b,{h:()=>l});var l=300},921039:function(){YUI.add("@sqs/layout-engine/event-registrar",function(c){c.namespace("SQS.LayoutEngine.Mixins"),c.SQS.LayoutEngine.Mixins.EventRegistrar=c.Base.create("event-registrar",c.Base,[],{destructor:function(){c.Array.invoke(this.get("eventListeners"),"detach")},_registerEvent:function(){if(c.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var b=0,t=arguments.length;b<t;b++)c.Lang.isValue(arguments[b])&&this.get("eventListeners").push(arguments[b])}},{ATTRS:{eventListeners:{value:[]}}})},"1.0",{requires:["array-invoke","base"]})},498558:function(){YUI.add("@sqs/layout-engine/model-sync-rest",function(c){function b(){this._ioConfigCache={}}b.prototype={sync:function(t,l,d){c.Lang.isValue(l.timeout)||(l.timeout=1e7),c.ModelSync.REST.prototype.sync.apply(this,arguments)},_storeRequest:function(t,l){this._ioConfigCache[t.id]=c.merge(l,{})},_retrieveAndEvict:function(t){var l=this._ioConfigCache[t];return this._ioConfigCache[t]=null,l},_isCrumbFailure:function(t){return t&&t.crumbFail&&t.crumb},_sendSyncIORequest:function(t){var l=c.ModelSync.REST.prototype._sendSyncIORequest.apply(this,arguments);return this._storeRequest(l,t),l},_onSyncIOEnd:function(t,l){this._retrieveAndEvict(t),c.ModelSync.REST.prototype._onSyncIOEnd.apply(this,arguments)},_onSyncIOSuccess:function(t,l,d){var o=this._retrieveAndEvict(t),e={},a=l.responseText;if(c.Lang.isValue(a)&&a.trim()&&(e=c.JSON.parse(a)),this._isCrumbFailure(e)){var r=e.crumb;c.ModelSync.REST.CSRF_TOKEN=r,c.Env.CSRF_TOKEN=r,o.headers["X-CSRF-Token"]=r,this._sendSyncIORequest(o)}else c.ModelSync.REST.prototype._onSyncIOSuccess.apply(this,arguments)},_onSyncIOFailure:function(t,l,d){var o=d.callback;if(o){var e={},a=l.responseText;c.Lang.isValue(a)&&a.trim()&&(e=c.JSON.parse(a)),o({code:l.status,msg:l.statusText,responseJSON:e},l)}}},c.mix(b,c.ModelSync.REST,!1,null,1),c.namespace("SQS.LayoutEngine.ModelSync"),c.SQS.LayoutEngine.ModelSync.REST=b},"1.0",{requires:["model-sync-rest"]})},919958:function(){YUI.add("@sqs/layout-engine/plugin-scroll-lock",function(c){c.namespace("SQS.LayoutEngine.Copies.Plugin").ScrollLock=c.Base.create("ScrollLock",c.Plugin.Base,[],{initializer:function(b){var t=this.get("host"),l=t.getDOMNode();this.listener=function(d){if(d.stopPropagation(),!c.Lang.isNumber(l.scrollTop))return d.preventDefault(),!1;var o=parseInt(t.getComputedStyle("height"),10),e=l.scrollTop,a=l.scrollHeight-o,r=d.wheelDelta||-d.detail;if(e<=0&&r>0||e>=a&&r<0)return d.preventDefault(),!1},l.addEventListener?(l.addEventListener("mousewheel",this.listener),l.addEventListener("DOMMouseScroll",this.listener),l.addEventListener("MozMousePixelScroll",this.listener)):l.attachEvent&&l.attachEvent("onmousewheel",this.listener)},destructor:function(){var b=this.get("host").getDOMNode();b.removeEventListener?(b.removeEventListener("mousewheel",this.listener),b.removeEventListener("DOMMouseScroll",this.listener),b.removeEventListener("MozMousePixelScroll",this.listener)):b.detachEvent&&b.detachEvent("onmousewheel",this.listener)}},{NS:"ScrollLock",ATTRS:{}})},"1.0",{requires:["base","node","plugin"]})},454829:function(){YUI.add("@sqs/layout-engine/resize-emitters",function(c){c.namespace("SQS.LayoutEngine"),c.SQS.LayoutEngine.ResizeEmitter=c.Base.create("ResizeEmitter",c.Base,[],{initializer:function(){this.resizeEvent=c.on("resize",this._handleResize,c.config.win,this),this.after("resizingChange",this._afterResizingChange),this._requiresSizeCalculating()&&(this.on("resize:end",this._resetSize),this._resetSize())},destructor:function(){this.timer&&(this.timer.cancel(),this.timer=null),this.resizeEvent.detach(),this.resizeEvent=null},_resetSize:function(){this.setAttrs({width:c.config.win.innerWidth,height:c.config.win.innerHeight})},_afterResizingChange:function(b){var t=b.newVal?"resize:start":"resize:end";this.fire(t)},_getWindowDiff:function(b){var t=c.config.win["inner"+b.capitalize()],l=this.get(b);return Math.abs(t-l)},_requiresSizeCalculating:function(){return this.get("threshold")>0||c.Lang.isValue(this.get("axis"))},_canEmitResizeEvent:function(){var b,t,l=this.get("axis"),d=this.get("threshold");return c.Lang.isValue(l)?(t=l===this.constructor.AXES.X?"width":"height",b=this._getWindowDiff(t)>d):b=this._getWindowDiff("width")>d||this._getWindowDiff("height")>d,b},_handleResize:function(){if(!this.get("resizing")){if(this._requiresSizeCalculating()&&!this._canEmitResizeEvent())return;this.set("resizing",!0)}this.timer&&this.timer.cancel(),this.timer=c.later(this.get("timeout"),this,function(){c.Env&&this.set("resizing",!1)}),this.fire("resize")}},{AXES:{X:"x",Y:"y"},ATTRS:{axis:{validator:function(b){return c.Object.values(this.constructor.AXES).includes(b)}},height:{},resizing:{validator:c.Lang.isBoolean,value:!1},threshold:{validator:c.Lang.isNumber,value:0},timeout:{value:300},width:{}}})},"1.0",{requires:["base","event","node"]})},531055:function(){YUI.add("@sqs/layout-engine/url-utils",function(c){c.namespace("SQS.LayoutEngine");var b="https:",t=new RegExp("^((https?:)?//)+","i"),l=c.SQS.LayoutEngine.UrlUtils={isSecure:function(d){var o=null;return arguments.length===0?o=window.location.protocol:d&&(o=(d+"").toLowerCase().substring(0,6)),o===b},securifyURL:function(d){return!d||d.startsWith("data:")?d:b+"//"+this._stripProtocolAndSlashes(d)},toRelativeProtocol:function(d){return d&&"//"+this._stripProtocolAndSlashes(d)},securifyBlockEmbed:function(d,o){if(!(!this.isSecure()||!d)){var e=d.all("object embed, iframe"),a=e.size();e.each(function(r,s){var n=r.getAttribute("src");n&&r.setAttribute("src",this.securifyURL(n)),o&&a===s+1&&(r.setStyle("display","none"),r.setStyle("display",null))},this)}},_stripProtocolAndSlashes:function(d){return(d+"").replace(t,"")},ensureProtocol:function(d){return d.search(/^https?:\/\//i)<0?d="http://"+d.replace(/^(\/\/)+/,""):d=d.replace(t,function(o,e){return e}),d},isSlash:function(d){return d==="/"},isProperUrl:function(d){var o=/^(https?:)?(\/\/)?[a-zA-Z0-9][a-zA-Z0-9_\-\.]*\.[a-zA-Z]{2,3}(\S*)?$/i;return d.search(o)>-1},isIP:function(d){return d.search(/^(https?:)?(\/\/)?[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+/i)>-1},isAnchor:function(d){return l._doesStringStartWith(d,"#")&&d.length<100},isTel:function(d){return l._doesStringStartWith(d,"tel:")&&d.length<50},isMailto:function(d){return l._doesStringStartWith(d,"mailto:")&&d.length<1e3},isJavascript:function(d){return l._doesStringStartWith(d,"javascript:")&&d.length<250},isFtp:function(d){return l._doesStringStartWith(d,"ftp:")&&d.length<100},isInternalUrl:function(d){return l._doesStringStartWith(d,"\\/[^\\/]")&&d.length<150},_doesStringStartWith:function(d,o){return!!d&&d.search(new RegExp("^"+o+".+"))===0},addQueryParam:function(d,o,e){var a,r=d.split("#");r.length>1&&(a=r.slice(1).join(),d=r[0]);var s=d.indexOf("?")!==-1?"&":"?";return d+=s+o+"="+e,a&&(d+="#"+a),d},isLinkExternal:function(d){if(!d.match(t))return!1;var o=this._stripProtocolAndSlashes(d),e=o.split("/")[0];return e.toLowerCase()!==location.host.toLowerCase()},_getNode:function(d){var o=document.createElement("a");return o.href=d,o},getPath:function(d){return d=this._getNode(d),d.pathname},getSearch:function(d){return d=this._getNode(d),d.search},getHash:function(d){return d=this._getNode(d),d.hash},pathMatches:function(d,o){return d=this._getNode(d),o=this._getNode(o),d.pathname==o.pathname},createUrl:function(d,o){var e=d;return o&&(e+=o),e=e.replace(/\//g,""),l.createUrlWithSlash(e)},createUrlWithSlash:function(d){return d=d.trim().replace(new RegExp("[ ]+","g")," ").replace(new RegExp("[ ]","g"),"-").replace(new RegExp("[^a-zA-Z0-9/\\-]","g"),"").replace(new RegExp("[\\.\\-]{2,}","g"),"-").replace(new RegExp("[\\.\\/]{2,}","g"),"/").toLowerCase(),d}}},"1.0",{requires:[]})},825016:function(c,b,t){"use strict";var l=t(805187),d=t.n(l),o=t(860921),e=t.n(o),a=t(714487),r=t(564169),s=t.n(r),n=t(135118);YUI.add("@sqs/layout-engine/chartjs-helpers",function(i){i.namespace("ChartJS");var u=500,h=[],g=i.ChartJS.getDefaultChartData=function(R){switch(parseInt(R,10)){case n.Z.CHART_BAR:return{data:[[150],[250],[150]],sampleLabels:[(0,a.t)("New York",null,{project:"scripts-v6.layout-engine"}),(0,a.t)("Las Vegas",null,{project:"scripts-v6.layout-engine"}),(0,a.t)("San Francisco",null,{project:"scripts-v6.layout-engine"})],seriesLabels:[(0,a.t)("Population",null,{project:"scripts-v6.layout-engine"})]};case n.Z.CHART_LINE:return{data:[[150,100],[250,200],[150,350]],sampleLabels:[(0,a.t)("New York",null,{project:"scripts-v6.layout-engine"}),(0,a.t)("Las Vegas",null,{project:"scripts-v6.layout-engine"}),(0,a.t)("San Francisco",null,{project:"scripts-v6.layout-engine"})],seriesLabels:[(0,a.t)("Population",null,{project:"scripts-v6.layout-engine"}),(0,a.t)("GDP",null,{project:"scripts-v6.layout-engine"})]};case n.Z.CHART_PIE:return{data:[[150],[200],[150]],sampleLabels:[(0,a.t)("New York",null,{project:"scripts-v6.layout-engine"}),(0,a.t)("Las Vegas",null,{project:"scripts-v6.layout-engine"}),(0,a.t)("San Francisco",null,{project:"scripts-v6.layout-engine"})],seriesLabels:[(0,a.t)("Population",null,{project:"scripts-v6.layout-engine"})]}}};function p(R){h.push(R)}function f(R){h.remove(R)}function m(){var R=h.map(function(w){return w.node.getDOMNode()===null?w:null});R.filter(function(w){return w}).forEach(function(w){w.destroy()})}function _(R,w,k){var q={default:[[121,121,121],[191,191,191],[229,229,229],[156,156,156],[0,0,0]],Cobblestone:[[41,31,22],[180,158,146],[127,112,105],[76,61,48],[69,45,35]],Italia:[[124,184,200],[2,100,171],[2,155,59],[227,2,27],[202,180,130]],Muted:[[52,43,43],[112,105,100],[156,148,131],[212,207,198],[240,226,208]],Primary:[[240,82,59],[247,180,19],[36,128,196],[144,187,98],[134,95,144]],Warm:[[153,0,0],[226,71,45],[233,148,48],[248,220,171],[251,243,171]],Cool:[[16,44,99],[7,75,230],[81,146,235],[158,173,211],[225,220,252]],"Tea Party":[[115,13,3],[182,125,44],[234,195,148],[231,144,72],[64,2,18]],Highway:[[176,201,217],[166,166,166],[89,72,57],[191,108,59],[230,134,50]],Shops:[[227,227,230],[69,78,89],[95,205,217],[113,153,138],[213,230,69]],Suburbs:[[73,33,48],[227,227,227],[69,84,115],[206,208,159],[236,101,102]],"DB-Nine":[[134,135,136],[168,182,111],[169,143,119],[227,126,94],[100,138,189]],"M-Three":[[98,140,187],[209,191,78],[90,98,105],[13,76,136],[188,199,208]],Thunderbird:[[217,60,73],[103,189,218],[231,231,192],[227,170,179],[177,202,123]]},F={dark:1,medium:.75,light:.5,xlight:.2,off:0};R in q||(R="default");var z=q[R];return"rgba("+z[w%z.length]+","+F[k]+")"}function v(R){return{scaleFontFamily:R.getComputedStyle("font-family"),scaleFontSize:parseInt(R.getComputedStyle("font-size"),10),scaleFontStyle:R.getComputedStyle("font-style"),tooltipFontFamily:R.getComputedStyle("font-family"),tooltipFontSize:parseInt(R.getComputedStyle("font-size"),10)*.8,tooltipFontStyle:R.getComputedStyle("font-style"),tooltipTitleFontFamily:R.getComputedStyle("font-family"),tooltipTitleFontSize:parseInt(R.getComputedStyle("font-size"),10),tooltipTitleFontStyle:"bold",scaleLabel:"<%= '  ' + value%>"}}function E(R){var w=R;return w.get("tagName")!=="CANVAS"&&(w=w.one("canvas")),w}function S(R,w){if(w){var k=R.sampleLabels;R.sampleLabels=R.seriesLabels,R.seriesLabels=k,R.data=i.Array(R.data[0]).map(function(j,X){return i.Array(R.data).map(function(J){return J[X]})})}var q=Math.min(R.data.length,R.sampleLabels.length),F=Math.min(R.data[0].length,R.seriesLabels.length);R.sampleLabels=R.sampleLabels.slice(0,q),R.seriesLabels=R.seriesLabels.slice(0,F),R.data=R.data.slice(0,q);for(var z=0;z<R.data.length;z++)R.data[z]=R.data[z].slice(0,F);return R}function y(R,w,k){var q=R.datasets[0][w].length,F=k.sampleLabels.length-q,z=R.datasets.length,j=k.seriesLabels.length-z;return j||F&&j}function C(R,w,k){var q=R.datasets.length,F=k.seriesLabels.length-q,z=0;if(F>0){var j=R.datasets[q-1];for(z=0;z<F;z++)R.datasets.push(i.clone(j))}else F<0&&(R.datasets=R.datasets.slice(0,k.seriesLabels.length));var X=R.datasets[0][w].length,J=k.sampleLabels.length-X;if(J>0){var Q=X;for(z=0;z<J;z++){var ie=i.Array(k.seriesLabels).map(function(){return 0});R.addData(ie,k.sampleLabels[Q++])}}else if(J<0)for(z=0;z>J;z--)R.removeData();var ce=0;for(ce=0;ce<k.sampleLabels.length;ce++)R.scale.xLabels[ce]=k.sampleLabels[ce];for(ce=0;ce<R.datasets.length;ce++)for(R.datasets[ce].label=k.seriesLabels[ce],z=0;z<R.datasets[ce][w].length;z++){var pe=k.data[z][ce];(isNaN(pe)||pe===null||pe===void 0)&&(pe=0),R.datasets[ce][w][z].value=[pe],R.datasets[ce][w][z].label=k.sampleLabels[z]}R.update()}function O(R,w){return function(k){var q="";q+='<ul class="'+i.Escape.html(k.name.toLowerCase())+'-legend">';for(var F=0;F<k[R].length;F++)q+='<li><span style="background-color:'+k[R][F][w]+'"></span>',k[R][F].label&&(q+=i.Escape.html(k[R][F].label)),q+="</li>";return q+="</ul>",q}}var A=function(R,w,k,q,F){this.node=R,this._options=F||{},this._canvas=E(R),this._narrow=!1,this._palette=k,this._flip=q,this._data=S(i.clone(w,!0),this._flip),this._makeChart(),this.generateLegend(),this.resize(),p(this)};A.prototype={destroy:function(){this._chart.destroy(),f(this)},resize:function(){var R=this._canvas.getDOMNode();R?R.parentNode.clientWidth>0&&(this._chart.stop(),this._chart.resize(this._chart.render,!0),R.parentNode.clientWidth<u?(this._chart.name==="Bar"&&!this._narrow&&(this._options=i.merge(this._options,{barValueSpacing:5,barDatasetSpacing:1}),this._rebuildChart()),this.node.addClass("narrow-chart"),this._narrow=!0):(this._chart.name==="Bar"&&this._narrow&&(this._options=i.merge(this._options,{barValueSpacing:20,barDatasetSpacing:5}),this._rebuildChart()),this.node.removeClass("narrow-chart"),this._narrow=!1)):m()},generateLegend:function(){this.node.all(".legend-content").each(function(R){R.empty(),R.append(this._chart.generateLegend())},this)},_rebuildChart:function(){this._chart.destroy(),this._makeChart()}};var I=i.namespace("ChartJS").BarChart=i.extend(function(){A.apply(this,arguments)},A,{_makeChart:function(){for(var R=i.merge(v(this.node),{barShowStroke:!0,datasetStrokeWidth:3,animationSteps:25,barValueSpacing:20,barDatasetSpacing:5,legendTemplate:O("datasets","fillColor")},this._options),w={labels:this._data.sampleLabels,datasets:[]},k=0;k<this._data.seriesLabels.length;k++){for(var q=[],F=0;F<this._data.sampleLabels.length;F++)q.push(this._data.data[F][k]);w.datasets.push({label:this._data.seriesLabels[k],data:q,fillColor:_(this._palette,k,"dark"),strokeColor:"rgba(0,0,0,0)",highlightFill:_(this._palette,k,"medium"),highlightStroke:"rgba(0,0,0,0)"})}this._canvas.empty();var z=this._canvas.getDOMNode().getContext("2d");this._chart=new(s())(z).Bar(w,R)},sync:function(R){d()(R)?this._data=g(n.Z.CHART_BAR):this._data=S(i.clone(R,!0),this._flip),y(this._chart,"bars",this._data)?this._rebuildChart():C(this._chart,"bars",this._data),this.generateLegend(),this.resize()}}),D=i.ChartJS.LineChart=i.extend(function(){A.apply(this,arguments)},A,{_makeChart:function(){for(var R=i.merge(v(this.node),{datasetFill:!1,animationSteps:25,legendTemplate:O("datasets","strokeColor")},this._options),w={labels:this._data.sampleLabels,datasets:[]},k=0;k<this._data.seriesLabels.length;k++){for(var q=[],F=0;F<this._data.sampleLabels.length;F++)q.push(this._data.data[F][k]);w.datasets.push({label:this._data.seriesLabels[k],data:q,fillColor:"rgba(0,0,0,0)",strokeColor:_(this._palette,k,"dark"),pointColor:_(this._palette,k,"dark"),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:_(this._palette,k,"medium")})}var z=this._canvas.getDOMNode().getContext("2d");this._chart=new(s())(z).Line(w,R)},sync:function(R){d()(R)?this._data=g(n.Z.CHART_LINE):this._data=S(i.clone(R,!0),this._flip),y(this._chart,"points",this._data)?this._rebuildChart():C(this._chart,"points",this._data),this.generateLegend(),this.resize()}});function T(R){var w=i.Array(R.data).reduce(function(k,q){return k+(q.length>0?q[0]:0)},0);return w===0&&(R.data=i.Array(R.data).map(function(k){return i.Array(k).map(function(q,F){return F===0?1:q})})),R}var B=i.ChartJS.PieChart=i.extend(function(){A.apply(this,arguments)},A,{_makeChart:function(){for(var R=i.merge(v(this.node),{datasetFill:!1,percentageInnerCutout:60,animationSteps:25,legendTemplate:O("segments","fillColor")},this._options),w=[],k=0;k<this._data.sampleLabels.length;k++)w.push({label:this._data.sampleLabels[k],value:this._data.data[k][0],color:_(this._palette,k,"dark"),highlight:_(this._palette,k,"medium")});var q=this._canvas.getDOMNode().getContext("2d");this._chart=new(s())(q).Pie(w,R)},sync:function(R){var w=0;d()(R)?this._data=g(n.Z.CHART_PIE):this._data=T(S(i.clone(R,!0),this._flip));var k=this._chart,q=this._data,F=k.segments.length,z=q.sampleLabels.length-F;if(z>0){var j=F;for(w=0;w<z;w++)k.addData({value:0,label:q.sampleLabels[j],color:_(this._palette,j,"dark"),highlight:_(this._palette,j,"medium")}),j++}else if(z<0)for(w=0;w>z;w--)k.removeData();for(var X=0;X<k.segments.length;X++)k.segments[X].value=q.data[X][0],k.segments[X].label=q.sampleLabels[X];k.update(),this.generateLegend(),this.resize()}});i.ChartJS.createChart=function(R,w,k,q,F){function z(Q){switch(Q){case n.Z.CHART_BAR:return I;case n.Z.CHART_LINE:return D;case n.Z.CHART_PIE:return B}}var j=parseInt(R,10);(!k||!k.data||k.data.length===0)&&(k=g(j));var X=z(j),J=new X(w,k,q,F);return J};var N=i.ChartJS.initializeCharts=function(){function R(w){m();var k=h.map(function(j){return j.node}),q=k.indexOf(w)>=0;if(!q){var F=w.getAttribute("data-settings")||"{}";try{var z=JSON.parse(F.replace(/\&quot;/g,'"'));i.ChartJS.createChart(z.chartType,w,z.dataTable,z.palette,z.flip)}catch(j){if(j instanceof SyntaxError)console.error("[layout-engine/chartjs-helpers] Failed to render chart. Parse error.");else throw j}}}i.all(".sqs-block.chart-block .chart-block-container").each(R)},P;function x(){function R(){clearTimeout(P),P=setTimeout(function(){h.forEach(function(w){w.resize()})},50)}i.one(i.config.win).after("resize",R)}i.config.win.Squarespace=i.config.win.Squarespace||{onInitialize:e(),onDestroy:e()},i.config.win.Squarespace.onInitialize(i,function(){N(),x()}),i.config.win.Squarespace.onDestroy(i,function(){clearTimeout(P),h.forEach(function(R){R.destroy()})})},"1.0",{requires:[]})},152841:function(c,b,t){"use strict";var l=t(540039),d=t.n(l);YUI.add("@sqs/layout-engine/layout-utils",function(o){o.namespace("SQS.LayoutEngine.Layout"),o.SQS.LayoutEngine.Layout.Utils={getBlocksFromJSON:function(e){var a=[],r=function(s){s&&s.blocks&&Array.isArray(s.blocks)?a=a.concat(s.blocks):(d()(s)||Array.isArray(s))&&Object.keys(s).forEach(function(n){r(s[n])})};return r(e),a},getValFromClass:function(e,a){return parseInt((e.get("className").match(new RegExp("(?:\\s|^)"+a+"(\\d+?)(?:\\s|$)"))||["",""])[1],10)},isBlock:function(e){return e=e instanceof o.Widget?e.get("boundingBox"):o.one(e),e!==null&&e.test(".sqs-block")},getColumnWidth:function(e){return o.SQS.LayoutEngine.Layout.Utils.getValFromAncestralClass(e,"sqs-col-")},getValFromAncestralClass:function(e,a){return e.ancestor('[class*="'+a+'"]',!0)?o.SQS.LayoutEngine.Layout.Utils.getValFromClass(e.ancestor('[class*="'+a+'"]',!0),a):-1},convertToValueInPixel:function(e){if(o.Lang.isNumber(e))return e;var a={px:1,em:16,pt:4/3,"%":16/100},r=(e.match(/\D+$/)||["px"])[0];return(parseInt(e,10)||0)*(a[r]||1)}}},"1.0",{requires:["base"]})},860217:function(){YUI.add("@sqs/layout-engine/widget-resize",function(c){c.namespace("SQS.LayoutEngine").WidgetResize=c.Base.create("widget-resize",c.Plugin.Base,[],{initializer:function(){this._timers=[],this._host=this.get("host"),this.on("resizeNodeChange",this._removeOldPlugin,this),this.on(["resizeVerticallyChange","resizeNodeChange"],this._resizeVerticallyChange,this),this.on("resize:start",this._onResizeStart,this),this.on("resize:resize",this._onResizeResize,this),this.on("resize:end",this._onResizeEnd,this),this.on("resize:mouseUp",this._onResizeMouseUp,this),this.once("resize:ready",this._initSyntheticDblClick,this),this._resizeVerticallyChange(),this._initSyntheticDblClick()},_initSyntheticDblClick:function(){var b=null,t=null,l=this.get("resizeNode").resize,d=c.bind(function(){t&&(t.detach(),t=null),b||(b=l.delegate.on("drag:mouseDown",function(o){b.detach(),b=null,t=l.delegate.on("drag:mouseDown",function(e){l.fire("handle-dblclick"),d()},this),c.later(300,this,d)},this))},this);d()},_resizeVerticallyChange:function(){var b=this.get("resizeVertically"),t=this.get("resizeNode");b&&t&&!t.resize&&(this.resizeV&&this.resizeV.destroy(),t.plug(c.Plugin.Resize,{handles:this.get("handles"),wrap:this.get("wrap"),defMinHeight:this.get("minHeight")}),this.resizeV=t.resize,this.resizeV.plug(c.SQS.LayoutEngine.Plugin.ResizeGrid,{contentNode:this.get("contentNode"),resizeNode:this.get("resizeNode"),layoutNode:this.get("layoutNode")}),t.resize.on("resize:start",this.fire,this),t.resize.after("resize:resize",this.fire,this),t.resize.on("resize:end",this.fire,this)),this._timers.push(c.later(0,this,this.resetResizeWrapperSize))},_removeOldPlugin:function(b){b.prevVal&&b.prevVal.hasPlugin(c.Plugin.Resize.NS)&&b.prevVal.unplug(c.Plugin.Resize)},_onResizeStart:function(b){var t=this._host.get("boundingBox");t.addClass("sqs-resizing")},_onResizeResize:function(b){var t=this._host.get("boundingBox").get("region"),l=t.height/t.width*100;this.set("aspectRatio",l)},_onResizeEnd:function(b){this._host.get("boundingBox").removeClass("sqs-resizing"),this.resetResizeWrapperSize()},resetResizeWrapperSize:function(){this._timers.push(c.later(0,this,function(){var b=this.get("resizeNode"),t=this._host.get("boundingBox"),l={height:null,width:null};b.setStyles(l),b!==t&&t.setStyles(l),this.resizeV&&this.resizeV.get("wrapper").setStyles(l)}))},destructor:function(){for(this.get("resizeNode").unplug(c.Plugin.Resize),this._host=null;this._timers.length!==0;)this._timers.shift().cancel();this._timers=null}},{NS:"WidgetResize",ATTRS:{aspectRatio:{value:null},handles:{value:["b"],validator:c.Lang.isArray},minHeight:{value:50,validator:c.Lang.isNumber},resizeVertically:{value:!0,lazyAdd:!1},resizeNode:{valueFn:function(){this.get("host").get("boundingBox")}},contentNode:{valueFn:function(){var b=this.get("resizeNode");return b.hasClass("sqs-block")?b.one(".sqs-block-content"):b}},layoutNode:{valueFn:function(){return this.get("resizeNode").ancestor(".sqs-layout")}},wrap:{value:!0}}})},"1.0",{requires:["resize","resize-plugin","@sqs/layout-engine/plugin-resize-grid"]})},475357:function(c,b,t){"use strict";var l=t(869797),d=t(508057),o=t(134521),e=t.n(o);class a extends l.Z{bindUIEvents(){this.eventHandlers=[{node:this.container.querySelector("a.button"),type:"click",fn:this.handleButtonClick.bind(this)},{node:this.container.ownerDocument.defaultView,type:"resize",fn:e()(this.handleWindowResize.bind(this),40)}],this.trackNodes.forEach((n,i)=>{this.eventHandlers.push({node:n,type:"click",fn:this.handleTrackNodeClick.bind(this,i)},{node:n.querySelector(".track-progress-bar"),type:"mousedown",fn:this.getScrubHandlerForTrack.call(this,i)})}),this.eventHandlers.forEach(n=>{n.node.addEventListener(n.type,n.fn)}),this.handleWindowResize()}destroy(){this.eventHandlers.forEach(n=>{n.node.removeEventListener(n.type,n.fn)}),this.albumController.changeCurrentTrackImpl(null),this.eventHandlers=null,this.albumController=null}handleButtonClick(n){n.preventDefault(),this.albumController.playpause()}handleTrackNodeClick(n,i){const u=this.albumController;i.preventDefault(),u.skipToTrack(n),u.play()}handleWindowResize(){const n=this.container.ownerDocument.defaultView;if(!n.document.body.contains(this.container))return;const i=parseInt(n.getComputedStyle(this.container).width,10);this.container.classList.toggle("tablet",i<800),this.container.classList.toggle("phone",i<480)}handleTrackPositionChange(n,i,u){const h=this.trackNodes[n];h.querySelector(".track-progress-bar .play-bar").style.width=u*100+"%",h.querySelector(".track-time").textContent=(0,d.Z)(i)}handleActiveTrackChange(n){this.trackNodes.forEach(i=>i.classList.remove("selected")),n!==null&&this.trackNodes[n].classList.add("selected")}}const r=a;YUI.add("squarespace-album-player",function(s){var n=[],i=function(u){var h=u.one(".album-cover img");h&&s.config.win.ImageLoader.load(h,{load:!0}),u.removeClass("loading")};s.on("windowresize",function(){s.all(".sqs-audio-playlist").each(function(u){i(u)})}),s.config.win.Squarespace.onInitialize(s,function(){s.all(".sqs-audio-playlist").each(function(u){var h=new r;n.push(h),h.connectToNode(u.getDOMNode()),i(u)})}),s.config.win.Squarespace.onDestroy(s,function(){n.forEach(function(u){u.destroy()}),n.length=0})},"1.0",{requires:["event-resize"]})},609794:function(){YUI.add("squarespace-anim-raf",function(c){var b=c.config.win,t=b.requestAnimationFrame,l=b.cancelAnimationFrame||b.cancelRequestAnimationFrame,d=["moz","webkit"],o;for(o=0;o<d.length&&!t;o++)t=b[d[o]+"RequestAnimationFrame"],l=b[d[o]+"CancelAnimationFrame"]||b[d[o]+"CancelRequestAnimationFrame"];if(l&&t){var e=null;c.Anim._startTimer=function(){e||(e=t(c.Anim._runAnimFrame))},c.Anim._stopTimer=function(){e&&(l(e),e=null)},c.Anim._runAnimFrame=function(){e&&(e=t(c.Anim._runAnimFrame),c.Anim._runFrame())}}},"1.0",{requires:["anim"]})},476008:function(){YUI.add("squarespace-animations",function(c){c.namespace("Squarespace.Animations");var b="display-status-",t="-plugged",l="shown",d="hidden";c.Squarespace.Animations.Expandable=c.Base.create("expandable",c.Plugin.Base,[],{initializer:function(o){this.doBefore("show",this.open),this.doBefore("hide",this.close),this._running=!1},close:function(o){var e=this.get("host"),a=this.get("easing"),r=this.get("duration"),s,n;return o=e.inDoc()?o:!0,e.fire("close"),o?this._hardClose():this._running||(this._running=!0,e.wrap('<div class="expandable-plugin-wrapper"></div>'),n=e.ancestor(".expandable-plugin-wrapper"),n.setStyles({overflow:"hidden",height:e.get("offsetHeight")}),this._closeWrapper=n,s=new c.Anim({node:n,to:{height:0},easing:a,duration:r}),s.on("end",function(){e.inDoc()&&(e.setStyles({height:0,overflow:"hidden",display:"none"}),e.unwrap(),e.addClass("expandable-hidden")),this._running=!1,e.fire("closed")},this),this._closeAnim=s,s.run()),new c.Do.Prevent("Expandable prevented default hide.")},_hardClose:function(){var o=this.get("host");o.setStyles({height:0,overflow:"hidden",display:"none"}),o.addClass("expandable-hidden"),o.fire("closed")},_hardOpen:function(){var o=this.get("host");o.setStyles({height:null,display:null}),o.removeClass("expandable-hidden"),o.fire("opened")},open:function(o){var e=this.get("host"),a=this.get("easing"),r=this.get("duration"),s,n,i,u;return o=e.inDoc()?o:!0,e.fire("open"),o?this._hardOpen():this._running||(this._running=!0,e.getComputedStyle("display")==="none"&&e.setStyle("display",null),i=e.cloneNode(!0),i.setStyles({height:"auto",visibility:"hidden",display:null,position:"absolute",width:e.get("offsetWidth")}),e.insert(i,"before"),n=i.get("offsetHeight")+parseInt(i.getComputedStyle("marginTop"),10)+parseInt(i.getComputedStyle("marginBottom"),10),i.remove(!0),e.wrap('<div class="expandable-plugin-wrapper"></div>'),u=e.ancestor(".expandable-plugin-wrapper"),u.setStyles({overflow:"hidden",height:0}),e.setStyles({height:null,overflow:null}),this._openWrapper=u,s=new c.Anim({node:u,to:{height:n},easing:a,duration:r}),s.on("end",function(){var h=this.get("host");h&&(this._running=!1,h.unwrap(),h.removeClass("expandable-hidden"),h.fire("opened"))},this),this._openAnim=s,s.run()),new c.Do.Prevent("Expandable prevented default show.")},destructor:function(){this._closeWrapper&&this._closeWrapper.remove(!0),this._openWrapper&&this._openWrapper.remove(!0),this._openAnim&&this._openAnim.stop().destroy(),this._closeAnim&&this._closeAnim.stop().destroy()}},{NS:"expandablePlugin",ATTRS:{duration:{value:.3,validator:c.Lang.isNumber},easing:{value:c.Easing.easeOutStrong}}}),c.Squarespace.Animations.Fadeable=c.Base.create("fadeable",c.Plugin.Base,[],{initializer:function(o){this.beforeHostMethod("show",this.show),this.beforeHostMethod("hide",this.hide),this.get("host").addClass(this.name+t),this._onlyUseOpacity=o.onlyUseOpacity===void 0?!1:o.onlyUseOpacity,this._running=!1},destructor:function(){this._anim&&this._anim.stop().destroy(),this.get("host").removeClass(this.name+t)},show:function(o){return this._changeVisibility(!0,o)},hide:function(o){return this._changeVisibility(!1,o)},_changeVisibility:function(o,e){var a=this.get("host");return e=a.inDoc()?e:!0,o&&a.removeClass(b+"hidden"),e?this._hardChangeVisibility(o):(this._anim&&(this._anim.stop().destroy(),this._anim=null),o&&a.getComputedStyle("display")==="none"&&a.setStyle("display",null),this._anim=new c.Anim({node:a,to:{opacity:o?this.get("opacity"):0},easing:this.get("easing"),duration:this.get("duration")}),this._anim.onceAfter("end",function(){this._hardChangeVisibility(o),this._running=!1,!o&&!this._onlyUseOpacity&&a.getDOMNode()&&a.setStyle("display","none"),a.fire(o?"shown":"hidden"),delete this._anim},this),this._anim.run()),new c.Do.Prevent("Fadeable prevented default "+(o?"show":"hide")+" and used its own.")},_hardChangeVisibility:function(o){var e=this.get("host");o||e.addClass(b+"hidden"),e.setStyles({opacity:o?this.get("opacity"):0}),this._anim=null,e.fire(o?l:d)}},{NS:"fadeablePlugin",ATTRS:{duration:{value:.3,validator:c.Lang.isNumber},easing:{value:c.Easing.easeOutStrong},opacity:{value:1}}}),c.Squarespace.Animations.Scalable=c.Base.create("scalable",c.Plugin.Base,[],{initializer:function(o){this.doBefore("show",this.show),this.doBefore("hide",this.hide),this._running=!1},show:function(o){return this._changeVisibility(!0,o)},hide:function(o){return this._changeVisibility(!1,o)},_changeVisibility:function(o,e){var a=this.get("host"),r=this.get("duration");if(this.fire(o?"show":"hide"),a.fire(o?"show":"hide"),o&&a.removeClass("sqs-scalable-hidden"),e=a.inDoc()?e:!0,e)this._hardChangeVisibility(o),o||a.addClass("sqs-scalable-hidden");else if(!this._running){this._running=!0;var s=!1,n=c.bind(function(){s||(s=!0,a.getDOMNode()&&(this._running=!1,o||a.addClass("sqs-scalable-hidden"),this.fire(o?l:d),a.fire(o?l:d)))},this);a.setStyles({transition:["opacity "+r+"s ease-out","visibility "+r+"s ease-out","transform "+r+"s ease-out"].join(", ")}),c.config.win.setTimeout(function(){a&&(o?a.setStyles({opacity:1,visibility:"visible",transform:"scale(1)"}):a.setStyles({opacity:0,visibility:"hidden",transform:"scale(0.94)"}))},1),c.config.win.setTimeout(function(){n()},1e3*r)}return new c.Do.Prevent("Scalable prevented default "+(o?"show":"hide")+" and used its own.")},_hardChangeVisibility:function(o){var e=this.get("host"),a=!!(this.get("host").getDOMNode().style.transitionDuration||c.DOM.CUSTOM_STYLES.transitionDuration);a?e.setStyles({visibility:o?"visible":"hidden",opacity:o?1:0,transform:"scale("+(o?"1":"0.94")+")"}):e.setStyles({visibility:o?"visible":"hidden",opacity:o?1:0}),e.fire(o?l:d)}},{NS:"scalablePlugin",ATTRS:{duration:{value:.3,validator:c.Lang.isNumber},easing:{value:c.Easing.easeOutStrong},opacity:{value:1}}})},"1.0",{requires:["anim","anim-easing","base","plugin","transition"]})},399296:function(){YUI.add("squarespace-anims",function(c){c.namespace("Squarespace");function b(t){b.superclass.constructor.apply(this,arguments)}c.Squarespace.Anims=c.extend(b,c.Base,{initializer:function(){this._items=[]},destructor:function(){var t=[];this.each(function(l){t.push(l)}),c.Array.each(t,function(l){l.get("running")&&l.stop(!1),l.destroy()}),c.detach(this.get("id")+"|*")},add:function(t){if(!t.get("node"))throw new Error(this.name+": Animation doesn't specify a node");t.on(this.get("id")+"|end",function(l){this.remove(t)},this),this._items.push(t)},remove:function(t){if(c.Lang.isNumber(t))return this._items.splice(t,1);var l=this._items.indexOf(t);if(l!==-1)return this._items.splice(this._items.indexOf(t),1)}},{NAME:"anims"}),c.augment(b,c.ArrayList)},"1.0",{requires:["arraylist","base","base-build"]})},269602:function(c,b,t){"use strict";var l=t(714487),d=t(272561),o=t.n(d),e=t(492145),a=t.n(e),r={READY:"announcementBar:event:ready",UPDATE:"announcementBar:event:update",RESET_VISIBILITY:"announcementBar:event:resetVisibility",CLOSE:"announcementBar:event:close"};YUI.add("squarespace-announcement-bar",function(s){var n="closed",i="squarespace-announcement-bar";s.namespace("Squarespace.Widgets");var u=s.Squarespace.Widgets.AnnouncementBar=s.Base.create("AnnouncementBar",s.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._bb=this.get("boundingBox"),this._cb=this.get("contentBox"),this._publishEvents(),this._addActionListeners()},destructor:function(){s.Array.invoke(this.eventListeners,"detach"),this.eventListeners=[]},render:function(h){var g=h||this._checkIfNewMessage();if(g){var p=this._getDropzone();u.superclass.render.call(this,p)}else this._bindTweakEvents()},bindUI:function(){u.superclass.bindUI.call(this),this.get("boundingBox").delegate("click",this._closeBar,"."+this.getClassName("close"),this),this.get("boundingBox").delegate("keydown",function(h){(h.keyCode===13||h.keyCode===32)&&this._closeBar(h)},"."+this.getClassName("close"),this),this._bindTweakEvents(),this.after(["textChange","clickthroughUrlChange"],function(){this.get("contentBox").empty(),this.get("contentBox").prepend(this.renderTemplate())}),this.on("visibleChange",this._checkIfNewMessage,this)},syncUI:function(){u.superclass.syncUI.call(this);var h=parseInt(this.get("style"),10),g=this.get("text");s.Lang.isObject(g)&&(g=g.html),h!==o().NONE&&g?this.show():this.hide()},getHeight:function(){return this._bb.get("clientHeight")},_bindTweakEvents:function(){s.Global.on("tweak:beforeopen",this._onTweakOpen,this)},_onTweakOpen:function(){var h=this.get("rendered");h||this.render(!0),this.show()},_closeBar:function(h){if(!s.namespace("Squarespace.Widgets.AnnouncementBar").isClosed()){h&&h.preventDefault(),this.hide();var g=s.one("[data-first-focusable-element]");g&&g.focus(),this._recordClose(),document.body.classList.remove("announcement-bar-reserved-space")}},_getDropzone:function(){var h=s.one(this.get("dropzone"));if(!s.Lang.isNull(h)){var g=s.Node.create('<div class="sqs-announcement-bar-custom-location"></div>');h.insert(g,0),h=g,this.set("isCustomPositioned",!0)}return h},_checkIfNewMessage:function(){var h=!0,g=!1;if(localStorage){var p={text:this.get("text"),clickthroughUrl:this.get("clickthroughUrl")},f=this._getLocalStorageData();if(f){var m=f[n];delete f[n],p.clickthroughUrl===null&&delete p.clickthroughUrl;var _=s.JSON.stringify(p),v=s.JSON.stringify(f);_===v&&m===!0?h=!1:g=!0}else g=!0;g===!0&&(p[n]=!1,this._saveToLocalStorage(p))}return h},_getLocalStorageData:function(){var h=i,g=null;if(localStorage)try{var p=localStorage.getItem(h);g=s.JSON.parse(p)}catch{g=null}return g},_saveToLocalStorage:function(h){var g=i;if(localStorage){typeof h!="string"&&(h=s.JSON.stringify(h));try{localStorage.setItem(g,h)}catch{}}},_recordClose:function(){var h=this._getLocalStorageData();h&&(h[n]=!0,this._saveToLocalStorage(h))},_publishEvents:function(){this.publish(r.RESET_VISIBILITY),this.publish(r.UPDATE),this.publish(r.CLOSE),s.Global.publish(r.READY)},_addActionListeners:function(){this.eventListeners=[this.on(r.RESET_VISIBILITY,(function(){s.Squarespace.Widgets.AnnouncementBar.resetVisibility(),this.render(!0),this.syncUI()}).bind(this)),this.on(r.UPDATE,(function(h){this.setAttrs({text:h.text.html.toString(),style:h.style,clickthroughUrl:h.clickthroughUrl}),this.get("rendered")||this.render(),this.syncUI()}).bind(this)),this.on(r.CLOSE,(function(){this._closeBar()}).bind(this))],s.Global.fire(r.READY,{bar:this})}},{CSS_PREFIX:"sqs-announcement-bar",HANDLEBARS_TEMPLATE:"announcement-bar.html",EVENTS:r,ATTRS:{text:{value:null},closeButtonLabel:{value:(0,l.t)("Close Announcement",null,{project:"scripts-v6-root",notes:"Label for a button closing an announcement bar"})},isCustomPositioned:{value:!1},clickthroughUrl:{value:null},dropzone:{value:".sqs-announcement-bar-dropzone"}}});s.namespace("Squarespace.Widgets.AnnouncementBar").resetVisibility=function(){if(localStorage)try{localStorage.removeItem(i)}catch{}},s.namespace("Squarespace.Widgets.AnnouncementBar").isClosed=function(){var h=!1;if(localStorage)try{var g=localStorage.getItem(i),p=s.JSON.parse(g);s.Lang.isNull(p)||(h=p[n])}catch{}return h},s.config.win.Squarespace.onInitialize(s,function(){var h=s.config.win.Static.SQUARESPACE_CONTEXT.websiteSettings.announcementBarSettings||{style:1,text:""};if(s.namespace("Squarespace.Singletons"),!s.Squarespace.Singletons.AnnouncementBar){var g=h.text;s.Lang.isObject(g)&&(g=g.html),s.Squarespace.Singletons.AnnouncementBar=new u({text:g,clickthroughUrl:h.clickthroughUrl}),s.config.win.Static.SQUARESPACE_CONTEXT.showAnnouncementBar&&s.Squarespace.Singletons.AnnouncementBar.render()}})},"1.0",{requires:["base","json","node","squarespace-announcement-bar-template","squarespace-ss-widget"]})},125475:function(c,b,t){"use strict";var l=t(444867),d=t.n(l),o=t(762379),e=t(714487),a=t(698137),r=t(960970),s=t(582136),n=t(537312);YUI.add("squarespace-async-form",function(i){i.namespace("Squarespace.Widgets");var u=i.Squarespace.Widgets.AsyncForm=i.Base.create("AsyncForm",i.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.publish("submission"),this._typeGetterMap={date:this._getMultiFieldVal,name:this._getMultiFieldVal,time:this._getMultiFieldVal,address:this._getMultiFieldVal,checkbox:this._getOptionFieldVal,likert:this._getLikertFieldVal,radio:this._getRadioFieldVal,select:this._getSelectVal,phone:this._getPhoneFieldVal},this._typeSetterMap={date:this._setMultiFieldVal,name:this._setMultiFieldVal,time:this._setMultiFieldVal,address:this._setMultiFieldVal,checkbox:this._setOptionFieldVal,likert:this._setLikertFieldVal,radio:this._setRadioFieldVal,select:this._setSelectVal,phone:this._setPhoneFieldVal},this._defaultGetter=this._getSingleFieldVal,this._defaultSetter=this._setSingleFieldVal},renderUI:function(){u.superclass.renderUI.call(this);var h=this.get("form"),g=h.fields;i.Lang.isString(g[0])&&(g=i.Array.map(g,i.JSON.parse)),n.if(h.id);var p={showTitle:this.get("showTitle"),preventSubmit:this.get("preventDefaultSubmit")||this.get("preventAllSubmits"),hideSubmitButton:this.get("hideSubmitButton"),formId:h.id,formName:this.get("formName"),formFields:g,formSubmitButtonText:this.get("formSubmitButtonText"),formSubmissionMessage:h.parsedSubmissionMessage,formSubmissionHTML:h.submissionHTML,successRedirect:h.successRedirect,disclaimerMessage:h.parsedDisclaimerMessage,captchaEnabled:h.captchaEnabled,captchaTheme:h.captchaTheme,captchaAlignment:h.captchaAlignment},f=this.get("contentBox"),m=this.evaluateTemplate(p);f.append(m),this._formEl=f.one("form"),this._setFormData(),(0,r.Z)(this._formEl.getDOMNode());var _=f.one(".sqs-site-style-form");_&&_.removeClass("sqs-site-style-form")},_onSubmit:function(g){if(this.get("preventDefaultSubmit")&&!this.get("preventAllSubmits")){this._clearErrors();var p=null,f;if(o.Z.isFeatureEnabled(d().VANILLA_FORM_HANDLER)){var m=this._formEl.getDOMNode();p=new s.Z(i.config.win,m),f=p.validate()}else f=this._validateForm();if(f.errors.length>0)this._renderErrors(f.errors);else{var _=p?p.getSanitizedFieldValues():f.data;this.fetchValidatedFormSubmission(p,this.get("form").id,i.bind(function(){this.fire("submission",{data:_})},this),i.bind(function(v){var E=[];i.Object.each(v.errors,function(S,y){E.push({fieldId:y,message:S})}),this._renderErrors(E)},this))}}g.halt()},bindUI:function(){this._formEl.on("submit",this._onSubmit,this),this.after("formDataChange",this._setFormData,this)},setStateSaving:function(){var h=this.get("contentBox");h.addClass("saving"),h.one('input[type="submit"]').set("value",(0,e.t)("Saving\u2026",null,{project:"scripts-v6-root"}))},setStateEditing:function(){var h=this.get("contentBox"),g=this.get("formSubmitButtonText");h.one('input[type="submit"]').set("value",g),h.removeClass("saving")},fetchValidatedFormSubmission:function(h,g,p,f){var m=h?h.getSanitizedFieldValues():this.getFormData(),_=JSON.stringify(m);i.Data.post({url:"/api/rest/forms/validate/"+g,headers:{"Content-Type":"application/json"},data:_,success:p,failure:f})},getFormData:function(){return this._validateForm().data},_renderErrors:function(h){i.Array.each(h,function(g){var p=this.get("contentBox").one("#"+g.fieldId);p&&p.one(".title").insert('<div class="field-error">'+g.message+"</div>","before")},this)},_clearErrors:function(){this.get("contentBox").all(".field-error").remove(!0)},_validateForm:function(){var h={},g=[];return this._formEl.all(".form-item").each(function(p){var f=p.getAttribute("id"),m=this._getFieldData(p);if(m){var _=m.error;_&&g.push({fieldId:f,message:_}),h[f]=m.data}},this),{data:h,errors:g}},_getFieldData:function(h){var g=h.get("className").split(" "),p=null,f,m=!1;if(i.Array.each(g,function(_){i.Object.hasKey(this._typeGetterMap,_)?(p=_,f=this._typeGetterMap[p]):_==="section"&&(m=!0)},this),!m)return p===null&&(f=this._defaultGetter),f.call(this,h)},_getSingleFieldVal:function(h){var g=h.one(".field-element");if(g){var p=g.get("value"),f,m=!i.Lang.isValue(p)||p==="";return h.hasClass("required")&&m&&(f=(0,e.t)("Required",null,{project:"scripts-v6-root"})),{data:g.get("value"),error:f}}return null},_getMultiFieldVal:function(h){var g=[],p,f=!1;return h.all(".field-element").each(function(m){var _=m.get("value");i.Lang.isValue(_)&&_!==""&&(f=!0),g.push(m.get("value"))}),h.hasClass("required")&&!f&&(p=(0,e.t)("Required",null,{project:"scripts-v6-root"})),{data:g,error:p}},_getOptionFieldVal:function(h){var g=[],p;return h.all("input").each(function(f){f.get("checked")&&g.push(f.get("value"))},this),h.hasClass("required")&&g.length===0&&(p=(0,e.t)("Required",null,{project:"scripts-v6-root"})),{data:g,error:p}},_getLikertFieldVal:function(h){var g={},p;return h.all(".item").each(function(f){var m;f.all("input").each(function(_){_.get("checked")&&(m=_.get("value"))}),h.hasClass("required")&&!i.Lang.isValue(m)&&(p=(0,e.t)("Survey is not valid. Missing a required question.",null,{project:"scripts-v6-root"})),i.Lang.isValue(m)&&(g[f.getAttribute("data-question")]=m)}),{data:g,error:p}},_getRadioFieldVal:function(h){var g,p;return h.all("input").each(function(f){f.get("checked")&&(g=f.get("value"))},this),h.hasClass("required")&&!i.Lang.isValue(g)&&(p=(0,e.t)("Required",null,{project:"scripts-v6-root"})),{data:g,error:p}},_getSelectVal:function(h){var g=h.one("select").get("value"),p,f=!i.Lang.isValue(g)||g==="";return h.hasClass("required")&&f&&(p=(0,e.t)("Required",null,{project:"scripts-v6-root"})),{data:g,error:p}},_getPhoneFieldVal:function(h){var g=this._getMultiFieldVal(h),p=g.data;return p&&p.length===3&&p.unshift(""),g},_setFormData:function(){var h=this.get("formData");h!==null&&this._formEl.all(".form-item").each(function(g){var p=h[g.getAttribute("id")];if(p){var f=p.value,m=i.Lang.isValue(f)?f:p.values||[];this._setFieldData(g,m)}},this)},_setFieldData:function(h,g){var p=h.get("className").split(" "),f=null,m,_;i.Array.each(p,function(v){if(i.Object.hasKey(this._typeSetterMap,v)?(f=v,m=this._typeSetterMap[f]):v==="section"&&(_=!0),!_)return f===null&&(m=this._defaultSetter),m.call(this,h,g)},this)},_setSingleFieldVal:function(h,g){var p=h.one(".field-element");if(p)return p.set("value",g)},_setMultiFieldVal:function(h,g){var p=h.all(".field-element");p.each(function(f){f.set("value",g[f.getData("title")])})},_setOptionFieldVal:function(h,g){var p=h.all("input");p.each(function(f){g.indexOf(f.get("value"))!==-1&&f.setAttribute("checked","checked")},this)},_setLikertFieldVal:function(h,g){var p=h.all(".item");p.each(function(f){var m=f.getAttribute("data-question"),_=g[m];if(!(!i.Lang.isValue(_)||_==="")){var v=parseInt(_,10)+2;f.all("input").item(v).setAttribute("checked","checked")}})},_setRadioFieldVal:function(h,g){var p=h.all("input");p.each(function(f){f.get("value")===g&&f.setAttribute("checked","checked")},this)},_setSelectVal:function(h,g){h.one("select").set("value",g)},_setPhoneFieldVal:function(h,g){h.all(".field").size()===3&&g.length===4&&g.shift(),this._setMultiFieldVal(h,g)},evaluateTemplate:function(h){var g=this.get("formTemplate");try{return(0,a.Z)(g.html,i.merge({},h,{localizedStrings:g.localizedStrings}))}catch(p){return p.message}}},{CSS_PREFIX:"sqs-async-form",ATTRS:{form:{value:{fields:[]},validator:i.Lang.isValue},formTemplate:{value:null},hideSubmitButton:{value:!1},formSubmitButtonText:{value:(0,e.t)("Add to Cart",null,{project:"scripts-v6-root"})},formName:{value:(0,e.t)("My Form Name",null,{project:"scripts-v6-root"})},formData:{value:null},showTitle:{value:!0},preventDefaultSubmit:{value:!0},preventAllSubmits:{value:!1}}})},"1.0",{requires:["base","json","node","squarespace-ss-widget"]})},469684:function(){YUI.add("squarespace-async-task-synchronizer",function(c){c.namespace("Squarespace").AsyncTaskSynchronizer=c.Base.create("asyncTaskSynchronizer",c.Base,[],{initializer:function(){this._idsToCompleted={},this.before(this.get("id")+"|completedChange",function(b){b.newVal||(b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation())},this),this.after(this.get("id")+"|completedChange",function(b){var t=this.get("completionCallback"),l=this.get("callbackContext");b.newVal&&t&&(l?t.call(l):t()),this.destroy()},this)},destructor:function(){this.detach(this.get("id")+"|*"),this._idsToCompleted=null},add:function(b,t,l,d){if(this.get("destroyed"))throw new Error(this.name+": This synchonizer has been used and destroyed");if(!b)throw new Error(this.name+": No eventTarget(s) provided.");arguments.length===1&&c.Lang.isArray(b)?b.forEach(function(o){this.add.apply(this,o)},this):c.Lang.isArray(b)?b.forEach(function(o){this._waitForEvent(o,t,l,d)},this):this._waitForEvent(b,t,l,d)},_allTasksCompleted:function(){return c.Array.every(c.Object.values(this._idsToCompleted),function(b){return b})},_markCompleted:function(b){this.get("destroyed")||(this._idsToCompleted[b]=!0,this._allTasksCompleted()&&this._set("completed",!0))},_waitForEvent:function(b,t,l,d){var o=c.guid("task-"),e=!1;if(this._idsToCompleted[o]=!1,c.Lang.isFunction(l)&&(d&&c.bind(l,d),e=l(b,t)),e)this._markCompleted(o);else{var a=c.bind(function(r){b.on(this.get("id")+"|"+r,function(s){this._markCompleted(o)},this)},this);c.Lang.isArray(t)?c.Array.each(t,function(r){a(r)},this):a(t)}return o}},{ATTRS:{completed:{value:!1,readOnly:!0},completionCallback:{value:null,validator:c.Lang.isFunction},callbackContext:{value:null}}})},"1.0",{requires:["base"]})},67971:function(c,b,t){"use strict";var l=t(963351),d=t.n(l),o=t(434927),e=t.n(o),a=t(714487);YUI.add("squarespace-async-wrappers-cover-page-editors-for-standalone",function(r){r.namespace("Squarespace.AsyncWrappers");var s={action:function(v,E){return{strings:{title:(0,a.t)("Action",null,{project:"scripts-v6.async-wrappers"}),description:(0,a.t)("Your Cover Page should have a clear goal. Choose which type best meets your needs.",null,{project:"scripts-v6.async-wrappers"})},slideSummary:v,sliceAreas:E.filterBySliceTypes(r.Squarespace.SliceTypeGroups.ACTION),sliceTypeOrdering:[e().ACTION,e().CUSTOM_FORM]}},"social-links":function(v,E){return{strings:{title:(0,a.t)("Social Links",null,{project:"scripts-v6.async-wrappers"}),description:(0,a.t)("Configure your social icons that are used on your cover page.",null,{project:"scripts-v6.async-wrappers"})},slideSummary:v,sliceAreas:E.filterBySliceTypes(r.Squarespace.SliceTypeGroups.SOCIAL_ICONS),sliceTypeOrdering:[e().SOCIAL_ICONS]}},audio:function(v,E){return{strings:{title:(0,a.t)("Audio",null,{project:"scripts-v6.async-wrappers"}),description:(0,a.t)("Add one or more tracks to create a playlist of songs. Then organize your tracks to create an album.",null,{project:"scripts-v6.async-wrappers"})},slideSummary:v,sliceAreas:E.filterBySliceTypes(r.Squarespace.SliceTypeGroups.AUDIO),sliceTypeOrdering:[e().ALBUM]}},video:function(v,E){return{strings:{title:(0,a.t)("Video",null,{project:"scripts-v6.async-wrappers"}),description:(0,a.t)("Paste the URL of a video (Vimeo, YouTube, Animoto, Wistia, etc.) you'd like to embed, and Squarespace will attempt to locate and format this video for your site.",null,{project:"scripts-v6.async-wrappers"})},slideSummary:v,sliceAreas:E.filterBySliceTypes(r.Squarespace.SliceTypeGroups.VIDEO),sliceTypeOrdering:[e().VIDEO]}},location:function(v,E){return{strings:{title:(0,a.t)("Map Location",null,{project:"scripts-v6.async-wrappers"}),description:(0,a.t)("Input your address into the fields below to let people know where you, your business, or your next event can be found. To edit how this location appears in text, navigate to the Branding & Text panel.",null,{project:"scripts-v6.async-wrappers"})},slideSummary:v,sliceAreas:E.filterBySliceTypes(r.Squarespace.SliceTypeGroups.LOCATION),sliceTypeOrdering:[e().MAP]}},twitter:function(v,E){return{strings:{title:(0,a.t)("Twitter",null,{project:"scripts-v6.async-wrappers"}),description:(0,a.t)("Pick the account below you would like to import content from, or press Add Account to connect a new one.",null,{project:"scripts-v6.async-wrappers"})},slideSummary:v,sliceAreas:E.filterBySliceTypes(r.Squarespace.SliceTypeGroups.TWITTER),sliceTypeOrdering:[e().TWITTER]}}},n;function i(){if(!n){var v=r.config.win.Static.SQUARESPACE_CONTEXT.coverPageCollection;n=r.Squarespace.ContentCollectionCache.getCollectionFromData(v)}return n}var u;function h(v){if(u){v();return}var E=new r.Squarespace.Models.SlideSummary({url:r.Lang.sub("{root}content-collections/{collectionId}/slide-summary",{root:r.Squarespace.API_ROOT,collectionId:i().get("id")}),slideType:d().COVER_PAGE});E.load(function(){u=E,v()})}var g;function p(v){if(g){v();return}var E=new r.Squarespace.Models.SlideLayoutList({slide:u.get("slide")});E.load(function(){g=E,v()})}var f;function m(v){if(f){v();return}var E=u.get("slide"),S=E.get("layoutIdentifier"),y=g.getByIdentifier(S);u.get("slices").updateForLayout(y,E),u.after("load",function(){u.get("slices").updateForLayout(y,E)}),f=!0,v()}function _(v){h(function(){p(function(){m(v)})})}r.Squarespace.AsyncWrappers.CoverPageEditorForStandalone=r.Base.create("CoverPageEditor",r.Squarespace.Damask.Panel.AsyncDataPanel,[],{getPanel:function(v,E,S){var y=this.get("location.pathname"),C=y.slice(y.lastIndexOf("/")).substr(1);_(function(){var O=u.get("slide"),A=O.get("layoutIdentifier"),I=g.getByIdentifier(A),D=I.get("sliceAreas"),T=s[C](u,D);setTimeout(function(){E(new r.Squarespace.Widgets.SliceGroupEditor(T))})})}})},"1.0",{requires:["base","squarespace-damask-panel-async-data-panel"]})},654618:function(){YUI.add("squarespace-attr-validators",function(c){c.namespace("Squarespace");function b(l,d,o,e){if(0)var a}var t=c.Squarespace.AttrValidators={isBoolean:function(l,d){return c.Lang.isBoolean(l)?!0:(b.call(this,"boolean",l,d),!1)},isNumber:function(l,d){return c.Lang.isNumber(l)?!0:(b.call(this,"number",l,d),!1)},isString:function(l,d){return c.Lang.isString(l)?!0:(b.call(this,"string",l,d),!1)},isNonArrayObject:function(l,d){return c.Lang.isArray(l)?(b.call(this,"Array",l,d,"[{attrName}] Validation Error: Expected {expectedVal}, got Array instead."),!1):c.Lang.isObject(l)?!0:(b.call(this,"Object",l,d),!1)},isObject:function(l,d){return c.Lang.isObject(l)?!0:(b.call(this,"Object",l,d),!1)},isArray:function(l,d){return c.Lang.isArray(l)?!0:(b.call(this,"Array",l,d),!1)},isFunction:function(l,d){return c.Lang.isFunction(l)?!0:(b.call(this,"Function",l,d),!1)},isNode:function(l,d){return c.instanceOf(l,c.Node)?!0:(b.call(this,"Node",l,d),!1)},isNodeList:function(l,d){return c.instanceOf(l,c.NodeList)?!0:(b.call(this,"NodeList",l,d),!1)},isNullOr:function(l){return c.Lang.isFunction(l)?function(d,o){return c.Lang.isNull(d)?!0:l(d,o)}:(console.error("The validator function argument is required."),!1)},isInstanceOf:function(l){return l?c.Lang.isString(l)?(l=l.split("."),function(d,o){return d instanceof c.Squarespace.Damask.ContextGlobals.fromTop(l)||d instanceof c.Squarespace.Damask.ContextGlobals.fromFrame(l)?!0:(b.call(this,l.join("."),d,o,"[{attrName}] Validation Error: {actualVal} is not an instance of {expectedVal}."),!1)}):function(d,o){return d instanceof l?!0:(b.call(this,l,d,o,"[{attrName}] Validation Error: {actualVal} is not an instance of {expectedVal}."),!1)}:!1},isExtensionOf:function(l){return c.Lang.isFunction(l)?function(d,o){var e=c.Lang.isFunction(d.prototype._getClasses)&&d.prototype._getClasses();return e&&c.Array.indexOf(e,l)!==-1?!0:(b.call(this,l,d,o,"[{attrName}] Validation Error: {actualVal} is not an extension of the {expectedVal}."),!1)}:!1},isTypeOf:function(l){return l?function(d,o){return typeof d===l?!0:(b.call(this,l,d,o,'[{attrName}] Validation Error: {actualVal} is not of type "{expectedVal}".'),!1)}:!1},isValueIn:function(l){return c.Lang.isObject(l)?c.Lang.isArray(l)?function(d,o){return c.Array.indexOf(l,d)!==-1?!0:(b.call(this,l,d,o,"[{attrName}] Validation Error: {actualVal} is not a value in {expectedVal}"),!1)}:function(d,o){return c.Object.values(l).indexOf(d)!==-1?!0:(b.call(this,l,d,o,"[{attrName}] Validation Error: {actualVal} is not a value in {expectedVal}"),!1)}:!1}};t.isNullOrInstanceOf=function(l){return t.isNullOr(t.isInstanceOf(l))},t.isNullOrExtensionOf=function(l){return t.isNullOr(t.isExtensionOf(l))},t.isNullOrOfType=function(l){return t.isNullOr(t.isTypeOf(l))},t.isNullOrValueIn=function(l){return t.isNullOr(t.isValueIn(l))},t.isDate=t.isInstanceOf(Date),t.isNullOrString=t.isNullOr(t.isString),t.isNullOrDate=t.isNullOr(t.isDate),t.isNullOrBoolean=t.isNullOr(t.isBoolean),t.isNullOrNumber=t.isNullOr(t.isNumber),t.isNullOrObject=t.isNullOr(t.isObject),t.isNullOrNonArrayObject=t.isNullOr(t.isNonArrayObject),t.isNullOrArray=t.isNullOr(t.isArray),t.isNullOrFunction=t.isNullOr(t.isFunction),t.isNullOrNode=t.isNullOr(t.isNode),t.isNullOrNodeList=t.isNullOr(t.isNodeList)},"1.0",{requires:["squarespace-damask-context-globals"]})},201300:function(c,b,t){"use strict";var l=t(714487),d=t(731648),o=t(297107),e=t(759352),a=t(204482),r=t(659519),s=t(423753),n=t(195949),i=t(254229),u=t.n(i),h=t(769967),g=t.n(h),p=a.isArrowLeftKey,f=a.isArrowUpKey,m=a.isArrowRightKey,_=a.isArrowDownKey;YUI.add("squarespace-audio-player",function(v){v.namespace("Squarespace.Widgets");var E=v.Squarespace.Widgets.AudioPlayer=v.Base.create("audioPlayer",v.Squarespace.Widgets.SSWidget,[],{initializer:function(y){var C=this.get("render");v.Lang.isBoolean(C)?C=null:v.Lang.isString(C)&&(C=v.one(C)),C&&(C._audioPlayer&&C._audioPlayer.destroy(),C._audioPlayer=this,v.Object.each(C.getData(),function(O,A){O&&this.set(A,O)},this))},destructor:function(){this._audio&&(this.stop(),this._audio=null),o.Z.player.pause(),this._deregisterKeyboardScrubber&&this._deregisterKeyboardScrubber()},renderUI:function(){E.superclass.renderUI.apply(this,arguments);var y=this.get("boundingBox"),C=y.one(".placeholder"),O=this.get("title"),A=this.get("author");O&&A?C.setContent(v.Node.create('<div class="wrapper"><div class="audio-author">'+A+'</div><div class="audio-title">'+O+"</div></div>")):O?C.setContent(v.Node.create('<div class="wrapper"><div class="audio-title">'+O+"</div></div>")):C.setContent(v.Node.create('<div class="wrapper">'+this.get("strings.placeholder")+"</div>")),this.get("show-download")==="true"&&this.get("url")&&this._createDownloadLink(this.get("url")).then((function(B){var N=e.Xi(B,"download","true");this._renderDownloadLink(N)}).bind(this)),y.one(".progress-inner").setStyle("width","0px");var I=this._volumeNode=y.one(".volume");if(!I)throw new Error(this.name+": No div.volume in template.");for(var D=this.get("volumeLevels"),T=D;T>0;T--)I.prepend('<div class="bar level-"'+T+'" data-volume-level="'+T+'"></div>');y.one(".duration").setContent(this.get("strings.durationPlaceHolder"))},bindUI:function(){var y=this.get("id"),C=this.get("boundingBox");C.one(".controls").on("keydown",function(A){var I=A.keyCode===13,D=A.keyCode===32;(I||D)&&!this.get("disabled")&&(A.halt(),this._onControlsButtonClick())},this),C.on(y+"|click",this._onClick,this),this.after(y+"|volumeChange",function(A){this._setVolume(A.newVal)},this),this.after(y+"|playStateChange",this._uiUpdateWrapperClass,this),this.after(y+"|readyStateChange",this._afterReadyStateChange,this),this.after(y+"|disabledChange",function(A){var I=A.newVal;I&&this.stop()},this),v.on(y+"|audioPlayer:stopAll",function(A){var I=A?A.container:null;I&&v.Lang.isString(I)&&(I=v.one(I)),(!A||!A.hasOwnProperty("container")||I instanceof v.Node&&I.contains(this.get("boundingBox")))&&this.stop()},this),this._deregisterKeyboardScrubber=(0,n.Z)({element:this.get("boundingBox").one(".progress"),getDuration:(function(){return this._audio.duration}).bind(this),getPosition:(function(){return this._audio.position}).bind(this),isPlaying:(function(){return this.get("playState")===this.getProperty("PLAY_STATES").PLAYING}).bind(this),play:this.play.bind(this),pause:this.pause.bind(this),setPosition:(function(A){this.seek(A/this._audio.duration*100)}).bind(this)});var O=this.get("boundingBox").one(".volume");O.on("keydown",function(A){var I;if(p(A)||_(A))I=-1;else if(m(A)||f(A))I=1;else return;A.preventDefault();var D=this._getVolumeLevel(),T=u()(D+I,0,this.get("volumeLevels"));this._setVolumeLevel(T)},this)},syncUI:function(){this._uiUpdateWrapperClass(),this._uiUpdateVolumeLevel();var y=this.get("boundingBox");y.ancestor(".sqs-editing")&&(o.Z.player.pause(),this.pause()),y.toggleClass("tiny",y.get("offsetWidth")<300)},play:function(){var y=this.getProperty("PLAY_STATES");o.Z.player.setVolume(this.get("volume")/100),this._audio?this.get("playState")!==y.PLAYING&&this._audio.play():(this._registerTrack(),this._audio.play()),this._set("playState",y.PLAYING)},pause:function(){this._audio&&this._audio.pause()},stop:function(){var y=this.get("playState"),C=this.getProperty("PLAY_STATES");y===C.PLAYING&&this._audio&&this._audio.pause()},seek:function(y){if(y>100||y<0){console.warn(this.name+": seek() - Percentage between 0-100 required.");return}this._audio||(this._registerTrack(),this.play()),this._audio.seek(this._audio.duration*(y/100))},setVolume:function(y){this.set("volume",y)},_setVolume:function(y){this._audio&&o.Z.player.setVolume(y/100),this._set("volume",y),this._uiUpdateVolumeLevel()},_setVolumeLevel:function(y){this._setVolume(Math.round(y/this.get("volumeLevels")*100))},_registerTrack:function(){if(!this._audio){var y=this.get("boundingBox"),C=this.get("fixedUrl");if(y.addClass("loading"),!C){this._showError((0,l.t)("No URL provided.",null,{project:"scripts-v6-root"}));return}return this._audio=o.Z.createTrack(C),this._audio.on("pause",v.bind(this._onPause,this)),this._audio.on("ended",v.bind(this._onStop,this)),this._audio.on("inactive",v.bind(this._onPause,this)),this._audio.on("positionChange",v.bind(this._onWhilePlaying,this)),this._audio.on("ready",v.bind(this._onLoad,this)),!!this._audio}return!1},_getVolumeLevel:function(){var y=this.get("volumeLevels"),C=this.get("volume");return Math.round(C/100*y)},_uiUpdateVolumeLevel:function(){var y=this._volumeNode.get("children"),C=this._getVolumeLevel();y.each(function(O){var A=parseInt(O.getAttribute("data-volume-level"),10);A<=C?O.addClass("active"):O.removeClass("active")},this)},_uiUpdateWrapperClass:function(){var y=this.getProperty("READY_STATES"),C=this.getProperty("PLAY_STATES"),O=this.get("boundingBox"),A=O.getAttribute("class").split(" "),I;for(I in C)A.remove("play-state-"+C[I]);for(I in y)A.remove("ready-state-"+y[I]);O.addClass("ready-state-"+this.get("readyState")),O.setAttribute("class",A.join(" ")).addClass("play-state-"+this.get("playState")).addClass("ready-state-"+this.get("readyState"))},_createDownloadLink:function(y){return y.includes("https://audio-origin.dev.squarespace.net")||y.includes("https://audio.squarespace-cdn.com")?(0,s.N)(y):Promise.resolve(y)},_renderDownloadLink:function(y){var C=this.get("boundingBox"),O='<div class="download"><a href="'+y+'" target="_blank">'+this.get("strings.download")+"</a></div>";this.get("contentBox").append(O),C.addClass("download")},_onClick:function(y){if(v.UA.ios){this._createDownloadLink(this.get("url")).then(function(O){window.location.href=O});return}if(!y.target.ancestor().hasClass("download")&&(y.halt(),y.stopImmediatePropagation(),!this.get("disabled")&&!y.target.hasClass("duration"))){if(y.target.ancestor(".volume")){this._setVolumeLevel(parseInt(y.target.getAttribute("data-volume-level"),10));return}if(y.target.ancestor(".placeholder",!0)){this.play();return}y.target.ancestor(".controls",!0)&&this._onControlsButtonClick();var C=this.get("boundingBox").one(".progress").get("region");y.pageX>=C.left&&y.pageX<=C.right&&this.seek((y.pageX-C.left)/C.width*100)}},_onControlsButtonClick:function(){var y=this.get("playState"),C=this.getProperty("PLAY_STATES");switch(y){case C.PLAYING:this.pause();return;case C.PAUSED:case C.STOPPED:this.play();return;default:}},_afterReadyStateChange:function(y){var C=this.getProperty("READY_STATES"),O=this.get("readyState"),A=this.get("strings"),I=!1;switch(O){case C.INITIALIZED:this.enable();break;case C.FLASH_BLOCKED:I=A.soundManagerFlashFail;break;case C.SECURITY_ERROR:I=A.soundManagerSecurityFail,this._reportAudioError(C.SECURITY_ERROR);break;case C.SOUND_LOAD_FAILED:I=A.soundManagerURLFail,this._reportAudioError(C.SOUND_LOAD_FAILED);break;case C.SOUND_LOADED:break;default:console.warn(this.name+": Invalid ready state ("+O+").");break}I&&(this._showError(I),this.disable()),this._uiUpdateWrapperClass()},_reportAudioError:function(y){try{var C=this.get("url");C.indexOf("assets.squarespace.com")>0&&(0,r.Z)("system_audio_play_error",{readyState:this.get("readyState"),url:C})}catch{}},_getPlaytimeString:function(y){if(!this._audio)return this.get("strings.durationPlaceHolder");var C="0:00",O="0:00";return C=this._getMinSecString(this._audio.duration),y&&(O=this._getMinSecString(y)),O+" / "+C},_getMinSecString:function(y){return(0,d.Z)(y*1e3)},_showError:function(y){this.get("boundingBox").addClass("error"),this.get("boundingBox").one(".placeholder").setContent("Error: "+y)},_onWhilePlaying:function(y){if(!this.get("destroyed")){var C=this.get("boundingBox");C.one(".duration").setContent(this._getPlaytimeString(y.position));var O=this.getProperty("READY_STATES");this.get("readyState")!==O.SOUND_LOADED&&this._set("readyState",O.SOUND_LOADED);var A=C.one(".progress-inner"),I=y.position/this._audio.duration*100;C.removeClass("loading"),A&&A.setStyle("width",I+"%")}},_onStop:function(){this._set("playState",this.getProperty("PLAY_STATES").STOPPED)},_onPause:function(){this._set("playState",this.getProperty("PLAY_STATES").PAUSED)},_onDataError:function(){this.stop(),this._set("playState",this.getProperty("PLAY_STATES").STOPPED)},_onLoad:function(y){y||(this._loadFailTimer=v.later(1e4,this,function(){this.stop(),this._set("readyState",this.getProperty("READY_STATES").SOUND_LOAD_FAILED)}))}},{CSS_PREFIX:"sqs-audio-player",PLAY_STATES:{PLAYING:"playing",PAUSED:"paused",STOPPED:"stopped"},READY_STATES:{INITIALIZED:"initialized",FLASH_BLOCKED:"flash-blocked",SECURITY_ERROR:"security-error",SOUND_LOAD_FAILED:"sound-load-failed",SOUND_LOADED:"sound-loaded"},TEMPLATE:'<div class="controls" tabindex="0"></div><div class="placeholder"></div><div class="progress" tabindex="0"><div class="progress-inner"><div class="scrubber"></div></div></div><div class="duration"></div><div class="volume" tabindex="0"></div>',ATTRS:{strings:{value:{placeholder:(0,l.t)("Click to play\u2026",null,{project:"scripts-v6-root"}),download:(0,l.t)("Download",null,{project:"scripts-v6-root"}),durationPlaceHolder:"0:00 / 0:00",loadFail:(0,l.t)("Unable to load sound at the URL",null,{project:"scripts-v6-root"}),soundManagerFlashFail:(0,l.t)("Sorry, could not load because flash is blocked.",null,{project:"scripts-v6-root"}),soundManagerSecurityFail:(0,l.t)("Sorry, there was a JavaScript security error.",null,{project:"scripts-v6-root"}),soundManagerURLFail:(0,l.t)("Unable to access audio stream.",null,{project:"scripts-v6-root"})}},fixedUrl:{getter:function(){var y=this.get("url");return y&&y.indexOf(Static.SQUARESPACE_CONTEXT.appDomain)>0&&(y=y.replace(/^(http:\/\/|https:\/\/|\/\/)/i,window.location.protocol+"//")),y},readOnly:!0},playState:{lazyAdd:!1,valueFn:function(){return this.getProperty("PLAY_STATES").STOPPED},readOnly:!0},readyState:{lazyAdd:!1,valueFn:function(){return this.getProperty("READY_STATES").INITIALIZED},readOnly:!0},url:{value:null},volume:{validator:function(y){return(y<0||y>100&&!1)&&console.warn(this.name+": Volume must be between 0 and 100, volume remains unchanged."),!0},value:66},volumeLevels:{value:6,writeOnce:"initOnly"},stopOthersOnPlay:{value:!0},render:{value:!0}}}),S=[];v.Squarespace.Widgets.AudioPlayer.initializeNode=function(y){if(!(y.get("children").size()>0)&&!v.Widget.getByNode(y.one("."+v.Squarespace.Widgets.AudioPlayer.CSS_PREFIX))){var C=v.Object.getValue(y.getData(),"design-style")||"minimal",O;switch(C){case"legacy":O=new v.Squarespace.Widgets.AudioPlayer({render:y});break;default:O=new v.Squarespace.Widgets.AudioPlayerMinimal({render:y})}S.push(O)}},v.config.win.Squarespace.onInitialize(v,function(){v.all(".sqs-audio-embed").each(v.Squarespace.Widgets.AudioPlayer.initializeNode)}),v.config.win.Squarespace.onDestroy(v,function(){S.forEach(function(y){y.destroy()}),S.length=0})},"1.0",{requires:["base","event","node","squarespace-album-player","squarespace-ss-widget","squarespace-util","squarespace-widgets-audio-player"]})},484989:function(){YUI.add("squarespace-beforeunload",function(c){var b="gallery-dom0beforeunload",t=c.config.win.onbeforeunload;c.config.win.onbeforeunload=function(l){var d=l||c.config.win.event;t&&t(d);var o=new c.DOMEventFacade(d),e;if(c.fire(b,o),e=o.returnValue,e)return d.returnValue=e,e;c.config.win.onbeforeunload=t},c.Env.evt.plugins.beforeunload={on:function(l,d){var o=c.Array(arguments,0,!0);return o[0]=b,c.on.apply(c,o)}}},"1.0",{requires:[]})},363271:function(c,b,t){"use strict";var l=t(210750),d=t.n(l),o=t(553772),e=t(337061),a=t(938077),r=t(229805),s=t(896093);YUI.add("squarespace-block-content-html-editor-base",function(n){n.namespace("Squarespace.Content"),n.Squarespace.Content.HtmlEditorBase=n.Base.create("contentHtmlEditorBase",n.SQS.LayoutEngine.BlockContent.HtmlEditorBase,[n.Squarespace.Mixins.EventRegistrar],{initializer:function(){this._debouncedSetData=d()(this.setData.bind(this),50),this._scaleTextInNode=this._scaleTextInNode.bind(this),this._rescaleTextContainers=this._rescaleTextContainers.bind(this),this._detatchEditingSectionAreaListener=(0,e.gH)(a.fPO,this._rescaleTextContainers),this._detatchFrameModeListener=(0,e.gH)(a.aEP,this._rescaleTextContainers)},_scaleTextInNode:function(){var i=this.get("host").get("boundingBox"),u=i._node;if(u){var h=i._node.querySelectorAll(".sqsrte-scaled-text-container");h.forEach(function(g){(0,s.Z)(g)})}},_rescaleTextContainers:function(){window.clearTimeout(this._scaleTextTimeout),this._scaleTextTimeout=window.setTimeout(this._scaleTextInNode,0)},setData:function(i){!this.get("destroyed")&&this.visualEditor&&this.visualEditor.setData(i)},destructor:function(){var i=this.get("host").get("contentBox");this._debouncedSetData.cancel(),i.detachAll(),this._detatchEditingSectionAreaListener&&this._detatchEditingSectionAreaListener(),this._detatchFrameModeListener&&this._detatchFrameModeListener()},beforeLayoutDrag:function(){this.get("host").blur(),this.block.blur(),this.hideEditor()},afterLayoutDrag:function(){n.soon(this.showEditor.bind(this))},hideEditor:function(){var i=this.get("host"),u=i.get("contentBox");if(this.visualEditor){var h=this.visualEditor.getNode();this.blurTextEditors(),u.setHTML(h.innerHTML),u.inDoc(u.get("ownerDocument"))||h.parentElement.insertBefore(u.getDOMNode(),h),h.style.display="none",h.style.visibility="hidden",h.classList.remove("sqs-html-content")}},showEditor:function(){if(this.visualEditor){var i=this.get("host"),u=i.get("contentBox");u.inDoc(u.get("ownerDocument"))&&u.get("parentElement").removeChild(u);var h=this.visualEditor.getNode();h.style.display="",h.style.visibility="",h.classList.add("sqs-html-content")}},getEditorType:function(){var i=this.get("host"),u=i.get("type");return o.rg[u.toUpperCase()]||o.rg.CLASSIC},getSchema:function(){return(0,r.$Q)({editorType:this.getEditorType(),blockTypeName:this.getBlockTypeName()})},getBlockTypeName:function(){var i="";try{i=this.block.get("blockTypeName")}catch{}return i},getCommands:function(){var i=this.get("host"),u=i&&i.get("commands")||{},h=Object.assign({removeBlock:this.handleRemoveBlockRequest.bind(this)},u);return h},_sanitizeOldAlignClasses:function(){var i=!1,u=this.get("host").get("contentBox");u.all('[class*="text-align-"]').each(function(h){var g=h.get("className").split(/\s+/),p=n.Array.find(g,function(m){return m.indexOf("text-align-")===0});if(p){var f=p.replace("text-align-","");o.Sg.indexOf(f)>-1&&(i=!0,h.setStyle("textAlign",f))}}),i&&this.get("host").get("model").set("html",u.getHTML(),{silent:!0})},syncTextEditorsEditable:function(){if(this.visualEditor){var i=this.block.get("editable"),u=(0,a.Ouw)((0,e.d6)())===this.block.get("id"),h=i&&u;this.visualEditor.setEditable(h)}},blurTextEditors:function(){this.visualEditor&&this.visualEditor.blur()},_afterBlur:function(){this._save(),this._fireContentUpdate(),this.blurTextEditors()},_getVisualEditorData:function(){if(this.visualEditor)return this.visualEditor.isEmpty()?"":this.visualEditor.getData(!0)},_giveEditorFocus:function(i){if(this.visualEditor)return this.visualEditor.focus(i?{left:i.pageX,top:i.pageY}:null)},_destroyVisualEditor:function(){n.Lang.isValue(this.visualEditor)&&(this.visualEditor.destroy(),this.visualEditor=null)}},{NS:"contentEditor"})},"2.0",{requires:["base","@sqs/layout-engine/block-content-html-editor-base","squarespace-mixins-event-registrar"]})},884282:function(c,b,t){"use strict";var l=t(553772),d=t(583010),o=t(916661),e=t(175424),a=t(614649),r=t(764916),s=t(436715),n=t(337061),i=t(938077),u=t(897820);YUI.add("squarespace-block-content-html-editor",function(h){h.namespace("Squarespace.Content"),h.Squarespace.Content.HtmlEditor=h.Base.create("contentHtmlEditor",h.Squarespace.Content.HtmlEditorBase,[],{syncEditorUI:function(g,p){var f=p?p.immediate:!1,m=this.get("host").get("contentBox"),_=typeof g=="string"?g:m.getHTML();f?(this._debouncedSetData.cancel(),this.setData(_)):this._debouncedSetData(_),typeof g=="string"&&m.setHTML(g)},initEngine:function(g){var p=this.get("host"),f=p.get("contentBox"),m=this.getEditorType(),_=this.getCommands(),v=this.getBlockTypeName(),E=this.getSchema(),S=this.getEditorMenuItems(),y={MenuConstructor:h.Squarespace.Singletons.TextEditorToolbar,blockModel:p.get("model"),blockTypeName:v,blockWidget:g,commands:_,editable:p.get("editable"),initialData:f,isInline:p.get("isInline"),isLinkable:p.get("isLinkable"),menuItems:S,placeholder:p.get("placeholderText"),render:!0,replaceNode:f,schema:E,type:m,contentNode:p.get("boundingBox")};this._sanitizeOldAlignClasses(),this.visualEditor=new h.Squarespace.TextEditor(y),this.bindEditorEvents(),this.showEditor()},getEditorMenuItems:function(){var g=this.get("host"),p=this.getEditorType(),f=l.lg[p].align;if(o.Z.isSevenOne()){var m=!1,_=!1;try{m=this.getBlockTypeName()==="IMAGE"}catch{}if(m)try{_=g.get("srcNode").hasClass("image-caption")}catch{}m&&!_&&(f=!1)}var v=g.get("contentBox"),E=v.getDOMNode().ownerDocument,S=E.defaultView&&(0,e.nO)(E.defaultView),y={align:f,isInFrame:S,link:g.get("isLinkable")},C=this.block?this.block.get("toolbarOptions"):{},O=g.get("toolbarOptions")||{};return y=Object.assign(y,C,O),a.kk(y,{themeData:(0,r.G)(this.block.get("contentBox").getDOMNode()),type:p})},dispatchRteEditorOpened:function(){var g=u.D7,p=this.get("host").get("id");(0,n.GE)(g(p))},closeBlockSchemaEditor:function(){var g=this.block;g&&g.blockEditor&&(0,i.KzS)((0,n.d6)())&&g.blockEditor.closeEditor()},bindEditorEvents:function(){this.visualEditor.on("mouseDown",function(f){var m=f.details[0];h.SQS.LayoutEngine.Singletons.BlockFocusHandler.handleRteMousedown(m,this.block,this.visualEditor)},this),this.visualEditor.on("showRteToolbarTextBlockChange",function(f){this.showRteToolbar()},this),this.visualEditor.on("isVisible",function(f){this.closeBlockSchemaEditor(),!(0,i.m1X)((0,n.d6)())&&this.getBlockTypeName()!=="BUTTON"&&this.dispatchRteEditorOpened()},this),this.visualEditor.on("stateUpdated",function(f){this.block&&f&&f.isInitialRender!==!0&&this.block.fire("block:renderedAfterDataChange")},this),this.visualEditor.on("contentUpdated",function(f){this.visualEditor.isEmpty()?this._save(""):this._save(f.content),this._fireContentUpdate()},this),this.afterHostEvent("editableChange",this.syncTextEditorsEditable,this),this._registerEvent({detach:(0,n.gH)(i.Ouw,this.syncTextEditorsEditable.bind(this))});var g=this.get("host"),p=g&&g.get("afterBindEditorEvents");p&&p.call(this)},refreshRteToolbar:function(){this.visualEditor.refreshToolbar()},focusRte:function(){this.visualEditor.focusRte()},showRteToolbar:function(){this.refreshRteToolbar(),this.focusRte(),this.dispatchRteEditorOpened()},scrollAndFocusRte:function(){this.visualEditor.scrollRteIntoView(),this.visualEditor.focusRte()},handleRemoveBlockRequest:function(){var g=this.get("host"),p=g&&g.get("toolbarOptions");!p||!p.removeBlock||(0,d.Z)({onConfirm:(function(){var f=this.block.get("boundingBox");(0,s.yR)(f.getDOMNode())&&this.visualEditor.destroy();var m=!0;this.block.removeBlock(m)}).bind(this)})}},{NS:"contentEditor"})},"2.0",{requires:["base","@sqs/layout-engine/layout-block-focus-handler","squarespace-block-content-html-editor-base","squarespace-text-editor","squarespace-text-editor-toolbar"]})},812588:function(c,b,t){"use strict";var l=t(311064),d=t.n(l),o=t(948265),e=t.n(o),a=t(854129),r=t.n(a),s=t(347560),n=t(480433),i=t.n(n),u=t(979825),h=t(704761);const g=E=>{let{distance:S,imgSize:y,containerSize:C,startFocal:O}=E;const A=C-y;if(A>=0)return O;const D=(A*O+S)/A;return Math.max(Math.min(D,1),0)};function p(){typeof window.dispatchEvent=="function"&&typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("userTiming"))}var f=t(413019),m=t(69637),_=t(723796),v=_.Em.createLogger("block-content/image-editor","orange",!1);YUI.add("squarespace-block-content-image-editor",function(E){var S=E.UA.mobile?"dbltap":"dblclick",y="image-upload-",C={FILE:0,GETTY:r().GETTY,UNSPLASH:r().UNSPLASH},O=d()(C);E.namespace("Squarespace.Content.Image"),E.Squarespace.Content.Image.Editor=E.Base.create("ImageEditor",E.SQS.LayoutEngine.BlockContent.ImageEditorBase,[],{initializer:function(){var I=this.get("host");this._bb=I.get("boundingBox"),this._cb=I.get("contentBox"),this._model=I.get("model"),this.bbListener=this._bb.on(S,this.onBoundingBoxDoubleClick,this),this.after("editingChange",this.afterEditingChange,this),this.modelListeners=[],this.modelListeners.push(this._model.after(["completedChange","processingChange"],this.renderState,this),this._model.after(["stretchChange","dimensionsChange"],this.renderOverlay,this),this._model.after("imageIdChange",this.afterImageIdChange,this)),this.actionListener=new(i())(s.Z),this.actionListener.addActionListener(u.Z.COMPLETE,this.onJobComplete.bind(this)),this._isPerformanceSupported()&&(E.Global.on("dialogFileImage:uploadStart",(function(){this._model&&!this._model.get("imageId")&&(this.set("trackingStartMark","start-"+y+this._model.get("clientId")),(0,f.B1)(this.get("trackingStartMark"),{tracer:m.Z}))}).bind(this)),this._model.on("processingChange",this.onProcessingChange,this),this.on("trackingInProgressChange",this.onTrackingInProgressChange,this))},destructor:function(){this.destroyUploader(),this.bbListener&&this.bbListener.detach(S,this.onBoundingBoxDoubleClick,this),this.modelListeners.forEach(function(I){I.detach()})},destroyUploader:function(){this.uploader&&this.uploader.destroy(),this.uploader=null,this.get("host").destroyUploader()},onBoundingBoxDoubleClick:function(){var A=E.Lang.isValue(this._model.get("imageId"));if(A){var I=this._model.get("processing");I||this.set("editing",!0)}},afterImageIdChange:function(A){A.newVal!==null?(this.get("trackingInProgress")||this.set("trackingInProgress",!0),u.Z.monitor([A.newVal])):this.clearTrackingState()},onJobComplete:function(A){if(this._model){var I=this._model.get("imageId"),D=E.Array.find(A,function(x){return x===I});if(this.get("trackingInProgress"))for(var T=0;T<A.length;++T){var B=h.Z.getJobById(A[T]),N=B&&B.data&&B.data.contentItemId,P=B&&B.data&&B.data.processorConfig;if(I===N&&P){this.set("trackingJobProcessor",P);break}}D&&this._model.loadImageData()}},onProcessingChange:function(A){A.newVal!==A.prevVal&&(A.newVal&&!this.get("trackingInProgress")&&this.set("trackingInProgress",!0),this.get("trackingInProgress")&&(A.newVal?this.set("trackingWasProcessed",!0):A.newVal===!1&&this.set("trackingInProgress",!1)))},onTrackingInProgressChange:function(A){A.newVal!==A.prevVal&&(A.newVal&&!this.get("trackingStartMark")?(this.set("trackingStartMark","start-"+y+this._model.get("clientId")),(0,f.B1)(this.get("trackingStartMark"),{tracer:m.Z})):!A.newVal&&A.prevVal&&this.get("trackingStartMark")&&(this.set("trackingEndMark","end-"+y+this._model.get("clientId")),(0,f.B1)(this.get("trackingEndMark"),{tracer:m.Z}),this._createUploadMeasureName().then((function(I){(0,f.L8)(I,{start:this.get("trackingStartMark"),end:this.get("trackingEndMark")}),this.clearTrackingState(),p()}).bind(this)).catch((function(){this.clearTrackingState()}).bind(this))))},syncUploadUI:function(){if(this._model){if(this._model.get("imageId")||this.removeImageOverlay(),!this._model.isEmpty()){var A=this;setTimeout(function(){A.destroyUploader(),A.get("host").render()},1e3);return}this.get("host").createUploader()}},addPlaceholder:function(A){return this._cb},createImageProcessingJob:function(A,I){if(!I.job)return console.warn("[image-editor] response.job missing, not creating aux job",I),null;var D=E.merge(I.job,{started:!0}),T=new E.Squarespace.ImageProcessingJob(D);return this.uploadProgress({completed:1,itemRepresentation:I.media[0]}),T},jobComplete:function(A,I){var D=E.bind(function(){this.jobUpdate({status:I.get("status"),data:I.get("data")})},this);I.get("status")===e().SUCCESS?this._model.loadImageData().then(D):D()},processFile:function(A){if(A.invalid){this.alertInvalidFiledata();return}A.postData={process:!0,contentType:"image"}},alertInvalidFiledata:function(A){var I=A.invalid[0],D=I.title,T=I.message;this.get("strings.invalidDrop")&&(D=this.get("strings.invalidDrop.title"),T=this.get("strings.invalidDrop.message")),new E.Squarespace.Widgets.Alert({position:E.Squarespace.Widgets.Alert.ANCHOR.ELEMENT,anchor:this.get("contentBox"),"strings.title":D,"strings.message":T})},renderState:function(){if(this._cb.getDOMNode()){var I=this._model.get("completed");if(E.Lang.isValue(I)&&I<1){this.setUploadingState();return}var D=E.Lang.isValue(this.get("host").get("parent"));if(this._model.get("processing")&&D){this.setProcessingState();return}this.clearProcessingState()}},clearModel:function(){this._model.setAttrs({completed:null,processing:!1,baseAssetUrl:"",imageId:null,isBase64:!1})},clearProcessingState:function(){v("imageEditor cleanProcessingState"),this._cb.getDOMNode()&&(this.clearProgressBar(),this.clearProcessingSpinner(),this.unbindProgressCancellation(),this._cb.removeClass(this.get("host").getClassName("processing")))},clearTrackingState:function(){this._isPerformanceSupported()&&this.setAttrs({trackingStartMark:null,trackingEndMark:null,trackingWasProcessed:!1,trackingInProgress:!1,trackingJobProcessor:"legacy"})},unbindProgressCancellation:function(){this._progressCancel&&this._progressCancel.detach(),this._progressCancel=null},setUploadingState:function(){var A=this._model.get("completed")*100;v("imageEditor uploading",{completion:A});var I=this._cb.plug(E.Squarespace.Plugin.ProgressBar,{progress:A})[E.Squarespace.Plugin.ProgressBar.NS];this.unbindProgressCancellation(),this._progressCancel=I.on("cancel",this.unbindProgressCancellation,this),this._cb.addClass(this.get("host").getClassName("processing"))},clearProgressBar:function(){this._cb.hasPlugin(E.Squarespace.Plugin.ProgressBar.NS)&&this._cb.unplug(E.Squarespace.Plugin.ProgressBar)},clearProcessingSpinner:function(){this._cb.hasPlugin(E.Squarespace.Plugin.ProgressSpinner.NS)&&this._cb.unplug(E.Squarespace.Plugin.ProgressSpinner)},setProcessingState:function(){v("imageEditor setProcessingState"),this.clearProcessingState(),this._cb.addClass(this.get("host").getClassName("processing")),this._cb.plug(E.Squarespace.Plugin.ProgressSpinner),this._progressCancel=this._cb.one(".cancel-process").on("click",this.onCancelProcessingClick,this)},onCancelProcessingClick:function(A){A.halt(),this.clearModel(),this.clearProcessingState(),this.clearTrackingState()},afterEditingChange:function(A){if(this._model.get("imageId")){var I=this.get("editing");if(I){this.enableOverlay();return}this.disableOverlay()}},destroyOverlay:function(){this.overlay&&this.overlay.destroy(),this.overlay=null},enableOverlay:function(){if(this._model.get("designLayout")==="inline"){if(this.overlay&&E.Lang.isValue(this.get("host").imgNode)){var A=this.overlay.get("contentBox").one("img").getAttribute("src"),I=this.get("host").imgNode.getAttribute("src");A!==I&&this.destroyOverlay()}this.overlay||this.createOverlay(),this.overlay.get("boundingBox").setStyles({position:"absolute",opacity:1}),this.overlay.show(),this.renderOverlay()}this._bb.on("clickoutside",this.onBoundingBoxOutsideClick,this),this.mousedown=this._bb.on("mousedown",this._imgDragMousedown,this)},disableOverlay:function(){this._bb.detach("clickoutside"),this.mousedown&&this.mousedown.detach(),this.imgDragMove&&this.imgDragMove.detach(),this.imgDragUpInnerFrame&&this.imgDragUpInnerFrame.detach(),this.imgDragUpOuterFrame&&this.imgDragUpOuterFrame.detach(),this.set("positioning",!1),this.hideOverlay()},renderOverlay:function(){if(this.overlay){var I=this.overlay.get("align.node").get("region");v("imageEditor renderOverlay",{alignNodeRegion:I}),this.overlay.setAttrs({height:I.height,width:I.width}),this.overlay.align()}},onBoundingBoxOutsideClick:function(A){this.get("editing")!==!1&&!A.target.ancestor(".dialog-editor-block-image",!0)&&this.set("editing",!1)},hideOverlay:function(A){this.overlay&&this.overlay.hide()},createOverlay:function(){var A=this._model.get("designLayout")==="inline",I=this.overlay;if(!(!A||I)){var D=E.Node.create('<img class="sqs-image-overlay">');D.setAttribute("src",this.get("host").imgNode.getAttribute("src")),D.setStyles({height:"100%",width:"100%",opacity:.2}),this.overlay=new E.Overlay({bodyContent:D,zIndex:1,align:{node:this.get("host").imgNode,points:["cc","cc"]}}),this.get("host").imgNode.on("load",this.renderOverlay,this),this.overlay.on("visibleChange",this.renderOverlay,this),this.afterOverlayFocalPointChange=this._model.after("focalPointChange",this.renderOverlay,this),this.overlay.get("boundingBox").addClass("sqs-imageoverlay"),this.overlay.get("bodyContent").setStyle("height",null);var T=this._bb.ancestor(".sqs-block");T||(T="body"),this.overlay.render(T),this.overlay.hide()}},removeImageOverlay:function(){this.afterOverlayFocalPointChange&&this.afterOverlayFocalPointChange.detach(),this.destroyOverlay()},_imgDragMousedown:function(I){if(this.get("editing")&&!this._model.isEmpty()){E.DD.DDM.stopDrag(),I.halt(),this.startX=I.pageX,this.startY=I.pageY,this.startFocal=this._model.get("focalPoint").split(","),this.bbR=this.get("host").get("boundingBox").get("region"),this.imgR=this.get("host").imgNode.get("region"),this.imgDragMove&&this.imgDragMove.detach(),this.imgDragUpInnerFrame&&this.imgDragUpInnerFrame.detach(),this.imgDragUpOuterFrame&&this.imgDragUpOuterFrame.detach();var D=this.get("id"),T=E.one(E.config.win);this.imgDragMove=T.on([D+"|mousemove",D+"|touchmove"],this._imgDragDrag,this),this.imgDragUpInnerFrame=T.on([D+"|mouseup",D+"|touchend"],this._imgDragEnd,this),this.imgDragUpOuterFrame=T.on([D+"|mouseup",D+"|touchend"],this._imgDragEnd,this),this.set("positioning",!0)}},_imgDragDrag:function(I){var D=this.imgR,T=this.bbR,B=I.pageX-this.startX,N=I.pageY-this.startY,P=parseFloat(this.startFocal[0]),x=parseFloat(this.startFocal[1]),R=g({distance:B,imgSize:D.width,containerSize:T.width,startFocal:P}),w=g({distance:N,imgSize:D.height,containerSize:T.height,startFocal:x});this._model.set("focalPoint",R+","+w)},_imgDragEnd:function(I){this.imgDragMove&&this.imgDragMove.detach(),this.imgDragUpInnerFrame&&this.imgDragUpInnerFrame.detach(),this.imgDragUpOuterFrame&&this.imgDragUpOuterFrame.detach(),this.set("positioning",!1),this._model.saveFocalPoint()},_createUploadMeasureName:function(){return E.Squarespace.Promises.create((function(A,I){var D=this._model.get("licensedAssetId"),T=this._model.get("licensedAssetPreview"),B=this.get("trackingJobProcessor"),N=y;this.get("trackingWasProcessed")?N+=B+"-":N+="imported-",D?E.Squarespace.LicensedAssets.Manager.getById(D).then(function(P){A(N+O[P.source].toLowerCase())}).catch(I):A(T?N+O[C.GETTY].toLowerCase():N+O[C.FILE].toLowerCase())}).bind(this))},_isPerformanceSupported:function(){var A=window.Y.config.win.performance;return A&&A.mark&&A.measure&&A.clearMarks}},{NS:"contentEditor",ATTRS:{trackingWasProcessed:{value:!1,validator:E.Squarespace.AttrValidators.isBoolean},trackingInProgress:{value:!1,validator:E.Squarespace.AttrValidators.isBoolean},trackingStartMark:{value:null,validator:E.Squarespace.AttrValidators.isNullOrString},trackingEndMark:{value:null,validator:E.Squarespace.AttrValidators.isNullOrString},trackingJobProcessor:{value:"legacy",validator:E.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["node","base","overlay","anim","event-touch","event-tap","dd-delegate","@sqs/layout-engine/block-content-image-editor-base","squarespace-plugin-progress-bar","squarespace-plugin-progress-spinner","squarespace-uploader","squarespace-jobs","squarespace-job-manager","squarespace-event-dbltap","squarespace-models-content-item","squarespace-widgets-alert","squarespace-licensed-assets-manager"]})},880626:function(c,b,t){"use strict";var l=t(552476),d=t.n(l),o=t(567465),e=t.n(o),a=t(488083),r=t.n(a),s=t(218611),n=t.n(s),i=t(745284),u=t.n(i),h=t(239075),g=t.n(h),p=t(700327),f=t.n(p),m=t(905721),_=t.n(m);function v(C,O){return{value:O,unit:C}}var E=window.Static&&window.Static.SQUARESPACE_CONTEXT?window.Static.SQUARESPACE_CONTEXT.templateVersion:"",S=E==="7",y=S?d().HEADING_THREE:d().HEADING_FOUR;YUI.add("squarespace-block-accordion-model",function(C){C.namespace("Squarespace.ContentModel.Accordion"),C.Squarespace.ContentModel.Accordion=C.Base.create("AccordionModel",C.Model,[],{},{ATTRS:{accordionItems:{value:[{title:"Accordion Item 1",description:"Description text goes here"},{title:"Accordion Item 2",description:"Description text goes here"},{title:"Accordion Item 3",description:"Description text goes here"}]},isExpandedFirstItem:{value:!1},shouldAllowMultipleOpenItems:{value:!1},accordionTitleFont:{value:y},accordionTitleAlignment:{value:e().LEFT},accordionDescriptionFont:{value:r().PARAGRAPH_TWO},accordionDescriptionAlignment:{value:n().LEFT},isDividerEnabled:{value:!0},dividerOpacity:{value:1},isFirstDividerVisible:{value:!0},isLastDividerVisible:{value:!0},dividerBorderThickness:{value:v(_().PIXEL,1)},accordionIconType:{value:u().PLUS},accordionIconPlacement:{value:g().RIGHT},accordionIconSize:{value:v(_().PIXEL,14)},accordionIconThickness:{value:v(_().PIXEL,1)},accordionItemPaddingTop:{value:v(_().PIXEL,30)},accordionItemPaddingBottom:{value:v(_().PIXEL,30)},accordionItemPaddingRight:{value:v(_().PIXEL,0)},accordionItemPaddingLeft:{value:v(_().PIXEL,0)},descriptionWidth:{value:v(_().PERCENT,70)},descriptionPaddingTop:{value:v(_().PIXEL,0)},descriptionPaddingBottom:{value:v(_().PIXEL,30)},descriptionPaddingRight:{value:v(_().PIXEL,0)},descriptionPaddingLeft:{value:v(_().PIXEL,0)},accordionDescriptionPlacement:{value:f().LEFT}}})},"1.0",{requires:["base","model"]})},6866:function(c,b,t){"use strict";var l=t(784874),d=t(337061),o=t(233232),e=t(476086),a=t(202560),r=e.d8,s=e.av,n=e.FX;YUI.add("squarespace-block-accordion",function(i){i.namespace("Squarespace.Block.Accordion"),i.Squarespace.Block.Accordion=i.Base.create("block-accordion",i.SQS.LayoutEngine.Block.ModelCsrBase,[i.Squarespace.Mixins.EventRegistrar,i.SQS.LayoutEngine.Block.MixinContainerStyles],{initializer:function(){var u=this;this._registerEvent({detach:(0,d.gH)(o.SY,function(h){var g=u.get("id"),p=(0,d.d6)().cmsEditorState.currentBlockEditorId,f=p&&p!==g;if(!f){var m=u.get("contentBox")._node;if(m){var _=m.querySelector(n);if(!_)return;r(_,h),s(_,h)}}})})},_renderSuccess:function(u){var h=u.html,g=(0,d.d6)().cmsEditorState.currentBlockDisclosureRoute;r(h,g),s(h,g),i.Squarespace.Block.Accordion.superclass._renderSuccess.call(this,u)}},{CSS_PREFIX:(0,a.u)(l.Z.ACCORDION),MODEL:i.Squarespace.ContentModel.Accordion,ATTRS:{editor:{value:i.Squarespace.Block.Editor.Schema},type:{value:l.Z.ACCORDION}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-csr-base","@sqs/layout-engine/block-mixin-container-styles","squarespace-block-accordion-model","squarespace-block-schema-editor","squarespace-mixins-event-registrar"]})},490498:function(c,b,t){"use strict";var l=t(714487),d=t(868192);function o(e){const a=/^(https?:)(\/\/)[a-zA-Z0-9][a-zA-Z0-9_\-\.]*\.[a-zA-Z]{2,24}(\/\S*)?$/i;return e.search(a)>-1}YUI.add("squarespace-block-acuity-editor",function(e){e.namespace("Squarespace.Block.Editor"),e.Squarespace.Block.Editor.Acuity=e.Base.create("acuity-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{initializer:function(){var a=this.configDialog.get("dialog");a.on("shown",this.initializeDialog,this)},initializeDialog:function(){var r=this.configDialog.get("dialog"),s=r.getField("acuityUrl");s.after("dataChange",this.sanitizeUrl,this)},sanitizeUrl:function(a){var r=a.newVal.trim();if(!o(r)){n.set("data",a.prevVal);return}var s=this.configDialog.get("dialog"),n=s.getField("acuityUrl");n.set("data",r)},_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Acuity")}}),e.namespace("Squarespace.Block.ModelEditorDialog"),e.Squarespace.Block.ModelEditorDialog.Acuity=e.Base.create("block-acuity-editor",e.Squarespace.ModelEditorDialog,[],{_getDialogConfig:function(){return{width:490,height:290,discardChangesConfirmation:!1,initialDataByReference:!0,tabs:[{title:(0,l.t)("Appointment Scheduling",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-button-16-light.png",scroll:!0,fields:[{ctor:e.Squarespace.DialogFields.HTML,config:{className:"description",content:(0,l.t)('<p>Allow visitors to book appointments and classes directly on your site with <a href="{acuityLink}" target="_blank">Acuity Scheduling</a>.</p><p>If you already use Acuity, add the link to your scheduling page, calendar, or appointment type. <a href="{kbArticleLink}" target="_blank">Learn More</a></p>',{kbArticleLink:d.ACUITY_SCHEDULER,acuityLink:"https://www.acuityscheduling.com/?utm_source=sqsp&utm_medium=referral&utm_campaign=block&kw=sqsp-block"},{project:"scripts-v6.block"})}},{ctor:e.Squarespace.DialogFields.Text,config:{name:"acuityUrl","strings.title":(0,l.t)("Acuity Scheduling Page Link",null,{project:"scripts-v6.block"}),"strings.placeholder":"https://app.acuityscheduling.com/schedule.php?owner=125982"}},{ctor:e.Squarespace.DialogFields.HTML,config:{content:(0,l.t)(`If you don't have an account, <a href="{acuitySignupLink}" target="_blank">sign up for Acuity Scheduling</a>.`,{acuitySignupLink:"https://acuityscheduling.com/signup.php?action=form&type=professional&freeTrial=1&lite=1&btn=sqsp-block&utm_source=sqsp&utm_medium=referral&utm_campaign=block&kw=sqsp-block"},{project:"scripts-v6.block"})}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig",validator:e.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-html","squarespace-dialog-slider","squarespace-dialog-text","squarespace-dialog-hidden","squarespace-model-editor"]})},514929:function(c,b,t){"use strict";var l=t(784874),d=t(210750),o=t.n(d),e=t(202560);YUI.add("squarespace-block-acuity",function(a){var r={},s=a.namespace("Squarespace.Block").Acuity=a.Base.create("block-acuity",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this._debouncedRender=o()(function(n){var i=this.get("contentBox");this._renderBlock(n),i.removeClass(s.CSS_IS_RENDERING)},this.get("contentRefreshRate"))},bindUI:function(){var n=this.get("contentBox");this._registerEvent(this.get("model").on("change",function(i){n.addClass(s.CSS_IS_RENDERING)})),this._registerEvent(this.get("model").after("change",function(i){this._debouncedRender(i)},this))},_renderSuccess:function(n){s.superclass._renderSuccess.call(this,n);var i=this.get("contentBox"),u=i.one("script");if(u){var h=u.getAttribute("src"),g=document.createElement("script");g.src=h,i.append(g)}}},{CSS_PREFIX:(0,e.u)(l.Z.ACUITY),CSS_IS_RENDERING:"is-rendering",ATTRS:{editor:{valueFn:function(){return a.Squarespace.Block.Editor.Schema}},type:{value:l.Z.ACUITY},defaultContentModel:{value:r},contentRefreshRate:{value:800}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-acuity-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},584517:function(c,b,t){"use strict";var l=t(714487),d=t(868192);YUI.add("squarespace-block-amazon-editor",function(o){o.namespace("Squarespace.Block.Editor").Amazon=o.Base.create("amazon-block-editor-dialog",o.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return o.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Amazon")}},{NS:"blockEditor",ATTRS:{}}),o.namespace("Squarespace.Block.ModelEditorDialog").Amazon=o.Base.create("blockAmazonEditor",o.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){var e=this.get("model").get("showPrice"),a={width:420,primaryTabs:[{title:(0,l.t)("Amazon Product",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-amazon-16-light.png",scroll:!1,fields:[{ctor:o.Squarespace.DialogFields.Description,text:(0,l.t)('Display and link to an item on Amazon. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:d.AMAZON_EDITOR},{project:"scripts-v6.block"})},{ctor:o.Squarespace.DialogFields.ProductChooser,name:"amazonProduct",mode:"amazon",maxResults:3,acConfig:{queryDelay:500}},{ctor:o.Squarespace.DialogFields.Select,config:{"strings.title":(0,l.t)("Alignment",null,{project:"scripts-v6.block"}),name:"alignment",description:(0,l.t)("Select alignment for this block.",null,{project:"scripts-v6.block"}),className:"thin dark",defaultValue:"left",options:[{value:"left",label:(0,l.t)("Left",null,{project:"scripts-v6.block"})},{value:"center",label:(0,l.t)("Center",null,{project:"scripts-v6.block"})},{value:"right",label:(0,l.t)("Right",null,{project:"scripts-v6.block"})}]}},{ctor:o.Squarespace.DialogFields.Check,config:{name:"showImage",strings:{title:(0,l.t)("Show Image",null,{project:"scripts-v6.block"}),description:(0,l.t)("Show a thumbnail image of this product.",null,{project:"scripts-v6.block"})}}},{ctor:o.Squarespace.DialogFields.Check,config:{name:"showTitle",strings:{title:(0,l.t)("Show Title",null,{project:"scripts-v6.block"}),description:(0,l.t)("Show the title of this product.",null,{project:"scripts-v6.block"})}}},{ctor:o.Squarespace.DialogFields.Check,config:{name:"showAuthor",strings:{title:(0,l.t)("Show Author",null,{project:"scripts-v6.block"}),description:(0,l.t)("Show the author of this product.",null,{project:"scripts-v6.block"})}}},{ctor:o.Squarespace.DialogFields.Check,$when:function(){return e},config:{name:"showPrice",strings:{title:(0,l.t)("Show Price",null,{project:"scripts-v6.block"}),description:(0,l.t)("Display the current price of this product from Amazon.",null,{project:"scripts-v6.block"})}}},{ctor:o.Squarespace.DialogFields.Check,config:{name:"showBuyButton",strings:{title:(0,l.t)("Add Buy Button",null,{project:"scripts-v6.block"}),description:(0,l.t)("Add a button below this product to buy it on Amazon.com.",null,{project:"scripts-v6.block"})}}}]}]};return a}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-product-chooser","squarespace-dialog-select"]})},40739:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-amazon",function(e){var a=e.Base.create("AmazonModel",e.Model,[],{},{ATTRS:{alignment:{value:"left"},amazonProduct:{value:null},showBuyButton:{validator:e.Lang.isBoolean,value:!1},showImage:{validator:e.Lang.isBoolean,value:!0},showTitle:{validator:e.Lang.isBoolean,value:!0},showAuthor:{validator:e.Lang.isBoolean,value:!0}}});e.namespace("Squarespace.Block").Amazon=e.Base.create("block-amazon",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:(0,o.u)(l.Z.AMAZON),MODEL:a,ATTRS:{type:{value:l.Z.AMAZON},editor:{valueFn:function(){return d.oW(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Amazon}}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-block-amazon-editor","squarespace-premium-block-mixin"]})},569818:function(){YUI.add("squarespace-block-archive-editor",function(c){c.namespace("Squarespace.Block.Editor").Archive=c.Base.create("archive-block-editor-dialog",c.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return c.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Archive")}},{NS:"blockEditor",ATTRS:{}})},"1.0",{requires:["base","squarespace-block-archive-model-editor","squarespace-damask-context-globals"]})},941891:function(c,b,t){"use strict";var l=t(714487),d=t(437951),o=t.n(d),e=t(816130),a=t.n(e),r=t(360309),s=t.n(r),n=t(958459),i=t.n(n),u=t(868192),h=t(762379),g=t(444867),p=t.n(g),f=i().MONTH;YUI.add("squarespace-block-archive-model-editor",function(m){m.namespace("Squarespace.Block.ModelEditorDialog"),m.Squarespace.Block.ModelEditorDialog.Archive=m.Base.create("ArchiveModelEditorDialog",m.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").on("ready",function(){if(this._setMultiColumnsFieldVisibility(),this._setSortAndOrderFieldVisibility(),this._setOrderAscendingFieldVisibility(),this._setShowDateFieldVisibility(),this._setDropdownTitleFieldVisibility(),this._setTextAlignmentFieldVisibility(),this._handleUndoRedoCollectionIdChanges(),h.Z.isFeatureEnabled(p().NESTED_CATEGORIES)){var _=this.get("dialog").getField("collectionId");_.after("dataChange",this._toggleGroupByCategoryOption,this)}},this),this.get("model").after("layoutChange",function(){this._setMultiColumnsFieldVisibility(),this._setOrderAscendingFieldVisibility(),this._setShowDateFieldVisibility(),this._setDropdownTitleFieldVisibility(),this._setTextAlignmentFieldVisibility()},this),this.get("model").after("groupByChange",function(){this._setSortAndOrderFieldVisibility(),this._setOrderAscendingFieldVisibility()},this)},_toggleGroupByCategoryOption:function(){var _=this.get("dialog"),v=_.getField("groupBy"),E=v.get("options"),S=E.find(function(y){return y.value===i().CATEGORY});this._userHasSelectedProductCollection()?(v.getValue()===i().CATEGORY&&v.setValue(f),S.disabled=!0):delete S.disabled,v.set("options",E)},_userHasSelectedProductCollection:function(){var _=this.get("dialog").getField("collectionId").getValue(),v=m.Squarespace.ContentCollectionCache.getById(_);return v&&m.Squarespace.ContentCollectionUtils.isProduct(v)},_setMultiColumnsFieldVisibility:function(){var _=this.get("model").get("layout"),v=_==="index"||_==="list";this.get("dialog").getField("multiColumns").set("visible",v)},_setSortAndOrderFieldVisibility:function(){var _=this.get("dialog");_.getField("authorSortBy").set("visible",this.isGroupByAuthor()),_.getField("categoryAndTagSortBy").set("visible",this.isGroupByCategory()||this.isGroupByTag());var v=this.get("model").get("collectionId")==="";_.getField("authorSortBy").get("boundingBox").toggleClass("disabled",v),_.getField("categoryAndTagSortBy").get("boundingBox").toggleClass("disabled",v)},_setOrderAscendingFieldVisibility:function(){var _=this.get("model").get("layout")==="index",v=this.isGroupByMonth()||this.isGroupByYear();this.get("dialog").getField("orderAscending").set("visible",v||_);var E=this.get("model").get("collectionId")==="";this.get("dialog").getField("orderAscending").get("boundingBox").toggleClass("disabled",E)},_setShowDateFieldVisibility:function(){var _=this.get("model").get("layout")==="index";this.get("dialog").getField("showDate").set("visible",_)},_setDropdownTitleFieldVisibility:function(){var _=this.get("model").get("layout")==="dropdown";this.get("dialog").getField("dropdownTitle").set("visible",_)},_setTextAlignmentFieldVisibility:function(){var _=this.get("model").get("layout")!=="dropdown";this.get("dialog").getField("textAlignment").set("visible",_)},isGroupByAuthor:function(){return this.get("model").get("groupBy")===i().AUTHOR},isGroupByCategory:function(){return this.get("model").get("groupBy")===i().CATEGORY},isGroupByTag:function(){return this.get("model").get("groupBy")===i().TAG},isGroupByMonth:function(){return this.get("model").get("groupBy")===i().MONTH},isGroupByYear:function(){return this.get("model").get("groupBy")===i().YEAR},_handleUndoRedoCollectionIdChanges:function(){var _=this.get("dialog").getField("collectionId");_.after("dataChange",function(v){var E=m.one(".collection-wrapper[data-collection-id="+v.newVal+"]");_._checkIfCollectionIsSelected(E)},this)},_getDefaultDialogConfig:function(){var _=m.Squarespace.ObjectBuilder.makeArray([{tabTitle:(0,l.t)("Content",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-tagcloud-16-light-solid.png",scroll:!0,fields:[{ctor:m.Squarespace.DialogFields.Description,config:{text:(0,l.t)('Create an organized list of links to blog posts, gallery images, products, or events. You can choose to group links by date, category, tag, or author in the <strong>Display</strong> tab. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below: ',{helpLink:u.ARCHIVE_EDITOR},{project:"scripts-v6.block"})}},{ctor:m.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionFilter:{collectionType:[o().PRODUCTS,o().COLLECTION_TYPE_GENERIC],ordering:[a().USER,a().CHRONOLOGICAL,a().CALENDAR],folder:!1},emptyMessage:(0,l.t)("No pages yet. Go to the pages panel and click a + to add new content.",null,{project:"scripts-v6.block"})}},{ctor:m.Squarespace.DialogFields.Hidden,config:{name:"blockId"}}]},{tabTitle:(0,l.t)("Display",null,{project:"scripts-v6.block"}),scroll:!0,fields:[{ctor:m.Squarespace.DialogFields.Select,config:{"strings.title":(0,l.t)("Layout",null,{project:"scripts-v6.block"}),name:"layout",className:"thin dark",defaultValue:"index",options:[{value:"index",label:(0,l.t)("Index",null,{project:"scripts-v6.block"})},{value:"list",label:(0,l.t)("List",null,{project:"scripts-v6.block"})},{value:"dropdown",label:(0,l.t)("Dropdown",null,{project:"scripts-v6.block"})}]}},{ctor:m.Squarespace.DialogFields.Check,name:"multiColumns",config:{"strings.title":(0,l.t)("Break Into Multiple Columns",null,{project:"scripts-v6.block"})}},{ctor:m.Squarespace.DialogFields.Select,config:{"strings.title":(0,l.t)("Text Alignment",null,{project:"scripts-v6.block"}),name:"textAlignment",className:"thin dark",defaultValue:"left",options:[{value:"left",label:(0,l.t)("Left",null,{project:"scripts-v6.block"})},{value:"center",label:(0,l.t)("Center",null,{project:"scripts-v6.block"})},{value:"right",label:(0,l.t)("Right",null,{project:"scripts-v6.block"})}]}},{ctor:m.Squarespace.DialogFields.Text,config:{"strings.title":(0,l.t)("Dropdown Title",null,{project:"scripts-v6.block"}),name:"dropdownTitle",className:"thin dark",defaultValue:(0,l.t)("Archive",null,{project:"scripts-v6.block"})}},{ctor:m.Squarespace.DialogFields.Select,config:{"strings.title":(0,l.t)("Group By",null,{project:"scripts-v6.block"}),name:"groupBy",className:"thin dark",defaultValue:f,options:[{value:i().MONTH,label:(0,l.t)("Month",null,{project:"scripts-v6.block"})},{value:i().YEAR,label:(0,l.t)("Year",null,{project:"scripts-v6.block"})},{value:i().AUTHOR,label:(0,l.t)("Author",null,{project:"scripts-v6.block"})},{value:i().CATEGORY,label:(0,l.t)("Category",null,{project:"scripts-v6.block"})},{value:i().TAG,label:(0,l.t)("Tag",null,{project:"scripts-v6.block"})}]}},{ctor:m.Squarespace.DialogFields.Select,config:{"strings.title":(0,l.t)("Sort By",null,{project:"scripts-v6.block"}),name:"authorSortBy",className:"thin dark",defaultValue:s().FIRSTNAME,options:[{value:s().FIRSTNAME,label:(0,l.t)("First Name",null,{project:"scripts-v6.block"})},{value:s().LASTNAME,label:(0,l.t)("Last Name",null,{project:"scripts-v6.block"})},{value:s().COUNT,label:(0,l.t)("Count",null,{project:"scripts-v6.block"})},{value:s().ACTIVITY,label:(0,l.t)("Activity",null,{project:"scripts-v6.block"})}]}},{ctor:m.Squarespace.DialogFields.Select,config:{"strings.title":(0,l.t)("Sort By",null,{project:"scripts-v6.block"}),name:"categoryAndTagSortBy",className:"thin dark",defaultValue:s().NAME,options:[{value:s().NAME,label:(0,l.t)("Name",null,{project:"scripts-v6.block"})},{value:s().COUNT,label:(0,l.t)("Count",null,{project:"scripts-v6.block"})},{value:s().ACTIVITY,label:(0,l.t)("Activity",null,{project:"scripts-v6.block"})}]}},{ctor:m.Squarespace.DialogFields.Check,name:"orderAscending",config:{"strings.title":(0,l.t)("Sort Dates Ascending",null,{project:"scripts-v6.block"})}},{ctor:m.Squarespace.DialogFields.Check,name:"showDate",config:{"strings.title":(0,l.t)("Show Item Date",null,{project:"scripts-v6.block"})}},{ctor:m.Squarespace.DialogFields.Check,name:"showCount",config:{"strings.title":(0,l.t)("Show Group Count",null,{project:"scripts-v6.block"})}}]}]);return{title:(0,l.t)("Archive",null,{project:"scripts-v6.block"}),width:400,height:550,loadingText:(0,l.t)("Editing Archive Block\u2026",null,{project:"scripts-v6.block"}),initialDataByReference:!0,tabs:_}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:m.Lang.isObject}}})},"1.0",{requires:["base","model","squarespace-dialog-check","squarespace-dialog-content-selector","squarespace-dialog-hidden","squarespace-dialog-select","squarespace-dialog-slider","squarespace-dialog-text","squarespace-model-editor","squarespace-object-builder"]})},206065:function(c,b,t){"use strict";var l=t(714487),d=t(784874),o=t(360309),e=t.n(o),a=t(958459),r=t.n(a),s=t(936105),n=t(202560),i=t(965455);YUI.add("squarespace-block-archive",function(u){u.namespace("Squarespace.Block").Archive=u.Base.create("block-archive",u.SQS.LayoutEngine.Block.ModelSyncBase,[u.Squarespace.Block.PremiumBlockMixin],{_getDefaultContent:function(){return{collectionId:"",layout:"index",blockId:(0,i.x)(),groupBy:r().MONTH,dropdownTitle:(0,l.t)("Archive",null,{project:"scripts-v6.block"}),authorSortBy:e().FIRSTNAME,categoryAndTagSortBy:e().NAME,orderAscending:!1,showDate:!0,showCount:!1,multiColumns:!0}}},{CSS_PREFIX:(0,n.u)(d.Z.ARCHIVE),ATTRS:{editor:{valueFn:function(){return s.Lk(this.get("blockTypeName"))?u.Squarespace.Block.Editor.Schema:u.Squarespace.Block.Editor.Archive}},type:{value:d.Z.ARCHIVE},defaultContentModel:{valueFn:"_getDefaultContent"}}})},"1.0",{requires:["base","model","squarespace-block-archive-editor","squarespace-block-schema-editor","@sqs/layout-engine/block-model-sync-base","squarespace-util","squarespace-premium-block-mixin"]})},560328:function(c,b,t){"use strict";var l=t(714487),d=t(586745),o=t.n(d),e=t(629266),a=t.n(e),r=t(868192);YUI.add("squarespace-block-audio-editor",function(s){var n=352,i={FULL:"full",TRAILER:"trailer",BONUS:"bonus"},u={};u[i.FULL]=(0,l.t)("A complete episode.",null,{project:"scripts-v6.block"}),u[i.TRAILER]=(0,l.t)("A short preview of an episode.",null,{project:"scripts-v6.block"}),u[i.BONUS]=(0,l.t)("Extra content for a show.",null,{project:"scripts-v6.block"});var h={title:(0,l.t)("Audio",null,{project:"scripts-v6.block"}),initialDataByReference:!0,width:420,height:600,tabs:[{tabTitle:(0,l.t)("Embed",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-audio-16-light-solid.png",scroll:!0,fields:[{ctor:s.Squarespace.DialogFields.Description,config:{text:(0,l.t)('Add an audio player to the page for a single .mp3 file. You can upload a file from your computer or link to an externally hosted file. <a href="{url}" target="_blank">Learn more</a>',{url:r.AUDIO_BLOCK_SUPPORT},{project:"scripts-v6.block"})}},{ctor:s.Squarespace.DialogFields.MultiOption,config:{name:"file-location",className:"round icon20",ignoreChanges:!0,titleStyle:"top",options:[{icon:"importing",title:(0,l.t)("Upload File",null,{project:"scripts-v6.block"}),value:"embedded"},{icon:"gallery",title:(0,l.t)("External File",null,{project:"scripts-v6.block"}),value:"external"}]}},{ctor:s.Squarespace.DialogFields.MultiFrame,config:{name:"file-location-frame",width:n,variableHeight:!0,frames:[{name:"embedded",fields:[{ctor:s.Squarespace.DialogFields.FileAudio,config:{width:352,height:220,max:200,transientStore:!0,recordType:o().AUDIO,contentLabel:(0,l.t)("an audio track",null,{project:"scripts-v6.block"}),maxSize:160,assetConstrainMethod:"contain",contentType:"audio",name:"audioAsset",uploadUrl:"/api/uploads/audio"}}]},{name:"external",fields:[{ctor:s.Squarespace.DialogFields.Text,config:{name:"audioAssetExternalUrl",maxlength:100,className:"thin",strings:{title:(0,l.t)("Audio File URL",null,{project:"scripts-v6.block"}),placeholder:(0,l.t)("http://\u2026",null,{project:"scripts-v6.block"})}}},{ctor:s.Squarespace.DialogFields.Text,config:{name:"audioAssetLength",maxlength:100,strings:{title:(0,l.t)("File Size (In Bytes)",null,{project:"scripts-v6.block"})}}},{ctor:s.Squarespace.DialogFields.Select,config:{name:"audioAssetMimeTypeSelector",strings:{title:(0,l.t)("Audio File Mime Type",null,{project:"scripts-v6.block"})},options:[{label:(0,l.t)("audio/mpeg (.mp3)",null,{project:"scripts-v6.block"}),value:"audio/mpeg"},{label:(0,l.t)("Other",null,{project:"scripts-v6.block"}),value:""}]}},{ctor:s.Squarespace.DialogFields.Text,config:{name:"audioAssetMimeType",maxlength:100}}]}]}},{ctor:s.Squarespace.DialogFields.Text,config:{name:"title",maxLength:100,className:"thin",strings:{title:(0,l.t)("Title",null,{project:"scripts-v6.block"})}}},{ctor:s.Squarespace.DialogFields.Text,config:{name:"iTunesAuthor",maxLength:100,className:"thin",strings:{title:(0,l.t)("Author / Artist",null,{project:"scripts-v6.block"})}}}]},{tabTitle:(0,l.t)("Podcasting",null,{project:"scripts-v6.block"}),scroll:!0,fields:[{ctor:s.Squarespace.DialogFields.Description,config:{text:(0,l.t)(`These fields become tags for your podcast's RSS feed. Squarespace uses Apple Podcasts' standard format. <a href="{url}">Learn more</a>`,{url:r.PODCASTING_SUPPORT},{project:"scripts-v6.block"}),padding:[0,10]}},{ctor:s.Squarespace.DialogFields.Text,config:{name:"iTunesTitle",maxLength:300,strings:{title:(0,l.t)("Title",null,{project:"scripts-v6.block"}),description:(0,l.t)("The name of this episode.",null,{project:"scripts-v6.block"})},className:"thin"}},{ctor:s.Squarespace.DialogFields.Text,config:{name:"iTunesSubtitle",maxLength:300,strings:{title:(0,l.t)("Subtitle",null,{project:"scripts-v6.block"}),description:(0,l.t)("A brief description of this episode.",null,{project:"scripts-v6.block"})},className:"thin"}},{ctor:s.Squarespace.DialogFields.TextArea,config:{name:"iTunesSummary",maxLength:4e3,strings:{title:(0,l.t)("Summary",null,{project:"scripts-v6.block"}),description:(0,l.t)("A full description of the episode with detailed information.",null,{project:"scripts-v6.block"})},className:"thin"}},{ctor:s.Squarespace.DialogFields.Wysiwyg,config:{newRTEConfig:{placeholder:(0,l.t)("Write here\u2026",null,{project:"scripts-v6.content-item-types"}),toolbarOptions:["aiWriter","divider","bold","italic","link","clearFormatting"],toolbarProps:{isInModal:!0,shiftPadding:{top:64}},trackingProductAreaLevel2:"audio-block-episode-note",sx:{mt:2}},name:"iTunesEpisodeNote",description:(0,l.t)("A formatted description of this episode, supported by Apple Podcasts. Other podcasting platforms may display this description differently.",null,{project:"scripts-v6.block"}),strings:{title:(0,l.t)("Episode Note",null,{project:"scripts-v6.block"})},editorHeight:175}},{ctor:s.Squarespace.DialogFields.Select,config:{name:"iTunesEpisodeType",className:"thin dark",defaultValue:i.FULL,options:[{value:i.FULL,label:(0,l.t)("Full (default)",null,{project:"scripts-v6.block"})},{value:i.TRAILER,label:(0,l.t)("Trailer",null,{project:"scripts-v6.block"})},{value:i.BONUS,label:(0,l.t)("Bonus",null,{project:"scripts-v6.block"})}],strings:{title:(0,l.t)("Episode Type",null,{project:"scripts-v6.block"})}}},{ctor:s.Squarespace.DialogFields.Text,config:{name:"iTunesSeason",maxLength:300,strings:{title:(0,l.t)("Season Number",null,{project:"scripts-v6.block"}),description:(0,l.t)("Apple Podcasts only displays season numbers for podcasts with more than one season.",null,{project:"scripts-v6.block"}),validationFailMessage:(0,l.t)("Season must be greater than 0.",null,{project:"scripts-v6.block"})},className:"thin",validator:function(p){return p===""||p===null||p===void 0||parseInt(p,10)>0}}},{ctor:s.Squarespace.DialogFields.Text,config:{name:"iTunesEpisode",maxLength:300,strings:{title:(0,l.t)("Episode Number",null,{project:"scripts-v6.block"}),description:(0,l.t)("An episode number. This sets the recommended order for your podcast episodes.",null,{project:"scripts-v6.block"}),validationFailMessage:(0,l.t)("Episode must be greater than 0.",null,{project:"scripts-v6.block"})},className:"thin",validator:function(p){return p===""||p===null||p===void 0||parseInt(p,10)>0}}},{ctor:s.Squarespace.DialogFields.Text,config:{name:"iTunesDuration",maxLength:20,strings:{title:(0,l.t)("Episode Duration (hh:mm:ss)",null,{project:"scripts-v6.block"}),description:(0,l.t)("The duration of this episode.",null,{project:"scripts-v6.block"})},className:"thin"}},{ctor:s.Squarespace.DialogFields.Check,config:{name:"iTunesExplicit",strings:{title:(0,l.t)("Explicit Content",null,{project:"scripts-v6.block"}),description:(0,l.t)("This episode contains explicit content.",null,{project:"scripts-v6.block"})}}},{ctor:s.Squarespace.DialogFields.Text,config:{name:"podcastingUrlPrefix",maxLength:300,strings:{title:(0,l.t)("Podcast Analytics URL",null,{project:"scripts-v6.block"}),description:(0,l.t)('To track analytics for this episode using a third-party service, enter its URL. <a href="{kbUrl}">Learn more</a>.',{kbUrl:r.AUDIO_ANALYTICS},{project:"scripts-v6.block"}),placeholder:"https://..."},className:"thin"}}]},{tabTitle:(0,l.t)("Design",null,{project:"scripts-v6.block"}),scroll:!0,fields:[{ctor:s.Squarespace.DialogFields.Check,config:{name:"showDownload",strings:{title:(0,l.t)("Show Download Link",null,{project:"scripts-v6.block"}),description:(0,l.t)("Allow the user to download a copy of this track.",null,{project:"scripts-v6.block"})}}},{ctor:s.Squarespace.DialogFields.Select,config:{name:"designStyle",className:"thin dark",defaultValue:"minimal",options:[{value:"legacy",label:(0,l.t)("Classic",null,{project:"scripts-v6.block"})},{value:"minimal",label:(0,l.t)("Minimal",null,{project:"scripts-v6.block"})}],strings:{title:(0,l.t)("Player Style",null,{project:"scripts-v6.block"})}}},{ctor:s.Squarespace.DialogFields.Select,config:{name:"colorTheme",defaultValue:"dark",className:"thin dark",options:[{value:"dark",label:(0,l.t)("Dark",null,{project:"scripts-v6.block"})},{value:"light",label:(0,l.t)("Light",null,{project:"scripts-v6.block"})}],strings:{title:(0,l.t)("Player Color",null,{project:"scripts-v6.block"})}}}]}]};s.namespace("Squarespace.Block"),s.namespace("Squarespace.Block.Editor"),s.namespace("Squarespace.Block.ModelEditorDialog"),s.Squarespace.Block.Editor.Audio=s.Base.create("audio-block-editor-dialog",s.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return s.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Audio")}},{NS:"blockEditor",ATTRS:{}});var g=s.Squarespace.Block.ModelEditorDialog.Audio=s.Base.create("blockAudioEditor",s.Squarespace.ModelEditorDialog,[],{initializer:function(){var p=this.get("dialog");p.on("ready",function(){p.getField("audioAsset").set("height",220),p.getField("file-location").setAttrs({optionClickCb:function(_){p.getField("file-location-frame").switchFrames(_)}});var f=p.getField("designStyle");f.get("data")==="classic"&&f.set("data","minimal"),s.Lang.isValue(f)&&(f.after("dataChange",function(_){this._toggleColorTheme(_.newVal)},this),this._toggleColorTheme(f.get("data"))),this._externalFileFields=s.Array.map(["audioAssetExternalUrl","audioAssetLength","audioAssetMimeType"],function(_){return p.getField(_)}),p.getField("audioAsset").on("dataChange",this._bindMediaEvent,this);var m=p.getField("file-location-frame");m.get("data")!=="external"&&s.Array.each(this._externalFileFields,function(_){_.disable()}),m.after("dataChange",function(_){var v=_.newVal==="external"?"enable":"disable";s.Array.each(this._externalFileFields,function(E){E[v]()})},this),p.getField("audioAssetMimeTypeSelector").after("dataChange",function(_){var v=p.getField("audioAssetMimeType");_.newVal===""?v.show():(v.set("data",_.newVal),v.hide())},this),this._syncAudioMimeTypeAssetFreeformInputVisibility(),this.bindEpisodeType()},this),this.get("model").on("audioAssetIdChange",function(f){var m=p.getField("audioAsset");if(m){if(f.newVal.length===0)m.set("data",null);else{if(!this.get("audioAssetIdCache")[f.newVal]){var _=Object.apply({},this.get("audioAssetIdCache"));_[f.newVal]=m.get("data"),this.set("audioAssetIdCache",_)}m.get("data")||m.set("data",this.get("audioAssetIdCache")[f.newVal])}m.syncUI()}},this)},bindEpisodeType:function(){this.get("dialog").getField("iTunesEpisodeType").after("dataChange",this.updateEpisodeTypeDescription,this),this.updateEpisodeTypeDescription()},updateEpisodeTypeDescription:function(){var p=this.get("dialog").getField("iTunesEpisodeType"),f=p.get("data");u.hasOwnProperty(f)?p.set("strings.description",u[f]):p.set("strings.description",(0,l.t)("Select the type of content in this episode. Some podcasting platforms use this to organize episodes for listeners.",null,{project:"scripts-v6.block"}))},destructor:function(){s.Lang.isValue(this._mediaEvent)&&this._mediaEvent.detach()},_syncAudioMimeTypeAssetFreeformInputVisibility:function(){var p=this.get("dialog"),f=p.getField("audioAssetMimeTypeSelector"),m=p.getField("audioAssetMimeType"),_=f.get("options").filter(function(v){return v.value.length>0}).map(function(v){return v.value});_.indexOf(m.get("data"))>-1?(f.set("data",m.get("data"),{silent:!0}),m.hide()):(f.set("data","",{silent:!0}),m.show())},_toggleColorTheme:function(p){p==="minimal"?this.get("dialog").getField("colorTheme").show():this.get("dialog").getField("colorTheme").hide()},getDialogData:function(){var p=g.superclass.getDialogData.call(this),f="embedded",m=p.audioAssetExternalUrl;return s.Lang.isString(m)&&m.length>0&&(f="external"),p["file-location"]=f,p["file-location-frame"]=f,s.Lang.isString(p.audioAssetId)&&p.audioAssetId.length>0&&(p.audioAsset=new s.Squarespace.Models.ContentItem({id:p.audioAssetId})),p},sanitizeDialogData:function(p){var f=p["file-location-frame"];return f==="external"?delete p.audioAsset:(p.audioAssetExternalUrl=null,p.audioAssetLength=null,p.audioAssetMimeTypeSelector=null,p.audioAssetMimeType=null),delete p["file-location"],delete p["file-location-frame"],p.audioAsset?(p.audioAssetId=p.audioAsset.get("id"),delete p.audioAsset):p.audioAssetId="",p},_bindMediaEvent:function(p){var f=p.newVal;s.Lang.isValue(f)&&(this._mediaEvent=f.on("mediaProcessingStateChange",function(m){m.newVal===a().READY&&f.once("load",this._fetchDataFromAudioFile,this)},this))},_fetchDataFromAudioFile:function(p){var f=p.target.get("structuredContent"),m=this.get("dialog"),_=m.getField("title").get("data").length;_||m.getField("title").set("data",f.get("title")||"");var v=m.getField("iTunesAuthor").get("data").length;v||m.getField("iTunesAuthor").set("data",f.get("artistName")||"")}},{ATTRS:{dialogConfig:{valueFn:function(){return h}},audioAssetIdCache:{value:{}}}})},"1.0",{requires:["base","squarespace-audio-player","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-description","squarespace-dialog-file","squarespace-dialog-file-audio","squarespace-dialog-multi-option","squarespace-dialog-multi-frame","squarespace-dialog-text","squarespace-dialog-text-area","squarespace-models-content-item","squarespace-dialog-wysiwyg"]})},88946:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-audio",function(e){var a=e.Base.create("AudioBlockModel",e.Model,[],{toJSON:function(){var s=a.superclass.toJSON.call(this);return delete s.audioAsset,s}},{ATTRS:{designStyle:{getter:function(s){return e.Lang.isValue(s)?s:"minimal"}},colorTheme:{getter:function(s){return e.Lang.isValue(s)?s:"dark"}},audioAssetId:{getter:function(s){return e.Lang.isValue(s)?s:""}}}}),r=e.namespace("Squarespace.Block").Audio=e.Base.create("block-audio",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin,e.SQS.LayoutEngine.Block.MixinContainerStyles],{_renderSuccess:function(s){r.superclass._renderSuccess.call(this,s);var n=this.get("contentBox").one(".sqs-audio-embed");if(e.Lang.isValue(n))if(e.Squarespace.Widgets.AudioPlayer)switch(this.get("model").get("designStyle")){case"legacy":new e.Squarespace.Widgets.AudioPlayer({render:n});break;default:new e.Squarespace.Widgets.AudioPlayerMinimal({render:n})}else Squarespace&&Squarespace.addLoadTrigger&&Squarespace.addLoadTrigger(".sqs-audio-embed",["squarespace-audio-player"])}},{CSS_PREFIX:(0,o.u)(l.Z.AUDIO),MODEL:a,ATTRS:{type:{value:l.Z.AUDIO},editor:{valueFn:function(){return d.oW(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Audio}},defaultContentModel:{value:{designStyle:"minimal",colorTheme:"dark"}}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-mixin-container-styles","squarespace-block-audio-editor","squarespace-premium-block-mixin"]})},819509:function(c,b,t){"use strict";var l=t(714487),d=t(759352);YUI.add("squarespace-block-base-custom-embed",function(o){o.namespace("Squarespace.Block"),o.Squarespace.Block.CustomEmbedBase=o.Base.create("block-customembed",o.SQS.LayoutEngine.Block.ModelSyncBase,[],{initializer:function(){this.get("safeguardEmbeddedScripts")&&this._bindSafePreviewModeChange()},_bindSafePreviewModeChange:function(){this.after("safePreviewModeChange",function(e){e.newVal===!0?this._renderContentInSafePreview():e.silent!==!0&&this._renderBlock()})},_getWidgetContent:function(e){if(!e)return null;var a=o.Node.create("<div></div>");return a.insert(e),d.N$(a),this.get("safeguardEmbeddedScripts")&&!this.get("safePreviewMode")&&this._filterOutEmbeddedScripts(a),a},_filterOutEmbeddedScripts:function(e){var a=(0,l.t)("Script Disabled",null,{project:"scripts-v6.block"}),r=e.all("script");if(r.size()>0){r.each(function(n){n.replace('<div class="removed-script">'+a+" </div>")});var s=this._getNewStateMessageNode({title:(0,l.t)("Embedded Scripts",null,{project:"scripts-v6.block"}),classNames:"warning",message:(0,l.t)("This block contains embedded scripts. Embedded scripts are disabled while you're logged in and editing your site.",null,{project:"scripts-v6.block"}),button:{text:(0,l.t)("Preview in safe mode",null,{project:"scripts-v6.block"}),onClick:o.bind(function(n){n.halt(),this.safePreviewOn()},this)}});e.prepend(s)}},_renderContentInSafePreview:function(){var e=this.get("contentBox"),a=this._getCurrentContentDimensions(),r=o.Node.create('<iframe class="embedded-scripts-preview"></iframe>'),s=o.Lang.isValue(r.get("srcdoc")),n=this.get("widgetContent"),i={allowfullscreen:!0,width:a.width,height:a.height,srcdoc:n&&n.get("innerHTML")||"",seamless:"seamless",sandbox:this.get("defaultSandboxMode")};s||(i.sandbox+=" allow-same-origin",i.src='javascript: window.frameElement.getAttribute("srcdoc")'),r.plug(o.Squarespace.NodeDestroyNotifier,{onDestroy:o.bind(this.safePreviewOff,this,!0)}),e.empty().append(this._getNewStateMessageNode({title:(0,l.t)("Safe Preview",null,{project:"scripts-v6.block"}),message:(0,l.t)("Please view the page after logging out for accurate rendering.",null,{project:"scripts-v6.block"}),button:{text:(0,l.t)("Exit safe preview",null,{project:"scripts-v6.block"}),onClick:o.bind(function(u){u.halt(),this.safePreviewOff()},this)}})).append(r.setAttrs(i)),s||r.setAttribute("sandbox",this.get("defaultSandboxMode"))},_getCurrentContentDimensions:function(){var e=this.get("contentBox"),a=e.one(".sqs-state-message"),r=parseInt(e.getComputedStyle("width"),10),s=parseInt(e.getComputedStyle("height"),10);return o.Lang.isValue(a)&&(s-=a.invoke("getBoundingClientRect").height),{width:r,height:s}},safePreviewOn:function(){this.set("safePreviewMode",!0)},safePreviewOff:function(e){this.set("safePreviewMode",!1,{silent:e===!0})}},{ATTRS:{widgetContent:{value:"",getter:"_getWidgetContent"},safeguardEmbeddedScripts:{value:!1,writeOnce:"initOnly"},defaultSandboxMode:{value:"allow-forms allow-popups allow-scripts",readOnly:!0},safePreviewMode:{value:!1}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","base","squarespace-plugin-node-destroy-notifier"]})},786947:function(c,b,t){"use strict";var l=t(784874),d=t(734526),o=t(714487),e=t(784012),a=t(202560),r=d.Z,s=r.BlockTypeKeys;YUI.add("squarespace-block-button-base",function(n){n.namespace("Squarespace.Block"),n.Squarespace.Block.ButtonBase=n.Base.create("block-button-base",n.SQS.LayoutEngine.Block.ModelSyncBase,[n.Squarespace.Block.PremiumBlockMixin,n.SQS.LayoutEngine.Block.MixinContainerStyles],{},{CSS_PREFIX:(0,a.u)(l.Z.BUTTON),ATTRS:{blockTypeName:{value:s[l.Z.BUTTON]},type:{value:l.Z.BUTTON},defaultContentModel:{value:{buttonText:(0,o.t)("Learn more",null,{project:"scripts-v6.block"}),buttonLink:"",newWindow:!1,buttonAlignment:"center",buttonSize:e.u8.MEDIUM.value}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-mixin-container-styles","squarespace-premium-block-mixin"]})},119570:function(c,b,t){"use strict";var l=t(673951),d=t(663634),o=(0,d.cr)("remove_inline_button_text_editor");YUI.add("squarespace-block-button",function(e){var a=!l.qu;e.namespace("Squarespace.Block"),e.Squarespace.Block.Button=a&&!o?e.Squarespace.Block.InlineEditableButton:e.Squarespace.Block.DialogEditableButton},"1.0",{requires:["base","squarespace-block-dialog-editable-button","squarespace-block-inline-editable-button"]})},461046:function(c,b,t){"use strict";var l=t(798589);YUI.add("squarespace-block-buttons-only-editor",function(d){d.namespace("Squarespace.Block.Editor"),d.Squarespace.Block.Editor.ButtonsOnly=d.Base.create("block-buttons-only-editor",d.SQS.LayoutEngine.Block.Editor.Base,[],{},{NS:"blockEditor",ATTRS:{blockName:{valueFn:function(){return this.get("host").get("blockName")}},editingButtons:{value:!l.isMobile()}}})},"1.0",{requires:["@sqs/layout-engine/block-editor-base"]})},882042:function(c,b,t){"use strict";var l=t(714487),d=t(437951),o=t.n(d),e=t(868192);YUI.add("squarespace-block-calendar-editor",function(a){var r={width:335,height:420,tabs:[{title:(0,l.t)("Calendar",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-event-16-light.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:(0,l.t)('Display events, blog posts, products, or gallery images as a calendar. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below:',{helpLink:e.CALENDAR_EDITOR},{project:"scripts-v6.block"}),padding:[0,0]}},{ctor:a.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionFilter:{collectionType:[o().PRODUCTS,o().COLLECTION_TYPE_GENERIC],folder:!1},emptyMessage:(0,l.t)("No pages yet. Go to the pages panel and click a + to add new content.",null,{project:"scripts-v6.block"})}}]}]};a.namespace("Squarespace.Block.Editor").CalendarDialog=a.Base.create("calendar-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Calendar")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:(0,l.t)("Calendar",null,{project:"scripts-v6.block"})},minHSize:{value:4}}}),a.namespace("Squarespace.Block.ModelEditorDialog").Calendar=a.Base.create("blockCalendarEditor",a.Squarespace.ModelEditorDialog,[],{initializer:function(){var s=this.get("dialog");s.on("ready",function(){this._handleUndoRedoCollectionIdChanges()},this)},_handleUndoRedoCollectionIdChanges:function(){var s=this.get("dialog").getField("collectionId");s.after("dataChange",function(n){var i=a.one(".collection-wrapper[data-collection-id="+n.newVal+"]");s._checkIfCollectionIsSelected(i)},this)}},{ATTRS:{dialogConfig:{valueFn:function(){return r}},strings:{value:{title:(0,l.t)("Index",null,{project:"scripts-v6.block"}),description:(0,l.t)("Select a collection below.",null,{project:"scripts-v6.block"})}}}})},"1.0",{requires:["base","model","squarespace-block-editor-dialog","squarespace-block-calendar-model","squarespace-calendar-block-renderer","squarespace-damask-context-globals","squarespace-dialog-description","squarespace-dialog-content-selector","squarespace-models-content-collection"]})},433543:function(){YUI.add("squarespace-block-calendar-model",function(c){c.namespace("Squarespace.ContentModel").CalendarBlock=c.Base.create("CalendarBlockModel",c.Model,[],{},{ATTRS:{collectionId:{value:null}}})},"1.0",{requires:["base","model"]})},554586:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-calendar",function(e){var a=e.namespace("Squarespace.Block").Calendar=e.Base.create("block-calendar",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{initializer:function(r){this._calendarInstance=!1},bindUI:function(){a.superclass.bindUI.call(this),this.after("resized",function(){this._calendarInstance.calendarPlugin&&this._calendarInstance.calendarPlugin._syncUI()})},destructor:function(){this._calendarInstance&&this._calendarInstance.destroy()},_renderSuccess:function(r){a.superclass._renderSuccess.call(this,r);var s=this.get("model").get("collectionId"),n=this.get("contentBox"),i=this.get("collectionId");this._calendarInstance=e.Squarespace.CalendarBlockRenderer.renderCalendar(n,s,i)}},{MODEL:e.Squarespace.ContentModel.CalendarBlock,ATTRS:{editor:{valueFn:function(){return d.Lk(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.CalendarDialog}},type:{value:l.Z.CALENDAR}},CSS_PREFIX:(0,o.u)(l.Z.CALENDAR)})},"1.0",{requires:["base","model","squarespace-calendar-block-renderer","squarespace-block-calendar-editor","squarespace-block-calendar-model","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},4260:function(c,b,t){"use strict";var l=t(714487),d=t(135118),o=t(868192);YUI.add("squarespace-block-chart-editor",function(e){var a=25,r=25,s=22,n=s*5,i=s*3,u={width:n*4+s*3+i,height:579,title:(0,l.t)("Chart",null,{project:"scripts-v6.block"}),tabs:[{tabTitle:(0,l.t)("Data",null,{project:"scripts-v6.block"}),scroll:!1,fields:[{ctor:e.Squarespace.DialogFields.Description,text:(0,l.t)('Add compelling data visualizations to your site by entering the data below or pasting it from a .csv file in the <strong>Import/Export</strong> tab. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:o.CHART_EDITOR},{project:"scripts-v6.block"})},{ctor:e.Squarespace.DialogFields.Select,config:{name:"chartType","strings.placeholder":(0,l.t)("Select a Chart Type",null,{project:"scripts-v6.block"}),"strings.title":(0,l.t)("Chart Type",null,{project:"scripts-v6.block"}),options:[{value:d.Z.CHART_BAR,label:(0,l.t)("Bar Chart",null,{project:"scripts-v6.block"})},{value:d.Z.CHART_LINE,label:(0,l.t)("Line Chart",null,{project:"scripts-v6.block"})},{value:d.Z.CHART_PIE,label:(0,l.t)("Pie Chart",null,{project:"scripts-v6.block"})}]}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"flip","strings.title":(0,l.t)("Flip X And Y Axes",null,{project:"scripts-v6.block"})}},{ctor:e.Squarespace.DialogFields.DataTable,config:{name:"dataTable","strings.title":(0,l.t)("Chart Data",null,{project:"scripts-v6.block"}),maxSeries:a,maxSamples:r}}]},{tabTitle:(0,l.t)("Design",null,{project:"scripts-v6.block"}),scroll:!0,fields:[{ctor:e.Squarespace.DialogFields.Text,"strings.title":(0,l.t)("Chart Title",null,{project:"scripts-v6.block"}),config:{name:"title"}},{ctor:e.Squarespace.DialogFields.Text,"strings.title":(0,l.t)("Caption",null,{project:"scripts-v6.block"}),config:{name:"caption"}},{ctor:e.Squarespace.DialogFields.Check,config:{name:"showLegend","strings.title":(0,l.t)("Show Legend",null,{project:"scripts-v6.block"})}},{ctor:e.Squarespace.DialogFields.Select,config:{name:"palette","strings.title":(0,l.t)("Color Palette",null,{project:"scripts-v6.block"}),options:[{value:"default",label:(0,l.t)("Grayscale",null,{project:"scripts-v6.block"})},{value:"Primary",label:(0,l.t)("Primary",null,{project:"scripts-v6.block"})},{value:"Warm",label:(0,l.t)("Warm",null,{project:"scripts-v6.block"})},{value:"Cool",label:(0,l.t)("Cool",null,{project:"scripts-v6.block"})},{value:"Muted",label:(0,l.t)("Muted",null,{project:"scripts-v6.block"})},{value:"Cobblestone",label:(0,l.t)("Cobblestone",null,{project:"scripts-v6.block"})},{value:"Shops",label:(0,l.t)("Shops",null,{project:"scripts-v6.block"})},{value:"Suburbs",label:(0,l.t)("Suburbs",null,{project:"scripts-v6.block"})},{value:"Tea Party",label:(0,l.t)("Tea Party",null,{project:"scripts-v6.block"})},{value:"Highway",label:(0,l.t)("Highway",null,{project:"scripts-v6.block"})},{value:"DB-Nine",label:(0,l.t)("DB-Nine",null,{project:"scripts-v6.block"})},{value:"Italia",label:(0,l.t)("Italia",null,{project:"scripts-v6.block"})},{value:"M-Three",label:(0,l.t)("M-Three",null,{project:"scripts-v6.block"})},{value:"Thunderbird",label:(0,l.t)("Thunderbird",null,{project:"scripts-v6.block"})}]}}]},{tabTitle:(0,l.t)("Import / Export",null,{project:"scripts-v6.block"}),scroll:!1,fields:[{ctor:e.Squarespace.DialogFields.TableImport,"strings.title":(0,l.t)("Import / Export",null,{project:"scripts-v6.block"}),config:{name:"_iodata",maxSeries:a,maxSamples:r}}]}]};e.namespace("Squarespace.Block.Editor").Chart=e.Base.create("chart-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Chart")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:(0,l.t)("Chart",null,{project:"scripts-v6.block"})},disableRenderAnchorEvent:{value:!1}}}),e.namespace("Squarespace.Block.ModelEditorDialog").Chart=e.Base.create("block-chart-editor",e.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").after("ready",function(){this._dialogReady()},this),this.plug(e.Squarespace.ModelEditorPlugins.LoadBeforeShowing)},getDialogData:function(){var h=this.get("model"),g=e.clone(h.toJSON(),!0);return g.dataTable=h.get("dataTable"),g._iodata=e.clone(g.dataTable),g},_dialogReady:function(){var h=this.get("dialog"),g=h.getField("dataTable");g.set("oneDimension",this.get("oneDimension")),g.populateTable(this.get("model").get("dataTable")),this._bindDialogFields()},_bindDialogFields:function(){var h=this.get("dialog"),g=h.getField("_iodata"),p=h.getField("dataTable"),f=h.getField("chartType");f._registerEvent(f.after("dataChange",this._resetDataTableDialog,this)),p._registerEvent(p.after("dataChange",function(m){g.set("data",m.newVal,{silent:!0})},this)),g._registerEvent(g.after("importTable",function(m){var _=m.data;p.set("data",_),p.set("oneDimension",this.get("oneDimension")),p.populateTable(_)},this))},_resetDataTableDialog:function(){var h=this.getDialogData().dataTable,g=this.get("dialog").getField("dataTable");g.set("oneDimension",this.get("oneDimension")),g.populateTable(h)}},{ATTRS:{dialogConfig:{valueFn:function(){return u}},oneDimension:{getter:function(){var h=parseInt(this.get("model").get("chartType"));return h===d.Z.CHART_PIE},readOnly:!0}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-dialog-data-table","squarespace-dialog-table-import","squarespace-dialog-radio"]})},165799:function(c,b,t){"use strict";var l=t(936105);YUI.add("squarespace-block-chart",function(d){d.namespace("Squarespace.ContentModel"),d.Squarespace.ContentModel.Chart=d.Base.create("block-chart-model",d.Model,[],{initializer:function(){this._dataTable=new d.Squarespace.Models.DataTable},destructor:function(){this._dataTable&&this._dataTable.destroy({remove:!0})},sync:function(o,e,a){if(o==="update"||o==="create"){var r=this.getAttrs();this._dataTable.setAttrs(r.dataTable),this._dataTable.save(e,d.bind(function(n,i){if(!this.get("dataTableId")){var u=d.JSON.parse(i.response);this.set("dataTableId",u.id)}a(n)},this))}else if(o==="read"){var s=this.get("dataTableId");s?(this._dataTable.set("id",s),this._dataTable.load(e,d.bind(function(n,i){this.set("dataTable",this._dataTable.getAttrs()),a(n)},this))):a()}else o==="delete"&&this._dataTable.destroy({remove:!0},d.bind(function(n){a(n)},this))},toJSON:function(){var o=d.Squarespace.ContentModel.Chart.superclass.toJSON.call(this);return delete o._iodata,o.dataTableId&&delete o.dataTable,o}},{ATTRS:{dataTableId:{value:null,validator:d.Squarespace.AttrValidators.isNullOrString},title:{value:"",validator:d.Squarespace.AttrValidators.isString},legend:{value:"none",validator:d.Squarespace.AttrValidators.isValue},caption:{value:"",validator:d.Squarespace.AttrValidators.isString},palette:{value:"default",validator:d.Squarespace.AttrValidators.isString},flip:{value:!1,validator:d.Squarespace.AttrValidators.isBoolean},dataTable:{value:{},validator:d.Squarespace.AttrValidators.isObject},chartType:{value:"",validator:d.Squarespace.AttrValidators.isValue},showLegend:{getter:function(){return this.get("legend")&&this.get("legend")!=="none"},setter:function(o){return this.set("legend",o?"visible":"none",{silent:!0}),o}}}}),d.namespace("Squarespace.Block"),d.Squarespace.Block.Chart=d.Base.create("block-chart",d.SQS.LayoutEngine.Block.Base,[d.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this._chart=null},destructor:function(){this._chart&&this._chart.destroy()},renderUI:function(){d.Squarespace.Block.Chart.superclass.renderUI.call(this);var o=this.get("model"),e="";o.get("caption")&&(e="<figcaption>"+o.get("caption")+"</figcaption>");var a=d.Node.create('<div class="chart-block-container chart-type-'+o.get("chartType")+'"><h2>'+o.get("title")+'</h2><div class="chart-block-body legend-'+o.get("legend")+'"><div class="chart-block-legend attach1"><figcaption class="legend-content"></figcaption></div><div class="chart-block-content"><div><canvas></canvas></div></div><div class="chart-block-legend attach2"><figcaption class="legend-content"></figcaption></div></div><div class="chart-block-caption">'+e+"</div></div>");this.get("contentBox").append(a),this.get("model").load(d.bind(this._createChart,this))},bindUI:function(){var o=this.get("model");o.after("titleChange",this._renderTitle,this),o.after("legendChange",this._renderLegend,this),o.after("captionChange",this._renderCaption,this),o.after("dataTableChange",this._renderChartContent,this),o.after("chartTypeChange",function(){this._renderChartType(),this._createChart(!0)},this),o.after("paletteChange",function(e){this._createChart(!0)},this),o.after("flipChange",function(e){this._createChart(!0)},this),this.after("resized",function(){this._chart&&this._chart.resize()},this)},syncUI:function(){this._renderTitle(),this._renderLegend(),this._renderChartType(),this._renderCaption(),this._renderChartContent()},_renderTitle:function(){var o=this.get("model").get("title");this.get("contentBox").one("h2").setHTML(d.Escape.html(o))},_renderLegend:function(){var o=this.get("model").get("legend");this.get("contentBox").one(".chart-block-body").set("className","chart-block-body legend-"+o)},_renderChartType:function(){var o=this.get("model").get("chartType");this.get("contentBox").one(".chart-block-container").set("className","chart-block-container chart-type-"+o)},_renderCaption:function(){var o=this.get("model").get("caption");o?this.get("contentBox").one(".chart-block-caption").setHTML("<figcaption>"+d.Escape.html(o)+"</figcaption>"):this.get("contentBox").one(".chart-block-caption").empty()},_renderChartContent:function(){if(this._chart){var o=this.get("model").get("dataTable");this._chart.sync(o),this._chart.resize()}},_createChart:function(o){if(this._chart)if(o)this._chart.destroy();else return;var e=this.get("model"),a=e.get("chartType"),r=e.get("dataTable"),s=e.get("palette"),n=e.get("flip"),i=this.get("contentBox").one(".chart-block-container");this._chart=d.ChartJS.createChart(a,i,r,s,n),this.fire("widget:contentUpdate")}},{MODEL:d.Squarespace.ContentModel.Chart,ATTRS:{editor:{valueFn:function(){return l.Lk(this.get("blockTypeName"))?d.Squarespace.Block.Editor.Schema:d.Squarespace.Block.Editor.Chart}}}})},"1.0",{requires:["base","escape","node","squarespace-models-data-table","@sqs/layout-engine/block-base","squarespace-block-chart-editor","squarespace-block-schema-editor","squarespace-chartjs-helpers","squarespace-premium-block-mixin"]})},522792:function(c,b,t){"use strict";var l=t(714487),d=t(868192),o=t(834105),e=t(967361),a=t(935154),r=t.n(a),s=t(456903),n=t(210750),i=t.n(n);YUI.add("squarespace-block-code-editor",function(u){var h=["img","frame","iframe","object","video","audio","embed","svg",'input[type="image"]',"map"].join(",");u.namespace("Squarespace.Block.Editor"),u.Squarespace.Block.Editor.Code=u.Base.create("code-block-editor-dialog",u.Squarespace.Block.Editor.Dialog,[],{initializer:function(){this.afterHostMethod("_setWidgetContent",this._afterSetContent,this),this.get("host").name==="block-code"&&e.Z.isFeatureGated(r().BLOCK_CODE_WITH_MEDIA)&&this._bindCheckCodeValidListener(),this.refreshPremiumMessage=i()(this.rawRefreshPremiumMessage.bind(this),1e3,{leading:!1,trailing:!0})},_getModelEditor:function(){return u.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Code")},_afterSetContent:function(){this._cb.all(h).each(function(g){this._handles.push(g.on("load",this._fireContentUpdate,this))},this)},_fireContentUpdate:function(){this.get("host").fire("widget:contentUpdate")},_bindCheckCodeValidListener:function(){var g=this.configDialog.get("dialog"),p=this.get("host").get("model");g.on("ready",function(){var f=g.getField("error");f.set("visible",p.get("hasRenderError")),p.after("hasRenderErrorChange",function(m){m.newVal!==m.prevVal&&f.set("visible",m.newVal)}),this.codeMirrorInstance=g.getField("wysiwyg").editor.editor,this.codeMirrorInstance.on("change",(function(){this.refreshPremiumMessage()}).bind(this)),this.refreshPremiumMessage()},this)},rawRefreshPremiumMessage:function(){if(this.codeMirrorInstance){var g=this.configDialog.get("dialog");if(g.isOpen()){var p=g.getField("premiumPlanError");if(this.get("host").get("model").get("wysiwyg.isSource")){g.getField("premiumPlanError").set("visible",!1);return}if(e.Z.isFeatureGated(r().BLOCK_CODE_WITH_MEDIA)){var f=this.codeMirrorInstance.getValue();if(this.pending){this.invalidateNextAndRetry=!0;return}this.pending=!0,s.default.post("/api/code-block-input-validation",{code:f}).then((function(m){if(this.pending=!1,this.invalidateNextAndRetry){this.invalidateNextAndRetry=!1,this.refreshPremiumMessage();return}p.set("visible",m.data.hasPremiumTags)}).bind(this)).catch((function(){this.pending=!1,this.invalidateNextAndRetry&&(this.invalidateNextAndRetry=!1,this.refreshPremiumMessage()),p.set("visible",!1)}).bind(this))}}}}}),u.namespace("Squarespace.Block.ModelEditorDialog"),u.Squarespace.Block.ModelEditorDialog.Code=u.Base.create("block-code-editor",u.Squarespace.ModelEditorDialog,[],{sanitizeDialogData:function(g){if(g.wysiwyg&&g.wysiwyg.wysiwyg){var p=g.text||"";return g=g.wysiwyg,g.text=p,delete g.id,g}return!g.wysiwyg.isSource&&(g.wysiwyg.mode==="htmlmixed"||g.wysiwyg.mode==="html")?g.html=g.wysiwyg.source:u.Lang.isUndefined(g.wysiwyg.rendered)||(g.html=g.wysiwyg.rendered),delete g.wysiwyg.rendered,g},getDialogData:function(){var g=this.get("model").toJSON();return{text:g.source,wysiwyg:g}},_isCodeValid:function(){return!this.get("model").get("hasRenderError")},_getDialogConfig:function(){var g=(0,l.t)('Add custom CSS, HTML, JavaScript, Markdown, or Plain Text to this page.<br /><a href="{link}" target="_blank">Learn more</a>',{link:d.CODE_BLOCK},{project:"scripts-v6.block"});e.Z.isFeatureEnabled(r().BLOCK_CODE_WITH_MEDIA)||(g=(0,l.t)('Add CSS, HTML, or plain text to this page. To embed JavaScript or iframes, upgrade to the Business plan. <a href="{link}" target="_blank">Learn more</a>',{link:d.CODE_BLOCK},{project:"scripts-v6.block"}));var p=(0,l.t)("JavaScript and iframe embeds aren\u2019t supported in your plan. This code was removed from the block.",null,{project:"scripts-v6.block"});return o.Z.isTrial()&&(p=(0,l.t)('JavaScript and iframe embeds are only supported in the Business plan. <a href="{link}" target="_blank">Learn more</a>',{link:d.CODE_BLOCK},{project:"scripts-v6.block"})),{width:575,height:this.get("height"),tabs:[{title:(0,l.t)("Code",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-code-16-light.png",fields:[{type:"description",text:g},{type:"error",name:"error",visible:!1,text:(0,l.t)('You\u2019ve reached the character limit for Code Blocks. If you need more advanced customization, learn if the <a href="{link}" target="_blank">Developer Platform</a> is right for you.',{link:d.DEVELOPER_SDK},{project:"scripts-v6.block"})},{type:"error",name:"premiumPlanError",visible:!1,text:p},{type:"wysiwyg",height:this.get("wysiwygHeight"),width:525,countHeight:!0,name:"wysiwyg",title:(0,l.t)("HACK THE PLANET",null,{project:"scripts-v6.block"}),titleStyle:"inline",engine:"code",menuConfig:"code",validationErrorMsg:(0,l.t)("You\u2019ve reached the character limit for Code Blocks.",null,{project:"scripts-v6.block"}),validator:this._isCodeValid.bind(this)}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"},height:{value:380},wysiwygHeight:{valueFn:function(){return this.get("height")-130}}}})},"1.0",{requires:["squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-legacy-wysiwyg"]})},563838:function(c,b,t){"use strict";var l=t(784874),d=t(714487),o=t(202560);YUI.add("squarespace-block-code",function(e){var a={wysiwyg:{engine:"code",mode:"htmlmixed",isSource:!1,source:""},html:(0,d.t)("<p>Hello, World!</p>",null,{project:"scripts-v6.block"})},r=e.namespace("Squarespace.Block").Code=e.Base.create("block-code",e.Squarespace.Block.CustomEmbedBase,[e.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(){this._toggleErrorState(!1),r.superclass._renderSuccess.apply(this,arguments)},_renderError:function(){this._toggleErrorState(!0),r.superclass._renderError.apply(this,arguments)},_toggleErrorState:function(s){this.get("model").set("hasRenderError",s)}},{CSS_PREFIX:(0,o.u)(l.Z.CODE),ATTRS:{defaultContentModel:{value:a},editor:{value:e.Squarespace.Block.Editor.Schema},contentRefreshRate:{value:600},safeguardEmbeddedScripts:{value:!0}}})},"1.0",{requires:["@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-base-custom-embed","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},249226:function(c,b,t){"use strict";var l=t(714487),d=t(868192);YUI.add("squarespace-block-collection-link-editor",function(o){o.namespace("Squarespace.Block.Editor").CollectionLink=o.Base.create("collection-link-block-editor-dialog",o.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return o.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.CollectionLink")}},{NS:"blockEditor",ATTRS:{}});var e=o.namespace("Squarespace.Block.ModelEditorDialog").CollectionLink=o.Base.create("blockCollectionLinkEditor",o.Squarespace.ModelEditorDialog,[],{_showDialog:function(){e.superclass._showDialog.call(this);var a=this.get("dialog").getField("collectionId");a.set("collectionGroups",this._getCollectionGroups()),a.syncUI()},_getCollectionGroups:function(){var a=o.Squarespace.ContentCollectionUtils,r=o.Squarespace.ContentCollectionCache,s=r.filter(a.isGenericOrProduct),n=r.filter(a.isPage),i=r.filter(a.isIndex),u=a.groupCollectionsByTypeName(s);return u.push({title:(0,l.t)("Pages",null,{project:"scripts-v6.block"}),collections:n}),u.push({title:(0,l.t)("Index",null,{project:"scripts-v6.block"}),collections:i}),u},_getDialogConfig:function(){return{width:335,height:400,discardChangesConfirmation:!1,initialDataByReference:!0,tabs:[{title:(0,l.t)("Content Link",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-link-16-light-solid.png",scroll:!0,fields:[{type:"description",text:(0,l.t)('Create a visual link to a page within your site that includes its associated title, thumbnail, and description. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below:',{helpLink:d.CONTENT_LINK_BLOCK},{project:"scripts-v6.block"})},{ctor:o.Squarespace.DialogFields.ContentIdSelector,config:{mode:"page",showCollectionTagsAndCategories:!1,showGroupTitles:!0,name:"collectionId",collectionGroups:[]}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-content-collection-utils","squarespace-damask-context-globals","squarespace-dialog-content-item-grid","squarespace-dialog-gallery-options","squarespace-dialog-multi-option","squarespace-dialog-multi-frame","squarespace-models-content-collection","squarespace-plugin-actionoverlay"]})},852600:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-collection-link",function(e){var a={linkTitle:"",linkTarget:"",newWindow:!1},r=e.namespace("Squarespace.Block").CollectionLink=e.Base.create("block-collection-link",e.SQS.LayoutEngine.Block.ModelSyncBase,[],{_renderSuccess:function(s){r.superclass._renderSuccess.call(this,s),this._plugImageLoader()},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(s){s.hasPlugin(e.Squarespace.Loader2.NS)||s.plug(e.Squarespace.Loader2)})}},{CSS_PREFIX:(0,o.u)(l.Z.COLLECTION_LINK),ATTRS:{editor:{valueFn:function(){return d.Lk(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.CollectionLink}},type:{value:l.Z.COLLECTION_LINK},defaultContentModel:{value:a}}})},"1.0",{requires:["base","squarespace-image-loader","@sqs/layout-engine/block-model-sync-base","squarespace-block-collection-link-editor","squarespace-block-schema-editor"]})},783154:function(){YUI.add("squarespace-block-dialog-editable-button",function(c){c.namespace("Squarespace.Block"),c.Squarespace.Block.DialogEditableButton=c.Base.create("block-dialog-editable-button",c.Squarespace.Block.ButtonBase,[],{initializer:function(){this.constructor.superclass.initializer.call(this),this.after("widget:contentUpdate",function(){this.addButtonWrapperNode()},this)},addButtonWrapperNode:function(){var b=this.get("contentBox"),t=b.one("a");if(t){var l=t.get("text"),d=c.Node.create('<div class="sqs-html"><span>'+l+"</span></div>");t.setHTML(d)}}},{ATTRS:{editor:{value:c.Squarespace.Block.Editor.Schema},includeEdit:{valueFn:function(){return!1}}}})},"1.0",{requires:["base","squarespace-block-button-base","squarespace-block-schema-editor"]})},483404:function(c,b,t){"use strict";var l=t(714487),d=t(479348),o=t(613672),e=t.n(o),a=t(784874),r=t(202560);YUI.add("squarespace-block-donation",function(s){var n=s.Base.create("DonationModel",s.Model,[],{initializer:function(i){var u=this.get("donatePageId");if(u){var h=s.merge(i,{id:u}),g=new s.Squarespace.Models.DonatePage(h);g.load(s.bind(function(p){this.setAttrs(p)},this))}},sync:function(i,u,h){var g=this.get("donatePageId"),p=i==="create",f=i==="update";if(p||f){var m=this.toJSON();f&&(m=s.merge(m,{id:g}));var _=new s.Squarespace.Models.DonatePage(m);_.save(u,s.bind(function(S,y){var C=s.JSON.parse(y.response);g=C.id,this.set("donatePageId",C.id),d.Z.grantAchievement(e().ADDED_DONATION_BLOCK),h(S)},this))}else if(i==="delete"){var v=new s.Squarespace.Models.DonatePage({id:g});v.destroy({remove:!0},h)}else if(i==="read"&&s.Lang.isValue(g)){var E=new s.Squarespace.Models.DonatePage({id:g});E.load(h)}else h()},parse:function(i){return i instanceof XMLHttpRequest?[s.JSON.parse(i.responseText)]:i},isNew:function(){return!s.Lang.isValue(this.get("donatePageId"))}},{ATTRS:{suggestedContributions:{valueFn:function(){if(!this.get("donatePageId"))return[{amountCents:1e3,label:""},{amountCents:2500,label:""},{amountCents:5e3,label:""},{amountCents:1e4,label:""}]}},buttonLabel:{value:(0,l.t)("Donate",null,{project:"scripts-v6.block"})},queuedSubmitEnabled:{value:!1}}});s.namespace("Squarespace.Block").Donation=s.Base.create("block-donation",s.SQS.LayoutEngine.Block.ModelSyncBase,[s.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){this.get("model").after("change",function(i){var u=this.get("contentBox"),h=u.one(".sqs-donate-button");if(i.changed.donatePageId&&h.setAttribute("data-donate-page-id",i.changed.donatePageId.newVal),i.changed.buttonAlignment){var g=i.changed.buttonAlignment,p="sqs-donate-button-wrapper--align-";u.get("children").replaceClass(p+g.prevVal,p+g.newVal)}i.changed.buttonLabel&&h.setHTML(i.changed.buttonLabel.newVal)},this),this.get("boundingBox").delegate("click",function(i){this.get("editable")||s.Squarespace.Commerce.goToDonatePage(i.target.getAttribute("data-donate-page-id"))},".sqs-donate-button",this)}},{CSS_PREFIX:(0,r.u)(a.Z.DONATION),MODEL:n,ATTRS:{editor:{value:s.Squarespace.Block.Editor.Schema},type:{value:a.Z.DONATION}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-schema-editor","squarespace-models-donate-page","squarespace-premium-block-mixin"]})},990900:function(c,b,t){"use strict";var l=t(743642),d=t(174161),o=t(594127),e=t(861655),a=t(273564),r=t(583010),s=t(916661),n=t(83208),i=t(951287),u=t(337061),h=t(419467),g=t(543121),p=t(415873),f=t(317527),m=t(906194),_=t(784874),v=t(687006),E=t(175823),S=t(518870),y=t(86851),C=t(765742),O=t(482053),A=t(338465),I=t(151059),D=t(938077),T=t(538312),B=t(352635),N=t(805163),P=t(612020),x=t(923046),R=t.n(x),w=t(714460),k=t.n(w),q=t(714487),F=t(45018),z=t(757094),j=t(516942),X=t(323134);const J=s.Z.isVersion(R().SEVEN),Q=d.forwardRef((He,$e)=>{let{setIsOpen:gt,isOpen:Ge,label:Dt}=He;return d.createElement(F.Z,{ref:$e,onClick:()=>gt(!Ge),label:Dt,isSelected:Ge,forceHideTooltip:Ge,tooltipLabel:(0,q.t)("Button Type",null,{project:"apps.App"}),style:{marginRight:"0"}},d.createElement(T.Z.Body,{mr:2,fontWeight:B.fontWeights.medium},Dt),Ge?d.createElement(N.Z,null):d.createElement(P.Z,null))});function ie(He){let{value:$e,onChange:gt,htmlAttributes:Ge,useDeprecatedButtonSizeValues:Dt}=He;const St=(0,z.v)(),kt=(0,u.Ze)(D.sUl),vi=J?Object.values(j.XG).map(Yt=>({id:Yt,label:j.zK[Yt]})):Object.values(k()).map(Yt=>({id:Dt?j.UB[Yt]:Yt,label:j.Z2[Yt],interiorPre:d.createElement(z.Z,{buttonVariant:Yt,tweakColorMap:St,tweakValues:kt})}));return d.createElement(X.Z,{options:vi,value:$e,onChange:gt,renderDisplay:Q,htmlAttributes:Ge})}const ce=ie,ye=He=>d.createElement(ce,(0,h.omit)(He,"router"));var Ae=t(251196);const Fe=()=>d.createElement(Ae.Z,{height:"20px",width:"1px"});var Ie=t(964364);const ht=(0,q.t)("Edit",null,{project:"apps.App"}),Se=He=>{let{icon:$e,label:gt}=He;const Ge=(0,u.Ze)(D.Pr$),Dt=gt||ht,St=()=>{var kt;Ge==null||(kt=Ge.blockEditor)===null||kt===void 0||kt.openEditor()};return d.createElement(I.Wx,{ariaLabel:Dt,label:Dt,onClick:St},$e?d.createElement(Ie.Z,{src:$e,alt:"",preventLayoutShift:!0}):d.createElement(g.Z,{color:"black"}))};var lt=t(505873),Lt=t(292165),Pt=t(934951),Ce=function(He){return He.CODE="code",He.HTML="html",He}({}),je=function(He){return He.ASC="ASC",He.DESC="DESC",He}({}),Le=function(He){return He.CREATED_AT="CREATED_AT",He.USAGE_COUNT="USAGE_COUNT",He.NAME="NAME",He.UPDATED_AT="UPDATED_AT",He}({});const ci=(()=>{const He=window.location.host;if(He.includes(".stage."))return"https://account.stage.sqsp.net";if(He.includes(".qa")){const $e=He.match(/\.qa(\d+)/);if($e)return`https://account.qa${$e[1]}.sqsp.net`}return"https://account.squarespace.com"})(),Jt={[Ce.CODE]:"global-code",[Ce.HTML]:"global-text"},Ft=[{label:(0,q.t)("Last Updated",null,{project:"enterprise"}),sortBy:Le.UPDATED_AT,sortDirection:je.DESC},{label:(0,q.t)("First Updated",null,{project:"enterprise"}),sortBy:Le.UPDATED_AT,sortDirection:je.ASC},{label:(0,q.t)("Sort A-Z",null,{project:"enterprise"}),sortBy:Le.NAME,sortDirection:je.ASC},{label:(0,q.t)("Sort Z-A",null,{project:"enterprise"}),sortBy:Le.NAME,sortDirection:je.DESC},{label:(0,q.t)("Most Instances",null,{project:"enterprise"}),sortBy:Le.USAGE_COUNT,sortDirection:je.DESC},{label:(0,q.t)("Least Instances",null,{project:"enterprise"}),sortBy:Le.USAGE_COUNT,sortDirection:je.ASC}];var ti=t(568688);const qt=(He,$e)=>(0,d.useMemo)(()=>{function gt(){ti.U3.trackUserClicksEnterpriseLink({productArea:ti.Wl.ORGANIZATION_CONTENT_SELECT_FIELD,objectIdentifier:`design-library-link--${He}`})}const Ge=new URL(`design-library/${Jt[He]}/`,$e||ci).href,Dt=d.createElement(Lt.Z,{onClick:gt,href:Ge,target:"_blank"},d.createElement(Pt.T,{project:"enterprise",note:"This is a link in a sentence: 'Manage and create the [x] from within the Design Library'"},"Design Library"));switch(He){case"html":return{editTitle:(0,q.t)("Edit Global Text",null,{project:"enterprise"}),selectTitle:(0,q.t)("Add Global Text",null,{project:"enterprise"}),description:(0,q.t)("These text blocks can be used across different sites within an organization. Once a global text block is added and saved to a page it will remain synced across all instances when when updates are made.",null,{project:"enterprise"}),ManageLink:()=>d.createElement(Pt.T,{project:"enterprise",designLibraryLink:Dt,note:"Includes a link: '...from within the Design Library'"},"Manage and create new global text from within the {designLibraryLink}."),noContent:"Your organization doesn\u2019t have any global text yet.",noContentLearnMore:"Learn more about creating global text"};case"code":return{editTitle:(0,q.t)("Edit Global Code",null,{project:"enterprise"}),selectTitle:(0,q.t)("Add Global Code",null,{project:"enterprise"}),description:(0,q.t)("These code blocks can be used across different sites within an organization.",null,{project:"enterprise"}),ManageLink:()=>d.createElement(Pt.T,{project:"enterprise",designLibraryLink:Dt,note:"Includes a link: '...from within the Design Library'"},"Manage and create new global code from within the {designLibraryLink}."),noContent:"Your organization doesn\u2019t have any global code yet.",noContentLearnMore:"Learn more about creating global code"};default:return{editTitle:(0,q.t)("Edit Global Content",null,{project:"enterprise"}),selectTitle:(0,q.t)("Add Global Content",null,{project:"enterprise"}),description:(0,q.t)("These content blocks can be used across different sites within an organization. Once a global content block is added and saved to a page it will remain synced across all instances when when updates are made.",null,{project:"enterprise"}),ManageLink:()=>d.createElement(Pt.T,{project:"enterprise",designLibraryLink:Dt,note:"Includes a link: '...from within the Design Library'"},"Manage and create new global content from within the {designLibraryLink}."),noContent:"Your organization doesn\u2019t have any global content yet.",noContentLearnMore:"Learn more about creating global content"}}},[$e,He]);var Mt=t(651780);function Vt(He){let{enabled:$e=!0,children:gt}=He;return d.createElement(d.Fragment,null,d.createElement(A.Z,null,gt),$e&&d.createElement(Ae.Z,{height:"20px",width:"1px",sx:{"&:last-child":{marginRight:"4px"}}}))}const Ni=He=>{let{baseUrl:$e=ci,contentType:gt,hasDivider:Ge,icon:Dt,target:St,value:kt}=He;const{editTitle:vi}=qt(gt,$e),Yt=(0,d.useMemo)(()=>new URL(`design-library/${Jt[gt]}/details/${kt}`,$e).href,[$e,kt,gt]);function li(){ti.U3.trackUserClicksEnterpriseButton({productArea:ti.Wl.ORGANIZATION_CONTENT_SELECT_FIELD,objectIdentifier:`edit-content--${gt}`,value:kt})}return!Yt||!(0,Mt.RN)()?null:d.createElement(Vt,{enabled:Ge},d.createElement(lt.Z,{onClick:li,ariaLabel:vi,as:"a",href:Yt,tabIndex:0,target:St},Dt?d.createElement(Ie.Z,{src:Dt,alt:"",preventLayoutShift:!0,mr:"1"}):null,d.createElement(T.Z.Action,null,vi)))};var ui=t(685763),gn=t(276782),zi=t(766400),Mn=t(394954),Zt=t(868192),Te=t(378257);const xt=He=>{let{onSelect:$e,children:gt,...Ge}=He;return d.createElement(Te.Z,{isHoverable:!0,isSelectable:!0,onChange:$e,px:4,py:3,width:"100%",sx:{wordBreak:"break-word",...(Ge==null?void 0:Ge.sx)||{}},...Ge},gt)},Li=He=>{let{cardProps:$e,onSelect:gt}=He;return d.createElement(xt,{onSelect:gt},d.createElement(T.Z.Subtitle,{m:0},$e.name),d.createElement(T.Z.Body,{fontSize:2,my:1,lineHeight:1,maxHeight:"64px",overflowY:"hidden",sx:{whiteSpace:"pre-wrap"}},$e.preview),d.createElement(Mn.Z,{as:O.Z,direction:"row",justifyContent:"space-between",of:A.Z,space:1},d.createElement(T.Z.Label,{color:"gray[300]","font-size":2,m:0},(0,q.t)("Last updated {lastUpdatedDate}",{lastUpdatedDate:$e.updatedAt},{project:"enterprise"})),d.createElement(T.Z.Label,{color:"gray[300]","font-size":2,m:0},(0,q._6)({one:"1 instance",other:"{%n} instances"},$e.usageCount,null,{project:"enterprise"}))))},le=He=>{let{cardProps:$e,onSelect:gt}=He;return d.createElement(xt,{onSelect:gt},d.createElement(T.Z.Subtitle,{m:0},$e.name),$e.description&&d.createElement(T.Z.Caption,{my:1},$e.description),d.createElement(Mn.Z,{as:O.Z,direction:"row",justifyContent:"space-between",of:A.Z,space:1,pt:2},d.createElement(T.Z.Label,{"font-size":2,m:0},(0,q.t)("Last updated {lastUpdatedDate}",{lastUpdatedDate:$e.updatedAt},{project:"enterprise"})),d.createElement(T.Z.Label,{"font-size":2,m:0},(0,q._6)({one:"1 instance",other:"{%n} instances"},$e.usageCount,null,{project:"enterprise"}))))},Me=He=>{let{cardProps:$e,onSelect:gt}=He;return d.createElement(xt,{onSelect:gt},d.createElement(T.Z.Subtitle,{m:0},$e.name),d.createElement(Mn.Z,{as:O.Z,direction:"row",justifyContent:"space-between",of:A.Z,space:1},d.createElement(T.Z.Label,{color:"gray.300","font-size":2,m:0},(0,q.t)("Last updated {lastUpdatedDate}",{updatedAt:$e.updatedAt},{project:"enterprise"})),d.createElement(T.Z.Label,{color:"gray.300","font-size":2,m:0},(0,q.t)("{instanceCount} instances ",{instancesCount:$e.usageCount},{project:"enterprise"}))))},et={[Ce.CODE]:le,[Ce.HTML]:Li},Ki=He=>{let{cardProps:$e,onSelect:gt}=He;const Ge=Object.keys(et).find(St=>St in $e),Dt=Ge?et[Ge]:Me;return d.createElement(Dt,{onSelect:gt,cardProps:$e})};var pi=t(102258),Mi=t(845076),vn=t.n(Mi),ln=t(516865),Sn=t(105586),an=t(83443),dn=t(100310),W=t(208935);const Zi=(0,q.t)("Sort By",null,{project:"enterprise"});function Zn(He){let{disabled:$e,label:gt,sortDirection:Ge}=He;const Dt=Ge===je.DESC?Sn.Z:an.Z,St=$e?"gray.600":"black";return d.createElement(O.Z,{alignItems:"center","aria-label":Zi,role:"button"},d.createElement(Dt,{color:St,sx:{mr:2}}),d.createElement(T.Z.Action,{color:St,sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},gt))}function pn(He){return d.createElement(ln.Z.Tertiary,{size:"medium",sx:{overflow:"visible"},tabIndex:"-1",disabled:He.disabled},d.createElement(Zn,He))}function Yi(He){return d.createElement(dn.Z,null,$e=>d.createElement(d.Fragment,null,d.createElement(A.Z,{height:"100%",left:"0",onClick:He.onBlur||(()=>{var gt;(gt=He.setIsOpen)===null||gt===void 0||gt.call(He,!1),He.setFocusIndex(-1)}),position:"fixed",top:"0",width:"100%",zIndex:$e}),d.createElement(pi.Z.Dropdown.Overlay,{...He,className:vn()(He.className,W.BLOCK_FOCUS_IGNORE_CLASSNAME),enableOverlay:!1,style:{minWidth:"fit-content",zIndex:$e}})))}const Un=(0,d.forwardRef)((He,$e)=>d.createElement(pi.Z.Display,{...He,ref:$e,className:W.BLOCK_FOCUS_IGNORE_CLASSNAME,label:He.labelOverride||He.label}));var qi=t(545334),ls=t.n(qi),ct=t(456903);async function fe(He,$e){const gt=await ct.default.get("/api/organization-content-library/"+$e+"/?"+new URLSearchParams(He).toString());return gt.data.results.length&&(gt.data.results=gt.data.results.map(Ge=>({...Ge,updatedAt:Ge.updatedAt?ls()(Ge.updatedAt).format("MMM D, YYYY h:mmA"):""}))),gt.data}const it={content:[],error:!1,loading:!1,totalElements:0,totalPages:0,page:0,size:12,query:"",sort:Ft[0]};function wi(He,$e){switch($e.type){case"SET_LOADING":return{...He,loading:$e.payload};case"SET_DATA":return{...He,content:$e.payload.content,totalElements:$e.payload.totalElements,totalPages:$e.payload.totalPages,loading:!1};case"SET_ERROR":return{...He,error:$e.payload,loading:!1};case"SET_PAGE":return{...He,error:!1,loading:!0,page:$e.payload};case"SET_SIZE":return{...He,error:!1,loading:!0,page:0,size:$e.payload};case"SET_QUERY":return{...He,error:!1,loading:!0,query:$e.payload};case"SET_SORT":return{...He,error:!1,loading:!0,sort:{...He.sort,...$e.payload}};default:return He}}const Fi=(0,d.createContext)({state:it,dispatch:()=>{}}),fn=He=>{let{contentType:$e,children:gt}=He;const[Ge,Dt]=(0,d.useReducer)(wi,it);return(0,d.useEffect)(()=>{async function St(){try{const kt=await fe({page:Ge.page.toString(),size:Ge.size.toString(),sortBy:Ge.sort.sortBy,sortDirection:Ge.sort.sortDirection,query:Ge.query},$e);if(kt)Dt({type:"SET_DATA",payload:{content:kt.results,totalElements:kt.totalElements,totalPages:kt.totalPages}});else throw new Error("Unable to get summaries")}catch(kt){Dt({type:"SET_ERROR",payload:kt})}}St()},[Ge.page,Ge.size,Ge.query,Ge.sort,$e]),d.createElement(Fi.Provider,{value:{state:Ge,dispatch:Dt}},gt)},ki=()=>{const He=(0,d.useContext)(Fi);if(!He)throw new Error("useGlobalContentContext must be used within a provider");return He},un=He=>({type:"SET_PAGE",payload:He}),Xn=He=>({type:"SET_SIZE",payload:He}),ne=He=>({type:"SET_QUERY",payload:He}),Xe=He=>({type:"SET_SORT",payload:He}),Qe=fn;function wt(){const{state:{content:He,sort:$e},dispatch:gt}=ki();function Ge(Dt){ti.U3.trackUserClicksEnterpriseButton({objectIdentifier:"sort",productArea:ti.Wl.ORGANIZATION_CONTENT_SELECT_FIELD,value:`${Dt.sortBy}-${Dt.sortDirection}`}),gt(Xe(Dt))}return d.createElement(pi.Z.Base,{"data-testid":"sorting-dropdown",exteriorAccessory:null,interiorAccessory:null,label:d.createElement(pn,{...$e,disabled:He.length<1}),onChange:Ge,p:1,placement:"bottom",renderDisplay:Un,renderDropdown:Yi,value:$e,width:"276px"},Ft.map(Dt=>d.createElement(pi.Z.Option,{key:`${Dt.sortDirection}-${Dt.sortBy}`,value:Dt},Dt.label)))}const ai=wt;var Hi=t(967552),Xt=t(219190),we=t(566288),Ke=t(833744),ge=t(842132);function zt(He,$e){const gt=(0,d.useRef)();return(0,d.useCallback)(function(){for(var Dt=arguments.length,St=new Array(Dt),kt=0;kt<Dt;kt++)St[kt]=arguments[kt];gt.current!==void 0&&window.clearTimeout(gt.current),gt.current=window.setTimeout(()=>{He(...St)},$e)},[He,$e])}const Ht=zt,bt=(0,q.t)("Search",null,{project:"enterprise"}),he=(0,q.t)("Clear",null,{project:"enterprise"}),Wt=()=>{const{state:{query:He},dispatch:$e}=ki(),[gt,Ge]=(0,d.useState)(!1),[Dt,St]=(0,d.useState)(He),kt=(0,d.useRef)(null),vi=Ht($e,500),Yt={sx:{overflowX:gt?"visible":"hidden",width:gt?"150px":0}};(0,d.useEffect)(()=>{if(gt){var Qi;(Qi=kt.current)===null||Qi===void 0||Qi.focus()}else{var en;(en=kt.current)===null||en===void 0||en.blur()}},[gt]);const li=Qi=>{St(Qi),vi(ne(Qi))};return d.createElement(Ke.Z.Input,{autoFocus:!1,exteriorAccessory:gt&&Dt?d.createElement(Hi.Z.Element.Icon,{"aria-label":(0,q.t)("Close",null,{project:"enterprise"}),my:-4,onClick:()=>{var Qi;li(""),kt==null||(Qi=kt.current)===null||Qi===void 0||Qi.focus()}},d.createElement(Xt.Z,{sx:{opacity:1,transition:"opacity 500ms 500ms"}})):null,exteriorPre:d.createElement(Hi.Z.Element.Icon,{"aria-label":gt?bt:he,"data-testid":"expand-search",my:-4,onClick:()=>{Ge(!gt)},onFocus:()=>{var Qi;(Qi=kt.current)===null||Qi===void 0||Qi.click()}},d.createElement(we.Z,null)),inputRef:kt,inputValue:Dt,"data-testid":"search-bar",onChange:li,onFocus:()=>{Ge(!0)},onInput:li,onKeyDown:Qi=>{ge.Z.isEnter(Qi)&&(Qi.preventDefault(),Qi.stopPropagation(),Ge(!1)),ge.Z.isEsc(Qi)&&(Qi.stopPropagation(),Ge(!1))},placeholder:bt,sx:{width:gt?"200px":"sizes.175",transition:"width 300ms","&:focus-within":gt?{outline:"2px solid",outlineColor:"border.strong",transition:"outline 50ms 100ms, outline-color 50ms 100ms"}:{}},textInputProps:Yt,value:Dt,variant:gt?"floating":""})},fi=()=>d.createElement(O.Z,{justifyContent:"space-between",alignItems:"center"},d.createElement(ai,null),d.createElement(Wt,null));var Ri=t(443416),Be=t(477743);const Bi=()=>{const{state:{page:He,size:$e,totalElements:gt,content:Ge,totalPages:Dt},dispatch:St}=ki(),kt=Ge.length,vi=Ge.length<1,Yt=Dt>He+1,li=He*$e,Qi=li>0;let en,Wi;gt?(en=Math.min(li+$e,gt),Wi=(0,q.t)("{rowStart}-{rowEnd} of {totalElements} items",{rowStart:li+1,rowEnd:en,totalElements:gt},{project:"enterprise"})):(en=li+kt,Wi=kt===0?0:`${li+1}-${en}`);function wn(ns){ti.U3.trackUserClicksEnterpriseButton({objectIdentifier:"update-page-size",productArea:ti.Wl.ORGANIZATION_CONTENT_SELECT_FIELD,value:String(ns)}),St(Xn(ns))}function qn(){ti.U3.trackUserClicksEnterpriseButton({objectIdentifier:"pagination--prev",productArea:ti.Wl.ORGANIZATION_CONTENT_SELECT_FIELD}),St(un(He-1))}function Jn(){ti.U3.trackUserClicksEnterpriseButton({objectIdentifier:"pagination--next",productArea:ti.Wl.ORGANIZATION_CONTENT_SELECT_FIELD}),St(un(He+1))}return d.createElement(O.Z,{alignItems:"center",justifyContent:"space-between"},d.createElement(pi.Z.Base,{"aria-labelledby":"table-size","data-testid":"table-size",labelOverride:(0,q.t)("{size} per page",{size:$e},{project:"enterprise"}),onChange:wn,placement:"bottom",px:1,renderDisplay:Un,renderDropdown:Yi,value:$e},d.createElement(pi.Z.Option,{sx:{color:"gray.300"},value:12},(0,q.t)("12",null,{project:"enterprise"})),d.createElement(pi.Z.Option,{sx:{color:"gray.300"},value:24},(0,q.t)("24",null,{project:"enterprise"}))),d.createElement(O.Z,{alignItems:"center"},d.createElement(Hi.Z.Element.Icon,{"data-testid":"previous-page",disabled:vi||!Qi,onClick:qn},d.createElement(Ri.Z,{color:vi||!Qi?"gray.600":"gray.100"})),d.createElement(T.Z.Caption,{color:"gray.300",m:0,px:3},Wi),d.createElement(Hi.Z.Element.Icon,{"data-testid":"next-page",disabled:vi||!Yt,onClick:Jn},d.createElement(Be.Z,{color:vi||!Yt?"gray.600":"gray.100"}))))};var Tn=t(787592);const Ln=(0,q.t)("An error has occurred. Please try again later.",null,{project:"enterprise"}),kn=(0,q.t)("No search results",null,{project:"enterprise"}),hi=He=>d.createElement(A.Z,{m:"auto",py:B.sizes.sizes[450],space:3,sx:{textAlign:"center"},width:B.sizes.sizes[750],...He}),di=(0,d.memo)(He=>{let{children:$e}=He;const{state:{error:gt,loading:Ge}}=ki();return gt?((0,Tn.Tb)(gt),d.createElement(hi,null,d.createElement(T.Z.Title,{color:"gray.300",mb:"3",p:0},Ln))):Ge?d.createElement(hi,null,d.createElement(O.Z,{alignItems:"center",justifyContent:"center"},d.createElement(zi.Z,null))):d.createElement(d.Fragment,null,$e)}),Cs=He=>{let{onSelect:$e,contentType:gt,baseUrl:Ge}=He;const{selectTitle:Dt,description:St,ManageLink:kt,noContent:vi,noContentLearnMore:Yt}=qt(gt,Ge),{state:li}=ki();function Qi(){ti.U3.trackUserClicksEnterpriseLink({productArea:ti.Wl.ORGANIZATION_CONTENT_SELECT_FIELD,objectIdentifier:`empty-learn-more--${gt}`})}return d.createElement(A.Z,{px:"138px"},d.createElement(gn.Z.ContentTitle,{as:T.Z.Title},Dt),d.createElement(T.Z.Subtitle,{color:"gray.300"},St," ",(0,Mt.RN)()&&d.createElement(kt,null)),d.createElement(fi,null),d.createElement(di,null,li.content.length?d.createElement(O.Z,{flexDirection:"column",pb:10},d.createElement(Mn.Z,{space:2,pb:3},li.content.map(en=>d.createElement(Ki,{key:en.id,onSelect:function(){ti.U3.trackUserClicksEnterpriseButton({productArea:ti.Wl.ORGANIZATION_CONTENT_SELECT_FIELD,objectIdentifier:`preview-card--${gt}`,value:en.id}),$e(en.id)},cardProps:en}))),li.size===12&&li.totalPages<=1?null:d.createElement(Bi,null)):li.query===""?d.createElement(hi,null,d.createElement(T.Z.Title,{color:"gray.300",mb:"3",p:0},vi),d.createElement(Lt.Z,{mb:"3",p:0,textStyle:"body",href:Zt.CREATING_GLOBAL_CONTENT_IN_DESIGN_LIBRARY_ABS,onClick:Qi},Yt)):d.createElement(hi,null,d.createElement(T.Z.Title,{fontWeight:"semibold",color:"gray.300",textAlign:"center"},kn))))},Qn=(0,q.t)("Cancel",null,{project:"enterprise"}),cs=He=>{let{isOpen:$e,onClose:gt,...Ge}=He;function Dt(){ti.U3.trackUserClicksEnterpriseButton({productArea:ti.Wl.ORGANIZATION_CONTENT_SELECT_FIELD,objectIdentifier:`close-modal--${Ge.contentType}`}),gt()}return d.createElement(Qe,{contentType:Ge.contentType},d.createElement(ui.Z.Transition,null,$e&&d.createElement(ui.Z,{onRequestClose:gt},d.createElement(ui.Z.Overlay,null),d.createElement(ui.Z.Position,{position:"center"},d.createElement(ui.Z.Dialog.ResponsiveProvider,{aspectRatio:1.2},d.createElement(ui.Z.Dialog,{sx:{scrollbarGutter:"stable"}},d.createElement(gn.Z.Provider,{isActive:!0},d.createElement(O.Z,{tabIndex:0,className:W.BLOCK_FOCUS_IGNORE_CLASSNAME,flexDirection:"column",height:"100%"},d.createElement(O.Z,{boxSizing:"content-box",height:"sizes.400",flexShrink:0,px:8,pt:4,justifyContent:"space-between"},d.createElement(ln.Z.Tertiary,{onClick:Dt,sx:{paddingX:2}},Qn)),d.createElement(gn.Z.Content,{as:O.Z,flexGrow:0,overflowY:"auto"},d.createElement(Cs,Ge))))))))))},Ls=He=>{let{baseUrl:$e,contentType:gt,hasDivider:Ge,icon:Dt,onChange:St}=He;const[kt,vi]=(0,d.useState)(!1),{selectTitle:Yt}=qt(gt,$e);function li(){vi(!0),ti.U3.trackUserClicksEnterpriseButton({productArea:ti.Wl.ORGANIZATION_CONTENT_SELECT_FIELD,objectIdentifier:`select-content--${gt}`})}function Qi(en){vi(!1),St(en)}return d.createElement(d.Fragment,null,d.createElement(Vt,{enabled:Ge},d.createElement(lt.Z,{ariaLabel:Yt,tabIndex:0,disabled:!1,onClick:li},Dt?d.createElement(Ie.Z,{src:Dt,alt:"",preventLayoutShift:!0,mr:"1"}):null,d.createElement(T.Z.Action,null,Yt))),d.createElement(cs,{isOpen:kt,onClose:()=>vi(!1),onSelect:Qi,contentType:gt,baseUrl:$e}))},ea=He=>{const $e=He.value?Ni:Ls;return d.createElement($e,He)},Fa=(0,q.t)("Edit",null,{project:"apps.App"}),As=He=>{let{icon:$e,label:gt}=He;const Ge=(0,u.Ze)(D.Pr$),Dt=gt||Fa,St=()=>{var kt;const vi=Ge==null?void 0:Ge.blockEditor,Yt=vi==null||(kt=vi._editorInterface)===null||kt===void 0?void 0:kt.getContentEditors();Yt!=null&&Yt.length&&(Yt[0].showBlockContentEditor(),vi==null||vi.closeEditor())};return d.createElement(I.Wx,{ariaLabel:Dt,label:Dt,onClick:St},$e?d.createElement(Ie.Z,{src:$e,alt:"",preventLayoutShift:!0}):d.createElement(g.Z,{color:"black"}))},ta=()=>d.createElement(A.Z,{borderLeft:1,borderLeftColor:"gray.800",height:"20px"});var Ma=t(436715),Ha=t(629478);const{setJsonPointerValue:Qa}=y.jsonPointerUtils,Po={buttontypedropdownselect:ye,dividerfield:Fe,group:C.group,linkeditor:I.sQ,quickactioncolorpickerfield:I.F8,quickactionblockeditorbutton:Se,quickactionorganizationcontentselectfield:ea,quickactioniconselectfield:I.U6,quickactionselectfield:I.Hi,quickactionfocusrtebutton:As},ao=(He,$e,gt)=>({...gt,default:{schema:$e.jsonSchema,uiSchema:$e.quickActionsUiSchema,value:He}}),Ho=He=>{let{children:$e}=He;return d.createElement(O.Z,{alignItems:"center",sx:{gap:"4px"}},$e)},Mo=He=>{let{children:$e}=He;return d.createElement("div",null,$e)},ya=He=>{let{blockTypeName:$e,sourceType:gt,config:Ge,value:Dt,containerStyles:St,onChange:kt,hostNode:vi,includeDividerRight:Yt}=He;const li=(0,d.useMemo)(()=>({eventMetadata:{schema:{type:"object",properties:{}},uiSchema:[],value:{blockTypeName:$e,productPage:`${gt}-quick-action`,...(0,i.Z)(vi)}},environmentVariables:{schema:{type:"object",properties:{}},uiSchema:[],value:{isInFluidEngine:(0,Ma.yR)(vi)}},containerStyles:{schema:Ha.Z,uiSchema:[],value:St}}),[$e,vi,gt,St]),Qi=wn=>{const{changes:{default:{diff:qn}}}=wn,Jn=Object.entries(qn).reduce((Ws,$n)=>{let[ss,Vi]=$n;return Qa(Ws,ss,Vi)},Dt),ns={...wn,nextConfigurations:ao(Jn,Ge,li)};kt(Jn,ns)},en=Ge?Ge.resolvers:null,Wi=en?{resolvers:en}:{};return d.createElement(d.Fragment,null,d.createElement(A.Z,{className:"sqs-quick-actions","data-quick-actions-button":""},d.createElement(S.Formodule,{renderHeader:()=>null,renderDebugComponent:()=>null,renderTransition:Mo,renderComponentList:Ho,onChange:Qi,components:Po,configurations:ao(Dt,Ge,li),...Wi})),Yt?d.createElement(ta,null):null)};var ua=t(302975),Sa=t(330718),Ro=t(365270),sa=t(429569),go=t(860962),fs=t(949642),Ct=t(929698),da=t(554973),Ds=t(897820),Vn=t(175424),bn=t(167078),hn=t(101382);const{MOBILE:Ts}=Ro.FluidEngineBreakpoints,Fs=(0,bn.Z)()?"OPTION":"ALT",ts=[Fs,"\u2191"],In=[Fs,"\u2193"];function jo(He){let{blockId:$e,sectionId:gt}=He;const Ge=(0,u.zC)(),Dt=(0,Vn.V6)(),St=(0,d.useRef)(null),kt=(0,u.Ze)(qn=>(0,D.NlV)(qn,gt));if(!kt)throw new Error("fluidEngineContext not found when attempting to swap blocks");const vi=(0,d.useCallback)(()=>{setTimeout(function(){const qn=(0,Ct.HF)($e);if(!qn||!Dt)return;const Jn=document.querySelector(`.${W.ESCMANAGER_IGNORE_CLASSNAME}`);if(!Jn)return;const Ws=qn.getBoundingClientRect().top,$n=Jn.getBoundingClientRect().top,ss=Ws-$n+hn.Sf;Dt.scrollBy({top:ss,behavior:"smooth"})},0)},[$e,Dt]),Yt=(0,d.useCallback)(qn=>{Ge((0,Ds.aY)(!0)),St.current&&clearTimeout(St.current),Ge((0,Sa.cR)({sectionId:gt,blockId:$e,direction:qn})),Ge((0,Ds.yI)({sectionId:gt,blockIds:new Set})),(0,da.tk)({blockId:$e,direction:qn,isKeyboard:!1}),vi(),St.current=setTimeout(function(){Ge((0,Ds.aY)(!1))},1e3)},[Ge,gt,$e,vi]),li=(0,d.useMemo)(()=>(0,fs.MQ)(kt.gridContents,Ts)||[],[kt]),{blockIndex:Qi,onlyBlockInGroup:en}=(0,d.useMemo)(()=>{var qn;const Jn=li==null?void 0:li.findIndex(ns=>ns.find(Ws=>Ws===$e));return{blockIndex:Jn,onlyBlockInGroup:((qn=li[Jn])===null||qn===void 0?void 0:qn.length)===1}},[li,$e]),Wi=Qi===0&&en,wn=Qi===li.length-1&&en;return Wi&&wn?null:d.createElement(d.Fragment,null,d.createElement(ua.Z,{disabled:Wi,label:(0,q.t)("Move Up",null,{project:"apps.App"}),onClick:()=>Yt("UP"),controls:ts},d.createElement(sa.Z,{color:Wi?"gray.600":"gray.100"})),d.createElement(ua.Z,{disabled:wn,label:(0,q.t)("Move Down",null,{project:"apps.App"}),onClick:()=>Yt("DOWN"),controls:In},d.createElement(go.Z,{color:wn?"gray.600":"gray.100"})))}var Ja=t(98386),Bs=t.n(Ja),ms=t(853522),po=t(241834),Ks=t.n(po),xn=t(474839),Ns=t.n(xn),or=t(781147),zo=t.n(or),fo=t(839490);const ks=[Bs().TOP,Bs().CENTER,Bs().BOTTOM],Bo=[{icon:zo(),label:(0,q.t)("Align Top",null,{project:"apps.App"})},{icon:Ns(),label:(0,q.t)("Align Center",null,{project:"apps.App"})},{icon:Ks(),label:(0,q.t)("Align Bottom",null,{project:"apps.App"})}];function Va(He){let{blockId:$e,sectionId:gt,deviceKey:Ge}=He;const Dt=(0,u.zC)(),St=(0,u.Ze)(ms.aY),kt=(0,d.useMemo)(()=>{const li=St[gt];return li?li.fluidEngineContext.gridContents:null},[St,gt]),vi=(0,d.useCallback)(li=>{(0,da.WI)({blockIds:[$e],alignValue:li}),Dt((0,Sa.Gr)({sectionId:gt,blockId:$e,verticalAlignment:li,deviceKey:Ge}))},[Dt,gt,$e,Ge]),Yt=kt==null?void 0:kt.find(li=>(0,fs.IF)(li)===$e);return Yt?d.createElement(fo.Z,{dataTest:"fluid-engine-vertical-alignment",value:Yt.layout[Ge].verticalAlignment,enum:ks,enumAnnotation:Bo,onChange:vi,hoverTitle:(0,q.t)("Align Vertically",null,{project:"apps.App"})}):null}var st=t(48992),ve=t(952352),mt=t(681975),Ii=t(120497);const Ei=["SHIFT","\u2191"],Ci=["SHIFT","\u2193"];function Xi(He){let{blockId:$e,sectionId:gt,onVisibilityChange:Ge}=He;const Dt=(0,u.zC)(),St=(0,Ma.er)(),kt=(0,d.useMemo)(()=>(0,Vn.wo)(),[]),vi=(0,u.Ze)(ms.aY),Yt=(0,d.useMemo)(()=>{const Vi=vi[gt];return Vi?Vi.fluidEngineContext.gridContents:null},[vi,gt]),li=(0,d.useMemo)(()=>(Yt==null?void 0:Yt.find(Vi=>(0,fs.IF)(Vi)===$e))||null,[$e,Yt]),Qi=(0,d.useCallback)(Vi=>{li&&((0,da.KM)({blockIds:[$e],isKeyboard:Vi}),Dt((0,Sa.ZT)({sectionId:gt,deviceKey:St,direction:1})))},[$e,St,li,gt,Dt]),en=(0,d.useCallback)(Vi=>{li&&((0,da.KM)({blockIds:[$e],isKeyboard:Vi}),Dt((0,Sa.ZT)({sectionId:gt,deviceKey:St,direction:-1})))},[$e,St,li,gt,Dt]),Wi=(0,d.useMemo)(()=>Yt==null?void 0:Yt.some(Vi=>{var is;return(is=Vi.layout[St].stickyScroll)===null||is===void 0?void 0:is.enabled}),[Yt,St]),wn=(0,d.useMemo)(()=>{let Vi=!1,is=!1;if(!Yt||!li)return{hasIntersectingBlocksInFront:Vi,hasIntersectingBlocksBehind:is};const Kn=li.layout[St].zIndex;for(const us of Yt){if((0,fs.IF)(us)===(0,fs.IF)(li))continue;if((((0,Ii.Z)()?(0,mt.oV)(li,us,St):(0,Ma.ln)(li.layout[St],us.layout[St]))||Wi)&&(Vi=Vi||Kn<us.layout[St].zIndex,is=is||Kn>us.layout[St].zIndex),Vi&&is)break}return{hasIntersectingBlocksInFront:Vi,hasIntersectingBlocksBehind:is}},[Yt,St,li,Wi]),{hasIntersectingBlocksInFront:qn,hasIntersectingBlocksBehind:Jn}=wn,ns=qn||Jn,Ws=(0,d.useCallback)(Vi=>{if(!ns)return;const is=Vi.key==="ArrowUp",Kn=Vi.key==="ArrowDown";!Vi.shiftKey||!is&&!Kn||Vi.metaKey||(Vi.stopPropagation(),Vi.preventDefault(),is&&qn&&Qi(!0),Kn&&Jn&&en(!0))},[Qi,en,ns,qn,Jn]);(0,st.Z)("keydown",Ws,{useCapture:!0,element:kt==null?void 0:kt.body}),(0,st.Z)("keydown",Ws,{useCapture:!0,element:document.body});const $n=!wn.hasIntersectingBlocksInFront,ss=!wn.hasIntersectingBlocksBehind;return(0,d.useEffect)(()=>{Ge(ns)},[ns,Ge]),ns?d.createElement(d.Fragment,null,d.createElement(ua.Z,{key:"move-forward",disabled:$n,forceHideTooltip:$n,label:(0,q.t)("Move Forward",null,{project:"apps.App"}),controls:Ei,onClick:()=>Qi(!1),color:$n?"gray.600":"gray.100"},ve.f),d.createElement(ua.Z,{key:"move-backward",disabled:ss,forceHideTooltip:ss,label:(0,q.t)("Move Backward",null,{project:"apps.App"}),controls:Ci,onClick:()=>en(!1),color:ss?"gray.600":"gray.100"},ve.R)):null}var Fn=t(217169),re=t(722195),We=t(61266),yt=t(403669),_t=t(857311),at=t(658211),Nt=t(562103),ri=t(139717),Qt=t(23009),Ai=t(862335),tn=t(917334),An=t.n(tn),rs=t(209720);function Oe(He){const $e=(0,Ai.k)(He);return $e?{value:$e.num,unit:$e.unit}:null}function rt(He){return`${He.value??0}${He.unit??"px"}`}function It(He){let{blockId:$e,sectionId:gt}=He;const Ge=(0,u.zC)(),Dt=(0,Ma.er)(),[St,kt]=(0,d.useState)(!1),[vi,Yt]=(0,d.useState)(!0),li={value:0,unit:"px"},Qi=Bs().TOP,[en,Wi]=(0,d.useState)({[Bs().TOP]:li,[Bs().BOTTOM]:li,[Bs().CENTER]:li}),[wn,qn]=(0,d.useState)(Qi),Jn=(0,d.useRef)(null),ns=(0,Vn.V6)(),Ws=ns==null?void 0:ns.document.scrollingElement,$n=(0,u.Ze)(ps=>(0,ms.cQ)(ps,gt,$e,Dt)??{enabled:!1,offset:li,position:Qi}),ss=(0,d.useCallback)(ps=>{let{enabled:Ba,position:yo,offset:pa}=ps;Ge((0,Sa._M)({enabled:Ba,position:yo,offset:pa,sectionId:gt,deviceKey:Dt})),pa&&Wi({...en,[yo??wn]:pa})},[Ge,gt,Dt,en,wn]),Vi=ps=>{ps==="none"?(ss({enabled:!1}),kt(!1),(0,da._Q)({blockId:$e,enabled:!1})):((0,da.e1)({blockId:$e,position:ps}),qn(ps),ss({enabled:!0,position:ps,offset:en[ps]}))},is=ps=>{(0,da.Mm)({blockId:$e,offset:ps});const Ba=Oe(ps);Ba&&ss({offset:Ba})},Kn=()=>{Yt(!1),$n.enabled||(ss({enabled:!0,position:$n.position,offset:$n.offset}),(0,da._Q)({blockId:$e,enabled:!0})),qn($n.position),Wi({...en,[$n.position]:$n.offset}),kt(!St)},us=(0,d.useCallback)(ps=>{var Ba;(!ps||!(!((Ba=Jn.current)===null||Ba===void 0)&&Ba.contains(ps.target)))&&kt(!1)},[]);if((0,Qt.Z)(us),!$n)return null;const Eo={transition:"none",borderRadius:2},ga=(0,rs.Z)(Jn.current,"bottom",25);return d.createElement(d.Fragment,null,d.createElement(A.Z,{ref:Jn,display:"inline-block"},d.createElement(ua.Z,{key:"fluid-engine-sticky-scroll",label:(0,q.t)("Pin",null,{project:"src.seven-one"}),onClick:Kn,color:"gray.100",sx:{marginRight:"4px"}},d.createElement("svg",{className:vn()(An().pin,{[An().pinned]:$n.enabled,[An().delayAnimation]:vi}),width:"20",height:"20",viewBox:"0 0 20 20"},d.createElement("polygon",{points:"4.859,9.565 12.394,3.705 12.446,3.646 12.8,3.292 16.705,7.197 16.256,7.652 10.434,15.143 "}),d.createElement("path",{d:"M12,0l-1.601,1.6L11.2,2.4L4,8L2.4,6.4L0.8,8l4.8,4.801L0,18.4V20h1.6l5.6-5.6L12,19.2l1.6-1.6L12,16l5.6-7.2l0.8,0.8L20,8 L12,0z M15.9,7.3l-5.513,7.088L5.613,9.612l7.088-5.513L12.8,4L16,7.199L15.9,7.3z"})))),d.createElement(ri.Z,{anchor:Jn.current,position:"bottom",offset:ga,closeOnEsc:!0,isOpen:St,hideArrow:!0,onRequestClose:()=>kt(!1),bodyStyles:Eo,style:Eo,scrollNode:Ws,recalculateAnchorOnScroll:!0},d.createElement(Fn.default,{disabled:!St,returnFocus:!0},d.createElement(A.Z,{px:4,py:3,className:W.NONINTERACTIVE_CLASSNAME,"data-quick-actions-popover":""},d.createElement(We.Z,{label:(0,q.t)("Pin",null,{notes:"Label for block editor toolbar item allowing application of CSS sticky position",project:"src.seven-one"}),enum:[Bs().TOP,Bs().CENTER,Bs().BOTTOM,"none"],enumAnnotation:[{icon:d.createElement(yt.Z,null),label:(0,q.t)("Pin to Top on Scroll",null,{notes:"Label for icon button to pin block to top of section",project:"src.seven-one"}),showLabel:!1},{icon:d.createElement(_t.Z,null),label:(0,q.t)("Pin to Center on Scroll",null,{notes:"Label for icon button to pin block to center of section",project:"src.seven-one"}),showLabel:!1},{icon:d.createElement(at.Z,null),label:(0,q.t)("Pin to Bottom on Scroll",null,{notes:"Label for icon button to pin block to bottom of section",project:"src.seven-one"}),showLabel:!1},{icon:d.createElement(Nt.Z,null),label:(0,q.t)("Remove Pin",null,{notes:"Label for icon button to remove pinning from block",project:"src.seven-one"}),showLabel:!1}],onChange:Vi,value:$n.position}),$n.enabled?d.createElement(re.Z,{label:(0,q.t)("Offset",null,{notes:"Label for control adjusting offset of sticky scroll pinning",project:"src.seven-one"}),showTicks:!0,hideDivider:!0,onChange:is,value:rt($n.offset),min:$n.position===Bs().CENTER?-125:0,max:$n.position===Bs().CENTER?125:250,step:1}):null))))}var Bt=t(774439);const yi=(0,bn.Z)()?["\u2318","D"]:["CTRL","D"],nn=(0,q.t)("Duplicate",null,{project:"apps.App"});function vs(He){let{sectionId:$e,blockId:gt}=He;const Ge=(0,u.zC)(),Dt=(0,Ma.er)(),St=(0,d.useMemo)(()=>(0,h.debounce)(()=>Ge((0,Ds.yt)({sectionId:$e,blockIds:[gt],deviceKey:Dt,sourceAction:"button"})),500,{leading:!0,trailing:!1}),[Ge,$e,gt,Dt]);return d.createElement(ua.Z,{key:"duplicate-block",label:nn,onClick:St,controls:yi},d.createElement(Bt.Z,null))}var Gs=t(930628),wa=t(874644),Ra=t(315061);const mo=(0,bn.Z)()?["DELETE"]:["BACKSPACE"],vo=He=>{let{blockId:$e,blockType:gt,sectionId:Ge,quickActionsConfig:Dt,blockIsDeprecated:St,blockNode:kt,boundingBox:vi,includeQuickActions:Yt,includeMobileBlockSwapButtons:li,includeFluidEngineVerticalAlignment:Qi,includeFluidEngineLayerManagement:en,includeEdit:Wi,includeRemove:wn,inFluidEngine:qn,handleEditButton:Jn,handleRemoveButton:ns}=He;const Ws=(0,u.zC)(),$n=(0,Ma.er)(),ss=(0,u.Ze)(D.Hlz)===m.Z.PHONE,Vi=(0,u.Ze)(D.aEP),is=(0,u.Ze)(D.m1X),Kn=(0,u.Ze)(D.$On),us=(0,u.Ze)(D.BoH),Eo=(0,d.useMemo)(()=>Es=>(0,D.jAX)(Es,$e),[$e]),ga=(0,u.Ze)(Eo),ps=(0,d.useMemo)(()=>vi.closest(".standard-dialog-wrapper, [data-modal-id]"),[vi]),[Ba,yo]=(0,d.useState)(!1),[pa,So]=(0,d.useState)(null),ba=document.body.querySelector(".standard-dialog-wrapper"),lr=!!(ga&&!is&&!us&&!Kn&&(ps||Vi===wa.hn.PAGE_EDIT_FULL_SCREEN&&!ba)),tl=(0,d.useMemo)(()=>(0,h.debounce)(Es=>Ws((0,Ds.y8)({sectionId:Ge,blockIds:Es,isKeyboard:!1})),500,{leading:!0,trailing:!1}),[Ws,Ge]),il=gt===_.Z.HTML,wr=(0,d.useMemo)(()=>[{include:!St&&Wi,component:d.createElement(d.Fragment,{key:"block-edit-button"},d.createElement(ua.Z,{label:(0,q.t)("Edit",null,{project:"apps.App"}),onClick:()=>Jn()},d.createElement(g.Z,{color:"black"})),d.createElement(Ra.Z,null))},{include:!St&&Wi&&il,component:d.createElement(d.Fragment,{key:"container-styles-edit-button"},d.createElement(ua.Z,{label:(0,q.t)("Style Background",null,{project:"apps.App"}),onClick:()=>Jn(!0)},d.createElement(p.Z,{color:"black"})))},{include:!St&&Yt,component:d.createElement(ya,{key:"quick-actions",...Dt})}],[St,Jn,Wi,Yt,il,Dt]),Zo=!St&&Qi,oa=!St&&en,Yn=!St&&ss&&li,cr=qn,mn=(0,d.useMemo)(()=>[{include:Zo,component:d.createElement(Va,{key:"fluid-vertical-align",sectionId:Ge,blockId:$e,deviceKey:$n})},{include:cr,component:d.createElement(It,{key:"fluid-sticky-scroll",sectionId:Ge,blockId:$e})},{include:oa,component:d.createElement(Xi,{key:"layer-management",sectionId:Ge,blockId:$e,onVisibilityChange:yo})},{include:Yn,component:d.createElement(jo,{key:"mobile-swap",sectionId:Ge,blockId:$e})},{include:Zo||oa&&Ba||Yn,component:d.createElement(Ra.Z,null)}],[$e,Yn,Zo,$n,oa,cr,Ba,Ge]),nl=(0,d.useMemo)(()=>[{include:!St&&!ss&&qn,component:d.createElement(vs,{key:"duplicate-block",blockId:$e,sectionId:Ge})},{include:wn,component:d.createElement(ua.Z,{key:"remove-block",label:(0,q.t)("Remove",null,{project:"apps.App"}),onClick:()=>{qn?tl([$e]):ns()},controls:mo},d.createElement(f.Z,{color:"red.400"}))}],[$e,St,tl,ss,qn,ns,wn,Ge]),Fl=(0,d.useMemo)(()=>wr.concat(mn,nl),[wr,mn,nl]),Rr=(0,d.useCallback)((Es,Ca,ds)=>{const bo="[data-quick-actions-popover]",Xo=document.querySelector(bo);if(Xo){const ur=Xo.children,lo=ur[0],dr=ur[ur.length-1],Na=Xo.contains(ds);lo&&!Na&&Ca?(Es.preventDefault(),Es.stopPropagation(),lo.focus()):pa&&(lo===ds&&Es.shiftKey||dr===ds&&!Es.shiftKey)&&(Es.preventDefault(),Es.stopPropagation(),pa.focus())}},[pa]),sl=(0,d.useCallback)((Es,Ca,ds)=>{const bo=Ca.children.length-1,Xo=Ca.children[bo]===ds;(Ca.children[0]===ds&&Es.shiftKey||Xo&&!Es.shiftKey)&&kt.closest("[data-fluid-engine-block]").focus()},[kt]),Wl=(0,d.useCallback)(Es=>{const Ca=document.querySelector("[data-block-toolbar]"),ds=document.activeElement,bo=!!ds.closest("[data-quick-actions-button]");(Es.key==="Enter"||Es.key==="Return"||Es.key===" ")&&(bo&&pa===null?So(ds):bo&&pa&&So(null)),Es.key==="Tab"&&lr&&ds&&Ca&&(Rr(Es,bo,ds),sl(Es,Ca,ds))},[lr,pa,sl,Rr,So]);return(0,st.Z)("keydown",Wl,{element:document}),lr?d.createElement(Gs.Z,{"data-block-focus-handler-id":"react-block-annotation","data-test":"block-toolbar","data-block-toolbar":!0,isSelected:ga,blockNode:kt,tabIndex:0,blockId:$e},Fl.map(Es=>{let{include:Ca,component:ds}=Es;return Ca?ds:null})):null};var _o=t(663634),oo=t(859817);function ro(He){return d.createElement(oo.StatsigProvider,{client:(0,_o.GC)()},d.createElement(u.ZP,null,d.createElement(vo,He)))}var Go=t(475521),aa=t(970671),ha=[_.Z.MAP,_.Z.AUDIO],rr=[_.Z.BUTTON,_.Z.IMAGE,_.Z.SHAPE,_.Z.WEBSITE_COMPONENT];YUI.add("squarespace-block-editor-button-container",function(He){He.namespace("Squarespace.Block.Editor");var $e=He.Base.create("label",He.Squarespace.Widgets.SSWidget,[He.WidgetChild],{renderUI:function(){$e.superclass.renderUI.apply(this,arguments);var gt=He.Lang.sub(this.get("strings.labelTemplate"),this.toJSON());this.get("contentBox").append(gt)},toJSON:function(){return{blockName:this.get("host").get("blockName")}}},{CSS_PREFIX:"sqs-label",ATTRS:{blockName:{validator:He.Squarespace.AttrValidators.isString},"strings.labelTemplate":{value:"{blockName}",readOnly:!0}}});He.Squarespace.Block.Editor.ButtonContainer=He.Base.create("button",He.Squarespace.Widgets.SSWidget,[He.WidgetParent],{initializer:function(){this.publish("edit"),this.publish("remove")},destructor:function(){this._isDestroyed=!0,this.reactRoot&&window.setTimeout((function(){this.reactRoot.unmount(),this.reactRoot=null}).bind(this),0)},renderUI:function(){this.get("boundingBox").setAttribute("role","toolbar");var gt=this.get("blockType");gt&&a.isBlockTypeFeatureGated(gt)&&a.renderLogo({node:this.get("contentBox").getDOMNode(),blockType:gt});var Ge=this.get("host");function Dt(ga){return ga&&ga.config&&ga.config.quickActionsUiSchema}var St=this.get("boundingBox").getDOMNode();if(!St)return;var kt=St.closest("section"),vi=kt?kt.dataset.sectionId:null,Yt=(0,Ma.yR)(St),li=Yt,Qi=Ge.get("containerStyles")||{},en=gt===_.Z.IMAGE,Wi=Ge.get("editorSettings.layout.alwaysStretchedToFill"),wn=!en&&(Qi.stretchedToFill||ha.includes(gt)||Wi),qn=en&&Ge.get("model").get("stretch"),Jn=gt===_.Z.WEBSITE_COMPONENT&&Ge.get("definitionName")==="website.components.imageFluid"&&Ge.get("model").toJSON().stretch,ns=qn||Jn,Ws=wn||ns,$n=Yt&&!Ws;function ss(ga){if(!this._isDestroyed){var ps=rr.includes(gt)&&Dt(ga);this.reactRoot||(this.reactRoot=(0,o.createRoot)(St)),this.reactRoot.render(d.createElement(aa.Z,null,d.createElement(ro,{blockId:Ge.get("id"),blockType:gt,sectionId:vi,quickActionsConfig:ga,styleContainer:He.config.win.document.head,blockName:Ge.get("blockName"),blockNode:Ge.get("boundingBox").getDOMNode(),boundingBox:St,blockIsDeprecated:!!Ge.get("isDeprecated"),inFluidEngine:Yt,includeQuickActions:ps,includeMobileBlockSwapButtons:Yt,includeFluidEngineVerticalAlignment:$n,includeFluidEngineLayerManagement:li,includeEdit:this.get("includeEdit"),includeRemove:this.get("includeRemove"),handleEditButton:this.get("onEditClicked").bind(this),handleRemoveButton:this.handleRemoveButton.bind(this)})))}}var Vi=St.closest('[drag-preview="true"]');if(!Vi){var is=ss.bind(this),Kn=this.getQuickActionsConfig();if(typeof Kn.then=="function"){var us=16,Eo=setTimeout(function(){is()},us);Kn.then(function(ga){clearTimeout(Eo),is(ga)})}else is(Kn)}},bindUI:function(){this.get("host").get("model").after("change",this.renderUI,this),this.get("host").after("containerStylesChange",this.renderUI,this)},handleDelete:function(){var gt=this.get("host").get("blockTypeName");(0,Go.ld)({objectDisplayName:gt,objectValue:gt.toLowerCase()}),this.fire("remove")},handleRemoveButton:function(){s.Z.isSevenOne()?this.handleDelete():(0,r.Z)({onConfirm:this.handleDelete.bind(this)})},getQuickActionsConfig:function(){var gt=this.get("host"),Ge=gt.get("srcNode").getDOMNode(),Dt=gt.get("model").toJSON(),St=gt.get("blockTypeName").toLowerCase(),kt=e.default.blocks[St],vi=gt.get("containerStyles")||{};function Yt(en,Wi){var wn=gt.get("model").toJSON(),qn=Object.assign({blockTypeName:gt.get("trackingBlockTypeName")||gt.get("blockTypeName"),productPage:"block-editor",blockId:gt.get("id")},(0,i.Z)(Ge));(0,n.Z)(Wi,wn,qn),this.get("host").get("model").setAttrs(en)}var li=(this._boundOnChange||Yt).bind(this),Qi={blockTypeName:St,sourceType:"block",config:kt,styleContainer:He.config.win.document.head,value:Dt,containerStyles:vi,onChange:li,hostNode:Ge,includeDividerRight:!1};return typeof gt.getQuickActionsFormConfigAsync=="function"?gt.getQuickActionsFormConfigAsync().then(function(en){return Qi.config=en,Qi}):Qi}},{CSS_PREFIX:"sqs-block-editor-button-container",ATTRS:{zIndex:{value:1010},blockName:{validator:He.Squarespace.AttrValidators.isString,writeOnce:"initOnly"},blockType:{validator:He.Squarespace.AttrValidators.isNumber},host:{},includeRemove:{value:!0,validator:He.Squarespace.AttrValidators.isBoolean},includeEdit:{value:!0,validator:He.Squarespace.AttrValidators.isBoolean},onEditClicked:{}}})},"1.0",{requires:["base","node","overlay","squarespace-attr-validators","squarespace-dialog-button","squarespace-ss-widget","widget-parent"]})},990743:function(c,b,t){"use strict";var l=t(714487),d=t(737012),o=t.n(d),e=t(935215),a=t.n(e),r=t(976003),s=t.n(r),n=t(322470),i=t.n(n),u=t(813563),h=t.n(u),g=t(174161),p=t(594127),f=t(770500),m=t.n(f),_=t(273564),v=t(690388),E=t(834105),S=t(92485),y=t(217528),C=t(208935),O=t(734526),A=t(906194),I=t(337061),D=t(938077),T=t(843156),B=t(673951),N="CMSV7Events";YUI.add("squarespace-block-editor-dialog",function(P){P.namespace("Squarespace.Block.Editor"),P.Squarespace.Block.Editor.OPEN_DIALOGS=[];var x=P.Squarespace.Block.Editor.Dialog=P.Base.create("block-editor-dialog",P.SQS.LayoutEngine.Block.Editor.Base,[],{initializer:function(){this.configDialog=this._initConfigDialog(),this._bindDialogEvents()},destructor:function(){this.configDialog&&(this.configDialog.destroy(),this.configDialog=null),this._model.detach(N+"|*:change")},_afterEditingChange:function(R){var w=this.get("host");if(R.newVal&&this.configDialog){var k=_.isBlockTypeFeatureGated(w.get("type")),q=!(0,D.FWA)(m().TUTORIAL_ADD_PREMIUM_BLOCK)((0,I.d6)());k&&q?this._showPremiumConfirmationThenShowDialog():this._showDialog()}x.superclass._afterEditingChange.apply(this,arguments),w.hasPlugin("insertPoint")&&!B.Ay&&w.insertPoint.toggleInsertPointsDisabled(R.newVal)},_onBlockModelChange:function(){if(this.configDialog){var R=this.get("host").get("model").toJSON(),w=this.configDialog.sanitizeDialogData(this.configDialog.get("dialog").getData()),k={hasEnabledBackends:!0,useCaptchaFieldsFromBlockInsteadOfForm:!0,dataTableId:!0},q=h()(a()(R),a()(w)),F=q.filter(function(J){return!k[J]}),z=i()(R,F),j=i()(w,F);if(!s()(z,j)){var X={silent:!0,ignoreUndefinedKeysInData:!0};this.configDialog.get("dialog").setData(R,X)}}},_showDialog:function(){var R=this.get("host");this.configDialog.setAttrs({anchorNode:this.get("dialogEditorAnchorNode"),flyoutPointerDirection:this.get("dialogFlyoutPointerDirection")}),this.configDialog.set("visible",!0);var w=this.configDialog.get("dialog");if(w.bodyEl&&_.renderMenu({node:w.bodyEl.getDOMNode(),blockType:R.get("type"),isEditing:!0})){var k=w.bodyEl.getDOMNode(),q=k.querySelector(".sqs-featuregate-menu")||{},F=q.clientHeight||0;w.bodyEl.setHeight(k.clientHeight+F)}},_showPremiumConfirmationThenShowDialog:function(){this.confirmationModalContainer||(this.confirmationModalContainer=document.createElement("div"),document.body.appendChild(this.confirmationModalContainer));var R=(0,p.createRoot)(this.confirmationModalContainer),w=g.createElement(v.Z,{isOpen:!0,isTrial:E.Z.isTrial(),onRequestClose:(function(){(0,I.GE)((0,y.ic)(m().TUTORIAL_ADD_PREMIUM_BLOCK)),R&&(R.unmount(),R=null),this.confirmationModalContainer.remove(),this.confirmationModalContainer=null,this._showDialog()}).bind(this)});R.render(w)},_plugInsertPoint:function(){x.superclass._plugInsertPoint.call(this),this.get("host").insertPoint.toggleInsertPointsDisabled(this.get("editing"))},_getModelEditor:function(){console.error("No Model Editor configured for: "+this.get("blockName"))},_initConfigDialog:function(){var R=this._getModelEditor();if(!P.Lang.isValue(R))return null;var w=new R({id:"editorDialog",model:this._model,anchorNode:this.get("dialogEditorAnchorNode"),flyoutPointerDirection:this.get("dialogFlyoutPointerDirection"),zIndex:9e3}),k=P.merge(this.get("defaultEditorConfig"),w.get("dialogConfig"));return w.set("dialogConfig",k),w},_bindDialogEvents:function(){if(!P.Lang.isNull(this.configDialog)){var R=this.configDialog.get("dialog");R.on("shown",function(){for(this._bb.addClass("sqs-edit-dialog-open");P.Squarespace.Block.Editor.OPEN_DIALOGS.length;)P.Squarespace.Block.Editor.OPEN_DIALOGS.shift().dialog.close();P.Squarespace.Block.Editor.OPEN_DIALOGS.push({dialog:R,layout:this.get("host").get("boundingBox").ancestor(".sqs-layout")}),this.bindInstrumentation(),this.get("host").on("blockModelChange",this._onBlockModelChange,this)},this),R.on("dismiss",this._onModelEditorDismiss,this),this.configDialog.on("nonSavingClose",function(){this.get("revertResizingOnCancel")&&(this._model.get("vSize")!==R.getData().vSize&&this._model.set("vSize",R.getData().vSize,{silent:!0}),this._model instanceof P.SQS.LayoutEngine.BlockModel.Image||this._model.get("aspectRatio")!==R.getData().aspectRatio&&this._model.set("aspectRatio",R.getData().aspectRatio))},this),R.on("render-anchor",function(k){this._updateModel(this.configDialog.sanitizeDialogData(k))},this),R.on("remove-requested",function(){new P.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("Remove Block",null,{project:"scripts-v6.block"}),"strings.message":(0,l.t)("Are you sure you want to remove this block?",null,{project:"scripts-v6.block"}),className:[C.BLOCK_FOCUS_IGNORE_CLASSNAME,"question"].join(" "),render:R.el&&R.el.ancestor("body")||!0}).on("confirm",function(){R.close(R,!0),this.fire("remove")},this)},this)}},_onModelEditorDismiss:function(R){var w=this.configDialog.get("dialog");this.closeEditor(),this._bb.removeClass("sqs-edit-dialog-open"),P.Squarespace.Block.Editor.OPEN_DIALOGS=P.Array.filter(P.Squarespace.Block.Editor.OPEN_DIALOGS,function(k,q){return k.dialog!==w},this),this._model.detach(N+"|*:change"),this.get("host").detach("blockModelChange")},bindInstrumentation:function(){this.keysQueued=[],this.keysSent=[],this.instrumentationBindingTimer=P.config.win.setTimeout((function(){this.instrumentationBindingTimer=null,this.instrumentModel()}).bind(this),1e3)},instrumentModel:function(){this._model.detach(N+"|*:change"),this._model.after(N+"|*:change",function(R){this.get("host").get("isNewBlock")||this.queueFieldForInstrumentation(Object.keys(R.changed))},this)},queueFieldForInstrumentation:function(R){this.instrumentationTimer&&(P.config.win.clearTimeout(this.instrumentationTimer),this.instrumentationTimer=null),R.forEach((function(w){this.keysSent.includes(w)||this.keysQueued.includes(w)||this.keysQueued.push(w)}).bind(this)),this.keysQueued.length>0&&(this.instrumentationTimer=P.config.win.setTimeout((function(){var w=this.get("host"),k=O.Z.BlockTypeKeys[w.get("type")],q=this._model.layout.get("collectionId");if(!q){var F=(0,D.Zxu)((0,I.d6)());F&&(q=F)}this.keysQueued.forEach((function(z){T.Z.editBlockField({blockId:w.get("id"),blockType:k,fieldName:z,collectionId:q}),this.keysSent.push(z)}).bind(this)),this.keysQueued=[]}).bind(this),100))}},{NS:"blockEditor",ATTRS:{blockName:{valueFn:function(){return this.get("host").get("blockName")}},editing:{value:!1},editingEvent:{valueFn:function(){return["dblclick"]}},editingButtons:{value:!0},editingOverlay:{valueFn:function(){return P.Node.create('<div class="sqs-editing-overlay"></div>')}},dialogEditorAnchorNode:{getter:function(){return(0,D.Hlz)((0,I.d6)())===A.Z.PHONE?P.one(P.config.win.top.document.body.querySelector("#sqs-site-frame")):this.get("host").get("contentBox")}},dialogFlyoutPointerDirection:{getter:function(){return(0,D.Hlz)((0,I.d6)())===A.Z.PHONE?"left":null}},revertResizingOnCancel:{value:!0},defaultEditingMode:{value:!0},defaultEditorConfig:{valueFn:function(){var R=o()(this.get("host").get("blockTypeName")),w=S.i()?[]:[{title:(0,l.t)("Cancel",null,{project:"scripts-v6.block"}),type:"cancel"},{title:(0,l.t)("Apply",null,{project:"scripts-v6.block",notes:"Button within a dialog. Apply changes to a page and close the dialog; oldKey: applyChangesAndClose"}),type:"saveAndClose"}];return{name:"editor-block-"+R.replace(/(^legacy\-|\-legacy$|\-v2$)/,""),buttons:w,closeOthers:!1,style:"flyout",flyoutPointerDirection:"hidden",draggable:!0}}}}})},"1.0",{requires:["base","plugin","@sqs/layout-engine/block-image","@sqs/layout-engine/block-editor-base","@sqs/layout-engine/block-model-image","squarespace-dialog","squarespace-model-editor","squarespace-widgets-confirmation"]})},485765:function(c,b,t){"use strict";var l=t(784874),d=t(202560);YUI.add("squarespace-block-embed",function(o){o.namespace("Squarespace.Block").Embed=o.Base.create("block-embed",o.Squarespace.Block.CustomEmbedBase,[o.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(e){o.namespace("Squarespace.Block").Embed.superclass._renderSuccess.call(this,e);var a=this.get("model"),r=a.get("customThumb");r&&this._pluginVideoLoader()},_pluginVideoLoader:function(){var e=this.get("contentBox").one(".sqs-video-wrapper");e&&!e.hasPlugin(o.Squarespace.VideoLoader.NS)&&e.plug(o.Squarespace.VideoLoader)}},{CSS_PREFIX:(0,d.u)(l.Z.EMBED),ATTRS:{editor:{value:o.Squarespace.Block.Editor.Schema},type:{value:l.Z.EMBED},safeguardEmbeddedScripts:{value:!0}}})},"1.0",{requires:["squarespace-block-base-custom-embed","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},695659:function(c,b,t){"use strict";var l=t(437951),d=t.n(l),o=t(815211),e=t.n(o);YUI.add("squarespace-block-fivehundredpix-editor",function(a){a.namespace("Squarespace.Block.Editor"),a.namespace("Squarespace.Block.ModelEditorDialog"),a.Squarespace.Block.Editor.Fivehundredpix=a.Base.create("fivehundredpix-block-editor-dialog",a.Squarespace.Block.Editor.Gallery,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Fivehundredpix")}},{NS:"blockEditor",ATTRS:{}}),a.Squarespace.Block.ModelEditorDialog.Fivehundredpix=a.Base.create("FivehundredpixModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.SummaryGallery,[],{initialize:function(){this.after("collectionSynced",this._afterSyncAccount,this)},_onSendRequested:function(r){var s=this._getAccount();s&&!s.get("pullEnabled")?(s.set("pullEnabled",!0),s.after("save",function(){this.fire("collectionSynced")},this),s.save()):this.fire("collectionSynced")},_getServiceId:function(){return e().FIVEHUNDREDPIX}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig"},icon:{value:"fivehundredpix"},socialAccountType:{value:e().FIVEHUNDREDPIX},collectionType:{value:d().FIVEHUNDREDPIX},strings:{value:{name:"500px",itemTypePlural:"photos",itemType:"photo"}}}})},"1.0",{requires:["base","squarespace-block-summary-gallery-model-editor","squarespace-block-fivehundredpix-model","squarespace-damask-context-globals"]})},647653:function(){YUI.add("squarespace-block-fivehundredpix-model",function(c){c.namespace("Squarespace.ContentModel").FivehundredpixBlock=c.Base.create("fiveHundredPixModel",c.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{})},"1.0",{requires:["base","model","squarespace-block-summary-gallery-model"]})},193580:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-fivehundredpix",function(e){e.namespace("Squarespace.Block").Fivehundredpix=e.Base.create("block-fivehundredpix",e.Squarespace.Block.SummaryGallery,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:(0,o.u)(l.Z.FIVEHUNDREDPIX),MODEL:e.Squarespace.ContentModel.FivehundredpixBlock,ATTRS:{editor:{valueFn:function(){return d.Lk(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Fivehundredpix}},type:{value:l.Z.FIVEHUNDREDPIX}}})},"1.0",{requires:["base","squarespace-block-summary-gallery","squarespace-block-fivehundredpix-editor","squarespace-block-fivehundredpix-model","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},158741:function(c,b,t){"use strict";var l=t(437951),d=t.n(l),o=t(815211),e=t.n(o);YUI.add("squarespace-block-flickr-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog"),a.namespace("Squarespace.Block.Editor").Flickr=a.Base.create("flickr-block-editor-dialog",a.Squarespace.Block.Editor.Gallery,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Flickr")}},{NS:"blockEditor",ATTRS:{}}),a.Squarespace.Block.ModelEditorDialog.Flickr=a.Base.create("FlickrModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.SummaryGallery,[],{_getServiceId:function(){return e().FLICKR}},{ATTRS:{icon:{value:"flickr"},socialAccountType:{value:e().FLICKR},collectionType:{value:d().FLICKR},strings:{value:{name:"Flickr",itemTypePlural:"photos",itemType:"photo"}}}})},"1.0",{requires:["base","squarespace-block-summary-gallery-model-editor","squarespace-block-flickr-model","squarespace-damask-context-globals"]})},772229:function(){YUI.add("squarespace-block-flickr-model",function(c){c.namespace("Squarespace.ContentModel").FlickerBlock=c.Base.create("FlickerModel",c.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{})},"1.0",{requires:["base","model","squarespace-block-summary-gallery-model"]})},930897:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-flickr",function(e){e.namespace("Squarespace.Block").Flickr=e.Base.create("block-flickr",e.Squarespace.Block.SummaryGallery,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:(0,o.u)(l.Z.FLICKR),MODEL:e.Squarespace.ContentModel.FlickrBlock,ATTRS:{editor:{valueFn:function(){return d.Lk(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Flickr}},type:{value:l.Z.FLICKR}}})},"1.0",{requires:["base","squarespace-block-summary-gallery","squarespace-block-flickr-editor","squarespace-block-flickr-model","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},675731:function(c,b,t){"use strict";var l=t(525710);YUI.add("squarespace-block-form-editor",function(d){d.namespace("Squarespace.Block.Editor");var o=d.Squarespace.Block.Editor.Form=d.Base.create("block-form-editor",d.Squarespace.Block.Editor.Schema,[],{onEditClicked:function(){l.cC({hasInteractedWithForm:!0}),o.superclass.onEditClicked.call(this)}},{NS:"blockEditor",ATTRS:{}})},"1.0",{requires:["base","squarespace-block-schema-editor","@sqs/layout-engine/block-editor-base"]})},774377:function(c,b,t){"use strict";var l=t(461761),d=t.n(l),o=t(43594),e=t.n(o),a=t(481312),r=t.n(a),s=t(259093),n=t.n(s),i=t(649315),u=t.n(i),h=t(953203),g=t.n(h),p=t(377688),f=t(868192),m=t(714487),_=t(723796),v=t(936105),E=_.Em.createLogger("form-model","#456");YUI.add("squarespace-block-form-model",function(S){var y=(0,m.t)("Error Saving Form",null,{project:"scripts-v6.block"}),C=(0,m.t)("An error occurred while attempting to save the form.",null,{project:"scripts-v6.block"}),O={"spreadsheetName must be provided.":(0,m.t)("A spreadsheet name must be provided.",null,{project:"scripts-v6.block"}),"Make sure you connect your form to a spreadsheet with a unique name":(0,m.t)("Multiple spreadsheets in your Google Drive have the same filename. Make sure you connect your form to a file with a unique name.",null,{project:"scripts-v6.block"})};function A(I){return I&&O[I]||C}S.namespace("Squarespace.Models"),S.Squarespace.Models.BlockFormModel=S.Base.create("BlockFormModel",S.Model,[],{initializer:function(){this._formModel=this.createFormModel(),this._saveCallbacks=[]},toJSON:function(){return{formId:this.get("formId"),useLightbox:this.get("useLightbox"),lightboxHandleText:this.get("lightboxHandleText"),buttonAlignment:this.get("buttonAlignment"),buttonVariant:this.get("buttonVariant"),firstFieldHighlightType:this.get("firstFieldHighlightType"),hSize:this.get("hSize"),vSize:this.get("vSize"),floatDir:this.get("floatDir"),submissionTextAlignment:this.get("submissionTextAlignment"),submissionVerticalAlignment:this.get("submissionVerticalAlignment"),submissionAnimation:this.get("submissionAnimation"),hasEnabledBackends:this.hasValidStorageConnected()}},getFormModel:function(){return this._formModel},createFormModel:function(){var D=[S.merge({},p.Z.NAME,{required:!0}),S.merge({},p.Z.EMAIL,{required:!0}),S.merge({},p.Z.TEXT,{title:(0,m.t)("Subject",null,{project:"scripts-v6.block"}),required:!0}),S.merge({},p.Z.TEXT_AREA,{title:(0,m.t)("Message",null,{project:"scripts-v6.block"}),maxLength:"",required:!0})];D.forEach(function(N){S.Squarespace.FormEditingUtils.resolveFieldId(N,D)});var T=(0,m.t)("New Form",null,{project:"scripts-v6.block"});try{var B=S.config.global.Static.SQUARESPACE_CONTEXT.collection.title;B!==void 0&&(T=(0,m.t)("{pageTitle} Form",{pageTitle:B},{project:"scripts-v6.block",notes:"New web form will default to getting named after the web page it appears on"}))}catch(N){E(N)}return new S.Squarespace.Models.Form({id:null,name:T,fields:D,submitButtonText:(0,m.t)("Submit",null,{project:"scripts-v6.block"}),submissionMessage:{html:(0,m.t)("<p>Thank you!</p>",null,{project:"scripts-v6.block"})},successRedirect:"",captchaEnabled:!1,captchaTheme:g().LIGHT,captchaAlignment:u().LEFT})},setBackends:function(I){I.set("backendConnectionConfigs",{campaignsConnect:this.get("campaignsConnect"),googleDocsConnect:this.get("googleDocsConnect"),mailchimpConnect:this.get("mailchimpConnect"),emailConnect:this.get("emailConnect"),zapierConnect:this.get("zapierConnect")})},setBackendsAndSave:function(I){E("#setBackendsAndSave",this,I),this.setBackends(I),I.save(S.bind(this._onModelSave,this))},saveFormModel:function(D){E("#saveFormModel"),this._saveCallbacks.push(D),!(this._saveCallbacks.length>1)&&this.setBackendsAndSave(this.getFormModel())},_onModelSave:function(D){var T=this._saveCallbacks;this._saveCallbacks=[];var B=this.getFormModel();if(!B){this._onModelSaveError({},T);return}if(S.Lang.isValue(D)){this._onModelSaveError(D,T);return}this.set("formId",B.get("id")),T.forEach(function(P){P()})},_onModelSaveError:function(D,T){var B=D?d()(D,"responseJSON.message",""):"";T.forEach(function(P){P({title:y,message:A(B),code:D.code,src:"form"})})},sync:function(D,T,B){if(D==="read"){var N=this.get("formId");if(S.Lang.isValue(N)){this.syncRead(N,B);return}if(T&&T.skipSaveOnLoad){B();return}this.saveFormModel(B);return}(D==="create"||D==="update")&&this.syncWrite(B)},syncRead:function(D,T){E("#syncRead start",D);var B=this.getFormModel();B.set("id",D),B.load(function(){E("#syncRead complete - form model loaded"),T()})},syncWrite:function(D){E("#syncWrite");var T=this.constructor.FORM_MODEL_FIELDS;this.getFormModel().setAttrs(this.getAttrs(T)),this.saveFormModel(D)},validate:function(D,T){var B=this.validateFormBlockModel();if(B){T(B);return}T()},validateFormBlockModel:function(){if(!this.hasValidStorageConnected()){var I={title:(0,m.t)("Add Storage to this Form",null,{project:"scripts-v6.block"}),message:(0,m.t)('Tell us where to save form submissions in the <strong>Storage</strong> tab. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:f.FORM_AND_NEWSLETTER_STORAGE},{project:"scripts-v6.block"}),src:"validate"};return I}},isNewsletterBlockFormModel:function(){return this.getFormModel().get("type")===n().NEWSLETTER_BLOCK},hasValidStorageConnected:function(){if(this.isNewsletterBlockFormModel()&&!v.oW("newsletter")){var I=this.isNewsletterBlockFormModel()?[this.get("campaignsConnect.connectionState"),this.get("googleDocsConnect.connectionState"),this.get("mailchimpConnect.connectionState"),this.get("zapierConnect.connectionState")]:[this.get("googleDocsConnect.connectionState"),this.get("mailchimpConnect.connectionState"),this.get("emailConnect.connectionState"),this.get("zapierConnect.connectionState")];return I.indexOf(e().CONNECTED)!==-1||I.indexOf(e().PENDING)!==-1}var D=this.getFormModel();return D?S.Array.some(D.get("connectedBackends")||[],function(T){return T.connectionState===e().CONNECTED||T.connectionState===e().PENDING}):!1}},{FORM_MODEL_FIELDS:["captchaAlignment","captchaEnabled","captchaTheme","disclaimerMessage","fields","name","submissionHTML","submissionMessage","submitButtonText","successRedirect"],ATTRS:{emailConnect:{setter:function(I){I&&(I.backendType=r().EMAIL)},valueFn:function(){if(!S.Lang.isValue(this.get("formId"))&&S.Lang.isValue(Static.SQUARESPACE_CONTEXT.authenticatedAccount.email))return{connectionState:e().CONNECTED,email:Static.SQUARESPACE_CONTEXT.authenticatedAccount.email}}},googleDocsConnect:{setter:function(I){I&&(I.backendType=r().GOOGLE)}},mailchimpConnect:{setter:function(I){I&&(I.backendType=r().MAILCHIMP)}},campaignsConnect:{setter:function(I){I&&(I.backendType=r().CAMPAIGNS)}},zapierConnect:{setter:function(I){I&&(I.backendType=r().ZAPIER)}}}})},"1.0",{requires:["base","model","squarespace-form-editing-utils","squarespace-models-form"]})},53961:function(c,b,t){"use strict";var l=t(784874),d=t(202560),o=t(436715),e=!1;YUI.add("squarespace-block-form",function(a){a.namespace("Squarespace.Block");var r=a.Squarespace.Block.Form=a.Base.create("block-form",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.Squarespace.Block.PremiumBlockMixin,a.SQS.LayoutEngine.Block.MixinContainerStyles],{initializer:function(){this._formPreview=new a.Squarespace.Widgets.FormPreview({form:this.get("model").getFormModel(),blockId:this.get("id")}),this.publish("formData-loaded",{fireOnce:!0,async:!0}),this._registerEvent(this.on("block-editor:form-model-saved",function(){this.get("model").get("formId")&&this._renderBlock()},this))},renderUI:function(){var n=this._getStackFinished(),i=this.get("editController").get("editing"),u=(0,o.yR)(this.get("contentBox").getDOMNode());this.get("model").load({skipSaveOnLoad:!(i||u)},(function(){this.get("destroyed")||(this.onBlockModelLoad(),n())}).bind(this))},onBlockModelLoad:function(){this.fire("formData-loaded"),this._renderBlock()},bindUI:function(){var s=this.get("model");s.after(["change","save"],function(n){this._renderBlock()},this),s.after("save",this.syncUI,this),this.after("editableChange",this._afterEditableChange,this)},_afterEditableChange:function(s){this._shouldRerenderBlockFromServer(s)&&r.superclass._renderBlock.call(this)},syncUI:function(n){var i=this.get("model");this._formPreview.set("useLightbox",i.get("useLightbox")),this._formPreview.set("lightboxHandleText",i.get("lightboxHandleText")),this._formPreview.set("buttonAlignment",i.get("buttonAlignment")),this._formPreview.set("buttonVariant",i.get("buttonVariant")),this._formPreview.set("firstFieldHighlightType",i.get("firstFieldHighlightType")),this._formPreview.set("submissionMessage",i.get("parsedSubmissionMessage")),this._formPreview.set("submissionTextAlignment",i.get("submissionTextAlignment")),this._formPreview.set("submissionVerticalAlignment",i.get("submissionVerticalAlignment")),this._formPreview.set("submissionAnimation",i.get("submissionAnimation"))},ensureLoadedThenShowDialog:function(s){var n=this.get("model").get("formId");n?this.after("formData-loaded",s):s()},_renderBlock:function(){var n=this.get("model");this._formPreview.get("rendered")?a.Lang.isUndefined(n.get("fields"))||(n.getFormModel().set("fields",n.get("fields")),this.syncUI()):this._formPreview.render(this.get("contentBox")),this._syncModelFieldWithPreview("captchaEnabled"),this._syncModelFieldWithPreview("captchaTheme"),this._syncModelFieldWithPreview("captchaAlignment"),this.fire("widget:contentUpdate")},_syncModelFieldWithPreview:function(s){var n=this.get("model"),i=n.get(s);i!==void 0&&n.getFormModel().set(s,i)},_shouldRerenderBlockFromServer:function(s){if(s.newVal||(0,o.yR)(this.get("contentBox").getDOMNode()))return!1;var n=this.get("model"),i=n.hasValidStorageConnected();return!i}},{CSS_PREFIX:(0,d.u)(l.Z.FORM),MODEL:a.Squarespace.Models.BlockFormModel,ATTRS:{editor:{valueFn:function(){return a.Squarespace.Block.Editor.Form}},type:{value:l.Z.FORM}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-mixin-container-styles","squarespace-block-form-model","squarespace-block-schema-editor","squarespace-block-form-editor","squarespace-form-editing-utils","squarespace-form-preview","squarespace-models-form","squarespace-premium-block-mixin"]})},666545:function(c,b,t){"use strict";var l=t(714487),d=t(815211),o=t.n(d),e=t(437951),a=t.n(e),r=t(868192);YUI.add("squarespace-block-foursquare-editor",function(s){s.namespace("Squarespace.Block.ModelEditorDialog"),s.namespace("Squarespace.Block.Editor").Foursquare=s.Base.create("foursquare-block-editor-dialog",s.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return s.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Foursquare")}},{NS:"blockEditor",ATTRS:{blockName:{value:(0,l.t)("Foursquare Swarm",null,{project:"scripts-v6.block"})}}});var n=s.Squarespace.Block.ModelEditorDialog.Foursquare=s.Base.create("FoursquareSummaryModelEditorDialog",s.Squarespace.Block.ModelEditorDialog.SocialSummary,[],{_getServiceId:function(){return o().FOURSQUARE},_getDefaultDialogConfig:function(){var i=n.superclass._getDefaultDialogConfig.call(this),u=i.tabs[0].fields;return u.unshift({ctor:s.Squarespace.DialogFields.Description,text:(0,l.t)('Display a feed of check-ins from a personal Foursquare Swarm account. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:r.FOURSQUARE},{project:"scripts-v6.block"})}),i}},{ATTRS:{icon:{value:"foursquare"},socialAccountType:{value:o().FOURSQUARE},collectionType:{value:a().FOURSQUARE},strings:{value:{name:(0,l.t)("Foursquare Swarm",null,{project:"scripts-v6.block"}),itemTypePlural:(0,l.t)("check-ins",null,{project:"scripts-v6.block"}),itemType:(0,l.t)("check-in",null,{project:"scripts-v6.block"})}}}})},"1.0",{requires:["base","model","squarespace-block-foursquare-model","squarespace-block-summary-model-editor","squarespace-damask-context-globals","squarespace-dialog-select","squarespace-dialog-button","squarespace-dialog-slider","squarespace-model-editor"]})},829636:function(){YUI.add("squarespace-block-foursquare-model",function(c){c.namespace("Squarespace.ContentModel").FoursquareBlock=c.Base.create("FoursquareBlockModel",c.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{ATTRS:{}})},"1.0",{requires:["base","model","squarespace-block-summary-gallery-model"]})},268657:function(c,b,t){"use strict";var l=t(784874),d=t(202560),o=t(936105);YUI.add("squarespace-block-foursquare",function(e){e.namespace("Squarespace.Block").Foursquare=e.Base.create("block-foursquare",e.Squarespace.Block.SocialSummaryBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:(0,d.u)(l.Z.FOURSQUARE),MODEL:e.Squarespace.ContentModel.FoursquareBlock,ATTRS:{editor:{valueFn:function(){return o.oW(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Foursquare}},type:{value:l.Z.FOURSQUARE}}})},"1.0",{requires:["base","squarespace-block-social-summary","squarespace-block-foursquare-editor","squarespace-block-foursquare-model","squarespace-premium-block-mixin"]})},651857:function(c,b,t){"use strict";var l=t(714487),d=t(784874),o=t(714551),e=t(965782);YUI.add("squarespace-block-gallery-editor",function(a){a.namespace("Squarespace.Block.Editor");function r(n){return n==="grid"?(0,l.t)("Grid",null,{project:"scripts-v6.block"}):n==="slider"?(0,l.t)("Carousel",null,{project:"scripts-v6.block"}):n==="stacked"?(0,l.t)("Stacked",null,{project:"scripts-v6.block"}):n==="slideshow"?(0,l.t)("Slideshow",null,{project:"scripts-v6.block"}):(0,l.t)("Gallery",null,{project:"scripts-v6.block"})}var s=a.Squarespace.Block.Editor.Gallery=a.Base.create("galleryEditor",a.Squarespace.Block.Editor.Dialog,[],{initializer:function(n){var i=this.get("host"),u=i.get("model"),h=this.configDialog.get("dialog");h.on("ready",function(){var g=h.getField("options");g.after("options-changed",this._syncGallery,this),i.get("type")!==d.Z.INSTAGRAM&&h.setAndUpdateTitle(r(u.get("design")))},this),u.after("change",function(g){var p=h.getField("options");if(p){var f=p.get("data"),m=Object.keys(g.changed).reduce(function(_,v){return g.changed[v].newVal!==g.changed[v].prevVal&&g.changed[v].newVal!==f[v]&&(_[v]=g.changed[v].newVal===void 0?(0,e.P)()[v]:g.changed[v].newVal),_},{});Object.keys(m).length>0&&p.set("data",m)}this.set("resizable",this.isSlider())},this),this.onHostEvent("resized",function(g){g.source==="columnChanged"&&u.get("design")==="slideshow"&&i._setWidgetContent()}),this.onHostEvent("dropped",function(g){g.oldCol!==a.SQS.LayoutEngine.Layout.Utils.getColumnWidth(i.get("contentBox"))&&i._setWidgetContent()}),this.after("editingChange",function(g){g.newVal&&u.get("collectionId")==="dummyCollection"&&u.set("collectionId",void 0)}),this.afterHostEvent(["dropped","resized","widget:contentUpdate"],function(){this._setExtraDesignStyles(),this.updateWidgetAttrs()}),u.on("designChange",function(g){h.setAndUpdateTitle(r(g.newVal))}),this.configDialog.on("gallery-refresh",i._renderBlock,i),this.configDialog.on("focalPointChanged",this._refreshFocalPoint,this),this._bindHeightLocking()},_bindHeightLocking:function(){this.beforeHostMethod("_renderBlock",this._lockBlockHeight),this.onHostEvent("widget:contentUpdate",function(n){this.get("host").requestingContent||this._unlockBlockHeight()})},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Gallery")},_lockBlockHeight:function(){var n=this.get("host").get("boundingBox");n.test(".sqs-locked-height")||(n.addClass("sqs-locked-height"),n.setStyles({maxHeight:n.get("region").height,overflow:"hidden"}))},_unlockBlockHeight:function(n){var i=this.get("host").get("boundingBox");i.removeClass("sqs-locked-height"),i.setStyles({maxHeight:null,overflow:null})},_setExtraDesignStyles:function(){var n=this._model.getAttrs();switch(n.design){case"grid":this.configDialog.renderGridCSS(this.get("host").get("contentBox"),n);break;case"slideshow":this.configDialog.renderSlideshowCSS(this.get("host").get("contentBox"),n);break}},_refreshFocalPoint:function(n){var i=this.get("host").get("boundingBox").one('img[data-image-id="'+n.imageId+'"]');if(!a.Lang.isNull(i)){var u=i.loader;u&&(u.set("focalPoint",n.mediaFocalPoint),u.fire("refresh"))}},updateWidgetAttrs:function(){var n=this.get("host"),i=n.get("contentBox").one(".sqs-gallery");if(i){var u=i.getData("gallery");if(u){var h=n.get("model").getAttrs(o.Z.RERENDER_ATTR_WHITELIST),g=a.SQS.Gallery.Manager.dataToAttrs(h);u.setAttrs(g),u.refresh(),n.fire("block:renderedAfterDataChange")}}},isSlider:function(){return this.get("host").get("model").get("design")==="slider"},_syncGallery:function(n,i){var u=this.get("host"),h=n.get("name"),g=this.get("host").get("contentBox");this.configDialog.syncGalleryOptions(h,g),h==="lightboxTheme"&&u._renderBlock()},_setBlockResizable:function(n){s.superclass._setBlockResizable.apply(this,arguments),n&&this._registerEvent(this.get("resizeNode").resize.on("handle-dblclick",this._resetOriginalAspectRatio,this))},_resetOriginalAspectRatio:function(){this.get("host").get("model").set("aspectRatio",o.Z.DEFAULT_SLIDER_ASPECT_RATIO)}},{NS:"blockEditor",ATTRS:{resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},resizable:{valueFn:function(){return this.isSlider()}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-block-mixin-gallery-option-sync","squarespace-content-collection-utils","squarespace-damask-context-globals","squarespace-dialog-content-item-grid","squarespace-dialog-gallery-options","squarespace-dialog-multi-frame","squarespace-dialog-multi-option","@sqs/layout-engine/layout-utils","squarespace-models-content-collection","squarespace-plugin-actionoverlay"]})},183564:function(c,b,t){"use strict";var l=t(965782),d=t(714487),o=t(437951),e=t.n(o),a=t(816130),r=t.n(a),s=t(868192),n=t(320110),i=t(965455),u=!1;YUI.add("squarespace-block-gallery-model-editor",function(h){h.namespace("Squarespace.Block.ModelEditorDialog");var g=h.Squarespace.Block.ModelEditorDialog.Gallery=h.Base.create("blockGalleryModelEditorDialog",h.Squarespace.ModelEditorDialog,[h.Squarespace.Block.Mixins.Gallery,h.Squarespace.Mixins.EventRegistrar],{initializer:function(p){var f=h.Squarespace.ContentCollectionCache;f.size()===0&&(f.after("load",this._syncPlugin,this),f.load());var m=this.get("dialog");m.on("ready",function(_){this._bindTransientEvents()},this)},save:function(f,m,_){g.superclass.save.apply(this,arguments)},sanitizeDialogData:function(p){switch(h.Object.hasKey(p,"options")&&(p=h.merge(p,p.options),delete p.options),p.methodOption){case"existing":p.collectionId=p.existingGallery,p.existingGalleryId=p.existingGallery;break;case"transient":p.collectionId=p.transientGallery.get("id"),p.transientGalleryId=p.transientGallery.get("id");break;default:}return p.design!=="slider"?p.aspectRatio=null:delete p.aspectRatio,p.vSize=null,delete p.methodFrame,delete p.transientGallery,p},getDialogData:function(){var p=this.get("model").toJSON(),f=h.merge(p,{options:p,methodOption:p.methodFrame=this._usesTransientCollection()?"transient":"existing"}),m=(0,d.t)("Gallery Block {galleryBlockId}",{galleryBlockId:(0,i.x)()},{project:"scripts-v6.block"}),_={id:p.transientGalleryId||null,typeName:"gallery-block",type:e().GALLERY_BLOCK,title:m,navigationTitle:m,urlId:(0,i.x)(),ordering:r().USER,enabled:!0};return f.transientGallery=new h.Squarespace.Models.ContentCollection(_),f.transientGallery.get("id")?f.transientGallery.load():f.transientGallery.setAttrs({itemCount:0,calculatedItemCount:0}),this.get("model").get("transientGallery").get("id")||this.get("model").set("transientGallery",_,{silent:!0}),f},_usesTransientCollection:function(){var p=this.get("model").get("collectionId");if(p){var f=h.Squarespace.ContentCollectionCache.getById(p),m=h.Squarespace.ContentCollectionCache.filter(function(_){var v=_.getTemplateConfiguration();return!!(v&&v.get("collectionType")===e().COLLECTION_TYPE_GENERIC&&v.get("ordering")===r().USER)});return m.indexOf(f)===-1}return!0},_prepareAnimationTrackingData:function(){var p=this.get("model"),f=this.get("dialog"),m=p?p.layout.get("collectionId"):null,_=f.getField("blockAnimation").get("data"),v={collectionId:m,blockAnimationSelection:_};return v},_bindTransientEvents:function(){var p=this.get("dialog"),f=p.getField("transientGallery"),m=f.get("data");m.isNew()&&(m.once("save",function(){var v=m.get("id");this.get("model").setAttrs({collectionId:v,transientGalleryId:v})},this),f.set("uploadPreflight",function(v){m.save(v)}));var _=["create","add","remove","reordered","group-reordered","*:mediaProcessingStateChange","*:titleChange","bulk-remove"];m.items.after(_,this._transientGalleryChanged,this),m.items.after("*:mediaFocalPointChange",this._focalPointChanged,this),this._registerEvent(m.items.once("*:save",function(){this.fire("gallery-refresh")},this))},_transientGalleryChanged:function(p){if(!(p.onReorder||p.source==="bulk-remove")){if(p.type==="Item:titleChange"){var f=p.prevVal||"",m=p.newVal||"";if(m===f)return}this.fire("gallery-refresh")}},_focalPointChanged:function(p){this.fire("focalPointChanged",{imageId:p.target.get("id"),mediaFocalPoint:p.target.get("mediaFocalPoint")})},_getDefaultDialogConfiguration:function(){var p=this.get("dialog"),f=[{title:(0,d.t)("Gallery",null,{project:"scripts-v6.block"}),tabTitle:(0,d.t)("Content",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-gallery-16-light-solid.png",name:"content",scroll:!1,fields:[{ctor:h.Squarespace.DialogFields.Description,config:{text:(0,d.t)(`Create a gallery of your images, videos, or Getty Images. You can also display content from a Gallery Page you've created. <a href="{helpLink}" target="_blank">Learn more</a>`,{helpLink:s.GALLERY_EDITOR},{project:"scripts-v6.block"})}},{ctor:h.Squarespace.DialogFields.MultiOption,config:{name:"methodOption",optionClickCb:{$valueFn:function(){return function(_){p.getField("methodFrame").switchFrames(_)}}},options:[{value:"transient",title:(0,d.t)("Upload Media",null,{project:"scripts-v6.block"}),icon:"upload-media"},{value:"existing",title:(0,d.t)("Use Existing Gallery",null,{project:"scripts-v6.block"}),icon:"existing-gallery"}]}},{ctor:h.Squarespace.DialogFields.MultiFrame,config:{name:"methodFrame",width:440,height:{$valueFn:function(){return 390}},frames:[{name:"transient",fields:[{ctor:h.Squarespace.DialogFields.ContentItemGrid,config:{collectionConfiguration:{acceptTypes:["image","video"],addText:(0,d.t)("Add Media",null,{project:"scripts-v6.block"})},name:"transientGallery",showAddIcon:!0,renderOnShow:!0,pageSize:250,addText:(0,d.t)("Add Content",null,{project:"scripts-v6.block"}),imageSize:140,"contentItemImageOptions.actionOverlayButtons":[h.Squarespace.ActionOverlayButtons.IMAGE_INFO,h.Squarespace.ActionOverlayButtons.EDIT_IMAGE,h.Squarespace.ActionOverlayButtons.REMOVE_IMAGE],dataState:"loading",imageDestination:n.Z.GALLERY_BLOCK}}]},{name:"existing",fields:[{ctor:h.Squarespace.DialogFields.ContentIdSelector,config:{name:"existingGallery",showCollectionTagsAndCategories:!1,showGroupTitles:!1,emptyMessage:(0,d.t)("No Gallery Pages yet. Go to the pages panel and click a + to add new content.",null,{project:"scripts-v6.block"}),collectionFilter:{collectionType:e().COLLECTION_TYPE_GENERIC,ordering:r().USER,folder:!1}}}]}]}}]},{title:(0,d.t)("Gallery",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-gallery-16-light-solid.png",tabTitle:(0,d.t)("Design",null,{project:"scripts-v6.block"}),name:"design",scroll:!0,fields:[{ctor:h.Squarespace.DialogFields.GalleryOptions,name:"options",config:{options:{$valueFn:h.bind(this._getGalleryOptions,this)},width:450}}]}],m={title:(0,d.t)("Gallery",null,{project:"scripts-v6.block"}),width:500,height:{$valueFn:function(){return 652}},loadingText:(0,d.t)("Editing Gallery\u2026",null,{project:"scripts-v6.block"}),initialDataByReference:!0,tabs:f};return m},_getDefaultContent:function(){var p={methodOption:"transient"},f=(0,l.P)();return h.merge(f,p)}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfiguration",validator:h.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-mixin-gallery-option-sync","squarespace-models-content-collection","squarespace-content-collection-utils","squarespace-plugin-actionoverlay","squarespace-dialog-content-item-grid","squarespace-dialog-gallery-options","squarespace-dialog-multi-option","squarespace-dialog-multi-frame","squarespace-dialog-select","squarespace-block-editor-dialog","squarespace-mixins-event-registrar"]})},953276:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-gallery",function(e){e.namespace("Squarespace.Block"),e.Squarespace.Block.Gallery=e.Base.create("block-gallery",e.SQS.LayoutEngine.Block.Gallery,[e.Squarespace.Block.PremiumBlockMixin],{},{ATTRS:{editor:{valueFn:function(){return d.Lk(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Gallery}}},CSS_PREFIX:(0,o.u)(l.Z.GALLERY),MODEL:e.SQS.LayoutEngine.BlockModel.Gallery})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-gallery","@sqs/layout-engine/block-gallery","squarespace-block-gallery-editor","squarespace-block-gallery-model-editor","squarespace-dialog-content-item-grid","squarespace-dialog-content-selector","squarespace-dialog-fields","squarespace-dialog-gallery-options","squarespace-dialog-multi-frame","squarespace-dialog-multi-option","squarespace-models-content-collection","squarespace-premium-block-mixin"]})},339027:function(){YUI.add("squarespace-block-horizontal-rule-editor",function(c){c.namespace("Squarespace.Block.Editor"),c.Squarespace.Block.Editor.HorizontalRule=c.Base.create("horizontal-rule-block-editor-dialog",c.SQS.LayoutEngine.Block.Editor.Base,[],{},{NS:"blockEditor",ATTRS:{editingButtons:{value:!0},includeEdit:{value:!1}}})},"1.0",{requires:["base","@sqs/layout-engine/block-editor-base"]})},479327:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-horizontal-rule",function(e){e.namespace("Squarespace.Block").HorizontalRule=e.Base.create("block-horizontalrule",e.SQS.LayoutEngine.Block.HorizontalRule,[],{renderUI:function(){var a=e.Node.create("<hr>");this.get("contentBox").appendChild(a),this.fire("widget:contentUpdate")}},{CSS_PREFIX:(0,o.u)(l.Z.HORIZONTAL_RULE),ATTRS:{editor:{valueFn:function(){return d.Lk(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.HorizontalRule}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-horizontal-rule","squarespace-block-horizontal-rule-editor","squarespace-block-schema-editor"]})},575508:function(c,b,t){"use strict";var l=t(971237),d=t.n(l),o=t(496518),e=t.n(o),a=t(444867),r=t.n(a),s=t(762379),n=t(916661),i=n.Z.isSevenOne()&&!s.Z.isFeatureEnabled(r().FLUID_ENGINE_OPT_OUT);YUI.add("squarespace-block-html-editor",function(u){var h=["p","ul","ol","blockquote","h1","h2","h3","h4","h5","h6"];u.namespace("Squarespace.Block.Editor"),u.Squarespace.Block.Editor.Html=u.Base.create("block-html-editor",u.Squarespace.Block.Editor.Schema,[u.SQS.LayoutEngine.Block.MixinSplitable,u.SQS.LayoutEngine.Block.MixinCoalesceable],{insertContentIntoModel:function(g,p){var f=[];p&&(f=p.reduce(function(m,_){return m.concat(_.get("model").get("textAttributes"))},[]),f=e()(d()(f,"id"))),this._model.setAttrs({textAttributes:f,source:g,html:g})},beforeLayoutDrag:function(){var g=this.get("host").contentHtml.contentEditor;g&&g.beforeLayoutDrag(),u.SQS.LayoutEngine.Block.MixinSplitable.prototype.beforeLayoutDrag.call(this)},afterLayoutDrag:function(){u.SQS.LayoutEngine.Block.MixinSplitable.prototype.afterLayoutDrag.call(this);var g=this.get("host").contentHtml.contentEditor;g&&g.afterLayoutDrag()},getBlockLevelElements:function(){var g=this.get("selectorsForInsertPoints");return new u.NodeList(u.Array.filter(this._cb.one(".sqs-html-content").get("children").getDOMNodes(),function(p){return p=u.one(p),p.test(g)&&p.getContent()}))},_isCoalesceable:function(g){var p=u.Widget.getByNode(g);return!p.get("isNewBlock")&&!p.get("model").get("floatDir")&&g.get("text")!==p.contentHtml.get("placeholderText")},onEditClicked:function(g){g?this.fire("edit"):this.get("host").triggerShowRteToolbar()}},{NS:"blockEditor",ATTRS:{includeEdit:{value:i},minHSize:{value:1},selectorsForInsertPoints:{valueFn:function(){return u.Array.map(h,function(g){return".sqs-html-content > "+g}).join(", ")}},selectorsForDropZone:{valueFn:function(){return u.Array.map(h,function(g){return".sqs-html-content:not(.rte)  "+g}).join(", ")}}}})},"1.0",{requires:["base","squarespace-block-schema-editor","@sqs/layout-engine/block-editor-base","@sqs/layout-engine/block-mixin-coalesceable","@sqs/layout-engine/block-mixin-splitable","@sqs/layout-engine/layout-drop"]})},16761:function(c,b,t){"use strict";var l=t(784874),d=t(900391),o=t(188405),e=t(916661),a=t(260175),r=t(352635),s=t(202560);YUI.add("squarespace-block-html",function(n){n.namespace("Squarespace.Block"),n.Squarespace.Block.Html=n.Base.create("block-html",n.SQS.LayoutEngine.Block.ParentBase,[n.Squarespace.Block.PremiumBlockMixin,n.SQS.LayoutEngine.Block.MixinContainerStyles],{initializer:function(i){this.contentHtml=this.add({childType:n.SQS.LayoutEngine.BlockContent.Html,editable:i.editable,model:i.model,type:"full",toolbarOptions:{removeBlock:!this.get("lockedLayout")}}).item(0),this.set("model",this.contentHtml.get("model"))},renderUI:function(){this.contentHtml.set("editor",this.get("blockContentEditor")),this.contentHtml.render(this.get("contentBox"))},syncUI:function(i){this.get("rendered")&&this.contentHtml.syncUI(i)},bindUI:function(){n.Global.on("section:theme:change",this.handleSectionThemeChange,this)},handleSectionThemeChange:function(i,u){var h=this.get("contentBox").getDOMNode(),g=o.I4(o.gk(h));if(g===i){var p=this.get("model").get("html"),f=new DOMParser().parseFromString(p,"text/html"),m=d.VG(f.body).innerHTML;this.contentHtml.setContent(m)}},appendHTML:function(i){var u=this.get("model").get("html"),h=u.trim()+i.trim();this.contentHtml.setContent(h)},isEmpty:function(){return!this.get("model").get("html")},toJSON:function(){return{type:this.get("type"),id:this.get("id"),value:this.contentHtml.toJSON(),containerStyles:this.get("containerStyles")}},triggerShowRteToolbar:function(){this.contentHtml.showRteToolbar()}},{CSS_PREFIX:(0,s.u)(l.Z.HTML),MODEL:n.SQS.LayoutEngine.ContentModel.Html,ATTRS:{blockContentEditor:{valueFn:function(){return n.Squarespace.Content.HtmlEditor}},editor:{valueFn:function(){return n.Squarespace.Block.Editor.Html}},toolbarOptions:{value:{aiWriter:(0,a.i)(r.breakpoints).platform!=="mobile"&&!n.Object.hasKey(window,"MOBILEAPP"),textColorMapping:e.Z.isSevenOne(),scaledText:e.Z.isSevenOne(),highlight:e.Z.isSevenOne()}},classNames:{value:"html-block"},type:{value:l.Z.HTML},model:{getter:function(){return this.contentHtml.get("model")}},floatable:{value:!0}}})},"2.0",{requires:["base","@sqs/layout-engine/block-base","@sqs/layout-engine/block-content-html","@sqs/layout-engine/block-mixin-container-styles","squarespace-block-content-html-editor","squarespace-block-html-editor","squarespace-premium-block-mixin"]})},202346:function(){YUI.add("squarespace-block-icon",function(c){c.namespace("Squarespace.Block");var b=c.Squarespace.Block.Icon=c.Base.create("blockIcon",c.SQS.LayoutEngine.LayoutInsert.BlockIconBase,[c.Squarespace.Block.PremiumBlockMixin],{renderUI:function(){var t=c.ClassNameManager.getClassName("sqs","blockicon",this.get("id"),!0);this.get("boundingBox").addClass(t),this.get("contentBox").setHTML('<div class="label">'+this.get("label")+"</div>")},bindUI:function(){this.after("pressedChange",this._afterPressedChange,this)},_afterPressedChange:function(t){this.get("boundingBox").toggleClass(b.CSS_PREFIX+"-pressed",!!t.newVal)}},{CSS_PREFIX:"sqs-blockicon",ATTRS:{pressed:{value:!1}}})},"1.0",{requires:["base","@sqs/layout-engine/layout-insert-block-icon-base","squarespace-premium-block-mixin"]})},947689:function(c,b,t){"use strict";var l=t(553772),d=t(916661);YUI.add("squarespace-block-image-base",function(o){o.namespace("Squarespace.Block");var e=o.Squarespace.Block.ImageBase=o.Base.create("block-image-base",o.SQS.LayoutEngine.Block.Image,[o.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){e.superclass.bindUI.call(this),this.get("model").after("imageIdChange",this.toggleContentCaption,this),this.get("model").after("descriptionChange",this.setCaptionFromGetty,this)},ensureLoadedThenShowDialog:function(a){var r=this.get("model").get("imageId");r?this.contentImage.after("image-loaded",a):a()},setCaptionFromGetty:function(a){if(a.source==="getty"){var r=a.newVal.html,s=a.prevVal.html;if(r!==s){var n=this.get("collectionId");if(o.Lang.isString(n)){var i=o.Squarespace.ContentCollectionCache.getById(n);i&&o.Squarespace.ContentCollectionUtils.isBlog(i)&&this.contentCaption.setContent(r)}}}},toggleContentCaption:function(a){var r=a.newVal;this.contentCaption&&(r?this.contentCaption.show():this.contentCaption.hide())}},{ATTRS:{isImageBlockCardsEnabled:{getter:function(){var a=this.get("model").layout,r=a?a.get("collectionId"):null;if(!r)return!1;var s=o.Squarespace.ContentCollectionCache.getById(r),n=s?o.Squarespace.ContentCollectionUtils.isPage(s):null;return!!n}},htmlContentEditor:{valueFn:function(){return o.Squarespace.Content.HtmlEditor}},htmlContentEditorType:{valueFn:function(){return d.Z.isSevenOne()?l.rg.CLASSIC:l.rg.SIMPLE}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-image","squarespace-block-content-html-editor","squarespace-block-content-image-editor","squarespace-content-collection-utils","squarespace-premium-block-mixin"]})},417298:function(c,b,t){"use strict";var l=t(436715);YUI.add("squarespace-image-editor-resize-mixin",function(d){d.namespace("Squarespace.Block.Editor").ImageResizeMixin=d.Base.create("image-resize-mixin",d.Base,[],{initializer:function(){this._initOverlay()},_initOverlay:function(){var o=this.get("host").contentImage,e=o.get("model").get("imageId");e&&(this._overlay=d.Node.create('<div class="sqs-editing-overlay"></div>'),o.get("contentBox").append(this._overlay),this._editingChangeHandle=o.on("editingChange",function(a){a.newVal?this._overlay.hide():this._overlay.show()},this))},_syncResizable:function(){var o=this.get("host").contentImage,e=o.get("model"),a=e.get("imageId"),r=e.get("processing"),s=a&&!r&&d.Lang.isValue(this._model)&&!(0,l.yR)(o.get("boundingBox").getDOMNode());s?this.constructor.superclass._syncResizable.apply(this,arguments):this._setBlockResizable(!1)},_setBlockResizable:function(o){var e=this._hasResizablePlugin();this.constructor.superclass._setBlockResizable.apply(this,arguments),o&&!e&&this._bindResizeEvents()},_bindResizeEvents:function(){var o=this._model.get("designLayout");if(!(!this._model.get("imageId")||["card","overlap","collage"].includes(o))){var e=this.get("host").contentImage.get("boundingBox").resize;this._registerEvent(e.on("handle-dblclick",this._resetOriginalAspectRatio,this),e.on("resize:start",this._resetEditingState,this),e.on("resize:end",this._restoreEditingState,this),e.after("resize:resize",this._updateAspectRatio,this),e.after("resize:end",this._updateAspectRatio,this))}},_updateAspectRatio:function(){var o=this.get("host").contentImage,e=o.get("boundingBox").get("region"),a=e&&e.height/e.width*100;o.get("model").set("aspectRatio",a)},_resetOriginalAspectRatio:function(){var o=this.get("host").contentImage,e=o.get("model").get("dimensions"),a=e&&e.height/e.width*100;o.get("model").set("aspectRatio",a)},_resetEditingState:function(){var o=this.get("host").contentImage.contentEditor;this.resizeStartEditingState=o.get("editing"),o.set("editing",!1)},_restoreEditingState:function(){if(typeof this.resizeStartEditingState=="boolean"){var o=this.get("host").contentImage.contentEditor;o.set("editing",this.resizeStartEditingState||!1)}},destructor:function(){this._overlay&&(this._overlay.remove(!0),this._editingChangeHandle.detach())}},{NS:"blockEditor",ATTRS:{resizable:{value:!0},resizeNode:{valueFn:function(){var o=this.get("host").contentImage;return o.get("boundingBox")}}}})},"1.0",{requires:["base"]})},640366:function(c,b,t){"use strict";var l=t(714487),d=t(723796),o=d.Em.createLogger("block/image","orange",!1);YUI.add("squarespace-block-image",function(e){e.namespace("Squarespace.Block"),e.Squarespace.Block.Editor.ImageBlockSchemaEditor=e.Base.create("image-block-schema-editor-resize",e.Squarespace.Block.Editor.Schema,[e.Squarespace.Block.Editor.ImageResizeMixin],{},{NS:"blockEditor"});var a=e.Squarespace.Block.Image=e.Base.create("block-image",e.Squarespace.Block.ImageBase,[e.SQS.LayoutEngine.Block.MixinContainerStyles],{bindUI:function(){a.superclass.bindUI.call(this),this.get("model").after("imageIdChange",this.syncContentImage,this),this.get("model").after("lightboxChange",this.syncLightbox,this)},syncUI:function(){a.superclass.syncUI.call(this),this.syncLightbox()},syncContentImage:function(s){var n=s.newVal,i=this.contentImage.get("model"),u=i.get("imageId");u!==n&&(o("syncContentImage (from model imageIdChange)",{nextImageId:n,prevImageId:u}),i.reset(),i.set("imageId",n))},syncLightbox:function(){this.get("contentBox").unplug(e.Squarespace.Lightbox2Plug.NS);var r=this.get("model");if(!(this.get("editable")||!r.get("lightbox"))){var s=r.get("description.html")||"",n=this.contentImage.get("model"),i=e.Node.create("<img/>");i.setAttribute("data-src",n.get("baseAssetUrl")),i.setAttribute("data-image-focal-point",n.get("focalPoint"));var u=n.get("dimensions");e.Lang.isObject(u)&&i.setAttribute("data-image-dimensions",u.width+"x"+u.height),this.get("contentBox").plug(e.Squarespace.Lightbox2Plug,{lightboxOptions:{theme:r.get("lightboxTheme"),content:i,meta:s}})}}},{ATTRS:{editor:{value:e.Squarespace.Block.Editor.ImageBlockSchemaEditor},defaultContentModel:{value:{title:{engine:"wysiwyg",source:"",html:(0,l.t)("Make it stand out",null,{project:"scripts-v6.block"})},subtitle:{engine:"wysiwyg",source:"",html:(0,l.t)("Whatever it is, the way you tell your story online can make all the difference.",null,{project:"scripts-v6.block"})}}},imageContentEditor:{valueFn:function(){return e.Squarespace.Content.Image.Editor}},addButtonText:{value:(0,l.t)("Add text",null,{project:"scripts-v6.block"})}}})},"2.0",{requires:["base","@sqs/layout-engine/block-mixin-container-styles","squarespace-block-image-base","squarespace-block-schema-editor","squarespace-block-content-image-editor","squarespace-image-editor-resize-mixin"]})},879704:function(c,b,t){"use strict";var l=t(425364),d=t(714487),o=t(553772),e=t(784012),a=t(250632);YUI.add("squarespace-block-inline-editable-button",function(r){r.namespace("Squarespace.Block");var s={};s[e.u8.MEDIUM.value]=e.Yk.PRIMARY.value,s[e.u8.LARGE.value]=e.Yk.SECONDARY.value,s[e.u8.SMALL.value]=e.Yk.TERTIARY.value,r.Squarespace.Block.InlineEditableButton=r.Base.create("block-inline-editable-button",r.Squarespace.Block.ButtonBase,[r.WidgetParent],{initializer:function(){this.constructor.superclass.initializer.call(this),this.after("widget:contentUpdate",function(){this.renderLinkFlyout(),this.renderTextEditor()},this);var n=this.get("model");this._registerEvent(n.after("buttonTextChange",function(i){i[l.AttrChangeProps.FROM_WYSIWYG]!==!0?this.updateText(i.newVal):(0,a.kM)({text:i.newVal})},this)),this._registerEvent(n.after("buttonSizeChange",function(i){var u=i.newVal,h=s[u];this.updateSize(u),this.updateType(h)},this)),this._registerEvent(n.after("buttonAlignmentChange",function(i){this.updateAlignment(i.newVal),this.repositionToolbar()},this))},bindUI:function(){},destructor:function(){this.textEditor&&this.textEditor.destroy(),this.textEditor=null,this.linkFlyout&&this.linkFlyout.destroy(),this.linkFlyout=null,this.constructor.superclass.destructor.call(this)},repositionToolbar:function(){var n=window.document.createEvent("UIEvents");n.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(n)},renderLinkFlyout:function(){this.linkFlyout||(this.linkFlyout=new window.top.Y.Squarespace.Flyout.LinkEdit,this.bindLinkFlyout())},bindLinkFlyout:function(){var n=this.get("model");this._registerEvent(this.linkFlyout.after(["updateLink","removeLink"],function(){n.setAttrs({buttonLink:this.linkFlyout.get("linkUrl")||"",newWindow:this.linkFlyout.get("newWindow")},l.SetDetails.FROM_WYSIWYG)},this))},renderTextEditor:function(){if(!this.textEditor){var n=this.get("contentBox"),i=n.one("a");if(i){i.setAttribute("onclick","return false;"),i.removeAttribute("href"),i.empty();var u={},h={align:!1,bold:!1,clearFormatting:!1,italic:!1,link:!1,pastePlain:!1,underline:!1,undoRedo:!1};u[o.Ep.BUTTON_ALIGN_LEFT]=this.handleChangeButtonAlignment.bind(this,e.N3.LEFT),u[o.Ep.BUTTON_ALIGN_CENTER]=this.handleChangeButtonAlignment.bind(this,e.N3.CENTER),u[o.Ep.BUTTON_ALIGN_RIGHT]=this.handleChangeButtonAlignment.bind(this,e.N3.RIGHT),u[o.Ep.BUTTON_SIZE_SMALL]=this.handleChangeButtonSize.bind(this,e.u8.SMALL.value),u[o.Ep.BUTTON_SIZE_MEDIUM]=this.handleChangeButtonSize.bind(this,e.u8.MEDIUM.value),u[o.Ep.BUTTON_SIZE_LARGE]=this.handleChangeButtonSize.bind(this,e.u8.LARGE.value),u[o.Ep.BUTTON_LINK]=this.handleButtonLink.bind(this),h={undoRedo:!1,buttonAlignment:!0,buttonSize:!0,buttonLink:!0},this.textEditor=this.add({childType:r.SQS.LayoutEngine.BlockContent.Html,editor:r.Squarespace.Content.HtmlEditor,render:i,block:this,editable:this.get("editable"),model:this.getTextEditorModel(),type:o.rg.PLAIN_TEXT,placeholderText:(0,d.t)("Add text",null,{project:"scripts-v6.block"}),isLinkable:!1,isInline:!0,toolbarOptions:h,commands:u}).item(0),this.bindTextEditor()}}},bindTextEditor:function(){var n=this.get("model"),i=this.textEditor?this.textEditor.get("model"):null;if(i){var u=this.get("contentBox"),h=u.one("a");h.setStyles({cursor:"text"}),this._registerEvent(h.on("click",function(){this.textEditor.scrollAndFocusRte()},this)),this._registerEvent(i.after("htmlChange",function(p){n.set("buttonText",p.newVal,l.SetDetails.FROM_WYSIWYG)},this))}},syncEditable:function(){this.constructor.superclass.syncEditable.call(this);var n=this.get("editable");this.each(function(u){u.set("editable",n)},this)},toJSON:function(){return this.constructor.superclass.toJSON.apply(this,arguments)},getTextEditorModel:function(){var n=this.get("model"),i=n.get("buttonText");return{html:i||""}},replaceClassnameIfExists:function(n,i,u){i!==u&&n.hasClass(i)&&n.replaceClass(i,u)},updateAlignment:function(n){var i=this.get("contentBox"),u=i.one("[data-alignment]");u.setAttribute("data-alignment",n),Object.values(e.N3).forEach((function(g){g!==n&&this.replaceClassnameIfExists(u,"sqs-block-button-container--"+g,"sqs-block-button-container--"+n)}).bind(this))},updateSize:function(n){var i=this.get("contentBox"),u=i.one("[data-button-size]");u.setAttribute("data-button-size",n);var h=u.one("a");Object.values(e.u8).forEach((function(p){p.value!==n&&this.replaceClassnameIfExists(h,"sqs-block-button-element--"+p.value,"sqs-block-button-element--"+n)}).bind(this)),i.one("[data-button-size]").setAttribute("data-button-size",n)},updateType:function(n){var i=this.get("contentBox"),u=i.one("[data-button-type]");u.setAttribute("data-button-type",n);var h=u.one("a");Object.values(e.Yk).forEach((function(p){p.value!==n&&(this.replaceClassnameIfExists(h,"sqs-button-element--"+p.value,"sqs-button-element--"+n),this.replaceClassnameIfExists(h,"sqs-block-button-element--"+p.value,"sqs-block-button-element--"+n))}).bind(this)),i.one("[data-button-type]").setAttribute("data-button-type",n)},updateText:function(n){var i=this.get("contentBox"),u=i.one("[contenteditable]");u&&u.set("text",n)},handleChangeButtonAlignment:function(n){if(Object.values(e.N3).includes(n)){var i=this.get("model");i.set("buttonAlignment",n,l.SetDetails.FROM_WYSIWYG)}},handleChangeButtonSize:function(n){var i=Object.values(e.u8).reduce(function(h,g){return h.concat([g.value])},[]);if(i.includes(n)){var u=this.get("model");u.set("buttonSize",n,l.SetDetails.FROM_WYSIWYG)}},handleButtonLink:function(){if(this.linkFlyout.get("isEditorOpen")){this.linkFlyout.close();return}var n=this.get("model"),i=this.get("contentBox").one("a").getDOMNode().getBoundingClientRect();this.linkFlyout.set("editorSelectionCoords",{x:i.left,y:i.bottom}),this.linkFlyout.openEditor(n.get("buttonLink"),n.get("newWindow"),null,null)}},{ATTRS:{editor:{value:r.Squarespace.Block.Editor.Schema}}})},"1.0",{requires:["base","widget-parent","squarespace-flyout-link-edit","@sqs/layout-engine/block-content-html","squarespace-block-button-base","squarespace-block-buttons-only-editor","squarespace-block-schema-editor","squarespace-block-content-html-editor"]})},628047:function(c,b,t){"use strict";var l=t(337061),d=t(938077),o=t(614649);YUI.add("squarespace-block-inline-text-editors-mixin",function(e){e.namespace("Squarespace.Block").InlineTextEditorsMixin=e.Base.create("block-inline-text-editors-mixin",e.Base,[],{initTextEditors:function(){this.textEditors={},this._registerEvent({detach:(0,l.gH)(d.Ouw,this.syncTextEditorsEditable.bind(this))})},syncTextEditorsEditable:function(){var a=this.get("editable"),r=(0,d.Ouw)((0,l.d6)())===this.get("id"),s=a&&r;Object.values(this.textEditors).forEach(function(i){i.set("editable",s)})},blurTextEditors:function(){var a=!0;Object.values(this.textEditors).forEach(function(s){s.blur&&s.blur(a)})},_renderTextEditor:function(a){if(this.textEditors[a.attr])return this.textEditors[a.attr];if(!a.rteConfig)return null;var r=this.get("contentBox"),s=r.one(a.selector);if(!s)if(a.nodeConfig)s=e.Node.create(a.nodeConfig),r.appendChild(s);else return null;a.placeholderClassname&&!a.getContent.call(this)&&s.addClass(a.placeholderClassname);var n=s.getDOMNode().tagName,i=r.getDOMNode().ownerDocument,u=i.defaultView!==i.defaultView.top,h=o.kk({align:!1,link:a.rteConfig.isLinkable,isInFrame:u,pastePlain:!1,undoRedo:!1},a.rteConfig),g=a.getContent?a.getContent.call(this):s,p=Object.assign({blockTypeName:this.get("blockTypeName"),boundingBox:n,contentNode:n,editable:!1,initialData:g,replaceNode:s,menuItems:h},a.rteConfig),f=new e.Squarespace.TextEditor(p);return f.on("contentUpdated",function(_){a.sync.call(this,_.content)},this),f.on("mouseDown",function(_){var v=_.details[0];e.SQS.LayoutEngine.Singletons.BlockFocusHandler.handleRteMousedown(v,this,f)},this),f.render(s),this.textEditors[a.attr]=f,f},destroyTextEditors:function(){var a=!1;Object.values(this.textEditors).forEach(function(s){s.destroy&&s.destroy(a)}),this.textEditors={}}},{})},"1.0",{requires:["base","@sqs/layout-engine/layout-block-focus-handler"]})},977714:function(c,b,t){"use strict";var l=t(714487),d=t(437951),o=t.n(d),e=t(815211),a=t.n(e),r=t(868192);YUI.add("squarespace-block-instagram-editor",function(s){s.namespace("Squarespace.Block.Editor");var n=s.Squarespace.Block.Editor.Instagram=s.Base.create("instagram-block-editor-dialog",s.Squarespace.Block.Editor.Gallery,[],{_getModelEditor:function(){return s.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Instagram")},_initConfigDialog:function(){var u=this._model.layout.get("contentItemId");return s.Lang.isValue(u)||(u=this._model.layout.get("parentItemId")),this._model.setAttrs({pageCollectionId:this._model.layout.get("collectionId"),containingItemId:u}),n.superclass._initConfigDialog.apply(this,arguments)},_getServiceId:function(){return a().INSTAGRAM}},{NS:"blockEditor",ATTRS:{}});s.namespace("Squarespace.Block.ModelEditorDialog");var i=s.Squarespace.Block.ModelEditorDialog.Instagram=s.Base.create("InstagramModelEditorDialog",s.Squarespace.Block.ModelEditorDialog.SearchGallery,[],{_getServiceId:function(){return a().INSTAGRAM},_isValidAccountForSearch:function(){var u=this._getCurrentAccount();return!!u},_isSocialSearchEnabled:function(){var u=this.get("model");return!!u&&!!u.get("enable-search")},_getSocialFieldNames:function(){var u=i.superclass._getSocialFieldNames.call(this);return u.push("search-deprecated-warning"),u},_getInstagramGalleryOptions:function(){var u=this._getGalleryOptions();delete u["show-meta-only-title"];var h=(0,l.t)("Show Caption",null,{project:"scripts-v6.block"});u["show-meta"].title=h,u["show-meta-basic"].title=h;var g=(0,l.t)("Caption Position",null,{project:"scripts-v6.block"});u["meta-position"].title=g;var p=(0,l.t)("Show the caption only on hover",null,{project:"scripts-v6.block"});return u["show-meta-on-hover"].description=p,u},_getDefaultDialogConfig:function(){var u=this.get("model").toJSON(),h=i.superclass._getDefaultDialogConfig.call(this),g=h.tabs[0].fields;return h.name="instagram-block-editor",g.unshift({ctor:s.Squarespace.DialogFields.WarningBanner,name:"search-deprecated-warning",config:{"strings.warningMessage":(0,l.t)("Instagram search results are no longer supported. To use the Instagram block, remove the search.",null,{project:"scripts-v6.block"}),visible:this._isSocialVisible()}}),g.unshift({ctor:s.Squarespace.DialogFields.Description,text:(0,l.t)('Display your own Instagram feed on your site and choose between four different layout styles in the Design tab. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:r.INSTAGRAM},{project:"scripts-v6.block"})}),g.push({ctor:s.Squarespace.DialogFields.Text,name:"searchTerm",config:{"strings.placeholder":(0,l.t)("Search Instagram for\u2026",null,{project:"scripts-v6.block"}),data:u.searchTerm,maxLength:100,className:"thin",visible:this._isSocialVisible()}}),g.push({ctor:s.Squarespace.DialogFields.Button,name:"refresh",config:{"strings.text":(0,l.t)("Refresh",null,{project:"scripts-v6.block"}),className:"thin",visible:this._isSocialVisible()}}),h.tabs[1].fields=[{ctor:s.Squarespace.DialogFields.GalleryOptions,name:"options",config:{options:{$valueFn:s.bind(this._getInstagramGalleryOptions,this)}}}],h}},{ATTRS:{icon:{value:"instagram"},socialAccountType:{value:a().INSTAGRAM},collectionType:{value:o().INSTAGRAM},strings:{value:{name:"Instagram",itemTypePlural:"photos",itemType:"photo"}}}})},"1.0",{requires:["base","squarespace-block-search-gallery-model-editor","squarespace-block-instagram-model","squarespace-damask-context-globals","squarespace-dialog-warning-banner"]})},90932:function(){YUI.add("squarespace-block-instagram-model",function(c){c.namespace("Squarespace.ContentModel").InstagramBlock=c.Base.create("InstagramModel",c.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{})},"1.0",{requires:["base","model","squarespace-block-summary-gallery-model"]})},933593:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560),e=8e3;YUI.add("squarespace-block-instagram",function(a){a.namespace("Squarespace.Block");var r=a.Squarespace.Block.Instagram=a.Base.create("block-instagram",a.Squarespace.Block.SummaryGallery,[a.Squarespace.Block.PremiumBlockMixin],{_renderBlock:function(s){r.superclass._renderBlock.call(this,s,!0)},_renderSuccess:function(s){r.superclass._renderSuccess.call(this,s,!0),this._optionalRerender()},_shouldRenderAgain:function(){var s=this.get("contentBox"),n=s.one(".sqs-blockStatus"),i=a.Lang.isNull(n)?null:n.getAttribute("data-state"),u=this.get("model");return!a.Lang.isNull(i)&&(i==="no-content"||i==="uninitialized"&&u.changed&&u.changed.collectionId&&!a.Lang.isNull(u.changed.collectionId)&&u.changed.collectionId!=="add-account")},_optionalRerender:function(){this._shouldRenderAgain()&&a.later(e,this,function(){this._renderBlock()},null,!1)}},{CSS_PREFIX:(0,o.u)(l.Z.INSTAGRAM),MODEL:a.Squarespace.ContentModel.InstagramBlock,ATTRS:{editor:{valueFn:function(){return d.Lk(this.get("blockTypeName"))?a.Squarespace.Block.Editor.Schema:a.Squarespace.Block.Editor.Instagram}},type:{value:l.Z.INSTAGRAM}}})},"1.0",{requires:["base","squarespace-block-summary-gallery","squarespace-block-instagram-editor","squarespace-block-instagram-model","squarespace-block-collection-link-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},677553:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-block-link-editor",function(d){var o={width:335,tabs:[{title:(0,l.t)("Edit External Link",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-link-16-light-solid.png",scroll:!0,fields:[{ctor:d.Squarespace.DialogFields.Description,config:{text:(0,l.t)("Below, enter the title and the URL of the link you would like to add.",null,{project:"scripts-v6.block"})}},{type:"text",name:"linkTitle",submitOnEnter:!0,title:(0,l.t)("Link Title",null,{project:"scripts-v6.block"}),titleStyle:"inline",style:"title"},{type:"text",name:"linkTarget",submitOnEnter:!0,title:(0,l.t)("http://\u2026",null,{project:"scripts-v6.block"}),titleStyle:"inline",style:"normal"},{ctor:d.Squarespace.DialogFields.Check,config:{type:"check",name:"newWindow",title:(0,l.t)("Open in New Window",null,{project:"scripts-v6.block"}),description:(0,l.t)("When clicked, open this link in a new window.",null,{project:"scripts-v6.block"})}}]}]};d.namespace("Squarespace.Block.Editor").Link=d.Base.create("link-block-editor-dialog",d.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return d.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Link")}}),d.namespace("Squarespace.Block.ModelEditorDialog").Link=d.Base.create("block-link-editor",d.Squarespace.ModelEditorDialog,[],{_sanitizeURL:function(e){return e.match(/^[(?!\/\/)(http:\/\/|https:\/\/|\/|mailto:)].*/i)===null?"http://"+e:e},sanitizeDialogData:function(e){return e.linkTarget&&e.linkTarget.length>4&&(e.linkTarget=this._sanitizeURL(e.linkTarget)),e}},{ATTRS:{dialogConfig:{valueFn:function(){return o}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-description"]})},427820:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-link",function(e){var a={linkTitle:"",linkTarget:"",newWindow:!1};e.namespace("Squarespace.Block").Link=e.Base.create("block-link",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:(0,o.u)(l.Z.LINK),ATTRS:{editor:{valueFn:function(){return d.Lk(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Link}},defaultContentModel:{value:a}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","squarespace-block-link-editor","squarespace-block-collection-link-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},485813:function(c,b,t){"use strict";var l=t(784874),d=t(210750),o=t.n(d),e=t(714487),a=t(968174),r=t(423394),s=t(129860),n=t.n(s),i=t(202560),u=n().MapView,h=n().loadGoogleMapsApi,g=window.atob("QUl6YVN5QkxmSzJJUWtNZElfOG9oN2lGSjk5czNaRU5Vd3hNTnVz"),p=60;YUI.add("squarespace-block-map",function(f){var m={location:{mapLat:40.7207559,mapLng:-74.0007613,mapZoom:12},vSize:12,style:a.z0.GRAYSCALE,labels:!0,terrain:!1,controls:!1};if(Static.SQUARESPACE_CONTEXT){var _=Static.SQUARESPACE_CONTEXT.website;_&&_.location&&(m.location=f.merge(m.location,_.location))}f.namespace("Squarespace.Block");var v=f.Base.create("map-block-schema-editor-resize",f.Squarespace.Block.Editor.Schema,[],{_afterEditingChange:function(E){E.newVal&&!E.prevVal?this._removeEditingOverlay():!E.newVal&&E.prevVal&&(this.set("editingOverlay",f.Node.create('<div class="sqs-editing-overlay"></div>')),this._createEditingOverlay()),v.superclass._afterEditingChange.apply(this,arguments)}},{NS:"blockEditor",ATTRS:{resizable:{value:!0},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}}}});f.Squarespace.Block.Map=f.Base.create("block-map",f.SQS.LayoutEngine.Block.ModelSyncBase,[f.SQS.LayoutEngine.Block.MixinAspectRatio,f.Squarespace.Block.PremiumBlockMixin],{initializer:function(E){this._mapHolder=f.Node.create("<div class='sqs-map-wrapper'>"),this.get("contentBox").append(this._mapHolder),this.set("mapNode",this._mapHolder.getDOMNode()),this.after("resized",this._onResize,this),E.model&&this._isMapDataBad(E.model.location)&&this._restoreBadData()},destructor:function(){this.updateMapPosition.flush(),this.queuedRender&&(this.queuedRender.flush(),this.queuedRender=null)},renderUI:function(){this._renderBlock()},_onResize:function(){if(!this.queuedRender)try{var E=this.get("mapView");f.Lang.isValue(E)&&E.redraw()}catch{console.log("google does not exist for map resizing")}},_onMarkerDrag:function(E){var S={lat:E.latLng.lat(),lng:E.latLng.lng()};this._reverseGeocodeAddress(S).then((function(y){var C=this.get("model"),O=Object.assign({},C.get("location"),y),A=this.get("mapView");A.updateCenter(O.mapLat,O.mapLng),A.updateMarker(O.markerLat,O.markerLng),C.setAttrs({location:O})}).bind(this))},_reverseGeocodeAddress:function(E){var S=this.get("mapView").GMaps,y=new S.Geocoder;return y.geocode({location:E}).then(function(C){var O=C.results[0].formatted_address,A=O.split(", ");return{addressTitle:null,addressLine1:A[0],addressLine2:A[1]+", "+A[2],addressCountry:A[3],mapLat:E.lat,mapLng:E.lng,markerLat:E.lat,markerLng:E.lng}})},_renderBlock:function(){if(!this.queuedRender){if(!this.get("rendered")){this.after("renderedChange",this._renderBlock,this);return}if(this.get("mapView"))this.updateMapPosition(),this.fire("widget:contentUpdate");else{var E=this._getViewData();E.ui.markerDraggable=!0;var S=r.G2(),y=this._getStackFinished();this.queuedRender=f.later(p,this,function(){this.updateMapPosition.flush(),u.createView(E.ui,E.location,this._mapHolder.getDOMNode(),S).then(f.bind(function(O){this.set("mapView",O),this.get("mapView").marker.addListener("dragend",f.bind(this._onMarkerDrag,this)),this._mapHolder.__view=O,this._mapHolder.fire("map-ready"),this.fire("widget:contentUpdate"),this.queuedRender=null,y()},this),function(){console.log("Could not load Maps")}).catch(function(O){console.error(O)})})}}},updateMapPosition:o()(function(){var E=this.get("model").toJSON(),S=E.location,y=this.get("mapView");this._didMapCenterChange()&&y.updateCenter(S.mapLat,S.mapLng),y.marker&&this._didMarkerPositionChange()&&y.updateMarker(S.markerLat,S.markerLng),f.Lang.isValue(S.mapZoom)&&this._didMapZoomChange()&&y.setZoom(S.mapZoom),y.updateUIOptions(this._getViewData().ui)},p),_didMapCenterChange:function(){var E=this.get("mapView").getCenter(),S=this.get("model").toJSON().location;return E.lat!==S.mapLat||E.lng!==S.mapLng},_didMarkerPositionChange:function(){var E=this.get("mapView").getMarkerPosition(),S=this.get("model").toJSON().location;return E.lat!==S.markerLat||E.lng!==S.markerLng},_didMapZoomChange:function(){var E=this.get("mapView").location.mapZoom,S=this.get("model").toJSON().location;return E!==S.mapZoom},_getSearchableAddress:function(E){var S=[];return E.addressLine1&&S.push(E.addressLine1),E.addressLine2&&S.push(E.addressLine2),E.addressTitle&&!S.length&&S.unshift(E.addressTitle),E.addressCountry&&S.push(E.addressCountry),S.length?S.join(", "):""},_isMapDataBad:function(E){return!E||!f.Lang.isValue(E.mapLat)||!f.Lang.isValue(E.mapLng)||!f.Lang.isValue(E.mapZoom)},_restoreBadData:function(){var E={location:{}},S=E.location,y=this.get("model").toJSON().location,C=this._getSearchableAddress(y);if(!y||!C){S=m.location,this.get("model").setAttrs(E);return}if(f.Lang.isValue(y.mapZoom)||(S.mapZoom=m.location.mapZoom),f.Lang.isValue(y.markerLat)&&f.Lang.isValue(y.markerLng)){S.markerLat=S.mapLat,S.markerLng=S.mapLng,this.get("model").setAttrs(E);return}h(r.mg(),g).then(f.bind(function(O){var A=new O.Geocoder,I={address:C};A.geocode(I,f.bind(function(D,T){if(T===f.config.win.google.maps.GeocoderStatus.OK){var B=D[0].geometry.location;S.mapLat=B.lat(),S.mapLng=B.lng(),this.get("model").setAttrs(E)}else new f.Squarespace.Widgets.Alert({"strings.title":(0,e.t)("Lookup Failed",null,{project:"scripts-v6.block"}),"strings.message":(0,e.t)("Address lookup was not successful: {geocodeResponseStatus}",{geocodeResponseStatus:T},{project:"scripts-v6.block"})})}))},this))},_getViewData:function(){return a.Ei(this.get("model").toJSON())}},{CSS_PREFIX:(0,i.u)(l.Z.MAP),ATTRS:{editor:{value:v},defaultContentModel:{value:m},mapNode:{valueFn:function(){return this.get("contentBox").getDOMNode()}},mapView:{value:null,validator:f.Squarespace.AttrValidators.isNullOrInstanceOf(u)}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-schema-editor","squarespace-widgets-alert","squarespace-premium-block-mixin"]})},906819:function(c,b,t){"use strict";var l=t(181298),d=t(591214),o=t.n(d),e=t(714487),a=t(868192),r=t(187304);YUI.add("squarespace-block-markdown-editor",function(s){var n=["p","ul","ol","blockquote","h1","h2","h3","h4","h5","h6"],i='<div class="sqs-placeholder">'+(0,e.t)("Double-click to edit\u2026",null,{project:"scripts-v6.block"})+"</div>";s.namespace("Squarespace.Block.Editor"),s.Squarespace.Block.Editor.Markdown=s.Base.create("markdown-block-editor-dialog",s.Squarespace.Block.Editor.Code,[s.SQS.LayoutEngine.Block.MixinSplitable,s.SQS.LayoutEngine.Block.MixinCoalesceable],{initializer:function(){this.placeholder=s.Node.create(i),this._bb.appendChild(this.placeholder),this.on("editingChange",this._togglePlaceholder,this),this._model.after("htmlChange",function(_){this._togglePlaceholder()},this),this._togglePlaceholder(),this._model.get("wysiwyg").mode!=="markdown"&&(this._model.get("wysiwyg").mode="markdown")},destructor:function(){this.placeholder.remove(!0),this.placeholder=null},insertContentIntoModel:function(_){var v=new RegExp(' id="yui[^"]+"',"g"),E=_.replace(v,"");this._model.get("wysiwyg").source=(0,r.u)(E),this._model.set("html",E),this._togglePlaceholder()},_togglePlaceholder:function(_){var v=_||{},E=!1;this.placeholder&&(o()(this._model.get("html"))&&!v.newVal&&(E=!0),E?this.placeholder.show():this.placeholder.hide())},_isCoalesceable:function(_){var v=s.Widget.getByNode(_);return!v.get("model").get("floatDir")&&_.one(".sqs-block-content").get("text").length>0},getBlockLevelElementsForDropZone:function(){var _=this.get("selectorsForDropZone"),v=this._cb.get("children").filter(_);return v},_getModelEditor:function(){return s.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Markdown")}},{NS:"blockEditor",ATTRS:{selectorsForInsertPoints:{valueFn:function(){return n.join(",")}},selectorsForDropZone:{valueFn:function(){return n.join(",")}}}});var u=575,h=660,g=l.GRID_PX*1.5,p=u-g*2,f=h-l.GRID_PX*5,m={width:u,height:h,forcePosition:"fixed",tabs:[{title:(0,e.t)("Markdown",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-code-16-light.png",fields:[{type:"description",text:'<a href="'+a.MARKDOWN_CHEAT_SHEET+'" target="_blank">'+(0,e.t)("Syntax Cheatsheet",null,{project:"scripts-v6.block"})+"</a>"},{type:"wysiwyg",height:f,width:p,countHeight:!0,name:"wysiwyg",titleStyle:"inline",engine:"markdown",menuConfig:"markdown",markEmbeddedHTML:!0}]}]};s.namespace("Squarespace.Block.ModelEditorDialog"),s.Squarespace.Block.ModelEditorDialog.Markdown=s.Base.create("block-markdown-editor",s.Squarespace.Block.ModelEditorDialog.Code,[],{initializer:function(){this.updateWysiwygHeightEvent=s.Do.after(this._updateWysiwygHeight,this.get("dialog"),"moveIntoView",this)},_updateWysiwygHeight:function(){var _=this.get("dialog"),v=_.getField("wysiwyg");if(v){var E=_.getBodyHeight()-_.bodyHeight,S=v.config.height;if(E>0){var y=30+S-E;v.containerHeight=y,v.editor.set("height",y+"px")}}},destructor:function(){this.updateWysiwygHeightEvent.detach()}},{ATTRS:{dialogConfig:{valueFn:function(){return m}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-mixin-coalesceable","@sqs/layout-engine/block-mixin-splitable","squarespace-block-code-editor","squarespace-damask-context-globals"]})},884422:function(c,b,t){"use strict";var l=t(994336),d=t.n(l),o=t(387582),e=t(936105);YUI.add("squarespace-block-markdown",function(a){var r=a.namespace("Squarespace.Block").Markdown=a.Base.create("block-markdown",a.SQS.LayoutEngine.Block.Markdown,[a.Squarespace.Block.PremiumBlockMixin],{syncUI:function(){if(d().get(o.Z.DISABLE_USER_SCRIPTS_COOKIE)){this.get("contentBox").empty(),this.get("contentBox").setHTML('<div class="sqs-state-message">Embedded Code: This block contains embedded code that has been disabled.</div>'),this.fire("widget:contentUpdate");return}r.superclass.syncUI.apply(this,arguments)}},{ATTRS:{editor:{valueFn:function(){return e.oW(this.get("blockTypeName"))?a.Squarespace.Block.Editor.Schema:a.Squarespace.Block.Editor.Markdown}}}})},"1.0",{requires:["base","model","squarespace-block-markdown-editor","@sqs/layout-engine/block-block-markdown","squarespace-premium-block-mixin"]})},385929:function(c,b,t){"use strict";var l=t(403594),d=t.n(l),o=t(938831),e=t.n(o),a=t(905721),r=t.n(a),s=t(714487);YUI.add("squarespace-block-marquee-model",function(n){n.namespace("Squarespace.ContentModel.Marquee"),n.Squarespace.ContentModel.Marquee=n.Base.create("MarqueeModel",n.Model,[],{},{ATTRS:{marqueeItems:{value:[{text:(0,s.t)("Dream it",null,{project:"marquee-block"})},{text:"\u3030\uFE0F"}]},linkTo:{value:""},newWindow:{value:!1},waveFrequency:{value:4},waveIntensity:{value:0},animationDirection:{value:d().LEFT},animationSpeed:{value:1},pausedOnHover:{value:!1},fadeEdges:{value:!1},textStyle:{value:e().HEADING_ONE},textSize:{value:{value:1.5,unit:r().REM}},itemSpacing:{value:{value:.5,unit:r().EM}}}})},"1.0",{requires:["base","model"]})},133322:function(c,b,t){"use strict";var l=t(784874),d=t(337061),o=t(938077),e=t(353844),a=t(202560);YUI.add("squarespace-block-marquee",function(r){r.namespace("Squarespace.Block.Marquee");var s=r.Squarespace.Block.Marquee=r.Base.create("block-marquee",r.SQS.LayoutEngine.Block.ModelCsrBase,[r.SQS.LayoutEngine.Block.MixinContainerStyles],{initializer:function(){this._detatchDraggingBlockIdListener=(0,d.gH)(o.zAH,this._recreateMarquee.bind(this)),this._detatchFrameDeviceViewListener=(0,d.gH)(o.Hlz,this._conditionallyRerenderIfInitialized.bind(this)),this._detatchFrameModeListener=(0,d.gH)(o.aEP,this._conditionallyRerenderIfInitialized.bind(this)),this.after("resized",function(){this._conditionallyRerenderIfInitialized.bind(this)},this)},show:function(){s.superclass.show.call(this),this._recreateMarquee()},_renderSuccess:function(n){s.superclass._renderSuccess.call(this,n),this.marqueeInstance=(0,e.Z)(this._getSrcNode()._node,r)},destructor:function(){this._conditionallyDestroyExistingMarquee(),this._detatchDraggingBlockIdListener&&this._detatchDraggingBlockIdListener(),this._detatchFrameDeviceViewListener&&this._detatchFrameDeviceViewListener(),this._detatchFrameModeListener&&this._detatchFrameModeListener()},_conditionallyDestroyExistingMarquee:function(){this.marqueeInstance&&this.marqueeInstance.destroy&&this.marqueeInstance.destroy()},_conditionallyStartMarquee:function(){var n=this._getSrcNode()._node;n&&n.innerHTML&&(this.marqueeInstance=(0,e.Z)(n,r))},_conditionallyRerenderIfInitialized:function(){this.marqueeInstance&&this.marqueeInstance.rerender()},_recreateMarquee:function(n){n||setTimeout((function(){this._conditionallyDestroyExistingMarquee(),this._conditionallyStartMarquee()}).bind(this),0)}},{CSS_PREFIX:(0,a.u)(l.Z.MARQUEE),MODEL:r.Squarespace.ContentModel.Marquee,ATTRS:{editor:{value:r.Squarespace.Block.Editor.Schema},type:{value:l.Z.MARQUEE}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-csr-base","squarespace-block-marquee-model","squarespace-block-schema-editor","@sqs/layout-engine/block-mixin-container-styles"]})},79220:function(){YUI.add("squarespace-block-menu-parser",function(c){var b="(\\$|\xA3|\u20AC|\xA5)";function t(d){return d.search(b)===0?d.substring(1):d}function l(d){d=d.split("/");for(var o=[],e=0;e<d.length;++e){var a=d[e].trim().split(" "),r={price:t(a[0].trim())};r.price.search("[0-9]")===-1?(delete r.price,r.title=t(a.join(" ")).trim()):a.length>1&&(a.splice(0,1),r.title=a.join(" ").trim()),o.push(r)}return o}c.namespace("Squarespace.Block.MenuParser").parse=function(d){for(var o=[],e={title:null,description:null,items:[]},a={title:null,description:null,sections:[]},r=!1,s=!1,n=d.split(`
`),i=0;i<n.length;i++){var u=n[i].trim();if(u)if(u.indexOf("===")===0)r?(a.sections.push(e),o.push(a),e={title:null,description:null,items:[]},a={title:null,description:null,sections:[]},s=!1):r=!0,i-1>=0&&(a.title=n[i-1].trim()),i+1<n.length&&n[i+1].trim().length>0&&(a.description=n[i+1].trim(),++i);else if(u.indexOf("---")===0)s?(a.sections.push(e),e={title:null,description:null,items:[]}):s=!0,i-1>=0&&(e.title=n[i-1].trim()),i+1<n.length&&n[i+1].trim().length>0&&(e.description=n[i+1].trim(),++i);else{if(i+1<n.length&&n[i+1].trim().length>0){var h=n[i+1].trim();if(h.indexOf("---")===0||h.indexOf("===")===0)continue}s=!0,r=!0;var g=u.search(b),p;if(g!==-1){var f=u.substring(0,g).trim(),m=u.substring(g);p={title:f,variants:l(m)}}else p={title:u,variants:null};for(i+1<n.length&&n[i+1].trim().length>0&&n[i+1].search(b)===-1&&(p.description=n[i+1].trim(),++i),p.variants||i+1<n.length&&n[i+1].trim().length>0&&(p.variants=l(n[i+1].trim()),++i);i+1<n.length&&n[i+1].trim().length>0&&n[i+1].indexOf("+")===0;)p.options||(p.options=[]),p.options.push(n[i+1].substring(1).trim()),++i;e.items.push(p)}}return a.sections.push(e),o.push(a),o}},"1.0",{requires:[]})},985537:function(c,b,t){"use strict";var l=t(784874),d=t(714487),o=t(408549);const e={menuTitle:(0,d.t)("MEALS",null,{project:"src.shared",notes:"The title of an example menu; oldKey: menuTitle"}),sandwichesTitle:(0,d.t)("Sandwiches",null,{project:"src.shared",notes:"A heading within an example menu; oldKey: sandwichesTitle"}),lePaysanSandwichTitle:(0,d.t)("LE PAYSAN",null,{project:"src.shared",notes:"This sandwich is titled LE PAYSAN; oldKey: lePaysanSandwichTitle"}),lePaysanIngredients:(0,d.t)(`Smoked Turkey, Brie & apple chutney
$14`,null,{project:"src.shared",notes:"LE PAYSAN sandwich ingredients and a USD price for example menu; oldKey: lePaysanIngredients"}),sohoSandwichTitle:(0,d.t)("SOHO MEDITERRANEAN SANDWICH",null,{project:"src.shared",notes:"Sandwich title; oldKey: sohoSandwichTitle"}),sohoSandwichIngredients:(0,d.t)(`Hummus, grilled vegetables & halloumi cheese
$15`,null,{project:"src.shared",notes:"Soho sandwich ingredients and USD price for example menu; oldKey: sohoSandwichIngredients"}),steakSandwichTitle:(0,d.t)("STEAK SANDWICH",null,{project:"src.shared",notes:"Sandwich title; oldKey: steakSandwichTitle"}),steakSandwichIngredients:(0,d.t)(`Steak w/ onions, bacon & cheddar
$18`,null,{project:"src.shared",notes:"Steak sandwich ingredients and USD price for example menu; oldKey: steakSandwichIngredients"}),pastaTitle:(0,d.t)("Pasta",null,{project:"src.shared",notes:"A heading within an example menu; oldKey: pastaTitle"}),gramignaTitle:(0,d.t)("GRAMIGNA",null,{project:"src.shared",notes:"This is the title of a pasta; oldKey: gramignaTitle"}),gramignaPastaIngredients:(0,d.t)(`macaroni, pork sausage, swiss chard, black pepper
$20`,null,{project:"src.shared",notes:"Gramigna pasta ingredients and USD price for example menu; oldKey: gramignaPastaIngredients"}),garganelliTitle:(0,d.t)("GARGANELLI",null,{project:"src.shared",notes:"This is the title of a pasta; oldKey: garganelliTitle"}),garganelliPastaIngredients:(0,d.t)(`pasta quills, cream, peas, truffle butter, prosciutto
$22`,null,{project:"src.shared",notes:"Garganelli pasta ingredients and USD price for example menu; oldKey: garganelliPastaIngredients"}),spallinaTitle:(0,d.t)("SPALLINA",null,{project:"src.shared",notes:"This is the title of a pasta; oldKey: spallinaTitle"}),spallinaPastaIngredients:(0,d.t)(`double ravioli, squacquerone cheese, rabbit, porcini
$24`,null,{project:"src.shared",notes:"Spallina pasta ingredients and USD price for example menu; oldKey: spallinaPastaIngredients"}),drinksTitle:(0,d.t)("DRINKS",null,{project:"src.shared",notes:"A heading within an example menu; oldKey: drinksTitle"}),wineTitle:(0,d.t)("Wine",null,{project:"src.shared",notes:"A heading within an example menu; oldKey: wineTitle"}),wine1:(0,d.t)(`Sauvignon Blanc, Kim Crawford, Imalborough
$12.00 glass /  $45.00 bottle`,null,{project:"src.shared",notes:"A sample wine with pricing per glass and bottle in USD, within an example menu; oldKey: wine1"}),wine2:(0,d.t)(`Meursault, Mat Rot, Burgundy, France
$13 glass / $80 bottle`,null,{project:"src.shared",notes:"A sample wine with pricing per glass and bottle in USD, within an example menu; oldKey: wine2"})},r=(0,o.Z)(`{menuTitle}
=========

{sandwichesTitle}
----------

{lePaysanSandwichTitle}
{lePaysanIngredients}

{sohoSandwichTitle}
{sohoSandwichIngredients}

{steakSandwichTitle}
{steakSandwichIngredients}


{pastaTitle}
------

{gramignaTitle}
{gramignaPastaIngredients}

{garganelliTitle}
{garganelliPastaIngredients}

{spallinaTitle}
{spallinaPastaIngredients}


{drinksTitle}
=========

{wineTitle}
----

{wine1}

{wine2}`,e);var s=t(202560);YUI.add("squarespace-block-menu",function(n){n.namespace("Squarespace.Block").Menu=n.Squarespace.Block.Menu=n.Base.create("block-menu",n.SQS.LayoutEngine.Block.ModelCsrBase,[n.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:(0,s.u)(l.Z.MENU),ATTRS:{editor:{value:n.Squarespace.Block.Editor.Schema},defaultContentModel:{value:{raw:r,menus:n.Squarespace.Block.MenuParser.parse(r),menuStyle:"classic",currencySymbol:"$"}},floatable:{value:!1}}})},"1.0",{requires:["@sqs/layout-engine/block-model-csr-base","squarespace-block-menu-parser","squarespace-premium-block-mixin"]})},408949:function(c,b,t){"use strict";var l=t(965782),d=t(714551),o=t(697782),e=t.n(o);YUI.add("squarespace-block-mixin-gallery-option-sync",function(a){a.namespace("Squarespace.Block.Mixins"),a.Squarespace.Block.Mixins.Gallery=a.Base.create("GalleryManagment",a.Base,[],{_getGalleryOptions:function(){var r=e()(l.B),s=this.get("model");return a.Object.each(r,function(n,i){var u=s.get(i);u!==void 0?(n.data=u,n.defaultValue=u):n.defaultValue=u||n.defaultValue},this),r},syncGalleryOptions:function(r,s){var n=this.get("dialog"),i=n.getField("options"),u=this.get("model"),h={};if(h[r]=i.get("data")[r],r==="design"){var g=null;h.design==="slider"&&(g=u.get("aspectRatio")||d.Z.DEFAULT_SLIDER_ASPECT_RATIO),u.set("aspectRatio",g,{silent:!0})}i.get("data")[r]===void 0?u.setAttrs(h,{silent:!0}):u.setAttrs(h)},unsetVSize:function(){this.get("model").set("vSize",null)},renderGridCSS:function(r,s){var n=r.one(".sqs-gallery-container");if(!a.Lang.isNull(n)){var i=this._getDefaultContent(),u=n.get("className").split(" "),h=a.Array.find(u,function(v){return v.startsWith("sqs-gallery-thumbnails-per-row-")}),g=s.padding,p=s["thumbnails-per-row"];a.Lang.isValue(p)||(p=i.thumbsPerRow),a.Lang.isValue(g)||(g=i.padding);var f=".sqs-block-content#"+r.get("id"),m=r.one("#design-grid-css"),_=f+" .sqs-gallery-design-grid { margin-right: -"+g+"px; } "+f+" .sqs-gallery-design-grid .sqs-gallery-design-grid-slide .margin-wrapper { margin-right: "+g+"px; margin-bottom: "+g+"px; };";h&&n.removeClass(h),n.addClass("sqs-gallery-thumbnails-per-row-"+p),m&&m.setContent(_)}},renderSlideshowCSS:function(r,s){var n=r,i=n.one(".sqs-gallery-thumbnails"),u;if(i){u=this._getDefaultContent(),a.Lang.isNumber(s["thumbnail-strip-height"])||(s["thumbnail-strip-height"]=u["thumbnail-strip-height"]),a.Lang.isNumber(s["thumbnail-strip-margin"])||(s["thumbnail-strip-margin"]=u["thumbnail-strip-margin"]),i.setStyles({marginTop:s["thumbnail-strip-margin"],height:s["thumbnail-strip-height"]});var h=i.getData("gallery");h["gallery-design"].syncUI()}}},{ATTRS:{NS:"gallerySynchronizer"}})},"1.0",{requires:["base","plugin","squarespace-dialog-gallery-options"]})},613222:function(c,b,t){"use strict";var l=t(259093),d=t.n(l),o=t(43594),e=t.n(o),a=t(481312),r=t.n(a),s=t(649315),n=t.n(s),i=t(953203),u=t.n(i),h=t(714487),g=t(116762),p=t(289461),f=t(377688),m=t(723796),_=t(35045),v=t(868192),E=m.Em.createLogger("newsletter-model","#456");(0,h.t)("Privacy Policy",null,{project:"website.newsletter",notes:"Entire phrase is 'This site is protected by reCAPTCHA and the Google Privacy Policy and Terms of Service apply.'"}),(0,h.t)("Terms of Service",null,{project:"website.newsletter",notes:"Entire phrase is 'This site is protected by reCAPTCHA and the Google Privacy Policy and Terms of Service apply.'"}),(0,h.t)("This site is protected by reCAPTCHA and the Google {privacyPolicyLink} and {termsOfServiceLink} apply.",null,{project:"website.newsletter",notes:"Entire phrase is 'This site is protected by reCAPTCHA and the Google Privacy Policy and Terms of Service apply.'"}),YUI.add("squarespace-block-newsletter-model",function(S){var y=(0,h.t)("Sign Up",null,{project:"website.newsletter"}),C=(0,h.t)("Email Address",null,{project:"website.newsletter"}),O=C,A="<p>"+(0,h.t)("We respect your privacy.",null,{project:"website.newsletter"})+"</p>",I="<p>"+(0,h.t)("Sign up with your email address to receive news and updates.",null,{project:"website.newsletter"})+"</p>";S.namespace("Squarespace.Models"),S.Squarespace.Models.BlockNewsletterModel=S.Base.create("BlockNewsletterModel",S.Squarespace.Models.BlockFormModel,[],{load:function(D,T){return typeof D=="function"&&(T=D,D={}),D=D||{},this.constructor.superclass.load.call(this,D,S.bind(function(){if(!this.isInitialized){E("loaded data, setting attrs from the embedded form");var N=this.getFormModel(),P=this.constructor.FORM_MODEL_FIELDS,x=N.getAttrs(P);this.setAttrs(x),this.isInitialized=!0}typeof T=="function"&&T.call(this)},this)),this},toJSON:function(){return{alignment:this.get("alignment"),captchaEnabled:this.get("captchaEnabled"),captchaTheme:this.get("captchaTheme"),captchaAlignment:this.get("captchaAlignment"),description:this.get("description"),disclaimer:this.get("disclaimer"),floatDir:this.get("floatDir"),formId:this.get("formId"),hSize:this.get("hSize"),layout:this.get("layout"),showName:this.get("showName"),submitButtonText:this.get("submitButtonText"),successRedirect:this.get("successRedirect"),title:this.get("title"),hasEnabledBackends:this.hasValidStorageConnected()}},createFormModel:function(){E("#createFormModel");var T=[S.merge({},f.Z.EMAIL,{title:O,placeholder:C,required:!0,locked:!0}),f.Z.NAME_NEWSLETTER];return T.forEach(function(B){S.Squarespace.FormEditingUtils.resolveFieldId(B,T)},this),new S.Squarespace.Models.Form({id:null,type:d().NEWSLETTER_BLOCK,name:(0,h.t)("Newsletter Form",null,{project:"scripts-v6.block"}),fields:T,submitButtonText:y,captchaEnabled:!0,captchaTheme:u().LIGHT,captchaAlignment:n().CENTER})},hasValidCaptchaKeys:function(){var D=p.Z.getCaptchaConfig();return!(D&&(D.captchaConfigSiteKey&&!D.captchaConfigSecret||!D.captchaConfigSiteKey&&D.captchaConfigSecret))},validateFormBlockModel:function(){var D=this.constructor.superclass.validateFormBlockModel.call(this);if(D)return D;if(!this.hasValidCaptchaKeys()){var T={title:(0,h.t)("Add reCAPTCHA Keys",null,{project:"scripts-v6.block"}),message:(0,h.t)('Your Site Key and Secret Key are required to turn on reCAPTCHA. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:v.GOOGLE_RECAPTCHA_LEARN_MORE},{project:"scripts-v6.block"}),src:"validate"};return T}},saveCaptchaConfig:function(){E("#saveCaptchaConfig");var D=p.Z.getCaptchaConfig();if(D&&D.captchaKeysChanged){var T={secretKey:D.captchaConfigSecret,siteKey:D.captchaConfigSiteKey},B={captchaSettings:T};return _.default.save(B)}return S.Promise.resolve()},saveFormModel:function(T){if(E("#saveFormModel"),this._saveCallbacks.push(T),!(this._saveCallbacks.length>1)){var B=this.getFormModel(),N=(function(){this.setBackendsAndSave.call(this,B)}).bind(this);B.get("id")||(E("Created a new form",B),this.set("campaignsConnect",{backendType:r().CAMPAIGNS,connectionState:e().CONNECTED,listId:null})),this.saveCaptchaConfig().then(N,N)}},setBackends:function(D){var T={};if(!D.get("id"))T.useSingleOptIn=!0;else{var B=p.Z.getVerificationData(D.get("id"));T.useSingleOptIn=B.useSingleOptIn}D.set("backendConnectionConfigs",{campaignsConnect:S.merge({},this.get("campaignsConnect"),T),googleDocsConnect:this.get("googleDocsConnect"),mailchimpConnect:this.get("mailchimpConnect"),emailConnect:this.get("emailConnect"),zapierConnect:this.get("zapierConnect")})},_onModelSave:function(T){var B=this.getFormModel();!S.Lang.isValue(T)&&B&&g.Z.saveSuccess(B.get("id")),this.constructor.superclass._onModelSave.call(this,T)}},{FORM_MODEL_FIELDS:["captchaAlignment","captchaEnabled","captchaTheme","name","submissionHTML","submissionMessage","submitButtonText","successRedirect"],ATTRS:{showName:!1,title:{value:(0,h.t)("Subscribe",null,{project:"website.newsletter"})},description:{value:{engine:"wysiwyg",html:I,source:I}},disclaimer:{value:{engine:"wysiwyg",html:A,source:A}},formId:{value:null},submitButtonText:{value:y},successRedirect:{value:null},emailConnect:{value:null},alignment:{value:"alignCenter"},layout:{value:"layoutFloat"},floatDir:{value:null},hSize:{value:null}}})},"1.0",{requires:["base","model","squarespace-form-editing-utils","squarespace-models-form","squarespace-block-form-model"]})},476023:function(c,b,t){"use strict";var l=t(425364),d=t(784874),o=t(714487),e=t(553772),a=t(223919),r=t(528215),s=t(202560),n=t(304212);YUI.add("squarespace-block-newsletter",function(i){var u={alignment:".newsletter-form-wrapper",layout:".newsletter-form-wrapper"},h=Object.keys(u).map(function(f){return f+"Change"}),g=[{attr:"title",selector:".newsletter-form-header-title",sync:function(f){this.get("model").set("title",f,l.SetDetails.FROM_WYSIWYG)},rteConfig:{isInline:!0,isLinkable:!1,placeholder:(0,o.t)("Add a form title",null,{project:"scripts-v6.block"}),schema:Object.assign({},e.r7[e.rg.SIMPLE],{fontMapping:!0})}},{attr:"description",selector:".newsletter-form-header-description",sync:function(f){this.get("model").set("description.html",f,l.SetDetails.FROM_WYSIWYG)},rteConfig:{isInline:!1,isLinkable:!0,placeholder:(0,o.t)("Add a description",null,{project:"scripts-v6.block"}),schema:Object.assign({},e.r7[e.rg.SIMPLE],e.NH)}},{attr:"disclaimer",selector:".newsletter-form-footnote",sync:function(f){this.get("model").set("disclaimer.html",f,l.SetDetails.FROM_WYSIWYG)},rteConfig:{isInline:!1,isLinkable:!0,placeholder:(0,o.t)("Add a privacy statement",null,{project:"scripts-v6.block"}),schema:Object.assign({},e.r7[e.rg.SIMPLE],e.NH)}},{attr:"submitButtonText",selector:".newsletter-form-button-label"}],p=g.map(function(f){return f.attr+"Change"});i.namespace("Squarespace.Block"),i.Squarespace.Block.Newsletter=i.Base.create("block-newsletter",i.SQS.LayoutEngine.Block.ModelSyncBase,[i.Squarespace.Block.PremiumBlockMixin,i.Squarespace.Block.InlineTextEditorsMixin,i.SQS.LayoutEngine.Block.MixinContainerStyles],{initializer:function(){this.constructor.superclass.initializer.call(this),this.publish("formData-loaded",{fireOnce:!0,async:!0}),this.isRendered=!1,this.initTextEditors(),this.after("widget:contentUpdate",function(){this.repairSubmitButtonText(),this.fitToContainer(),this.renderCaptcha(),this.isRendered=!0},this),this.after("resized",function(){this.fitToContainer()},this);var f=this.get("model");this._registerEvent(f.after(p,function(_){if(this.isRendered&&!a.N(_)){var v=this.updateClientSideText(_);v||this._renderBlock()}},this),f.after(h,function(_){if(this.isRendered){var v=this.updateClientSideClassnames(_);v||this._renderBlock()}},this),f.after(["save","blockStatusChange","captchaEnabledChange","showNameChange"],function(_){this.isRendered&&this._renderBlock()},this),f.getFormModel().after("submitButtonTextChange",function(_){f.set("submitButtonText",_.newVal)}))},bindUI:function(){},destructor:function(){this.destroyTextEditors(),this.constructor.superclass.destructor.call(this)},repairSubmitButtonText:function(){var f=this.get("model"),m=f.get("submitButtonText"),_=this.get("contentBox").one(".newsletter-form-button-label");_.setHTML(m)},_renderBlock:function(){this.isRendered=!1;var f=this.get("model");f.get("formId")&&this.constructor.superclass._renderBlock.call(this)},renderUI:function(){var f=this._getStackFinished();this.get("model").load((function(){this.fire("formData-loaded"),this._renderBlock(),f()}).bind(this))},renderCaptcha:function(){var f=this.get("model");if(f.get("captchaEnabled")){var m=this.get("contentBox");if(m){var _=m.one(".captcha-container"),v=_&&_.getDOMNode();if(v){var E=(0,n.Z)(i.config.win);r.DU(i.config.win,E)}}}},updateClientSideText:function(f){var m=f.newVal.html?f.newVal.html:typeof f.newVal=="string"?f.newVal:"",_=g.find(function(y){return y.attr===f.attrName}),v=_&&_.selector;if(!v)return!1;var E=this.get("contentBox"),S=E.one(v);return S?(S.setHTML(m),!0):!1},updateClientSideClassnames:function(f){var m=u[f.attrName];if(!m)return!1;var _=this.get("contentBox"),v=_.one(m);if(!v)return!1;var E="newsletter-form-wrapper--"+f.prevVal,S="newsletter-form-wrapper--"+f.newVal;return v.removeClass(E),v.addClass(S),!0},syncEditable:function(){this.constructor.superclass.syncEditable.call(this),this.syncTextEditorsEditable()},ensureLoadedThenShowDialog:function(f){var m=this.get("model").get("formId");m?this.on("formData-loaded",f):f()},fitToContainer:function(){var f=this.get("boundingBox"),m=f.one(".newsletter-form");if(m){var _=m.get("offsetWidth"),v=_<320;f.toggleClass("newsletter-form-has-small-container",v),f.addClass("rendered")}},getEditorOnlyValues:function(){return{useCaptchaFieldsFromBlockInsteadOfForm:1}}},{CSS_PREFIX:(0,s.u)(d.Z.NEWSLETTER),MODEL:i.Squarespace.Models.BlockNewsletterModel,ATTRS:{editor:{value:i.Squarespace.Block.Editor.Schema},type:{value:d.Z.NEWSLETTER}}})},"2.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-mixin-container-styles","squarespace-premium-block-mixin","squarespace-block-inline-text-editors-mixin","squarespace-block-newsletter-model","squarespace-block-schema-editor","squarespace-text-editor-toolbar","squarespace-text-editor"]})},650466:function(c,b,t){"use strict";var l=t(714487),d=t(868192);YUI.add("squarespace-block-opentable-editor",function(o){o.namespace("Squarespace.Block.Editor").OpenTable=o.Base.create("opentable-block-editor-dialog",o.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return o.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.OpenTable")}}),o.namespace("Squarespace.Block.ModelEditorDialog").OpenTable=o.Base.create("blockOpenTableEditor",o.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return e}}}});var e={width:375,height:290,tabs:[{title:(0,l.t)("OpenTable",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-opentable-20-light-solid.png",scroll:!0,fields:[{ctor:o.Squarespace.DialogFields.Description,text:(0,l.t)('Add restaurant reservation booking to your site. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:d.OPENTABLE},{project:"scripts-v6.block"})},{ctor:o.Squarespace.DialogFields.Text,config:{name:"restaurantId",maxLength:10,className:"thin",submitOnEnter:!0,strings:{title:(0,l.t)("OpenTable Restaurant ID",null,{project:"scripts-v6.block"}),placeholder:"0000",description:(0,l.t)("Your OpenTable restaurant ID.  You can locate your restaurant ID on the OpenTable website.",null,{project:"scripts-v6.block"})},required:!0}},{ctor:o.Squarespace.DialogFields.Check,config:{name:"hideTitle",strings:{title:(0,l.t)("Hide Title",null,{project:"scripts-v6.block"}),description:(0,l.t)("Hide the title above the open table form.",null,{project:"scripts-v6.block"})}}}]}]};o.namespace("Squarespace.Block.ModelEditorDialog").OpenTable=o.Base.create("blockOpenTableEditor",o.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return e}}}})},"1.0",{requires:["base","squarespace-damask-context-globals","squarespace-dialog-text","squarespace-model-editor"]})},942871:function(c,b,t){"use strict";var l=t(714487),d=t(868192),o=t(456903);YUI.add("squarespace-block-opentable-v2-editor",function(e){var a=e.namespace("Squarespace.Block.Editor").OpenTableV2=e.Base.create("opentable-v2-block-editor-dialog",e.Squarespace.Block.Editor.Dialog,[],{initializer:function(){var s=this.configDialog.get("dialog"),n=this._model;s.on("shown",function(){var i=s.getField("userEnteredRestaurantId");i.set("data",n.get("restaurantId")),i.after("dataChange",function(u){this.validateUserEnteredRestaurantId(u.newVal)},this),s.getField("domain").after("dataChange",function(u){this.validateUserEnteredRestaurantId(i.get("data"))},this),s.getField("lang").after("dataChange",function(u){this.validateUserEnteredRestaurantId(i.get("data"))},this)},this)},_updateModel:function(s){s=e.clone(s),delete s.userEnteredRestaurantId,a.superclass._updateModel.call(this,s)},validateUserEnteredRestaurantId:function(s){s=s.trim(),this._pendingValidation&&(e.config.win.clearTimeout(this._pendingValidation),this._pendingValidation=null);var n=this._model;if(n.get("restaurantId")!==s&&s.length!==0){var i=this.configDialog.get("dialog");this._pendingValidation=e.config.win.setTimeout(function(){o.default.get("https://oc-registry.opentable.com/v2/reservation-widget-standard/2.3.12",{headers:{Accept:"application/vnd.oc.unrendered+json"},params:{rid:s,type:"standard",domain:n.get("domain"),lang:n.get("lang"),theme:"wide",overlay:"true",__oc_Retry:0}}).then(function(u){var h=u.data.data;!h||h.error?(i.getField("userEnteredRestaurantId").showError((0,l.t)("Invalid Restaurant ID!",null,{project:"scripts-v6.block"})),i.getField("restaurantId").set("data",""),i.getField("restaurantName").set("visible",!1)):(i.getField("restaurantId").set("data",s),i.getField("restaurantName").set("visible",!0),i.getField("restaurantName").set("text",(0,l.t)("Restaurant identified: {restaurantName}",{restaurantName:h.omniture.vars.prop32},{project:"scripts-v6.block"})))})},800)}},_getModelEditor:function(){return e.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.OpenTableV2")}},{NS:"blockEditor",ATTRS:{blockName:{value:(0,l.t)("OpenTable",null,{project:"scripts-v6.block"})}}}),r={title:(0,l.t)("OpenTable",null,{project:"scripts-v6.block"}),width:375,height:396,tabs:[{title:(0,l.t)("OpenTable",null,{project:"scripts-v6.block"}),tabTitle:(0,l.t)("Content",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-opentable-20-light-solid.png",scroll:!0,fields:[{ctor:e.Squarespace.DialogFields.Description,text:(0,l.t)('Add restaurant reservation booking to your site. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:d.OPENTABLE},{project:"scripts-v6.block"})},{ctor:e.Squarespace.DialogFields.Text,config:{name:"userEnteredRestaurantId",maxLength:10,className:"thin",submitOnEnter:!0,strings:{title:(0,l.t)("OpenTable Restaurant ID",null,{project:"scripts-v6.block"}),description:(0,l.t)('Your OpenTable restaurant ID. You can locate your restaurant ID on the OpenTable website. <a href="{kbArticleUrl}">Learn more</a>',{kbArticleUrl:d.OPENTABLE},{project:"scripts-v6.block"})}}},{ctor:e.Squarespace.DialogFields.Description,config:{text:"",visible:!1,name:"restaurantName"}},{ctor:e.Squarespace.DialogFields.Hidden,config:{name:"restaurantId"}},{ctor:e.Squarespace.DialogFields.Select,config:{"strings.title":(0,l.t)("Location (Domain)",null,{project:"scripts-v6.block"}),name:"domain",className:"thin dark",defaultValue:"com",options:[{value:"com",label:(0,l.t)("US and Canada - opentable.com",null,{project:"scripts-v6.block"})},{value:"commx",label:(0,l.t)("Mexico - opentable.com.mx",null,{project:"scripts-v6.block"})},{value:"couk",label:(0,l.t)("United Kingdom - opentable.co.uk",null,{project:"scripts-v6.block"})},{value:"ie",label:(0,l.t)("Ireland - opentable.ie",null,{project:"scripts-v6.block"})},{value:"comau",label:(0,l.t)("Australia and New Zealand - opentable.com.au",null,{project:"scripts-v6.block"})},{value:"de",label:(0,l.t)("Germany - opentable.de",null,{project:"scripts-v6.block"})},{value:"jp",label:(0,l.t)("Japan - opentable.jp",null,{project:"scripts-v6.block"})}]}},{ctor:e.Squarespace.DialogFields.Select,config:{"strings.title":(0,l.t)("Language",null,{project:"scripts-v6.block"}),name:"lang",className:"thin dark",defaultValue:"en",options:[{value:"en",label:(0,l.t)("English",null,{project:"scripts-v6.block"})},{value:"fr",label:(0,l.t)("French",null,{project:"scripts-v6.block"})},{value:"es",label:(0,l.t)("Spanish",null,{project:"scripts-v6.block"})},{value:"de",label:(0,l.t)("German",null,{project:"scripts-v6.block"})},{value:"ja",label:(0,l.t)("Japanese",null,{project:"scripts-v6.block"})}]}}]},{title:(0,l.t)("OpenTable",null,{project:"scripts-v6.block"}),tabTitle:(0,l.t)("Design",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-opentable-20-light-solid.png",scroll:!0,fields:[{ctor:e.Squarespace.DialogFields.Check,config:{"strings.title":(0,l.t)("Hide Title",null,{project:"scripts-v6.block"}),name:"hideTitle"}},{ctor:e.Squarespace.DialogFields.Check,config:{"strings.title":(0,l.t)("Hide Icons",null,{project:"scripts-v6.block"}),name:"hideIcons"}},{ctor:e.Squarespace.DialogFields.Check,config:{"strings.title":(0,l.t)("Hide OpenTable Logo",null,{project:"scripts-v6.block"}),name:"hideOpenTableLogo"}}]}]};e.namespace("Squarespace.Block.ModelEditorDialog").OpenTableV2=e.Base.create("blockOpenTableEditor",e.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return r}}}})},"1.0",{requires:["base","squarespace-damask-context-globals","squarespace-dialog-text","squarespace-dialog-select","squarespace-model-editor"]})},709726:function(c,b,t){"use strict";var l=t(784874),d=t(865206),o=t(936105),e=t(202560);YUI.add("squarespace-block-opentable-v2",function(a){var r=a.Base.create("OpenTableBlockV2Model",a.Model,[],{},{ATTRS:{restaurantId:{value:""},domain:{value:"com"},lang:{value:"en"},hideTitle:{value:!1},hideIcons:{value:!1},userEnteredRestaurantId:{validator:function(){return!1}},hideOpenTableLogo:{value:!1}}}),s=a.namespace("Squarespace.Block").OpenTableV2=a.Base.create("block-opentable-v2",a.SQS.LayoutEngine.Block.ModelCsrBase,[a.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(n){this.get("boundingBox").removeClass("loaded"),s.superclass._renderSuccess.call(this,n),(0,d.Z)(this.get("boundingBox").getDOMNode())}},{CSS_PREFIX:(0,e.u)(l.Z.OPENTABLE_V2),MODEL:r,ATTRS:{editor:{valueFn:function(){return o.oW(this.get("blockTypeName"))?a.Squarespace.Block.Editor.Schema:a.Squarespace.Block.Editor.OpenTableV2}},type:{value:l.Z.OPENTABLE_V2}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-csr-base","squarespace-block-opentable-v2-editor","squarespace-premium-block-mixin"]})},929663:function(c,b,t){"use strict";var l=t(714487),d=t(784874),o=t(936105),e=t(202560);YUI.add("squarespace-block-opentable",function(a){var r=a.namespace("Squarespace.Block").OpenTable=a.Base.create("block-opentable",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){r.superclass.bindUI.call(this),this.get("contentBox").on("click",this._alertPreviewOnlyOnClick)},_renderSuccess:function(s){var n=document.location.protocol==="https:",i=this.get("contentBox");this.get("model").get("hideTitle")?i.addClass("sqs-block-opentable-hide-title"):i.removeClass("sqs-block-opentable-hide-title"),this._getExtractedHtml(s.html,n).then(a.bind(function(u){s.html=u,r.superclass._renderSuccess.call(this,s),n&&i.all(".sqs-block-opentable-hidden").removeClass("sqs-block-opentable-hidden")},this),a.bind(this._renderNoId,this))},_renderNoId:function(){this._renderError({title:(0,l.t)("No OpenTable Restaurant ID",null,{project:"scripts-v6.block"}),error:(0,l.t)("To allow customers to make reservations on your site, enter your restaurant ID.",null,{project:"scripts-v6.block"})})},_getExtractedHtml:function(s,n){return new a.Promise(a.bind(function(i,u){var h=this._createIFrameWith(s),g=h.contentDocument||h.contentWindow.document,p;if(n)i(g.body.innerHTML);else{var f=a.Array(g.getElementsByTagName("script"));p=a.Array.map(f,function(m){return new a.Promise(function(_){m.addEventListener("load",_),m.addEventListener("error",_)})}),a.Promise.all(p).then(function(){var m=g.getElementsByTagName("form")[0],_=m&&m.outerHTML;_?i(_):u()})}},this))},_createIFrameWith:function(s){var n=a.config.doc.createElement("iframe");this.get("contentBox").append(n);var i=n.contentDocument||n.contentWindow.document;return i.open(),i.write(s),i.close(),n},_alertPreviewOnlyOnClick:function(s){s.target.ancestor("input, a",!0)&&(s.preventDefault(),new a.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Preview Only",null,{project:"scripts-v6.block"}),"strings.message":(0,l.t)("Please log out of your Squarespace account in order to use the OpenTable Block.",null,{project:"scripts-v6.block"})}))}},{CSS_PREFIX:(0,e.u)(d.Z.OPENTABLE),MODEL:a.Model,ATTRS:{editor:{valueFn:function(){return o.Lk(this.get("blockTypeName"))?a.Squarespace.Block.Editor.Schema:a.Squarespace.Block.Editor.OpenTable}},type:{value:d.Z.OPENTABLE}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-opentable-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},477967:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-block-posts-by-editor",function(d){d.namespace("Squarespace.Block.Editor"),d.namespace("Squarespace.Block.ModelEditorDialog"),d.Squarespace.Block.Editor.PostsByMonth=d.Base.create("posts-by-month-block-editor-dialog",d.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return d.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByMonth")}},{NS:"blockEditor",ATTRS:{blockName:{value:(0,l.t)("Month List",null,{project:"scripts-v6.block"})}}}),d.Squarespace.Block.ModelEditorDialog.PostsByMonth=d.Base.create("blockPostByMonthEditor",d.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByMonthEditor",ATTRS:{strings:{value:{title:(0,l.t)("Month List",null,{project:"scripts-v6.block"}),description:(0,l.t)("Select a collection to index.",null,{project:"scripts-v6.block"})}}}}),d.Squarespace.Block.Editor.PostsByCategory=d.Base.create("posts-by-category-editor-dialog",d.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return d.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByCategory")}},{NS:"blockEditor",ATTRS:{blockName:{value:(0,l.t)("Category List",null,{project:"scripts-v6.block"})}}}),d.Squarespace.Block.ModelEditorDialog.PostsByCategory=d.Base.create("blockPostByCategoryEditor",d.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByCategoryEditor",ATTRS:{strings:{value:{title:(0,l.t)("Category List",null,{project:"scripts-v6.block"}),description:(0,l.t)("Select a collection below to collect categories from.",null,{project:"scripts-v6.block"})}}}}),d.Squarespace.Block.Editor.PostsByTag=d.Base.create("posts-by-tag-editor-dialog",d.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return d.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByTag")}},{NS:"blockEditor",ATTRS:{blockName:{value:(0,l.t)("Tag List",null,{project:"scripts-v6.block"})}}}),d.Squarespace.Block.ModelEditorDialog.PostsByTag=d.Base.create("blockPostByTagEditor",d.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByTagTagEditor",ATTRS:{strings:{value:{title:(0,l.t)("Tag List",null,{project:"scripts-v6.block"}),description:(0,l.t)("Select a collection below to collect tags from.",null,{project:"scripts-v6.block"})}}}}),d.Squarespace.Block.Editor.PostsByAuthor=d.Base.create("posts-by-author-editor-dialog",d.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return d.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByAuthor")}},{NS:"blockEditor",ATTRS:{blockName:{value:(0,l.t)("Author List",null,{project:"scripts-v6.block"})}}}),d.Squarespace.Block.ModelEditorDialog.PostsByAuthor=d.Base.create("blockPostByAuthorEditor",d.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByAuthorEditor",ATTRS:{strings:{value:{title:(0,l.t)("Author List",null,{project:"scripts-v6.block"}),description:(0,l.t)("Select a collection below to collect authors from",null,{project:"scripts-v6.block"})}}}})},"1.0",{requires:["base","model","squarespace-block-editor-dialog","squarespace-block-posts-by-model","squarespace-block-posts-by-model-editor-base","squarespace-damask-context-globals"]})},453524:function(c,b,t){"use strict";var l=t(714487),d=t(816130),o=t.n(d),e=t(437951),a=t.n(e);YUI.add("squarespace-block-posts-by-model-editor-base",function(r){r.namespace("Squarespace.Block.ModelEditorDialog").PostsBy=r.Base.create("blockPostsByEditor",r.Squarespace.ModelEditorDialog,[],{initializer:function(){var s=this.get("dialog"),n=r.Squarespace.ContentCollectionCache;this._dialogReady=!1,this._collectionsLoaded=n.size()===0,this._collectionsLoaded&&n.load(r.bind(this._onCollectionsLoaded,this)),r.Lang.isValue(s)&&s.after("ready",this._onDialogLoaded,this)},_getDefaultAndProductCollections:function(){var s=r.Squarespace.ContentCollectionCache.filter(function(n){var i=n.getTemplateConfiguration();if(i){var u=i.get("collectionType");return(u===a().PRODUCTS||u===a().COLLECTION_TYPE_GENERIC)&&i.get("folder")===!1}return!1});return this._filterOutCalendarCollections(s)},_filterOutCalendarCollections:function(s){return r.Array.filter(s,function(n){var i=n.getTemplateConfiguration();return i.get("ordering")!==o().CALENDAR})},_onDialogLoaded:function(s){this._dialogReady=!0,this._collectionsLoaded&&this._setCollections()},_onCollectionsLoaded:function(s){this._collectionsLoaded=!0,this._dialogReady&&this._setCollections()},_setCollections:function(){var s=this.get("dialog"),n=this._getDefaultAndProductCollections(),i=r.Squarespace.ContentCollectionUtils.groupCollectionsByTypeName(n);s.getField("collectionId").set("collectionGroups",i)},_getDefaultDialogConfiguration:function(){var s=this.get("strings.description"),n=this.get("strings.title");return{title:(0,l.t)("Edit List",null,{project:"scripts-v6.block"}),width:300,height:450,tabs:[{title:n,icon:"/universal/images-v6/icons/icon-tagcloud-16-light-solid.png",scroll:!0,fields:[{ctor:r.Squarespace.DialogFields.Description,config:{title:s,text:"",padding:[0,0]}},{ctor:r.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionFilter:{folder:!1}}}]}]}}},{NS:"postsByEditor",ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfiguration",validator:r.Lang.isObject},strings:{value:{title:(0,l.t)("Index",null,{project:"scripts-v6.block"}),description:(0,l.t)("Select a collection below.",null,{project:"scripts-v6.block"})}}}})},"1.0",{requires:["base","squarespace-block-posts-by-model","squarespace-models-content-collection","squarespace-dialog-description","squarespace-dialog-content-selector"]})},412015:function(){YUI.add("squarespace-block-posts-by-model",function(c){c.namespace("Squarespace.ContentModel").PostsByBlock=c.Base.create("PostsByBlockModel",c.Model,[],{},{ATTRS:{}}),c.namespace("Squarespace.ContentModel").PostsByTag=c.Base.create("PostsByTagModel",c.Squarespace.ContentModel.PostsByBlock,[],{},{}),c.namespace("Squarespace.ContentModel").PostsByCategory=c.Base.create("PostsByCategoryModel",c.Squarespace.ContentModel.PostsByBlock,[],{},{}),c.namespace("Squarespace.ContentModel").PostsByAuthor=c.Base.create("PostsByAuthorModel",c.Squarespace.ContentModel.PostsByBlock,[],{},{}),c.namespace("Squarespace.ContentModel").PostsByMonth=c.Base.create("PostsByMonthModel",c.Squarespace.ContentModel.PostsByBlock,[],{},{})},"1.0",{requires:["base","model"]})},302539:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-posts-by",function(e){var a=e.namespace("Squarespace.Block").PostsByBase=e.Base.create("block-posts-by",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{initializer:function(){}},{MODEL:e.Squarespace.ContentModel.PostsByBlock,ATTRS:{editor:{valueFn:function(){return d.oW(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Dialog}}},CSS_PREFIX:"sqs-block-posts-by"});e.namespace("Squarespace.Block").PostsByAuthor=e.Base.create("block-posts-by-author",a,[],{},{MODEL:e.Squarespace.ContentModel.PostsByAuthor,ATTRS:{type:{value:l.Z.POSTS_BY_AUTHOR},editor:{valueFn:function(){return d.oW(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.PostsByAuthor}}},CSS_PREFIX:(0,o.u)(l.Z.POSTS_BY_AUTHOR)}),e.namespace("Squarespace.Block").PostsByTag=e.Base.create("block-posts-by-tag",a,[],{},{MODEL:e.Squarespace.ContentModel.PostsByTag,ATTRS:{type:{value:l.Z.POSTS_BY_TAG},editor:{valueFn:function(){return d.oW(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.PostsByTag}}},CSS_PREFIX:(0,o.u)(l.Z.POSTS_BY_TAG)}),e.namespace("Squarespace.Block").PostsByCategory=e.Base.create("block-posts-by-category",a,[],{},{MODEL:e.Squarespace.ContentModel.PostsByCategory,ATTRS:{type:{value:l.Z.POSTS_BY_CATEGORY},editor:{valueFn:function(){return d.oW(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.PostsByCategory}}},CSS_PREFIX:(0,o.u)(l.Z.POSTS_BY_CATEGORY)}),e.namespace("Squarespace.Block").PostsByMonth=e.Base.create("block-posts-by-month",a,[],{},{MODEL:e.Squarespace.ContentModel.PostsByMonth,ATTRS:{type:{value:l.Z.POSTS_BY_MONTH},editor:{valueFn:function(){return d.oW(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.PostsByMonth}}},CSS_PREFIX:(0,o.u)(l.Z.POSTS_BY_MONTH)})},"1.0",{requires:["base","model","squarespace-block-posts-by-editor","squarespace-block-posts-by-model","squarespace-premium-block-mixin"]})},587669:function(c,b,t){"use strict";var l=t(273564),d=t(88565);YUI.add("squarespace-premium-block-mixin",function(o){o.namespace("Squarespace.Block").PremiumBlockMixin=o.Base.create("premium-block-mixin",o.Base,[],{initializer:function(){this._afterRenderHandle=o.Do.after(this._afterRenderSuccess,this,"_renderSuccess",this)},destructor:function(){this._afterRenderHandle.detach()},_afterRenderSuccess:function(){var e=this.get("boundingBox").getDOMNode();if(!e.querySelector((0,d.Ud)(d.Mi))){var a={node:e,blockId:this.get("id"),blockType:this.get("type"),feature:this.get("premiumFeature")};l.renderBlockWrapper(a)}}},{})},"1.0",{requires:["base"]})},856050:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-block-pricing-plan-model",function(d){d.namespace("Squarespace.ContentModel.PricingPlan"),d.Squarespace.ContentModel.PricingPlan=d.Base.create("PricingPlanModel",d.Model,[],{},{ATTRS:{showTitle:{value:!0},showPrice:{value:!0},showDescription:{value:!0},showJoinButton:{value:!0},showBenefits:{value:!0},joinButtonText:{value:(0,l.t)("Sign Up",null,{project:"scripts-v6.block"})}}})},"1.0",{requires:["base","model"]})},520501:function(c,b,t){"use strict";var l=t(784874),d=t(942703),o=t(472575),e=t(202560);YUI.add("squarespace-block-pricing-plan",function(a){a.namespace("Squarespace.Block.PricingPlan");var r=a.Squarespace.Block.PricingPlan=a.Base.create("block-pricing-plan",a.SQS.LayoutEngine.Block.ModelSyncBase,[],{bindUI:function(){r.superclass.bindUI.call(this);var s=this.get("contentBox");d.ci(s),this.configWebsiteUnsubscribe=(0,o.QA)(o.$5,(function(n){n.blockType===l.Z.PRICING_PLAN&&this._renderBlock(!0)}).bind(this))},destructor:function(){this.configWebsiteUnsubscribe&&this.configWebsiteUnsubscribe()},_renderBlock:function(s){r.superclass._renderBlock.call(this,s)}},{CSS_PREFIX:(0,e.u)(l.Z.PRICING_PLAN),MODEL:a.Squarespace.ContentModel.PricingPlan,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Schema},type:{value:l.Z.PRICING_PLAN}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-pricing-plan-model","squarespace-block-schema-editor"]})},962277:function(){YUI.add("squarespace-block-product-model",function(c){var b=c.namespace("Squarespace.ContentModel").ProductBlock=c.Base.create("ProductModel",c.Model,[],{},{ATTRS:{showImage:{value:!0},showTitle:{value:!0},showPrice:{value:!0},showExcerpt:{value:!1},showBuyButton:{value:!1},productQuickViewEnabled:{value:!1}}})},"1.0",{requires:["base","model"]})},827166:function(c,b,t){"use strict";var l=t(784874),d=t(202560);YUI.add("squarespace-block-product",function(o){var e=o.namespace("Squarespace.Block").Product=o.Base.create("block-product",o.SQS.LayoutEngine.Block.ModelSyncBase,[o.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(a){e.superclass._renderSuccess.call(this,a),setTimeout((function(){this._plugImageLoader()}).bind(this),0);var r=this.get("contentBox").one(".sqs-add-to-cart-button-wrapper");r&&r.setStyle("visibility","visible")},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(a){a.hasPlugin(o.Squarespace.Loader2.NS)||a.plug(o.Squarespace.Loader2)})}},{CSS_PREFIX:(0,d.u)(l.Z.PRODUCT),MODEL:o.Squarespace.ContentModel.ProductBlock,ATTRS:{editor:{value:o.Squarespace.Block.Editor.Schema},type:{value:l.Z.PRODUCT}}})},"1.0",{requires:["base","squarespace-image-loader","@sqs/layout-engine/block-model-sync-base","squarespace-block-product-model","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},39011:function(c,b,t){"use strict";var l=t(425364),d=t(553772),o=t(223919),e=t(714487),a="placeholder-visible";YUI.add("squarespace-block-quote",function(r){var s=[{attr:"quote",nodeConfig:"<blockquote>",placeholderClassname:a,selector:"blockquote",sync:function(i){this.get("model").set("quote",i,l.SetDetails.FROM_WYSIWYG)},getContent:function(){return this.get("model").get("quote")},rteConfig:{type:d.rg.SIMPLE,isLinkable:!1,isInline:!0,placeholder:"\u201C"+(0,e.t)("Add a quote",null,{project:"scripts-v6.block"})+"\u201D"}},{attr:"source",nodeConfig:'<figcaption class="source">',placeholderClassname:a,selector:"figcaption",sync:function(i){this.get("model").set("source",i,l.SetDetails.FROM_WYSIWYG)},getContent:function(){return this.get("model").get("source")},rteConfig:{type:d.rg.PLAIN_TEXT,isLinkable:!1,isInline:!0,placeholder:"\u2014 "+(0,e.t)("Add a quote source",null,{project:"scripts-v6.block"})}}],n=s.map(function(i){return i.attr+"Change"});r.namespace("Squarespace.Block"),r.Squarespace.Block.Quote=r.Base.create("block-quote",r.SQS.LayoutEngine.Block.Quote,[r.Squarespace.Block.PremiumBlockMixin,r.Squarespace.Block.InlineTextEditorsMixin,r.SQS.LayoutEngine.Block.MixinContainerStyles],{initializer:function(){this.constructor.superclass.initializer.call(this),this.isRendered=!1,this.initTextEditors(),this.after("widget:contentUpdate",function(h){this.isRendered=!0,this.constructor.superclass.handleAnimationChange&&this.constructor.superclass.handleAnimationChange.call(this,h)},this);var i=this.get("model");this._registerEvent(i.after(n,function(h){this.isRendered&&(o.N(h)||this._renderBlock())},this),i.after(["save","blockStatusChange","captchaEnabledChange","captchaThemeChange","showNameChange"],function(h){this.isRendered&&this._renderBlock()},this),i.after("blockAnimationChange",function(u){this.constructor.superclass.handleAnimationChange&&this.constructor.superclass.handleAnimationChange.call(this,u)},this))},destructor:function(){this.destroyTextEditors(),this.constructor.superclass.destructor.call(this)},_renderBlock:function(){this.isRendered=!1,this.constructor.superclass._renderBlock.call(this)},syncPlaceholderClassName:function(i){var u=this.get("contentBox"),h=u&&u.one(i.selector),g=h&&h.one(".rte-placeholder");g?h.addClass(a):h.removeClass(a)},syncEditable:function(){this.constructor.superclass.syncEditable.call(this),this.syncTextEditorsEditable()}},{ATTRS:{editor:{value:r.Squarespace.Block.Editor.Schema},defaultContentModel:{value:{quote:(0,e.t)("Whatever it is, the way you tell your story online can make all the difference.",null,{project:"scripts-v6.block"}),source:(0,e.t)("Quote Source",null,{project:"scripts-v6.block"})}}}})},"2.0",{requires:["base","@sqs/layout-engine/block-quote","@sqs/layout-engine/block-model-quote","squarespace-block-schema-editor","squarespace-block-inline-text-editors-mixin","squarespace-premium-block-mixin","@sqs/layout-engine/block-mixin-container-styles"]})},238945:function(c,b,t){"use strict";var l=t(714487),d=t(816130),o=t.n(d),e=t(437951),a=t.n(e),r=t(868192);YUI.add("squarespace-block-rss-editor",function(s){s.namespace("Squarespace.Block.Editor").Rss=s.Base.create("rss-block-editor-dialog",s.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return s.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Rss")}},{NS:"blockEditor",ATTRS:{}}),s.namespace("Squarespace.Block.ModelEditorDialog").Rss=s.Base.create("blockRssEditor",s.Squarespace.ModelEditorDialog,[],{_getDefaultDialogConfig:function(){return{width:350,height:320,primaryTabs:[{title:(0,l.t)("RSS Block",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-rss-16-light-solid.png",scroll:!0,fields:[{ctor:s.Squarespace.DialogFields.Description,config:{text:(0,l.t)(`Create a link to your Blog Page's RSS feed to encourage visitors to subscribe using their RSS reader. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below:`,{helpLink:r.RSS_EDITOR},{project:"scripts-v6.block"})}},{ctor:s.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:!1,showGroupTitles:!1,collectionFilter:{collectionType:a().COLLECTION_TYPE_GENERIC,ordering:o().CHRONOLOGICAL,folder:!1},emptyMessage:(0,l.t)("No Blog Pages yet. Go to the pages panel and click a + to add new content.",null,{project:"scripts-v6.block"})}}]}]}}},{NS:"rssEditor",ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:s.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-content-collection-utils","squarespace-damask-context-globals","squarespace-dialog-content-selector","squarespace-dialog-description","squarespace-models-content-collection"]})},685451:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-rss",function(e){e.namespace("Squarespace.ContentModel").RSSBlock=e.Base.create("RSSBlockModel",e.Model,[],{},{ATTRS:{collectionId:{}}}),e.namespace("Squarespace.Block").Rss=e.Base.create("block-rss",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{MODEL:e.Squarespace.ContentModel.RSSBlock,ATTRS:{editor:{valueFn:function(){return d.Lk(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Rss}},type:{value:l.Z.RSS}},CSS_PREFIX:(0,o.u)(l.Z.RSS)})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-models-content-collection","squarespace-block-rss-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},16160:function(c,b,t){"use strict";var l=t(425364),d=t(723796),o=t(798589),e=d.Em.createLogger("v6/schema-editor-base","orange");YUI.add("squarespace-block-schema-editor-base",function(a){a.namespace("Squarespace.Block.Editor"),a.Squarespace.Block.Editor.SchemaBase=a.Base.create("squarespace-block-schema-editor-base",a.SQS.LayoutEngine.Block.Editor.SchemaBase,[],{initializer:function(){e("initializer",this,{block:this.get("host")}),this.after("isBlockEditorOpenChange",this._renderEditor,this),this.on("dismiss",function(){e("hiding block editor"),this.set("isBlockEditorOpen",!1)}),this.on("show",function(){e("showing block editor"),this.set("isBlockEditorOpen",!0)})},_renderEditor:function(){throw new Error("_renderEditor not implemented")},handleOnChange:function(r,s){this.get("host").get("model").setAttrs(r,l.SetDetails.FROM_DIALOG),this.get("host").set("containerStyles",s),this.fire("render-anchor",r)}},{NS:"blockEditor",ATTRS:{editingEvent:{value:o.isMobile()?["click"]:["dblclick"]},editingButtons:{value:!o.isMobile()},isBlockEditorOpen:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["@sqs/layout-engine/block-schema-editor-base","@sqs/layout-engine/block-editor-base"]})},648714:function(c,b,t){"use strict";var l=t(743642),d=t(526186),o=t(174161),e=t(594127),a=t(861655),r=t(86487),s=t.n(r),n=t(784874),i=t(723796),u=t(798589),h=t(714487),g=t(936105),p=t(324270),f=t(33729),m=t(583010),_=t(916661),v=t(547837),E=t(938077),S=t(337061),y=t(897820),C=t(673951),O=i.Em.createLogger("v6/schema-editor","orange");function A(I,D){return I.handlers&&I.handlers[D]&&typeof I.handlers[D]=="function"}YUI.add("squarespace-block-schema-editor",function(I){var D=[n.Z.IMAGE];C.qu||(D.push(n.Z.BUTTON),D.push(n.Z.HTML)),I.namespace("Squarespace.Block.Editor"),I.Squarespace.Block.Editor.Schema=I.Base.create("EditingDialog",I.Squarespace.Block.Editor.SchemaBase,[],{_renderEditor:function(){this._renderEditorWithConfig(this.getEditorConfig())},_renderEditorWithConfig:function(T){var B=this.get("host");A(T,"onBeforeMount")?T.handlers.onBeforeMount(B,this.get("isBlockEditorOpen")).then(this._doRenderEditor.bind(this,T)):this._doRenderEditor(T)},getBlockEventType:function(){return this.getEditorConfigKey()},_doRenderEditor:function(T){var B=this.get("host"),N=B.get("srcNode").getDOMNode(),P=B.get("editController"),x=this.get("isBlockEditorOpen"),R=B.get("boundingBox");B.hasPlugin("insertPoint")&&!C.Ay&&B.insertPoint.toggleInsertPointsDisabled(x),R.toggleClass("sqs-edit-dialog-open",x),this._boundHandleRequestClose||(this._boundHandleRequestClose=(function(){O("handleRequestClose"),this.closeEditor(),(0,S.GE)((0,y.wv)())}).bind(this));var w=P.get("supportsRedirectsInBlockEditor");this.reactRoot||(this.reactRoot=(0,e.createRoot)(this.getEditorHost())),this.reactRoot.render(o.createElement(f.Z,{host:B,hostNode:N,id:B.get("id"),blockEventType:this.getBlockEventType(),blockTypeName:this.getEditorConfigKey(),config:T,isOpen:x,onRequestClose:this._boundHandleRequestClose,onChange:this.handleOnChange.bind(this),onRequestNavigation:w?this.exitEditModeAndNavigateToNewRoute.bind(this):null,supportsRedirectsInBlockEditor:w}))},exitEditModeAndNavigateToNewRoute:function(T){var B,N=(0,E.Z3A)((0,S.d6)())||(0,v.Z)(),P=N?this.saveAndCloseOpenDialogs.bind(this):this.discardAndCloseOpenDialogs.bind(this);if(_.Z.isSevenOne())B=N?I.Global.SevenOneLifecycleActions.doSaveAllChanges:I.Global.SevenOneLifecycleActions.doDiscardChangesAndExitEditMode;else{var x=I.Global.ContentModeController;B=N?x.save70AnnotationControllerChangesAndDisableEditing.bind(x):x.revert70AnnotationControllerChangesAndDisableEditing.bind(x)}return P(),B({exit:!0}).then(function(){return p.default.refresh(),I.Squarespace.Singletons.Location.go(T)})},saveAndCloseOpenDialogs:function(){var T=I.Global.OPEN_DIALOGS;T&&T.forEach(function(B){B.saveAndClose()})},discardAndCloseOpenDialogs:function(){var T=I.Global.OPEN_DIALOGS;T&&T.forEach(function(B){B.close()})},destructor:function(){var T=this.getEditorHost();this.reactRoot&&(this.reactRoot.unmount(),this.reactRoot=null),T.parentNode&&T.parentNode.removeChild(T)},getEditorHost:function(){var T=this.get("host").get("id"),B="editor"+T,N=document.getElementById(B);return N||(N=document.createElement("div"),N.id=B,document.body.appendChild(N),N)},getEditorConfig:function(){var T=this.getEditorConfigKey(),B;return g.oW(T)?B=a.default.blocks[T]:B=s()[T+"_web"]||s()[T],!B||!B.uiSchema||B.uiSchema.length===0?this.getConfigWithEditingButtons({meta:B?B.meta:void 0,uiSchema:[{type:"context",title:(0,h.t)("Unsupported block",null,{project:"scripts-v6.block"}),properties:{description:(0,h.t)("Currently, editing this block is not supported.<br>Visit Squarespace from your desktop computer to edit this block.",null,{project:"scripts-v6.block"})}}]}):I.merge(this.get("defaultEditorConfig"),this.getConfigWithEditingButtons(B))},getConfigWithEditingButtons:function(T){return u.isMobile()?Object.assign({},T,{uiSchema:T.uiSchema.concat([{type:"spacer",properties:{gridMultiplier:2}},{type:"button",properties:{color:"warning",label:(0,h.t)("Remove block",null,{project:"scripts-v6.block"}),onClick:(function(){(0,m.Z)({onConfirm:this.removeBlock.bind(this)})}).bind(this)}}])}):T}},{NS:"blockEditor",ATTRS:{editingOverlay:{valueFn:function(){var T=this.get("host"),B=T.get("type");return D.includes(B)?null:I.Node.create('<div class="sqs-editing-overlay"></div>')}}}})},"1.0",{requires:["squarespace-block-schema-editor-base"]})},148194:function(c,b,t){"use strict";var l=t(714487),d=t(816130),o=t.n(d),e=t(437951),a=t.n(e),r=t(868192);YUI.add("squarespace-block-search-editor",function(s){s.namespace("Squarespace.Block.Editor"),s.Squarespace.Block.Editor.Search=s.Base.create("search-block-editor-dialog",s.Squarespace.Block.Editor.Dialog,[],{initializer:function(i){var u=this.configDialog.get("dialog");this._dialogReady=!1,s.Lang.isValue(u)?u.on("ready",function(){var h=u.getField("collectionFilter");h&&(h.after("dataChange",this._onCollectionFilterCheckChange,this),u.getField("collectionFilter").get("data")===!1&&u.getField("collectionId").hide())},this):this._dialogReady=!0},_onCollectionFilterCheckChange:function(i){var u=this.configDialog.get("dialog"),h=u.getField("collectionId"),g=i.newVal!==!0;g?(h.clearSelected(),h.set("data",{urlId:null,filter:null,id:null}),h.hide()):h.show()},_getModelEditor:function(){return s.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Search")}},{NS:"blockEditor",ATTRS:{}});var n={title:(0,l.t)("Search",null,{project:"scripts-v6.block"}),width:335,height:350,tabs:[{tabTitle:(0,l.t)("Content",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-search-16-light.png",scroll:!0,fields:[{ctor:s.Squarespace.DialogFields.Description,config:{text:(0,l.t)('Add a search field to your page that returns results from across your site, or limited to one page. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:r.SEARCH_EDITOR},{project:"scripts-v6.block"}),padding:[0,20]}},{ctor:s.Squarespace.DialogFields.Check,name:"collectionFilter",config:{"strings.title":(0,l.t)("Search Specific Page",null,{project:"scripts-v6.block"}),"strings.description":(0,l.t)("Limit results to one page.",null,{project:"scripts-v6.block"})}},{ctor:s.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionFilter:{collectionType:[a().COLLECTION_TYPE_GENERIC,a().PRODUCTS,a().LESSONS],ordering:[o().USER,o().CHRONOLOGICAL,o().CALENDAR],folder:!1},emptyMessage:(0,l.t)("There are no searchable pages yet.",null,{project:"scripts-v6.block"})}}]},{tabTitle:(0,l.t)("Display",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-search-16-light.png",scroll:!0,fields:[{ctor:s.Squarespace.DialogFields.Check,name:"searchPreview",config:{"strings.title":(0,l.t)("Quick Preview",null,{project:"scripts-v6.block"}),"strings.description":(0,l.t)("A dropdown under the search block will allow a quicker access to the search results.",null,{project:"scripts-v6.block"}),defaultValue:!0}},{ctor:s.Squarespace.DialogFields.Select,config:{name:"theme","strings.title":(0,l.t)("Theme",null,{project:"scripts-v6.block"}),className:"thin dark",defaultValue:"dark",options:[{value:"dark",label:(0,l.t)("Dark",null,{project:"scripts-v6.block"})},{value:"light",label:(0,l.t)("Light",null,{project:"scripts-v6.block"})}]}}]}]};s.namespace("Squarespace.Block.ModelEditorDialog").Search=s.Base.create("block-search-editor",s.Squarespace.ModelEditorDialog,[],{initializer:function(){var i=this.get("dialog");i.on("ready",function(){var u=this.get("dialog").getField("collectionId");u.after("dataChange",function(h){var g=s.one(".collection-wrapper[data-collection-id="+h.newVal+"]");u._checkIfCollectionIsSelected(g)},this)},this)}},{ATTRS:{dialogConfig:{valueFn:function(){return n}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-dialog-content-selector","squarespace-model-editor"]})},536470:function(c,b,t){"use strict";var l=t(714487),d=t(965782);YUI.add("squarespace-block-search-gallery-model-editor",function(o){o.namespace("Squarespace.Block.ModelEditorDialog");var e=o.Squarespace.Block.ModelEditorDialog.SearchGallery=o.Base.create("SearchGalleryModelEditorDialog",o.Squarespace.Block.ModelEditorDialog.SocialSearch,[o.Squarespace.Block.Mixins.Gallery],{sanitizeDialogData:function(a){return a=o.merge(a,a.options),delete a.options,a.design!=="slider"?a.aspectRatio=null:delete a.aspectRatio,a.vSize=null,a},_isSocialSearchEnabled:function(){return e.superclass._isSocialSearchEnabled.call(this)},_getDefaultDialogConfig:function(){var a=e.superclass._getDefaultDialogConfig.call(this),r=a.tabs[0];return a.tabs.push({title:r.title,tabTitle:(0,l.t)("Design",null,{project:"scripts-v6.block"}),icon:r.icon,scroll:!0,fields:[{ctor:o.Squarespace.DialogFields.GalleryOptions,name:"options",config:{options:this._getGalleryOptions()}}]}),a.height=420,a},_getDefaultContent:function(){var a={methodOption:"transient"},r=(0,d.P)();return o.merge(r,a)}},{ATTRS:{}})},"1.0",{requires:["base","squarespace-block-mixin-gallery-option-sync","squarespace-dialog-gallery-options","squarespace-block-social-summary-model-editor","squarespace-block-social-search-model-editor","squarespace-block-summary-gallery-model"]})},837136:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-search",function(e){var a=e.namespace("Squarespace.Block").Search=e.Base.create("block-search",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{destructor:function(){this._searchPreview&&this._searchPreview.destroy()},_renderSuccess:function(r){a.superclass._renderSuccess.call(this,r);var s=this.get("contentBox").one(".sqs-search-ui-text-input");e.Lang.isValue(s)&&(s.detach("click"),this._searchPreview=new e.Squarespace.Widgets.SearchPreview({render:s}))}},{CSS_PREFIX:(0,o.u)(l.Z.SEARCH),ATTRS:{editor:{valueFn:function(){return d.oW(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Search}},type:{value:l.Z.SEARCH}}})},"1.0",{requires:["base","model","squarespace-search-preview","@sqs/layout-engine/block-model-sync-base","squarespace-block-search-editor","squarespace-premium-block-mixin"]})},694065:function(c,b,t){"use strict";var l=t(941450),d=t.n(l),o=t(129198),e=t.n(o);YUI.add("squarespace-block-shape-model",function(a){a.namespace("Squarespace.ContentModel.Shape"),a.Squarespace.ContentModel.Shape=a.Base.create("ShapeModel",a.Model,[],{},{ATTRS:{shape:{value:e().RECTANGLE},horizontalAlignment:{value:d().CENTER},showDropShadow:{value:!1},backgroundColor:{value:{type:"THEME_COLOR"}},dropShadow:{value:{angle:145,distance:{value:2,unit:"px"},blur:{value:3,unit:"px"},color:{type:"THEME_COLOR"}}},borderRadii:{value:{topLeft:{value:0,unit:"px"},topRight:{value:0,unit:"px"},bottomLeft:{value:0,unit:"px"},bottomRight:{value:0,unit:"px"}}}}})},"1.0",{requires:["base","model"]})},566076:function(c,b,t){"use strict";var l=t(646715),d=t.n(l),o=t(784874),e=t(104550),a=t(630459),r=t(767665),s=t(129198),n=t.n(s),i=t(526268),u=t.n(i),h=t(202560);YUI.add("squarespace-block-shape",function(g){g.namespace("Squarespace.Block.Shape");var p=g.Squarespace.Block.Shape=g.Base.create("block-shape",g.SQS.LayoutEngine.Block.ModelCsrBase,[],{bindUI:function(){p.superclass.bindUI.call(this),this.after("containerStylesChange",function(f){this._setShapeSize()},this)},toJSON:function(){var f=p.superclass.toJSON.call(this);return f.containerStyles=this.get("containerStyles"),f},_renderSuccess:function(f){p.superclass._renderSuccess.call(this,f),this._setStretchedToFill(),this._setShapeSize(),this._setFilters(),this._setBlendMode(),this._setStroke()},_setStretchedToFill:function(){var f=this.get("containerStyles"),m=this.get("boundingBox");m.toggleClass("sqs-stretched",!!(f&&f.stretchedToFill))},_setShapeSize:function(){var f=this.get("boundingBox").getDOMNode(),m=f.querySelector(".sqs-shape");(0,a.OH)(f,m)},_setFilters:function(){var f=this.get("model"),m=this.get("containerStyles"),_=f.get("showDropShadow")?f.get("dropShadow"):null,v=m.blur&&m.blur.enabled?m.blur:null,E=this.get("boundingBox").getDOMNode();(0,r.O)(E,_,v)},_setBlendMode:function(){var f=this.get("containerStyles"),m=f.blendMode,_=this._parentNode._node;(0,r.Hv)(_,m)},_setStroke:function(){var f=this.get("model"),m=this.get("containerStyles"),_=f.get("shape"),v=m.stroke,E=this.get("boundingBox").getDOMNode(),S=E.querySelector(".sqs-shape");if(v.style===u().NONE){S.style.stroke="none";return}var y=v.thickness.value+v.thickness.unit,C=v.dashLength.value+v.dashLength.unit,O=v.gapLength.value+v.gapLength.unit;if(_===n().RECTANGLE)S.style.borderStyle=v.style,S.style.borderWidth=y;else{var A=v.style==="dashed"?C+" calc("+y+" + "+O+")":0;S.style.strokeWidth=y,S.style.strokeDasharray=A}}},{CSS_PREFIX:(0,h.u)(o.Z.SHAPE),MODEL:g.Squarespace.ContentModel.Shape,ATTRS:{containerStyles:{value:e.aB[o.Z.SHAPE],setter:function(f){return d()({},e.aB[o.Z.SHAPE],f)}},editor:{value:g.Squarespace.Block.Editor.Schema},type:{value:o.Z.SHAPE}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-csr-base","squarespace-block-shape-model","squarespace-block-schema-editor"]})},501365:function(){YUI.add("squarespace-block-social-account-links-legacy-editor",function(c){c.namespace("Squarespace.Block.Editor").LegacySocialAccountLinks=c.Base.create("legacySocialAccountLinksEditor",c.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return c.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.LegacySocialAccountLinks")}},{NS:"blockEditor"})},"1.0",{requires:["base","squarespace-block-social-account-links-legacy-model-editor","squarespace-damask-context-globals"]})},545737:function(c,b,t){"use strict";var l=t(714487),d=t(868192);YUI.add("squarespace-block-social-account-links-legacy-model-editor",function(o){o.namespace("Squarespace.Block.ModelEditorDialog").LegacySocialAccountLinks=o.Base.create("SocialAccountLinksLegacyModelEditor",o.Squarespace.Block.ModelEditorDialog.SocialAccountLinks,[],{initializer:function(){var e=this.get("dialogConfig");e.tabs=[{tabTitle:(0,l.t)("Links",null,{project:"scripts-v6.block"}),title:(0,l.t)("Edit Social Links",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-social-18-light.png",scroll:!0,fields:[{ctor:o.Squarespace.DialogFields.Description,config:{text:(0,l.t)('This Social Links block that has been deprecated and can no longer be edited. To update your social links, please remove this block and add a new one. <a href="{helpLinkSocialLinks}" target="_blank">Learn more</a>',{helpLinkSocialLinks:d.SOCIAL_LINKS_BLOCK},{project:"scripts-v6.block"})}}]},e.tabs[1]]}})},"1.0",{requires:["base","squarespace-block-social-account-links-model-editor"]})},798890:function(){YUI.add("squarespace-block-social-account-links-legacy-model",function(c){c.namespace("Squarespace.ContentModel").SocialAccountLinksLegacyBlock=c.Base.create("SocialAccountLinksLegacyBlockModel",c.Squarespace.ContentModel.SocialAccountLinksBlock,[],{},{ATTRS:{accountIds:{valueFn:function(){return c.Array.map(c.Squarespace.Block.SocialAccountLinksUtils.getAccountsWithProfileUrl(),function(b){return b.id})}}}})},"1.0",{requires:["squarespace-block-social-account-links-model"]})},78232:function(c,b,t){"use strict";var l=t(637695),d=t.n(l),o=t(196397),e=t.n(o),a=t(871855),r=t.n(a),s=t(44830),n=t.n(s),i=t(714487),u=t(916661);YUI.add("squarespace-block-social-account-links-model-editor",function(h){var g={socialAccountPickerAccounts:{$valueFn:function(f){return h.Squarespace.Block.SocialAccountLinksUtils.getAccountsWithProfileUrl(f)}},iconAlignmentOptions:{$valueFn:function(){var f=n();return[{value:f.LEFT,label:(0,i.t)("Left",null,{project:"scripts-v6.block"})},{value:f.CENTER,label:(0,i.t)("Center",null,{project:"scripts-v6.block"})},{value:f.RIGHT,label:(0,i.t)("Right",null,{project:"scripts-v6.block"})}]}},iconSizeOptions:{$valueFn:function(){var f=e();return[{value:f.XSMALL,label:(0,i.t)("Extra Small",null,{project:"scripts-v6.block"})},{value:f.SMALL,label:(0,i.t)("Small",null,{project:"scripts-v6.block"})},{value:f.DEFAULT,label:(0,i.t)("Medium",null,{project:"scripts-v6.block"})},{value:f.LARGE,label:(0,i.t)("Large",null,{project:"scripts-v6.block"})},{value:f.XLARGE,label:(0,i.t)("Extra Large",null,{project:"scripts-v6.block"})}]}},iconColorOptions:{$valueFn:function(){var f=r();return[{value:f.BLACK,label:(0,i.t)("Dark",null,{project:"scripts-v6.block"})},{value:f.WHITE,label:(0,i.t)("Light",null,{project:"scripts-v6.block"})},{value:f.STANDARD,label:(0,i.t)("Standard",null,{project:"scripts-v6.block"})}]}},iconStyleOptions:{$valueFn:function(){var f=d();return[{value:f.ICON_ONLY,label:(0,i.t)("Regular",null,{project:"scripts-v6.block"})},{value:f.ROUND_BORDER,label:(0,i.t)("Circle - Border",null,{project:"scripts-v6.block"})},{value:f.ROUND,label:(0,i.t)("Circle - Knockout",null,{project:"scripts-v6.block"})},{value:f.ROUND_SOLID,label:(0,i.t)("Circle - Solid",null,{project:"scripts-v6.block"})},{value:f.REAL_SQUARE_BORDER,label:(0,i.t)("Square - Border",null,{project:"scripts-v6.block"})},{value:f.REAL_SQUARE,label:(0,i.t)("Square - Knockout",null,{project:"scripts-v6.block"})},{value:f.REAL_SQUARE_SOLID,label:(0,i.t)("Square - Solid",null,{project:"scripts-v6.block"})},{value:f.SQUARE_BORDER,label:(0,i.t)("Rounded - Border",null,{project:"scripts-v6.block"})},{value:f.SQUARE,label:(0,i.t)("Rounded - Knockout",null,{project:"scripts-v6.block"})},{value:f.SQUARE_SOLID,label:(0,i.t)("Rounded - Solid",null,{project:"scripts-v6.block"})}]}}},p={width:340,height:440,title:(0,i.t)("Edit Social Links",null,{project:"scripts-v6.block"}),tabs:[{tabTitle:(0,i.t)("Accounts",null,{project:"scripts-v6.block"}),name:"accounts",scroll:!0,fields:[{ctor:h.Squarespace.DialogFields.ConnectedAccounts}]},{icon:"/universal/images-v6/icons/icon-social-18-light.png",tabTitle:(0,i.t)("Design",null,{project:"scripts-v6.block"}),name:"design",scroll:!0,fields:[{ctor:h.Squarespace.DialogFields.Select,config:{titleStyle:"top",name:"iconAlignment",className:"thin dark","strings.title":(0,i.t)("Alignment",null,{project:"scripts-v6.block"}),options:{$include:"iconAlignmentOptions"}}},{ctor:h.Squarespace.DialogFields.Select,config:{titleStyle:"top",name:"iconSize","strings.title":(0,i.t)("Size",null,{project:"scripts-v6.block"}),className:"thin dark",options:{$include:"iconSizeOptions"}}},{ctor:h.Squarespace.DialogFields.Select,config:{titleStyle:"top",name:"iconStyle","strings.title":(0,i.t)("Style",null,{project:"scripts-v6.block"}),className:"thin dark",options:{$include:"iconStyleOptions"}}},{ctor:h.Squarespace.DialogFields.Select,config:{name:"iconColor","strings.title":(0,i.t)("Color",null,{project:"scripts-v6.block"}),className:"thin dark",options:{$include:"iconColorOptions"},visible:!u.Z.isSevenOne()}}]}]};h.namespace("Squarespace.Block.ModelEditorDialog").SocialAccountLinks=h.Base.create("socialAccountLinks",h.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{value:p},dialogConfigContext:{value:g}}})},"1.0",{requires:["base","squarespace-model-editor","squarespace-dialog-description","squarespace-dialog-select","squarespace-dialog-connected-accounts"]})},672417:function(c,b,t){"use strict";var l=t(916661);YUI.add("squarespace-block-social-account-links-model",function(d){d.namespace("Squarespace.ContentModel").SocialAccountLinksBlock=d.Base.create("SocialAccountLinksBlock",d.Model,[],{},{ATTRS:{iconAlignment:{value:"center"},iconSize:{value:"small"},iconStyle:{value:"icon-only"},iconColor:{value:l.Z.isSevenOne()?null:"black"}}})},"1.0",{requires:["base","model"]})},237186:function(c,b,t){"use strict";var l=t(784874),d=t(7595),o=t(480433),e=t.n(o),a=t(347560),r=t(840635),s=t(202560);YUI.add("squarespace-block-social-account-links-v2",function(n){var i="/universal/svg/social-accounts.svg",u={iconAlignment:"center",iconSize:"small",iconStyle:"icon-only",iconColor:"black"},h=n.namespace("Squarespace.Block").SocialAccountLinksV2=n.Base.create("block-social-account-links-v2",n.SQS.LayoutEngine.Block.ModelCsrBase,[n.Squarespace.Block.PremiumBlockMixin],{initializer:function(){this.actionListener=new(e())(a.Z),this.actionListener.addActionListener(r.Z.REFRESH_LAYOUT_ENGINE,this.refreshSocialIcons.bind(this))},destructor:function(){this.actionListener.removeAllActionListeners(),this.actionListener=null},refreshSocialIcons:function(){try{this._renderBlock(!0)}catch(g){console.warn(g)}},_renderSuccess:function(){h.superclass._renderSuccess.apply(this,arguments),this.get("contentBox").all("svg use").each(function(g){var p=g.getAttribute("xlink:href");p.indexOf(i)===-1&&g.setAttribute("xlink:href",i+p)}),d.default.parse()}},{CSS_PREFIX:(0,s.u)(l.Z.SOCIAL_ACCOUNT_LINKS_V2),MODEL:n.Squarespace.ContentModel.SocialAccountLinksBlock,ATTRS:{type:{value:l.Z.SOCIAL_ACCOUNT_LINKS_V2},editor:{value:n.Squarespace.Block.Editor.Schema},defaultContentModel:{value:u}}})},"1.0",{requires:["base","model","squarespace-block-social-account-links-model","@sqs/layout-engine/block-model-csr-base","squarespace-premium-block-mixin"]})},461471:function(c,b,t){"use strict";var l=t(784874),d=t(202560);YUI.add("squarespace-block-social-account-links",function(o){o.namespace("Squarespace.Block").SocialAccountLinksUtils={getAccountsWithProfileUrl:function(e){var a=[],r=o.config.win.Static.SQUARESPACE_CONTEXT.website.socialAccounts;r||(r=o.Squarespace.Models.ConnectedAccounts.loadFromStore());var s=o.Array.map(r,function(h){return o.clone(h,!0)});if(e&&e.get("accountIds")){var n=e.get("accountIds"),i=o.Squarespace.Block.SocialAccountLinksUtils._indexById(s);o.Array.each(n,function(h){var g=i[h];g&&a.push(g)});var u=o.Array.filter(s,function(h){return n.indexOf(h.id)===-1},this);a=a.concat(u)}else a=s;return o.Array.filter(a,function(h){return!!h.profileUrl})},_indexById:function(e){return o.Array.reduce(e,{},function(a,r){return a[r.id]=r,a})}},o.namespace("Squarespace.Block").SocialAccountLinks=o.Base.create("block-legacy-social-account-links",o.SQS.LayoutEngine.Block.ModelSyncBase,[o.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:(0,d.u)(l.Z.SOCIAL_ACCOUNT_LINKS),MODEL:o.Squarespace.ContentModel.SocialAccountLinksLegacyBlock,ATTRS:{type:{value:l.Z.SOCIAL_ACCOUNT_LINKS},editor:{value:o.Squarespace.Block.Editor.LegacySocialAccountLinks}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-social-account-links-legacy-editor","squarespace-block-social-account-links-legacy-model","squarespace-premium-block-mixin","squarespace-models-connected-accounts"]})},290791:function(c,b,t){"use strict";var l=t(807176),d=t.n(l),o=t(912246),e=t.n(o),a=t(714487),r=t(92485);YUI.add("squarespace-block-social-search-model-editor",function(s){s.namespace("Squarespace.Block.ModelEditorDialog");var n=s.Squarespace.Block.ModelEditorDialog.SocialSearch=s.Base.create("SocialSearchModelEditorDialog",s.Squarespace.Block.ModelEditorDialog.SocialSummary,[],{initializer:function(i){var u=this.get("dialog");this._isSocialSearchEnabled()&&(u.on("ready",function(){var h=u.getField("collectionId"),g=u.getField("enable-search"),p=u.getField("refresh");s.Lang.isValue(h)&&h.after("dataChange",this._onAccountSelectedChange,this),s.Lang.isValue(g)&&g.after("dataChange",this._onCollectionFilterCheckChange,this),s.Lang.isValue(p)&&p.on("click",this._refreshEditor,this),this._updateSocialFieldsVisibility(this._isValidAccountForSearch())},this),u.on("cancel",function(){var h=this.get("model"),g=u.getField("previewCollectionId");h.setAttrs({previewCollectionId:null}),s.Lang.isValue(g)&&g.set("data",null),h.setAttrs({previewCollectionId:null})},this))},_validateCriteria:function(i){var u=this._getWebserviceData(i),h=u.socialDataModel.get("socialSearch"),g=this.get("model"),p=g.get("searchTerm");if(!s.Lang.isValue(u.account))return new s.Squarespace.Widgets.Alert({"strings.title":(0,a.t)("Connect an Account",null,{project:"scripts-v6.block"}),"strings.message":(0,a.t)("In order to display your items, we'll need a valid account connection. Edit this block and select an existing connected account from the dropdown, or select <strong>Add an Account</strong> to connect a new one.",null,{project:"scripts-v6.block"})}),!1;var f=this.get("socialDataModel");return h=f.get("socialSearch"),s.Lang.isValue(h)&&(p=h.searchTerm),!s.Lang.isValue(p)||p===""?(new s.Squarespace.Widgets.Alert({"strings.title":(0,a.t)("Search term required",null,{project:"scripts-v6.block"}),"strings.message":(0,a.t)("Please define a search term to be used.",null,{project:"scripts-v6.block"})}),!1):!0},_cleanup:function(i,u,h){var g=this.get("dialog"),p=g.getField("previewCollectionId"),f=this.get("socialDataModel");if(s.Lang.isValue(p)&&p.set("data",null),s.Lang.isValue(u)&&u!==""){f.setAttrs({socialSearch:{id:null,collectionId:i,referenceId:null,referenceType:null,serviceProvider:h},searchFlag:this._isSearching(),socialCollectionId:i,previewCollectionId:u,preview:!0});var m=this;f.save(function(_){var v=f.get("error");if(!_&&!s.Lang.isValue(v)&&f.get("synced")&&m._isSocialSearchEnabled()){var E=m._getUpdateData(f);m._updateData(E)}})}},_refreshEditor:function(){var i=!0,u=this._getWebserviceData(i),h=this._validateCriteria(i);h&&this._syncAccount(u,!1)},_isSocialSearchEnabled:function(){return this.get("socialSearchEnabled")},_updateSocialFieldsVisibility:function(i){var u=i&&this._isSocialVisible(),h=this._getSocialFieldNames(),g=this.get("dialog"),p=s.Array.map(h,function(v){return g.getField(v)},this),f=s.Array.partition(p,function(v){return s.Lang.isValue(v)?u:!1},this),m=s.Array.filter(f.matches,s.Lang.isValue);s.Array.invoke(m,"show");var _=s.Array.filter(f.rejects,s.Lang.isValue);s.Array.invoke(_,"hide")},_isValidAccountForSearch:function(){return!0},_onAccountSelectedChange:function(i){var u=this.get("dialog"),h=this._isValidAccountForSearch(),g=u.getField("enable-search"),p=u.getField("enable-search-disabled");h?(s.Lang.isValue(g)&&g.show(),s.Lang.isValue(p)&&p.hide()):(s.Lang.isValue(g)&&g.hide(),s.Lang.isValue(p)&&p.show()),this._updateSocialFieldsVisibility(h)},_onCollectionFilterCheckChange:function(i){this._updateSocialFieldsVisibility(this._isValidAccountForSearch());var u=this._getCollectionOptions(),h=this._getConnectedAccounts(u);if(this._isSearching()&&h.length===0){var g=new s.Squarespace.Widgets.Alert({"strings.title":(0,a.t)("Connect an Account",null,{project:"scripts-v6.block"}),"strings.message":(0,a.t)("A connected account is required to use the search feature. In the popup window that will appear, authorize Squarespace to connect this account to your site.",null,{project:"scripts-v6.block"})});g.on("confirm",s.bind(this._onAddAccountClick,this))}},_isSocialVisible:function(){var i=this.get("dialog"),u=i.getField("enable-search");return this._isSocialSearchEnabled()&&u&&u.get("data")},_getSocialCollectionId:function(){if(!this._isSocialSearchEnabled())return null;var i=this.get("model"),u=i.get("socialCollectionId"),h=s.Lang.isString(u)&&u.length>0;return h?u:null},_getPreviewCollectionId:function(){if(!this._isSocialSearchEnabled())return null;var i=this.get("model"),u=i.get("previewCollectionId"),h=s.Lang.isString(u)&&u.length>0;return h?u:null},_getServiceId:function(){return null},_getSocialFieldNames:function(){return["searchTerm","refresh","unsafeSearch"]},_getSocialData:function(){var i={},u=this._getSocialFieldNames(),h=this.get("model");return s.Array.each(u,function(g){i[g]=h.get(g)},this),i},_getUpdateData:function(i){var u={},h="",g=this._getSocialFieldNames(),p=this.get("dialog").getField("collectionId");return s.Lang.isValue(p)&&(h=p.get("data")),s.Lang.isValue(i)?i.get("searchFlag")?(u={collectionId:h,connectedAccountId:h,socialCollectionId:i.get("socialSearch").collectionId,previewCollectionId:i.get("previewCollectionId"),preview:i.get("preview"),status:i.get("socialSearch").status,searchId:i.get("socialSearch").id},s.Array.each(g,function(f){s.Lang.isValue(i.get(f))&&(u[f]=i.get(f))})):(u={collectionId:i.get("socialSearch").collectionId,connectedAccountId:null,socialCollectionId:null,previewCollectionId:null,preview:!1,status:i.get("socialSearch").status,searchId:i.get("socialSearch").id},s.Array.each(g,function(f){s.Lang.isValue(i.get(f))&&(u[f]=null)})):(u={collectionId:h,connectedAccountId:h,socialCollectionId:null,previewCollectionId:null,preview:!1},this.get("model").set("enable-search",!1),this.get("dialog").getField("enable-search").set("data",!1),s.Array.each(g,function(f){u[f]=null})),u},_updateData:function(i){var u=this.get("dialog"),h=this._getSocialFieldNames(),g=u.getField("collectionId"),p=u.getField("socialCollectionId"),f=u.getField("previewCollectionId"),m=u.getField("connectedAccountId"),_=i.previewCollectionId,v=u.getField("status"),E=u.getField("searchId");i.preview||(_=null),s.Lang.isValue(g)&&g.set("data",i.connectedAccountId),s.Lang.isValue(p)&&p.set("data",i.socialCollectionId),s.Lang.isValue(f)&&f.set("data",_),s.Lang.isValue(m)&&m.set("data",i.connectedAccountId),s.Lang.isValue(v)&&v.set("data",""+i.status),s.Lang.isValue(E)&&E.set("data",""+i.searchId),this.get("model").setAttrs({collectionId:i.collectionId,socialCollectionId:i.socialCollectionId,previewCollectionId:_,connectedAccountId:i.connectedAccountId,status:i.status,searchId:i.searchId}),s.Array.each(h,function(S){var y=u.getField(S),C=i[S];s.Lang.isValue(y)&&y.set("data",C),this.get("model").set(S,C)},this)},_getAccount:function(i){var u=this._isValidAccountForSearch(),h=this.get("dialog"),g=this.get("model"),p=g.get("collectionId"),f=u&&this._isSearching(),m=g.get("connectedAccountId"),_=this._getServiceId(),v=h.getField("collectionId");if(!s.Lang.isValue(v))return null;var E=v.get("data");if(!s.Lang.isValue(E)||E==="")return null;var S=s.Squarespace.Models.ConnectedAccounts.loadFromStore().filter({asList:!0},function(O){if(s.Lang.isValue(i))return O.get("id")===i;if(O.get("serviceId")===_){var A=O.get("collectionId");return p?A===p:A===m}}).item(0);if(S)if(f){var y=S.get("id");g.set("connectedAccountId",y);var C=h.getField("connectedAccountId");s.Lang.isValue(C)&&C.set("data",y)}else g.set("collectionId",S.get("collectionId"));return S},_getCurrentAccount:function(i){var u=this.get("dialog"),h=this.get("model"),g=h.get("collectionId"),p=this._getServiceId(),f=u.getField("collectionId");if(s.Lang.isValue(f)){var m=f.get("data");s.Lang.isValue(m)&&m!=="add-account"&&(g=m)}var _=s.Squarespace.Models.ConnectedAccounts.loadFromStore().filter({asList:!0},function(v){if(s.Lang.isValue(i))return v.get("id")===i;if(v.get("serviceId")===p)return v.get("collectionId")===g}).item(0);return _},_isSearching:function(){var i=this.get("dialog"),u=i.getField("enable-search");return!!u&&u.get("data")},_getWebserviceData:function(i){var u=this.get("model");if(!u)return{searchFlag:!1,socialCollectionId:""};var h={search:!0},g=this.get("socialDataModel"),p=this.get("dialog"),f=this._isValidAccountForSearch(),m=this._getAccount(),_=this._getSocialCollectionId(),v=this._getPreviewCollectionId(),E=this._isSearching(),S=this._getSocialData(),y=this._getSocialFieldNames(),C=this._getServiceId(),O=u.get("pageCollectionId"),A=u.get("containingItemId"),I=u.get("status"),D=u.get("searchId"),T=u.get("searchTerm"),B=!!u.get("unsafeSearch"),N=O,P=e().PAGE;s.Lang.isValue(A)?(N=A,P=e().BLOG_POST):s.Lang.isValue(N)||(P=e().TEMPLATE_INSTALLATION),(!s.Lang.isValue(I)||I===""||I==="undefined")&&(I=d().UNDEFINED),(!s.Lang.isValue(D)||D===""||D==="undefined")&&(D=null),g.setAttrs({socialSearch:{id:D,collectionId:_,referenceId:N,referenceType:P,serviceProvider:C,status:I,searchTerm:T,unsafeSearch:B},searchFlag:E,previewCollectionId:v,preview:i,error:null}),s.Lang.isValue(m)&&(h.account=m),s.Array.each(y,function(R){g.set(R,S[R])});var x=f&&this._isSocialSearchEnabled()&&E;return!i&&!s.Lang.isValue(m)?r.i()?(h.socialDataModel=g,h):(new s.Squarespace.Widgets.Alert({"strings.title":(0,a.t)("Connect an Account",null,{project:"scripts-v6.block"}),"strings.message":(0,a.t)("In order to display your items, we'll need a valid account connection. Edit this block and select an existing connected account from the dropdown, or select <strong>Add an Account</strong> to connect a new one.",null,{project:"scripts-v6.block"})}),p.allowEditing(),{search:x}):!x&&!i?{search:!1}:(h.socialDataModel=g,h)},_onSendRequested:function(i){var u=this._getWebserviceData(!1);if(u.search)s.Lang.isValue(u.account)?(i.preventDefault(),u.search&&this._syncAccount(u,!0)):r.i()&&this.fire("collectionSynced");else{var h=this._getUpdateData();this._updateData(h),this.fire("collectionSynced")}},_syncAccount:function(i,u){var h=i.socialDataModel,g=this,p=this.get("dialog"),f=h.get("preview"),m=this._validateCriteria(f);if(!m){p.allowEditing();return}h.save(function(_){if(s.Lang.isValue(_))new s.Squarespace.Widgets.Information({"strings.title":(0,a.t)("Sync Error",null,{project:"scripts-v6.block"}),"strings.message":_.responseJSON.message}),p.allowEditing(),u&&g.fire("collectionSyncFailedWithError"),p.allowEditing();else if(i.account.set("pullEnabled",!0),h.get("synced")){if(g._isSocialSearchEnabled()){var v=g._getUpdateData(h);g._updateData(v)}u&&g.fire("collectionSynced")}else u&&g._afterSyncAccount()})},_getDefaultDialogConfig:function(){var i=this.get("model").toJSON(),u=n.superclass._getDefaultDialogConfig.call(this),h=u.tabs[0].fields,g=this._isValidAccountForSearch();return h.push({ctor:s.Squarespace.DialogFields.Check,name:"enable-search",config:{"strings.title":(0,a.t)("Search",null,{project:"scripts-v6.block"}),"strings.description":(0,a.t)("Display results filtered by hashtag, mention, or a specific topic (requires a connected account).",null,{project:"scripts-v6.block"}),data:i.enableSearch,visible:g&&this._isSocialVisible()}}),h.push({ctor:s.Squarespace.DialogFields.Description,name:"enable-search-disabled",config:{text:(0,a.t)("There is no valid account connected yet. Select an existing connected account from the dropdown, or select <strong>Add an Account</strong> to connect a new one.",null,{project:"scripts-v6.block"}),visible:!g}}),h.push({ctor:s.Squarespace.DialogFields.Text,config:{name:"socialCollectionId",maxLength:100,className:"thin",visible:!1,strings:{title:(0,a.t)("Social Collection Id",null,{project:"scripts-v6.block"}),description:(0,a.t)("The collection id assigned to the block when the block is created as a social search block.",null,{project:"scripts-v6.block"})}}}),h.push({ctor:s.Squarespace.DialogFields.Text,config:{name:"previewCollectionId",maxLength:100,className:"thin",visible:!1,strings:{title:(0,a.t)("Social Preview Collection Id",null,{project:"scripts-v6.block"}),description:(0,a.t)("The collection id assigned to the block when the block is created as a social search block.",null,{project:"scripts-v6.block"})}}}),h.push({ctor:s.Squarespace.DialogFields.Text,config:{name:"status",maxLength:100,className:"thin",visible:!1,strings:{title:(0,a.t)("Social Search Status",null,{project:"scripts-v6.block"}),description:(0,a.t)("The status assigned to the block when the block is created as a social search block.",null,{project:"scripts-v6.block"})}}}),h.push({ctor:s.Squarespace.DialogFields.Text,name:"searchId",config:{"strings.placeholder":(0,a.t)("Social Search ID",null,{project:"scripts-v6.block"}),data:i.searchId,maxLength:100,className:"thin",visible:!1}}),u}},{ATTRS:{socialSearchEnabled:{value:!0},socialDataModel:{value:new s.Squarespace.Models.SocialData}}})},"1.0",{requires:["base","model","squarespace-block-summary-model-editor","squarespace-dialog-button","squarespace-dialog-select","squarespace-dialog-slider","squarespace-model-editor","squarespace-models-connected-accounts","squarespace-models-social-data","squarespace-widgets-information"]})},664059:function(c,b,t){"use strict";var l=t(714487),d=t(518703),o=t(840635),e=t(92485);YUI.add("squarespace-block-social-summary-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");var r=a.Squarespace.Block.ModelEditorDialog.SocialSummary=a.Base.create("SocialSummaryModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.Summary,[],{initializer:function(s){var n=this.get("dialog");n.on("ready",function(){var u=n.getField("collectionId");a.Lang.isValue(u)&&u.after("dataChange",this._checkAddAccount,this)},this),this._publishEvents();var i=["collectionSynced","collectionSyncFailed","collectionSyncFailedWithError"];this.after(i,this._afterSyncAccount,this)},_onAddAccountClick:function(){var s=this._getServiceId();d.Z.authenticate({serviceProvider:s,urlParams:{authenticationType:"website",startSubscription:!0}}).then(this._continueAuthentication.bind(this)).catch(function(n){if(window.SQUARESPACE_SENTRY){var i="Issue with ExternalAuthentication: "+s;n&&n.data?window.SQUARESPACE_SENTRY.captureMessage(i+" "+n.data):window.SQUARESPACE_SENTRY.captureMessage(i)}})},_continueAuthentication:function(s){var n=s.socialConfig;if(a.Lang.isValue(n)){var i=n.externalAuthenticationId;this._refreshSocialAccounts(i)}},_checkAddAccount:function(){var s=this.get("dialog"),n=s.getField("collectionId");if(a.Lang.isValue(n)){var i=n.get("data");if(i==="add-account"){var u=new a.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Connecting Account\u2026",null,{project:"scripts-v6.block"}),"strings.message":(0,l.t)("In the popup window that will appear, authorize Squarespace to connect this account to your site.",null,{project:"scripts-v6.block"})});return u.on("confirm",a.bind(this._onAddAccountClick,this)),!0}}},_publishEvents:function(){this.publish("accountsRefreshed",{emitFacade:!0,defaultFn:this._afterAccountsRefresh}),this.publish("collectionSynced",{emitFacade:!0,defaultFn:this._onSyncSuccess}),this.publish("collectionSyncFailed",{emitFacade:!0,defaultFn:this._onSyncFail})},_getConnectedAccounts:function(s){var n=a.Array.partition(s,function(i){return i.value!==""&&i.value!=="add-account"},this);return a.Array.filter(n.matches,a.Lang.isValue)},_refreshSocialAccounts:function(s){o.Z.refreshConnectedAccounts(!0).then((function(){var n=this.get("dialog");if(n&&!n.isState(a.Squarespace.DialogStates.CLOSED)){var i=n.getField("collectionId");if(i){var u=this._getAccount(s);i.set("options",this._getCollectionOptions()),a.Lang.isValue(u)?(i.set("visible",!0),i.set("data",u.get("collectionId"))):i.set("data",null)}}this._showOauthCompletePopup()}).bind(this))},_showOauthCompletePopup:function(){new a.Squarespace.Widgets.Information({"strings.title":(0,l.t)("Account Connected",null,{project:"scripts-v6.block"}),"strings.message":a.Lang.sub((0,l.t)("Your {name} account has been connected",null,{project:"scripts-v6.block"}),this.get("strings"))})},_getServiceId:function(){return null},_getCollectionOptions:function(){var s=[],n=this._getServiceId(),i=a.Squarespace.Models.ConnectedAccounts.loadFromStore().filter({asList:!0},function(p){return p.get("serviceId")===n}),u=i.sort(function(p,f){return 0+(p.addedOn<f.addedOn)}),h=u.toArray().length===0;h&&s.push({value:"",label:(0,l.t)("Choose an account",null,{project:"scripts-v6.block"})});var g=a.Array.reduce(u.toArray(),s,function(p,f){return a.Lang.isValue(f.get("collectionId"))&&p.push(this._createSelectOption(f.get("collectionId"),f.get("screenname"))),p},this);return g.push({value:"add-account",label:(0,l.t)("Add an account",null,{project:"scripts-v6.block"})}),g},_getAccount:function(s){var n=this.get("model"),i=n.get("collectionId"),u=this._getServiceId(),h=a.Squarespace.Models.ConnectedAccounts.loadFromStore().filter({asList:!0},function(g){if(a.Lang.isValue(s))return g.get("id")===s;if(g.get("serviceId")===u)return g.get("collectionId")===i}).item(0);return h&&(n.set("collectionId",h.get("collectionId")),n.set("connectedAccountId",h.get("id"))),h},_onSendRequested:function(s){var n=this._getAccount();a.Lang.isValue(n)||e.i()?this.fire("collectionSynced"):(new a.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Connect an Account",null,{project:"scripts-v6.block"}),"strings.message":(0,l.t)("In order to display your items, we'll need a valid account connection. Edit this block and select an existing connected account from the dropdown, or select <strong>Add an Account</strong> to connect a new one.",null,{project:"scripts-v6.block"})}),this.get("dialog").allowEditing())},_onSyncSuccess:function(s){var n=(0,l.t)("Retrieving past {itemTypePlural}.  Squarespace will pull future {itemTypePlural} from {name} automatically.",null,{project:"scripts-v6.block"}),i=a.Lang.sub(n,this.get("strings"));e.i()||new a.Squarespace.Widgets.Information({"strings.title":(0,l.t)("Sync Successful",null,{project:"scripts-v6.block"}),"strings.message":i})},_onSyncFail:function(s){var n=(0,l.t)("Failed to retrieve past {itemTypePlural}. Squarespace will pull future {itemTypePlural} from {name} automatically.",null,{project:"scripts-v6.block"}),i=a.Lang.sub(n,this.get("strings"));new a.Squarespace.Widgets.Information({"strings.title":(0,l.t)("Sync Failed",null,{project:"scripts-v6.block"}),"strings.message":i})},_afterSyncAccount:function(){r.superclass._onSendRequested.call(this)},_getDefaultDialogConfig:function(){var s=this.get("model"),n=this.get("icon"),i=this.get("strings.name"),u={name:"collectionId",icon:n,strings:{title:(0,l.t)("Connected Account",null,{project:"scripts-v6.block"})},className:"thin dark",padding:[10,10],visible:!0,options:this._getCollectionOptions()},h="collectionId";u.visible&&!s.get(h)&&(u.data=u.options[0].value,u.defaultValue=u.options[0].value,s.set(h,u.data)),a.Array.each(u.options,function(f){f.value===s.get(h)&&(u.data=f.value)});var g=[{ctor:a.Squarespace.DialogFields.Select,config:u}];g.push({ctor:a.Squarespace.DialogFields.Text,config:{name:"connectedAccountId",maxLength:100,className:"thin",visible:!1,strings:{title:(0,l.t)("Connected Account Id",null,{project:"scripts-v6.block"}),description:(0,l.t)("The collection id associated to the connected account used when configuring a search.",null,{project:"scripts-v6.block"})}}}),g.push({ctor:a.Squarespace.DialogFields.Slider,required:!0,config:{name:"pageSize",range:[1,20],getPluralizedSliderLabel:function(f){return(0,l._6)({one:"{%n} Item",other:"{%n} Items"},f,null,{project:"scripts-v6.block",notes:"oldKey: defaultPageSizeSliderLabel"})},labelWidth:60,submitOnEnter:!0}});var p={loadingText:(0,l.t)("Editing {title}\u2026",{title:i},{project:"scripts-v6.block"}),width:395,tabs:[{title:i,tabTitle:(0,l.t)("Account",null,{project:"scripts-v6.block"}),fields:g}]};return p}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:a.Lang.isObject},strings:{value:{name:"Summary",itemType:(0,l.t)("Social Item",null,{project:"scripts-v6.block"}),itemTypePlural:(0,l.t)("Social Items",null,{project:"scripts-v6.block"})}},socialAccountType:{value:null}}})},"1.0",{requires:["base","model","squarespace-model-editor","squarespace-dialog-select","squarespace-dialog-button","squarespace-dialog-slider","squarespace-models-connected-accounts","squarespace-block-summary-model-editor","squarespace-widgets-information"]})},46439:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-social-summary",function(e){var a=e.namespace("Squarespace.Block").SocialSummaryBase=e.Base.create("block-social-summary",e.Squarespace.Block.Summary,[e.Squarespace.Block.PremiumBlockMixin],{_setDefaultContent:function(){this.get("model").setAttrs(this._getDefaultContent())},bindUI:function(){a.superclass.bindUI.call(this)},_renderSuccess:function(r){a.superclass._renderSuccess.call(this,r),this._togglePolling()},destructor:function(){this.stopRenderPolling()},startRenderPolling:function(){if(!this._synchronizingRenderTimer){var r=1e3;this._synchronizingRenderTimer=e.later(3*r,this,function(){this.render()},[],!0)}},stopRenderPolling:function(){this._synchronizingRenderTimer&&(this._synchronizingRenderTimer.cancel(),this._synchronizingRenderTimer=null)},_togglePolling:function(){var r=this.get("contentBox");e.Lang.isNull(r.one(".sqs-state-message.synchronizing"))?this.stopRenderPolling():this.startRenderPolling()},_getDefaultContent:function(){return{title:!0,thumbnail:!0,excerpt:!0,pageSize:10,collectionId:"",filter:{}}},toJSON:function(){var r=a.superclass.toJSON.apply(this,arguments);return r&&r.value&&r.value.collectionId==="add-account"&&(r.value.collectionId=""),r}},{CSS_PREFIX:(0,o.u)(l.Z.SOCIAL_SUMMARY),MODEL:e.Squarespace.ContentModel.SocialSummaryBlock,ATTRS:{defaultContentModel:{valueFn:"_getDefaultContent"},editor:{valueFn:function(){return d.oW(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Dialog}},type:{value:l.Z.SOCIAL_SUMMARY}}})},"1.0",{requires:["base","squarespace-block-summary","squarespace-block-social-summary-model-editor","squarespace-premium-block-mixin"]})},788534:function(c,b,t){"use strict";var l=t(714487),d=t(868192);YUI.add("squarespace-block-soundcloud-editor",function(o){o.namespace("Squarespace.Block.Editor").SoundCloud=o.Base.create("soundcloud-block-editor-dialog",o.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return o.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.SoundCloud")}},{NS:"blockEditor",ATTRS:{resizable:{value:!0},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}}}});var e={width:470,tabs:[{title:(0,l.t)("Edit SoundCloud Embed",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/skelecon-soundcloud-16-light.png",scroll:!1,fields:[{ctor:o.Squarespace.DialogFields.Oembed,name:"embed",config:{"strings.description":(0,l.t)('Paste the URL of a SoundCloud track, playlist, or profile to embed a player on the page. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:d.SOUNDCLOUD},{project:"scripts-v6.block"}),"strings.inputPlaceholder":(0,l.t)("Enter a SoundCloud URL here",null,{project:"scripts-v6.block"})}}]}]},a=o.namespace("Squarespace.Block.ModelEditorDialog").SoundCloud=o.Base.create("blockSoundCloudEditor",o.Squarespace.ModelEditorDialog,[],{getDialogData:function(){return{embed:this.get("model").toJSON()}},sanitizeDialogData:function(r){return o.merge(r.embed,{showArtwork:r.showArtwork,useVisualPlayer:r.useVisualPlayer})}},{ATTRS:{dialogConfig:{valueFn:function(){return e}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-oembed","squarespace-model-editor"]})},626922:function(c,b,t){"use strict";var l=t(784874),d=t(759352),o=t(936105),e=t(202560);YUI.add("squarespace-block-soundcloud",function(a){a.namespace("Squarespace.ContentModel").SoundCloud=a.Base.create("SoundCloudBlockModel",a.Model,[],{},{ATTRS:{aspectRatio:{value:67}}}),a.namespace("Squarespace.Block").SoundCloud=a.Base.create("block-soundcloud",a.SQS.LayoutEngine.Block.ModelSyncBase,[a.SQS.LayoutEngine.Block.MixinAspectRatio,a.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(r){var s=a.Node.create("<div></div>");s.insert(r.html),d.N$(s),this.get("contentBox").empty().setHTML(s)}},{CSS_PREFIX:(0,e.u)(l.Z.SOUNDCLOUD),MODEL:a.Squarespace.ContentModel.SoundCloud,ATTRS:{editor:{valueFn:function(){return o.Lk(this.get("blockTypeName"))?a.Squarespace.Block.Editor.Schema:a.Squarespace.Block.Editor.SoundCloud}},type:{value:l.Z.SOUNDCLOUD}}})},"1.0",{requires:["@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-soundcloud-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},985781:function(){YUI.add("squarespace-block-spacer-editor",function(c){c.namespace("Squarespace.Block.Editor");var b=c.Squarespace.Block.Editor.Spacer=c.Base.create("blockSpacerEditor",c.SQS.LayoutEngine.Block.Editor.Base,[],{},{NS:"blockEditor",ATTRS:{editingButtons:{value:!0},includeEdit:{value:!1},resizable:{value:!0},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-plugin-resizable","@sqs/layout-engine/block-editor-base"]})},423216:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-spacer",function(e){e.namespace("Squarespace.ContentModel").Spacer=e.Base.create("SpacerBlockModel",e.Model,[],{},{ATTRS:{vSize:{value:1},aspectRatio:{value:null}}}),e.namespace("Squarespace.Block").Spacer=e.Base.create("block-spacer",e.SQS.LayoutEngine.Block.Base,[e.SQS.LayoutEngine.Block.MixinAspectRatio,e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:(0,o.u)(l.Z.SPACER),MODEL:e.Squarespace.ContentModel.Spacer,ATTRS:{editor:{valueFn:function(){return d.Lk(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Spacer}},mobileEditor:{valueFn:function(){return e.Squarespace.Block.Editor.Spacer}},type:{value:l.Z.SPACER},classNames:{value:"spacer-block"},floatable:{value:!1}}})},"1.0",{requires:["base","@sqs/layout-engine/block-base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-spacer-editor","squarespace-block-schema-editor","squarespace-ss-widget","squarespace-premium-block-mixin"]})},825681:function(){YUI.add("squarespace-block-summary-editor",function(c){c.namespace("Squarespace.Block.Editor").Summary=c.Base.create("summary-block-editor-dialog",c.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return c.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Summary")}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-block-summary-model-editor","squarespace-damask-context-globals","squarespace-model-editor"]})},197807:function(c,b,t){"use strict";var l=t(714487),d=t(965782);YUI.add("squarespace-block-summary-gallery-model-editor",function(o){o.namespace("Squarespace.Block.ModelEditorDialog");var e=o.Squarespace.Block.ModelEditorDialog.SummaryGallery=o.Base.create("SummaryGalleryModelEditorDialog",o.Squarespace.Block.ModelEditorDialog.SocialSummary,[o.Squarespace.Block.Mixins.Gallery],{sanitizeDialogData:function(a){return a=o.merge(a,a.options),delete a.options,a.design!=="slider"?a.aspectRatio=null:delete a.aspectRatio,a.vSize=null,a},_getDefaultDialogConfig:function(){var a=e.superclass._getDefaultDialogConfig.call(this),r=a.tabs[0];return a.tabs.push({title:r.title,tabTitle:(0,l.t)("Design",null,{project:"scripts-v6.block"}),icon:r.icon,scroll:!0,fields:[{ctor:o.Squarespace.DialogFields.GalleryOptions,name:"options",config:{options:this._getGalleryOptions()}}]}),a.height=420,a},_getDefaultContent:function(){var a={methodOption:"transient"},r=(0,d.P)();return o.merge(r,a)}},{ATTRS:{}})},"1.0",{requires:["base","squarespace-block-mixin-gallery-option-sync","squarespace-dialog-gallery-options","squarespace-block-social-summary-model-editor","squarespace-block-summary-gallery-model"]})},229877:function(){YUI.add("squarespace-block-summary-gallery-model",function(c){c.namespace("Squarespace.ContentModel"),c.Squarespace.ContentModel.SummaryGalleryBlock=c.Base.create("summaryGalleryBlock",c.SQS.LayoutEngine.BlockModel.Gallery,[],{},{})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-gallery"]})},389350:function(){YUI.add("squarespace-block-summary-gallery",function(c){c.namespace("Squarespace.Block");var b=c.Squarespace.Block.SummaryGallery=c.Base.create("block-summary-gallery",c.Squarespace.Block.SocialSummaryBase,[c.SQS.LayoutEngine.Block.MixinAspectRatio,c.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){b.superclass.bindUI.call(this),this.after("resized",this.syncUI,this),this.after("widgetContentChange",this._setWidgetContent,this)},_renderBlock:function(t,l){l=c.Lang.isBoolean(l)?l:!1,this.get("boundingBox").setData("block",this.get("model").getAttrs()),this._shouldGetWidgetRendering(t)?(this.requestingContent=!0,b.superclass._renderBlock.call(this,l)):this.fire("widget:contentUpdate")},_renderSuccess:function(t){this.requestingContent=!1,this.set("widgetContent",t.html),this._setWidgetContent()},_setWidgetContent:function(){if(!this.requestingContent){var t=c.Node.create(this.get("widgetContent")),l=this.get("contentBox");l.empty().setHTML(t),this.get("model").get("aspectRatio")&&l.one(".sqs-state-message")&&l.one(".sqs-state-message").wrap("<div></div>"),c.SQS.Gallery.Manager.initializeBlock(l),this._updateAspectRatio()}},_shouldGetWidgetRendering:function(t){return!c.Lang.isValue(t)||!c.Object.hasKey(t,"changed")?!0:!c.SQS.LayoutEngine.Block.Utils.checkWhitelist(this.get("modelWhiteList"),t.changed)}},{CSS_PREFIX:"sqs-block-summary-gallery",MODEL:c.Squarespace.ContentModel.SummaryGalleryBlock,ATTRS:{editor:{value:c.Squarespace.Block.Editor.Gallery},modelWhiteList:{setter:function(t){return c.Lang.isArray(t)?t:c.Lang.isString(t)?[t]:[]},value:["aspectRatio","autoplay","lightbox","padding","thumbnail-strip-height","thumbnail-strip-margin","vSize"]},widgetContent:{value:""}}})},"1.0",{requires:["base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-social-summary","squarespace-block-gallery","squarespace-block-gallery-editor","squarespace-block-summary-gallery-model-editor","squarespace-block-summary-gallery-model","squarespace-premium-block-mixin"]})},291642:function(c,b,t){"use strict";var l=t(714487),d=t(437951),o=t.n(d);YUI.add("squarespace-block-summary-model-editor",function(e){e.namespace("Squarespace.Block.ModelEditorDialog");var a=e.Squarespace.Block.ModelEditorDialog.Summary=e.Base.create("SummaryModelEditorDialog",e.Squarespace.ModelEditorDialog,[],{initializer:function(){var r=this.get("dialog"),s=this.get("model");s.after("collectionIdChange",this._updateAutocomplete,this),this.get("dialog").on("ready",this._updateAutocomplete,this),r.on("shown",function(n){r.getField("pageSize").refreshWidth()},this)},_updateAutocomplete:function(r){var s=this.get("model").get("collectionId"),n=this.get("dialog").getField("filter");if(!(!e.Lang.isString(s)||s.length===0||!e.Lang.isValue(n))){var i=n.get("tagField"),u=n.get("categoryField"),h="/api/commondata/GetAutoCompleteTags",g="/api/commondata/GetAutoCompleteCategories",p={collectionId:s};e.Lang.isValue(n)&&(this._getNewAutoCompleteData(i,h,p),this._getNewAutoCompleteData(u,g,p))}},_getNewAutoCompleteData:function(r,s,n){e.Data.get({url:s,data:n,success:function(i){var u=r.get("acWidget");e.Lang.isValue(u)&&u.set("source",i)}})},_createSelectOption:function(r,s){return{value:r,label:s}},_getDefaultDialogConfig:function(){var r=[{title:(0,l.t)("Summary",null,{project:"scripts-v6.block"}),tabTitle:(0,l.t)("Content",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-summary-16-light.png",scroll:!0,fields:[{ctor:e.Squarespace.DialogFields.Description,config:{text:(0,l.t)("<strong>Items to Display.</strong>  Select the number of items this block should display.",null,{project:"scripts-v6.block"})}},{ctor:e.Squarespace.DialogFields.Slider,required:!0,config:{name:"pageSize",range:[1,20],getPluralizedSliderLabel:function(s){return(0,l._6)({one:"{%n} Item",other:"{%n} Items"},s,null,{project:"scripts-v6.block",notes:"oldKey: defaultPageSizeSliderLabel"})},labelWidth:60,submitOnEnter:!0}},{ctor:e.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionFilter:{collectionType:[o().PRODUCTS,o().COLLECTION_TYPE_GENERIC],folder:!1}}}]},{tabTitle:(0,l.t)("Filters",null,{project:"scripts-v6.block"}),scroll:!0,fields:[{name:"filter",ctor:e.Squarespace.DialogFields.SummaryFilter}]},{tabTitle:(0,l.t)("Design",null,{project:"scripts-v6.block"}),scroll:!0,fields:[{ctor:e.Squarespace.DialogFields.Check,name:"title",config:{"strings.title":(0,l.t)("Title",null,{project:"scripts-v6.block"}),"strings.description":(0,l.t)("Display the title of each item.",null,{project:"scripts-v6.block"})}},{ctor:e.Squarespace.DialogFields.Check,name:"thumbnail",config:{"strings.title":(0,l.t)("Featured Image",null,{project:"scripts-v6.block"}),"strings.description":(0,l.t)("Display the Featured Image for each item.",null,{project:"scripts-v6.block"})}},{ctor:e.Squarespace.DialogFields.Check,name:"excerpt",config:{"strings.title":(0,l.t)("Excerpt",null,{project:"scripts-v6.block"}),"strings.description":(0,l.t)("Display an excerpt of each item.",null,{project:"scripts-v6.block"})}}]}];return{width:380,height:420,tabs:r}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:e.Lang.isObject}}})},"1.0",{requires:["base","model","squarespace-model-editor","squarespace-dialog-summary-filter","squarespace-dialog-check","squarespace-dialog-slider","squarespace-dialog-content-selector"]})},232278:function(c,b,t){"use strict";var l=t(714487),d=t(784874),o=t(502397),e=t(202560),a=t(965455);YUI.add("squarespace-block-summary-v2",function(r){var s=r.Squarespace.ContentModel.SummaryV2Block=r.Base.create("SummaryV2",r.Model,[],{},{ATTRS:{collectionId:{value:""},design:{value:"autogrid"},headerText:{value:(0,l.t)("Featured",null,{project:"scripts-v6.block"})},textSize:{value:"medium"},pageSize:{value:3},imageAspectRatio:{value:1.5},columnWidth:{value:270},gutter:{value:60},listImageSize:{value:30},listImageAlignment:{value:"left"},slidesPerRow:{value:3},textAlignment:{value:"left"},showTitle:{value:!0},showThumbnail:{value:!0},showExcerpt:{value:!0},showReadMoreLink:{value:!1},showPrice:{value:!0},productQuickViewEnabled:{value:!1},showPastOrUpcomingEvents:{value:"upcoming"},metadataPosition:{value:"below-content"},primaryMetadata:{value:"none"},secondaryMetadata:{value:"none"},filter:{value:{}},autoCrop:{value:!0},lightbox:{value:!1},mixedContent:{value:!0},blockId:{valueFn:function(){return(0,a.x)()}}}}),n=r.namespace("Squarespace.Block").SummaryV2=r.Base.create("block-summary-v2",r.SQS.LayoutEngine.Block.ModelSyncBase,[r.Squarespace.Block.PremiumBlockMixin,r.SQS.LayoutEngine.Block.MixinContainerStyles],{syncUI:function(){n.superclass.syncUI.call(this),this._plugImageLoader()},bindUI:function(){this.get("model").after("change",this._renderBlock,this),this.after("resized",this._renderBlock,this)},show:function(){n.superclass.show.call(this,arguments),this._setWidgetContent()},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(i){i.hasPlugin(r.Squarespace.Loader2.NS)||i.plug(r.Squarespace.Loader2)})},_renderBlock:function(i){this.get("boundingBox").setData("block",this.get("model").getAttrs()),this._shouldGetWidgetRendering(i)?n.superclass._renderBlock.call(this):this._updateWhitelistedAttrs(i)},_renderSuccess:function(i){this.set("widgetContent",i.html),this._setWidgetContent()},_setWidgetContent:function(){var i=r.Node.create(this.get("widgetContent")),u=this.get("contentBox");u.empty(),u.setHTML(i),this._scaleThumbnailPlaceholders(),r.SQS.Gallery.Manager.initializeBlock(u),this.get("contentBox").all(".summary-block-collection-type-lessons img").each(function(h){h.once("load",function(){r.SQS.Gallery.Manager.initializeBlock(u)},this)}),this.get("contentBox").all(".sqsSummaryBlockThumbnailPlaceholder").each(function(h){var g=h.ancestor(".summary-item").getDOMNode();g.classList.remove("no-image")})},_scaleThumbnailPlaceholders:function(){var i=this.get("model").get("imageAspectRatio"),u=(0,o.U)(i);this.get("contentBox").all(".sqsSummaryBlockThumbnailPlaceholder").each(function(h){h.get("parentNode").setStyle("paddingBottom",u+"%"),h.setStyle("paddingBottom",u+"%")})},_shouldGetWidgetRendering:function(i){return!r.Lang.isValue(i)||!r.Object.hasKey(i,"changed")?!0:!r.SQS.LayoutEngine.Block.Utils.checkWhitelist(this.get("modelWhiteList"),i.changed)},_updateWhitelistedAttrs:function(i){var u=this.get("model"),h=this.get("contentBox");i.changed.headerText?h.one(".summary-heading").setHTML(u.get("headerText")):i.changed.textSize?this._updateClassThatStartsWith("summary-block-setting-text-size-",u.get("textSize"),h.get("children")):i.changed.textAlignment?this._updateClassThatStartsWith("summary-block-setting-text-align-",u.get("textAlignment"),h.get("children")):i.changed.listImageAlignment&&this._updateClassThatStartsWith("summary-block-setting-design-list-thumbnail-",u.get("listImageAlignment"),h.get("children"))},_updateClassThatStartsWith:function(i,u,h){var g=h.getAttribute("class")[0].split(" ");r.Array.forEach(g,function(p){p=p.trim(),p.startsWith(i)&&h.hasClass(p)&&h.replaceClass(p,i+u)},this)}},{CSS_PREFIX:(0,e.u)(d.Z.SUMMARY_V2),MODEL:r.Squarespace.ContentModel.SummaryV2Block,ATTRS:{modelWhiteList:{setter:function(i){return r.Lang.isArray(i)?i:r.Lang.isString(i)?[i]:[]},value:["headerText","textSize","listImageAlignment","textAlignment","enableProductQuickView"]},defaultContentModel:{},editor:{value:r.Squarespace.Block.Editor.Schema},type:{value:d.Z.SUMMARY_V2},widgetContent:{value:""},floatable:{value:!0}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","@sqs/layout-engine/block-utils","@sqs/layout-engine/block-mixin-container-styles","squarespace-block-schema-editor","squarespace-gallery-ng","squarespace-image-loader","squarespace-models-content-collection","squarespace-util","squarespace-video-loader","squarespace-premium-block-mixin"]})},106924:function(c,b,t){"use strict";var l=t(784874),d=t(202560);YUI.add("squarespace-block-summary",function(o){var e=o.namespace("Squarespace.Block").Summary=o.Base.create("block-summary",o.SQS.LayoutEngine.Block.ModelSyncBase,[o.Squarespace.Block.PremiumBlockMixin],{syncUI:function(){e.superclass.syncUI.call(this),this._plugImageLoader()},_renderSuccess:function(a){e.superclass._renderSuccess.call(this,a),this._plugImageLoader()},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(a){a.hasPlugin(o.Squarespace.Loader2.NS)||a.plug(o.Squarespace.Loader2)})},_getDefaultContent:function(){return{title:!0,thumbnail:!0,excerpt:!0,pageSize:10,collectionId:"",filter:{}}}},{MODEL:o.Squarespace.ContentModel.SummaryBlock,ATTRS:{defaultContentModel:{valueFn:"_getDefaultContent"},editor:{value:o.Squarespace.Block.Editor.Summary},type:{value:l.Z.SUMMARY}},CSS_PREFIX:(0,d.u)(l.Z.SUMMARY)})},"1.0",{requires:["base","squarespace-image-loader","squarespace-block-summary-editor","squarespace-premium-block-mixin"]})},248280:function(c,b,t){"use strict";var l=t(714487),d=t(868192),o=t(762379),e=t(444867),a=t.n(e),r="tag",s="category";YUI.add("squarespace-block-tagcloud-editor",function(n){n.namespace("Squarespace.Block.Editor").Tagcloud=n.Base.create("tagcloud-block-editor-dialog",n.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return n.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Tagcloud")}},{NS:"blockEditor",ATTRS:{}});var i=n.namespace("Squarespace.Block.ModelEditorDialog").Tagcloud=n.Base.create("blockTagcloudEditor",n.Squarespace.ModelEditorDialog,[],{_showDialog:function(){o.Z.isFeatureEnabled(a().NESTED_CATEGORIES)&&this._attachPC2OptionToggleEvent(),i.superclass._showDialog.call(this);var u=this.get("dialog").getField("collectionIds");u.set("collectionGroups",this._getCollectionGroups()),u.syncUI()},_attachPC2OptionToggleEvent:function(){var u=this.get("dialog"),h=this.get("_id");u.detach(h+"|ready"),u.on(h+"|ready",function(g){var p=u.getField("collectionIds");p.after("dataChange",this._handleCollectionIdsChange,this);var f=this.get("dialog").getField("type");f.after("dataChange",function(m){m.newVal||f.setValue("tag")},this),this._userHasSelectedProductCollection()&&this._toggleTypeOptionForPC2Collection()},this)},_handleCollectionIdsChange:function(u){this._toggleTypeOptionForPC2Collection(),this._handleUndoRedoCollectionIdsChanges(u)},_handleUndoRedoCollectionIdsChanges:function(u){var h=this.get("dialog").getField("collectionIds"),g=n.one(".collection-wrapper[data-collection-id="+u.newVal+"]");h._checkIfCollectionIsSelected(g)},_userHasSelectedProductCollection:function(){var u=n.Squarespace.ContentCollectionCache,h=this.get("dialog").getField("collectionIds").getValue(),g=n.Squarespace.ContentCollectionUtils;return u.filter(function(p){return h.includes(p.get("id"))&&g.isProduct(p)}).length!==0},_toggleTypeOptionForPC2Collection:function(){var u=this.get("dialog").getField("type"),h=u.get("options"),g=h.find(function(p){return p.value===s});this._userHasSelectedProductCollection()?(u.getValue()===s&&u.setValue(r),g.disabled=!0):delete g.disabled,u.set("options",h)},_getCollectionGroups:function(){var u=n.Squarespace.ContentCollectionUtils,h=n.Squarespace.ContentCollectionCache,g=h.filter(u.isGenericOrProduct);return g=n.Array(g).filter(u.isNotCalendar),u.groupCollectionsByTypeName(g)},_getDialogConfig:function(){return{width:300,height:450,initialDataByReference:!0,tabs:[{title:(0,l.t)("Tag Cloud",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-tagcloud-16-light-solid.png",scroll:!0,fields:[{ctor:n.Squarespace.DialogFields.Description,text:(0,l.t)('Display tags or categories from one of your pages arranged in a fun cloud formation. <a href="{helpLink}" target="_blank">Learn more</a><br><br>Start by selecting one of your pages below:',{helpLink:d.TAGCLOUD_EDITOR},{project:"scripts-v6.block"})},{ctor:n.Squarespace.DialogFields.ContentIdArraySelector,config:{name:"collectionIds",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionGroups:[],emptyMessage:(0,l.t)("No pages yet. Go to the pages panel and click a + to add new content.",null,{project:"scripts-v6.block"})}},{ctor:n.Squarespace.DialogFields.Select,config:{name:"type","strings.title":(0,l.t)("Display Type",null,{project:"scripts-v6.block"}),className:"dark thin",defaultValue:"tag",options:[{value:r,label:this.get("strings").tag},{value:s,label:this.get("strings").category}]}},{ctor:n.Squarespace.DialogFields.Select,config:{name:"sortby","strings.title":(0,l.t)("Sort By",null,{project:"scripts-v6.block"}),defaultValue:"az",className:"thin dark",options:[{value:"az",label:this.get("strings").az},{value:"weight",label:this.get("strings").weight},{value:"activity",label:this.get("strings").activity}]}},{ctor:n.Squarespace.DialogFields.Slider,required:!0,config:{name:"count",range:[5,100],"strings.description":(0,l.t)("Pick the number of tags to show in the cloud.",null,{project:"scripts-v6.block"}),getPluralizedSliderLabel:function(u){return(0,l._6)({one:"{%n} Tag",other:"{%n} Tags"},u,null,{project:"scripts-v6.block",notes:"oldKey: tagCloudSliderLabel"})},labelWidth:50,submitOnEnter:!0}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"},strings:{value:{az:(0,l.t)("Alphabetical",null,{project:"scripts-v6.block"}),weight:(0,l.t)("Weight",null,{project:"scripts-v6.block"}),activity:(0,l.t)("Activity",null,{project:"scripts-v6.block"}),tag:(0,l.t)("Tags",null,{project:"scripts-v6.block"}),category:(0,l.t)("Categories",null,{project:"scripts-v6.block"}),author:(0,l.t)("Author",null,{project:"scripts-v6.block"}),fontsize:(0,l.t)("Font Size",null,{project:"scripts-v6.block"}),color:(0,l.t)("Color",null,{project:"scripts-v6.block"}),flat:(0,l.t)("Flat",null,{project:"scripts-v6.block"})}}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-content-collection-utils","squarespace-damask-context-globals","squarespace-dialog-content-item-grid","squarespace-dialog-gallery-options","squarespace-dialog-multi-option","squarespace-dialog-multi-frame","squarespace-models-content-collection","squarespace-plugin-actionoverlay"]})},966370:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-tagcloud",function(e){e.namespace("Squarespace.Block").Tagcloud=e.Base.create("block-tagcloud",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{},{CSS_PREFIX:(0,o.u)(l.Z.TAGCLOUD),ATTRS:{editor:{valueFn:function(){return d.Lk(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Tagcloud}},type:{value:l.Z.TAGCLOUD}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-sync-base","squarespace-block-tagcloud-editor","squarespace-block-schema-editor","squarespace-premium-block-mixin"]})},461061:function(){YUI.add("squarespace-block-tock-model",function(c){c.namespace("Squarespace.ContentModel.Tock"),c.Squarespace.ContentModel.Tock=c.Base.create("TockModel",c.Model,[],{},{ATTRS:{tockBusinessSlug:{value:""},tockDisplayMode:{value:"inline"},tockAlignment:{value:"center"},tockColorMode:{value:"blue"},hideTockLogo:{value:!0},blockSelectorSource:{value:"tock-reservations"}}})},"1.0",{requires:["base","model"]})},402801:function(c,b,t){"use strict";var l=t(784874),d=t(202560),o=t(226782);YUI.add("squarespace-block-tock",function(e){e.namespace("Squarespace.Block.Tock");var a=e.Squarespace.Block.Tock=e.Base.create("block-tock",e.SQS.LayoutEngine.Block.ModelCsrBase,[],{_renderSuccess:function(r){a.superclass._renderSuccess.call(this,r),(0,o.Z)(this.get("boundingBox").getDOMNode())}},{CSS_PREFIX:(0,d.u)(l.Z.TOCK),MODEL:e.Squarespace.ContentModel.Tock,ATTRS:{editor:{value:e.Squarespace.Block.Editor.Schema},type:{value:l.Z.TOCK}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-csr-base","squarespace-block-tock-model","squarespace-block-schema-editor"]})},382508:function(){YUI.add("squarespace-block-tourdates-editor",function(c){c.namespace("Squarespace.Block.Editor").TourDates=c.Base.create("tourdates-block-editor-dialog",c.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return c.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.TourDates")},afterLayoutDrag:function(){this.get("host").fire("resized")}},{NS:"blockEditor",ATTRS:{}})},"1.0",{requires:["base","squarespace-model-editor","squarespace-block-editor-dialog","squarespace-block-tourdates-model-editor","squarespace-damask-context-globals"]})},370537:function(c,b,t){"use strict";var l=t(714487),d=t(868192),o=t(92485),e={"strings.placeholder":(0,l.t)("Pablo City",null,{project:"scripts-v6.block"}),"strings.title":(0,l.t)("Band Name",null,{project:"scripts-v6.block"}),"strings.description":(0,l.t)("Enter your band's name as it appears within your Bandsintown account.",null,{project:"scripts-v6.block"}),name:"artistId",className:"thin"},a=Object.assign({},e,{"strings.requiredFieldEmptyMessage":(0,l.t)("Please enter a band name.",null,{project:"scripts-v6.block"}),required:!0}),r=o.i()?e:a;YUI.add("squarespace-block-tourdates-model-editor",function(s){s.namespace("Squarespace.Block.ModelEditorDialog");var n=s.Squarespace.Block.ModelEditorDialog.TourDates=s.Base.create("TourDatesModelEditorDialog",s.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").on("ready",function(){this._toggleDateRangePickerVisibility()},this),this.get("model").after("timeframeChange",this._toggleDateRangePickerVisibility,this)},_toggleDateRangePickerVisibility:function(){var i=this.get("dialog"),u=this.get("model").get("timeframe")==="dateRange";i.isOpen()&&(i.getField("startDate").set("visible",u),i.getField("endDate").set("visible",u))},_getDefaultDialogConfig:function(){var i=[{tabTitle:(0,l.t)("Bandsintown",null,{project:"scripts-v6.block"}),icon:"/universal/images-v6/icons/icon-bandsintown-16-light.png",scroll:!0,fields:[{ctor:s.Squarespace.DialogFields.Description,text:(0,l.t)('Display tour dates from your Bandsintown profile, and allow visitors to RSVP to your shows and buy tickets through links on your site. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:d.BANDSINTOWN},{project:"scripts-v6.block"})},{ctor:s.Squarespace.DialogFields.Text,config:r},{ctor:s.Squarespace.DialogFields.Select,config:{"strings.title":(0,l.t)("Timeframe to Show",null,{project:"scripts-v6.block"}),name:"timeframe",className:"thin dark",defaultValue:"upcoming",options:[{value:"upcoming",label:(0,l.t)("Upcoming",null,{project:"scripts-v6.block"})},{value:"dateRange",label:(0,l.t)("Date Range",null,{project:"scripts-v6.block"})}]}},{type:"splitter",fields:[{ctor:s.Squarespace.DialogFields.DateTimePicker,config:{"strings.title":(0,l.t)("Tour begins on",null,{project:"scripts-v6.block"}),name:"startDate",dateFormat:{date:"medium"},timePickerEnabled:!1}},{ctor:s.Squarespace.DialogFields.DateTimePicker,config:{"strings.title":(0,l.t)("and ends",null,{project:"scripts-v6.block"}),"strings.errorMessage":(0,l.t)("End date needs to be later than start date.",null,{project:"scripts-v6.block"}),name:"endDate",dateFormat:{date:"medium"},timePickerEnabled:!1,validator:function(u){var h=u,g=this.get("dialog").getField("startDate").get("data");return h===null||h>=g}}}]}]}];return{title:(0,l.t)("Bandsintown",null,{project:"scripts-v6.block"}),width:410,height:375,style:"standard",loadingText:(0,l.t)("Editing Tour Dates Block\u2026",null,{project:"scripts-v6.block"}),initialDataByReference:!0,tabs:i}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:s.Lang.isObject}}})},"1.0",{requires:["base","model","squarespace-dialog-text","squarespace-dialog-select","squarespace-dialog-datetime-picker","squarespace-model-editor"]})},640919:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-tourdates",function(e){e.namespace("Squarespace.Block");var a=e.Squarespace.Block.TourDates=e.Base.create("block-tourdates",e.SQS.LayoutEngine.Block.ModelSyncBase,[e.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){var r=this.get("model");r.after(["save","artistIdChange","timeframeChange"],function(s){clearTimeout(this.requestArtistTimeout),this.requestArtistTimeout=setTimeout((function(){this._renderSuccess(s)}).bind(this),500)},this)},_renderSuccess:function(r){a.superclass._renderSuccess.call(this,r);var s=this.get("model");this.tourdatesBlock=new e.Squarespace.Widgets.BandsInTownTourDatesList(s.getAttrs(["artistId","timeframe","startDate","endDate"])),this.tourdatesBlock.render(this.get("contentBox")),this.tourdatesBlock.on("templateRendered",(function(){this.fire("widget:contentUpdate")}).bind(this))},_getDefaultContent:function(){var r=new Date,s=new Date(r.getFullYear(),r.getMonth()-1,1).getTime(),n=new Date(r.getFullYear(),r.getMonth()+2,1).getTime();return{artistId:"",timeframe:"upcoming",startDate:s,endDate:n}}},{MODEL:e.Squarespace.ContentModel.TourDatesBlock,CSS_PREFIX:(0,o.u)(l.Z.TOURDATES),ATTRS:{defaultContentModel:{valueFn:"_getDefaultContent"},editor:{valueFn:function(){return d.Lk(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.TourDates}},type:{value:l.Z.TOURDATES}}})},"1.0",{requires:["base","model","@sqs/layout-engine/block-model-sync-base","squarespace-block-tourdates-editor","squarespace-block-schema-editor","@sqs/layout-engine/block-utils","squarespace-widgets-tourdates-bandsintown","squarespace-premium-block-mixin"]})},52660:function(c,b,t){"use strict";var l=t(714487),d=t(815211),o=t.n(d),e=t(437951),a=t.n(e),r=t(868192);YUI.add("squarespace-block-twitter-editor",function(s){var n=s.namespace("Squarespace.Block.Editor").Twitter=s.Base.create("twitter-block-editor-dialog",s.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return s.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Twitter")},_initConfigDialog:function(){var u=this._model.layout.get("contentItemId");return s.Lang.isValue(u)||(u=this._model.layout.get("parentItemId")),this._model.setAttrs({pageCollectionId:this._model.layout.get("collectionId"),containingItemId:u}),n.superclass._initConfigDialog.apply(this,arguments)},_getServiceId:function(){return o().TWITTER}},{NS:"blockEditor",ATTRS:{}}),i=s.namespace("Squarespace.Block.ModelEditorDialog").Twitter=s.Base.create("TwitterSummaryModelEditorDialog",s.Squarespace.Block.ModelEditorDialog.SocialSearch,[],{_getServiceId:function(){return o().TWITTER},_getDefaultDialogConfig:function(){var u=this.get("model").toJSON(),h=i.superclass._getDefaultDialogConfig.call(this),g=h.tabs[0].fields,p=!!this._isSocialVisible();return h.name="twitter-block-editor",h.height=480,g.unshift({ctor:s.Squarespace.DialogFields.Description,text:(0,l.t)(`Display a feed of your recent tweets, or use the search feature to display anyone's tweets by hashtag, mentions, or other terms. <a href="{helpLink}" target="_blank">Learn more</a>`,{helpLink:r.TWITTER},{project:"scripts-v6.block"})}),g.push({ctor:s.Squarespace.DialogFields.Text,name:"searchTerm",config:{"strings.placeholder":(0,l.t)("Search Twitter for\u2026",null,{project:"scripts-v6.block"}),data:u.searchTerm,maxLength:100,className:"thin",visible:p}}),g.push({ctor:s.Squarespace.DialogFields.Button,name:"refresh",config:{"strings.text":(0,l.t)("Refresh",null,{project:"scripts-v6.block"}),className:"thin",visible:p}}),g.push({ctor:s.Squarespace.DialogFields.Check,name:"unsafeSearch",config:{"strings.title":(0,l.t)("Include Tweets Marked As Sensitive",null,{project:"scripts-v6.block"}),"strings.description":(0,l.t)("Include all tweets, including any flagged as possibly sensitive by Twitter.",null,{project:"scripts-v6.block"}),data:u.unsafeSearch,visible:p}}),g.push({ctor:s.Squarespace.DialogFields.Check,name:"showAvatar",config:{"strings.title":(0,l.t)("Show Avatar",null,{project:"scripts-v6.block"}),"strings.description":(0,l.t)("Shows or hides the avatar image.",null,{project:"scripts-v6.block"}),data:u.showAvatar}}),g.push({ctor:s.Squarespace.DialogFields.Check,name:"showUsername",config:{"strings.title":(0,l.t)("Show Username",null,{project:"scripts-v6.block"}),"strings.description":(0,l.t)("Shows or hides the username text.",null,{project:"scripts-v6.block"}),data:u.showUsername}}),g.push({ctor:s.Squarespace.DialogFields.Check,name:"followButton",config:{"strings.title":(0,l.t)("Show Follow Button",null,{project:"scripts-v6.block"}),"strings.description":(0,l.t)("Append a follow button to the listing.",null,{project:"scripts-v6.block"}),data:u.followButton}}),h}},{ATTRS:{icon:{value:"twitter"},socialAccountType:{value:o().TWITTER},collectionType:{value:a().TWITTER},strings:{value:{name:"Twitter",itemTypePlural:"tweets",itemType:"tweet"}}}})},"1.0",{requires:["base","model","squarespace-block-social-summary-model-editor","squarespace-block-social-search-model-editor","squarespace-damask-context-globals","squarespace-dialog-check","squarespace-model-editor"]})},603917:function(){YUI.add("squarespace-block-twitter-model",function(c){c.namespace("Squarespace.ContentModel").TwitterBlock=c.Base.create("TwitterBlockModel",c.Model,[],{},{ATTRS:{}})},"1.0",{requires:["base","model"]})},362335:function(c,b,t){"use strict";var l=t(784874),d=t(936105),o=t(202560);YUI.add("squarespace-block-twitter",function(e){var a=e.namespace("Squarespace.Block").Twitter=e.Base.create("block-twitter",e.Squarespace.Block.SocialSummaryBase,[e.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(r){a.superclass._renderSuccess.call(this,r),r&&e.Squarespace.FollowButtonUtils.renderAll()},_getDefaultContent:function(){var r=a.superclass._getDefaultContent.call(this);return e.merge(r,{showAvatar:!0,showUsername:!0,followButton:!1})}},{CSS_PREFIX:(0,o.u)(l.Z.TWITTER),MODEL:e.Squarespace.ContentModel.TwitterBlock,ATTRS:{isDeprecated:{readOnly:!0,value:!0},editor:{valueFn:function(){return d.oW(this.get("blockTypeName"))?e.Squarespace.Block.Editor.Schema:e.Squarespace.Block.Editor.Twitter}},type:{value:l.Z.TWITTER}}})},"1.0",{requires:["base","squarespace-follow-buttons","squarespace-block-social-summary","squarespace-block-twitter-editor","squarespace-block-twitter-model","squarespace-premium-block-mixin"]})},132644:function(){YUI.add("squarespace-block-video-model",function(c){c.namespace("Squarespace.ContentModel"),c.Squarespace.ContentModel.VideoBlock=c.Base.create("VideoBlockModel",c.SQS.LayoutEngine.BlockModel.Video,[],{},{ATTRS:{customThumb:{setter:function(b){var t=c.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Models.ContentItem");if(c.Lang.isString(b))return new t({id:b});if(c.instanceOf(b,t))return b}}}})},"2.0",{requires:["base","model","@sqs/layout-engine/block-model-video","@sqs/layout-engine/content-item-content-item","squarespace-damask-context-globals"]})},678765:function(){YUI.add("squarespace-block-video",function(c){c.namespace("Squarespace.Block");var b=c.Squarespace.Block.Video=c.Base.create("block-video",c.SQS.LayoutEngine.Block.Video,[c.Squarespace.Block.PremiumBlockMixin],{_renderSuccess:function(t){if(!t.html){this._renderError(),console.warn("Error rendering video block:",t);return}if(b.superclass._renderSuccess.call(this,t),c.config.win.location.protocol.startsWith("https")){var l=this.get("contentBox").one("object embed");l&&l.setAttribute("src",l.getAttribute("src").replace("http://","https://"))}this._pluginVideoLoader(),this._pluginNativeVideoLoader()},_pluginVideoLoader:function(){var t=this.get("contentBox").one(".sqs-video-wrapper");t&&!t.hasPlugin(c.Squarespace.VideoLoader.NS)&&t.plug(c.Squarespace.VideoLoader)},_pluginNativeVideoLoader:function(){c.config.win.Squarespace.initializeNativeVideo(c,{parentElement:this.get("contentBox")})},refreshVideo:function(){var t=this.get("contentBox").one(".sqs-video-wrapper");t&&t.videoloader.refreshVideo()}},{MODEL:c.Squarespace.ContentModel.VideoBlock,ATTRS:{editor:{value:c.Squarespace.Block.Editor.Schema}}})},"2.0",{requires:["base","@sqs/layout-engine/block-video","squarespace-premium-block-mixin","squarespace-video-loader","squarespace-block-video-model","squarespace-block-schema-editor"]})},537757:function(c,b,t){"use strict";var l=t(743642),d=t(723796),o=t(79306),e=t(861655),a=t(663634),r=t(166455),s=t.n(r),n=t(337061),i=t(938077),u=t(210750),h=t.n(u),g=t(273564),p=t(787592),f=t(155533),m=t(86878),_=t(927167),v=t(227694),E=t(441574),S=t(510812),y=t(134521),C=t.n(y),O=t(86851),A=t(174161),I=t(970671),D=t(969145),T=t(762005),B=t(567713),N=t(181124),P=t(338465),x=t(482053),R=t(619506),w=t(199297),k=t(780308),q=t(922357),F=t(766400),z=t(239718),j=t(967552),X=t(538312),J=t(824687);const ie=st=>{let{onClick:ve}=st;const{T:mt}=(0,J.Q)(),[Ii,Ei]=(0,A.useState)(!1);return A.createElement(j.Z.Solid,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",gap:3,sx:{cursor:"pointer","&:hover":{backgroundColor:"transparent"}},onClick:ve,onMouseEnter:()=>Ei(!0),onMouseLeave:()=>Ei(!1)},A.createElement(z.Z,{sx:{backgroundColor:Ii?"gray.800":"gray.900",borderRadius:"50px",p:1}}),A.createElement(X.Z.Body,{sx:{m:0}},A.createElement(mt,{project:"apps.App"},"Add a product")))};var ce=t(408635),pe=t(119978),ye=t(925184),Ae=t(436715);const ke=st=>{let{blockId:ve,hasSavedProducts:mt,onRequestClose:Ii}=st;const{T:Ei}=(0,J.Q)(),Ci=()=>{localStorage.setItem("PRODUCT_BLOCK_EDITOR_AUTOFOCUS_SEARCH_INPUT","true"),(0,Ae.tB)(ve)},Xi=()=>{(0,pe.F1)({objectValue:"website.components.product",objectDisplayName:"create-new-product"}),document.dispatchEvent(new CustomEvent(w._k,{detail:{productId:void 0,entrypoint:ye.Q.PRODUCT_BLOCK,modalProps:{lockFocusOptions:{disabled:!1,autoFocus:!0,returnFocus:!1}}}}))};return A.createElement(A.Fragment,null,A.createElement(R.Z.Item,{isDisabled:!mt,onClick:()=>{Ci(),Ii(!1)},tabIndex:"0"},A.createElement(x.Z,{alignItems:"center",gap:2},A.createElement(ce.Z,{color:mt?void 0:"gray.600"}),A.createElement(Ei,{project:"apps.App"},"Add existing product"))),A.createElement(R.Z.Item,{onClick:()=>{Xi(),Ii(!1)},tabIndex:"0"},A.createElement(x.Z,{alignItems:"center",gap:2},A.createElement(z.Z,null),A.createElement(Ei,{project:"apps.App"},"Create new product"))))},Ie=st=>{let{blockId:ve,mountAt:mt,onChange:Ii}=st;const{isLoading:Ei,data:Ci,refetch:Xi}=(0,q.Z)(k.S),Fn=(0,A.useRef)();(0,A.useEffect)(()=>{const at=()=>{Fn.current&&document.removeEventListener(w.Fh,Fn.current)};return at(),Fn.current=Nt=>{const{productId:ri}=Nt.detail;Ii(ri),Xi()},document.addEventListener(w.Fh,Fn.current),at},[Ii,Xi]);const re=(0,A.useRef)(),{platform:We}=(0,A.useContext)(B.Z.Context),yt=(0,n.Ze)(i.Hlz);(0,A.useEffect)(()=>{var at;(at=re.current)===null||at===void 0||at.call(re,!1)},[yt]);const _t=(0,n.Ze)(i.zAH);return(0,A.useEffect)(()=>{if(_t===ve){var at;(at=re.current)===null||at===void 0||at.call(re,!1)}},[ve,_t]),A.createElement(R.Z.PopOver,{position:"bottom",offset:{x:0,y:10},mountAt:mt,returnFocus:!1,renderTrigger:at=>{let{toggleActionListOpen:Nt}=at;return re.current=Nt,A.createElement(ie,{onClick:()=>{We!=="mobile"&&Nt()}})}},at=>{let{onRequestClose:Nt}=at;return A.createElement(P.Z,{py:1},A.createElement(x.Z,{as:"ul",bg:"white",flexDirection:"column"},Ei?A.createElement(R.Z.Item,{display:"flex",justifyContent:"center",width:"230px",isDisabled:!0},A.createElement(F.Z,null)):A.createElement(ke,{blockId:ve,hasSavedProducts:Ci,onRequestClose:Nt})))})},me=st=>A.createElement(I.Z,null,A.createElement(B.Z.Provider,null,A.createElement(N.Z,{container:st.mountAt.ownerDocument.head,cacheKey:"product-block-action-menu"},A.createElement(D.Z.Provider,{theme:T.rosetta.lightest},A.createElement(n.ZP,null,A.createElement(Ie,st))))));var Ee=t(134798),Se=t(594127),lt=t(27226),Lt=t(419467),Pt=t(225378),Ce=t(845076),je=t.n(Ce),Le=t(495037),ci=t(120733),Jt=t(317527),Ft=t(714487),ti=t(583010),gi=t(377496),qt=t.n(gi);const Mt=(0,Ft.t)("Remove Block",null,{project:"src.seven-one"}),Vt=st=>{let{onRemoveBlock:ve}=st;const mt=()=>{(0,ti.Z)({onConfirm:()=>{ve==null||ve()}})};return A.createElement(ci.Z.Action,{icon:A.createElement(Jt.Z,{color:"red.300"}),label:Mt,onClick:mt})},Ti=function(){let st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{optionId:qt().REMOVE_BLOCK,ToolbarOptionComponent:ve=>A.createElement(Vt,{...ve,...st})}};var Ni=t(875864),ui=t(208935),gn=t(853522),zi=t(797400),Mn=t(175424),Zt=t(897820),Te=t(35045),qe=t(150732),xt=t(916661),Gt=t(188405),Li=t(932465),mi=t(472575),le=t(976003),_e=t.n(le),Me=t(949642),et=t(58553),$t=t(260175),Ki=t(352635),pi=t(120497);const Mi="text-block-rte-input",vn="#ffffff",ln="highlight",Sn=(st,ve)=>{ve.stopPropagation()},an={[qt().AI_WRITER]:Le.aiWriterOption,[qt().BLOCKQUOTE]:Le.blockquoteOption,[qt().BOLD]:Le.boldOption,[qt().BULLET_LIST]:Le.bulletListOption,[qt().CLEAR_FORMATTING]:Le.clearFormattingOption,[qt().DIVIDER]:Le.dividerOption,[qt().INDENTATION]:Le.indentationOption,[qt().ITALIC]:Le.italicOption,[qt().LINK]:Le.linkOption,[qt().NUMBERED_LIST]:Le.numberedListOption,[qt().STRIKETHROUGH]:Le.strikethroughOption,[qt().SCALED_TEXT]:Le.scaledTextOption,[qt().TEXT_ALIGN]:Le.textAlignOption,[qt().TEXT_COLOR]:Le.textColorOption,[qt().TEXT_STYLE]:Le.textStyleOption,[qt().TEXT_HIGHLIGHT]:Le.textHighlightOption,[qt().UNDOREDO]:Le.undoRedoOption,[qt().REMOVE_BLOCK]:Ti,[qt().UNDERLINE]:Le.underlineOption},dn=[qt().TEXT_HIGHLIGHT,qt().SCALED_TEXT,qt().TEXT_COLOR],W=st=>{if(typeof st!="string"&&typeof st!="number"||!(st in an))throw new Error(`"${st}" is not a valid editor option`);const ve=(0,$t.i)(Ki.breakpoints).platform==="mobile",mt="MOBILEAPP"in window;return!(st===qt().AI_WRITER&&(ve||mt)||dn.includes(st)&&!xt.Z.isSevenOne()||st===qt().REMOVE_BLOCK&&!(ve||mt))},Zi=st=>{let{blockContent:ve,blockWidget:mt,onUpdate:Ii,rteConfig:Ei,node:Ci,blockModel:Xi}=st;var Fn;const[re,We]=(0,A.useState)(ve),[yt,_t]=(0,A.useState)(!1),at=(0,A.useRef)(null),Nt=(0,A.useRef)(null),ri=(0,A.useRef)(null),Qt=mt==null?void 0:mt.get("id"),{editorOptions:Ai,placeholder:tn,trackingProductArea:An,trackingProductAreaLevel2:rs}=Ei,Oe=(0,qe.$)({trackingProductArea:An,trackingProductAreaLevel2:rs}),{siteTitle:rt}=Te.default.getState(),It=(0,n.Ze)(i.JdN),Bt=(0,n.Ze)(i.Ouw),yi=(0,n.Ze)(i.Pr$),nn=Ge=>{We(Ge),Ii(Ge)},vs=(0,Lt.debounce)(nn,300);(0,A.useEffect)(()=>{if(Bt!==Qt){var Ge,Dt;!((Dt=Nt.current)===null||Dt===void 0||(Ge=Dt.commands)===null||Ge===void 0)&&Ge.clearAllTempBackgroundSelection&&Nt.current.commands.clearAllTempBackgroundSelection(),_t(!1)}},[Bt,Qt]);const Gs=Gt.I4(Gt.gk(Ci??null)),wa=(0,n.Ze)(Ge=>(0,gn.DZ)(Ge,Gs)),Ra=(Fn=mt.get("containerStyles"))===null||Fn===void 0?void 0:Fn.backgroundEnabled,Ko=(0,A.useCallback)(Ge=>{const Dt=(0,i.XNs)((0,n.d6)()),St=(0,i.$jS)((0,n.d6)()),kt=(0,i.XS9)((0,n.d6)(),Gs),vi=St.find(li=>li.themeName===kt);if(!vi)return vn;const Yt=Ge==null?void 0:Ge.color;if(!Yt||Yt.type===Ni.$.THEME_COLOR){const li=Ra?"text-highlight-color-on-background":"text-highlight-color",Qi=(0,zi.gM)(li,vi)||(0,zi.Ir)(li);return(0,zi._F)(Qi,Dt)}return(0,zi.lA)(Yt,Dt)},[Ra,Gs]),mo=(0,A.useCallback)(Ge=>Ge==null?void 0:Ge.reduce((Dt,St)=>{const kt=Ko(St);return Dt[St==null?void 0:St.id]={...St,color:kt},Dt},{}),[Ko]),el=Xi==null?void 0:Xi.get("textAttributes"),[vo,_o]=(0,A.useState)(mo(el)),oo=(0,A.useCallback)((Ge,Dt)=>{const St=new Map;return Ge.forEach(kt=>{St.set(kt.id,kt)}),Dt.forEach(kt=>{St.set(kt.id,kt)}),Array.from(St.values())},[]),ro=(0,A.useCallback)(Ge=>{const Dt=Xi==null?void 0:Xi.get("textAttributes"),kt=Object.values(Ge).map(Yt=>{var li;return{...Yt,color:!((li=Yt.color)===null||li===void 0)&&li.type?Yt.color:(0,zi.GJ)(Yt.color)}}),vi=oo(Dt,kt);Xi==null||Xi.set("textAttributes",vi,{silent:!0})},[Xi,oo]),Go=(0,A.useCallback)((Ge,Dt,St,kt)=>{Nt.current=St.view,ri.current=kt;const{state:vi,dispatch:Yt}=St.view;let li=vi.tr;const{schema:Qi,selection:en}=vi,{from:Wi,to:wn}=en;if(Wi<0||wn>vi.doc.content.size)return!1;const qn=Dt==null?void 0:Dt.id,Jn=Xi==null?void 0:Xi.get("textAttributes");let ns=Jn;if(Ge===null){ns=Jn.filter(Vi=>{let{id:is}=Vi;return is!==qn});const ss=[];vi.doc.nodesBetween(Wi,wn,(Vi,is)=>{var Kn,us;return Vi.type.name===(Qi==null||(us=Qi.nodes)===null||us===void 0||(Kn=us[ln])===null||Kn===void 0?void 0:Kn.name)&&ss.push({node:Vi,pos:is,end:is+Vi.nodeSize}),!0}),ss.sort((Vi,is)=>is.pos-Vi.pos);for(const{node:Vi,pos:is,end:Kn}of ss)li=li.replaceWith(is,Kn,Vi.content)}const Ws=mo(ns),$n=li.setMeta(kt,{textAttributes:{...Ws}});Yt&&Yt($n)},[Xi,mo]),aa=(0,A.useMemo)(()=>{const Ge=St=>{switch(St){case qt().AI_WRITER:return(0,Le.aiWriterOption)({brandName:rt,modalClassName:ui.NONINTERACTIVE_CLASSNAME,onGeneratedTextUpdate:()=>{}});case qt().TEXT_COLOR:return(0,Le.textColorOption)({colorPalette:xt.Z.isSevenOne()?It:void 0,customClassName:"sqsrte-text-color--custom",colorPickerContainerClassName:ui.BLOCK_FOCUS_IGNORE_CLASSNAME});case qt().LINK:var kt;return(0,Le.linkOption)({popOverConfig:{mountAt:(kt=(0,Mn.wo)())===null||kt===void 0?void 0:kt.body,contextProvider:vi=>{let{children:Yt}=vi;return A.createElement(Pt.o,{frameCacheKey:"rte-popover"},Yt)}},modalClassName:ui.NONINTERACTIVE_CLASSNAME});case qt().TEXT_HIGHLIGHT:return(0,Le.textHighlightOption)({textAttributes:{...vo},node:Ci,onChange:Go,updateBlockModelTextAttributes:ro,ModalComponent:Li.Z});case qt().TEXT_STYLE:return(0,Le.textStyleOption)({className:ui.NONINTERACTIVE_CLASSNAME});case qt().UNDOREDO:return(0,Le.undoRedoOption)({hideOptionsInToolbar:xt.Z.isSevenOne()});case qt().REMOVE_BLOCK:return Ti({onRemoveBlock:()=>{(0,n.GE)(Zt.y8({sectionId:Gs,blockIds:[Qt],isKeyboard:!1}))}});case qt().UNDERLINE:return(0,Le.underlineOption)({hideOptionInToolbar:!0});case qt().TEXT_ALIGN:return(0,Le.textAlignOption)({className:ui.BLOCK_FOCUS_IGNORE_CLASSNAME});default:return an[St]()}};return Ai.filter(W).map(Ge)},[rt,It,Ai,Go,Ci,ro]),ha=(0,A.useCallback)(()=>{(0,n.GE)(Zt.D7(Qt))},[Qt]);(0,A.useEffect)(function(){yt&&(ha(),(0,n.GE)((0,Zt.AZ)()))},[yt,ha]),(0,A.useEffect)(function(){if(!(0,pi.Z)())return;const Dt=(0,Mn.wo)(),St=Dt==null?void 0:Dt.querySelector(`.${(0,Me.bH)(Qt)}`);if(!St)return;const kt=Dt==null?void 0:Dt.querySelector(`.${(0,Me.oz)(Qt)}`);yt?(St.style.transform="translate(0px, 0px) rotate(0deg) scale(1, 1) skewX(0deg) skewY(0deg)",St.style.transformOrigin="50% 50%",St.style.opacity="1",kt&&(kt.style.opacity="0.3")):(St.style.transform="",St.style.transformOrigin="",St.style.opacity="",kt&&(kt.style.opacity=""))},[yt,Qt]);const rr=(Ge,Dt)=>{Dt.stopPropagation();const St=Bt===Qt;if(St&&!yt){var kt;ha(),_t(!0),yi==null||(kt=yi.blockEditor)===null||kt===void 0||kt.closeEditor()}else if(!St){const vi=Zt.lT;(0,n.GE)(vi(Qt))}},He=Ge=>{const Dt=Bt===Qt;Dt&&Ge&&ha(),_t(Dt)};(0,A.useEffect)(()=>{const Ge=(vi,Yt)=>{vi===Qt&&We(Yt)},Dt=vi=>{if(vi===Qt){var Yt;_t(!0);const li=at==null||(Yt=at.current)===null||Yt===void 0?void 0:Yt.querySelector(".tiptap");li==null||li.focus()}},St=(0,mi.QA)(mi.Vq,Dt),kt=(0,mi.QA)(mi.BX,Ge);return()=>{St(),kt()}},[Qt]),(0,A.useEffect)(()=>{const Ge=()=>{if(Nt.current){var vi;const li=(vi=Nt.current)===null||vi===void 0?void 0:vi.view;if(li){var Yt;(Yt=li.domObserver)===null||Yt===void 0||Yt.stop()}}},Dt=()=>{if(Nt.current){var vi;const li=(vi=Nt.current)===null||vi===void 0?void 0:vi.view;if(li){var Yt;(Yt=li.domObserver)===null||Yt===void 0||Yt.start()}}},St=(0,mi.QA)(mi.ow,Ge),kt=(0,mi.QA)(mi.NT,Dt);return()=>{St(),kt()}},[Nt]),(0,A.useEffect)(()=>{if(!Xi)return;const Ge=()=>{if(Xi.lastChange&&Xi.lastChange.textAttributes){const St=Xi.get("textAttributes"),kt=mo(St);if(!_e()(vo,kt)&&(_o(kt??{}),Nt.current&&ri.current)){const{state:vi,dispatch:Yt}=Nt==null?void 0:Nt.current;if(!vi||!Yt)return;const li=vi.tr.setMeta(ri.current,{textAttributes:{...kt}});Yt&&Yt(li)}}},Dt=Xi.after("change",Ge);return()=>{Dt&&Dt.detach()}},[Xi,mo,vo]),(0,A.useEffect)(()=>{const Ge=Nt.current;if(!Ge||!Ge.view)return;const{state:Dt,dispatch:St}=Ge.view;if(!Dt||!St)return;const kt=ri.current||Le.TextAttributesPluginKey,vi=Dt.tr.setMeta(kt,{textAttributes:{...vo}});St(vi)},[vo]);const $e=Ge=>A.createElement(Pt.o,{frameCacheKey:"text-block-rte-toolbar"},A.createElement(Le.UnstyledInput,{...Ge,"data-id":Mi,className:je()(ui.DISABLE_YUI_DRAG_CLASSNAME,ui.NONINTERACTIVE_CLASSNAME,ui.BLOCK_FOCUS_IGNORE_CLASSNAME)})),gt=Ge=>{Nt.current||(Ge.on("transaction",()=>{mt==null||mt.fire("block:renderedAfterDataChange")}),Nt.current=Ge,(0,mi.I6)(mi.qK,Qt))};return A.createElement(Le.RichTextEditor,{placeholder:tn??(0,Ft.t)("Write here...",null,{project:"src.seven-one"}),inputRef:at,handleDOMEvents:{click:Sn,mousedown:rr,dblclick:Sn},baseZIndex:window.Y.Squarespace.DIALOG_ZINDEX_BASE,content:re,onUpdate:vs,renderInput:$e,editorOptions:aa,onEditorReady:gt,toolbarProps:{open:yt,onOpenChange:He,className:je()(ui.DISABLE_YUI_DRAG_CLASSNAME,ui.NONINTERACTIVE_CLASSNAME,ui.BLOCK_FOCUS_IGNORE_CLASSNAME),shiftPadding:{top:parseInt(Ki.space[10],10)+parseInt(Ki.space[2],10)},offset:{mainAxis:parseInt(wa?Ki.space[3]:Ki.space[5],10),crossAxis:wa?0:-1*parseInt(Ki.space[3],10)},placement:"top-start"},trackingPayload:Oe})},Zn=st=>A.createElement(D.Z.Provider,{theme:T.rosetta.default},A.createElement(et.Z,null,A.createElement(n.ZP,null,A.createElement(Zi,st))));function pn(st,ve){if(ve.has(st))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yi(st,ve){return ve.get?ve.get.call(st):ve.value}function Un(st,ve,mt){if(!ve.has(st))throw new TypeError("attempted to "+mt+" private field on non-instance");return ve.get(st)}function qi(st,ve){var mt=Un(st,ve,"get");return Yi(st,mt)}function ls(st,ve,mt){pn(st,ve),ve.set(st,mt)}function ct(st,ve,mt){return ve in st?Object.defineProperty(st,ve,{value:mt,enumerable:!0,configurable:!0,writable:!0}):st[ve]=mt,st}const{setJsonPointerValue:fe,getJsonPointerValue:it}=O.jsonPointerUtils;function wi(st){let{maybeNodeToReplace:ve,maybeNodeToAppendTo:mt}=st;if(!ve&&!mt)throw new Error("TextEditor must be given a Node to either replace or mount within");if(!ve&&mt===!0)return{nodeToAppendTo:document.body};if(!ve&&mt&&typeof mt!="boolean")return{nodeToAppendTo:Fi(mt)};if(ve)return{nodeToReplace:Fi(ve)};throw new Error("Unexpected parameters given to TextEditor - cannot determine how to mount RTE")}function Fi(st){return"getDOMNode"in st?st.getDOMNode():st}var fn=new WeakMap;class ki{_getMountNode(ve,mt){if(mt){var Ii;const Ei=mt.get("contentBox");return Ei==null||(Ii=Ei.getDOMNode())===null||Ii===void 0?void 0:Ii.querySelector(ve)}}_mountRTE(){if(!this._parentNode&&!this._replacedNode)throw new Error("No element given to mount RTE with");if(this._replacedNode){if(this._rteNode.className=this._replacedNode.className,!this._replacedNode.parentElement)throw new Error("Can not mount RTE - `replacedNode` has no parent element");this._replacedNode.parentElement.replaceChild(this._rteNode,this._replacedNode)}else this._parentNode&&this._parentNode.appendChild(this._rteNode)}_replaceHtmlNode(){if(this._replacedNode){const mt=this._rteNode.parentElement;if(!this._replacedNode.isConnected){var ve;const Ii=((ve=this._blockModel)===null||ve===void 0?void 0:ve.get("html"))??"";this._replacedNode.innerHTML=Ii}mt&&mt.replaceChild(this._replacedNode,this._rteNode)}else this._parentNode&&this._parentNode.contains(this._rteNode)&&this._parentNode.removeChild(this._rteNode)}_assignPropsFromConstructorParams(ve){let{blockWidget:mt,blockModel:Ii,editorConfig:Ei}=ve;this._blockWidget=mt,this._blockModel=Ii,this._blockId=mt==null?void 0:mt.get("id"),this._editorConfig=Ei}getNode(){return this._rteNode}onContentUpdate(ve){if(this._editorConfig&&this._blockId){const mt=this._editorConfig.jsonPointer,Ii=it(ve,mt[0]);(0,mi.I6)(mi.BX,this._blockId,Ii)}}showBlockContentEditor(){this._blockId&&(0,mi.I6)(mi.Vq,this._blockId)}isEmpty(){var ve;return!(!((ve=this._blockModel)===null||ve===void 0)&&ve.get("html"))}_initializeToolbar(){this._blockWidget&&this._editorConfig&&(this.toolBarReactRoot=(0,Se.createRoot)(this._rteNode),this.toolBarReactRoot.render(A.createElement(Zn,{blockContent:this._content,blockModel:this._blockModel,blockWidget:this._blockWidget,onUpdate:qi(this,fn),rteConfig:this._editorConfig,node:this._rteNode})))}destroy(){try{var ve;this._replaceHtmlNode(),(ve=this.toolBarReactRoot)===null||ve===void 0||ve.unmount()}catch{}}constructor(ve){ct(this,"_ownerDocument",void 0),ct(this,"_rteNode",void 0),ct(this,"_toolbarMountNode",null),ct(this,"_replacedNode",void 0),ct(this,"_parentNode",void 0),ct(this,"_content",void 0),ct(this,"_blockId",void 0),ct(this,"toolBarReactRoot",void 0),ct(this,"_blockWidget",void 0),ct(this,"_blockModel",void 0),ct(this,"_editorConfig",void 0),ls(this,fn,{writable:!0,value:_t=>{if(this._blockWidget&&this._blockModel&&this._editorConfig){const at=this._editorConfig.jsonPointer,Nt=this._blockModel.toJSON(),ri=at.reduce((Qt,Ai)=>fe(Qt,Ai,_t),Nt);this._blockModel.setAttrs(ri,{silent:!1,source:"RichTextEditor"}),this._blockWidget.get("isNewBlock")&&this._blockWidget.set("isNewBlock",!1),this._blockWidget.fire("widget:contentUpdate")}}}),this._assignPropsFromConstructorParams(ve);const{blockWidget:mt,blockModel:Ii,editorConfig:Ei,render:Ci=!1}=ve,{targetSelector:Xi}=Ei,Fn=this._getMountNode(Xi,mt),{nodeToAppendTo:re,nodeToReplace:We}=wi({maybeNodeToAppendTo:Ci,maybeNodeToReplace:Fn});if(this._replacedNode=We??null,this._parentNode=re??null,!(We??re))throw new Error("No node was given to mount RTE to");this._ownerDocument=document.body.ownerDocument,this._rteNode=this._ownerDocument.createElement("DIV"),this._content=(Ii==null?void 0:Ii.get("html"))??"",this._mountRTE(),this._initializeToolbar()}}var un=t(603382),Xn=t(190602),ne=t(233284);function Xe(st){let{componentContainer:ve,mountNodeSelector:mt,onChange:Ii}=st;const Ei=ve.querySelector(mt),Ci=(0,A.useId)();return Ei?(0,ne.createPortal)(A.createElement(Xn.Z,{fieldId:Ci,handleChange:Xi=>{let{id:Fn}=Xi;return Ii(Fn)}}),Ei):null}function Qe(st,ve){if(ve.has(st))throw new TypeError("Cannot initialize the same private elements twice on an object")}function wt(st,ve){return ve.get?ve.get.call(st):ve.value}function ai(st,ve,mt){if(ve.set)ve.set.call(st,mt);else{if(!ve.writable)throw new TypeError("attempted to set read only private field");ve.value=mt}}function Hi(st,ve,mt){if(!ve.has(st))throw new TypeError("attempted to "+mt+" private field on non-instance");return ve.get(st)}function Xt(st,ve){var mt=Hi(st,ve,"get");return wt(st,mt)}function we(st,ve,mt){Qe(st,ve),ve.set(st,mt)}function Ke(st,ve,mt){var Ii=Hi(st,ve,"set");return ai(st,Ii,mt),mt}function ge(st,ve,mt){if(!ve.has(st))throw new TypeError("attempted to get private field on non-instance");return mt}function zt(st,ve){Qe(st,ve),ve.add(st)}function Ht(st,ve,mt){return ve in st?Object.defineProperty(st,ve,{value:mt,enumerable:!0,configurable:!0,writable:!0}):st[ve]=mt,st}const bt=d.Em.createLogger("block-website-component-editor","#0A5EFA"),he=150,Re=16,Wt="RichTextEditor",_i="InlineImageUploader",fi="ProductBlockActionMenu";var Ri=new WeakMap,Be=new WeakMap,bi=new WeakMap,Bi=new WeakMap,Tn=new WeakMap,Ln=new WeakMap,kn=new WeakMap,hi=new WeakMap,di=new WeakMap,Cn=new WeakMap,Cs=new WeakMap,Qn=new WeakMap,Rs=new WeakMap,cs=new WeakMap,Ea=new WeakSet,Ls=new WeakMap,Ys=new WeakSet,ea=new WeakMap,Fa=new WeakSet,Ps=new WeakSet,Us=new WeakSet,As=new WeakSet,Wa=new WeakSet,ta=new WeakMap,Ma=new WeakSet,Ha=new WeakMap,Qa=new WeakSet,Po=new WeakSet,ao=new WeakSet,Ho=new WeakSet,Mo=new WeakSet,Vo=new WeakSet,wo=new WeakSet,ya=new WeakSet,ua=new WeakSet,Sa=new WeakSet,Ro=new WeakSet,sa=new WeakSet;class go{handleOnChange(ve,mt){Xt(this,Cn).call(this,ve)}async destroy(){var ve,mt;Xt(this,Tn)&&(Xt(this,Tn).call(this),Ke(this,Tn,null)),Xt(this,Ln)&&(Xt(this,Ln).call(this),Ke(this,Ln,null)),(ve=Xt(this,kn))===null||ve===void 0||ve.detach(),(mt=Xt(this,hi))===null||mt===void 0||mt.detach(),ge(this,ao,In).call(this);const{componentWillUnmount:Ii}=await ge(this,Ps,Ds).call(this),Ei=ge(this,As,bn).call(this);return Ii({value:Ei})}async renderBlock(ve){var mt,Ii;const[{componentDidUpdate:Ei},{canceled:Ci=!1}={}]=await Promise.all([ge(this,Ps,Ds).call(this),Xt(this,Cs).call(this)]);Ci||(Ei(ve),!((Ii=this.props.editorSettings)===null||Ii===void 0||(mt=Ii.contentEditors)===null||mt===void 0)&&mt.length&&ge(this,Po,ts).call(this))}onYUIModelUpdate(ve){return Ke(this,Ha,!0),this.props.updateYUIModel(ve)}getContentEditors(){return Xt(this,bi)}async getEditorConfig(){const ve=async()=>{const[mt,Ii,Ei,Ci,Xi]=await Promise.all([ge(this,ya,po).call(this),ge(this,ua,Ks).call(this),ge(this,Sa,xn).call(this),ge(this,sa,or).call(this),ge(this,Ro,Ns).call(this)]),Fn=typeof Ei=="object"?O.schemaPaths.generateSchemaPathToObjectPathMap(Ei):void 0,re=Array.isArray(mt)?{uiSchema:mt,routes:{}}:mt,We=(0,_.Z)(this.props.definitionName);let yt;if(this.props.definitionName==="website.components.form"){const at=e.blocks.form.handlers;yt={onLoad:at.onLoad,onSave:async(Nt,ri,Qt,Ai)=>{var tn;const An=Qt.toJSON().id;await((tn=at.onSave)===null||tn===void 0?void 0:tn.call(at,Nt,ri,Qt,Ai)),un.Z.clearCachedRenderContextForComponent(An),Qt.fire("block:renderedAfterDataChange")},onChange:async(Nt,ri,Qt)=>{const Ai=await at.onChange(Nt,ri,Qt);if(Ai){var tn;Ci==null||(tn=Ci.onChange)===null||tn===void 0||tn.call(Ci,Ai),Nt.fire("block:renderedAfterDataChange")}}}}return this.props.buildBlockEditorConfig({...re,schema:Ei,itemDefaults:Ii,jsonSchemaToObjectPathMap:Fn,resolvers:We,handlers:yt,componentFormHandlers:Xi,environmentVariables:{websiteComponent:{isFeatureGated:(0,g.shouldShowFeatureGateForFeature)(this.props.premiumFeature)}}})};return Ke(this,Bi,Xt(this,Bi)??ve()),Xt(this,Bi)}async forceCacheHandlers(){Xt(this,ea)||await ge(this,Ps,Ds).call(this)}constructor(ve){var mt,Ii,Ei;zt(this,Ea),zt(this,Ys),zt(this,Fa),zt(this,Ps),zt(this,Us),zt(this,As),zt(this,Wa),zt(this,Ma),zt(this,Qa),zt(this,Po),zt(this,ao),zt(this,Ho),zt(this,Mo),zt(this,Vo),zt(this,wo),zt(this,ya),zt(this,ua),zt(this,Sa),zt(this,Ro),zt(this,sa),Ht(this,"props",void 0),we(this,Ri,{writable:!0,value:void 0}),we(this,Be,{writable:!0,value:void 0}),we(this,bi,{writable:!0,value:void 0}),we(this,Bi,{writable:!0,value:void 0}),we(this,Tn,{writable:!0,value:void 0}),we(this,Ln,{writable:!0,value:void 0}),we(this,kn,{writable:!0,value:void 0}),we(this,hi,{writable:!0,value:void 0}),we(this,di,{writable:!0,value:void 0}),we(this,Cn,{writable:!0,value:void 0}),we(this,Cs,{writable:!0,value:void 0}),we(this,Qn,{writable:!0,value:void 0}),we(this,Rs,{writable:!0,value:void 0}),we(this,cs,{writable:!0,value:void 0}),we(this,Ls,{writable:!0,value:void 0}),we(this,ea,{writable:!0,value:void 0}),we(this,ta,{writable:!0,value:void 0}),we(this,Ha,{writable:!0,value:void 0}),this.props=ve,Ke(this,Ri,!1),Ke(this,bi,[]),Ke(this,Tn,null),Ke(this,Ln,null),Ke(this,Cn,C()((Ci,Xi)=>{const{componentWillUpdate:Fn}=ge(this,Fa,da).call(this),re={prevValue:Xt(this,Be),value:Ci};Ke(this,Be,Ci),Xi||this.onYUIModelUpdate(Ci),Xt(this,bi).length&&ge(this,Ho,jo).call(this,Ci),Fn(re)&&this.renderBlock(re)},Re)),Ke(this,Cs,h()(()=>this.props.requestRerender(),he,{leading:!0})),Ke(this,Qn,async Ci=>{const Xi=(0,i.MIi)((0,n.d6)());if(this.props.currentBlockId!==Xi)return;const{formDidNavigate:Fn}=await ge(this,Ps,Ds).call(this);Fn&&Fn({route:Ci})}),Ke(this,Rs,async Ci=>{const{editorDidToggleEditModePreview:Xi}=await ge(this,Ps,Ds).call(this);Xi&&Xi({isPreview:Ci}),Ci?Ke(this,di,(0,mi.QA)(mi.x7,Xt(this,cs))):(mt=Xt(Ei=Ii=this,di))===null||mt===void 0||mt.call(Ii)}),Ke(this,cs,async()=>{const{editorDidToggleEditModePreview:Ci}=await ge(this,Ps,Ds).call(this);Ci&&Ci({isPreview:!0})}),Ke(this,Ls,null),Ke(this,ea,null),Ke(this,ta,(Ci,Xi)=>{Ci===Ee.Z.PAGE&&Xi!==Ci&&ge(this,Po,ts).call(this)}),Ke(this,Ha,!1),this.props=ve,Ke(this,kn,this.props.attachDidMountHandler(()=>ge(this,Ea,fs).call(this))),Ke(this,Be,ge(this,As,bn).call(this)),Ke(this,Tn,(0,n.gH)(i.SY8,Xt(this,Qn).bind(this))),Ke(this,Ln,(0,n.gH)(i.ML5,Xt(this,Rs))),Xt(this,Rs).call(this,!1),(0,n.gH)(i.zAH,ge(this,Ma,Ts).bind(this)),(0,n.gH)(i.fPO,Xt(this,ta)),ge(this,Qa,Fs).call(this)}}async function fs(){Ke(this,Ri,!0);const st=ge(this,As,bn).call(this),{componentDidMount:ve}=await ge(this,Ps,Ds).call(this);ve({value:st}),this.renderBlock({value:st,prevValue:{}})}async function Ct(){const[st,ve]=await Promise.all([ge(this,Us,Vn).call(this),this.props.getVisitorController()]);return(0,E.fl)(st,ve)}function da(){if(!Xt(this,ea))throw new Error("No handlers were available");return Xt(this,ea)}async function Ds(){return Ke(this,Ls,Xt(this,Ls)??ge(this,Ys,Ct).call(this)),Ke(this,ea,await Xt(this,Ls)),Xt(this,Ls)}async function Vn(){try{return v.Z.loadHandlersJs(this.props.definitionName)}catch{ge(this,Wa,hn).call(this,new Error("handlersJs"))}}function bn(){return this.props.getValue()}function hn(st,ve){const mt=this.props.definitionName;p.$e(function(Ii){Ii.setTag("owner",s().CONTENT_RENDERING),Ii.setTag("definitionName",mt),ve&&Ii.setContext("additionalInfo",ve),p.Tb(st)}),bt(st.message,mt,ve)}async function Ts(st){if(st)return;const ve=await ge(this,Ps,Ds).call(this),mt=ge(this,As,bn).call(this);ve.componentDidDrag({value:mt})}function Fs(){Ke(this,hi,this.props.attachAfterChangeHandler(st=>{if(Xt(this,Ha)||Xt(this,Ri)===!1||st.source===Wt){Ke(this,Ha,!1);return}Xt(this,Cn).call(this,ge(this,As,bn).call(this),!0)}))}function ts(){var st;ge(this,ao,In).call(this);const ve=((st=this.props.editorSettings)===null||st===void 0?void 0:st.contentEditors)||[];for(const mt of ve)if(mt.type===Wt){const Ii=ge(this,Mo,Ja).call(this,mt.editorConfig);Xt(this,bi).push(Ii)}else mt.type===_i?Xt(this,bi).push(ge(this,Vo,Bs).call(this,mt.editorConfig)):(0,a.cr)("product-block-empty-state-contextual-menu")&&mt.type===fi&&Xt(this,bi).push(ge(this,wo,ms).call(this,mt.editorConfig))}function In(){Xt(this,bi).forEach(st=>st.destroy()),Ke(this,bi,[])}function jo(st){for(const ve of Xt(this,bi))ve.onContentUpdate(st);this.props.fireContentUpdated()}function Ja(st){const ve=this.props.buildRTEOptions(st);return new ki(ve)}function Bs(st){let ve,mt=null;const Ii=`inline-image-uploader-root--${st.id??(0,o.v4)()}`,Ei=()=>{mt||(ve||(ve=document.createElement("div"),ve.id=Ii,document.body.appendChild(ve)),mt=(0,Se.createRoot)(ve));const Xi=this.props.getContentContainer();mt.render(A.createElement(Xe,{componentContainer:Xi,mountNodeSelector:st.nodeSelector,onChange:Fn=>{const re=O.jsonPointerUtils.setJsonPointerValue({},st.jsonPointer,Fn??null);this.props.updateYUIModel(re)}}))},Ci={destroy(){mt==null||mt.unmount(),mt=null,ve==null||ve.remove(),ve=null},onContentUpdate(Xi){!!O.jsonPointerUtils.getJsonPointerValue(Xi,st.jsonPointer)?Ci.destroy():Ei()}};return Ci.onContentUpdate(ge(this,As,bn).call(this)),Ci}function ms(st){let ve=null;const mt=()=>{const Ei=this.props.getContentContainer(),Ci=Ei==null?void 0:Ei.querySelector(st.nodeSelector);Ci&&(ve=(0,Se.createRoot)(Ci),ve.render(A.createElement(me,{blockId:this.props.currentBlockId,mountAt:Ci.ownerDocument.body,onChange:Xi=>{const Fn=O.jsonPointerUtils.setJsonPointerValue({},st.jsonPointer,Xi);this.props.updateYUIModel(Fn)}})))};mt();const Ii={destroy(){ve==null||ve.unmount(),ve=null},onContentUpdate(Ei){!!O.jsonPointerUtils.getJsonPointerValue(Ei,st.jsonPointer)?Ii.destroy():mt()}};return Ii}async function po(){try{return await m.Z.fetch(this.props.definitionName,"form")}catch{ge(this,Wa,hn).call(this,new Error("uiSchema"))}}async function Ks(){const st=this.props.definitionName,ve=await m.Z.fetch(st,"itemDefaults");try{return(0,S.C)(ve)}catch(mt){ge(this,Wa,hn).call(this,new Error("Failed to transform the itemDefaults translations",{cause:mt}));return}}async function xn(){const st=await f.Z.fetch(this.props.definitionName);return typeof st=="object"?st.jsonSchema:void 0}async function Ns(){const st=await ge(this,Ps,Ds).call(this);return{formWillOpen:ve=>st.formWillOpen({...ve,value:ge(this,As,bn).call(this)}),formWillUpdate:ve=>st.formWillUpdate({...ve,value:ge(this,As,bn).call(this)}),formWillClose:ve=>st.formWillClose({...ve,value:ge(this,As,bn).call(this)})}}async function or(){const st=await ge(this,Ps,Ds).call(this),ve=ge(this,As,bn).call(this);return st.getEditorLifecycleHandlers({value:ve})}var zo=t(496518),fo=t.n(zo),ks=t(971237),Bo=t.n(ks),Va=["p","ul","ol","blockquote","h1","h2","h3","h4","h5","h6"];YUI.add("squarespace-block-website-component-editor",function(st){st.namespace("Squarespace.Block.Editor").WebsiteComponent=st.Base.create("block-website-component-editor",st.Squarespace.Block.Editor.Schema,[st.SQS.LayoutEngine.Block.MixinSplitable,st.SQS.LayoutEngine.Block.MixinCoalesceable],{initializer:function(){var ve;window.MOBILEAPP?ve=this.constructor.superclass.constructor.superclass.handleOnChange.bind(this):ve=this.constructor.superclass.handleOnChange.bind(this),this._editorInterface=new go({blockModel:this.get("host").get("model"),getContentContainer:(function(){return this.get("host").get("contentBox").getDOMNode()}).bind(this),editorSettings:this.get("host").get("editorSettings"),definitionName:this.get("host").get("definitionName"),premiumFeature:this.get("host").get("premiumFeature"),currentBlockId:this.get("host").get("id"),requestRerender:(function(){return this.get("host")._renderBlock()}).bind(this),buildBlockEditorConfig:this.getConfigWithEditingButtons.bind(this),updateYUIModel:ve,getValue:(function(){return this.get("host").get("model").toJSON()}).bind(this),getVisitorController:(function(){return this.get("host").addVisitorJs()}).bind(this),buildRTEOptions:(function(mt){var Ii=this.get("host");return{blockWidget:Ii,blockModel:Ii.get("model"),render:!0,editorConfig:mt}}).bind(this),fireContentUpdated:(function(){var mt=this.get("host");mt.fire("widget:contentUpdate")}).bind(this),attachDidMountHandler:(function(mt){return this.get("host").after("block:renderedAfterMount",mt)}).bind(this),attachAfterChangeHandler:(function(mt){return this.get("host").get("model").after("change",mt)}).bind(this)}),this._isTextBlock=this.get("host").get("definitionName")==="website.components.html"},_updateModel:function(ve){this._editorInterface.onYUIModelUpdate(ve)},_renderBlock:function(ve){this._editorInterface.renderBlock(ve)},destructor:function(){this._editorInterface.destroy()},_afterBlockEditModeEnabled:function(){this._editorInterface.getEditorConfig().then(this._afterBlockEditModeEnabledWithConfig.bind(this))},_renderEditor:function(){this._editorInterface.getEditorConfig().then(this._renderEditorWithConfig.bind(this))},handleOnChange:function(ve,mt){this._editorInterface.handleOnChange(ve)},getBlockEventType:function(){return this.get("host").get("definitionName")},_isCoalesceable:function(ve){var mt=st.Widget.getByNode(ve),Ii=mt.get("definitionName"),Ei=Ii==="website.components.html",Ci=Ii===this.get("host").get("definitionName");return Ei&&Ci&&!mt.get("isNewBlock")&&!mt.get("model").get("floatDir")},insertContentIntoModel:function(ve,mt){if(this._isTextBlock){var Ii=[];mt&&(Ii=mt.reduce(function(Ei,Ci){return Ei.concat(Ci.get("model").get("textAttributes"))},[]),Ii=fo()(Bo()(Ii,"id"))),this.get("host").get("model").setAttrs({textAttributes:Ii,source:ve,html:ve})}},beforeLayoutDrag:function(){this._isTextBlock&&st.SQS.LayoutEngine.Block.MixinSplitable.prototype.beforeLayoutDrag.call(this)},afterLayoutDrag:function(){this._isTextBlock&&st.SQS.LayoutEngine.Block.MixinSplitable.prototype.afterLayoutDrag.call(this)}},{NS:"blockEditor",ATTRS:{editingOverlay:{valueFn:function(){var ve=this.get("host").get("editorSettings");return ve&&ve.hideEditingOverlay===!0?null:st.Node.create('<div class="sqs-editing-overlay"></div>')}},includeEdit:{valueFn:function(){return this.get("host").get("includeEdit")}},resizable:{valueFn:function(){return this.get("host").get("resizable")}},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},selectorsForInsertPoints:{valueFn:function(){if(this.get("host").get("definitionName")==="website.components.html"){var ve=st.Array.map(Va,function(mt){return".sqs-html-content div > "+mt}).join(", ");return ve}}},selectorsForDropZone:{valueFn:function(){if(this.get("host").get("definitionName")==="website.components.html")return st.Array.map(Va,function(ve){return".sqs-block-content "+ve+", .sqs-html-content "+ve}).join(", ")}}}})},"1.0",{requires:["squarespace-block-schema-editor","@sqs/layout-engine/block-mixin-coalesceable","@sqs/layout-engine/block-mixin-splitable"]})},450909:function(c,b,t){"use strict";var l=t(723796),d=t(784874),o=t(334001),e=t(603382),a=t(792105),r=t(227694),s=t(86878),n=t(787592),i=t(166455),u=t.n(i),h=t(202560),g=t(927167),p=t(714487),f=t(79306),m=t.n(f),_=l.Em.createLogger("block-website-component","#0A5EFA");YUI.add("squarespace-block-website-component",function(v){var E=v.namespace("Squarespace.Block").WebsiteComponent=v.Base.create("block-website-component",v.SQS.LayoutEngine.Block.ModelCsrBase,[v.SQS.LayoutEngine.Block.MixinAspectRatio,v.Squarespace.Block.PremiumBlockMixin],{initializer:function(){E.superclass.initializer.call(this);var S=this.get("definitionName");s.Z.fetch(S,"form"),s.Z.fetch(S,"itemDefaults"),s.Z.fetch(S,"quickActions")},bindUI:function(){},toJSON:function(){var S=E.superclass.toJSON.call(this),y=this.get("definitionName");return!y||y===null?this._logError(new Error("Missing definitionName"),S):S.definitionName=y,S},renderUI:function(){return this._renderBlock().then((function(){this.fire("block:renderedAfterMount")}).bind(this))},getMessage:function(){return v.UA.mobile?(0,p.t)("This block cannot be rendered in the mobile editor.",null,{project:"scripts-v6.layout-engine"}):(0,p.t)("This block cannot be rendered.",null,{project:"scripts-v6.layout-engine"})},_renderUnrenderableMobileV7:function(){return this.get("contentBox").addClass("sqs-blockStatus-box").setHTML('<div class="sqs-blockStatus-box-message">'+this.getMessage()+"</div>"),v.Promise.resolve().then((function(){this.fire("widget:contentUpdate"),this.fire("block:renderedAfterDataChange")}).bind(this))},_renderBlock:function(){var S=(0,f.v4)();return this._latestRenderPromiseId=S,this._renderTemplate().then((function(y){if(!this._latestRenderPromiseId===S)return{canceled:!0};var C=this.get("contentBox");return C.getDOMNode()!==null&&(this._renderSuccess({html:y}),this.fire("widget:contentUpdate"),this.fire("block:renderedAfterDataChange")),{canceled:!1}}).bind(this))},_renderTemplate:function(){var S=this.get("boundingBox"),y=this.get("definitionName"),C=this.get("componentWrapperClassnames"),O=this.get("customCodeBlockName"),A=this.get("containerStyles");return S.setAttribute("data-definition-name",y),C&&v.Array.forEach(C,function(I){S.addClass(I)},this),O&&S.setAttribute("data-sqsp-block",O),A&&(A.backgroundEnabled?S.addClass("sqs-background-enabled"):S.removeClass("sqs-background-enabled")),v.Promise.all([this._renderTemplateForDefinitionName(y),this._addVisitorCss(y)]).then(function(I){return I[0]})},_renderTemplateForDefinitionName:function(S){var y=this.toJSON();return e.Z.fetch(S,y.id,y.value)},_addVisitorCss:function(S){var y=v.config.win.document;return a.Z.load(S,y).catch((function(C){this._logError(new Error("css",{cause:C}),C)}).bind(this))},_logError:function(S,y){var C=this.get("definitionName");n.$e(function(O){O.setTag("owner",u().CONTENT_RENDERING),O.setTag("definitionName",C),y&&O.setContext("additionalInfo",y),n.Tb(S)}),_(S.message,C,y)},_renderSuccess:function(S){var y=this.get("contentBox"),C=[];if(this.get("definitionName").includes(".stack")){var O=y.getDOMNode().querySelector(".sqs-stack-container");C=O?Array.from(O.children).filter(function(I){return I.classList.contains("stack-child-container")}):[],C.forEach(function(I){v.one(I).appendTo(I.ownerDocument.body)})}if(E.superclass._renderSuccess.call(this,S),this.get("definitionName").includes(".stack")){var A=y.getDOMNode().querySelector(".sqs-stack-container");C.forEach(function(I){var D=A.querySelector('[id="'+I.id+'"]');D&&v.one(D.parentElement).replaceChild(I,D)})}this.addVisitorJs()},addVisitorJs:function(){return this._visitorJsPromise?this._visitorJsPromise:(this._visitorJsPromise=this._loadVisitorJsOnce(),this._visitorJsPromise)},_loadVisitorJsOnce:function(){var S=this,y=S.get("boundingBox").getDOMNode(),C=S.get("definitionName");function O(){var I=y&&y.querySelector(".sqs-block-content");return I&&(I.children.length>0||I.textContent&&I.textContent.trim().length>0)}function A(){var I=S.get("boundingBox").getDOMNode(),D=I&&I.id;return I&&D?r.Z.loadVisitorInstance(C,D,I).catch(function(T){S._logError(new Error("visitor js",{cause:T}),T)}):v.Promise.resolve()}return O()?A():new v.Promise(function(I,D){var T=function(){S.detach("widget:contentUpdate",T),A().then(I).catch(D)};S.on("widget:contentUpdate",T)})},getQuickActionsFormConfigAsync:function(){var S=this.get("definitionName");return this._fetchQuickActions().then(function(y){return{quickActionsUiSchema:y,resolvers:(0,g.Z)(S)}})},_fetchQuickActions:function(){var S=this.get("definitionName");return s.Z.fetch(S,"quickActions").catch((function(y){this._logError(new Error("quickActions",{cause:y}))}).bind(this))}},{CSS_PREFIX:(0,h.u)(d.Z.WEBSITE_COMPONENT),ATTRS:{blockName:{valueFn:function(){var S=this.get("editorSettings");return S?S.label:void 0}},definitionName:{},blockConfig:{getter:function(S){if(S)return S;var y=this.get("definitionName"),C=o.Z.getWebsiteComponentBlockConfig(y);if(C)return this.set("blockConfig",C),C}},editorSettings:{getter:function(S){if(S)return S;var y=this.get("blockConfig"),C=y&&y.editorSettings;if(C)return this.set("editorSettings",C),C}},componentWrapperClassnames:{getter:function(S){if(S)return S;var y=this.get("blockConfig"),C=y&&y.componentWrapperClassnames;if(C){var O=C.split(" ");return this.set("componentWrapperClassnames",O),O}}},customCodeBlockName:{getter:function(S){if(S)return S;var y=this.get("blockConfig"),C=y&&y.customCodeBlockName;if(C)return this.set("customCodeBlockName",C),C}},editor:{value:v.Squarespace.Block.Editor.WebsiteComponent},type:{value:d.Z.WEBSITE_COMPONENT},trackingBlockTypeName:{valueFn:function(){return this.get("definitionName")}},resizable:{valueFn:function(){var S=this.get("editorSettings");return S?S.layoutEngineResizable:!1}},includeEdit:{valueFn:function(){var S=this.get("includeEditor");if(!S)return!1;var y=this.get("editorSettings");return y?!y.hideEditButton:!0}},includeEditor:{valueFn:function(){var S=this.get("blockConfig");return S?S.hasEditor:!0}},premiumFeature:{valueFn:function(){var S=this.get("blockConfig");return S?S.premiumFeature:void 0}},containerStyles:{valueFn:function(){var S=this.get("model").toJSON()||{};return S.containerStyles||{}},getter:function(){var S=this.get("model").toJSON()||{};return S.containerStyles||{}},readOnly:!0,lazyAdd:!1,setter:function(S){this.get("initialized")&&this._logError(new Error("Caught attempt to set containerStyles for website component. Container styles should not be modified for website components!"),S)}}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-csr-base","@sqs/layout-engine/block-mixin-aspect-ratio","squarespace-block-website-component-editor","squarespace-premium-block-mixin"]})},975839:function(c,b,t){"use strict";var l=t(714487),d=t(868192);YUI.add("squarespace-block-zola-editor",function(o){o.namespace("Squarespace.Block.Editor").Zola=o.Base.create("zola-block-editor-dialog",o.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return o.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Zola")}},{NS:"blockEditor",ATTRS:{}}),o.namespace("Squarespace.Block.ModelEditorDialog").Zola=o.Base.create("block-zola-editor",o.Squarespace.ModelEditorDialog,[],{_getDialogConfig:function(){return{width:335,height:335,discardChangesConfirmation:!1,initialDataByReference:!0,tabs:[{title:"Zola",icon:"/universal/images-v6/icons/icon-button-16-light.png",scroll:!0,fields:[{ctor:o.Squarespace.DialogFields.Description,config:{text:(0,l.t)('Enter your Zola registry name to display items from your registry. <a href="{helpLink}" target="_blank">Learn more</a> <br>Sign up for a Zola registry <a href="https://www.zola.com/wedding-registry/promotion/squarespace" target="_blank">here</a>.',{helpLink:d.ZOLA},{project:"scripts-v6.block"})}},{ctor:o.Squarespace.DialogFields.Text,config:{name:"registryKey","strings.title":(0,l.t)("Registry Name",null,{project:"scripts-v6.block"}),"strings.description":(0,l.t)("This is the last part of your Zola URL.",null,{project:"scripts-v6.block"}),"strings.placeholder":(0,l.t)("johnandjane",null,{project:"scripts-v6.block"})}},{ctor:o.Squarespace.DialogFields.Slider,config:{"strings.title":(0,l.t)("Items to Display",null,{project:"scripts-v6.block"}),name:"displaySize",range:[1,12]}},{ctor:o.Squarespace.DialogFields.Check,config:{"strings.title":(0,l.t)("Add Padding",null,{project:"scripts-v6.block"}),name:"isInset"}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig",validator:o.Lang.isObject}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-html","squarespace-dialog-slider","squarespace-dialog-text","squarespace-model-editor"]})},660444:function(c,b,t){"use strict";var l=t(784874),d=t(210750),o=t.n(d),e=t(936105),a=t(202560);YUI.add("squarespace-block-zola",function(r){var s={registryKey:"",displaySize:4,isInset:!1},n=r.namespace("Squarespace.Block").Zola=r.Base.create("block-zola",r.SQS.LayoutEngine.Block.ModelCsrBase,[r.Squarespace.Block.PremiumBlockMixin],{bindUI:function(){var i=this.get("contentBox");this.get("model").on("change",function(u){i.addClass(n.CSS_IS_RENDERING)},this),this.get("model").after("change",o()(function(u){this._renderBlock(u),i.removeClass(n.CSS_IS_RENDERING)},this.get("contentRefreshRate")),this)},_renderSuccess:function(i){if(n.superclass._renderSuccess.call(this,i),r.config.win.ZolaWidget){r.config.win.ZolaWidget.init();return}var u=this.get("contentBox"),h=document.createElement("script");h.src=u.one("[data-zola-script-src]").getAttribute("data-zola-script-src"),u.append(h)}},{CSS_PREFIX:(0,a.u)(l.Z.ZOLA),CSS_IS_RENDERING:"is-rendering",ATTRS:{editor:{valueFn:function(){return e.oW(this.get("blockTypeName"))?r.Squarespace.Block.Editor.Schema:r.Squarespace.Block.Editor.Zola}},type:{value:l.Z.ZOLA},defaultContentModel:{value:s},contentRefreshRate:{value:500}}})},"1.0",{requires:["base","@sqs/layout-engine/block-model-csr-base","squarespace-block-zola-editor","squarespace-premium-block-mixin"]})},271967:function(c,b,t){"use strict";var l=t(530330),d=t.n(l);YUI.add("squarespace-blog-collection-list",function(o){var e=o.config.win,a=e.document,r=200,s=o.Squarespace.Template.getTweakValue,n=function(y){if(y){for(var C=parseInt(s("tweak-blog-list-columns"),10),O=parseInt(s("tweak-blog-list-spacing"),10),A=parseFloat(e.getComputedStyle(y).width);(A-O*(C-1))/C<r;)C--;y.setAttribute("data-columns",C)}},i=function(y){if(y){var C=y.querySelectorAll(".BlogList-item-image img");if(s("tweak-blog-list-item-image-show")==="true"){var O=s("tweak-blog-list-style").toLowerCase()==="stacked",A=s("tweak-blog-list-item-image-aspect-ratio-stacked").toLowerCase()==="auto";if(O&&A)for(var I=0;I<C.length;I++){var D=C[I];D.style.position=null,D.style.top=null,D.style.right=null,D.style.bottom=null,D.style.left=null,D.style.width=null,D.style.height=null,e.ImageLoader.load(D,{load:!0,mode:null})}else for(var T=0;T<C.length;T++)e.ImageLoader.load(C[T],{load:!0,mode:"fill"})}}},u=function(y){n(y),i(y)},h=100,g=!1,p,f=function(y){g||(g=!0),p&&clearTimeout(p),p=setTimeout(function(){!o||!o.config||!o.config.win||(u(y),g=!1)},h)},m=["tweak-blog-list-columns","tweak-blog-list-spacing"],_=["tweak-blog-list-style","tweak-blog-list-columns","tweak-blog-list-spacing","tweak-blog-list-item-image-aspect-ratio-grid","tweak-blog-list-item-image-aspect-ratio-stacked","tweak-blog-list-item-image-show","tweak-blog-list-item-image-width"],v=function(y){var C=y.getName();m.indexOf(C)>=0&&n(),_.indexOf(C)>=0&&i()};o.Global.on("tweak:change",v);var E,S;o.config.win.Squarespace.onInitialize(o,function(){E=a.querySelector(".BlogList"),E&&(u(E),S=f.bind(e,E),e.addEventListener("resize",S))}),o.config.win.Squarespace.onDestroy(o,function(){e.removeEventListener("resize",S)})},"1.0",{requires:[]})},960692:function(){YUI.add("squarespace-browser-patches",function(c){if(c.Base){if(c.Color){var b=c.Color.toRGB;c.Color.re_RGBA=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*(\d+(?:\.\d+)?)\)$/i,c.Color.toRGB=function(o){return c.Color.re_RGBA.exec(o)?"rgb("+RegExp.$1+","+RegExp.$2+","+RegExp.$3+")":b(o)}}c.SQSAnim=c.Base.create("SQSAnim",c.Anim,[],{run:function(){return this.get("destroyed")||this.get("node")._node===null||!this.get("node").inDoc()?(this.fire("end"),this):c.Anim.prototype.run.call(this)}});var t=function(o,e,a,r){return o/=r/2,o<1?a/2*o*o*o+e:(o-=2,a/2*(o*o*o+2)+e)};c.augment(c.Node,Class.create({anim:function(o,e,a){return e=c.merge({node:this,duration:.5,easing:t,to:o},e),this.activeAnim&&this.activeAnim.stop(!0),this.activeAnim=new c.SQSAnim(e),this.activeAnim.on("end",function(){delete this.activeAnim},this),e.end&&this.activeAnim.on("end",e.end,a||e.context),e.start&&this.activeAnim.on("start",e.start,a||e.context),this.nodedestroynotifier||this.plug(c.Squarespace.NodeDestroyNotifier,{onDestroy:function(){this.activeAnim&&this.activeAnim.stop(!0)},context:this}),this.activeAnim},getAdjustedDimensions:function(o){var e=this;o||(o={}),o.scale||(o.scale="cover"),o.align||(o.align="center");var a=e.get("parentNode"),r=this.getAttribute("data-image-dimensions"),s,n;if(r)r=r.split("x"),r={width:parseInt(r[0],10),height:parseInt(r[1],10)},s=r.width,n=r.height;else{!e.getData("width")&&!e.getData("height")&&(e.setData("width",o&&o.width?parseInt(o.width,10):e.getAttribute("width")||e.get("offsetWidth")),e.setData("height",o&&o.height?parseInt(o.height,10):e.getAttribute("height")||e.get("offsetHeight")));var i=e.getData("width");typeof i=="string"&&i.indexOf("%")>0?s=a.get("offsetWidth")*(parseInt(i,10)/100):s=parseInt(e.getData("width"),10);var u=e.getData("height");typeof u=="string"&&u.indexOf("%")>0?n=a.get("offsetHeight")*(parseInt(u,10)/100):n=parseInt(e.getData("height"),10)}var h=o.containerWidth||a.get("offsetWidth")-(a.get("offsetWidth")-a.get("clientWidth")),g=o.containerHeight||a.get("offsetHeight")-(a.get("offsetHeight")-a.get("clientHeight")),p=s/n,f=h/g,m,_,v;o.scale&&a.getStyle("overflow")!=="hidden"&&a.setStyle("overflow","hidden"),o.sizeOnly?v=h/s:o.scale==="contain"?v=p>f?h/s:g/n:v=p>f?g/n:h/s;var E=s,S=n;return o.scale==="contain"?(E=s*v,S=n*v,m=S<g?(g-S)/2:0,_=E<h?(h-E)/2:0,o.align.indexOf("left")!==-1?_=0:o.align.indexOf("right")!==-1&&(_=h-E),o.align.indexOf("top")!==-1?m=0:o.align.indexOf("bottom")!==-1&&(m=g-S),E-=this.get("offsetWidth")-this.get("clientWidth"),S-=this.get("offsetHeight")-this.get("clientHeight")):o.scale==="cover"&&(E=s*v,S=n*v,m=S>g?(S-g)/-2:0,_=E>h?(E-h)/-2:0,o.focalPoint&&(_=Math.min(Math.max(h/2-E*o.focalPoint[0],h-E),0),m=Math.min(Math.max(g/2-S*o.focalPoint[1],g-S),0))),{top:m,left:_,width:E,height:S}},resizeToParent:function(o){var e=this.getAdjustedDimensions(o),a=this.getStyle("position");if(o.sizeOnly){this.setStyles({width:e.width,height:e.height});var r=this.one("embed");if(r&&this.one("embed").setStyles({width:e.width,height:e.height}),this.test("iframe")){var s=this.getAttribute("src");if(s)if(s.indexOf("?")!==-1){var n=s.split("?");n[1].indexOf("wmode=transparent")===-1&&this.setAttribute("src",n[0]+"?wmode=transparent&"+n[1])}else this.setAttribute("src",s+"?wmode=transparent")}r&&r.getAttribute("wmode")!=="transparent"&&this.one("embed").setAttribute("wmode","transparent")}else{var i=5;this.setStyles({position:a!=="relative"&&a!=="absolute"?"relative":a,top:e.top.toFixed(i),left:e.left.toFixed(i),width:e.width.toFixed(i),height:e.height.toFixed(i)})}},width:function(){return this.get("offsetWidth")},height:function(){return this.get("offsetHeight")},setWidth:function(o){this.setStyle("width",o)},setHeight:function(o){this.setStyle("height",o)}}));var l=["Webkit","Moz","O","ms"],d=["transition","transitionProperty","transitionDuration","transitionTimingFunction","transitionDelay","backfaceVisibility","userSelect","borderBottomLeftRadius","borderBottomRightRadius"];c.Array.each(l,function(o){c.Array.each(d,function(e){var a=o+e.charAt(0).toUpperCase()+e.slice(1);a in c.config.doc.documentElement.style&&(c.DOM.CUSTOM_STYLES[e]={set:function(r,s,n){n[a]=s,n[e]=s},get:function(r,s){c.DOM.getComputedStyle(r,a)}})})}),c.IO.prototype._destroy=function(o){c.config.win&&!o.notify&&!o.xdr&&(!o.upload&&o.c?o.c.onreadystatechange=null:o.upload&&(o.c.upload.onprogress=null,o.c.onload=null,o.c.onerror=null)),o=o.c=null}}},"1.0",{requires:["anim","base","event","io","json","jsonp","node","node-event-delegate","plugin","promise","querystring","selector","squarespace-anim-raf","squarespace-data","squarespace-dom-emitters-resize","squarespace-logger","squarespace-plugin-node-destroy-notifier","squarespace-public-api","squarespace-system-error","squarespace-ui-base","yui-later"]})},826417:function(c,b,t){"use strict";var l=t(176944),d=t.n(l),o=t(384708),e=t(190255),a=t(572009),r=t(274056);YUI.add("squarespace-business-hours-utils",function(s){var n=e.j();function i(v){s.Lang.isUndefined(v)&&(v=new Date);var E=v.getDay();return n[E]}function u(v){var E;return s.Array.some(n,function(S,y){if(S===v)return E=y-1,!0}),E=E===-1?6:E,n[E]}function h(v,E){var S=o.Z;s.Lang.isUndefined(v)&&(v=new Date);var y=v.getHours()*60,C=v.getMinutes();return s.Lang.isUndefined(E)&&(E=S(v)),y+C+E}function g(v){var E;return v.match(/am|pm/i)?E=a.Z.HOUR_12:E=a.Z.HOUR_24,E}function p(v){return("0"+v).slice(-2)}function f(v){var E=v.length;return v[E-1]}function m(v,E){var S=E[v],y;s.Lang.isUndefined(S)||!s.Lang.isArray(S.ranges)?y=[]:y=S.ranges.slice(0);var C=u(v),O=E[C],A;return O&&s.Lang.isArray(O.ranges)&&(A=f(O.ranges),A.from>A.to&&y.unshift({from:0,to:A.to})),S&&s.Lang.isArray(S.ranges)&&(A=f(S.ranges),A.from>A.to&&y.unshift({from:A.from,to:a.Z.MAX_TIMESTAMP})),y}function _(v,E){var S=Math.floor(v/60),y=v%60,C="am",O;return E===a.Z.HOUR_12?(S===24?S=12:S>=12&&(S-=12,C="pm"),y&&(y=p(y)),S=S||12,O=S+(y?":"+y:"")+C):(S===24&&(S=0),S=p(S),y=p(y),O=S+":"+y),O}s.namespace("Squarespace.BusinessHoursUtils").plainTextDays=function(v){var E=e.V(),S=s.Squarespace.BusinessHoursUtils,y="",C=n.slice();return C=C.concat(C.shift()),s.Array.each(C,function(O){y+=E[O]+": ",y+=S.formatDay(v[O],{markup:!1}),y+="<br>"}),y},s.namespace("Squarespace.BusinessHoursUtils").formatDay=function(v,E){var S=function(I){return E.markup?I:""};E=s.merge({closed:a.Z.LANG.closed,allDay:a.Z.LANG.allDay,delimeter:" - ",markup:!0},E);var y;if(v&&s.Lang.isArray(v.ranges)){var C,O,A=g(v.text);y=s.Array.reduce(v.ranges,"",function(I,D,T,B){return r.Z.isClosedText(v.text)||d()(D.to)&&d()(D.from)?I=S('<div class="closed">'+E.closed+"</div>"):D.from===D.to||D.from===0&&D.to===1440?(I+=S("<div>"),r.Z.isAllDayText(v.text)?I+=v.text:I+=E.allDay,I+=S("</div>")):(C=_(D.from,A),O=_(D.to,A),I+=S("<div>"),I+=C+E.delimeter+O,I+=S("</div>"),!E.markup&&T<B.length-1&&(I+=", ")),I})}else y=S('<div class="closed">'),y+=E.closed,y+=S("</div>");return y},s.namespace("Squarespace.BusinessHoursUtils").isStoreOpen=function(v,E,S){var y=h(E,S),C=!1;s.Lang.isUndefined(v)&&(v=s.Squarespace.Context?s.Squarespace.getInstance().get("websiteSettings").get("businessHours"):Static.SQUARESPACE_CONTEXT.websiteSettings.businessHours);var O=i(E),A=m(O,v);return s.Array.some(A,function(I){if(s.Lang.isUndefined(I.from))return C=!1,!1;if(I.from===I.to||y>=I.from&&y<=I.to)return C=!0,!0}),C},s.Handlebars.registerHelper("isStoreOpen",function(v,E){var S=s.Squarespace.BusinessHoursUtils.isStoreOpen(v);return S?E.fn(this):E.inverse(this)}),s.Handlebars.registerHelper("dailyHours",function(v,E){var S=s.Squarespace.BusinessHoursUtils,y=E.hash,C={closed:y.closed,allDay:y.allDay,delimeter:y.delimeter};s.Lang.isUndefined(C.closed)&&delete C.closed,s.Lang.isUndefined(C.allDay)&&delete C.allDay,s.Lang.isUndefined(C.delimeter)&&delete C.delimeter;var O=S.formatDay(v,C);return new s.Handlebars.SafeString(O)})},"1.0",{requires:["base","handlebars-base","node","squarespace-attr-validators"]})},395580:function(c,b,t){"use strict";var l=t(714487),d=t(190255);YUI.add("squarespace-business-hours",function(o){o.namespace("Squarespace.Widgets").BusinessHours=o.Base.create("businessHours",o.Squarespace.Widgets.SSWidget,[],{_setDefaultBusinessHours:function(e){var a=this.get("websiteSettings");return o.Lang.isNull(e)&&(e=a.businessHours?a.businessHours:a.get("businessHours")),e}},{CSS_PREFIX:"sqs-business-hours",HANDLEBARS_TEMPLATE:"business-hours.html",ATTRS:{websiteSettings:{valueFn:function(){return o.Squarespace.Context?o.Squarespace.Context.getInstance().get("websiteSettings"):Static.SQUARESPACE_CONTEXT.websiteSettings}},businessHours:{value:null,setter:"_setDefaultBusinessHours"},strings:{value:{store:{open:(0,l.t)("We are currently<br><span>open</span>",null,{project:"website.business-hours"}),closed:(0,l.t)("We are currently<br><span>closed</span>",null,{project:"website.business-hours"})},daysAbbreviated:d.V()}}}})},"1.0",{requires:["base","node","squarespace-business-hours-template","squarespace-business-hours-utils","squarespace-ss-widget"]})},584562:function(c,b,t){"use strict";var l=t(702602);YUI.add("squarespace-calendar-base-lang",function(d){d.Intl.add("calendar-base","en",{very_short_weekdays:l.G,first_weekday:0,weekends:[0,6]})},"1")},143452:function(c,b,t){"use strict";var l=t(323209),d=t.n(l);YUI.add("squarespace-calendar-block-renderer",function(o){var e=[];o.namespace("Squarespace"),o.Squarespace.CalendarBlockRenderer={},o.Squarespace.CalendarBlockRenderer.renderCalendar=function(r,s,n){var i;o.Lang.isString(s)?i=s:o.Object.hasKey(s,"collectionId")?i=s.collectionId:o.instanceOf(s,o.Model)&&(i=s.get("id"));var u={date:new Date,collectionId:i};o.Lang.isValue(n)&&o.merge(u,{pageCollectionId:n}),r.setAttribute("data-dynamic-strings","");var h=new o.Squarespace.SquarespaceCalendar(u);return h.plug(o.Squarespace.SquarespaceCalendarRenderer),h.render(r),h},o.Squarespace.CalendarBlockRenderer.initializeNode=function(r){var s=r.one(".sqs-block-content"),n=o.JSON.parse(r.getAttribute("data-block-json")),i=!!o.Array.find(e,function(u){return u.get("boundingBox").ancestor(".sqs-block-content")===s});i||e.push(o.Squarespace.CalendarBlockRenderer.renderCalendar(s,n))},o.config.win.Squarespace.onInitialize(o,function(){var r=o.all(".sqs-block.calendar-block[data-block-json]");r.size()&&r.each(o.Squarespace.CalendarBlockRenderer.initializeNode)}),o.config.win.Squarespace.onDestroy(o,function(){e.forEach(function(r){r.destroy()}),e.length=0})},"1.0",{requires:["model","squarespace-calendar-core-renderer"]})},706811:function(c,b,t){"use strict";var l=t(545334),d=t.n(l),o=t(461761),e=t.n(o),a=t(714487),r=t(329001),s=t(586745),n=t.n(s);YUI.add("squarespace-calendar-core-renderer",function(i){i.namespace("Squarespace");var u="MM-YYYY",h=function(f){return f.recordType===n().EVENT?f.structuredContent.startDate:f.addedOn},g="/api/open/GetItemsByMonth";i.Squarespace.SquarespaceCalendar=i.Base.create("SquarespaceCalendar",i.Calendar,[],{initializer:function(){this._fetchEvents()},bindUI:function(){i.Calendar.superclass.bindUI.call(this),this.before("dateChange",this._clearEvents,this),this.after("dateChange",this._fetchEvents,this),this.after("collectionIdChange",this._fetchEvents,this)},_clearEvents:function(){this.set("events",[])},_fetchEvents:function(){var f=this.get("date"),m=d()(f).locale("en").format(u);i.Data.get({url:this._getFetchUrl(m),success:this._parseResponse,failure:this._handleResponseError},this)},_parseResponse:function(f){this.set("events",f)},_handleResponseError:function(f){this.fire("fetchEventsFailure")},_getFetchUrl:function(f){return g+this._buildQueryString(f)},_buildQueryString:function(f){var m=this.get("collectionId"),_=this.get("pageCollectionId"),v=this.get("category"),E=this.get("tag"),S=this.get("author"),y="?month="+f;m&&(y+="&collectionId="+m),_&&(y+="&pageCollectionId="+_);var C=y+(v?"&category="+v:"")+(E?"&tag="+E:"")+(S?"&author="+S:"");return C}},{ATTRS:{events:{value:[],validator:i.Lang.isArray},collectionId:{value:null,validator:i.Lang.isString},pageCollectionId:{value:null,validator:i.Lang.isString},category:{value:"",validator:i.Lang.isString},tag:{value:"",validator:i.Lang.isString},author:{value:"",validator:i.Lang.isString}}}),i.Squarespace.CalendarBaseRenderer=i.Base.create("CalendarBaseRenderer",i.Plugin.Base,[],{initializer:function(f){this.host=f.host,this.afterHostEvent("eventsChange",this._onEventsChange,this)},_onEventsChange:function(f){var m=null;i.Lang.isArray(f.newVal)&&f.newVal.length>0&&(m=i.bind(this._calendarFilterFunction,this)),this.host.set("customRenderer",{rules:{all:"events"},filterFunction:m})},_calendarFilterFunction:function(f,m,_){var v=this.host.get("events"),E=this._getEventsOfDay(v,f);this._sortEvents(E),this._renderDay(f,m,E)},_renderDay:function(f,m,_){_.length>0&&m.setStyle("background","gray")},_sortEvents:function(f){f.sort(function(m,_){var v=h(m),E=h(_);return E-v})},_isMultidayEvent:function(f){if(f.recordType!==n().EVENT)return!1;var m=f.structuredContent;return d()(m.startDate).diff(m.endDate,"days")},_isEventPartOfDay:function(f,m){if(f.recordType!==n().EVENT)return d()(f.addedOn).isSame(m,"day");var _=f.structuredContent;return d()(m).isBetween(_.startDate,_.endDate,"day","[]")},_isSameDay:function(f,m){return f.recordType!==n().EVENT?!0:d()(f.structuredContent.startDate).isSame(m,"day")},_getEventsOfDay:function(f,m){return i.Lang.isArray(f)&&f.length>0?i.Array.filter(f,function(_){return this._isEventPartOfDay(_,m)},this):[]}},{NS:"calendarPlugin"});var p=i.Squarespace.SquarespaceCalendarRenderer=i.Base.create("squarespaceCalendarRenderer",i.Squarespace.CalendarBaseRenderer,[],{initializer:function(f){this.host.set("headerRenderer",i.bind(this._renderHeader,this)),this._loadingSpinner=new i.Squarespace.Spinner({color:"dark",size:"extra-large",render:this.host.get("contentBox")}),this.onceAfterHostEvent("eventsChange",this._renderCalendar),this.onceAfterHostEvent("fetchEventsFailure",function(){this._loadingSpinner&&this._loadingSpinner.destroy(!0),this.host.destroy()},this),this._bindUI()},destructor:function(){this._loadingSpinner&&this._loadingSpinner.destroy(!0),this._resizeEvent.detach()},_bindUI:function(){this._resizeEvent=i.on("resize",this._syncUI,i.config.win,this)},_syncUI:function(){this.host.get("contentBox").getDOMNode()&&(this._fitToContainer(),this._setupCells(),this.host.get("contentBox").hasClass(p.COMPACT_LAYOUT_CLASS)||this._loadImages(),this._setFlyoutHeights())},_onEventsChange:function(f){var m=i.bind(this._calendarFilterFunction,this),_={all:{all:{all:{0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"}}}};this.host.set("customRenderer",{rules:_,filterFunction:m}),this.get("isRendered")&&this._syncUI()},_calendarFilterFunction:function(f,m,_){p.superclass._calendarFilterFunction.apply(this,arguments),_.indexOf("sunday")>=0?m.addClass("sunday"):_.indexOf("monday")>=0?m.addClass("monday"):_.indexOf("friday")>=0?m.addClass("friday"):_.indexOf("saturday")>=0&&m.addClass("saturday")},_fitToContainer:function(){var f=this.host.get("contentBox"),m=f.get("offsetWidth");f.toggleClass(p.SMALL_LAYOUT_CLASS,m<=770),f.toggleClass(p.COMPACT_LAYOUT_CLASS,m<=600),f.toggleClass(p.TINY_LAYOUT_CLASS,m<=300)},_setupHeader:function(){var f=this.host.get("contentBox");f.one(".yui3-calendar-header-label").wrap("<h1></h1>")},_setupCells:function(){var f=this.host.get("contentBox").one("table");f.setStyle("width",null);var m=f.getDOMNode(),_=m.offsetWidth,v=m.parentElement;if(v){var E=v.offsetWidth;_=Math.min(_,E)}var S=7,y=S+1;this.cellSpacing=parseInt(f.getComputedStyle("borderSpacing"),10);var C=this.cellSpacing*y,O=parseInt((_-C)/S,10),A=O*S+C,I=Math.min(_,A);f.setStyle("width",I);var D=parseInt(I/S,10)-this.cellSpacing;f.all("td").setStyles({width:D,height:D})},_loadImages:function(){this.host.get("contentBox").all("img[data-src]").each(function(f){ImageLoader.load(f,{mode:"fill",load:!0})},this)},_setFlyoutHeights:function(){this.host.get("contentBox").all(".flyoutitemlist--hasmorecontent").each(function(f){var m=f.ancestor("tr"),_=this._getRowHeight(m),v;f.ancestor("tr:nth-child(4)")||f.ancestor("tr:nth-child(5)")||f.ancestor("tr:nth-child(6)")?v=this._getRowHeight(m.previous("tr")):v=this._getRowHeight(m.next("tr")),f.setStyle("height",_+v+this.cellSpacing)},this),this.host.get("contentBox").all("tr").removeAttribute("data-row-height")},_getRowHeight:function(f){if(f.getAttribute("data-row-height"))return parseInt(f.getAttribute("data-row-height"),10);var m=f.get("offsetHeight");return f.setAttribute("data-row-height",m),m},_renderCalendar:function(){this._setupHeader(),this._syncUI(),this._loadingSpinner&&this._loadingSpinner.destroy(!0),this.host.get("boundingBox").addClass("loaded"),this.set("isRendered",!0)},_renderHeader:function(f){return(0,a.p6)(f,{skeleton:"yMMMM"})},_renderDay:function(f,m,_){this.setAttrs({date:f,node:m,events:this._groupEvents(_,f)}),this._highlightToday(),this._highlightDaysWithEvents();var v=this._getTemplateInfo(),E=v.template(this._getHBTemplateContext());m.empty().append(E)},_highlightToday:function(){var f=new Date,m=(0,r.Z)(f);this.get("date").setHours(0,0,0,0)===m.setHours(0,0,0,0)&&this.get("node").addClass(p.TODAY_CLASS)},_highlightDaysWithEvents:function(){this.get("events").length>0&&this.get("node").addClass(p.HAS_EVENT_CLASS)},_getTemplateInfo:function(){return{template:i.Squarespace.UITemplates.getCompiledTemplate(p.HANDLEBARS_TEMPLATE)}},_getHBTemplateContext:function(){return{date:this.get("date"),events:this.get("events")}},_groupEvents:function(f,m){var _=[],v=[];return i.Array.each(f,function(E){this._isSameDay(E,m)?_.unshift(E):(E.isSubsequentDayOfMultidayEvent=!0,v.unshift(E)),this._isMultidayEvent(E)&&(E.isMultiday=!0)},this),v.concat(_)}},{NS:"calendarPlugin",TODAY_CLASS:"today",HAS_EVENT_CLASS:"has-event",SMALL_LAYOUT_CLASS:"small-layout",COMPACT_LAYOUT_CLASS:"compact-layout",TINY_LAYOUT_CLASS:"tiny-layout",HANDLEBARS_TEMPLATE:"calendar-day.html"});i.Handlebars.registerHelper("day-of-month-format",function(f,m){var _=m.hash.skeleton,v=_?{skeleton:_}:{date:"long"};return(0,a.p6)(f,v)}),i.Handlebars.registerHelper("date-format",function(f,m){var _=m.hash.skeleton,v=m.hash.time,E={};_&&(E.skeleton=_),v&&(E.time=v),Object.keys(E).length===0&&(E.date="long");var S=e()(window.Static,"SQUARESPACE_CONTEXT.website.timeZone");return(0,a.p6)({date:f,zoneId:S},E)}),i.Handlebars.registerHelper("end-date",function(f){return(0,a.t)("(ends {date})",{date:f.fn(this)},{project:"website.calendar",notes:"Shows end date after the title of events that span across days in the calendar block"})})},"1.0",{requires:["base","intl","squarespace-calendar-base-lang","squarespace-datatype-date-format","calendar","node","squarespace-attr-validators","squarespace-calendar-day-template","squarespace-spinner","squarespace-ui-base","squarespace-ui-templates","squarespace-widgets-alert"]})},817495:function(c,b,t){"use strict";var l=t(367915),d=t(714487),o=t(371467),e=t(784874),a=t(296923),r=t.n(a),s=t(936177),n=t.n(s),i=t(554468),u=t(343312),h=t(461037),g=t(284106),p=t(154210),f=t(408878),m=t(739233);const _=(E,S)=>{const y={initialAddressFormat:S.initialAddressFormat,initialPhoneFormat:S.initialPhoneFormat,initialNameOrder:S.initialNameOrder,countries:S.countries};return(0,m.r)(E,{...S,formFieldFormats:y})};var v=t(106249);YUI.add("squarespace-cart-utils",function(E){var S,y;E.namespace("Squarespace.CartUtils"),E.Squarespace.CartUtils={_initializeAddToCartButtonFromProductType:function(C){switch(this._getProductTypeFromPurchaseButton(C)){case r().PHYSICAL:case r().DIGITAL:case r().SERVICE:this._initializeAddToCartButton(C);break;case r().GIFT_CARD:this._initializePurchaseGiftCardButton(C);break;default:break}C.hasClass("use-form")&&!y&&E.Squarespace.CartUtils._getAdditionalFieldsFormTemplateSchema(function(O){y=O},this)},initializeSingleAddToCartButton:function(C){this._initializeAddToCartButtonFromProductType(C)},initializeAddToCartButtons:function(){E.all(".sqs-add-to-cart-button").each(function(C){this._initializeAddToCartButtonFromProductType(C)},this)},_initializeAddToCartButton:function(C){var O=E.Squarespace.Commerce.isExpressCheckout(),A=C.getAttribute("data-is-subscription")==="true",I;C.getAttribute("data-use-custom-label")==="false"&&(A?I=(0,d.t)("Subscribe",null,{project:"apps.Commerce"}):O&&(I=(0,d.t)("Purchase",null,{project:"apps.Commerce"}))),this._initializeButton(C,I),C.on("click",E.Squarespace.CartUtils._addCartEntry,this),C.on("keydown",(function(D){(D.keyCode===13||D.keyCode===32)&&this._addCartEntry(D)}).bind(this))},_initializePurchaseGiftCardButton:function(C){C.getAttribute("data-use-custom-label")==="false"?this._initializeButton(C,(0,d.t)("Purchase",null,{project:"apps.Commerce"})):this._initializeButton(C),C.on("click",E.Squarespace.CartUtils._purchaseGiftCard,this),C.on("keypress",(function(O){(O.keyCode===13||O.keyCode===32)&&this._purchaseGiftCard(O)}).bind(this))},_initializeButton:function(C,O){var A=C.one(".sqs-add-to-cart-button-inner");A.plug(E.Squarespace.Animations.Scalable,{duration:.2}),O&&(A.setContent(O),C.setData("original-label",O));var I=C.get("parentNode"),D=I.get("parentNode"),T=I.siblings(".product-variants").item(0)||I.get("parentNode").siblings(".product-variants").item(0),B=E.one(T),N=D.hasClass("plp-grid-add-to-cart");!B&&N&&u.s3(C._node)},_getProductTypeFromPurchaseButton:function(C){return Number(C.getAttribute("data-product-type"))||r().UNKNOWN},_setButtonWidth:function(C){var O=C.get("parentNode");if(!(O.get("parentNode").hasClass("plp-grid-add-to-cart")||O.getAttribute("data-is-product-add-on")==="true")){var A=Math.ceil(C.getDOMNode().getBoundingClientRect().width);O.setStyles({width:A+"px",minWidth:"11em"}),C.setStyle("display","block")}},_showError:function(C){var O=E.Squarespace.Commerce.isExpressCheckout()?(0,d.t)("Unable to Purchase Item",null,{project:"apps.Commerce"}):(0,d.t)("Unable to Add Item",null,{project:"apps.Commerce"});new E.Squarespace.Widgets.Alert({position:E.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.title":O,"strings.message":C})},_showGiftCardError:function(C){var O=(0,d.t)("Unable to purchase Gift Card",null,{project:"apps.Commerce"});new E.Squarespace.Widgets.Alert({"strings.title":O,"strings.message":C})},_generateErrorString:function(C){var O=C.length;return O===1?(0,d.t)("Please select the {option} option.",{option:C[0]},{project:"apps.Commerce"}):O===2?(0,d.t)("Please select the {option1} and {option2} options.",{option1:C[0],option2:C[1]},{project:"apps.Commerce"}):(0,d.t)("Please select the {optionsList} and {lastOption} options.",{optionsList:C.slice(0,-1).join(", "),lastOption:C[C.length-1]},{project:"apps.Commerce"})},_getAddToCartPageType:function(C){var O=C.get("parentNode").hasClass("plp-grid-add-to-cart"),A=C.hasClass("add-on-add-to-cart-wrapper"),I=C.get("parentNode").get("parentNode").hasClass("product-block");return O?u.Zj.PLP:A?u.Zj.ADD_ON:I?u.Zj.PRODUCT_BLOCK:u.Zj.PDP},_trackAddToCartError:function(C,O,A,I){try{u.qR(C,O._node,A,I)}catch(D){n().trackCaughtError("commerce-merch","trackAddToCart",D.stack)}},_addCartEntry:function(C){var O=C.currentTarget,A=O.getAttribute("data-is-subscription")==="true",I=A?E.Squarespace.CartUtils._goToSubscriptionCheckout.bind(this):E.Squarespace.CartUtils._goToCheckoutOrAddToCart.bind(this),D=O.get("parentNode");if(D.hasClass("cart-added"))return;var T=O.getAttribute("data-item-id"),B,N,P=O.get("parentNode"),x=P.get("parentNode").hasClass("plp-grid-add-to-cart"),R=this._getAddToCartPageType(P),w=E.Squarespace.Singletons.ShoppingCart,k=P.siblings(".product-variants").item(0)||P.get("parentNode").siblings(".product-variants").item(0),q=E.one(k);if(E.Lang.isValue(q)){var F=JSON.parse(q.getAttribute("data-unselected-options")),z=F.length;if(z>0){if(x){this._trackAddToCartError(R,P,w,u.Ar.NO_VARIANT_SELECTED),u.ll(O._node);return}this._trackAddToCartError(R,P,w,u.Ar.NO_VARIANT_SELECTED),this._showError(this._generateErrorString(F));return}var j=q.getAttribute("data-selected-variant"),X=q.getAttribute("data-variant-in-stock"),J=j?JSON.parse(j):null,Q=!!X;if(!J){this._trackAddToCartError(R,P,w,u.Ar.VARIANT_UNAVAILABLE),this._showError((0,d.t)("Sorry, that item variant is unavailable. Please select another variant.",null,{project:"apps.Commerce"}));return}if(!Q){this._trackAddToCartError(R,P,w,u.Ar.OUT_OF_STOCK),this._showError((0,d.t)("Sorry, we do not have enough of that item available.",null,{project:"apps.Commerce"}));return}B=J}var ie=O.get("parentNode").siblings(".product-quantity-input").item(0);if(ie&&(N=E.one(ie).one("input").get("value"),!E.Lang.isNumber(Number(N)))){this._trackAddToCartError(R,P,w,u.Ar.QUANTITY_NOT_A_NUMBER),this._showError((0,d.t)("Quantity must be a number.",null,{project:"apps.Commerce"}));return}function ce(){try{u.qR(R,P._node,w)}catch(pe){n().trackCaughtError("commerce-merch","trackAddToCart",pe.stack)}}O.hasClass("use-form")?this._verifyItemInStock({itemId:T,variant:B,inStockCb:E.bind(function(){E.Squarespace.CartUtils._openAdditionalFieldsForm(O,function(pe){ce(),I(O,T,B,N,pe,this._showError)},this)},this),outOfStockCb:E.bind(function(){this._trackAddToCartError(R,P,w,u.Ar.CUSTOM_FORM_RENDER_ERROR_OUT_OF_STOCK),this._showError((0,d.t)("Sorry, we do not have enough of that item available.",null,{project:"apps.Commerce"}))},this)}):(ce(),I(O,T,B,N,null,this._showError.bind(this)))},_goToSubscriptionCheckout:function(C,O,A,I,D,T){var B=C.get("parentNode"),N=this._getAddToCartPageType(B),P=E.Squarespace.Singletons.ShoppingCart;if(E.Lang.isValue(I)&&I%1!==0){this._trackAddToCartError(N,B,P,u.Ar.SUB_QUANTITY_NOT_A_WHOLE_NUMBER),T((0,d.t)("Quantity must be a whole number",null,{project:"apps.Commerce"})),E.Squarespace.CartUtils._setButtonStateIdle(C);return}var x={itemId:O,sku:A&&A.sku,qty:I,additionalFields:E.JSON.stringify(D||{})},R=C.getAttribute("data-subscription-option-id");R&&(x.subscriptionOptionId=R),E.Data.post({url:"/api/3/commerce/cart/subscription",json:!0,data:x,success:function(w){E.Squarespace.Commerce.goToSubscriptionPage(w.cartToken)},failure:function(w){this._trackAddToCartError(N,B,P,u.Ar.SUB_API_FAILURE),T(w.message)}})},_purchaseGiftCard:function(C){var O=C.currentTarget,A=O.getAttribute("data-item-id"),I=null,D=O.get("parentNode").siblings(".product-variants").item(0)||O.get("parentNode").get("parentNode").siblings(".product-variants").item(0);if(D){var T=JSON.parse(D.getAttribute("data-unselected-options"));if(T.length){this._showGiftCardError((0,d.t)("Select a denomination for the Gift Card",null,{project:"apps.Commerce"}));return}I=JSON.parse(D.getAttribute("data-selected-variant"))}E.Squarespace.Commerce.goToGiftCardPage(A,I)},_verifyItemInStock:function(C){var O=E.Squarespace.Singletons.ShoppingCart;E.Data.get({url:E.Squarespace.API_ROOT+"commerce/inventory/stock/",data:{itemId:C.itemId},success:function(A){var I=E.Array.some(A.results,function(D){return D.unlimited?!0:D.qtyInStock>O.totalForItem(C.itemId,C.variant)});I?C.inStockCb():C.outOfStockCb()}})},_goToCheckoutOrAddToCart:function(C,O,A,I,D,T){E.Squarespace.CartUtils._setButtonStateAdding(C);var B=C.get("parentNode"),N=this._getAddToCartPageType(B),P=E.Squarespace.Singletons.ShoppingCart;if(E.Lang.isValue(I)&&I%1!==0){this._trackAddToCartError(N,B,P,u.Ar.QUANTITY_NOT_A_WHOLE_NUMBER),T("Quantity must be a whole number"),E.Squarespace.CartUtils._setButtonStateIdle(C);return}var x=C.get("parentNode");E.Squarespace.Singletons.ShoppingCart.addEntry(O,A,I,D,function(R,w){if(R){this._trackAddToCartError(N,B,P,u.Ar.API_FAILURE),T(R),E.later(1e3,this,function(){E.Squarespace.CartUtils._setButtonStateIdle(C)});return}try{E.Squarespace.CartUtils._trackAddToCartHelper(w)}catch(k){console.error(k),n().trackCaughtError("common","trackAddToCart issue",k.stack)}if(E.Squarespace.Commerce.isExpressCheckout()){E.Squarespace.Commerce.goToCheckoutPage();return}E.later(1e3,this,function(){E.Lang.isNull(C._node)||(x.get("parentNode").hasClass("plp-grid-add-to-cart")&&h.Z.showAddedItemPopover(w),E.Squarespace.CartUtils._setButtonStateAdded(C),E.later(2e3,this,function(){E.Squarespace.CartUtils._setButtonStateIdle(C)}))})},this)},_setButtonStateAdding:function(C){var O=C.one(".sqs-add-to-cart-button-inner"),A=C.get("parentNode"),I=A.one(".ProductItem-view-cart"),D=!1,T=A.getAttribute("data-is-product-add-on")==="true";if(T){C.addClass("adding-to-cart");return}E.Squarespace.CartUtils._setButtonWidth(C),O.once("hidden",function(){O.empty(),C.addClass("cart-adding");var B=(0,d.t)("Adding\u2026",null,{project:"apps.Commerce"});if(O.append('<div class="status-text">'+B+"</div>"),D&&!I){var N=(0,d.t)("View Cart",null,{project:"apps.Commerce"});A.append('<div class="ProductItem-view-cart" style="display: none;"><a class="sqs-add-to-cart-button" href="/cart">'+N+"</a></div>")}O.show()},this),O.hide()},_setButtonStateAdded:function(C){var O=C.get("parentNode"),A=O.getAttribute("data-is-product-add-on")==="true",I=C.one(".sqs-add-to-cart-button-inner");if(A){var D=I.one(".icons-container");C.removeClass("adding-to-cart"),D.removeClass("show-plus-icon"),D.addClass("show-checkmark-icon");return}I.empty();var T=(0,d.t)("Added!",null,{project:"apps.Commerce"});C.addClass("cart-added"),I.append('<div class="status-text">'+T+"</div>")},_setButtonStateIdle:function(C){var O=C.one(".sqs-add-to-cart-button-inner"),A=C.get("parentNode").getAttribute("data-is-product-add-on")==="true";if(A){var I=O.one(".icons-container");C.removeClass("adding-to-cart"),I.addClass("show-plus-icon"),I.removeClass("show-checkmark-icon");return}O.once("hidden",function(){O.empty(),C.removeClass("cart-adding"),O.removeClass("plp-cart-added"),O.setContent(C.getData("original-label")),O.show()},this),O.hide()},_openAdditionalFieldsForm:function(C,O,A){S&&S.destroy();var I,D;if(!P)try{var T=C.get("parentNode"),B=T.get("parentNode").hasClass("plp-grid-add-to-cart"),N=T.hasClass("add-on-add-to-cart-wrapper"),P=T._node.closest(".product-block")!==null,x,R="simple";I=B?u.Zj.PLP:N?u.Zj.ADD_ON:P?u.Zj.PRODUCT_BLOCK:u.Zj.PDP,D=C._node.closest("#product-quick-view")!==null,x=C._node.closest("[data-layout]"),x&&(R=x.getAttribute("data-layout")),g.Tu({website_id:window.Static.SQUARESPACE_CONTEXT.website.id,product_page:I,pdp_layout:I==="pdp"?R:void 0,is_quickview:D,product:{item_id:C.getAttribute("data-item-id"),item_collection_id:C.getAttribute("data-collection-id"),item_type:C.getAttribute("data-product-type")}})}catch{console.error("Unable to track open custom form event")}var w=E.JSON.parse(C.getData("form")),k=w.fields.map(function(ce){return E.JSON.parse(ce)}),q=window.Static.SQUARESPACE_CONTEXT.visitorFormContext,F=Object.assign(w,{formFields:k,formId:w.id,formName:w.name,formSubmitButtonText:w.submitButtonText,formSubmissionMessage:w.submissionMessage,localizedStrings:q.localizedStrings,countries:q.formFieldFormats.countries,initialAddressFormat:q.formFieldFormats.initialAddressFormat,initialPhoneFormat:q.formFieldFormats.initialPhoneFormat,initialNameOrder:q.formFieldFormats.initialNameOrder}),z=function(ce){return new Promise(function(pe,ye){var Ae=_(ce,F);(0,v.Z)(w.id,Ae).then(function(){O&&O.call(A||this,Ae);try{g.HC({website_id:window.Static.SQUARESPACE_CONTEXT.website.id,product_page:I,pdp_layout:I==="pdp"?R:void 0,is_quickview:D,product:{item_id:C.getAttribute("data-item-id"),item_collection_id:C.getAttribute("data-collection-id"),item_type:C.getAttribute("data-product-type")}})}catch{console.error("Unable to track save product form event")}S.close(),pe()},ye)})},j=(function(ce){O&&O.call(A||this,ce.data);try{g.HC({website_id:window.Static.SQUARESPACE_CONTEXT.website.id,product_page:I,pdp_layout:I==="pdp"?R:void 0,is_quickview:D,product:{item_id:C.getAttribute("data-item-id"),item_collection_id:C.getAttribute("data-collection-id"),item_type:C.getAttribute("data-product-type")}})}catch{console.error("Unable to track save product form event")}S.close()}).bind(this);if(window.Static.SQUARESPACE_CONTEXT.betaFeatureFlags.includes("commerce-product-forms-rendering")){var X=(0,f.s)(w.name),J;C._node&&(J=(0,f._)(C._node)),S=new E.Squarespace.Widgets.ModalLightbox({content:X.sqsBlockForm,contentClassName:J?J.contentClasses.join(" "):void 0,contentDataAttributes:J?J.contentDataAttributes:void 0,render:E.one("body"),hasExtraBottomMargin:!!E.UA.ios});var Q=Object.assign(F,{onSubmit:z});(0,p.S)(Q,X.reactRoot,function(){S.open()});return}S=new E.Squarespace.Widgets.ModalLightbox({render:E.one("body"),hasExtraBottomMargin:!!E.UA.ios});var ie=new E.Squarespace.Widgets.AsyncForm({form:w,formTemplate:y,formSubmitButtonText:C.getData("original-label"),formName:w.name,showTitle:!0});ie.on("submission",j,this),S.set("content",ie),S.once("close",function(){ie.destroy()},this),S.open()},_getAdditionalFieldsFormTemplateSchema:function(C,O){E.Data.get({url:"/api/template/GetTemplateSchema",data:{type:e.Z.FORM},success:function(A){C.call(O||this,A)}},this)},_setAdditionalFieldsFormTemplate:function(C){y=C},_trackAddToCartHelper:function(C){var O=C.chosenVariant?C.chosenVariant.sku:null,A=C.chosenVariant?C.chosenVariant.attributes:null;o.Kc({value:(C.subTotal/100).toFixed(2),currency:i.Z.getStoreCurrency(),content_name:C.title,content_type:"product",content_ids:O,contents:[{id:O,quantity:C.quantity,item_price:(C.purchasePriceCents/100).toFixed(2),attributes:A}]})}}},"1.0",{requires:["base","json","node","squarespace-animations","squarespace-async-form","squarespace-commerce-utils","squarespace-modal-lightbox","squarespace-models-shopping-cart","squarespace-spinner","squarespace-widgets-alert"]})},26339:function(c,b,t){"use strict";var l=t(259049),d=t.n(l);YUI.add("squarespace-chartjs-helpers",function(o){},"1.0",{requires:["@sqs/layout-engine/chartjs-helpers"]})},697168:function(c,b,t){"use strict";var l=t(860921),d=t.n(l),o=t(651404);YUI.add("squarespace-code-editor",function(e){e.namespace("Squarespace"),e.Squarespace.CodeEditor=e.Base.create("codeEditor",e.Base,[],{initializer:function(a){this.el=a.el,a.tabIndex&&this.el.setAttribute("tabIndex",a.tabIndex),this.parentNode=this.el.get("parentNode"),this.parentNode.setStyle("overflow","hidden"),this.editor=o.Z.fromTextArea(this.el.getDOMNode(),{lineWrapping:!0,mode:this.get("mode")}),this.editor.getScrollerElement().style.height="100%",this._setOptionsForMode(this.get("mode")),this.on("modeChange",this._loadMode,this),this.after("heightChange",this._setEditorHeight,this),this.resizeOnFirstCursorActivity(),this.setToParentHeight()},setToParentHeight:function(){var a=this.parentNode.getStyle("height");this.set("height",a)},resizeOnFirstCursorActivity:function(){var a=(function(){this.editor.getScrollInfo().top>0&&(this.editor.off("cursorActivity",a),this.editor.refresh())}).bind(this);this.editor.on("cursorActivity",a)},getContent:function(){return this.editor.getValue()},setContent:function(a){return this.editor.setValue(a||"")},getContentHeight:function(){return parseInt(this.editor.getScrollerElement().offsetHeight,10)},focus:function(){return this.editor.refresh(),this.editor.focus()},execCommand:d(),_clearOptions:function(){this.editor.setOption("matchBrackets",!1),this.editor.setOption("autoCloseBrackets",!1),this.editor.setOption("matchTags",!1),this.editor.setOption("autoCloseTags",!1)},_setOptionsForMode:function(a){switch(a){case"css":case"javascript":this.editor.setOption("matchBrackets",!0),this.editor.setOption("autoCloseBrackets",!0);break;case"htmlmixed":this.editor.setOption("matchTags",!0),this.editor.setOption("autoCloseTags",!0);break}},_loadMode:function(a){this._clearOptions(),this.editor.setOption("mode",a.newVal),this._setOptionsForMode(a.newVal)},_setEditorHeight:function(a){this.editor.setSize(null,a.newVal)}},{ATTRS:{mode:{value:"htmlmixed"},height:{value:-1}}})},"1.0",{requires:["base","node"]})},72330:function(c,b,t){"use strict";var l=t(995620),d=t.n(l),o=t(860921),e=t.n(o);YUI.add("squarespace-comment-data",function(a){a.namespace("Squarespace"),a.Squarespace.CommentData=Class.create({initialize:function(r){if(r===void 0)throw new Error("You must provide a configuration object.");if(r.target===void 0)throw new Error("You must provide a target id.");if(r.targetType===void 0)throw new Error("You must provide a target type.");this.settings=r.settings||{approvalRequired:!1,allowAnon:!0,threaded:!0},this.formatter=r.formatter||function(s){return s},this.page=1,this.data={comments:[]},this.topLevelComments=0,this.visibleComments=0,this.totalComments=r.publicCommentCount||0,this.commentsPerPage=50,this.target=r.target,this.targetType=r.targetType,this.idToIndex={},this.comments=[],this.likeMap={},this.flagMap={},this.formatted={},this.currentThreadRoot="",this.formattedThread={},this.pageIntervals=[]},useSecure:function(){return window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()},getCommentById:function(r){return this.comments[this.idToIndex[r]]},removeCommentById:function(r){var s=this.idToIndex[r];a.Lang.isUndefined(s)||(this.comments.splice(s,1),this.calculatePagination())},removeCommentsByIds:function(r){r.forEach(function(s){var n=this.idToIndex[s];a.Lang.isUndefined(n)||(this.comments.splice(n,1),this.visibleComments-=1,this.totalComments-=1)},this),this.calculatePagination()},getFormattedPage:function(r){var s=this.pageIntervals[r-1];return s?Array.prototype.slice.apply(this.comments,s):null},fullBookkeeping:function(r){var s=0,n={};for(this.comments=[],this.pageIntervals=[],this.idToIndex={},s=0;s<r.comments.length;s++)n=r.comments[s],this.idToIndex[n.id]=s,this.comments[s]=n;this.pageIntervals.push([0,void 0]),this.flagMap=r.flagMap,this.likeMap=r.likeMap,this.commentSettings=r.commentSettings,this.visibleComments=r.visibleComments,this.topLevelComments=this.formatted.topLevelComments||this.topLevelComments,this.totalComments=r.totalComments?r.totalComments:this.totalComments,this.reformat(),this.topLevelComments=r.topLevelComments,this.numLikes=r.numLikes,this.numPages=Math.ceil(this.topLevelComments/this.commentsPerPage)},addCommentData:function(r){this.comments.splice((this.idToIndex[r.parentId]||-1)+1,0,r),this.calculatePagination()},calculatePagination:function(){var r=50,s=0,n,i,u;for(this.idToIndex={},this.pageIntervals=[[0,void 0]],u=0;u<this.comments.length;u++)i=this.comments[u],this.idToIndex[i.id]=u,i.parentId||(s+=1,s>r&&(n=this.pageIntervals[this.pageIntervals.length-1],n[1]=s-1,this.pageIntervals.push([n[1],void 0]),s=0))},appendBookkeeping:function(r){var s=0,n={};for(this.pageIntervals[this.pageIntervals.length-1][1]=this.comments.length,s=0;s<r.comments.length;s++)n=r.comments[s],this.idToIndex[n.id]=this.comments.length+1,this.comments.push(n);this.pageIntervals.push([this.pageIntervals[this.pageIntervals.length-1][1],void 0]),this.likeMap=a.merge(this.likeMap,r.likeMap),this.flagMap=a.merge(this.flagMap,r.flagMap),this.visibleComments+=r.visibleComments,this.reformat()},reformat:function(){this.formatted=this.formatter(this.comments,this.likeMap,this.flagMap)},like:function(r,s){var n=function(u){var h=this.getCommentById(r.id);h&&(h.likeCount+=1,this.reformat()),(r.success||e()).call(s||this,u)},i=function(u){(r.failure||e()).call(s||this,u)};a.Data.post({url:"/api/comment/LikeComment",secure:!0,data:{commentId:r.id},success:n,failure:i},this)},unlike:function(r,s){var n=function(i){var u=this.getCommentById(r.id);u&&(u.likeCount=Math.max(u.likeCount-1,0),this.reformat()),(r.success||e()).call(s||this,i)};a.Data.post({url:"/api/comment/UnlikeComment",secure:!0,data:{commentId:r.id},success:n,failure:r.failure},this)},flag:function(r,s){var n=function(u){var h=this.getCommentById(r.id);h&&(h.flagCount+=1,this.reformat()),(r.success||e()).call(s||this,u)},i=function(u){(r.failure||e()).call(s||this,u)};a.Data.post({url:"/api/comment/FlagComment",secure:!0,data:{commentId:r.id},success:n,failure:i},this)},_delete:function(r,s){var n=function(i){r.comments.forEach(function(u){this.removeCommentById(u.id)},this),this.visibleComments-=r.comments.length,this.totalComments-=r.comments.length,(r.success||e()).call(s||this,i)};a.Data.post({url:"/api/comment/admin/DeleteComments",secure:!0,data:{markAsSpam:r.spam,comments:a.Lang.isArray(r.comments)?r.comments:[r.comments]},success:n,failure:r.failure?a.bind(r.failure,s||this):void 0},this)},approve:function(r,s){var n=function(i){r.comments.forEach(function(u){var h=this.getCommentById(u.id);h&&(h.status=d().APPROVED)},this),this.totalComments+=1,(r.success||e()).call(s||this,i)};a.Data.post({url:"/api/comment/admin/ApproveComments",secure:!0,data:{comments:a.Lang.isArray(r.comments)?r.comments:[r.comments]},success:n,failure:r.failure?a.bind(r.failure,s||this):void 0},this)},unflag:function(r,s){var n=function(u){var h=this.getCommentById(r.id);h&&(h.flagCount=Math.max(h.flagCount-1,0),this.reformat()),(r.success||e()).call(s||this,u)},i=function(u){(r.failure||e()).call(s||this,u)};a.Data.post({url:"/api/comment/UnflagComment",secure:!0,data:{commentId:r.id},success:n,failure:i},this)},post:function(r,s){var n={targetId:this.target,targetType:this.targetType,body:r.body,replyToId:r.replyTo,authorName:r.authorName||"",authorEmail:r.email||"",authorUrl:r.authorUrl||""},i=function(u){u.comment.status===d().APPROVED&&(this.addCommentData(u.comment),this.visibleComments+=1,this.totalComments+=1,r.replyTo||(this.topLevelComments+=1),this.reformat()),(r.success||e()).call(s||this,u)};a.Data.post({url:"/api/comment/CreateComment",secure:!!Static.SQUARESPACE_CONTEXT.authenticatedAccount,data:n,success:i,failure:r.failure?a.bind(r.failure,s||this):void 0},this)},getPage:function(r,s,n){s<=this.numPages&&this.get({sortBy:r.order,page:s,success:r.success,failure:r.failure},n)},getSince:function(r,s,n){this.get({since:s,success:r.success,failure:r.failure},n)},getThread:function(r,s){var n=function(u){this.currentThreadRoot=r.commentId;var h=u.comments[0].comment.depth;u.comments=a.Array.map(u.comments,function(g){return g.comment}),u.comments.forEach(function(g){g.depth=g.depth-h}),this.formattedThread=this.formatter(u.comments,{},{}),a.Lang.isFunction(r.success)&&r.success.call(s||this,u)},i=function(u){a.Lang.isFunction(r.failure)&&r.failure.call(s||this,u)};a.Data.get({url:"/api/comment/GetThread",secure:this.useSecure(),data:{sortBy:r.order,commentId:r.commentId},success:n,failure:i},this)},get:function(r,s){var n=function(i){this.page=r.page,r.page<=1?this.fullBookkeeping(i):r.page>1&&this.appendBookkeeping(i),r.success&&r.success.call(s||this,i)};a.Data.get({url:"/api/comment/GetComments",secure:this.useSecure(),data:{targetId:this.target,targetType:this.targetType,since:r.since||"",page:r.page,sortBy:r.order},success:n,failure:r.failure},this)},getLikesAndFlags:function(r,s){var n=a.Array.map(this.comments,function(i){return i.id});a.Data.get({url:"/api/comment/GetLikesFlags",secure:this.useSecure(),data:{ids:n},success:function(i){r.success&&a.Lang.isFunction(r.success)&&r.success.call(s||this,i)},failure:function(i){r.failure&&a.Lang.isFunction(r.failure)&&r.failure.call(s||this,i)}})}})},"1.0",{requires:["squarespace-util"]})},649948:function(c,b,t){"use strict";var l=t(714487),d=t(860921),o=t.n(d),e=t(994336),a=t.n(e),r=t(24175),s=t.n(r),n=t(784874),i=t(254345),u=t.n(i),h=t(726692),g=t.n(h),p=t(995620),f=t.n(p),m=t(884071),_=t.n(m),v=t(291910),E=t(698137),S=t(540767),y=t.n(S),C=t(187304),O=t(312713);YUI.add("squarespace-comments",function(A){A.namespace("Squarespace"),A.Squarespace.Comments=Class.create({initialize:function(D){this.events=[],this.settings={likesAllowed:D.likesAllowed,flagsAllowed:D.flagsAllowed,threaded:D.threaded,approvalRequired:D.approvalRequired,allowAnon:D.allowAnon,avatarsHidden:!D.avatarsOn,readOnly:D.readOnly},this.commentData=new A.Squarespace.CommentData({target:D.identifier,targetType:D.type,publicCommentCount:D.publicCommentCount,settings:this.settings,formatter:A.bind(this.formatData,this)}),this.localizedStrings={addComment:(0,l.t)("Add Comment",null,{project:"website.comments"}),approve:(0,l.t)("Approve",null,{project:"website.comments"}),awaitingModeration:(0,l.t)("Awaiting Moderation",null,{project:"website.comments"}),comments:(0,l.t)("Comments",null,{project:"website.comments"}),commentsRestricted:(0,l.t)("Comments Restricted",null,{project:"website.comments"}),delete:(0,l.t)("Delete",null,{project:"website.comments"}),edit:(0,l.t)("Edit",null,{project:"website.comments"}),leastLiked:(0,l.t)("Least Liked",null,{project:"website.comments"}),leaveACommentHere:(0,l.t)("Leave a comment here.",null,{project:"website.comments"}),lessLiked:(0,l.t)("Less Liked",null,{project:"website.comments"}),like:(0,l.t)("Like",null,{project:"website.comments"}),likes:(0,l.t)("Likes",null,{project:"website.comments"}),mostLiked:(0,l.t)("Most Liked",null,{project:"website.comments"}),newestFirst:(0,l.t)("Newest First",null,{project:"website.comments"}),oldestFirst:(0,l.t)("Oldest First",null,{project:"website.comments"}),pending:(0,l.t)("Pending",null,{project:"website.comments"}),preview:(0,l.t)("Preview",null,{project:"website.comments"}),postComment:(0,l.t)("Post Comment\u2026",null,{project:"website.comments"}),postReply:(0,l.t)("Post Reply",null,{project:"website.comments"}),reply:(0,l.t)("Reply",null,{project:"website.comments"}),replyToThisCommentHere:(0,l.t)("Reply to this comment here.",null,{project:"website.comments"}),report:(0,l.t)("Report",null,{project:"website.comments"}),unmoderated:(0,l.t)("Unmoderated",null,{project:"website.comments"})},this.targetId=D.identifier,this.params=D||{design:{}},this.replyCompleteEvents={},this.threadState=!1,this.lastSortTime=new Date,this.lastHashChangeTime=new Date,this.PaginationModes={EXTEND:1,PAGE:2},this.containerEl=A.one(this.params.containerEl),this.params.paginationMode=this.PaginationModes.EXTEND,this.type=n.Z.COMMENT,this.currentPage=1,this.maxComments=50,this.sortOrderLookup=[null],this.sortOrderLookup.push(this.localizedStrings.oldestFirst,this.localizedStrings.newestFirst,this.localizedStrings.mostLiked,this.localizedStrings.leastLiked),this.sortOrder=this.params.sortType,this.commentsEl=A.Node.create('<div class="comments-content"><div class="comment-list"></div></div>'),(this.settings.readOnly||!this.settings.allowAnon)&&this.commentsEl.addClass("read-only"),this.commentsEl.appendTo(this.containerEl),this.loadMoreNode=A.Node.create('<div class="load-more"><div class="view-more-btn">'+(0,l.t)("Load More Comments",null,{project:"website.comments"})+"</div></div>"),this.fullViewNode=A.Node.create('<div class="full-view-btn">'+(0,l.t)("View full comment thread",null,{project:"website.comments"})+"</div>"),this.history=new A.HistoryHash,this.events.push(this.commentsEl.delegate("click",this.onReplyToggleClick,".reply",this),this.commentsEl.delegate("click",this.onLikeClick,".comment:not(.liked):not(.read-only) .like",this),this.commentsEl.delegate("click",this.onUnlikeClick,".comment.liked:not(.read-only) .like",this),this.commentsEl.delegate("click",this.onFlagClick,".comment:not(.flagged):not(.read-only) .flag",this),this.commentsEl.delegate("click",this.onUnflagClick,".comment.flagged:not(.read-only) .flag",this),this.commentsEl.delegate("click",this.onApproveClick,".comment.unmoderated:not(.read-only) .approve",this),this.commentsEl.delegate("click",this.onDeleteClick,".comment:not(.read-only) .delete",this),this.commentsEl.delegate("click",this.replyBtnOnClick,".reply-area-wrapper .comment-btn:not(.read-only)",this),this.commentsEl.delegate("click",this.togglePreview,".reply-area-wrapper .preview-comment",this),this.history.on("commentIdChange",this.commentIdHashOnChange,this),this.history.on("commentIdRemove",this.commentIdHashOnRemove,this),this.containerEl.delegate("click",function(){var T,B;return function(N){SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,reloadAfterLogin:!1,allowAnonymous:this.settings.allowAnon,overlayOpacity:.5});var P=function(){this.onLoading(),this.commentData.visibleComments=0,this.retrieveComments({onSuccess:function(x){this.fullDataRender(x)},page:1,order:this.sortOrder},this),T.detach(),B.detach()};B=SQUARESPACE_LOGIN.once("guestLogin",P,this)}}(),".squarespace-comment-login",this),this.containerEl.delegate("focus",function(){this.setAttribute("data-edited",!0)},".comment-input"),this.containerEl.delegate("blur",function(){this.get("value")===""&&this.setAttribute("data-edited",!1)},".comment-input"),this.containerEl.delegate("focus",function(T){T.target.setAttribute("data-edited",!0)},".new-comment-area textArea",this),this.containerEl.delegate("click",this.extendComments,".view-more-btn",this),this.containerEl.delegate("click",this.fullViewOnClick,".full-view-btn",this),this.containerEl.delegate("click",this.commentBtnOnClick,".top-level-comment-area .comment-btn:not(.read-only)",this),this.containerEl.delegate("click",this.togglePreview,".top-level-comment-area .preview-comment",this),this.containerEl.delegate("change",function(T){this.sort(T.target.get("value"))},".hidden-ordering",this))},destroy:function(){this.events.forEach(function(D){D.detach()})},userHasAccessPermission:function(D){return A.Object.getValue(Static,["SQUARESPACE_CONTEXT","accessPermissions"])?A.Array.indexOf(Static.SQUARESPACE_CONTEXT.accessPermissions,D)>=0:!1},doAfterLogin:function(D,T,B){var N,P,x;P=D.once("login",function(){T.call(this),x.detach(),N.detach()},B),x=D.once("guestLogin",function(){P.detach(),N.detach()}),N=D.once("cancel",function(){P.detach(),x.detach()})},doAfterGuestLogin:function(D,T,B){var N,P,x;P=D.once("guestLogin",function(){T.call(this),x.detach(),N.detach()},B),x=D.once("login",function(){P.detach(),N.detach()}),N=D.once("cancel",function(){P.detach(),x.detach()})},fullViewOnClick:function(){this.history.addValue("commentId",null)},updateTopLevelButton:function(){var D=A.one(".top-level-comment-area .comment-btn"),T={newCommentAreaTop:{authenticatedAccount:SQUARESPACE_LOGIN.account===null?void 0:SQUARESPACE_LOGIN.account},comments:[{}]},B=this.renderToFragment(T),N=B.one(".top-level-comment-area .comment-btn");D&&(D.ancestor(".comment-btn-wrapper").append(N),D.remove(!0))},updateReplyAreaButtons:function(){var D={comments:[{authenticatedAccount:SQUARESPACE_LOGIN.account}]},T=this.renderToFragment(D).one(".reply-area-wrapper .comment-btn");T&&this.commentsEl.all(".reply-area-wrapper .comment-btn").each(function(B){B.insert(T.cloneNode(!0),"after"),B.remove(!0)})},refreshCommentPostButtons:function(){this.updateTopLevelButton(),this.updateReplyAreaButtons()},generatePreview:function(D){var T=A.Squarespace.Escaping.escapeForHtml(D.get("value")),B={comments:[{}]},N=null,P=null,x=B.comments[0],R=!D.ancestor(".reply-area-wrapper"),w,k;return R?w=0:(k=A.one('.comment[data-commentId="'+D.ancestor(".reply-area-wrapper").getAttribute("data-commentId")+'"]'),w=k.hasAttribute("data-depth")?parseInt(k.getAttribute("data-depth"),10)+1:1),x.body=v.T.sanitize((0,C.Z)(T,!0)),x.memberAccount=A.clone(SQUARESPACE_LOGIN.account),x.authorName=(SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:a().get("displayName"))||(0,l.t)("Not Logged In",null,{project:"website.comments"}),x.addedOn=new Date().getTime(),x.depth=w,P=this.renderToFragment(this.scatterData(B)),N=P.one(".comment"),N.addClass("comment-preview"),R?N.addClass("top-level"):(N.setAttribute("data-previewId",k.getAttribute("data-commentId")),N.setAttribute("data-replyTo",k.getAttribute("data-commentId"))),P},replyBtnOnClick:function(D){var T=D.target.ancestor(".reply-area-wrapper"),B=T.getAttribute("data-commentId"),N=A.one('.comment[data-commentId="'+B+'"]'),P=T.one("textArea"),x=P.get("value");if(x.trim()==="")this.showEmptyText();else{var R=this.injectReply(x,N);this.replyTo(T.getAttribute("data-commentId"),x,R,P)}D.stopImmediatePropagation()},togglePreview:function(D){var T=D.target.ancestor(".reply-area-wrapper"),B;T?B=T.one("textArea"):B=D.target.ancestor(".top-level-comment-area").one("textArea"),B.get("value")!==""&&(D.target.getAttribute("data-state")==="open"?(D.target.setAttribute("data-state","closed"),this.hidePreview(B)):(D.target.setAttribute("data-state","open"),this.showPreview(B)))},showPreview:function(D){if(D){var T=this.generatePreview(D),B=T.one(".comment"),N=D.ancestor(".reply-area-wrapper"),P=D.ancestor(".input"),x=!N,R,w,k;B.wrap('<div class="new comment-preview-wrapper closed"></div>'),k=B.ancestor(".comment-preview-wrapper"),x?(k.addClass("top-level"),A.one(".comment-list").prepend(k)):(N.insert(k,"after"),k.setAttribute("data-commentId",N.getAttribute("data-commentId"))),D.ancestor(".new-comment-area").one(".preview-comment").set("innerHTML",this.localizedStrings.edit),P.setStyle("height",P.get("offsetHeight")),R=new A.Anim({node:P,duration:.3,easing:A.Easing.easeOutStrong,to:{height:0}}),R.on("start",function(){this._node.setStyle("overflow","hidden")}),R.run(),w=new A.Anim({node:k,duration:.3,easing:A.Easing.easeOutStrong,to:{height:B.get("offsetHeight")+parseInt(B.getComputedStyle("paddingBottom"),10)+parseInt(B.getComputedStyle("marginBottom"),10)}}),w.on("end",function(){this._node.addClass("open")}),w.run()}},hideAllPreviews:function(){A.all(".comment-preview-wrapper:not(.top-level)").each(function(D){var T=new A.Anim({node:D,duration:.3,easing:A.Easing.easeOutStrong,to:{height:0}});T.on("end",function(){this._node.remove(!0)}),T.run()},this),A.all('.preview-comment[data-state="open"]:not(.top-level-preview-btn)').each(function(D){D.setAttribute("data-state","closed"),D.set("innerHTML",this.localizedStrings.preview)},this)},hidePreview:function(D){if(D){var T=D.ancestor(".reply-area-wrapper"),B,N,P,x;T?P=A.one('.comment-preview[data-previewId="'+T.getAttribute("data-commentId")+'"]'):P=A.one(".comment-preview.top-level"),D.ancestor(".new-comment-area").one(".preview-comment").set("innerHTML",this.localizedStrings.preview),B=new A.Anim({node:D.ancestor(".input"),duration:.3,easing:A.Easing.easeOutStrong,to:{height:D.get("offsetHeight")}}),B.on("end",function(){this._node.setStyle("overflow","visible")}),B.run(),P&&(x=P.ancestor(".comment-preview-wrapper"),N=new A.Anim({node:x,duration:.3,easing:A.Easing.easeOutStrong,to:{height:0}}),N.on("start",function(){this._node.removeClass("open"),this._node.addClass("closed")}),N.on("end",function(){this._node.remove(!0)}),N.run())}},getTemplateData:function(D,T){A.Data.get({url:"/api/template/GetTemplateSchema",data:{type:n.Z.COMMENTS},success:function(B){this._template=B.html,D.call(this)},failure:T},this)},updateLikedFlaggedState:function(){(this.settings.flagsAllowed||this.settings.likesAllowed)&&this.commentData.getLikesAndFlags({success:function(D){var T=A.one(".comment-list");T.all(".comment").each(function(B){var N=B.getAttribute("data-commentId");this.settings.flagsAllowed&&(D.flagMap[N]?B.addClass("flagged"):B.removeClass("flagged")),this.settings.likesAllowed&&(D.likeMap[N]?B.addClass("liked"):B.removeClass("liked"))},this)}},this)},create:function(){this.userHasAccessPermission(s().CONFIG_ACTIVITY_COMMENTS)&&(this.moderationMode=!0),this.getTemplateData(function(){var D=this.history.get("commentId");A.Lang.isUndefined(D)?(this.onLoading(),this.retrieveComments({onSuccess:function(T){this.fullDataRender(T)},page:1,order:this.sortOrder})):(this.onLoading(),this.retrieveThread({onSuccess:this.threadRender,onFailure:function(T){this.onLoading(),this.retrieveComments({onSuccess:function(B){this.fullDataRender(B)},page:1,order:this.sortOrder})},order:this.sortOrder,commentId:D}))},function(){})},updateCommentCounts:function(){var D=this.renderToFragment({visibleComments:this.commentData.visibleComments,totalComments:this.commentData.totalComments,comments:[]});this.commentData.visibleComments===0?this.containerEl.addClass("empty"):this.containerEl.removeClass("empty"),A.one(".comment-count").set("innerHTML",D.one(".comment-count").get("innerHTML"))},truncateAt:function(D,T){if(!D)return"";if(T===void 0)return D;var B=D.split(" ").slice(0,T).join(" ");return B+(B.length>T?B.substr(B.length-1)==="."?"..":"\u2026":"")},formatAccountData:function(D){return{userAvatarUrl:(D.avatarAssetUrl?D.avatarAssetUrl:"/universal/images-v6/default-avatar.png")+"?format=50w",userHref:D.websiteUrl?"http://"+A.Squarespace.Escaping.escapeForHtml(D.websiteUrl):"",userHtml:D.websiteUrl||"",userName:A.Escape.html(D.displayName||""),userBio:this.truncateAt(A.Squarespace.Escaping.escapeForHtml(D.bio,60))||""}},buildInfoPane:function(D){var T=this.formatAccountData(D),B=A.Node.create('<div class="squarespace-user-info"></div>'),N=A.Node.create('<div class="user-info-header"></div>'),P=A.Node.create('<div class="avatar"><img src="'+T.userAvatarUrl+'" /></div>'),x=A.Lang.sub('<div class="info"><div class="name">{userName}</div><a class="website" href="{userHref}">{userHtml}</a></div>',T),R=A.Node.create(x),w=A.Node.create('<div class="user-info-body"><p>'+T.userBio+"</p></div>"),k=A.Node.create('<div class="user-social-opts"><div class="social-leftcol"></div><div class="social-rightcol"></div><div class="clearfix"></div></div>');return N.append(P).append(R),B.append(N).append(w).append(k),B},showClickOverlay:function(){var D=A.one(document),T=D.get("winHeight"),B=D.get("winWidth");this.overlayEl=A.Node.create('<div class="user-profile-overlay"></div>'),this.overlayEl.setStyles({position:"fixed",background:"#000",height:T+"px",width:B+"px",opacity:"0",top:"0px",left:"0px",zIndex:999}),A.one(A.config.doc.body).append(this.overlayEl),A.on("click",this.hideUserProfileFlyout,this.overlayEl,this)},showUserProfileFlyout:function(D){if(!D.target.hasClass("squarespace-comment-user-flyout")&&!D.target.ancestor(".squarespace-comment-user-flyout")&&!this.flyoutOpen){var T=D.target.ancestor(".comment").getAttribute("data-commentid"),B=this.commentData.getCommentById(T),N=B.memberAccount;if(!N)return;var P=A.Node.create('<div class="squarespace-comment-user-flyout"></div>');P.append(this.buildInfoPane(N)),P.append('<div class="squarespace-user-activity"><div class="squarespace-activity-header"><div class="title">'+(0,l.t)("Activity",null,{project:"website.comments"})+'</div><div class="description">'+(0,l.t)("Comments and likes across the Squarespace platform",null,{project:"website.comments"})+'</div></div><div class="feed"></div></div>'),P.append('<div class="squarespace-comment-user-clearfix"></div>');var x=A.one(document.body);x.append(P),P.setStyles({position:"fixed",left:"50%",top:"50%",opacity:0,zIndex:1e3,transform:"scale(.95)"}),P.setStyles({marginTop:-(parseInt(P.get("offsetHeight"),10)/2),marginLeft:-(parseInt(P.get("offsetWidth"),10)/2)}),P.transition({WebkitTransform:{duration:.3,easing:"ease-out",value:"scale(1)"},opacity:{duration:.3,easing:"ease-out",value:1}})}this.flyoutOpen=!0,this.showClickOverlay(),D.stopImmediatePropagation()},hideUserProfileFlyout:function(D){if(this.flyoutOpen){var T=A.one(".squarespace-comment-user-flyout");T&&T.transition({WebkitTransform:{duration:.3,easing:"ease-out",value:"scale(1.08)"},opacity:{duration:.4,easing:"ease-out",value:0},on:{end:A.bind(function(){T.remove(!0),D.target.remove(!0),this.flyoutOpen=!1},this)}})}},getThreadNodes:function(D,T){var B=D.getAttribute("data-commentId");T.push(D),A.all('.comment[data-replyTo="'+B+'"]').each(function(N){this.getThreadNodes(N,T)},this)},actualDelete:function(D,T,B){var N=D.target.ancestor(".comment"),P=N.getAttribute("data-commentId"),x,R,w=this.lastSortTime,k=this.lastHashChangeTime,q=function(z){w===this.lastSortTime&&k===this.lastHashChangeTime&&(x=A.Node.create('<div class="delete-anim-wrapper"></div>'),N.insert(x,"after"),B.forEach(function(j){x.append(j);var X=A.one('.reply-area-wrapper[data-commentId="'+j.getAttribute("data-commentId")+'"]');X&&X.remove(!0)}),R=new A.Anim({node:x,duration:.5,easing:A.Easing.easeOutStrong,to:{height:0}}),R.on("end",function(){x.remove(!0),B.length>1&&this.commentData.removeCommentsByIds(B.map(function(j){return j.getAttribute("data-commentId")}).filter(function(j){return j!==P})),this.updateCommentCounts()},this),R.run())},F=function(z){z.authorizationFail&&new A.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Authorization Failure",null,{project:"website.comments"}),"strings.message":(0,l.t)("You are not allowed to perform that action.",null,{project:"website.comments"})})};this.commentData._delete({comments:[P],spam:T,success:q,failure:F},this)},onDeleteClick:function(D){var T,B=D.target.ancestor(".comment"),N=function(){var q=[];return this.getThreadNodes(B,q),q},P=N.call(this),x=function(){P.forEach(function(q){if(q.hasClass("unmoderated"))q.removeClass("pending-delete");else{var F=new A.Anim({node:q,duration:.3,easing:A.Easing.easeOutStrong,to:{opacity:1}});F.on("end",function(){this._node.removeClass("pending-delete")}),F.run()}})},R=function(){x(),this.actualDelete(D,!0,P)},w=function(){x(),this.actualDelete(D,!1,P)},k=function(){x()};P.forEach(function(q){if(q.hasClass("unmoderated"))q.addClass("pending-delete");else{var F=new A.Anim({node:q,duration:.3,easing:A.Easing.easeOutStrong,to:{opacity:.5}});F.on("end",function(){this._node.addClass("pending-delete")}),F.run()}}),T=new A.Squarespace.Widgets.Confirmation({style:A.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,"strings.reject":(0,l.t)("Delete",null,{project:"website.comments"}),"strings.confirm":(0,l.t)("Delete & Report Spam",null,{project:"website.comments"}),"strings.title":(0,l._6)({one:"Delete Comment",other:"Delete {%n} Comments"},P.length,null,{project:"website.comments",notes:"oldKey: deleteCommentTitle"}),"strings.message":(0,l._6)({one:"Are you sure you wish to delete this comment?",other:"Are you sure you wish to delete these comments?"},P.length,null,{project:"website.comments",notes:"oldKey: deleteCommentMessage"})}),T.on("cancel",k,this),T.on("reject",w,this),T.on("confirm",R,this)},onApproveClick:function(D){var T=D.target.ancestor(".comment");this.approve(T.getAttribute("data-commentId"),T),D.stopImmediatePropagation()},approve:function(D,T){var B=function(){this.updateCommentCounts()},N=function(P){P.error&&new A.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Failed to Approve Comment",null,{project:"website.comments"}),"strings.message":P.error})};T.removeClass("unmoderated"),this.commentData.approve({comments:[D],success:B,failure:N},this)},onUnlikeClick:function(D){var T=D.target.ancestor(".comment");this.unlike(T.getAttribute("data-commentId"),T),D.stopImmediatePropagation()},unlike:function(D,T){var B=T.one(".likes"),N=function(){if(B){var x={comments:[{likesAllowed:{likeCount:this.commentData.getCommentById(D).likeCount}}]},R=this.renderToFragment(this.scatterData(x)).one(".likes");B.replace(R)}},P=function(x){x.error&&new A.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Failed to Unlike Comment",null,{project:"website.comments"}),"strings.message":x.error})};T.removeClass("liked"),this.commentData.unlike({id:D,success:N,failure:P},this)},onFlagClick:function(D){var T=function(){var B=D.target.ancestor(".comment");this.flag(B.getAttribute("data-commentId"),B)};new A.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("Flag Comment",null,{project:"website.comments"}),"strings.message":(0,l.t)("Are you sure you wish to flag this comment as inappropriate?",null,{project:"website.comments"})}).on("confirm",T,this),D.stopImmediatePropagation()},flag:function(D,T){var B=function(){},N=function(P){T.removeClass("flagged"),P.error&&new A.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Failed to Flag Comment",null,{project:"website.comments"}),"strings.message":P.error})};T.addClass("flagged"),this.commentData.flag({id:D,success:B,failure:N},this)},onUnflagClick:function(D){var T=D.target.ancestor(".comment");this.unflag(T.getAttribute("data-commentId"),T),D.stopImmediatePropagation()},unflag:function(D,T){var B=function(){},N=function(P){T.addClass("flagged"),P.error&&new A.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Failed to Un-flag Comment",null,{project:"website.comments"}),"strings.message":P.error})};T.removeClass("flagged"),this.commentData.unflag({id:D,success:B,failure:N},this)},onLikeClick:function(D){var T=D.target.ancestor(".comment");this.like(T.getAttribute("data-commentId"),T),D.stopImmediatePropagation()},like:function(D,T){var B=T.one(".likes"),N=T.getAttribute("data-commentid"),P=function(){if(B&&!A.Lang.isNull(T._node)){var R={comments:[{likesAllowed:{likeCount:this.commentData.getCommentById(N).likeCount}}]},w=this.renderToFragment(this.scatterData(R)).one(".likes");B.replace(w)}},x=function(R){T.removeClass("liked"),R.error&&new A.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Failed to Like Comment",null,{project:"website.comments"}),"strings.message":R.error})};T.addClass("liked"),this.commentData.like({id:D,success:P,failure:x},this)},addLoadMoreControls:function(D){var T=A.one(".load-more");T&&T.remove(!0),!this.threadState&&this.commentData.page<this.commentData.numPages&&this.containerEl.append(this.loadMoreNode.cloneNode(!0))},addFullViewControls:function(D){var T=A.one(".full-view-btn");T&&T.remove(!0),this.threadState&&this.containerEl.one(".comment-list").insert(this.fullViewNode.cloneNode(!0),"before")},onReplyToggleClick:function(D){var T=D.target.ancestor(".comment"),B=T.getAttribute("data-commentid"),N=A.one('.reply-area-wrapper[data-commentid="'+B+'"]'),P=A.one(A.config.doc.body),x,R,w=A.bind(function(z,j){z&&(z.setStyles({overflow:"hidden",height:N.get("offsetHeight")}),z.one(".input").setStyle("height","auto"),A.one('.comment[data-commentid="'+z.getAttribute("data-commentId")+'"]').fire("reply-close"),x=new A.Anim({node:N,duration:.3,easing:A.Easing.easeOutStrong,to:{height:0}}),x.on("end",function(){},this),x.run())},this),k=A.bind(function(z){if(z){var j,X;X=z.one(".new-comment-area").cloneNode(!0),X.setStyles({visibility:"hidden",display:"block",position:"absolute"}),T.append(X),j=X.get("offsetHeight"),X.remove(!0),A.one('.comment[data-commentid="'+z.getAttribute("data-commentId")+'"]').fire("reply-open"),this.hideAllPreviews(),R=new A.Anim({node:z,duration:.3,easing:A.Easing.easeOutStrong,to:{height:Math.max(j,190)+15}}),R.on("end",function(){this._node.setStyle("height","auto");var J=this._node.getY()+this._node.get("offsetHeight")-(P.get("docScrollY")+P.get("winHeight")),Q=P.get("scrollTop"),ie;J>=0&&(ie=new A.Anim({node:P,duration:.3,easing:A.Easing.easeOutStrong,to:{scrollTop:Q+J}}),ie.run())}),R.run()}},this),q=function(z){return z.hasClass("reply-open")};if(q(T))T.removeClass("reply-open"),this.hideAllPreviews(),w(N);else{N.one(".reply-area").setAttribute("replyid",B),A.all(".comment.reply-open").each(function(z){z.removeClass("reply-open");var j=A.one('.reply-area-wrapper[data-commentid="'+z.getAttribute("data-commentid")+'"]');w(j)});var F=N.one("textArea");this.replyCompleteEvents[T.getAttribute("data-commentId")]||(this.replyCompleteEvents[T.getAttribute("data-commentId")]=this.once("reply-complete",function(z){w(N,function(){this.one(".input").setStyle("height","auto")}),this.replyCompleteEvents[T.getAttribute("data-commentId")]=null},this)),F.on("focus",function(){this.setAttribute("data-edited",!0)}),F.on("blur",function(){this.get("value")===""&&this.setAttribute("data-edited",!1)}),T.addClass("reply-open"),k(N)}D.stopImmediatePropagation()},escapeComment:function(D){D.authorName=A.Squarespace.Escaping.escapeForHtml(D.authorName),D.authorUrl=A.Squarespace.Escaping.escapeForHtml(D.authorUrl),D.authorEmail=A.Squarespace.Escaping.escapeForHtml(D.authorEmail),D.memberAccount&&(D.memberAccount.displayName=A.Squarespace.Escaping.escapeForHtml(D.memberAccount.displayName),D.memberAccount.bio=A.Squarespace.Escaping.escapeForHtml(D.memberAccount.bio))},addReplyArea:function(D){var T=A.one(".reply-area-wrapper"),B,N,P,x;T?(T.one(".preview-comment").setAttribute("data-state","closed").set("innerHTML",this.localizedStrings.preview),B=T.cloneNode(!0),B.setAttribute("data-commentId",D.getAttribute("data-commentId")),B.setAttribute("data-depth",D.getAttribute("data-depth")),x=B):(N={comments:[{id:D.getAttribute("data-commentId"),depth:D.getAttribute("data-depth")}]},P=this.renderToFragment(N),x=P.one(".reply-area-wrapper").cloneNode(!0)),x.setStyle("height",null),D.insert(x,"after")},prependComment:function(D){var T=(SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:a().get("displayName"))||(0,l.t)("Not Logged In",null,{project:"website.comments"}),B=A.one(".top-level-comment-area .comment-input"),N=A.one(".top-level.comment-preview"),P=!1,x,R;return N?(N.one(".author").set("innerHTML",A.Escape.html(T)),R=N.ancestor(".comment-preview-wrapper")):(N=this.generatePreview(B).one(".comment-preview"),P=!0,N.wrap('<div class="comment-preview-wrapper"></div>'),R=N.ancestor(".comment-preview-wrapper"),A.one(".comment-list").prepend(R)),N.removeClass("comment-preview"),N.addClass("pending"),A.one(".top-level-comment-area .preview-comment").setAttribute("data-state","closed"),this.hidePreview(B),P?(x=new A.Anim({node:R,duration:.3,easing:A.Easing.easeOutStrong,to:{height:N.get("offsetHeight")+parseInt(N.getComputedStyle("marginBottom"),10)}}),x.on("end",function(){N.unwrap()}),x.run()):N.unwrap(),this.containerEl.removeClass("empty"),this.makeMostRecent(N),N},injectReply:function(D,T){var B=T.getAttribute("data-commentId"),N=A.one('.comment-preview-wrapper[data-commentId="'+B+'"]'),P=A.one('.reply-area-wrapper[data-commentId="'+B+'"]').one("textArea"),x=(SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:a().get("displayName"))||(0,l.t)("Not Logged In",null,{project:"website.comments"}),R=!1,w;return N?(w=N.one(".comment-preview"),w.one(".author").set("innerHTML",A.Escape.html(x))):(w=this.generatePreview(P).one(".comment-preview"),R=!0,w.wrap('<div class="comment-preview-wrapper"></div>'),N=w.ancestor(".comment-preivew-wrapper")),T.hasAttribute("data-depth")&&w.setAttribute("data-depth",parseInt(T.getAttribute("data-depth"),10)+1),w.unwrap(),w.removeClass("comment-preview"),w.addClass("pending"),T.removeClass("reply-open"),T.fire("reply-complete"),R&&P.ancestor(".reply-area-wrapper").insert(w,"after"),this.makeMostRecent(w),this.fire("reply-complete",{node:w}),w},makeMostRecent:function(D){D.hasClass("comment")&&(A.all(".comment.pending.most-recent").each(function(T){T.ancestor(".most-recent-anim-wrapper")||T.removeClass("most-recent")}),D.addClass("most-recent"))},fullDataRender:function(){this.render(this.commentData.formatted),this.commentList=A.one(".comment-list")},threadRender:function(){this.render(this.commentData.formattedThread),this.commentList=A.one(".comment-list"),this.commentList.one('.comment[data-commentId="'+this.commentData.currentThreadRoot+'"]').addClass("target")},showEmptyText:function(){new A.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Enter Comment Text",null,{project:"website.comments"}),"strings.message":(0,l.t)("Enter text in the field above to post a comment.",null,{project:"website.comments"})})},showModerationNotification:function(){new A.Squarespace.Widgets.Alert({className:"okay","strings.title":(0,l.t)("Comment Awaiting Moderation",null,{project:"website.comments"}),"strings.message":(0,l.t)("Your comment has been successfully posted and is awaiting moderation.",null,{project:"website.comments"})})},showCommentSuccessNotification:function(){new A.Squarespace.Widgets.Alert({className:"okay","strings.title":(0,l.t)("Comment Posted",null,{project:"website.comments"}),"strings.message":(0,l.t)("Your comment has been successfully posted.",null,{project:"website.comments"})})},showPostCommentNotification:function(D){D.status===f().AWAITING_MODERATION&&this.showModerationNotification()},squarespaceAdminOnly:function(){return Static.SQUARESPACE_CONTEXT.website.cloneable&&!this.userHasAccessPermission(s().ADMIN)},commentBtnOnClick:function(D){var T=A.one(".top-level-comment-area .comment-input"),B=T.get("value");if(B.trim()==="")this.showEmptyText();else{var N=this.prependComment(B);this.submitTopLevel(B,N,T)}D.stopImmediatePropagation()},updateWithMemberAccount:function(D,T){if(T&&!SQUARESPACE_LOGIN.account){var B=D.one(".author");B&&B.setContent(A.Escape.html(T.displayName));var N=D.one(".avatar img");N&&T.avatarAssetUrl&&N.setAttribute("src",T.avatarAssetUrl)}},submitTopLevel:function(D,T,B){if(!(0,O.z)()){new A.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Comments disallowed",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("This browser does not accept cookies, which is a requirement for commenting. You can allow cookies by changing your browser's settings.",null,{project:"scripts-v6-root"})});return}this.setPosting(T,!this.approvalRequired||!this.moderationMode);var N=B.get("value");B.set("value",""),this.addComment({onSuccess:function(P){this.updateCommentCounts(),A.Lang.isNull(T._node)||(this.setPosted(T),T.setAttribute("data-commentId",P.comment.id),P.comment.status===f().APPROVED&&T.removeClass("pending"),this.addReplyArea(T),this.updateWithMemberAccount(T,P.comment.memberAccount),this.showPostCommentNotification(P.comment))},onFailure:function(P){if(B.set("value",N),P.errors)if(P.errors.anonEmail||P.errors.authorEmail||P.errors.authorName){var x=T.one(".author");P.errors.anonEmail&&new A.Squarespace.Widgets.Alert({className:"okay","strings.title":(0,l.t)("Comment Failed",null,{project:"scripts-v6-root"}),"strings.message":P.errors.anonEmail});var R=SQUARESPACE_LOGIN.once("cancel",this.removeMostRecentPending,this),w=function(){this.submitTopLevel(D,T,B);var k=a().get("displayName");k&&!A.Lang.isNull(x)&&!A.Lang.isNull(x._node)&&x.set("innerHTML",A.Escape.html(k)),R.detach()};this.doAfterGuestLogin(SQUARESPACE_LOGIN,w,this),SQUARESPACE_LOGIN.showCommentLogin()}else this.showPostCommentNotification(P.comment)},body:D},this)},removeMostRecentPending:function(){var D=A.one(".comment.most-recent"),T,B;D.ancestor(".comment-preview-wrapper")&&D.unwrap(),D.wrap('<div class="most-recent-anim-wrapper"></div>'),B=D.ancestor(".most-recent-anim-wrapper"),B.setStyles({overflow:"hidden",height:D.get("offsetHeight")}),T=new A.Anim({node:B,duration:.3,easing:A.Easing.easeOutStrong,to:{height:0}}),T.on("end",function(){this._node.remove(!0)}),T.run()},onLoading:function(){var D=A.one(".comments-content"),T=A.Node.create('<div class="comment-event-capture"></div>'),B;T.setStyles({position:"absolute",top:D.getY(),left:D.getX(),width:D.get("offsetWidth"),height:D.get("offsetHeight"),zIndex:1e3}),T.on("hover",function(N){N.stopImmediatePropagation()}),T.on("click",function(N){N.stopImmediatePropagation()}),A.one(A.config.doc.body).append(T),B=new A.Anim({node:D,duration:.3,easing:A.Easing.easeOutStrong,to:{opacity:.3}}),B.run()},commentIdHashOnChange:function(D){A.Lang.isNull(D.newVal)||A.Lang.isUndefined(D.newVal)||(this.threadState=!0,this.lastHashChangeTime=new Date,this.onLoading(),this.retrieveThread({commentId:D.newVal,order:this.sortOrder,onSuccess:function(){this.threadRender()}}))},commentIdHashOnRemove:function(){this.threadState=!1,this.lastHashChangeTime=new Date,this.onLoading(),this.retrieveComments({onSuccess:function(D){this.fullDataRender(D)},page:1,order:this.sortOrder},this)},retrieveThread:function(D,T){this.threadState=!0;var B=function(N){this.threadState=!1,D.onFailure.call(T||this,N)};this.commentData.getThread({order:D.order,commentId:D.commentId,success:D.onSuccess,failure:B},T||this)},retrieveComments:function(D,T){var B=A.bind(function(N){this.lastPollTime=new Date,D.onSuccess.call(T||this,N),this.updateLikedFlaggedState()},this);this.commentData.get({order:D.order,page:D.page,since:D.since||"",success:B,failure:D.onFailure},this)},addComment:function(D,T){var B=A.bind(function(P){A.Lang.isFunction(D.onSuccess)&&(D||o()).onSuccess.call(T||this,P)},this),N={body:D.body,replyTo:D.replyTo,success:B,failure:D.onFailure};N.authorName=SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.displayName:a().get("displayName")||"",N.email=SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.email:a().get("email")||"",N.authorUrl=SQUARESPACE_LOGIN.account?SQUARESPACE_LOGIN.account.websiteUrl:a().get("websiteUrl")||"",this.commentData.post(N,T||this)},setPosting:function(D,T){D.all(".posting-text").each(function(N){N.removeClass("visible")});var B=D.one(".posting-text"+(T?".moderated":""));B&&B.addClass("visible")},setPosted:function(D){var T=D.all(".posting-text");T&&T.each(function(B){B.removeClass("visible")})},replyTo:function(D,T,B,N){this.setPosting(B,!this.approvalRequired||!this.moderationMode);var P=N.get("value");N.set("value",""),this.addComment({body:T,replyTo:D,onSuccess:function(x){this.updateCommentCounts(),A.Lang.isNull(N._node)||(this.setPosted(B),B.setAttribute("data-commentId",x.comment.id),x.comment.status===f().APPROVED&&B.removeClass("pending"),this.addReplyArea(B),this.updateWithMemberAccount(B,x.comment.memberAccount),this.showPostCommentNotification(x.comment))},onFailure:function(x){if(N.set("value",P),x.errors&&(x.errors.anonEmail||x.errors.authorEmail||x.errors.authorName)){var R,w;x.errors.anonEmail&&new A.Squarespace.Widgets.Alert({className:"okay","strings.title":(0,l.t)("Comment Failed",null,{project:"scripts-v6-root"}),"strings.message":x.errors.anonEmail});var k=SQUARESPACE_LOGIN.once("cancel",this.removeMostRecentPending,this);R=function(){if(this.replyTo(D,T,B,N),A.one('.comment[data-replyTo="'+D+'"] .author').set("innerHTML",A.Escape.html(SQUARESPACE_LOGIN.account.displayName)),B.one(".author").set("innerHTML",A.Escape.html(SQUARESPACE_LOGIN.account.displayName)),SQUARESPACE_LOGIN.account.avatarAssetUrl){var q=B.one(".avatar");q.one("img").setAttribute("src",SQUARESPACE_LOGIN.account.avatarAssetUrl)}k.detach()},w=function(){this.replyTo(D,T,B,N);var q=a().get("displayName");A.Lang.isNull(q)||A.one('.comment[data-replyTo="'+D+'"] .author').set("innerHTML",A.Escape.html(q)),k.detach()},SQUARESPACE_LOGIN.configure({redirectAfterLogin:!1,reloadAfterLogin:!1,overlayOpacity:.5}),this.doAfterLogin(SQUARESPACE_LOGIN,R,this),this.doAfterGuestLogin(SQUARESPACE_LOGIN,w,this),SQUARESPACE_LOGIN.showCommentLogin()}}},this)},extendComments:function(){this.currentPage=this.currentPage+1;var D=this.lastSortTime,T=this.lastHashChangeTime;this.retrieveComments({order:this.sortOrder,onSuccess:function(){D===this.lastSortTime&&T===this.lastHashChangeTime&&this.attachComments.call(this)},page:this.currentPage},this)},attachComments:function(){var D=this.commentData.formatted;D.comments=this.commentData.getFormattedPage(this.currentPage);var T=this.renderToFragment(D);this.updateCommentCounts();var B=A.one(".comment-list");T.all(".comment, .reply-area-wrapper").each(function(N){B.append(N)}),this.containerEl.one(".load-more").remove(!0),this.addLoadMoreControls()},sort:function(D){var T=this.sortOrderLookup[D];a().set("commentSortOrder",D),this.sortOrder=D,this.currentPage=1;var B=function(N){this.lastSortTime=new Date,this.fullDataRender(N);var P=A.one(".comment-sort");P.one("span").set("innerHTML",T),P.one("select").set("value",this.sortOrder)};this.onLoading(),this.retrieveComments({order:this.sortOrder,onSuccess:B,page:this.currentPage})},formatData:function(D,T,B){var N,P={comments:[]},x;T=T||{},B=B||{};var R=this.squarespaceAdminOnly()||this.settings.readOnly;P.noAvatars=this.settings.avatarsHidden,P.likesAllowed=this.settings.likesAllowed,P.newCommentAreaTop={authenticatedAccount:SQUARESPACE_LOGIN.account,readOnly:R},P.commentSortTitle=this.sortOrderLookup[this.sortOrder],P.sortOldestFirst=this.sortOrder===u().OLDEST_FIRST,P.sortNewestFirst=this.sortOrder===u().NEWEST_FIRST,P.sortMostLiked=this.sortOrder===u().MOST_LIKED,P.sortLeastLiked=this.sortOrder===u().LEAST_LIKED,P.totalComments=this.commentData.totalComments,P.visibleComments=this.commentData.visibleComments;for(var w=0;w<D.length;w++)x=D[w],x.unmoderated=x.status===f().AWAITING_MODERATION,x.moderationMode=this.moderationMode,x.readOnly=R,x.flagsAllowed=this.settings.flagsAllowed,x.memberAccount&&(x.authorName=x.memberAccount.displayName,x.authorUrl=x.memberAccount.websiteUrl),x.authorUrl&&!/^https?:\/\//.test(x.authorUrl)&&(x.authorUrl="http://"+x.authorUrl),N=x.id,this.settings.likesAllowed&&(x.likesAllowed={likes:(0,l._6)({one:"{%n} Like",other:"{%n} Likes"},x.likeCount,null,{project:"scripts-v6-root",notes:"oldKey: numberOfLikes"})},T[N]&&(x.likesAllowed.liked=!0)),B[N]&&(x.flagged=!0),x.threaded=this.settings.threaded,P.comments.push(x);return P},scatterData:function(D){var T=this.squarespaceAdminOnly()||this.settings.readOnly;D.noAvatars=this.settings.avatarsHidden,D.likesAllowed=this.settings.likesAllowed,D.newCommentAreaTop={},D.newCommentAreaTop.readOnly=T,D.newCommentAreaTop.authenticatedAccount=SQUARESPACE_LOGIN.account,D.commentSortTitle=this.sortOrderLookup[this.sortOrder],this.commentData.totalComments===0&&(D.noComments=!0);for(var B={},N=0;N<D.comments.length;N++)B=D.comments[N],B.flagsAllowed=this.settings.flagsAllowed,B.moderationMode=this.moderationMode,B.memberAccount&&(B.authorName=B.memberAccount.displayName,B.authorUrl=B.memberAccount.websiteUrl),B.authorUrl&&(B.authorUrl.startsWith("http://")||B.authorUrl.startsWith("https://")||(B.authorUrl="http://"+B.authorUrl)),B.readOnly=T,this.settings.likesAllowed&&(B.likesAllowed||(B.likeCount=0,B.likesAllowed={likeCount:0}),B.likesAllowed.likeCount===0?B.likeCount=0:(B.likeCount=B.likesAllowed.likeCount,B.likesAllowed={likes:(0,l._6)({one:"{%n} Like",other:"{%n} Likes"},B.likeCount,null,{project:"scripts-v6-root",notes:"oldKey: numberOfLikes"})})),B.threaded=this.settings.threaded,D.likeMap&&D.likeMap[B.id]&&B.likesAllowed!==void 0&&(B.likesAllowed.liked=!0),D.flagMap&&D.flagMap[B.id]&&(B.flagged=!0),D.comments[N]=B;return D},render:function(D){var T=this.renderToFragment(D),B=this.commentsEl,N,P=A.one(".comment-event-capture");switch(D.comments.length?this.containerEl.removeClass("empty"):this.containerEl.addClass("empty"),B.empty(),B.append(T),N=new A.Anim({node:B,duration:.3,easing:A.Easing.easeOutStrong,to:{opacity:1}}),N.on("end",function(){P.remove(!0)}),N.run(),this.addFullViewControls(),this.params.paginationMode){case this.PaginationModes.PAGE:break;case this.PaginationModes.EXTEND:this.addLoadMoreControls();break;default:break}this.fire("render")},renderToFragment:function(D){for(var T=0;T<D.comments.length;T++)this.escapeComment(D.comments[T]),D.comments[T].body=v.T.sanitize(D.comments[T].body);D.localizedStrings=this.localizedStrings,D.commentAnonAllowed=this.settings.allowAnon;var B=A.Node.create((0,E.Z)(this._template,D)),N=B.all(".comment");return N.each(function(P,x){P.setAttribute("data-commentId",D.comments[x].id)}),B}}),A.augment(A.Squarespace.Comments,A.EventTarget);var I=null;A.config.win.Squarespace.onInitialize(A,function(){var D=A.config.win.Static,T=D.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname,B;if(T){if(B=A.one(".squarespace-comments"),B&&T&&T!==""){window.disqus_shortname=T;var N=B.getAttribute("id"),P="disqus_thread";N!==P&&B.setAttribute("id",P),A.Get.script("//"+T+".disqus.com/embed.js",{win:A.config.win})}return}B=A.one(".squarespace-comments");var x,R,w=D.SQUARESPACE_CONTEXT.websiteSettings;if(B&&!w.disqusShortname){var k=B.getAttribute("data-item-id"),q=B.getAttribute("data-collection-id"),F=parseInt(B.getAttribute("data-comment-state"),10),z=parseInt(B.getAttribute("data-public-comment-count"),10);if(x=k||q,x){R=k?_().ITEM:_().COLLECTION;var j=!1,X=!1;if(R===_().ITEM&&F===g().DISABLED&&(z===0?j=!0:X=!0),!j){var J=function(){A.use("squarespace-comments",function(Q){I=new Q.Squarespace.Comments({containerEl:B,identifier:x,type:R,publicCommentCount:z,likesAllowed:w.commentLikesAllowed,flagsAllowed:w.commentFlagsAllowed,threaded:w.commentThreaded,approvalRequired:w.commentApprovalRequired,allowAnon:w.commentAnonAllowed,avatarsOn:w.commentAvatarsOn,readOnly:X,sortType:a().get("commentSortOrder")||w.commentSortType}),I.create()})};J()}}}}),A.config.win.Squarespace.onDestroy(A,function(){I&&(I.destroy(),I=null)})},"1.0",{requires:["anim","event","history","node","selector-css3","squarespace-comment-data","squarespace-dialog","squarespace-dialog-description","squarespace-escaping-utils","squarespace-login","squarespace-ui-base","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-information","transition"]})},908126:function(c,b,t){"use strict";var l=t(586745),d=t.n(l),o=t(659519);YUI.add("squarespace-commerce-analytics",function(e){var a=new e.Base.create("commerceTrack",e.Base,[],{_reportSafelyForCart:function(i,u){e.Lang.isValue(u)?this._reportSafely(i,{cartId:u.get("id"),websiteId:u.get("websiteId")}):this._reportSafely(i)},_reportSafely:function(i,u){try{(0,o.Z)(i,u)}catch(h){console.error(h)}},itemViewed:function(i){this.fire("commerce-item-viewed",i)},itemAdded:function(i){this.fire("commerce-item-added",i)},handleCheckoutConfirmed:function(i){var u={orderId:i.id,cartId:i.purchasedCartId,testMode:i.testMode,websiteId:i.websiteId};this._reportSafely("commerce_checkout_order_confirmed",u),this.fire("commerce-checkout-confirmed",i)},checkoutConfirmed:function(i){Array.isArray(i)||(i=[i]),i.forEach(this.handleCheckoutConfirmed,this)}},{ATTRS:{}});e.namespace("Squarespace"),e.Squarespace.CommerceAnalytics=new a;var r=e.Base.create("commerceAnalytics",e.Base,[],{initializer:function(){this._events=[e.Squarespace.CommerceAnalytics.on("commerce-item-viewed",this._getProtectedTracker("onItemViewed"),this),e.Squarespace.CommerceAnalytics.on("commerce-item-added",this._getProtectedTracker("onItemAdded"),this),e.Squarespace.CommerceAnalytics.on("commerce-checkout-confirmed",this._getProtectedTracker("onCheckoutConfirmed"),this)]},destructor:function(){e.Array.invoke(this._events,"detach")},_getProtectedTracker:function(i){return function(u){try{this[i].call(this,u)}catch{}}},onItemViewed:function(i){},onItemAdded:function(i){},onCheckoutConfirmed:function(i){}},{ATTRS:{}}),s=e.Base.create("commerceAnalyticsGoogle",r,[],{onCheckoutConfirmed:function(i){function u(g){return g.decimalValue!==void 0?g.decimalValue:g.value}function h(){var g=[];return e.each(i.items,function(p){g.push({id:p.sku,name:p.productName,quantity:p.quantity,price:u(p.unitPrice)})}),g}window.gtag&&window.gtag("event","purchase",{transaction_id:i.id,value:u(i.grandTotal),shipping:u(i.shippingTotal),tax:u(i.taxTotal),items:h()})}},{ATTRS:{}});new s;var n=e.Object.getValue(Static,["SQUARESPACE_CONTEXT","item","recordType"]);n===d().STORE_ITEM&&e.Squarespace.CommerceAnalytics.itemViewed(Static.SQUARESPACE_CONTEXT.item)},"1.0",{requires:["array-invoke","base","event-custom","node","squarespace-util"]})},162995:function(c,b,t){"use strict";var l=t(994336),d=t.n(l),o=t(251917),e=t.n(o),a=t(296923),r=t.n(a),s=t(44348),n=t.n(s),i=t(714487),u=t(979221),h=t(587175),g=t(554468),p=t(461761),f=t.n(p),m=t(861288),_=t.n(m),v=t(985913);YUI.add("squarespace-commerce-utils",function(E){E.namespace("Squarespace"),E.Squarespace.Commerce={COMMERCE_DATE_TIME_FORMAT:"lllLT",isExpressCheckout:function(){return Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.expressCheckout},measurementStandard:function(){return E.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","storeSettings","measurementStandard"])},weightUnit:function(){return this.measurementStandard()===e().IMPERIAL?"lbs":"kg"},dimensionUnit:function(){return this.measurementStandard()===e().IMPERIAL?'"':"cm"},maxes:function(){return{productPrice:1e8,skuStringLength:60}},goToCheckoutPage:function(){if(!(d().get("hasCart")==="true"||E.Lang.isValue(d().get("CART")))){alert((0,i.t)("Either your session has expired or you do not have cookies enabled. We cannot continue to checkout.",null,{project:"scripts-v6-root"}));return}window.top.location="/commerce/goto-checkout"},goToSubscriptionPage:function(S){S&&(window.top.location="/checkout/subscribe?cartToken="+S)},goToDonatePage:function(S){var y="/checkout/donate?donatePageId="+S;(0,v.F)(E)?window.top.location=y:window.location=y},goToGiftCardPage:function(S,y){S=encodeURIComponent(S);var C=y?encodeURIComponent(y.sku):null,O=Static.SQUARESPACE_CONTEXT.website.id,A="/checkout/giftcard?websiteId="+O+"&giftCardProductId="+S+(y?"&sku="+C:"");(0,v.F)(E)?window.top.location=A:window.location=A},isValidUSZip:function(S){return/^\d{5}$/.test(S)},variantFormat:function(S,y){for(var C=[],O=S.optionValues,A=0;A<O.length;A++){var I=O[A].value;C.push(y?I:E.Escape.html(I))}return C.join(" / ")},moneyString:function(S,y){var C=g.Z.getStoreCurrency(),O=(0,h.Wy)(S,C),A={trimZeroFractions:y};return u.h.formatter.format(O,A)},priceString:function(S){var y=this.normalPrice(S),C=S.structuredContent;switch(C.productType){case r().PHYSICAL:case r().SERVICE:return this.onSale(S)?this.variedPrices(S)?(0,i.t)("from {startingPrice}",{startingPrice:this.moneyString(this.fromPrice(S))},{project:"scripts-v6-root"}):this.moneyString(this.salePrice(S))+' <span class="original-price">'+this.moneyString(y)+"</span>":this.variedPrices(S)?(0,i.t)("from {startingPrice}",{startingPrice:this.moneyString(this.fromPrice(S))},{project:"scripts-v6-root"}):this.moneyString(y);case r().DIGITAL:return this.onSale(S)?this.moneyString(this.salePrice(S))+' <span class="original-price">'+this.moneyString(y)+"</span>":this.moneyString(y);case r().GIFT_CARD:return this.variedPrices(S)?(0,i.t)("from {startingPrice}",{startingPrice:this.moneyString(y)},{project:"scripts-v6-root"}):this.moneyString(y);default:break}},isFiniteSubscriptionPlan:function(S){return!!Number(S.numBillingCycles)},merchantSubscriptionDetailsString:function(S){if(!S)return"";var y=S.billingPeriod.value,C=S.billingPeriod.unit.toLowerCase()+"ly",O=this.isFiniteSubscriptionPlan(S);if(O)var A=S.numBillingCycles;return f()({"magnitude == 1":{weekly:{indefinite:(0,i.t)("renews every week",null,{project:"scripts-v6-root"}),finite:(0,i.t)("renews every week for {p} payments",{p:A},{project:"scripts-v6-root"})},monthly:{indefinite:(0,i.t)("renews every month",null,{project:"scripts-v6-root"}),finite:(0,i.t)("renews every month for {p} payments",{p:A},{project:"scripts-v6-root"})},yearly:{indefinite:(0,i.t)("renews every year",null,{project:"scripts-v6-root"}),finite:(0,i.t)("renews every year for {p} payments",{p:A},{project:"scripts-v6-root"})}},"magnitude > 1":{weekly:{indefinite:(0,i.t)("renews every {n} weeks",{n:y},{project:"scripts-v6-root"}),finite:(0,i.t)("renews every {n} weeks for {p} payments",{n:y,p:A},{project:"scripts-v6-root"})},monthly:{indefinite:(0,i.t)("renews every {n} months",{n:y},{project:"scripts-v6-root"}),finite:(0,i.t)("renews every {n} months for {p} payments",{n:y,p:A},{project:"scripts-v6-root"})},yearly:{indefinite:(0,i.t)("renews every {n} years",{n:y},{project:"scripts-v6-root"}),finite:(0,i.t)("renews every {n} years for {p} payments",{n:y,p:A},{project:"scripts-v6-root"})}}},[y===1?"magnitude == 1":"magnitude > 1",C,O?"finite":"indefinite"])},getTotalStockRemaining:function(S){var y=S.structuredContent;if(y.productType===r().DIGITAL)return 1/0;for(var C=0,O=0;O<y.variants.length;O++){var A=y.variants[O];if(A.unlimited)return 1/0;C+=A.qtyInStock}return C},summaryFormFieldString:function(S){var y,C;E.Lang.isObject(S.values)&&(C=E.Array.reduce(E.Object.keys(S.values),{},function(N,P){return E.Object.setValue(N,P,E.Squarespace.Escaping.escapeForHtml(S.values[P]))}));function O(N){var P;switch(N){case"-2":P=(0,i.t)("Strongly Disagree",null,{project:"scripts-v6-root"});break;case"-1":P=(0,i.t)("Disagree",null,{project:"scripts-v6-root"});break;case"0":P=(0,i.t)("Neutral",null,{project:"scripts-v6-root"});break;case"1":P=(0,i.t)("Agree",null,{project:"scripts-v6-root"});break;case"2":P=(0,i.t)("Strongly Agree",null,{project:"scripts-v6-root"});break}return P}switch(S.type){case"name":y=C.First+" "+C.Last;break;case"phone":var A=C.Country;y="",A&&A!==""&&(y+="+"+A+" "),y+=C.Areacode+"-"+C.Prefix+"-"+C.Line;break;case"likert":y='<div style="padding-left:5px;">';for(var I in C){var D=C[I];y+='<div><span style="font-weight:bold;">'+I+":</span> "+O(D)+"</div>"}y+="</div>";break;case"address":y='<div style="padding-left:5px;"><div>'+C.Line1+"</div>";var T=C.Line2;T&&T!==""&&(y+="<div>"+T+"</div>"),y+="<div>"+C.City+", "+C.State+" "+C.Zip+" "+C.Country+"</div></div>";break;case"date":y=C.Month+"/"+C.Day+"/"+C.Year;break;case"time":y=(C.Hour||"00")+":"+(C.Minute||"00")+":"+(C.Second||"00")+" "+C.Ampm;break;case"checkbox":var B=S.value;!E.Lang.isValue(C)&&E.Lang.isValue(B)?C=[B]:E.Lang.isValue(C)&&(C=E.Object.values(C)),y=C.join(", ");break;default:y=E.Squarespace.Escaping.escapeForHtml(S.value);break}return y===""&&(y=(0,i.t)("N/A",null,{project:"scripts-v6-root"})),'<div style="margin-top:3px;"><span style="font-weight:bold;">'+S.rawTitle+":</span> "+y+"</div>"},hasVariants:function(S){var y=S.structuredContent;return y.productType!==r().DIGITAL&&y.variants.length>=1},variedPrices:function(S){var y=S.structuredContent;switch(y.productType){case r().PHYSICAL:case r().SERVICE:case r().GIFT_CARD:var C=y.variants;if(C.length<=1)return!1;for(var O=C[0],A=1;A<C.length;A++){var I=C[A];if(I.onSale!==O.onSale||O.onSale&&I.salePrice!==O.salePrice||I.price!==O.price)return!0}return!1;case r().DIGITAL:return!1}},onSale:function(S){var y=S.structuredContent;switch(y.productType){case r().PHYSICAL:case r().SERVICE:for(var C=y.variants,O=!1,A=0;A<C.length;A++){var I=C[A];if(I.onSale){O=!0;break}}return O;case r().DIGITAL:return y.onSale}},soldOut:function(S){var y=S.structuredContent;switch(y.productType){case r().PHYSICAL:case r().SERVICE:for(var C=y.variants,O=!0,A=0;A<C.length;A++){var I=C[A];if(I.unlimited||I.qtyInStock>0){O=!1;break}}return O;case r().DIGITAL:return!1}},normalPrice:function(S){var y=S.structuredContent,C=y.variants;switch(y.productType){case r().PHYSICAL:case r().SERVICE:if(C.length===0)return 0;for(var O=C[0].price,A=1;A<C.length;A++){var I=C[A].price;I>O&&(O=I)}return O;case r().DIGITAL:return E.Lang.isUndefined(y.priceCents)?0:y.priceCents;case r().GIFT_CARD:return C[0].price;default:break}},salePrice:function(S){var y=S.structuredContent;switch(y.productType){case r().PHYSICAL:case r().SERVICE:var C=y.variants;if(C.length===0)return 0;for(var O=null,A=0;A<C.length;A++){var I=C[A],D=I.salePrice;I.onSale&&(O===null||I.salePrice<O)&&(O=D)}return O;case r().DIGITAL:return E.Lang.isUndefined(y.salePriceCents)?0:y.salePriceCents}},fromPrice:function(S){var y=S.structuredContent;switch(y.productType){case r().PHYSICAL:case r().SERVICE:var C=y.variants;if(C.length===0)return 0;for(var O=C[0],A=O.onSale?O.salePrice:O.price,I=1;I<C.length;I++){var D=C[I],T=D.onSale?D.salePrice:D.price;T<A&&(A=T)}return A;case r().DIGITAL:return E.Lang.isUndefined(y.priceCents)?0:y.priceCents}},capitalizeFirst:function(S){S=S.toLowerCase();var y=S.split(new RegExp("\\s+")),C=E.Array.map(y,function(O){return O.charAt(0).toUpperCase()+O.substr(1)});return C.join(" ")},generateVariantId:function(){return _()()},generateSKU:function(){var S="",y="0123456789",C=function(){for(var O="",A=0;A<7;++A){var I=Math.floor(Math.random()*y.length);O+=y.charAt(I)}return"SQ"+O};return S=C(),S},getLabelForWorkflowState:function(S){switch(S){case n().PUBLISHED:return(0,i.t)("Available",null,{project:"scripts-v6-root"});case n().SCHEDULED:return(0,i.t)("Scheduled",null,{project:"scripts-v6-root"});case n().DRAFT:return(0,i.t)("Hidden",null,{project:"scripts-v6-root"});default:return(0,i.t)("Unsupported",null,{project:"scripts-v6-root"})}}}},"1.0",{requires:["escape","node","squarespace-escaping-utils"]})},968634:function(c,b,t){"use strict";var l=t(367915),d=t(960162),o=t(994336),e=t.n(o),a=t(936177),r=t.n(a),s=t(714487),n=t(240524),i=t(290601),u=t(304212),h=t(528215);function g(R,w,k){return w in R?Object.defineProperty(R,w,{value:k,enumerable:!0,configurable:!0,writable:!0}):R[w]=k,R}const p='[name="isJoinMailingList"]';class f{constructor(w){g(this,"el",void 0),g(this,"form",void 0),g(this,"productId",void 0),g(this,"variantId",void 0),g(this,"errorNode",void 0),g(this,"handleSubmitRestockNotification",F=>{F.preventDefault();const j=this.form.querySelector('[name="email"]').value,X=this.el.querySelector(p);if(this.clearError(),!j)this.showError((0,s.t)("Email cannot be blank",null,{project:"apps.Commerce"}));else if((0,n.isEmail)(j)){const J={isJoinMailingList:X&&X.checked,productId:this.productId,siteVisitorEmail:j,variantId:this.variantId};this.signUpForRestockNotificationWithReCaptcha(J)}else this.showError((0,s.t)("Email is invalid",null,{project:"apps.Commerce"}))}),g(this,"signUpForRestockNotificationWithReCaptcha",F=>{h.TJ(window,h.aI.PRODUCT_WAITLIST).then(z=>{F.recaptchaEnterpriseV3Token=z,this.invokeSignUpForRestockNotification(F)})}),g(this,"invokeSignUpForRestockNotification",F=>{(0,i.WX)(F).then(()=>{this.showSuccessMessage()}).catch(z=>{var j,X;const J=(z==null||(X=z.response)===null||X===void 0||(j=X.data)===null||j===void 0?void 0:j.message)||(0,s.t)("Unable to submit form. Please try again later.",null,{project:"apps.Commerce"});this.showError(J)})}),g(this,"showSuccessMessage",()=>{const F=(0,s.t)("Signed up!",null,{project:"apps.Commerce"}),z=window.Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.merchandisingSettings.restockNotificationsSuccessText,j=document.createElement("span");j.classList.add("product-restock-success-message"),j.innerText=z||F,Array.from(this.el.children).forEach(X=>{X.classList.contains("product-restock-cta")||this.el.removeChild(X)}),this.el.appendChild(j)}),g(this,"showError",F=>{this.errorNode||(this.errorNode=document.createElement("span"),this.errorNode.classList.add("product-restock-error-message"),this.el.appendChild(this.errorNode)),this.errorNode.innerText=F}),g(this,"clearError",()=>{this.errorNode&&(this.errorNode.innerText="")}),this.el=w,this.form=w.querySelector("form"),this.productId=w.getAttribute("data-product-id"),this.variantId=w.getAttribute("data-variant-id"),this.form.addEventListener("submit",this.handleSubmitRestockNotification);const k=(0,u.Z)(window);h.DU(window,k),h.bI({formEl:this.form,win:window});const q=this.el.querySelector(p);q&&h.EH({element:q,win:window,isLightbox:!1})}}const m="product-restock-notification";function _(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;Array.from(R.getElementsByClassName(m)).forEach(k=>new f(k))}var v=t(461037),E=t(822054),S=t(979221),y=t(371467),C=t(793036),O=t(413019),A=t(113580),I=t.n(A),D=t(284106),T=t(373251),B=t(597605),N=t(901097),P=t(478278),x=t(916661);YUI.add("squarespace-commerce",function(R){R.namespace("Squarespace.Commerce");var w=R.config.win.Static,k=function(Q){var ie=Q.target,ce=ie.get("totalQuantity"),pe=ie.get("subtotalAmount");v.Z.syncAll({items:ce,subtotal:S.h.formatter.format(pe)})},q=function(){if(!X())return!1;var Q=R.Object.getValue(w.SQUARESPACE_CONTEXT,["websiteSettings","storeSettings","merchandisingSettings","displayNativeProductReviewsEnabled"]),ie=R.Object.getValue(w.SQUARESPACE_CONTEXT,["websiteSettings","storeSettings","merchandisingSettings","displayImportedProductReviewsEnabled"]);return Q||ie},F=function(){if(w.SQUARESPACE_CONTEXT.product){var Q=w.SQUARESPACE_CONTEXT.product,ie=R.Object.getValue(w.SQUARESPACE_CONTEXT,["product","variants"]);ie&&ie.length>0?z(Q):j(Q)}},z=function(Q){var ie=R.Object.getValue(Q,["variants"]);if(ie){var ce=ie.map(function(Ae){return Ae.sku}),pe=ie.map(function(Ae){return{id:Ae.sku,quantity:null,item_price:Ae.price.decimalValue,attributes:Ae.attributes}}),ye=Q.name;y.L3({content_ids:ce,content_type:"product",contents:pe,content_name:ye})}},j=function(Q){var ie=Q.id,ce=Q.name,pe=R.Object.getValue(Q,["price","decimalValue"]);y.L3({content_ids:[ie],content_type:"product",contents:[{id:ie,quantity:null,item_price:pe}],content_name:ce})},X=function(){var Q=w.SQUARESPACE_CONTEXT.pageType===I().CONTENT_ITEM,ie=!!w.SQUARESPACE_CONTEXT.product;return Q&&ie},J=function(){(0,O.L8)(C.PDP_PAGE_LOAD);var Q=w.SQUARESPACE_CONTEXT.website,ie=w.SQUARESPACE_CONTEXT.product,ce=w.SQUARESPACE_CONTEXT.item,pe=w.SQUARESPACE_CONTEXT.collection,ye=(0,T.v1)(),Ae=ye&&ye.subscriptionType?ye.subscriptionType:null,Je=ye?ye.isSubscription==="true"&&!!Ae:null;!Q||!ie||!ce||!pe||D.fY({website_id:Q.id,page_id:ce.id,product_page:"pdp",product:{item_id:ce.id,item_type:ie.productType.toString(),item_title:ce.title,item_collection_id:pe.id,item_collection_name:pe.title,is_subscription:Je,subscription_type:Ae}})};R.Squarespace.Commerce.initializeCommerce=function(){try{F()}catch(Ie){r().trackCaughtError("common","trackViewProduct issue",Ie.stack)}if(x.Z.isSevenOne()){var Q=[".product-list .sqs-add-to-cart-button",".product-detail .sqs-add-to-cart-button"].join(", ");R.all(Q).each(function(Ie){var ht=new P.Z(Ie.getDOMNode(),R.config.win);R.config.win.Squarespace.onDestroy(R,function(){ht.destroy()})},this)}else{var ie=R.config.win.document.querySelectorAll(".pdp-subscriptions-and-otp");R.config.win.document.getElementsByClassName("product-variants").length?Promise.all([t.e("70474"),t.e("63631"),t.e("74046"),t.e("42914"),t.e("51864"),t.e("69847")]).then(t.bind(t,111059)).then(function(Ie){var ht=Ie.default;ht.initializeVariantDropdowns(R.config.win.document)}):ie&&ie.length&&t.e("41495").then(t.bind(t,655168)).then(function(Ie){Ie.initializeSubsOtpPricingWithoutVariantsDropdown(ie)}),_(R.config.win.document);try{(0,N.t)(R.config.win.document,w.SQUARESPACE_CONTEXT.product)}catch(Ie){r().trackCaughtError("commerce-merch","Afterpay on PDP issue",Ie.stack)}q()&&t.e("8090").then(t.bind(t,882780)).then(function(Ie){try{var ht=Ie.default;ht.initializeReviews(R.config.win.document,w.SQUARESPACE_CONTEXT.item.id,w.SQUARESPACE_CONTEXT.website.id,R)}catch(me){r().trackCaughtError("commerce-merch","Reviews on PDP issue",me.stack)}}),R.Squarespace.CartUtils.initializeAddToCartButtons()}var ce=R.Lang.isValue(R.one(".sqs-custom-cart"))||R.Lang.isValue(R.one(".sqs-has-custom-cart")),pe=!R.Squarespace.Commerce.isExpressCheckout()&&!E.Z(R.config.win)&&!ce;if(pe){var ye=R.one(".sqs-cart-dropzone");R.Lang.isNull(ye)&&(R.Lang.isValue(R.one(".absolute-cart-box"))?ye=R.one(".absolute-cart-box"):(ye=R.Node.create('<div class="absolute-cart-box"></div>'),R.one(R.config.doc.body).append(ye)));var Ae=ye.one(".sqs-pill-shopping-cart"),Je=R.Widget.getByNode(Ae);Je||new R.Squarespace.Widgets.PillShoppingCart({model:R.Squarespace.Singletons.ShoppingCart,useLightCart:w.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.useLightCart,render:ye})}E.Z(R.config.win)||(v.Z.mountAll(),R.Squarespace.Singletons.ShoppingCart.after("load",k),R.Squarespace.Singletons.ShoppingCart.on("change",k));var ke=window.UserAccountApi,Fe=ke&&ke.isUserAuthenticated();if(Fe||e().get("hasCart")==="true"||R.Lang.isValue(e().get("CART"))?R.Squarespace.Singletons.ShoppingCart.load({calculateSubtotal:pe},function(){R.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")},this):R.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible"),(0,T.wU)())try{(0,T.w)()}catch(Ie){r().trackCaughtError("commerce-merch","trackVisitPLP",Ie.stack)}if(X())try{J()}catch(Ie){r().trackCaughtError("commerce-merch","trackVisitPDP",Ie.stack)}},R.Squarespace.Commerce.destroyCommerce=function(){v.Z.unmountAll(),R.Squarespace.Singletons.ShoppingCart.detach("load",k),R.Squarespace.Singletons.ShoppingCart.detach("change",k)},R.config.win.Squarespace.onInitialize(R,R.Squarespace.Commerce.initializeCommerce),R.config.win.Squarespace.onDestroy(R,R.Squarespace.Commerce.destroyCommerce)},"1.0",{requires:["event-base-ie","overlay","squarespace-cart-utils","squarespace-commerce-utils","squarespace-models-shopping-cart","squarespace-pill-shopping-cart"]})},743932:function(c,b,t){"use strict";var l=t(367915),d=t(153088),o=t(714487),e=t(869670);(0,e.U)(o.ZP);var a=t(914960),r=t(998402),s=t(793903),n=t(461761),i=t.n(n),u=t(860921),h=t.n(u),g=t(387582),p=t(965658),f=t(784874),m=t(823268),_=t.n(m),v=t(113580),E=t.n(v),S=t(885878),y=t.n(S),C=t(822054),O=t(118415),A=t(476086),I=t(145280),D=t.n(I),T=t(767665);function B(ct){const fe=JSON.parse(ct.getAttribute("data-blur")),it=JSON.parse(ct.getAttribute("data-border-radii")),wi=ct.getAttribute("data-blend-mode");(0,T.Hv)(ct,D()[wi]),(0,T.O)(ct,null,fe,it)}var N=t(353844),P=t(40500);const x=0,R="menu-select-labels--active";function w(ct){const fe=[...ct.querySelectorAll(".js-menu-select-labels")],it=fe.length;if(it===0)return;const wi=[...ct.querySelectorAll(".js-menu")];function Fi(fn,ki){fe.forEach((un,Xn)=>{Xn===fn?(un.setAttribute("tabindex",0),un.setAttribute("aria-selected",!0),un.classList.add(R),ki&&un.focus()):(un.setAttribute("tabindex",-1),un.setAttribute("aria-selected",!1),un.classList.remove(R))}),wi.forEach((un,Xn)=>{Xn===fn?un.style.display="block":un.style.display="none"})}Fi(x,!1),fe.forEach((fn,ki)=>{fn.addEventListener("click",()=>{Fi(ki,!0)}),fn.addEventListener("keydown",un=>{un.keyCode===13||un.keyCode===32?(un.stopPropagation(),Fi(ki,!0)):un.keyCode===37?(un.stopPropagation(),Fi((ki-1+it)%it,!0)):un.keyCode===39&&(un.stopPropagation(),Fi((ki+1)%it,!0))})})}var k=t(226782),q=t(537312),F=t(968174),z=t(423394),j=t(942703),X=t(723499),J=t.n(X),Q=t(759352);function ie(ct){const fe=ct.one("a");if(!fe||fe.getAttribute("data-initialized"))return;const it=fe.get("parentNode"),Fi=fe.ancestor(".sqs-block-button").getAttribute("id"),fn=fe.getAttribute("href"),ki=fe.hasAttribute("target"),un=(0,Q.ID)(fn),Xn={id:Fi,buttonText:fe.get("innerHTML"),clickthroughUrl:fn,alignment:it.getAttribute("data-alignment"),size:it.getAttribute("data-button-size"),newWindow:ki,context:J().BUTTON_BLOCK};(0,q.TP)(Xn),fe.on("click",function(ne){if(fe.hasAttribute("data-tracked")){fe.removeAttribute("data-tracked");return}const Xe=(!ki||ne.metaKey||ne.ctrlKey||ne.shiftKey)&&!un;Xe&&(ne.preventDefault(),ne.stopImmediatePropagation()),(0,q.kO)(Xn).then(function(){Xe&&(fe.setAttribute("data-tracked",!0),fe.simulate("click"))})}),fe.setAttribute("data-initialized",!0)}const ce=ie;var pe=t(629539),ye=t(76902),Ae=t(916661),Je=t(689700),ke=t(809468);const Fe=ct=>!!ct.getAttribute("data-loader"),Ie=(ct,fe)=>{const it=ct.one("img[data-image]");if(!it)return;const wi=it.loader,Fi={title:(0,o.t)("Image",null,{project:"src.shared"})};if(wi)Fi.content=wi.getBareElement();else if(Fe(it))Fi.content=it;else return;const fn=ct.getAttribute("data-description");fn&&(Fi.meta=fn);const ki=ct.getAttribute("data-lightbox-theme");ki&&(Fi.theme=ki),ct.plug(fe.Squarespace.Lightbox2Plug,{lightboxOptions:Fi})},ht=(ct,fe)=>{Fe(ct)||ct.setStyles({position:null,top:null,left:null,width:null,height:null});const it=!!ct.ancestor(".sized,.content-fill");if(it){let Fi=fe.on("resize",function(){ct.getDOMNode()&&ct.inDoc()?ct.fire("refresh"):(Fi.detach(),Fi=null)},fe.config.win);const fn=ct.ancestor(".image-block-wrapper"),ki=ct.ancestor(".sqs-layout");fn&&ki&&!ki.hasClass("editing")&&ct.setStyles({maxWidth:"none"})}const wi=!!ct.ancestor(".has-aspect-ratio");Fe(ct)||ct.plug(fe.Squarespace.Loader2,{mode:wi||it?"fill":"none",fixedRatio:wi})},Ee={initializeImageBlock:(ct,fe)=>{ht(ct,fe);const it=ct.ancestor(".sqs-block");if(!it)return;const wi=it.one(".lightbox");if(wi&&Ie(wi,fe),!it.hasClass("sqs-block-image"))return;const Fi=ct.getDOMNode();(0,Je.OD)(Fi)&&((0,Je.sZ)(Fi),ke.Z.createImageEffect(Fi));let fn=!1;const ki=it.one(".image-block-outer-wrapper");if(ki){const Xn=ki.get("offsetWidth")<415;ki.toggleClass("sqs-narrow-width",Xn),Xn&&(fn=!0)}const un=it.one(".sqs-dynamic-text-container");un&&(0,ye.Z)(un.getDOMNode()),it.addClass("sqs-text-ready"),!Fe(ct)&&fn&&(Ae.Z.isSevenOne()&&fe.config.win.ImageLoader.loadLazy?fe.config.win.ImageLoader.loadLazy:fe.config.win.ImageLoader.load).bind(fe.config.win.ImageLoader)(ct)},initializeBasicBlockWithImage:ht},Se=(ct,fe)=>{const it=fe.config.win;it.Squarespace.onInitialize(fe,function(){const wi=it.SQUARESPACE_LOGIN&&it.SQUARESPACE_LOGIN.isLoggedIn(),Fi=fe.config.doc.location.protocol==="https:",fn=ct.one(".OT_Faux_Block"),ki=ct.one("#OT_form:not(.OT_Faux_Block)");function un(){ki&&ki.remove(),fn.removeClass("sqs-block-opentable-hidden")}wi?(un(),fn.all(".OT_list li").removeClass("sqs-block-opentable-hidden"),fn.on("click",function(Xn){Xn.preventDefault(),fe.Squarespace.Widgets.Alert({"strings.title":"Preview Only","strings.message":"Please log out of your Squarespace account in order to use the OpenTable Block."})})):(it.Squarespace.SQUARESPACE_INITIALIZED_ONCE||Fi)&&un()}),it.Squarespace.onDestroy(fe,function(){fe.one("#ui-datepicker-div")&&fe.one("#ui-datepicker-div").hide()})};var lt=t(865206),Lt=t(960970),Pt=t(623040),Ce=t(91258);function je(ct,fe){ct.getDOMNode&&(ct=ct.getDOMNode());let it;try{it=JSON.parse(ct.getAttribute("data-block-json"))}catch(wi){return console.warn("Issue with decoding the JSON: ",wi),Promise.reject()}return(0,Ce.O)({blockWidgetJson:{type:fe,id:ct.getAttribute("id").replace("block-",""),value:it}}).then(wi=>{let{html:Fi}=wi;const fn=ct.querySelector(".sqs-block-content");fn&&Fi&&(fn.innerHTML=Fi)})}var Le=t(502397),ci=t(649297),Jt=t(896093),Ft=t(555827),ti=t.n(Ft),gi=t(750438),qt=t(687808),Mt=t(3841),Vt=t(875864);const Ti="sqs-background-enabled";function Ni(ct){const fe=ct.closest(".sqs-block-html");if(!fe)return;const it=fe.querySelector(".TextAttributes-props");if(!it)return;const wi=it!=null&&it.textContent?JSON.parse(it.textContent):{};return ti()(wi,"id")}function ui(ct){var fe;const wi=ct.closest(".sqs-block-html").classList.contains(Ti),Fi=Ni(ct),fn=ct.getAttribute("data-text-attribute-id");let ki=Fi==null||(fe=Fi[fn])===null||fe===void 0?void 0:fe.color;if((ki==null?void 0:ki.type)===Vt.$.THEME_COLOR){let Xn="--text-highlight-color";return wi&&(Xn="--text-highlight-color-on-background"),`var(${Xn})`}else{if((ki==null?void 0:ki.type)===Vt.$.SITE_PALETTE_COLOR)return`hsla(var(--${ki.sitePaletteColor.colorName}-hsl),${ki.sitePaletteColor.alphaModifier})`;if((ki==null?void 0:ki.type)===Vt.$.CUSTOM_COLOR){var un;return!((un=ki.customColor)===null||un===void 0)&&un.hslaValue&&(ki=(0,qt.di)(ki)),(0,Mt.stringifyPaletteColorValue)(ki.customColor)}}}function gn(ct){if(!ct)return;const fe=Ni(ct),it=ui(ct),wi=ct.getAttribute("data-text-attribute-id");if(fe&&it)fe[wi].color=it;else return;const Fi=ct.closest(".sqs-block-content");return new gi.Z(ct,fe,Fi)}function zi(ct){if(!ct.node)return;const fe=ui(ct.node);ct.onStateChange({color:fe})}var Mn=t(630459);function Zt(ct){(0,Mn.z6)(ct)}var Te=t(175918),qe=t(528215),xt=t(985913),Gt=t(684353),Li=t(72664),mi=t(792105),le=t(478278),_e=t(304212),Me=t(673951);function et(ct){try{const fe=ct.top!==ct,it=i()(ct,"top.YUI.Env",!1);return fe&&it}catch{}return!1}function $t(ct){return ct.top.Static.SQUARESPACE_CONTEXT}function Ki(ct){if(!(Me.pe||et(ct)))return;ct.YUI.Env.globalEvents=ct.top.YUI.Env.globalEvents;const it=i()(ct,"StaticActions.bootstrap",null);if(!it)return;const wi=$t(ct);it(wi)}const pi=[".image-block-v2 .sqs-dynamic-text-container"].join(",");function Mi(){let ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window,fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pi;[...ct.document.querySelectorAll(fe)].forEach(it=>(0,ye.Z)(it))}const vn=(ct,fe)=>{if(!ct)return;const it=ct.getAttribute("data-block-json");if(it){const wi=fe.JSON.parse(it);wi&&wi.providerName!=="Twitter"&&ct.get("children").each(Fi=>Fi.resizetoparent({sizeonly:!0}))}ct.setStyles({visibility:"visible",opacity:1,height:"auto"})},Sn=(ct,fe,it)=>{const wi=ct.one(".sqs-block-content");if(!wi)return;if((0,Q.N$)(wi),wi.test(".sqs-block-video .sqs-block-content")){const ki=wi.one(".sqs-video-wrapper");ki&&it.Squarespace.initializeVideoBlock(ki,fe);return}wi.one(".intrinsic")||vn(wi,fe)};function an(ct){ct.Static.SQUARESPACE_CONTEXT.collection&&(ct.Static.SQUARESPACE_CONTEXT.collectionId=ct.Static.SQUARESPACE_CONTEXT.collection.id),ct.Static.SQUARESPACE_CONTEXT.item&&(ct.Static.SQUARESPACE_CONTEXT.itemId=ct.Static.SQUARESPACE_CONTEXT.item.id)}const dn=[],W=[],Zi=(ct,fe)=>{dn.map(it=>it.toString()).indexOf(fe.toString())===-1&&(ct.config.win.Squarespace.INITIALIZED&&fe(),dn.push(fe))},Zn=(ct,fe)=>{W.map(it=>it.toString()).indexOf(fe.toString())===-1&&W.push(fe)},pn=ct=>{ct.config.win.Squarespace.INITIALIZED||(dn.forEach(fe=>{try{fe()}catch(it){console.error("[mercury.markReady] Error invoking initializer.",it)}}),ct.config.win.Squarespace.INITIALIZED=!0,ct.config.win.Squarespace.SQUARESPACE_INITIALIZED_ONCE=!0)},Yi=ct=>{ct.config.win.Squarespace.INITIALIZED&&(ct.config.win.Squarespace.INITIALIZED=!1,W.forEach(fe=>fe()))},Un=ct=>{ct.Squarespace=ct.Squarespace||{},ct.Squarespace.onInitialize=Zi,ct.Squarespace.onDestroy=Zn,ct.Squarespace.globalMarkReady=pn,ct.Squarespace.globalDestroy=Yi},qi=/Trident.*rv[ :]*11\./.test(navigator.userAgent);window.Common=function(fe){if(fe.COMMON_ALREADY_RAN){console.warn("Detected second run, this is bad.");return}fe.COMMON_ALREADY_RAN=!0,fe.Static=fe.Static||{},fe.noop=h(),fe.Singleton=Pt.Z,fe.Class={create:function(ne){let Xe;return ne.initialize?Xe=function(){this.initialize.apply(this,arguments)}:Xe=function(){},Xe.prototype=ne,Xe.extend=function(Qe){return fe.Class.extend(this,Qe)},Xe.specialize=function(Qe,wt){const ai=fe.Class.specialize(this,Qe);return ai._parent=wt,ai},Xe},extend:function(ne,Xe){Xe.initialize||(Xe.initialize=ne.prototype.initialize);const Qe=fe.Class.create(Xe);var wt=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;for(const ai in ne.prototype)Qe.prototype[ai]?typeof Qe.prototype[ai]=="function"&&wt.test(Qe.prototype[ai])&&(Qe.prototype[ai]=function(Hi,Xt){return function(){const we=this._super;this._super=ne.prototype[Hi];const Ke=Xt.apply(this,arguments);return this._super=we,Ke}}(ai,Qe.prototype[ai])):Qe.prototype[ai]=ne.prototype[ai];return Qe.prototype.superclass=ne.prototype,Qe},specialize:function(ne,Xe){const Qe=fe.Class.extend(ne,Xe);return new Qe}},fe.Squarespace=fe.Squarespace||{},fe.Squarespace.INITIALIZED=!1,fe.Squarespace.SQUARESPACE_INITIALIZED_ONCE=!1,Un(fe),fe.Squarespace.shouldRedirectToConfig=function(ne){const Xe="noredirect",Qe=["noredirect"];if(ne.location.hostname==="localhost"||this.getSession(Xe,ne))return!1;for(let wt=0;wt<Qe.length;wt++)if(ne.location.search.indexOf(Qe[wt])!==-1)return this.setSession(Xe,!0,ne),!1;return ne.Static.SQUARESPACE_CONTEXT.websiteSettings&&ne.Static.SQUARESPACE_CONTEXT.authenticatedAccount&&!ne.Static.SQUARESPACE_CONTEXT.website.developerMode&&!ne.Static.SQUARESPACE_CONTEXT.website.cloneable&&!this._userHasViewerRole(ne.Static.SQUARESPACE_CONTEXT.websiteRoles)&&ne.top===ne},fe.Squarespace.getSession=function(ne,Xe){try{if(Xe.sessionStorage&&Xe.sessionStorage[ne])return Xe.sessionStorage[ne]}catch{return null}return null},fe.Squarespace.setSession=function(ne,Xe,Qe){try{if(Qe.sessionStorage)return Qe.sessionStorage[ne]=Xe,{success:!0,error:null}}catch(wt){return{success:!1,error:wt}}return{success:!1,error:"Browser does not support session storage"}},fe.Squarespace.createCookie=function(ne,Xe,Qe,wt,ai){let Hi;if(Qe){const Xt=new Date;Xt.setTime(Xt.getTime()+Qe*24*60*60*1e3),Hi="; expires="+Xt.toGMTString()}else Hi="";ai.document.cookie=ne+"="+Xe+Hi+"; path="+wt},fe.Squarespace.load=function(ne){if(ne||(console.error("Squarespace.load running with an assumed window context! Results may vary!"),ne=window),this.shouldRedirectToConfig(ne)){ne.stop&&ne.stop(),this.createCookie(g.Z.PREVIEW_FRAME_EXPANDED_COOKIE,!0,null,"/",ne);const Qe=encodeURIComponent(ne.location.pathname+ne.location.search);ne.location.href="/config/?frameUrl="+Qe;return}Ki(ne),ne.document.addEventListener("DOMContentLoaded",function(){Mi(ne)}),ne.Y=ne.YUI(function(){const Qe={};for(const wt in ne.YUI_CONFIG)Qe[wt]=ne.YUI_CONFIG[wt];return Qe}()),an(ne),ne.Y.use("squarespace-image-loader"),ne.Y.use("squarespace-public-api"),ne.Y.on("domready",ne.Squarespace.afterBodyLoad,ne.Squarespace);const Xe=(0,z.G2)();(0,o.i_)(Gt.translationLocale,Xe)},fe.Squarespace.injectRollups=function(ne){try{if(ne.top.YUI!==ne.YUI){var Xe;for(const ai in ne.top.YUI.Env.mods)ne.YUI.Env.mods.hasOwnProperty(ai)||(ne.YUI.Env.mods[ai]=ne.top.YUI.Env.mods[ai]);const Qe=(Xe=ne.parent.document.getElementById("squarespace-frame-rollups"))===null||Xe===void 0?void 0:Xe.innerHTML,wt=JSON.parse(Qe);for(const ai in wt)wt[ai].css&&this._injectStylesheetFromTopFrame(wt[ai].css,ne.document)}}catch{}},fe.Squarespace._injectStylesheetFromTopFrame=function(ne,Xe){const Qe='<link rel="stylesheet" href="'+ne+'" type="text/css" />';Xe.head?fe.Y.one(Xe.head).append(Qe):Xe.write(Qe)};const it="squarespace-commerce_email_preview",wi=["squarespace-error_reporter"];function Fi(ne){const Xe=fe.Y.clone(ne),Qe=Xe[it];fe.Y.Lang.isValue(Qe)&&(Xe["squarespace-commerce-email-preview"]=Qe,delete Xe[it]);for(const wt of wi)Xe.hasOwnProperty(wt)&&delete Xe[wt];return Xe}fe.Squarespace._humanizeAllDates=function(ne){Y.all(ne).each(function(Xe){const Qe=parseInt(Xe.getAttribute("data-date"),10);if(!Y.Lang.isNumber(Qe)){console.warn("Invalid date on node: ",Xe);return}Xe.set("innerHTML",(0,pe.Z)(Qe).capitalize())})},fe.Squarespace.afterBodyLoad=function(){const ne=fe.Y,Xe=ne.config.doc.readyState==="loading",Qe=(0,xt.F)(ne);if(!Xe&&Qe&&fe.top.YUI_NOT_YET_LOADED){ne.use(Object.keys(Fi(ne.config.win.SQUARESPACE_ROLLUPS)),h());return}if(Xe&&Qe){ne.once("domready",ne.config.win.Squarespace.afterBodyLoad,ne.config.win.Squarespace);return}this.AFTER_BODY_LOADED||(this.AFTER_BODY_LOADED=!0,Qe&&this.injectRollups(fe),ne.use(function(wt){const ai=ne.Object.keys(Fi(wt));return Qe&&["squarespace-management"].forEach(function(Xt){ai.indexOf(Xt)===-1&&ai.push(Xt)}),ai}(ne.config.win.SQUARESPACE_ROLLUPS),fe.Squarespace.globalInit))},fe.Squarespace.addLoadTrigger=function(ne,Xe){const Qe=fe.Y;if(!Qe.one(ne))return;if((0,xt.F)(Qe)){const Hi=[];Qe.Array.each(Xe,function(Xt){Qe.Lang.isObject(fe.YUI.Env.mods[Xt])&&Hi.push(Xt)}),Xe=Qe.Array.filter(Xe,function(Xt){return!Hi.includes(Xt)}),Qe.Array.each(Hi,function(Xt){Qe.use(Xt);const we=Qe.config.win.Static.SQUARESPACE_CONTEXT.rollups[Xt];if(!we){console.warn("Unable to load module '"+Xt+"' for trigger '"+ne+"'");return}if(we.css){const Ke=we.css.split(",");Qe.Array.each(Ke,function(ge){this._injectStylesheetFromTopFrame(ge,Qe.config.doc)},this)}},this),Xe.length>0&&console.error("addLoadTrigger","There are modules that were requested, that were not available in the Seven top frame.",Xe)}if(Xe.length===0)return;const wt=[],ai=[];for(let Hi=0,Xt=Xe.length;Hi<Xt;++Hi){const we=Xe[Hi],Ke=Qe.config.win.Static.SQUARESPACE_CONTEXT.rollups[we];if(!Ke){console.warn("Unable to load module '"+we+"' for trigger '"+ne+"'");return}Ke.js&&Qe.Array.each(Ke.js.split(","),function(ge){ge.length>0&&wt.push(ge)}),Ke.css&&Qe.Array.each(Ke.css.split(","),function(ge){ge.length>0&&ai.push(ge)})}Qe.Get.load([].concat(wt,ai),{win:Qe.config.win},function(Hi){Qe.use(Xe)})},fe.Squarespace.globalInit=function(ne){var Xe,Qe;an(fe),Ae.Z.isSevenOne()&&ne.one("body").addClass("seven-one-global-animations"),ne.Squarespace.EscManager&&ne.Squarespace.EscManager.attach(ne.one(ne.config.win)),(0,q.tS)(),(0,q.D_)(),ne.config.win.Squarespace._humanizeAllDates(".timesince"),ne.config.win.Squarespace.initializeLayoutBlocks(ne),ne.config.win.Squarespace.initializeImageBlockDynamicElements(ne),ne.config.win.Squarespace.initializeGlobalLightbox(ne),ne.config.win.Squarespace.initializeWebsiteComponent(ne),ne.config.win.Squarespace.initializeVideo(ne),ne.config.win.Squarespace.initializeNativeVideo(ne,{isVisitorWebsite:!0}),ne.config.win.Squarespace.initializeCartPage(ne),ne.config.win.Squarespace.initializeSvgs(ne);const wt=fe.Static.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname;if(ne.Lang.isValue(wt)&&wt!==""&&ne.config.win.Squarespace.initializeDisqusCommentLinks(ne),ne.config.doc.location.href.indexOf("logout=true")!==-1&&ne.on("domready",function(){new ne.Squarespace.Widgets.Information({"strings.title":(0,o.t)("Logout Successful",null,{project:"scripts-v6-root"}),"strings.message":(0,o.t)("You have been successfully logged out.",null,{project:"scripts-v6-root"})})}),fe.Static.SQUARESPACE_CONTEXT.websiteSettings.commentsEnabled){const he=fe.Static.SQUARESPACE_CONTEXT.demoCollections,Re=fe.Static.SQUARESPACE_CONTEXT.collectionId;let Wt=!1;ne.Lang.isArray(he)&&ne.Lang.isValue(Re)&&ne.Array.map(he,function(fi){return fi.collectionId}).indexOf(Re)!==-1&&(Wt=!0),Wt||ne.config.win.Squarespace.addLoadTrigger(".squarespace-comments",["squarespace-dialog","squarespace-comments"])}let ai;(0,xt.F)(ne)?ai=fe.top.SQUARESPACE_LOGIN&&fe.top.SQUARESPACE_LOGIN.isLoggedIn():ai=fe.SQUARESPACE_LOGIN&&fe.SQUARESPACE_LOGIN.isLoggedIn();const Hi=fe.Static.SQUARESPACE_CONTEXT.showAnnouncementBar;(ai||Hi)&&ne.config.win.Squarespace.addLoadTrigger("body",["squarespace-announcement-bar"]);const Xt=ci.Z.shouldShowSSBadge({websiteSettings:fe.Static.SQUARESPACE_CONTEXT.websiteSettings}),we=ci.Z.shouldShowMobileInformationBar({win:ne.config.win,isMobile:ne.UA.mobile,settings:fe.Static.SQUARESPACE_CONTEXT.websiteSettings.mobileInfoBarSettings}),Ke=ci.Z.shouldShowLicensedAssetsBar({YNodeBody:ne.one(ne.config.doc.body)});(ai||Xt||we||Ke)&&ne.config.win.Squarespace.addLoadTrigger("body",["squarespace-website-overlays-manager"]);const ge=fe.Static.SQUARESPACE_CONTEXT.websiteSettings.popupOverlaySettings,zt=ge&&ci.Z.shouldShowPopupOverlay({settings:ge,context:{pageType:fe.Static.SQUARESPACE_CONTEXT.pageType,collection:fe.Static.SQUARESPACE_CONTEXT.collection},isMobile:ne.UA.mobile,urlSearch:window.location.search});(ai||zt)&&ne.config.win.Squarespace.addLoadTrigger("body",["squarespace-popup-overlay"]),(fe==null||(Qe=fe.Static)===null||Qe===void 0||(Xe=Qe.SQUARESPACE_CONTEXT)===null||Xe===void 0?void 0:Xe.pageType)===E().REVIEWS_REQUEST&&Promise.all([t.e("84696"),t.e("68686"),t.e("1781"),t.e("13345"),t.e("59147"),t.e("61612")]).then(t.bind(t,291429)).then(he=>{let{bootstrapProductReviewsPage:Re}=he;Re()}),window.UserAccountApi||(document.querySelector(".join-button")||document.querySelector(".sign-in-button"))&&Promise.all([t.e("36689"),t.e("61963"),t.e("41901"),t.e("75960"),t.e("78293")]).then(t.bind(t,569609)),ne&&i()(ne,"config.win.Static.COOKIE_BANNER_CAPABLE")&&Promise.all([t.e("5663"),t.e("47623")]).then(t.bind(t,564709)).then(he=>{let{renderCookieBannerManager:Re}=he;Re(),document.addEventListener(O.h,Wt=>{Re(Wt.detail)})}),ne.config.win.Squarespace.addLoadTrigger(".sqs-audio-embed, .sqs-audio-playlist, .sqs-album-block",["squarespace-audio-player"]),ne.Lang.isObject(fe.Static.SQUARESPACE_CONTEXT.websiteSettings.pinterestOverlayOptions)&&fe.Static.SQUARESPACE_CONTEXT.websiteSettings.pinterestOverlayOptions.mode!=="disabled"&&ne.config.win.Squarespace.addLoadTrigger(p.Z.TRIGGER_SELECTORS.join(","),["squarespace-pinterest"]),ne.config.win.Squarespace.addLoadTrigger(".collection-type-products.view-list .products-collection-v2",["squarespace-products-collection-list-v2"]),ne.config.win.Squarespace.addLoadTrigger(".collection-type-products.view-item .products-collection-v2",["squarespace-products-collection-item-v2"]),ne.config.win.Squarespace.addLoadTrigger(".sqs-image-zoom-area",["squarespace-image-zoom"]),ne.config.win.Squarespace.addLoadTrigger(".collection-type-blog.view-list .sqs-blog-list",["squarespace-blog-collection-list"]),ne.config.win.Squarespace.addLoadTrigger(".collection-type-gallery .sqs-gallery-list",["squarespace-gallery-collection-list"]),ne.config.win.Squarespace.addLoadTrigger(".sqs-block-calendar",["squarespace-calendar-block-renderer"]),ne.config.win.Squarespace.addLoadTrigger(".collection-type-events.view-list",["squarespace-events-collection"]),ne.config.win.Squarespace.addLoadTrigger(".sqs-product-quick-view-button[data-id]",["squarespace-product-quick-view","squarespace-image-zoom","squarespace-products-collection-item-v2"]),ne.config.win.Squarespace.addLoadTrigger(".sqs-block-chart",["squarespace-chartjs-helpers"]),ne.config.win.Squarespace.addLoadTrigger(".sqs-block-tourdates[data-block-json]",["squarespace-tourdates"]),ne.config.win.Squarespace.addLoadTrigger(".sqs-search-page",["squarespace-search-page"]),ne.config.win.Squarespace.addLoadTrigger(".sqs-simple-like",["squarespace-simple-liking"]),ne.config.win.Squarespace.addLoadTrigger(".squarespace-social-buttons",["squarespace-social-buttons"]),ne.one(".sqs-share-buttons")&&t.e("21977").then(t.bind(t,792377)).then(he=>{let{initializeShareButtons:Re,destroyShareButtons:Wt}=he;fe.Squarespace.onInitialize(ne,function(){Re(ne)}),fe.Squarespace.onDestroy(ne,function(){Wt(ne)})}),(0,P.K9)(ne.config.win);function Ht(he){(0,P.AA)(he)}let bt=ne.Global.on("_syncBodyClasses",Ht);fe.addEventListener("beforeunload",function(){bt.detach(),bt=null},{once:!0}),pn(ne)},fe.Squarespace.initializeDisqusCommentLinks=function(ne){const Xe="#disqus_thread",Qe="#comment-{id}",wt=ne.all(".sqs-comment-link"),ai="href",Hi="data-id";let Xt;const we=fe.Static.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname,Ke=ne.Lang.isString(we)&&we!=="";Ke?Xt=function(ge){return fe.Static.SQUARESPACE_CONTEXT.website.baseUrl+ge.getAttribute(ai)+Xe}:Xt=function(ge){return fe.Static.SQUARESPACE_CONTEXT.website.baseUrl+ge.getAttribute(ai)+ne.substitute(Qe,{id:ge.getAttribute(Hi)})},wt.each(function(ge){ge.setHTML("Comments"),ge.setAttribute(ai,Xt(ge))},this),Ke&&(fe.disqus_shortname=we,ne.Get.script("//"+we+".disqus.com/count.js"))},fe.Squarespace.initializeCollectionPages=function(ne,Xe){ne.Squarespace.EventsCollection?(Xe.all(".sqs-events-collection-list").each(ne.Squarespace.EventsCollection.initializeListView),Xe.all(".sqs-events-collection-calendar").each(ne.Squarespace.EventsCollection.initializeCalendarView)):ne.config.win.Squarespace.addLoadTrigger(".sqs-events-collection-list, .sqs-events-collection-calendar",["squarespace-events-collection"])},fe.Squarespace.initializeLayoutBlocks=function(ne,Xe){const Qe=Xe?Xe.getDOMNode():document,wt=Xe||ne;Qe.querySelectorAll(".sqs-position-sticky").forEach(function(ge){const zt=(0,Te.Z)(ge);fe.Squarespace.onDestroy(ne,function(){zt.destroy()})}),this.initializeSummaryV2Block(ne,wt),wt.all([".sqs-block-video",".sqs-block-embed"].join(",")).each(function(ge){Sn(ge,ne,fe)}),wt.all(".sqs-block-image img[data-image]").each(function(ge){Ee.initializeImageBlock(ge,ne)}),wt.all(".sqs-block-shape").each(function(ge){Zt(ge.getDOMNode())});const ai=[".sqs-block-product img[data-image]"];ne.config.win.Squarespace.SQUARESPACE_INITIALIZED_ONCE&&ai.push(".sqs-block-collectionlink img[data-image]"),wt.all(ai.join(",")).each(function(ge){Ee.initializeBasicBlockWithImage(ge,ne)}),wt.all(".sqs-block-soundcloud").each(function(ge){fe.Squarespace.initializeSoundcloudBlock(ge,ne)}),wt.all(".sqs-block-map[data-block-json]").each(ge=>{const zt=ne.JSON.parse(ge.getAttribute("data-block-json")),Ht=(0,F.Ei)(zt),bt=(0,z.uu)();ge.setAttribute("data-animation-role","image"),Ae.Z.isSevenOne()&&(Ht.ui=ne.merge({},Ht.ui,{scrollwheel:!1})),_().createView(Ht.ui,Ht.location,ge.one(".sqs-block-content").getDOMNode(),bt)}),fe.Squarespace.initializeFormBlocks(wt,ne),wt.all(".sqs-block-newsletter").each(function(ge){fe.Squarespace.initializeNewsletterBlock(ge,ne)}),wt.all(".sqs-block-donation").each(function(ge){fe.Squarespace.initializeDonationButton(ge,ne)}),Qe.querySelectorAll(".sqs-block-accordion").forEach(function(ge){fe.Squarespace.initializeAccordionBlock(ge),fe.Squarespace.initializeContainerStyles(ge)}),Qe.querySelectorAll(".sqs-block-marquee").forEach(function(ge){fe.Squarespace.initializeMarqueeBlock(ge),fe.Squarespace.initializeContainerStyles(ge)}),Qe.querySelectorAll(".sqsrte-scaled-text-container").forEach(function(ge){fe.Squarespace.initializeScaledText(ge)}),Qe.querySelectorAll(".sqs-block-html .sqsrte-text-highlight").forEach(function(ge){fe.Squarespace.initializeTextHighlight(ge)}),document.querySelectorAll(".sqs-block-html[data-blend-mode], .sqs-block-html[data-blur]").forEach(function(ge){fe.Squarespace.initializeContainerStyles(ge)}),document.querySelectorAll(".sqs-block-quote[data-blend-mode], .sqs-block-quote[data-blur]").forEach(function(ge){fe.Squarespace.initializeContainerStyles(ge)}),wt.all(".sqs-block-button").each(function(ge){fe.Squarespace.initializeButtonBlock(ge,ne)}),wt.all(".sqs-block-pricing-plan").each(function(ge){fe.Squarespace.initializePricingPlanBlock(ge,ne)}),fe.Squarespace.initializeAspectRatioBlocks(ne);const Hi=[".sqs-block-gallery",".sqs-block-video"].join(",");wt.all(Hi).each(function(ge){ne.SQS.Gallery.Manager.initializeBlock(ge)}),[{selector:".sqs-block-flickr",blockType:f.Z.FLICKR},{selector:".sqs-block-instagram",blockType:f.Z.INSTAGRAM},{selector:".sqs-block-fivehundredpix",blockType:f.Z.FIVEHUNDREDPIX}].forEach(function(ge){wt.all(ge.selector).each(function(zt){const Ht=zt.one(".sqs-gallery-container");Ht&&Ht.getAttribute("data-async-rendering-enabled")==="true"?je(zt,ge.blockType).then(function(){Squarespace.initializeAspectRatioBlocks(ne),ne.SQS.Gallery.Manager.initializeBlock(zt)}):ne.SQS.Gallery.Manager.initializeBlock(zt)})}),wt.all(".sqs-block-opentable").each(function(ge){fe.Squarespace.initializeOpenTableBlock(ge,ne)}),wt.all(".sqs-block-opentable-v2").each(function(ge){fe.Squarespace.initializeOpenTableV2Block(ge.getDOMNode())}),wt.all(".sqs-block-tock").each(function(ge){(0,k.Z)(ge.getDOMNode())}),ne.Squarespace.Widgets.AudioPlayer?wt.all(".sqs-audio-embed").each(ne.Squarespace.Widgets.AudioPlayer.initializeNode):ne.config.win.Squarespace.addLoadTrigger(".sqs-audio-embed, .sqs-audio-playlist, .sqs-album-block",["squarespace-audio-player"]),ne.Squarespace.Tourdates?wt.all(".sqs-block-tourdates[data-block-json]").each(ne.Squarespace.Tourdates.initializeNode):ne.config.win.Squarespace.addLoadTrigger(".sqs-block-tourdates[data-block-json]",["squarespace-tourdates"]),ne.Squarespace.CalendarBlockRenderer?wt.all(".sqs-block.calendar-block[data-block-json]").each(ne.Squarespace.CalendarBlockRenderer.initializeNode):ne.config.win.Squarespace.addLoadTrigger(".sqs-block.calendar-block[data-block-json]",["squarespace-calendar-block-renderer"]);const we=wt.one(".sqs-block-zola");we&&this.initializeZolaBlocks(we,ne);const Ke=wt.one(".sqs-block-acuity");Ke&&this.initializeAcuityBlocks(Ke,ne),this.initializeSearchBlock(ne),this.initializeChartBlock(ne),this.initializeSocialLinks(ne),this.initializeMenuBlock(ne)},fe.Squarespace.initializeSocialLinks=function(ne){ne.UA.gecko<=0||ne.all('use[class^="SocialLinks"][*|href]').each(function(Xe){const Qe=Xe.getAttribute("xlink:href"),wt=Qe.indexOf("#");wt!==-1&&Xe.setAttribute("xlink:href",ne.config.win.location.origin+ne.config.win.location.pathname+Qe.substr(wt))})},fe.Squarespace.initializeMenuBlock=function(ne){ne.all(".menu-wrapper").each(function(Xe){w(Xe._node)})},fe.Squarespace.initializePageContent=function(ne,Xe){fe.Squarespace.initializeLayoutBlocks(ne,Xe),fe.Squarespace.initializeWebsiteComponentForContentPreview(ne,Xe),fe.Squarespace.initializeCollectionPages(ne,Xe)},fe.Squarespace.initializeImageBlockDynamicElements=function(ne){const Xe=ne.config.win;function Qe(){ne.all(".image-block-v2").each(function(wt){wt.toggleClass("sqs-narrow-width",wt.get("offsetWidth")<415);const ai=wt.one("img");ai&&Xe.ImageLoader.load(ai)}),Mi(Xe)}this._resizeEmitter=new ne.Squarespace.ResizeEmitter,this._resizeEmitter.on("resize",Qe,this),ne.Global.on("tweak:change",Qe)},fe.Squarespace.initializeSummaryV2Block=function(ne,Xe){Xe.all(".sqs-block-summary-v2").each(function(Qe){(0,Le.Z)(Qe).then(function(){var wt,ai;let Hi;Qe.hasAttribute("data-block-json")&&(Hi=JSON.parse(Qe.getAttribute("data-block-json")).imageAspectRatio),(wt=Qe.one(".summary-block-collection-type-lessons"))===null||wt===void 0||wt.all(".summary-description").each(function(Xt){Xt._node.style.visibility="visible";let we=Xt._node.innerHTML;we=we.replaceAll(/<p[^>]*>/g,""),we=we.slice(0,-4),we=we.replaceAll("</p>","<br/>"),we="<p>"+we+"</p>",Xt._node.innerHTML=we}),(ai=Qe.one(".summary-block-collection-type-lessons"))===null||ai===void 0||ai.all("img").each(function(Xt){Xt.once("load",function(){window.dispatchEvent(new Event("resize"))},this)}),Qe.all(".sqsSummaryBlockThumbnailPlaceholder").each(Xt=>{const we=(0,Le.U)(Hi);Xt.setStyle("paddingBottom",we+"%"),Xt.get("parentNode").setStyle("paddingBottom",we+"%")}),ne.SQS.Gallery.Manager.initializeBlock(Qe),Qe.all(".sqsSummaryBlockThumbnailPlaceholder").each(Xt=>{Xt.ancestor(".summary-item").getDOMNode().classList.remove("no-image")}),fe.Squarespace.initializeContainerStyles(Qe._node)})})},fe.Squarespace.initializeButtonBlock=function(ne,Xe){ce(ne)},fe.Squarespace.initializeOpenTableBlock=function(ne,Xe){Se(ne,Xe)},fe.Squarespace.initializeOpenTableV2Block=function(ne){(0,lt.Z)(ne)},fe.Squarespace.initializeZolaBlocks=function(ne,Xe){const Qe="zola-wjs",wt=Xe.config.win.document.getElementById(Qe);if(wt){if(!Xe.config.win.Squarespace.SQUARESPACE_INITIALIZED_ONCE)return;if(Xe.config.win.ZolaWidget){Xe.config.win.ZolaWidget.init();return}wt.remove()}const ai=document.createElement("script");ai.src=ne.one("[data-zola-script-src]").getAttribute("data-zola-script-src"),ai.id=Qe,ai.async=!0,Xe.config.win.document.head.appendChild(ai)},fe.Squarespace.initializeAcuityBlocks=function(ne,Xe){if(!Xe.config.win.Squarespace.SQUARESPACE_INITIALIZED_ONCE)return;const Qe=ne.one("script"),wt=document.createElement("script");wt.src=Qe.getAttribute("src"),wt.async=!0,Qe.remove(),ne.appendChild(wt)},fe.Squarespace.initializeSoundcloudBlock=function(ne,Xe){const Qe=ne.one("iframe");if(Qe){const wt=Qe.getAttribute("src");try{const ai=Xe.QueryString.parse(wt).url;if(ai){const Hi=ai.indexOf("/playlists/")>=0;ne.toggleClass("isPlaylist",Hi)}}catch(ai){console.error("Issue parsing SoundCloud url: "+wt,ai)}}},fe.Squarespace.initializeVideoBlock=function(ne,Xe){ne.videoloader||ne.plug(Xe.Squarespace.VideoLoader)},fe.Squarespace.initializeContainerStyles=function(ne){(ne.hasAttribute("data-blend-mode")||ne.hasAttribute("data-blur"))&&B(ne)};function fn(ne){let{win:Xe,formEl:Qe}=ne;try{if(qe.qH(Qe)){const Hi=(0,_e.Z)(Xe);qe.DU(Xe,Hi),qe.bI({formEl:Qe,win:Xe})}const ai=Qe.getAttribute("data-form-id");ai&&(0,q.if)(ai)}catch(wt){console.error("Could not render form",{formEl:Qe,error:wt})}}fe.Squarespace.initializeFormBlocks=function(ne,Xe){const Qe=ne.all(`.sqs-block-form:not([data-block-type="${f.Z.WEBSITE_COMPONENT}"])`);Qe.size()&&Promise.all([t.e("99209"),t.e("53428"),t.e("5663"),t.e("71292"),t.e("66451"),t.e("83769")]).then(t.bind(t,288633)).then(Hi=>{let{bootstrapVisitorForms:Xt,updateVisitorForms:we}=Hi;Xt(Xe);let Ke=Xe.Global.on("tweak:change",ge=>{ge.getName()==="form-submit-button-style"&&we({previewSubmitButtonStyle:ge.getValue()})});window.addEventListener("beforeunload",()=>{Ke&&(Ke.detach(),Ke=null)},{once:!0})}),Qe.each(function(Xt){const we=Xt.one("form");we&&(fn({win:Xe.config.win,formEl:we.getDOMNode()}),fe.Squarespace.initializeContainerStyles(Xt._node))}),(0,Lt.Z)(Xe.config.doc);const wt=".sqs-block-form:not(.sqs-block-website-component) .lightbox-handle";if(!ne.all(wt).isEmpty()){if(Xe.Squarespace.FormRenderingUtils){Xe.Squarespace.FormRenderingUtils.initializeFormLightbox(ne);return}Xe.config.win.Squarespace.addLoadTrigger(wt,["squarespace-form-rendering-utils"])}},fe.Squarespace.initializeNewsletterBlock=function(ne,Xe){const Qe=ne.one(".newsletter-form");if(!Qe)return;fn({win:Xe.config.win,formEl:Qe.getDOMNode()}),fe.Squarespace.initializeContainerStyles(ne._node);const wt=ne.ancestor();ne.toggleClass("newsletter-form-has-small-container",wt.get("offsetWidth")<320).addClass("rendered")},fe.Squarespace.initializeAccordionBlock=function(ne){(0,A.Sw)(ne)},fe.Squarespace.initializeMarqueeBlock=function(ne){(0,N.Z)(ne,Y)},fe.Squarespace.initializeScaledText=function(ne){(0,Jt.Z)(ne)},fe.Squarespace.initializeTextHighlight=function(ne){const Xe=gn(ne);Y.Global.on("colors:updateThemeStyles",()=>{zi(Xe)})},fe.Squarespace.initializeDonationButton=function(ne,Xe){const Qe=ne.one(".sqs-donate-button");if(!Qe){console.error("Careful, there was no button found inside this node!",ne.getDOMNode());return}const wt=()=>{Xe.Squarespace.Commerce.goToDonatePage(Qe.getAttribute("data-donate-page-id"))};Qe.on("click",wt),Qe.on("keydown",ai=>{(ai.keyCode===13||ai.keyCode===32)&&wt()})},fe.Squarespace.initializePricingPlanBlock=function(ne,Xe){(0,j.ci)(ne)},fe.Squarespace.initializeGlobalLightbox=function(ne){ne.all('[rel="lightbox"][data-lightbox]').plug(ne.Squarespace.Lightbox2Plug)},fe.Squarespace.initializeCommerce=function(ne){if(!ne.Squarespace.Commerce.initializeCommerce){console.warn("Commerce rollup not loaded, exiting initializeCommerce() invocation.");return}ne.Squarespace.Commerce.initializeCommerce(ne)},fe.Squarespace.initializeChartBlock=function(ne){ne.ChartJS&&ne.ChartJS.initializeCharts?ne.ChartJS.initializeCharts():ne.config.win.Squarespace.addLoadTrigger(".sqs-block-chart",["squarespace-chartjs-helpers"])},fe.Squarespace.initializeWebsiteComponent=async function(ne){const Xe=await(0,Li.k)();(ne.all('[data-definition-name="website.components.form"]').size()||(0,xt.F)(ne))&&await Promise.all([t.e("99209"),t.e("53428"),t.e("5663"),t.e("71292"),t.e("66451"),t.e("74522")]).then(t.bind(t,899465)).then(Qe=>{fe.Squarespace.renderReactFormForWebsiteComponent=Qe.renderFormPreviewForWebsiteComponent}),ne.all(".sqs-block-website-component[data-definition-name]").each(function(Qe){const wt=Qe.getDOMNode(),ai=wt.dataset.definitionName,Hi=wt.id;ai&&Hi&&Xe.load(ai,Hi,wt)}),(ne.all('[data-definition-name="website.components.donation"]').size()||(0,xt.F)(ne))&&await Promise.all([t.e("99209"),t.e("53428"),t.e("5663"),t.e("71292"),t.e("66451"),t.e("74522")]).then(t.bind(t,155450)).then(Qe=>{fe.Squarespace.renderReactDonationFormForWebsiteComponent=Qe.renderDonationFormForWebsiteComponent}),ne.all('.sqs-block-website-component[data-definition-name="website.components.product"]').each(function(Qe){const wt=new le.Z(Qe.getDOMNode());fe.Squarespace.onDestroy(ne,function(){wt.destroy()})})},fe.Squarespace.initializeWebsiteComponentForContentPreview=async function(ne,Xe){Xe||(Xe=ne);const Qe=await(0,Li.k)();Xe.all(".sqs-block-website-component[data-definition-name]").each(async function(wt){const ai=wt.getDOMNode(),Hi=ai.dataset.definitionName,Xt=ai.id,we=!0;if(Hi&&Xt){const Ke=ne.config.win.document;await mi.Z.load(Hi,Ke),Qe.load(Hi,Xt,ai,we)}})},fe.Squarespace.initializeVideo=function(ne){ne.all(".sqs-video-wrapper").each(function(Xe){!Xe.videoloader&&!Xe.ancestor(".sqs-block-video")&&!Xe.ancestor(".slide")&&Xe.plug(ne.Squarespace.VideoLoader,{load:Xe.getAttribute("data-load")!=="false"})})},fe.Squarespace.initializeNativeVideo=function(ne,Xe){const{parentElement:Qe,isVisitorWebsite:wt}=Xe,ai=".sqs-native-video",Hi=Qe?Qe.all(ai):ne.all(ai);Hi.isEmpty()||Promise.all([t.e("2751"),t.e("76154"),t.e("12499")]).then(t.bind(t,581509)).then(()=>{ne.use("squarespace-native-video-loader"),Hi.each(function(Xt){Xt.plug(ne.Squarespace.NativeVideoLoader,{isVisitorWebsite:wt})})})},fe.Squarespace.initializeSearchBlock=function(ne){if(!ne.all(".sqs-search-ui-text-input").isEmpty()){if(!ne.Squarespace.Widgets.SearchPreview&&ne.one(".sqs-search-ui-text-input")){Promise.all([t.e("10093"),t.e("73158"),t.e("21163")]).then(t.bind(t,902711)).then(()=>{ne.use("squarespace-search-preview")});return}ne.Squarespace.Widgets.SearchPreview.renderAllSearchPreviewNodes()}};const ki=function(ne){const Xe=i()(ne,"SQS.LayoutEngine.AspectRatioManager");Xe&&Xe.initAllBlocks()};fe.Squarespace.initializeAspectRatioBlocks=ki,fe.Squarespace._userHasViewerRole=function(ne){return ne?Object.keys(ne).length>0&&ne[y().VIEWER]:!1},fe.Squarespace.initializeCartPage=function(ne){(0,C.Z)(fe)&&Promise.all([t.e("84696"),t.e("13266"),t.e("13345"),t.e("38296"),t.e("84411"),t.e("99025")]).then(t.bind(t,919676)).then(Xe=>{let{bootstrapCartPage:Qe,unmountCartPage:wt}=Xe;fe.Squarespace.onInitialize(ne,function(){(0,C.Z)(fe)&&Qe({setLocale:o.i_})}),fe.Squarespace.onDestroy(ne,function(){(0,C.Z)(fe)&&wt()})})},fe.Squarespace.initializeSvgs=function(ne){ne.config.win.Squarespace.onInitialize(ne,function(){ne.on("domready",function(){qi&&Promise.all([t.e("99209"),t.e("75788")]).then(t.bind(t,7595)).then(Xe=>{let{default:Qe}=Xe;Qe.parse()})})})};function un(){window.Squarespace.load(window),window.Squarespace.afterBodyLoad(window.Y)}function Xn(){return!!document.getElementById("order-status-page-root")}Ae.Z.isSevenOne()&&fe.document.addEventListener("DOMContentLoaded",function(){Xn()||un()})},Common(window);var ls=t(382035);YUI.add("squarespace-common",function(ct){},"1.0",{requires:["get","intl","@sqs/layout-engine/aspect-ratio-manager","squarespace-promises","squarespace-attr-validators","squarespace-commerce-utils","squarespace-cookie-banner-styles","squarespace-currency-symbols","squarespace-deprecated-modules","squarespace-damask-context-globals","squarespace-escmanager","squarespace-follow-buttons","squarespace-form-submit","squarespace-gallery","squarespace-gallery-manager","squarespace-gallery-ng","squarespace-image-loader","squarespace-models-shopping-cart-facade","squarespace-plugin-lightbox2","squarespace-spinner","squarespace-ui-base","squarespace-util","squarespace-video-loader","squarespace-widgets-alert","squarespace-widgets-information","thirdparty-modernizr","yui-throttle"]})},224381:function(){YUI.add("squarespace-connected-account-capabilities",function(c){var b=c.namespace("Squarespace.ConnectedAccountCapabilities"),t=b.PULL=1,l=b.PUSH=2,d=b.ICON=4,o=b.NONE=0,e={applepodcast:d,bandsintown:d,behance:d,chownow:d,codepen:d,dribbble:d,dropbox2017:o,dropbox:o,email:d,facebook:d|l,fivehundredpix:d|t,flickr:t|d,foursquare:d|t,github:d,goodreads:d,google:d,googleplay:d,googlesearchconsole:o,houzz:d,imdb:d,instagram:d|t,itunes:d,linkedin:d|l,medium:d,meetup:d,pinterest:d|l,rdio:d,reddit:d,smugmug:d,snapchat:d,soundcloud:d,spotify:d,stitcher:d,stumbleupon:d,thedots:d,tidal:d,tripadvisor:d,tumblr:d|l,twitch:d,twitter:t|l|d,vevo:d,vimeo:d,vine:d,vsco:d,yelp:d,youtube:d};b.can=function(a,r){var s=e[a.get("serviceName")];return c.Lang.isValue(s)?s&r:!1},b.get=function(a){return e[a.get("serviceName")]}},"1.0",{requires:[]})},274613:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-connected-account-configs",function(d){d.namespace("Squarespace").ConnectedAccountConfigs={applepodcast:{displayName:(0,l.t)("Apple Podcasts",null,{project:"scripts-v6-root"}),icon:"applepodcast"},bandsintown:{displayName:(0,l.t)("Bandsintown",null,{project:"scripts-v6-root"}),icon:"bandsintown"},behance:{displayName:(0,l.t)("Behance",null,{project:"scripts-v6-root"}),icon:"behance"},chownow:{displayName:(0,l.t)("ChowNow",null,{project:"scripts-v6-root"}),icon:"chownow"},codepen:{displayName:(0,l.t)("CodePen",null,{project:"scripts-v6-root"}),icon:"codepen"},dribbble:{displayName:(0,l.t)("Dribbble",null,{project:"scripts-v6-root"}),icon:"dribbble"},dropbox:{displayName:(0,l.t)("Dropbox",null,{project:"scripts-v6-root"}),icon:"dropbox"},dropbox2017:{displayName:(0,l.t)("Dropbox",null,{project:"scripts-v6-root"}),icon:"dropbox2017"},email:{displayName:(0,l.t)("Email",null,{project:"scripts-v6-root"}),icon:"email"},facebook:{displayName:(0,l.t)("Facebook",null,{project:"scripts-v6-root"}),icon:"facebook"},fivehundredpix:{displayName:(0,l.t)("500px",null,{project:"scripts-v6-root"}),icon:"fivehundredpix"},flickr:{displayName:(0,l.t)("Flickr",null,{project:"scripts-v6-root"}),icon:"flickr"},foursquare:{displayName:(0,l.t)("Foursquare Swarm",null,{project:"scripts-v6-root"}),icon:"foursquare"},github:{displayName:(0,l.t)("GitHub",null,{project:"scripts-v6-root"}),icon:"github"},goodreads:{displayName:(0,l.t)("Goodreads",null,{project:"scripts-v6-root"}),icon:"goodreads"},googleplay:{displayName:(0,l.t)("Google Play",null,{project:"scripts-v6-root"}),icon:"googleplay"},googlesearchconsole:{displayName:(0,l.t)("Google Search Console",null,{project:"scripts-v6-root"}),icon:"googlesearchconsole"},houzz:{displayName:(0,l.t)("Houzz",null,{project:"scripts-v6-root"}),icon:"houzz"},imdb:{displayName:(0,l.t)("IMDb",null,{project:"scripts-v6-root"}),icon:"imdb"},instagram:{displayName:(0,l.t)("Instagram",null,{project:"scripts-v6-root"}),icon:"instagram"},itunes:{displayName:(0,l.t)("iTunes Store",null,{project:"scripts-v6-root"}),icon:"itunes"},linkedin:{displayName:(0,l.t)("LinkedIn",null,{project:"scripts-v6-root"}),icon:"linkedin"},medium:{displayName:(0,l.t)("Medium",null,{project:"scripts-v6-root"}),icon:"medium"},meetup:{displayName:(0,l.t)("Meetup",null,{project:"scripts-v6-root"}),icon:"meetup"},pinterest:{displayName:(0,l.t)("Pinterest",null,{project:"scripts-v6-root"}),icon:"pinterest"},rdio:{displayName:(0,l.t)("Rdio",null,{project:"scripts-v6-root"}),icon:"rdio"},reddit:{displayName:(0,l.t)("Reddit",null,{project:"scripts-v6-root"}),icon:"reddit"},smugmug:{displayName:(0,l.t)("SmugMug",null,{project:"scripts-v6-root"}),icon:"smugmug"},snapchat:{displayName:(0,l.t)("Snapchat",null,{project:"scripts-v6-root"}),icon:"snapchat"},soundcloud:{displayName:(0,l.t)("SoundCloud",null,{project:"scripts-v6-root"}),icon:"soundcloud"},spotify:{displayName:(0,l.t)("Spotify",null,{project:"scripts-v6-root"}),icon:"spotify"},stitcher:{displayName:(0,l.t)("Stitcher",null,{project:"scripts-v6-root"}),icon:"stitcher"},stumbleupon:{displayName:(0,l.t)("StumbleUpon",null,{project:"scripts-v6-root"}),icon:"stumbleupon"},thedots:{displayName:(0,l.t)("The Dots",null,{project:"scripts-v6-root"}),icon:"thedots"},tidal:{displayName:(0,l.t)("TIDAL",null,{project:"scripts-v6-root"}),icon:"tidal"},tripadvisor:{displayName:(0,l.t)("TripAdvisor",null,{project:"scripts-v6-root"}),icon:"tripadvisor"},tumblr:{displayName:(0,l.t)("Tumblr",null,{project:"scripts-v6-root"}),icon:"tumblr"},twitch:{displayName:(0,l.t)("Twitch",null,{project:"scripts-v6-root"}),icon:"twitch"},twitter:{displayName:(0,l.t)("Twitter",null,{project:"scripts-v6-root"}),icon:"twitter"},vevo:{displayName:(0,l.t)("Vevo",null,{project:"scripts-v6-root"}),icon:"vevo"},vimeo:{displayName:(0,l.t)("Vimeo",null,{project:"scripts-v6-root"}),icon:"vimeo"},vine:{displayName:(0,l.t)("Vine",null,{project:"scripts-v6-root"}),icon:"vine"},vsco:{displayName:(0,l.t)("VSCO",null,{project:"scripts-v6-root"}),icon:"vsco"},yelp:{displayName:(0,l.t)("Yelp",null,{project:"scripts-v6-root"}),icon:"yelp"},youtube:{displayName:(0,l.t)("YouTube",null,{project:"scripts-v6-root"}),icon:"youtube"}}},"1.0",{requires:[]})},61672:function(c,b,t){"use strict";var l=t(714487),d=t(194872),o=t.n(d),e=t(868192),a="https://www.chownow.com/lp/squarespace?utm_source=squarespace&utm_medium=squarespace_UI&utm_campaign=squarespace_referral";YUI.add("squarespace-connected-account-dialog-settings",function(r){r.namespace("Squarespace");var s=r.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","identifier"]),n=r.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount","displayName"]),i=r.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","baseUrl"]),u=r.Squarespace.ConnectedAccountCapabilities,h=function(B){return u.can(B,u.PULL)},g={pushToggle:{title:(0,l.t)("Show Push Option",null,{project:"scripts-v6-root"}),description:(0,l.t)("When posting on Squarespace, show this account as a cross-publishing option.",null,{project:"scripts-v6-root"})},pullToggle:{title:(0,l.t)("Download Data",null,{project:"scripts-v6-root"}),description:(0,l.t)("When new items are posted to this account, download them to Squarespace for publishing on your site.",null,{project:"scripts-v6-root"})},iconToggle:{title:(0,l.t)("Show Social Icon",null,{project:"scripts-v6-root"}),description:(0,l.t)("Most templates have built-in social icons, but you can also display icons anywhere on your site using the Social Links Block.",null,{project:"scripts-v6-root"})},tumblrMetaData:{title:(0,l.t)("Primary Blog",null,{project:"scripts-v6-root"}),description:(0,l.t)("Select the blog content will be pushed to.",null,{project:"scripts-v6-root"})},profileUrl:{title:(0,l.t)("Profile URL",null,{project:"scripts-v6-root"}),description:(0,l.t)("Enter the URL to your profile. Social icons on the site will link to this.",null,{project:"scripts-v6-root"}),placeholder:(0,l.t)("http://\u2026",null,{project:"scripts-v6-root"})}},p={ctor:r.Squarespace.DialogFields.StructuredInput,config:{name:"defaultPushMessage","strings.title":(0,l.t)("Default Posting Format",null,{project:"scripts-v6-root"}),"strings.description":(0,l.t)("When posting to this service from Squarespace, this will be the default message format used.",null,{project:"scripts-v6-root"}),placeholder:"%t %u",value:(0,l.t)("New post %t from %a.",null,{project:"scripts-v6-root"}),variables:{"%t":{title:(0,l.t)("Title",null,{project:"scripts-v6-root"}),description:(0,l.t)("The title of this post.",null,{project:"scripts-v6-root"}),exampleText:(0,l.t)("New Post Title",null,{project:"scripts-v6-root"})},"%a":{title:(0,l.t)("Author",null,{project:"scripts-v6-root"}),description:(0,l.t)("The author of this post.",null,{project:"scripts-v6-root"}),exampleText:n},"%u":{title:(0,l.t)("URL",null,{project:"scripts-v6-root"}),description:(0,l.t)("The URL to this post.",null,{project:"scripts-v6-root"}),exampleText:i+"/blog-post"}}}},f=function(B,N){N.get("dialog").fire("remove-requested")},m={ctor:r.Squarespace.DialogFields.Button,config:{"strings.text":(0,l.t)("Disconnect",null,{project:"scripts-v6-root"}),onClick:f,id:"connectedAccountsDialogDisconnectButton"}},_=function(B){return function(N){return N.get("serviceName")!==B}},v=function(B){return B.get("serviceName")!=="facebook"||B.get("metaData")&&(B.get("metaData.isPageAccount")||B.get("metaData.managedPages").length)},E={$valueFn:function(B){return p},$when:function(B){return _("tumblr")(B)&&v(B)}},S={$value:{ctor:r.Squarespace.DialogFields.Check,config:{"strings.title":g.pushToggle.title,"strings.description":g.pushToggle.description,name:"pushEnabled"}},$when:v},y={};y[u.NONE]=[],y[u.PULL|u.PUSH|u.ICON]=[{ctor:r.Squarespace.DialogFields.Check,config:{"strings.title":g.iconToggle.title,"strings.description":g.iconToggle.description,name:"iconEnabled"}},{ctor:r.Squarespace.DialogFields.Check,config:{"strings.title":g.pullToggle.title,"strings.description":g.pullToggle.description,name:"pullEnabled"}},S,E,{ctor:r.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":g.profileUrl.title,"strings.description":g.profileUrl.description,"strings.placeholder":g.profileUrl.placeholder,submitOnEnter:!0}},m],y[u.PULL|u.ICON]=[{ctor:r.Squarespace.DialogFields.Check,config:{"strings.title":g.iconToggle.title,"strings.description":g.iconToggle.description,name:"iconEnabled"}},{ctor:r.Squarespace.DialogFields.Check,config:{"strings.title":g.pullToggle.title,"strings.description":g.pullToggle.description,name:"pullEnabled"}},{ctor:r.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":g.profileUrl.title,"strings.description":g.profileUrl.description,"strings.placeholder":g.profileUrl.placeholder,submitOnEnter:!0}},m],y[u.ICON]=[{ctor:r.Squarespace.DialogFields.Check,config:{"strings.title":g.iconToggle.title,"strings.description":g.iconToggle.description,name:"iconEnabled"}},{$value:{ctor:r.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":g.profileUrl.title,"strings.description":g.profileUrl.description,"strings.placeholder":g.profileUrl.placeholder,description:"",submitOnEnter:!0}},$when:_("email")},m],y[u.ICON|u.PUSH]=[{ctor:r.Squarespace.DialogFields.Check,config:{"strings.title":g.iconToggle.title,"strings.description":g.iconToggle.description,name:"iconEnabled"}},{$value:{ctor:r.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":g.profileUrl.title,"strings.description":g.profileUrl.description,"strings.placeholder":g.profileUrl.placeholder,submitOnEnter:!0}},$when:_("tumblr")},S,E,m],r.Squarespace.ConnectedAccountDialogSettingsContext={buttons:[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6-root"})},{type:"remove",title:(0,l.t)("Disconnect",null,{project:"scripts-v6-root"})},{$value:{type:"reset",title:(0,l.t)("Reset Data",null,{project:"scripts-v6-root"})},$when:h},{type:"saveAndClose",title:(0,l.t)("Save",null,{project:"scripts-v6-root"})}]};var C=function(B){return r.clone(y[r.Squarespace.ConnectedAccountCapabilities.get(B)])},O=function(B){var N=B.get("serviceName");return(0,l.t)("{typeName} Settings",{typeName:r.Squarespace.ConnectedAccountConfigs[N].displayName},{project:"scripts-v6-root"})},A={style:"flyout",flyoutPointerDirection:"centered",verticalHeight:"fit",overlay:.5,name:"social-account-settings",closeOthers:!1,width:600,tabs:[{icon:"/universal/images-v6/icons/icon-settings-16-light.png",title:{$valueFn:O},fields:{$valueFn:C}}],buttons:{$include:"buttons"}},I=function(B,N){var P=r.clone(A);return P.tabs[0].fields=N,P},D=function(B){var N=B.get("metaData.managedPages");return{ctor:r.Squarespace.DialogFields.FacebookMetaData,name:"metaData",config:{pages:r.Array.map(N,function(P){return{label:P.name,value:P.id}})}}},T={pinterest:r.merge(A,{width:600,tabs:[{scroll:!0,title:{$valueFn:O},fields:{$valueFn:function(B){var N=C(B),P=!0;if(!P)return N;var x=B.get("metaData"),R=!1,w=!1,k=!1,q=!1,F=!1;if(r.Lang.isObject(x))switch(x.domainVerificationStatus){case o().FAILED:case o().PROCESSED:R=!0;break;case o().USER_PROFILE_CONFIG_PROBLEM:k=!0;break;case o().NONE:case o().PENDING:w=!0;break;case o().SUCCEEDED:q=!0;break}else F=!0,R=!0;if(!F){var z=r.Array.map(x.boardConnections,function(j){return{label:(0,l.t)("{sub1} (Board)",{sub1:j.name},{project:"scripts-v6-root"}),value:j.id}});N.splice(N.length-1,0,{ctor:r.Squarespace.DialogFields.PinterestMetaData,config:{name:"metaData",boards:z,required:!0}})}return R?N.splice(N.length-1,0,{ctor:r.Squarespace.DialogFields.Description,config:{padding:[15,0],title:(0,l.t)("Reconnect account",null,{project:"scripts-v6-root"}),text:(0,l.t)("Please reconnect your Pinterest account to enable Pinterest Analytics for your website.",null,{project:"scripts-v6-root"})}}):k?N.unshift({ctor:r.Squarespace.DialogFields.Error,config:{padding:[15,0],text:(0,l.t)("<b>Verification of your website's domain with Pinterest failed.</b> Please ensure the website you have configured in your Pinterest profile matches your Squarespace website's domain. Reconnect your Pinterest account to attempt verification again.",null,{project:"scripts-v6-root"})}}):w?N.splice(N.length-1,0,{ctor:r.Squarespace.DialogFields.Description,config:{padding:[15,0],text:(0,l.t)("Your website is being verified by Pinterest to enable Pinterest Analytics for your website. Please check back later.",null,{project:"scripts-v6-root"})}}):q&&N.splice(N.length-1,0,{ctor:r.Squarespace.DialogFields.Description,config:{padding:[15,0],title:(0,l.t)("Pinterest Analytics Activated",null,{project:"scripts-v6-root"}),text:(0,l.t)('You can now see what people are Pinning from your site. Visit <a href="https://analytics.pinterest.com/domain" target="_blank">Pinterest Analytics</a>.',null,{project:"scripts-v6-root"})}}),N}}}]}),googlesearchconsole:r.merge(A,{width:600,tabs:[{scroll:!0,title:{$valueFn:O},fields:[{$valueFn:function(B){return C(B)[0]}},{ctor:r.Squarespace.DialogFields.Description,config:{text:(0,l.t)(`<a href="https://www.google.com/webmasters/tools/home" target="_blank">Google Search Console</a> is an integration with Google that helps you monitor and maintain your site's presence in Google Search results.`,null,{project:"scripts-v6-root"})}},{ctor:r.Squarespace.DialogFields.Description,config:{text:(0,l.t)("By disconnecting, you will no longer receive Google Search Console data within the Analytics panel.",null,{project:"scripts-v6-root"})}},m]}]}),facebook:r.merge(A,{width:600,tabs:[{scroll:!0,icon:"/universal/images-v6/icons/icon-settings-16-light.png",title:{$valueFn:O},fields:{$valueFn:function(B){var N=C(B);return v(B)?N.splice(N.length-1,0,D(B)):N.splice(N.length-1,0,{ctor:r.Squarespace.DialogFields.Description,config:{padding:[15,0],title:(0,l.t)("Reconnect to Enable Push Targets",null,{project:"scripts-v6-root"}),text:(0,l.t)('If you have a Facebook Page, please reconnect your Facebook account to enable pushing to your account. <a href="{helpLink}" target="_blank">Learn more.</a>',{helpLink:e.FACEBOOK_PUSH},{project:"scripts-v6-root"})}}),N}}}]}),tumblr:r.merge(A,{tabs:[{icon:"/universal/images-v6/icons/icon-settings-16-light.png",title:{$valueFn:O},fields:[{$valueFn:function(B){return C(B)[0]}},{$value:{ctor:r.Squarespace.DialogFields.Description,config:{title:g.tumblrMetaData.title,text:g.tumblrMetaData.description,padding:[20,0]}},$when:function(B){return B.get("metaData")}},{$valueFn:function(B){var N=B.get("metaData"),P=N.blogs,x=[];return r.Array.each(P,function(R,w){x.push({value:R.name,label:R.title||R.name})},this),{ctor:r.Squarespace.DialogFields.Select,config:{className:"thin dark",name:"primaryBlog",options:x,width:.3}}},$when:function(B){return B.get("metaData")}},m]}]}),dropbox:r.merge(I(A,[{ctor:r.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Dropbox Connection Activated",null,{project:"scripts-v6-root"}),text:(0,l.t)("Your Squarespace account is connected to your Dropbox account.  Pressing the publish button from the previous screen will let you synchronize your content into Squarespace.",null,{project:"scripts-v6-root"})}},{ctor:r.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Instructions",null,{project:"scripts-v6-root"}),text:(0,l.t)('After you have connected your account to Dropbox, a <strong>Squarespace</strong> folder will appear in the <strong>Apps</strong> directory of your Dropbox account.  To publish files to Squarespace, within our directory, create a folder called <strong>{websiteIdentifier}</strong> (the name of your site), and then create a sub-folder for each collection you would like to create on your Squarespace site.<br/><br/>For instance, creating a folder with images at <strong>/Apps/Squarespace/{websiteIdentifier}/Test Images</strong> would create a corresponding collection called <strong>Test Images</strong> on Squarespace, and your images would be automatically transferred to that collection. If you want a specific file to be ignored by Squarespace just prefix the file name with underscrore ("_").<br/><br/>Squarespace for Dropbox currently only supports images. <br/><br/> Please note that you must press the <strong>Publish to Squarespace</strong> button from the main Connected Accounts panel to push changes from Dropbox to Squarespace &mdash; they will not be automatically uploaded.',{websiteIdentifier:s},{project:"scripts-v6-root",notes:"oldKey: veryLongDropBoxInstructions"}),padding:[10,0]}},m]),{width:600}),dropbox2017:r.merge(I(A,[{ctor:r.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Dropbox Connection Activated",null,{project:"scripts-v6-root"}),text:(0,l.t)("Your Squarespace account is connected to your Dropbox account.  Pressing the publish button from the previous screen will let you synchronize your content into Squarespace.",null,{project:"scripts-v6-root"})}},{ctor:r.Squarespace.DialogFields.Description,config:{title:(0,l.t)("Instructions",null,{project:"scripts-v6-root"}),text:(0,l.t)('After you have connected your account to Dropbox, a <strong>Squarespace</strong> folder will appear in the <strong>Apps</strong> directory of your Dropbox account.  To publish files to Squarespace, within our directory, create a folder called <strong>{websiteIdentifier}</strong> (the name of your site), and then create a sub-folder for each collection you would like to create on your Squarespace site.<br/><br/>For instance, creating a folder with images at <strong>/Apps/Squarespace/{websiteIdentifier}/Test Images</strong> would create a corresponding collection called <strong>Test Images</strong> on Squarespace, and your images would be automatically transferred to that collection. If you want a specific file to be ignored by Squarespace just prefix the file name with underscrore ("_").<br/><br/>Squarespace for Dropbox currently only supports images. <br/><br/> Please note that you must press the <strong>Publish to Squarespace</strong> button from the main Connected Accounts panel to push changes from Dropbox to Squarespace &mdash; they will not be automatically uploaded.',{websiteIdentifier:s},{project:"scripts-v6-root",notes:"oldKey: veryLongDropBoxInstructions2017"}),padding:[10,0]}},m]),{width:600}),chownow:r.merge(I(A,[{ctor:r.Squarespace.DialogFields.Description,config:{text:(0,l.t)('Enter your ChowNow Company ID to connect it to Squarespace and accept orders online. If you don\u2019t have a ChowNow account yet, <a href="{chowNowSignupLink}" target="_blank">sign up here</a>. <a href="{chowNowHelpLink}" target="_blank">Learn more</a>',{chowNowSignupLink:a,chowNowHelpLink:e.CHOWNOW},{project:"scripts-v6-root"})}},{ctor:r.Squarespace.DialogFields.Text,config:{name:"userName",title:(0,l.t)("ChowNow Company ID",null,{project:"scripts-v6-root"}),submitOnEnter:!0}},{ctor:r.Squarespace.DialogFields.Check,config:{name:"iconEnabled","strings.title":g.iconToggle.title,"strings.description":g.iconToggle.description}},m]),{width:600})};r.Squarespace.ConnectedAccountDialogSettings={get:function(B){return r.clone(T[B]||A)}}},"1.0",{requires:["squarespace-connected-account-capabilities","squarespace-connected-account-configs","squarespace-dialog-description","squarespace-dialog-error","squarespace-dialog-facebook-meta-data","squarespace-dialog-fields","squarespace-dialog-pinterest-meta-data","squarespace-dialog-select","squarespace-dialog-structured-input"]})},151442:function(){YUI.add("squarespace-connected-account-editors",function(c){var b={tumblr:c.Squarespace.TumblrAccountEditor};c.namespace("Squarespace").ConnectedAccountEditors={create:function(t){var l=t.get("serviceName"),d=b[l];return d||(d=c.Squarespace.ModelEditorDialog),new d({model:t,dialogConfigContext:c.Squarespace.ConnectedAccountDialogSettingsContext,dialogConfig:c.Squarespace.ConnectedAccountDialogSettings.get(l)})}}},"1.0",{requires:["squarespace-connected-account-dialog-settings","squarespace-model-editor","squarespace-tumblr-connected-account-editor"]})},352828:function(c,b,t){"use strict";var l=t(815211),d=t.n(l),o=t(714487),e=t(840635),a=t(659519);YUI.add("squarespace-connected-account-widget",function(r){r.Handlebars.registerHelper("serviceNameForDisplay",function(s){return r.Squarespace.ConnectedAccountConfigs[s.serviceName].displayName}),r.Handlebars.registerHelper("screenNameForDisplay",function(s){var n=s.serviceName;if(n==="tumblr"){if(s.metaData&&s.metaData.primaryBlog){var i=r.Array.find(s.metaData.blogs,function(u){return u.primary});if(i)return s.screenname+" ("+i.title+")"}}else if(s.serviceId===d().CHOWNOW)return"Company ID: "+s.screenname;return!s.screenname&&s.title?s.title:s.screenname}),r.namespace("Squarespace.Widgets").ConnectedAccount=r.Base.create("connectedAccountWidget",r.Widget,[r.WidgetChild],{initializer:function(){this._editor=r.Squarespace.ConnectedAccountEditors.create(this.get("model")),this._bindEditorEvents(this._editor),this.publish("reauthenticate",{emitFacade:!0}),this.publish("account-removed")},destructor:function(){this._editor.destroy(),this._modelChangeHandle&&this._modelChangeHandle.detach()},_bindEditorEvents:function(s){var n=s.get("dialog");n.on("button-reset",this._resetSubscription,this),n.on("remove-requested",this._remove,this)},_remove:function(){var s=this.get("model").get("serviceName");(0,a.Z)("interface_click",{identifier:"connected-account-disconnect",serviceName:s});var n=new r.Squarespace.Widgets.Confirmation({"strings.title":(0,o.t)("Disconnect Account",null,{project:"scripts-v6-root"}),"strings.message":(0,o.t)("Are you sure you want to disconnect this account?",null,{project:"scripts-v6-root"})});n.on("cancel",function(){(0,a.Z)("interface_click",{identifier:"connected-account-disconnect-cancel",serviceName:s})}),n.on("confirm",function(){(0,a.Z)("interface_click",{identifier:"connected-account-disconnect-confirm",serviceName:s}),this.get("model").destroy({remove:!0},r.bind(function(i){i||(e.Z.refreshConnectedAccounts(),this.fire("account-removed"),this.destroy())},this))},this)},_resetSubscription:function(){this.get("model").resetSubscription(),new r.Squarespace.Widgets.Information({"strings.title":(0,o.t)("Account Reset",null,{project:"scripts-v6-root"}),"strings.message":(0,o.t)("Your connected account has been reset. Social blocks are being populated with the latest activity. This may take a few minutes.",null,{project:"scripts-v6-root"})})},bindUI:function(){var s=this.get("model");s&&(this._modelChangeHandle=s.after("change",this.syncUI,this)),this.get("boundingBox").on("click",function(){this.get("editable")&&this._edit()},this),this.get("contentBox").delegate("click",this._reauthenticate,".reauthenticate",this)},syncUI:function(){this.get("contentBox").setContent(r.Squarespace.UITemplates.renderAsNodeOrDocFrag("connected-account.html",this.get("model").getAttrs()))},_reauthenticate:function(s){s.halt(),this.fire("reauthenticate")},_edit:function(){var s=this.get("model"),n=s.get("serviceName")==="pinterest",i=s.get("metaData")===null;n&&i?this._showPinterestPitchDialog(s.get("id")):this.showEditor()},_showPinterestPitchDialog:function(s){var n=new r.Squarespace.EditingDialog({width:400,title:(0,o.t)("Connect to Pinterest",null,{project:"scripts-v6-root"}),fields:[{ctor:r.Squarespace.DialogFields.Description,config:{text:(0,o.t)("By connecting your Pinterest account to your website, you will verify for Pinterest that you own it and receive access to Pinterest Analytics where you can see what people Pin from your website.",null,{project:"scripts-v6-root"})}},{ctor:r.Squarespace.Widgets.Button,config:{"strings.text":(0,o.t)("Connect",null,{project:"scripts-v6-root"}),onClick:function(){n.close();var i=new r.Squarespace.SocialAuthenticator;i._startOAuth("pinterest",s),i.after("account-added",function(){this.showEditor()},this)},context:this}}],buttons:[{title:(0,o.t)("Close",null,{project:"scripts-v6-root"}),type:"cancel"}]});n.on("close",this.showEditor,this),n.show()},showEditor:function(){this._editor.show()}},{CSS_PREFIX:"sqs-connected-account",ATTRS:{model:{},editable:{value:!0,validator:r.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-connected-account-configs","squarespace-connected-account-editors","squarespace-connected-account-template","squarespace-dialog","squarespace-models-connected-accounts","squarespace-social-authenticator","squarespace-ui-templates","squarespace-widgets-confirmation","squarespace-widgets-information","widget","widget-child"]})},8538:function(c,b,t){"use strict";var l=t(714487),d=t(586745),o=t.n(d),e=t(44348),a=t.n(e);YUI.add("squarespace-content-collection-bulk-actionable",function(r){r.namespace("Squarespace.Mixins"),r.Squarespace.Mixins.ContentCollectionBulkActionable=r.Base.create("ContentCollectionBulkActionable",r.Base,[],{initializer:function(){this._renderHandle=r.Do.after(this._renderActionTray,this,"renderUI",this),this._bindHandle=r.Do.after(this._bindActionTray,this,"bindUI",this)},destructor:function(){r.Lang.isValue(this._actionTray)&&this._actionTray.destroy(!0),this._actionTray=null,this._loadEventHandle&&(this._loadEventHandle.detach(),this._loadEventHandle=null),this._renderHandle.detach(),this._bindHandle.detach()},_renderActionTray:function(){var s=r.Squarespace.NodeUtils.getClosestScrollingAncestor(this.get("contentBox"));if(s){var n=this.get("actionTrayCtor");this._actionTray=new n({"strings.title":(0,l.t)("{count} {label} Selected",null,{project:"scripts-v6-root"}),buttons:this._getTrayButtons(),render:s.ancestor(),scrollNode:s})}},_bindActionTray:function(s){this._loadEventHandle=this.get("model").after("load",function(){r.Lang.isValue(this._actionTray)&&this._syncActionTray()},this),this.get("multiple")&&this.after("selectedChange",function(n){(n.newVal===1||n.prevVal===1)&&this._syncActionTray()})},_syncActionTray:function(){this._actionTray.set("buttons",this._getTrayButtons())},_getButtonConfig:function(){var s=this._buttonConfigCache;return s||(this._buttonConfigCache={selection:{$valueFn:(function(n){return this.get("selected")===1?{label:(0,l.t)("Unselect All",null,{project:"scripts-v6-root"}),action:this.deselectAll,context:this,className:"light no-frame"}:{label:(0,l.t)("Select All",null,{project:"scripts-v6-root"}),action:this.selectAll,context:this,className:"light no-frame"}}).bind(this)},moveToCollection:{label:(0,l.t)("Move",null,{project:"scripts-v6-root"}),action:this.moveSelected,context:this,className:"dark no-frame"},remove:{label:(0,l.t)("Remove",null,{project:"scripts-v6-root"}),action:this.removeSelected,context:this,className:"dark no-frame"},hide:{label:(0,l.t)("Hide",null,{project:"scripts-v6-root"}),action:this.hideSelection,context:this},show:{label:(0,l.t)("Show",null,{project:"scripts-v6-root"}),action:this.showSelection,context:this},moveToBeginning:{label:(0,l.t)("Move To Top",null,{project:"scripts-v6-root"}),action:this.moveSelection.bind(this,!1),context:this},moveToEnd:{label:(0,l.t)("Move To Bottom",null,{project:"scripts-v6-root"}),action:this.moveSelection.bind(this,!0),context:this},schedule:{label:(0,l.t)("Schedule",null,{project:"scripts-v6-root"}),action:this.scheduleSelection,context:this}},this._getButtonConfig())},moveSelection:function(s){var n=this.get("selection"),i=this.get("selection").toJSON().map(function(h){return h.get("item")}),u=null;s?u=this.get("collection").items.size()-i.length:u=0,this.get("model").items.reorderItems(i,u,(function(h){if(h){new r.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("Something Went Wrong",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("There was an error performing the desired action.The system administrators have been notified.",null,{project:"scripts-v6-root"})});return}this._uiMoveSelection(n,s)}).bind(this))},_uiMoveSelection:function(s,n){},hideSelection:function(){var s=this.get("selection"),n=new r.Parallel;s.each(function(i){var u=i.get("item");u.set("workflowState",a().DRAFT),u.save({source:"bulk-save-operation"},n.add())}),n.done((function(){new r.Squarespace.Widgets.Information({"strings.title":(0,l.t)("Save Successful",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("The selected items have been successfully hidden.",null,{project:"scripts-v6-root"})}),this.deselectAll()}).bind(this))},showSelection:function(){var s=this.get("selection"),n=new r.Parallel;s.each(function(i){var u=i.get("item");u.set("workflowState",a().PUBLISHED),u.save({source:"bulk-save-operation"},n.add())}),n.done((function(){new r.Squarespace.Widgets.Information({"strings.title":(0,l.t)("Save Successful",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("The selected items have been successfully shown.",null,{project:"scripts-v6-root"})}),this.deselectAll()}).bind(this))},scheduleSelection:function(){new r.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("Not Yet Implemented",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("This feature has not yet been implemented!",null,{project:"scripts-v6-root"})})},_getTrayButtons:function(){var s=this._getButtonConfig(),n=this.get("buttonsOrder").map(function(i){return s[i]}).filter(function(i){return!!i});return r.Squarespace.ObjectBuilder.makeArray(n)},updateActionTray:function(){this._registerTimer(r.later(0,this,function(){var s=this.get("selection"),n=0;s&&(this.get("multiple")===!0?(s.size()!==1||s.item(0)!==this.get("activeDescendant"))&&(n=s.size()):s!==this.get("activeDescendant")&&(n=1)),this._actionTray.set("count",n)}))},removeSelected:function(){var s=this.get("selection");s&&new r.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("Remove Selected?",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("Are you sure you wish to remove your selection? This action cannot be undone.",null,{project:"scripts-v6-root"})}).on("confirm",function(){this.removeItems(s)},this)},removeItems:function(s){var n=[];s.each(function(i){i.get("item").get("id")&&n.push(i.get("item")),i.set("selected",0),i.destroy()},this),n.length>0&&this.get("model").items.removeItems(n)},moveSelected:function(){var s=this.get("model"),n=this.get("multiple"),i=new r.Squarespace.EditingDialog({width:380,height:300,overlay:.5,style:"flyout",savingText:n&&(0,l._6)({one:"Moving Item\u2026",other:"Moving Items\u2026"},this.get("selection").size(),null,{project:"scripts-v6-root",notes:"oldKey: movingItems"}),buttons:[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6-root"})},{type:"moveItems",title:n&&(0,l._6)({one:"Move Item\u2026",other:"Move Items\u2026"},this.get("selection").size(),null,{project:"scripts-v6-root",notes:"oldKey: moveItems"})}],tabs:[{title:(0,l.t)("Select Destination Collection",null,{project:"scripts-v6-root"}),scroll:!0,icon:"/universal/images-v6/icons/icon-import-16-light.png",fields:[{ctor:r.Squarespace.DialogFields.ContentSelector,config:{name:"content-selector",showCollectionTagsAndCategories:!1,collectionFilter:this._getMovementCandidateFilter(),excludeCollectionIds:[s.get("id")]}}]}]});i.on("show",function(){this.set("dragSelectionEnabled",!1)},this),i.on("dismiss",function(){this.set("dragSelectionEnabled",!0)},this),i.on("button-moveItems",function(){var u=i.getField("content-selector").get("data");if(r.Lang.isArray(u)&&(u=u[0]),!u){new r.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("No Collection Selected",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("Please select a collection to move the selected items to.",null,{project:"scripts-v6-root"})});return}i.showSaveOverlay(),i.updateTitle(r.Squarespace.DialogStates.SAVING),r.Squarespace.ContentCollectionCache.getCollectionById(u.id,function(h){var g=[],p=this.get("selection");p.each(function(f){g.push(f.get("item"))},this),h._fetchItemCount(h.get("id")).then(function(f){var m=r.Squarespace.Upsell.getMaxItemCountForCollection(h);g.length+f>m?new r.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Move Cancelled",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("Size limit of destination will be exceeded if selected items are moved.",null,{project:"scripts-v6-root"})}).on("confirm",function(){i.cancel()}):s.items.moveItems(g,h,r.bind(function(_,v){i.cancel();var E=g.some(function(y){return y.get("recordType")===o().STORE_ITEM});if(_)new r.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Move Failed",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("{error} Please try again.",{error:_.error},{project:"scripts-v6-root"})}).on("confirm",function(){i.cancel()});else if(v.numOfUrlConflictsFixed>0&&E){var S;g.length===1?S=(0,l.t)("The product you moved has a new URL. Edit the product to customize it.",null,{project:"scripts-v6-root"}):S=(0,l._6)({one:"One of the products you moved has a new URL. Edit the product to customize it.",other:"Some of the products you moved have new URLs. Edit the products to customize them."},v.numOfUrlConflictsFixed,null,{project:"scripts-v6-root"}),new r.Squarespace.Widgets.Alert({"strings.message":S}).on("confirm",function(){i.cancel()})}},this))}).catch(function(f){new r.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Move Cancelled",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("Something went wrong while moving items. Please try again.",null,{project:"scripts-v6-root"})}).on("confirm",function(){i.cancel()})})},this)},this),i.show()},_getMovementCandidateFilter:function(){var s=this.get("model").getTemplateConfiguration();return r.Squarespace.ContentCollectionUtils.getCollectionFilter(s.get("collectionType"),s.get("ordering"))},_hasValidCollectionsToMoveTo:function(){return r.Squarespace.ContentCollectionUtils.filterCollections(this._getMovementCandidateFilter(),[this.get("model").get("id")]).length>0},_buttonsOrderValueFn:function(){var s=[];return this.get("multiple")&&s.push("selection"),this.get("moveable")&&this._hasValidCollectionsToMoveTo()&&s.push("moveToCollection"),s.push("remove"),s}},{ATTRS:{showActionTray:{value:!0},moveable:{value:!1},multiple:{value:!0},actionTrayCtor:{value:r.Squarespace.Widgets.ActionTray},buttonsOrder:{valueFn:"_buttonsOrderValueFn"}}})},"1.0",{requires:["base","squarespace-content-collection-utils","squarespace-dialog","squarespace-models-content-collection","squarespace-node-utils","squarespace-object-builder","squarespace-tray","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-information","squarespace-upsell-product-violations"]})},216034:function(c,b,t){"use strict";var l=t(714487),d=t(681328),o=t(967361),e=t(516614),a=t(816130),r=t.n(a),s=t(935154),n=t.n(s),i=t(437951),u=t.n(i),h=t(210362),g=t.n(h);YUI.add("squarespace-content-collection-utils",function(p){p.namespace("Squarespace"),p.Squarespace.ContentCollectionUtils={groupCollectionsByTypeName:function(f){for(var m={},_=0;_<f.length;_++){var v=f[_];if(!v.get("isDemoCollection")){var E=v.get("typeName");if(!m[E]){var S=d.default.getState().collectionConfigs[E];m[E]={title:S?S.title:(0,l.t)("Unknown",null,{project:"scripts-v6-root"}),collections:[]}}m[E].collections.push(f[_])}}return p.Object.values(m)},getIconClassNames:function(f){var m=f.getTemplateConfiguration(),_="";return m&&m.get("supported")&&(_=m.get("icon")),_===""&&m&&m.get("collectionType")===u().TEMPLATE_PAGE&&(_="template-page"),_===""&&(_=f.get("typeName")),_},filterCollections:function(f,m){var _=["collectionType","ordering","folder","index"],v=function(E,S,y,C){var O=_.indexOf(C)!==-1;return O?p.Lang.isValue(S)&&S.get(C)===y:E.get(C)===y};return p.Squarespace.ContentCollectionCache.filter(function(E){if(p.Lang.isArray(m)&&m.indexOf(E.get("id"))!==-1||E.get("isDemoCollection")&&E.get("type")!==u().TEMPLATE_PAGE)return!1;var S=!0,y=E.getTemplateConfiguration();for(var C in f){var O=f[C];if(p.Lang.isArray(O)||(O=[O]),S=p.Array.some(O,function(A,I){return v(E,y,A,C)}),!S)break}return S})},getCollectionFilter:function(f,m){return f===u().PRODUCTS?{collectionType:f}:{collectionType:f,ordering:m}},isTemplatePage:function(f){return f.get("type")===u().TEMPLATE_PAGE},isIndex:function(f){var m=f.getTemplateConfiguration();return m&&m.get("folderBehavior")===g().INDEX},isFolder:function(f){var m=f.getTemplateConfiguration();return m&&m.get("folder")},isVanillaFolder:function(f){return this.isFolder(f)&&!this.isIndex(f)&&!this.isVariation(f)},isVariation:function(f){var m=f.getTemplateConfiguration();return m&&m.get("variation")},isAdjustablePageSizeCollection:function(f){var m=d.default.getCollectionConfig(f.get("typeName")),_=m&&m.forcePageSize,v=f.get("type")===u().COLLECTION_TYPE_GENERIC,E=this._getCollectionOrdering(f)===r().CHRONOLOGICAL;return!_&&!this.isIndex(f)&&!this.isFolder(f)&&v&&E},isBlog:function(f){if(!this.isGenericOrProduct(f)||this.isFolder(f)||this.isIndex(f))return!1;var m=this._getCollectionOrdering(f);return m===r().CHRONOLOGICAL},isGallery:function(f){if(!this.isGeneric(f)||this.isFolder(f)||this.isIndex(f))return!1;var m=this._getCollectionOrdering(f);return m===r().USER},_getCollectionOrdering:function(f){return f.get("ordering")||f.getTemplateConfiguration().get("ordering")},isSupportedByBookmarklet:function(f){return!this.isIndex(f)&&!this.isFolder(f)&&f.get("type")===u().COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(f)===r().CHRONOLOGICAL},hasSupportForInjectableCodePerItem:function(f){return!this.isIndex(f)&&!this.isFolder(f)&&f.get("type")===u().COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(f)===r().CHRONOLOGICAL},hasSupportForSyndication:function(f){return!this.isIndex(f)&&!this.isFolder(f)&&f.get("type")===u().COLLECTION_TYPE_GENERIC&&this._getCollectionOrdering(f)===r().CHRONOLOGICAL},isDemoCollectionId:function(f){return d.default.isDemoCollectionId(f)},isGeneric:function(f){var m=f.getTemplateConfiguration();return m?m.get("collectionType")===u().COLLECTION_TYPE_GENERIC:!1},isGenericOrProduct:function(f){var m=f.getTemplateConfiguration();return m?m.get("folder")===!1&&(m.get("collectionType")===u().PRODUCTS||m.get("collectionType")===u().COLLECTION_TYPE_GENERIC):!1},isProduct:function(f){var m=f.getTemplateConfiguration();return!m||f.get("isDemoCollection")?!1:m.get("folder")===!1&&m.get("collectionType")===u().PRODUCTS},isPage:function(f){var m=f.getTemplateConfiguration();return m?m.get("folder")===!1&&m.get("collectionType")===u().COLLECTION_TYPE_PAGE:!1},isNotCalendar:function(f){var m=f.getTemplateConfiguration();return m.get("ordering")!==r().CALENDAR},usesDisplayIndex:function(f){return[r().MUSIC_ALBUM,r().USER].includes(f)},getIdentifierForCollection:function(f){if(!p.Lang.isValue(f))return null;var m=f.get("typeName");!m&&f.get("type")===u().COLLECTION_TYPE_PAGE&&(f.set("typeName","page"),m="page");var _=f.get("type");if(_===u().COLLECTION_TYPE_GENERIC){var v=f.get("ordering");if(!p.Lang.isValue(v)){var E=d.default.getCollectionConfig(m),S=d.default.getPageConfig(m),y=E||S;v=y.ordering}if(p.Squarespace.ContentCollectionUtils.isIndex(f))return"INDEX";if(v===r().USER)return"GALLERY";if(v===r().CHRONOLOGICAL)return"BLOG";if(v===r().CALENDAR)return"CALENDAR";if(v===r().MUSIC_ALBUM)return"MUSIC_ALBUM";if(v===r().KNOWLEDGE_BASE)return"KNOWLEDGE_BASE"}if(_===u().COLLECTION_TYPE_PAGE)return"PAGE";if(_===u().PRODUCTS)return"PRODUCT";if(_===u().TEMPLATE_PAGE)return"TEMPLATE_PAGE"},isOverPageLimit:function(){var f=p.Squarespace.ContentCollectionCache.filter(function(m){return!m.get("isDemoCollection")&&!m.getTemplateConfiguration().get("folder")&&m.get("enabled")}).length;return f>o.Z.getLimit(n().ADD_PAGES)},isHomepage:function(f){var m=e.Z.getHomepageCollectionId();return m===f},containsHomepage:function(f){var m=p.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(f),_=m.get("children");if(_.isEmpty())return!1;var v=_.toJSON().filter(function(E){return p.Squarespace.ContentCollectionUtils.isHomepage(E.collectionId)||p.Squarespace.ContentCollectionUtils.containsHomepage(E.collectionId)});return!!v.length}}},"1.0",{requires:["squarespace-models-content-collection"]})},226916:function(c,b,t){"use strict";var l=t(586745),d=t.n(l),o=t(629266),e=t.n(o),a=t(714487),r=t(681328),s=t(699027),n=t(730842),i=t(741563),u=t(119978),h=t(251678),g=t(157484),p=t(160964),f=t(62868),m=t(655191),_=t(989250),v=t(30712),E=["*.jpg","*.jpeg","*.png","*.gif"],S=((0,v.L)().isWebpEnabled?[].concat(E,["*.webp"]):E).join(";");YUI.add("squarespace-content-item-grid",function(y){y.namespace("Squarespace");var C=46,O=8,A=y.Squarespace.ContentItemGrid=y.Base.create("ContentItemGrid",y.Squarespace.Widgets.SSWidget,[y.WidgetParent,y.WidgetChild,y.Squarespace.Mixins.ContentCollectionBulkActionable,y.Squarespace.Mixins.AddContentItemHandlerMixin],{initializer:function(I){if(!this.get("model"))throw new Error('ContentItemGrid: Missing attribute "model".');this.publish("itemSaved",{emitFacade:!0,bubbles:!0}),this.publish("addChildComplete",{emitFacade:!0}),this._workflow=new y.Squarespace.LicensedAssets.Workflow({imageDestination:this.get("imageDestination")})},destructor:function(){this.get("model").get("destroyed")||this.get("model").items.detach(this.get("id")+"|*"),this.get("rendered")&&this._ddDelegate.destroy(),this._resizeEmitter&&this._resizeEmitter.destroy(),this._uploader&&this._uploader.destroy(),this._workflow.destroy(),this._workflow=null},renderUI:function(){if(A.superclass.renderUI.call(this),this.get("loadByViewport")){var I=this.get("contentBox").ancestor(function(D){return D.getComputedStyle("overflowY").match(/scroll|auto/)});(!I||I.test("html,body"))&&(I=y.one(y.config.win)),this._scrollEl=I}},bindUI:function(){A.superclass.bindUI.call(this);var I=this.get("contentBox"),D=this.get("id"),T=this.get("model").items;this._setupDragBehaviors(),this.on("*:adobe-image-editor-start",function(){this.set("keyBindingsEnabled",!1),this.deselectAll()},this),this.on("*:adobe-image-editor-finish",function(){this.set("keyBindingsEnabled",!0)},this),this.on("*:remove",function(B){this.removeItems(new y.ArrayList(B.target))},this),this.on("*:purchaseRequest",this._onPurchaseRequest,this),this.on("*:licensingDetails",this._onLicensingDetails,this),this._workflow.on("downloadRequest",this._onDownloadRequest,this),this._workflow.on("assetsPicked",this._onAssetsPicked,this),this._workflow.on("bulkAssetsPicked",this._onBulkAssetsPicked,this),this._resizeEmitter=new y.Squarespace.ResizeEmitter,this._resizeEmitter.on("resize",this._refreshStylesheet,this),this.after(["minMarginChange","imageSizeChange"],function(){this._refreshStylesheet(),this._refreshImages()},this),this._ddDelegate.on("reorder:reordered",this._onDDReordered,this),y.on(D+"|keydown",this._onKeydown,y.config.doc,this),this.get("showActionTray")&&this.on("selectionChange",function(B){B.stopPropagation(),this.updateActionTray()},this),this.on("*:onSelect",this._onSelect),this.get("showAddIcon")&&this.get("boundingBox").delegate("click",this.handleAddContentRequest,".add-item",this),I.delegate("click",function(B){this._uploader||this.handleAddContentRequest()},".empty-state",this),this.after(["addChild","removeChild"],function(){this._checkEmptyState(),this._refreshStylesheet(),y.soon(this._syncAddIcon.bind(this))},this),this._registerEvent(T.after(D+"|add",function(B){B.model.get("id")&&!B.onReorder&&!B.onUpload&&(this._addItemWidget(B.model),this.get("loadByViewport")&&this._loadItemImagesInViewport())},this)),this._registerEvent(T.after(D+"|remove",function(B){y.Lang.isValue(B.model)&&B.model.isLicensedAssetPreview()&&this._workflow.trackPreviewRemovalEvent(B.model.get("licensedAssetPreview").assetId),B.onReorder||this._removeItemWidget(B.model)},this)),this.get("loadByViewport")&&(this._scrollEl.on("scroll",this._loadItemImagesInViewport,this),this._resizeEmitter.on("resize:end",this._loadItemImagesInViewport,this)),this._registerEvent(this.get("model").after("idChange",function(){this._uploader&&this._uploader.set("uploadURL",this._getUploadURL())},this))},_onSelect:function(I){var D=I.target;if(this.get("selected")>0){var T;if(I.shiftKey){T=this.get("selection");var B=this.toJSON();B=B.sort(function(k,q){var F=k.get("item").get("displayIndex"),z=q.get("item").get("displayIndex");return F-z});for(var N=B.map(function(k,q){return T.indexOf(k)>-1||k===D?q:null}).filter(function(k){return k!==null}),P=Math.min.apply(Math,N),x=Math.max.apply(Math,N),R=0;R<B.length;R++){var w=B[R];P<=R&&R<=x&&w.set("selected",1)}return}else!I.shiftKey&&!I.ctrlKey&&!I.metaKey&&(T=this.get("selection"),T.isEmpty()||T.each(function(k){k!==D&&k.set("selected",0)}))}D.set("selected",D.get("selected")!==0?0:1)},syncUI:function(){A.superclass.syncUI.call(this);var I=this.get("contentBox");this._clearElements(),this._widgetMap={};var D=this.get("model"),T=D.items;this._stylesheet||(this._stylesheet=y.Node.create('<style type="text/css"></style>')),this.get("boundingBox").appendChild(this._stylesheet);var B=D.get("typeName");B&&I.addClass("collection-type-"+B);var N=this.get("collectionConfiguration").get("acceptTypes"),P=!1;y.Array.each(N,function(x){var R=r.default.getCustomType(x),w=!!R&&R.base==="image";(x==="image"||w)&&(P=!0)}),P&&(this._uploader=this._createUploader(),this._uploader.render(I)),this._validateItemsDisplayIdx(T),T.each(function(x,R){this._addItemWidget(x)},this),this._ddDelegate.syncTargets(),this._checkEmptyState(),this._refreshStylesheet(),this.get("showAddIcon")&&(this._addIconEl||(this._addIconEl=y.Node.create('<button class="add-item" tabindex="-1"></button>')),this._syncAddIcon(),this.get("boundingBox").append(this._addIconEl)),this.get("loadByViewport")&&this._loadItemImagesInViewport(),this._updateUploaderLimit()},_syncAddIcon:function(){var I=this.get("contentBox");this._addIconEl&&this._addIconEl.setStyle("marginRight",I.get("offsetWidth")-I.get("clientWidth"))},requestImageRenderingSync:function(){this.get("loadByViewport")&&this._loadItemImagesInViewport(),this._refreshStylesheet(),this.each(function(I){var D=I.get("contentBox").one("img");D&&D.loader&&D.loader.fire("refresh")},this)},_validateItemsDisplayIdx:function(I){var D=[];if(I.each(function(N,P){N.get("displayIndex")!==P&&D.push({item:N,displayIndex:P})}),D.length!==0){for(var T=this._shouldCommitDisplayIndexErrors(D[0].item),B=0;B<D.length;B++)this.LOG.warn("Need to update %s with (old: %s) (new: %s)",D[B].item.get("id"),D[B].item.get("displayIndex"),D[B].displayIndex),T&&(this.LOG.warn("Committing display index change..."),D[B].item.set("displayIndex",D[B].displayIndex),D[B].item.save());y.Squarespace.Logger.log("updatedDisplayIndex",{committed:T,modelName:this.get("model").name,numberOfObjectsToUpdate:D.length})}},_shouldCommitDisplayIndexErrors:function(I){return I.get("recordType")!==d().STORE_ITEM},removeItems:function(I){var D=this.get("model"),T=this.get("onDelete"),B=function(){return null},N=y.bind(function(){var w=[];I.each(function(k){k.get("item").get("id")&&(w.push(k.get("item")),k.remove())},this),w.length>0&&D.items.removeItems(w,B,T)},this);if(I.size()===D.items.size())N();else{for(var P=I.item(0).get("boundingBox"),x=[];y.Widget.getByNode(P);){var R=P.plug(y.Squarespace.PositionAnimator).positionAnimator;R.hold(),x.push(R),P=P.next()}N(),y.Array.each(x,function(w){w.release()})}this._updateUploaderLimit()},_onDownloadRequest:function(I){var D=I.request,T=D.get("url"),B=D.get("licensedAssetPreview"),N=D.get("licensedAssetId"),P=null,x=D.get("index")||0,R=this.get("model").get("nextDisplayIndex")||0,w=R+x;y.Lang.isValue(this._lastActivePreview)&&(P=this._lastActivePreview.get("item").get("displayIndex"),this.removeItems(new y.ArrayList(this._lastActivePreview))),this._saveFromUrl(T,B,N,P,w)},_onAssetsPicked:function(I){this._uploadPreflight((function(){var D=this.get("model")&&this.get("model").get("id")?this.get("model").get("id"):null;(0,f.Z)(p.Z.GALLERY_IMAGE,I[0],{collectionId:D}).then((function(T){var B=new y.Squarespace.Models.ContentItem(y.merge(T,{displayIndex:this.get("model").get("nextDisplayIndex")}));this.get("model").items.add(B)}).bind(this))}).bind(this))},_onBulkAssetsPicked:function(I){var D=this.get("model"),T=D.get("nextDisplayIndex"),B=this,N=[],P={};this._uploadPreflight(function(){var x=D&&D.get("id")?D.get("id"):null;I.forEach(function(R){var w=(R.displayIndex||0)+T;P[R.assetId]=w,N.push((0,f.Z)(p.Z.GALLERY_IMAGE,R.assetId,{collectionId:x,index:w}))}),Promise.allSettled(N).then(function(R){R.forEach(function(w){if(w.status==="fulfilled"){var k=new y.Squarespace.Models.ContentItem(w.value);D.items.add(k,{index:P[w.value.systemDataId]}),B.syncUI()}})})})},_saveFromUrl:function(I,D,T,B,N){var P={};this._uploader&&(y.Lang.isValue(N)&&(P.displayIndex=N),this._uploadImageProcessor(P),y.Lang.isValue(B)?P.postData.index=B:y.Lang.isValue(N)&&(P.postData.index=N),this._addImagePlaceholder(P),y.Lang.isValue(D)&&(P.postData.licensedAssetPreview=D),y.Lang.isValue(T)&&(P.postData.licensedAssetId=T),P.postData.fileUrl=I,this._uploadPreflight((function(){P.postData.collectionId=this.get("model").get("id"),y.Data.post({url:this._getUploadURL(),data:P.postData,success:function(x){this._imageUploadComplete(P,x),this._uploader._processResponse(x,P)}},this)}).bind(this)))},_uploadPreflight:function(I){var D=this.get("uploadPreflight");y.Lang.isValue(D)?D(I):I()},_onPurchaseRequest:function(I){var D=I.target.get("item"),T=D.get("licensedAssetPreview"),B=D.get("assetUrl");this._lastActivePreview=I.target,this._workflow.showPurchaseDetails(T,B)},_onLicensingDetails:function(I){var D=I.target.get("item"),T=D.get("licensedAssetId"),B=D.get("assetUrl");this._workflow.showLicensingDetails(T,B)},_createNewContentItemAndShowEditor:function(I,D){var T=this.get("itemEditorOptions");if(I.customContent&&I.customContent.customType==="licensed"){this._lastActivePreview=null,this._workflow.showImagePicker(),y.Lang.isFunction(D)&&D();return}if(I.recordType===d().IMAGE&&y.Object.getValue(T,["variant"])===y.Squarespace.ContentItemEditorVariants.IMAGE_ALT_TEXT&&(T.variant=y.Squarespace.ContentItemEditorVariants.MINIMAL),I.recordType===d().IMAGE&&T.variant===y.Squarespace.ContentItemEditorVariants.MINIMAL&&y.Lang.isValue(this._uploader)){this._uploader.openFileSelectDialog(),y.Lang.isFunction(D)&&D(),this._registerEvent(this._uploader.after(["uploadcomplete","uploadcancel"],function(){this._uploader.destroy(!0),this._uploader=this._createUploader(),this._uploader.render(this.get("contentBox"))},this));return}var B=this.get("model"),N;if(y.instanceOf(this.get("model"),y.Squarespace.Models.ContentCollection)){if(N=new y.Squarespace.Models.ContentItem(y.merge(I,{displayIndex:B.get("nextDisplayIndex"),collectionId:B.get("id")})),y.Squarespace.ContentItemUtils.isStandardGalleryItem(N,B)){N.save(function(){n.Z.showCollectionItemSettingsEditor(N.getAttrs(),null,!0),y.Lang.isFunction(D)&&D()});return}}else N=new y.Squarespace.Models.ContentItem(y.merge(I,{displayIndex:B.get("nextDisplayIndex"),collectionId:B.get("collectionId"),parentId:B.get("id")}));N.get("recordType")===d().STORE_ITEM&&u.xU((0,h.Z)(N.getAttrs().structuredContent.getAttrs().productType),g.MX.YUI_EDITOR);var P=new(y.Squarespace.ContentItemEditorFactory.getEditor(N,this.get("itemEditorOptions")))({model:N}),x=N.on("save",function(w){this.fire("itemSaved"),y.Object.getValue(w,"options.headers.X-AutoSave".split("."))||B.items.add(N)},this);P.on("visibleChange",function(w){w.newVal||(x.detach(),N.get("unsaved")?N.destroy({remove:!0}):N.isNew()&&N.destroy())});var R=this.get("itemEditorOptions.defaultWorkflowState");R&&N.set("workflowState",R),P.on("visibleChange",function(w){w.newVal?this.set("keyBindingsEnabled",!1):this.set("keyBindingsEnabled",!0)},this),y.instanceOf(this.get("model"),y.Squarespace.Models.ContentCollection)&&B.isNew()?(this._registerEvent(B.on("save",function(){N.set("collectionId",B.get("id")),y.Lang.isFunction(D)&&D(),P.show()})),B.save()):(y.Lang.isFunction(D)&&D(),P.show())},_addItemWidget:function(I){var D=this.get("defaultChildType"),T=new D(y.merge(this.get("contentItemImageOptions"),{item:I,parentModel:this.get("model"),itemEditorOptions:this.get("itemEditorOptions"),preventLoad:this.get("loadByViewport")}));return y.Do.before(function(){this.set("keyBindingsEnabled",!1),this.deselectAll()},T,"editItem",this),y.Do.after(function(){y.Do.currentRetVal&&y.Do.currentRetVal.on("visibleChange",function(B){B.newVal||this.set("keyBindingsEnabled",!0)},this)},T,"editItem",this),this._widgetMap[I.get("clientId")]=T,this.add(T),T},_removeItemWidget:function(I){var D=I.get("clientId"),T=this._widgetMap[D];T&&(T.remove(),delete this._widgetMap[D])},_loadItemImagesInViewport:function(){var I=this._scrollEl,D=I.get("scrollTop"),T=D+I.get("region").height,B=[];this.each(function(N){var P=N.get("boundingBox").get("region"),x=P.top,R=P.bottom;(x>=D&&x<=T||R>=D&&R<=T)&&(B.push(N),N.set("preventLoad",!1))},this)},_insertChildBeforeUploader:function(I){this._uploader?I.after("render",function(){this._uploader.get("boundingBox").insert(I.get("boundingBox"),"before")},this):I.after("render",function(){var D=this.get("contentBox").get("children").filter(function(T){return T!==I.get("boundingBox").getDOMNode()});D.isEmpty()||D.item(D.size()-1).insert(I.get("boundingBox"),"after")},this)},_createUploader:function(){var I=new y.Squarespace.Uploader({dragAndDropArea:this.get("boundingBox"),multipleFiles:!0,autoUpload:!0,fileFilters:[{description:(0,a.t)("Images",null,{project:"scripts-v6-root"}),extensions:S}],uploadLimit:this.get("uploadLimit")-this.size(),processFile:y.bind(this._uploadImageProcessor,this),addPlaceholder:y.bind(this._addImagePlaceholder,this),fileComplete:y.bind(this._imageUploadComplete,this),createJob:y.bind(this._createImageProcessingJob,this),selectButtonLabel:this.get("strings.uploadText"),preflight:this._doPreflightThenSetUploadURL.bind(this),uploadURL:this._getUploadURL()});return I.after(this.get("id")+"|uploaderror",function(D){var T=D.fileData||I.fileDataFromFile(D.file);T.placeholder.setContent(I.makeDefaultErrorBlock(T)),y.Widget.getByNode(T.placeholder).get("item").set("mediaProcessingState",e().ERROR)}),I},_updateUploaderLimit:function(){this._uploader&&this._uploader.set("uploadLimit",this.get("uploadLimit")-this.size())},_doPreflightThenSetUploadURL:function(I){var D=this.get("uploadPreflight")||function(T){T()};D((function(){this._updateUploadURL(),I()}).bind(this))},_updateUploadURL:function(){this.uploader&&this.uploader.set("uploadURL",this._getUploadURL())},_getUploadURL:function(){var I=this.get("model"),D=I.get("id");return y.instanceOf(I,y.Squarespace.Models.ContentCollection)?"/api/galleries/"+D+"/images":this._getChildItemsUploadURL()},_getChildItemsUploadURL:function(){var I=this.get("model"),D=I.get("id"),T=I.get("recordType"),B=I.get("collectionId"),N=s.eP({recordType:T,parentId:D,collectionId:B});return N},_checkEmptyState:function(){this.isEmpty()?this._renderEmptyState():this._removeEmptyState()},_renderEmptyState:function(){var I=this.get("contentBox");if(I.addClass("empty"),this.get("showEmptyState")){I.addClass("show-empty-state");var D=this.get("strings.emptyTitle"),T=this.get("strings.emptyDesc");this._uploader?this._uploader.set("selectButtonLabel",'<div class="title">'+D+'</div><div class="desc">'+T+"</div>"):(this._emptyStateEl||(this._emptyStateEl=y.Node.create('<div class="empty-state"><div class="icon"></div><div class="text"><div class="title">'+D+'</div><div class="desc">'+T+"</div></div></div>")),I.append(this._emptyStateEl))}},_removeEmptyState:function(){var I=this.get("contentBox");this.get("showEmptyState")&&(I.removeClass("show-empty-state"),this._uploader?this._uploader.set("selectButtonLabel",this.get("strings.uploadText")):this._emptyStateEl&&this._emptyStateEl.inDoc()&&this._emptyStateEl.remove()),this.get("contentBox").removeClass("empty")},_refreshStylesheet:function(){var I=this.get("boundingBox"),D=I.get("offsetWidth"),T=this.get("defaultChildType"),B="";if(this.isEmpty())B+=" #"+I.get("id")+".sqs-content-item-grid .sqs-uploader { min-width: 100%; width: 100%; height: 100%; }",B+=" #"+I.get("id")+".sqs-content-item-grid .sqs-uploader-content { width: 100%; height: 100%; margin: 0 auto; padding: 0; } ";else{var N=this.get("imageSize"),P=this.get("minMargin"),x=Math.floor(D/(N+P*2)),R=100/x;N=Math.ceil(D/x)-P*2;var w="."+T.CSS_PREFIX;B+=" #"+I.get("id")+".sqs-content-item-grid "+w+", .sqs-content-item-grid .sqs-uploader { min-width: "+N+"px; width: "+R+"%; }",B+=" #"+I.get("id")+".sqs-content-item-grid .sqs-uploader { height: "+(N+P*2)+"px; }",B+=" #"+I.get("id")+".sqs-content-item-grid "+w+"-content { width: "+N+"px; height: "+N+"px; margin: 0 auto; padding: "+P+"px 0; }",B+=" #"+I.get("id")+".sqs-content-item-grid "+w+"-content .inside { width: "+N+"px; height: "+N+"px; }",B+=" #"+I.get("id")+" "+w+":nth-child("+x+"n) { margin-right: 0; }",B+=" #"+I.get("id")+".sqs-content-item-grid .sqs-uploader-content { width: "+N+"px; height: "+N+"px; margin: 0 auto; padding: "+P+"px 0; } "}this._stylesheet.set("innerHTML",B),this.fire("stylesheetUpdated")},_refreshImages:function(){this.get("contentBox").all("img[data-src]").each(function(I){I.refresh()})},_clearElements:function(){this._addIconEl&&this._addIconEl.inDoc()&&this._addIconEl.remove(),this._stylesheet&&this._stylesheet.remove(),this._uploader&&this._uploader.destroy(),this._removeEmptyState(),this.removeAll()},_setupDragBehaviors:function(){var I=this.get("defaultChildType"),D="."+I.CSS_PREFIX,T={container:this.get("contentBox"),nodes:D,enableDragReorder:!0,dragReorderConfig:{selectedClassSelector:D+".selected",enableGrouping:!0},enableDragScroll:!0,dragConfig:{groups:[this.get("id")]}};this.get("useBoundingBoxAsScrollNode")&&(T.scrollNode=this.get("boundingBox")),this._ddDelegate=new y.SQS.DDWrappers.DD.Delegate(T)},_onKeydown:function(I){this.get("keyBindingsEnabled")&&(I.target.ancestor("input, textarea",!0)||this.get("selection")&&(I.keyCode===C||I.keyCode===O)&&(this.removeSelected(),I.halt()))},_onDDReordered:function(I){var D=I.reordered,T=D[0].newIndex,B=y.Array.map(D,function(N){var P=N.node;return y.Widget.getByNode(P).get("item")},this);this.get("model").items.reorderItems(B,T)},_afterAddChild:function(I){y.WidgetParent.prototype._afterAddChild.call(this,I),this._insertChildBeforeUploader(I.child),this._ddDelegate.syncTargets()},_uploadImageProcessor:function(I){var D=this.get("model"),T=this._uploader.fileDataFromFile(I.file);T&&(I.item||(I.item=T.item));var B=I.index;if(I.item)B=I.item.get("displayIndex");else if(I.displayIndex)B=I.displayIndex;else{var N=this._items.length;y.Lang.isNumber(B)&&D instanceof y.Squarespace.Models.ContentCollection?B=B+N:B=N}var P={contentType:"image",process:"true",index:B},x=D.get("id"),R=D.get("collectionId");if(R?(P.collectionId=R,P.parentItemId=x||D.get("parentId")):P.collectionId=x,I.postData=P,I.invalid){var w=I.invalid[0];new y.Squarespace.Widgets.Alert({"strings.title":w.title,"strings.message":w.message})}},_addImagePlaceholder:function(I){var D=new y.Squarespace.Models.ContentItem({mediaProcessingState:e().QUEUED,displayIndex:I.postData.index,recordType:d().IMAGE});this.get("model").items.add(D,{onUpload:!0,index:I.postData.index}),I.item=D;var T=this._addItemWidget(D);return this.get("loadByViewport")&&this._loadItemImagesInViewport(),this._updateUploaderLimit(),T.get("contentBox").one(".inside")},_imageUploadComplete:function(I,D){if(I.item){var T=D.media[0];I.item.setAttrs(T);var B=n.Z.getCollection(T.collectionId);if((0,_.j)(B)===m.A.PRODUCT_COLLECTION){var N=this.get("model");i.n1({imageId:T.id,productId:N.get("id"),productName:N.get("title"),productType:(0,h.Z)(N.get("productType")),productSection:"product-editor",productEditor:g.MX.YUI_EDITOR})}}},_createImageProcessingJob:function(I,D){if(!D.job)return null;if(window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.addBreadcrumb({category:"content-item-grid",message:"Image processing job response for image #"+(D&&D.media&&D.media[0]?D.media[0].id:"unknown"),level:"debug"}),!!I.item){I.item.setAttrs(D.media[0]);var T=new y.Squarespace.ImageProcessingJob(y.merge(D.job,{started:!0}));return T.set("collection",this.get("model")),T}},moveSelection:function(I){var D=[];this._moveSelectionAnimatorsToRelease=D;var T=this.get("defaultChildType");this.each(function(B){if(y.instanceOf(B,T)){var N=B.get("boundingBox").plug(y.Squarespace.PositionAnimator).positionAnimator;N.hold(),D.push(N)}}),y.Squarespace.Mixins.ContentCollectionBulkActionable.prototype.moveSelection.apply(this,arguments)},_uiMoveSelection:function(I,D){var T=this.get("contentBox");I=I.toJSON(),D||(I=I.reduce(function(x,R){return x.unshift(R),x},[])),I.forEach(function(x){D?T.append(x.get("boundingBox")):T.prepend(x.get("boundingBox"))});var B=this._moveSelectionAnimatorsToRelease;if(B){B.forEach(function(x){x.release()});var N=this.get("boundingBox"),P=null;D?P=N.get("scrollHeight"):P=0,N.anim({scroll:[0,P]}).run()}}},{CSS_PREFIX:"sqs-content-item-grid",ASYNC_DATA:!0,ATTRS:{defaultChildType:{value:y.Squarespace.ContentItemImage},model:{validator:function(I){return y.instanceOf(I,y.Squarespace.Models.ContentCollection)||y.instanceOf(I,y.Squarespace.Models.ContentItem)}},collection:{getter:function(){return this.get("model")}},collectionConfiguration:{setter:function(I){return y.instanceOf(I,y.Model)?I:new y.Model(I)}},uploadLimit:{value:250},contentItemImageOptions:{value:{}},imageSize:{value:100},minMargin:{value:20},strings:{value:{uploadText:(0,a.t)("Upload images",null,{project:"scripts-v6-root"}),emptyTitle:(0,a.t)("Add Items",null,{project:"scripts-v6-root"}),emptyDesc:(0,a.t)("This collection is empty. Click here to add your first item.",null,{project:"scripts-v6-root"})}},multiple:{value:!0},showAddIcon:{value:!1},showEmptyState:{value:!0},windowScrollOnDrag:{value:!1},scrollNode:{value:null},keyBindingsEnabled:{value:!0},uploadPreflight:{},loadByViewport:{value:!0},useBoundingBoxAsScrollNode:{value:!1},onDelete:{value:null},imageDestination:{}}})},"1.0",{requires:["base","dd-delegate","event-key","squarespace-async-task-synchronizer","squarespace-content-collection-bulk-actionable","squarespace-content-item-image","squarespace-content-item-types-editor","squarespace-content-item-types-selector","squarespace-content-item-utils","@sqs/yui-dd-wrappers/dd-behaviors","@sqs/yui-dd-wrappers/dd-delegate","squarespace-dialog-content-selector","squarespace-dialog-flow","squarespace-dom-emitters-resize","squarespace-image-loader","squarespace-job-manager","squarespace-jobs","squarespace-licensed-assets-workflow","squarespace-logger","squarespace-models-content-collection","squarespace-models-content-item","squarespace-ss-widget","squarespace-ui-base","squarespace-uploader","squarespace-util-authenticated","squarespace-widgets-alert","widget-child","widget-parent"]})},229183:function(c,b,t){"use strict";var l=t(994336),d=t.n(l),o=t(629266),e=t.n(o),a=t(586745),r=t.n(a),s=t(44348),n=t.n(s),i=t(714487),u=t(347560),h=t(480433),g=t.n(h),p=t(522364),f=t(365312),m=t(979825),_=t(704761),v=t(988896),E=t(980773),S=t(607620),y=t(867826),C=t(854129),O=t.n(C),A=t(174161),I=t(233284),D=t(225093),T=t(730842),B=t(912289),N=t(119978);YUI.add("squarespace-content-item-image",function(P){P.namespace("Squarespace");var x={};x[r().TEXT]="text",x[r().IMAGE]="image",x[r().QUOTE]="quote",x[r().LINK]="link",x[r().CHAT]="chat",x[r().AUDIO]="audio",x[r().VIDEO]="video",x[r().REVIEW]="review",x[r().STORE_ITEM]="store_item",x[r().EVENT]="event",x[r().THREAD]="thread",x[r().GALLERY]="gallery";var R={};R[r().TEXT]={confirmationTitle:(0,i.t)("Remove text",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this text?",null,{project:"scripts-v6-root"})},R[r().IMAGE]={confirmationTitle:(0,i.t)("Remove image",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this image?",null,{project:"scripts-v6-root"})},R[r().QUOTE]={confirmationTitle:(0,i.t)("Remove quote",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this quote?",null,{project:"scripts-v6-root"})},R[r().LINK]={confirmationTitle:(0,i.t)("Remove link",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this link?",null,{project:"scripts-v6-root"})},R[r().CHAT]={confirmationTitle:(0,i.t)("Remove chat",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this chat?",null,{project:"scripts-v6-root"})},R[r().AUDIO]={confirmationTitle:(0,i.t)("Remove audio",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this audio?",null,{project:"scripts-v6-root"})},R[r().VIDEO]={confirmationTitle:(0,i.t)("Remove video",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this video?",null,{project:"scripts-v6-root"})},R[r().REVIEW]={confirmationTitle:(0,i.t)("Remove review",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this review?",null,{project:"scripts-v6-root"})},R[r().STORE_ITEM]={confirmationTitle:(0,i.t)("Remove product",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this product?",null,{project:"scripts-v6-root"})},R[r().EVENT]={confirmationTitle:(0,i.t)("Remove event",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this event?",null,{project:"scripts-v6-root"})},R[r().THREAD]={confirmationTitle:(0,i.t)("Remove thread",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this thread?",null,{project:"scripts-v6-root"})},R[r().GALLERY]={confirmationTitle:(0,i.t)("Remove gallery",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this gallery?",null,{project:"scripts-v6-root"})},R.FALLBACK={confirmationTitle:(0,i.t)("Remove item",null,{project:"scripts-v6-root"}),confirmationMessage:(0,i.t)("Are you sure you wish to remove this item?",null,{project:"scripts-v6-root"})};var w=P.Squarespace.ContentItemImage=P.Base.create("ContentItemImage",P.Squarespace.SSWidget,[P.WidgetChild],{initializer:function(){this.publish("adobe-image-editor-start",{emitFacade:!0}),this.publish("adobe-image-editor-finish",{emitFacade:!0}),this.publish("remove",{emitFacade:!0}),this.publish("purchaseRequest",{emitFacade:!0}),this.publish("licensingDetails",{emitFacade:!0}),this.publish("image-preview-loaded",{emitFacade:!1}),this.actionListener=new(g())(u.Z),this.actionListener.addActionListener(p.Z.CONTENT_BROWSER_DELETE_ITEM,this._onContentBrowserDeleteItem.bind(this))},_onContentBrowserDeleteItem:function(k){this.get("item").get("id")===k&&this.get("item").destroy()},destructor:function(){this.get("item").detach(this.get("id")+"|*"),this.get("animation")&&this.get("contentBox").unplug(this.get("animation")),this.actionListener&&(this.actionListener.removeAllActionListeners(),this.actionListener=null),this._imageEditorEl&&(I.unmountComponentAtNode(this._imageEditorEl.getDOMNode()),this._imageEditorEl.remove(!0))},getDragSelectableRegionNode:function(){return this.get("contentBox").one("img")},isValidMouseDownTarget:function(k){return this.get("contentBox").one("img")?!!k.ancestor("img",!0):!0},renderUI:function(){var k=this.get("contentBox");k.addClass([w.CSS_PREFIX,"content"].join("-"));var q=x[this.get("item").get("recordType")];q==="store_item"&&(q="product"),k.addClass("item-type-"+q),d().get("SQUARESPACE_DEBUG_DISPLAY_INDEX")&&(k.appendChild(P.Node.create('<div class="index">'+this.get("item").get("displayIndex")+"</div>")),k.appendChild(P.Node.create('<div class="itemId">'+this.get("item").get("id")+"</div>"))),k.appendChild(P.Node.create('<div class="inside"></div>'));var F=this._imageEditorEl=P.Node.create('<div class="'+this.getClassName()+'-external-image-editor"></div>');k.append(F)},bindUI:function(){d().get("SQUARESPACE_DEBUG_DISPLAY_INDEX")&&this.get("item").after("displayIndexChange",function(J){this.get("contentBox").one(".index").setHTML(J.newVal)},this);var k=this.get("boundingBox"),q=this.get("contentBox"),F=this.get("id"),z=this.get("item"),j=z.get("items");if(this._registerEvent(z.after(["titleChange","workflowStateChange","save"],function(J){P.Lang.isValue(J.options)&&J.options.source==="mediaFocalPointChange"||this.syncUI()},this)),this._registerEvent(z.after(["mediaFocalPointChange","assetUrlChange"],function(J){J.source===p.Z.CONTENT_BROWSER_SETTINGS_SAVED&&this.syncUI()},this)),this._registerEvent(z.after("workflowStateChange",function(J){J.newVal===n().DELETED&&this.fire("remove")},this)),this._useFirstChild()){this._currentSyncRequest=null;var X=P.bind(function(J){this._registerEvent(J.after(F+"|mediaProcessingStateChange",function(Q){j.indexOf(J)===0&&this.syncUI()},this))},this);j.each(function(J){X(J)},this),this._registerEvent(j.after(F+"|add",function(J){var Q=J.model;J.index===0&&Q.get("mediaProcessingState")===e().READY&&this.syncUI(),X(Q)},this)),this._registerEvent(j.after(F+"|remove",function(J){J.index===0&&this.syncUI()},this))}else this._registerEvent(z.after(F+"|mediaProcessingStateChange",this.syncUI,this));k.on("click",function(J){this.isValidMouseDownTarget(J.target)&&this.fire("onSelect",{shiftKey:J.shiftKey,ctrlKey:J.ctrlKey,metaKey:J.metaKey})},this),this._hasEditableAction()&&k.on("dblclick",function(J){J.metaKey||(J.halt(),this._openEditItem(),this.get("item").get("recordType")===r().STORE_ITEM&&N.L1("collection-panel"))},this),this.get("animation")&&q.plug(this.get("animation"),{onlyUseOpacity:!0}),this.on("animationChange",function(J){J.prevVal&&this.get("contentBox").unplug(J.prevVal),J.newVal&&this.get("contentBox").plug(J.newVal,{onlyUseOpacity:!0})},this),q.delegate("click",function(){this.fire("remove")},".image-processing-error a",this),this.after("preventLoadChange",this.syncUI,this)},_hasEditableAction:function(){return this.get("actionOverlayButtons").indexOf(P.Squarespace.ActionOverlayButtons.IMAGE_INFO)>-1},_bindJobs:function(){if(!this.actionListener){this.actionListener=new(g())(u.Z);var k=(function(q){var F=this.get("item"),z=F.get("id"),j=P.Array.find(q,function(X){var J=_.Z.getJobById(X);return J.data&&J.data.contentItemId&&J.data.contentItemId===z});j&&(F.save(),this.actionListener.removeAllActionListeners(),this.actionListener=null)}).bind(this);this.actionListener.addActionListener(m.Z.COMPLETE,k)}},syncUI:function(){if(!this.get("preventLoad")){var k=this.get("contentBox"),q=P.bind(function(){this._hideProgressIndicator(),this.get("contentBox").one(".inside").empty()},this),F=P.bind(function(){var z=this.get("item"),j=this._getRenderingImageItem(),X=j?j.get("mediaProcessingState"):e().READY;switch(X){case e().QUEUED:case e().PROCESSING:this._showProgressIndicator({showCancel:!0});break;case e().READY:this._showImage(j||z),this.get("showActionOverlay")&&this._showActionOverlay();break;default:this._usePlaceholder()?(this._showImage(j||z),this.get("showActionOverlay")&&this._showActionOverlay()):this.get("hasFileData")?this._showError():(this._showImage(new P.Model({assetUrl:"/universal/images-v6/configuration/no-image.png"})),this.set("actionOverlayButtons",[P.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]),this._showActionOverlay());break}},this);this.get("animation")?(k.plug(this.get("animation")),k.once("hidden",function(){this.get("destroyed")||(q(),F()),this._registerTimer(P.later(20+Math.random()*200,this,function(){this.get("destroyed")||k.show()}))},this),k.hide()):this.get("destroyed")||(q(),F())}},editItem:function(){var k=this.buildEditor();return this.get("item").load({forceReload:!0},(function(F,z){if(!F)try{var j=this.get("parentModel"),X=j.get("typeName");(0,B.Zm)({itemId:z.id,collectionType:X,collectionId:j.get("id")})}catch{window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.captureMessage("track edit collection failed")}k.show()}).bind(this)),k},buildEditor:function(){var k=this.get("item"),q=this.get("itemEditorOptions");this.get("parentModel")instanceof P.Squarespace.Models.ContentItem&&(q=P.merge(q,{parentItem:this.get("parentModel")}));var F=P.Squarespace.ContentItemEditorFactory.getEditor(k,q),z=new F({model:k,parentDialog:this.get("itemEditorOptions.parentDialog")});return this.get("itemEditorOptions.anchorToImageWidget")&&z.set("anchorNode",this.get("boundingBox")),z},_openEditItem:function(){var k=this.get("item");if(P.Squarespace.ContentItemUtils.isStandardGalleryItem(k,this.get("parentModel"))){if(k.get("mediaProcessingState")===e().QUEUED)return;T.Z.showCollectionItemSettingsEditor(k.getAttrs())}else this.editItem()},_uiSetChildSelected:function(k){this.get("boundingBox").toggleClass("selected",!!k)},_showProgressIndicator:function(k){var q=this.get("contentBox").one(".inside");q.addClass("processing");var F=q.plug(P.Squarespace.Plugin.ProgressSpinner,{show:!0,showCancel:k.showCancel,spinnerSize:this.get("progressSpinnerSize")})[P.Squarespace.Plugin.ProgressSpinner.NS];F.once("cancel",function(z){if(this.fire("remove"),window.SQUARESPACE_SENTRY){var j=this.get("item");window.SQUARESPACE_SENTRY.addBreadcrumb({category:"content-item-grid",message:"Image upload canceled for #"+j?j.get("id"):"unknown ID",level:"debug"})}},this)},_hideProgressIndicator:function(){var k=this.get("contentBox").one(".inside");k&&k.hasClass("processing")&&(k.removeClass("processing"),k.unplug(P.Squarespace.Plugin.ProgressSpinner))},_showError:function(){var k=P.Node.create('<div class="image-processing-error"><p>'+(0,i.t)("Something went wrong.",null,{project:"scripts-v6-root"})+'<br /><a href="#" class="remove">'+(0,i.t)("Remove",null,{project:"scripts-v6-root"})+"</a></p></div>");k.one("p a.remove").once("click",function(q){q.halt(),this.fire("remove")},this),this.get("contentBox").one(".inside").appendChild(k)},_getRenderingImageItem:function(){return this._useFirstChild()?this.get("item").get("items").item(0):this.get("item")},_showImage:function(k){var q=this.get("contentBox"),F=(0,E.iY)(k.get("assetUrl")),z=(0,E.f$)()?'crossorigin="anonymous"':"",j=P.Node.create('<img data-load="false" data-src="'+F+'" data-image-dimensions="'+k.get("originalSize")+'" '+z+" />");if(q.one(".inside").appendChild(j),j.setStyles({visibility:"hidden"}),q.setStyles({backgroundImage:null,backgroundSize:null}),k.get("hasFileData")&&this._showFocalPoint()){var X=j.plug(P.Squarespace.Plugin.FocalPoint,{focalPoint:k.get("mediaFocalPoint")}).focalPoint;X.on("focalPointChanged",function(Q){k.set("mediaFocalPoint",Q.focalPoint),k.save({fields:["mediaFocalPoint"],source:"mediaFocalPointChange"})},this),X.on("focalPointChange",function(Q){k.set("mediaFocalPoint",Q.newVal)})}var J=this._registerTimer(P.later(1e3,this,function(){!this.get("destroyed")&&j.getDOMNode()&&j.inDoc()&&this._showProgressIndicator({showCancel:!1})}));j.once("load",function(){J&&J.cancel(),this._hideProgressIndicator();var Q=this.get("animation");Q?this._registerTimer(P.later(20+Math.random()*200,this,function(){this.get("destroyed")||!j.getDOMNode()||!j.inDoc()||(j.setStyles({visibility:null}),Q&&(j.plug(Q),j.hide(!0),j.show(),this._showItemSpecificInformation()))})):j.setStyles({visibility:null}),this.fire("image-preview-loaded")},this),j.once("error",function(){J&&J.cancel(),j.setAttribute("src","/universal/images-v6/configuration/no-image.png")},this),j.loader||j.plug(P.Squarespace.Loader2,{mode:this.get("imageLoaderMode"),load:!0,fixedRatio:this.get("imageLoaderUseFixedRatioRenderer")})},_showItemSpecificInformation:function(){var k=this.get("item"),q=this.get("contentBox").one(".inside"),F=q.one("img"),z=F.get("width"),j=F.get("offsetLeft"),X=F.get("offsetTop"),J;switch(this.get("item").get("recordType")){case r().STORE_ITEM:break;case r().IMAGE:var Q=k.get("workflowState");if(this.get("showWorkflowState")&&Q!==n().PUBLISHED){var ie=P.Node.create('<div class="flag-wrapper"><div class="flag-text">'+P.Squarespace.ContentItemUtils.getWorkflowStateCopy(Q)+"</div></div>");ie.setStyles({width:z,height:F.get("height"),left:j,top:X}),q.append(ie)}break;default:var ce=P.Node.create('<div class="type-icon"></div>');ce.setStyles({top:X+5,left:j+5}),q.append(ce);var pe=k.get("workflowState");if(this.get("showWorkflowState")&&pe!==n().PUBLISHED){var ye=P.Node.create('<div class="flag-wrapper"><div class="flag-text">'+P.Squarespace.ContentItemUtils.getWorkflowStateCopy(pe)+"</div></div>");ye.setStyles({width:z,height:F.get("height"),left:j,top:X}),q.append(ye)}var Ae=this.get("item").get("title");if(Ae){J=P.Node.create('<div class="information"><div class="title">'+Ae+"</div></div>"),J.setStyles({width:z,left:j,bottom:X}),q.append(J);break}}},_addBuyButton:function(k){k.unshift("buy");var q=P.Array.indexOf(k,"edit-image"),F=q!==-1;F&&k.splice(q,1)},_addLicensingButton:function(k){k.unshift("getty")},_showActionOverlay:function(){this._actionOverlay&&this._actionOverlay.destroy();var k=this.get("contentBox"),q=[].concat(this.get("actionOverlayButtons")),F=this.get("item");if(F.isLicensedAssetPreview())this._addBuyButton(q);else if(F.isLicensedAsset()){var z=P.Squarespace.LicensedAssets.Manager.getById(F.get("licensedAssetId"));z.then((function(Q){Q.source===O().GETTY&&this._addLicensingButton(q)}).bind(this))}k.plug(P.Squarespace.Plugin.ActionOverlay,{buttons:q,position:this.get("item").get("mediaFocalPoint").y>=.5?"top":"bottom"});var j=this._actionOverlay=k.actionOverlay,X=P.Squarespace.ActionOverlayButtons.EDIT_IMAGE;j.on("button-"+X,function(Q){I.render(A.createElement(D.Z,{imageSrc:this.get("item").get("assetUrl"),onSave:this._onSaveEditedImage.bind(this),onCancel:this._onCloseEditingImage.bind(this),isOpen:!0}),this._imageEditorEl.getDOMNode())},this),j.on("button-"+P.Squarespace.ActionOverlayButtons.IMAGE_INFO,function(){this._openEditItem()},this),j.on("button-"+P.Squarespace.ActionOverlayButtons.REMOVE_IMAGE,function(){var Q=this.get("item").get("recordType"),ie=R[Q]?R[Q].confirmationTitle:R.FALLBACK.confirmationTitle,ce=R[Q]?R[Q].confirmationMessage:R.FALLBACK.confirmationMessage;new P.Squarespace.Widgets.Confirmation({"strings.title":ie,"strings.message":ce}).on("confirm",function(){this.fire("remove")},this)},this),j.on("button-buy",function(){this.fire("purchaseRequest")},this),j.on("button-getty",function(){this.fire("licensingDetails")},this);var J=k.one("img");J&&J.focalPoint&&J.focalPoint.on("focalPointChanged",function(Q){j.set("position",Q.focalPoint.y>=.5?"top":"bottom")},this),j.render()},_onSaveEditedImage:function(k){var q=this.get("item"),F=v._M(),z=(0,S.Z)(k,q.get("recordType"),q.get("parentId")?y.Z.CHILD:y.Z.ITEM,{replaceItemId:q.get("id")});Object.keys(z).forEach(function(j){z[j]===void 0&&delete z[j]}),this._bindJobs(),f.Z.uploadFile(F,"/api/commondata/SaveMedia",z),q.set("mediaProcessingState",e().QUEUED),this._onCloseEditingImage()},_onCloseEditingImage:function(){I.render(A.createElement(D.Z,{imageSrc:this.get("item").get("assetUrl"),onSave:this._onSaveEditedImage.bind(this),onCancel:this._onCloseEditingImage.bind(this),isOpen:!1}),this._imageEditorEl.getDOMNode())},_usePlaceholder:function(){var k=r(),q=[k.VIDEO,k.TEXT,k.STORE_ITEM];return q.indexOf(this.get("item").get("recordType"))!==-1},_useFirstChild:function(){var k=r(),q=[k.STORE_ITEM,k.GALLERY];return q.indexOf(this.get("item").get("recordType"))!==-1},_showFocalPoint:function(){return this.get("item").get("recordType")===r().IMAGE}},{CSS_PREFIX:"sqs-content-item-image",ATTRS:{item:{validator:function(k){return P.instanceOf(k,P.Squarespace.Models.ContentItem)}},parentModel:{validator:function(k){return P.instanceOf(k,P.Squarespace.Models.ContentCollection)||P.instanceOf(k,P.Squarespace.Models.ContentItem)}},animation:{value:P.Squarespace.Animations.Fadeable},showActionOverlay:{value:!1},actionOverlayButtons:{value:[P.Squarespace.ActionOverlayButtons.IMAGE_INFO,P.Squarespace.ActionOverlayButtons.EDIT_IMAGE,P.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]},showWorkflowState:{value:!0},progressSpinnerSize:{value:30},itemEditorOptions:{value:{}},preventLoad:{value:!1},imageLoaderMode:{value:"fit"},imageLoaderUseFixedRatioRenderer:{value:!1}}})},"1.0",{requires:["base","squarespace-animations","squarespace-commerce-utils","squarespace-content-item-types-editor","squarespace-content-item-utils","squarespace-image-loader","squarespace-licensed-assets-manager","squarespace-models-content-collection","squarespace-models-content-item","squarespace-plugin-actionoverlay","squarespace-plugin-focalpoint","squarespace-plugin-progress-spinner","squarespace-ss-widget","squarespace-util","squarespace-widgets-confirmation","widget-child"]})},346302:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-content-item-types-audio",function(d){var o={title:(0,l.t)("Edit {presentationName}",null,{project:"scripts-v6.content-item-types"}),width:800,height:480,overlay:.5,tabs:[{$include:["tabs.primary.base","tabs.primary.audio"]},{$include:"tabs.options.audio"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};d.namespace("Squarespace.ContentItemEditor");var e=d.Squarespace.ContentItemEditor.Audio=d.Base.create("AudioContentItemEditor",d.Squarespace.ContentItemEditor.Base,[],{_dialogOnReady:function(){e.superclass._dialogOnReady.call(this);var a=this.get("dialog"),r=a.getField("audioTrack");r.on("dataChange",function(s){s.newVal&&this._bindListenersToAudioItem(s.newVal)},this),this._bindListenersToAudioItem(r.get("data")),this._bindFileUploadBehaviors("audioTrack")},_bindListenersToAudioItem:function(a){var r=this.get("dialog");a.on("titleChange",function(s){var n=r.getField("title");n&&n.get("data").trim()===""&&n.set("data",s.newVal)},this),a.get("structuredContent").on("artistNameChange",function(s){var n=r.getField("artistName");n&&n.get("data").trim()===""?n.set("data",s.newVal):n||console.warn("Could not set artistName field, tried to set new data `"+s.newVal+"`.")},this)},getDialogData:function(){var a=e.superclass.getDialogData.call(this);return a.audioTrack=this.get("model"),a.artistName=a.structuredContent.artistName,a},sanitizeDialogData:function(a){var r=e.superclass.sanitizeDialogData.call(this,a);d.Array.each(["systemDataId","systemDataOrigin","mediaProcessingState","systemDataSourceType","systemDataVariants","filename"],function(n){r.audioTrack?r[n]=r.audioTrack.get(n):r[n]=null});var s={};return r.audioTrack&&(s=r.audioTrack.get("structuredContent").toJSON()),r.structuredContent=d.merge(s,{title:r.title,artistName:r.artistName}),delete r.audioTrack,delete r.mediaProcessingState,r}},{ATTRS:{editorConfiguration:{value:o}}})},"1.0",{requires:["squarespace-content-item-types-base"]})},199634:function(c,b,t){"use strict";var l=t(210750),d=t.n(l),o=t(714487),e=t(681328),a=t(829499),r=t(830510),s=t(522364),n=t(730842),i=t(912289),u=t(44348),h=t.n(u),g=t(726692),p=t.n(g),f=t(723796),m=t(548068),_=t.n(m);const v='<p class=""></p>',E="";function S(T){return!(!_()(T)||T.length>100)}function y(T){if(T===v)return E;let B=!1;try{const N=document.createElement("div");N.innerHTML=T,B=!N.textContent||!N.textContent.trim()}catch{window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.captureMessage("Excerpt blanking failed!")}return B?E:T}const C={shouldTrimExcerpt:S,trimExcerptHTML:y};var O=t(655191),A=t(989250),I=t(769518),D=f.Em.createLogger("content-item dialog","black");YUI.add("squarespace-content-item-types-base",function(T){T.namespace("Squarespace.ContentItemEditor");var B=T.Squarespace.ContentItemEditor.Base=T.Base.create("ContentItemEditor",T.Squarespace.ModelEditorDialog,[],{initializer:function(){if(this.constructor===B)throw new Error("You cannot instantiate the BaseContentItemEditor.");var N=this.get("dialog"),P=this.get("model");N.on("button-duplicate",d()(this._confirmAndDuplicate.bind(this),500)),N.on("button-saveAndPublish",this._saveAndPublish,this),N.on("remove-requested",this._confirmAndRemoveItem,this),N.on("ready",this._dialogOnReady,this),this._isNew=P.isNew(),this._isNew&&this.plug(T.Squarespace.ModelEditorPlugins.AutoSave)},_confirmAndDuplicate:function(){var N=this.get("dialog"),P={},x=!0,R=N.canClose(this.save.bind(this,P,this._duplicate.bind(this),x),this._duplicate.bind(this),function(){});R===!0&&this._duplicate()},trackDuplicate:function(N){this.trackAction(i.Du,N)},_duplicate:function(){var N=this.get("dialog"),P=this.get("model"),x=P.get("collectionId");N.updateTitle(T.Squarespace.DialogStates.LOADING),N.showSaveOverlay(),T.Squarespace.ContentCollectionCache.getCollectionById(x,(function(w){s.Z.copy(P.get("id"),h().DRAFT).then((function(q){this.trackDuplicate(P);var F=new T.Squarespace.Models.ContentItem(q);N.hideSaveOverlay(),N.fire("duplicate",F);var z=T.Squarespace.ContentItemEditorFactory.getEditor(F),j=new z({model:F,isDuplicateItemEditor:!0});this.fire("duplicate",j),N.on("canceled",function(){j.show(),j.once(["savingClose","nonSavingClose"],function(){w.items.add(F)})}),N.cancel()}).bind(this)).catch((function(q){this._createErrorAlert((0,o.t)("An error occured while duplicating this item",null,{project:"scripts-v6.content-item-types"})),N.hideSaveOverlay()}).bind(this))}).bind(this))},_saveAndPublish:function(N){N.halt();var P=this.get("dialog"),x=this.get("model");x.set("workflowState",h().PUBLISHED);var R=P.getField("workflow"),w=R.getValue(),k=new Date().getTime();w.state!=="draft"&&(k=w.date),R.set("data",{state:"published",date:k},{silent:!0}),P.saveAndClose()},_dialogOnReady:function(){this._bindFileUploadBehaviors("mainImage"),this._bindCommentConfirm(),this._bindWorkflowDialogFieldChange()},_bindWorkflowDialogFieldChange:function(){var N=this.get("dialog"),P=N.getField("workflow");P&&P.on("dataChange",function(x){if(x.silent!==!0){var R=T.Squarespace.ObjectBuilder.make({buttons:this.get("dialogConfig.buttons")},this.get("dialogConfigContext"),{id:this._isNew?null:this.get("model").get("id"),workflowState:this._getWorkflowStateForString(x.newVal.state),onlySetAttrsOnSave:this.get("onlySetAttrsOnSave")});N.setButtons(R.buttons)}},this)},_bindFileUploadBehaviors:function(N){var P=this.get("dialog").getField(N),x=this.get("model");P&&P.after("dataChange",function(){var R=P.get("data");if(R){var w=P.get("data").get("id");x.get("id")!==w&&x.set("id",w)}else x.get("id")&&x.clearFileData()},this)},_bindCommentConfirm:function(){var N=this.get("dialog").getField("commenting");N&&N.on("dataChange",function(P){var x=a.default.getState().commentsEnabled,R=P.prevVal.state==="disable"&&P.newVal.state==="allow";x||!R||(r.Z.save(a.default.getMergedWebsiteSettings({commentsEnabled:!0,commentEnableByDefault:!1}),!1),new T.Squarespace.Widgets.Confirmation({"strings.title":(0,o.t)("Commenting Enabled",null,{project:"scripts-v6.content-item-types"}),"strings.message":(0,o.t)("To enable comments on all posts, adjust the default comment option in Comments Settings",null,{project:"scripts-v6.content-item-types"}),"strings.confirm":(0,o.t)("Go to Settings",null,{project:"scripts-v6.content-item-types"}),"strings.cancel":(0,o.t)("Ok",null,{project:"scripts-v6.content-item-types"})}).on("confirm",function(){this.set("autoSaveAnnotation",!0),T.Squarespace.Singletons.Location.go("/settings/blogging/comments")},this))},this)},_confirmAndRemoveItem:function(N){var P,x,R=this.getPresentationName(),w=this.get("extendedDeleteMessage"),k=this.get("model");this._isNew?(P=(0,o.t)("Discard {presentationName}",{presentationName:R},{project:"scripts-v6.content-item-types"}),x=(0,o.t)("Are you sure you wish to discard this {sub1}?",{sub1:R.toLowerCase()},{project:"scripts-v6.content-item-types"})):(P=(0,o.t)("Remove {presentationName}",{presentationName:R},{project:"scripts-v6.content-item-types"}),x=(0,o.t)("Are you sure you wish to remove this {sub1}? {extended}",{sub1:R.toLowerCase(),extended:w},{project:"scripts-v6.content-item-types"})),new T.Squarespace.Widgets.Confirmation({"strings.title":P,"strings.message":x}).on("confirm",function(){this._removeItem(k)},this)},_removeItem:function(N){D("Delete item via dialog",{item:N}),this.trackAction(i.pR,N),(0,A.V)(N.toJSON())===O.J.EVENT_ITEM&&!(0,I.L)()?n.Z.deleteItem(N.get("id"),N.toJSON()):N.destroy({remove:!0}),this.destroy()},getDialogData:function(){var N=B.superclass.getDialogData.call(this);return N.mainImage=this.get("model"),N.workflow={state:T.Squarespace.ContentItemUtils.getWorkflowStateIdentifier(N.workflowState),date:N.publishOn},N.commenting={state:T.Squarespace.ContentItemUtils.getCommentStateIdentifier(N.commentState),date:N.commentDisableOn},N.gallery=this.get("model"),N.clickthroughUrl&&(N.clickthroughUrl={url:N.clickthroughUrl}),T.Squarespace.ContentItemUtils.setDataForCustomType(N,this.getCustomTypeConfiguration(),this),N},sanitizeDialogData:function(N){delete N.author,delete N.mainImage,delete N.mediaProcessingState;for(var P=["addedOn","publishOn","updatedOn","commentDisableOn","startDate","endDate"],x=0;x<P.length;x++)T.Lang.isDate(N[P[x]])&&(N[P[x]]=N[P[x]].getTime());return N.commentState=p()[N.commenting.state==="allow"?"ENABLED":"DISABLED"],N.commentDisableOn=N.commenting.date,delete N.commenting,N.workflowState=this._getWorkflowStateForString(N.workflow.state),N.publishOn=N.workflow.date,delete N.workflow,N.tags=N.tags||[],N.categories=N.categories||[],delete N.id,delete N.gallery,T.Lang.isObject(N.clickthroughUrl)&&(N.clickthroughUrl=N.clickthroughUrl.url),T.Squarespace.ContentItemUtils.sanitizeDataForCustomType(N,this.getCustomTypeConfiguration(),this),N.excerpt&&N.excerpt.html&&C.shouldTrimExcerpt(N.excerpt.html)&&(N.excerpt.html=C.trimExcerptHTML(N.excerpt.html)),N},_getWorkflowStateForString:function(N){if(N==="published")return h().PUBLISHED;if(N==="scheduled")return h().SCHEDULED;if(N==="needsreview")return h().NEEDS_REVIEW;if(N==="draft")return h().DRAFT},_getTemplateContext:function(){var N=this.get("model").toJSON(),P=this.get("model").get("collectionId");return T.Squarespace.ContentCollectionCache.getCollectionById(P,function(x){var R=x.get("typeName"),w=R==="products",k=R==="lessons",q="/";w?q="/p/":k&&(q="/v/"),N.urlPrefix="/"+x.get("urlId")+q,N.collectionType=x.get("typeName")||(0,o.t)("Collection",null,{project:"scripts-v6.content-item-types"})}),N.presentationName=this.getPresentationName(),N.model=this.get("model"),N.editor=this,N.onlySetAttrsOnSave=this.get("onlySetAttrsOnSave"),N},getTemplateContext:function(){var N=this._getTemplateContext();return T.Squarespace.ContentItemUtils.sanitizeTemplateContextForCustomType(N,this.getCustomTypeConfiguration()),N},getPresentationName:function(){var N=this.get("model"),P=N.get("recordType");return T.Squarespace.Enums.RecordType.titleForValue(P)},getCustomTypeConfiguration:function(){var N=this.get("model").get("customContent.customType");if(N){var P=e.default.getCustomType(N);if(P)return P}return null},_getDialogConfig:function(){var N=T.clone(this.get("editorConfiguration"));return T.Squarespace.ContentItemUtils.setConfigurationForCustomType(N,this.getCustomTypeConfiguration(),this),N=T.merge({initialDataByReference:!0},N),N},validateFields:function(){var N=this.get("dialog"),P=N.getField("title");if(P){var x=P.get("data");if(T.Lang.isString(x)&&x.length>200)return{title:(0,o.t)("Title Can't Exceed 200 Characters",null,{project:"scripts-v6.content-item-types"})}}return null}},{ATTRS:{editorConfiguration:{value:{}},autoSaveAnnotation:{value:!1},dialogConfig:{getter:"_getDialogConfig"},dialogConfigContext:{value:T.Squarespace.ContentItemEditorSettings},extendedDeleteMessage:{value:""},isDuplicateItemEditor:{value:!1},collection:{}}})},"1.0",{requires:["squarespace-content-item-types-enum-record-type","squarespace-content-item-types-settings","squarespace-content-item-utils","squarespace-dialog-description","squarespace-model-editor","squarespace-models-content-collection","squarespace-models-content-item","squarespace-object-builder","squarespace-widgets-confirmation"]})},630748:function(c,b,t){"use strict";var l=t(586745),d=t.n(l),o=t(413019),e=t(69637);YUI.add("squarespace-content-item-types-editor",function(a){a.namespace("Squarespace"),a.Squarespace.ContentItemEditorVariants={MINIMAL:1,DIALOG:3,IMAGE_ALT_TEXT:4},a.Squarespace.ContentItemEditorFactory=new(a.Base.create("ContentItemEditorFactory",a.Base,[],{initializer:function(){this.EDITORS_BY_RECORDTYPE={},this.EDITORS_BY_RECORDTYPE[d().TEXT]=a.Squarespace.ContentItemEditor.Text,this.EDITORS_BY_RECORDTYPE[d().IMAGE]=a.Squarespace.ContentItemEditor.Image,this.EDITORS_BY_RECORDTYPE[d().QUOTE]=a.Squarespace.ContentItemEditor.Quote,this.EDITORS_BY_RECORDTYPE[d().LINK]=a.Squarespace.ContentItemEditor.Link,this.EDITORS_BY_RECORDTYPE[d().VIDEO]=a.Squarespace.ContentItemEditor.Video,this.EDITORS_BY_RECORDTYPE[d().EVENT]=a.Squarespace.ContentItemEditor.Event,this.EDITORS_BY_RECORDTYPE[d().GALLERY]=a.Squarespace.ContentItemEditor.Gallery,this.EDITORS_BY_RECORDTYPE[d().AUDIO]=a.Squarespace.ContentItemEditor.Audio,this.EDITORS_BY_RECORDTYPE[d().KBARTICLE]=a.Squarespace.ContentItemEditor.KBArticle,this.MINIMAL_EDITORS_BY_RECORDTYPE={},this.MINIMAL_EDITORS_BY_RECORDTYPE[d().IMAGE]=a.Squarespace.ContentItemEditor.ImageMinimal,this.MINIMAL_EDITORS_BY_RECORDTYPE[d().VIDEO]=a.Squarespace.ContentItemEditor.VideoMinimal,this.PRODUCT_IMAGE_MINIMAL_EDITOR=a.Squarespace.ContentItemEditor.ProductImageMinimal},getEditor:function(r,s){(0,o.B1)("YUI-stats__Y.Squarspace.ContentItemEditorFactory#getEditor",{tracer:e.Z}),s=a.Lang.isObject(s)?s:{};var n,i=r.get("recordType"),u=s;if(a.Lang.isValue(s.variant)||(u=a.merge({variant:a.Squarespace.ContentItemEditorVariants.DIALOG},s)),u.variant===a.Squarespace.ContentItemEditorVariants.IMAGE_ALT_TEXT?n=a.Squarespace.ContentItemEditor.ImageAltText:u.variant===a.Squarespace.ContentItemEditorVariants.MINIMAL&&(i===d().IMAGE&&s.parentItem&&s.parentItem.get("recordType")===d().STORE_ITEM?n=this.PRODUCT_IMAGE_MINIMAL_EDITOR:n=this.MINIMAL_EDITORS_BY_RECORDTYPE[i]),n=n||this.EDITORS_BY_RECORDTYPE[i],n)return(0,o.L8)("YUI-stats__Y.Squarspace.ContentItemEditorFactory#getEditor",{tracer:e.Z}),n;throw new Error("No ContentItemEditor has been found for this item: "+i)}}))},"1.0",{requires:["squarespace-content-item-types-audio","squarespace-content-item-types-event","squarespace-content-item-types-gallery","squarespace-content-item-types-image","squarespace-content-item-types-kbarticle","squarespace-content-item-types-link","squarespace-content-item-types-quote","squarespace-content-item-types-text","squarespace-content-item-types-video","squarespace-util-authenticated"]})},128971:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-content-item-types-enum-record-type",function(d){var o=function(e,a){this.values=e;for(var r=0;r<this.values.length;r++){var s=this.values[r];this[s[0]]=s[1]}var n=this;for(var i in a)(function(u){n[u]=function(){var h=a[u].apply(n,arguments);return n.values.indexOf(h)>=0?h[1]:h}})(i)};d.namespace("Squarespace.Enums").RecordType=new o([["TEXT",1,"text",(0,l.t)("Text",null,{project:"scripts-v6.content-item-types",notes:"Content item type (noun)"})],["IMAGE",2,"image",(0,l.t)("Image",null,{project:"scripts-v6.content-item-types",notes:"Content item type (noun)"})],["QUOTE",4,"quote",(0,l.t)("Quote",null,{project:"scripts-v6.content-item-types",notes:"Content item type (noun)"})],["LINK",5,"link",(0,l.t)("Link",null,{project:"scripts-v6.content-item-types",notes:"Content item type (noun)"})],["CHAT",6,"chat"],["AUDIO",7,"audio",(0,l.t)("Track",null,{project:"scripts-v6.content-item-types",notes:"Content item type (noun)"})],["VIDEO",8,"video",(0,l.t)("Video",null,{project:"scripts-v6.content-item-types",notes:"Content item type (noun)"})],["REVIEW",10,"review"],["STORE_ITEM",11,"store_item"],["EVENT",12,"event",(0,l.t)("Event",null,{project:"scripts-v6.content-item-types",notes:"Content item type (noun)"})],["THREAD",13,"thread"],["GALLERY",14,"gallery",(0,l.t)("Gallery",null,{project:"scripts-v6.content-item-types",notes:"Content item type (noun)"})],["BINARY",15,"binary"],["CSSASSET",16,"css-asset"],["TWEAKASSET",17,"tweak-asset"],["DIGITALGOOD",18,"digital-good"],["ATTACHMENT",19,"attachment"],["EXPORT_WORDPRESS",20,"wordpress-export"],["EXPORT_INTERNAL",21,"json-export"],["TWEET",50,"tweet"],["RSS",51,"rss"],["CHECKIN",52,"checkin"],["DELICIOUS",53,"delicious"],["KBARTICLE",54,"kbarticle","KBArticle"]],{valueForString:function(e){for(var a=0;a<this.values.length;a++)if(this.values[a][2]===e)return this.values[a];return null},stringForValue:function(e){for(var a=0;a<this.values.length;a++)if(this.values[a][1]===e)return this.values[a][2];return null},titleForValue:function(e){for(var a=0;a<this.values.length;a++)if(this.values[a][1]===e)return this.values[a][3];return null}})},"1.0",{requires:[]})},910217:function(c,b,t){"use strict";var l=t(714487),d=t(824476);YUI.add("squarespace-content-item-types-event",function(o){o.namespace("Squarespace.ContentItemEditor");var e={title:(0,l.t)("Edit {presentationName}",null,{project:"scripts-v6.content-item-types"}),width:720,name:"event-post-editor",verticalHeight:"full",overlay:.5,initialDataByReference:!0,tabs:[{$include:["tabs.primary.base","tabs.primary.event"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.social"}],buttons:{$include:"buttons"}},a=o.Squarespace.ContentItemEditor.Event=o.Base.create("EventContentItemEditor",o.Squarespace.ContentItemEditor.Base,[],{initializer:function(){var r=this.get("dialog");r.on("ready",function(){var s=r.getField("startDate");s.after("dataChange",this._adjustEndDate,this);var n=r.getField("title");n.after("dataChange",this._updateSeoTitle,this)},this)},getDialogData:function(){var r=a.superclass.getDialogData.call(this),s=r.structuredContent;return r.startDate=s.startDate,r.endDate=s.endDate,r},sanitizeDialogData:function(r){return r=a.superclass.sanitizeDialogData.call(this,r),r.structuredContent={startDate:r.startDate,endDate:r.endDate},r},_updateSeoTitle:function(r){d.Z.updateFieldNoEdit("title",r.newVal)},_adjustEndDate:function(r){var s=this.get("dialog"),n=s.getField("endDate"),i=parseInt(r.prevVal,10),u=parseInt(r.newVal,10),h=n.get("data")-i;n.set("data",new Date(u+h).getTime(),{autoUpdate:!0})},_getTemplateContext:function(){var r=a.superclass._getTemplateContext.call(this);return r.enableFeatured=!0,r.enableExcerpt=!0,r}},{ATTRS:{editorConfiguration:{value:e}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},761523:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-content-item-types-gallery",function(d){var o={title:(0,l.t)("Edit {presentationName}",null,{project:"scripts-v6.content-item-types"}),width:800,height:450,overlay:.5,initialDataByReference:!0,tabs:[{$include:["tabs.primary.base","tabs.primary.gallery"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};d.namespace("Squarespace.ContentItemEditor").Gallery=d.Base.create("GalleryContentItemEditor",d.Squarespace.ContentItemEditor.Base,[],{},{ATTRS:{editorConfiguration:{value:o}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},410980:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-content-item-types-image",function(d){d.namespace("Squarespace.ContentItemEditor");var o={title:(0,l.t)("Edit {presentationName}",null,{project:"scripts-v6.content-item-types"}),width:800,height:510,overlay:.5,initialDataByReference:!0,tabs:[{$include:["tabs.primary.base","tabs.primary.image"]},{$include:"tabs.options.image"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}},e=d.Squarespace.ContentItemEditor.Image=d.Base.create("ImageContentItemEditor",d.Squarespace.ContentItemEditor.Base,[],{show:function(n){var i=this.get("dialog");n&&n.getty&&i&&i.on("ready",function(){var u=i.getField("mainImage");u&&u._onLicensedImageSearch()},this),e.superclass.show.call(this)}},{ATTRS:{editorConfiguration:{value:o}}}),a=[{$include:["fields.title",{countHeight:!0,className:"thin"}]},{ctor:d.Squarespace.DialogFields.Wysiwyg,config:{newRTEConfig:{placeholder:(0,l.t)("Enter an image body\u2026",null,{project:"scripts-v6.content-item-types"}),toolbarOptions:["aiWriter","divider","bold","italic","link","clearFormatting"],trackingProductAreaLevel2:"gallery-block-image-description"},classNames:"major",name:"body",editorHeight:157,title:(0,l.t)("Enter an image body\u2026",null,{project:"scripts-v6.content-item-types"}),isNullable:!0}}],r={name:"imageeditminimal",title:(0,l.t)("Edit {presentationName}",null,{project:"scripts-v6.content-item-types"}),width:380,height:410,overlay:.5,closeOthers:!1,draggable:!0,minimal:!0,style:"flyout",flyoutPointerDirection:"hidden",fields:[].concat(a,[{$include:["fields.clickthroughUrl",{countHeight:!0,condensed:!0,disableNewWindow:!0}]}]),buttons:{$include:"buttons"}};d.Squarespace.ContentItemEditor.ImageMinimal=d.Base.create("ImageContentItemEditor",e,[],{},{ATTRS:{editorConfiguration:{value:r}}});var s={name:"imageeditminimal",title:(0,l.t)("Edit Image Metadata",null,{project:"scripts-v6.content-item-types"}),width:380,height:300,overlay:.5,closeOthers:!1,draggable:!0,minimal:!0,style:"flyout",flyoutPointerDirection:"hidden",fields:[{$include:["fields.title",{countHeight:!0,className:"thin"}]}],buttons:{$include:"buttons"}};d.Squarespace.ContentItemEditor.ProductImageMinimal=d.Base.create("ProductImageContentItemEditor",e,[],{},{ATTRS:{editorConfiguration:{value:s}}}),d.Squarespace.ContentItemEditor.ImageAltText=d.Base.create("ImageAltTextEditor",e,[],{},{ATTRS:{editorConfiguration:{value:{name:"alttextimageeditor",title:(0,l.t)("Edit Image",null,{project:"scripts-v6.content-item-types"}),width:380,height:410,closeOthers:!1,draggable:!0,style:"flyout",flyoutPointerDirection:"hidden",buttons:{$include:"buttons"},fields:[{ctor:d.Squarespace.DialogFields.Text,countHeight:!0,className:"thin",config:{name:"title","strings.placeholder":(0,l.t)("Enter alt text\u2026",null,{project:"scripts-v6.content-item-types"})}},{ctor:d.Squarespace.DialogFields.Description,config:{name:"altTextDescription",text:(0,l.t)("A small bit of text to describe your image. Used for SEO and displayed when the image fails to load.",null,{project:"scripts-v6.content-item-types"})}}]}}}})},"1.0",{requires:["squarespace-content-item-types-base","squarespace-dialog-text","squarespace-dialog-description","squarespace-dialog-wysiwyg"]})},685701:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-content-item-types-kbarticle",function(d){var o={title:(0,l.t)("Edit {presentationName}",null,{project:"scripts-v6.content-item-types"}),width:650,name:"kbarticle-editor",overlay:.5,verticalHeight:"full",initialDataByReference:!0,tabs:[{$include:["tabs.primary.base","tabs.primary.text"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}},e=d.namespace("Squarespace.ContentItemEditor").KBArticle=d.Base.create("ArticleEditor",d.Squarespace.ContentItemEditor.Base,[],{getPresentationName:function(){return"KBArticle"},_getTemplateContext:function(){var a=e.superclass._getTemplateContext.call(this);return a.enableFeatured=!0,a.enablePassthrough=!0,a.enableExcerpt=!0,a}},{ATTRS:{editorConfiguration:{value:o}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},46242:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-content-item-types-link",function(d){var o={title:(0,l.t)("Edit {presentationName}",null,{project:"scripts-v6.content-item-types"}),width:800,height:370,overlay:.5,initialDataByReference:!0,tabs:[{$include:["tabs.primary.base","tabs.primary.link"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};d.namespace("Squarespace.ContentItemEditor").Link=d.Base.create("LinkContentItemEditor",d.Squarespace.ContentItemEditor.Base,[],{},{ATTRS:{editorConfiguration:{value:o}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},131087:function(){YUI.add("squarespace-content-item-types-post-editors",function(c){},"1.0",{requires:[]})},931993:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-content-item-types-quote",function(d){var o={title:(0,l.t)("Edit {presentationName}",null,{project:"scripts-v6.content-item-types"}),width:800,height:450,overlay:.5,tabs:[{$include:["tabs.primary.base","tabs.primary.quote"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}};d.namespace("Squarespace.ContentItemEditor");var e=d.Squarespace.ContentItemEditor.Quote=d.Base.create("QuoteContentItemEditor",d.Squarespace.ContentItemEditor.Base,[],{getDialogData:function(){var a=e.superclass.getDialogData.apply(this,arguments);return!a.quote&&a.structuredContent.quote&&(a.quote=a.structuredContent.quote),a},sanitizeDialogData:function(a,r,s){var n=e.superclass.sanitizeDialogData.apply(this,arguments);return n.structuredContent.quote=n.quote,delete n.quote,delete n.id,n}},{ATTRS:{editorConfiguration:{value:o}}})},"1.0",{requires:["base","squarespace-content-item-types-base"]})},216710:function(c,b,t){"use strict";var l=t(714487),d=t(347560),o=t(586745),e=t.n(o),a=t(967361),r=t(711679),s=t(834105),n=t(935154),i=t.n(n),u=t(681328),h=t(656953),g=t(437951),p=t.n(g),f=t(816130),m=t.n(f),_=t(296923),v=t.n(_),E=t(181298),S=t(916661),y=t(631064),C=t(324270),O=t(730842),A=t(337061),I=t(897820),D=t(134798),T=t(119978),B=t(251678),N=t(157484),P=t(713820),x=t(655191),R=t(989250),w=t(706252),k=t(96315),q=t(925184),F=3,z=370,j=600;YUI.add("squarespace-content-item-types-selector",function(X){var J={};J[X.Squarespace.Enums.RecordType.IMAGE]=(0,l.t)("Upload Image",null,{project:"scripts-v6.content-item-types"}),J[X.Squarespace.Enums.RecordType.VIDEO]=(0,l.t)("Add Video",null,{project:"scripts-v6.content-item-types"});var Q={};Q[X.Squarespace.Enums.RecordType.DIGITALGOOD]=(0,l.t)("Squarespace will automatically send customers a secure link to the file lasting 24 hours after initial access.",null,{project:"scripts-v6.content-item-types"}),Q[X.Squarespace.Enums.RecordType.STORE_ITEM]=(0,l.t)("A package must be shipped by the merchant.",null,{project:"scripts-v6.content-item-types"});var ie=a.Z.isFeatureEnabled(i().GIFT_CARDS),ce=a.Z.isFeatureEnabled(i().COMMERCE),pe=r.Z.getUpsellCopy(i().GIFT_CARDS),ye=[{title:(0,l.t)("Physical",null,{project:"scripts-v6.content-item-types"}),value:"store-item-physical",description:(0,l.t)("A package must be shipped by the merchant.",null,{project:"scripts-v6.content-item-types"}),recordType:X.Squarespace.Enums.RecordType.STORE_ITEM,productType:v().PHYSICAL},{title:(0,l.t)("Digital",null,{project:"scripts-v6.content-item-types"}),value:"store-item-digital-good",description:(0,l.t)("Customers receive a secure link to the file lasting 24 hours after the first download.",null,{project:"scripts-v6.content-item-types"}),recordType:X.Squarespace.Enums.RecordType.STORE_ITEM,productType:v().DIGITAL},{title:(0,l.t)("Service",null,{project:"scripts-v6.content-item-types"}),value:"store-item-service",description:(0,l.t)("A service must be rendered. Services do not have shipping costs applied.",null,{project:"scripts-v6.content-item-types"}),recordType:X.Squarespace.Enums.RecordType.STORE_ITEM,productType:v().SERVICE},{title:(0,l.t)("Gift Card",null,{project:"scripts-v6.content-item-types"}),value:"store-item-gift-card",description:(0,l.t)("Customers can apply a gift card towards future purchases.",null,{project:"scripts-v6.content-item-types"}),recordType:X.Squarespace.Enums.RecordType.STORE_ITEM,productType:v().GIFT_CARD,upsellLocked:!ie&&ce,upsellInfo:pe}],Ae=E.GRID_PX*5.59;function Je(){var ke=[];return X.Array.each(this.get("model").get("acceptTypes"),function(Fe){var Ie=X.Squarespace.Enums.RecordType.valueForString(Fe),ht=X.Squarespace.Enums.RecordType.titleForValue(Ie);J[Ie]&&(ht=J[Ie]);var me=u.default.getCustomType(Fe);if(X.Lang.isNull(Ie)&&me&&(Ie=X.Squarespace.Enums.RecordType.valueForString(me.base),ht=me.title),!Ie)return new X.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Custom Type Configuration Not Found",null,{project:"scripts-v6.content-item-types"}),"strings.message":(0,l.t)('Configuration not found for accept type "{acceptType}". Please double check the collection configuration.',{acceptType:Fe},{project:"scripts-v6.content-item-types"})}),null;if(Ie===X.Squarespace.Enums.RecordType.IMAGE&&!me&&ke.push({icon:"licensed",title:(0,l.t)("Search Images",null,{project:"scripts-v6.content-item-types"}),value:"licensed-image",recordType:X.Squarespace.Enums.RecordType.IMAGE,customType:"licensed"}),Ie===X.Squarespace.Enums.RecordType.STORE_ITEM)ke=ke.concat(ye);else{var Ee=X.Squarespace.Enums.RecordType.stringForValue(Ie);if(!X.Lang.isValue(ht))return console.warn('Could not find title for acceptType "'+Fe+'"'),null;ke.push({icon:Ee,title:ht,value:Fe,description:Q[Ie],recordType:Ie,customType:me?me.name:null})}},this),ke=ke.filter(function(Fe){return Fe!==null}),ke}X.namespace("Squarespace.ContentItemTypes").Selector=X.Base.create("ContentItemTypesSelector",X.Squarespace.ModelEditorDialog,[],{initializer:function(){var ke=this.get("dialog");ke.on("datachange",function(Fe){var Ie=Fe.get("data"),ht=this.get("onContentItemTypeSelected");if(ht)ke.updateTitle(X.Squarespace.DialogStates.LOADING),ke.showSaveOverlay(),ht(this.getContentItemConfiguration(Ie),function(){ke.hideSaveOverlay(),ke.close()});else throw new Error("No onContentItemTypeSelected handler function?")},this)},getContentItemConfiguration:function(ke){var Fe=X.Array.find(this.get("acceptTypes"),function(ht){return ht.value===ke}),Ie={recordType:Fe.recordType};return Fe.customType&&(Ie.customContent={customType:Fe.customType}),Fe.recordType===X.Squarespace.Enums.RecordType.STORE_ITEM&&(Ie.structuredContent={productType:Fe.productType}),Ie},getDialogConfig:function(){var ke=this.get("model"),Fe=this.get("acceptTypes"),Ie=Math.min(Fe.length,F),ht=ke.get("collectionType")===p().PRODUCTS;return ht&&(Ie=1),{width:{$valueFn:function(){return ht?j:z}},height:{$valueFn:X.bind(function(){return Math.ceil(Fe.length/Ie)*Ae},this),$when:X.bind(function(){return Fe.length>Ie&&Ie>1},this)},name:{$valueFn:function(){return ht?"productType":"content type"}},overlay:.5,style:"flyout",closeOthers:!1,discardChangesConfirmation:!1,flyoutPointerDirection:"centered",loadingText:(0,l.t)("Loading\u2026",null,{project:"scripts-v6.content-item-types"}),tabs:[{title:{$valueFn:function(){return ht?(0,l.t)("Select Product Type",null,{project:"scripts-v6.content-item-types"}):ke.get("addText")}},icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:X.Squarespace.DialogFields.MultiOption,config:{numeric:!1,options:Fe,columns:Ie}}]}]}}},{ATTRS:{onContentItemTypeSelected:{},acceptTypes:{valueFn:Je},dialogConfig:{valueFn:"getDialogConfig"}}}),X.namespace("Squarespace.Mixins").AddContentItemHandlerMixin=X.Base.create("AddContentItemHandlerMixin",X.Base,[],{_createNewContentItemAndShowEditor:function(ke,Fe){if(!this.pendingAddItemAndEnterInlineEditMode){var Ie=this.get("collection");if((0,R.j)(Ie.toJSON())===x.A.EVENT_COLLECTION){O.Z.addEvent70(X,Ie.get("id"));return}var ht=this._createNewContentItem(ke);if(ht.get("recordType")===e().STORE_ITEM&&(0,T.xU)((0,B.Z)(ht.getAttrs().structuredContent.getAttrs().productType),N.MX.YUI_EDITOR),X.Lang.isFunction(Fe)&&Fe(),this.shouldEnterInlineEditMode(Ie)){this.pendingAddItemAndEnterInlineEditMode=!0,ht.set("body",{raw:!1,layout:{columns:12,rows:[]}}),ht.autoSave((function(){Ie.items.add(ht),(0,y.pC)(ht.get("fullUrl"),(function(){setTimeout((function(){(0,A.GE)((0,I.xu)(D.Z.PAGE)),(0,A.GE)((0,I.kI)());var Se=ht.getAttrs();(0,R.V)(Se)===x.J.EVENT_ITEM&&O.Z.addItem(Se),this.pendingAddItemAndEnterInlineEditMode=!1}).bind(this),100)}).bind(this))}).bind(this));return}if(X.Squarespace.ContentItemUtils.isStandardGalleryItem(ht,Ie)){ht.save(function(){O.Z.showCollectionItemSettingsEditor(ht.getAttrs(),null,!0),X.Lang.isFunction(Fe)&&Fe()});return}var me=ht.on("save",function(Se){(!Se.options||!Se.options.headers||!Se.options.headers["X-AutoSave"])&&Ie.items.add(ht)},this),Ee=new(X.Squarespace.ContentItemEditorFactory.getEditor(ht,this.get("itemEditorOptions")))({model:ht});return Ee.on("visibleChange",function(Se){Se.newVal||(me.detach(),ht.get("unsaved")?ht.destroy({remove:!0}):ht.isNew()&&ht.destroy())}),Ee.show({licensed:ke.customContent&&ke.customContent.customType==="licensed"}),Ee}},shouldEnterInlineEditMode:function(ke){return S.Z.isSevenOne()?ke.get("ordering")===m().CHRONOLOGICAL||(0,R.j)(O.Z.getCollection(ke.get("id")))===x.A.EVENT_COLLECTION?!0:ke.get("collectionType")===p().PORTFOLIO:!1},_createNewContentItem:function(ke){var Fe=this.get("collection"),Ie={collectionId:Fe.get("id")};return(Fe.get("ordering")===m().USER||Fe.get("ordering")===m().MUSIC_ALBUM)&&(Ie.displayIndex=Fe.get("nextDisplayIndex")),ke.recordType===e().EVENT&&(Ie.title=""),new X.Squarespace.Models.ContentItem(X.merge(ke,Ie))},handleAddContentRequest:function(ke){var Fe=this.get("collection");d.Z.recycle(h.Z);var Ie=new X.Squarespace.ContentItemTypes.Selector({model:this.get("collectionConfiguration"),onContentItemTypeSelected:X.bind(this._createNewContentItemAndShowEditor,this)}),ht=Ie.get("acceptTypes"),me=this.get("selectorAnchorNode"),Ee=X.bind(Ie.show,Ie);ht.length===0?new X.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Configuration Error",null,{project:"scripts-v6.content-item-types"}),"strings.message":(0,l.t)("There are no valid accept types defined for the collection type {sub1}.",{sub1:this.get("collectionConfiguration").get("title")},{project:"scripts-v6.content-item-types"})}):ht.length===1?Ee=X.bind(function(){this._createNewContentItemAndShowEditor(Ie.getContentItemConfiguration(ht[0].value))},this):me&&Ie.set("anchorNode",me);function Se(){Fe.isNew()?Ee():Fe.load({},function(){X.Squarespace.ProductViolations.isAllowedToAddItemToCollection(Fe,1).then(Ee)},this)}if(Fe.get("type")===p().PRODUCTS){P.ProductComposerOrchestrator.openProductCreationWizard({collection:{id:Fe.get("id"),itemCount:Fe.items.size()},onSavingClose:function(){C.default.refresh()},onProductCreated:function(lt){var Lt=new X.Squarespace.Models.ContentItem((0,P.buildShellContentItem)(lt));Fe.items.add(Lt)},validProductTypes:w.StoreCatalogProductTypes,useDrawer:(0,k.Z)(),eventEntrypoint:q.Q.PAGES_PANEL});return}Se(),ke&&ke.analytics&&ke.analytics.productPage&&Fe.get("type")===p().PRODUCTS&&(0,T.qe)(ke.analytics.productPage)}},{ATTRS:{damask:{},itemEditorOptions:{value:{}},collectionConfiguration:{},collection:{},selectorAnchorNode:{}}})},"1.0",{requires:["squarespace-content-item-types-editor","squarespace-content-item-types-enum-record-type","squarespace-content-item-utils","@sqs/layout-engine/layout-builder","squarespace-model-editor","squarespace-models-content-item","squarespace-singletons-location","squarespace-upsell-product-violations","squarespace-util-authenticated","squarespace-widgets-alert","squarespace-widgets-confirmation"]})},696477:function(c,b,t){"use strict";var l=t(463351),d=t(377397),o=t.n(d),e=t(714487);const r={GENERIC:null,DIGITAL_GOODS:"digitalGoods"};var s=t(44348),n=t.n(s),i=t(586745),u=t.n(i),h=t(259093),g=t.n(h),p=t(961789),f=t(387582),m=t(655191),_=t(553772),v=t(867826),E=t(868796),S=t(769518),y=t(807586),C=t(347560),O=t(374335),A=t.n(O),I=t(816130),D=t.n(I),T=t(437951),B=t.n(T),N=t(966819),P=t(637635),x=t(522364),R=t(824476),w=t(656953),k=t(795478),q=t.n(k),F=t(174161),z=t(845076),j=t.n(z),X=t(763064),J=t(759352),Q=t(970671),ie=t(482212),ce=t(476319),pe=t(657010),ye=t(965885),Ae=t(192530),Je=t(934951),ke=t(868192),Fe=t(561669),Ie=t.n(Fe);const ht=he=>F.createElement(F.Fragment,null,F.createElement(Je.T,{project:"apps.App"},"This page is your homepage. Search engines use information from your site\u2019s SEO settings to show your page in their search results, which you can preview here. If you set another page as your homepage, you can edit this page\u2019s SEO information here."),F.createElement("div",{className:Ie().field},F.createElement(Ae.Z,{className:Ie().buttonLink,to:"/marketing/seo",key:"marketing-seo"},F.createElement(Je.T,{project:"apps.App"},"EDIT WEBSITE SEO SETTINGS")))),me=F.createElement(Je.T,{squarespaceHelp:F.createElement("a",{target:"_blank",href:ke.SEO_EDIT_TITLE},F.createElement(Je.T,{project:"apps.App"},"title formats.")),project:"apps.App"},"Search results typically show your SEO title and description. Your title is also the browser window title, and matches your {squarespaceHelp} Depending on the search engine, descriptions displayed can be 50 to 300 characters long. If you don\u2019t add a title or description, search engines will use this item's title and content."),Ee=F.createElement(Je.T,{squarespaceHelp:F.createElement("a",{target:"_blank",href:ke.SEO_EDIT_TITLE},F.createElement(Je.T,{project:"apps.App"},"title formats.")),project:"apps.App"},"Search results typically show your SEO title and description. Your title is also the browser window title, and matches your {squarespaceHelp} Depending on the search engine, descriptions displayed can be 50 to 300 characters long. If you don\u2019t add a title or description, search engines will use your page title and content."),Se=he=>he?me:Ee,lt=he=>F.createElement(ye.Description,null,he.isHomepage?F.createElement(ht,{baseUrl:he.baseUrl}):Se(he.isContentItem));lt.propTypes={baseUrl:q().string.isRequired,isContentItem:q().bool,isHomepage:q().bool},ht.propTypes={baseUrl:q().string.isRequired};const Lt=lt;var Pt=t(723681),Ce=t.n(Pt);function je(he,Re,Wt){return Re in he?Object.defineProperty(he,Re,{value:Wt,enumerable:!0,configurable:!0,writable:!0}):he[Re]=Wt,he}var Le;class ci extends(Le=F.Component){render(){const{hideTitle:Re,description:Wt,headerComponent:_i,isHelpDescription:fi,title:Ri,url:Be}=this.props,bi=j()(Ce().description,{[Ce().helperDescription]:fi});return F.createElement("div",null,Re?null:_i||F.createElement(ye.Label,{className:Ce().label},F.createElement(Je.T,{project:"apps.App"},"Search Results Preview")),F.createElement("div",{className:Ce().container},F.createElement("div",{className:Ce().title},Ri),F.createElement("div",{className:Ce().url},Be),F.createElement("div",{className:bi},Wt)))}}je(ci,"propTypes",{description:q().string,headerComponent:q().element,hideTitle:q().bool,isHelpDescription:q().bool,title:q().string,url:q().string});const Ft=ci,ti=(0,e.t)("This description will be automatically generated by search engines. To override that description, enter one below.",null,{project:"apps.App"}),gi=(0,e.t)("This description will be automatically generated by search engines. To override that description, enter a description in website SEO settings.",null,{project:"apps.App"}),qt=he=>{const Re=he.baseUrl||"";let Wt=he.urlId||"";Wt.charAt(0)==="/"&&(Wt=Wt.substring(1));const _i=he.isHomepage?Re:Re+"/"+Wt;let fi=he.description||ti;!he.description&&he.isHomepage&&(fi=gi);let Ri=he.title||"";return Ri=Ri.substring(0,70),F.createElement("div",{className:Ie().field},F.createElement(Ft,{url:_i,title:Ri,description:fi,isHelpDescription:!he.description,hideTitle:he.hideTitle}))};qt.propTypes={baseUrl:q().string,description:q().string,hideTitle:q().bool,isHomepage:q().bool,title:q().string,urlId:q().string};const Mt=qt,Vt=he=>{const Re=he.linkField("isHidden").value;return he.isHomePage&&!he.supportsFriendlyUrls?F.createElement("div",{className:Ie().field}):he.supportsFriendlyUrls?F.createElement(F.Fragment,null,F.createElement("div",{className:Ie().field},F.createElement(F.Fragment,null,F.createElement(ye.Label,null,F.createElement(Je.T,{project:"apps.App"},"Hide from Search Engines")),!he.isHomePage&&F.createElement(ye.Check,{title:(0,e.t)("All pages in this collection",null,{project:"apps.App"}),...he.linkField("isHidden"),theme:"damask"}),F.createElement(ye.Check,{isDisabled:Re,title:(0,e.t)("All category pages in this collection",null,{project:"apps.App"}),value:Re||he.linkField("categoryPagesSeoHidden").value,onChange:he.linkField("categoryPagesSeoHidden").onChange,theme:"damask"}),F.createElement(ye.Check,{isDisabled:Re,title:(0,e.t)("All tag pages in this collection",null,{project:"apps.App"}),value:Re||he.linkField("tagPagesSeoHidden").value,onChange:he.linkField("tagPagesSeoHidden").onChange,theme:"damask"})))):F.createElement(F.Fragment,null,F.createElement("div",{className:Ie().field},he.containsSubPages&&F.createElement(ye.Check,{title:(0,e.t)("Hide all pages in this collection from search engines",null,{project:"apps.App"}),...he.linkField("isHidden"),theme:"damask"}),!he.containsSubPages&&F.createElement(ye.Check,{title:(0,e.t)("Hide this page from search engines",null,{project:"apps.App"}),...he.linkField("isHidden"),theme:"damask"})))};Vt.propTypes={isHomePage:q().bool,linkField:q().func,supportsFriendlyUrls:q().bool,containsSubPages:q().bool};const Ti=Vt,Ni=F.createElement(Je.T,{squarespaceHelp:F.createElement("a",{target:"_blank",href:ke.SEO_OVERVIEW},F.createElement(Je.T,{project:"apps.App"},"Learn more")),project:"apps.App"},"Search engine optimization (SEO) allows you to improve your ranking in search results. Use these features to make it easier for users to find your page when they search for it. {squarespaceHelp}"),ui=F.createElement(Je.T,{squarespaceHelp:F.createElement("a",{target:"_blank",href:ke.SEO_OVERVIEW},F.createElement(Je.T,{project:"apps.App"},"Learn more")),project:"apps.App"},"Search engine optimization (SEO) allows you to improve your ranking in search results. Use these features to make it easier for users to find this item when they search for it. {squarespaceHelp}"),gn=he=>F.createElement(ye.Description,null,he.isContentItem?ui:Ni);gn.propTypes={isContentItem:q().bool};const zi=gn,Mn=he=>{const Re=he.linkFieldText("seoDescription");return F.createElement("div",{className:Ie().field},F.createElement(ye.Label,{className:Ie().label},F.createElement(Je.T,{project:"apps.App"},"SEO Description (Optional)")),F.createElement(ye.TextArea,{placeholder:(0,e.t)("Enter a description\u2026",null,{project:"apps.App"}),...Re,minRows:3,characterCountLimit:he.maxLength,maxLength:he.maxLength,errorMessage:he.errorMessage,wrapperClassName:Ie().description}))};Mn.propTypes={linkFieldText:q().func,maxLength:q().number,errorMessage:q().string};const Zt=Mn,Te=he=>F.createElement("div",{className:Ie().field},F.createElement(ye.Label,{className:Ie().label},F.createElement(Je.T,{project:"apps.App"},"SEO Title (Optional)")),F.createElement(ye.TextArea,{...he.linkFieldText("seoTitle"),minRows:1,characterCountLimit:he.maxLength,maxLength:he.maxLength,errorMessage:he.errorMessage,wrapperClassName:Ie().description}));Te.propTypes={linkFieldText:q().func,maxLength:q().number,errorMessage:q().string};const qe=Te;var xt=t(814753),Gt=t(320110);const Li=F.createElement(Je.T,{squarespaceHelp:F.createElement("a",{target:"_blank",href:ke.SEO_SOCIAL},F.createElement(Je.T,{project:"apps.App"},"Learn more about images.")),project:"apps.App"},"Social networks typically show your social sharing image together with your SEO title and description. If you don\u2019t add a social sharing image, we\u2019ll use the item's thumbnail instead. {squarespaceHelp}"),mi=F.createElement(Je.T,{squarespaceHelp:F.createElement("a",{target:"_blank",href:ke.SEO_SOCIAL},F.createElement(Je.T,{project:"apps.App"},"Learn more about images.")),project:"apps.App"},"Social networks typically show your social sharing image together with your SEO title and description. If you don\u2019t add a social sharing image, we\u2019ll use your social sharing logo or site logo instead. {squarespaceHelp}"),le=he=>F.createElement(ye.Description,null,he.isContentItem?Li:mi);le.propTypes={isContentItem:q().bool};const _e=le,Me={objectType:"image",indirectObject:{value:"seo-image",displayName:"Social",type:"tab",identifier:"social"},productPage:"pages"},et=he=>F.createElement("div",{className:Ie().field},F.createElement(ye.Label,{className:Ie().label},F.createElement(Je.T,{project:"apps.App"},"Alternate Social Sharing Image (Optional)")),F.createElement(xt.Z,{height:226,allowLicensedImage:!0,key:"seo-image-editor",contentItemId:he.contentItemId,onChange:he.onChange,imageDestination:Gt.Z.SEO_CONTENT,isFocalPointEditable:!1,uploadSource:Me}),F.createElement(_e,{isContentItem:he.isContentItem}));et.propTypes={isContentItem:q().bool,contentItemId:q().string,onChange:q().func};const $t=et;var Ki=t(276309),pi=t(178652),Mi=t.n(pi),vn=t(206729),ln=t(694598),Sn=t(190644);const an=he=>{let{description:Re,isHelpDescription:Wt,showImage:_i,styles:fi,title:Ri,url:Be}=he;const bi=j()(Mi().description,{[Mi().helperDescription]:Wt});return F.createElement(F.Fragment,null,_i&&F.createElement("div",{className:Mi().image,style:fi}),F.createElement("div",{className:Mi().container},F.createElement("div",{className:Mi().url},Be),F.createElement("div",{className:Mi().title},Ri),F.createElement("div",{className:bi},Re)))},dn=he=>{let{description:Re,isHelpDescription:Wt,showImage:_i,styles:fi,title:Ri,url:Be}=he;const bi=j()(Mi().leftAlignedDescription,{[Mi().helperDescription]:Wt});return F.createElement("div",{className:Mi().leftAligned},_i&&F.createElement("div",{className:Mi().leftAlignedImage,style:fi}),F.createElement("div",{className:_i?Mi().leftAlignedContainer:Mi().leftAlignedContainerFullWidth},F.createElement("div",{className:Mi().url},Be),F.createElement("div",{className:Mi().title},Ri),F.createElement("div",{className:bi},Re)))},W=he=>{const[Re,Wt]=(0,F.useState)(""),_i=(0,F.useCallback)(async()=>await(0,ln.b)("session-storage"),[]);(0,F.useEffect)(()=>{let kn;return(0,Sn.p)()&&he.assetUrl?_i().then(hi=>{kn=(0,vn.Y)({src:he.assetUrl,token:hi,format:500}).then(di=>{Wt(di.assetUrl)})}):Wt(he.assetUrl),()=>{kn&&kn.cancel()}},[he.assetUrl,_i]);const fi={backgroundImage:`url('${Re})`,height:`${he.assetHeight}px`,width:`${he.assetWidth}px`},Ri=he.assetWidth/he.assetHeight,Be=!!he.assetUrl&&he.assetWidth>=200&&he.assetHeight>=200,bi=he.assetWidth<445&&he.assetHeight<315||Ri<.67,Bi=(0,e.t)("This description will be automatically generated depending on the service this link is shared on. To override that description, enter a description on the SEO tab.",null,{project:"apps.App"}),Tn=he.description||Bi,Ln=!he.description;return F.createElement(F.Fragment,null,he.hideTitle?null:F.createElement(ye.Label,null,F.createElement(Je.T,{project:"apps.App"},"Social Preview")),bi?F.createElement(dn,{...he,description:Tn,styles:fi,showImage:Be,isHelpDescription:Ln}):F.createElement(an,{...he,description:Tn,styles:fi,showImage:Be,isHelpDescription:Ln}))};W.propTypes={assetHeight:q().number,assetUrl:q().string,assetWidth:q().number,description:q().string,hideTitle:q().bool,seoSocialSharingImageId:q().string,title:q().string,url:q().string};const Zi=W;var Zn=t(229861),pn=t.n(Zn);function Yi(he,Re,Wt){return Re in he?Object.defineProperty(he,Re,{value:Wt,enumerable:!0,configurable:!0,writable:!0}):he[Re]=Wt,he}class Un extends F.Component{render(){const{assetHeight:Re,assetUrl:Wt,assetWidth:_i,description:fi,isContentItem:Ri,isLoading:Be,seoSocialSharingImageId:bi,socialImageId:Bi,title:Tn,url:Ln}=this.props,kn=(0,J.q_)(Ln);return F.createElement(F.Fragment,null,F.createElement("div",{className:pn().field},F.createElement(Zi,{assetHeight:Re,assetUrl:Wt,assetWidth:_i,description:fi,seoSocialSharingImageId:Bi,title:Tn,url:kn})),F.createElement("div",{className:pn().field},!Be&&F.createElement($t,{contentItemId:bi,isContentItem:Ri,onChange:this.onImageUpload})))}constructor(...Re){super(...Re),Yi(this,"onImageUpload",Wt=>R.Z.updateField("seoSocialSharingImageId",Wt))}}Yi(Un,"propTypes",{assetHeight:q().number,assetUrl:q().string,assetWidth:q().number,description:q().string,isContentItem:q().bool,isLoading:q().bool,seoSocialSharingImageId:q().string,socialImageId:q().string,title:q().string,url:q().string});const qi=Un;function ls(he,Re,Wt){return Re in he?Object.defineProperty(he,Re,{value:Wt,enumerable:!0,configurable:!0,writable:!0}):he[Re]=Wt,he}const ct=100,fe=400,it=(he,Re,Wt)=>{const _i={"%s":{exampleText:he},"%p":{exampleText:Re}};return Wt&&(_i["%i"]={exampleText:Re}),_i};class wi extends F.Component{getChildContext(){return{router:this.props.router,location:this.props.location}}render(){const{assetHeight:Re,assetUrl:Wt,assetWidth:_i,baseUrl:fi,isContentItem:Ri,isHomepage:Be,isLoading:bi,isSocialTab:Bi,seoDescription:Tn,seoSocialSharingImageId:Ln,socialImageId:kn,seoTitle:hi,supportsFriendlyUrls:di,containsSubPages:Cn,urlId:Cs,router:Qn}=this.props,Rs=(0,e.t)("SEO Title cannot be more than {maxLength} characters",{maxLength:ct},{project:"apps.App"}),cs=(0,e.t)("SEO Description cannot be more than {maxLength} characters",{maxLength:fe},{project:"apps.App"}),Ea=this.generateErrorMessage(Tn,fe,cs),Ls=this.generateErrorMessage(hi,ct,Rs),Ys=this.getPreviewTitle(),ea=this.getDescription(),Fa=!Ri&&(!Be||di),Ps=j()(Ie().container,{[Ie().contentItemContainer]:Ri});return F.createElement(Q.Z,null,F.createElement(ie.Z.Provider,{value:Qn},F.createElement(ce.Z.Provider,{value:location},F.createElement("div",{className:Ie().flexContainer},F.createElement("div",{className:Ps},!Bi&&F.createElement(F.Fragment,null,!Be&&F.createElement(zi,{isContentItem:Ri,isHomepage:Be}),F.createElement(Mt,{baseUrl:fi,description:ea,isHomepage:Be,title:Ys,urlId:Cs}),!Be&&F.createElement(F.Fragment,null,F.createElement(qe,{errorMessage:Ls,linkFieldText:this.linkFieldText,maxLength:ct}),F.createElement(Zt,{errorMessage:Ea,linkFieldText:this.linkFieldText,maxLength:fe})),F.createElement(Lt,{baseUrl:fi,isContentItem:Ri,isHomepage:Be}),Fa&&F.createElement(Ti,{linkField:this.linkField,isHomePage:Be,supportsFriendlyUrls:di,containsSubPages:Cn})),Bi&&F.createElement(qi,{assetHeight:Re,assetUrl:Wt,assetWidth:_i,description:ea,isContentItem:Ri,isLoading:bi,seoSocialSharingImageId:Ln,socialImageId:kn,title:Ys,url:fi,urlSlug:Cs}))))))}constructor(...Re){super(...Re),ls(this,"filterUrlSlug",Wt=>Wt?(0,J.l6)(Wt):""),ls(this,"linkField",Wt=>({value:this.props[Wt],onChange:_i=>R.Z.updateField(Wt,_i)})),ls(this,"linkFieldText",Wt=>({value:this.props[Wt]||"",onChange:_i=>R.Z.updateField(Wt,_i)})),ls(this,"generateErrorMessage",function(Wt){let _i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,fi=arguments.length>2?arguments[2]:void 0;return(typeof Wt=="string"?Wt.length:0)===_i?fi:null}),ls(this,"getPreviewTitle",()=>{const{collectionTitleFormat:Wt,homepageTitleFormat:_i,itemTitleFormat:fi,isContentItem:Ri,isHomepage:Be,siteTitle:bi,seoTitle:Bi,title:Tn}=this.props;let Ln=Bi;(!Ln||Be)&&(Ln=Tn);const kn=it(bi,Ln,Ri),hi=(0,X.l)(kn);let di;return Ri?di=fi:Be?di=_i:di=Wt,(0,X.q)(hi,kn,di)}),ls(this,"getDescription",()=>{const{isHomepage:Wt,metaDescription:_i,seoDescription:fi}=this.props;return Wt?_i:fi})}}ls(wi,"propTypes",{assetHeight:q().number,assetUrl:q().string,assetWidth:q().number,baseUrl:q().string,categoryPagesSeoHidden:q().bool,collectionTitleFormat:q().string,homepageTitleFormat:q().string,isContentItem:q().bool,isHidden:q().bool,isHomepage:q().bool,isSocialTab:q().bool,itemTitleFormat:q().string,metaDescription:q().string,seoDescription:q().string,seoSocialSharingImageId:q().string,seoTitle:q().string,siteTitle:q().string,socialImageId:q().string,supportsFriendlyUrls:q().bool,tagPagesSeoHidden:q().bool,title:q().string,urlId:q().string,containsSubPages:q().bool}),ls(wi,"childContextTypes",{router:pe.Z,location:q().object});const Fi=wi;var fn=t(829499),ki=t(944481),un=t(35045);const Xn=he=>{const{collectionId:Re,hasThumbnailImage:Wt,isHomepage:_i,seoSocialSharingImageId:fi,socialLogoImageId:Ri,siteLogoId:Be}=he;if(fi)return fi;if(_i&&!Ri&&Be)return Be;if(Wt)return Re;if(Ri)return Ri},ne=he=>{const{assetUrl:Re,originalSize:Wt}=he,[_i,fi]=Wt?Wt.split("x"):[],Ri=_i?Number(_i):0,Be=fi?Number(fi):0;return{assetUrl:Re||"",assetWidth:Ri,assetHeight:Be}},Xe=he=>{const Re=P.Z.getState().get(he);return Re?Re.toJS():{}},Qe=(he,Re,Wt)=>!he&&Re===D().CHRONOLOGICAL&&Wt===B().COLLECTION_TYPE_GENERIC,wt=(he,Re,Wt)=>he?!1:Qe(he,Re,Wt)?!0:Wt===B().PRODUCTS||Re===D().CALENDAR,Hi=A()({getStores(){return[N.default,P.Z,w.Z,un.default]},getPropsFromStores(he){const Re=w.Z.getState(),{isHomepage:Wt,seoSocialSharingImageId:_i,collectionId:fi}=Re,Ri=un.default.getState(),Be=Ri.get("baseUrl")||"",bi=Ri.get("metaDescription")||"",Bi=Ri.get("siteTitle")||"",Tn=Ri.get("socialLogoImageId"),Ln=Ri.get("logoImageId");let kn,hi=!1;he.isContentItem&&(kn=Xe(he.collectionId),hi=!!kn.coverImageUrl);const Cn=Xn({collectionId:fi,hasThumbnailImage:hi,isHomepage:Wt,seoSocialSharingImageId:_i,socialLogoImageId:Tn,siteLogoId:Ln});!P.Z.getState().get(Cn)&&Cn&&x.Z.read.defer(Cn),kn=Xe(Cn);const Qn=kn.items;hi&&Qn&&Qn.length>0&&(kn=Qn[0]);const Rs=ne(kn),cs=fn.default.getState(),Ea=(0,ki.D)(cs.collectionTitleFormat),Ls=(0,ki.D)(cs.homepageTitleFormat),Ys=(0,ki.D)(cs.itemTitleFormat),ea=N.default.getState().get(fi);let Fa=!1,Ps=!1;if(ea){const Us=ea.toJS(),{folder:As,ordering:Wa,type:ta}=Us;Fa=wt(As,Wa,ta),Ps=Qe(As,Wa,ta)}return{...Re,...Rs,baseUrl:Be,collectionTitleFormat:Ea,homepageTitleFormat:Ls,itemTitleFormat:Ys,metaDescription:bi,siteTitle:Bi,socialImageId:Cn,supportsFriendlyUrls:Ps,containsSubPages:Fa}},componentDidConnect(he){let{collectionId:Re,isContentItem:Wt}=he;Re!==w.Z.getState().collectionId&&(Re&&C.Z.recycle(w.Z),Wt?P.Z.fetchFromServer(Re).then(_i=>R.Z.fetchData(_i,!0)):N.default.fetch(Re).then(_i=>R.Z.fetchData(_i)))}},Fi);var Xt=t(998808);const we={Default:{url:(0,e.t)("{presentationName} URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your {presentationName|lower}s automatically, you can optionally create a custom URL for this {presentationName|lower} above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below {presentationName|lower|withIndefiniteArticle}, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter {presentationName|lower|withIndefiniteArticle} title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured {presentationName}",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight {presentationName|lower|withIndefiniteArticle} flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("{presentationName} Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this {presentationName|lower}.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this {presentationName|lower} now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this {presentationName|lower} in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this {presentationName|lower} for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("{presentationName} will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this {presentationName|lower} for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This {presentationName|lower} will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter {presentationName|lower|withIndefiniteArticle} name\u2026",null,{project:"apps.App"})},[(0,e.t)("Text",null,{project:"apps.App"})]:{url:(0,e.t)("Text URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your texts automatically, you can optionally create a custom URL for this text above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below a text, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter a text title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Text",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight a text flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Text Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this text.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this text now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this text in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this text for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Text will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this text for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This text will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter a text name\u2026",null,{project:"apps.App"})},[(0,e.t)("Image",null,{project:"apps.App"})]:{url:(0,e.t)("Image URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your images automatically, you can optionally create a custom URL for this image above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below an image, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter an image title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Image",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight an image flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Image Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this image.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this image now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this image in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this image for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Image will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this image for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This image will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter an image name\u2026",null,{project:"apps.App"})},[(0,e.t)("Quote",null,{project:"apps.App"})]:{url:(0,e.t)("Quote URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your quotes automatically, you can optionally create a custom URL for this quote above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below a quote, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter a quote title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Quote",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight a quote flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Quote Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this quote.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this quote now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this quote in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this quote for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Quote will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this quote for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This quote will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter a quote name\u2026",null,{project:"apps.App"})},[(0,e.t)("Link",null,{project:"apps.App"})]:{url:(0,e.t)("Link URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your links automatically, you can optionally create a custom URL for this link above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below a link, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter a link title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Link",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight a link flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Link Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this link.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this link now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this link in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this link for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Link will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this link for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This link will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter a link name\u2026",null,{project:"apps.App"})},[(0,e.t)("Track",null,{project:"apps.App"})]:{url:(0,e.t)("Track URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your tracks automatically, you can optionally create a custom URL for this track above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below a track, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter a track title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Track",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight a track flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Track Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this track.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this track now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this track in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this track for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Track will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this track for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This track will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter a track name\u2026",null,{project:"apps.App"})},[(0,e.t)("Video",null,{project:"apps.App"})]:{url:(0,e.t)("Video URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your videos automatically, you can optionally create a custom URL for this video above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below a video, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter a video title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Video",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight a video flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Video Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this video.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this video now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this video in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this video for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Video will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this video for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This video will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter a video name\u2026",null,{project:"apps.App"})},[(0,e.t)("Event",null,{project:"apps.App"})]:{url:(0,e.t)("Event URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your events automatically, you can optionally create a custom URL for this event above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below an event, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter an event title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Event",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight an event flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Event Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this event.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this event now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this event in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this event for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Event will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this event for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This event will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter an event name\u2026",null,{project:"apps.App"})},[(0,e.t)("Gallery",null,{project:"apps.App"})]:{url:(0,e.t)("Gallery URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your gallerys automatically, you can optionally create a custom URL for this gallery above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below a gallery, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter a gallery title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Gallery",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight a gallery flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Gallery Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this gallery.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this gallery now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this gallery in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this gallery for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Gallery will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this gallery for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This gallery will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter a gallery name\u2026",null,{project:"apps.App"})},[(0,e.t)("KBArticle",null,{project:"apps.App"})]:{url:(0,e.t)("KBArticle URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your kbArticles automatically, you can optionally create a custom URL for this kbArticle above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below a kbArticle, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter a kbArticle title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured KBArticle",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight a kbArticle flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("KBArticle Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this kbArticle.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this kbArticle now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this kbArticle in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this kbArticle for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("KBArticle will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this kbArticle for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This kbArticle will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter a kbArticle name\u2026",null,{project:"apps.App"})},[(0,e.t)("Digital Product",null,{project:"apps.App"})]:{url:(0,e.t)("Digital Product URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your digital products automatically, you can optionally create a custom URL for this digital product above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below a digital product, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter a digital product title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Digital Product",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight a digital product flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Digital Product Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this digital product.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this digital product now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this digital product in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this digital product for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Digital Product will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this digital product for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This digital product will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter a digital product name\u2026",null,{project:"apps.App"})},[(0,e.t)("Gift Card Product",null,{project:"apps.App"})]:{url:(0,e.t)("Gift Card Product URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your gift card products automatically, you can optionally create a custom URL for this gift card product above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below a gift card product, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter a gift card product title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Gift Card Product",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight a gift card product flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Gift Card Product Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this gift card product.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this gift card product now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this gift card product in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this gift card product for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Gift Card Product will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this gift card product for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This gift card product will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter a gift card product name\u2026",null,{project:"apps.App"})},[(0,e.t)("Physical Product",null,{project:"apps.App"})]:{url:(0,e.t)("Physical Product URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your physical products automatically, you can optionally create a custom URL for this physical product above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below a physical product, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter a physical product title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Physical Product",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight a physical product flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Physical Product Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this physical product.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this physical product now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this physical product in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this physical product for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Physical Product will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this physical product for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This physical product will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter a physical product name\u2026",null,{project:"apps.App"})},[(0,e.t)("Service Product",null,{project:"apps.App"})]:{url:(0,e.t)("Service Product URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your service products automatically, you can optionally create a custom URL for this service product above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below a service product, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter a service product title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Service Product",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight a service product flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Service Product Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this service product.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this service product now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this service product in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this service product for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Service Product will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this service product for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This service product will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter a service product name\u2026",null,{project:"apps.App"})},[(0,e.t)("Post",null,{project:"apps.App"})]:{url:(0,e.t)("Post URL",null,{project:"apps.App"}),whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove:(0,e.t)("While Squarespace generates URLs for your posts automatically, you can optionally create a custom URL for this post above.",null,{project:"apps.App"}),sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading:(0,e.t)("Source URLs are often displayed below a post, to provide attribution or further reading.",null,{project:"apps.App"}),enterTitle:(0,e.t)("Enter a post title\u2026",null,{project:"apps.App"}),featured:(0,e.t)("Featured Post",null,{project:"apps.App"}),someTemplatesAndBlocksWillHighlightFlaggedAsFeatured:(0,e.t)("Some templates and blocks will highlight a post flagged as featured.",null,{project:"apps.App"}),titleShouldLinkToSourceUrl:(0,e.t)("Post Title should link to Source URL",null,{project:"apps.App"}),commentsAreAllowedOnThis:(0,e.t)("Comments are allowed on this post.",null,{project:"apps.App"}),publishThisNow:(0,e.t)("Publish this post now.",null,{project:"apps.App"}),publishThisInTheFuture:(0,e.t)("Publish this post in the future.",null,{project:"apps.App"}),markThisForReview:(0,e.t)("Mark this post for review.",null,{project:"apps.App"}),willBeAddedToReviewQueue:(0,e.t)("Post will be added to review queue.",null,{project:"apps.App"}),saveThisForLaterEditing:(0,e.t)("Save this post for later editing.",null,{project:"apps.App"}),thisWillNotBeVisible:(0,e.t)("This post will not be visible.",null,{project:"apps.App"}),enterName:(0,e.t)("Enter a post name\u2026",null,{project:"apps.App"})}};function Ke(he){return function(Re){let Wt=we[Re.presentationName];return Wt||(Wt=we.Default),Wt[he]}}function ge(he){return{$valueFn:Ke(he)}}var zt=t(989250),Ht=ge,bt=["strong","em","underline","link","divider","align",["blockType",{availableBlockTypes:["p2","h1","h2","h3","code"]}],"divider","blockQuote","orderedList","unorderedList","divider","strikethrough","superscript","subscript","divider","indent","outdent","undo","redo","clearFormatting"];YUI.add("squarespace-content-item-types-settings",function(he){var Re=he.namespace("Squarespace").ContentItemEditorSettings={};Re.fields={},Re.fields.url={ctor:he.Squarespace.DialogFields.Url,config:{name:"urlId",prefix:"{urlPrefix}",filter:p.Z.URL_SLUG_WITH_SLASH,additionalValidators:["optional-on-creation","url-slug-required-if-exists","url-slug-max-length"],"strings.title":Ht("url"),"strings.description":Ht("whileSquarespaceGeneratesUrLsForYourSAutomaticallyYouCanOptionallyCreateACustomUrlForThisAbove"),"strings.placeholder":"\u2026"}},Re.fields.author={ctor:he.Squarespace.DialogFields.Select,config:{name:"authorId",prefix:"","strings.title":(0,e.t)("Author",null,{project:"scripts-v6.content-item-types"}),className:"thin dark",icon:"user",options:{$valueFn:function(Be){var bi=[];if(Static.SQUARESPACE_CONTEXT.memberAccountNames)for(var Bi in Static.SQUARESPACE_CONTEXT.memberAccountNames)bi.push({value:Bi,label:he.Escape.html(Static.SQUARESPACE_CONTEXT.memberAccountNames[Bi].displayName)});else bi.push({value:0,label:(0,e.t)("Automatic",null,{project:"scripts-v6.content-item-types"})});return Be.authorId&&!Static.SQUARESPACE_CONTEXT.memberAccountNames[Be.authorId]&&(Be.author?bi.push({label:he.Escape.html(Be.author.displayName),value:Be.authorId}):bi.push({value:Be.authorId,label:""})),bi}},defaultValue:{$valueFn:function(){return Static.SQUARESPACE_CONTEXT.authenticatedAccount.id}}}},Re.fields.sourceUrl={ctor:he.Squarespace.DialogFields.Text,config:{name:"sourceUrl",strings:{title:(0,e.t)("Source URL",null,{project:"scripts-v6.content-item-types"}),placeholder:(0,e.t)("http://\u2026",null,{project:"scripts-v6.content-item-types"}),description:Ht("sourceUrLsAreOftenDisplayedBelowToProvideAttributionOrFurtherReading")},className:"thin"}},Re.fields.wysiwyg={ctor:he.Squarespace.DialogFields.Wysiwyg,config:{name:"body",editorHeight:227,classNames:"major"}},Re.fields.layout={$when:function(Be){return!Be.disableLayout},ctor:he.Squarespace.DialogFields.Layout,config:{name:"body",contentItem:{$valueFn:function(Be){return Be.model},$dontRecurse:!0},itemClass:{$valueFn:function(Be){return Be.model.name}}}},Re.fields.excerpt={ctor:he.Squarespace.DialogFields.Wysiwyg,config:{newRTEConfig:{ellipsisOptions:["bulletList","numberedList","indentation","divider","blockquote","strikethrough"],placeholder:(0,e.t)("Write here\u2026",null,{project:"scripts-v6.content-item-types"}),toolbarOptions:["undoRedo","aiWriter","divider","textStyleShort","divider","bold","italic","underline","link","divider","textAlign","ellipsis","divider","clearFormatting"],toolbarProps:{isInModal:!0},trackingProductArea:"page-editor",trackingProductAreaLevel2:"options-excerpt"},name:"excerpt",toolbarOptions:bt,type:_.rg.CLASSIC,editorHeight:147,classNames:"major",title:(0,e.t)("Excerpt",null,{project:"scripts-v6.content-item-types"}),"strings.title":(0,e.t)("Excerpt",null,{project:"scripts-v6.content-item-types"}),description:(0,e.t)("Excerpts are used most often on the {collectionType|lower} list page.",null,{project:"scripts-v6.content-item-types"}),preserveWhitespace:!1,isNullable:!0}},Re.fields.mainImage={ctor:{$valueFn:function(Be){return Be.recordType===u().STORE_ITEM?he.Squarespace.DialogFields.FileImage:he.Squarespace.DialogFields.FileImageLicensed}},config:{contentType:"image",name:"mainImage",width:250,height:250,square:!0,imageDestination:Gt.Z.CONTENT_ITEM_MAIN_IMAGE,mode:v.Z.ITEM,strings:{title:(0,e.t)("Featured Image",null,{project:"scripts-v6.content-item-types"})},asyncUploadUrlFn:{$valueFn:function(Be){return Be.model.getMainImageUploadUrl.bind(Be.model)}},preflight:{$valueFn:function(Be){var bi=Be.model;return function(Bi){bi.get("id")?Bi():(bi.once("save",function(){var Tn=Be.editor.get("dialog").getField("mainImage");bi.getMainImageUploadUrl(function(Ln){Tn.uploader.set("uploadURL",Ln),Bi()})},bi),Be.editor.autoSave())}}}}},Re.fields.clickthroughUrl={ctor:he.Squarespace.DialogFields.CreateLink,config:{name:"clickthroughUrl","strings.title":(0,e.t)("Clickthrough URL",null,{project:"scripts-v6.content-item-types"}),disableNewWindow:!0}},Re.fields.title={ctor:he.Squarespace.DialogFields.Text,countHeight:!0,config:{name:"title",className:"large","strings.placeholder":Ht("enterTitle"),escapeText:!0},$when:function(Be){return!Be.disableTitle}},Re.fields.childItemsGrid={ctor:he.Squarespace.DialogFields.ContentItemGrid,config:{name:"gallery",width:300,height:340,contentItemImageOptions:{showWorkflowState:!1,showActionOverlay:!0,actionOverlayButtons:[he.Squarespace.ActionOverlayButtons.EDIT_IMAGE,he.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]},showActionTray:!1,acceptTypes:["image","video"],uploadPreflight:{$valueFn:function(Be){var bi=Be.model;return function(Bi){bi.get("id")?Bi():(bi.once("save",function(){Bi()},bi),Be.editor.autoSave())}}}}},Re.fields.tags={ctor:he.Squarespace.DialogFields.Stringset,config:{mode:"input",requestUrl:"/api/commondata/GetAutoCompleteTags",name:"tags",title:(0,e.t)("Tags",null,{project:"scripts-v6.content-item-types"}),maxMemberChars:f.Z.MAX_TAG_LENGTH,addText:(0,e.t)("Click to add tags.",null,{project:"scripts-v6.content-item-types"}),emptyText:(0,e.t)("No tags added.",null,{project:"scripts-v6.content-item-types"}),memberClass:"tag",editorLabel:(0,e.t)("Add Tags",null,{project:"scripts-v6.content-item-types"}),description:(0,e.t)("Click to edit tags.",null,{project:"scripts-v6.content-item-types"}),collectionId:"{collectionId}"}},Re.fields.categories={ctor:he.Squarespace.DialogFields.Stringset,config:{mode:"select",name:"categories",title:(0,e.t)("Categories",null,{project:"scripts-v6.content-item-types"}),requestUrl:"/api/commondata/GetCollectionCategories",maxMemberChars:f.Z.MAX_CATEGORY_LENGTH,addText:(0,e.t)("Click to add categories.",null,{project:"scripts-v6.content-item-types"}),emptyText:(0,e.t)("No categories added.",null,{project:"scripts-v6.content-item-types"}),memberClass:"category",editorLabel:(0,e.t)("Pick Categories",null,{project:"scripts-v6.content-item-types"}),description:(0,e.t)("Click to choose categories.",null,{project:"scripts-v6.content-item-types"}),canAddMembers:!0,addMemberText:(0,e.t)("Create Category",null,{project:"scripts-v6.content-item-types"}),collectionId:"{collectionId}"}},Re.fields.productVariantsPricingPlaceholder={ctor:he.Squarespace.DialogFields.VariantsPricingPlaceholder,config:{name:"pricingPlaceholder","strings.title":(0,e.t)("Pricing & Variants",null,{project:"scripts-v6.content-item-types"})}},Re.fields.productDigitalPricingPlaceholder={ctor:he.Squarespace.DialogFields.DigitalPricingPlaceholder,config:{name:"pricingPlaceholder","strings.title":(0,e.t)("Pricing",null,{project:"scripts-v6.content-item-types"})}},Re.fields.productGiftCardPricingPlaceholder={ctor:he.Squarespace.DialogFields.GiftCardPricingPlaceholder,config:{name:"pricingPlaceholder","strings.title":(0,e.t)("Values",null,{project:"scripts-v6.content-item-types"})}},Re.fields.featured={ctor:he.Squarespace.DialogFields.Check,name:"starred",config:{"strings.title":Ht("featured"),"strings.description":Ht("someTemplatesAndBlocksWillHighlightFlaggedAsFeatured")}},Re.fields.passthrough={ctor:he.Squarespace.DialogFields.Check,name:"passthrough",config:{"strings.title":Ht("titleShouldLinkToSourceUrl")}},Re.groups={type:"splitter"},Re.groups.tagging={type:"stack",fields:[{$include:"fields.tags"},{$include:"fields.categories"}]},Re.groups.commenting={ctor:he.Squarespace.DialogFields.LegacyStateflow,config:{name:"commenting",allowNever:!0,states:{allow:{title:(0,e.t)("Comments On",null,{project:"scripts-v6.content-item-types"}),optionDesc:Ht("commentsAreAllowedOnThis"),stateDesc:(0,e.t)("Disable comments ||DURATION||.",null,{project:"scripts-v6.content-item-types",notes:'Used in the publishing workflow of 7.0 sites when setting the scheduled future time that comments will be disabled. E.g. "Disable comments now" or "Disable comments in 2 days at 4:00 PM". ||DURATION|| is a placeholder and should not be translated.'})},disable:{title:(0,e.t)("Comments Off",null,{project:"scripts-v6.content-item-types"}),optionDesc:(0,e.t)("No comments allowed.",null,{project:"scripts-v6.content-item-types"}),stateDesc:(0,e.t)("No comments allowed.",null,{project:"scripts-v6.content-item-types"})}},stateOrder:["allow","disable"]}},Re.groups.publishingWorkflow={ctor:he.Squarespace.DialogFields.LegacyStateflow,config:{name:"workflow",states:{published:{title:(0,e.t)("Published",null,{project:"scripts-v6.content-item-types"}),optionDesc:Ht("publishThisNow"),stateDesc:(0,e.t)("Published on ||DATE||.",null,{project:"scripts-v6.content-item-types",notes:"Used in the publishing workflow of 7.0 sites when setting the published date of a post. ||DATE|| is a placeholder and should not be translated."})},scheduled:{title:(0,e.t)("Scheduled",null,{project:"scripts-v6.content-item-types"}),optionDesc:Ht("publishThisInTheFuture"),stateDesc:(0,e.t)("Publish ||DURATION||.",null,{project:"scripts-v6.content-item-types",notes:'Used in the publishing workflow of 7.0 sites when setting the scheduled publish date of a post in the future. E.g. "Publish now" or "Publish in 2 days at 4:00 PM". ||DURATION|| is a placeholder and should not be translated.'})},needsreview:{title:(0,e.t)("Needs Review",null,{project:"scripts-v6.content-item-types"}),optionDesc:Ht("markThisForReview"),stateDesc:Ht("willBeAddedToReviewQueue")},draft:{title:(0,e.t)("Draft",null,{project:"scripts-v6.content-item-types"}),optionDesc:Ht("saveThisForLaterEditing"),stateDesc:Ht("thisWillNotBeVisible")}},stateOrder:["published","scheduled","needsreview","draft"]}},Re.tabs={},Re.tabs.primary={},Re.tabs.primary.base={tabTitle:(0,e.t)("Content",null,{project:"scripts-v6.content-item-types"}),fields:[{type:"splitter",countHeight:!0,fields:[{$include:["groups.tagging",{width:.36}],$update:{tags:{style:"thin"}}},{$include:"groups.commenting",$concat:!0,$update:{".commenting":{width:.29},statepicker:{direction:"up",style:"minor"}}},{$include:"groups.publishingWorkflow",$concat:!0,$update:{".workflow":{width:.35},statepicker:{direction:"up",style:"minor"}}}]}]},Re.tabs.primary.text={icon:(0,E.m_)("text",24,"light-solid"),fields:[{$include:"fields.title"},{$include:["fields.layout",{verticalSpan:!0}]}]},Re.tabs.primary.image={icon:(0,E.m_)("image",24,"light-solid"),fields:[{type:"splitter",fields:[{ctor:he.Squarespace.DialogFields.FileImageLicensed,config:{height:248,width:.35,constrainMethod:"contain",contentType:"image",mode:v.Z.ITEM,name:"mainImage",uploadMessage:(0,e.t)("Add a Featured Image",null,{project:"scripts-v6.content-item-types"}),title:"",description:"",imageDestination:Gt.Z.CONTENT_ITEM_MAIN_IMAGE,asyncUploadUrlFn:{$valueFn:function(Be){return Be.model.getMainImageUploadUrl.bind(Be.model)}}}},{type:"stack",width:.65,fields:[{$include:["fields.title",{"config.strings.placeholder":(0,e.t)("Title",null,{project:"scripts-v6.content-item-types"})}]},{$include:["fields.wysiwyg",{"config.editorHeight":322}]}]}]}]},Re.tabs.primary.quote={icon:(0,E.m_)("quote",24,"light-solid"),fields:[{type:"textarea",name:"quote",height:140,countHeight:!0,title:(0,e.t)("Enter a quote\u2026",null,{project:"scripts-v6.content-item-types"}),titleStyle:"inline",style:"title"},{ctor:he.Squarespace.DialogFields.Wysiwyg,config:{name:"body",toolbarOptions:bt,type:_.rg.CLASSIC,editorHeight:227,classNames:"major"}}]},Re.tabs.primary.link={icon:(0,E.m_)("link",24,"light-solid"),fields:[{$include:["fields.title",{"config.strings.placeholder":(0,e.t)("Enter a link title\u2026",null,{project:"scripts-v6.content-item-types"})}]},{$include:["fields.title",{"config.name":"url","config.strings.placeholder":(0,e.t)("Enter a link URL\u2026",null,{project:"scripts-v6.content-item-types"})}]},{$include:["fields.layout",{verticalSpan:!0}]}]},Re.tabs.primary.video={icon:(0,E.m_)("video",24,"light-solid"),fields:[{type:"splitter",fields:[{type:"stack",width:.3,fields:[{ctor:he.Squarespace.DialogFields.Description,config:{name:"customThumbDescription",text:(0,e.t)("<strong>Custom Thumbnail</strong> Upload an image to be used with the image overlay.",null,{project:"scripts-v6.content-item-types"})}},{$include:["fields.mainImage",{"strings.title":"","config.height":220,"config.width":220,"config.contentLabel":(0,e.t)("video thumbnail",null,{project:"scripts-v6.content-item-types"})}]},{ctor:he.Squarespace.DialogFields.Description,config:{name:"automaticThumbDescription",text:""}},{name:"overlay",ctor:he.Squarespace.DialogFields.Check,config:{"strings.title":(0,e.t)("Use Thumbnail",null,{project:"scripts-v6.content-item-types"})}}]},{type:"stack",width:.7,fields:[{ctor:he.Squarespace.DialogFields.Oembed,config:{name:"oembed",filter:"video","strings.description":(0,e.t)("<strong>Paste the URL</strong> of a video (Vimeo, YouTube, Animoto, Wistia, etc.) you'd like to embed, and Squarespace will attempt to locate and format this video for your site.",null,{project:"scripts-v6.content-item-types"})}},{$include:"fields.title"},{$when:function(Be){return Re.tabs.primary.video.isLayoutField(Be.body)},$include:["fields.layout",{height:190}]},{$when:function(Be){return!Re.tabs.primary.video.isLayoutField(Be.body)},$include:["fields.wysiwyg",{ctor:he.Squarespace.DialogFields.Wysiwyg,config:{name:"body",editorHeight:217,classNames:"major"}}]}]}]}],isLayoutField:function(Be){return he.Lang.isValue(Be)&&he.Lang.isValue(Be.layout)||Static.SQUARESPACE_CONTEXT.website.id==="4fa14d3ce4b08a53fa26468e"}},Re.tabs.primary.event={icon:(0,E.m_)("event",32,"light-solid"),fields:[{$include:["fields.title",{title:(0,e.t)("Enter a event title..",null,{project:"scripts-v6.content-item-types"})}]},{type:"splitter",countHeight:!0,fields:[{ctor:he.Squarespace.DialogFields.DateTimePicker,config:{name:"startDate",direction:"down",width:.5,"strings.title":"","strings.description":(0,e.t)("Start on ||DATE||.",null,{project:"scripts-v6.content-item-types",notes:"Used in the publishing workflow of 7.0 sites when setting the start date of an event. ||DATE|| is a placeholder and should not be translated."}),dateFormat:{skeleton:"yMMMEd",time:"short"}}},{ctor:he.Squarespace.DialogFields.DateTimePicker,config:{name:"endDate",direction:"down",width:.5,dateFormat:{skeleton:"yMMMEd",time:"short"},"strings.title":"","strings.description":(0,e.t)("End on ||DATE||.",null,{project:"scripts-v6.content-item-types",notes:"Used in the publishing workflow of 7.0 sites when setting the end date of an event. ||DATE|| is a placeholder and should not be translated."}),"strings.errorMessage":(0,e.t)("End time must be later than start time.",null,{project:"scripts-v6.content-item-types"}),validator:function(Be){var bi=Be,Bi=this.get("dialog").getField("startDate").get("data");if(bi===null)return!0;var Tn=1e3*Math.floor(Bi/1e3),Ln=1e3*Math.floor(bi/1e3);return!(Ln<Tn)}}}]},{$include:["fields.layout",{verticalSpan:!0}]}]},Re.tabs.primary.gallery={icon:(0,E.m_)("gallery",24,"light-solid"),fields:[{$include:"fields.title"},{$include:["fields.childItemsGrid",{"config.width":739,"config.height":135}]},{$include:["fields.layout",{height:150}]}]},Re.tabs.primary.audio={icon:(0,E.m_)("audio",24,"light-solid"),fields:[{type:"splitter",height:600,fields:[{type:"stack",width:.35,fields:[{ctor:he.Squarespace.DialogFields.FileAudio,disableEdit:{$valueFn:function(Be){return he.Lang.isValue(Be.model.get("proxyForId"))}},height:248,constrainMethod:"contain",contentType:"audio",mode:v.Z.ITEM,name:"audioTrack",uploadMessage:(0,e.t)("Add an audio track",null,{project:"scripts-v6.content-item-types"})},{$include:["fields.title",{"config.name":"artistName","config.strings.title":(0,e.t)("Artist Name",null,{project:"scripts-v6.content-item-types"}),"config.strings.placeholder":(0,e.t)("Enter an artist name\u2026",null,{project:"scripts-v6.content-item-types"}),"config.className":"thin","config.submitOnEnter":!0}]}]},{type:"stack",width:.65,height:600,fields:[{$include:["fields.title",{"config.submitOnEnter":!0,"config.strings.placeholder":Ht("enterTitle")}]},{ctor:he.Squarespace.DialogFields.Wysiwyg,config:{newRTEConfig:{placeholder:(0,e.t)("Write here\u2026",null,{project:"scripts-v6.content-item-types"}),toolbarOptions:["aiWriter","divider","bold","italic","link","clearFormatting"],toolbarProps:{isInModal:!0},trackingProductArea:"pages-panel",trackingProductAreaLevel2:"new-album-track-settings-description"},classNames:"major",name:"body",editorHeight:300,isNullable:!0}}]}]}]},Re.tabs.primary.product={},Re.tabs.primary.product.base={icon:(0,E.m_)("products",32,"light"),fields:[{type:"splitter",fields:[{type:"stack",width:.33,fields:[{$include:["fields.childItemsGrid",{"config.height":392,"config.contentItemImageOptions.actionOverlayButtons":[he.Squarespace.ActionOverlayButtons.IMAGE_INFO,he.Squarespace.ActionOverlayButtons.EDIT_IMAGE,he.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]}]}]},{type:"stack",width:.67,verticalSpan:!0,fields:[{$include:["fields.title",{"config.strings.placeholder":Ht("enterName")}]},{name:"pricingPlaceholder"},{type:"stack",float:"none",fields:[{ctor:he.Squarespace.DialogFields.Check,config:{name:"isSubscribable","strings.title":(0,e.t)("Subscription Product",null,{project:"scripts-v6.content-item-types"}),"strings.description":(0,e.t)("Charges customers on a recurring basis.",null,{project:"scripts-v6.content-item-types"})+" <a href="+ke.COMMERCE_SUBSCRIPTIONS+' target="_blank"class="learn-more-link" onclick="event.stopPropagation();">'+(0,e.t)("Learn more",null,{project:"scripts-v6.content-item-types"})+"</a>"},$when:function(Be){return Xt.iv(Be.structuredContent.productType)}},{ctor:he.Squarespace.DialogFields.SubscriptionDetailsPlaceholder,config:{name:"subscriptionDetails"},$when:function(Be){return Xt.iv(Be.structuredContent.productType)}}]},{ctor:he.Squarespace.DialogFields.Wysiwyg,config:{name:"excerpt",toolbarOptions:bt,type:_.rg.CLASSIC,editorHeight:156,classNames:"major",title:(0,e.t)("Brief Description",null,{project:"scripts-v6.content-item-types"})}}]}]},{type:"splitter",fields:[{$include:["groups.tagging",{width:.39}]},{ctor:he.Squarespace.DialogFields.LegacyStateflow,direction:"up",style:"minor",name:"workflow",width:.5,states:{published:{title:(0,e.t)("Visible",null,{project:"scripts-v6.content-item-types"}),optionDesc:(0,e.t)("Currently visible in your storefront.",null,{project:"scripts-v6.content-item-types"}),stateDesc:(0,e.t)("Made visible on ||DATE||.",null,{project:"scripts-v6.content-item-types",notes:"Used in the publishing workflow of 7.0 sites when setting the visibility date of a product. ||DATE|| is a placeholder and should not be translated."})},scheduled:{title:(0,e.t)("Scheduled",null,{project:"scripts-v6.content-item-types"}),optionDesc:(0,e.t)("Remains hidden from your storefront until scheduled date.",null,{project:"scripts-v6.content-item-types"}),stateDesc:(0,e.t)("Will be visible ||DURATION||.",null,{project:"scripts-v6.content-item-types",notes:'Used in the publishing workflow of 7.0 sites when setting the scheduled visibility date of a product in the future. E.g. "Will be visible now" or "Will be visible in 2 days at 4:00 PM". ||DURATION|| is a placeholder and should not be translated.'})},draft:{title:(0,e.t)("Hidden",null,{project:"scripts-v6.content-item-types"}),optionDesc:(0,e.t)("Not visible in your storefront.",null,{project:"scripts-v6.content-item-types"}),stateDesc:(0,e.t)("Not visible in your storefront.",null,{project:"scripts-v6.content-item-types"})}},stateOrder:["published","scheduled","draft"]}]}]},Re.tabs.product={},Re.tabs.product.variantsPhysical={tabTitle:(0,e.t)("Pricing & Variants",null,{project:"scripts-v6.content-item-types"}),name:"variants_tab",fields:[{ctor:he.Squarespace.DialogFields.VariantsTable,config:{name:"variants",isPhysical:!0,measurementStandard:{$valueFn:function(){return he.Squarespace.Context.getInstance().get("websiteSettings").get("storeSettings").measurementStandard}},productModel:{$valueFn:function(Be){if(Be)return Be.model},$dontRecurse:!0}}}]},Re.tabs.product.variantsService={tabTitle:(0,e.t)("Pricing & Variants",null,{project:"scripts-v6.content-item-types"}),name:"variants_tab",fields:[{ctor:he.Squarespace.DialogFields.VariantsTable,config:{name:"variants",isPhysical:!1,productModel:{$valueFn:function(Be){if(Be)return Be.model},$dontRecurse:!0}}}]},Re.tabs.product.variantsGiftCard={tabTitle:(0,e.t)("Values",null,{project:"scripts-v6.content-item-types"}),name:"values_tab",fields:[{ctor:he.Squarespace.DialogFields.VariantsTable,config:{name:"variants",isPhysical:!1,isGiftCard:!0,productModel:{$valueFn:function(Be){if(Be)return Be.model},$dontRecurse:!0}}}]},Re.tabs.product.upload={tabTitle:(0,e.t)("Pricing & Upload",null,{project:"scripts-v6.content-item-types"}),name:"variants_tab",fields:[{type:"splitter",fields:[{ctor:he.Squarespace.DialogFields.File,config:{name:"digitalGoods",title:(0,e.t)("Digital Goods",null,{project:"scripts-v6.content-item-types"}),contentType:"file",recordType:u().DIGITALGOOD,childAsset:!0,mode:v.Z.CHILD,maxSize:300,childType:r.DIGITAL_GOODS,constrainMethod:"contain",height:200,width:.27,description:(0,e.t)("Customers will receive this file after purchase.",null,{project:"scripts-v6.content-item-types"}),preflight:{$valueFn:function(Be){var bi=Be.model;return function(Bi){var Tn=Be.editor,Ln=Tn.get("dialog").getField("digitalGoods"),kn=function(){var hi=Ln.get("data");hi&&hi.set("parentId",bi.get("id")),Ln.refreshItemPostData(),Ln.set("uploadUrl","/api/content/product-pages/"+bi.get("collectionId")+"/products/"+bi.get("id")+"/digital-good")};bi.get("id")?(kn(),bi.clearChildGroup("digitalGoods",Bi)):(bi.once("save",function(){kn(),Bi&&Bi()}),Tn.autoSave())}}}}},{type:"stack",width:.5,fields:[{ctor:he.Squarespace.DialogFields.MoneyText,width:.5,name:"priceCents","strings.title":(0,e.t)("Price",null,{project:"scripts-v6.content-item-types"})},{ctor:he.Squarespace.DialogFields.MoneyText,width:.5,name:"salePriceCents","strings.title":(0,e.t)("Sale Price",null,{project:"scripts-v6.content-item-types"})},{ctor:he.Squarespace.DialogFields.Check,width:.5,name:"onSale",config:{"strings.title":(0,e.t)("On Sale",null,{project:"scripts-v6.content-item-types"}),"strings.description":(0,e.t)("Charge customers the sale price.",null,{project:"scripts-v6.content-item-types"})}}]}]}]},Re.tabs.product.additionalInfo={tabTitle:(0,e.t)("Additional Info",null,{project:"scripts-v6.content-item-types"}),name:"additionalInfo",fields:[{ctor:he.Squarespace.DialogFields.Description,config:{title:(0,e.t)("Additional Info",null,{project:"scripts-v6.content-item-types"}),text:(0,e.t)("Put additional info on your product page: a longer description, videos, or other content.",null,{project:"scripts-v6.content-item-types"}),padding:[0,10]}},{$include:["fields.layout",{height:310}]}]},Re.tabs.product.workflow={tabTitle:(0,e.t)("Form",null,{project:"scripts-v6.content-item-types"}),name:"workflow",fields:[{type:"splitter",fields:[{ctor:he.Squarespace.DialogFields.Description,config:{width:.5,name:"additionalInformationDescription",title:(0,e.t)("Collect Additional Information",null,{project:"scripts-v6.content-item-types"}),text:(0,e.t)("Create a Product Form that shoppers will be prompted to fill out when adding this product to their cart. You can create a new custom Product Form for this product or select to apply an existing Product Form you have created for other products.",null,{project:"scripts-v6.content-item-types"})}},{ctor:he.Squarespace.DialogFields.FormSelector,config:{width:.5,name:"additionalFieldsFormId",formType:g().PRODUCT}}]}]},Re.tabs.options={},Re.tabs.options.default={tabTitle:(0,e.t)("Options",null,{project:"scripts-v6.content-item-types"}),name:"options",scroll:!0,fields:[{type:"splitter",countHeight:!0,fields:[{$include:["fields.mainImage",{width:.4}]},{type:"stack",width:.6,fields:[{$include:"fields.url"},{$include:"fields.author"},{$include:"fields.sourceUrl"},{$include:"fields.passthrough",$when:function(Be){return Be.enablePassthrough}}]}]},{$include:"fields.excerpt",$when:function(Be){return Be.enableExcerpt}},{$include:"fields.featured",$when:function(Be){return Be.enableFeatured}}]},Re.tabs.options.image=he.merge(Re.tabs.options.default,{fields:[{type:"splitter",fields:[{type:"stack",fields:[{$include:["fields.url",{width:.6}]},{$include:["fields.author",{width:.4}]},{type:"splitter",fields:[{$include:["fields.sourceUrl",{"config.width":420}]},{$include:["fields.clickthroughUrl",{"config.width":284}]}]},{$include:"fields.featured"}]}]}]}),Re.tabs.options.video=Re.tabs.options.audio=he.merge(Re.tabs.options.default,{fields:[{$include:"fields.url"},{$include:"fields.author"},{$include:"fields.sourceUrl"},{$include:"fields.featured",$when:function(Be){return Be.enableFeatured}}]}),Re.tabs.options.product=he.merge(Re.tabs.options.default,{fields:[{type:"splitter",fields:[{$include:["fields.mainImage",{width:.35}]},{type:"stack",width:.65,fields:[{$include:["fields.url",{title:(0,e.t)("Product URL",null,{project:"scripts-v6.content-item-types"}),config:{name:"urlId",prefix:"{urlPrefix}",filter:p.Z.URL_SLUG_WITH_SLASH,"strings.title":(0,e.t)("Product URL",null,{project:"scripts-v6.content-item-types"}),"strings.description":(0,e.t)("While Squarespace generates URLs for your products automatically, you can optionally create a custom URL.",null,{project:"scripts-v6.content-item-types"}),"strings.placeholder":"\u2026"}}]},{ctor:he.Squarespace.DialogFields.Check,config:{name:"useCustomAddButtonText","strings.title":(0,e.t)("Use Custom Add Button Label",null,{project:"scripts-v6.content-item-types"}),"strings.description":(0,e.t)('Default button label is "Add To Cart" and "Purchase" when express checkout is enabled.',null,{project:"scripts-v6.content-item-types"})}},{ctor:he.Squarespace.DialogFields.Text,config:{name:"customAddButtonText"}},{ctor:he.Squarespace.DialogFields.Check,name:"starred",config:{"strings.title":(0,e.t)("Featured Product",null,{project:"scripts-v6.content-item-types"}),"strings.description":(0,e.t)('Some templates and blocks will highlight products marked as "featured".',null,{project:"scripts-v6.content-item-types"})}}]}]}]}),Re.tabs.location={tabTitle:(0,e.t)("Location",null,{project:"scripts-v6.content-item-types"}),name:"Location",fields:[{type:"splitter",fields:[{ctor:he.Squarespace.DialogFields.Map,config:{name:"location",title:(0,e.t)("Enter a location\u2026",null,{project:"scripts-v6.content-item-types"}),titleStyle:"inline",height:400,googleTrackingContext:{productPage:"location-tab",productSection:"panel"}}}]}]};var Wt={type:"splitter",fields:[{ctor:he.Squarespace.DialogFields.Description,config:{title:(0,e.t)("Social",null,{project:"scripts-v6.content-item-types"}),text:(0,e.t)("Select the accounts below you would like to update when you post this item.",null,{project:"scripts-v6.content-item-types"})}},{name:"shareStates",ctor:he.Squarespace.DialogFields.ItemPush,config:{pushedServices:{$valueFn:function(Be){return Be.pushedServices}},published:{$valueFn:function(Be){return Be.workflowState===n().PUBLISHED}},pendingPushedServices:{$valueFn:function(Be){return Be.pendingPushedServices}},models:{$valueFn:function(){return he.Squarespace.Models.ConnectedAccounts.loadFromStore()},$dontRecurse:!0},recordType:{$valueFn:function(Be){return Be.model?Be.model.get("recordType"):null}}}}]};Re.tabs.social={tabTitle:(0,e.t)("Share",null,{project:"scripts-v6.content-item-types"}),name:"social",scroll:!0,fields:[Wt]};var _i={ctor:he.Squarespace.DialogFields.ReactDialogField,config:{component:y.Z,name:"createEmailDraftComponent",props:{model:{$valueFn:function(Be){return Be.model.toJSON()}}}}};Re.tabs.share={tabTitle:(0,e.t)("Share",null,{project:"scripts-v6.content-item-types"}),name:"share",fields:[_i,Wt]};function fi(Be){return Be===""}function Ri(){var Be=w.Z.getState(),bi={seoDescription:Be.seoDescription,seoImageId:Be.seoSocialSharingImageId,seoTitle:Be.seoTitle,seoHidden:Be.isHidden};return bi=o()(bi,fi),{isDirty:Be.isDirty,seoData:bi}}Re.tabs.seo={tabTitle:(0,e.t)("SEO",null,{project:"scripts-v6.editor"}),name:"seo",reactData:{component:Hi,props:{collectionId:{$valueFn:function(Be){return Be.id}},getData:{$valueFn:function(){return Ri}},isContentItem:!0}}},Re.tabs.seoSocial={tabTitle:(0,e.t)("Social",null,{project:"scripts-v6.editor"}),name:"seoSocial",reactData:{component:Hi,props:{collectionId:{$valueFn:function(Be){return Be.id}},getData:{$valueFn:function(){return Ri}},isContentItem:!0,isSocialTab:!0}}},Re.buttons=[{type:"cancel",title:(0,e.t)("Cancel",null,{project:"scripts-v6.content-item-types"})},{type:"remove",title:(0,e.t)("Delete",null,{project:"scripts-v6.content-item-types"})},{$value:{type:"duplicate",title:(0,e.t)("Duplicate",null,{project:"scripts-v6.content-item-types"})},$when:function(Be){var bi=Be.editor&&Be.editor.get("editorConfiguration")||{};if((0,zt.V)(Be)===m.J.EVENT_ITEM&&(0,S.L)())return!1;var Bi=bi.minimal!==!0,Tn=he.Lang.isString(Be.id);return Bi&&Tn}},{type:"saveAndClose",title:{$valueFn:function(Be){return Be.onlySetAttrsOnSave?(0,e.t)("Apply",null,{project:"scripts-v6.content-item-types"}):(0,e.t)("Save",null,{project:"scripts-v6.content-item-types"})}}},{$value:{type:"saveAndPublish",className:"saveAndPublish",title:(0,e.t)("Save & Publish",null,{project:"scripts-v6.content-item-types"})},$when:function(Be){return Be.onlySetAttrsOnSave?!1:[n().DRAFT,n().NEEDS_REVIEW].indexOf(Be.workflowState)!==-1}}]},"1.0",{requires:["squarespace-context","squarespace-dialog-check","squarespace-dialog-content-item-grid","squarespace-dialog-create-link","squarespace-dialog-datetime-picker","squarespace-dialog-description","squarespace-dialog-digital-pricing-placeholder","squarespace-dialog-giftcard-pricing-placeholder","squarespace-dialog-subscription-details-placeholder","squarespace-dialog-fields","squarespace-dialog-file-audio","squarespace-dialog-file-image","squarespace-dialog-file-image-licensed","squarespace-dialog-form-builder","squarespace-dialog-form-preview","squarespace-dialog-form-selector","squarespace-dialog-html","squarespace-dialog-item-push","squarespace-dialog-layout","squarespace-dialog-legacy-stateflow","squarespace-dialog-map","squarespace-dialog-money-text","squarespace-dialog-oembed","squarespace-dialog-pricing-placeholder","squarespace-dialog-select","squarespace-dialog-stringset","squarespace-dialog-text","squarespace-dialog-text-area","squarespace-dialog-wysiwyg","squarespace-models-connected-accounts","squarespace-react-dialog-field","squarespace-tab-view"]})},262308:function(c,b,t){"use strict";var l=t(714487),d=t(759352),o=t(237084),e=t(770500),a=t.n(e),r=t(44348),s=t.n(r),n=t(824476),i=t(916661),u=t(337061),h=t(938077);YUI.add("squarespace-content-item-types-text",function(g){g.namespace("Squarespace.ContentItemEditor");var p={title:(0,l.t)("Edit {presentationName}",null,{project:"scripts-v6.content-item-types"}),width:750,name:"text-post-editor",overlay:.5,verticalHeight:"full",initialDataByReference:!0,tabs:[{$include:["tabs.primary.base","tabs.primary.text"]},{$include:"tabs.options.default"},{$include:"tabs.seo"},{$include:"tabs.seoSocial"},{$include:"tabs.share"},{$include:"tabs.location"}],buttons:{$include:"buttons"}},f=g.namespace("Squarespace.ContentItemEditor").Text=g.Base.create("TextContentItemEditor",g.Squarespace.ContentItemEditor.Base,[],{_dialogOnReady:function(){f.superclass._dialogOnReady.apply(this,arguments);var m=this.get("dialog"),_=this.get("model"),v=_.get("workflowState");_.get("autoSaved")&&this._bindTitleToPostUrl();var E=m.getField("title"),S=(0,u.d6)(),y=(0,h.FWA)(a().CAMPAIGNS_BLOG_TO_EMAIL_MODAL)(S);E.after("dataChange",this._updateSeoTitle,this),v===s().DRAFT&&!y&&m.on(["button-saveAndClose","button-saveAndPublish"],this._showBlogToEmailToast,this)},_updateSeoTitle:function(m){n.Z.updateFieldNoEdit("title",m.newVal)},_bindTitleToPostUrl:function(){var m=this.get("dialog"),_=m.getField("title"),v=m.getField("urlId");_&&v&&(_.on("dataChange",function(E){var S=v.get("data").split("/");S[S.length-1]=(0,d.l6)(E.newVal),v.set("data",S.join("/"))},this),m.once(["close","dismiss"],function(E){this.get("model").set("autoSaved",!1)},this))},_removeItem:function(m){this.set("onlySetAttrsOnSave",!0),this.save(null,function(){m.set("workflowState",s().DELETED),m.save()}),this.set("onlySetAttrsOnSave",!1)},getPresentationName:function(){return(0,l.t)("Post",null,{project:"scripts-v6.content-item-types"})},_getTemplateContext:function(){var m=f.superclass._getTemplateContext.call(this);return m.enableFeatured=!0,m.enablePassthrough=!0,m.enableExcerpt=!0,m},_showBlogToEmailToast:function(){var m=this.get("model");m.once("save",function(){var _=m.toJSON();_.workflowState===s().PUBLISHED&&o.Z.showDraftCreationModal({id:_.id,collectionId:_.collectionId,postUrl:_.fullUrl})})},_confirmAndDuplicate:function(){if(!i.Z.isSevenOne())return f.superclass._confirmAndDuplicate.apply(this,arguments)}},{ATTRS:{editorConfiguration:{value:p},"strings.errorTitle":{value:(0,l.t)("Error Saving",null,{project:"scripts-v6.content-item-types"})}}})},"1.0",{requires:["squarespace-content-item-types-base","squarespace-content-item-types-post-editors"]})},523144:function(c,b,t){"use strict";var l=t(714487),d=t(868796),o=t(553772);YUI.add("squarespace-content-item-types-video",function(e){var a=e.Base.create("VideoPostEditorBehavior",e.Base,[],{initializer:function(){var u=this.get("model");if(u.get("recordType")===e.Squarespace.Enums.RecordType.VIDEO){var h=this.get("dialog"),g;h.on("ready",function(){var p=h.getField("oembed"),f=h.getField("mainImage"),m=h.getField("title"),_=h.getField("sourceUrl");p.focus(),p.on("dataChange",function(v){_&&_.set("data",v.newVal.url),m.set("data",v.newVal.title),g&&g.cancel(),g=e.later(1e3,this,function(){var E=v.newVal;if(E.thumbnailUrl)if(u.get("id"))E.thumbnailUrl&&this._applyDefaultThumbnailImage();else{u.autoSave();var S=h.getField("mainImage");S.get("data").after("idChange",function(){this._applyDefaultThumbnailImage()},this)}})},this),f.after("dataChange",this._syncThumbnailRestore,this),this._syncThumbnailRestore()},this)}},_applyDefaultThumbnailImage:function(){var u=this.get("dialog"),h=u.getField("oembed").getValue().thumbnailUrl;u.getField("mainImage").saveFromUrl(h),u.getField("overlay").set("data",!0)},_syncThumbnailRestore:function(){this._thumbnailRestoreEv&&this._thumbnailRestoreEv.detach();var u=this.get("dialog"),h=u.getField("oembed"),g=u.getField("mainImage"),p=u.getField("automaticThumbDescription");h.getValue()&&h.getValue().thumbnailUrl&&(!g.get("data")||g.get("data")&&!g.get("data").get("hasFileData"))?(p.setText('<a href="#" class="restore-thumbnail">'+(0,l.t)("Restore video provider's thumbnail.",null,{project:"scripts-v6.content-item-types"})+"</a>"),this._thumbnailRestoreEv=p.get("boundingBox").one(".restore-thumbnail").on("click",function(f){f&&f.halt(),this._applyDefaultThumbnailImage()},this)):p.setText("")}}),r={name:"video-editor",title:(0,l.t)("Edit {presentationName}",null,{project:"scripts-v6.content-item-types"}),width:800,height:530,overlay:.5,tabs:[{$include:["tabs.primary.base","tabs.primary.video"]},{$include:"tabs.options.video"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"},initialDataByReference:!0},s=e.namespace("Squarespace.ContentItemEditor").Video=e.Base.create("VideoContentItemEditor",e.Squarespace.ContentItemEditor.Base,[a],{getDialogData:function(){var u=s.superclass.getDialogData.call(this),h=u.structuredContent;return u.oembed=h.oembed,u.overlay=h.overlay,u},sanitizeDialogData:function(u){return u=s.superclass.sanitizeDialogData.call(this,u),u.structuredContent=e.merge(u.structuredContent,{oembed:u.oembed,overlay:u.overlay}),delete u.oembed,delete u.overlay,u},_getTemplateContext:function(){var u=s.superclass._getTemplateContext.call(this);return u.enableFeatured=!0,u}},{ATTRS:{editorConfiguration:{value:r}}}),n={title:(0,l.t)("Edit {presentationName}",null,{project:"scripts-v6.content-item-types"}),name:"minimal-video-editor",width:800,height:454,overlay:.5,closeOthers:!1,style:"flyout",flyoutPointerDirection:"hidden",tabs:[{$include:["tabs.primary.video",{icon:(0,d.m_)("video",16,"light-solid")}],$update:{".body":{ctor:e.Squarespace.DialogFields.Wysiwyg,config:{name:"body",type:o.rg.CLASSIC,editorHeight:147,classNames:"major",title:(0,l.t)("Description",null,{project:"scripts-v6.content-item-types"}),description:""}}}}],buttons:[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6.content-item-types"})},{type:"remove",title:{$valueFn:function(u){return u.id?(0,l.t)("Remove",null,{project:"scripts-v6.content-item-types"}):(0,l.t)("Discard",null,{project:"scripts-v6.content-item-types"})}}},{$value:{type:"duplicate",title:(0,l.t)("Duplicate",null,{project:"scripts-v6.content-item-types"})},$when:function(u){return u.recordType===e.Squarespace.Enums.RecordType.STORE_ITEM}},{type:"saveAndClose",title:(0,l.t)("Save",null,{project:"scripts-v6.content-item-types"})}]},i=e.namespace("Squarespace.ContentItemEditor").VideoMinimal=e.Base.create("VideoContentItemEditorMinimal",s,[],{},{ATTRS:{editorConfiguration:{value:n},anchorNode:{getter:function(){return null}}}});e.Squarespace.ContentItemEditor.VideoMinimalGlobal=e.Base.create("VideoContentItemEditorMinimalGlobal",i,[],{_getTemplateContext:function(){var u=this.get("model").toJSON();return u.presentationName=this.getPresentationName(),u.model=this.get("model"),u.editor=this,u}},{})},"1.0",{requires:["squarespace-content-item-types-base","squarespace-dialog-wysiwyg"]})},459742:function(c,b,t){"use strict";var l=t(44348),d=t.n(l),o=t(586745),e=t.n(o),a=t(726692),r=t.n(a),s=t(629266),n=t.n(s),i=t(714487),u=t(867826),h=t(655191),g=t(989250);YUI.add("squarespace-content-item-utils",function(p){var f=[n().QUEUED,n().PROCESSING],m=[n().ERROR,n().DOWNLOAD_ERROR,n().ERROR_TOO_LARGE,n().ERROR_FILE_NOT_FOUND,n().ERROR_UNSUPPORTED_IMAGE_TYPE];p.namespace("Squarespace").ContentItemUtils={getWorkflowStateIdentifier:function(_){return _===d().PUBLISHED?"published":_===d().SCHEDULED?"scheduled":_===d().NEEDS_REVIEW?"needsreview":(_===d().DRAFT,"draft")},getWorkflowStateCopy:function(_){return _===d().PUBLISHED?(0,i.t)("Published",null,{project:"scripts-v6-root"}):_===d().SCHEDULED?(0,i.t)("Scheduled",null,{project:"scripts-v6-root"}):_===d().NEEDS_REVIEW?(0,i.t)("Needs Review",null,{project:"scripts-v6-root"}):_===d().DRAFT?(0,i.t)("Draft",null,{project:"scripts-v6-root"}):(0,i.t)("Draft",null,{project:"scripts-v6-root"})},getCommentStateIdentifier:function(_){return _===r().DISABLED?"disable":(_===r().ENABLED,"allow")},isErrorProcessingState:function(_){var v=_.get("mediaProcessingState");return m.indexOf(v)!==-1},isProcessingState:function(_){var v=_.get("mediaProcessingState");return f.indexOf(v)!==-1},sanitizeDataForCustomType:function(_,v,E){if(v){var S=v.fields;p.Lang.isObject(_.customContent)||(_.customContent={customType:v.name});for(var y=0;y<S.length;y++){var C=S[y],O=C.name;switch(C.type){case"text":case"wysiwyg":case"checkbox":_.customContent[O]=_["custom-"+O],delete _["custom-"+O];break;case"image":if(C=_["custom-"+O],C&&C.get("hasFileData")){var A=_["custom-"+O].getAttrs();_.customContent[O]=this.sanitizeImageItemContext(A)}else delete _.customContent[O];delete _["custom-"+O];break;case"gallery":var I=E.get("dialog").getField("custom-"+O).get("data").get("items"),D=I.toJSON();_.customContent[O]=D.map(this.sanitizeImageItemContext),delete _["custom-"+O];break;default:p.Squarespace.Logger.log((0,i.t)("Custom Type Saving Error",null,{project:"scripts-v6-root"}),{message:(0,i.t)("Could not find anything for field.",null,{project:"scripts-v6-root"}),field:C});break}}}},sanitizeImageItemContext:function(_){return delete _.attachment,delete _.authorId,delete _.categories,delete _.childType,delete _.childrenGroups,delete _.cloned,delete _.collectionId,delete _.commentCount,delete _.commentDisableOn,delete _.commentState,delete _.coverImageUrl,delete _.customContent,delete _.dataIsResolved,delete _.dataSize,delete _.dislikeCount,delete _.excerpt,delete _.internalContentNode,delete _.isGlobalFakeContentItem,delete _.isPusher,delete _.items,delete _.licensedAssetId,delete _.licensedAssetPreview,delete _.likeCount,delete _.location,delete _.mediaIsUploading,delete _.nextDisplayIndex,delete _.passthrough,delete _.postItemInjectCode,delete _.promotedBlock,delete _.promotedBlockType,delete _.proxyForId,delete _.publicCommentCount,delete _.sourceUrl,delete _.starred,delete _.structuredContent,delete _.tags,delete _.unsaved,delete _.updatedOn,delete _.version,delete _.websiteId,delete _.author,delete _.pendingPushedServices,delete _.pushedServices,delete _.shareStates,_},sanitizeTemplateContextForCustomType:function(_,v){v&&(_.presentationName=v.title)},setDataForCustomType:function(_,v,E){if(p.Lang.isValue(v)){var S=v.fields;p.Array.each(S,function(y,C){var O=y.type,A=y.name,I="custom-"+A,D=p.Object.getValue(_,["customContent",A]);switch(O){case"text":case"wysiwyg":case"checkbox":_[I]=D;break;case"image":p.Lang.isValue(D)?_[I]=new p.Squarespace.Models.ContentItem(p.merge(D,{collectionId:E.get("model").get("collectionId"),parentId:E.get("model").get("id"),recordType:e().IMAGE})):_[I]=new p.Squarespace.Models.ContentItem({collectionId:E.get("model").get("collectionId"),parentId:E.get("model").get("id"),recordType:e().IMAGE});break;case"gallery":var T=new p.Squarespace.Models.ContentItem({parentId:E.get("model").get("id"),collectionId:E.get("model").get("collectionId"),recordType:e().IMAGE});p.Lang.isValue(D)&&T.get("items").add(D),_[I]=T;break;default:p.Squarespace.Logger.log((0,i.t)("Custom Type Saving Error",null,{project:"scripts-v6-root"}),{message:(0,i.t)("Could not find any data to set for field.",null,{project:"scripts-v6-root"}),field:y});break}},this)}},createCustomTypeFieldConfigs:function(_,v){for(var E=[],S=0;S<_.length;S++){var y=_[S];switch(y.type){case"text":var C=y.title||"";E.push({$include:["fields.title",{"config.name":"custom-"+y.name,"config.strings.title":C,"config.strings.placeholder":""}]});break;case"checkbox":E.push({ctor:p.Squarespace.DialogFields.Check,config:{name:"custom-"+y.name,"strings.title":y.title}});break;case"wysiwyg":E.push({ctor:p.Squarespace.DialogFields.Description,config:{title:y.title||""}}),E.push({ctor:p.Squarespace.DialogFields.Wysiwyg,config:{name:"custom-"+y.name,editorHeight:227,classNames:"major"}});break;case"image":(function(O){var A=O.title||(0,i.t)("Featured Image",null,{project:"scripts-v6-root"});E.push({$include:["fields.mainImage",{"config.name":"custom-"+O.name,"config.type":O.type,"config.strings.title":A,"config.mode":u.Z.CHILD,"config.childType":e().IMAGE,"config.preflight":function(I){var D=v.get("model"),T=v.get("dialog").getField("custom-"+O.name);D.get("id")?I&&(T&&T.get("data")&&!T.get("data").get("parentId")&&(T.get("data").set("parentId",D.get("id")),T.refreshItemPostData()),I()):(D.once("save",function(){T&&T.get("data")&&(T.get("data").set("parentId",D.get("id")),T.refreshItemPostData()),I&&I()}),v.autoSave())},"config.asyncUploadUrlFn":null}]})})(y);break;case"gallery":(function(O){E.push({ctor:p.Squarespace.DialogFields.Description,config:{title:O.title||""}}),E.push({$include:["fields.childItemsGrid",{"config.width":null,"config.height":220,"config.hasFullScreenToggle":!0,"config.name":"custom-"+O.name,"config.type":O.type,"config.uploadPreflight":function(A){var I=v.get("model"),D=v.get("dialog").getField("custom-"+O.name);I.get("id")?A&&(D&&D.get("data")&&!D.get("data").get("parentId")&&D.get("data").set("parentId",I.get("id")),A()):(I.once("save",function(){D&&D.get("data")&&D.get("data").set("parentId",I.get("id")),A&&A()},I),v.autoSave())},"config.contentItemImageOptions.actionOverlayButtons":[p.Squarespace.ActionOverlayButtons.IMAGE_INFO,p.Squarespace.ActionOverlayButtons.EDIT_IMAGE,p.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]}]})})(y);break}}return E},setConfigurationForCustomType:function(_,v,E){if(v){var S=this.createCustomTypeFieldConfigs(v.fields,E),y={tabTitle:v.title,name:v.name,scroll:!0,fields:S};_.tabs.push(y)}},isStandardGalleryItem:function(_,v){return(0,g.V)(_.getAttrs())===h.J.GALLERY_ITEM&&["gallery","project"].includes(v.get("typeName"))}}},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-description","squarespace-dialog-wysiwyg","squarespace-logger","squarespace-models-content-item","squarespace-util-authenticated"]})},868403:function(c,b,t){"use strict";var l=t(586745),d=t.n(l),o=t(24175),e=t.n(o),a=t(714487),r=t(912959),s=t(912289),n=t(843156),i=t(270199),u=t(337061),h=t(233232);YUI.add("squarespace-content-manager-widgets-base",function(g){g.namespace("Squarespace.ContentManagerWidgets");var p=g.Squarespace.ContentManagerWidgets.Base=g.Base.create("ContentManagerBase",g.Squarespace.Widgets.DataWidget,[g.WidgetChild,g.WidgetParent,g.Squarespace.Damask.Panel.MixinPanel,g.Squarespace.Damask.Panel.MixinPanelParent],{initializer:function(){this.headerTray=this.add(g.merge({childType:g.Squarespace.Widgets.LibraryManagerHeaderTray},this._getHeaderTrayOptions())).item(0)},destructor:function(){this.headerTray=null,this.unsupportedTray&&(this.unsupportedTray.destroy(!0),this.unsupportedTray=null),this.exampleContentTray&&(this.exampleContentTray.destroy(!0),this.exampleContentTray=null)},renderUI:function(){this.headerTray.render(this.get("contentBox")),this.get("contentBox").prepend(this.headerTray.get("boundingBox"))},bindUI:function(){p.superclass.bindUI.call(this);var f=this.get("collection"),m=this.get("id"),_="navigationTitle";this._registerEvent(f.after(_+"Change",function(v){this.headerTray.set("strings.title",v.newVal)},this)),this._registerEvent(f.on("urlIdChange",function(v){g.Array.each(this.headerTray.get("buttons"),function(E){E.className==="view-page"&&(E.href=v.newVal)})},this)),this._registerEvent((0,i.Z)(g,this.get("router"),f)),this._bindDemoContentEvents(),this._registerEvent(g.on(m+"|key",function(v){this.get("collection").get("isDemoCollection")||g.Global.OPEN_DIALOGS.length===0&&!(0,h.m1)((0,u.d6)())&&!v.target.ancestor("input, textarea, [contenteditable=true], [contenteditable=plaintext-only]",!0)&&(this._callAfterEnsuringSavedChanges(this.handleAddContentRequest),v.halt())},window,"down:32",this))},_bindDemoContentEvents:function(){this._registerEvent(this.get("collection").after("clonedExampleContent",function(f){this.headerTray.set("buttons",this._getHeaderTrayOptions().buttons),this.syncUI()},this))},syncUI:function(){var f=this.get("collection"),m=f.get("isDemoCollection");this._toggleUnsupportedTray(!this.get("collectionConfiguration").get("supported")),this._toggleExampleContentTray(m);var _=this.get("boundingBox"),v=this.headerTray.get("contentBox").one(".title");if(m)_.one(".content-overlay")||(_.addClass("has-example-content-overlay"),_.append('<div class="content-overlay"></div>')),v.one(".demo-collection-tag")||v.append('<div class="demo-collection-tag">Example Page</div>');else{var E=_.one(".content-overlay");E&&E.remove(!0),_.removeClass("has-example-content-overlay");var S=v.one(".demo-collection-tag");S&&S.remove(!0)}},activatePath:function(f,m){if(g.Lang.isValue(m)&&g.Lang.isValue(m.item)){var _=m.item.get("name");this.activatePusher(m.item,_)}else this.get("loaded")?g.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePath.call(this,f):this.onceAfter("loadedChange",function(){g.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePath.call(this,f)})},activatePusherByName:function(f){var m=g.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePusherByName.call(this,f);if(m){var _=new g.Squarespace.Models.ContentItem({id:f,collectionId:this.get("collection").get("id"),displayIndex:this.get("collection").get("nextDisplayIndex"),recordType:d().STORE_ITEM});_.load(g.bind(function(){this.activatePusher(_,f)},this))}},_callAfterEnsuringSavedChanges:function(f){this.hasUnsavedChanges()?this.ensureSavedChanges(f.bind(this)):f.call(this)},_toggleUnsupportedTray:function(f){f?(this.unsupportedTray||(this.unsupportedTray=this._initTray({"strings.title":(0,a.t)("Unsupported Collection",null,{project:"scripts-v6.content-manager-widgets"}),"strings.subtitle":(0,a.t)("This page will not be rendered on the frontend.",null,{project:"scripts-v6.content-manager-widgets"}),buttons:[{label:(0,a.t)("Configure",null,{project:"scripts-v6.content-manager-widgets"}),action:this._callAfterEnsuringSavedChanges.bind(this,this.openCollectionConfigureDialog)}]})),this.unsupportedTray.show()):this.unsupportedTray&&this.unsupportedTray.hide()},_toggleExampleContentTray:function(f){if(f){if(!this.exampleContentTray){var m=this.get("collection").get("typeName");(0,s.TX)(m);var _=(0,a.t)("Example Page",null,{project:"scripts-v6.content-manager-widgets"}),v=(0,a.t)("This page is an example. You can either copy it and add your own content, or remove it.",null,{project:"scripts-v6.content-manager-widgets"}),E=[{label:(0,a.t)("Copy Page",null,{project:"scripts-v6.content-manager-widgets"}),action:this._callAfterEnsuringSavedChanges.bind(this,function(){this.get("collection").cloneToNewCollection().then((function(){(0,s.D9)(m),g.Squarespace.Singletons.Location.pointFrameToCollection(this.get("collection"),!0)}).bind(this))})},{label:(0,a.t)("Remove",null,{project:"scripts-v6.content-manager-widgets"}),action:this._callAfterEnsuringSavedChanges.bind(this,this.removeCollection)}];this.exampleContentTray=this._initTray({"strings.title":_,"strings.subtitle":v,className:"example-content-tray",buttons:E})}this.exampleContentTray.show()}else this.exampleContentTray&&this.exampleContentTray.hide()},_initTray:function(f){return new g.Squarespace.Widgets.ActionTray(g.merge(f,{render:this.get("boundingBox"),scrollNode:this.get("contentBox"),className:f.className+" dialog-tray"}))},_toggleEnabled:function(){var f=this.get("collection");f.set("enabled",!f.get("enabled"));var m=f.get("enabled"),_=g.bind(function(){m&&!f.get("enabled")&&(0,r.Z)()},this);m?f.save({},_):new g.Squarespace.Widgets.Confirmation({"strings.title":(0,a.t)("Disable Collection",null,{project:"scripts-v6.content-manager-widgets"}),"strings.message":(0,a.t)("Are you sure you wish to disable this collection?",null,{project:"scripts-v6.content-manager-widgets"})}).on("confirm",function(){f.save({},_)},this)},_registerItemPushers:function(f,m){var _=m||this.get("collection").items;if(g.Lang.isValue(f)&&g.Lang.isValue(f.model)){if(f.model.get("isPusher")){this._registerPusher(f.model);return}_=f.model||f.models}_.each(function(v){this._registerPusher(v)},this)},hasUnsavedChanges:function(){return console.warn("hasUnsavedChanges not implemented!"),!1},ensureSavedChanges:function(f){return console.warn("ensureSavedChanges not implemented."),g.Lang.isFunction(f)?f():g.when(!0)},_getTypeLabel:function(f,m){return m?m.get("title"):(f.get("typeName")||(0,a.t)("Page",null,{project:"scripts-v6.content-manager-widgets"})).capitalize()},_getHeaderTrayOptions:function(){var f=this.get("collection"),m=f.getTemplateConfiguration(),_=this._getTypeLabel(f,m),v=[],E=f.get("isDemoCollection");if(!E&&(this.get("settingsButtonVisible")&&v.push({label:(0,a.t)("{typeLabel} Settings",{typeLabel:_},{project:"scripts-v6.content-manager-widgets"}),className:"settings light",action:function(y){n.Z.clickCollectionSettingsGear(this.get("collection").get("id"),"panel"),this.openCollectionConfigureDialog()},context:this}),this.get("addContentButtonVisible"))){var S=(m?m.get("addText"):null)||(0,a.t)("Add Content",null,{project:"scripts-v6.content-manager-widgets"});v.push({label:S,className:"add",action:function(){n.Z.clickButtonToAddContentItemFromPanel(this.get("collection").get("id")),this.handleAddContentRequest()},context:this,testAttribute:f.get("typeName")+"-add-item"})}return{strings:{title:this.get("strings.title")||f.get("navigationTitle"),subtitle:this.get("strings.subtitle")||""},buttons:v,visible:!0,collection:f}},openCollectionConfigureDialog:function(){g.Squarespace.CollectionDialogPortal.showCollectionConfigurationDialog(this.get("collection").get("id"))},handleAddContentRequest:function(){throw new Error("Not implemented.")},removeCollection:function(){g.Squarespace.NavigationUIUtils.deleteCollection(this.get("collection"))}},{ASYNC_DATA:!0,CSS_PREFIX:"sqs-content-manager-base",ATTRS:{"strings.title":{},addDebounceTime:{value:1e3},collection:{},collectionConfiguration:{},addContentButtonVisible:{value:!0},settingsButtonVisible:{valueFn:function(){return g.Squarespace.UtilAuthenticated.userHasAccessPermission(e().CONFIG_CHANGE_STRUCTURE)},validator:g.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},helpSectionIdentifier:{value:"welcome"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-item-types-editor","squarespace-content-item-types-selector","squarespace-content-manager-collection-dialog-portal","squarespace-content-manager-navigation-ui-utils","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-panel-parent","squarespace-util-authenticated","squarespace-widgets-confirmation","squarespace-widgets-data-widget"]})},155123:function(c,b,t){"use strict";var l=t(963351),d=t.n(l),o=t(714487),e=t(480433),a=t.n(e),r=t(347560),s=t(728520);YUI.add("squarespace-content-manager-widgets-cover-page",function(n){n.namespace("Squarespace.ContentManagerWidgets");var i=n.Squarespace.ContentManagerWidgets.CoverPage=n.Base.create("CoverPage",n.Squarespace.ContentManagerWidgets.Base,[n.Squarespace.Mixins.Loadable,n.Squarespace.Damask.Panel.MixinPanel,n.Squarespace.Damask.Panel.MixinPanelParent],{initializer:function(){var u=this.get("slideSummary");this._registerEvent(this.get("loadable").onceAfter("load",function(){this._updateSlicesForLayout(),this._registerEvent(u.after("load",function(){this._updateSlicesForLayout(),this.syncUI()},this))},this));var h=function(){u.load()};this.actionListener=new(a())(r.Z),this.actionListener.addActionListener(s.Z.SAVE_SUCCESS,h)},destructor:function(){n.Array.each(this._renderedPushers,function(u){u.destroy()}),this._loadingTimer&&this._loadingTimer.cancel(),this._loadingSpinner&&this._loadingSpinner.destroy(),this.actionListener.removeAllActionListeners()},renderUI:function(){i.superclass.renderUI.call(this);var u=this.get("contentBox");u.append('<div class="cover-page-description">'+(0,o.t)("Cover Pages are simple one-page websites. Customize yours by adding content and tweaking the styles below.",null,{project:"scripts-v6.content-manager-widgets"})+"</div>"),this._editorContainer=this.get("contentBox").appendChild('<div class="editor-container"></div>')},syncUI:function(){i.superclass.syncUI.call(this),this.get("loading")?this._renderLoadingState():this._renderLoadedState()},hasUnsavedChanges:function(){return!1},ensureSavedChanges:function(u){return n.Lang.isFunction(u)?u():n.when(!0)},activatePath:function(u){this.get("loading")?this.onceAfter("loadingChange",function(){n.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePath.call(this,u)}):n.Squarespace.Damask.Panel.MixinPanelParent.prototype.activatePath.apply(this,arguments)},_renderLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._loadingTimer=n.later(500,this,function(){this._emptyEditorContainer(),this._loadingSpinner&&this._loadingSpinner.destroy(),this._loadingSpinner=new n.Squarespace.Spinner({render:this._editorContainer,size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._loadingSpinner&&this._loadingSpinner.destroy(),this._emptyEditorContainer(),this._renderAndRegisterPushers()},_emptyEditorContainer:function(){n.Array.each(this._renderedPushers,function(u){u.destroy()}),this._renderedPushers=[],this._editorContainer.empty()},_renderAndRegisterPushers:function(){var u=this._editorContainer,h=this.get("slideSummary"),g=h.get("slide"),p=g.get("layoutIdentifier"),f=this.get("slideLayouts"),m=f.getByIdentifier(p);this._renderedPushers.push(new n.Squarespace.Widgets.SlideLayoutChooserPusher({render:u,title:(0,o.t)("Layout",null,{project:"scripts-v6.content-manager-widgets"}),name:"layout",selectedLayout:m})),m.hasSliceType(n.Squarespace.SliceTypeGroups.BRANDING_TEXT)&&this._renderedPushers.push(new n.Squarespace.Damask.Panel.PanelPusher({render:u,title:(0,o.t)("Branding & Text",null,{project:"scripts-v6.content-manager-widgets"}),description:(0,o.t)("Logo, headline, body text, and social",null,{project:"scripts-v6.content-manager-widgets"}),name:"branding-text"})),m.hasSliceType(n.Squarespace.SliceTypeGroups.VIDEO)&&this._renderedPushers.push(new n.Squarespace.Damask.Panel.PanelPusher({render:u,title:(0,o.t)("Video",null,{project:"scripts-v6.content-manager-widgets"}),description:(0,o.t)("Embed a video",null,{project:"scripts-v6.content-manager-widgets"}),name:"video"})),m.hasSliceType(n.Squarespace.SliceTypeGroups.MEDIA)&&this._renderedPushers.push(new n.Squarespace.Damask.Panel.PanelPusher({render:u,title:(0,o.t)("Media",null,{project:"scripts-v6.content-manager-widgets"}),description:(0,o.t)("Add images or video to your page",null,{project:"scripts-v6.content-manager-widgets"}),name:"media"})),m.hasSliceType(n.Squarespace.SliceTypeGroups.AUDIO)&&this._renderedPushers.push(new n.Squarespace.Damask.Panel.PanelPusher({render:u,title:(0,o.t)("Audio",null,{project:"scripts-v6.content-manager-widgets"}),description:(0,o.t)("Upload one or more audio tracks",null,{project:"scripts-v6.content-manager-widgets"}),name:"audio"})),m.hasSliceType(n.Squarespace.SliceTypeGroups.LOCATION)&&this._renderedPushers.push(new n.Squarespace.Damask.Panel.PanelPusher({render:u,title:(0,o.t)("Map Location",null,{project:"scripts-v6.content-manager-widgets"}),description:(0,o.t)("Put a central location on your map",null,{project:"scripts-v6.content-manager-widgets"}),name:"location"})),m.hasSliceType(n.Squarespace.SliceTypeGroups.TWITTER)&&this._renderedPushers.push(new n.Squarespace.Damask.Panel.PanelPusher({render:u,title:(0,o.t)("Twitter",null,{project:"scripts-v6.content-manager-widgets"}),description:(0,o.t)("Connect your account and display tweets",null,{project:"scripts-v6.content-manager-widgets"}),name:"twitter"})),m.hasSliceType(n.Squarespace.SliceTypeGroups.ACTION)&&this._renderedPushers.push(new n.Squarespace.Damask.Panel.PanelPusher({render:u,title:(0,o.t)("Action",null,{project:"scripts-v6.content-manager-widgets"}),description:(0,o.t)("Create buttons, links, and forms",null,{project:"scripts-v6.content-manager-widgets"}),name:"action"})),m.hasSliceType(n.Squarespace.SliceTypeGroups.SOCIAL_ICONS)&&this._renderedPushers.push(new n.Squarespace.Damask.Panel.PanelPusher({render:u,title:(0,o.t)("Social Links",null,{project:"scripts-v6.content-manager-widgets"}),description:(0,o.t)("Add links to your social profiles",null,{project:"scripts-v6.content-manager-widgets"}),name:"social-links"})),this.get("renderStyleEditorPanelPusher")&&this._renderedPushers.push(new n.Squarespace.Damask.Panel.PanelPusher({render:u,title:(0,o.t)("Style",null,{project:"scripts-v6.content-manager-widgets"}),description:(0,o.t)("Adjust fonts, colors, and sizes",null,{project:"scripts-v6.content-manager-widgets"}),name:"slide-style",className:"cover-pages-style-pusher"})),this._registerPushers()},_updateSlicesForLayout:function(){var u=this.get("slideSummary"),h=u.get("slide"),g=h.get("layoutIdentifier"),p=this.get("slideLayouts"),f=p.getByIdentifier(g);u.get("slices").updateForLayout(f,h)},_getRenderedPushersArray:function(){return this._renderedPushers}},{CSS_PREFIX:"sqs-content-manager-cover-page",ATTRS:{slideSummary:{valueFn:function(){return new n.Squarespace.Models.SlideSummary({url:n.Lang.sub("{root}content-collections/{collectionId}/slide-summary",{root:n.Squarespace.API_ROOT,collectionId:this.get("collection").get("id")}),slideType:d().COVER_PAGE})},validator:n.Squarespace.AttrValidators.isInstanceOf(n.Squarespace.Models.SlideSummary)},slideLayouts:{valueFn:function(){return new n.Squarespace.Models.SlideLayoutList({slide:this.get("slideSummary").get("slide")})},validator:n.Squarespace.AttrValidators.isInstanceOf(n.Squarespace.Models.SlideLayoutList),writeOnce:"initOnly"},modelsSaving:{value:!1},addContentButtonVisible:{value:!1},loadable:{valueFn:function(){return new n.Squarespace.MultiLoader({loadables:[this.get("slideSummary"),this.get("slideLayouts")]})}},loadOnInitialize:{value:!0},damask:{},renderStyleEditorPanelPusher:{value:!0}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-manager-widgets-base","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-panel-parent","squarespace-damask-panel-panel-pusher","squarespace-mixins-loadable","squarespace-models-slide-layout-list","squarespace-models-slide-summary","squarespace-multi-loader","squarespace-slice-type-groups","squarespace-spinner","squarespace-util","squarespace-widgets-slice-group-editor","squarespace-widgets-slide-layout-chooser-pusher"]})},233411:function(c,b,t){"use strict";var l=t(714487),d=t(134521),o=t.n(d);YUI.add("squarespace-content-manager-widgets-product-quick-search",function(e){e.namespace("Squarespace.ContentManagerWidgets");var a=500,r=300;e.Squarespace.ContentManagerWidgets.ProductQuickSearch=e.Base.create("QuickSearch",e.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.publish("onResult"),this.publish("onSearchClear"),this.publish("attemptedClose"),this.after("queryChange",o()(this._registerCallback(function(s){this._afterQueryChange(s.newVal)}),a,{leading:!1,trailing:!0}))},_afterQueryChange:function(s){if(s.length===0){this._clearSearch();return}e.Data.get({url:"/api/search/GeneralSearch",data:{q:s,f_collectionId:this.get("collectionId"),size:r},success:function(n){n.serviceError||this._exposeResults(n.items,s)},failure:function(n){console.error("ERROR: ",n)}},this)},_sortAndSanitizeItems:function(s){var n=this.get("itemIdRequestHandler");if(!n)return s;var i=n();return s=s.filter(function(u){return i.indexOf(u.id)>-1}),s.sort(function(u,h){var g=i.indexOf(u.id),p=i.indexOf(h.id);return g<p?-1:g>p?1:0})},_exposeResults:function(s,n){if(n===this.get("query")){s=this._sortAndSanitizeItems(s),this.fire("onResult",{results:s});var i=null;s.length>0&&(i=s[0].id),this.setAttrs({resultItems:s,focusedItemId:i})}},_clearSearch:function(){this.fire("onSearchClear"),this.get("contentBox").one(".thumb").addClass("hidden")},renderUI:function(){this.get("contentBox").appendChild('<input type="text" placeholder='+(0,l.t)("Search Products",null,{project:"scripts-v6.content-manager-widgets"})+"/>"),this.get("contentBox").appendChild('<div class="thumb hidden"><div class="message"></div><div class="prev"></div><div class="next"></div></div>')},bindUI:function(){var s=this.get("boundingBox"),n=this.get("contentBox").one('input[type="text"]');this.after(["resultItemsChange","focusedItemIdChange"],function(i){var u=this.get("resultItems"),h=this.get("focusedItemId"),g=this.get("contentBox"),p=g.one(".message"),f=g.all(".prev,.next");g.one(".thumb").removeClass("hidden");var m=u.length>0;if(m){var _=u.map(function(v){return v.id}).indexOf(h);p.setContent((0,l.t)("{currentIndex} of {totalLength}",{currentIndex:_+1,totalLength:u.length},{project:"scripts-v6.content-manager-widgets"}))}else p.setContent((0,l.t)("No results",null,{project:"scripts-v6.content-manager-widgets"}));p.toggleClass("no-results",!m),f.toggleClass("hidden",!m)}),this._registerTimer(e.later(300,this,function(){n.focus(),n.on("blur",function(i){i.target.get("value").trim().length===0&&this.fire("attemptedClose")},this)})),n.on("keyup",function(i){var u=27,h=13;if(this.set("query",i.target.get("value")),i.keyCode===u&&this.fire("attemptedClose"),i.keyCode===h&&this.get("resultItems").length>0){var g=i.shiftKey?-1:1,p=this._getIncrementedFocusedItemId(g);this.set("focusedItemId",p)}i.stopPropagation()},this),this.get("contentBox").one(".thumb").delegate("click",function(i){var u=1;i.target.hasClass("prev")&&(u=-1);var h=this._getIncrementedFocusedItemId(u);this.set("focusedItemId",h),i.halt()},".prev,.next",this),s.on("click",function(i){if(i.target.test("input")){i.stopPropagation();return}i.halt()},this)},_getIncrementedFocusedItemId:function(s){var n=this.get("resultItems"),i=this.get("focusedItemId"),u=n.map(function(p){return p.id}),h=u.indexOf(i),g=h+s;return g>u.length-1?g=0:g<0&&(g=u.length-1),u[g]}},{CSS_PREFIX:"sqs-quick-search",ATTRS:{query:{value:""},collectionId:{value:""},focusedItemId:{value:null},resultItems:{value:[]},itemIdRequestHandler:{value:null}}})},"1.0",{requires:["squarespace-ss-widget"]})},580765:function(c,b,t){"use strict";var l=t(730842);YUI.add("squarespace-content-manager-collection-dialog-portal",function(d){d.namespace("Squarespace"),d.Squarespace.CollectionDialogPortal={showCollectionConfigurationDialog:function(o,e){var a=d.Squarespace.ContentCollectionCache.getById(o);if(a.get("isDemoCollection")){this.exampleContentCloneConfirmationWithCollectionId(o).then((function(){this.showCollectionConfigurationDialog(a.get("id"),e)}).bind(this));return}return l.Z.showCollectionSettingsEditor(o,e)},exampleContentCloneConfirmationWithCollectionId:function(o){var e=d.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(o);return this.exampleContentCloneConfirmation(e)},exampleContentCloneConfirmation:function(o){if(o)return d.Squarespace.Promises.create(function(e,a){o.get("collection").cloneToNewCollection({silent:!0}).then(e)})}}},"1.0",{requires:["squarespace-damask-context-globals","squarespace-singletons-location","squarespace-promises","squarespace-models-content-collection","squarespace-models-template-navigation-list"]})},178518:function(c,b,t){"use strict";var l=t(714487),d=t(516614),o=t(860921),e=t.n(o),a=t(912289),r=t(437951),s=t.n(r);YUI.add("squarespace-content-manager-navigation-ui-utils",function(n){var i=function(h){new n.Squarespace.Widgets.Alert({"strings.title":h.title,"strings.message":h.msg})},u={HOMEPAGE:{title:(0,l.t)("Cannot Delete Homepage",null,{project:"scripts-v6.content-manager"}),msg:(0,l.t)("This page cannot be deleted because it is your homepage. Please assign a new homepage before deleting.",null,{project:"scripts-v6.content-manager"})},TEMPLATE:{title:(0,l.t)("Cannot Delete Template Page",null,{project:"scripts-v6.content-manager"}),msg:(0,l.t)("This page is a page that is provided by the template you are currently using. It cannot be removed while you are using this template.",null,{project:"scripts-v6.content-manager"})}};n.namespace("Squarespace").NavigationUIUtils={deleteNavigationItem:function(h,g,p){if(!h)throw new Error("Unknown entity trying to be deleted.");var f=n.Lang.isValue(h.get("collectionId")),m=!h.get("children").isEmpty(),_=h.get("collection");if(f){if(h.get("collectionId")===d.Z.getHomepageCollectionId())return i(u.HOMEPAGE),_.get("isDemoCollection")&&(0,a.lT)(_.get("typeName")),n.Promise.reject(u.HOMEPAGE.title);if(_.get("type")===s().TEMPLATE_PAGE)return i(u.TEMPLATE),n.Promise.reject(u.TEMPLATE.title)}var v=function(){return _.get("isDemoCollection")&&(0,a.Ln)(_.get("typeName")),new n.Promise(function(E,S){var y=new n.Parallel;f&&m&&h.get("children").each(function(C){C.destroy({remove:!0},y.add(e()))}),h.destroy(n.merge({remove:!0},g),y.add(e())),y.done(function(O){E(h,O)})})};return p?v():this.showDeleteConfirmation().then(v)},showDeleteConfirmation:function(h,g){var p,f;if(g&&g.get("isDemoCollection"))p=(0,l.t)("Remove Example Page",null,{project:"scripts-v6.content-manager"}),f=(0,l.t)("Are you sure you wish to remove this example page?",null,{project:"scripts-v6.content-manager"});else{var m=n.Escape.html(g&&g.get("navigationTitle")||h&&h.get("title")||(0,l.t)("this item",null,{project:"scripts-v6.content-manager"}));p=(0,l.t)("Delete {item}",{item:m},{project:"scripts-v6.content-manager"}),f=(0,l.t)("Are you sure you want to delete <strong>{item}</strong>?",{item:m},{project:"scripts-v6.content-manager"})}return n.Squarespace.Fluent.Confirm({"strings.title":p,"strings.message":f,"strings.confirm":(0,l.t)("Delete",null,{project:"scripts-v6.content-manager"}),className:"delete-collection"})},deleteCollection:function(h,g,p){var f=h.get("id"),m=n.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(f);if(!m)throw new Error("Could not find the navigation item for collection #"+f);return this.deleteNavigationItem(m,g,p)}}},"1.0",{requires:["base","promise","squarespace-fluent-confirmation","squarespace-models-template-navigation-list","squarespace-widgets-alert"]})},899624:function(c,b,t){"use strict";var l=t(53678),d=t(35045),o=t(830510),e=t(829499),a=t(985913),r={website:{actions:l.Z,store:d.default},websiteSettings:{actions:o.Z,store:e.default}};YUI.add("squarespace-context",function(s){var n=!0,i=s.config.win===window;s.namespace("Squarespace");function u(g,p){return function(f){if(f instanceof g)return f;var m=new g(f),_=r[p]||{},v=_.store,E=_.actions,S=!1;return n&&i&&v&&E&&(v.listen(function(y){S=!0,m.setAttrs(y.serializeToModel?y.serializeToModel():y.toJS())}),m.after("change",function(y){if(!S){var C=Object.keys(y.changed).reduce(function(O,A){return O[A]=y.changed[A].newVal,O},{});E.update(C)}S=!1})),m}}var h=s.Base.create("squarespaceContext",s.Model,[],{},{ATTRS:{authenticatedAccount:{setter:u(s.Squarespace.Models.MemberAccount,"memberAccount"),lazyAdd:!1},website:{setter:u(s.Squarespace.Models.Website,"website"),lazyAdd:!1},websiteSettings:{setter:u(s.Squarespace.Models.WebsiteSettings,"websiteSettings"),lazyAdd:!1},templateInstallation:{setter:u(s.Squarespace.Models.TemplateInstallation,"templateInstallation"),lazyAdd:!1},billingStatus:{}}});if((0,a.F)(s)){s.Squarespace.Context=s.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Context");return}s.Squarespace.Context={getInstance:function(){var g=null;return function(p){return g===null&&(g=new h(p)),g}}(),init:function(g){this.getInstance(g)}},Static.SQUARESPACE_CONTEXT&&s.Squarespace.Context.init(Static.SQUARESPACE_CONTEXT)},"1.0",{requires:["base","model","node","squarespace-models-member-account","squarespace-models-template-installation","squarespace-util","squarespace-models-website","squarespace-models-website-settings"]})},513626:function(){YUI.add("squarespace-cookie-banner-styles",function(c){},"1.0",{requires:[]})},865378:function(){YUI.add("squarespace-currency-symbols",function(c){},"1.0",{requires:[]})},855873:function(c,b,t){"use strict";var l=t(347560),d=t(480433),o=t.n(d),e=t(33698);YUI.add("squarespace-damask-announcement-bar-bridge",function(a){a.namespace("Squarespace.Damask.Preview");var r=null,s=new(o())(l.Z),n={},i={},u={};function h(g){return function(p){g(p.newVal)}}s.addActionListener(e.Z.ADD_ON_VISIBILITY_CHANGED_HANDLER,function(g){i[g.key]||(i[g.key]=g.callback),r?u[g.key]=r.after("AnnouncementBar:visibleChange",h(g.callback)):n[g.key]=g.callback}),s.addActionListener(e.Z.REMOVE_ON_VISIBILITY_CHANGED_HANDLER,function(g){r&&u[g]?(r.detach(u[g]),delete u[g]):delete n[g],delete i[g]}),a.Squarespace.Damask.Preview.AnnouncementBarBridge=a.Base.create("announcementBarBridge",a.Base,[],{initializer:function(){this._addActionListeners()},destructor:function(){a.Array.invoke(this.eventListeners,"detach"),this.eventListeners=[],this.actionListener.removeAllActionListeners(),this.actionListener=null},_notifyBar:function(g,p){r&&r.fire(g,p)},_addActionListeners:function(){this.eventListeners=[a.Global.on(a.Squarespace.Widgets.AnnouncementBar.EVENTS.READY,function(g,p){r&&Object.keys(u).forEach(function(f){u[f].detach()}),r=g.bar,Object.keys(i).forEach(function(f){u[f]=r.after("AnnouncementBar:visibleChange",h(i[f])),delete n[f]})})],this.actionListener=new(o())(l.Z),this.actionListener.addActionListener(e.Z.RESET_VISIBILITY,(function(){this._notifyBar(a.Squarespace.Widgets.AnnouncementBar.EVENTS.RESET_VISIBILITY)}).bind(this)),this.actionListener.addActionListener(e.Z.UPDATE,(function(g){this._notifyBar(a.Squarespace.Widgets.AnnouncementBar.EVENTS.UPDATE,g)}).bind(this)),this.actionListener.addActionListener(e.Z.CLOSE,(function(){this._notifyBar(a.Squarespace.Widgets.AnnouncementBar.EVENTS.CLOSE)}).bind(this))}},{ATTRS:{}})},"1.0",{requires:["base","squarespace-announcement-bar"]})},820067:function(){YUI.add("squarespace-damask-context-globals",function(c){c.namespace("Squarespace.Damask"),c.Squarespace.Damask.ContextGlobals={isDamask:function(){return c.Lang.isValue(CONFIG_PANEL)},frameWindow:function(){return c.Lang.isValue(c.config.win.frames["sqs-site-frame"])?CONFIG_PANEL.getFrameContentWindow():(console.warn("[ContextGlobals] frameWindow method called from a non-damask frame."),c.config.win)},topWindow:function(){var b=c.config.win;try{c.Lang.isValue(b.frameElement)&&b.frameElement.id==="sqs-site-frame"&&(b=b.parent)}catch{}return c.one(b)},fromFrame:function(b){var t=this.frameWindow();return c.Lang.isValue(b)?c.Lang.isArray(b)?c.Object.getValue(t.get(b[0]),b.slice(1)):t.get(b):t},fromTop:function(b){var t=this.topWindow();return c.Lang.isValue(b)?c.Lang.isArray(b)?c.Object.getValue(t.get(b[0]),b.slice(1)):t.get(b):t},get:function(b){return this.isDamask()?this.fromFrame(b):this.fromTop(b)},getWindow:function(){return this.isDamask()?this.frameWindow():this.topWindow()},relative:function(b,t){if(this.isDamask()){var l=this.fromFrame("Y");if(b.inDoc(l.config.doc))return this.fromFrame(t)}var d=this.fromTop("Y");return b.inDoc(d.config.doc)?this.fromTop(t):null}}},"1.0",{requires:[]})},418393:function(c,b,t){"use strict";var l=t(210750),d=t.n(l),o=t(475521),e=t(762535),a=t(337061),r=t(938077),s=t(734526),n=t(659519),i=s.Z.BlockTypeKeys;YUI.add("squarespace-damask-instrumentation",function(u){var h=[];h.push({identifier:"back",selector:".back-container"}),h.push({identifier:"index-manager",selector:"[data-action]",properties:function(g){return{action:g.getDOMNode().getAttribute("title")}}}),h.push({identifier:"save",selector:".changes-workflow-button-wrapper .sqs-button.save"}),h.push({identifier:"cancel",selector:".changes-workflow-button-wrapper .sqs-button.revert"}),h.push({identifier:"create-page",selector:".sqs-navigation-item-list .add-page",properties:function(g){return{nestedAddPage:!!g.ancestor(".sqs-navigation-item-folder")}}}),h.push({identifier:"frame-expand",selector:"html.fullscreen .sqs-node-expander-button"}),h.push({identifier:"frame-contract",selector:"html:not(.fullscreen) .sqs-node-expander-button"}),h.push({identifier:"support.squarespace.com",selector:'a[href*="support.squarespace.com"]',includeHref:!0}),h.push({identifier:"help",selector:".link-knowledge-base",includeHref:!0}),u.namespace("Squarespace.Damask"),u.Squarespace.Damask.Instrumentation=u.Base.create("Instrumentation",u.Base,[u.Squarespace.GlobalEventBubbler],{initializer:function(){this.LOG=new u.Squarespace.Debugger({name:"Instrumentation",output:!1}),this.debouncedTrackEngagementSearch=d()(this.trackEngagementSearch,500),this._bindInterfaceListeners(),this._bindDialogListeners(),this._bindConfirmationDialogListeners(),this._bindAccountMenuListeners(),this._bindDialogMultiOption(),this._bindDialogButton(),this._bindCheckoutSubmitter(),this._bindDialogFieldError(),this._bindSettingsPanelListeners(),this._bindDomainListeners(),this.bubbleEventsToGlobal()},trackInsertBlock:function(g){try{var p=g.blockWidget.getAttrs(),f=p.blockTypeName===i[68]?p.model.getAttrs().blockSelectorSource:p.trackingBlockTypeName||p.blockTypeName,m=p.id;g.isMoveBlock?(0,o.LT)({objectDisplayName:f,objectValue:f.toLowerCase(),indirectObjectValue:g.isFromCurrentLayout?"within-section":"between-section",blockId:m}):(0,o.KX)({objectDisplayName:f,objectValue:f.toLowerCase(),indirectObjectValue:g.isDragDrop?"drag-block":"click-button",blockId:m})}catch{}},trackDeleteBlock:function(g){try{var p=g.getAttrs(),f=p.blockTypeName===i[68]?p.model.getAttrs().blockSelectorSource:p.trackingBlockTypeName||p.blockTypeName,m=p.id;(0,o.ld)({objectDisplayName:f,objectValue:f.toLowerCase(),blockId:m})}catch{}},bindFrame:function(){this._bindDamaskPreviewFooter(),this._bindFrameButtonControllerListeners(),this._bindLayoutEngineInteractions(),this._bindBlockInteractions()},trackEngagementSearch:function(g){if(g)try{var p=(0,a.d6)();(0,o.$D)({query:g,collection:this.getCollectionFromFrame(),collectionId:(0,r.Zxu)(p),editingSectionArea:(0,r.fPO)(p),itemId:(0,r.x38)(p)})}catch{}},_bindInterfaceListeners:function(){this.get("damask").get("router").onChange((function(g){this.trackInterfaceView({params:g.params})}).bind(this)),this.get("damask").get("boundingBox").on("click",function(g){for(var p=0;p<h.length;p++)if(g.target.ancestor(h[p].selector,!0)){var f=h[p].properties;typeof f=="function"&&(f=f(g.target)),f=f||{},h[p].includeHref&&(f.href=g.target.getAttribute("href")),this.trackInterfaceClick(h[p].identifier,f);break}},this)},_bindDialogListeners:function(){u.Global.on("EditingDialog:show",function(g){var p=g.target.params,f=p.name;if(!u.Lang.isString(f)||f.length===0){this.LOG.warn("Dialog was shown but it did not have a valid name! Instrumentation attempt failed.");return}this.trackInterfaceView({dialog:p.name,params:{id:p.id}})},this),u.Global.on("EditingDialog:tab-shown",function(g){var p=g.target.params.name;if(!u.Lang.isString(p)||p.length===0){this.LOG.warn("Dialog was shown but it did not have a valid name! Instrumentation attempt failed.");return}this.trackInterfaceView({dialog:g.target.params.name,tab:g.name})},this),u.Global.on("EditingDialog:button-click",function(g){var p=g.target.params.name;if(!u.Lang.isString(p)||p.length===0){this.LOG.warn("Dialog was shown but it did not have a valid name! Instrumentation attempt failed.");return}var f={dialog:g.target.params.name},m=g.target.getData();["collectionId","id","urlId","title"].forEach(function(_){m.hasOwnProperty(_)&&(f[_]=m[_])}),this.trackInterfaceClick("button-"+g.type,f)},this)},_bindAccountMenuListeners:function(){u.Global.on("AccountMenu:visibleChange",function(g){g.newVal?this.trackInterfaceView({dialog:"AccountMenu"}):this.trackInterfaceClick("dialog-close",{dialog:"AccountMenu"})},this)},_bindFrameButtonControllerListeners:function(){u.Global.on("FrameButtonController:button-click",function(g){this.trackInterfaceClick("frame-"+g.type)},this)},_bindDialogMultiOption:function(){u.Global.on("multiOption:option-click",function(g){var p=g.target.get("dialog");this.trackInterfaceClick(g.option,{dialog:p?p.params.name:""})},this)},_bindDialogButton:function(){u.Global.on("button:button-click",function(g){var p=g.target.get("strings.text")||g.target.get("strings.title")||"",f=g.target.get("name")||"",m=g.target.get("href")||"";if(!p&&!f&&!m){this.LOG.warn("Button widget does not have enough information to log. Instrumentation attempt failed.");return}this.trackInterfaceClick("button-click",{text:p,name:f,href:m})},this)},_bindCheckoutSubmitter:function(){u.Global.on("*:submit",function(g){var p=g.target.get("isCheckoutSubmitter"),f=g.target.get("submitButtonLabel")||"";if(!(!u.Lang.isValue(p)||!p)){if(!u.Lang.isString(f)||f.length===0){this.LOG.warn("CheckoutSubmitter was shown but it did not have a valid button label! Instrumentation attempt failed.");return}this.trackInterfaceClick("checkout-submit",{label:f})}},this)},_bindDialogFieldError:function(){u.Global.on("*:error-shown",function(g){var p=g.target.get("name"),f=g.target.get("strings")?g.target.get("strings.title")||g.target.get("strings.placeholder"):"",m=g.target.get("data")||"",_=g.message||"";!p&&!f&&!_&&this.LOG.warn("DialogField Error was shown but it did not have enough information. Instrumentation attempt failed."),this.trackInterfaceView({dialog:p||f,value:m,error:_})},this)},_bindSettingsPanelListeners:function(){u.Global.on("*:saved-changes",function(g){var p;g.target.getChangedFields&&(p=g.target.getChangedFields()),this.trackInterfaceClick("save",{fields:p})},this),u.Global.on("*:revert-changes",function(g){var p;g.target.getChangedFields&&(p=g.target.getChangedFields()),this.trackInterfaceClick("cancel",{fields:p})},this)},_bindBlockInteractions:function(){u.Array.each([{global:"Block:create",identifier:"block-create"},{global:"Block:drop",identifier:"block-drop"},{global:"Block:remove",identifier:"block-remove"}],function(g){u.Global.on(g.global,function(p){p.backend&&this.trackInterfaceClick(g.identifier,{blockType:p.blockType,region:p.region})},this)},this)},_bindLayoutEngineInteractions:function(){this.publishEventsForBubbling(),u.Global.on("LayoutInsertPoint:click",function(g){g.backend&&this.trackInterfaceClick("layout-insert-point")},this),u.Global.on("layout-engine:block-menu-search-query-change",function(g){this.debouncedTrackEngagementSearch(g.query)},this),u.Global.on("layout-engine:block-menu-search-query-enter",function(g){this.debouncedTrackEngagementSearch.cancel(),this.trackEngagementSearch(g.query)},this),u.Global.on("layout-engine:open-block-menu",function(){var g=(0,a.d6)();(0,o.L0)({collection:this.getCollectionFromFrame(),collectionId:(0,r.Zxu)(g),editingSectionArea:(0,r.fPO)(g),itemId:(0,r.x38)(g)})},this),u.Global.on("layout-engine:insert-block",this.trackInsertBlock,this),u.Global.on("layout-engine:delete-block",this.trackDeleteBlock,this)},_bindConfirmationDialogListeners:function(){var g=["show"],p=["confirm","reject","cancel"];u.Array.each([].concat(g).concat(p),function(f){u.Global.on("confirmation:"+f,function(m){g.includes(f)?this.trackInterfaceView({dialog:m.target.get("instrumentationTitle")||m.target.get("strings.title")}):p.includes(f)&&this.trackInterfaceClick(f,{dialog:m.target.get("strings.title")})},this)},this)},_bindDamaskPreviewFooter:function(){u.Global.on("DamaskPreviewFooter:foundYInFrameChange",function(g){g.newVal&&this.trackInterfaceView({widget:"disable-user-scripts"})},this),u.Global.on(["DamaskPreviewFooter:enableScriptsInPreview","DamaskPreviewFooter:disableScriptsInPreview"],function(g){var p=g.type.split(":")[1];this.trackInterfaceClick(p)},this)},_bindDomainListeners:function(){var g={"domain:search":"domain-search","domain:add-to-cart":"domain-add-to-cart","domain:remove-from-cart":"domain-remove-from-cart","domain:select-provider":"domain-select-provider","domain:purchase-complete":"domain-purchase-complete","domain:lock-toggle":"domain-lock-toggle","domain:www-toggle":"domain-www-toggle"};u.Object.each(g,function(p,f){u.Global.on(f,function(m){this.trackInterfaceClick(p,m||{})},this)},this)},trackInterfaceView:function(g){g=g||{};var p=this.getSanitizedInterfaceUrl(),f=this.getCollectionByUrl();f&&(g.pageType=u.Squarespace.ContentCollectionUtils.getIdentifierForCollection(f),g.urlId=f.get("urlId"),p=e.Z.forPagesPanel()+"/"),!(this._lastUrl===p&&!u.Lang.isString(g.dialog)&&!u.Lang.isString(g.widget))&&(this._track("interface_view",u.merge(g,{url:p})),this._lastUrl=p)},trackInterfaceClick:function(g,p){this._track("interface_click",u.merge(p,{identifier:g,url:this.getSanitizedInterfaceUrl()}))},_track:function(g,p){this.LOG.info(g,JSON.stringify(p)),(0,n.Z)(g,p)},getCollectionIdByUrl:function(){var g=this.getSanitizedInterfaceUrl();return g.startsWith(e.Z.forPagesPanel()+"/")?g.split("/").slice(-1)[0]:null},getCollectionByUrl:function(){var g=this.getCollectionIdByUrl();return g?u.Squarespace.ContentCollectionCache.getById(g):null},getCollectionFromFrame:function(){var g=this.get("damask").get("previewFrame").get("contentBridge").get("controller");if(!g)return null;var p=g.get("contextCollection");return p||null},getSanitizedInterfaceUrl:function(){return this.get("damask").get("router").getCurrentLocation().state.appUrl}},{ATTRS:{damask:{},previewFrame:{}}})},"1.0",{requires:["base","@sqs/layout-engine/events","squarespace-content-collection-utils","squarespace-debugger","squarespace-global-event-bubbler","squarespace-util"]})},324187:function(c,b,t){"use strict";var l=t(762535);YUI.add("squarespace-singletons-location",function(d){d.namespace("Squarespace.Singletons");var o=d.Base.create("damaskLocation",d.Base,[],{go:function(a,r){var s=this.get("controller").get("router");s.push(a)},goBack:function(){this.get("controller").get("router").goBack()},goUp:function(){this.get("controller").get("router").goUp()},getFrameUrl:function(){return this.get("controller").getFrameUrl()},getPanelPath:function(){return this.get("controller").getPanelPath()},setFrameUrl:function(e){this.get("controller").setFrameUrl(e)},setFrameUrlOrRefresh:function(e){this.get("controller").setFrameUrlOrRefresh(e)},requestFrameRefresh:function(){this.get("controller").requestFrameRefresh()},goToCollection:function(e,a){e=e||"";var r=l.Z.forPagesPanel()+"/"+e;this.go(r,a)},goToContentItem:function(e,a){var r=l.Z.forPagesPanel()+"/"+e.get("collectionId")+"/"+e.get("id");this.go(r,d.merge({safeUrl:!0},a))},pointFrameToCollection:function(e,a){if(d.Squarespace.Navigation.ListUtils.isCollectionInIndex(e)&&e.get("enabled")){this.pointFrameToCollectionInIndex(e,a);return}var r=this.get("controller").get("contentBridge").getCollectionUrl(e);a?this.setFrameUrlOrRefresh(r):this.setFrameUrl(r)},pointFrameToContentItem:function(e,a){var r=e.get("fullUrl");a?this.setFrameUrlOrRefresh(r):this.setFrameUrl(r)},pointFrameToCollectionInIndex:function(e,a){var r=d.Squarespace.Navigation.ListUtils.getParentCollection(e),s=e.get("id"),n=r.get("id");this.get("controller").get("contentBridge").ensureCollectionInStackedIndexIsOnScreen(s,n,a)}},{ATTRS:{controller:{getter:function(e){return d.Lang.isValue(e)?e:CONFIG_PANEL},validator:d.Squarespace.AttrValidators.isInstanceOf(d.Base)}}});d.Lang.isValue(d.Squarespace.Singletons.Location)||(d.Squarespace.Singletons.Location=new o)},"1.0",{requires:["base","squarespace-attr-validators","squarespace-navigation-list-utils"]})},404548:function(){YUI.add("squarespace-damask-menu-make",function(c){c.namespace("Squarespace.Damask.Menu");var b=c.Squarespace.ObjectBuilder;function t(l,d,o){l={builtObj:l};var e=b.make(l,d,o);e=b.walkObject(c.merge(e),[{test:function(r){return r&&r.$whenHasPermission},map:function(r){var s=!0;if(c.Array.each(r.$whenHasPermission,function(n){c.Squarespace.UtilAuthenticated.userHasAccessPermission(n)||(s=!1)}),s)return delete r.$whenHasPermission,r}},{test:function(r){return r&&r.$whenWebsiteIsNot},map:function(r){var s=!0,n=c.Squarespace.Context.getInstance().get("website").get("siteStatus.value");if(c.Array.each(r.$whenWebsiteIsNot,function(i){i===n&&(s=!1)}),s)return delete r.$whenWebsiteIsNot,r}},{test:function(r){return r&&r.$whenDoesNotHavePlan},map:function(r){var s=!0;if(c.Array.each(r.$whenDoesNotHavePlan,function(n){n===c.Object.getValue(Static,["SQUARESPACE_CONTEXT","plan"])&&(s=!1)}),s)return delete r.$whenDoesNotHavePlan,r}},{test:function(r){return r&&r.$whenWebsiteTypeIsNot},map:function(r){var s=!0,n=c.Squarespace.Context.getInstance().get("website"),i=n.get("websiteType");if(c.Array.each(r.$whenWebsiteTypeIsNot,function(u){u===i&&(s=!1)}),s)return delete r.$whenWebsiteTypeIsNot,r}}]);var a={};return c.Object.each(e,function(r,s){c.Lang.isObject(r)&&(a[s]=r)}),a.builtObj}c.Squarespace.Damask.Menu.make=t},"1.0",{requires:["base","squarespace-context","squarespace-object-builder","squarespace-util-authenticated"]})},879536:function(c,b,t){"use strict";var l=t(461761),d=t.n(l),o=t(559409),e=t.n(o),a=t(91098),r=t.n(a),s=t(24175),n=t.n(s),i=t(994336),u=t.n(i),h=t(714487),g=t(904808);YUI.add("squarespace-damask-modal-manager",function(p){var f=p.Object.getValue(Static,["SQUARESPACE_CONTEXT","currentTermsOfServiceVersion"]);p.namespace("Squarespace.Damask.Modal"),p.Squarespace.Damask.Modal.Manager=p.Base.create("modalManager",p.Base,[],{render:function(){this._showTips();var m=new p.Squarespace.Models.ConnectedAccounts.loadFromStore;m&&this._showUnauthorizedSocialAccountAlert(m),this._renderBillingSummary()},_renderUpdateTOS:function(){var m=this.get("siteContext.website.siteStatus.value");if(this._accountNotRemovedOrExpired(m)){var _=new p.Squarespace.Widgets.TermsOfService({websiteSettings:this.get("siteContext.websiteSettings"),mostRecentToSVersion:f});_.on("destroy",function(){this._showTips()},this),_.render()}},_showUnauthorizedSocialAccountAlert:function(m){var _=p.Array.some(m,function(v){return v.accountState===r().UNAUTHORIZED},this);_&&new p.Squarespace.Widgets.Confirmation({position:p.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.confirm":(0,h.t)("Reconnect Accounts",null,{project:"scripts-v6.damask"}),"strings.cancel":(0,h.t)("Dismiss",null,{project:"scripts-v6.damask"}),"strings.title":(0,h.t)("Connected Accounts Deactivated",null,{project:"scripts-v6.damask"}),"strings.message":(0,h.t)("One or more of your Connected Accounts has been deactivated. You must reconnect them for continued usage.",null,{project:"scripts-v6.damask"})}).on("confirm",function(){p.Squarespace.Singletons.Location.go("/settings/connected-accounts")})},_showTips:function(){this.hasCompletedMemberTutorial("welcome")||p.later(200,this,this._renderMemberTutorialWelcome)},_renderMemberTutorialWelcome:function(){this._markMemberTutorialCompleted("welcome")},showUpdateTOS:function(){return!this.hasAgreedToMostRecentToS()&&this.canAgreeToToS()},canAgreeToToS:function(){return p.Squarespace.UtilAuthenticated.userHasAccessPermission(n().CONFIG_ACCEPT_TOS)},hasAgreedToMostRecentToS:function(){return!p.Lang.isValue(f)||this.get("websiteSettings").get("lastAgreedTermsOfService")===f},_isStatus:function(m){var _=this.get("siteContext.website.siteStatus.value");return m===_},hasCompletedMemberTutorial:function(m){return p.Object.getValue(this.get("siteContext.authenticatedAccount.tutorialsCompleted"),m)},hasCompletedWebsiteTutorial:function(m){return p.Object.getValue(this.get("siteContext.websiteSettings.tutorialsCompleted"),m)},_markWebsiteTutorialComplete:function(m){var _=this.get("siteContext.websiteSettings");_.tutorialsCompleted[m]=!0,p.Data.post({url:"/api/config/MarkWebsiteTutorialCompleted",data:{tutorial:m}},this)},_markMemberTutorialCompleted:function(m){p.Data.post({url:"/api/config/MarkMemberTutorialCompleted",json:!0,data:{tutorial:m}},this)},_accountNotRemovedOrExpired:function(m){return m!==e().EXPIRED&&m!==e().REMOVED},_renderBillingSummary:function(){if(p.Lang.isValue(u().get("billingChangeSummary"))){var m=JSON.parse(u().get("billingChangeSummary"));this._isStatus(e().EXPIRED)?this.set("cancelled",!0):this._showBillingChangeSummary(m),u().set("billingChangeSummary","",{expires:new Date(0)})}},_showBillingChangeSummary:function(m){var _=this.get("strings.periodChangeConfirmationMessage");m.planChange&&(_=this.get("strings.planChangeConfirmationMessage")),m.productLineChange&&(_=this.get("strings.productLineChangeConfirmationMessage"),m.prevProductLineLabel=(0,g.LR)(m.prevProductLine),m.newProductLineLabel=(0,g.LR)(m.newProductLine));var v=d()(window.Static,"SQUARESPACE_CONTEXT.website.timeZone");m.nextBillDate=(0,h.p6)({date:new Date(m.nextBillDate),zoneId:v},{date:"long"}),new p.Squarespace.Widgets.Alert({"strings.title":(0,h.t)("Transaction Complete",null,{project:"scripts-v6.damask"}),"strings.message":p.Lang.sub(_,m),position:p.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,showOverlay:!0}).show()}},{ATTRS:{siteContext:{valueFn:function(){return window.Static.SQUARESPACE_CONTEXT}},damask:{},cancelled:{value:!1},strings:{value:{productLineChangeConfirmationMessage:(0,h.t)(`You've changed from <strong data-test="billing-cycle-confirm-change__prevProductLine">{prevProductLineLabel}: {prevPlanName} plan</strong> to <strong data-test="billing-cycle-confirm-change__newProductLine">{newProductLineLabel}: {newPlanName} plan</strong>. Your website will renew on {nextBillDate}.`,null,{project:"scripts-v6.damask"}),periodChangeConfirmationMessage:(0,h.t)(`You've changed your billing cycle from <strong data-test="billing-cycle-confirm-change__prevPeriodName">{prevPeriodName}</strong> to <strong data-test="billing-cycle-confirm-change__newPeriodName">{newPeriodName}</strong>. Your website will renew on {nextBillDate}.`,null,{project:"scripts-v6.damask"}),planChangeConfirmationMessage:(0,h.t)(`You've changed from the <strong data-test="confirm-plan-change__prevPlanName">{prevPlanName} plan</strong> to the <strong data-test="confirm-plan-change__newPlanName">{newPlanName} plan</strong>.`,null,{project:"scripts-v6.damask"}),websiteCanceled:(0,h.t)("We have canceled your website subscription. You can get all of your content back at any time by subscribing again.",null,{project:"scripts-v6.damask"})}},websiteSettings:{valueFn:function(){return this.get("siteContext.websiteSettings")},setter:function(m){return p.instanceOf(m,p.Squarespace.Models.WebsiteSettings)?m:new p.Squarespace.Models.WebsiteSettings(m)}}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-models-website-settings","squarespace-singletons-location","squarespace-ss-widget","squarespace-terms-of-service-overlay","squarespace-util","squarespace-util-authenticated","squarespace-widgets-alert","squarespace-widgets-confirmation","widget-parent"]})},417319:function(){YUI.add("squarespace-damask-panel-async-data-panel",function(c){c.namespace("Squarespace.Damask.Panel"),c.Squarespace.Damask.Panel.AsyncDataPanel=c.Base.create("AsyncDataPanel",c.Squarespace.SSWidget,[],{CONTENT_TEMPLATE:null,initializer:function(){this.get("boundingBox").setStyles({left:this.get("offset"),width:this.get("width")}).addClass("sqs-damask-panel"),this.getPanel(this.get("location.params"),this.done.bind(this),this.redirect.bind(this))},destructor:function(){this.widget&&(this.widget.destroy(!0),this.widget=null),this.get("spinner").destroy(!0)},getPanel:function(){throw new Error("getPanel must be implemented.")},redirect:function(b){setTimeout((function(){this.get("router").replace(b)}).bind(this),0)},done:function(b){if(!this.get("destroyed")){this.widget=b,this.get("spinner").stop();var t=this.get("boundingBox");t.removeClass("sqs-damask-panel"),this.widget.set("location",this.get("location")),this.widget.set("damask",this.get("damask")),this.widget.set("router",this.get("router")),this.widget.set("direction",this.get("direction")),this.widget.set("widthCallback",this.get("widthCallback")),this.widget.render(t)}}},{CSS_PREFIX:"async-data-panel",ATTRS:{damask:{},location:{},offset:{},router:{},width:{},widthCallback:{},spinner:{valueFn:function(){return new c.Squarespace.Spinner({color:"dark",size:"extra-large",render:this.get("boundingBox")})}},direction:{}}})},"1.0",{requires:["base","squarespace-spinner","squarespace-ss-widget"]})},452527:function(){YUI.add("squarespace-damask-panel-menu-item",function(c){c.namespace("Squarespace.Damask.Panel");var b=c.Squarespace.Damask.Panel.MenuItem=c.Base.create("MenuItem",c.Squarespace.SSWidget,[c.Squarespace.Damask.Panel.MixinPusher],{renderUI:function(){b.superclass.renderUI.apply(this,arguments),this.get("contentBox").setAttribute("data-label",this.get("name")),this.get("contentBox").setAttribute("data-test","menuItem-"+this.get("name")),this.get("contentBox").append('<div class="title"></div>'),this._initToolTip(this.get("tip"))},syncUI:function(){b.superclass.syncUI.apply(this,arguments);var t=this.get("contentBox"),l=this.getAttrs(["label","href","target"]),d=l.label;c.Lang.isValue(l.href)&&(d=c.Lang.sub('<a href="{href}" target="{target}">{label}</a>',l)),t.one(".title").setContent(d)},destructor:function(){c.Lang.isValue(this.toolTip)&&(this.toolTip.destroy(),this.toolTip=null)},_initToolTip:function(t){if(c.Lang.isObject(t)){var l=c.merge(t,{target:this.get("contentBox")});this.toolTip=new c.Squarespace.ToolTip(l)}}},{CSS_PREFIX:"sqs-damask-menu-item",ATTRS:{label:{validator:c.Squarespace.AttrValidators.isString},tip:{validator:c.Squarespace.AttrValidators.isObject},target:{value:"_blank"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-pusher","squarespace-ss-widget","squarespace-ui-base"]})},543775:function(c,b,t){"use strict";var l=t(408549);YUI.add("squarespace-damask-panel-mixin-panel-parent",function(d){d.namespace("Squarespace.Damask.Panel");var o=d.Squarespace.Damask.Panel.MixinPanelParent=d.Base.create("MixinPanelParent",d.Base,[],{destructor:function(){d.Object.each(this.get("pushers"),function(e){e.removeTarget(this)},this),d.Object.each(this.get("activeEvents"),function(e){d.Array.invoke(e,"detach")})},getPusherByName:function(e){var a=d.Object.getValue(this.get("pushers"),e);return d.Lang.isValue(a)?a:null},activatePusherByName:function(e,a){var r=this.getPusherByName(e);r&&this.activatePusher(r)},activatePusher:function(e){e.set("active",!0,{source:"activatePusherByName"})},_registerPushers:function(){d.Array.each(this._getRenderedPushersArray(),this._registerPusher,this)},_registerPusher:function(e){var a=this.get("pushers");if(e.get("isPusher")){var r=e.get("name"),s=o.ensureTrailingSlash(this.get("location.pathname")),n=e.get("path")?e.get("path"):s+r;e.set("pathname",n),e.set("router",this.get("router")),d.Lang.isValue(r)?d.Object.hasKey(a,r)&&(this.get("LOG").warn((0,l.Z)("Pusher `name` ATTR duplicate detected: `{name}` Rebinding active change events.",{name:r})),this._unbindActiveChangeEvents(r)):this.get("LOG").warn("Pusher `name` ATTR missing: "+e),a[r]=e,this._bindActiveChangeEvents(e,r)}},_renamePusher:function(e,a,r){var s=this.get("pushers"),n=this.get("activeEvents");r||(r=e.get("name")),e.set("name",a),s[a]=e,n[a]=n[r],delete n[r],delete s[r]},_deregisterPusher:function(e){var a=e.get("name");this._unbindActiveChangeEvents(a),delete this.get("pushers")[a]},_bindActiveChangeEvents:function(e,a){if(!d.Object.hasKey(this.get("activeEvents"),a)){var r="activeChange";this.get("activeEvents")[a]=[e.before(r,this._beforeActiveChange,this),e.after(r,this._afterActiveChange,this)]}},_unbindActiveChangeEvents:function(e){var a=this.get("activeEvents");d.Array.each(a[e],function(r){r.detach()}),delete a[e]},_getRenderedPushersArray:function(){return this.get("LOG").error("_getRenderedPushersArray called but not implemented"),[]},_beforeActiveChange:function(e){if(e.newVal&&!e.prevVal&&!this.get("inView")){e.halt();return}e.source!=="activatePusherByName"&&(e.prevVal||!e.newVal||d.Lang.isBoolean(e.force)&&e.force||(e.halt(),e.target.set("active",!0,{force:!0})))},_afterActiveChange:function(e){if(e.source==="activatePusherByName"){e.halt();return}e.newVal&&this.activatePusherByName(e.target.get("name"))}},{ensureTrailingSlash:function(e){return e.slice(-1)==="/"?e:e+"/"},ATTRS:{LOG:{valueFn:function(){return new d.Squarespace.Debugger({name:this.name})}},pushers:{value:{},validator:d.Squarespace.AttrValidators.isObject},activePanel:{validator:d.Squarespace.AttrValidators.isNullOrInstanceOf(d.Squarespace.Widgets.SSWidget)},activeEvents:{value:{},validator:d.Squarespace.AttrValidators.isObject},location:{},title:{validator:d.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","promise","squarespace-attr-validators","squarespace-damask-menu-make","squarespace-damask-panel-menu-item","squarespace-debugger","squarespace-ss-widget"]})},250100:function(c,b,t){"use strict";var l=t(458327);const o={INCOMING:{LEFT:"incomingLeft",RIGHT:"incomingRight"},OUTGOING:{LEFT:"outgoingLeft",RIGHT:"outgoingRight"},INCOMING_PANEL:"incomingPanel"};var e=t(798589),a=t(174161),r=t(233284),s=t(539799),n=t(482212),i=t(476319),u=t(865428);YUI.add("squarespace-damask-panel-mixin-panel",function(h){h.namespace("Squarespace.Damask.Panel"),h.Squarespace.Damask.Panel.MixinPanel=h.Base.create("MixinPanel",h.Base,[],{initializer:function(){this._beforeRenderUIEvent=h.Do.before(this._addCssClassNames,this,"renderUI",this),this._afterRenderUIEvent=h.Do.after(this.applyOffsets,this,"renderUI",this),this.after("inViewChange",function(g){this.get("boundingBox").toggleClass("sqs-panel-in-view",g.newVal)}),this.after("dirtyChange",this._renderMenuHeader),setTimeout((function(){this._renderMenuHeader()}).bind(this),300),this._bindInViewCalculation()},_renderMenuHeader:function(){var g,p;this.get("menuHeaderChildWidget")&&(p=a.createRef(),g=a.createElement("div",{ref:p})),r.render(a.createElement(n.Z.Provider,{value:this.get("router")},a.createElement(i.Z.Provider,{value:this.get("location")},a.createElement(s.Z,{isDirty:this.get("dirty"),onSaveClick:this._initSaveChanges?this._initSaveChanges.bind(this):null,onDiscardClick:this._discardChanges?this._discardChanges.bind(this):null,router:this.get("router"),location:this.get("location"),children:g}))),this.get("menuHeaderNode").getDOMNode(),(function(){p&&setTimeout((function(){this.get("menuHeaderChildWidget").render(p.current)}).bind(this),0)}).bind(this))},destructor:function(){this.cacheScrollTop(),this._recalculateTimeout&&this._recalculateTimeout.cancel(),h.Lang.isValue(this._beforeRenderUIEvent)&&(this._beforeRenderUIEvent.detach(),this._beforeRenderUIEvent=null),h.Lang.isValue(this._afterRenderUIEvent)&&(this._afterRenderUIEvent.detach(),this._afterRenderUIEvent=null),h.Lang.isValue(this.get("menuHeaderChildWidget"))&&this.get("menuHeaderChildWidget").destroy(!0);var g=this.get("menuHeaderNode").getDOMNode();h.Lang.isValue(g)&&r.unmountComponentAtNode(g),this.get("menuHeaderNode").destroy(!0)},cacheScrollTop:function(){this.get("router").saveScrollTop(this.get("location.key"),this.get("contentBox").get("scrollTop"))},applyOffsets:function(){var g=this.get("location.key"),p=this.get("router").getScrollTop(g),f=this.get("offset");p&&this.get("contentBox").set("scrollTop",p),f&&this.get("boundingBox").setStyle("left",f)},_addCssClassNames:function(){if(this.get("boundingBox").addClass("sqs-damask-panel"),this.get("contentBox").addClass("sqs-damask-panel-content"),setTimeout((function(){this.get("boundingBox").addClass(o.INCOMING_PANEL)}).bind(this),50),e.isSubDesktop()){var g=o.INCOMING[this.get("direction")];this.get("boundingBox").addClass(g)}(0,u.Z)()&&this.get("boundingBox").addClass("sqs-app")},_bindInViewCalculation:function(){this._registerEvent(h.Do.after(function(){this._recalculateTimeout=h.later(400,this,this._updateInView)},this,"renderUI",this)),this.after("activePanelChange",this._updateInView,this)},_updateInView:function(){this.set("inView",!h.Lang.isValue(this.get("activePanel")))}},{ATTRS:{damask:{validator:function(g){return h.Lang.isObject(g)}},animationEnabled:{value:!0,validator:h.Squarespace.AttrValidators.isBoolean},inView:{value:!1,validator:h.Squarespace.AttrValidators.isBoolean},panelPathName:{value:"",validator:h.Squarespace.AttrValidators.isNullOrString},siteContext:{valueFn:function(){return window.Static.SQUARESPACE_CONTEXT}},urlAddressable:{value:!0,validator:h.Squarespace.AttrValidators.isBoolean},isSaving:{value:!1,validator:h.Squarespace.AttrValidators.isBoolean,readOnly:!0},isReverting:{value:!1,validator:h.Squarespace.AttrValidators.isBoolean,readOnly:!0},menuHeaderNode:{valueFn:function(){return new h.Node.create("<div>")}},menuHeaderChildWidget:{},protectChanges:{value:!1,validator:h.Squarespace.AttrValidators.isBoolean,readOnly:!0},location:{},router:{},offset:{value:0},direction:{}}})},"1.0",{requires:["base","promise","squarespace-attr-validators","squarespace-promises"]})},542889:function(c,b,t){"use strict";var l=t(860921),d=t.n(l);YUI.add("squarespace-damask-panel-mixin-pusher",function(o){o.namespace("Squarespace.Damask.Panel"),o.Squarespace.Damask.Panel.MixinPusher=o.Base.create("MixinPusher",o.Base,[],{initializer:function(){this._afterPusherBindUIEvent=o.Do.after(this._bindActiveChanges,this,"bindUI",this),this._afterPusherSyncUIEvent=o.Do.after(this._syncActiveState,this,"syncUI",this)},destructor:function(){this._afterPusherBindUIEvent.detach(),this._afterPusherSyncUIEvent.detach()},push:function(e){this.get("activationPromise")().then(o.bind(this._activate,this,e),o.bind(this._dontActivate,this,e))},_bindActiveChanges:function(){this._registerPushEvent(),this.after("activeChange",function(e){this._syncActiveState(e.newVal)})},_registerPushEvent:function(){this._registerEvent(this.get("contentBox").on("click",this.push,this))},_activate:function(e){var a=this.get("pathname"),r=this.get("router");r.cacheAttrs(a,this.get("childPanelConfig")),r.push(a)},_dontActivate:d(),_syncActiveState:function(e){var a=this.get("boundingBox"),r=this.getClassName("selected"),s=o.Lang.isBoolean(e)&&e||this.get("active");a.toggleClass(r,s)}},{ATTRS:{active:{value:!1,validator:o.Squarespace.AttrValidators.isBoolean},childPanelConfig:{value:null,validator:o.Squarespace.AttrValidators.isNullOrObject},isPusher:{value:!0,readOnly:!0,validator:o.Squarespace.AttrValidators.isBoolean},name:{validator:o.Squarespace.AttrValidators.isString},pathParams:{value:null,validator:o.Squarespace.AttrValidators.isNullOrObject},href:{validator:o.Squarespace.AttrValidators.isNullOrString},newWindow:{value:!1,validator:function(e){return o.Squarespace.AttrValidators.isBoolean(e)&&o.Lang.isValue(this.get("href"))}},path:{validator:o.Squarespace.AttrValidators.isNullOrString},pathname:{},router:{},activationPromise:{validator:o.Squarespace.AttrValidators.isFunction,value:function(){return o.when(null)}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-singletons-location","squarespace-util"]})},206577:function(){YUI.add("squarespace-damask-panel-panel-pusher",function(c){c.namespace("Squarespace.Damask.Panel"),c.Squarespace.Damask.Panel.PanelPusher=c.Base.create("PanelPusher",c.Squarespace.Widgets.SSWidget,[c.Squarespace.Damask.Panel.MixinPusher],{bindUI:function(){this.after(["titleChange","descriptionChange","isDisabledChange"],this.syncUI,this)},syncUI:function(){var b=this.get("contentBox");b.one(".title").setContent(this.get("title")),b.one(".description").setContent(this.get("description"));var t=this.get("boundingBox");t.setAttribute("data-name",this.get("name")),t.setAttribute("data-test","sqs-panel-pusher"),b.one(".panel-pusher").toggleClass("disabled",this.get("isDisabled")).toggleClass("hasError",this.get("hasError"))}},{CSS_PREFIX:"sqs-panel-pusher",TEMPLATE:'<div class="panel-pusher" data-test="panel-pusher-content"><div class="title"></div><div class="description"></div></div>',ATTRS:{readOnly:{value:!0,readOnly:!0},title:{validator:c.Squarespace.AttrValidators.isString},description:{validator:c.Squarespace.AttrValidators.isNullOrString},isDisabled:{validator:c.Squarespace.AttrValidators.isBoolean,value:!1},hasError:{validator:c.Squarespace.AttrValidators.isBoolean,value:!1}}})},"1.0",{requires:["base","squarespace-damask-panel-mixin-pusher","squarespace-ss-widget"]})},429901:function(c,b,t){"use strict";var l=t(24175),d=t.n(l),o=t(834304),e=t.n(o),a=t(221923),r=t(516614),s=t(723796),n=t(409790),i=s.Em.createWarningLogger("content-bridge");YUI.add("squarespace-damask-preview-content-bridge",function(u){u.namespace("Squarespace.Damask.Preview");var h=u.Squarespace.Damask.Preview.ContentBridge=u.Base.create("contentBridge",u.Base,[],{initializer:function(){this.LOG=new u.Squarespace.Debugger({name:this.name,output:!1}),this._events={controller:[],contentItem:[],contentItemEditor:[]},this._publishEvents()},destructor:function(){this._cleanup()},_detachEventsFrom:function(g){for(;g.length;){var p=g.pop();try{p.listener.detach()}catch{}}},_unbindContentItemEvents:function(){this._detachEventsFrom(this._events.contentItem)},_unbindContentItemEditorEvents:function(){this._detachEventsFrom(this._events.contentItemEditor)},_publishEvents:function(){this.publish("cmcDiscard70"),this.publish("contentItemSave"),this.publish("collectionSave")},changeContent:function(g){this._cleanup(),this.set("staticContext",g.Static);var p=g.Y.Squarespace.Frontend,f=p?p.ContentModeController:null;f&&(this.set("controller",f),this._bindControllerEvents(),this._updateCollection(),this._updateContentItem())},getContentItemFieldsToHide:function(){return this.get("controller").getDamaskHideFields()},showContentItemEditor:function(g){if(!u.Lang.isValue(g))return i("_showContentItemEditor called but no contentItem found."),!1;var p=this.get("id");g.detach(p+"|*");var f=g.on(p+"|save",function(m){if(!u.Lang.isValue(u.Object.getValue(m,"options.headers.X-AutoSave".split(".")))){var _=this.get("collection").get("fullUrl"),v=u.Object.getValue(m,["parsed","urlId"]),E=_+v;this.fire("contentItemSave",{url:E})}},this);this._events.contentItemEditor.push({name:"saveContentItem",listener:f}),g.load(u.bind(function(){var m=this._initActiveContentItem(g);this._events.contentItemEditor.push({name:"deactivateEditorBeforeDestroy",listener:m.before("destroy",this._deactivateContentItemEditor,this)}),m.show()},this))},_cleanup:function(){try{this._unbindControllerEvents(),this._unbindContentItemEvents(),this._unbindContentItemEditorEvents(),this.setAttrs({staticContext:null,controller:null,contentItem:null,collection:null})}catch{}},_bindControllerEvents:function(){this._unbindControllerEvents();var g=this.get("controller");if(!u.Lang.isValue(g)){i("Could not find the ContentModeController in the frame!");return}g.getTargets().includes(this)||g.addTarget(this);var p=this.get("id");this._events.controller.push({name:"controllerRequestDiscardChanges",listener:g.on(p+"|*:request-discard-changes",function(){this.fire("cmcDiscard70")},this)},{name:"controllerContextCollectionChange",listener:g.on(p+"|contextCollectionChange",function(f){f.newVal?this.set("collection",f.newVal):this._updateCollection()},this)})},_unbindControllerEvents:function(){this._detachEventsFrom(this._events.controller);var p=this.get("controller");u.Lang.isValue(p)&&p.removeTarget(this)},_bindContentItemEditorEvents:function(){this._events.contentItemEditor.push({name:"showContentItemEditor",listener:this.get("controller").on("*:showContentItemEditor",function(g){if(!u.Lang.isString(g.itemId)||!u.Lang.isString(g.collectionId)){i("showContentItemEditor fired without a itemId or collectionId.");return}this.showContentItemEditor(new u.Squarespace.Models.ContentItem({id:g.itemId,collectionId:g.collectionId}))},this)})},_updateCollection:function(){var g=u.Object.getValue(Static,["SQUARESPACE_CONTEXT","accessPermissions"]),p=d().CONFIG_CONTENT_MANAGER;if(!(!g||!g.includes(p))){var f=null,m=u.Squarespace.ContentCollectionCache,_=this._getCollectionFromController();u.Lang.isValue(_)||(_=this._getCollectionFromContext()),f=m.getCollectionFromData(_),f&&f.load((function(){u.Env&&u.bind(this._bindContentItemEditorEvents,this)}).bind(this)),this.set("collection",f)}},_getCollectionFromController:function(){var g=this.get("controller");if(!u.Lang.isValue(g))return null;var p=g.get("contextCollection");return u.Lang.isValue(p)?p.toJSON():null},_getCollectionFromContext:function(){var g=this.get("staticContext.SQUARESPACE_CONTEXT.collection");return u.Lang.isObject(g)?(0,a.Z)(g):null},_updateContentItem:function(){this._unbindContentItemEvents();var g=this.get("staticContext.SQUARESPACE_CONTEXT.item");if(!(!u.Lang.isValue(g)||!u.Lang.isValue(g.id))){var p=this.get("collection");u.Lang.isValue(p)&&(this.set("contentItem",p.items.getById(g.id)||null),this._bindContentItemEvents())}},_bindContentItemEvents:function(){var g=this.get("collection");u.Lang.isValue(g)&&this._events.contentItem.push({name:"fireOnRemoved",listener:g.items.on("remove",function(p){this.get("contentItem")===p.model&&this.fire("contentItemRemove",{collectionUrl:g.get("urlId")})},this)},{name:"fireOnBulkRemove",listener:g.items.on("bulk-remove",function(p){p.target.indexOf(this.get("contentItem"))!==-1&&this.fire("contentItemRemove",{collectionUrl:g.get("urlId")})})})},_initActiveContentItem:function(g){return h.buildContentItemEditor(g,this.get("contentBox"),this.getContentItemFieldsToHide())},ensureCollectionInStackedIndexIsOnScreen:function(g,p,f){this.get("controller")&&this.get("controller").ensureCollectionInStackedIndexIsOnScreen(g,p,f)},getCollectionUrl:function(g){return h.getCollectionUrl(g)}},{getCollectionUrl:function(g){var p="/"+g.get("urlId"),f=h.getIndexCollectionUrl(g);return u.Lang.isString(f)&&g.get("enabled")&&(p=f),!f&&g.get("id")===r.Z.getHomepageCollectionId()&&(p="/"),p},_getIndexCollectionHashUrl:function(g){if(!u.Squarespace.Navigation.ListUtils.isCollectionInIndex(g))return null;var p=u.Squarespace.Navigation.ListUtils.getParentCollection(g),f=h.getCollectionUrl(p);f==="/"&&(f="");var m=p?p.getTemplateConfiguration().get("indexCollectionHashUrlTemplate"):null;if(!m)return f+"/#/"+g.get("urlId");var _=(0,n.db)(m,{collection:g.toJSON()});return f+"/"+_},getIndexCollectionUrl:function(g){var p=this._getCollectionUrlFromNavigation(g),f=u.Squarespace.Navigation.ListUtils.getIndexCollectionForCollection(g);if(f&&f.getTemplateConfiguration().get("indexType")===e().FULL_URL)return"/"+g.get("urlId");if(!u.Lang.isValue(p))return this._getIndexCollectionHashUrl(g);var m=(0,n.db)(p,{collection:g.toJSON()}),_=h.getCollectionUrl(f);return _+m},_getCollectionUrlFromNavigation:function(g){var p=u.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(g.get("id"));if(!u.Lang.isValue(p))return null;var f=p.getFolderItemList();if(!u.Lang.isValue(f))return null;var m=f.getNavigationItem();if(!u.Lang.isValue(m))return null;var _=m.get("collection");if(!u.Lang.isValue(_))return null;var v=_.getTemplateConfiguration();return u.Lang.isValue(v)?v.get("indexConfiguration.collectionUrl"):null},buildContentItemEditor:function(g,p,f){var m={},_=u.Squarespace.ContentItemEditorFactory.getEditor(g,m);return new _({model:g,render:p,hideFields:f})},ATTRS:{staticContext:{},controller:{},collection:{},contentItem:{}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-item-types-editor","squarespace-content-manager-navigation-ui-utils","squarespace-debugger","squarespace-fluent-confirmation","squarespace-model-editor","squarespace-models-content-item","squarespace-models-template-navigation-list","squarespace-util"]})},60276:function(c,b,t){"use strict";var l=t(714487),d=t(387582),o=t(994336),e=t.n(o),a=t(284443),r=t.n(a),s=t(912959);YUI.add("squarespace-damask-preview-footer",function(n){var i={TOGGLE_DISABLE_SCRIPTS:"toggle-disable-scripts",ENABLE_COLLECTION:"enable-collection"};n.namespace("Squarespace.Damask.Preview"),n.Squarespace.Damask.Preview.Footer=n.Base.create("DamaskPreviewFooter",n.Squarespace.SSWidget,[],{initializer:function(){this.publish("requestFrameRefresh"),this.publish("foundYInFrameChange",{broadcast:2}),this.publish("enableScriptsInPreview",{broadcast:2}),this.publish("disableScriptsInPreview",{broadcast:2})},renderUI:function(){this.get("contentBox").append('<span class="message"></span>').append('<span class="action"></span>')},bindUI:function(){this.after("foundYInFrameChange",this.syncUI,this),this.after("collectionIsEnabledChange",this.syncUI,this),n.Global.on("deviceView:change",this.syncUI,this),this.get("contentBox").delegate("click",function(u){var h=u.target.getAttribute("data-action");if(h===i.TOGGLE_DISABLE_SCRIPTS)this._toggleDisableScripts();else if(u.target.getAttribute("data-action")===i.ENABLE_COLLECTION){var g=new n.Squarespace.Widgets.Confirmation({"strings.message":"Make this page visible to visitors?"});g.on("confirm",this._enableCollection.bind(this))}},".action",this)},_toggleDisableScripts:function(){this._toggleCookie()?this.fire("disableScriptsInPreview"):this.fire("enableScriptsInPreview"),this.fire("requestFrameRefresh"),this.syncUI()},_enableCollection:function(){var u=this.get("contentBridge").get("collection").get("id"),h=n.Squarespace.ContentCollectionCache.getById(u);h.load((function(){h.set("enabled",!0),h.save((function(g){g&&g.errors&&g.errors.urlId?new n.Squarespace.Widgets.Alert({"strings.title":this.get("strings.urlIdErrorTitle"),"strings.message":this.get("strings.urlIdErrorMessage")}):h.get("enabled")!==!0?(0,s.Z)():this.fire("requestFrameRefresh")}).bind(this))}).bind(this))},syncUI:function(){var u=this._getFooterParams();if(u){var h=this.get("boundingBox");h.setAttribute("data-action-name",u.action);var g=this.get("contentBox");g.one(".message").setContent(u.message);var p=g.one(".action");p.setContent(u.actionMessage),p.setAttribute("data-action",u.action)}var f=n.one("html"),m=!!u&&!(f.hasClass("device-view-phone")||f.hasClass("device-view-tablet"));this.set("visible",m)},_getFooterParams:function(){var u=window.Static.SQUARESPACE_CONTEXT.website.websiteType;return u===r().PARKING_PAGE?null:this.isDisableScriptsCookieSet()?{message:(0,l.t)("Scripts have been disabled on your site preview.",null,{project:"scripts-v6.damask"}),actionMessage:(0,l.t)("Enable Scripts in Preview",null,{project:"scripts-v6.damask"}),action:i.TOGGLE_DISABLE_SCRIPTS}:this.get("foundYInFrame")?this.get("collectionIsEnabled")?null:{message:(0,l.t)("This disabled page doesn't appear to visitors.",null,{project:"scripts-v6.damask"}),actionMessage:(0,l.t)("Enable page",null,{project:"scripts-v6.damask"}),action:i.ENABLE_COLLECTION}:{message:(0,l.t)("We detected an error loading your site preview. This is usually caused by injected code.",null,{project:"scripts-v6.damask"}),actionMessage:(0,l.t)("Disable Scripts in Preview",null,{project:"scripts-v6.damask"}),action:i.TOGGLE_DISABLE_SCRIPTS}},_toggleCookie:function(){return e().get(d.Z.DISABLE_USER_SCRIPTS_COOKIE)?(e().set(d.Z.DISABLE_USER_SCRIPTS_COOKIE,"",{expires:new Date(0),path:"/"}),!1):(e().set(d.Z.DISABLE_USER_SCRIPTS_COOKIE,!0,{path:"/"}),!0)},isDisableScriptsCookieSet:function(){return n.Lang.isValue(e().get(d.Z.DISABLE_USER_SCRIPTS_COOKIE))}},{CSS_PREFIX:"sqs-damask-preview-footer",ATTRS:{frame:{},foundYInFrame:{value:!0},visible:{value:!1},collectionIsEnabled:{value:!0},contentBridge:{},strings:{value:{urlIdErrorTitle:(0,l.t)("Duplicate URL Slug",null,{project:"scripts-v6.damask"}),urlIdErrorMessage:(0,l.t)("This page has a duplicate URL. Choose another.",null,{project:"scripts-v6.damask"})}}}})},"1.0",{requires:["base","squarespace-ss-widget"]})},209532:function(c,b,t){"use strict";var l=t(174161),d=t(233284),o=t(461761),e=t.n(o),a=t(714487),r=t(916661),s=t(419757),n=t(865428),i=t(480433),u=t.n(i),h=t(347560),g=t(324270),p=t(284443),f=t.n(p),m=t(808890),_=t(245945),v=t(745237),E=t(759352),S=t(723796),y=t(489204),C=t(787592),O=t(457811),A=t(134521),I=t.n(A),D=t(413019),T=t(69637),B=t(337061),N=t(897820),P=t(938077),x=t(472575),R=t(874644),w=S.Em.createLogger("frame-base","hotpink");function k(q){var F=window.Cypress;return(0,E.Iv)(q)||F&&q.match("localhost")}YUI.add("squarespace-damask-preview-frame-base",function(q){q.namespace("Squarespace.Damask.Preview").FrameBase=q.Base.create("preview-base",q.Squarespace.Widgets.SSWidget,[q.WidgetChild,q.WidgetParent],{initializer:function(){this._bridgeEvents=[],this._frameFooter=new q.Squarespace.Damask.Preview.Footer({frame:this,contentBridge:this.get("contentBridge")}),this.addActionListeners(),new q.Squarespace.Damask.Preview.AnnouncementBarBridge},destructor:function(){this._retuckTimeout&&this._retuckTimeout.cancel(),this.actionListener.removeAllActionListeners(),this.actionListener=null,this._unbindBridgeEvents(),this.confirmationMountNode&&this.confirmationMountNode.remove()},renderUI:function(){var F=this.get("contentBox");this._frameFooter.render(F)},bindUI:function(){var F=this.get("router");r.Z.isSevenOne()||F.onBeforeChange((function(j,X){var J=F.match(j.pathname),Q=J&&(J.width===y.Z.FULL||J.width===y.Z.FULL_WITHOUT_TUCKED_FRAME),ie=(0,P.aEP)((0,B.d6)());if(!(0,R.qN)(ie)){X();return}var ce=j.state&&j.state.frameUrl?j.state.frameUrl===this.get("url"):!0;if(!Q&&ce){X();return}var pe=(function(){this._discardChangesAndDisableEditing({skipRefresh:!0}),X()}).bind(this),ye=function(){X(!1)};if((0,P.Z3A)((0,B.d6)())){this._showRosettaHasChangesConfirmation(pe,ye);return}pe()}).bind(this)),this.after("urlChange",function(z){if(w("url changed",z),z.source==="onIframeLoaded"){this.get("router").pushFrameUrl(z.newVal);return}this.get("iframe")&&this.get("iframe").get("contentWindow")?this._syncFrameUrl():this.get("iframe").once("load",this._syncFrameUrl,this)}),this.on("*:refresh",function(z){this.requestRefresh({reason:"heard *:refresh",e:z})},this),this._handleEditModeEscManager((0,P.LwX)((0,B.d6)())),this._registerEvent({detach:(0,B.gH)(P.LwX,this._handleEditModeEscManager.bind(this))}),q.Global.after("newCollection",function(){this.requestRefresh("newCollection")},this),this._bindFrameFooter()},syncUI:function(){this._syncFrameUrl()},addActionListeners:function(){this.actionListener=new(u())(h.Z),this.actionListener.addActionListener(g.default.REFRESH,this.requestRefresh.bind(this)),this.actionListener.addActionListener(g.default.SET_URL,(function(z){setTimeout(this.setUrlOrRequestRefresh.bind(this,z),0)}).bind(this)),this.actionListener.addActionListener(_.Z.UPDATE,(function(F){var z=this.getWebsiteOverlaysManager();z&&z.set(F.field,F.value)}).bind(this))},_bindFrameFooter:function(){this._registerEvent(this._frameFooter.after("requestFrameRefresh",function(F){try{var z=this.get("iframe").get("contentWindow.location.href")==="about:blank";z?this.setUrlOrRequestRefresh("/"):this.setUrlOrRequestRefresh(this.get("url"))}catch(j){this.LOG.error("Issue refreshing the frame",j),q.config.win.location.reload()}},this))},_handleEditModeEscManager:function(F){if(F){if(this._removeEscManager)return;var z={close:q.bind(function(j,X){if(r.Z.isSevenOne()){if(!(0,P.Z3A)((0,B.d6)())){(0,x.I6)(x.ie);return}(0,B.GE)((0,N.fm)());var J=!1;X(J)}else this._confirmDone70(j,X)},this),ignoreBodyClicks:!0};q.Squarespace.EscManager.addTarget(z),this._removeEscManager=function(){q.Squarespace.EscManager.removeTarget(z),this._removeEscManager=null}}else this._removeEscManager&&this._removeEscManager()},_updateContentBridge:function(F){this._unbindBridgeEvents();var z=this.get("contentBridge");z.changeContent(F);var j=function(J){if(J.refresh===!0){this.requestRefresh("updateContentBridge.navigateAfterSave");return}q.Lang.isString(J.url)&&this.setUrlOrRequestRefresh(J.url)},X=function(J){q.Lang.isString(J.collectionUrl)&&this.set("url","/"+J.collectionUrl)};this._registerEvent({detach:(0,B.gH)(P.l34,this._syncContentModeController.bind(this,void 0))},{detach:(0,B.gH)(P.Z3A,this._syncContentModeController.bind(this,void 0))}),this._bridgeEvents=[z.on("cmcDiscard70",this._confirmDone70,this),z.on("collectionSave",j,this),z.on("contentItemSave",j,this),z.on("contentItemRemove",X,this)],this._syncContentModeController()},_unbindBridgeEvents:function(){q.Array.invoke(this._bridgeEvents,"detach"),this._bridgeEvents=[]},_syncFrameUrl:function(){this.LOG.time("load");var F=this.get("url");if(F){F=F.replace(/:/g,"%3A");var z=this.get("iframe").get("contentWindow.location.href"),j=(0,E.DW)(z),X=this.get("iframe").getAttribute("src");if(!(!k(z)&&X&&X===F)){if((0,E.oO)(F,z)){var J=(0,E.XR)(F);J&&(F=j+J)}this._updateFrameWithoutAddingToHistory(F)}}},_updateFrameWithoutAddingToHistory:function(F,z){var j=(0,E.$1)(F);if(!z&&(0,E.Yc)(j)){j.indexOf("#")===-1&&(j=j+"#");var X=this.get("iframe").get("contentWindow").getDOMNode().location,J=[X.protocol,"//",X.host,"/",j.replace(/^\//,"")].join("");J!==""+X&&(X.replace(J),document.body.scrollLeft=0);return}this.navigateIframeWithoutAddingToHistory(j)},navigateIframeWithoutAddingToHistory:function(F){var z=this.get("iframe");if(z.get("src")!==F){(0,B.GE)((0,N.hl)());var j=z.ancestor();z.remove(),z.set("src",F),j.append(z),this.get("router").pushFrameUrl(F)}},_frameMouseMoveHandler:function(F){var z=document.querySelector(".config-website-frame")||document.querySelector(".preview-viewport");z&&(q.Squarespace.Mouse.lastX=z.offsetLeft+F.clientX,q.Squarespace.Mouse.lastY=z.offsetTop+F.clientY,q.Squarespace.Mouse.client.lastX=q.Squarespace.Mouse.lastX,q.Squarespace.Mouse.client.lastY=q.Squarespace.Mouse.lastY,q.Squarespace.Mouse.isDebugging&&q.Squarespace.Mouse.debug())},onIframeLoaded:function(F){this.LOG.timeEnd("load");var z=null,j=null;try{z=this.get("iframe").get("contentWindow"),j=this.get("iframe").get("contentWindow.Y")}catch{}var X=q.bind(function(){if(z!==null){var ce=z.get("location"),pe=z.get("history");pe&&pe.scrollRestoration&&(pe.scrollRestoration="manual");var ye=ce.pathname;if(!k(ce.href)){if(ce.href==="about:blank")return;var Ae="The frameUrl: "+ye+" is invalid";w(Ae),(0,C.Tb)(Ae);return}q.Lang.isString(ce.search)&&ce.search.length>0&&(ye+=ce.search),q.Lang.isString(ce.hash)&&ce.hash.length>0&&(ye+=ce.hash),w("set url and finalize loading",{url:ye}),this.set("url",ye,{source:"onIframeLoaded"}),(0,C.n_)({category:"frame",message:"Frame finished loading "+ye,level:"debug"})}this.get("isLoadRequestFromRefresh")&&(0,D.L8)("frame-refresh",{tracer:T.Z}),(0,B.GE)((0,N.l2)()),q.one(q.config.doc.body).addClass("sqs-frame-loaded")},this);if(!j){var J=z&&z.get("document.body.className"),Q=q.Lang.isString(J)&&J.indexOf("squarespace-system-page")!==-1;Q||this._frameFooter.set("foundYInFrame",!1),Static.SQUARESPACE_CONTEXT.website.websiteType!==f().PARKING_PAGE&&this.LOG.error("Could not find Y on page... not continuing."),X();return}this.LOG.isInfoEnabled()&&this.LOG.info("onIframeLoaded (href: %s) (src: %s)",this.get("iframe").get("contentWindow.location.href"),this.get("iframe").getAttribute("src")),this._frameFooter.set("foundYInFrame",!0),this._throttledFrameMouseMoveHandler=I()(this._frameMouseMoveHandler,250),this._frameMouseMoveListener=j.one(j.config.doc).on("mousemove",this._throttledFrameMouseMoveHandler,this),this.LOG.time("Squarespace.onInitialize"),j.config.win.Squarespace.onInitialize(j,q.bind(function(){this.LOG.timeEnd("Squarespace.onInitialize"),this._updateContentBridge(j.config.win);var ce=this._timers=[];this._timerTimerHandle=q.Do.after(function(){ce.push(q.Do.originalRetVal)},j,"later"),j.IO.prototype._rS=function(pe,ye){var Ae=this;if(pe.c.readyState===4){if(ye.timeout&&Ae._clearTimeout(pe.id),!j.Env)return;j.later(0,this,function(){j.Env&&(Ae.complete(pe,ye),Ae._result(pe,ye))})}},this._frameLinkClickHandle=j.one(j.config.doc.body).delegate("click",this._frameLinkClick,"a",this),this._frameUnloadHandle=z.on("unload",this._frameUnload,this),j.Get.css("https://assets.squarespace.com/universal/fonts/squarespace-clarkson-v2.css"),this._frameHashChangeHandle=j.one(j.config.win).on("hashchange",function(){var pe=z.get("location");this.set("url",pe.pathname+pe.search+pe.hash,{source:"onIframeLoaded"})},this),this._syncFrameClassnames(),this._syncTitle(),this._syncContentModeController(),X()},this))},_frameUnload:function(F){w("frame unloaded",F),(0,C.n_)({category:"frame",message:"Frame fired unload event",level:"debug"});var z=F.currentTarget,j=z.getDOMNode(),X=j.Y,J=j.Squarespace,Q=j.top.Y.Node._instances,ie=j.onbeforeunload;ie&&ie({}),q.Array.each(this._timers,function(pe){pe.cancel()}),this._timerTimerHandle.detach(),this._timerTimerHandle=null,this._timers=[],this._throttledFrameMouseMoveHandler&&this._throttledFrameMouseMoveHandler.cancel(),this._frameMouseMoveListener&&this._frameMouseMoveListener.detach(),(0,x.I6)(x.fv),q.Object.each(m.Z,function(pe){q.Global.detach(pe)}),J.globalDestroy(X),this._removeDetachedNodeCache(j,Q),z.destroy(!0),this.get("contentBridge").destroy(),q.Lang.isValue(this.getWebsiteOverlaysManager())&&(this.getWebsiteOverlaysManager().removeTarget(this),this.getWebsiteOverlaysManager().destroy(!0)),this._frameLinkClickHandle.detach(),this._frameLinkClickHandle=null,this._frameHashChangeHandle.detach(),this._frameHashChangeHandle=null,this._frameUnloadHandle.detach(),this._frameUnloadHandle=null,X.Anim.stop(),X.detachAll(),X.destroy();for(var ce in J)J[ce]=null},_removeDetachedNodeCache:function(F,z){delete z[F.document._yuid];for(var j in z){var X=z[j]._node;X&&X.isConnected===!1&&delete z[j]}},_frameLinkClick:function(F){var z=F.currentTarget,j=z.getAttribute("target"),X=z.getAttribute("href"),J=!!z.getAttribute("data-allow-link-click");if(!(F._event.defaultPrevented||J)){if((0,P.LwX)((0,B.d6)())){F.preventDefault();return}var Q=(0,E.n3)(X);switch(Q){case v.Z.SAME_PAGE_ANCHOR:var ie=X.split("#"),ce=ie[ie.length-1];F.halt(),this._updateFrameWithoutAddingToHistory(this.get("pathname")+"#"+ce);break;case v.Z.ANCHOR:F.halt(),this._updateFrameWithoutAddingToHistory(this.get("pathname")+X);break;case v.Z.EMPTY_STRING:F.halt();break;case v.Z.MALFORMED_PROTOCOL:F.preventDefault();break;case v.Z.MISC_PROTOCOL:break;case v.Z.CONTENT_LINK:F.preventDefault(),this._updateFrameWithoutAddingToHistory(X);break;case v.Z.EXTERNAL_LINK:case v.Z.FILE_LINK:default:(!q.Lang.isValue(j)||j!=="_blank"&&j!=="_top")&&z.setAttribute("target","_top")}}},_syncFrameClassnames:function(){var F=this.get("iframe").get("contentWindow.Y"),z=F.one("html");z.removeClass("squarespace-cameron"),z.addClass("squarespace-damask"),z.addClass((0,s.d)())},_syncTitle:function(){if(Static.SQUARESPACE_CONTEXT.website.websiteType!==f().PARKING_PAGE){var F=this.get("iframe").get("contentWindow.document.title");q.Lang.isString(F)&&q.one("title").setContent(q.Escape.html(F))}},getWebsiteOverlaysManager:function(){if(!this.get("iframe"))return null;var F=this.get("iframe").getDOMNode();return!F||!parent.document.body.contains(F)?null:e()(F,"contentWindow.Y.Squarespace.Singletons.WebsiteOverlaysManager",null)},_syncContentModeController:function(){q.config.doc.body.scrollTop=0;var F=this.get("contentBridge").get("collection");F&&!F.get("enabled")?this._frameFooter.set("collectionIsEnabled",!1):this._frameFooter.set("collectionIsEnabled",!0)},requestRefresh:function(F){w("requestRefresh",F);var z=(0,B.d6)();if(!(!(0,P.EeC)(z)||(0,P.LwX)(z)))try{var j=this.get("iframe"),X=j.getDOMNode(),J=X.contentWindow;if(J){var Q=J.location;if((0,D.B1)("frame-refresh",{tracer:T.Z}),(0,B.GE)((0,N.hl)()),(0,C.n_)({category:"frame",message:"Frame refresh requested",level:"debug"}),(0,n.Z)()){var ie=Q.pathname+Q.search+Q.hash;this._updateFrameWithoutAddingToHistory(ie,!0)}else Q.reload();this.set("isLoadRequestFromRefresh",!0)}}catch(ce){(0,C.$e)(function(pe){var ye=document.getElementById("sqs-site-frame");pe.setTag("frame_attr_is_set",!!j),pe.setTag("frame_is_on_page",!!ye),pe.setTag("frame_src",X?ye.src:"unavailable"),pe.setTag("refresh_reason",JSON.stringify(F)),pe.setFingerprint(["iframe-security-error-from-frame-base-refresh"]),(0,C.Tb)(ce)})}},setUrlOrRequestRefresh:function(F){F===this.get("url")?this.requestRefresh({reason:"setUrlOrRequestRefresh -- same url, refresh",url:F}):this.set("url",F)},_confirmDone70:function(F,z){if(!(0,P.Z3A)((0,B.d6)())){this._discardChangesAndDisableEditing();return}typeof z!="function"&&(z=function(){}),this._showRosettaHasChangesConfirmation((function(){this._discardChangesAndDisableEditing(),z(!0)}).bind(this),function(){z(!1)})},_onCloseRosettaHasChangesConfirmation:function(F,z){d.render(l.createElement(O.Z,Object.assign({},{isOpen:!1},F)),this.confirmationMountNode),z()},_showRosettaHasChangesConfirmation:function(F,z){if((0,B.GE)((0,N.wv)()),!this.confirmationMountNode){var j=this.get("iframe").getDOMNode(),X=e()(j,"contentWindow.document");if(!X){(0,C.Tb)("Dirty Iframe was destroyed without prompting user at "+this.get("url"));return}this.confirmationMountNode=X.createElement("div"),X.body.appendChild(this.confirmationMountNode)}var J={title:(0,a.t)("Are You Sure?",null,{project:"src.seven-one"}),message:(0,a.t)("Are you sure you want to discard all changes without saving?",null,{project:"src.seven-one"}),confirmText:(0,a.t)("Discard",null,{project:"src.seven-one"}),cancelText:(0,a.t)("Cancel",null,{project:"src.seven-one"})};d.render(l.createElement(O.Z,Object.assign({},{isOpen:!0,onConfirm:this._onCloseRosettaHasChangesConfirmation.bind(this,J,F),onCancel:this._onCloseRosettaHasChangesConfirmation.bind(this,J,z)},J)),this.confirmationMountNode)},_discardChangesAndDisableEditing:function(F){var z=F&&F.skipRefresh;this.get("contentBridge").get("controller")&&this.get("contentBridge").get("controller").revert70AnnotationControllerChangesAndDisableEditing({skipRefresh:!!z})}},{ATTRS:{iframe:{}}})},"1.0",{requires:["array-invoke","base","squarespace-popup-overlay","squarespace-attr-validators","squarespace-blog-collection-list","squarespace-comments","squarespace-commerce","squarespace-common","squarespace-damask-announcement-bar-bridge","squarespace-damask-preview-content-bridge","squarespace-damask-preview-footer","squarespace-escmanager","squarespace-events-collection","squarespace-form-rendering-utils","squarespace-gallery-collection-list","squarespace-management","squarespace-plugin-node-expander","squarespace-product-quick-view","squarespace-products-collection-item-v2","squarespace-products-collection-list-v2","squarespace-search-page","squarespace-simple-liking","squarespace-slides","squarespace-social-buttons","squarespace-spinner","squarespace-ss-widget","squarespace-tourdates","squarespace-ui-base","squarespace-util","squarespace-util-authenticated","squarespace-website-overlays-manager","squarespace-widgets-confirmation"]})},714564:function(){YUI.add("squarespace-damask-preview-frame",function(c){c.namespace("Squarespace.Damask.Preview"),c.Squarespace.Damask.Preview.Frame=c.Base.create("preview",c.Squarespace.Damask.Preview.FrameBase,[],{},{ATTRS:{contentBridge:{validator:c.Squarespace.AttrValidators.isNullOrInstanceOf(c.Squarespace.Damask.Preview.ContentBridge)},contentWindow:{getter:function(){if(c.Lang.isValue(this.iframe))return this.iframe.get("contentWindow")}},dirty:{value:!1},editable:{value:!0},frameLocked:{value:0},url:{value:"/"},pathname:{getter:function(){return this.get("url").split("#")[0]}},router:{},websiteOverlaysManager:{getter:"getWebsiteOverlaysManager"}}})},"1.0",{requires:["array-invoke","base","squarespace-popup-overlay","squarespace-attr-validators","squarespace-blog-collection-list","squarespace-comments","squarespace-commerce","squarespace-common","squarespace-damask-announcement-bar-bridge","squarespace-damask-preview-content-bridge","squarespace-damask-preview-frame-base","squarespace-damask-preview-footer","squarespace-escmanager","squarespace-events-collection","squarespace-form-rendering-utils","squarespace-gallery-collection-list","squarespace-singletons-location","squarespace-management","squarespace-plugin-node-expander","squarespace-product-quick-view","squarespace-products-collection-item-v2","squarespace-products-collection-list-v2","squarespace-search-page","squarespace-simple-liking","squarespace-slides","squarespace-social-buttons","squarespace-spinner","squarespace-ss-widget","squarespace-tourdates","squarespace-ui-base","squarespace-util","squarespace-util-authenticated","squarespace-website-overlays-manager","squarespace-widgets-confirmation","widget-child","widget-parent"]})},27538:function(c,b,t){"use strict";var l=t(994336),d=t.n(l),o=t(714487),e=t(747002),a=t(759352),r=t(312713);YUI.add("squarespace-data",function(s){s.io&&s.on("io:xdrReady",function(n){s.Data.TRANSPORT_READY=!0}),s.Data={DEBUG:!1,TRANSPORT_READY:!0,addCrumb:function(n){var i=d().get("crumb");if(i){var u=n.split("?"),h=u[1]?s.QueryString.parse(u[1]):{};h.crumb=i,n=u[0]+"?"+s.QueryString.stringify(h)}return n},sendForm:function(n,i,u){i.data||(i.data={});var h=n.getData();for(var g in h){var p=h[g];s.Lang.isUndefined(p)||s.Lang.isNull(p)||s.Lang.isObject(p)&&s.Object.isEmpty(p)||(s.Lang.isObject(p)&&!s.Lang.isArray(p)?i.data[g]=s.JSON.stringify(p):i.data[g]=p)}var f={dialog:n};typeof i.failure=="function"&&(f.failure=i.failure),i.failure=f,this.post(i,u)},cleanObjectForConsole:function(n){var i={};for(var u in n){var h=!1;if(s.Lang.isString(n[u])){try{h=n[u]?JSON.parse(n[u]):null}catch{}h&&s.Lang.isObject(h)?i[u]=h:i[u]=n[u]}else i[u]=n[u]}return i},get:function(n,i){this._go("GET",n,i)},post:function(n,i){this._go("POST",n,i)},put:function(n,i){this._go("PUT",n,i)},del:function(n,i){this._go("DELETE",n,i)},_go:function(n,i,u){if(i.context=u,i.method=n,s.Data.DEBUG,i.success||(i.success=this._genericSuccess),i.responseFormat||(i.responseFormat="json"),i.secure&&Static.SQUARESPACE_CONTEXT){var h=["squarespace.com","sqsp.com","sqsp.net","squarespace.net","sqsp6.com"],g=s.Array.some(h,function(m){return window.location.host.endsWith(m)});a.Bw()||(g=!1),!g&&!i.url.startsWith("https://")&&(i.url="https://"+e.uT(Static.SQUARESPACE_CONTEXT.website)+i.url),g||(i.xdr={},i.xdr.credentials=!0)}for(var p in i.data)s.Lang.isUndefined(i.data[p])&&delete i.data[p];if(i.testResponse)i.testResponseDelay?s.later(i.testResponseDelay,this,function(){s.Data._connectionSuccessRouter(i,!0,{responseText:s.JSON.stringify(i.testResponse)})}):s.Data._connectionSuccessRouter(i,!0,{responseText:s.JSON.stringify(i.testResponse)});else{var f=s.bind(function(){if(i._url=i.url,i.url=this.addCrumb(i.url),n==="POST"||n==="PUT"){if(i.json)s.Lang.isObject(i.data)&&(i.data=s.JSON.stringify(i.data)),s.Lang.isObject(i.headers)||(i.headers={}),i.headers["Content-Type"]="application/json",i.headers.charset="UTF-8";else if(!s.Lang.isString(i.data))for(var m in i.data){var _=i.data[m];s.Lang.isObject(_)&&!s.Lang.isArray(_)&&(i.data[m]=s.JSON.stringify(_))}}var v={method:n,arguments:i.arguments,data:i.data,on:{success:s.bind(s.Data._connectionSuccessRouter,s.Data,i),failure:s.bind(s.Data._connectionFailureRouter,s.Data,i)}},E=i.headers;s.Lang.isObject(E)&&(v.headers=E),i.xdr&&(v.xdr=i.xdr,v.headers={"Content-Type":(0,o.t)("application/x-www-form-urlencoded; charset=UTF-8",null,{project:"scripts-v6-root"})},v.data=s.QueryString.stringify(i.data)),i.queue?s.io.queue(i.url,v):s.io(i.url,v)},s.Data);i.testResponseDelay?s.later(i.testResponseDelay,this,f):f()}},_genericSuccess:function(n){},_connectionSuccessRouter:function(n,i,u,h){if(n.responseFormat==="json"){var g={};if(u.status!==204&&u.status!==1223)try{g=s.JSON.parse(u.responseText)}catch{this._error(n,{error:(0,o.t)("Internal Error: Unable to parse server response from ({url}) as JSON: {message}",{url:n.url,message:u.responseText},{project:"scripts-v6-root"})});return}g.error?this._error(n,g,h):(s.Data.DEBUG,n.success.apply(n.context,[g,h]))}else n.responseFormat==="raw"&&(s.Data.DEBUG,n.success.apply(n.context,[u.responseText,h]))},_connectionFailureRouter:function(n,i,u,h){if(!(!u||u.readyState!==4)){var g={400:!0,401:!0,500:!0,502:!0};if(n.responseFormat==="json"&&g[u.status]){var p;try{p=s.JSON.parse(u.responseText)}catch{this._error(n,{error:(0,o.t)("Internal Error: Unable to parse server response from ({sub1}) as JSON: {sub2}",{sub1:n.url,sub2:u.responseText},{project:"scripts-v6-root"})});return}if(p.error||p.message||p.billingErrorCode){this._error(n,p,h);return}}var f=(0,o.t)("Unable to connect\u2026",null,{project:"scripts-v6-root"});switch(u.status){case 401:case 403:f=(0,o.t)("Unauthorized request",null,{project:"scripts-v6-root"});break;case 500:case 501:f=(0,o.t)("Internal server error. Please try again later.",null,{project:"scripts-v6-root"});break;case 503:f=(0,o.t)("This service is temporarily unavailable. Please try again later.",null,{project:"scripts-v6-root"});break;default:if(n.retry){n.retry-=1,s.later(200,this,function(){s.Data._go(n.method,n,n.context)});return}break}this._error(n,{status:u.status,error:f,errorKey:s.Lang.isFunction(window.btoa)?btoa(n.url):"",network:!0})}},_error:function(n,i,u){if(s.Data.DEBUG,i.loginRequired){var h=function(){window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.fire("login-required")};s.Lang.isFunction(n.failure)?(n.loginHasPriorityOnFailure&&h(),n.failure.apply(n.context,[i,u])):h()}else i.authorizationFail?new s.Squarespace.SystemError(n.url,i,"json").show():i.crumbFail&&n._retry!==!0&&(0,r.z)()?(d().set("crumb",i.crumb,{path:"/"}),n._retry=!0,n.url=n._url,console.log("crumb check failed, will attempt a retry"),this._go(n.method,n,n.context)):typeof n.failure=="function"?n.failure.apply(n.context,[i,u]):s.Lang.isObject(n.failure)&&s.Lang.isFunction(n.failure.failure)?n.failure.failure.apply(n.context,[i,u]):n.failure&&n.failure.dialog&&i.errors?(n.failure.dialog.showErrors(i.errors),n.failure.failure&&n.failure.failure.apply(n.context,[i,u])):new s.Squarespace.SystemError(n.url,i,"json").show()}}},"1.0",{requires:["io","squarespace-system-error","squarespace-util"]})},913669:function(c,b,t){"use strict";var l=t(702602),d=t(714487);YUI.add("squarespace-datatype-date-format",function(o){o.Intl.add("datatype-date-format","en",{a:l.G,A:[(0,d.t)("Sunday",null,{project:"scripts-v6.block",notes:"Weekday name for calendar block"}),(0,d.t)("Monday",null,{project:"scripts-v6.block",notes:"Weekday name for calendar block"}),(0,d.t)("Tuesday",null,{project:"scripts-v6.block",notes:"Weekday name for calendar block"}),(0,d.t)("Wednesday",null,{project:"scripts-v6.block",notes:"Weekday name for calendar block"}),(0,d.t)("Thursday",null,{project:"scripts-v6.block",notes:"Weekday name for calendar block"}),(0,d.t)("Friday",null,{project:"scripts-v6.block",notes:"Weekday name for calendar block"}),(0,d.t)("Saturday",null,{project:"scripts-v6.block",notes:"Weekday name for calendar block"})],b:[(0,d.t)("Jan",null,{project:"scripts-v6.block",notes:"Short January name for calendar block"}),(0,d.t)("Feb",null,{project:"scripts-v6.block",notes:"Short February month for calendar block"}),(0,d.t)("Mar",null,{project:"scripts-v6.block",notes:"Short March month for calendar block"}),(0,d.t)("Apr",null,{project:"scripts-v6.block",notes:"Short April month for calendar block"}),(0,d.t)("May",null,{project:"scripts-v6.block",notes:"Short May month for calendar block"}),(0,d.t)("Jun",null,{project:"scripts-v6.block",notes:"Short June month for calendar block"}),(0,d.t)("Jul",null,{project:"scripts-v6.block",notes:"Short July month for calendar block"}),(0,d.t)("Aug",null,{project:"scripts-v6.block",notes:"Short August month for calendar block"}),(0,d.t)("Sep",null,{project:"scripts-v6.block",notes:"Short September month for calendar block"}),(0,d.t)("Oct",null,{project:"scripts-v6.block",notes:"Short Ocotober month for calendar block"}),(0,d.t)("Nov",null,{project:"scripts-v6.block",notes:"Short November month for calendar block"}),(0,d.t)("Dec",null,{project:"scripts-v6.block",notes:"Short December month for calendar block"})],B:[(0,d.t)("January",null,{project:"scripts-v6.block",notes:"Normal month for calendar block"}),(0,d.t)("February",null,{project:"scripts-v6.block",notes:"Normal month for calendar block"}),(0,d.t)("March",null,{project:"scripts-v6.block",notes:"Normal month for calendar block"}),(0,d.t)("April",null,{project:"scripts-v6.block",notes:"Normal month for calendar block"}),(0,d.t)("May",null,{project:"scripts-v6.block",notes:"Normal month for calendar block"}),(0,d.t)("June",null,{project:"scripts-v6.block",notes:"Normal month for calendar block"}),(0,d.t)("July",null,{project:"scripts-v6.block",notes:"Normal month for calendar block"}),(0,d.t)("August",null,{project:"scripts-v6.block",notes:"Normal month for calendar block"}),(0,d.t)("September",null,{project:"scripts-v6.block",notes:"Normal month for calendar block"}),(0,d.t)("October",null,{project:"scripts-v6.block",notes:"Normal month for calendar block"}),(0,d.t)("November",null,{project:"scripts-v6.block",notes:"Normal month for calendar block"}),(0,d.t)("December",null,{project:"scripts-v6.block",notes:"Normal month for calendar block"})],c:"%a, %b %d, %Y %l:%M:%S %p %Z",p:["AM","PM"],P:["am","pm"],x:"%m/%d/%y",X:"%l:%M:%S %p"})},"1")},439343:function(c,b,t){"use strict";var l=t(461761),d=t.n(l),o=t(687048),e=t.n(o),a=t(971676),r=t.n(a),s=t(413019);YUI.add("squarespace-deprecated-modules",function(i){function u(p,f,m){return function(){return console.warn('[DEPRECATED] Called `Y."'+f+"`. "+m),(0,s.L8)("deprecated_yui_module_used",{detail:f}),p.apply(this,arguments)}}function h(p,f,m){var _=d()(i,p);if(e()(_)){var v=f(_,p,m);r()(i,p,v)}}function g(p,f,m){var _=d()(i,p,{});Object.keys(_).forEach(function(E){var S=[p,E].join(".");h(S,f,m)})}g("Cookie",u,"Use @sqs/cookie-cutter instead.")},"1.0",{requires:["cookie"]})},587324:function(c,b,t){"use strict";var l=t(860921),d=t.n(l);YUI.add("squarespace-dialog-auto-complete",function(o){var e=o.Squarespace.DialogFields.AutoComplete=o.Base.create("AutoComplete",o.Squarespace.DialogFields.Text,[],{destructor:function(){var a=this.get("acWidget");a&&a.destroy()},renderUI:function(){e.superclass.renderUI.call(this);var a=this.get("contentBox");new o.Squarespace.Spinner({color:"dark",render:a});var r=new o.Squarespace.Widgets.ScrollingAutoCompleteList(o.merge({inputNode:this._textField},this.get("acConfig")));this._set("acWidget",r),r.render()},bindUI:function(){e.superclass.bindUI.call(this);var a=this.get("contentBox"),r=this.get("acWidget");r.on("query",function(){a.addClass("querying")},this),r.on("results",function(){a.removeClass("querying")},this),this.get("requireListEntry")&&r.after("select",this._afterSelect,this)},syncUI:function(){e.superclass.syncUI.call(this),this._textField.set("value",this.get("data"))},focus:function(){this._textField.focus()},clear:function(){this.set("data",null),this._textField.set("value",""),this.get("acWidget")._onInputValueChange({newVal:""})},_afterSelect:function(a){var r=a.result.raw,s=this.get("responseDataProperty");o.Lang.isValue(s)?(this.set("data",r[s]),this._set("dataObject",r)):this.set("data",r),this.fire("select",{data:this.get("data")})},_afterDataChange:d(),_afterValueChange:function(a){this.get("requireListEntry")||e.superclass._afterValueChange.call(this,a)},_afterBlur:function(){typeof CONFIG_PANEL<"u"&&CONFIG_PANEL.set("allowContextMenu",!1)}},{CSS_PREFIX:"sqs-auto-complete",ATTRS:{data:{value:null,validator:function(a){return!0}},acConfig:{value:null,setter:function(a){if(!o.Lang.isValue(a.source))throw new Error("No data source provided for AutoComplete");return o.merge({activateFirstItem:!0,resultHighlighter:"phraseMatch"},a)},validator:o.Squarespace.AttrValidators.isNullOrObject,writeOnce:"initOnly"},acWidget:{value:null,validator:o.Squarespace.AttrValidators.isNullOrInstanceOf(o.Squarespace.Widgets.ScrollingAutoCompleteList),readOnly:!0,writeOnce:!0},requireListEntry:{value:!1,validator:o.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},responseDataProperty:{value:null,validator:o.Squarespace.AttrValidators.isNullOrString},dataObject:{value:null,validator:o.Squarespace.AttrValidators.isNullOrObject,readOnly:!0}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-text","squarespace-scrolling-auto-complete-list","squarespace-spinner"]})},639551:function(c,b,t){"use strict";var l=t(204482);YUI.add("squarespace-dialog-button",function(d){var o=d.namespace("Squarespace.DialogFields").Button=d.namespace("Squarespace.Widgets").Button=d.Base.create("button",d.Squarespace.DialogField2,[d.WidgetChild],{initializer:function(a){this.get("contentBox").addClass(this.get("alignment")),this.publish("click"),this.publish("button-click",{broadcast:2})},destructor:function(){d.Lang.isValue(this._waiting)&&(this._waiting.remove(!0),this._waiting=null),this._anchorNode=null},bindUI:function(){o.superclass.bindUI.call(this),this.get("boundingBox").on("click",this._handleClick,this),this.get("boundingBox").on("keydown",function(a){(l.isEnterKey(a)||l.isSpaceBar(a))&&(a.halt(),this._handleClick(a))},this),this.on("stringsChange",this._updateStringElements,this),this.after("waitingChange",function(a){this._toggleWaitingSpinner(a.newVal)},this),this.after("isLoadingChange",this.syncUI)},renderUI:function(){o.superclass.renderUI.call(this);var a=this.get("contentBox"),r=this._anchorNode=a.one("div.label"),s=this.get("name");r.set("value",this.get("data")),r.set("name",s);var n=this.get("strings.systemName");n&&this.get("boundingBox").addClass("sqs-dialog-button--"+n);var i=this.get("strings.title")||this.get("strings.text");i&&this.get("boundingBox").setAttribute("title",i),this.get("boundingBox").setAttribute("role","button"),this.set("tabIndex",0),this._renderButtonText(),this._renderIcon(),this._renderSpinner(),this._toggleActive(this.get("active")&&d.Lang.isValue(s)),this.toggleDisabled(this.get("disabled"))},syncUI:function(){o.superclass.syncUI.call(this),this._toggleWaitingSpinner(this.get("waiting")),this._syncLoading()},setText:function(a){this.set("strings.text",a)},getText:function(){return this.get("strings.text")},setOnClick:function(a,r){d.Lang.isFunction(a)&&this.set("onClick",a),d.Lang.isValue(r)&&this.set("context",r)},disable:function(){this.toggleDisabled(!0)},enable:function(){this.toggleDisabled(!1)},showWaiting:function(){this._toggleWaitingSpinner(!0),this.set("waiting",!0)},hideWaiting:function(){this._toggleWaitingSpinner(!1),this.set("waiting",!1)},toggleDisabled:function(a){this.set("disabled",a),this.get("contentBox").toggleClass("disabled",a)},_toggleActive:function(a){this.set("active",a),this.get("contentBox").toggleClass("active",a)},_toggleWaitingSpinner:function(a){a?this._waiting.show():this._waiting.hide()},_handleClick:function(a){var r=this._anchorNode;if(this.get("disabled")){a.halt();return}var s=this.get("href");s?this.get("newWindow")?window.open(s):window.location=s:d.Lang.isFunction(this.get("onClick"))?this.get("onClick").call(this.get("context"),a,this):r.fire("click",this.get("active")),this.fire("button-click",{label:this.get("strings.text")||this.get("strings.title"),href:this.get("href")})},_animateTextChange:function(a){var r=new d.Anim({node:this._anchorNode,from:{opacity:0},to:{opacity:1},duration:.2,easing:"easeOut"}),s=new d.Anim({node:this._anchorNode,from:{opacity:1},to:{opacity:0},duration:.2,easing:"easeIn"});r.on("end",d.bind(function(){this._toggleActive(!0)},this)),s.on("end",d.bind(function(){this._renderButtonText(),d.Lang.isNull(this._anchorNode)||r.run()},this)),this._toggleActive(!1),this._registerAnim(r),this._registerAnim(s),s.run()},_updateStringElements:function(a){a.subAttrName==="strings.text"&&a.newVal.text!==a.prevVal.text&&this._animateTextChange(a.newVal.text)},_renderIcon:function(){this.get("icon")&&this.get("contentBox").append('<div class="icon"></div>')},_renderButtonText:function(){var a=this.get("strings.text");d.Lang.isString(a)&&a.length>0&&d.Lang.isValue(this._anchorNode)&&this._anchorNode.setHTML(a)},_renderSpinner:function(){this._waiting=d.Node.create('<div class="waiting"></div>'),this.get("contentBox").append(this._waiting),this._waiting.hide()},_syncLoading:function(){var a=this.get("spinner"),r=this.get("isLoading"),s=this.get("boundingBox").hasClass("minor");r?(a||(a=new d.Squarespace.Spinner({render:this.get("contentBox"),color:s?"dark":"light"}),this.set("spinner",a)),a.spin()):a&&a.stop(),this.get("boundingBox").toggleClass("is-loading",r)}},{CSS_PREFIX:"sqs-button",TEMPLATE:'<div class="label"></div>',ATTRS:{active:{},alignment:{value:"",validator:d.Lang.isString},className:{value:"normal-button"},context:{value:this},data:{},disabled:{setter:function(a){return!!a}},icon:{},name:{},onClick:{validator:d.Lang.isFunction},strings:{value:{title:"",text:""}},waiting:{value:!1},href:{validator:d.Lang.isString},newWindow:{value:!1,validator:d.Lang.isBoolean},isLoading:{value:!1},spinner:{},testAttribute:{value:"button"}}}),e=d.namespace("Squarespace.Widgets").VanillaButton=d.Base.create("VanillaButton",o,[],{renderUI:function(){e.superclass.renderUI.call(this),this.get("boundingBox").removeClass(o.CSS_PREFIX)}},{CSS_PREFIX:"sqs-button-vanilla"})},"1.0",{requires:["anim","base","node","squarespace-dialog","squarespace-dialog-field-2","squarespace-spinner","squarespace-util","widget-child"]})},82364:function(c,b,t){"use strict";var l=t(174161),d=t(233284),o=t(714487),e=t(921089),a=t(782618),r=t(737063),s=t(43594),n=t.n(s),i=t(723796),u=!1,h=i.Em.createLogger("campaigns dialog field","#552",u);YUI.add("squarespace-dialog-campaigns-service-connect",function(g){g.namespace("Squarespace.DialogFields"),g.Squarespace.DialogFields.CampaignsServiceConnect=g.Base.create("campaignsServiceConnect",g.Squarespace.DialogField2,[],{initializer:function(p){h("init",p),this.reactElement=l.createElement(e.Z,g.merge({initialData:p.data},p.props))},renderUI:function(){this.reactInstance=d.render(this.reactElement,this.get("contentBox").getDOMNode())},destructor:function(){d.unmountComponentAtNode(this.get("contentBox").getDOMNode()),this.reactInstance=null,this.reactElement=null},didDataChange:function(){if(a.Z){var p=a.Z.getState();return p.isDirty}return!1},_getErrors:function(){var p=[],f=a.Z.getState();return f.isConnected&&!f.selectedListId&&(r.Z.showValidationError(),p.push((0,o.t)("Select a list",null,{project:"scripts-v6-root"}))),p}},{ATTRS:{data:{getter:function(){var p=a.Z.getState();return{connectionState:a.Z.isConnected()?n().CONNECTED:n().DISCONNECTED,listId:p.selectedListId}}}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},678928:function(){YUI.add("squarespace-dialog-description",function(c){c.namespace("Squarespace.DialogFields");var b=c.Squarespace.DialogFields.Description=c.Base.create("DescriptionField",c.Squarespace.DialogField2,[],{destructor:function(){this._descEl=null},renderUI:function(){b.superclass.renderUI.call(this),this._descEl=this.get("contentBox").one(".custom-field-description");var t=this.get("padding");c.Lang.isArray(t)&&t.length>0&&this._descEl.setStyles({paddingTop:t[0],paddingBottom:t[1]}),this._attachNode("title"),this._attachNode("text")},bindUI:function(){b.superclass.bindUI.call(this),this.after(["titleChange","textChange"],this.syncUI,this)},syncUI:function(){b.superclass.syncUI.call(this),this._descEl.empty(),this._attachNode("title"),this._attachNode("text")},_attachNode:function(t){var l=this.get(t);if(c.Lang.isString(l)&&l.length>0){var d=c.Node.create('<div class="'+t+'">'+l+"</div>");this._descEl.append(d)}},_getAsString:function(t){return c.Lang.isValue(t)?t+"":""},setTitle:function(t){this.set("title",t)},setText:function(t){this.set("text",t)}},{CSS_PREFIX:"sqs-description",TEMPLATE:'<div class="custom-field-description"></div>',ATTRS:{title:{value:"",getter:this._getAsString},text:{value:"",getter:this._getAsString},className:{value:"",validator:c.Lang.isString},padding:{value:[],validator:c.Lang.isArray},focusable:{value:!1},testAttribute:{value:"description"}}});c.Squarespace.DialogFields.DescriptionField=c.Squarespace.DialogFields.Description},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},578520:function(c,b,t){"use strict";var l=t(714487),d=t(868463),o=t(43594),e=t.n(o);YUI.add("squarespace-dialog-email-service-connect",function(a){a.namespace("Squarespace.DialogFields");var r=a.Squarespace.DialogFields.EmailServiceConnect=a.Base.create("emailServiceConnect",a.Squarespace.DialogFields.ServiceConnect,[],{initializer:function(){this.get("contentBox").addClass("sqs-service-connect-content"),this._addressField=new a.Squarespace.DialogFields.Text({name:"address",className:"thin","strings.title":(0,l.t)("Email Address",null,{project:"scripts-v6-root"}),data:this.get("data.email")})},renderUI:function(){r.superclass.renderUI.call(this);var s=this.get("contentBox"),n=this._addressField;n.render(s.one(".fields")),this._addressFieldInput=n.get("contentBox").one("input"),this._messageEl=s.one(".text .message")},bindUI:function(){r.superclass.bindUI.call(this),this.get("contentBox").on("click",function(s){var n=this.get("data.connectionState"),i=s.target;n===e().CONNECTED&&i.hasClass("icon")?this._disconnect():n===e().DISCONNECTED&&i.hasClass("connect")&&this._connect()},this),this._addressField.get("contentBox").one("input").after("keyup",function(s){s.keyCode===13&&this._connect()},this),this.after("dataChange",function(){this._messageEl.setContent(this._getSendingToMessage())},this)},_getSendingToMessage:function(){return(0,l.t)("Sending to {email}",{email:this.get("data.email")},{project:"scripts-v6-root"})},_getHBTemplateContext:function(){return{title:(0,l.t)("Email",null,{project:"scripts-v6-root"}),connect:(0,l.t)("Connect",null,{project:"scripts-v6-root"}),sendingTo:this._getSendingToMessage()}},_connect:function(){var s=this._addressField.get("data").trim();if(d.vV(s)){var n=this.get("data")||{};n.email=s,n.connectionState=e().CONNECTED,this.set("data",n)}else new a.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Invalid Email Address",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("You must provide a valid email address.",null,{project:"scripts-v6-root"})})},_disconnect:function(){var s=this.get("data");s.email=null,s.connectionState=e().DISCONNECTED,this.set("data",s)}},{CSS_PREFIX:"sqs-email-service-connect",HANDLEBARS_TEMPLATE:"dialog-email-service-connect.html",ATTRS:{}})},"1.0",{requires:["base","squarespace-dialog-email-service-connect-template","squarespace-dialog-service-connect","squarespace-dialog-text","squarespace-ui-base","squarespace-util","squarespace-widgets-alert"]})},530657:function(){YUI.add("squarespace-dialog-error",function(c){c.namespace("Squarespace.DialogFields");var b=c.Squarespace.DialogFields.Error=c.Squarespace.DialogFields.ErrorField=c.Base.create("ErrorField",c.Squarespace.DialogField2,[],{destructor:function(){this._descEl=null},renderUI:function(){b.superclass.renderUI.call(this);var t=this.get("padding");this._descEl=this.get("contentBox").one(".custom-field-error"),c.Lang.isArray(t)&&t.length>0&&this._descEl.setStyles({paddingTop:t[0],paddingBottom:t[1]}),this._attachNode("text")},bindUI:function(){b.superclass.bindUI.call(this),this.after(["textChange"],this.syncUI,this)},syncUI:function(){b.superclass.syncUI.call(this),this._descEl.empty(),this._attachNode("text")},_attachNode:function(t){var l=this.get(t);if(c.Lang.isString(l)&&l.length>0){var d=c.Node.create('<div class="'+t+'">'+l+"</div>");this._descEl.append(d)}},_getAsString:function(t){return c.Lang.isValue(t)?t+"":""},setText:function(t){this.set("text",t)}},{CSS_PREFIX:"sqs-error",TEMPLATE:'<div class="custom-field-error"></div>',ATTRS:{text:{value:"",getter:this._getAsString},className:{value:"",validator:c.Lang.isString},padding:{value:[],validator:c.Lang.isArray},focusable:{value:!1}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},984219:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-dialog-file-audio",function(d){d.namespace("Squarespace.DialogFields"),d.Squarespace.DialogFields.FileAudio=d.Base.create("fileAudio",d.Squarespace.DialogFields.FileRequiresProcessing,[],{},{CSS_PREFIX:"sqs-file-audio-processing",FILE_FILTER:{description:(0,l.t)("Audio",null,{project:"scripts-v6-root"}),extensions:"*.mp3;*.mp4;*.ogg;*.m4a"},PROCESSING_JOB:d.Squarespace.AudioProcessingJob,PROCESSING_COPY:(0,l.t)("Processing and identifying",null,{project:"scripts-v6-root"}),ATTRS:{contentType:{value:"audio"},contentLabel:{value:(0,l.t)("an audio file",null,{project:"scripts-v6-root"})}}})},"1.0",{requires:["base","squarespace-dialog-file-requires-processing","squarespace-job-manager"]})},420679:function(c,b,t){"use strict";var l=t(629266),d=t.n(l),o=t(714487);YUI.add("squarespace-dialog-file-requires-processing",function(e){e.namespace("Squarespace.DialogFields");var a=e.Squarespace.DialogFields.FileRequiresProcessing=e.Base.create("fileRequiresProcessing",e.Squarespace.DialogFields.File,[],{initializer:function(){if(this.constructor===a)throw new Error("Y.Squarespace.DialogFields.FileRequiresProcessing is an abstract class. Please use a subclass.");this.uploader&&this.uploader.setAttrs({fileFilters:[this.getProperty("FILE_FILTER")],createJob:e.bind(this._createProcessingJob,this),jobFailure:e.bind(this._processingJobFailure,this)})},_bindDataEvents:function(){a.superclass._bindDataEvents.call(this);var r=this.get("data");r?this._registerEvent(r.after("mediaProcessingStateChange",this.syncUI,this)):this._isProcessing()&&this._cancelProcessing()},_cleanupResidualElements:function(){a.superclass._cleanupResidualElements.call(this);var r=this.get("boundingBox"),s=this.get("contentBox");r.removeClass("processing-taking-longer"),s.removeClass("loaded"),s.all("."+this.getClassName()+"-preview").remove(),s.all(".processing-failed").remove(),s.all(".processing-longer-than-expected").remove()},_renderDataLoadedState:function(){this._cleanupResidualElements();var r=this.get("boundingBox"),s=this.get("data");if(this.get("contentBox").removeClass("data-loading"),s&&(s.get("hasFileData")||s.get("systemDataId"))){r.addClass("has-file");var n=s.get("mediaProcessingState");e.Squarespace.ContentItemUtils.isErrorProcessingState(s)?(r.addClass("has-error"),this._renderProcessingFailed()):(r.removeClass("has-error"),n===d().READY||e.Lang.isNull(n)?(this._renderFilePreview(),this._progressPlugin.set("show",!1)):(r.addClass("processing-taking-longer"),this._progressPlugin.set("show",!0),this._renderProcessingPreview(),this._renderProcessingDescription()))}else r.removeClass("has-error"),r.removeClass("has-preview"),r.removeClass("has-file")},_renderDataLoadingState:function(){a.superclass._renderDataLoadingState.call(this),this.get("boundingBox").removeClass("has-error")},_cancelProcessing:function(r){r&&r.halt(),this.set("data",null),this._progressPlugin&&this._progressPlugin.set("show",!1)},_isProcessing:function(){return this._progressPlugin&&this._progressPlugin.get("show")},_renderProcessingPreview:function(){var r=this.getClassName();this.get("contentBox").append('<div class="'+r+"-preview "+r+'-preview-empty"></div>')},_renderProcessingFailed:function(){var r=e.Node.create('<div class="processing-failed"><p>'+(0,o.t)("<strong>Oops!</strong><br />Something went wrong.",null,{project:"scripts-v6-root"})+'<br /><a href="#" class="retry">'+(0,o.t)("Retry?",null,{project:"scripts-v6-root"})+"</a></p></div>");r.one("p a.retry").on("click",function(s){s.halt(),this.set("data",null)},this),this.get("contentBox").append(r)},_renderProcessingDescription:function(){var r='<br /><a href="#" class="cancel">'+(0,o.t)("Cancel",null,{project:"scripts-v6-root"})+"</a>",s=e.Node.create('<div class="processing-longer-than-expected"><p>'+this.getProperty("PROCESSING_COPY")+(this.get("isCancelProcessingEnabled")?r:"")+"</p></div>");s.delegate("click",this._cancelProcessing,"a.cancel",this),this.get("contentBox").append(s)},_createProcessingJob:function(r,s){if(!s.job)return null;var n=new(this.getProperty("PROCESSING_JOB"))(e.merge(s.job,{started:!0})),i=this.get("data");return i&&i.get("id")===s.job.data.contentItemId&&i.get("systemDataId")?i.setAttrs({mediaProcessingState:d().QUEUED}):this.set("data",new e.Squarespace.Models.ContentItem(e.merge(s.media[0],{mediaProcessingState:d().QUEUED}))),n},_processingJobFailure:function(){new e.Squarespace.Widgets.Alert({"strings.title":(0,o.t)("Processing Failed",null,{project:"scripts-v6-root"}),"strings.message":(0,o.t)("We were unable to process your file. Please try again.",null,{project:"scripts-v6-root"})}),this.syncUI()}},{ATTRS:{isCancelProcessingEnabled:{value:!0}}})},"1.0",{requires:["base","node","squarespace-content-item-utils","squarespace-dialog-file","squarespace-models-content-item","squarespace-ui-base","squarespace-widgets-alert"]})},166864:function(c,b,t){"use strict";var l=t(377688),d=t(714487);const e=[{icon:"text",title:(0,d.t)("Text",null,{project:"scripts-v6-root"}),value:l.Z.TEXT},{icon:"textarea",title:(0,d.t)("Text Area",null,{project:"scripts-v6-root"}),value:l.Z.TEXT_AREA},{icon:"select",title:(0,d.t)("Dropdown",null,{project:"scripts-v6-root"}),value:l.Z.SELECT},{icon:"checkbox",title:(0,d.t)("Checkbox",null,{project:"scripts-v6-root"}),value:l.Z.CHECKBOX},{icon:"radio",title:(0,d.t)("Radio",null,{project:"scripts-v6-root"}),value:l.Z.RADIO},{icon:"likert",title:(0,d.t)("Survey",null,{project:"scripts-v6-root"}),value:l.Z.LIKERT},{icon:"name",title:(0,d.t)("Name",null,{project:"scripts-v6-root"}),value:l.Z.NAME},{icon:"password",title:(0,d.t)("Password",null,{project:"scripts-v6-root"}),value:l.Z.PASSWORD},{icon:"address",title:(0,d.t)("Address",null,{project:"scripts-v6-root"}),value:l.Z.ADDRESS},{icon:"twitter",title:(0,d.t)("Twitter",null,{project:"scripts-v6-root"}),value:l.Z.TWITTER},{icon:"website",title:(0,d.t)("Website",null,{project:"scripts-v6-root"}),value:l.Z.WEBSITE},{icon:"email",title:(0,d.t)("Email",null,{project:"scripts-v6-root"}),value:l.Z.EMAIL},{icon:"date",title:(0,d.t)("Date",null,{project:"scripts-v6-root"}),value:l.Z.DATE},{icon:"time",title:(0,d.t)("Time",null,{project:"scripts-v6-root"}),value:l.Z.TIME},{icon:"phone",title:(0,d.t)("Phone",null,{project:"scripts-v6-root"}),value:l.Z.PHONE},{icon:"number",title:(0,d.t)("Number",null,{project:"scripts-v6-root"}),value:l.Z.NUMBER},{icon:"currency",title:(0,d.t)("Currency",null,{project:"scripts-v6-root"}),value:l.Z.CURRENCY},{icon:"sectionbreak",title:(0,d.t)("Line",null,{project:"scripts-v6-root"}),value:l.Z.SECTION},{icon:"hidden",title:(0,d.t)("Hidden",null,{project:"scripts-v6-root"}),value:l.Z.HIDDEN}];YUI.add("squarespace-dialog-form-builder",function(a){a.namespace("Squarespace.DialogFields");var r=a.Squarespace.DialogFields.FormBuilder=a.Base.create("formBuilder",a.Squarespace.DialogField2,[a.WidgetParent],{initializer:function(){this._fieldSelector=this._createFieldSelector(),this._edited=!1},destructor:function(){this._fieldSelector.destroy(),this._ddDelegate&&this._ddDelegate.destroy()},renderUI:function(){r.superclass.renderUI.call(this);var s=this.get("contentBox");this._childrenContainer=this._fieldContainer=s.appendChild('<div class="field-container"></div>'),this._addFieldButton=s.appendChild('<div class="add-field-button"><div class="title"><span class="title-text">'+(0,d.t)("Add Form Field",null,{project:"scripts-v6-root"})+"</span></div></div>"),this._setupDragAndDrop()},bindUI:function(){r.superclass.bindUI.call(this),this._fieldSelector.on("datachange",function(s){var n=s.getValue(),i=this._validateFieldSelection(n);if(i){var u=i.title,h=i.description;new a.Squarespace.Widgets.Alert({"strings.title":u,"strings.message":h});return}this._fieldSelector.close(),this.addField(a.clone(n),!0)},this),this.on("change",function(){this.fire("dataChange",{noSyncUI:!0}),this._edited=!0},this),this._addFieldButton.on("click",function(s){s.halt(),this._openFieldSelector()},this),this.on("*:editingChange",function(s){s.newVal&&this.closeChildren(s.target)},this),this.on("*:removeClicked",function(s){this._confirmFieldRemoval(s.target)},this),this.on("*:fieldChange",function(s){this.fire("change")},this),this.on("*:destroy",function(){this._ddDelegate.syncTargets()},this),this._ddDelegate.on("reorder:reordered",function(s){var n=s.reordered;this._reorderField(n.oldIndex,n.newIndex)},this)},syncUI:function(){r.superclass.syncUI.call(this);var s=this.removeAll();s.each(function(i){i.destroy()});var n=this.get("data");a.Array.each(n,function(i){a.Squarespace.FormEditingUtils.resolveFieldId(i,n),this._renderFieldWidget(i)},this)},didDataChange:function(){return this._edited},closeChildren:function(s){var n=a.Lang.isValue(s);this.each(function(i){i.get("editing")&&(!n||i!==s)&&i.closeEdit()})},addField:function(s,n){var i=this.get("data");a.Squarespace.FormEditingUtils.resolveFieldTitle(s,i),a.Squarespace.FormEditingUtils.resolveFieldId(s,i),this._renderFieldWidget(s,n),i.push(s),this.fire("change")},removeField:function(s){var n=s.get("field").id;this._removeFieldWidget(s);var i=this.get("data"),u;a.Array.each(i,function(h,g){h.id===n&&(u=g)},this),i.splice(u,1),this.fire("change")},lockField:function(s){this.each(function(n){n.get("field").id===s.id&&n.lock()},this)},unlockField:function(s){this.each(function(n){n.get("field").id===s.id&&n.unlock()},this)},getFieldWidget:function(s){var n;return this.each(function(i){i.get("field").id===s.id&&(n=i)},this),n},_setupDragAndDrop:function(){var s=".sqs-form-builder-field";this._ddDelegate=new a.SQS.DDWrappers.DD.Delegate({container:this._fieldContainer,nodes:s,handles:[s+" .field-drag-handle-wrapper"],enableDragReorder:!0,enableDragScroll:!0,enableDragConstrained:!0,dragConstrainedConfig:{stickY:!0}})},_reorderField:function(s,n){var i=this.get("data"),u=i.splice(s,1)[0];i.splice(n,0,u),this.add(this.remove(s),n),this.fire("change")},_renderFieldWidget:function(s,n){var i=this.add(new a.Squarespace.Widgets.FormBuilderField({field:s})).item(0);n&&(i.once("editingChange",function(){var u=this.get("boundingBox"),h=u.get("scrollTop"),g=i.get("boundingBox").getY(),p=h+g-u.getY();u.set("scrollTop",p)},this),i.openEdit(),i.focusAndSelect()),this._ddDelegate.syncTargets()},_removeFieldWidget:function(s){var n=s.get("boundingBox"),i=[],u=this.get("contentBox"),h=u.all(".add-field-button, .sqs-form-builder-field");h.each(function(g){if(g!==n){g.plug(a.Squarespace.PositionAnimator);var p=g.positionAnimator;p.hold(),i.push(p)}}),s.blur(),this.remove(s),s.destroy(!0),a.Array.each(i,function(g){g.release()})},_openFieldSelector:function(){var s=this.get("dialog");a.Lang.isValue(s)&&s.addChildDialog(this._fieldSelector),this._fieldSelector.show({anchor:this._addFieldButton})},_confirmFieldRemoval:function(s){var n=this.get("minimumLength"),i=this.get("isMailChimpConnected");i&&s.get("field").type==="email"?new a.Squarespace.Widgets.Alert({"strings.title":(0,d.t)("Cannot Remove Field",null,{project:"scripts-v6-root"}),"strings.message":(0,d.t)("MailChimp requires an email field.",null,{project:"scripts-v6-root"})}):this.get("data").length-1<n?new a.Squarespace.Widgets.Alert({"strings.title":(0,d.t)("Cannot Remove Field",null,{project:"scripts-v6-root"}),"strings.message":(0,d._6)({one:"This form must have at least {%n} field",other:"This form must have at least {%n} fields"},n,null,{project:"scripts-v6-root",notes:"oldKey: minimumLength"})}):new a.Squarespace.Widgets.Confirmation({"strings.title":(0,d.t)("Remove",null,{project:"scripts-v6-root"}),"strings.message":(0,d.t)("Are you sure you wish to remove this field?",null,{project:"scripts-v6-root"})}).on("confirm",function(){this.removeField(s)},this)},_validateFieldSelection:function(s){var n=s.type==="email",i=this._hasEmailField(),u=this.get("isMailChimpConnected");if(n&&u&&i)return{title:(0,d.t)("Email Field Not Added",null,{project:"scripts-v6-root"}),description:(0,d.t)("Only one email field can be added to a MailChimp-connected form.",null,{project:"scripts-v6-root"})}},_hasEmailField:function(){var s=!1;return a.Array.each(this.get("data"),function(n){n.type==="email"&&(s=!0)}),s},_createFieldSelector:function(){var s=this._getFieldOptions(),n=Math.min(s.length,5);return new a.Squarespace.EditingDialog({closeOthers:!1,loadingText:(0,d.t)("Loading\u2026",null,{project:"scripts-v6-root"}),closingText:(0,d.t)("Creating\u2026",null,{project:"scripts-v6-root"}),style:"flyout",flyoutPointerDirection:"centered",width:n*100,overlay:.5,primaryTabs:[{title:(0,d.t)("Add Form Field",null,{project:"scripts-v6-root"}),icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:a.Squarespace.DialogFields.MultiOption,config:{name:"fieldOptions",titleStyle:"top",className:"button round square",defaultValue:null,iconDropPx:20,buttonStyle:!0,columns:n,alwaysShowTitles:!0,options:s}}]}]})},_getFieldOptions:function(){var s=this.get("excludedFieldTypes");return a.Array.reject(e,function(n){var i=a.Array.find(s,function(u){return u.type===n.value.type});return i!==null})}},{CSS_PREFIX:"sqs-form-builder",ATTRS:{data:{value:[],validator:a.Squarespace.AttrValidators.isArray},isMailChimpConnected:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},minimumLength:{value:1,validator:a.Squarespace.AttrValidators.isNumber},excludedFieldTypes:{value:[],validator:a.Squarespace.AttrValidators.isArray}}})},"1.0",{requires:["base","node","squarespace-attr-validators","@sqs/yui-dd-wrappers/dd-delegate","squarespace-dialog","squarespace-dialog-field-2","squarespace-dialog-multi-option","squarespace-form-builder-field","squarespace-form-editing-utils","squarespace-ui-base","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation","widget-parent"]})},953266:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-dialog-form-preview",function(d){d.namespace("Squarespace.DialogFields");var o=d.Squarespace.DialogFields.FormPreview=d.Base.create("formPreview",d.Squarespace.DialogField2,[],{initializer:function(){this._formPreview=new d.Squarespace.Widgets.FormPreview({form:this.get("data"),hideSubmitButton:!0}),this._emptyMessage=d.Node.create('<div class="no-fields">'+(0,l.t)("No fields. Use the form builder to add some.",null,{project:"scripts-v6-root"})+"</div>")},destructor:function(){this._formPreview.destroy()},renderUI:function(){o.superclass.renderUI.call(this);var e=this.get("contentBox");this._formPreview.render(e),e.append(this._emptyMessage)},syncUI:function(){o.superclass.syncUI.call(this),this._formPreview.syncUI(),this.get("data").get("fields").length>0?(this._emptyMessage.hide(),this._formPreview.show()):(this._formPreview.hide(),this._emptyMessage.show())}},{CSS_PREFIX:"sqs-dialog-preview-form",ATTRS:{data:{value:null,validator:function(e){return d.instanceOf(e,d.Squarespace.Models.Form)}},readOnly:{value:!0}}})},"1.0",{requires:["base","json","node","squarespace-dialog-field-2","squarespace-form-preview","squarespace-models-form"]})},969736:function(c,b,t){"use strict";var l=t(259093),d=t.n(l),o=t(714487),e=t(291910);YUI.add("squarespace-dialog-form-selector",function(a){a.namespace("Squarespace.DialogFields");var r={};r[d().PRODUCT]=a.Squarespace.ProductFormModelEditor;var s=a.Squarespace.DialogFields.FormSelector=a.Base.create("formSelector",a.Squarespace.DialogField2,[],{initializer:function(){a.Squarespace.FormCache.load(a.bind(function(){this._set("dataLoaded",!0)},this))},destructor:function(){this._loadingTimer&&this._loadingTimer.cancel()},renderUI:function(){s.superclass.renderUI.call(this);var n=this.get("contentBox");this.get("dataLoaded")||this.get("boundingBox").addClass("content-loading");var i=n.appendChild('<div class="loading-state"><div class="spinner"></div><div class="text">'+(0,o.t)("Loading...",null,{project:"scripts-v6-root"})+"</div></div>");new a.Squarespace.Spinner({size:20,color:"dark",render:i.one(".spinner")}).spin();var u=this.get("strings.noFormMessage");this._noFormEl=n.appendChild('<div class="no-form"><div class="name">'+u+"</div></div>"),this._addFormEl=n.appendChild('<div class="add-form"><div class="title"><div class="title-icon"></div><div class="title-text">'+(0,o.t)("Create New Form",null,{project:"scripts-v6-root"})+"</div></div></div>")},bindUI:function(){s.superclass.bindUI.call(this),this.after("dataLoadedChange",this.syncUI,this),this._bindFormCache(),this.get("contentBox").delegate("click",function(n){var i=n.currentTarget;if(n.target.test(".edit")){this._editForm(i);return}else if(i.hasClass("selected"))return;var u=i.hasClass("no-form"),h=i.getAttribute("data-form-id"),g=u?null:h;this.set("data",g,{noSyncUI:!0}),this._updateSelectedFormNode()},".form, .no-form",this),this._addFormEl.on("click",this._addForm,this)},syncUI:function(){if(s.superclass.syncUI.call(this),this.get("dataLoaded")){this._setLoadedState(),this.get("contentBox").all(".form").remove(!0);var n=this.get("formType"),i=a.Squarespace.FormCache.filterByType(n);a.Array.each(i,this._addFormNode,this),this._updateSelectedFormNode()}else this._setLoadingState()},_setLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this.get("boundingBox").removeClass("content-loading")},_setLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._loadingTimer=a.later(500,this,function(){this.get("boundingBox").addClass("content-loading")})},_bindFormCache:function(){var n=a.Squarespace.FormCache;this._registerEvent(n.after("reset",this.syncUI,this)),this._registerEvent(n.after("add",function(i){this._addFormNode(i.model)},this)),this._registerEvent(n.after("remove",function(i){var u=i.model;this._removeFormNode(u),u.get("id")===this.get("data")&&(this.set("data",null,{noSyncUI:!0}),this._updateSelectedFormNode())},this)),this._registerEvent(n.after("*:save",function(i){this._updateFormNode(i.target)},this))},_addFormNode:function(n){var i=a.Node.create('<div class="form" data-form-id="'+n.get("id")+'"><div class="name">'+e.T.sanitize(n.get("name"))+'</div><div class="edit">'+(0,o.t)("Edit",null,{project:"scripts-v6-root"})+"</div></div>");return n.get("id")===this.get("data")&&i.addClass("selected"),i.setData("form",n),this._addFormEl.insert(i,"before"),i},_updateFormNode:function(n){var i=this._getFormNode(n.get("id")),u=i.one(".name"),h=e.T.sanitize(n.get("name"));h!==u.getHTML()&&u.setHTML(h)},_removeFormNode:function(n){this._getFormNode(n.get("id")).remove(!0)},_getFormNode:function(n){return this.get("contentBox").one('[data-form-id="'+n+'"]')},_updateSelectedFormNode:function(){var n=this.get("contentBox").one(".selected");n&&n.removeClass("selected");var i=this.get("data");i?this._getFormNode(i).addClass("selected"):this._noFormEl.addClass("selected")},_editForm:function(n){var i=r[this.get("formType")],u=n.getData("form");new i({model:u}).show()},_addForm:function(){var n=this.get("formType"),i=r[n],u=new a.Squarespace.Models.Form({type:n,name:(0,o.t)("New Form",null,{project:"scripts-v6-root"}),useLightbox:!1});u.onceAfter("save",function(){a.Squarespace.FormCache.add(u),this.set("data",u.get("id"),{noSyncUI:!0}),this._updateSelectedFormNode()},this),new i({model:u}).show()}},{CSS_PREFIX:"sqs-form-selector",ATTRS:{data:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},formType:{value:d().BLOCK,validator:function(n){return!!a.Object.hasValue(d(),n)},writeOnce:"initOnly"},dataLoaded:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:!0},strings:{value:{noFormMessage:(0,o.t)("No Form Required",null,{project:"scripts-v6-root"})},validator:a.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-editor-form-product","squarespace-models-form","squarespace-spinner"]})},168851:function(c,b,t){"use strict";var l=t(714487),d=t(174161),o=t(233284),e=t(795478),a=t.n(e),r=t(799694),s=t(850756),n=t(757182),i=t(374335),u=t.n(i);function h(E,S,y){return S in E?Object.defineProperty(E,S,{value:y,enumerable:!0,configurable:!0,writable:!0}):E[S]=y,E}var g;class p extends(g=d.Component){render(){return d.createElement(r.Z,this.props)}}h(p,"propTypes",{initialData:a().shape({connectionState:a().number,username:a().string,socialConfig:a().obj,spreadsheetName:a().string}),isConnecting:a().bool,isConnected:a().bool,username:a().string,showConnectionFailedAlert:a().bool,showConnectionFailedError:a().bool,googleDriveSpreadsheetName:a().string,showFormNameRequiredError:a().bool,googleDriveConfig:a().object}),h(p,"defaultProps",{initialData:{}});const m=u()({getStores(){return[n.Z]},componentDidConnect(E){s.Z.loadFromSavedData(E.initialData||{})},getPropsFromStores(){return n.Z.getState()}},p);var _=t(43594),v=t.n(_);YUI.add("squarespace-dialog-google-docs-service-connect",function(E){E.namespace("Squarespace.DialogFields"),E.Squarespace.DialogFields.GoogleDocsServiceConnect=E.Base.create("googleDocsServiceConnect",E.Squarespace.DialogField2,[],{initializer:function(S){this.reactElement=d.createElement(m,{initialData:S.data})},renderUI:function(){this.reactInstance=o.render(this.reactElement,this.get("contentBox").getDOMNode())},destructor:function(){o.unmountComponentAtNode(this.get("contentBox").getDOMNode()),this.reactInstance=null,this.reactElement=null},didDataChange:function(){return n.Z.getState().isDirty},_getErrors:function(){var S=[],y=n.Z.getState();return y.isConnected&&y.showFormNameRequiredError&&S.push((0,l.t)("Spreadsheet name required.",null,{project:"scripts-v6-root"})),S}},{ATTRS:{data:{getter:function(){var S=n.Z.getState();return{connectionState:S.isConnected?v().CONNECTED:v().DISCONNECTED,username:S.username,socialConfig:S.googleDriveConfig,spreadsheetName:S.googleDriveSpreadsheetName}}}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},186818:function(c,b,t){"use strict";var l=t(461761),d=t.n(l),o=t(714487),e=t(783971);function a(r){const s=r.split("||");return s.length===3?String(s[1]).toLowerCase():!1}YUI.add("squarespace-dialog-legacy-stateflow",function(r){var s;s=function(i,u){if(!r.Lang.isObject(i)||!r.Lang.isObject(u))return i===u;var h=!0;return r.Object.each(i,function(g,p){r.Lang.isObject(g)&&r.Lang.isObject(u[p])?h=h&&s(g,u[p]):g!==u[p]&&(h=!1)}),h},r.namespace("Squarespace.DialogFields");var n=r.Squarespace.DialogFields.LegacyStateflow=r.Base.create("LegacyStateflow",r.Squarespace.DialogField2,[r.WidgetParent],{initializer:function(i){var u=Date.now(),h;this._resizeEmitter=new r.Squarespace.ResizeEmitter({timeout:100}),this._childrenContainer=r.one("body"),r.Lang.isValue(i.data)||(i.data={state:i.stateOrder[0],date:i.allowNever?null:u},this.set("data",i.data)),r.Lang.isNull(i.data.date)&&i.allowNever?this.set("durationOffset",-1):(h=(0,e.Z)(new Date,i.data.date),this.set("durationOffset",h)),this.set("stateType",this.getStateType()),this._addChildWidgets()},renderUI:function(){n.superclass.renderUI.call(this);var i=this.get("contentBox");this.stateLabel=i.one(".field-workflow-title"),this.stateDesc=i.one(".field-workflow-description")},bindUI:function(){n.superclass.bindUI.call(this),this._resizeEmitter.on("resize:end",function(){this.each(function(i){i.align()},this)},this),this.get("boundingBox").on("clickoutside",function(i){this._timer.get("boundingBox").contains(i.target)||this._picker.get("boundingBox").contains(i.target)||this.closeFlyout()},this),this.stateDesc.on("click",this.onStateChangeRequest,this),this.stateLabel.on("click",this.onStateChangeRequest,this),this.on("dataChange",this.onDataChange,this),this.after("stateScheduler:dataChange",this.aggregateWidgetData,this,{noSyncUI:!0}),this.after("statepicker:dataChange",this.aggregateWidgetData,this)},syncUI:function(){n.superclass.syncUI.call(this);var i=this.get("data"),u=this.get("states")[i.state];this.stateLabel.set("text",u.title),this.stateDesc.setHTML(this.getStateDesc(u.stateDesc,i.date))},destructor:function(){this._resizeEmitter.destroy(),this.each(function(i){i.hide(),i.destroy()},this)},_addChildWidgets:function(){this._timer=this.add({childType:r.Squarespace.DialogFields.StateScheduler,data:this.get("data").date,type:this.get("stateType"),allowNever:this.get("allowNever"),durationOffset:this.get("durationOffset"),visible:!1,align:{node:this.get("contentBox").one(".duration-wrapper, .date-wrapper"),points:[r.WidgetPositionAlign.BC,r.WidgetPositionAlign.TC]}}).item(0),this._picker=this.add({childType:r.Squarespace.DialogFields.Statepicker,data:this.get("data"),states:this.get("states"),stateOrder:this.get("stateOrder"),stateType:this.get("stateType"),allowNever:this.get("allowNever"),visible:!1,align:{node:this.get("boundingBox"),points:[r.WidgetPositionAlign.BC,r.WidgetPositionAlign.BC]}}).item(0)},onStateChangeRequest:function(i){var u=i.target.hasClass("duration")||i.target.hasClass("date");this.showFlyout(u?"timer":"picker")},onDataChange:function(i){var u,h=i.newVal;r.Lang.isValue(h.state)&&(this.set("stateType",this.getStateType(h)),this._timer.set("type",this.get("stateType"))),r.Lang.isNull(h.date)&&this.get("allowNever")?this.set("durationOffset",-1):(u=(0,e.Z)(new Date,h.date),this.set("durationOffset",u)),i.closeFlyout&&this.closeFlyout()},aggregateWidgetData:function(i){var u=this.get("data"),h=i.newVal,g={},p={closeFlyout:!1};r.Lang.isDate(h)?g.date=h.getTime():r.Lang.isString(h)?(g.state=h,p.closeFlyout=!0):r.Lang.isNumber(h)?isNaN(new Date(h).getTime())||(g.date=h):r.Lang.isObject(h)?(r.Object.hasKey(h,"state")&&(g.state=h.state),p.closeFlyout=!0):r.Lang.isNull(h)&&(g.date=null),this.set("data",r.merge(u,g),p)},showFlyout:function(i){i==="picker"&&this._picker.get("visible")||i==="timer"&&this._timer.get("visible")||(i==="picker"?(this._timer.hide(),this._picker.set("data",this.get("data")),this._picker.show(),this._picker.align()):(this._picker.hide(),this._timer.setAttrs({data:this.get("data").date,"align.node":this.get("contentBox").one(".duration-wrapper, .date-wrapper")}),this._timer.show(),this._timer.align()))},closeFlyout:function(i,u,h){this.each(function(g){g.hide()},this),this.syncUI()},getStateType:function(i){var u=i||this.get("data"),h=this.get("states"),g;return r.Object.hasKey(h,u.state)?(g=a(h[u.state].stateDesc),g||"none"):!1},getStateDesc:function(i,u){return i=i.replace("||","{").replace("||","}"),r.Lang.sub(i,{DATE:this.getDateText(u),DURATION:this.getDurationText(u)})},getDateText:function(i){var u="-",h='<span class="date-wrapper"><span class="date">{date}</span></span>';return r.Lang.isValue(i)&&(u=(0,o.p6)({date:i,zoneId:d()(window.Static,"SQUARESPACE_CONTEXT.website.timeZone")},{date:"medium",time:"short"})),r.Lang.sub(h,{date:u})},getDurationText:function(i){var u,h=this.get("durationOffset"),g=this.get("allowNever")&&!r.Lang.isValue(i),p=r.Lang.isValue(i)?(0,o.p6)({date:i,zoneId:d()(window.Static,"SQUARESPACE_CONTEXT.website.timeZone")},{time:"short"}):"",f='<span class="duration-wrapper"><span class="duration">{duration}</span></span>';return h===-1&&g?u=(0,o.t)("never",null,{project:"scripts-v6-root"}):h<0?u=(0,o.t)("now",null,{project:"scripts-v6-root"}):h===0?u=(0,o.t)("today at {prettyDate}",{prettyDate:p},{project:"scripts-v6-root"}):h===1?u=(0,o.t)("tomorrow at {prettyDate}",{prettyDate:p},{project:"scripts-v6-root"}):u=(0,o.t)("in {offset} days at {prettyDate}",{offset:h,prettyDate:p},{project:"scripts-v6-root"}),r.Lang.sub(f,{duration:u})},didDataChange:function(){var i=this.get("data");return!s(i,this._initialData)}},{CSS_PREFIX:"sqs-legacy-stateflow",TEMPLATE:'<div class="clear field-workflow-wrapper"><div class="field-workflow-title">&nbsp</div><div class="field-workflow-description">&nbsp</div></div>',ATTRS:{strings:{},data:{},states:{},stateOrder:{validator:r.Lang.isArray},stateType:{},durationOffset:{value:-1,validator:function(i){return r.Lang.isNumber(Number(i))},setter:function(i){return parseInt(i,10)}},allowNever:{validator:r.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-statepicker","squarespace-dialog-statepicker-scheduler","squarespace-dom-emitters-resize"]})},681083:function(c,b,t){"use strict";var l=t(714487),d=t(174161),o=t(233284),e=t(795478),a=t.n(e),r=t(631805),s=t(774859),n=t(941982),i=t(374335),u=t.n(i);function h(E,S,y){return S in E?Object.defineProperty(E,S,{value:y,enumerable:!0,configurable:!0,writable:!0}):E[S]=y,E}var g;class p extends(g=d.Component){UNSAFE_componentWillMount(){s.Z.savePreviousSettings()}componentWillUnmount(){s.Z.restorePreviousSettings()}render(){return d.createElement(r.Z,this.props)}}h(p,"propTypes",{initialData:a().shape({connectionState:a().number,list:a().string,socialConfig:a().obj,username:a().string,useSingleOptIn:a().bool}),isConnecting:a().bool.isRequired,isMailChimpConnected:a().bool.isRequired,mailChimpError:a().bool.isRequired,mailChimpListId:a().string,mailChimpLists:a().arrayOf(a().object),mailChimpUsername:a().string,mailChimpUseSingleOptIn:a().bool,showConnectionFailedAlert:a().bool.isRequired,showMailingListRequiredError:a().bool.isRequired,showNoMailChimpListsAlert:a().bool.isRequired}),h(p,"defaultProps",{mailChimpLists:[]});const m=u()({getStores(){return[n.Z]},componentDidConnect(E){s.Z.loadFromSavedData(E.initialData||{})},getPropsFromStores(){const E=n.Z.getState(),S=E.mailChimpConfig;return{isConnecting:E.isConnecting,isMailChimpConnected:S.isMailChimpConnected,mailChimpError:S.mailChimpConnectionInfo.mailChimpError,mailChimpListId:S.mailChimpListId,mailChimpLists:S.mailChimpConnectionInfo.mailChimpLists,mailChimpUsername:S.mailChimpUsername,mailChimpUseSingleOptIn:S.mailChimpUseSingleOptIn,showConnectionFailedAlert:E.showConnectionFailedAlert,showMailingListRequiredError:E.showMailingListRequiredError,showNoMailChimpListsAlert:E.showNoMailChimpListsAlert}}},p);var _=t(43594),v=t.n(_);YUI.add("squarespace-dialog-mailchimp-service-connect",function(E){E.namespace("Squarespace.DialogFields"),E.Squarespace.DialogFields.MailChimpServiceConnect=E.Base.create("mailChimpServiceConnect",E.Squarespace.DialogField2,[],{initializer:function(S){this.reactElement=d.createElement(m,{initialData:S.data})},renderUI:function(){this.reactInstance=o.render(this.reactElement,this.get("contentBox").getDOMNode())},destructor:function(){o.unmountComponentAtNode(this.get("contentBox").getDOMNode()),this.reactInstance=null,this.reactElement=null},didDataChange:function(){return n.Z.getState().isDirty},_getErrors:function(){var S=[],y=n.Z.getState();return y.mailChimpConfig.isMailChimpConnected&&!y.mailChimpConfig.mailChimpListId&&(s.Z.mailChimpValidationError(),S.push((0,l.t)("Select a list",null,{project:"scripts-v6-root"}))),S}},{ATTRS:{data:{getter:function(){var S=n.Z.getState();return{connectionState:S.mailChimpConfig.isMailChimpConnected?v().CONNECTED:v().DISCONNECTED,username:S.mailChimpConfig.mailChimpUsername,useSingleOptIn:S.mailChimpConfig.mailChimpUseSingleOptIn,socialConfig:S.mailChimpConfig.mailChimpOAuthConfig,list:S.mailChimpConfig.mailChimpListId}}}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},748199:function(c,b,t){"use strict";var l=t(714487),d=t(437951),o=t.n(d);YUI.add("squarespace-dialog-product-chooser",function(e){var a=60;e.Squarespace.ProductChooserModes={squarespace:Class.create({TITLE:(0,l.t)("Find a Product",null,{project:"scripts-v6-root"}),DATA_PROPERTY:"id",URL:"/api/content-items/search",TEMPLATE:'<div class="thumbnail-wrapper"><img style="margin-left:{marginLeft}px" src="/item/{id}?format=100w" class="thumbnail" alt="{title}"></div><div class="description"><div class="text" alt="{title}">{title}</div><div class="author">{numVariants}</div></div>',render:function(s){var n=0;if(e.Lang.isValue(s.originalSize)&&e.Lang.isValue(s.mediaFocalPoint)){var i=e.Array.map(s.originalSize.split("x"),Number),u=a*i[0]/i[1];n=(a-u)*s.mediaFocalPoint.x}return e.Lang.sub(this.TEMPLATE,{id:s.id,title:e.Escape.html(s.title),numVariants:(0,l._6)({one:"variant",other:"variants"},s.variants.length,null,{project:"scripts-v6-root",notes:"oldKey: numVariants"}),marginLeft:n})},acResultFormatter:function(s,n){return e.Array.map(n,function(i){return'<div class="ac-product">'+this.render(i.raw)+"</div>"},this)},getAcRequestTemplate:function(){var s="?q={query}";return s+=e.Lang.sub("&collectionType={collectionType}&recordType={recordType}&isPublished={isPublished}",{collectionType:o().PRODUCTS,recordType:e.Squarespace.Enums.RecordType.STORE_ITEM,isPublished:!0}),s}}),amazon:Class.create({DATA_PROPERTY:"asin",URL:"/api/config/AmazonProductSearch",TEMPLATE:'<div class="thumbnail-wrapper"><img src="{thumbUrl}" class="thumbnail" alt="{title}"></div><div class="description"><div class="text" alt="{title}">{title}</div><div class="author">{author}</div></div>',TITLE:(0,l.t)("Search For Product Keywords or paste product URL",null,{project:"scripts-v6-root"}),render:function(s){return e.Lang.sub(this.TEMPLATE,{thumbUrl:s.imageUrlMedium,title:e.Escape.html(s.title),author:this._formatByline(s)})},acResultFormatter:function(s,n){return e.Array.map(n,function(i){return'<div class="ac-product">'+this.render(i.raw,i.highlighted)+"</div>"},this)},getAcRequestTemplate:function(){return"?q={query}"},_formatByline:function(s){return s.authors&&s.authors.length?(0,l.t)("By {productAuthors}",{productAuthors:s.authors.join(", ")},{project:"scripts-v6-root"}):s.artists&&s.artists.length?(0,l.t)("By {productArtists}",{productArtists:s.artists.join(", ")},{project:"scripts-v6-root"}):s.actors&&s.actors.length?(0,l.t)("Starring {productActors}",{productActors:s.actors.join(", ")},{project:"scripts-v6-root"}):s.manufacturer}})},e.namespace("Squarespace.DialogFields");var r=e.Squarespace.DialogFields.ProductChooser=e.Base.create("productChooser",e.Squarespace.DialogField2,[],{initializer:function(s){this._mode=new e.Squarespace.ProductChooserModes[this.get("mode")]},destructor:function(){this._autoCompleteField&&this._autoCompleteField.destroy()},renderUI:function(){r.superclass.renderUI.call(this);var s=this.get("contentBox");this._hintNode=s.appendChild('<div class="hint">'+this._mode.TITLE+"</div>"),this._productSearchNode=s.appendChild('<div class="product-search"></div>'),this._productPreviewNode=s.appendChild('<div class="product-preview"></div>'),this._productSearchIconNode=this._productSearchNode.appendChild('<div class="search-icon"></div>'),this._productSearchNoticeNode=this._productSearchNode.appendChild((0,l.t)('<div class="product-search-result-notice"><div class="notice-text">No products found.</div></div>',null,{project:"scripts-v6-root"})),this._productSearchAutoCompleteNode=this._productSearchNode.appendChild('<div class="product-search-auto-complete"></div>'),this._productSearchNoticeNode.hide(),this.get("icon")&&this._productSearchNode.addClass("has-icon"),this._autoCompleteField=this._createAutoCompleteField(),this._autoCompleteField.render(this._productSearchAutoCompleteNode),this.set("errorFlyoutAnchor",this._productSearchAutoCompleteNode)},bindUI:function(){r.superclass.bindUI.call(this);var s=this.get("contentBox"),n=this._autoCompleteField,i=n.get("acWidget"),u=this._productSearchNoticeNode;s.delegate("click",function(){this.set("data",null)},".clear-selected-product",this),this._registerEvent(n.on("select",this._onAutoCompleteSelect,this)),this._registerEvent(n.on("blur",n.hideError,this)),this._registerEvent(i.on("results",function(h){h.results.length>0?u.setStyle("display","none"):u.setStyle("display","block")})),this._registerEvent(i.on("clear",function(){u.setStyle("display","none")}))},syncUI:function(){r.superclass.syncUI.call(this);var s=this.get("contentBox"),n=this._hintNode,i=this._autoCompleteField;i.clear(),i.focus(),this._updatePreview(this.get("data")),e.Lang.isValue(this.get("data"))?(s.addClass("has-data"),s.removeClass("no-data"),n.setContent((0,l.t)("Selected Product",null,{project:"scripts-v6-root"}))):(s.addClass("no-data"),s.removeClass("has-data"),n.setContent((0,l.t)("Find a Product",null,{project:"scripts-v6-root"})))},focus:function(){this._autoCompleteField.focus()},getErrors:function(){return this.get("required")&&!e.Lang.isValue(this.get("data"))?[(0,l.t)("You must choose a product",null,{project:"scripts-v6-root"})]:[]},didDataChange:function(){var s=this.get("data");return e.Lang.isObject(this._initialData)&&e.Lang.isObject(s)?s.asin!==this._initialData.asin:this._initialData!==s},_onAutoCompleteSelect:function(){var s=this._autoCompleteField,n=s.get("data"),i=s.get("dataObject");e.Lang.isValue(n)&&n!==""&&(this.get("mode")==="amazon"?this.set("data",i):this.set("data",n))},_updatePreview:function(s){if(e.Lang.isValue(s)){if(this.get("mode")==="squarespace"&&e.Lang.isString(s)){this._getProductItem(s);return}}else return;var n=this._productPreviewNode,i=this._mode.render(s)+'<div class="clear-selected-wrapper"><div class="clear-selected-product"></div></div>';n.setContent(i),n.setStyle("opacity",0),n.show("fadeIn",{duration:.25})},_getProductItem:function(s){e.Data.get({url:"/api/commondata/GetItem",data:{itemId:s},success:function(n){this._updatePreview(n.item)},failure:function(n){this.set("data",null)}},this)},_createAutoCompleteField:function(){var s=this._mode,n={source:this._createDataSource(),requestTemplate:s.getAcRequestTemplate(),resultTextLocator:"title",resultFormatter:e.bind(s.acResultFormatter,s),maxResults:this.get("maxResults")},i=e.merge(n,this.get("acConfig"));return new e.Squarespace.DialogFields.AutoComplete({"strings.placeholder":this.get("strings.placeholder"),requireListEntry:!0,responseDataProperty:this._mode.DATA_PROPERTY,acConfig:i})},_createDataSource:function(){var s=new e.DataSource.IO({source:this._mode.URL});return s.plug(e.Plugin.DataSourceJSONSchema,{schema:{resultListLocator:this.get("mode")==="amazon"?"products":"results"}}),s.on("error",function(n){if(!n.stopped){var i=JSON.parse(n.data.response),u=i.error;e.Lang.isValue(u)&&this._autoCompleteField.showError(u)}},this),s}},{CSS_PREFIX:"sqs-product-chooser",ATTRS:{mode:{value:"squarespace",validator:function(s){return["squarespace","amazon"].indexOf(s)!==-1},writeOnce:"initOnly"},strings:{value:{placeholder:(0,l.t)("Search",null,{project:"scripts-v6-root"})}},icon:{value:!1},maxResults:{validator:e.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"},acConfig:{validator:e.Squarespace.AttrValidators.isObject,writeOnce:"initOnly",value:{}},errorFlyoutAnchor:{value:null,readOnly:!1,validator:e.Squarespace.AttrValidators.isNullOrInstanceOf(e.Node)}}})},"1.0",{requires:["base","datasource","squarespace-attr-validators","squarespace-content-item-types-enum-record-type","squarespace-dialog-auto-complete","squarespace-dialog-field-2","squarespace-util"]})},875471:function(c,b,t){"use strict";var l=t(43594),d=t.n(l);YUI.add("squarespace-dialog-service-connect",function(o){o.namespace("Squarespace.DialogFields");var e=o.Squarespace.DialogFields.ServiceConnect=o.Base.create("serviceConnect",o.Squarespace.DialogField2,[],{initializer:function(){if(this.constructor===e)throw new Error("DialogFields.ServiceConnect: This is an abstract class and is not meant to be used on its own.");this._edited=!1},renderUI:function(){e.superclass.renderUI.call(this)},bindUI:function(){e.superclass.bindUI.call(this),this.onceAfter("dataChange",function(){this._edited=!0},this),this.after(["disabledChange","connectionInProgressChange"],this.syncUI,this)},syncUI:function(){e.superclass.syncUI.call(this),this.get("data.connectionState")===d().PENDING?this._setInProgressState():this.get("data.connectionState")===d().CONNECTED?this._setConnectedState():this._setDisconnectedState()},didDataChange:function(){return this._edited},_setInProgressState:function(){this.get("contentBox").removeClass("connected").removeClass("not-connected").addClass("in-progress")},_setConnectedState:function(){this.get("contentBox").removeClass("in-progress").removeClass("not-connected").addClass("connected")},_setDisconnectedState:function(){this.get("contentBox").removeClass("in-progress").removeClass("connected").addClass("not-connected")},_connect:function(){throw new Error("DialogFields.ServiceConnect: _connect must be implemented by the extending class.")},_disconnect:function(){throw new Error("DialogFields.ServiceConnect: _disconnect must be implemented by the extending class.")}},{CSS_PREFIX:"sqs-service-connect",ATTRS:{data:{value:{connectionState:d().DISCONNECTED}},connectionInProgress:{getter:function(){return this.get("data.connectionState")===d().PENDING}}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},621317:function(c,b,t){"use strict";var l=t(461761),d=t.n(l),o=t(714487),e=t(329001),a=t(384708);YUI.add("squarespace-dialog-statepicker-inset-calendar",function(r){var s=r.namespace("Squarespace.DialogFields").InsetCalendar=r.Base.create("insetCalendar",r.Squarespace.DialogField2,[r.WidgetChild],{initializer:function(n){var i;r.Lang.isDate(n.data)?i=n.data:r.Lang.isNumber(n.data)?i=new Date(n.data):i=new Date;var u=(0,e.Z)(i);r.Lang.isValue(n.day)||this.set("day",u.getDate()),r.Lang.isValue(n.month)||this.set("month",u.getMonth()),r.Lang.isValue(n.year)||this.set("year",u.getFullYear())},renderUI:function(){s.superclass.renderUI.call(this);var n=this.get("contentBox");this._nextMonth=n.one(".next"),this._prevMonth=n.one(".prev")},bindUI:function(){s.superclass.bindUI.call(this),this._nextMonth.on("click",this.showNextMonth,this),this._prevMonth.on("click",this.showPrevMonth,this),r.delegate("click",this.handleDayClick,this.get("contentBox"),"td",this),this.after(["dayChange","monthChange"],this.setDate,this)},syncUI:function(){s.superclass.syncUI.call(this);var n=this.get("data")||new Date;this.renderCalendar(n,this.get("type"))},setDate:function(n){if(!n.silent){var i=this.get("day"),u=this.get("year"),h=this.get("month"),g=this.get("data")||new Date,p=(0,e.Z)(g);n.attrName==="day"?i=n.newVal:n.attrName==="month"&&(h=n.newVal,r.Lang.isValue(n.prevVal)&&(u=this.updateYear(n.newVal,n.prevVal))),p.set({year:u,month:h,day:i});var f=(0,a.Z)(g);p.setMinutes(p.getMinutes()-f),this.set("data",p)}},handleDayClick:function(n){n.halt();var i=parseInt(r.Lang.trim(n.target.get("text")),10),u=n.target,h=this.get("type");h==="duration"&&this.get("allowNever")&&(u.hasClass("fade")||u.hasClass("selected"))||(u.hasClass("today")||u.hasClass("active"))&&this.set("day",parseInt(i,10))},showNextMonth:function(n){this.updateMonth(1)},showPrevMonth:function(n){this.updateMonth(-1)},renderCalendar:function(n,i){var u=this.get("contentBox"),h,g=this.get("data"),p=(0,e.Z)(n),f=new Date(p.getTime()),m=new Date(p.getTime()),_,v=n.getDaysInMonth(),E=(0,e.Z)(new Date),S=new Date(p.getTime()),y,C,O=1,A=0,I=0,D="",T=d()(window.Static,"SQUARESPACE_CONTEXT.website.timeZone"),B=(0,o.p6)({date:n,zoneId:T},{skeleton:"yMMMM"});m.moveToFirstDayOfMonth(),_=m.getDay(),S.addMonths(-1),y=S.getDaysInMonth();var N=function(R,w){return'<td class="'+R+'">'+w+"</td>"};for(A=0;A<6;A++){if(D+='<tr class="body-row">',O>v+_)for(I=0;I<7;++I)D+=N("fade","&nbsp");else for(I=0;I<7;++I){var P=O-_;O<=_?D+=N("fade",y+P):O<=v+_?(f.set({day:P}),C="active",g&&p.getDate()===P?C="active selected":E.getFullYear()===p.getFullYear()&&E.getMonth()===p.getMonth()&&E.getDate()===P?C="today"+(i==="duration"?" active":""):f.getTime()<E.getTime()&&i==="duration"&&(C="fade"),D+=N(C,P)):D+=N("fade",P-v),O+=1}D+="</tr>"}h=u.one("table > tbody"),h.empty();var x=r.Node.create(D);x.all(".body-row").each(function(R){var w=r.Lang.isValue(R.one(".active"))?"table-row":"none";R.setStyle("display",w)}),h.append(x),u.one(".month").set("text",B)},updateYear:function(n,i){var u=i-n,h=this.get("year");return Math.abs(u)!==1&&(u>1?h++:u<-1&&h--,this.set("year",h)),h},updateMonth:function(n){var i=this.get("data")||new Date;n=Number(n),r.Lang.isNumber(n)||(n=0),i.addMonths(n);var u=(0,e.Z)(i);this.set("day",u.getDate(),{silent:!0}),this.setAttrs({month:u.getMonth()}),this.renderCalendar(i,this.get("type"))}},{CSS_PREFIX:"calendar-wrapper",TEMPLATE:'<div class="calendar-inset-container"><div class="header"><div class="prev back">&nbsp;</div><span class="month">&nbsp;</span><div class="next">&nbsp;</div></div><table cellpadding="0" cellspacing="0"><thead><tr><td>'+(0,o.t)("Su",null,{project:"scripts-v6-root",notes:"Sunday abbreviation"})+"</td><td>"+(0,o.t)("Mo",null,{project:"scripts-v6-root",notes:"Monday abbreviation"})+"</td><td>"+(0,o.t)("Tu",null,{project:"scripts-v6-root",notes:"Tueday abbreviation"})+"</td><td>"+(0,o.t)("We",null,{project:"scripts-v6-root",notes:"Wednesday abbreviation"})+"</td><td>"+(0,o.t)("Th",null,{project:"scripts-v6-root",notes:"Thursday abbreviation"})+"</td><td>"+(0,o.t)("Fr",null,{project:"scripts-v6-root",notes:"Friday abbreviation"})+"</td><td>"+(0,o.t)("Sa",null,{project:"scripts-v6-root",notes:"Saturday abbreviation"})+"</td></tr></thead><tbody></tbody></table></div>",ATTRS:{day:{value:1,validator:r.Squarespace.AttrValidators.isNumber,setter:function(n){return parseInt(n,10)}},month:{validator:r.Squarespace.AttrValidators.isNumber},year:{validator:r.Squarespace.AttrValidators.isNumber},data:{setter:function(n){if(!r.Lang.isValue(n))return null;var i=n;r.Lang.isNumber(n)?i=new Date(n):r.Lang.isDate(n)?i=n:i=new Date;var u=this.get("maximumDate"),h=this.get("minimumDate");return r.Lang.isValue(u)&&r.DataType.Date.isGreater(i,new Date(u))?r.Attribute.INVALID_VALUE:r.Lang.isValue(h)&&r.DataType.Date.isGreater(new Date(h),i)?null:i},validator:r.Squarespace.AttrValidators.isNullorDate},maximumDate:{validator:function(n){return r.Squarespace.AttrValidators.isNullOrNumber(n)||r.Squarespace.AttrValidators.isDate(n)}},minimumDate:{validator:function(n){return r.Squarespace.AttrValidators.isNullOrNumber(n)||r.Squarespace.AttrValidators.isDate(n)}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-dialog-fields","squarespace-node-flyout"]})},886297:function(c,b,t){"use strict";var l=t(329001),d=t(384708);YUI.add("squarespace-dialog-statepicker-inset-timer",function(o){var e=function(r,s){var n=String(r),i=Number(s),u="";if(!o.Lang.isNumber(i))return n;for(var h=0,g=i-n.length;h<g;h++)u+="0";return u+n},a=o.namespace("Squarespace.DialogFields").InsetTimer=o.Base.create("insetTimer",o.Squarespace.DialogField2,[o.WidgetChild],{initializer:function(r){o.Lang.isValue(r.data)&&this.set("data",r.data)},renderUI:function(){a.superclass.renderUI.call(this);var r=this.get("contentBox");this._timeControl=r.one(".time")},bindUI:function(){a.superclass.bindUI.call(this),this._timeControl.on("click",this.selectControlEl,this),this._timeControl.on("blur",this.onTimerBlur,this,"time")},syncUI:function(){a.superclass.syncUI.call(this),this._timeControl.set("value",this.get("time"))},selectControlEl:function(r,s){r.target.select()},onTimerBlur:function(r,s){this.set(s,r.target.get("value")),this.syncUI()}},{CSS_PREFIX:"time-wrapper",TEMPLATE:'<input type="time" class="time">',ATTRS:{time:{getter:function(){var r=this.get("localizedDate"),s=r.getHours(),n=r.getMinutes();return e(s,2)+":"+e(n,2)},setter:function(r){var s=r.split(":").map(function(h){return parseInt(h,10)}),n=s[0],i=s[1],u=this.get("localizedDate");u.setHours(n),u.setMinutes(i),this.set("localizedDate",u)}},data:{value:new Date},localizedDate:{getter:function(){return(0,l.Z)(this.get("data"))},setter:function(r){var s=(0,d.Z)(this.get("data")),n=new Date(r.getTime());n.setMinutes(n.getMinutes()-s),this.set("data",n)}}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-fields","squarespace-node-flyout"]})},921218:function(c,b,t){"use strict";var l=t(714487),d=t(255659);const o=1e3*60;function e(){for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];const h=new Date(Date.UTC(...i));let g=(0,d.Z)(h.getTime());const p=g.standardUTCOffset;g=(0,d.Z)(h.getTime()-p*o);const f=g.utcOffset;return h.setMinutes(h.getMinutes()-f),h}const a=e;var r=t(783971),s=t(329001);YUI.add("squarespace-dialog-statepicker-scheduler",function(n){var i=0,u=1,h=2,g=n.namespace("Squarespace.DialogFields").StateScheduler=n.Base.create("stateScheduler",n.Squarespace.DialogField2,[n.WidgetPosition,n.WidgetPositionAlign,n.WidgetChild,n.WidgetParent],{initializer:function(p){var f=new Date;n.Lang.isValue(p.data)&&(f=new Date(p.data));var m=this.get("maximumDate"),_=this.get("allowNever")?Date.now():null;this._widgets=[],this._widgets[i]=new n.Squarespace.DialogFields.InsetCalendar({name:"calendar",maximumDate:m,minimumDate:_,data:f}),this._widgets[u]=new n.Squarespace.DialogFields.InsetTimer({name:"timer",data:f}),this._widgets[h]=new n.Squarespace.DialogFields.Slider({name:"slider",range:[this.get("type")==="duration"&&this.get("allowNever")?-1:0,90],data:this.get("durationOffset"),labelWidth:0,isNumericLabel:!1,length:260,visible:this.get("type")==="duration",thumbUrl:"/universal/images-v6/dialog/slider-thumb-dark.png"})},destructor:function(){n.Array.each(this._widgets,function(p,f){p.detach(),p.destroy()})},renderUI:function(){g.superclass.renderUI.call(this);var p=this.get("contentBox"),f=p.one(".flyout-calendar");p.one(".flyout-title").set("text",this.get("strings.title")),this._widgets[i].render(f),this._widgets[u].render(f),this.get("type")==="duration"&&this._renderSlider();var m=n.Node.create('<div class="flyout-notch">');this.get("direction")==="down"?(m.addClass("flyout-notch-up"),p.one(".workflow-flyout").prepend(m)):p.one(".workflow-flyout").append(m)},syncUI:function(){g.superclass.syncUI.call(this),this._widgets[h].get("visible")&&this._durationEl.one(".duration").set("text",this.getShortDurationText())},bindUI:function(){g.superclass.bindUI.call(this),this._registerEvent(this._widgets[i].after("dataChange",this._mergeDateTimeComponents,this)),this._registerEvent(this._widgets[u].after("dataChange",this._mergeDateTimeComponents,this)),this._registerEvent(this._widgets[h].after("dataChange",this._updateTimeOffset,this)),this.after("typeChange",function(p){this._syncSlider(p.newVal)}),this.after("dataChange",this.syncCalendar,this)},_renderSlider:function(){var p=this.get("contentBox");this._durationEl=n.Node.create('<div class="duration-wrapper"></div>'),this._durationEl.append(n.Node.create('<div class="duration-display"><span class="duration"></span></div><div class="slider-container-wrapper"></div>')),p.one(".workflow-flyout-options").append(this._durationEl),this._widgets[h].render(p.one(".slider-container-wrapper")),this._widgets[h].show()},_syncSlider:function(p){var f=p==="duration";this._widgets[h].set("range",[this.get("type")==="duration"&&this.get("allowNever")?-1:0,90]),!this._durationEl&&f?this._renderSlider():f?(this._durationEl.show(),this._widgets[h].show(),this._widgets[h].syncUI()):n.Lang.isValue(this._durationEl)&&(this._widgets[h].hide(),this._durationEl.hide())},_mergeDateTimeComponents:function(p){if(!this._syncing){if(n.Lang.isNull(this._widgets[i].get("data"))){this.get("allowNever")?(this.set("durationOffset",-1),this.set("data",null,{noSyncUI:!0})):this.set("data",Date.now(),{noSyncUI:!0});return}var f=this._widgets[u].get("data"),m=this._widgets[i].get("data"),_=(0,s.Z)(f),v=(0,s.Z)(m),E=_.getHours(),S=_.getMinutes(),y=a(v.getFullYear(),v.getMonth(),v.getDate(),E,S);this.set("durationOffset",(0,r.Z)(new Date,y)),this.set("data",y,{noSyncUI:!0})}},_updateTimeOffset:function(p){var f=p.newVal;if(f===-1&&this.get("allowNever"))this._widgets[i].set("data",null),this._widgets[u].disable();else{this._widgets[u].enable();var m=new Date;m.addDays(p.newVal),this._widgets[i].setAttrs({day:m.getDate(),month:m.getMonth(),year:m.getFullYear(),data:m})}},syncCalendar:function(){if(this._syncing=!0,n.Lang.isValue(this.get("data"))){var p=new Date(this.get("data")),f=(0,s.Z)(p);this._widgets[i].setAttrs({day:f.getDate(),data:p},{silent:!0}),this._widgets[i].setAttrs({month:f.getMonth(),year:f.getFullYear()}),this._widgets[u].setAttrs({data:p})}this._widgets[h].get("visible")&&this._durationEl.one(".duration").set("text",this.getShortDurationText()),this._syncing=!1},getShortDurationText:function(){var p=this.get("allowNever")&&n.Lang.isNull(this.get("data")),f=this.get("durationOffset");return f===-1&&p?this.get("strings.neverText"):f===0?(0,l.t)("Today",null,{project:"scripts-v6-root"}):f===1?(0,l.t)("Tomorrow",null,{project:"scripts-v6-root"}):f===-1?(0,l.t)("Yesterday",null,{project:"scripts-v6-root"}):f<-1?(0,l.t)("{numberOfDays} Days ago",{numberOfDays:Math.abs(f)},{project:"scripts-v6-root"}):(0,l.t)("{numberOfDays} Days",{numberOfDays:Math.abs(f)},{project:"scripts-v6-root"})},getCalendarHeight:function(){return this.get("rendered")?this.get("contentBox").one(".sqs-calendar-flyout").get("offsetHeight"):0}},{CSS_PREFIX:"sqs-scheduler",TEMPLATE:'<div class="workflow-flyout tight sqs-calendar-flyout"><div class="workflow-flyout-options"><div class="flyout-title clear"></div><div class="flyout-calendar clear"></div></div></div>',ATTRS:{allowNever:{value:!1},data:{setter:function(p){return n.Lang.isDate(p)?p.getTime():p}},direction:{value:"up"},durationOffset:{value:0},errorFlyoutAnimationTime:{value:.01},maximumDate:{},strings:{value:{neverText:(0,l.t)("Never",null,{project:"scripts-v6-root"}),title:(0,l.t)("Select a Date & Time",null,{project:"scripts-v6-root"})}},type:{value:"date",validator:function(p){var f=["none","duration","date"];return f.indexOf(p)!==-1}}}})},"1.0",{requires:["base","slider","squarespace-dialog-field-2","squarespace-dialog-fields","squarespace-dialog-slider","squarespace-dialog-statepicker-inset-calendar","squarespace-dialog-statepicker-inset-timer","widget-position","widget-position-align"]})},557154:function(){YUI.add("squarespace-dialog-statepicker",function(c){var b=function(d){var o=/\[\s*([^|\]]+?)\s*(?:\|([^]]*))?\s*\]/g,e=o.exec(d);return e!==null?String(e[1]).toLowerCase():!1},t=function(d,o){if(!c.Lang.isObject(d)||!c.Lang.isObject(o))return d===o;var e=!0;return c.Object.each(d,function(a,r){c.Lang.isObject(a)&&c.Lang.isObject(o[r])?e=e&&t(a,o[r]):a!==o[r]&&(e=!1)}),e};c.namespace("Squarespace.DialogFields");var l=c.Squarespace.DialogFields.Statepicker=c.Base.create("statepicker",c.Squarespace.DialogField2,[c.WidgetPosition,c.WidgetPositionAlign],{renderUI:function(){l.superclass.renderUI.call(this);var d=this.get("contentBox");this.stateLabel=d.one(".field-workflow-title"),this.stateDesc=d.one(".field-workflow-description"),this.buildStateMenu()},onStateChosen:function(d){var o=d.currentTarget.getData("state"),e=this.get("data");c.Object.hasKey(o,"state")&&(e.state=o.state),this.set("data",e)},getStateType:function(){var d=this.get("data"),o=this.get("states"),e=o[d.state].stateDesc;return b(e)},buildStateMenu:function(){var d=this.get("stateOrder"),o=this.get("states");this._renderStatesObject(o,d)},_renderStatesObject:function(d,o){var e=c.Array.map(o,function(a,r){var s=d[a];return s.key=a,s});c.Array.each(e,this._renderState,this)},_renderState:function(d,o){var e,a=this.get("data").state,r=this.constructor.OPTION_TEMPLATE,s=c.Lang.sub(r,d),n=this.get("contentBox").one(".workflow-flyout-options");if(!n)throw new Error("No element to attach states to.");e=c.Node.create(s),e.on("click",this.onStateChosen,this),a===d.key&&e.addClass("selected"),e.setData("state",{state:d.key}),n.appendChild(e)},didDataChange:function(){return!t(this.get("data"),this._initialData)}},{CSS_PREFIX:"sqs-statepicker",TEMPLATE:'<div class="workflow-flyout"><div class="workflow-flyout-options"></div></div>',OPTION_TEMPLATE:'<div class="field-workflow-flyout-option-wrapper"><div class="field-workflow-flyout-option"><div class="field-workflow-title">{title}</div><div class="field-workflow-description">{optionDesc}</div></div></div>',ATTRS:{strings:{},data:{getter:function(d){return c.Lang.isObject(d)?c.merge(d,{}):d}},states:{},stateOrder:{},stateType:{},durationOffset:{value:-1},allowNever:{}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-fields","widget-position","widget-position-align"]})},933446:function(c,b,t){"use strict";var l=t(798589),d=t(181298),o=t(224954),e=t.n(o);YUI.add("squarespace-dialog-stringset-input-editor",function(a){var r,s=13,n=188,i=38,u=40,h=function(){return 0},g=function(p){if(a.Lang.isString(p)&&p.length>0){var f=p[0];return function(m,_){var v=m.toLocaleLowerCase().indexOf(f.toLocaleLowerCase()),E=_.toLocaleLowerCase().indexOf(f.toLocaleLowerCase());return v>E?1:v<E?-1:0}}return h};r=a.namespace("Squarespace.DialogFields").InputEditor=a.Base.create("InputEditor",a.Squarespace.DialogField2,[a.WidgetChild,a.Squarespace.Mixins.StringSetUtils],{initializer:function(p){a.Lang.isValue(p.existingMembers)||this.set("existingMembers",[]),a.Lang.isValue(p.data)||this.set("data",[]),l.isSubDesktop()&&this.get("maxSuggestions")>4&&this.set("maxSuggestions",4)},destructor:function(){this._autoCompleteEl.remove(!0),this._autoCompleteSuggestionsEl&&this._autoCompleteSuggestionsEl.remove(!0)},renderUI:function(){r.superclass.renderUI.call(this);var p=this.get("contentBox"),f=this.PARTIALS.AC_TEMPLATE;p.one(".workflow-flyout").setStyle("width",this.get("width")+"px"),p.one(".flyout-title").set("text",this.get("editorLabel")),this._editorControlEl=p.one("input"),this._editorControlEl.set("placeholder",this.get("placeholder")),this._autoCompleteEl=a.Node.create(f),this._autoCompleteSuggestionsEl=this._autoCompleteEl.one(".workflow-flyout-autocomplete"),a.one(document.body).append(this._autoCompleteEl),this._autoCompleteEl.focus(),this._autoCompleteAnim=this._anim({node:this._autoCompleteSuggestionsEl,duration:.25,easing:a.Easing.easeOutStrong})},bindUI:function(){r.superclass.bindUI.call(this),this._editorControlEl.on("keydown",this.handleTextInput,this),this._editorControlEl.on("keyup",this.haltEvent,this),this._editorControlEl.on("valuechange",this._displayAutoComplete,this),this._autoCompleteEl.on("click",this.handleAutoCompleteClick,this),this.after("selectedIndexChange",this.highlightSelection,this),this.before("destroy",function(){this._autoCompleteEl.remove(!0)},this),this._autoCompleteAnim.after("end",this._cleanUpHideFlyoutAnim,this)},haltEvent:function(p){p.halt()},handleTextInput:function(p){var f=p.keyCode,m=this.get("selectedIndex"),_=this.get("autoCompleteMatches"),v;switch(f){case s:case n:if(m===-1)v=this._editorControlEl.get("value");else{var E=this._autoCompleteSuggestionsEl.all(".match").item(m);if(E)v=E.getData("data");else{p.halt();break}}var S=e()(v.split(","));S.forEach(this.addMember,this),p.halt();break;case i:case u:if(!_.length)return;f===i&&m>0?m--:f===u&&m<_.length-1&&m++,this.set("selectedIndex",m),p.halt();break;default:this.set("selectedIndex",-1),p.stopPropagation();break}},highlightSelection:function(p){var f=p.newVal,m,_;this._autoCompleteSuggestionsEl&&(m=this._autoCompleteSuggestionsEl.all(".match"),m.removeClass("selected"),_=m.item(f),_&&_.addClass("selected"))},handleAutoCompleteClick:function(p){if(p.target.hasClass("match")&&!p.target.hasClass("disabled")){p.stopPropagation();var f=p.target.getData("data"),m=this.currentMatches(f);m&&(this._displayAutoComplete(),this.addMember(m)),this.resetControl(),this._editorControlEl.focus(),this._displayAutoComplete()}},resetControl:function(){this._editorControlEl.set("value","")},hide:function(){this._autoCompleteSuggestionsEl.hide()},alreadyHasMember:function(p){var f=this.get("data");return this.memberInSet(f,p+"")},currentMatches:function(p){var f=this.get("autoCompleteMatches"),m=a.Array.find(f,function(_,v){return _.value.toLowerCase()===p.toLowerCase()});return m?m.value:!1},addMember:function(p){var f=this.get("existingMembers"),m=this.get("allowOnlyExistingMembers");if(p=this.cleanMember(p),!a.Lang.isString(p)||p.length===0||this.alreadyHasMember(p)){this._displayAutoComplete();return}(this.memberInSet(f,p)||!m)&&(m||(f.push(p),this.set("existingMembers",f)),this._createMember(p),this.resetControl(),this.set("selectedIndex",-1),this._displayAutoComplete())},_createMember:function(p,f){a.Lang.isUndefined(f)&&(f=p),!this.alreadyHasMember(p)&&this.fire("addMember",{newVal:p})},_highlightMatch:function(p,f){return a.Highlight.all(p,f)},_processSuggestions:function(p,f,m,_){var v=[];return m.sort(g(f)),a.Array.each(m,function(E,S){var y=this._highlightMatch(E,f),C;y===a.Escape.html(E)||v.length>=_||this.alreadyHasMember(E)||(C=a.Node.create('<div class="match">'+y+"</div>"),C.setData("data",E),p.append(C),v.push({node:C,value:E}))},this),p.setStyles({opacity:1,display:"block"}),v},_displayAutoComplete:function(){var p=this.cleanMember(this._editorControlEl.get("value")),f=this.get("existingMembers"),m=this.get("maxSuggestions"),_;m<1||f.length<1||(this._autoCompleteSuggestionsEl.empty(),_=this._processSuggestions(this._autoCompleteSuggestionsEl,p,f,m),this.set("autoCompleteMatches",_),this._autoCompleteAnim&&this._autoCompleteAnim.stop(),_.length&&p?this._showAutoComplete():this._hideAutocomplete())},_showAutoComplete:function(){var p=this.get("autoCompleteMatches")||[],f=p.length,m=this._editorControlEl.get("offsetWidth"),_={display:"block",width:m+"px",opacity:1,left:this._editorControlEl.getX()-this._editorControlEl.get("docScrollX")+"px",top:this._editorControlEl.getY()+this._editorControlEl.get("offsetHeight")-this._editorControlEl.get("docScrollY")+"px"};l.isSubDesktop()&&(_.top=this._editorControlEl.get("docScrollY")+d.GRID_PX/2+"px",_.position="fixed"),this._autoCompleteEl.setStyles(_),this._autoCompleteAnim.setAttrs({to:{height:f*23+"px"}}),this._editorControlEl.setStyles({borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"}),this._autoCompleteAnim.run()},_hideAutocomplete:function(){this._autoCompleteAnim.setAttrs({to:{height:0}}),this._autoCompleteAnim.run()},_cleanUpHideFlyoutAnim:function(p){var f=this._autoCompleteAnim.get("node"),m=this.get("borderRadius");f&&f.get("clientHeight")<1&&(f.setStyle("display","none"),this._editorControlEl.setStyles({borderBottomLeftRadius:m,borderBottomRightRadius:m}))},_anim:function(p){if(!this.get("destroyed")){var f=new a.Anim(p);return this._anims.add(f),f}},PARTIALS:{AC_TEMPLATE:'<div class="workflow-flyout tight"><div class="workflow-flyout-autocomplete clear"></div></div>'}},{CSS_PREFIX:"sqs-stringset-input-editor",TEMPLATE:'<div class="workflow-flyout tight"><div class="workflow-flyout-options clear"><div class="flyout-title"></div><input class="field-input" placeholder=""></div><div class="flyout-notch"></div></div>',ATTRS:{allowOnlyExistingMembers:{},autoCompleteMatches:{validator:a.Lang.isArray},placeholder:{value:null},borderRadius:{value:"3px"},canAddMembers:{},editorLabel:{value:""},data:{value:[]},emptyText:{value:""},existingMembers:{},flyoutNode:{getter:function(){return this.get("contentBox").one(".workflow-flyout")}},maxMemberChars:{},maxSuggestions:{value:6},selectedIndex:{value:-1,setter:function(p){var f=parseInt(p,10);return a.Lang.isNumber(f)&&f>-1?f:-1}},width:{value:250}}})},"1.0",{requires:["base","highlight","squarespace-dialog-field-2","squarespace-stringset-utils-mixin"]})},679669:function(c,b,t){"use strict";var l=t(714487),d=t(224954),o=t.n(d),e=t(119978),a=t(157484),r=t(730842),s=t(655191),n=t(989250);YUI.add("squarespace-dialog-stringset-select-editor",function(i){var u=13;i.namespace("Squarespace.DialogFields");var h=i.Squarespace.DialogFields.SelectEditor=i.Base.create("selectEditor",i.Squarespace.DialogField2,[i.WidgetChild,i.Squarespace.Mixins.StringSetUtils],{initalizer:function(g){this.publish("memberCreated",{emitFacade:!0})},renderUI:function(){h.superclass.renderUI.call(this);var g=this.get("options"),p=this.get("contentBox"),f=this.get("data"),m=p.one(this._optionsSelector),_=p.one(".workflow-flyout-options"),v=this.get("maxLength"),E=[],S=this.get("editorLabel");p.one(".workflow-flyout").setStyle("width",this.get("width")+"px"),i.Array.each(g,function(C,O){var A=this._createOptionNode(C,C,"data");this.memberInSet(f,C)&&A.addClass("active"),m.append(A),E.push(A)},this),this.get("canAddMembers")&&(this._createOptionWrapper=this._createOptionNode(this.get("addMemberText")),this._createOptionWrapper.removeClass(this.get("memberClass")),this._createOptionWrapper.addClass("add"),_.append(this._createOptionWrapper));var y=(0,l.t)("Categories, comma separated",null,{project:"scripts-v6-root"});this._createInput=i.Node.create('<input class="flyout-option-add" placeholder="'+y+'">'),i.Lang.isValue(v)&&this._createInput.setAttribute("maxlength",v),this.optionWrapEl=m,i.Lang.isString(S)&&S.length&&_.prepend(i.Node.create('<div class="flyout-title">'+S+"</div>"))},bindUI:function(){h.superclass.bindUI.call(this);var g=this.get("contentBox");this._createInput.on("blur",this._emptyCreateInput,this),this._createInput.on("keydown",this._addMemberOnEnter,this),this._createInput.on("keyup",this._haltEvent,this),this.after("optionsChange",this._appendMembers,this),this.after("memberCreated",this._emptyCreateInput,this),g.one(this._optionsSelector).on("click",this._handleOptionElClick,this),this._createOptionWrapper.on("click",this._handleCreateClick,this)},syncUI:function(){h.superclass.syncUI.call(this);var g=this.optionWrapEl.all("."+this.get("memberClass"));g.each(function(p){var f=this._memberExistsInData(p.getData("data"));p.toggleClass("active",f)},this)},_handleOptionElClick:function(g){var p=g.target;if(p.hasClass("flyout-option")&&p.hasClass(this.get("memberClass"))){var f=p.getData("data"),m=(p.hasClass("active")?"remove":"add")+"Member";this.fire(m,{newVal:f})}},_handleCreateClick:function(g){this._createOptionWrapper.contains(this._createInput)||(this._createOptionWrapper.empty(),this._createOptionWrapper.addClass("active"),this._createOptionWrapper.append(this._createInput),this._createInput.focus())},_emptyCreateInput:function(g){this.get("blurring")||this._resetCreateInput()},_addMemberOnEnter:function(g){var p=g.target.get("value");if(!(this.cleanMember(p).length<1||g.keyCode!==u)){var f=o()(p.split(",").map(this.cleanMember));f.forEach(function(m){this._memberExistsOnClient(m)?this.fire("addMember",{newVal:m}):m.trim()!==""&&this._createNewMember(m)},this)}},_haltEvent:function(g){g.halt()},_appendMembers:function(g){var p=g.newVal,f=g.prevVal;i.Array.each(p,function(m,_){if(!this.memberInSet(f,m)){var v=this._createOptionNode(m,m,"data");v.addClass("active"),this.optionWrapEl.append(v)}},this)},_toggleActiveMembersClass:function(g,p){var f=this.get("contentBox").all(this.get("memberClass"));f.each(function(m){f.get("text")===g&&m.toggleClass("active",p)})},_memberExistsInData:function(g){return this.memberInSet(this.get("data"),g)},_memberExistsOnClient:function(g){return this.memberInSet(this.get("options"),g)},_resetCreateInput:function(g){this.set("blurring",!0),i.Lang.isUndefined(g)&&(g=this.get("addMemberText")),this._createOptionWrapper.contains(this._createInput)?this._createInput.set("value",""):this._createOptionWrapper.empty(),this._createOptionWrapper.set("text",g),this._createOptionWrapper.addClass("add"),this._createOptionWrapper.removeClass("active"),this.set("blurring",!1)},_createNewMember:function(g){var p=this.get("collectionId");this._resetCreateInput((0,l.t)("Creating\u2026",null,{project:"scripts-v6-root"})),this._createOptionWrapper.removeClass("add"),this._createOptionWrapper.addClass("active"),i.Data.post({url:this.get("addMemberUrl"),data:{collectionId:p,category:g},args:g,success:i.bind(this._createNewMemberSuccess,this,g),failure:function(f){}},this)},_createNewMemberSuccess:function(g,p){var f=r.Z.getCollection(p.collectionId);(0,n.j)(f)===s.A.PRODUCT_COLLECTION&&e.QN(g,a.MX.YUI_EDITOR);var m=[],_=p.collectionCategories;m=i.Array.map(_,function(v,E){return v.name}),this._toggleActiveMembersClass(g,!0),this.set("options",m),this.fire("addMember",{newVal:g}),this.fire("memberCreated",g),this._createInput.set("value",""),this.optionWrapEl.set("scrollTop",this.optionWrapEl.get("scrollHeight"))},_createOptionNode:function(g,p,f){var m='<div class="flyout-option">{memberName}</div>',_=i.Lang.sub(m,{memberName:g}),v=i.Node.create(_);return i.Lang.isUndefined(p)||(f=f||"data",v.setData(f,p)),v.addClass(this.get("memberClass")),v},_optionsSelector:".flyout-select-options"},{CSS_PREFIX:"sqs-stringset-select-editor",TEMPLATE:'<div class="workflow-flyout tight"><div class="workflow-flyout-options clear"><div class="flyout-select-options"></div></div><div class="flyout-notch"></div></div>',ATTRS:{addMemberUrl:{value:"/api/commondata/AddCategory"},options:{value:[],validator:i.Lang.isArray,getter:function(g){return g.concat([])}},blurring:{value:!1},canAddMembers:{},collectionId:{},addMemberText:{},data:{},flyoutNode:{getter:function(){return this.get("contentBox").one(".workflow-flyout")}},memberClass:{},maxLength:{value:null},editorLabel:{},width:{value:250}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-stringset-utils-mixin"]})},169078:function(c,b,t){"use strict";var l=t(174161),d=t(233284),o=t(198182);YUI.add("squarespace-dialog-structured-input",function(e){var a=e.namespace("Squarespace.DialogFields").StructuredInput=e.Base.create("structuredInputDialog",e.Squarespace.DialogField2,[e.WidgetParent],{onChange:function(r){this.set("data",r)},syncUI:function(){a.superclass.syncUI.call(this),d.render(l.createElement(o.Z,{exampleTemplate:this.get("exampleTemplate"),onChange:this.onChange.bind(this),placeholder:this.get("placeholder"),value:this.get("data"),variables:this.get("variables"),maxLength:this.get("maxLength")}),this.get("contentBox").getDOMNode())},destructor:function(){d.unmountComponentAtNode(this.get("contentBox").getDOMNode())}},{CSS_PREFIX:"sqs-structured-input-field",ATTRS:{data:{value:""},variables:{},placeholder:"",maxLength:"",exampleTemplate:function(){}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},924336:function(){YUI.add("squarespace-dialog-tab",function(c){c.namespace("Squarespace.DialogFields");var b=c.namespace("Squarespace.DialogFields").TabButton=c.namespace("Squarespace.Widgets").TabButton=c.Base.create("tabButton",c.Squarespace.DialogFields.Button,[],{renderUI:function(){b.superclass.renderUI.call(this),this.get("boundingBox").removeClass("sqs-button")}},{CSS_PREFIX:"sqs-tab"})},"1.0",{requires:["base","node","squarespace-dialog-button"]})},899383:function(){YUI.add("squarespace-dialog-warning-banner",function(c){c.namespace("Squarespace");var b=c.Squarespace.DialogFields.WarningBanner=c.Base.create("warningBanner",c.Squarespace.DialogField2,[],{initializer:function(t){this.set("strings.warn",this.get("connectWarn"))},bindUI:function(){if(b.superclass.bindUI.call(this),c.Lang.isValue(this.get("moreInfo"))){var t=this.get("moreInfo");this._tooltip=new c.Squarespace.ToolTip({target:t.target,title:t.title,body:t.body,clickToShow:!0})}this.get("contentBox").delegate("click",function(){var l=this.get("linkAction");c.Lang.isFunction(l)&&l()},".link-action",this)},renderUI:function(){b.superclass.renderUI.call(this);var t=this.get("contentBox");t.append('<div class="warning-wrapper"><div class="warn-msg"><img src="/universal/images-v6/dialog/tiny-alert.png"><div class="message-text"></div></div>'),t.one(".message-text").setContent(this.get("strings.warningMessage"))},destroy:function(){b.superclass.destroy.call(this),c.Lang.isValue(this._tooltip)&&this._tooltip.destroy()}},{CSS_PREFIX:"sqs-warning-banner",ATTRS:{moreInfo:{value:null},strings:{warningMessage:{value:null}},linkAction:{validator:c.Squarespace.AttrValidators.isFunctionOrNull}}})},"1.0",{requires:["squarespace-attr-validators","squarespace-dialog-field-2","squarespace-ui-base","squarespace-util"]})},75493:function(c,b,t){"use strict";var l=t(714487),d=t(174161),o=t(233284),e=t(690388),a=t(834105),r=t(43594),s=t.n(r),n=t(868192);YUI.add("squarespace-dialog-zapier-service-connect",function(i){i.namespace("Squarespace.DialogFields");var u=i.Squarespace.DialogFields.ZapierServiceConnect=i.Base.create("ZapierServiceConnect",i.Squarespace.DialogFields.ServiceConnect,[],{initializer:function(h){this.get("contentBox").addClass("sqs-service-connect-content"),this.zapsConnected=h.getZapsConnected()},renderUI:function(){u.superclass.renderUI.call(this)},bindUI:function(){u.superclass.bindUI.call(this),this.after("connectionInProgressChange",function(){this.get("contentBox").setContent(this.renderTemplate())},this),this.get("contentBox").on("click",function(h){var g=this.get("data.connectionState"),p=h.target;g===s().CONNECTED||g===s().PENDING?p.hasClass("icon")&&this._disconnect():this._onConnect(),h.stopPropagation()},this)},_onConnect:function(){if(a.Z.isTrial()){this._showFeatureGateModal(this._openZapierWindow);return}var h=this.get("data");h.connectionState=s().PENDING,this.set("data",h),this.set("connectionInProgress",!0)},_disconnect:function(){var h=this.get("data");h.url=null,h.connectionState=s().DISCONNECTED,this.set("data",h),this.set("connectionInProgress",!1)},_openZapierWindow:function(){window.open(n.ZAPIER_INTEGRATION,"_blank")},_showFeatureGateModal:function(h){var g=document.createElement("div");document.body.appendChild(g);var p=d.createElement(e.Z,{isOpen:!0,isTrial:!0,onRequestClose:function(){o.unmountComponentAtNode(g),g.remove(),h()}});o.render(p,g)},_getHBTemplateContext:function(){var h=this.get("data.connectionState")===s().CONNECTED,g=this.get("connectionInProgress");return{title:(0,l.t)("Zapier",null,{project:"scripts-v6-root"}),connectedMessage:(0,l._6)({one:"{%n} Zap connected",other:"{%n} Zaps connected"},this.zapsConnected,null,{project:"scripts-v6-root",notes:"oldKey: zaps"}),pendingMessage:(0,l.t)("Awaiting Connection to Zapier",null,{project:"scripts-v6-root"}),clickToConnect:(0,l.t)("Click to connect",null,{project:"scripts-v6-root"}),connected:h,connectionInProgress:g}}},{CSS_PREFIX:"sqs-zapier-service-connect",HANDLEBARS_TEMPLATE:"dialog-zapier-service-connect.html"})},"1.0",{requires:["base","squarespace-dialog-zapier-service-connect-template","squarespace-dialog-service-connect","squarespace-dialog-text","squarespace-ui-base","squarespace-util","squarespace-widgets-alert"]})},813767:function(){YUI.add("squarespace-dialog-check",function(c){c.namespace("Squarespace.DialogFields");var b=c.Squarespace.DialogFields.Check=c.Base.create("check",c.Squarespace.DialogField2,[],{initializer:function(t){!c.Lang.isValue(t.data)&&c.Lang.isValue(t.defaultValue)&&this.set("data",t.defaultValue)},bindUI:function(){b.superclass.bindUI.call(this);var t=this.get("boundingBox");t.on("click",this._createEventHandler(this._toggleActive)),t.after("mousedown",this._createEventHandler(),this)},syncUI:function(){b.superclass.syncUI.call(this),this.get("contentBox").empty().setHTML(this.renderTemplate()),c.Lang.isValue(this.get("strings.description"))?this.get("boundingBox").addClass("has-description"):this.get("boundingBox").addClass("has-no-description")},_createEventHandler:function(t){return c.bind(function(l){this.get("haltClick")&&l.halt(),t&&t.call(this,l)},this)},_toggleActive:function(t){this.get("disabled")||this.set("data",!this.get("data"),{click:t})}},{CSS_PREFIX:"sqs-check",HANDLEBARS_TEMPLATE:"dialog-check.html",ATTRS:{data:{value:!1},haltClick:{value:!0},testAttribute:{value:"check"}}})},"1.0",{requires:["base","event-tap","squarespace-dialog-check-template","squarespace-dialog-field-2","squarespace-util"]})},947118:function(c,b,t){"use strict";var l=t(714487),d=t(698137),o=t(651404);YUI.add("squarespace-dialog-code",function(e){var a=e.namespace("Squarespace.DialogFields").Code=e.Base.create("codeEditor",e.Squarespace.DialogField2,[],{initializer:function(s){var n;e.Lang.isObject(s)&&(n=this.get("editorConfig"),this.set("editorConfig",e.merge(n,s))),this.after("dataChange",function(i){i.source==="setInitialData"&&this._editor.setValue(i.newVal)})},renderUI:function(){a.superclass.renderUI.call(this);var s=this.get("contentBox"),n=s.one(".code-editor-seed"),i=this.get("editorConfig"),u=this.get("data");e.Lang.isString(u)||(u=""),this._editor=o.Z.fromTextArea(n.getDOMNode(),i),this._editor.setValue(u)},bindUI:function(){a.superclass.bindUI.call(this),this._editor.on("change",e.bind(this._updateData,this)),this.on("visibleChange",this._refreshEditor,this)},destructor:function(){this._editor&&(this._editor.toTextArea(),this._editor=null)},_refreshEditor:function(s){this._editor&&e.Lang.isFunction(this._editor.refresh)&&this._editor.refresh()},_updateData:function(s){var n=e.Lang.trim(this._editor.getValue());this.set("data",n),this.clearError()},loadValue:function(s){this.set("data",s),this._editor.setValue(s)}},{CSS_PREFIX:"sqs-code",TEMPLATE:'<textarea class="code-editor-seed"></textarea>',ATTRS:{data:{validator:e.Lang.isString},editorConfig:{value:{mode:"htmlmixed",theme:"squarespace-light",lineNumbers:!0,indentUnit:2,tabMode:"indent",lineWrapping:!0,onChange:e.bind(this._updateData,this),autoCloseTags:!0,matchTags:!0}},visible:{value:!0}}}),r=e.namespace("Squarespace.DialogFields").HtmlCode=e.Base.create("htmlCode",e.Squarespace.DialogFields.Code,[],{isValid:function(){var s=e.Lang.trim(this.get("data"));return s===""?!0:e.Lang.isValue(s)},_getErrors:function(){return this.isValid()?[]:[this.get("strings.htmlError")]},loadValue:function(s){this.set("data",s),this._editor.setValue(s)},didDataChange:function(){var s=r.superclass.didDataChange.call(this),n=this._initialData;return!e.Lang.isValue(n)&&this.get("data")===""&&(s=!1),s}},{CSS_PREFIX:"sqs-html-code",ATTRS:{strings:{value:{htmlError:(0,l.t)("Invalid HTML",null,{project:"scripts-v6.dialog"})}},data:{value:"",validator:e.Lang.isString}}});e.namespace("Squarespace.DialogFields").UrlMappings=e.Base.create("urlMappings",e.Squarespace.DialogFields.Code,[],{isValid:function(){return!0}},{CSS_PREFIX:"sqs-url-mapping",ATTRS:{}}),e.namespace("Squarespace.DialogFields").jsonTemplateCode=e.Base.create("urlMappings",e.Squarespace.DialogFields.Code,[],{_getErrors:function(){var s=this.get("data"),n=this.get("sampleData");try{return(0,d.Z)(s,n),[]}catch(i){return[i.name+": "+i.message]}}},{CSS_PREFIX:"sqs-json-template-code",ATTRS:{strings:{},height:{readOnly:!0,value:{}},sampleData:{value:{}}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2"]})},638489:function(c,b,t){"use strict";var l=t(174161),d=t(233284),o=t(477491);YUI.add("squarespace-dialog-connected-accounts",function(e){e.namespace("Squarespace.DialogFields"),e.Squarespace.DialogFields.ConnectedAccounts=e.Base.create("connected-accounts",e.Squarespace.DialogField2,[],{initializer:function(){this.reactElement=l.createElement(o.Z,{trackingLocation:"social_links_block_editor"})},destructor:function(){d.unmountComponentAtNode(this.get("contentBox").getDOMNode()),this.reactInstance=null,this.reactElement=null},renderUI:function(){this.get("boundingBox").setStyle("margin",0),this.reactInstance=d.render(this.reactElement,this.get("contentBox").getDOMNode())}},{CSS_PREFIX:"sqs-connected-accounts",ATTRS:{testAttribute:{value:"connected-accounts"}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},181394:function(c,b,t){"use strict";var l=t(714487),d=t(44348),o=t.n(d),e=t(816130),a=t.n(e),r=t(437951),s=t.n(r),n=t(965455);YUI.add("squarespace-dialog-content-item-grid",function(i){i.namespace("Squarespace");var u=i.Squarespace.DialogFields.ContentItemGrid=i.Base.create("contentItemGridField",i.Squarespace.DialogField2,[i.WidgetParent],{initializer:function(h){this._initializeDataAndGrid(),this.after("dataChange",this._initializeDataAndGrid,this),this._edited=!1},destructor:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._contentItemGrid&&this._contentItemGrid.destroy()},renderUI:function(){u.superclass.renderUI.call(this);var h=this._loadingEl=i.Node.create('<div class="loading-state"></div>'),g=this._loadingSpinner=new i.Squarespace.Spinner({size:50,color:"dark",render:h});g.spin(),this.get("contentBox").append(h),this.get("hasFullScreenToggle")&&(this._nodeExpander=this.get("contentBox").plug(i.Squarespace.Plugins.NodeExpander).NodeExpander)},bindUI:function(){if(u.superclass.bindUI.call(this),this.after("dataLoadedChange",this.syncUI,this),this.on("dataChange",function(p){this._contentItemGrid.set("model",p.newVal)},this),this.on("uploadPreflightChange",function(p){this._contentItemGrid.set("uploadPreflight",p.newVal)}),this.get("hasFullScreenToggle")){var h=this.get("dialog");if(i.Lang.isValue(h)){var g="sqs-node-expander-active";this._nodeExpander.on("expand-start",function(p){h.el.addClass(g),h.overlayEl.addClass(g)},this),this._nodeExpander.on("contract-end",function(p){h.el.removeClass(g),h.overlayEl.removeClass(g)},this)}this._nodeExpander.on("expand-end",function(){this._contentItemGrid.set("imageSize",this.get("imageSize")*(4/3)),this._contentItemGrid.requestImageRenderingSync()},this),this._nodeExpander.on("contract-end",function(){this._contentItemGrid.set("imageSize",this.get("imageSize")),this._contentItemGrid.requestImageRenderingSync()},this)}},syncUI:function(){u.superclass.syncUI.call(this),this.get("dataLoaded")?this._setLoadedState():this._setLoadingState()},didDataChange:function(){return this._edited},show:function(){u.superclass.show.call(this),this.syncUI()},_initializeDataAndGrid:function(){this.set("dataLoaded",!1);var h=this.get("data"),g={},p=this.get("pageSize");i.Lang.isValue(p)&&(g.limit=p),h.isNew()?(this._buildContentItemGrid(),this.set("dataLoaded",!0)):h instanceof i.Squarespace.Models.ContentItem?(this.get("acceptTypes")||this.set("acceptTypes",["image"]),this._buildContentItemGrid(),this.set("dataLoaded",!0)):h.items.load(g,i.bind(function(f){f&&new i.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Missing Content",null,{project:"scripts-v6.dialog"}),"strings.message":(0,l.t)("We could not locate this content.",null,{project:"scripts-v6.dialog"})}),this.get("acceptTypes")||this.set("acceptTypes",h.getTemplateConfiguration().get("acceptTypes")),this._buildContentItemGrid(),this.set("dataLoaded",!0)},this))},_buildContentItemGrid:function(){var h=this._contentItemGrid;h&&h.destroy(),this._contentItemGrid=new i.Squarespace.ContentItemGrid({model:this.get("data"),collectionConfiguration:this.get("collectionConfiguration")||new i.Model({acceptTypes:this.get("acceptTypes")}),itemEditorOptions:{variant:this.get("itemEditorVariant"),parentDialog:this.get("dialog"),anchorToImageWidget:!0,defaultWorkflowState:o().PUBLISHED},selectorAnchorNode:this.get("selectorAnchorNode"),imageSize:this.get("imageSize"),minMargin:10,showEmptyState:!1,dragRegion:this.get("contentBox"),uploadPreflight:this.get("uploadPreflight"),contentItemImageOptions:this.get("contentItemImageOptions"),showAddIcon:this.get("showAddIcon"),loadByViewport:!1,showActionTray:this.get("showActionTray"),imageDestination:this.get("imageDestination")}),this._registerEvent(this._contentItemGrid.after(["addChild","addChildComplete","removeChild","childEdited"],function(){this.fire("edited")},this))},_setLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this.get("boundingBox").removeClass("content-loading");var h=this._contentItemGrid;h.get("rendered")?h.syncUI():h.render(this.get("contentBox"))},_setLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._loadingTimer=i.later(500,this,function(){this._loadingEl.setStyle("marginTop",this.get("contentBox").get("offsetHeight")/2-this._loadingSpinner.get("size")/2),this.get("boundingBox").addClass("content-loading")})}},{CSS_PREFIX:"sqs-content-item-grid-field",ASYNC_DATA:!0,ATTRS:{data:{getter:function(h){if(!(h instanceof i.Squarespace.Models.ContentCollection||h instanceof i.Squarespace.Models.ContentItem)){var g=(0,l.t)("Transient Gallery {transientGalleryId}",{transientGalleryId:(0,n.x)()},{project:"scripts-v6.dialog"});return new i.Squarespace.Models.ContentCollection({typeName:"transient-gallery",type:s().GALLERY_BLOCK,ordering:a().USER,title:g,navigationTitle:g,enabled:!0,urlId:(0,n.x)()})}return h},validator:function(h){return h instanceof i.Squarespace.Models.ContentCollection||h instanceof i.Squarespace.Models.ContentItem}},dataLoaded:{value:!1},acceptTypes:{},collectionConfiguration:{},contentItemImageOptions:{value:{showActionOverlay:!0,actionOverlayButtons:[i.Squarespace.ActionOverlayButtons.EDIT_IMAGE,i.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]}},itemEditorVariant:{valueFn:function(){return i.Squarespace.ContentItemEditorVariants.MINIMAL}},selectorAnchorNode:{valueFn:function(){return this.get("contentBox")}},cloneInitialData:{value:!1},uploadPreflight:{},showAddIcon:{value:!1},imageSize:{value:105},pageSize:{value:null},hasFullScreenToggle:{value:!1},showActionTray:{value:!0},type:{},imageDestination:{}}})},"1.0",{requires:["base","squarespace-content-item-grid","squarespace-content-item-types-editor","squarespace-dialog-field-2","squarespace-models-content-collection","squarespace-models-content-item","squarespace-plugin-actionoverlay","squarespace-plugin-node-expander","squarespace-spinner","squarespace-util","squarespace-widgets-alert","widget-parent"]})},767890:function(c,b,t){"use strict";var l=t(714487),d=t(437951),o=t.n(d),e=t(207598);YUI.add("squarespace-dialog-content-selector",function(a){a.namespace("Squarespace.DialogFields");var r=a.Squarespace.DialogFields.ContentSelector=a.Base.create("contentSelector",a.Squarespace.DialogField2,[],{initializer:function(n){a.Lang.isValue(n.data)&&this.set("selectedContent",n.data);var i=a.Lang.isValue(this.get("collectionGroups"));this._collectionGroupsCreated=i,i||(a.Squarespace.ContentCollectionCache.size()===0?a.Squarespace.ContentCollectionCache.load(a.bind(function(){this._createCollectionGroups(),this.syncUI()},this)):this._createCollectionGroups())},bindUI:function(){var n=this.get("contentBox");n.delegate("click",function(i){i.halt(),i.target.hasClass("dropdown-button")?i.currentTarget.ancestor(".collection-wrapper").toggleClass("open"):this._selectCollection(i)},".collection",this),n.delegate("change",this._selectCategoryOrTag,"select",this)},syncUI:function(){r.superclass.syncUI.call(this),this._collectionGroupsCreated?this._setLoadedState():this._showSpinner(),this.get("contentBox").toggleClass("titles-hidden",!this.get("showGroupTitles"))},clearSelected:function(){var n=this._selectedCollectionWrapper;if(n){n.removeClass("selected");var i=n.one(".collection-filter-wrapper");i&&(i.remove(),n.all("select").set("value","None"))}},_showSpinner:function(){var n=a.Node.create('<div class="loading"><div class="spinner"></div><div class="text">'+(0,l.t)("Loading\u2026",null,{project:"scripts-v6.dialog"})+"</div></div>");this.get("contentBox").empty().setHTML(n),new a.Squarespace.Spinner({size:20,color:"light",render:n.one(".spinner")}).spin()},_setLoadedState:function(){var n=this.get("contentBox"),i=this.get("collectionGroups"),u=this.get("selectedContent"),h={collectionGroups:i,strings:{emptyMessage:(0,l.t)("There are no collections.",null,{project:"scripts-v6.dialog"}),chooseCategory:(0,l.t)("Choose Category",null,{project:"scripts-v6.dialog"}),chooseTag:(0,l.t)("Choose Tag",null,{project:"scripts-v6.dialog"}),none:(0,l.t)("None",null,{project:"scripts-v6.dialog"})}};a.Lang.isArray(u)&&u.length>0&&u[0].filter&&(h.filter=u[0].filter),n.empty().setHTML(a.Squarespace.UITemplates.render("dialog-content-selector.html",h)),n.all(".collection-wrapper").each(function(g){g.hasClass("selected")&&(this._selectedCollectionWrapper=g)},this),n.all(".dropdown").each(function(g){var p=g.one(".categories"),f=g.one(".tags");p&&f?g.addClass("content-stats"):p?g.addClass("categories"):f&&g.addClass("tags")},this)},_selectCollectionWrapper:function(n){this.clearSelected(),n.addClass("selected"),this._selectedCollectionWrapper=n,this.set("data",{urlId:n.getAttribute("data-url-id"),filter:null,id:n.getAttribute("data-collection-id")})},_selectCollection:function(n){var i=n.currentTarget.ancestor(".collection-wrapper");this._selectCollectionWrapper(i)},_checkIfCollectionIsSelected:function(n){n&&n.hasClass("selected")||(n?this._selectCollectionWrapper(n):this.clearSelected())},_selectCategoryOrTag:function(n){var i=n.currentTarget,u=i.ancestor(".collection-wrapper"),h=i.ancestor(".categories")?"category":"tag",g=i.get("value"),p=(h==="tag"?"#":"")+g;this.clearSelected(),g!=="none-selected"&&(u.one(".collection-title").insert(a.Node.create('<span class="collection-filter-wrapper"><span class="collection-filter">'+p+"</span></span>"),"after"),u.addClass("selected"),u.addClass("has-content-stat-filter"),u.removeClass("open")),this._selectedCollectionWrapper=u,this.set("data",{urlId:u.getAttribute("data-url-id"),filter:g==="none-selected"?null:{type:h,name:g},id:u.getAttribute("data-collection-id")})},_getCollections:function(n){var i=a.merge({},this.get("collectionFilter"));if(i){for(var u in i)if(a.Object.hasKey(n,u)){var h=a.Lang.isArray(i[u]);if(h&&a.Array.indexOf(i[u],n[u])===-1||!h&&n[u]!==i[u])return[];h&&(i[u]=n[u])}n=a.merge(n,i)}return a.Squarespace.ContentCollectionUtils.filterCollections(n,this.get("excludeCollectionIds"))},_createCollectionGroups:function(){var n=this._getCollections({collectionType:o().COLLECTION_TYPE_GENERIC,folder:!1}),i=this._getCollections({collectionType:o().COLLECTION_TYPE_PAGE,folder:!1}),u=this._getCollections({collectionType:o().SPLASH_PAGE,folder:!1}),h=this._getCollections({collectionType:o().PRODUCTS,folder:!1}),g=this._getCollections({collectionType:o().TEMPLATE_PAGE,folder:!1}),p=this._getCollections({collectionType:o().COLLECTION_TYPE_GENERIC,index:!0}),f=this._getCollections({collectionType:o().LESSONS,folder:!1}),m=a.Squarespace.ContentCollectionUtils.groupCollectionsByTypeName(n);i.length>0&&m.push({title:(0,l.t)("Page",null,{project:"scripts-v6.dialog"}),collections:i}),u.length>0&&m.push({title:(0,l.t)("Cover Page",null,{project:"scripts-v6.dialog"}),collections:u}),h.length>0&&m.push({title:(0,l.t)("Product",null,{project:"scripts-v6.dialog"}),collections:h}),g.length>0&&m.push({title:(0,l.t)("Template Pages",null,{project:"scripts-v6.dialog"}),collections:g}),p.length>0&&m.push({title:(0,l.t)("Index",null,{project:"scripts-v6.dialog"}),collections:p}),f.length&&m.push({title:(0,l.t)("Videos",null,{project:"scripts-v6.dialog"}),collections:f}),this.set("collectionGroups",m),this._collectionGroupsCreated=!0},_setStatOnCollectionObject:function(n,i,u,h){var g=[];a.Array.each(i,function(p){var f=p.name,m={name:f};u&&a.Lang.isArray(u)&&a.Array.each(u,function(_,v){f===a.Object.getValue(_,["filter","name"])&&(m.selected=!0)}),g.push(m)},this),h[n]=g},_setSelectedOnCollectionObject:function(n,i){a.Array.each(n,function(u,h){i.id===u.id&&(!a.Object.hasKey(u,"urlId")||u.urlId===i.urlId)&&(i.selected=!0),u.filter&&(i.filter=u.filter)})}},{CSS_PREFIX:"sqs-content-selector",ASYNC_DATA:!0,ATTRS:{collectionGroups:{setter:function(n){var i=this.get("selectedContent");if(a.Array.each(n,function(h){h.collectionObjects=[],a.Array.each(h.collections,function(p){var f=[],m=[],_=a.Squarespace.ContentStatsCache.filter(function(E){return p.get("id")===E.get("collectionId")},this)[0];_&&(f=e.alphabetical(_.get("categoryList"),{key:"name"}),m=e.alphabetical(_.get("tagList"),{key:"name"}));var v={className:a.Squarespace.ContentCollectionUtils.getIconClassNames(p),id:p.get("id"),title:p.get("navigationTitle"),urlId:p.get("urlId")};this.get("showCollectionTagsAndCategories")&&(v.dropdown=f.length!==0||m.length!==0,this._setStatOnCollectionObject("categories",f,i,v),this._setStatOnCollectionObject("tags",m,i,v)),i&&this._setSelectedOnCollectionObject(i,v),h.collectionObjects.push(v)},this);try{var g=e.alphabetical(h.collectionObjects,{key:"title"});h.collectionObjects=g}catch{}},this),this._collectionGroupsCreated=!0,a.Lang.isArray(n))try{var u=e.alphabetical(n,{key:"title"});return u}catch{}return n},value:null},collectionFilter:{value:null},data:{getter:function(n){var i=this.get("dataMapper"),u=this.get("selectedContent");return a.Lang.isFunction(i)?i(u):u},setter:function(n){return this.set("selectedContent",n),n}},selectedContent:{setter:function(n){return a.Lang.isArray(n)?a.Array.map(n,r.mapToObject):a.Lang.isValue(n)?[r.mapToObject.apply(null,arguments)]:n}},dataMapper:{value:function(n){return n},validator:a.Lang.isFunction},excludeCollectionIds:{value:[]},showCollectionTagsAndCategories:{value:!0},showGroupTitles:{value:!0}},mapToObject:function(n,i,u){var h={};if(a.Lang.isObject(n))if(a.instanceOf(n,a.Model))h.id=n.get("id");else return n;else a.Lang.isValue(n)&&(h.id=n);return a.Lang.isObject(i)&&!a.Lang.isArray(i)&&(h.filter=i),a.Lang.isString(u)&&(h.urlId=u),h}}),s=function(n){if(a.Lang.isArray(n)){if(n.length<1)return"";n=n[0]}var i=a.Lang.isObject(n);return i&&a.Object.hasKey(n,"id")?n.id:i&&a.instanceOf(n,a.Model)?n.get("id"):n};a.Squarespace.DialogFields.ContentIdSelector=a.Base.create("contentIdSelector",a.Squarespace.DialogFields.ContentSelector,[],{},{ATTRS:{dataMapper:{value:s}}}),a.Squarespace.DialogFields.ContentIdArraySelector=a.Base.create("contentIdArraySelector",a.Squarespace.DialogFields.ContentSelector,[],{},{ATTRS:{dataMapper:{value:function(n){return a.Lang.isArray(n)?a.Array.map(n,s):[s(n)]}}}})},"1.0",{requires:["base","squarespace-animations","squarespace-content-collection-utils","squarespace-dialog","squarespace-dialog-content-selector-template","squarespace-dialog-field-2","squarespace-hb-compare","squarespace-models-content-collection","squarespace-models-content-stats","squarespace-spinner","squarespace-ui-templates"]})},768264:function(c,b,t){"use strict";var l=t(586745),d=t.n(l),o=t(714487),e=t(759352);YUI.add("squarespace-dialog-create-link",function(a){a.namespace("Squarespace.DialogFields");var r=a.Squarespace.DialogFields.CreateLink=a.Base.create("createLink",a.Squarespace.DialogField2,[],{initializer:function(){this.get("strings.placeholderText")||this.set("strings.placeholderText",(0,o.t)("Click to add URL\u2026",null,{project:"scripts-v6.dialog"})),this._edited=!1},destructor:function(){this._removeBlurHandler(),this._editingWindow=null,this._editingWindowTabs=null,this._clearButton=null,this._linkTextField=null,this._placeholder=null},renderUI:function(){r.superclass.renderUI.call(this),a.Squarespace.ContentStatsCache.isEmpty()?a.Squarespace.ContentStatsCache.load(this._registerCallback(function(){this._verifyLink(a.bind(this._customRender,this))},this)):this._verifyLink(a.bind(this._customRender,this))},getErrors:function(){var s=this.get("data.url");return this._isExternalTabActive()&&s&&s.length>0&&!(0,e.cR)(s)&&!(0,e.Iv)(s)&&!(0,e.h6)(s)&&!(0,e.Nn)(s)&&!(0,e.gB)(s)&&!(0,e.M1)(s)&&!(0,e.ID)(s)&&!(0,e.OF)(s)&&!(0,e.Uy)(s)&&!(0,e.pM)(s)?[(0,o.t)("Please enter a valid URL",null,{project:"scripts-v6.dialog"})]:[]},_isExternalTabActive:function(){return this._editingWindowTabs&&this._editingWindowTabs.getActiveChildId()==="external"},_customRender:function(s){var n=this.get("width");n&&this.get("contentBox").setStyles({width:n});var i=this.get("contentBox");if(this.get("condensed")&&i.addClass("condensed"),this.get("strings.title")&&i.append(a.Node.create('<div class="title">'+this.get("strings.title")+"</div>")),this.get("withLinkText")&&(this._linkTextField=new a.Squarespace.DialogFields.Text({name:"text","strings.title":(0,o.t)("Link Text",null,{project:"scripts-v6.dialog"}),className:"thin",render:i,data:this.get("data.text")})),this._editingWindow=a.Node.create('<div class="editing-window"></div>'),this.get("showPlaceholder")||this._editingWindow.addClass("without-placeholder"),i.append(this._editingWindow),this._editingWindowTabs=this._createTabs(s),this._editingWindowTabs.render(this._editingWindow),this.get("showPlaceholder")){var u=this.get("data.url");this._placeholder=a.Node.create('<div class="placeholder"><div class="link-icon"></div><div class="inner">'+a.Escape.html(u||this.get("strings.placeholderText"))+"</div></div>"),this._set("errorFlyoutAnchor",this._placeholder),this._clearButton=a.Node.create('<div class="clear'+(u?"":" hidden")+'"></div>'),this._placeholder.append(this._clearButton),this._editingWindow.insert(this._placeholder,"before"),this._editingWindow.addClass("hidden"),this._editingWindow.setStyle("height",0),this._editingWindow.one(".sqs-tab-view").setStyle("opacity",0)}else this._editingWindow.setStyle("height",this._getOpenWindowHeight()),this._isExternalTabActive()&&this._editingWindow.one(".external-link-tab input").focus(),this._set("errorFlyoutAnchor",this._editingWindow);this.fire("rendered"),this._customBindUI()},_customBindUI:function(){this.get("withLinkText")&&this._linkTextField.after("dataChange",function(s){var n=this.get("data")||{};n.text=s.newVal,this.set("data",n)},this),this.get("showPlaceholder")&&(this._placeholder.on("click",function(s){s.target.hasClass("clear")?this._clear():(s.halt(),this._placeholder.hasClass("open")?this._closeEditingWindow():this._openEditingWindow())},this),this.after("dataChange",this._setPlaceholderText,this)),this._editingWindowTabs.before("tab-switch-requested",function(s){if(this._editingWindowTabs.getActiveChildId()!=s.tabId&&(!this._placeholder||this._placeholder.hasClass("open"))){this._editingWindow.one(".sqs-tab-view-children").setStyle("opacity",0),this._editingWindow.activeAnim&&this._editingWindow.activeAnim.stop();var n=this._editingWindow.anim({height:this._getOpenWindowHeight(s.tabId)},{duration:.2,end:function(){this._editingWindow.one(".sqs-tab-view-children").anim({opacity:1},{duration:.1}).run(),this._isExternalTabActive()&&this._editingWindow.one(".external-link-tab input").focus()},context:this});n.on("tween",function(){this.fire("animating")},this),n.run()}},this),this.get("required")&&this.after("dataChange",function(s){this.hideError()},this)},didDataChange:function(){return this._edited},isEmpty:function(){var s=this.get("data.url");return!s||s===""},_verifyLink:function(s){var n=this._getLinkType(this.get("data.url"));if(n==="external")s();else if(n==="files"){var i=this._getSelectedFile();a.Data.get({url:a.Squarespace.API_ROOT+"content-items",data:{recordType:d().ATTACHMENT,urlId:i},success:function(m){var _=a.Object.getValue(m,["results"]),v=a.Lang.isArray(_)&&_.length>0;s(!v)},failure:function(m){s()}},this)}else if(n==="content"){var u=this._getSelectedContent(),h=a.Array.find(a.Squarespace.ContentCollectionCache.toArray(),function(m){return m.get("urlId")==u.urlId});if(!h)s(!0);else if(u.filter){var g=u.filter,p=!1,f=a.Squarespace.ContentStatsCache.getByCollectionId(h.get("id"));f&&g.type==="category"?a.Array.each(f.getCategoriesAsStringArray(),function(m){m===g.name&&(p=!0)}):f&&a.Array.each(f.getTagsAsStringArray(),function(m){m===g.name&&(p=!0)}),p?s():s(!0)}else s()}},_createTabs:function(s){var n=this._getLinkType(this.get("data.url")),i=this.get("data.url"),u=this.get("data.newWindow"),h=this.get("disableNewWindow"),g,p;s&&(n="external"),n==="files"?g=this._getSelectedFile():n==="content"&&(p=this._getSelectedContent());var f={external:{label:(0,o.t)("External",null,{project:"scripts-v6.dialog"}),id:"external",ctor:a.Squarespace.Views.ExternalLinkTab,config:{onDataChange:a.bind(function(v,E,S){var y=null;a.Lang.isValue(v)&&v!==""&&(y={url:v,newWindow:E,text:this.get("data.text")}),this.set("data",y),S&&(this.get("showPlaceholder")&&this._closeEditingWindow(),this.fire("close")),this._edited=!0},this),linkUrl:n==="external"?i:null,newWindow:u,disableNewWindow:h,className:this.get("className")==="light"?"dark":"light"}},files:{label:(0,o.t)("Files",null,{project:"scripts-v6.dialog"}),id:"files",ctor:a.Squarespace.Views.FileManagerTab,config:{onDataChange:a.bind(function(v,E){this.set("data",{url:v?"/s/"+v:null,newWindow:E,text:this.get("data.text")}),this._edited=!0},this),selectedFile:n=="files"?g:null,newWindow:u,disableNewWindow:h}},content:{label:(0,o.t)("Content",null,{project:"scripts-v6.dialog"}),id:"content",ctor:a.Squarespace.Views.ExistingContentLinkTab,config:{onDataChange:a.bind(function(v,E,S){var y="/"+v.urlId;v.filter&&(y=y+"?"+v.filter.type+"="+encodeURIComponent(v.filter.name)),this.set("data",{url:y,newWindow:E,text:this.get("data.text")}),S||this.fire("close"),this._edited=!0},this),selectedContent:n=="content"?p:null,newWindow:u,disableNewWindow:h}}},m=this.get("renderTabs"),_=[];return a.Object.each(m,function(v,E){v&&_.push(f[E])}),new a.Squarespace.Widgets.TabView({widgets:_,initialTabId:n})},_createBlurHandler:function(){this._blurHandler=a.one("body").on("click",function(s){var n=this.get("contentBox");n.contains(s.target)||this._closeEditingWindow()},this),this._registerEvent(this._blurHandler)},_removeBlurHandler:function(){this._blurHandler&&(this._blurHandler.detach(),this._blurHandler=null)},_openEditingWindow:function(){this.hideError(),this._editingWindow.activeAnim&&this._editingWindow.activeAnim.stop(),this._editingWindow.anim({height:this._getOpenWindowHeight()},{duration:.2,start:function(){this._placeholder.addClass("open"),this._editingWindow.removeClass("hidden")},end:function(){this._createBlurHandler(),this._editingWindow.one(".sqs-tab-view").anim({opacity:1},{duration:.1}).run(),this._isExternalTabActive()&&this._editingWindow.one(".external-link-tab input").focus()},context:this}).run()},_closeEditingWindow:function(s){this._removeBlurHandler(),this._editingWindow.activeAnim&&this._editingWindow.activeAnim.stop(),this._editingWindow.one(".sqs-tab-view").anim({opacity:0},{duration:.1,start:function(){this._editingWindow.anim({height:0},{duration:.2,end:function(){this._placeholder&&this._placeholder.removeClass("open"),this._editingWindow&&this._editingWindow.addClass("hidden"),s&&this._editingWindowTabs&&this._editingWindowTabs.switchTabs("external")},context:this}).run(),this.get("data.url")&&this._clearButton.removeClass("hidden")},context:this}).run()},_clear:function(){this.set("data",null),this._clearButton.addClass("hidden"),this._placeholder.hasClass("open")?this._closeEditingWindow(!0):(this._setPlaceholderText(),this._editingWindowTabs.switchTabs("external")),a.Object.each(this._editingWindowTabs.getChildWidgets(),function(s){s.reset()},this)},_setPlaceholderText:function(){var s=this.get("data.url");if(s&&s.substring(0,7)==="http://"){var n=s.substring(7),i="http://",u="https://";(n.length>0&&n.length<7||n==="https:/")&&(n===i.substring(0,n.length)||n===u.substring(0,n.length))&&(s=n)}var h=s||this.get("strings.placeholderText");this._placeholder.one(".inner").setHTML(a.Escape.html(h))},_getLinkType:function(s){return s&&s.charAt(0)==="/"?s.substring(0,3)==="/s/"?"files":"content":"external"},_getSelectedFile:function(){var s=this.get("data.url").split("/");return s[s.length-1]},_getSelectedContent:function(){var s=this.get("data.url").split("?"),n,i={urlId:s[0].substring(1)},u=s[1];return u&&(n=a.QueryString.parse(u),n.category?i.filter={type:"category",name:n.category}:n.tag&&(i.filter={type:"tag",name:n.tag})),i},_getOpenWindowHeight:function(s){var n=s||this._editingWindowTabs.getActiveChildId(),i=this.get("disableNewWindow"),u=this.get("condensed"),h,g;switch(n){case"external":h=g=i?92:116;break;case"files":h=i?318:342,g=i?252:276;break;case"content":h=i?318:342,g=i?232:256;break}return u?g:h}},{CSS_PREFIX:"sqs-create-link",ATTRS:{data:{setter:function(s){if(a.Lang.isObject(s)){var n=this._getLinkType(s.url),i=this.get("renderTabs");i[n]||(s.url="")}return s},getter:function(s){return a.Lang.isString(s)?{url:s,newWindow:!1}:s}},condensed:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},disableNewWindow:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},renderTabs:{value:{external:!0,files:!0,content:!0}},showPlaceholder:{value:!0,validator:a.Squarespace.AttrValidators.isBoolean},withLinkText:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog","squarespace-dialog-field-2","squarespace-dialog-text","squarespace-existing-content-link-tab","squarespace-external-link-tab","squarespace-file-manager-tab","squarespace-models-content-collection","squarespace-models-content-stats","squarespace-tab-view"]})},262347:function(){YUI.add("squarespace-dialog-data-table",function(c){var b=4,t=c.namespace("Squarespace.DialogFields").DataTable=c.Base.create("data-table",c.Squarespace.DialogField2,[],{initializer:function(){this._table=null,this._changed=!1,this._dragHandles=[],this._dropTargets=[]},destructor:function(){this._removeDragDrop(),this._table&&this._table.remove(!0),this._table=null},renderUI:function(){t.superclass.renderUI.call(this),this._table=c.Node.create('<div class="table-wrapper"></div>');var l=this.get("strings").title;l&&this.get("contentBox").append('<div class="title">'+l+"</div>"),this.get("contentBox").append(this._table)},_renderColHeader:function(l,d,o,e,a){var r=l>=o,s=r||a&&l>0,n=!r&&o>1,i=l===o,u=!a&&l<e,h="data-table-header first-row "+(r?"cosmetic ":"")+(i?"skinny-col ":"")+(l===o-1?"last-col":"");return'<div class="'+h+'"><input type="text" value="'+(r?"":c.Escape.html(d))+'"'+(s?" disabled":"")+">"+(n?'<div class="col-select"><div class="drag-handle"></div></div>':"")+(i?'<div class="new-col-button '+(u?"":"disabled")+'">+</div>':"")+"</div>"},_renderRow:function(l,d,o,e,a,r,s){var n=l>=a,i=l===a,u=l<r,h="data-table-row "+(l%2&&!n?"odd-row ":"")+(l===a-1?"last-row border-spacer ":""),g='<div class="'+h+'">';g+=this._renderRowLabel(o,a>1,n,i,u);for(var p=Math.max(e+(s?0:1),b),f=0;f<p;f++)g+=this._renderCell(d?d[f]:null,f>0&&s,n||f>=e,f===e?"skinny-col":"");return g+="</div>",g},_renderRowLabel:function(l,d,o,e,a){var r="",s="data-table-cell first-col "+(o?"cosmetic ":"");return d&&!o&&(r+='<div class="row-select"><div class="drag-handle"></div></div>'),r+='<div class="row-select-spacer cosmetic"><input type="text" disabled></div>',r+='<div class="'+s+'"> <input type="text" value="'+(o?"":c.Escape.html(l))+'"'+(o?" disabled":"")+">"+(e?'<div class="new-row-button '+(a?"":"disabled")+'">+</div>':"")+"</div>",r},_renderCell:function(l,d,o,e){var a="data-table-cell "+e+(o?" cosmetic ":"");return'<div class="'+a+'"><input type="text" value="'+(o?"":c.Escape.html(l))+'"'+(d||o?" disabled":"")+"></div>"},populateTable:function(l){var d=l.seriesLabels,o=l.sampleLabels,e=l.data,a=this.get("oneDimension"),r=this.get("maxSeries"),s=this.get("maxSamples");function n(v){return'<div class="drop-target-wrapper"><div class="'+v+'-drop-target"></div></div>'}for(var i='<div class="trash-wrapper"><div class="chart-trash"><div class="chart-trash-content"></div></div></div>',u='<div class="corner-spacer data-table-header first-row cosmetic"><input type="text" disabled></div>',h="",g=u,p=Math.max(d.length+(a?0:1),b),f=0;f<p;f++)f<=d.length&&(g+=n("col")),g+=this._renderColHeader(f,d[f],d.length,r,a);d.length>=b&&(g+=n("col")),h+='<div class="data-table-row first-row">'+g+"</div>";for(var m=0;m<e.length+1;m++)m<=e.length&&(h+=n("row")),h+=this._renderRow(m,e[m],o[m],d.length,e.length,s,a);var _='<div class="inner-table">'+h+"</div>";_+=i,this._table.setHTML(_),this.bindTable()},bindTable:function(){var l=this._table,d=l.one(".inner-table"),o=c.bind(this._afterValueChange,this);this._registerEvent(d.delegate("valuechange",o,"input"));var e=c.bind(function(n){this.selectCell(n.target.ancestor(".data-table-cell, .data-table-header"))},this);this._registerEvent(d.delegate("click",e,"input"));var a=c.bind(this._selectNext,this,"down");this._registerEvent(d.delegate("key",a,"enter","input"));var r=l.one(".new-col-button");r&&r.on("click",function(n){this.addSeries(),n.halt()},this);var s=l.one(".new-row-button");s&&s.on("click",function(n){this.addSample(),n.halt()},this),this._removeDragDrop(),this._bindDragHandles(".row-select",this._renderRowDragProxy,function(n){l.all(".data-table-row").item(n+1).toggleClass("dragging")}),this._bindDragHandles(".col-select",this._renderColDragProxy,function(n){this._applyToNthCells(n+1,function(i){i.toggleClass("dragging")})}),this._bindDropTargets(".row-drop-target",".row-select",this.moveSample,function(n){l.all(".data-table-row").item(n).toggleClass("insert-after"),l.one(".last-row").toggleClass("border-spacer")}),this._bindDropTargets(".col-drop-target",".col-select",this.moveSeries,function(n){this._applyToNthCells(n,function(i){i.toggleClass("insert-after")})}),this._bindTrash(".chart-trash",[".col-select",".row-select"])},_selectNext:function(l,d){d.halt();var o=".data-table-header, .data-table-cell",e=".data-table-row",a=d.target.ancestor(o),r=d.target.ancestor(e),s=r.all(o).indexOf(a),n=this._table.all(e).indexOf(r),i=this.get("oneDimension"),u=this.get("data"),h=u.seriesLabels.length+1,g=u.sampleLabels.length+1;function p(O){n+=O,n>=g?(n=0,f(1)):n<0&&(n=g-1,f(-1))}function f(O){s+=O,s>=h?(s=0,p(1)):s<0&&(s=h-1,p(-1))}switch(l){case"left":f(-1);break;case"right":f(1);break;case"up":p(-1);break;case"down":p(1);break}var m=this._table.all(e),_=m.item(n).all(o),v=_.item(s);this.selectCell(v,a);var E;!i&&s===h-1?E=_.item(h):n===g-1?E=m.item(g):s===0&&n>0?E=m.item(n).one(".drag-handle"):E=v;function S(O,A,I){return E._node.contains(document.elementFromPoint(A,I))}var y=E._node.getBoundingClientRect(),C=S(y.left,y.top)||S(y.right,y.top)||S(y.right,y.bottom)||S(y.left,y.bottom);C||E.scrollIntoView()},_removeDragDrop:function(){this._dropTargets&&this._dropTargets.map(function(l){l.destroy()}),this._dragHandles&&this._dragHandles.map(function(l){l.destroy()}),this._dropTargets=[],this._dragHandles=[]},_applyToNthCells:function(l,d,o){var e=this._table;if(!o){var a=e.all(".data-table-header").item(l);a&&d.call(this,a)}e.all(".data-table-row").each(function(r){var s=r.all(".data-table-cell").item(l);s&&d.call(this,s)},this)},_bindTrash:function(l,d){var o=this._table,e=o.one(l),a=new c.DD.Drop({node:e,groups:d});a.on("drop:hit",function(r){var s=r.drag.get("data"),n=c.Array(r.drag.get("groups"));n.contains(".col-select")?this.removeSeries(s.index):this.removeSample(s.index)},this),this._dropTargets.push(a)},_bindDropTargets:function(l,d,o,e){var a=this._table,r=a.all(l);r.each(function(s){var n=r.indexOf(s),i=new c.DD.Drop({node:s,groups:[d]});i.on("drop:hit",function(u){var h=u.drag.get("data");o.call(this,h.index,n)},this),i.on("drop:enter",function(u){e.call(this,n)},this),i.on("drop:exit",function(u){e.call(this,n)},this),this._dropTargets.push(i)},this)},_bindDragHandles:function(l,d,o){var e=this._table,a=e.all(l);a.each(function(r){var s=a.indexOf(r),n=new c.DD.Drag({node:r,groups:[l],data:{index:s}}).plug(c.Plugin.DDProxy,{resizeFrame:!1});n.on("drag:start",function(){var i=n.get("dragNode");n._nodeStart=n.get("node").getXY(),i.addClass("sqs-data-table"),i.set("innerHTML",d.call(this,s)),i.setStyles({"z-index":99e3,border:"none"}),e.addClass("dragging"),o.call(this,s)},this),n.on("drag:end",function(i){n.get("node").setXY(n._nodeStart),e.removeClass("dragging"),n.get("node").ancestor("body")&&o.call(this,s),this.populateTable(this.get("data"))},this),this._dragHandles.push(n)},this)},_renderRowDragProxy:function(l){var d=this.get("data"),o=d.data,e=this.get("oneDimension"),a='<div class="row-drag-proxy">';return a+=this._renderRow(l,o[l],d.sampleLabels[l],d.seriesLabels.length,1/0,e),a+"</div>"},_renderColDragProxy:function(l){var d=this.get("data"),o=d.data,e=this.get("oneDimension"),a='<div class="col-drag-proxy">';a+=this._renderColHeader(l,d.seriesLabels[l],1/0,e);for(var r=0;r<o.length;r++)a+=this._renderCell(o[r][l],e&&l>0,!1,"");return a+"</div>"},readTable:function(){var l=[],d=[],o=[],e=this._table.one(".inner-table");return e.all(".data-table-header").each(function(a){a.hasClass("cosmetic")||d.push(a.one("input").get("value"))}),e.all(".data-table-row").each(function(a){var r=0,s=[];a.all(".data-table-cell").each(function(n){if(!n.hasClass("cosmetic")){var i=n.one("input").get("value");r===0?(o.push(i),r++):s.push(parseFloat(i)||0)}}),r>0&&l.push(s)}),{seriesLabels:d,sampleLabels:o,data:l}},isEmpty:function(){return this.get("data")===[]||this.get("data")===null||this.get("data")===void 0},didDataChange:function(){return this._changed},_afterDataChange:function(l){l.dataSync||this.populateTable(l.newVal),this.hideError()},_afterValueChange:function(l){l.dataSync||(this.set("data",this.readTable(),{dataSync:!0}),this._changed=!0)},selectCell:function(l,d){var o;l&&!l.hasClass("cosmetic")?(o=l.one("input"),o._node.select(),o.focus()):d&&(o=d.one("input"),o._node.blur())},addSample:function(l,d,o,e){var a=this.get("data");if(!(a.sampleLabels.length>=this.get("maxSamples"))){l===void 0&&(l=1/0);var r=a.sampleLabels.slice();r.splice(l,0,d||"");var s=o||c.Array(r).map(function(){return 0}),n=a.data.slice();n.splice(l,0,s);var i={data:n,sampleLabels:r,seriesLabels:a.seriesLabels};if(this.set("data",i,{dataSync:!0}),this._changed=!0,!e){this.populateTable(i);var u=this._table;u.one(".data-table-row.last-row .data-table-cell input").focus(),u.one(".new-row-button")._node.scrollIntoView()}}},addSeries:function(l,d,o,e){var a=this.get("data"),r=this.get("oneDimension");if(!(r||a.seriesLabels.length>=this.get("maxSeries"))){l===void 0&&(l=1/0);var s=a.seriesLabels.slice();s.splice(l,0,d||"");var n=a.data.map(function(h,g){var p=h.slice();return p.splice(l,0,o?o[g]:0),p}),i={data:n,sampleLabels:a.sampleLabels,seriesLabels:s};if(this.set("data",i,{dataSync:!0}),this._changed=!0,!e){this.populateTable(i);var u=this._table;u.one(".data-table-header.last-col input").focus(),u.one(".new-col-button")._node.scrollIntoView()}}},removeSample:function(l){var d=this.get("data"),o=d.sampleLabels.filter(function(r,s){return l!==s}),e=d.data.filter(function(r,s){return l!==s}),a={data:e,sampleLabels:o,seriesLabels:d.seriesLabels};this.set("data",a,{dataSync:!0}),this._changed=!0},removeSeries:function(l){var d=this.get("data"),o=d.seriesLabels.filter(function(r,s){return l!==s}),e=d.data.map(function(r){return r.filter(function(s,n){return n!==l})}),a={data:e,sampleLabels:d.sampleLabels,seriesLabels:o};this.set("data",a,{dataSync:!0}),this._changed=!0},moveSample:function(l,d){var o=this.get("data"),e=o.sampleLabels[l],a=o.data[l];this.addSample(d,e,a,!0),l>d?this.removeSample(l+1):this.removeSample(l)},moveSeries:function(l,d){var o=this.get("data"),e=o.seriesLabels[l],a=c.Array(o.data).map(function(r){return r[l]});this.addSeries(d,e,a,!0),l>d?this.removeSeries(l+1):this.removeSeries(l)}},{CSS_PREFIX:"sqs-data-table",ATTRS:{oneDimension:{value:!1},maxSeries:{value:1/0},maxSamples:{value:1/0},data:{value:null}}})},"1.0",{requires:["base","escape","squarespace-dialog-field-2"]})},540303:function(c,b,t){"use strict";var l=t(461761),d=t.n(l),o=t(714487);YUI.add("squarespace-dialog-datetime-picker",function(e){e.namespace("Squarespace.DialogFields");var a=e.Squarespace.DialogFields.DateTimePicker=e.Base.create("dataTimePicker",e.Squarespace.DialogField2,[],{initializer:function(r){this._suppressErrors=!1,this._picker=new e.Squarespace.DialogFields.StateScheduler({data:this.get("data"),type:"date",direction:this.get("direction"),maximumDate:this.get("maximumDate"),targetNode:this.get("contentBox"),allowNever:!1,visible:!1})},destructor:function(){this._picker&&this._picker.destroy(),this._autoAlignOnScroll.detach()},renderUI:function(){a.superclass.renderUI.call(this),this._picker.render(this.get("contentBox").ancestor("body")||e.one("body")),this._setTimePickerVisiblity();var r=e.throttle(e.bind(function(){this._picker.get("visible")===!0&&this._alignPicker()},this),10);this._autoAlignOnScroll=e.one(document).on("scroll",r)},bindUI:function(){a.superclass.bindUI.call(this),this._bindCalendarToggleEvents(),this._picker.after("dataChange",this._updateData,this),this.after("dataChange",this._updatePickerData,this),this.on("dataChange",function(r){var s=this.get("validator");s.call(this,r.newVal)?this.hideError():(r.halt(),this._suppressErrors||this.showError(this.get("strings.errorMessage")))},this)},_bindCalendarToggleEvents:function(){this.get("contentBox").delegate("click",this._handleActiveAreaClick,".sqs-datetime-picker-date",this),this._registerEvent(this._picker.get("contentBox").on("clickoutside",function(r){r.target!==this.get("contentBox").one(".sqs-datetime-picker-date")&&this._hidePicker()},this))},isValid:function(){return this.get("errors").length===0},_updateData:function(r){this.set("data",r.newVal)},_updatePickerData:function(r){this._suppressErrors=!0,this._picker.set("data",r.newVal),this._suppressErrors=!1},syncUI:function(){a.superclass.syncUI.call(this),this._updateTitle(this.get("data")),this._updateDescription(this.get("data"))},_handleActiveAreaClick:function(r){this._showPicker(r.currentTarget)},_showPicker:function(r){this._picker.set("visible",!0),this._picker.set("data",this.get("data")),this._picker.syncCalendar(),this._alignPicker(r)},_alignPicker:function(r){r=r||this.get("defaultPositionNode");var s=this._picker.get("boundingBox"),n=this.get("direction"),i=r.get("region"),u=i[1],h=i[0]-(s.one(".workflow-flyout").get("offsetWidth")-i.width)/2;n==="down"?(u+=r.get("offsetHeight"),u-=parseInt(s.getStyle("marginTop"),10)):(u-=s.get("offsetHeight"),u-=parseInt(s.getStyle("marginBottom"),10)),s.setStyles({top:u,left:h,position:"absolute"})},_hidePicker:function(){this._picker.get("visible")&&this.isValid()&&(this._picker.set("visible",!1),this.hideError())},_updateDescription:function(r){var s=this.get("contentBox"),n=this._getDescriptionText(new Date(r));s.one(".sqs-datetime-picker-description").empty().append(n)},_updateTitle:function(r){var s=this.get("contentBox"),n=this._getTitleText(new Date(r));s.one(".sqs-datetime-picker-title").empty().append(n)},_setTimePickerVisiblity:function(){var r=this._picker.get("contentBox"),s=this.get("timePickerEnabled");r.toggleClass("sqs-datetime-picker-time-disabled",!s)},_getDateEl:function(r){var s=d()(window.Static,"SQUARESPACE_CONTEXT.website.timeZone");return'<span class="sqs-datetime-picker-date">'+e.Lang.trim((0,o.p6)({date:r,zoneId:s},this.get("dateFormat")))+"</span>"},_getDescriptionText:function(r){var s=this._getDateEl(r),n=this.get("strings.description").replace("||DATE||",s);return e.Node.create('<span class="sqs-datetime-picker-date-wrapper">'+n+"</span>")},_getTitleText:function(r){var s=this._getDateEl(r),n=this.get("strings.title").replace("||DATE||",s);return e.Node.create('<span class="sqs-datetime-picker-title-content">'+n+"</span>")}},{CSS_PREFIX:"sqs-datetime-picker",TEMPLATE:'<div class="sqs-datetime-picker-title"></div><div class="sqs-datetime-picker-description"></div>',ATTRS:{data:{setter:function(r){return e.Lang.isDate(r)?r.getTime():e.Lang.isNumber(r)?r:e.Attribute.INVALID_VALUE}},dateFormat:{value:{skeleton:"yMMMEd",time:"short"}},defaultPositionNode:{getter:function(){return this.get("boundingBox").one(".sqs-datetime-picker-date")||this.get("boundingBox")}},direction:{value:"down",getter:function(r){var s=["down","up"];return s.indexOf(r)===-1?s[0]:r}},errorFlyoutAnimationTime:{value:.01},maximumDate:{},timePickerEnabled:{value:!0},strings:{value:{description:"||DATE||",title:"",errorMessage:""}},validator:{value:function(){return!0},validator:e.Lang.isFunction}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2","squarespace-dialog-statepicker-scheduler","squarespace-ss-widget"]})},789468:function(){YUI.add("squarespace-dialog-digital-pricing-placeholder",function(c){c.namespace("Squarespace"),c.Squarespace.DialogFields.DigitalPricingPlaceholder=c.Base.create("digitalPricingPlaceholder",c.Squarespace.DialogFields.PricingPlaceholder,[],{initializer:function(){}},{CSS_PREFIX:"sqs-digital-pricing-placeholder",ATTRS:{}})},"1.0",{requires:["squarespace-dialog-pricing-placeholder"]})},22561:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-dialog-facebook-meta-data",function(d){d.namespace("Squarespace.DialogFields").FacebookMetaData=d.Base.create("fbMetaData",d.Squarespace.DialogField2,[],{initializer:function(o){var e=o.data.isPageAccount,a="";this._pageSelect=new d.Squarespace.DialogFields.Select({"strings.title":(0,l.t)("Push Target",null,{project:"scripts-v6.dialog"}),"strings.placeholder":(0,l.t)("None selected",null,{project:"scripts-v6.dialog"}),"strings.description":(0,l.t)("Select the page to which posts will be pushed. Posts will be published on behalf of the page.",null,{project:"scripts-v6.dialog"}),name:"pages",options:e?[{label:(0,l.t)("This Page",null,{project:"scripts-v6.dialog"}),value:a}]:this.get("pages"),data:e?a:o.data.selectedPageId,className:"thin dark"}),this.add(this._pageSelect)},bindUI:function(){this.on("dataChange",this.syncUI,this);var o=this.get("id");this._pageSelect.after(o+"|dataChange",function(e){var a=this.get("data");e.newVal?a.selectedPageId=e.newVal:delete a.selectedPageId,this.set("data",a)},this)},syncUI:function(){},didDataChange:function(){var o=this._initialData,e=this.get("data");return o.selectedPageId!==e.selectedPageId}},{CSS_PREFIX:"sqs-facebook-metadata",ATTRS:{data:{value:{},setter:function(o){d.Array.each(o.managedPages,function(e){o.selectedPageId&&e.id===o.selectedPageId?e.selected=!0:e.selected=!1})}},pages:{}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-field-2","squarespace-dialog-select"]})},614430:function(){YUI.add("squarespace-dialog-field-2",function(c){var b="error";c.namespace("Squarespace.Widgets").DialogField2=c.namespace("Squarespace").DialogField2=c.Base.create("dialogField",c.Squarespace.Widgets.DataWidget,[c.Squarespace.DialogFieldLegacyInterface,c.WidgetParent,c.WidgetChild],{initializer:function(t){this._saveInitialData(t?t.data:null),this.publish("error-shown",{broadcast:2}),this.publish("edited")},destructor:function(){this._destroyError(),this.unplug(c.Plugin.WidgetAnim),this._initialData=void 0,this._errorFlyoutSub&&this._errorFlyoutSub.detach()},_destroyError:function(){this._errorNode&&(this._errorNode.remove(!0),this._errorNode=null)},_saveInitialData:function(t){t=c.Lang.isValue(t)?t:this.get("data"),c.Lang.isArray(t)&&this.get("cloneInitialData")?this._initialData=t.slice():c.Lang.isObject(t)&&this.get("cloneInitialData")?this._initialData=c.clone(t,!0):this._initialData=t},setCurrentDataAsInitial:function(){this._saveInitialData()},renderUI:function(){c.Squarespace.DialogField2.superclass.renderUI.call(this);var t=this.get("boundingBox"),l=this.get("name"),d=this.get("testAttribute");l&&(t.addClass("name-"+l),t.setAttribute("data-testValue",l)),d&&t.setAttribute("data-test",d)},scrollIntoView:function(){this.get("contentBox").scrollIntoView()},toggleError:function(t){var l=this.get("boundingBox");this._errorHoverAnchor&&(l.removeClass("has-error"),this._errorHoverAnchor.remove(),this._errorHoverAnchor.destroy(!0),this._errorHoverEvent.detach(),this._errorHoverEvent=null,this._errorHoverAnchor=null),t?(l.addClass("has-error"),this._errorHoverAnchor=c.Node.create('<div class="error-hover">&#33;</div>'),this._errorHoverAnchor.appendTo(l),this._errorHoverEvent=this._errorHoverAnchor.on("mouseenter",function(){l.addClass("error-is-hovering"),this.showError(t)},this)):this.hideError()},showError:function(t){if(!(!t||!this.get("rendered"))){var l=this.get("boundingBox"),d=this.get("contentBox"),o=this.get("errorFlyoutAnchor")||d,e=this.get("errorFlyoutAnimationTime");o.hasPlugin("flyoutPlugin")||o.plug(c.Squarespace.Animations.Flyout,{duration:e,renderTarget:this.get("errorFlyoutRenderTarget")});var a=o.flyoutPlugin,r=c.bind(function(){l.addClass(b),this._destroyError(),this._errorNode=c.Node.create('<div class="sqs-flyout-error-message">'+t+"</div>");var s=this.get("dialog");s&&this._errorNode.setStyle("zIndex",s.zIndex+10),this._errorNode.on(this.get("id")+"|click",function(p){p.halt(),this.hideError()},this);var n=c.one(window).get("region"),i=c.Squarespace.NodeUtils.measureNode(this._errorNode).width,u=o.get("region"),h;u.right+i<=n.right?(h="rt",this._errorNode.addClass("out-from-right")):u.left-i>n.left?(h="lt",this._errorNode.addClass("out-from-left")):(h="bl",this._errorNode.addClass("out-from-bottom"),this._errorNode.setStyle("width",u.width)),a.setAttrs({node:this._errorNode,alignment:h}),this._clearErrorSub=c.on(this.get("id")+"|click",this.hideError,this);var g=this.get("id");a.once(g+"|shown",function(p){this.fire("error-shown",{message:t})},this),this._errorFlyoutSub=o.once("flyout-shown",function(p){this._errorNode.setStyle("width","100%")},this),a.show()},this);a.get("visible")?(this._isHiding=!0,this._showErrorSub&&this._showErrorSub.detach(),this._showErrorSub=a.once(this.get("id")+"|hidden",function(){this._showErrorSub=null,this._isHiding=!1,r()},this),a.hide()):r()}},hideError:function(){if(!(!this.get("rendered")||this._isHiding||!this.get("boundingBox").getDOMNode())){var t=this.get("boundingBox");t&&t.removeClass("error-is-hovering"),t=this.get("boundingBox");var l=this.get("contentBox"),d=this.get("errorFlyoutAnchor")||l;if(!(!d.hasPlugin("flyoutPlugin")||!d.flyoutPlugin.get("visible"))){this._clearErrorSub&&(this._clearErrorSub.detach(),this._clearErrorSub=null);var o=d.flyoutPlugin;o.once(this.get("id")+"|hidden",function(e){t.removeClass(b),this.fire("error-hidden"),this._destroyError()},this),o.hide()}}},didDataChange:function(){var t=this.get("data");if(this.get("readOnly"))return!1;if(c.Lang.isArray(this._initialData))return c.JSON.stringify(this._initialData)!==c.JSON.stringify(t);if(c.Lang.isObject(this._initialData))throw new Error("DialogField base class will not compare objects. Define didDataChange for this field.");return this._initialData!==t},isEmpty:function(){var t=this.get("data");return t===""||t===0},revert:function(){this.set("data",this._initialData,{revert:!0})},_getErrors:function(){return[]},isValid:function(){return!c.Lang.isArray(this.get("errors"))||this.get("errors").length===0}},{CSS_PREFIX:"sqs-dialog-field",ATTRS:{cloneInitialData:{value:!0},strings:{},name:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},dialog:{value:null,validator:function(t){return c.Lang.isNull(t)?!0:t instanceof c.Squarespace.EditingDialog||t.constructor instanceof c.Squarespace.EditingDialog.constructor}},readOnly:{value:!1,validator:c.Squarespace.AttrValidators.isBoolean},required:{value:!1,validator:c.Squarespace.AttrValidators.isBoolean},errors:{value:[],readOnly:!0,getter:"_getErrors",validator:c.Squarespace.AttrValidators.isArray},errorFlyoutAnchor:{value:null,readOnly:!0,validator:c.Squarespace.AttrValidators.isNullOrInstanceOf(c.Node)},errorFlyoutRenderTarget:{value:void 0},errorFlyoutAnimationTime:{value:.3},focusable:{value:!0,validator:c.Lang.isBoolean},testAttribute:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","json-stringify","squarespace-animations","squarespace-attr-validators","squarespace-dialog-field-legacy-interface","squarespace-flyout-error-message-template","squarespace-node-flyout","squarespace-node-utils","squarespace-widgets-data-widget","widget-anim","widget-child","widget-parent"]})},243729:function(){YUI.add("squarespace-dialog-field-legacy-interface",function(c){var b=c.namespace("Squarespace").DialogFieldLegacyInterface=function(t){this.inActiveFrame=!0,c.Lang.isFunction(this.hideError)&&c.Do.after(function(){var l=t.dialog;l&&l.clearError(this)},this,"hideError",this),c.Do.after(function(){this.after(this.get("id")+"|dataChange",function(l){var d=t.dialog;d&&!l.silent&&d.fire("datachange",this);var o=this.get("name");o&&this.fire("value-changed",{name:o,value:l.newVal,oldValue:l.prevVal,field:this})},this)},this,"bindUI",this),c.Do.after(function(){t&&t.defaultHidden&&this.hide(!0)},this,"syncUI",this)};b.NAME="dialogFieldLegacyInterface",b.prototype={temporaryHide:function(){this.hide()},temporaryShow:function(){this.show()},getName:function(){return this.get("name")},getType:function(){return this.name},getValue:function(){return this.get("data")},getErrors:function(){return this.get("errors")},getNode:function(){return this.get("boundingBox")},setValue:function(t,l){this.set("data",t,l)},clearError:function(){this.hideError()}}},"1.0",{requires:[]})},588614:function(){YUI.add("squarespace-dialog-fields",function(c){c.namespace("Squarespace"),c.Squarespace.DialogField=Class.extend(c.Squarespace.Gizmo,{_name:"DialogField",initialize:function(b,t,l){this._super();var d={defaultHidden:!1};this.config=c.merge(d,b),this.panel=l,this.dialog=l,this.initialData=c.merge({},t),this.className="",this.inActiveFrame=!0,this.config&&typeof this.config.name<"u"&&this.config.name in t&&(this.value=t[this.config.name])},hide:function(b){this.temporaryHide(b)},getTakenHeight:function(){return this.html.get("offsetHeight")},show:function(b){this.temporaryShow(b)},getName:function(){return this.config.name},getType:function(){return this.type},getDialog:function(){return this.dialog},append:function(b){b.append(this.html),this.config.defaultHidden&&this.temporaryHide(!1)},resize:function(){},isValid:function(){return this.getErrors().length>0},getErrors:function(){return this.config.validator&&this.config.validationErrorMsg&&!this.config.validator.call(this,this.dialog)?[this.config.validationErrorMsg]:[]},showError:function(b){if(b){var t=this.errorFlyoutAnchor||this.control;t||console.error("dialog-field: [DialogField] No control or error flyout anchor set to throw form field error on. Set this.control or this.errorFlyoutAnchor to a node."),t.hasPlugin("flyoutPlugin")||t.plug(c.Squarespace.Animations.Flyout,{duration:.3});var l=t.flyoutPlugin;l.get("visible")?(this._showErrorSub&&this._showErrorSub.detach(),this._showErrorSub=l.once(this.getId()+"|hidden",function(){this._showErrorSub=null,this._doShowErrorFlyout(b)},this),l.hide()):this._doShowErrorFlyout(b)}},_doShowErrorFlyout:function(b){var t=this.errorFlyoutAnchor||this.control,l=t.flyoutPlugin;this.html.addClass("error"),this._errorEl||(this._errorEl=c.Node.create('<div class="flyout-error-message">'+b+"</div>"),this._errorEl.setStyle("zIndex",this.dialog.zIndex+10),this._errorEl.on(this.getId()+"|click",function(s){s.halt()},this)),this._errorEl.setContent(b);var d=c.Squarespace.NodeUtils.measureNode(this._errorEl).width,o=t.getX()+t.get("offsetWidth")-(this.html.hasClass("thin")?-10:1),e=o+d,a=c.one(window).get("region").right,r=e>a;r&&this._errorEl.addClass("out-from-left"),l.setAttrs({node:this._errorEl,alignment:r?"lt":"rt"}),this._clearErrorSub=c.on(this.getId()+"|click",this.clearError,this.errorEl,this),l.show()},hideError:function(){var b=this.errorFlyoutAnchor||this.control;if(!(!b||!b.hasPlugin("flyoutPlugin")||!b.flyoutPlugin.get("visible"))){this._clearErrorSub&&this._clearErrorSub.detach();var t=b.flyoutPlugin;this._subscribeOnce(t,this.getId()+"|hidden",function(l){this.html.removeClass("error")},this),t.hide()}},clearError:function(){this.dialog.clearError(this),this.hideError()},scrollIntoView:function(){this.html.scrollIntoView()},updateInlineTitle:function(){},setHeight:function(b){this.control&&this.control.setStyle("height",b+"px")},getValue:function(){return this.value},setValue:function(b){var t=this.value;this.value=b,"config"in this&&"name"in this.config&&this.fire("value-changed",{name:this.config.name,value:b,oldValue:t,field:this})},temporaryHide:function(b){this.fire("hide",this),this.hidden=!0,this.hideAnim&&this.hideAnim.stop(),b?(this.html.setStyle("display","none"),this.fire("hidden",this)):(this.hideAnim=this._anim({node:this.html,to:{opacity:0},duration:.35,easing:c.Easing.easeOutStrong}),this.hideAnim.on("end",function(){this.html.setStyle("display","none"),this.fire("hidden",this)},this),this.hideAnim.run())},temporaryShow:function(){this.fire("show",this),this.hidden=!1,this.hideAnim&&this.hideAnim.stop(),this.html.setStyle("display","block"),this.hideAnim=this._anim({node:this.html,to:{opacity:1},duration:.35,easing:c.Easing.easeOutStrong}),this.hideAnim.on("end",function(){c.fire("shown",this),c.fire("showing",this),this.fire("shown")},this),this.hideAnim.run()},getNode:function(){return this.html},didDataChange:function(){if(this.config.ignoreChanges)return!1;var b;return!this.initialData||c.Lang.isUndefined(this.initialData[this.getName()])&&this.getValue()===""?b=!1:c.Lang.isArray(this.initialData[this.getName()])?b=c.JSON.stringify(this.initialData[this.getName()])!==c.JSON.stringify(this.getValue()):b=this.getValue()!==this.initialData[this.getName()],b}})},"1.0",{requires:["anim","json","squarespace-gizmo","squarespace-node-flyout","squarespace-node-utils","squarespace-util","widget"]})},585987:function(c,b,t){"use strict";var l=t(714487),d=t(559409),o=t.n(d),e=t(586745),a=t.n(e),r=t(885878),s=t.n(r),n=t(854129),i=t.n(n),u=t(286465),h=t(829499),g=t(160964),p=t(62868);YUI.add("squarespace-dialog-file-image-licensed",function(f){f.namespace("Squarespace.DialogFields");var m={SEARCH:"search-images",EDIT:"edit",REMOVE:"remove",LICENSE:"license"},_=f.Squarespace.DialogFields.FileImageLicensed=f.Base.create("FileImageLicensed",f.Squarespace.DialogFields.FileImage,[],{initializer:function(){this.publish("gettyImageCaptionUpdate",{emitFacade:!0,bubbles:!0}),this._workflow=new f.Squarespace.LicensedAssets.Workflow({imageDestination:this.get("imageDestination")}),this._actions=new f.Squarespace.Widgets.ActionsInline,this._actions.set("disabled",this.get("isLoading")),this._alert=new f.Squarespace.LicensedAssets.Widgets.PreviewAlert},getUploaderConfig:function(){var v=_.superclass.getUploaderConfig.call(this);return v.selectButtonLabel=(0,l.t)("Upload an Image",null,{project:"scripts-v6.dialog"}),v},destructor:function(){this._workflow.destroy(),this._actions.destroy(),this._alert.destroy(),this._workflow=null,this._actions=null,this._alert=null},renderUI:function(){_.superclass.renderUI.call(this),this.get("boundingBox").addClass("sqs-file-image-licensed"),this._renderActions(),this._renderPreviewAlert()},bindUI:function(){_.superclass.bindUI.call(this),this._workflow.on("downloadRequest",this._onDownloadRequest,this),this._workflow.on("assetsPicked",this._onAssetsPicked,this),this._actions&&this._actions.on("action",this._onImageAction,this),this._alert.after("visibleChange",this._onAlertVisibilityChange,this),this.after("dataChange",this._resetDialog,this),this.on("isLoadingChange",(function(v){this._actions.set("disabled",v.newVal)}).bind(this))},_renderActions:function(){this._actions&&this._actions.render(this.get("boundingBox"))},_renderPreviewAlert:function(){this._alert&&(this._alert.hide(),this._alert.render(this.get("boundingBox")))},_resetDialog:function(v){v.source!=="DialogFileImage"&&(this._actions&&this._actions.reset(),this._alert&&this._alert.hide(),this.get("data")===null?this._addLinkToGetty():this._addContextualActions())},_onImageAction:function(v){var E=v.actionName;switch(E){case m.SEARCH:this._onLicensedImageSearch();break;case m.EDIT:this._onEdit();break;case m.REMOVE:this._onRemove();break;case m.LICENSE:this._onLicense();break}},_onAlertVisibilityChange:function(v){var E=this.get("boundingBox"),S=v.newVal;S?E.addClass("extra-padding"):E.removeClass("extra-padding")},_updateInlineActions:function(){var v=this.get("data");!f.Lang.isValue(v)||!v.get("hasFileData")?this._addLinkToGetty():this._addContextualActions()},_updatePreviewAlert:function(){this._isPreview()?this._alert.showPreviewAlert():this._isLicensedAsset()?this._getLicensedAssetOriginUrl().then((function(v){var E=v.source===i().UNSPLASH;E?this._alert.hide():this._alert.showLicensedAssetAlert(v.originUrl)}).bind(this)):this._alert&&this._alert.hide()},_getLicensedAssetOriginUrl:function(){var v=this.get("data").get("licensedAssetId");return f.Squarespace.LicensedAssets.Manager.getById(v)},_addLinkToGetty:function(){this._actions&&this._actions.set("buttons",[{label:(0,l.t)("Search for Image",null,{project:"scripts-v6.dialog"}),action:m.SEARCH}])},_addContextualActions:function(){var v=[],E=h.default.getState().assetPurchasesByNonAdminsAllowed;this._isPreview()&&(E||u.Z.hasRole(s().ADMIN))&&v.push({label:(0,l.t)("License",null,{project:"scripts-v6.dialog"}),action:m.LICENSE}),!this._isPreview()&&!this.get("disableEdit")&&v.push({label:(0,l.t)("Image Editor",null,{project:"scripts-v6.dialog"}),action:m.EDIT}),v.push({label:(0,l.t)("Remove",null,{project:"scripts-v6.dialog"}),action:m.REMOVE}),this._actions&&this._actions.set("buttons",v)},_isPreview:function(){var v=!1,E=this.get("data");return E&&E.isLicensedAssetPreview()&&(v=!0),v},_isLicensedAsset:function(){var v=!1,E=this.get("data");return E&&E.get("licensedAssetId")&&(v=!0),v},_onLicensedImageSearch:function(){this._workflow.showImagePicker()},_getFilePostData:function(){var v=_.superclass._getFilePostData.call(this);return f.merge(v,{imageDestination:this.get("imageDestination")})},_onDownloadRequest:function(v){var E=v.request,S=E.get("url"),y=E.get("licensedAssetPreview"),C=E.get("licensedAssetId"),O=E.get("isPurchased");this._setStretch(!0),this._fireAttributionEvent(E);var A=this.get("data"),I=null;f.Lang.isValue(A)&&!O&&(I=this.get("data").get("id")),this.saveFromUrl(S,y,I,C)},_onAssetsPicked:function(v){var E=this.get("data")&&this.get("data").get("collectionId")?this.get("data").get("collectionId"):null,S=E?g.Z.COLLECTION_IMAGE:g.Z.TRANSIENT_IMAGE,y=this.get("data"),C=f.Lang.isValue(y)&&y.get("recordType")!==a().IMAGE,O=C?y.get("id"):null;(0,p.Z)(S,v[0],{collectionId:E,replaceItemId:O}).then((function(A){this.set("data",new f.Squarespace.Models.ContentItem(A))}).bind(this))},_onLicense:function(){this._isTrialAccount()?this._abortLicense():this._completeLicense()},_completeLicense:function(){var v=this.get("data").get("licensedAssetPreview"),E=this._getAssetUrl();this._workflow.showPurchaseDetails(v,E)},_abortLicense:function(){new f.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Trial Account",null,{project:"scripts-v6.dialog"}),"strings.message":(0,l.t)("To purchase images, you must have a paid Squarespace account. Please upgrade your site via the Billing area.",null,{project:"scripts-v6.dialog"})})},_isTrialAccount:function(){return f.Squarespace.Context.getInstance().get("website").get("siteStatus.value")===o().TRIAL},_getAssetUrl:function(){return this.get("data").get("assetUrl")+"?format=500w"},_getLicensedAssetId:function(){return this.get("data").get("licensedAssetId")},_renderDataLoadedState:function(){_.superclass._renderDataLoadedState.call(this),this._updateInlineActions(),this._updatePreviewAlert()},_onRemove:function(){var v=this.get("data"),E=this._isPreview()?v.get("licensedAssetPreview").assetId:this._getLicensedAssetId();this._isPreview()?this._workflow.trackPreviewRemovalEvent(E):this._isLicensedAsset()&&this._getLicensedAssetOriginUrl().then((function(S){this._workflow.trackLicensedAssetRemovalEvent(E,S.source)}).bind(this)),(this._isPreview()||this._isLicensedAsset())&&this._fireCaptionEvent(""),f.soon((function(){_.superclass._onRemove.call(this),this._addLinkToGetty(),this._setStretch(!1)}).bind(this))},_setStretch:function(v){var E=this.get("dialog");if(E){var S=E.getField("stretch");S&&S.set("data",v)}},_fireAttributionEvent:function(v){var E=this.get("dialog");if(f.Lang.isValue(E)){var S=this.get("data"),y=v.get("licensedAssetPreview");if(!f.Lang.isValue(y)&&f.Lang.isValue(S)&&(y=new f.Squarespace.LicensedAssets.Models.Preview(S.get("licensedAssetPreview"))),f.Lang.isValue(y)){var C=this._getGettyAttribution(y);C.indexOf("undefined/undefined")===-1&&this._fireCaptionEvent(C)}}},_fireCaptionEvent:function(v){var E=this.get("dialog");f.Lang.isValue(E)&&E.fire("gettyImageCaptionUpdate",{caption:v})},_getGettyAttribution:function(v){var E=v.get("artist"),S=v.get("collectionName");return(0,l.t)("Photo by {artist}/{collectionName} / Getty Images",{artist:E,collectionName:S},{project:"scripts-v6.dialog"})}},{CSS_PREFIX:"sqs-file-image",ATTRS:{recordType:{value:a().IMAGE},imageDestination:{}}})},"1.0",{requires:["base","node","squarespace-actions-inline","squarespace-context","squarespace-dialog-file-image","squarespace-licensed-assets-preview","squarespace-licensed-assets-preview-alert","squarespace-licensed-assets-workflow","squarespace-util","squarespace-widgets-alert"]})},990944:function(c,b,t){"use strict";var l=t(629266),d=t.n(l),o=t(714487),e=t(174161),a=t(233284),r=t(225093),s=t(30712),n={x:.5,y:.5},i=["*.jpg","*.jpeg","*.png","*.gif","*.ico"],u=((0,s.L)().isWebpEnabled?[].concat(i,["*.webp"]):i).join(";");YUI.add("squarespace-dialog-file-image",function(h){h.namespace("Squarespace.DialogFields");var g=h.Squarespace.DialogFields.FileImage=h.Base.create("fileImage",h.Squarespace.DialogFields.FileRequiresProcessing,[],{renderUI:function(){g.superclass.renderUI.call(this);var p=this._imagePickerEl=h.Node.create('<div class="'+this.getClassName()+'-external-image-picker"></div>'),f=this._imageEditorEl=h.Node.create('<div class="'+this.getClassName()+'-external-image-editor"></div>');this.get("contentBox").append(p),this.get("contentBox").append(f),this._originalWidgetDimensions={height:this.get("height"),width:this.get("width")},this._attemptToEvaluateTargetSize()},bindUI:function(){g.superclass.bindUI.call(this),this._imagePickerEl.on("click",function(p){p.halt(),this._initializeExternalImagePicker()},this),this.after("dataChange",this._syncThumbnailSizes,this),this.after("dataChange",function(p){p.newVal===null&&this.set("isLoading",!1)},this),this.on("uploadStart",(function(){this.get("isLoading")||h.Global.fire("dialogFileImage:uploadStart"),this.set("isLoading",!0)}).bind(this))},destructor:function(){this._animateLoadedImageHandle&&this._animateLoadedImageHandle.detach(),this._img&&(this._img.detach("error"),this._img.detach("load"),this._img.detach("shown")),this._imagePickerEl.detach("click"),this._imageEditorEl&&(a.unmountComponentAtNode(this._imageEditorEl.getDOMNode()),this._imageEditorEl.remove(!0))},syncUI:function(){g.superclass.syncUI.call(this),this._attemptToEvaluateTargetSize()},_syncThumbnailSizes:function(p){if(p.source!=="DialogFileImage"){var f=this.get("id"),m=[f+"|originalSizeChange",f+"|systemDataIdChange"];p.prevVal&&p.prevVal.detach(m),this._attemptToEvaluateTargetSize(),p.newVal&&this._registerEvent(p.newVal.after(m,function(){this._attemptToEvaluateTargetSize()},this))}},_attemptToEvaluateTargetSize:function(){var p=this.get("data");if(!p||!p.get("hasFileData")){this.get("contentBox").setStyles({width:this._originalWidgetDimensions.width,height:this._originalWidgetDimensions.height});return}var f=p.get("originalSize");if(h.Lang.isString(f)){var m=f.split("x");if(m.length===2){var _=m[0],v=m[1],E=this.get("width"),S=this.get("boundingBox").get("offsetWidth"),y=Math.max(E,S),C=ImageLoader.getDimensionForValue("height",y,{dimensions:{width:_,height:v}});this.get("contentBox").setStyle("height",Math.min(y,C,this._originalWidgetDimensions.height))}}},getAssociatedVars:function(){var p=[],f=this.get("data");return f&&(p=[{name:this.get("name")+"Id",value:f.get("id")},{name:"mediaFocalPoint",value:f.get("mediaFocalPoint")},{name:"filename",value:f.get("filename")}],this.isChildMode()||p.push({name:"updatedOn",value:f.get("updatedOn")})),p},_cleanupResidualElements:function(){g.superclass._cleanupResidualElements.call(this),this._focalPoint&&this._focalPoint.get("host").unplug(this._focalPoint.constructor)},_renderFilePreview:function(){var p=this.get("data"),f=this.get("contentBox");this.set("isLoading",!0),f.removeClass("loaded"),f.addClass("image-loading");var m=h.Node.create('<div class="'+this.getClassName()+'-preview content-fit"><img data-load="false" data-src="'+p.get("assetUrl")+'" data-image-dimensions="'+p.get("originalSize")+'"data-image-focal-point="'+p.get("mediaFocalPoint.x")+","+p.get("mediaFocalPoint.y")+'" /></div>');this._img=m.one("img[data-src]"),this._img.plug(h.Squarespace.Animations.Fadeable),this._img.hide(),this._spinner=new h.Squarespace.Spinner({size:"extra-large",render:f,color:this.get("spinnerColor")}),this._spinner.get("boundingBox").setStyles({top:"50%",left:"50%",position:"absolute",marginLeft:"-20px",marginTop:"-20px"}),this._bindPreviewImage(this._img),f.append(m);var _=!this.tab||this.tab.index===this.get("dialog").currentTabIndex;this._img.plug(h.Squarespace.Loader2,{load:_})},_plugActionOverlay:function(p){var f=this.get("data");if(f){var m={buttons:this.get("disableEdit")?["remove"]:["edit","remove"],anchor:p,position:f.get("mediaFocalPoint.y")>=.5?"top":"bottom"};this._actionOverlay=this.get("contentBox").plug(h.Squarespace.Plugin.ActionOverlay,m).actionOverlay,this._actionOverlay.on("button-edit",this._onEdit,this),this._actionOverlay.on("button-remove",this._onRemove,this)}},_onEdit:function(){this._actionOverlay.setLoadingState("edit",!0),a.render(e.createElement(r.Z,{imageSrc:this.get("data").get("assetUrl"),onSave:this._onSaveEditedImage.bind(this),onCancel:this._onCloseEditingImage.bind(this),isOpen:!0}),this._imageEditorEl.getDOMNode(),(function(){this._actionOverlay.setLoadingState("edit",!1)}).bind(this))},_onSaveEditedImage:function(p){var f=this.get("data");this.set("isCancelProcessingEnabled",!1),this.saveFromFile(p,null,f.get("id")),this._onCloseEditingImage()},_onCloseEditingImage:function(){a.render(e.createElement(r.Z,{imageSrc:this.get("data").get("assetUrl"),onSave:this._onSaveEditedImage.bind(this),onCancel:this._onCloseEditingImage.bind(this),isOpen:!1}),this._imageEditorEl.getDOMNode())},_onRemove:function(){if(this.get("persistTransient")){var p=this.get("data");h.Lang.isValue(p)&&!p.isNew()&&p.clearFileData(!0)}else this.set("data",null)},_onJobComplete:function(p){var f=this.get("data"),m=p.target,_=m.get("data");f&&_.assetUrl&&f.get("id")===_.contentItemId&&f.get("systemDataId")?f.setAttrs({assetUrl:_.assetUrl,systemDataVariants:_.assetVariants,originalSize:_.assetVariants.split(",")[0],updatedOn:_.contentItemUpdatedOn,mediaProcessingState:d().READY}):g.superclass._onJobComplete.call(this,p)},_bindPreviewImage:function(p){p.on("error",function(){this.get("destroyed")||this._cleanupImagePreviewError(p)},this),p.once("load",function(){this._registerTimer(h.later(500,this,function(){this.get("destroyed")||(ImageLoader.load(p,{load:!0}),this._animateLoadedImage(p))},this))},this)},_cleanupImagePreviewError:function(p){if(!(p===null||p.getDOMNode()===null||!p.inDoc())){if(this._spinner.destroy(),this.get("contentBox").removeClass("image-loading"),this.get("persistTransient")){var f=this.get("data");h.Lang.isValue(f)&&!f.isNew()&&f.clearFileData(!0)}else this.set("data",null);new h.Squarespace.Widgets.Alert({"strings.title":this.LANG.TITLE_PROCESSING_FAIL,"strings.message":this.LANG.ERR_PROCESSING_FAIL})}},_animateLoadedImage:function(p){var f=this.get("contentBox");f.plug(h.Squarespace.Animations.Scalable),this._animateLoadedImageHandle=f.once("hidden",function(){this.get("destroyed")||(this._spinner.destroy(),f.removeClass("image-loading"),f.addClass("loaded"),f.show(!0),p.once("shown",function(){this.get("destroyed")||(this.set("isLoading",!1),this.set("isCancelProcessingEnabled",!0),this._plugActionOverlay(p),this.get("useFocalPoint")&&this._plugFocalPoint(p))},this),p.show())},this),f.show(!0),f.hide()},_plugFocalPoint:function(f){var m=this.get("data"),_=m?m.get("mediaFocalPoint"):null,v=_||n;v&&(this._focalPoint=f.plug(h.Squarespace.Plugin.FocalPoint,{focalPoint:v,parentNode:this.get("contentBox")}).focalPoint,this._focalPoint.on("focalPointChange",function(E){E.source!=="DialogFileImage"&&m&&m.set("mediaFocalPoint",{x:E.newVal.x,y:E.newVal.y})},this),this._focalPoint.on("focalPointChanged",function(){if(m&&this.get("autoSaveFocalPoint")&&m.save({fields:["mediaFocalPoint"]}),this.fire("edited",{noSyncUI:!0}),m&&this._actionOverlay){var E=m.get("mediaFocalPoint.y")>.5?"top":"bottom";this._actionOverlay.set("position",E)}},this))},setFocalPointPluginValue:function(p){this._focalPoint&&this._focalPoint.set("focalPoint",p,{source:"DialogFileImage"})},_initializeExternalImagePicker:function(){var p=this.get("imagePickerScrapeUrl"),f=this.get("data");!p&&f&&(p=f.get("sourceUrl"));var m=new h.Squarespace.EditingDialog({name:"choose-image-picker-url",closeOthers:!1,top:250,width:468,overlay:.5,primaryTabs:[{title:this.LANG.TITLE_DOWNLOAD_IMAGES,icon:"/universal/images-v6/configuration/icon-importing-32-light.png",fields:[{ctor:h.Squarespace.DialogFields.Description,config:{text:this.LANG.DESC_DOWNLOAD_IMAGES}},{ctor:h.Squarespace.DialogFields.Text,config:{name:"imagePickerScrapeUrl",submitOnEnter:!0,strings:{required:!0,placeholder:(0,o.t)("http://",null,{project:"scripts-v6.dialog"})}}}]}],buttons:[{type:"cancel",title:(0,o.t)("Cancel",null,{project:"scripts-v6.dialog"})},{type:"saveAndClose",title:(0,o.t)("Find Images",null,{project:"scripts-v6.dialog"})}],initialData:{imagePickerScrapeUrl:p}});m.on("send-requested",function(){var _=m.getField("imagePickerScrapeUrl"),v=_.getValue();/^https?:\/\//.test(v)||(v=v.replace(/^(?:\/\/)?/,"http://"));var E=/^https?:\/\/[-A-Za-z0-9+&@#\/%?=~_()|!:,.;]*[-A-Za-z0-9+&@#\/%=~_()|]/;if(!(E.test(v)&&v.indexOf(".")>-1)){_.showError(this.LANG.ERR_INVALID_URL),m.allowEditing();return}if(this.get("imagePickerDownloadFromSource")||v.match(/.*(jpg|jpeg|gif|png)$/i))this.saveFromUrl(v),m.cancel();else{var S=new h.Squarespace.Widgets.ExternalImagePicker({scrapeUrl:v,render:!0});S.after("selectedImageURLChange",function(y){this.saveFromUrl(y.newVal)},this),S.after("visibleChange",function(y){y.newVal&&m.cancel()},this),S.show()}},this),m.show()}},{CSS_PREFIX:"sqs-file-image",FILE_FILTER:{description:(0,o.t)("Images",null,{project:"scripts-v6.dialog"}),extensions:u},PROCESSING_JOB:h.Squarespace.ImageProcessingJob,PROCESSING_COPY:(0,o.t)("Processing and resizing",null,{project:"scripts-v6.dialog"}),ATTRS:{contentType:{value:"image"},contentLabel:{value:(0,o.t)("an image",null,{project:"scripts-v6.dialog"})},disableEdit:{value:!1},useFocalPoint:{value:!0},autoSaveFocalPoint:{value:!1},imagePickerScrapeUrl:{value:""},imagePickerDownloadFromSource:{value:!1},isLoading:{value:!1},type:{}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-dialog","squarespace-dialog-description","squarespace-dialog-file-requires-processing","squarespace-external-image-picker","squarespace-image-loader","squarespace-job-manager","squarespace-jobs","squarespace-plugin-actionoverlay","squarespace-plugin-focalpoint","squarespace-spinner","squarespace-ui-base","squarespace-widgets-alert"]})},988755:function(c,b,t){"use strict";var l=t(586745),d=t.n(l),o=t(714487);YUI.add("squarespace-dialog-file-manager",function(e){e.namespace("Squarespace.DialogFields").FileManager=e.Base.create("fileManager",e.Squarespace.DialogField2,[],{initializer:function(){this._activeEditingEl=!1,this._committing=!1,this._deletePrompt=!1,this._selectedLoaded=!1,this._reloadFromFirstPage()},renderUI:function(){var a=this.get("contentBox");a.prepend('<div class="search"></div><div class="attachments"></div>'),a.one(".attachments").plug(e.Squarespace.Plugin.ScrollLock);var r=new e.Squarespace.DialogFields.Text({"strings.placeholder":(0,o.t)("search",null,{project:"scripts-v6.dialog"})});r.render(a.one(".search")),this._searchInput=r.get("contentBox").one("input"),this.renderAttachments()},renderAttachments:function(){var a=this.get("contentBox");a.one(".attachments").empty().append(this.renderTemplate())},bindUI:function(){var a=this.get("contentBox");a.delegate("valuechange",function(s){this.set("searchQuery",s.newVal)},".search input",this),this.after("searchQueryChange",this._reloadFromFirstPage,this),this._searchInput.on("click",this._cancelAttachmentEdit,this);var r=a.one(".attachments");r.plug(e.Plugin.ScrollInfo),r.scrollInfo.on("scroll",this._onScroll,this),a.delegate("mouseenter",function(s){!this._activeEditingEl&&!this._deletePrompt&&(a.all(".attachments .attachment").removeClass("active"),s.currentTarget.addClass("active"))},".attachments .attachment",this),a.delegate("mouseleave",function(s){!this._activeEditingEl&&!this._deletePrompt&&s.currentTarget.removeClass("active")},".attachments .attachment",this),a.delegate("click",this._onAttachmentListClick,".attachments",this),a.delegate("click",this._enterAttachmentEditMode,".attachment .edit",this),a.delegate("key",this._commitAttachmentEdit,"press:13","input",this),a.delegate("click",this._onRemoveClick,".attachments .attachment .remove",this)},updateFullList:function(){this.set("searchQuery",""),this._reloadFromFirstPage()},_reloadFromFirstPage:function(){var a=this.get("loadedItemsModel");a.reset();var r=this.get("searchQuery"),s=r.length>0,n;s?(n=this.get("searchResultsCurrentPageModel"),n.set("searchQuery",r)):n=this.get("allItemsCurrentPageModel"),n.firstPage(),n.load({},e.bind(function(){a.add(n);var i=this.get("data");e.Lang.isString(i)&&(this._selectedLoaded=!1,a.some(function(u){if(u.get("urlId")===i)return a.add(a.remove(u),{index:0}),this._selectedLoaded=!0,!0},this),!this._selectedLoaded&&!s&&this._loadSelected()),this.renderAttachments()},this))},_loadNextPage:function(){var a;this.get("searchQuery").length>0?a=this.get("searchResultsCurrentPageModel"):a=this.get("allItemsCurrentPageModel"),a.get("hasNextPage")&&(a.nextPage(),a.load({},e.bind(function(){var r=this.get("data");e.Lang.isString(r)&&a.some(function(s){if(s.get("urlId")===r)return this._selectedLoaded?a.remove(s):this._selectedLoaded=!0,!0},this),this.get("loadedItemsModel").add(a),this.renderAttachments()},this)))},_loadSelected:function(){e.Data.get({url:e.Squarespace.API_ROOT+"content-items",data:{recordType:d().ATTACHMENT,urlId:this.get("data")},success:function(a){var r=e.Object.getValue(a,["results"]);if(!(this._selectedLoaded||!e.Lang.isArray(r)||r.length===0)){this._selectedLoaded=!0;var s=new e.Squarespace.Models.ContentItem;s.setAttrs(r[0]),this.get("loadedItemsModel").add(s,{index:0}),this.renderAttachments()}}},this)},_selectAttachment:function(a,r){if(!this._activeEditingEl){a=a.ancestor(".attachment",!0);var s=a.getAttribute("data-urlId");a.addClass("selected"),this.set("data",s,{silent:r})}},_onScroll:function(a){var r=a.currentTarget.get("host"),s=r.get("scrollHeight")-r.get("scrollTop")-r.height();s===0&&this._loadNextPage()},_onAttachmentListClick:function(a){a.target.ancestor(".edit, .remove, .filename input",!0)||(this._activeEditingEl?this._commitAttachmentEdit():a.target.ancestor(".attachment",!0)&&this._selectAttachment(a.target.ancestor(".attachment",!0)))},_onRemoveClick:function(a){this._activeEditingEl&&this._cancelAttachmentEdit(),this._promptDeleteAttachment(a)},_enterAttachmentEditMode:function(a){this._activeEditingEl&&this._cancelAttachmentEdit(a),this._activeEditingEl=a.currentTarget.ancestor(".attachment"),this._activeEditingEl.addClass("editing"),this._activeEditingEl.one(".filename input").select(),a.halt(!0)},_cancelAttachmentEdit:function(a){if(!(a&&a.target.ancestor(".edit, .remove, .filename-editable",!0))&&!(this._committing||!this._activeEditingEl)){this._activeEditingEl.removeClass("editing");var r=this._activeEditingEl.one(".filename");r.one("input.filename-editable").set("value",r.one(".filename-text").get("text")),this._activeEditingEl=!1,a&&a.halt(!0)}},_commitAttachmentEdit:function(a){if(this._committing=!0,!!this._activeEditingEl){var r=this._activeEditingEl.getAttribute("data-id"),s=this._activeEditingEl.getAttribute("data-urlId"),n=this._activeEditingEl.one(".filename input.filename-editable"),i=n.get("value"),u=s===this.get("data");if(s!==i){var h=this.get("loadedItemsModel").getById(r);h.set("filename",i).save((function(g,p){if(e.Lang.isNull(g))u&&this.set("data",p.urlId,{silent:!0}),this._activeEditingEl.setAttribute("data-urlId",p.urlId),this._activeEditingEl.one(".filename-text").set("text",i),this._activeEditingEl.removeClass("editing"),this._activeEditingEl=!1;else{var f=e.Object.getValue(g,["errors","name"]);e.Lang.isString(f)&&new e.Squarespace.Widgets.Alert({"strings.title":(0,o.t)("File Name Error",null,{project:"scripts-v6.dialog"}),"strings.message":f})}this._committing=!1}).bind(this))}}},_promptDeleteAttachment:function(a){a.halt(!0),this._deletePrompt=!0;var r=a.currentTarget.ancestor(".attachment",!0),s=r.getAttribute("data-id"),n=r.getAttribute("data-urlId");e.Squarespace.Fluent.Confirm({"strings.confirm":(0,o.t)("Delete",null,{project:"scripts-v6.dialog"}),"strings.title":(0,o.t)("Delete File",null,{project:"scripts-v6.dialog"}),"strings.message":(0,o.t)("Are you sure you want to delete this file?",null,{project:"scripts-v6.dialog"})}).then(e.bind(function(){this._deletePrompt=!1,this._deleteAttachment(s,n)},this),e.bind(function(){this._deletePrompt=!1},this))},_deleteAttachment:function(a,r){var s=this.get("loadedItemsModel").getById(a);s.destroy({remove:!0},e.bind(function(n){e.Lang.isNull(n)?(r===this.get("data")&&this.set("data",null,{silent:!0}),this._reloadFromFirstPage()):console.error(n)},this))},_getHBTemplateContext:function(){return{attachments:this.get("loadedItemsModel").toJSON(),searchQuery:this.get("searchQuery"),selectedUrlId:this.get("data"),strings:this.get("strings")}}},{CSS_PREFIX:"sqs-file-manager",ASYNC_DATA:!0,HANDLEBARS_TEMPLATE:"dialog-file-manager.html",ATTRS:{searchQuery:{value:"",validator:e.Lang.isString},loadedItemsModel:{value:new e.ModelList,validator:e.Squarespace.AttrValidators.isInstanceOf(e.ModelList)},allItemsCurrentPageModel:{value:new e.Squarespace.Models.AttachmentsList({pageSize:6}),validator:e.Squarespace.AttrValidators.isInstanceOf(e.Squarespace.Models.AttachmentsList)},searchResultsCurrentPageModel:{value:new e.Squarespace.Models.SearchedAttachmentsList({pageSize:6}),validator:e.Squarespace.AttrValidators.isInstanceOf(e.Squarespace.Models.SearchedAttachmentsList)},strings:{value:{noResultsFound:(0,o.t)("No results found\u2026",null,{project:"scripts-v6.dialog"}),noFiles:(0,o.t)("You have not uploaded any files yet",null,{project:"scripts-v6.dialog"})}}}})},"1.0",{requires:["base","node-scroll-info","squarespace-attr-validators","squarespace-dialog","squarespace-dialog-field-2","squarespace-dialog-file-manager-template","squarespace-dialog-text","squarespace-fluent-confirmation","squarespace-hb-compare","squarespace-models-attachments-list","squarespace-models-content-item","squarespace-plugin-scroll-lock","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation"]})},460266:function(c,b,t){"use strict";var l=t(629266),d=t.n(l),o=t(714487),e=t(867826),a=t(211568),r=t(988896),s=t(985913),n=n||function(){};YUI.add("squarespace-dialog-file",function(i){var u=function(g){return g<1e3?"~1KB":g<1e6?(g/1e3).toFixed(0)+"KB":(g/1e6).toFixed(0)+"MB"};i.namespace("Squarespace.DialogFields");var h=i.Squarespace.DialogFields.File=i.Base.create("file",i.Squarespace.DialogField2,[],{initializer:function(){this.LANG=h.LANG,i.Squarespace.Uploader&&(this.uploader=this._createUploader()),this.set("width",this.get("height")),this._plugTitleAndBindResizing(),this.after("dataChange",function(){this.refreshItemPostData(),this._bindDataEvents()},this),this._initializeAndLoadData(),this.get("square")&&this.set("width",this.get("width")),this.publish("uploadStart")},renderUI:function(){if(h.superclass.renderUI.call(this),!!this.uploader){var g=this.get("contentBox"),p=i.Squarespace.Plugin.ProgressSpinner.NS;this._progressPlugin=g.plug(i.Squarespace.Plugin.ProgressSpinner)[p],g.plug(i.Squarespace.Plugin.ProgressBar),i.Uploader.TYPE!=="none"&&(i.Uploader.TYPE==="flash"?i.later(300,this,function(){this.uploader.render(g)}):this.uploader.render(g))}},destructor:function(){this.uploader&&this.uploader.destroy()},_uiSetWidth:function(g){this._uiSetDim("minWidth",g),this._uiSetDim("width",g)},bindUI:function(){h.superclass.bindUI.call(this);var g=this.uploader;g&&(this._registerEvent(g.on("uploadstart",this._uploadStart,this)),this._registerEvent(g.on("upload-complete",this._directUploadComplete,this)),this._registerEvent(g.on("upload-failure",this._directUploadFailure,this)),this.after("uploadUrlChange",function(){this.uploader.set("uploadURL",this.get("uploadUrl"))}))},syncUI:function(){h.superclass.syncUI.call(this),this._dataLoaded?this._renderDataLoadedState():this._renderDataLoadingState()},didDataChange:function(){var g=this._initialData,p=this.get("data");if(!g&&!p||g&&Object.keys(g).length===0&&p===null)return!1;if(!g||!p||g.id!==p.get("id"))return!0;var f=g.mediaFocalPoint,m=p.get("mediaFocalPoint");return this._focalPointsDiffer(f,m)},_focalPointsDiffer:function(g,p){return!g&&!p?!1:!g||!p?!0:g.x&&p.x!==g.x||g.y&&p.y!==g.y},show:function(){this.syncUI(),this.set("visible",!0)},refreshItemPostData:function(){var g=this.get("data");if(g)switch(this.get("mode")){case e.Z.ITEM:this._itemPostData={collectionId:g.get("collectionId"),recordType:g.get("recordType")};var p=g.get("id");p&&(this._itemPostData.replaceItemId=p);break;case e.Z.CHILD:this._itemPostData={collectionId:g.get("collectionId"),recordType:g.get("recordType"),parentItemId:g.get("parentId")};break;default:this._itemPostData={};break}},_getUploadUrl:function(){var g=this.get("uploadUrl");return g===null?"/api/commondata/"+(this.isGlobalMode()?"SaveGlobalMedia":"SaveMedia"):g},saveFromUrl:function(g,p,f,m){this.saveFromUrlOrFile(g,p,f,m)},saveFromFile:function(g,p,f,m){this.saveFromUrlOrFile(g,p,f,m)},saveFromUrlOrFile:function(g,p,f,m){if(this.uploader){this.fire("uploadStart");var _=this.get("boundingBox").one(".sqs-file-image-preview");if(this.get("persistTransient")){var v=this.get("data");i.Lang.isValue(v)&&!v.isNew()&&v.clearFileData(!0)}else f?_&&_.hide():this.set("data",null);this.get("boundingBox").addClass("has-preview");var E=this._progressPlugin;E.set("show",!0);var S=typeof g=="string",y=S?{fileUrl:g}:{contentType:g.type,fileName:g.name,fileSize:g.size,Filedata:g},C=i.merge(this._getFilePostData(),y);if(i.Lang.isValue(p)&&(C.licensedAssetPreview=p),i.Lang.isValue(m)&&(C.licensedAssetId=m),f&&(C.replaceItemId=f),!C.replaceItemId){var O=C.collectionId,A=new i.Squarespace.Models.ContentItem({collectionId:O,recordType:C.recordType});A.save(i.bind(function(D){if(i.Lang.isValue(D)){new i.Squarespace.Widgets.Alert({"strings.title":(0,o.t)("Something Went Wrong",null,{project:"scripts-v6.dialog"}),"strings.message":this.LANG.ERR_FILE_UPLOAD}),E.set("show",!1),_&&_.show(),this.get("boundingBox").removeClass("has-preview");return}this.saveFromUrlOrFile(g,p,A.get("id"),m)},this));return}if(S)i.Data.post({url:this._getUploadUrl(),data:C,success:this._onUploadComplete.bind(this,E)},this);else{var I=(0,r._M)().getId();(0,a.cT)(I,this._getUploadUrl(),C,{onProgress:n,onCancel:n}).then((function(D){this._onUploadComplete(E,D.data)}).bind(this))}}},_onUploadComplete:function(g,p){if(p&&p.job){g.set("show",!0);var f={placeholder:this.get("contentBox")},m=this.uploader.get("createJob")(f,p),_=this.get("boundingBox").one(".sqs-file-image-preview");if(_&&_.show(),m){m.get("id")||m.set("id",p.job.id);var v=this.uploader;m.once("complete",i.bind(v._onJobHandler,v,"jobComplete",f)),m.once("failure",i.bind(v._onJobHandler,v,"jobFailure",f)),m.once("complete",this._onJobComplete,this),Static.JOB_MANAGER.addJob(m)}}var E=this.get("data");E&&!E.get("mediaProcessingState")&&E.set("mediaProcessingState",d().QUEUED)},_loadItem:function(g){var p=new i.Squarespace.Models.ContentItem({id:g});p.load({forceReload:!0},i.bind(function(f){i.Lang.isValue(f)||this.set("data",p)},this))},_onJobComplete:function(g){this._loadItem(g.target.get("data.contentItemId"))},isTransientMode:function(){return this.get("mode")===e.Z.TRANSIENT},isGlobalMode:function(){return this.get("mode")===e.Z.GLOBAL},isChildMode:function(){return this.get("mode")===e.Z.CHILD},getUploaderConfig:function(){var g={uploadURL:this._getUploadUrl(),multipleFiles:!1,appendNewFiles:!1,isTransient:this.isTransientMode()||this.isGlobalMode(),persistTransient:this.get("persistTransient"),isGlobal:this.get("mode")===e.Z.GLOBAL,autoUpload:!0,selectButtonLabel:i.substitute(i.Uploader.TYPE==="flash"?this.LANG.HINT_FILE_UPLOAD_CLICK_ONLY:this.LANG.HINT_FILE_UPLOAD,{type:this.get("contentLabel")}),dragAndDropArea:this.get("contentBox"),maxSize:this.get("maxSize"),processFile:i.bind(this._processFile,this),addPlaceholder:i.bind(this._addPlaceholder,this),preflight:this._getAsyncUploadUrlThenDoPreflight.bind(this)};return this.get("contentType")==="audio"&&(g.fileFilters=[{description:(0,o.t)("Audio",null,{project:"scripts-v6.dialog"}),extensions:"*.mp3;*.mp4;*.ogg;*.m4a"}]),g},_createUploader:function(){var g=this.getUploaderConfig(),p=i.Squarespace.Uploader;return(0,s.F)(i)&&(p=i.config.win.top.Y.Squarespace.Uploader),new p(g)},_getAsyncUploadUrlThenDoPreflight:function(g){var p=this.get("preflight")||function(f){f()};this._getAsyncUploadUrlFn()((function(f){this.uploader.set("uploadURL",f),p(g)}).bind(this))},_getAsyncUploadUrlFn:function(){var g=this.get("asyncUploadUrlFn");return i.Lang.isFunction(g)?g:(function(p){p(this._getUploadUrl())}).bind(this)},_plugTitleAndBindResizing:function(){var g=this.get("contentBox"),p=this.get("strings.title");p&&this.plug(i.Squarespace.Plugin.DialogFieldLabel,{forNode:g,strings:{text:p}}),this.after("render",this._calcAndSetBoxHeight,this)},_calcAndSetBoxHeight:function(){var g=this.get("contentBox"),p=this.get("height");if(p&&this.get("rendered")){var f=this.get("boundingBox").get("offsetHeight"),m=g.get("clientHeight");g.setStyle("height",2*m-f),this.get("boundingBox").setStyle("height",null)}},_initializeAndLoadData:function(){var g=this.get("data");this.refreshItemPostData(),this._bindDataEvents(),g?(this._initialData={id:g.get("id"),mediaFocalPoint:g.get("mediaFocalPoint")},!g.isNew()&&this.get("mode")!==e.Z.GLOBAL&&!this.get("persistTransient")?g.load(i.bind(function(p){p&&new i.Squarespace.Widgets.Alert({"strings.title":(0,o.t)("Missing Item",null,{project:"scripts-v6.dialog"}),"strings.message":(0,o.t)("We could not locate the item.",null,{project:"scripts-v6.dialog"})}),this._initialData.mediaFocalPoint=g.get("mediaFocalPoint"),this._dataLoaded=!0,this.get("rendered")&&this.syncUI()},this)):this._dataLoaded=!0):(this._initialData={},this._dataLoaded=!0)},_bindDataEvents:function(){var g=this.get("data");g&&this.get("mode")===e.Z.ITEM&&this._registerEvent(g.after("idChange",function(p){this._itemPostData.replaceItemId=p.newVal},this))},_cleanupResidualElements:function(){this.get("contentBox").all("."+h.CSS_PREFIX+"-preview").remove();var g=this._actionOverlay;g&&g.get("host").unplug(g.constructor);var p=this._spinner;p&&p.destroy()},_renderDataLoadedState:function(){this._cleanupResidualElements();var g=this.get("boundingBox"),p=this.get("data");this.get("contentBox").removeClass("data-loading"),p&&p.get("hasFileData")?(g.addClass("has-file"),this._renderFilePreview()):(g.removeClass("has-preview"),g.removeClass("has-file"),this._progressPlugin.set("show",!1))},_renderDataLoadingState:function(){this._cleanupResidualElements();var g=this.get("boundingBox"),p=this.get("contentBox");g.removeClass("has-preview"),g.addClass("has-file"),p.addClass("data-loading"),this._spinner=new i.Squarespace.Spinner({size:"extra-large",render:p,color:this.get("spinnerColor")}),this._spinner.get("boundingBox").setStyles({top:"50%",left:"50%",position:"absolute",marginLeft:"-20px",marginTop:"-20px"})},_renderFilePreview:function(){var g=i.Node.create('<div class="'+h.CSS_PREFIX+'-preview"></div>'),p=this.get("data"),f=p.get("filename"),m=p.get("dataSize");f&&g.append('<span class="file-meta file-meta-name">'+f+"</div>"),m&&g.append('<span class="file-meta file-meta-size">'+u(m)+"</span>"),this.get("contentBox").append(g),this._plugActionOverlay()},_plugActionOverlay:function(){this._actionOverlay=this.get("contentBox").plug(i.Squarespace.Plugin.ActionOverlay,{buttons:["remove"]}).actionOverlay,this._actionOverlay.on("button-remove",function(){this.set("data",null)},this)},_processFile:function(g){if(g.invalid){var p=g.invalid[0],f=p.title,m=p.message;this.get("strings.invalidDrop")&&(f=this.get("strings.invalidDrop.title"),m=this.get("strings.invalidDrop.message")),new i.Squarespace.Widgets.Alert({"strings.title":f,"strings.message":m});return}g.postData=this._getFilePostData()},_getFilePostData:function(){var g=this.get("contentType"),p={process:["image","audio"].indexOf(g.slice(0,5))!==-1?"true":"false",contentType:g,isWordpressXmlFile:this.get("isWordpressXmlFile")};switch(this.get("recordType")&&(p.recordType=this.get("recordType")),this.get("mode")){case e.Z.GLOBAL:case e.Z.TRANSIENT:if(this.get("persistTransient")){var f=this.get("data");i.Lang.isValue(f)&&!f.isNew()&&(p.replaceItemId=f.get("id"))}break;case e.Z.CHILD:this._itemPostData&&(p=i.merge(p,this._itemPostData,{childType:this.get("childType")}),i.Lang.isUndefined(p.parentItemId));break;case e.Z.ITEM:this._itemPostData&&(p=i.merge(p,this._itemPostData));break}return p},_addPlaceholder:function(){return this.get("contentBox")},_uploadStart:function(){this.fire("uploadStart"),this._cleanupResidualElements(),this.get("boundingBox").addClass("has-preview"),this.get("contentBox").all('<div class="'+h.CSS_PREFIX+'-file-preview"></div>').remove()},_directUploadComplete:function(g){this.get("contentBox").all('<div class="'+h.CSS_PREFIX+'-file-preview"></div>').remove(),g.media?this.set("data",new i.Squarespace.Models.ContentItem(g.media[0])):(this.get("boundingBox").removeClass("has-preview"),new i.Squarespace.Widgets.Alert({"strings.title":(0,o.t)("Bad File",null,{project:"scripts-v6.dialog"}),"strings.message":(0,o.t)("Unable to determine proper type information from uploaded file.",null,{project:"scripts-v6.dialog"})}))},_directUploadFailure:function(){this.set("data",null)}},{LANG:{TITLE_CLEAR_ASSET:(0,o.t)("Clear Asset",null,{project:"scripts-v6.dialog"}),CONFIRM_FILE_REMOVAL:(0,o.t)("Are you sure you want to remove this uploaded file?",null,{project:"scripts-v6.dialog"}),ERR_FILE_UPLOAD:(0,o.t)("Upload failed, please retry",null,{project:"scripts-v6.dialog"}),ERR_SINGLE_FILE_TITLE:(0,o.t)("Single File Only",null,{project:"scripts-v6.dialog"}),ERR_SINGLE_FILE:(0,o.t)("This field only accepts a single file.",null,{project:"scripts-v6.dialog"}),HINT_FILE_UPLOAD:(0,o.t)("Add {type}.",null,{project:"scripts-v6.dialog"}),HINT_FILE_UPLOAD_CLICK_ONLY:(0,o.t)("Click here to add {type}.",null,{project:"scripts-v6.dialog"}),MSG_FILE_UPLOAD_OK:(0,o.t)("File Uploaded Successfully",null,{project:"scripts-v6.dialog"}),INVALID_IMAGE_TITLE:(0,o.t)("Invalid Image",null,{project:"scripts-v6.dialog"}),INVALID_IMAGE:(0,o.t)("The image does not have enough information to render.",null,{project:"scripts-v6.dialog"}),ERR_INVALID_URL:(0,o.t)("That doesn't appear to be a valid URL.",null,{project:"scripts-v6.dialog"}),TITLE_DOWNLOAD_IMAGES:(0,o.t)("Download Images from Page",null,{project:"scripts-v6.dialog"}),TITLE_PROCESSING_FAIL:(0,o.t)("Image Processing Failed",null,{project:"scripts-v6.dialog"}),ERR_PROCESSING_FAIL:(0,o.t)("We were unable to process your image.  Please try again.",null,{project:"scripts-v6.dialog"}),DESC_DOWNLOAD_IMAGES:(0,o.t)("Paste the URL of a webpage with images and Squarespace will allow you to select one.",null,{project:"scripts-v6.dialog"})},CSS_PREFIX:"sqs-file",ATTRS:{cloneInitialData:{value:!1},data:{value:null,setter:function(g){return g?g instanceof i.Squarespace.Models.ContentItem?g:i.Lang.isObject(g)?new i.Squarespace.Models.ContentItem(i.Lang.isArray(g)?g[0]:g):i.Attribute.INVALID_VALUE:null}},strings:{value:{title:""}},contentType:{value:"file"},contentLabel:{value:(0,o.t)("a File",null,{project:"scripts-v6.dialog"})},mode:{value:e.Z.TRANSIENT},square:{value:!1},spinnerColor:{value:"light"},recordType:{value:null},childType:{value:null},maxSize:{value:20},preflight:{value:null},isWordpressXmlFile:{value:!1},uploadUrl:{value:null},persistTransient:{value:!1,validator:i.Squarespace.AttrValidators.isBoolean},asyncUploadUrlFn:{valueFn:function(){return(function(g){g(this._getUploadUrl())}).bind(this)}}}})},"1.0",{requires:["attribute","base","json","node","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-dialog-label","squarespace-models-content-item","squarespace-plugin-actionoverlay","squarespace-plugin-progress-bar","squarespace-plugin-progress-spinner","squarespace-spinner","squarespace-ui-base","squarespace-uploader","squarespace-util","squarespace-widgets-alert"]})},310501:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-dialog-flow",function(d){d.namespace("Squarespace"),d.Squarespace.DialogFlow=d.Base.create("dialogFlow",d.Base,[],{initializer:function(o){this.set("options",o.options),this.set("title",o.title),this.set("fieldName",o.fieldName),this.set("initialField",o.initialField)},showPrescreen:function(o){var e=this.get("fieldName"),a=this.get("initialField"),r=[];d.Lang.isUndefined(o)&&(o={}),d.Lang.isUndefined(a)||r.push(a),r.push({ctor:d.Squarespace.DialogFields.Description,config:{title:this.get("subtitle"),text:this.get("description")}},{ctor:d.Squarespace.DialogFields.MultiOption,config:{name:e,options:this.get("options"),optionClickCb:this.get("optionClickCb"),columns:this.get("optionColumns")}});var s=this._prescreen=new d.Squarespace.EditingDialog({name:this.get("fieldName"),overlay:.5,width:this.get("width"),style:"flyout",initialData:o,closeOthers:!1,buttons:[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6.dialog"})}],discardChangesConfirmation:!1,primaryTabs:[{title:this.get("title"),icon:this.get("icon")||"/universal/images-v6/icons/icon-plus-16-light.png",fields:r}]});s.on("ready",function(){s.getField(e).after("dataChange",function(n){s.close(),this.proceed(o,n.newVal)},this)},this),s.show()},close:function(){this._prescreen.close()},proceed:function(o,e){o[this.get("fieldName")]=e;var a=this.get("nextDialogGenerator");if(!a){this.fire("proceed",{valueChoice:e});return}var r=a(o);if(r instanceof d.Squarespace.DialogFlow)r.showPrescreen(o);else if(r.constructor instanceof d.Squarespace.EditingDialog.constructor)r.show();else throw r===void 0?new Error("nextDialog not specified"):new Error("Unsupported Dialog")}},{NS:"dialogFlow",ATTRS:{description:{value:""},fieldName:{value:""},nextDialogGenerator:{value:null},options:{value:[]},optionClickCb:{value:null},optionColumns:{value:1},subtitle:{value:""},title:{value:""},width:{value:550}}})},"1.0",{requires:["base","squarespace-dialog","squarespace-dialog-description","squarespace-dialog-multi-option"]})},597012:function(){YUI.add("squarespace-dialog-gallery-options",function(c){c.namespace("Squarespace.DialogFields");var b=c.Squarespace.DialogFields.GalleryOptions=c.Base.create("galleryOptions",c.Squarespace.DialogField2,[],{initializer:function(t){this._originalSettings={},this._widgetsByName={},this.publish("options-changed",{emitFacade:!1})},renderUI:function(){var t=this.get("options"),l=[];c.Object.each(t,function(d,o){this._originalSettings[o]=d,l.push(this._optToWidget(d,o))},this),c.Array.forEach(l,function(d){d.after("dataChange",function(o){var e=o.attrName;this.fire("options-changed",d,e)},this),this.add(d)},this),c.Squarespace.DialogFields.GalleryOptions.superclass.renderUI.call(this)},syncUI:function(){this._updateVisibleWidgets()},didDataChange:function(){var t=!1;return c.Object.each(this.get("data"),function(l,d){c.Object.hasKey(this._initialData,d)&&(t=this._initialData[d]!==l)}),t},_optToWidget:function(t,l){var d=t.type;switch(d){case"multiOption":return this._multiOption(t,l);case"select":return this._selectWidget(t,l);case"boolean":return this._checkWidget(t,l);case"slider":return this._sliderWidget(t,l)}},add:function(t){this._widgetsByName[t.get("name")]=t,c.Squarespace.DialogFields.GalleryOptions.superclass.add.call(this,t)},_getOriginalSettings:function(t){return this._originalSettings[t.get("name")]},_updateVisibleWidgets:function(){this.each(function(t){var l=this._getOriginalSettings(t);if(l.onlyFor){var d;l.matchAllOnlyFor?d=l.onlyFor.map((function(o){return this._validateSettings(o)}).bind(this)).indexOf(!1)===-1:d=c.Array.some(l.onlyFor,this._validateSettings,this),d?t.show():t.hide()}else t.show()},this)},_validateSettings:function(t){var l=this._parseFieldCondition(t),d=this._widgetsByName[l.name],o=d.get("visible");return o&&String(d.get("data"))===String(l.value)},_parseFieldCondition:function(t){var l=t.split(":");return{name:l[0],value:l[1]}},_resetValuesToDefaults:function(t){var l=this._getOriginalSettings(t);c.Lang.isUndefined(l.defaultValue)||t.set("data",l.defaultValue)},_multiOption:function(t,l){var d=[];c.Object.each(t.options,function(e,a){d.push({title:e.title,value:a,icon:e.icon})});var o=new c.Squarespace.DialogFields.MultiOption({defaultValue:t.defaultValue,options:d,name:l});return this._monitorValueChange(o),o},_selectWidget:function(t,l){var d=b.convertToOptionsArray(t.options),o=new c.Squarespace.DialogFields.Select({"strings.title":t.title,"strings.description":t.description,options:d,data:t.defaultValue,className:"thin dark",name:l,visible:l!=="design",prefix:""});return o.unplug(c.Plugin.WidgetAnim),this._monitorValueChange(o),o},_monitorValueChange:function(t){t.after("dataChange",function(){t.get("name")==="design"&&(this.each(function(l){l.get("name")!=="design"&&this._resetValuesToDefaults(l)},this),this._applyValuesFromSelect(t)),this._updateVisibleWidgets()},this)},_applyValuesFromSelect:function(t){var l=this._getOriginalSettings(t);if(l.options){var d=l.options[t.get("data")];c.Object.each(d.values,function(o,e){var a=this._widgetsByName[e];a.set("data",o)},this)}},_sliderWidget:function(t,l){return new c.Squarespace.DialogFields.Slider({name:l,"strings.description":t.description,"strings.suffix":t.numericSuffix||"",range:[t.min,t.max],data:t.defaultValue,isNumericLabel:!(typeof t.numericSuffix=="string"&&t.numericSuffix.trim()!==""),labelWidth:t.labelWidth,visible:!1})},_checkWidget:function(t,l){var d=new c.Squarespace.DialogFields.Check({name:l,"strings.title":t.title,"strings.description":t.description,data:t.defaultValue,visible:!1});return d.after("dataChange",this._updateVisibleWidgets,this),d}},{convertToOptionsArray:function(t){var l=[];return c.Lang.isArray(t)?t:(!c.Lang.isObject(t)&&!c.Lang.isValue(t)||c.Object.each(t,function(d,o){var e=d.title||o;l.push({value:o,label:e})},this),l)},CSS_PREFIX:"sqs-gallery-options",ATTRS:{data:{getter:function(){var t=function(l){return l.get("visible")};return c.Array.reduce(c.Array.filter(this._items,t),{},function(l,d){return l[d.get("name")]=d.get("data"),l})},setter:function(t){c.Array.each(this._items,function(l){l.set("data",t[l.get("name")])},this)},lazyAdd:!1},options:{},currentDesign:{readOnly:!0,getter:function(){return this._widgetsByName.design.get("data")}}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-field-2","squarespace-dialog-multi-option","squarespace-dialog-select","squarespace-dialog-slider"]})},985531:function(c,b,t){"use strict";var l=t(714487),d=t(408549);YUI.add("squarespace-dialog-giftcard-pricing-placeholder",function(o){o.namespace("Squarespace");var e=o.Squarespace.DialogFields.GiftCardPricingPlaceholder=o.Base.create("giftCardPricingPlaceholder",o.Squarespace.DialogFields.PricingPlaceholder,[],{initializer:function(){},renderUI:function(){e.superclass.renderUI.call(this),this._setAmountCount()},syncUI:function(){e.superclass.syncUI.call(this),this._setAmountCount()},_setAmountCount:function(){var a=this.get("data.variants").length;a===0&&(a=1);var r=a<=1?"":o.Node.create((0,d.Z)('<span class="separator">\u2014</span>'+(0,l.t)("{numVariants} values",null,{project:"scripts-v6.dialog"}),{numVariants:a}));this.get("contentBox").one(".variant-count").setHTML(r)},_getHBTemplateContext:function(){var a=e.superclass._getHBTemplateContext.call(this);return a.hasVariants=!0,a}},{CSS_PREFIX:"sqs-giftcard-pricing-placeholder",ATTRS:{}})},"1.0",{requires:["squarespace-dialog-pricing-placeholder"]})},351065:function(c,b,t){"use strict";var l=t(860921),d=t.n(l);YUI.add("squarespace-dialog-hidden",function(o){o.namespace("Squarespace.DialogFields").Hidden=o.Base.create("hidden",o.Squarespace.DialogField2,[],{initializer:function(){this.unplug(o.Plugin.WidgetAnim)},focus:null,enable:null,disable:null,blur:null,renderUI:d(),bindUI:d(),syncUI:d()},{CSS_PREFIX:"sqs-hidden",ATTRS:{visible:{value:!1},focusable:{value:!1}}}),o.Squarespace.DialogFields.HiddenField=o.Squarespace.DialogFields.Hidden},"1.0",{requires:["base","squarespace-dialog-field-2"]})},819026:function(){YUI.add("squarespace-dialog-html",function(c){c.namespace("Squarespace.DialogFields");var b=c.Squarespace.DialogFields.HTML=c.Base.create("html",c.Squarespace.DialogField2,[],{bindUI:function(){b.superclass.bindUI.call(this),this._registerEvent(this.after("contentChange",this.syncUI,this))},syncUI:function(){b.superclass.syncUI.call(this),this.get("contentBox").empty().setHTML(this.get("content"))},focus:null,blur:null,enable:null,disable:null},{CSS_PREFIX:"sqs-dialog-field-html",ATTRS:{content:{value:""},focusable:{value:!1}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},738827:function(c,b,t){"use strict";var l=t(174161),d=t(714487),o=t(181298),e=t(586745),a=t.n(e);YUI.add("squarespace-dialog-item-push",function(r){var s="tumblr";r.namespace("Squarespace.DialogFields").ItemPush=r.Base.create("itemPushDialogField",r.Squarespace.DialogField2,[],{initializer:function(n){this._widgets=[],this.isEmpty=!0,r.Lang.isValue(this.get("dialog"))||this.show(!0)},destructor:function(){r.Array.each(this._widgets,function(n){r.Object.each(n,function(i,u){r.Lang.isValue(i)&&i.destroy()})})},_isPushable:function(n){return r.Squarespace.ConnectedAccountCapabilities.can(n,r.Squarespace.ConnectedAccountCapabilities.PUSH)},_addEmptyMessage:function(){var n=['<div class="instructions">',"<p>",(0,d.t)("You do not have any accounts connected to your site configured for pushing content. Press the button below to connect an account.",null,{project:"scripts-v6.dialog"}),"<p>","<p>",'<div class="add-account">',"<a>",(0,d.t)("Connect Account",null,{project:"scripts-v6.dialog"}),"</a>","</div>","<p>","</div>"].join(""),i='<div class="instructions"><p>'+(0,d.t)("You do not have any accounts connected to your site configured for pushing content. Go to your site management page to add an account.",null,{project:"scripts-v6.dialog"})+"</p></div>",u=this.get("contentBox");Static.IN_BACKEND?(u.append(n),u.one(".add-account").on("click",this._onAddAccountClick,this)):u.append(i)},_onAddAccountClick:function(){new r.Squarespace.Widgets.Confirmation({showOverlay:!0,"strings.title":(0,d.t)("Add Account",null,{project:"scripts-v6.dialog"}),"strings.message":(0,d.t)("All unsaved changes to this item will be lost. Are you sure you want to leave?",null,{project:"scripts-v6.dialog"})}).on("confirm",function(){r.Lang.isValue(this.get("dialog"))&&(this.get("dialog").params.discardChangesConfirmation=!1),this._guideToConnectedAccounts()},this)},_guideToConnectedAccounts:function(){r.Squarespace.Singletons.Location.go("/settings/connected-accounts"),r.Lang.isValue(this.get("dialog"))&&this.get("dialog").close()},show:function(){if(!this._shownOnce)this._shownOnce=!0;else return;var n=this.get("models").filter(this._isPushable);n.length&&r.Array.each(n,this._renderAccount,this),this.isEmpty&&this._addEmptyMessage()},bindUI:function(){this.get("contentBox").delegate("click",this._hidePushedMessage,".already-pushed-msg",this)},_hidePushedMessage:function(n){var i=n.target.ancestor(".account",!0),u=i.one(".sqs-toggle-button"),h=r.Widget.getByNode(u);h&&h.set("active",!0),i.removeClass("pushed")},_renderAccount:function(n){var i=n.get("pushEnabled"),u=n.get("pushAvailable");if(!(!i||!u)&&!(n.get("serviceName")===s&&this.get("recordType")===a().IMAGE)){this.isEmpty=!1;var h=this.get("contentBox"),g=h.appendChild('<div class="account"></div>'),p=n.get("hash"),f=this.get("pushedServices")[p],m=this.get("pendingPushedServices")[p],_=r.Array.some(this._initialData,function(T){return T.connectedAccountId===n.get("id")&&T.pushEnabled})&&!f&&!(this.get("published")&&m),v=new r.Squarespace.Widgets.ConnectedAccount({model:n,editable:!1});v.render(g);var E=new r.Squarespace.Widgets.ToggleButton;E.after("activeChange",function(){this.fire("edited"),n.get("serviceName")!==s&&g.toggleClass("pushing",E.get("active"))},this),E.render(g),this.get("published")&&m?(g.addClass("pushed").addClass("pushing"),g.one(".sqs-toggle-button").insert('<div class="pending-push-msg"><div class="title">'+(0,d.t)("Content Push Pending",null,{project:"scripts-v6.dialog"})+'</div><div class="msg">This content is being sent to <span class="service-name">'+n.get("serviceName")+"</span>.</div></div>","after")):f&&(g.addClass("pushed").addClass("pushing"),g.one(".sqs-toggle-button").insert('<div class="already-pushed-msg"><div class="title">'+(0,d.t)("Content Already Pushed",null,{project:"scripts-v6.dialog"})+'</div><div class="msg">'+(0,d.t)('This content has already been sent to <span class="service-name">{serviceName}</span>. Click to re-send.',{serviceName:n.get("serviceName")},{project:"scripts-v6.dialog"})+"</div></div>","after")),E.set("active",_);var S=null;if(n.get("serviceName")===s)g.appendChild('<div class="desc">'+(0,d.t)("Content will be pushed to Tumblr in its entirety. No post format is needed.",null,{project:"scripts-v6.dialog"})+"</div>");else{var y=g.appendChild('<div class="format" type="text" spellcheck="false"><div class="structured-input"></div></div>'),C=r.Array.find(this._initialData,function(T){return T.connectedAccountId===n.get("id")}),O=r.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","baseUrl"]),A=r.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount","displayName"]),I=this.get("contentBox").one(".structured-input").getDOMNode().offsetWidth,D=function(T){var B={overflowWrap:"break-word",display:"inline-block",maxWidth:I,paddingBottom:o.GRID_PX/2};return l.createElement("span",{style:B},T)};S=new r.Squarespace.DialogFields.StructuredInput({exampleTemplate:D,name:"defaultPushMessage",placeholder:"%t %u",variables:{"%t":{title:(0,d.t)("Title",null,{project:"scripts-v6.dialog"}),description:(0,d.t)("The title of this post.",null,{project:"scripts-v6.dialog"}),exampleText:(0,d.t)("New Post Title",null,{project:"scripts-v6.dialog"})},"%a":{title:(0,d.t)("Author",null,{project:"scripts-v6.dialog"}),description:(0,d.t)("The author of this post.",null,{project:"scripts-v6.dialog"}),exampleText:A},"%u":{title:(0,d.t)("URL",null,{project:"scripts-v6.dialog"}),description:(0,d.t)("The URL to this post.",null,{project:"scripts-v6.dialog"}),exampleText:O+"/blog-post"}},maxLength:this.get("enforceMaxLength")?200:void 0,data:C?C.message:n.get("defaultPushMessage"),render:y.one(".structured-input")})}this._widgets.push({account:v,toggle:E,format:S})}}},{CSS_PREFIX:"sqs-dialog-item-push",ATTRS:{data:{getter:function(){return this._shownOnce?r.Array.map(this._widgets,function(n){var i=n.account.get("model");return{message:n.format&&n.format.get("data"),connectedAccountId:i.get("id"),pushEnabled:n.toggle.get("active")}}):this._initialData||[]}},enforceMaxLength:{value:!1},pushedServices:{value:{}},pendingPushedServices:{value:{}},models:{valueFn:function(){return new r.Squarespace.Models.ConnectedAccounts}},published:{value:!1},recordType:{value:null}}})},"1.0",{requires:["base","squarespace-connected-account-capabilities","squarespace-connected-account-widget","squarespace-dialog-field-2","squarespace-models-connected-accounts","squarespace-singletons-location","squarespace-dialog-structured-input","squarespace-toggle","squarespace-widgets-confirmation"]})},4562:function(){YUI.add("squarespace-dialog-label",function(c){var b="-plugged";c.namespace("Squarespace.Plugin").DialogFieldLabel=c.Base.create("dialogFieldLabel",c.Plugin.Base,[],{initializer:function(t){this.afterHostMethod("renderUI",this._render,this),this.afterHostMethod("syncUI",this.syncLabel,this)},destructor:function(){c.detach(this.get("id")+"|*");var t=this.get("host"),l=t.get("boundingBox");t.get("rendered")&&l&&l._node&&t.get("boundingBox").removeClass(c.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+b)},_render:function(){this.renderLabel(),this.bindLabel(),this.syncLabel(),this.get("host").get("boundingBox").addClass(c.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+b)},renderLabel:function(){this._labelNode=c.Node.create("<label></label>"),this._labelNode.addClass(c.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX);var t=this._labelNode,l=this.get("renderNode"),d=this.get("className"),o=this.get("forNode"),e=this.get("host"),a=e.get("contentBox");if(d&&t.addClass(d),l)c.Lang.isString(l)&&(l=a.one(l)),l.appendChild(t);else if(o){c.Lang.isString(o)&&(o=a.one(o));var r=o.getAttribute("id");r&&t.setAttribute("for",r),o.insert(t,"before")}else{var s=a.one("input")||a.one("select")||a.one("textarea")||a.one("button");s.insert(t,"before")}},bindLabel:function(){var t=this.get("id");this.on(t+"|classNameChange",function(l){this._labelNode.removeClass(l.prevVal),this._labelNode.addClass(l.newVal)},this)},syncLabel:function(){this._labelNode.setContent(this.get("strings.text"))}},{NS:"label",CSS_PREFIX:"sqs-dialog-field-label",ATTRS:{strings:{value:{text:""}},renderNode:{value:null},className:{value:null},forNode:{value:null}}}),c.namespace("Squarespace.DialogFields").DialogFieldLabel=function(t){c.Do.before(function(){this.plug(c.Squarespace.Plugin.DialogFieldLabel,c.merge({renderNode:t.labelRenderNode||null,forNode:t.labelForNode||null,className:t.labelClassName||null,"strings.text":this.get("strings.label")},t.labelConfig||{},this.getProperty("LABEL_CONFIG")||{}))},this,"renderUI",this)},c.Squarespace.DialogFields.DialogFieldLabel.NAME="dialogFieldLabel"},"1.0",{requires:["base","node","plugin","squarespace-dialog-field-2"]})},827224:function(c,b,t){"use strict";var l=t(714487),d=t(307945);YUI.add("squarespace-dialog-layout",function(o){o.namespace("Squarespace.DialogFields"),o.namespace("Squarespace.Block.Editor");var e=o.Squarespace.DialogFields.Layout=o.Base.create("Layout",o.Squarespace.DialogField2,[],{initializer:function(){this._didDataChange=!1},destructor:function(){var a=this.get("editController");a.destroyLayoutEditor(this.getLayoutNode()),a.destroyBlockTrashInstance(),this._imageLoaderRefreshHandle&&this._imageLoaderRefreshHandle.detach();for(var r=o.Array.some(o.Squarespace.Block.Editor.OPEN_DIALOGS,function(s){return s.layout===this.get("contentBox")},this);r&&o.Squarespace.Block.Editor.OPEN_DIALOGS&&o.Squarespace.Block.Editor.OPEN_DIALOGS.length;)o.Squarespace.Block.Editor.OPEN_DIALOGS.shift().dialog.close();this._ecb&&(this._ecb.destroy(),this._ecb=null)},renderSiteStyles:function(){o.Data.get({url:"/site.css?nocustom=true",responseFormat:"raw",success:function(a){var r=o.guid("layout-editor"),s=a.replace(/-ms-grid-columns:.*?;/g,""),n,i=(function(u){var h=o.Node.create("<style>"+u+"</style>");this.get("contentBox").addClass(r),this.get("contentBox").append(h)}).bind(this);try{(0,d.kS)("."+r+" { "+s+" }").then((function(u){n=u.css.replaceAll("."+r+" :root {",":root ."+r+" {"),i(n),this.set("hasSiteCssParseError",!1)}).bind(this)).catch((function(u){console.error(u),i(""),this.set("hasSiteCssParseError",!0)}).bind(this))}catch{this.set("hasSiteCssParseError",!0),i("")}}},this)},renderUI:function(){this.get("scroll")||this.get("contentBox").one(".sqs-layout-scroll").plug(o.Squarespace.Plugin.ScrollLock),this.get("hideNodeExpander")||(this._nodeExpander=this.get("contentBox").one(".sqs-layout-wrapper").plug(o.Squarespace.Plugins.NodeExpander).NodeExpander),this.renderSiteStyles()},bindUI:function(){var a=this.get("dialog"),r=this.get("editController");o.Lang.isValue(a)&&(this.after("focusedChange",function(s){this._replugImageLoader(),s.newVal&&(r.alignInsertPoints(this.getLayoutNode()),r.updateInsertMarkerConstrainNode())},this),this.get("hideNodeExpander")||this._bindExpanderEvents(a),this.after("hasSiteCssParseErrorChange",function(s){var n=this.get("contentBox").one(".sqs-layout-error-container");s.newVal?(n.addClass("visible"),n.setContent((0,l.t)("Error parsing Custom CSS, verify Custom CSS is valid.",null,{project:"scripts-v6-root"}))):n.removeClass("visible")}),a.on("ready",this._onReady,this)),this._registerEvent(this.get("contentBox").one(".add-block").on("click",function(s){this.get("editController").showBlockMenu({align:{node:s.target,points:[o.WidgetPositionAlign.BR,o.WidgetPositionAlign.BR]},layoutNode:this.getLayoutNode()}),this.get("dialog").fire("button-click",{type:"add-block"})},this))},syncUI:function(){var a=this._getECB().get("layout"),r=this.get("editController"),s=r.getBlockTrashInstance().get("boundingBox");this.get("boundingBox").append(s);var n=this.get("id");a.detach(n+"|*"),this._didDataChange=!1,this._registerEvent(a.after(n+"|change",function(i){i.changed.rows&&i.source!=="setInitialData"&&(this._didDataChange=!0,this.get("dialog").setEdited())},this))},_bindExpanderEvents:function(a){var r=this.get("editController"),s="sqs-node-expander-active";o.Lang.isValue(a)&&(this._nodeExpander.on("expand-start",function(n){a.el.addClass(s),a.overlayEl.addClass(s)},this),this._nodeExpander.on("contract-end",function(n){a.el.removeClass(s),a.overlayEl.removeClass(s)},this)),this._nodeExpander.on(["expand-start","contract-start"],function(){r.disableInsertPoints()}),this._nodeExpander.on(["contract-end","expand-end"],function(n){r.enableInsertPoints(),r.updateInsertMarkerConstrainNode()},this),this._nodeExpander.on(["contract-end","expand-end","expand-resized"],function(n){r.alignInsertPoints()},this)},show:function(){e.superclass.show.apply(this,arguments),this._hasLayoutEditor()||this._pluginLayout()},didDataChange:function(){return this._didDataChange},_hasLayoutEditor:function(){return!!this.getLayoutNode()[o.SQS.LayoutEngine.Layout.Editor.NS]},getLayoutEditor:function(){return this.getLayoutNode()[o.SQS.LayoutEngine.Layout.Editor.NS]||null},getLayoutNode:function(){return this.get("contentBox").one(".sqs-layout")},_pluginLayout:function(){o.SQS.LayoutEngine.PageLayoutTools.sanitizeImportedECB(this._getECB());var a=this._getECB().get("layout"),r=this.get("dialog")?this.get("dialog").getInitialData():{},s=this.get("contentItem"),n=o.Object.getValue(r,"collectionId")||(s?s.get("collectionId"):null)||null,i=o.Object.getValue(r,"id")||(s?s.get("id"):null)||null;a.set("collectionId",n),a.set("contentItemId",i),i||this.get("contentItem").once("idChange",function(u){a.set("contentItemId",u.newVal)}),this._syncLayoutBuilderAndEditor()},_syncLayoutBuilderAndEditor:function(){var a=this.getLayoutNode(),r=this._getECB().get("layout"),s=this.get("editController");if(s.destroyLayoutEditor(a),s.pluginLayoutEditor({layoutNode:a,layoutModel:r,scrollNode:a}),!this._imageLoaderRefreshHandle){var n=o.SQS.LayoutEngine.Events;this._imageLoaderRefreshHandle=n.on("layout-engine:reload-images",function(){o.Squarespace.ImageLoadManager.refreshAll()})}},createLoadingOverlay:function(){this._loadingOverlay=this.get("contentBox").plug(o.Squarespace.Plugins.LoadingOverlay,{spinnerConfig:{size:"extra-large",color:"dark"}}).loadingOverlay},hideLoadingOverlay:function(){this._loadingOverlay.set("visible",!1)},_getECB:function(){return o.Lang.isValue(this._ecb)||(this._ecb=new o.SQS.LayoutEngine.Models.EditableContentBlock),this._ecb},_setData:function(a,r,s){a&&(this._getECB().setAttrs(a,s),this._hasLayoutEditor()&&this._syncLayoutBuilderAndEditor())},_getData:function(a){if(!this.get("rendered"))return a;var r=this._ecb.toJSON();return r},_onReady:function(){var a=this.getLayoutNode(),r=this.get("editController");r.alignInsertPoints(a),r.setInsertMarkerLayout(a),o.Lang.isValue(this.get("dialog"))&&this._registerTimer(o.later(500,this,function(){r.updateInsertMarkerConstrainNode(this.get("dialog").zIndex+1)}))},_replugImageLoader:function(){this.get("contentBox").all("img").each(function(a){if(a.hasPlugin(o.Squarespace.Loader2.NS)){var r=a.getAttribute("src");(!o.Lang.isValue(r)||r.length===0)&&(a.unplug(o.Squarespace.Loader2),a.plug(o.Squarespace.Loader2))}})},CONTENT_TEMPLATE:'<div><div class="sqs-layout-error-container"></div><div class="sqs-layout-wrapper"><div class="sqs-layout-scroll"><div class="sqs-layout"></div></div><button class="add-block" tabindex="-1"></button></div></div>'},{CSS_PREFIX:"sqs-dialog-layout-wrapper",ATTRS:{data:{lazyAdd:!1,setter:"_setData",getter:"_getData"},dialog:{getter:function(a){return o.Object.isEmpty(a)?this.get("panel"):a}},editController:{getter:function(){var a=o.Squarespace.LayoutEngine.EditController.getInstance();return a.set("supportsRedirectsInBlockEditor",this.get("supportsRedirectsInBlockEditor")),a}},contentItem:{value:null},panel:{value:null},scroll:{value:!1},hideNodeExpander:{value:!1},supportsRedirectsInBlockEditor:{value:!0},hasSiteCssParseError:{value:!1}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-block-editor-dialog","squarespace-dialog","squarespace-dialog-field-2","squarespace-layout-engine-edit-controller","squarespace-image-loader","@sqs/layout-engine/layout-builder","@sqs/layout-engine/events","@sqs/layout-engine/models-layout","squarespace-plugin-loading-overlay","squarespace-plugin-node-expander","squarespace-plugin-scroll-lock","squarespace-util-authenticated","widget-position-align"]})},542884:function(c,b,t){"use strict";var l=t(714487),d=t(210750),o=t.n(d),e=t(823268),a=t.n(e);YUI.add("squarespace-dialog-map",function(r){var s=13,n=function(u){u.stopPropagation()};r.namespace("Squarespace.DialogFields");var i=r.Squarespace.DialogFields.Map=r.Base.create("dialogMap",r.Squarespace.DialogField2,[],{initializer:function(u){u.googleTrackingContext&&(this.googleTrackingContext=u.googleTrackingContext),u.panel&&(this.panel=u.panel)},destructor:function(){this.geocodeAndUpdateAddress.flush(),this._locker&&this._locker.cancel(),this._autocomplete&&(this._autocomplete.destroy(),this._autocomplete=null)},renderUI:function(){i.superclass.renderUI.call(this),this.get("anchorMap")?this._mapDisplay=this.panel.getAnchorEl():(this._initMapEl(),this.show()),this._renderGoogleAutoComplete()},bindUI:function(){i.superclass.bindUI.call(this);var u=this.get("contentBox"),h=u.one(".map-address-fields").all(".field-input");h.each(function(p){p.on("keyup",this._updateDataBasedOn,this),p.on("focus",this._updateDataAfterBlur,this)},this),u.on("click",n),this._mapDisplay.on("click",n);var g=this.get("dialog")||this.get("panel");r.Lang.isValue(g)&&(this._rerenderHandler=g.after("tab-focused",function(p){this.map&&this._drawMap()},this)),this._bindGoogleAutoComplete()},_renderGoogleAutoComplete:function(){var u=r.Squarespace.Damask.ContextGlobals.fromTop("Y"),h=this.get("boundingBox");this._autocomplete=new u.Squarespace.Widgets.GooglePlacesAutocomplete({inputNode:h.one("input.map-address-line1"),className:"sqs-dialog-map-google-autocomplete",googleTrackingContext:this.googleTrackingContext||{}});var g=h.ancestor(".standard-dialog-wrapper")||r.one("body");this._autocomplete.render(g),this._autocomplete.get("boundingBox").setStyle("zIndex",r.Squarespace.DIALOG_ZINDEX_BASE+10)},_bindGoogleAutoComplete:function(){this._lockedForAutocomplete=!1,this._autocomplete.on("listMouseDown",function(){this._lockedForAutocomplete=!0,this._locker=r.later(1e3,this,function(){this._lockedForAutocomplete=!1},this)},this),this._autocomplete.on("keyboardContinue",function(){this._lockedForAutocomplete=!0},this),this._autocomplete.on("select",function(){this._lockedForAutocomplete=!0},this),this._autocomplete.on("placeDetails",this._populateFieldsFromAutocomplete,this)},_initMapEl:function(){this._mapDisplay=r.Node.create('<div class="field-map"><div class="field-map-inner">'+(0,l.t)("Use the field above to select a location.",null,{project:"scripts-v6.dialog"})+"</div></div>"),this.get("contentBox").one(".field-wrapper").append(this._mapDisplay),this.get("height")&&this._mapDisplay.setStyle("height",this.get("height"))},_updateDataAfterBlur:function(u){u.target&&u.target.once("blur",this._updateDataBasedOn,this)},_populateFieldsFromAutocomplete:function(u){var h=this.get("contentBox"),g=h.one(".map-address-line2");h.one(".map-address-line1").set("value",u.place.address),g.set("value",u.place.fullLocality),h.one(".map-address-country").set("value",u.place.country),this._lockedForAutocomplete=!1;var p;if(this.get("showTitle")){var f=h.one(".map-address-title");f.focus(),p=f.get("value")}else g.focus(),p=this.get("data").title;var m={addressTitle:p,addressLine1:u.place.address,addressLine2:u.place.fullLocality,addressCountry:u.place.country,markerLat:this.map.center.lat(),markerLng:this.map.center.lng()};this.didDataChange(m)&&(this.set("data",m,{silent:!0}),this.geocodeAndUpdateAddress())},_updateDataBasedOn:function(u){if(!this._lockedForAutocomplete&&(u.type==="blur"||u.keyCode&&u.keyCode===s)){var h=this.get("contentBox"),g={addressLine1:h.one(".map-address-line1").get("value"),addressLine2:h.one(".map-address-line2").get("value"),addressCountry:h.one(".map-address-country").get("value")};if(this.get("showTitle")&&(g.addressTitle=h.one(".map-address-title").get("value")),u.keyCode&&(g.markerLat=this.map.center.lat(),g.markerLng=this.map.center.lng()),!this.didDataChange(g))return;this.set("data",r.merge(this.get("data"),g),{silent:!0}),this.geocodeAndUpdateAddress()}},_clearLatLngData:function(u){return u=r.Lang.isValue(u)?u:this.get("data"),delete u.markerLat,delete u.markerLng,delete u.mapLat,delete u.mapLng,u},geocodeAndUpdateAddress:o()(function(){var u=this.get("data"),h=this.getSearchableAddress(u);if(r.Lang.isValue(h)){var g={address:h},p=function(f,m){if(m===this.GMaps.GeocoderStatus.OK){var _=f[0].geometry.location,v=_.lat(),E=_.lng(),S={mapLat:v,mapLng:E};S.markerLat=v,S.markerLng=E,this._updateMap({markerLatLng:r.Lang.isValue(S.markerLat)?_:null,mapCenterLatLng:_,mapOnlyUpdate:!0}),this.set("data",r.merge(u,S))}else this.showMessageForGeocoderStatus(m);r.Lang.isValue(this.panel)&&this.panel.fire("geocode",this)};this._geocoder.geocode(g,r.bind(p,this))}},120),show:function(){this.set("visible",!0),this._showMap()},_showMap:function(){this.mapView?this._refreshMapAndCenter():this.get("anchorMap")&&!this._mapDisplay.__view?this._mapDisplay.on("map-ready",function(u){this._drawMap()},this):this._drawMap()},_refreshMapAndCenter:function(){this._mapDisplay.setStyle("display","block"),this.mapView&&this.mapView.centerMarker()},_drawMap:function(){if(!this.get("destroyed"))if(this.get("anchorMap"))this.mapView=this._mapDisplay.__view,this._prepareMap();else{var u=r.merge(this.get("defaultLocation"),this.get("data")),h={disableDefaultUI:!1,showControls:!0,scrollwheel:this.get("scrollwheelEnabled"),linkOnClick:!1};a().createView(h,u,this._mapDisplay.getDOMNode()).then(r.bind(function(g){this.mapView=g,this._prepareMap()},this)).catch(function(g){console.error(g)})}},_prepareMap:function(){this.map=this.mapView.map,this.GMaps=this.mapView.GMaps,this._geocoder=new this.GMaps.Geocoder,this.marker=this.mapView.marker,this.mapView.updateUIOptions({markerDraggable:!0}),this.GMaps.event.addListener(this.map,"idle",r.bind(this._updateDataFromGoogleMaps,this)),this.GMaps.event.addListener(this.map,"dblclick",r.bind(this._updateMarker,this)),this.bindMarkerDragEvent(),this._mapDisplay.on("marker-created",this.bindMarkerDragEvent,this),this._setInitialState()},_updateMarker:function(u){r.Lang.isValue(u.latLng)&&this._updateMap({markerLatLng:u.latLng})},_updateDataFromGoogleMaps:function(){var u,h=this.map,g=this.marker,p={};r.Lang.isNumber(h.center.lat())&&r.Lang.isNumber(h.center.lng())&&(p.mapLat=h.center.lat(),p.mapLng=h.center.lng(),p.mapZoom=h.getZoom()),g&&g.visible&&(p.markerLat=g.getPosition().lat(),p.markerLng=g.getPosition().lng()),this.didDataChange(p)&&(u=r.merge(this.get("data"),p),this.set("data",u,{silent:!0}))},_updateMap:function(u){this._mapDisplay.ancestor(".sqs-block",!0)||this.map&&(r.Lang.isValue(u.markerLatLng)&&this._setMarkerPosition(u.markerLatLng,u.mapOnlyUpdate),!r.Lang.isUndefined(u.mapCenterLatLng)&&!this.isContainedInMap(this.map,u.markerLatLng)&&this._setMapPosition(u.mapCenterLatLng,u.zoom))},_setMapPosition:function(u,h){r.Lang.isValue(u)&&this.mapView.updateCenter(u.lat(),u.lng()),r.Lang.isValue(h)&&this.mapView.setZoom(h)},_setMarkerPosition:function(u,h){this.mapView.updateMarker(u.lat(),u.lng()),h||this._onMarkerChange()},bindMarkerDragEvent:function(){if(this.marker||(this.marker=this.mapView.marker),this.marker){var u=this.GMaps;r.Lang.isUndefined(this.markerDragListener)||u.event.removeListener(this.markerDragListener),this.markerDragListener=u.event.addListener(this.marker,"dragend",r.bind(this._onMarkerChange,this))}},isContainedInMap:function(u,h){if(r.Lang.isValue(u)&&r.Lang.isValue(h)){var g=u.getBounds();if(r.Lang.isValue(g))return g.contains(h)}return!1},_onMarkerChange:function(){this._geocoder.geocode({location:this.marker.getPosition()},r.bind(function(u,h){h===this.GMaps.GeocoderStatus.OK?this.updateFormFields(u[0].address_components):this.showMessageForGeocoderStatus(h)},this))},_setInitialState:function(){var u=this.get("data"),h=this.get("contentBox");if(r.Lang.isObject(u)){if(u.addressTitle&&this.get("showTitle")&&h.one(".map-address-title").set("value",u.addressTitle),u.addressLine1&&h.one(".map-address-line1").set("value",u.addressLine1),u.addressLine2&&h.one(".map-address-line2").set("value",u.addressLine2),u.addressCountry&&h.one(".map-address-country").set("value",u.addressCountry),u.forceLoc){this.geocodeAndUpdateAddress();return}var g=this.GMaps;if(this.map&&!r.Lang.isUndefined(g)){var p,f;u.markerLat&&u.markerLng&&(p=new this.GMaps.LatLng(u.markerLat,u.markerLng)),u.mapLat&&u.mapLng&&(f=new this.GMaps.LatLng(u.mapLat,u.mapLng)),this._updateMap({markerLatLng:p,mapCenterLatLng:f,zoom:u.mapZoom,mapOnlyUpdate:!0})}}},updateFormFields:function(u){var h=this.get("contentBox"),g=this.get("data")||{},p=h.one(".map-address-line1"),f=h.one(".map-address-line2"),m=h.one(".map-address-country"),_,v,E,S,y,C,O=[],A=[];if(r.Object.each(u,function(B){if(B.types.indexOf("locality")!==-1){v=B.short_name;return}if(B.types.indexOf("administrative_area_level_1")!==-1){E=B.short_name;return}if(B.types.indexOf("country")!==-1){_=B.long_name;return}if(B.types.indexOf("route")!==-1){y=B.short_name;return}if(B.types.indexOf("street_number")!==-1){S=B.short_name;return}B.types.indexOf("postal_code")!==-1&&(C=B.short_name)},this),S&&O.push(S),y&&O.push(y),v&&A.push(v),E&&A.push(E),C&&A.push(C),p&&(p.set("value",O.join(" ")),g.addressLine1=p.get("value")),f&&(f.set("value",A.join(", ")),g.addressLine2=f.get("value")),m&&(m.set("value",_),g.addressCountry=m.get("value")),r.Lang.isValue(this.marker)){var I=this.marker.getPosition().lng(),D=this.marker.getPosition().lat(),T={markerLat:D,markerLng:I,mapLat:D,mapLng:I};g=r.merge(g,T)}this.set("data",g)},showMessageForGeocoderStatus:function(u){var h=this.GMaps;u===h.GeocoderStatus.OVER_QUERY_LIMIT?new r.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Too Many Queries",null,{project:"scripts-v6.dialog"}),"strings.message":(0,l.t)("You have exceeded Google Maps' maximum query rate. Please wait a moment before resuming.",null,{project:"scripts-v6.dialog"})}):u!==h.GeocoderStatus.ZERO_RESULTS&&new r.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Lookup Failed",null,{project:"scripts-v6.dialog"}),"strings.message":(0,l.t)("Address lookup was not successful: {geocodeStatus}",{geocodeStatus:status},{project:"scripts-v6.dialog"})})},getSearchableAddress:function(u){var h=[];return u.addressLine1!==""&&h.push(u.addressLine1),u.addressLine2!==""&&h.push(u.addressLine2),u.addressTitle!==""&&!h.length&&h.unshift(u.addressTitle),u.addressCountry!==""&&h.push(u.addressCountry),h.join(", ")},_roundedEqual:function(u,h){return r.Lang.isNumber(u)&&r.Lang.isNumber(h)&&Number(u).toFixed(6)===Number(h).toFixed(6)},didDataChange:function(u){var h=(u?this.get("data"):this._initialData)||{},g=u||this.get("data"),p=this.get("defaultLocation");return r.Lang.isObject(g)?r.Object.some(g,function(f,m){var _=h[m],v=f===h[m]||this._roundedEqual(f,_);if(v)return!1;var E=!r.Object.hasKey(p,m),S=r.Lang.isValue(_),y=this._roundedEqual(f,p[m]);return E||!(y&&S)},this):!1}},{CSS_PREFIX:"sqs-maps",HANDLEBARS_TEMPLATE:"dialog-map.html",ATTRS:{anchorMap:{},scrollwheelEnabled:{value:!0},data:{setter:o()(function(u){return u},100,{leading:!0,trailing:!0})},defaultLocation:{valueFn:function(){var u={mapLat:40.7207559,mapLng:-74.0007613,mapZoom:12};if(Static.SQUARESPACE_CONTEXT){var h=Static.SQUARESPACE_CONTEXT.website;h&&h.location&&(u=r.merge(u,h.location))}return u}},strings:{value:{placeholderAddressTitle:(0,l.t)("Business Name",null,{project:"scripts-v6.dialog"}),placeholderAddress1:(0,l.t)("Address",null,{project:"scripts-v6.dialog"}),placeholderAddress2:(0,l.t)("City, State, Zip",null,{project:"scripts-v6.dialog"}),placeholderAddressCountry:(0,l.t)("Country",null,{project:"scripts-v6.dialog"})}},showTitle:{value:!0,validator:r.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-damask-context-globals","squarespace-dialog","squarespace-dialog-field-2","squarespace-dialog-map-template","squarespace-util","squarespace-widgets-alert","squarespace-widgets-google-places-autocomplete"]})},816224:function(){YUI.add("squarespace-dialog-money-text",function(c){c.namespace("Squarespace.DialogFields");var b=c.Squarespace.DialogFields.MoneyText=c.Base.create("moneyText",c.Squarespace.DialogFields.Text,[],{renderUI:function(){b.superclass.renderUI.call(this),this.get("contentBox").one("input").plug(c.Squarespace.Plugin.MoneyFormatter)},bindUI:function(){var t=this.get("contentBox").one("input");t.on("valuechange",function(){this.set("data",t.moneyFormatterPlugin.get("data"))},this)}},{CSS_PREFIX:"sqs-money-text",LABEL_CONFIG:{forNode:"input[type]"},ATTRS:{data:{value:0,validator:c.Lang.isNumber},validator:{value:c.Lang.isNumber}}})},"1.0",{requires:["base","squarespace-commerce-utils","squarespace-dialog-text","squarespace-plugin-money-formatter"]})},293922:function(){YUI.add("squarespace-dialog-multi-frame",function(c){var b=c.namespace("Squarespace.DialogFields").MultiFrame=c.Base.create("multiFrame",c.Squarespace.DialogField2,[],{initializer:function(){this.get("data")||this.set("data",this.get("frames")[0])},destructor:function(){this._frameWrapper=null},renderUI:function(){b.superclass.renderUI.call(this),this._frameWrapper=c.Node.create('<div class="multi-frame-wrapper"></div>'),this.get("contentBox").append(this._frameWrapper),this.get("frames").forEach(this._renderFrameAndChildFields,this),this.get("variableHeight")&&this.get("boundingBox").addClass("variable-height")},syncUI:function(){if(b.superclass.syncUI.call(this),this._syncFrameSize(),this._syncVisibleFrame(),this.get("rendered")?this._syncAnimateClass():c.soon(this._syncAnimateClass.bind(this)),this.get("variableHeight")){var t=this.get("contentBox").one('[data-name="'+this.get("data")+'"]'),l=t.get("offsetHeight");this.set("height",l)}},_renderFrameAndChildFields:function(t){var l=c.Node.create('<div class="frame" data-name="'+t.name+'"></div>');l.appendTo(this._frameWrapper),t.fields.forEach(this._renderField.bind(this,l))},_renderField:function(t,l){var d=c.merge(l.config,{render:t,childType:l.ctor}),o=this.get("dialog");o&&(d.dialog=o,d.data=o.params.initialData[d.name]),this.add(d)},_syncAnimateClass:function(){this._frameWrapper.toggleClass("animate-switch",this.get("animate"))},_syncFrameSize:function(){this._frameWrapper.setAttribute("data-frame-size",this.get("frames").length)},_syncVisibleFrame:function(){this._frameWrapper.setAttribute("data-frame-visible-index",this._getFrameIndex(this.get("data")))},switchFrames:function(t){this.set("data",t),this._syncVisibleFrame()},getField:function(t){var l;return this.each(function(d){d.get("name")===t&&(l=d)},this),l},_getFrameIndex:function(t){for(var l=this.get("frames"),d=0;d<l.length;d++)if(l[d].name===t)return d}},{CSS_PREFIX:"sqs-multi-frame",ATTRS:{variableHeight:{value:!1},animate:{value:!0},frames:{value:null},readOnly:{value:!0}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]})},617598:function(c,b,t){"use strict";var l=t(273564);YUI.add("squarespace-dialog-multi-option",function(d){var o=d.namespace("Squarespace.DialogFields").MultiOption=d.Base.create("multiOption",d.Squarespace.DialogField2,[],{initializer:function(e){!this.get("data")&&!d.Lang.isUndefined(e.defaultValue)&&this.set("data",e.defaultValue),this._selectedOptionEl=null,this.publish("option-click",{broadcast:2}),this.on("dataChange",function(a){this.selectOption(a.newVal)})},renderUI:function(){o.superclass.renderUI.call(this),this._renderTitle(),this._renderOptions()},bindUI:function(){this._registerEvent(this.get("contentBox").delegate("click",this._onOptionClick,".option",this)),this.after("optionsChange",this._renderOptions),this.after("optionsChange",this.syncUI),this.after("stringsChange",this._renderTitle)},syncUI:function(){o.superclass.syncUI.call(this),this._setupOptionWidths(),this._setHeight()},selectOption:function(e){this.get("contentBox").all(".option").each(function(a){e&&this._optionMatchesData(a,e)&&this._selectOption(a)},this)},_renderTitle:function(){var e=this.get("strings.title"),a=this.get("contentBox"),r=a.one(".title");e&&d.Lang.isNull(r)?a.append(d.Node.create('<div class="title">'+this.get("strings.title")+"</div>")):e?r.empty().setHTML(this.get("strings.title")):!e&&!d.Lang.isNull(r)&&r.remove(!0)},_renderOptions:function(){var e=this.get("contentBox"),a=this.get("options");e.all(".option").remove(),d.Array.each(a,function(r){if(r.section){e.append(d.Node.create('<div class="option-label">'+r.section+"</div>"));return}var s=d.Node.create(d.Lang.sub('<div class="option" data-value="{value}" data-test="MultiOption {value}"><div class="option-content"><div class="option-title">{title}</div></div></div>',r));s.setData(r);var n=s.one(".option-content"),i=r.description;i&&n.append(d.Node.create('<div class="option-description">'+i+"</div>")),r.childNode instanceof d.Node&&n.append(r.childNode),r.icon?s.addClass("icon-"+r.icon):s.addClass("no-icon"),e.append(s),this._optionMatchesData(s)&&this._markSelected(s),r.locked&&s.addClass("locked"),r.upsellLocked&&(typeof r.upsellInfo!="object"&&(r.upsellInfo={}),s.addClass("upsell-locked"),s.one(".option-title").insert('<span class="option-logo"></span>',"after"),this._registerEvent(s.on("click",function(){s.one(".option-logo button").getDOMNode().click()})),r.renderNewUpsellLogo?(0,l.renderLogo)({node:s.one(".option-logo").getDOMNode(),analyticsId:"commerce-add-shipping-option",featureGateClass:".sqs-featuregate-logo",upsellCopyOverrides:r.upsellInfo,renderNewLogo:!0}):(0,l.renderLogo)({node:s.one(".option-logo").getDOMNode(),analyticsId:"commerce-add-product",featureGateClass:".sqs-featuregate-logo",upsellCopyOverrides:r.upsellInfo}))},this)},_setHeight:function(){var e=this.get("contentBox"),a=this.get("options"),r=e.one(".option");if(r){var s=parseFloat(r.getComputedStyle("height")),n=parseFloat(r.getComputedStyle("paddingTop"))+parseFloat(r.getComputedStyle("paddingBottom")),i=this.get("columns")||a.length,u=Math.ceil(a.length/i);e.setStyle("height",Math.ceil((s+n)*u))}},_selectOptions:function(){this.get("contentBox").all(".option").each(function(e){this._optionMatchesData(e)&&this._selectOption(e)},this)},_optionMatchesData:function(e,a){d.Lang.isUndefined(a)&&(a=this.get("data"));var r=e.getData("value");return this.get("numeric")?a===d.Number.parse(r):(d.Lang.isObject(r)&&d.Lang.isObject(a),a===r)},_onOptionClick:function(e){var a=e.target.hasClass("option")?e.target:e.target.ancestor(".option"),r=this.get("optionClickCb");!a.hasClass("upsell-locked")&&!a.hasClass("locked")&&(e.halt(),this._selectOption(a)),d.Lang.isFunction(r)&&r(this.get("data")),this.fire("option-click",{option:this.get("data")})},_markSelected:function(e){e!==this._selectedOptionEl&&(this._selectedOptionEl&&this._selectedOptionEl.removeClass("selected"),e.addClass("selected"),this._selectedOptionEl=e)},_selectOption:function(e){if(e!==this._selectedOptionEl){this._markSelected(e);var a=e.getData("value");if(this.get("numeric")){var r=d.Number.parse(a);d.Lang.isNumber(r)&&(a=r)}if(this.set("data",a),this.get("submitOnSelect")){var s=this.get("dialog");d.Lang.isValue(s)&&s.saveAndClose()}}},_setupOptionWidths:function(){var e=this.get("columns")||this.get("options").length;parseInt(e,10)>0&&this.get("boundingBox").addClass(this.getClassName("columns-"+e))}},{CSS_PREFIX:"sqs-multi-option",ATTRS:{data:{setter:function(e){return this.get("numeric")?d.Number.parse(e):e}},options:{value:null},optionClickCb:{value:null,setter:function(e){return d.Lang.isFunction(e)?e:null}},submitOnSelect:{value:!1},columns:{value:null},numeric:{value:!1,validator:d.Lang.isBoolean},readOnly:{value:!0}}})},"1.0",{requires:["base","datatype-number-parse","squarespace-dialog-field-2"]})},304635:function(){YUI.add("squarespace-dialog-music-track-list",function(c){var b=c.namespace("Squarespace.DialogFields").TrackList=c.Base.create("TrackList",c.Squarespace.DialogField2,[],{initializer:function(t){b.superclass.initializer.apply(this,arguments),this._initalizeTrackList(),this.after("dataChange",this._initalizeTrackList,this)},destructor:function(){this._trackList&&(this._trackList.destroy(),this._trackList=null)},renderUI:function(){b.superclass.renderUI.apply(this,arguments),this._trackList.render(this.get("contentBox"))},bindUI:function(){b.superclass.bindUI.apply(this,arguments),this.after("dataChange",function(t){this._trackList.set("collection",t.newVal)}),this.after("uploadPreflightChange",function(t){this._trackList.set("uploadPreflight",t.newVal)})},syncUI:function(){b.superclass.syncUI.apply(this,arguments)},_initalizeTrackList:function(){this._trackList&&this._trackList.destroy();var t=this.get("data");c.Lang.isNull(t),this._trackList=new c.Squarespace.Widgets.MusicAlbums.ListView({collection:t,items:t.items,stickyHeadersEnabled:!1,uploadPreflight:this.get("uploadPreflight"),spinnerColor:this.get("spinnerColor")})},didDataChange:function(){return!0}},{CSS_PREFIX:"sqs-music-track-list-field",ATTRS:{data:{validator:c.Squarespace.AttrValidators.isInstanceOf(c.Squarespace.Models.ContentCollection)},spinnerColor:{valueFn:function(){return"dark"}},uploadPreflight:{valueFn:function(){return c.bind(function(t){this.get("data").save({},t)},this)}},cloneInitialData:{value:!1}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-models-content-collection","squarespace-util","squarespace-widgets-music-albums-list-view"]})},899028:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-dialog-numeric-text",function(d){var o=d.Squarespace.DialogFields.NumericText=d.Base.create("numericText",d.Squarespace.DialogFields.Text,[],{renderUI:function(){o.superclass.renderUI.call(this),this.get("contentBox").one("input").plug(d.Squarespace.Plugin.NumericFormatter,{displayFormatter:this.get("displayFormatter")})},bindUI:function(){o.superclass.bindUI.call(this);var e=this.get("contentBox").one("input");e.on("valuechange",function(){this.set("data",e.numericFormatterPlugin.get("data"))},this)},getErrors:function(){return this.get("validator")(this.get("data"))?[]:[this.get("strings.validationFailMessage")]}},{CSS_PREFIX:"sqs-numeric-text",LABEL_CONFIG:{forNode:"input[type]"},ATTRS:{strings:{value:{validationFailMessage:(0,l.t)("This must be numeric.",null,{project:"scripts-v6.dialog"})}},displayFormatter:{validator:d.Lang.isFunction,value:function(e){return e}},validator:{value:d.Lang.isNumber},data:{value:0,validator:d.Lang.isNumber}}})},"1.0",{requires:["base","squarespace-dialog-text","squarespace-plugin-numeric-formatter"]})},587861:function(c,b,t){"use strict";var l=t(210750),d=t.n(l),o=t(714487),e=t(659519),a=t(759352);YUI.add("squarespace-dialog-oembed",function(r){var s=r.namespace("Squarespace.DialogFields").Oembed=r.Base.create("oembed",r.Squarespace.DialogField2,[],{destructor:function(){this._onChange.cancel(),this._pendingTracking&&r.config.win.clearTimeout(this._pendingTracking)},renderUI:function(){s.superclass.renderUI.call(this);var n=this.get("contentBox");this._input=n.one(".input"),this._manual=n.one(".manual"),this._status=n.one(".status"),this._updateStatus(!0)},bindUI:function(){this._input.on("contextmenu",function(n){n.stopImmediatePropagation()}),this._input.after("valuechange",this._onChange,this),this._manual&&this._manual.on("click",this._setManually,this)},syncUI:function(){s.superclass.syncUI.call(this);var n=r.Lang.isValue(this.get("strings.title"))&&this.get("strings.title").length>0;this.get("boundingBox").toggleClass("has-title",n)},focus:function(){this._input.focus()},didDataChange:function(){return this.get("edited")},_getEmbedModelJSON:function(n){var i={url:"",html:"",resolveObject:"",resolvedBy:"",resolved:!1};return n?r.merge(i,n):i},_updateStatus:function(n,i){if(this.get("data.resolvedBy")==="manual"){this._input.set("value",""),this._setStatus(!1,(0,o.t)("Embed data has been manually set.",null,{project:"scripts-v6.dialog"}));return}var u;n?(u=this.get("data.url"),this.set("lastUrl",this.get("data.url"))):u=this.get("processingUrl"),u?this.get("data.resolved")||this.get("data.resolvedBy")?this._setStatus(!1,""):r.Lang.isString(i)?this._setStatus(!1,i):this._setStatus(!1,(0,o.t)("URL is not embeddable.",null,{project:"scripts-v6.dialog"})):this._setStatus(!1,this.get("strings.description"))},_queueTrackFailure:function(n){var i=this.get("filter");this._pendingTracking&&r.config.win.clearTimeout(this._pendingTracking),this._pendingTracking=r.config.win.setTimeout((function(){var u=r.Object.some(r.Squarespace.oEmbedResolvers,function(h){return h.canProcess(n,i)});u||(0,e.Z)("oembed_resolution_failure",{url:n}),this._pendingTracking=null}).bind(this),1e3)},_onChange:d()(function(){var i=this._input.get("value");if(i!==this.get("lastUrl")){if(this.set("processingUrl",i),this.set("lastUrl",this.get("processingUrl")),this.set("edited",!0),this.get("processingUrl")===""){this._clear(),this._updateStatus();return}var u=this.get("processingUrl");if(u.search(/^https?:\/\//)!==0&&(u="http://"+u.replace(/^\/\//,"")),!(0,a.Iv)(u)){this._clear(),this._updateStatus();return}var h=function(_,v,E){if(E!==u){this._clear(_),this._updateStatus();return}if(!v){this._clear(_),this._updateStatus(),this._sendAnalyticsInfo("Empty",E);return}this.set("data",r.merge(this.get("data"),v)),this._updateStatus(),this._sendAnalyticsInfo("Success",E)},g=function(_,v,E){this._clear(_),this._updateStatus(),this._sendAnalyticsInfo("Failure",E)},p=function(_,v,E){this._clear(_),this._updateStatus(null,(0,o.t)("The request to resolve this URL timed out, please try again.",null,{project:"scripts-v6.dialog"})+" "),this._sendAnalyticsInfo("Timeout",E)},f=function(_,v){this._setStatus(!0,(0,o.t)("Locating content at that URL\u2026",null,{project:"scripts-v6.dialog"}));var E=_.getProvider();_.process(v,{onSuccess:h.bind(this,E),onFailure:g.bind(this,E),onTimeout:p.bind(this,E)},this)},m=r.Object.some(r.Squarespace.oEmbedResolvers,function(_){if(_.canProcess(u,this.get("filter")))return f.call(this,_,u),!0},this);if(!m){this._queueTrackFailure(u),f.call(this,r.Squarespace.oEmbedResolversGeneric,u);return}this._clear()}},100),_sendAnalyticsInfo:function(n,i){(0,e.Z)("system_oembed",{result:n,url:i})},_setStatus:function(n,i){this._status.empty(!0),n&&new r.Squarespace.Spinner({render:this._status,color:"dark"}),this._status.append(r.Node.create(i))},_setManually:function(){var n=new r.Squarespace.EditingDialog({style:"flyout",name:"edit-embed",closeOthers:!1,overlay:.5,width:460,buttons:[{type:"cancel",title:(0,o.t)("Cancel",null,{project:"scripts-v6.dialog"})},{type:"saveAndClose",title:(0,o.t)("Set",null,{project:"scripts-v6.dialog"})}],primaryTabs:[{title:(0,o.t)("Embed Data",null,{project:"scripts-v6.dialog"}),icon:"/universal/images-v6/icons/icon-embed-16-light-solid.png",fields:[{ctor:r.Squarespace.DialogFields.TextArea,config:{name:"html","strings.placeholder":(0,o.t)("Paste a custom embed code here.",null,{project:"scripts-v6.dialog"}),height:200}}]}]});n.on("send-requested",function(){var i={html:n.getData().html,resolvedBy:"manual",resolved:!0};this.set("data",i),this.set("lastUrl",null),this.set("edited",!0),this._updateStatus(),n.close()},this),this.get("data.resolvedBy")==="manual"&&n.setInitialData({html:this.get("data.html")}),this.get("dialog")&&this.get("dialog").addChildDialog(n),r.later(0,this,function(){n.show()})},_clear:function(n){var i={url:this._input.get("value")};n&&(i.resolvedBy=n),this.set("data",this._getEmbedModelJSON(i))}},{CSS_PREFIX:"sqs-oembed",HANDLEBARS_TEMPLATE:"dialog-oembed.html",ASYNC_DATA:!0,ATTRS:{strings:{value:{title:"",description:"",inputPlaceholder:(0,o.t)("Enter an embeddable URL here",null,{project:"scripts-v6.dialog"})}},collection:{value:null},contentItem:{value:null},data:{value:{}},edited:{value:!1},filter:{},item:{value:null},lastUrl:{value:null},manual:{value:!0},processingUrl:{value:null}}})},"1.0",{requires:["base","event-valuechange","squarespace-dialog","squarespace-dialog-check","squarespace-dialog-field-2","squarespace-dialog-file-image","squarespace-dialog-oembed-template","squarespace-job-manager","squarespace-jobs","squarespace-oembed-resolvers","squarespace-spinner","squarespace-util"]})},623022:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-dialog-pinterest-meta-data",function(d){var o=d.namespace("Squarespace.DialogFields").PinterestMetaData=d.Base.create("pinterestMetaData",d.Squarespace.DialogField2,[],{initializer:function(e){var a=this.get("boards"),r=this.add({childType:d.Squarespace.DialogFields.Select,"strings.title":(0,l.t)("Push Target",null,{project:"scripts-v6.dialog"}),"strings.placeholder":(0,l.t)("Select Board",null,{project:"scripts-v6.dialog"}),"strings.description":(0,l.t)("Select the board to which Pins will be pushed. If you don't yet have a board you can create one on Pinterest and reconnect your account.",null,{project:"scripts-v6.dialog"}),name:"boards",options:a,data:e.data.selectedBoardId,className:"thin dark"});this._pushTargetSelect=r.item(0),d.after(this._setupErrorFlyoutAnchor,this,"renderUI")},bindUI:function(){this.on("dataChange",this.syncUI),this.on("select:dataChange",function(e){var a=this.get("data");e.newVal?a.selectedBoardId=e.newVal:delete a.selectedBoardId,this.set("data",a)},this)},didDataChange:function(){var e=this._initialData,a=this.get("data");return e.selectedBoardId!==a.selectedBoardId},_setupErrorFlyoutAnchor:function(){this._set("errorFlyoutAnchor",this._pushTargetSelect.get("boundingBox").one(".select-facade"))},showError:function(e){o.superclass.showError.call(this,(0,l.t)("Select a Pinterest board to push content to.",null,{project:"scripts-v6.dialog"}))},isEmpty:function(){var e=this.get("data");return e.boardConnections.length>0&&!e.selectedBoardId}},{CSS_PREFIX:"sqs-pinterest-metadata",ATTRS:{data:{value:{},setter:function(e){d.Array.each(e.boardConnections,function(a){a.selected=a.id===e.selectedBoardId})}},boards:{}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-select"]})},749053:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-dialog-pricing-placeholder",function(d){d.namespace("Squarespace");var o=d.namespace("Squarespace.DialogFields").PricingPlaceholder=d.Base.create("pricingPlaceholder",d.Squarespace.DialogField2,[],{initializer:function(){},renderUI:function(){if(o.superclass.renderUI.call(this),this.get("boundingBox").addClass("field-wrapper").addClass("major"),this.get("contentBox").one(".placeholder").plug(d.Squarespace.Plugin.PulseWarn,{iterations:1,color:"#C1B12E"}),this.get("data.variants")&&this.get("data.variants").length===0){var e={sku:d.Squarespace.Commerce.generateSKU(),price:0,salePrice:0,onSale:!1,qtyInStock:1,len:0,width:0,height:0,attributes:{}};this.get("data").variants.push(e)}this._edited=!1},bindUI:function(){this.get("contentBox").on("click",function(){this.fire("clicked")},this),this.after("dataChange",function(){this._edited=!0,this.syncUI()},this)},syncUI:function(){var e={structuredContent:this.get("data")};this.get("contentBox").one(".pricing").empty().setHTML(d.Squarespace.Commerce.priceString(e))},didDataChange:function(){return this._edited},pulseWarn:function(){this.get("contentBox").one(".placeholder").pulseWarn.warn()}},{CSS_PREFIX:"sqs-pricing-placeholder",HANDLEBARS_TEMPLATE:"dialog-pricing-placeholder.html",ATTRS:{strings:{value:{prompt:(0,l.t)("Edit",null,{project:"scripts-v6.dialog"})}}}})},"1.0",{requires:["base","json","squarespace-animations","squarespace-commerce-utils","squarespace-damask-panel-mixin-pusher","squarespace-dialog-field-2","squarespace-dialog-pricing-placeholder-template","squarespace-hb-product-price-string","squarespace-hb-product-types","squarespace-plugin-pulsewarn","squarespace-util-authenticated"]})},776875:function(){YUI.add("squarespace-dialog-radio",function(c){c.namespace("Squarespace.DialogFields");var b=c.Squarespace.DialogFields.Radio=c.Base.create("Radio",c.Squarespace.DialogFields.SelectBase,[],{bindUI:function(){b.superclass.bindUI.call(this),this.get("contentBox").delegate("click",function(t){this.set("data",t.target.get("value"))},'input[type="radio"]',this)},_createOptionGroupNode:function(t){return c.Node.create('<div class="option-group"><div class="option-group-label">'+t.label+"</div></div>")},_createOptionNode:function(t){var l=c.Lang.sub('<input id="{id}" type="radio" name="{name}" value="{value}"><label for="{id}">{label}</label>',{id:c.guid(),name:this.get("name"),value:t.value,label:t.label}),d=c.Node.create('<div class="option">'+l+"</div>");return t.disabled&&d.setAttribute("disabled","disabled"),d},_updateSelectedOption:function(){var t=this.get("data");if(c.Lang.isValue(t)){var l=this.get("contentBox").all('input[type="radio"]');l.each(function(d){d.get("value")===t.toString()&&(d.getDOMNode().checked=!0)})}}},{CSS_PREFIX:"sqs-radio",ATTRS:{}})},"1.0",{requires:["base","node","squarespace-dialog-select-base"]})},716629:function(){YUI.add("squarespace-dialog-select-base",function(c){c.namespace("Squarespace.DialogFields");var b=c.Squarespace.DialogFields.SelectBase=c.Base.create("SelectBase",c.Squarespace.DialogField2,[],{initializer:function(t){var l=t.defaultValue;!c.Lang.isValue(t.data)&&c.Lang.isValue(l)&&this.set("data",l)},renderUI:function(){b.superclass.renderUI.call(this),this._renderOptions()},bindUI:function(){b.superclass.bindUI.call(this),this.after("optionsChange",this._renderOptions)},syncUI:function(){b.superclass.syncUI.call(this),this._updateSelectedOption()},_renderOptions:function(){this.get("defaultOptionContainer").empty(),c.Array.each(this.get("options"),function(t){this._isOptionGroup(t)?this._renderOptionGroup(t):this._renderOption(t)},this)},_renderOptionGroup:function(t){var l=this._createOptionGroupNode(t);c.Array.each(t.options,function(d){this._renderOption(d,l)},this),this.get("defaultOptionContainer").append(l)},_createOptionGroupNode:function(t){console.warn("SelectBase: Method '_createOptionGroupNode' must be implemented.")},_renderOption:function(t,l){var d=this._createOptionNode(t);c.Lang.isValue(l)?l.append(d):this.get("defaultOptionContainer").append(d)},_createOptionNode:function(t){console.warn("SelectBase: Method '_createOptionNode' must be implemented.")},_updateSelectedOption:function(){console.warn("SelectBase: Method '_updateSelectedOption' must be implemented.")},_isOptionGroup:function(t){return c.Object.hasKey(t,"options")}},{CSS_PREFIX:"sqs-select-base",ATTRS:{data:{setter:function(t){if(this.get("numeric"))return t=parseInt(t,10),c.Lang.isNumber(t)||(t=0),t;if(c.Lang.isValue(t)){if(!c.Lang.isString(t))return t+""}else return"";return t}},numeric:{value:!1,validator:c.Squarespace.AttrValidators.isBoolean},options:{value:[],validator:c.Squarespace.AttrValidators.isArray},rawOptions:{getter:function(){var t=this.get("options");return c.Array.reduce(t,[],function(l,d){return this._isOptionGroup(d)?l.concat(d.options):(l.push(d),l)},this)}},defaultOptionContainer:{getter:function(){return this.get("contentBox")},readOnly:!0}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2"]})},65302:function(c,b,t){"use strict";var l=t(714487),d=t(347816);YUI.add("squarespace-dialog-select",function(o){o.namespace("Squarespace.DialogFields");var e=o.Squarespace.DialogFields.Select=o.Base.create("select",o.Squarespace.DialogFields.SelectBase,[],{renderUI:function(){e.superclass.renderUI.call(this);var a=this.get("contentBox"),r=this.get("autocompleteType"),s=a.one(".select-facade"),n=a.one("select");this._renderTitleAndDescription(),this._setIconClasses(this.get("icon")),this._set("errorFlyoutAnchor",s),n.setAttribute("name",this.get("name")),r&&n.setAttribute("x-autocompletetype",r);var i=this.get("dialog");o.Lang.isValue(i)&&n.setAttribute("tabindex",i.getNextTabIndex())},bindUI:function(){e.superclass.bindUI.call(this);var a=this.get("contentBox"),r=a.one(".select-facade"),s=a.one("select");this.after("optionsChange",this.syncUI,this),this._registerEvent(r.on("click",function(u){s.getAttribute("disabled")!=="disabled"&&(this.get("haltClickEvent")?u.halt():u.preventDefault(),u.target.get("tagName")!=="SELECT"&&s.simulate("mousedown"))},this)),s.after("change",function(){var u=s.get("value");u!==this.get("data")&&this.set("data",u)},this);var n=this.get("boundingBox"),i=this.getProperty("CSS_PREFIX")+"-focus";n.on("focus",function(){s.focus()},this),this._registerEvent(s.on("focus",function(){n.addClass(i)},this)),this._registerEvent(s.on("blur",function(){n.removeClass(i)},this)),this._registerEvent(s.on("keydown",function(u){u.keyCode===8&&u.halt()},this)),this.after("stringsChange",this._renderTitleAndDescription,this),this.after("iconChange",function(u){this._setIconClasses(u.newVal,u.prevVal)},this)},syncUI:function(){e.superclass.syncUI.call(this),this._updateFacadeLabel()},focus:function(){e.superclass.focus.call(this),this.get("rendered")&&this.get("contentBox").one("select").focus()},blur:function(){e.superclass.blur.call(this),this.get("rendered")&&this.get("contentBox").one("select").blur()},disable:function(){if(e.superclass.disable.call(this),this.get("rendered")){var a=this.get("contentBox").one("select"),r=this.get("boundingBox");a.setAttribute("disabled","disabled"),r.addClass(this.getProperty("CSS_PREFIX")+"-disabled")}},enable:function(){if(e.superclass.enable.call(this),this.get("rendered")){var a=this.get("contentBox").one("select"),r=this.get("boundingBox");a.removeAttribute("disabled"),r.removeClass(this.getProperty("CSS_PREFIX")+"-disabled")}},_renderTitleAndDescription:function(){var a=this.get("contentBox"),r=a.one(".title"),s=this.get("strings.title");s?r.setHTML(s):r.hide();var n=a.one(".description"),i=this.get("strings.description");i?(n.setHTML(i),n.show()):n.hide()},_setIconClasses:function(a,r){var s=this.get("contentBox").one(".select-facade"),n=o.Lang.isString(a)&&a!=="";o.Lang.isString(r)&&s.removeClass(r),n&&s.addClass(a),s.toggleClass("icon",n)},_renderOptions:function(){e.superclass._renderOptions.call(this),this.get("contentBox").one("select").set("selectedIndex",-1)},_createOptionGroupNode:function(a){var r=o.Node.create("<optgroup></optgroup>");return r.setAttribute("label",a.label),r},_createOptionNode:function(a,r){var s=o.Node.create("<option></option>");return s.setAttribute("value",a.value),s.setHTML(a.label),a.disabled&&s.setAttribute("disabled","disabled"),s},_updateSelectedOption:function(){var a=this.get("data");o.Lang.isValue(a)&&this.get("contentBox").one("select").set("value",a.toString())},_updateFacadeLabel:function(){this.hideError();var a=this.get("contentBox").one(".select-facade .label");if(a){var r=this.get("data"),s=!o.Lang.isValue(r)||r==="";a.setHTML(this._getFacadeLabel()),a.toggleClass("empty",s)}else console.warn("[dialog-select] `labelNode` does not exist")},_getFacadeLabel:function(){var a=this.get("data"),r;if(o.Lang.isValue(a)&&o.Array.some(this.get("rawOptions"),function(n,i){if(n.value.toString()===a.toString())return r=n.facadeLabel||n.label,!0},this),!o.Lang.isValue(r)){var s=this.get("strings.placeholder");o.Lang.isValue(s)&&s!==""?r=s:r="&nbsp;"}return r},_getErrors:function(){return this.get("required")&&this.isEmpty()?[(0,l.t)("This is a required field.",null,{project:"scripts-v6.dialog"})]:[]}},{CSS_PREFIX:"sqs-select",TEMPLATE:'<div class="title"></div><div class="select-facade"><div class="label"></div><select></select></div><div class="description"></div>',ATTRS:{strings:{value:{placeholder:(0,l.t)("Select an option",null,{project:"scripts-v6.dialog"})}},defaultOptionContainer:{getter:function(){return this.get("contentBox").one("select")}},icon:{value:"",validator:o.Squarespace.AttrValidators.isString},autocompleteType:{value:null,writeOnce:"initOnly",validators:o.Squarespace.AttrValidators.isNullOrValueIn(d.Z)},haltClickEvent:{value:!0},testAttribute:{value:"select"}}})},"1.0",{requires:["base","node-event-simulate","squarespace-attr-validators","squarespace-dialog-select-base"]})},510894:function(){YUI.add("squarespace-dialog-slider",function(c){var b="&nbsp;";c.namespace("Squarespace.DialogFields"),c.Squarespace.DialogFields.Slider=c.Base.create("slider",c.Squarespace.DialogField2,[],{initializer:function(){this.unplug(c.Plugin.WidgetAnim),c.Lang.isValue(this._initialData)||(this._initialData=this.get("data"));var t=function(){c.throttle(this.refreshWidth.bind(this))};this._registerEvent(c.one(c.config.win).on("resize",t,this)),this.get("pluralize")&&this.get("getPluralizedSliderLabel")},renderUI:function(){c.Squarespace.DialogFields.Slider.superclass.renderUI.call(this),this.slider=new c.Slider({axis:"x"});var t=this.get("contentBox"),l=t.one(".slider-container"),d=this.get("range");this.slider.setAttrs({thumbUrl:this.get("thumbUrl"),min:d[0],max:d[1],value:this.get("data")}),this.slider.render(l),this._updateDisplayFromSliderValue(),this.refreshWidth()},show:function(){var t=this.get("visible");c.Squarespace.DialogFields.Slider.superclass.show.call(this),t||this.refreshWidth()},refreshWidth:function(){var t=this.get("contentBox");this.slider.set("length",t.one(".slider-container").get("offsetWidth"))},bindUI:function(){c.Squarespace.DialogFields.Slider.superclass.bindUI.call(this),this.slider.after("thumbMove",this._updateDataFromSlider,this),this.slider.after("thumbMove",this._updateDisplayFromSliderValue,this),this.after("dataChange",this._updateSliderFromData,this),this.slider._dd&&(this.slider._dd.plug(c.Plugin.DDProxy,{cloneNode:!0,moveOnEnd:!0}),this.slider._dd.on("start",function(t){this.get("node").setStyles({visibility:"hidden"})},this.slider._dd),this.slider._dd.on("end",function(t){this.get("node").setStyles({visibility:null})},this.slider._dd))},_getDisplayValue:function(){var t=this.get("data"),l=this.get("getPluralizedSliderLabel");if(l)return l(t);var d=this.get("strings.suffix"),o=this.get("strings.zeroLabel"),e=this.get("pluralize");if(t===0&&o)return o;var a=t!==1;return d?t+b+d+(a&&e?"s":""):t},_updateDisplayFromSliderValue:function(){var t=this.get("contentBox");t.one(".numeric-display").setContent(this._getDisplayValue(this.get("data")))},_updateDataFromSlider:function(){this.set("data",this.slider.get("value"))},_updateSliderFromData:function(){this.slider.set("value",this.get("data"))},destructor:function(){this.slider&&this.slider.destroy()}},{CSS_PREFIX:"sqs-slider",HANDLEBARS_TEMPLATE:"dialog-slider.html",ATTRS:{data:{value:null,getter:function(t){return c.Lang.isValue(t)?t:this.get("range")[0]},validator:c.Lang.isNumber},displayFormatter:{value:function(){return this._getDisplayValue(this.get("data"))}},range:{validator:function(t){var l=t[0],d=t[1];return c.Lang.isNumber(l)&&c.Lang.isNumber(d)&&l<d},value:[0,100]},isNumericLabel:{value:null,getter:function(t){if(c.Lang.isValue(t))return t;var l=this.get("strings.suffix");return!(typeof l=="string"&&l!==""||this.get("getPluralizedSliderLabel"))}},labelWidth:{value:20},pluralize:{value:!0},disabled:{value:!1},thumbUrl:{value:"/universal/images-v6/dialog/slider-thumb-dark.png"},getPluralizedSliderLabel:{value:null}}})},"1.0",{requires:["base","dd-proxy","squarespace-dialog-field-2","squarespace-dialog-slider-template"]})},203034:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-dialog-subscription-details-placeholder",function(d){d.namespace("Squarespace");var o=d.namespace("Squarespace.DialogFields").SubscriptionDetailsPlaceholder=d.Base.create("SubscriptionDetailsPlaceholder",d.Squarespace.DialogField2,[],{initializer:function(){},renderUI:function(){o.superclass.renderUI.call(this),this.get("boundingBox").addClass("field-wrapper").addClass("major"),this._edited=!1},bindUI:function(){this.get("contentBox").on("click",function(){this.fire("clicked")},this),this.after("dataChange",function(){this._edited=!0,this.syncUI()},this)},syncUI:function(){var e=this.get("data");this.get("contentBox").one(".details-text").empty().setHTML(d.Squarespace.Commerce.merchantSubscriptionDetailsString(e))},didDataChange:function(){return this._edited}},{CSS_PREFIX:"sqs-subscription-details-placeholder",HANDLEBARS_TEMPLATE:"dialog-subscription-details-placeholder.html",ATTRS:{strings:{value:{prompt:(0,l.t)("Edit",null,{project:"scripts-v6.dialog"})}}}})},"1.0",{requires:["base","json","squarespace-animations","squarespace-commerce-utils","squarespace-damask-panel-mixin-pusher","squarespace-dialog-field-2","squarespace-dialog-subscription-details-placeholder-template","squarespace-hb-product-price-string","squarespace-hb-product-types","squarespace-util-authenticated"]})},107558:function(c,b,t){"use strict";var l=t(714487),d=t(174161),o=t(233284),e=t(663634),a=t(859817),r=t(934951),s=t(901674),n=t(181517),i=t(346588),u=t(177027),h=t.n(u);function g(m,_,v){return _ in m?Object.defineProperty(m,_,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[_]=v,m}class p{getSelectableTags(){return[]}async getCategoriesAndTags(){const{storeWideCats:_,apiErrors:v}=await(0,i.Z)(this.model.collectionId);this.storeWideCats=_,this.apiErrors=v}constructor(_){var v=this;g(this,"container",void 0),g(this,"model",void 0),g(this,"setRelatedAttrsInYUI",void 0),g(this,"apiErrors",!1),g(this,"storeWideCats",[]),g(this,"existingProductCats",[]),g(this,"value",void 0),g(this,"flush",!1),g(this,"damaskify",!1),g(this,"setExistingCats",function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];v.existingProductCats=E}),g(this,"setValue",E=>{this.value=E,this.render()}),g(this,"show",async()=>{await this.getCategoriesAndTags(),this.render()}),g(this,"setCollectionId",async E=>{this.model.collectionId=E,await this.getCategoriesAndTags(),this.render()}),g(this,"destroy",()=>{o.unmountComponentAtNode(this.container)}),g(this,"render",()=>{const E=this.getSelectableTags();o.render(d.createElement(a.StatsigProvider,{client:(0,e.GC)()},d.createElement("div",{className:"yui3-widget sqs-widget sqs-data-widget sqs-dialog-field sqs-text"},d.createElement("div",{className:"title"},d.createElement(r.T,{project:"apps.App.Commerce.RelatedProducts"},"Category Filter")),this.apiErrors?d.createElement("div",{className:h().error},d.createElement(r.T,{project:"apps.App.Commerce.RelatedProducts"},"Error: could not fetch categories.")):d.createElement(s.Z,{model:this.model,saveRelatedAttrs:this.saveRelatedAttrs,storeWideCats:this.storeWideCats,existingProductCats:this.existingProductCats,selectableTags:E,value:this.value,disableDescription:!0,isDropdownFlush:this.flush,damaskify:this.damaskify}))),this.container)}),g(this,"saveRelatedAttrs",E=>{this.setRelatedAttrsInYUI(E.filter(S=>S!==n.V)),this.render()}),this.container=_.container,this.model=_.model,this.setRelatedAttrsInYUI=_.setRelatedAttrsInYUI,this.value=_.value,this.flush=_.flush,this.damaskify=_.damaskify}}const f=p;YUI.add("squarespace-dialog-summary-filter",function(m){var _="featured",v="tag",E="category",S="categoryIds";m.namespace("Squarespace.DialogFields").SummaryFilter=m.Base.create("summaryFilters",m.Squarespace.DialogField2,[],{initializer:function(y){var C=y.data||this.get("data")||{};this._tagField=new m.Squarespace.DialogFields.AutoComplete({"strings.title":(0,l.t)("Tag Filter",null,{project:"scripts-v6.dialog"}),"strings.placeholder":(0,l.t)("Enter a tag to filter by",null,{project:"scripts-v6.dialog"}),"strings.description":(0,l.t)("Only show items with this tag.",null,{project:"scripts-v6.dialog"}),data:C.tag,acConfig:{source:[],resultFilters:"phraseMatch",zIndex:1e6}}),this.set("tagField",this._tagField),this._categoryField=new m.Squarespace.DialogFields.AutoComplete({"strings.title":(0,l.t)("Category Filter",null,{project:"scripts-v6.dialog"}),"strings.placeholder":(0,l.t)("Enter a category to filter by",null,{project:"scripts-v6.dialog"}),"strings.description":(0,l.t)("Only show items with this category.",null,{project:"scripts-v6.dialog"}),data:C.category,acConfig:{source:[],resultFilters:"phraseMatch",zIndex:1}}),this.set("categoryField",this._categoryField),this._featuredField=new m.Squarespace.DialogFields.Check({"strings.title":(0,l.t)("Featured Filter",null,{project:"scripts-v6.dialog"}),"strings.description":(0,l.t)("Only show featured posts.",null,{project:"scripts-v6.dialog"}),data:C.featured||!1})},renderUI:function(){m.Squarespace.DialogFields.SummaryFilter.superclass.renderUI.call(this);var y=this.get("contentBox");this._categoryField.render(y),y.appendChild('<div class="nested-category-field"></div>'),this._tagField.render(y),this._featuredField.render(y)},bindUI:function(){m.Squarespace.DialogFields.SummaryFilter.superclass.bindUI.call(this),this._tagField.after("dataChange",this._updateData,this,v),this._categoryField.after("dataChange",this._updateData,this,E),this._featuredField.after("dataChange",this._updateData,this,_),this.after("dataChange",this._handleRevertRequest,this),this.after("showNestedCategoriesChange",this.syncShowNestedCategoriesChange,this),this.after("collectionIdChange",this.syncNestedCategoriesCollectionId,this)},syncUI:function(){m.Squarespace.DialogFields.SummaryFilter.superclass.syncUI.call(this),this.syncShowNestedCategoriesChange()},resetNestedCategorySelection:function(){this._setRelatedAttrsInYUI("")},syncShowNestedCategoriesChange:function(){if(!this.get("showNestedCategories")){this._categoryField.show(),this._wrappedCategoryPicker&&(this._wrappedCategoryPicker.destroy(),this._wrappedCategoryPicker=null);return}this._categoryField.hide();var y=this.get("collectionId");y&&(this._wrappedCategoryPicker||(this._wrappedCategoryPicker=new f({setRelatedAttrsInYUI:this._setRelatedAttrsInYUI.bind(this),container:this.get("contentBox").one(".nested-category-field").getDOMNode(),model:{collectionId:y,websiteId:m.config.win.Static.SQUARESPACE_CONTEXT.website.id},value:this.getNestedCategoryValue(),flush:!0,damaskify:!0}),this._wrappedCategoryPicker.show()))},getNestedCategoryValue:function(){var y=this.get("data")[S];return y?y[0]:""},syncNestedCategoriesCollectionId:function(){if(this._wrappedCategoryPicker){var y=this.get("collectionId");this._wrappedCategoryPicker.setCollectionId(y)}},_setRelatedAttrsInYUI:function(y){this._updateData({newVal:y},S),this._wrappedCategoryPicker&&this._wrappedCategoryPicker.setValue(this.getNestedCategoryValue())},destructor:function(){this._categoryField.destroy(),this._tagField.destroy(),this._featuredField.destroy()},didDataChange:function(){var y=this._initialData||{},C=this.get("data"),O=function(A){return y[A]!==C[A]};return O(v)||O(_)||O(E)},_updateData:function(y,C){var O=y.newVal,A=this.get("data");m.Lang.isString(O)&&O.length===0&&(O=null),A[C]=O,this.set("data",A)},_handleRevertRequest:function(y){y.revert&&this._revertFields()},_revertFields:function(){this._tagField.set("data",""),this._categoryField.set("data",""),this._featuredField.set("data",!1)}},{CSS_PREFIX:"sqs-summary-filter",ATTRS:{tags:{},data:{value:{}},categories:{},tagField:{readOnly:!0},categoryField:{readOnly:!0},showNestedCategories:{value:!1},collectionId:{value:""}}})},"1.0",{requires:["autocomplete-filters","autocomplete-sources","base","squarespace-dialog-auto-complete","squarespace-dialog-check","squarespace-dialog-field-2"]})},715398:function(c,b,t){"use strict";var l=t(714487),d=t(997394),o=t.n(d);YUI.add("squarespace-dialog-table-import",function(e){var a=[{ctor:e.Squarespace.DialogFields.Description,config:{name:"description",title:(0,l.t)("Import or Export Chart Data",null,{project:"scripts-v6.dialog"}),text:(0,l.t)("Your data is provided here in CSV (comma separated value) format. You can copy the text below and save it as a .csv file to export your data. To import a spreadsheet, first save it as a .csv file. Then open it with a text editor and copy and paste the content into the box below, overwriting the existing text.",null,{project:"scripts-v6.dialog"})}},{ctor:e.Squarespace.DialogFields.TextArea,config:{"strings.title":(0,l.t)("Chart Data",null,{project:"scripts-v6.dialog"}),name:"data-text"}},{ctor:e.Squarespace.DialogFields.Button,config:{name:"import-button","strings.text":(0,l.t)("Update",null,{project:"scripts-v6.dialog"}),disabled:!0}},{ctor:e.Squarespace.DialogFields.Description,config:{name:"errors",text:""}}];e.namespace("Squarespace.DialogFields");var r=e.Squarespace.DialogFields.TableImport=e.Base.create("TableImport",e.Squarespace.DialogField2,[],{initializer:function(){this._fields=[],this._useJson=!1,this._newData=null,this._changed=!1,this._resetErrors()},destructor:function(){e.Array.invoke(this._fields,"destroy"),this._fields=null},syncUI:function(){r.superclass.syncUI.call(this),this._renderFields(),this._bindFields()},_renderFields:function(){e.Array.invoke(this._fields,"destroy"),this._fields=this._constructFields();var s=this.get("contentBox");e.Squarespace.FormUtils.template(s,this._fields),this._renderImportData(),this._renderErrors()},_renderImportData:function(){var s=this.get("contentBox");s.one("textarea").setContent(e.Escape.html(this._serializeData()))},_renderErrors:function(){function s(u,h,g){u.length>0&&(g+="<p>"+h+":</p><ul>",e.Array(u).forEach(function(p){g+="<li>"+p+"</li>"}),g+="</ul>")}var n=this.get("contentBox"),i="";this._parseErrors.length>0&&(i+="<p>"+(0,l.t)("Failed to update your data.",null,{project:"scripts-v6.dialog"})+"</p>"),s(this._parseErrors,(0,l.t)("Errors",null,{project:"scripts-v6.dialog"}),i),s(this._parseWarnings,(0,l.t)("Warnings",null,{project:"scripts-v6.dialog"}),i),n.one(".errors").setContent(i)},_resetErrors:function(){this._parseErrors=[],this._parseWarnings=[]},_constructFields:function(){return e.Array.map(a,function(s){return new s.ctor(s.config)})},_bindFields:function(){var s=this._getField("data-text"),n=this._getField("import-button");this._registerEvent(s.on("dataChange",function(i){this._newData=i.newVal,n.enable()},this)),this._registerEvent(n.on("click",this._handleImport,this))},_handleImport:function(s){if(s.source!=="confirmation"&&this._newData){this._resetErrors(),this._renderErrors();var n=new e.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("Are You Sure?",null,{project:"scripts-v6.dialog"}),"strings.message":(0,l.t)("This will overwrite the current chart data.",null,{project:"scripts-v6.dialog"})});n.on("confirm",function(){this._import(this._newData)},this),n.show()}},_getField:function(s){return e.Array.find(this._fields,function(n){return n.get("name")===s})},_serializeData:function(){var s=this.get("data");return this._useJson?this._serializeJSON(s):this._serializeCSV(s)},_serializeJSON:function(s){return JSON.stringify(s)},_serializeCSV:function(s){function n(h,g){return h.push.apply(h,g),h}var i=[n(["Label"],s.seriesLabels)];e.Array(s.data).forEach(function(h,g){i.push(n([s.sampleLabels[g]],h))});var u=o().unparse(i);return u},_padData:function(s,n){var i=!1;function u(h,g,p){for(var f=!1;h.length<p;)f=!0,h.push(g);return f}return u(s.seriesLabels,(0,l.t)("New Series",null,{project:"scripts-v6.dialog"}),n)&&(this._parseWarnings.push((0,l.t)("One or more rows had extra columns.",null,{project:"scripts-v6.dialog"})),i=!0),u(s.sampleLabels,"",s.data.length),e.Array(s.data).forEach(function(h){u(h,0,n)}),i},_checkLimits:function(s,n){var i=this.get("maxSeries"),u=this.get("maxSamples"),h=!1;if(n>i){s.seriesLabels=s.seriesLabels.slice(0,i);for(var g=0;g<s.data.length;g++)s.data[g]=s.data[g].slice(0,i);this._parseWarnings.push((0,l.t)("Your dataset has been truncated to {maxSeries} columns.",{maxSeries:i},{project:"scripts-v6.dialog"})),h=!0}return s.data.length>u&&(s.data=s.data.slice(0,u),s.sampleLabels=s.sampleLabels.slice(0,u),this._parseWarnings.push((0,l.t)("Your dataset has been truncated to {maxSamples} rows.",{maxSamples:u},{project:"scripts-v6.dialog"})),h=!0),h},_checkValid:function(s){return s.sampleLabels.length<1?(this._parseErrors.push((0,l.t)("Your dataset must have at least one row.",null,{project:"scripts-v6.dialog"})),!1):s.seriesLabels.length<1?(this._parseErrors.push((0,l.t)("Your dataset must have at least one column.",null,{project:"scripts-v6.dialog"})),!1):s.data.length<1?(this._parseErrors.push((0,l.t)("Your dataset must have at least one row.",null,{project:"scripts-v6.dialog"})),!1):!0},_deserializeCSV:function(s){this._resetErrors();var n=!1,i=o().parse(s,{skipEmptyLines:!0,delimiter:","});if(i.errors.length>0)return this._parseErrors.push((0,l.t)("Malformed CSV data.",null,{project:"scripts-v6.dialog"})),!1;var u={seriesLabels:i.data[0].slice(1),sampleLabels:e.Array.map(i.data.slice(1),function(g){return g[0]}),data:e.Array(i.data.slice(1)).map(function(g){return e.Array(g.slice(1)).map(function(p){return parseFloat(p)||0})})};if(!this._checkValid(u))return null;var h=Math.max.apply(null,e.Array(u.data).map(function(g){return g.length}));return h=Math.max(h,u.seriesLabels.length),n=this._padData(u,h),n=n||this._checkLimits(u,h),n&&(this._newData=this._serializeCSV(u),this._changed=!0),u},_import:function(s){var n=this._deserializeCSV(s);this._parseErrors.length===0?(this._newData=null,this.fire("importTable",{data:n}),this._getField("import-button").disable()):this._renderErrors()},didDataChange:function(){return this._changed},CONTENT_TEMPLATE:'<div><div data-field-name="description"></div><div data-field-name="data-type"></div><div data-field-name="data-text"></div><div data-field-name="import-button"></div><div data-field-name="errors" class="errors"><ul></ul></div></div>'},{CSS_PREFIX:"sqs-table-import",ATTRS:{maxSeries:{value:0},maxSamples:{value:0},data:{value:null}}})},"1.0",{requires:["array-invoke","base","escape","node","squarespace-dialog","squarespace-dialog-button","squarespace-dialog-field-2","squarespace-dialog-radio","squarespace-dialog-text-area","squarespace-form-utils","squarespace-widgets-confirmation"]})},81544:function(){YUI.add("squarespace-dialog-text-area",function(c){c.namespace("Squarespace.DialogFields");var b=c.Squarespace.DialogFields.TextareaField=c.Squarespace.DialogFields.TextArea=c.Base.create("textArea",c.Squarespace.DialogField2,[],{initializer:function(){this._edited=!1;var t=this.get("dialog");if(t){var l=t.getData().raw;this._saveInitialData(l)}else this._saveInitialData()},renderUI:function(){b.superclass.renderUI.call(this);var t=this.get("dialog");if(c.Lang.isValue(t)){var l=this.get("contentBox").one("textarea");l.setAttribute("tabindex",t.getNextTabIndex())}},bindUI:function(){b.superclass.bindUI.call(this);var t=this.get("contentBox").one("textarea");t.after("valuechange",function(l){this._edited=!0,this.set("data",l.newVal)},this),t.on("keydown",function(l){this.get("disableNewLine")&&l.keyCode===13&&l.halt()},this),this.after("dataChange",this._afterDataChange,this)},didDataChange:function(){return this._edited},focus:function(){b.superclass.focus.call(this),this.get("rendered")&&this.get("contentBox").one("textarea").focus()},blur:function(){b.superclass.blur.call(this),this.get("rendered")&&this.get("contentBox").one("textarea").blur()},_afterDataChange:function(){var t=this.get("contentBox").one("textarea"),l=t.get("value"),d=this.get("data");d!==l&&t.set("value",d)}},{CSS_PREFIX:"sqs-text-area",HANDLEBARS_TEMPLATE:"dialog-text-area.html",ATTRS:{data:{value:""},strings:{value:{placeholder:""}},disableNewLine:{value:!1},testAttribute:{value:"text-area"}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2","squarespace-dialog-text-area-template"]})},51108:function(c,b,t){"use strict";var l=t(714487),d=t(347816),o=t(961789),e=t(306315);YUI.add("squarespace-dialog-text",function(a){a.namespace("Squarespace.DialogFields");var r=a.config.doc.createElement("span"),s=a.Squarespace.DialogFields.Text=a.Squarespace.DialogFields.TextField=a.Base.create("text",a.Squarespace.DialogField2,[],{destructor:function(){this._textField&&this._textField.remove(!0),this._textField=null},renderUI:function(){s.superclass.renderUI.call(this),this._textField=this.get("contentBox").one("input[type]"),this.get("dialog")&&this._textField.setAttribute("tabindex",this.get("dialog").getNextTabIndex()),this._textField.set("type",this.get("password")?"password":"text");var i=this.get("autocompleteType");i&&this._textField.setAttribute("x-autocompletetype",i),this.get("autocompleteEnabled")||(this.get("password")&&this.get("contentBox").prepend('<input type="password" tabindex="-1" class="sqs-offscreen" />'),this._textField.setAttribute("autocomplete","off")),this._set("errorFlyoutAnchor",this._textField),this._textField.set("value",this._unescapeValue(this.get("data"))),typeof this._initialValue>"u"&&(this._initialValue=this.get("data"))},bindUI:function(){s.superclass.bindUI.call(this),this.after("dataChange",this._afterDataChange),this._textField.after("valuechange",this._afterValueChange,this),this.after("disabledChange",this.syncUI);var i=this._textField.getDOMNode(),u="addEventListener";a.Lang.isFunction(i.attachEvent)&&(u="attachEvent"),i[u]("focus",a.bind(this._afterFocus,this)),i[u]("blur",a.bind(this._afterBlur,this)),this._textField.on("click",function(h){h.halt()}),this._textField.after("keyup",function(h){if(h.keyCode===13&&this.get("submitOnEnter")){this.fire("submit");var g=this.get("dialog");g&&g.saveAndClose()}else h.keyCode===27?h.halt():this.fire("keyup",h)},this),this._textField.on("keypress",this.applyKeyFilter,this),this.on("readOnlyChange",function(h){h.newVal?this._textField.setAttribute("readonly","readonly"):this._textField.removeAttribute("readonly")},this)},syncUI:function(){s.superclass.syncUI.call(this);var i=this.get("strings.placeholder");i&&this._textField.setAttribute("placeholder",i),this.get("disabled")?this._textField.setAttribute("disabled","disabled"):this._textField.removeAttribute("disabled")},getErrors:function(){var i=this.get("data");if(this.get("validator")(i)){if(this.get("required")&&this.isEmpty())return[this.get("strings.requiredFieldEmptyMessage")]}else return[this.get("strings.validationFailMessage")];return[]},isEmpty:function(){return this.get("data")===""},focus:function(){s.superclass.focus.call(this),this.get("rendered")&&this._textField.focus()},select:function(){this.get("rendered")&&this._textField.select()},blur:function(){s.superclass.blur.call(this),this.get("rendered")&&this._textField&&this._textField.blur()},disable:function(){s.superclass.disable.call(this),this.get("rendered")&&this._textField.setAttribute("disabled","disabled")},enable:function(){s.superclass.enable.call(this),this.get("rendered")&&this._textField.removeAttribute("disabled")},applyKeyFilter:function(i){var u=this.get("keyFilter"),h=this.get("keyFilterExplanation"),g;if(u){if(a.UA.gecko!==0&&!i._event.isChar||i.charCode===13&&this.get("submitOnEnter"))return;g=String.fromCharCode(i.which),!g.match(new RegExp(u))&&g.length>0&&(h&&this.showError(h),i.halt())}},_afterDataChange:function(i){i.dataSync||this._textField.set("value",this._unescapeValue(i.newVal||""),{dataSync:!0}),this.hideError(),this.toggleError()},_afterValueChange:function(i){i.dataSync||this.set("data",this._escapeValue(i.newVal),{dataSync:!0})},_escapeValue:function(i){return this.get("escapeText")&&(r.textContent=i,i=r.innerHTML,r.innerHTML=""),i},_unescapeValue:function(i){return this.get("escapeText")&&(r.innerHTML=i,i=r.textContent,r.innerHTML=""),i},_afterFocus:function(){typeof CONFIG_PANEL<"u"&&CONFIG_PANEL.set("allowContextMenu",!0),this.focus()},_afterBlur:function(){this.hideError(),typeof CONFIG_PANEL<"u"&&CONFIG_PANEL.set("allowContextMenu",!1);var i=this._textField.get("value");this._textField&&this.set("data",this._escapeValue(i),{dataSync:!0}),this.blur()}},{CSS_PREFIX:"sqs-text",HANDLEBARS_TEMPLATE:"dialog-text.html",ATTRS:{strings:{value:{placeholder:"",validationFailMessage:(0,l.t)("This must be a string.",null,{project:"scripts-v6.dialog"}),requiredFieldEmptyMessage:(0,l.t)("This is a required field.",null,{project:"scripts-v6.dialog"})}},data:{value:"",setter:function(i){return a.Lang.isValue(i)||(i=""),i},validator:function(i){return a.Lang.isString(i)||!a.Lang.isValue(i)}},escapeText:{value:!1},validator:{value:a.Lang.isString},password:{value:!1,validator:a.Lang.isBoolean},submitOnEnter:{value:!1,validator:a.Lang.isBoolean},disabled:{value:!1,validator:a.Lang.isBoolean},autocompleteType:{value:null,writeOnce:"initOnly",validators:a.Squarespace.AttrValidators.isNullOrValueIn(d.Z)},autocompleteEnabled:{value:!0,validator:a.Lang.isBoolean,writeOnce:"initOnly"},keyFilter:{},keyFilterExplanation:{value:""},maxLength:{value:null},readOnly:{value:!1},selectAllOnFocus:{value:!1},testAttribute:{value:"text"}}});a.Squarespace.DialogFields.LabeledText=a.Base.create("labeledText",a.Squarespace.DialogFields.Text,[a.Squarespace.DialogFields.DialogFieldLabel],{},{CSS_PREFIX:"sqs-labeled-text",LABEL_CONFIG:{forNode:"input[type]"}});var n=a.Squarespace.DialogFields.Url=a.Base.create("urlText",a.Squarespace.DialogFields.Text,[],{renderUI:function(){n.superclass.renderUI.call(this),this._textField.wrap('<div class="sqs-input-wrapper-content"></div>');var i=this.get("contentBox").one(".sqs-input-wrapper-content");i.wrap('<div class="sqs-input-wrapper"></div>'),i.prepend('<div class="prefix">'+this.get("prefix")+"</div>")},bindUI:function(){n.superclass.bindUI.call(this),this._textField.after("keyup",this.onKeyUp,this)},onKeyUp:function(i){var u=this._textField.get("value"),h=this._textField.selectionStart-(i.keyCode===32?0:1),g=this.get("filter"),p=u;Array.isArray(g)?p=a.Array.reduce(g,u,function(f,m){return(0,e.R)(f,m)},this):p=(0,e.R)(u,g),u!==p&&(this._textField.set("value",this._unescapeValue(p)),this._textField.selectionStart=h,this._textField.selectionEnd=h)},getErrors:function(){var i=n.superclass.getErrors.call(this),u=this.get("additionalValidators");if(Array.isArray(u)||(u=[u]),u.length){var h=this._textField.get("value"),g=this._initialValue===""&&h==="",p=u.indexOf("optional-on-creation")!==-1;if(p&&g)return i;u.indexOf("url-slug-required-if-exists")!==-1&&h===""&&i.push((0,l.t)("Slug cannot be blank.",null,{project:"scripts-v6.dialog"})),u.indexOf("url-slug-min-length")!==-1&&h.length<3&&i.push((0,l.t)("Slug must be at least 3 characters.",null,{project:"scripts-v6.dialog"})),u.indexOf("url-slug-max-length")!==-1&&h.length>250&&i.push((0,l.t)("Slug must be at most 250 characters.",null,{project:"scripts-v6.dialog"}))}return i}},{CSS_PREFIX:"sqs-url-text",ATTRS:{filter:{value:o.Z.URL_SLUG_WITH_SLASH},additionalValidators:{value:""},prefix:{value:"/"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-dialog-label","squarespace-dialog-text-template"]})},777682:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-dialog-video",function(d){d.namespace("Squarespace.DialogFields");var o=d.Squarespace.DialogFields.Video=d.Base.create("Video",d.Squarespace.Widgets.DialogField2,[],{initializer:function(){this._modelEditor=new d.Squarespace.ContentItemEditor.VideoMinimalGlobal({model:this.get("data")})},destructor:function(){this._modelEditor.destroy()},renderUI:function(){o.superclass.renderUI.call(this),this.get("contentBox").append('<div class="name">'+(0,l.t)("Test Test",null,{project:"scripts-v6.dialog"})+'</div><div class="edit-video">'+(0,l.t)("Edit",null,{project:"scripts-v6.dialog"})+"</div>")},bindUI:function(){o.superclass.bindUI.call(this),this.get("contentBox").one(".edit-video").on("click",function(){this._modelEditor.show()},this)}},{CSS_PREFIX:"sqs-dialog-video",ATTRS:{collectionConfig:{value:{},validator:d.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"},data:{value:null,validator:d.Squarespace.AttrValidators.isNullOrInstanceOf(d.Squarespace.Models.ContentItem),writeOnce:"initOnly"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-item-types-video","squarespace-dialog-field-2","squarespace-models-content-item"]})},89384:function(c,b,t){"use strict";var l=t(174161),d=t(594127),o=t(181298),e=t(553772),a=t(990007),r=t(925103);YUI.add("squarespace-dialog-wysiwyg",function(s){s.namespace("Squarespace.DialogFields").Wysiwyg=s.Base.create("wysiwyg",s.Squarespace.DialogField2,[],{initializer:function(n){this.get("boundingBox").addClass("field-wrapper clear"),s.Lang.isValue(this.get("classNames"))&&this.get("boundingBox").addClass(this.get("classNames"))},destructor:function(){var n=this.get("contentBox").one(".rte");n&&n.unplug(s.Squarespace.Plugin.ScrollLock),this.rteRoot.unmount(),this.rteRoot=null,s.Squarespace.DIALOG_ZINDEX_BASE-=10},renderUI:function(){this.constructor.superclass.renderUI.apply(this,arguments),s.Lang.isValue(this.get("strings.title"))&&this.get("contentBox").one(".title").setHTML(this.get("strings.title")),s.Lang.isValue(this.get("description"))&&this.get("contentBox").one(".description").setHTML(this.get("description")),this.get("usesNewRTE")&&this.get("contentBox").one(".field-rte-wrapper").addClass("new-rte"),this._instantiateEditor();var n=this.get("contentBox").one(".rte");n&&n.plug(s.Squarespace.Plugin.ScrollLock)},_instantiateEditor:function(n){this.rteRoot=(0,d.createRoot)(this.get("contentBox").one(".field-rte-wrapper").getDOMNode());var i=this.get("data.html");if(this.get("usesNewRTE")){var u=this.get("newRTEConfig"),h=Object.assign({height:this.getEditorHeight(),backgroundColor:"white"},u.sx),g=l.createElement(r.Z,{baseZIndex:s.Squarespace.DIALOG_ZINDEX_BASE+100,onChange:this.handleChange.bind(this),placeholder:u.placeholder,sx:h,toolbarOptions:u.toolbarOptions,ellipsisOptions:u.ellipsisOptions,onGeneratedTextUpdate:u.onGeneratedTextUpdate,toolbarProps:u.toolbarProps,trackingProductArea:u.trackingProductArea||"page-editor",trackingProductAreaLevel2:u.trackingProductAreaLevel2,value:i});this.rteRoot.render(l.createElement("div",{children:g,onClick:function(_){_.stopPropagation()}}))}else{var p=this.get("type"),f=this.get("toolbarOptions"),m=this.get("itemEditorZIndex");this.rteRoot.render(l.createElement(a.Z,{color:"light",showSeparator:!1,hideMenu:!1,onChange:this.handleChange.bind(this),height:this.getEditorHeight(),value:i,itemEditorZIndex:m,toolbarOptions:f,type:p,forceUpdate:n,isNullable:!1,preserveWhitespace:this.get("preserveWhitespace"),decodeHTMLEntities:!0}))}},bindUI:function(){this.on("dataChange",function(i){!s.Lang.isValue(i.newVal)&&i.newVal!==""&&i.preventDefault()}),this.after("dataChange",function(i){i.internal||this._instantiateEditor(!0)});var n=this.get("data");(!s.Lang.isValue(n)||!s.Lang.isValue(n.html))&&this.handleChange("")},handleChange:function(n){this.set("data",{html:n&&n.toString(),raw:!1},{internal:!0})},didDataChange:function(){var n=this.get("data.html");return n!==this.getValue("data",["html"])},getEditorHeight:function(){var n=this.get("editorHeight");return n-o.UI_PADDING_PX},_renderTitle:function(){return this.config.title&&this.config.titleStyle==="top"?s.Node.create('<div class="field-lhs">'+this.config.title+"</div>"):null}},{CSS_PREFIX:"sqs-dialog-wysiwyg",TEMPLATE:'<div class="title field-lhs"></div><div class="field-rhs"><div class="field-rte-wrapper"></div><div class="description"></div></div></div>',ATTRS:{type:{validator:s.Squarespace.AttrValidators.isValueIn(e.rg),value:e.rg.SIMPLE},editorHeight:{validator:s.Squarespace.AttrValidators.isNumber},data:{},classNames:{validator:s.Squarespace.AttrValidators.isString},newRTEConfig:{validator:s.Squarespace.AttrValidators.isNullOrObject},title:{validator:s.Squarespace.AttrValidators.isString},label:{validator:s.Squarespace.AttrValidators.isString},itemEditorZIndex:{validator:s.Squarespace.AttrValidators.isNumber},toolbarOptions:{validator:s.Squarespace.AttrValidators.isNullOrArray},description:{validator:s.Squarespace.AttrValidators.isString},preserveWhitespace:{validator:s.Squarespace.AttrValidators.isBoolean},isNullable:{validator:s.Squarespace.AttrValidators.isBoolean},usesNewRTE:{getter:function(){return!!this.get("newRTEConfig")}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-plugin-scroll-lock"]})},48585:function(c,b,t){"use strict";var l=t(960162),d=t(461761),o=t.n(d),e=t(174161),a=t(233284),r=t(714487),s=t(408549),n=t(200887),i=t(798589),u=t(759352),h=t(795478),g=t.n(h),p=t(845076),f=t.n(p),m=t(417925),_=t.n(m),v=t(721247),E=t(953563),S=t.n(E);const y={slideIn:{enter:{from:{opacity:0,transform:"translateX(-100%)"},to:{opacity:1,transform:"translateX(0)"},className:S().dissolve},leave:{from:{opacity:1,transform:"translateX(0)"},to:{opacity:0,transform:"translateX(-100%)"},className:S().dissolve}}};var C=t(379835),O=t.n(C);function A(R,w,k){return w in R?Object.defineProperty(R,w,{value:k,enumerable:!0,configurable:!0,writable:!0}):R[w]=k,R}var I;class D extends(I=e.PureComponent){componentDidMount(){this.getScrollable()&&(this.scrollRef.current.addEventListener("scroll",this.handleScroll,{passive:!0}),this.scrollTo(this.state.active)),this.props.onMount&&this.props.onMount()}componentWillUnmount(){this.getScrollable()&&this.scrollRef.current.removeEventListener("scroll",this.handleScroll)}scrollTo(w){const{scrollDurationMS:k,tabWidth:q}=this.props,F=q*Math.floor(w)-q*.25;O()(this.scrollRef.current,{left:F},{minDuration:k,maxDuration:k,easing:"easeInOutSine"})}getScrollable(){const{tabWidth:w,tabs:k}=this.props,q=this.scrollRef.current&&this.scrollRef.current.clientWidth,F=w*k.length;return q?F>q:!1}renderTabs(){const{tabs:w,tabWidth:k}=this.props,{active:q}=this.state;return w.map((F,z)=>{const{className:j="",error:X,tabTitle:J}=F,Q=f()(_().tab,{[_().active]:q===z,[_().error]:X},j);return e.createElement("div",{className:Q,"data-test":`tab-${z}`,"data-tab":`tab-${z}`,key:`tab-${J}`,onClick:this.handleTabClick.bind(this,{currentTab:F,index:z}),style:{width:k}},J)})}renderIndicatorMask(w){const k=this.props.tabWidth/2;return this.getScrollable()&&e.createElement(v.CSSTransitionGroup,{key:`${w}TransitionGroup`,wrapChildWithTag:!1,className:_()[`${w}TransitionGroup`],transitions:y.slideIn},this.state[`${w}IndicatorVisible`]&&[e.createElement("div",{key:`${w}Mask`,className:_().scrollIndicatorMask,style:{width:k}}),e.createElement("div",{key:`${w}Icon`,className:_().scrollIndicatorIcon,style:{width:k/2},onClick:w==="left"?this.prevTab:this.nextTab})])}renderScrollableTabs(){const{tabWidth:w,tabs:k}=this.props;return e.createElement("div",{style:{width:w*k.length}},this.renderTabs())}render(){return e.createElement("div",{className:_().container},e.createElement("div",{className:_().flexTabContainer,ref:this.scrollRef},this.renderScrollableTabs()),[this.renderIndicatorMask("left"),this.renderIndicatorMask("right")])}constructor(w){super(w),A(this,"handleScroll",k=>{const{tabWidth:q}=this.props,{scrollLeft:F,scrollWidth:z,clientWidth:j}=k.target;this.setState({leftIndicatorVisible:F>q*.5,rightIndicatorVisible:F+j+q*.5<z})}),A(this,"handleTabClick",k=>{let{currentTab:q,index:F}=k;this.setState({active:F}),this.scrollTo(F),q.onClick&&q.onClick()}),A(this,"prevTab",()=>{const k=this.scrollRef.current.scrollLeft/this.props.tabWidth;this.scrollTo(k)}),A(this,"nextTab",()=>{const{tabWidth:k}=this.props,q=(this.scrollRef.current.scrollLeft+k*1.5)/k;this.scrollTo(q)}),this.scrollRef=e.createRef(),this.state={active:Math.min(w.defaultTabIndex,w.tabs.length-1),leftIndicatorVisible:!1,rightIndicatorVisible:!1}}}A(D,"propTypes",{defaultTabIndex:g().number,tabs:g().array.isRequired,tabWidth:g().number,scrollDurationMS:g().number}),A(D,"defaultProps",{defaultTabIndex:0,scrollDurationMS:200,tabWidth:140,tabs:[]});const B=D;var N=t(912289),P=t(101246),x=t(924647);YUI.add("squarespace-dialog",function(R){R.namespace("Squarespace"),R.Global.OPEN_DIALOGS=R.Global.OPEN_DIALOGS||[],R.Squarespace.DialogStates={CLOSED:1,EDITING:2,LOADING:3,CLOSING:4,SAVING:5,MOVING:6},R.Squarespace.EditingDialog=Class.extend(R.Squarespace.ZombieGizmo,{_name:"EditingDialog",_events:{show:{},shown:{},aftershowanim:{},"align-to-anchor":{},"aligned-to-anchor":{},loading:{},"cancel-loading":{},"loading-ready":{},ready:{},drag:{},hide:{},hidden:{},close:{},closed:{},canceled:{},"cancel-clicked":{},"overlay-click":{},"render-anchor":{},datachange:{},datachanged:{},"send-requested":{emitFacade:!0},"remove-requested":{},"data-saved":{},"auto-save":{},"auto-save-requested":{emitFacade:!0},"allow-editing":{},"editing-allowed":{},"show-errors":{},"local-errors":{}},initialize:function(w){this._super(w),this.setParams(w),this._setState("CLOSED"),this.bodyEvents=[],this.buttonEvents=[],this.globalEvents=[],this.childDialogs=[],this.verticalFields=[],this.timers=[],this.fields={},this.reactComponentContainers=[],this.reactEls=[],this.sections={},this._noNameFields=[],this._setEdited(!1),this.NOTCH_WIDTH=20,this.BUTTONS_BASE_IDX=100,this.NOTCH_HEIGHT=11,this.lastTabIndex=1,this.on("datachange",this.onDataChange,this),this.on("duplicate",this.markDuplicateLifecycle,this),this.__legacyRouterUnlisten||(this.__legacyRouterUnlisten=n.Z.onChange(this.close.bind(this),!1)),this.__legacyRouterUnlistenBefore||(this.__legacyRouterUnlistenBefore=n.Z.onBeforeChange((function(k,q){if(this.isVisible()&&this.params.discardChangesConfirmation){var F=this.canClose((function(){this.saveAndClose(),q()}).bind(this),function(){this.cancel(),q()},function(){q(!1)});F&&q()}else q()}).bind(this))),this.__legacyRouterUnload||(this.__legacyRouterUnload=n.Z.onBeforeUnload((function(){if(this.isVisible()&&this.params.discardChangesConfirmation&&(this.edited||this.editedSinceLastSave))return(0,r.t)("You have unsaved changes.",null,{project:"scripts-v6.dialog"})}).bind(this))),this._debug=new R.Squarespace.Debugger({name:"EditingDialog",output:!1}),this.publish("show",{prefix:"EditingDialog",broadcast:2,emitFacade:!0}),this.publish("dismiss",{prefix:"EditingDialog",broadcast:2,emitFacade:!0}),this.publish("tab-shown",{prefix:"EditingDialog",broadcast:2,emitFacade:!0}),this.publish("button-click",{prefix:"EditingDialog",broadcast:2,emitFacade:!0,preventable:!1})},markDuplicateLifecycle:function(){this.isDuplicating=!0,this.once("canceled",function(){this.isDuplicating=!1})},markCancelLifecycle:function(){this.isCanceling=!0,this.once("canceled",function(){this.isCanceling=!1})},defaultOpts:{tabs:[],initialData:{},buttons:[],style:"standard",colorScheme:"light",buttonAlign:"right",position:"center",verticalHeight:"fixed",flyoutPointerDirection:"left",closingText:(0,r.t)("Canceled\u2026",null,{project:"scripts-v6.dialog"}),savingText:(0,r.t)("Saving\u2026",null,{project:"scripts-v6.dialog"}),loadingText:(0,r.t)("Loading\u2026",null,{project:"scripts-v6.dialog"}),top:60,closeOthers:!0,disableTips:!0,closeable:!0,autoFocus:!0,discardChangesConfirmation:!0,overlay:!1,validateActiveTabOnly:!1,edgeMargin:11,initialDataByReference:!1,constrain:!1,frameless:!1},getName:function(){return this.params.name},getInitialData:function(){return this.params.initialData},setParams:function(w){if(!w){this.params=R.merge(this.defaultOpts,{});return}this.params=R.merge(this.defaultOpts,w||{}),this.params.primaryTabs&&(this.params.tabs=this.params.tabs.concat(this.params.primaryTabs),delete this.params.primaryTabs),this.params.secondaryTabs&&(this.params.tabs=this.params.tabs.concat(this.params.secondaryTabs),delete this.params.secondaryTabs),(!this.params.tabs||this.params.tabs.length===0)&&this.params.fields&&(this.params.tabs=[{fields:this.params.fields}]),this.params.tabs[0].tabTitle||(this.params.tabs[0].tabTitle=(0,r.t)("Item",null,{project:"scripts-v6.dialog"})),this.params.tabs[0].name||(this.params.tabs[0].name="item"),this.params.style==="transparent"&&(this.params.disableSaveOverlay=!0),!w.discardChangesConfirmation&&this.params.buttons.length===0&&(this.params.discardChangesConfirmation=!1),this.definitionChanged=!0},show:function(w){if(this.fire("show"),this._debug.log("Showing",["showParams",w],["this.params",this.params]),this.moving&&(this._setState("EDITING"),this.animation&&this.animation.stop(),this.fire("cancel-loading")),!(this.destroyTimer||this._isState("LOADING")||this._isState("CLOSING"))){if(R.Squarespace.ToolTipManager&&(this.params.disableTips===!1?R.Squarespace.ToolTipManager.enableTooltips():this.params.disableTips&&R.Squarespace.ToolTipManager.disableTooltips()),this.anchorEl&&this.anchorEl.removeClass("targeted"),w&&this._setShowParams(w),this.params.parentDialog&&this.params.parentDialog.addChildDialog(this),!this._isState("CLOSED")){if(this.anchorEl)this.anchorEl.addClass("targeted");else return;this._setState("LOADING"),this.moving=!0,this.updateTitle(),this.fire("loading"),this._updatePosition(!1),this.position&&(this.animation=this._anim({node:this.el,to:{left:this.position.getX()+"px",top:this.position.getY()+"px"},duration:.25,easing:R.Easing.easeOutStrong}),this.animation.on("end",function(){this.fire("loading-ready"),this.dataReady()},this),this.animation.run());return}if(this.definitionChanged=!1,this.params.closeOthers)for(var k=0,q=R.Global.OPEN_DIALOGS.length;k<q;++k)R.Global.OPEN_DIALOGS[k].cancel();R.Global.OPEN_DIALOGS.push(this),R.one(document.body).addClass("dialog-open"),this.fire("loading"),this._setState("LOADING"),this.timers.push(R.later(100,this,function(){this.params.closeable&&R.Squarespace.EscManager.addTarget(this),this.globalEvents.push(R.on("resize",this.onResize,R.one(window),this))})),this._addTitleEl(),this._addBodyEl(),this.mainEl=R.Node.create('<div class="main-container"></div>').append(this.titleEl).append(this.bodyEl).append(this.controlsEl);var F=x._y+" ";this.params.frameless?F+="frameless-dialog-wrapper ":this.params.disableStandardDialogWrapperClass||(F+="standard-dialog-wrapper "),F+=(0,s.Z)("{sub1} {sub2} buttons-{sub3}",{sub1:this.params.style,sub2:this.params.colorScheme,sub3:this.params.buttonAlign}),this.params.name&&(F+=" dialog-"+(0,u.vv)(this.params.name)),this.el=R.Node.create('<div class="'+F+'"></div>').setAttribute("data-no-focus-lock","").append(this.mainEl),this.bodyEvents.push(this.el.on("click",function(X){X.target.ancestor(".sqs-button",!0)||(this.cancelChildDialogs(),this.fire("click",X))},this)),this.params.zIndex?this.zIndex=this.params.zIndex:(R.Squarespace.DIALOG_ZINDEX_BASE+=10,this.zIndex=R.Squarespace.DIALOG_ZINDEX_BASE),this.el.setStyle("zIndex",this.zIndex),this.params.draggable&&this.enableDragging(),this.params.hidable&&this._addHideEl(),this.params.headerButton&&this._addHeaderButtonEl(),this.buttonHolder=R.Node.create("<div>").addClass("button-holder"),this.autosaveEl=R.Node.create("<div>").addClass("autosave-state"),this.buttonStateEl=R.Node.create('<div class="sqs-text button-state-label">  <input type="text" readonly="readonly" value="'+(this.params.buttonStateMessage?this.params.buttonStateMessage:"")+'"></div>'),this.controlsEl&&(this.controlsEl.append(this.buttonStateEl),this.controlsEl.append(this.autosaveEl),this.controlsEl.append(this.buttonHolder),this.params.tabs&&this._updateControlsForTab(this.params.tabs[0]));var z;if(this.anchorEl?z=this._positionWithAnchorEl():z=this._positionWithDefault(),this.params.loadingState){var j=this._anim({node:this.el,to:z[1]?{opacity:.9,top:z[1]}:{opacity:.9},duration:.15,easing:R.Easing.easeOutStrong});j.on("end",function(){this.fire("loading-ready")},this),j.run()}else this.dataReady();(this.params.verticalHeight==="full"||this.params.verticalHeight==="fit")&&(this.el.setStyles({top:this.params.edgeMargin+"px",bottom:this.params.edgeMargin+"px"}),this.params.top=this.params.edgeMargin),this.params.overlay&&(this.overlayEl=R.Node.create("<div>").addClass(x.jI),this.overlayEl.setStyle("zIndex",this.zIndex-1),this.overlayEl.addClass("hidden"),R.one(document.body).append(this.overlayEl),R.soon((function(){this.overlayEl.removeClass("hidden")}).bind(this)),this.globalEvents.push(R.on("click",this.onOverlayClick,this.overlayEl,this))),this.moveIntoView(),R.later(300,this,function(){this._shown=!0,this.fire("shown",this)})}},_setShowParams:function(w){w.data&&(this.data=w.data),w.anchor&&(this.anchorEl=w.anchor),w.top&&(this.params.top=w.top),w.flyoutPointerDirection&&(this.params.flyoutPointerDirection=w.flyoutPointerDirection)},_addHeaderButtonEl:function(){var w=R.Node.create('<div class="header-button"></div>'),k=R.Node.create('<input type="button" value="'+this.params.headerButton.title+'" />');k.setData("type",this.params.headerButton.type),R.on("click",this.params.headerButton.onclick,k,this),this.el.append(w.append(k))},_addBodyEl:function(){this.bodyEl=R.Node.create('<div class="body-block"></div>'),this.params.buttons.length!==0?this.controlsEl=R.Node.create('<div class="controls-block"></div>'):this.bodyEl.addClass("bottom")},_addTitleEl:function(){this.titleEl=R.Node.create('<div class="title-block loading"></div>'),this.titleEl.toggleClass("singleTab",this.params.tabs.length<=1),this.titleTextEl=R.Node.create('<div class="text-holder"></div>'),this.titleEl.append(this.titleTextEl),this.tabContainer=R.Node.create('<div class="tabbed-header-container"></div>'),this.titleEl.append(this.tabContainer),this.updateTitle()},_addHideEl:function(){var w=R.Node.create('<div class="dialog-close"></div>');this.el.prepend(w),w.on("click",function(){this.fire("user-close"),this.close()},this)},mount:function(){var w=this.params.mountNode||R.config.doc.body;R.one(w).append(this.el)},_positionWithAnchorEl:function(){var w,k,q,F,z,j,X=this.params.width;return this.el.setStyle("position",this.params.forcePosition||"absolute"),this.anchorEl.addClass("targeted"),this.params.flyoutPointerDirection==="left"||this.params.flyoutPointerDirection==="right"?(this.el.setStyle("width",X+this.NOTCH_HEIGHT+"px"),this.mainEl.setStyle("width",X+"px"),this.el.addClass("flyout"),this.mount()):this.params.flyoutPointerDirection==="hidden"?(this.el.setStyle("width",X+"px"),this.mainEl.setStyle("width",X+"px"),this.mount()):this.params.flyoutPointerDirection==="top"?(this._initNotchEl("top"),this.el.insertBefore(this.notchEl,this.mainEl),q=this.anchorEl.get("offsetWidth"),F=this.anchorEl.get("offsetHeight"),w=this.anchorEl.getX(),k=this.anchorEl.getY()+F,X>q&&(w-=(X-q)/2),this.currentXY=[w,k-3],this.notchEl.setStyle("marginLeft",(X-33)/2+"px"),z=this.params.left||this.currentXY[0],j=this.params.top||this.currentXY[1],this.el.setStyles({left:z+"px",top:j+"px",width:X+"px"}),this.mainEl.setStyle("width",X+"px"),this.mount()):this.params.flyoutPointerDirection==="bottom"?(this._initNotchEl("top","bottom"),this.el.append(this.notchEl),q=this.anchorEl.get("offsetWidth"),F=this.anchorEl.get("offsetHeight"),w=this.anchorEl.getX(),k=this.anchorEl.getY()+F,X>q&&(w-=(X-q)/2),this.currentXY=[w,k-3],this.notchEl.setStyle("marginLeft",(X-33)/2+"px"),z=this.params.left||this.currentXY[0],j=this.params.top||this.currentXY[1],this.el.setStyles({left:z+"px",top:j+"px",width:X+"px"}),this.mainEl.setStyle("width",X+"px"),this.mount()):(this.currentXY=[this.anchorEl.getX()+(this.anchorEl.get("offsetWidth")-X)/2,this.anchorEl.getY()+(this.anchorEl.get("offsetHeight")-this.params.height)/2-15],this.el.setStyles({left:this.currentXY[0]+"px",top:this.currentXY[1]+"px",width:X+"px"}),this.el.setStyle(),this.mainEl.setStyle("width",X+"px"),k=this.currentXY[1],this.mount()),[w,k]},_positionWithDefault:function(){var w,k,q=R.one(document).get("winWidth");return this.el.setStyle("position","fixed"),this.params.position==="right"?(this.el.setStyles({right:this.params.edgeMargin+"px",top:"0px"}),this.params.edgeMargin===0&&(this.titleEl.setStyle("border-radius","0px"),this.controlsEl.setStyle("border-radius","0px"))):typeof this.params.left<"u"?this.currentXY=[this.params.left,this.params.top]:(this.currentXY=[(q-this.params.width)/2,this.params.top],this.el.setStyle("position","fixed")),this.currentXY&&(this.el.setStyles({left:this.currentXY[0]+"px",top:this.currentXY[1]+"px"}),k=this.currentXY[1]),this.el.setStyle("width",this.params.width+"px"),this.mainEl.setStyle("width",this.params.width+"px"),this.mount(),[w,k]},isOpen:function(){return this._isState("LOADING")||this._isState("EDITING")},disableBodyScroll:function(){this.oldBodyScroll=R.one("body").getStyle("overflow"),R.one("body").setStyle("overflow","hidden")},restoreBodyScroll:function(){this.hasOwnProperty("oldBodyScroll")&&(this.oldBodyScroll?R.one("body").setStyle("overflow",this.oldBodyScroll):R.one("body").setStyle("overflow",null))},getAnchorEl:function(){return this.anchorEl},getChildDialogs:function(){return this.childDialogs},addChildDialog:function(w){this.childDialogs.indexOf(w)<0&&(this.cancelChildDialogs(),this._debug.log("addChildDialog",w),this.childDialogs.push(w)),w.params.parentDialog=this},removeChildDialog:function(w){this.childDialogs=R.Array.filter(this.childDialogs,function(k){return k!==w},this)},enableDragging:function(){this.titleEl.setStyle("cursor","move"),this.dd=new R.DD.Drag({node:this.el,handles:this.titleEl&&this.titleEl._node?[this.titleEl]:null}),this.dd.on("drag:start",this.cancelChildDialogs,this),this.dd.on("drag:drag",function(w){this.fire("drag",w)},this),this.dd.on("drag:end",function(w){this.moveIntoView()},this)},temporaryHide:function(w){this.fire("hide"),R.Array.each(this.childDialogs,function(k){k.temporaryHide()},this),this.hideAnim&&this.hideAnim.stop(),this._hideAnimEvent&&this._hideAnimEvent.detach(),this.overlayHideAnim&&this.overlayHideAnim.stop(),this._overlayHideAnimEvent&&this._overlayHideAnimEvent.detach(),this.hideAnim=this._anim({node:this.el,to:{opacity:0},duration:.35,easing:R.Easing.easeOutStrong}),this.overlayEl&&(this.overlayHideAnim=this._anim({node:this.overlayEl,to:{opacity:0},duration:.35,easing:R.Easing.easeOutStrong}),this._overlayHideAnimEvent=this._subscribe(this.overlayHideAnim,"end",function(){this.overlayEl.setStyle("display","none")})),this._hideAnimEvent=this._subscribe(this.hideAnim,"end",function(){this.el.setStyle("display","none"),this.fire("hidden",this)}),w?(this.el.setStyle("display","none"),this.overlayEl&&this.overlayEl.setStyle("display","none"),this.fire("hidden",this)):(this.hideAnim.run(),this.overlayEl&&this.overlayHideAnim.run())},temporaryShow:function(w){this.fire("show",this),w&&this._setShowParams(w),this.hideAnim&&this.hideAnim.stop(),this._hideAnimEvent&&this._hideAnimEvent.detach(),this.overlayHideAnim&&this.overlayHideAnim.stop(),this.overlayEl&&(this.overlayEl.setStyle("display","block"),this.overlayHideAnim=this._anim({node:this.overlayEl,to:{opacity:this.params.overlay},duration:.35,easing:R.Easing.easeOutStrong}),this.overlayHideAnim.run()),this.el.setStyle("display","block"),this.hideAnim=this._anim({node:this.el,to:{opacity:1},duration:.35,easing:R.Easing.easeOutStrong}),this._hideAnimEvent=this._subscribeOnce(this.hideAnim,"end",function(){this.fire("shown",this)}),this.hideAnim.run(),this._showChildren(),this.moveIntoView()},_applyMethodToChildren:function(){var w=arguments[0],k=Array.prototype.slice.call(arguments,1);R.Array.each(this.childDialogs,function(q){q[w].apply(q,k)},this)},_showChildren:function(){this._applyMethodToChildren("temporaryShow")},_hideChildren:function(){this._applyMethodToChildren("temporaryHide")},cancelChildDialogs:function(){this._applyMethodToChildren("cancel"),this.childDialogs=[]},isVisible:function(){return!this._isState("CLOSED")},_updatePosition:function(w){if(this.el&&this.anchorEl){var k=this.el.get("offsetHeight"),q=this.params.flyoutPointerDirection;if(q==="top"||q==="bottom")return;if(q==="centered"){var F=this.anchorEl.getXY();this.position=new R.Squarespace.Position({x:F[0]+(this.anchorEl.get("offsetWidth")-this.params.width)/2,y:F[1]+(this.anchorEl.get("offsetHeight")-k)/2,w:this.params.width,h:k}),this.position.nudgeFix()}else this.position=new R.Squarespace.Position({avoidElX:this.anchorEl,avoidElY:this.anchorEl,xdir:"right",ydir:"bottom",x:this.anchorEl.getX(),y:this.anchorEl.getY(),xo:2,yo:0,w:this.params.width+this.NOTCH_HEIGHT,h:k}),this.position.reflectFix();q!=="hidden"&&q!=="centered"&&this._reattachNotchEl(),w&&(this.el.setXY(this.position.getXY()),this._alignNotch(this.anchorEl))}},_reattachNotchEl:function(){var w=this.position.xdir==="right"?"left":"right";this.notchEl?(this.notchEl.set("className","flyout-notch-"+w),this.notchEl.inDoc()&&this.notchEl.remove()):this._initNotchEl(w),this.position.xdir==="right"?this.el.insertBefore(this.notchEl,this.mainEl):this.el.append(this.notchEl)},_initNotchEl:function(w,k){this.notchEl=R.Node.create('<div class="flyout-notch-'+w+'">&nbsp;</div>'),R.Lang.isString(k)&&this.notchEl.addClass(k)},_alignNotch:function(w){if(this.notchEl){var k=this.el.get("offsetHeight"),q=Math.max(k-36,220),F=12,z=11,j=F,X=this.el.get("region"),J=w.get("region"),Q=J.top+J.height/2;J.top>X.top&&(j=Q-X.top-z,j=Math.min(q,Math.max(F,j))),this.notchEl.setStyle("marginTop",j+"px")}},onDataChange:function(w){this.fire("render-anchor",this.getData()),this.setEdited(),this._debug.log("onDataChange"),this.fire("datachanged")},onOverlayClick:function(w){w.halt(),this.fire("overlay-click"),this.params.disableOverlayCancel||(this.isCanceling=!0,this.close())},setEdited:function(){this._isState("SAVING")||this._setEdited(!0)},clearEdited:function(){this._setEdited(!1)},_setEdited:function(w){this.edited=!!w,this.editedSinceLastSave=!!w},getEditedSinceLastSave:function(){return this.editedSinceLastSave},getNextTabIndex:function(){return this.lastTabIndex++},getEdited:function(){return this.edited},isState:function(w){return this.getState()===w},getState:function(){return this.state},setInitialData:function(w){this.params.initialDataByReference?this.params.initialData=w:this.params.initialData=R.clone(w,!0),this.fields&&R.Object.each(this.fields,function(q,F){this._isDialogField2(q)&&q.get("name")&&!R.Lang.isUndefined(this.params.initialData[q.get("name")])&&(q.set("data",this.params.initialData[q.get("name")],{source:"setInitialData"}),q.setCurrentDataAsInitial())},this)},getBodyHeight:function(){return this.params.height?this.params.height:this._getFullHeight()},setActiveFlyout:function(w){this.activeFlyout&&this.activeFlyout.field.closeFlyout(),R.later(10,this,function(){this.activeFlyout=w})},clearActiveFlyout:function(){this.activeFlyout=null},onResize:function(){var w=R.one(document).get("winWidth");if(!this.anchorEl&&!this.params.draggable){var k={};(this.params.verticalHeight==="full"||this.params.verticalHeight==="fit")&&(this.bodyHeight=this.getBodyHeight(),this.params.verticalHeight==="fit"&&this.bodyHeight>this.observedHeight&&(this.bodyHeight=this.observedHeight),this.bodyEl.setStyle("height",this.bodyHeight+"px"),this.bodyEl.all(".scrollable-body").each(function(q){q.setStyles({height:this.bodyHeight-33+"px",paddingBottom:"33px"})},this),this.resizeVerticalFields()),this.params.position!=="right"&&(this.hideErrors(),k.left=(w-this.params.width)/2,k.top=this.params.top,this.params.left&&(k.left=this.params.left)),this.currentXY=[k.left,k.top],this.moveAnim&&this.moveAnim.stop(),this.moveAnim=this._anim({node:this.el,to:k,duration:.15,easing:R.Easing.easeOutStrong}),this.moveAnim.run()}this.moveIntoView()},moveIntoView:function(w){if(!(!this.params.draggable&&!this.params.constrain)){w&&!this.anchorEl&&!this.position&&(w=!1);var k={},q=this.el.get("docScrollX"),F=this.el.get("docScrollY"),z=this.el.get("winWidth")+q,j=this.el.get("winHeight"),X=j+F,J=this.el.getY(),Q=this.el.getX();J<F&&(k.top=F+this.params.edgeMargin),J+this.el.get("offsetHeight")>X&&(k.top=X-this.el.get("offsetHeight")-this.params.edgeMargin),Q+this.el.get("offsetWidth")>z&&(k.left=z-this.el.get("offsetWidth")-this.params.edgeMargin),Q<q&&(k.left=q+this.params.edgeMargin),w&&(k.top=k.top?Math.max(k.top,this.position.getY()):this.position.getY()),this.params.forcePosition==="fixed"&&R.Lang.isValue(k.top)&&k.top>this.el.get("winHeight")&&(k.top=Math.max(0,j-this.el.get("offsetHeight")));var ie=R.Object.size(k)!==0;ie&&this._anim({node:this.el,to:k,duration:.3,easing:R.Easing.easeOutStrong}).run(),this.preferredHeight+120>j?(this.bodyHeight=j-120,this.bodyEl.setHeight(this.bodyHeight)):this.bodyHeight!==this.preferredHeight&&(this.bodyHeight=this.preferredHeight,this.bodyEl.setHeight(this.preferredHeight))}},scrollIntoView:function(w){this.el.scrollIntoView(w)},showErrors:function(w){this.fire("show-errors",w),this.allowEditing(),this.currentErrors=w,this.errorCount=R.Object.size(w),this.errorsByTab={},R.Object.each(w,function(k,q){var F=this.getField(q);F&&(this.errorsByTab[F.tab.name]?this.errorsByTab[F.tab.name]++:this.errorsByTab[F.tab.name]=1)},this),this.renderNavigationTabs(this.currentErrors),this.activateErrors()},clearError:function(w){this.currentErrors&&this.currentErrors[w.getName()]&&(this.errorsByTab[w.tab.name]--,delete this.currentErrors[w.getName()],this.errorCount--,this.errorsByTab[w.tab.name]===0&&this.renderNavigationTabs(this.currentErrors))},activateErrors:function(){if(this.errorCount){var w=this.currentTab.tabFields,k=null;R.Array.each(w,function(q){this.currentErrors[q.getName()]&&(k||(k=q,k.scrollIntoView()),q.showError(this.currentErrors[q.getName()]))},this),k&&R.Lang.isFunction(k.focus)&&k.focus()}},hideErrors:function(){if(this.currentTab){var w=this.currentTab.tabFields||[];R.Array.each(w,function(k){R.Lang.isFunction(k.hideError)&&k.hideError()},this),this.renderNavigationTabs()}},setAndUpdateTitle:function(w){this.title=w,this.updateTitle()},updateTitle:function(w){var k=this.params.tabs[this.currentTabIndex];k&&this.currentTab&&k.title!==this.currentTab.title&&(this.currentTab.title=k.title),R.Lang.isUndefined(w)&&(w=this.state);var q;R.Lang.isString(this.title)?q=this.title:this.currentTab&&this.currentTab.title?q=this.currentTab.title:q=this.params.title;var F="";switch(this.params.subtext&&(F='<div class="title-subtext">'+this.params.subtext+"</div>"),w){case R.Squarespace.DialogStates.LOADING:this.params.loadingText&&this.setTitleHtml('<div class="title-text">'+this.params.loadingText+"</div>"+F);break;case R.Squarespace.DialogStates.EDITING:q&&this.setTitleHtml('<div class="title-text">'+q+"</div>"+F);break;case R.Squarespace.DialogStates.SAVING:this.params.savingText&&this.setTitleHtml('<div class="title-text">'+this.params.savingText+"</div>"+F);break;default:break}},setTitleHtml:function(w){this.titleTextEl.setHTML(w)},setData:function(w,k){if(this.currentTab){k=k||{};var q=k.silent,F=k.ignoreUndefinedKeysInData;R.Array.each(this.currentTab.tabFields,function(z,j){if(z.setValue){var X=w[z.getName()];if(!w.hasOwnProperty(z.getName())){if(F)return;X=o()(w,z.getName())}z.setValue(R.Lang.isValue(X)?X:null),q||this.fire("datachange",z)}},this)}},focusTab:function(){if(this.currentTab&&(this.fire("tab-focused",{tabName:this.currentTab.name}),R.Lang.isArray(this.currentTab.tabFields))){if((0,P.r)())return;R.Array.some(this.currentTab.tabFields,function(w,k){var q=!!(w.setValue&&w.focus),F=this._isDialogField2(w),z=!!(F&&w.get("focusable"));if(q&&!F||z)return w.focus(),!0},this)}},_getFullHeight:function(){return R.one(document).get("winHeight")-2*this.params.edgeMargin-this.controlsHeight-this.titleEl.get("offsetHeight")},dataReady:function(){var w;if(this.clearEdited(),this._setState("EDITING"),this.titleEl.removeClass("loading"),this.params.initialData||(this.params.initialData={}),this.bodyHeight=this.params.height,(this.params.verticalHeight==="full"||this.params.verticalHeight==="fit")&&(this.bodyHeight=this._getFullHeight()),this.preferredHeight=this.bodyHeight,this.bodyEl.setStyle("width",this.params.width+"px"),this.params.overlay&&!this.params.doNotDisableBodyScroll&&this.disableBodyScroll(),this.moving)this.moving=!1,this.updateTitle(),this.definitionChanged?(this.definitionChanged=!1,this.destroyBody(),this.destroyButtons(),this.render(),w=this._anim({node:this.bodyEl,duration:.25,easing:R.Easing.easeOutStrong,to:{height:this.bodyHeight}}),w.on("end",function(){this.fire("ready")},this),w.run()):(this.rendered?(this.setData(this.params.initialData),this.params.autoFocus&&this.focusTab()):this.once("rendered",function(){this.setData(this.params.initialData),this.params.autoFocus&&this.focusTab()},this),this.fire("ready")),this.clearEdited();else if(this.currentTabIndex=0,this.currentTab=this.params.tabs[0],this.updateTitle(),this.params.loadingState)w=this._anim({node:this.el,to:{opacity:1},duration:.15,easing:R.Easing.easeOutStrong}),w.run(),this.controlsEl&&(w=this._anim({node:this.controlsEl,to:{height:this.controlsHeight},duration:.15,easing:R.Easing.easeOutStrong}),w.run()),w=this._anim({node:this.bodyEl,to:{height:this.bodyHeight},duration:.25,easing:R.Easing.easeOutStrong}),w.on("end",function(){this.render(),this.fire("ready")},this),w.run();else{this.render(),this.currentData=this.params.initialData;var k=this,q=function(){k.el&&k.el.setStyle("transform",null)};switch(this.params.showAnim){case"custom":this.params.customShowAnim(this.el,function(){k.fire("ready")});break;case"fade":this.el.transition({opacity:{duration:.2,value:1},easing:"ease-out"},function(){k.fire("ready"),q()});break;case"noshow":this.el.setStyles({display:"none"}),k.fire("ready");break;default:k.fire("ready"),this.el.addClass("visible");break}}},containsNode:function(w){return this.bodyEl&&this.bodyEl.contains(w)},activateTab:function(w){this.hideErrors();var k=parseInt(w.index,10);this.tabbedHeader&&k!==this.tabbedHeader.state.active&&this.tabbedHeader.setState({active:k}),this.currentTab||(this.currentTab=w),R.Array.each(this.params.tabs,function(z,j){j===k&&this._showPanelByIndex(k)},this);var q=this.currentTab.reactData,F=this.currentTab.tabPanelObj.getDOMNode();q&&this.reactComponentContainers.indexOf(F)===-1&&this._renderReactComponent(q,F)},_showField:function(w){(this._isDialogField2(w)&&w.get("visible")||!this._isDialogField2(w)&&!w.config.hidden)&&w.show(!0)},_updateControlsForTab:function(w){this.controlsElButtonDisplayClass&&this.controlsEl.removeClass(this.controlsElButtonDisplayClass),w.hasOwnProperty("buttonDisplayClass")?(this.buttonStateEl.setStyle("display","block"),this.controlsHeight=109,this.controlsEl.addClass(w.buttonDisplayClass),this.controlsElButtonDisplayClass=w.buttonDisplayClass):(this.buttonStateEl.setStyle("display","none"),this.controlsHeight=this.params.style==="standard"?65:60,this.controlsElButtonDisplayClass=null),this._shown&&this.onResize()},_showNewPanel:function(w,k,q,F,z,j){this.currentTab=w,this.currentTabIndex=k,this.updateTitle(),w.tabPanelObj.removeClass("hidden"),this._updateControlsForTab(w),this.params.noTabAnim?(q=this.currentTab.tabFields,R.Array.forEach(q,function(X){this._showField(X)},this),this.focusTab(),this.activateErrors()):(F=this._anim({node:w.tabPanelObj,to:{left:0},duration:z,easing:j}),F.on("end",function(){var X=this.currentTab.tabFields;R.Array.forEach(X,function(J){this._showField(J)},this),this.focusTab(),this.activateErrors()},this),F.run(),w.tabPanelObj.animation=F),this.currentTab.height&&(this.currentTab.tabPanelObj.setStyle("height",this.currentTab.height-50),this._anim({node:this.bodyEl,to:{height:this.currentTab.height},duration:z,easing:j}).run()),this.bodyEl.toggleClass("scrollable",!!this.currentTab.scroll),this.currentTab.scroll?this.bodyEl.plug(R.Squarespace.Plugin.ScrollLock):this.bodyEl.unplug(R.Squarespace.Plugin.ScrollLock),this.fire("tab-shown",{name:this.currentTab.name,title:this.currentTab.title})},_showPanelByIndex:function(w){if(w!==this.currentTabIndex){var k,q=.5,F=R.Easing.easeBothStrong,z=this.params.tabs[w],j=this.params.tabs[this.currentTabIndex];this.params.noTabAnim||(z.tabPanelObj.animation&&z.tabPanelObj.animation.stop(!0),j.tabPanelObj.animation&&j.tabPanelObj.animation.stop(!0));var X=j.tabFields;if(this.params.noTabAnim)j.tabPanelObj.setStyles({opacity:1,zIndex:"300"}),j.tabPanelObj.addClass("hidden");else{z.tabPanelObj.setStyles({left:(z.index>j.index?1:-1)*this.params.width+"px",opacity:1,zIndex:"300"}),j.tabPanelObj.setStyle("zIndex","0");var J=(z.index<j.index?1:-1)*this.params.width;k=this._anim({node:j.tabPanelObj,to:{left:J+"px"},duration:q,easing:F});var Q=this._showNewPanel.bind(this);k.on("end",function(){this.tab.addClass("hidden"),i.isSubDesktop()&&Q(z,w,X,k,.4,F)},{tab:j.tabPanelObj}),k.run(),j.tabPanelObj.animation=k}i.isDesktop()&&this._showNewPanel(z,w,X,k,q,F)}},renderNavigationTabs:function(w){var k=106,q=this.tabContainer.width()/this.params.tabs.length,F=Math.max(k,q),z=[];R.Array.each(this.params.tabs,function(j,X){if(j.index=X,z.push({tabTitle:j.tabTitle,onClick:this.params.tabs.length>1?this.activateTab.bind(this,j):null}),!this.rendered){var J=!this.params.defaultTab&&X===0||this.params.defaultTab&&this.params.defaultTab===j.name;J&&(this.currentTab=j,this.currentTabIndex=X),this.renderTab(j,J)}},this),R.Object.each(w,function(j,X){var J=this.getField(X);J&&J.tab&&(z[J.tab.index].error=!0)},this),z.length>1&&(this.tabbedHeader=a.render(e.createElement(B,{defaultTabIndex:this.currentTabIndex,tabs:z,tabWidth:F,onMount:R.bind(function(){this.onResize(R.one(window),this)},this)}),this.tabContainer.getDOMNode()))},render:function(){if(!this.rendered){switch(this.observedHeight=0,this.renderNavigationTabs(),this.renderButtons(),this.bodyHeight||(this.bodyHeight=this.observedHeight+14,this.preferredHeight=this.bodyHeight),this.params.verticalHeight){case"fit":this.bodyHeight>this.observedHeight&&(this.bodyHeight=this.observedHeight);break;case"fixed":case"full":var w=this.titleEl?this.titleEl.height():0,k=this.controlsEl?this.controlsEl.height():0;window.innerHeight<w+k+this.bodyHeight+this.params.top&&(this.el.setStyles({top:this.params.edgeMargin+"px"}),this.params.top=this.params.edgeMargin,this.bodyHeight=window.innerHeight-this.params.top*2-w-k);break}this.fire("rendered"),this.rendered=!0,this.updateTitle(R.Squarespace.DialogStates.EDITING),this.bodyEl.setStyle("height",this.bodyHeight+"px"),this._updatePosition(!0),this.params.autoFocus&&this.focusTab(),this.onResize()}},getButtons:function(){return this.params.buttons},setButtons:function(){var w=arguments;arguments.length===1&&R.Lang.isArray(arguments[0])&&(w=arguments[0]),this.params.buttons=[],this.destroyButtons(),w.forEach(function(k){this.params.buttons.push(k)},this),this.isVisible()&&this.renderButtons()},_removeButton:function(w){var k=R.Array.filter(this.getButtons(),function(q,F){return q!==w&&q.type!==w},this);this.setButtons(k)},_getNextTabIndex:function(){return this.BUTTONS_BASE_IDX+this.lastTabIndex++},disableButton:function(w){w.set("disabled","disabled"),w.ancestor().addClass("disabled")},enableButton:function(w){w.removeAttribute("disabled"),w.ancestor().removeClass("disabled")},renderButtons:function(){var w="javascript:noop();";this.saveAndCloseButton=R.Node.create(R.Lang.sub('<input class="saveAndClose" tabIndex="{tabIndex}" type="button" data-test="dialog-saveAndClose" value="'+(0,r.t)("Save &amp; Close",null,{project:"scripts-v6.dialog"})+'" />',{tabIndex:this._getNextTabIndex()})),this.saveButton=R.Node.create(R.Lang.sub('<input class="save" tabIndex="{tabIndex}" type="button" value="'+(0,r.t)("Save",null,{project:"scripts-v6.dialog"})+'" data-test="dialog-save"  />',{tabIndex:this._getNextTabIndex()})),this.cancelButton=R.Node.create(R.Lang.sub('<a class="cancel" href={href} tabIndex="{tabIndex}" data-test="dialog-cancel" >'+(0,r.t)("Cancel",null,{project:"scripts-v6.dialog"})+"</a>",{tabIndex:this._getNextTabIndex(),href:w})),this.removeButton=R.Node.create(R.Lang.sub('<input class="remove" tabIndex="{tabIndex}" type="button" value="'+(0,r.t)("Remove",null,{project:"scripts-v6.dialog"})+'"  data-test="dialog-remove" />',{tabIndex:this._getNextTabIndex()})),this.buttonEvents.push(R.on("click",function(J){J.halt(),this._getButtonClickHandler("saveAndClose",this.saveAndClose)(J)},this.saveAndCloseButton,this),R.on("click",this._getButtonClickHandler("save",this.save),this.saveButton),R.on("click",this._getButtonClickHandler("remove",this.remove),this.removeButton),R.on("click",this._getButtonClickHandler("cancel",this.markCancelLifecycle),this.cancelButton),R.on("click",this._getButtonClickHandler("close",this.close),this.cancelButton),R.on("click",this._getButtonClickHandler("cancel",this.cancelClick),this.cancelButton));var k,q=R.clone(this.params.buttons),F=this.params.buttons.length;for(F>0&&q.reverse();--F>=0;){var z;if(k=q[F],!!k){switch(k.type){case"cancel":this.cancelButton.set("innerHTML",k.title),z=R.Node.create('<div class="cancel-block"></div>'),z.append(this.cancelButton);break;case"save":this.saveButton.set("value",k.title),z=R.Node.create('<div class="button-block"></div>'),z.append(this.saveButton);break;case"remove":this.removeButton.set("value",k.title),z=R.Node.create('<div class="button-block"></div>'),z.append(this.removeButton);break;case"saveAndClose":this.saveAndCloseButton.set("value",k.title),z=R.Node.create('<div class="button-block"></div>'),z.append(this.saveAndCloseButton);break;default:var j;if(k.style==="text")j='<a href="'+w+'">'+k.title+"</a>",z=R.Node.create('<div class="cancel-block"></div>'),z.append(j);else{var X="dialog-"+k.className;j=R.Node.create('<input type="button" value="'+k.title+'" data-test="'+X+'" />'),k.className&&j.addClass(k.className),z=R.Node.create('<div class="button-block"></div>'),z.append(j)}this.publish("button-"+k.type,{emitFacade:!0,prefix:"EditingDialog",broadcast:2}),this.buttonEvents.push(R.on("click",this._getButtonClickHandler(k.type),j))}this.buttonHolder.append(z),k.disabled&&this.disableButton(j)}}},cancelClick:function(w){this.fire("cancel-click")},_getButtonClickHandler:function(w,k){return R.bind(function(q){var F=!this.fire("button-"+w);F?q.halt():R.Lang.isFunction(k)&&k.call(this,q),this.fire("button-click",{type:w})},this)},showSaveOverlay:function(w){if(!this.params.disableSaveOverlay){this.saveOverlay&&(this.saveOverlay.remove(),this.saveOverlay=null);var k=this.titleEl.get("offsetHeight"),q=this.bodyEl?this.bodyEl.get("offsetWidth"):0;this.saveOverlay=R.Node.create('<div class="save-overlay">&nbsp;</div>'),this.saveOverlay.on("mousedown",function(F){F.halt()}),this.saveOverlay.setStyles({height:this.mainEl.get("offsetHeight")-k-10+"px",marginTop:k+5+"px",width:q+"px"}),this.mainEl.append(this.saveOverlay),this.tabContainer.addClass("hidden"),this.saveOverlay.addClass("visible")}},hideSaveOverlay:function(){this.saveOverlay?(this.saveOverlay.addClass("hidden"),this.tabContainer.removeClass("hidden"),R.later(300,this,function(){this.saveOverlay&&this.saveOverlay.remove(),this.saveOverlay=null}),this._setState("EDITING"),this.updateTitle()):this._setState("EDITING")},allowEditing:function(){this.hideSaveOverlay(),this.clearEdited(),this.fire("editing-allowed"),this._setState("EDITING")},save:function(){this._showLocalErrors()||(this._debug.log("save"),this.closeOnSend=!1,this._saveData())},_showLocalErrors:function(){this.hideErrors();var w=function(ie){return ie.inActiveFrame},k=this.currentTab,q=function(ie){return ie.tab.name===k.name},F=function(ie){return w(ie)&&q(ie)},z=function(ie){return{field:ie,errors:ie.getErrors()}},j=R.Object.values(this.fields);this.params.validateActiveTabOnly?j=j.filter(F,this):j=j.filter(w,this);var X=R.Array.map(j,z),J=!1,Q={};return X.forEach(function(ie){var ce=ie.errors,pe=ce[ce.length-1];pe&&(Q[ie.field.getName()]=ce[ce.length-1],J=!0)},this),J&&this.showErrors(Q),J},saveAndShow:function(){this._showLocalErrors()||(this._debug.log("saveAndShow"),this.closeOnSend=!1,this._saveData(),this.show())},saveAndClose:function(){if(!this._showLocalErrors()){var w=this.fire("preClose");if(!w){this._debug.log("preClose returned false, save prevented");return}this._debug.log("saveAndClose"),this.params.closeable&&(this.closeOnSend=!0),this._saveData()}},_saveData:function(){if(this._debug.log("_saveData"),this._isState("SAVING")){this._debug.log("_saveData",(0,r.t)("Exiting because dialog state is in SAVING",null,{project:"scripts-v6.dialog"}));return}this.clearEdited(),this.hideErrors(),this._setState("SAVING"),this.updateTitle(),this.showSaveOverlay(),this._debug.log("_saveData","fire","send-requested"),this.fire("send-requested")},remove:function(w){w&&w.halt(),this.fire("remove-requested")},canClose:function(w,k,q){if(!this._shown)return!1;var F=R.Array.every(this.childDialogs,function(ie){return ie.canClose(this.saveAndClose,this.cancel)},this);if(!F)return!1;var z=this._isReactDataDirty(this);if((z||this.edited||this.editedSinceLastSave)&&this.params.discardChangesConfirmation&&!this._isState("SAVING")){var j=z;for(var X in this.fields){var J=this.fields[X];J.didDataChange()&&(j=!0)}if(j){var Q=new R.Squarespace.Widgets.Confirmation({render:this.el.ancestor("body")||!0,style:R.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,showOverlay:!0,"strings.confirm":(0,r.t)("Save",null,{project:"scripts-v6.dialog",notes:"Save text for 3 option dialog; oldKey: dialogSave"}),"strings.reject":(0,r.t)("Discard",null,{project:"scripts-v6.dialog",notes:"Discard text for 3 option dialog; oldKey: dialogDiscard"}),"strings.title":(0,r.t)("Review Changes",null,{project:"scripts-v6.dialog"}),"strings.message":(0,r.t)("You have made changes. Do you want to save or discard them?",null,{project:"scripts-v6.dialog"})});return Q.on("confirm",function(){this.clearEdited(),this._debug.log("canClose","calling onSuccess()",w),w.call(this)},this),Q.on("reject",function(){this.clearEdited(),this._debug.log("canClose","calling onReject()",k),k.call(this)},this),Q.on("cancel",function(){R.Squarespace.EscManager.addTarget(this),this._debug.log("canClose","onCancel"),q&&q.call(this),this.fire("cancel-close")},this),this._debug.log("canClose",!1,"Showing confirmation dialog"),!1}}return this._debug.log("canClose",!0),!0},close:function(w,k){if(this._debug.log("close",w),!this._isState("EDITING")&&!this._isState("SAVING")){this._debug.log("close","Exiting because state is in Editing or Saving."),this.isCanceling=!1;return}if(typeof k=="boolean"&&k)this._debug.log("canClose skipped due to force = true");else if(this.canClose(this.saveAndClose,this.cancel)===!1){this._debug.log("close","Exiting because canClose came back false"),this.isCanceling=!1;return}this.trackCancel(),this.isCanceling=!1,this.fire("close"),this.dismiss(!0)},trackCancel:function(){if(!(this.isDuplicating||!this.isCanceling)){var w=this.currentData;if(!(!w||!w.collectionId))try{R.Squarespace.ContentCollectionCache.getCollectionById(w.collectionId,function(q){if(q){var F=q.get("typeName")||"",z;F.indexOf("blog")>-1?z="blog":F.indexOf("event")>-1&&(z="events"),z&&(0,N.PT)({itemId:w.id,collectionType:z,collectionId:w.collectionId})}})}catch{window.SQUARESPACE_SENTRY&&window.SQUARESPACE_SENTRY.captureMessage("track cancel edit collection failed")}}},cancel:function(w){this._debug.log("cancel",w),!(!this._isState("EDITING")&&!this._isState("SAVING"))&&(this.clearEdited(),this.fire("cancel"),this.dismiss(!1))},dismiss:function(w){var k=w?R.bind(this.destroy,this):R.bind(this._finishCancelation,this);switch(this.fire("dismiss"),this._setState("CLOSING"),this.updateTitle(),this.clearEdited(),this._preDestroy(),this.hideErrors(),this.params.overlay&&this.restoreBodyScroll(),this.params.hideAnim){case"noHideAnimation":k();break;case"custom":this.params.customHideAnim(this.el,k);break;default:this.el&&this.el.removeClass("visible"),R.later(500,this,k);break}this.__legacyRouterUnlisten&&(this.__legacyRouterUnlisten(),this.__legacyRouterUnlisten=null),this.__legacyRouterUnlistenBefore&&(this.__legacyRouterUnlistenBefore(),this.__legacyRouterUnlistenBefore=null),this.params.overlay&&this.overlayEl&&(this.overlayEl.destroying=!0,this.overlayEl.addClass("hidden"),R.later(300,this,function(){this.overlayEl&&this.overlayEl.remove(),this.overlayEl=null}))},_finishCancelation:function(){this.fire("render-anchor",this.getInitialData()),this.destroy(),this._setState("CLOSED"),this.fire("canceled")},_preDestroy:function(){var w=0,k;this._preDestroyCalled=!0;var q=R.Global.OPEN_DIALOGS.indexOf(this);for(q!==-1&&R.Global.OPEN_DIALOGS.splice(q,1),R.Global.OPEN_DIALOGS.length===0&&R.one(document.body).removeClass("dialog-open"),this._applyMethodToChildren("close"),w=0,k=this.timers.length;w<k;++w)this.timers[w].cancel();this.timers=[],R.Squarespace.EscManager&&R.Squarespace.EscManager.removeTarget(this),this.activeFlyout&&this.activeFlyout.field.closeFlyout(),R.Squarespace.ToolTipManager&&this.params.disableTips&&R.Squarespace.ToolTipManager.enableTooltips(),this.firstShowEvent&&(this.firstShowEvent.detach(),this.firstShowEvent=null),this.anchorEl&&this.anchorEl._node&&this.anchorEl.removeClass("targeted")},getErrors:function(){var w=0,k={};for(var q in this.fields){var F=this.fields[q],z=!1;this._isDialogField2(F)?z=F.get("required")&&F.isEmpty():z=F.config.required&&(F.getValue()===""||F.getValue()===0),z&&(k[F.getName()]=(0,r.t)("This is a required field.",null,{project:"scripts-v6.dialog"}),w++)}return{errors:w,errorSet:k}},send:function(){var w=this.getErrors(),k=w.errors,q=w.errorSet;k?(this.showErrors(q),this.fire("local-errors")):(this.closeOnSend&&(this.saved=!0,this.closeOnSend=!1,this.close()),this.fire("sent"))},updateAutoSave:function(w,k){if(!this.autosaveEl.inDoc()){this.editedSinceLastSave=!1;return}this.autosaveEl.setStyle("display","block");var q=this._anim({node:this.autosaveEl,from:{opacity:1},to:{opacity:.5},duration:.25,easing:R.Easing.easeOutStrong});q.on("end",function(){w?this.autosaveEl.set("innerHTML",w):(this.autosaveEl.set("innerHTML",(0,r.t)('Last saved <span class="time"></span>.',null,{project:"scripts-v6.dialog"})),this.autosaveEl.one(".time").plug(R.Squarespace.RelativeTimeDisplay)),k?this.autosaveEl.addClass("error"):this.autosaveEl.removeClass("error"),this.autosaveEl.ancestor("body")&&this._anim({node:this.autosaveEl,from:{opacity:.5},to:{opacity:1},duration:.25,easing:R.Easing.easeOutStrong}).run()},this),q.run(),this.editedSinceLastSave=!1},_recordFieldData:function(w,k){R.Object.each(k.fields,function(q){if(R.Lang.isFunction(q.getValue)){var F=q.getValue();if(w[q.getName()]=F,q.getAssociatedVars!==void 0)for(var z=q.getAssociatedVars(),j=0;j<z.length;j++)w[z[j].name]=z[j].value}q.fields&&this._recordFieldData(w,q)},this)},_isReactDataDirty:function(w){var k=!1;return R.Object.each(w.reactEls,function(q){var F=q.props.getData();k=k||F.isDirty},this),k},_recordReactData:function(w,k){return R.Object.each(k.reactEls,function(q){var F=q.props.getData();w=R.merge(w,F)},this),w},getData:function(){var w={};for(var k in this.params.initialData)w[k]=this.params.initialData[k];return this._recordFieldData(w,this),this._recordReactData(w,this)},getField:function(w){var k=this.fields[w];if(R.Lang.isValue(k))return k;for(var q in this.fields)if(this.fields[q].getField&&(k=this.fields[q].getField(w),R.Lang.isValue(k)))return k},getSection:function(w){return this.sections[w]},_renderFields:function(w,k,q,F){var z=33;R.Array.each(k,function(j,X){var J,Q;if(j){var ie=j.type;!F&&!this.params.dontSetWidthOnFields&&(F=this.params.width-z*2),F&&!isNaN(F)&&(this._debug.log("availableWidth: ",F),this._debug.log("fieldConfig.width: ",j.width),J=(j.ctor&&j.config?j.config.width:j.width)||1,Q=J<=1?Math.floor(J*F):J),ie==="splitter"?this._renderSplitter(j,X,k,w,q,F,Q):ie==="multi-frame"?this._renderMultiFrame(j,X,k,w,q,F,Q):ie==="section"?this._renderSection(j,X,k,w,q,F,Q):ie==="stack"?this._renderStack(j,X,k,w,q,F,Q):j.ctor&&j.ctor===R.Squarespace.DialogFields.MultiFrame?this._renderDF2MultiFrame(j,X,k,w,q,F,Q):this._renderField(j,X,k,w,q,F,Q)}},this)},_renderReactComponent:function(w,k){var q=window.CONFIG_PANEL.get("router"),F=R.merge({router:q,location:q.getCurrentLocation()},w.props),z=e.createElement(w.component,F);a.render(z,k),this.reactComponentContainers.push(k),this.reactEls.push(z)},_renderSplitter:function(w,k,q,F,z,j,X){var J,Q=33,ie=R.Node.create('<div class="split-field clear '+(w.fields.length>1?"padding-adjust":"")+'"></div>');w.width||(w.width=1),j&&!isNaN(j)?(ie.setStyle("width",Math.round(w.width*j)+Q+"px"),J=j-Q*(w.fields.length-1)):J=z.get("offsetWidth")-Q*(w.fields.length-1)-Q*2,z.append(ie),this._renderFields(F,w.fields,ie,J),w.countHeight&&(this._takenHeight+=ie.get("offsetHeight")),w.hidden&&ie.hide()},_renderMultiFrame:function(w,k,q,F,z,j,X){var J=new R.Squarespace.DialogFieldGenerators["multi-frame"](w,this.params.initialData,this);J.type=w.type,J.append(F,q,z,j),J.getName()?this.fields[J.getName()]=J:this._noNameFields.push(J)},_renderDF2MultiFrame:function(w,k,q,F,z,j,X){var J,Q=R.merge(w,w.config,{dialog:this,data:this.params.initialData[w.config.name],render:z});J=new w.ctor(Q),j&&J.get("boundingBox").setStyle("width",X+"px");var ie=J.getName()||J.get("name");ie?this.fields[ie]=J:this._noNameFields.push(J),J.each(function(ce){var pe=ce.getName()||ce.get("name");pe?this.fields[pe]=ce:this._noNameFields.push(ce),F.tabFields.push(ce),ce.tab=F},this)},_renderSection:function(w,k,q,F,z,j,X){var J,Q,ie=R.Node.create('<div class="section-inner clear"></div>'),ce="section-field container-field-wrapper field-wrapper clear ";w.style!==void 0&&(ce+=w.style);var pe=R.Node.create('<div class="'+ce+'"></div>');pe.append(ie),z.append(pe),w.width||(w.width=1),Q=j;var ye=Math.round(w.width*Q);ye&&pe.setStyle("width",ye+"px"),J=Math.round(w.width*Q),this._renderFields(F,w.fields,ie,J),w.hidden&&pe.hide(),w.name&&(this.sections[w.name]=pe)},_renderStack:function(w,k,q,F,z,j,X){var J,Q=33,ie=j;j||(ie=this.params.width-Q*2);var ce=R.Node.create('<div class="stack-field stack-field-wrapper clear"></div>');z.append(ce),w.width||(w.width=1),w.float&&ce.setStyle("float",w.float),ce.setStyle("width",Math.round(w.width*ie)+"px"),k!==q.length-1&&ce.setStyle("paddingRight",Q+"px"),J=Math.round(w.width*ie),this._renderFields(F,w.fields,ce,J),w.hidden&&ce.hide(),w.name&&(this.sections[w.name]=ce)},_renderField:function(w,k,q,F,z,j,X){var J,Q=R.merge(w,w.config||{},{dialog:this,render:z}),ie=Q.name||w.name;if(this._debug.isTimingEnabled()&&this._debug.time("render field: "+ie),R.Lang.isUndefined(Q.data)&&this.params.initialData&&!R.Lang.isUndefined(ie)&&(Q.data=this.params.initialData[ie],Q.panel=this),w.ctor)J=new w.ctor(Q);else{if(!w.type)throw new Error("Could not find field constructor or field type.");var ce=this._convertToDialogField2Name(w.type),pe=R.namespace("Squarespace.DialogFields")[ce];if(!pe&&!R.Squarespace.DialogFieldGenerators[w.type])throw new Error("Unknown field type: "+w.type);if(this._debug.log("Generating field type: ",w.type),pe)J=new pe(Q);else{var ye=R.Squarespace.DialogFieldGenerators[w.type];J=new ye(w,this.params.initialData,this),J.type=w.type,J.append(z)}}w.verticalSpan&&(this._verticalEl=J),w.countHeight&&!w.verticalSpan&&(J.getTakenHeight?this._takenHeight+=J.getTakenHeight():(this._takenHeight+=J.get("boundingBox").get("offsetHeight"),this._takenHeight+=parseInt(J.get("boundingBox").getStyle("marginTop"),10),this._takenHeight+=parseInt(J.get("boundingBox").getStyle("marginBottom"),10))),j&&(this._isDialogField2(J)?(this._debug.log("setting width",X),J.get("boundingBox").setStyle("width",X+"px")):J.html&&(this._debug.log("setting width",X),J.html.setStyle("width",X+"px"))),J.resize&&J.resize(),w.hidden&&J.temporaryHide(!0),this._isDialogField2(J)?this.bodyEvents.push(J.on("dataStateChange",function(Ae){var Je=Ae.newVal;this.fire("field-loading-change",{field:J,loading:Je===Je.LOADING})},this)):this.bodyEvents.push(J.on("loadingChange",function(Ae){this.fire("field-loading-change",{field:J,loading:Ae.newVal})},this)),J.getName()?this.fields[J.getName()]=J:this._noNameFields.push(J),F.tabFields.push(J),J.tab=F,this._debug.isTimingEnabled()&&this._debug.timeEnd((0,r.t)("render field: {fieldName}",{fieldName:ie},{project:"scripts-v6.dialog"}))},_isDialogField2:function(w){return R.Lang.isValue(w)&&R.Lang.isValue(R.Squarespace.DialogField2)&&w instanceof R.Squarespace.DialogField2},_setState:function(w){R.Lang.isValue(R.Squarespace.DialogStates[w])?this.state=R.Squarespace.DialogStates[w]:console.warn("[Dialog] Invalid state.")},_isState:function(w){return R.Lang.isString(w)?this.state===R.Squarespace.DialogStates[w]:this.state===w},resizeVerticalFields:function(){R.Array.each(this.verticalFields,function(w,k){var q=this.getBodyHeight()-w._takenHeight;this._isDialogField2(w)?(q-=parseInt(w.get("boundingBox").getStyle("marginTop"),10),q-=parseInt(w.get("boundingBox").getStyle("marginBottom"),10),w.set("height",q)):w.setHeight(q)},this)},renderTab:function(w,k){if(this.bodyEl){var q=R.Node.create('<div class="tab-wrapper"></div>');if(R.Lang.isValue(w.name)&&q.addClass("dialog-tab-"+w.name),q.setStyles({width:this.params.width+"px",left:k?"0px":this.params.width+"px"}),this.bodyEl.append(q),w.tabFields=[],this._verticalEl=null,this._takenHeight=0,this._renderFields(w,w.fields||[],q),k&&w.reactData&&this._renderReactComponent(w.reactData,q.getDOMNode()),w.noTabTitle&&q.addClass("noTabTitle"),this._verticalEl){var F=parseInt(q.getStyle("paddingTop"),10);isNaN(parseInt(q.getStyle("marginTop"),10))||(F+=parseInt(q.getStyle("marginTop"),10)),this._takenHeight+=F;var z=this._isDialogField2(this._verticalEl);!z&&this._verticalEl.setHeight;var j=this.getBodyHeight()-this._takenHeight;if(z){var X=this._verticalEl.get("boundingBox");j-=parseInt(X.getStyle("marginTop"),10),j-=parseInt(X.getStyle("marginBottom"),10),this._verticalEl.set("height",j)}else this._verticalEl.setHeight(j);this._verticalEl._takenHeight=this._takenHeight,this.verticalFields.push(this._verticalEl)}w.tabPanelObj=q;var J=q.get("offsetHeight");return(!this.observedHeight||J>this.observedHeight)&&(this.observedHeight=J),k&&w.tabFields&&R.Array.forEach(w.tabFields,function(Q){this._showField(Q)},this),this.bodyEl.toggleClass("scrollable",!!w.scroll),k||q.addClass("hidden"),this.updateTitle(),q}},_convertToDialogField2Name:function(w){for(var k=(0,u.vv)(w).split("-"),q=k.length-1;q>=0;q--)k[q].capitalize&&(k[q]=k[q].capitalize());return k.join("")+"Field"},_destroyFields:function(){this.fields&&(R.Object.each(this.fields,function(w,k){w.destroy()},this),this._destroyNoNameFields()),this.fields={}},_destroyReactComponents:function(){R.Object.each(this.reactEls,function(w){w.props.onDestroy&&w.props.onDestroy()},this),this.reactComponentContainers.length&&R.Object.each(this.reactComponentContainers,a.unmountComponentAtNode),this.reactComponents=[]},_destroyNoNameFields:function(){R.Array.each(this._noNameFields,function(w){w&&w.destroy()},this),this._noNameFields=[]},destroyBody:function(){this.rendered=!1,this._destroyFields(),this._destroyReactComponents(),this.bodyEl&&this.bodyEl._node&&this.bodyEl.empty(),R.Array.each(this.params.tabs,function(w){w.tabPanelObj=null,w.tabFields=null}),this._detachEventArray(this.bodyEvents),this.bodyEvents=[]},_detachEventArray:function(w){R.Array.each(w,function(k){k.detach()})},destroyButtons:function(){this._detachEventArray(this.buttonEvents),this.buttonEvents=[],this.buttonHolder&&this.buttonHolder._node&&this.buttonHolder.set("innerHTML","")},_destroy:function(){this.preDestroyCalled||this._preDestroy(),this.destroyTimer=null,this.currentErrors=null,this.bodyHeight=null,this.destroyBody(),this.destroyButtons(),this.overlayEl&&!this.overlayEl.destroying&&(this.overlayEl.remove(),this.overlayEl=null),this._onBeforeUnloadEvt&&this._onBeforeUnloadEvt.detach(),this._detachEventArray(this.globalEvents),this.dd&&(this.dd.destroy(),this.dd=null),this.globalEvents=[],this.el&&(this.el.remove(!0),this.el=null,this.bodyEl=null),this.params.parentDialog&&(this.params.parentDialog.removeChildDialog(this),this.params.parentDialog=null),this._setState("CLOSED"),this.position=null,this.anchorEl=null,this.__legacyRouterUnlisten&&(this.__legacyRouterUnlisten(),this.__legacyRouterUnlisten=null),this.__legacyRouterUnlistenBefore&&(this.__legacyRouterUnlistenBefore(),this.__legacyRouterUnlistenBefore=null),this.__legacyRouterUnload&&(this.__legacyRouterUnload(),this.__legacyRouterUnload=null)}})},"1.0",{requires:["anim","attribute","datatype-date","dd","json","node","node-event-simulate","node-focusmanager","squarespace-debugger","squarespace-dialog-field-2","squarespace-dialog-fields","squarespace-dialog-legacy-multi-frame","squarespace-escmanager","squarespace-gizmo","squarespace-plugin-scroll-lock","squarespace-ui-base","squarespace-util","squarespace-widgets-confirmation","transition"]}),t(742843)},76233:function(){YUI.add("squarespace-dialog-legacy-multi-frame",function(c){c.namespace("Squarespace.DialogFieldGenerators"),c.Squarespace.DialogFieldGenerators["multi-frame"]=Class.extend(c.Squarespace.DialogField,{initialize:function(b,t,l){this._super(b,t,l),this.frames={},this.activeEl=null,this.value=this.config.initialFrame,this.panel.bodyEvents.push(c.on("click",this.onClick,this.html,this))},onClick:function(b){this.panel.fire("datachange",this)},show:function(b){var t=this.frames[b];if(!(t&&t===this.activeEl)){if(this.activeEl){this.activeEl.a&&this.activeEl.a.stop();var l=this.activeEl.fields;this.activeEl.a=this._anim({node:this.activeEl.el,to:{height:0},duration:.3,easing:c.Easing.easeOutStrong}),l.forEach(this.setInActiveFrame(!1),this),this.activeEl.a.on("end",function(o){o.target.get("node").addClass("hidden")},this),this.activeEl.a.run()}t.a&&t.a.stop(),this.activeEl&&t.el.ancestor().insertBefore(t.el,this.activeEl.el.next()),t.el.removeClass("hidden");var d=t.el.getStyle("height");t.el.setStyles({height:null}),t.realHeight=t.el.get("offsetHeight"),t.el.setStyles({height:d}),t.a=this._anim({node:t.el,to:{height:t.realHeight},duration:.3,easing:c.Easing.easeOutStrong}),t.a.on("end",function(o,e){for(var a=0;a<e.fields.length;++a){var r=this.panel.fields[e.fields[a].name];r&&r.updateInlineTitle&&r.updateInlineTitle()}this.focusCurrentFrame()},this,t),t.a.run(),t.fields.forEach(this.setInActiveFrame(!0),this),this.activeEl=t,this.value=b}},focusCurrentFrame:function(){for(var b,t=0;t<this.activeEl.fields.length;++t){b=this.activeEl.fields[t];var l=this.panel.fields[b.name||c.Object.getValue(b,["config","name"])];if(c.Lang.isValue(l)&&l.getNode){l.getNode().focus();return}}},setInActiveFrame:function(b){return function(t){if(t.name){var l=this.panel.getField(t.name);l.inActiveFrame=b,l.fire("mutli-frame-focus")}}},append:function(b,t,l,d){for(var o in this.config.frames){var e=this.config.frames[o],a=c.Node.create('<div class="frame-wrapper clear"></div>');l.append(a),this.panel._renderFields(b,e.fields,a,d),this.frames[o]=this.config.frames[o],this.frames[o].el=a,this.frames[o].realHeight=a.get("offsetHeight"),o!=this.config.initialFrame?(a.setStyle("height","0px"),a.addClass("hidden"),this.frames[o].visible=!1,this.config.frames[o].fields.forEach(this.setInActiveFrame(!1),this)):(this.activeEl=this.frames[o],this.frames[o].visible=!0,this.config.frames[o].fields.forEach(this.setInActiveFrame(!0),this))}}})},"1.0",{requires:["anim","squarespace-dialog-fields","squarespace-util","widget"]})},911894:function(c,b,t){"use strict";var l=t(210750),d=t.n(l),o=t(714487),e=t(553772),a=t(408549),r=t(651404),s=t(187304);YUI.add("squarespace-dialog-legacy-wysiwyg",function(n){n.namespace("Squarespace.DialogFieldGenerators");var i="field-wysiwyg-editor-container",u="field-wysiwyg",h="box-view",g="page-view",p="fullscreen-view",f=200,m=60;n.Squarespace.DialogFieldGenerators.wysiwyg=Class.extend(n.Squarespace.DialogField,{initialize:function(_,v,E){this._super(_,v,E),this.events=[],this.containerHeight=this.config.height||null,this.containerWidth=this.config.width||null,this.tabIndex=E.getNextTabIndex(),this._preventThrottling=_.preventThrottling;var S=this.config.className;S&&(this.className=S),this.viewMode=h,this.config.pageview&&(this.viewMode=g),this.menuConfig=_.menuConfig||"source",this.menuConfigs={code:{code:[{cmd:"sourcecode",title:(0,o.t)("Show Source",null,{project:"scripts-v6.dialog"}),type:"button",html:(0,o.t)("Display Source",null,{project:"scripts-v6.dialog"})},{type:"container",style:"float: right",contents:[{type:"select",title:(0,o.t)("Editor Mode",null,{project:"scripts-v6.dialog"}),selected:"htmlmixed",options:{css:(0,o.t)("CSS",null,{project:"scripts-v6.dialog"}),htmlmixed:(0,o.t)("HTML",null,{project:"scripts-v6.dialog"}),javascript:(0,o.t)("JavaScript",null,{project:"scripts-v6.dialog"}),markdown:(0,o.t)("Markdown",null,{project:"scripts-v6.dialog"}),null:(0,o.t)("Plain Text",null,{project:"scripts-v6.dialog"})}}]}]},markdown:{markdown:[{cmd:"bold",title:(0,o.t)("Bold",null,{project:"scripts-v6.dialog"}),type:"button"},{cmd:"italic",title:(0,o.t)("Italic",null,{project:"scripts-v6.dialog"}),type:"button"},{cmd:"link",title:(0,o.t)("Link",null,{project:"scripts-v6.dialog"}),type:"button"},{type:"separator"},{cmd:"h1",title:(0,o.t)("H1",null,{project:"scripts-v6.dialog"}),type:"button"},{cmd:"h2",title:(0,o.t)("H2",null,{project:"scripts-v6.dialog"}),type:"button"},{type:"separator"},{cmd:"blockquote",title:(0,o.t)("Block Quote",null,{project:"scripts-v6.dialog"}),type:"button"},{cmd:"unorderedlist",title:(0,o.t)("Unordered List",null,{project:"scripts-v6.dialog"}),type:"button"},{cmd:"orderedlist",title:(0,o.t)("Ordered List",null,{project:"scripts-v6.dialog"}),type:"button"}]}},this.config.engine==="code"||this.config.engine==="markdown"?(this.modes={source:this._loadTextEditor},this.mode="source"):(this.modes={markdown:this._loadTextEditor,html:this._loadTextEditor,source:this._loadTextEditor},(this.mode==="html"||this.mode==="markdown")&&(this.mode="source"),this.mode=this.mode),this.modeEls={},this.config.titleStyle||(this.config.titleStyle="top"),this.initialFieldData=v[this.config.name];var y=this._determineModeContent(this.initialFieldData);this.mode=y.mode,this.codeMode=y.codeMode,this.isSource=y.isSource;var C=y.content||this.config.defaultValue;this.modes[this.mode]||(this.mode="source",C=C||this.config.defaultValue),this.render(),this.loadEditor(C),this.hookEvents(),this.preCloseEvent=this.dialog.on("preClose",function(){this.dialog.fire("datachange",this)},this),this.publish("maximize-started",{broadcast:2}),this.publish("maximize-complete",{broadcast:2}),this.publish("minimize-started",{broadcast:2}),this.publish("minimize-complete",{broadcast:2})},focus:function(){this.editor.focus()},didDataChange:function(){var _=n.Lang.isObject(this.initialFieldData)?this.initialFieldData.html:"";return _!==this.getValue().html},getTakenHeight:function(){return this.html.get("offsetHeight")-60},switchMode:function(_){var v=this.html,E=this._determineModeContent(this.getValue()),S=E.content,y=!1;S=this.generateHTML(S),this._isContentEmpty(S)||_==="markdown"&&(y=!0);function C(){var O=this.isFullscreen();this.editor.destroy(),this.destroyEvents(),this.mode=_,this.render();var A=v.getStyle("width");A&&this.html.setStyle("width",A),v.replace(this.html),this.select.setValue(_),this.loadEditor(S),this.hookEvents(),this.show(),O&&(this.addFullscreenButtons(),this.html.addClass("fullscreenEditor")),this.adjustHeight(),this.dialog.fire("datachange",this)}y&&S===null?(this.select.setValue(this.mode),new n.Squarespace.Widgets.Confirmation({"strings.title":(0,o.t)("Change Mode / Data Loss",null,{project:"scripts-v6.dialog"}),"strings.message":(0,o.t)("When switching to this mode you will lose all your previous data.",null,{project:"scripts-v6.dialog"})}).on("confirm",function(){C.call(this),this.select.setValue(_)},this)):y?(this.select.setValue(this.mode),new n.Squarespace.Widgets.Confirmation({"strings.title":(0,o.t)("Change Mode",null,{project:"scripts-v6.dialog"}),"strings.message":(0,o.t)("You might lose special formatting switching to this mode.",null,{project:"scripts-v6.dialog"})}).on("confirm",function(){C.call(this),this.select.setValue(_)},this)):C.call(this)},_isContentEmpty:function(_){if(_===null||typeof _=="string"&&_.trim().length<=0)return!0;if(typeof _=="object"){for(var v in _.containers)if(_.containers.hasOwnProperty(v))return!1;return!0}return!1},loadEditor:function(_){this.modes[this.mode].apply(this,[_])},_determineModeContent:function(_){return _||(_={}),_.mode&&_.source&&(_={wysiwyg:_}),_.wysiwyg&&_.wysiwyg.markdown&&(_.wysiwyg.source=_.wysiwyg.markdown,_.wysiwyg.markdown="",_.wysiwyg.mode="markdown"),{content:_.wysiwyg.source||_.html,codeMode:_.wysiwyg.mode,isSource:_.wysiwyg.isSource,mode:"source"}},_initializeLinkFlyout:function(){this._linkEdit=new n.Squarespace.Flyout.LinkEdit,this.editor._linkEdit=this._linkEdit,this._linkEdit.on("dataChange",function(_){var v=_.newVal,E=v.anchorNode;E&&(E.setAttribute("href",v.linkUrl),v.newWindow?E.setAttribute("target","_blank"):E.removeAttribute("target")),this.editor._onContentChange()},this),this._linkEdit.on("open",function(){this.editor.saveSelection()},this),this._linkEdit.on("close",function(_){this.editor.restoreSelection()},this),this._linkEdit.on("unlink",function(_){n.Squarespace.EditorBase.unwrap(_.anchorNode)})},_loadTextEditor:function(_){this.config.engine==="markdown"?this.editor=new n.Squarespace.MarkdownEditor({el:this.control,mode:this.codeMode,isSource:this.isSource,tabIndex:this.tabIndex}):this.editor=new n.Squarespace.CodeEditor({el:this.control,mode:this.codeMode,isSource:this.isSource,tabIndex:this.tabIndex}),this.editor.on("modeChange",function(S){this.codeMode=S.newVal;var y=this.menuEl.one("select");if(y){y.set("value",S.newVal);var C=this.menuEl.one(".field-wysiwyg-tool-sourcecode");S.newVal==="htmlmixed"||S.newVal==="markdown"?C.removeAttribute("disabled"):(this.isSource=!0,C.addClass("active"),C.setAttribute("disabled","disabled")),this.dialog.fire("datachange",this)}},this),this.editor.setContent(_),this.editor.editor.on("change",n.bind(this.onEditorContentChange,this)),this.control.on("wysiwyg|focus",this._onfocus,this),this.control.on("wysiwyg|blur",this._onblur,this),this.events.push(this.menuEl.delegate("click",function(S){S.currentTarget._node.disabled||(this.isSource=!this.isSource,S.currentTarget.toggleClass("active",this.isSource),this.dialog.fire("datachange",this))},".field-wysiwyg-tool-sourcecode",this)),this.events.push(this.menuEl.delegate("change",function(S){this.editor.set("mode",S.currentTarget.get("value"))},"select",this));var v=this.menuEl.one("select");v&&v.set("value",this.codeMode);var E=this.menuEl.one(".field-wysiwyg-tool-sourcecode");E&&(this.codeMode==="htmlmixed"||this.codeMode==="markdown"?E.removeAttribute("disabled"):(this.isSource=!0,E.setAttribute("disabled","disabled")),E.toggleClass("active",this.isSource))},_onblur:function(){if(window.CONFIG_PANEL){window.CONFIG_PANEL.set("allowContextMenu",!1);var _=this.control.ancestor(".field-rhs");_&&_.removeClass("focused")}},_onfocus:function(_){if(window.CONFIG_PANEL){window.CONFIG_PANEL.set("allowContextMenu",!0);var v=this.control.ancestor(".field-rhs");v&&v.addClass("focused")}},_onEditorContentChange:function(){this.adjustHeight(),this.dialog.fire("datachange",this)},debounceOnEditorContentChange:d()(function(){var _=arguments[0].that;this.throttleChangeFlag=!1,_._onEditorContentChange.apply(_)},f),onEditorContentChange:function(_){this.cachedContent=null,this.cachedValue=null,this.viewMode===p&&this.hideMenuBar(_),this._preventThrottling?this._onEditorContentChange():this.debounceOnEditorContentChange({that:this})},render:function(){var _=this._textEditorRender.apply(this),v=this.mode;(this.mode==="markdown"||this.mode==="html")&&(v="code"),this.modeEls[this.mode]=_,this.control=_.control,this.fieldTitleEl=_.title,this.menuElems=_.menu,this.menuEl=n.Node.create('<div class="field-wysiwyg-control clear"></div>'),n.Lang.isArray(this.menuElems)?this.menuElems.forEach(function(A){this.menuEl.append(A)},this):this.menuEl.append(this.menuElems);var E=(0,a.Z)("field-wrapper wysiwyg-field-wrapper clear {sub1} {sub2}-mode mode-{newMode}",{sub1:this.config.style,sub2:this.mode,newMode:v});this.html=n.Node.create('<div class="'+E+'"></div>');var S=n.Node.create('<div class="field-rhs"></div>'),y=n.Node.create('<div class="field-wysiwyg-control-wrapper"></div>');y.append(this.menuEl);var C=n.Node.create('<div class="'+u+'"></div>');C.append(this.control),S.append(y),S.append(C),this.config.description&&S.append('<div class="field-description-wrapper"><div class="field-description">'+this.config.description+"</div></div>"),this.html.append(this.fieldTitleEl),this.html.append(S);var O=this.html.one("."+u);this.containerHeight!==null&&O.setStyle("height",this.containerHeight+"px"),this.containerWidth!==null&&this.html.setStyle("width",this.containerWidth+"px")},hookEvents:function(){this.events.push(this.menuEl.delegate("click",n.bind(function(_){var v=_.currentTarget.get("className");try{switch(v=v.substring(v.lastIndexOf("-")+1),v=v.indexOf(" ")!==-1?v.substring(0,v.indexOf(" ")):v,v){case"bold":this.editor.execCommand("bold");break;case"italic":this.editor.execCommand("italic");break;case"link":this.editor.execCommand("link");break;case"unlink":this.editor.execCommand("unlink");break;case"unorderedlist":this.editor.execCommand("insertunorderedlist");break;case"orderedlist":this.editor.execCommand("insertorderedlist");break;case"h1":this.editor.execCommand("heading","1");break;case"h2":this.editor.execCommand("heading","2");break;case"blockquote":this.editor.execCommand("blockquote");break}}catch(E){throw console.error("Error executing command",v,"Error was:",E),E}finally{_.halt()}},this),".field-wysiwyg-tool"))},_containersHandler:function(_){var v;for(v in _.prevVal)v in _.newVal||n.one(".field-wysiwyg-tool-"+v).removeClass("active"),v==="link"&&(!_.newVal[v]||_.newVal[v]&&_.prevVal[v].getAttribute("href")!==_.newVal[v].getAttribute("href"))&&(this._linkEdit.updateLink(),this._linkEdit.close(!0));for(v in _.newVal)v in(_.prevVal||[])||n.one(".field-wysiwyg-tool-"+v).addClass("active"),v==="link"&&(!_.prevVal||!_.prevVal[v]||_.prevVal[v]&&_.prevVal[v].getAttribute("href")!==_.newVal[v].getAttribute("href"))&&this._linkEdit.openPrompt(_.newVal[v])},destroyEvents:function(){this.control.detach("wysiwyg|*");for(var _=0;_<this.events.length;++_){var v=this.events[_];v.detach?v.detach():v.removeListener&&v.removeListener()}this.events=[],this.debounceOnEditorContentChange&&this.debounceOnEditorContentChange.cancel&&this.debounceOnEditorContentChange.cancel()},onDataChanged:function(_){this.dialog.fire("datachange",this)},getMode:function(){return this.mode},getContent:function(){return this.editor.getContent()},cleanHTML:function(_){return _?_.replace(new RegExp("<p\\s+>","g"),"<p>"):null},getValue:function(){var _=this.getContent();return{source:_,isSource:this.isSource,mode:this.codeMode,engine:this.mode,rendered:this.cleanHTML(this.generateHTML(_))||""}},generateHTML:function(_){if(this.isSource){var v=n.Node.create("<div></div>");return r.Z.runMode(_,this.codeMode,v._node),'<pre class="source-code">'+v.getContent()+"</pre>"}else if(this.codeMode==="markdown"){var E=_,S=' data-preserve-html-node="true"';this.config.markEmbeddedHTML&&(E=_.replace(new RegExp("<[^\\s/\\->]+","gm"),"$&"+S));var y=(0,s.Z)(E);if(this.config.markEmbeddedHTML){var C=n.Node.create("<div>"+y+"</div>"),O=C.all("code");O.each(function(A){var I=A.getHTML().replace(new RegExp(S,"g"),"");A.empty().append(I)}),y=C.getContent(),C.destroy(),O.destroy()}return y}return _},setValue:function(_){var v=this._determineModeContent(_);v.mode=v.mode||"source",this.mode!==v.mode&&this.switchMode(v.mode),this.isSource=v.isSource,this.codeMode=v.codeMode,this.editor.setContent(v.content)},show:function(){this._textEditorShow.apply(this),this.wasShown=!0,this.dialog.fire("currentMode",this.mode)},toggleInvertedStyle:function(){this.html.toggleClass("inverted"),this.editor.focus()},updateEditorWidth:function(){if(this.editor.setWidth&&(this.mode==="html"||this.mode==="markdown")){var _=this.html.one("textarea").get("offsetWidth");this.editor.setWidth(_)}this.adjustHeight()},setSmallWidth:function(_){this.html.removeClass("width-large"),this.html.addClass("width-small"),this.updateEditorWidth(),this.editor.focus()},setMediumWidth:function(_){this.html.removeClass("width-small"),this.html.removeClass("width-large"),this.updateEditorWidth(),this.editor.focus()},setLargeWidth:function(_){this.html.removeClass("width-small"),this.html.addClass("width-large"),this.updateEditorWidth(),this.editor.focus()},toggleFullScreen:function(_){this.menuHidden=!1,typeof this.hideMenuEvent<"u"&&this.hideMenuEvent&&this.hideMenuEvent.detach(),typeof this.showMenuEvent<"u"&&this.showMenuEvent&&this.showMenuEvent.detach(),_.stopPropagation();var v=this.isFullscreen();v?(this.fire("minimize-started"),n.Global.fire("minimize-started"),this.recessTransition()):(this.dialog.activeFlyout&&(this.dialog.activeFlyout.field.closeFlyout(),this.dialog.activeFlyout=null),this.fire("maximize-started"),n.Global.fire("maximize-started"),this.expandTransition()),this.editor.focus()},expandDialogBox:function(){if(this.dialog.el){var _={top:this.dialog.el.getStyle("top"),left:this.dialog.el.getStyle("left"),height:this.dialog.el.getStyle("height"),width:this.dialog.el.getStyle("width")};this.dialogOldStyle=_,this.dialog.el.setStyle("top","0px"),this.dialog.el.setStyle("left","0px"),this.dialog.el.setStyle("height","5000px"),this.dialog.el.setStyle("width","5000px")}},recessDialogBox:function(){this.dialog.el&&this.dialogOldStyle&&(this.dialog.el.setStyle("top",this.dialogOldStyle.top),this.dialog.el.setStyle("left",this.dialogOldStyle.left),this.dialog.el.setStyle("height",this.dialogOldStyle.height),this.dialog.el.setStyle("width",this.dialogOldStyle.width),delete this.dialogOldStyle)},recessTransition:function(){if(this.isExpanded){this.recessDialogBox(),this.dialog.params.disableSaveOverlay=!1,this.isExpanded=!1,typeof this.resizeEvent<"u"&&this.resizeEvent!==null&&(this.resizeEvent.detach(),this.resizeEvent=null),this.removeFullscreenButtons();var _=this.html.cloneNode(!0);_.removeClass("fullscreenEditor"),_.one(".field-wysiwyg").setContent(""),_.one(".field-wysiwyg").setStyle("background","white");var v=_.one(".field-lhs");v&&v.remove();var E=_.one(".field-description-wrapper");E&&E.remove(),_.setStyles({position:"fixed",top:0,left:0,"z-index":3e5,height:this.html.get("offsetHeight")+"px",width:this.html.get("offsetWidth")+"px",background:"transparent",padding:"0",overflow:"hidden"}),this.events.push(_.on("click",function(T){T.stopPropagation()}));var S="opacity: 1; background: black; position: fixed; top: 0px; left: 0px; height: 5000px; width: 5000px; z-index: 250000",y=n.Node.create('<div class="background" style="'+S+'"></div>');n.one("body").insert(_),n.one("body").insert(y);var C=this.html.getData("replaceNode");this.html.remove(),this.html.setStyle("zIndex",null),C.replace(this.html),n.all(".standard-dialog-wrapper .wysiwyg-field-wrapper.fullscreenEditor").size()<=1&&n.one("body").removeClass("fullscreenEditor"),this.viewMode=h,this.html.removeClass("fullscreenEditor"),this.html.removeClass("inverted");var O=this.html.one("."+u);O.setStyle("height",this.containerHeight);var A=this._anim({node:_,to:{top:this.html.one(".field-rhs").getY()-n.one(document.body).get("docScrollY")+"px",height:this.originalTransData.height,left:this.html.one(".field-rhs").getX()-n.one(document.body).get("docScrollX")+"px",width:this.originalTransData.width},easing:"easeOutStrong",duration:.3}),I=this._anim({node:y,from:{opacity:1},to:{opacity:0},duration:.3,easing:"easeOutStrong"}),D=this._anim({node:_,to:{opacity:0},duration:.3,easing:"easeOutStrong"});A.on("end",function(){I.run()},this),I.on("end",function(){y.remove(),D.run()},this),D.on("end",function(){_.remove(),this.fire("minimize-complete"),n.Global.fire("minimize-complete")},this),A.run(),n.Squarespace.EscManager.removeTarget(this)}},expandTransition:function(){if(!this.isExpanded){this.dialog.params.disableSaveOverlay=!0,this.isExpanded=!0;var _=this.html.one(".field-wysiwyg-control-wrapper").get("offsetHeight");_=_+this.html.one(".field-wysiwyg").get("offsetHeight"),this.originalTransData={top:this.html.one(".field-rhs").getY()-n.one(document.body).get("docScrollY")+"px",left:this.html.one(".field-rhs").getX()-n.one(document.body).get("docScrollX")+"px",height:_+"px",width:this.html.one(".field-rhs").get("offsetWidth")+"px"};var v=this.html.cloneNode(!0);v.one(".field-wysiwyg").remove();var E=v.one(".field-lhs");E&&E.remove();var S=v.one(".field-description-wrapper");S&&S.remove(),v.setStyle("position","fixed"),v.setStyle("top",this.originalTransData.top),v.setStyle("left",this.originalTransData.left),v.setStyle("z-index",3e5),v.setStyle("height",_+"px"),v.setStyle("width",this.originalTransData.width),v.setStyle("background","white"),v.setStyle("padding","0"),v.setStyle("opacity","1");var y=v.one(".field-rhs");y&&y.setStyle("height","100%");var C="opacity: 0; background: black; position: fixed; top: 0px;left: 0px; height: 5000px; width: 5000px; z-index: 250000",O=n.Node.create('<div class="background" style="'+C+'"></div>'),A=n.one("body");A.insert(v),A.insert(O),A.addClass("fullscreenEditor"),this.viewMode=p;var I=this._anim({node:O,to:{opacity:1},duration:.3,easing:"easeOutStrong"}),D=this._anim({node:v,to:{top:"0px",height:this.html.get("winHeight")+"px",left:"0px",width:this.html.get("winWidth")+"px"},easing:"easeOutStrong",duration:.3}),T=this._anim({node:v,to:{opacity:0},duration:.3,easing:"easeOutStrong"});I.on("end",function(){this.updateEditorWidth(),this.addFullscreenButtons(),D.run()},this),D.on("end",function(){this.adjustHeight();var B=n.Node.create('<div class="replaceNode"></div>');this.html.setData("replaceNode",B),this.html.replace(B),n.one("body").append(this.html),this.html.setStyle("zIndex",e.Ue.TOOLBAR),n.Squarespace.EscManager.addTarget(this),this.html.addClass("fullscreenEditor"),this.resizeEvent=n.on("resize",this.fullScreenEditorResize,n.one(window),this),this.hideMenuEvent=this.dialog.on("keydown",this.hideMenuBar,this),this.events.push(this.hideMenuEvent),O.remove(),this.expandDialogBox(),T.run()},this),T.on("end",function(){this.fire("maximize-complete"),n.Global.fire("maximize-complete"),v.remove()},this),I.run()}},cancel:function(_){this.isExpanded&&(_.keyCode===27?this.toggleFullScreen(_):n.Squarespace.EscManager.addTarget(this))},addFullscreenButtons:function(){var _={type:"container",contents:[{type:"separator"},{cmd:"inverted",title:(0,o.t)("Inverted",null,{project:"scripts-v6.dialog"}),type:"button"},{type:"separator"},{cmd:"widthsmall",title:(0,o.t)("Small",null,{project:"scripts-v6.dialog"}),type:"button"},{cmd:"widthmedium",title:(0,o.t)("Medium",null,{project:"scripts-v6.dialog"}),type:"button"},{cmd:"widthlarge",title:(0,o.t)("Large",null,{project:"scripts-v6.dialog"}),type:"button"}]},v=this._renderContainer(_);v.addClass("fullscreen-options");var E=this.html.one(".field-wysiwyg-control"),S=E.get("children");E.insert(v,S.size()-1)},removeFullscreenButtons:function(){var _=this.html.all(".fullscreen-options");_.remove()},hideMenuBar:function(_){if(!(_&&_.pageY<=m)&&!(this.menuHidden||this.viewMode!==p)){this.menuHidden=!0;var v=this.html.one(".field-wysiwyg-control-wrapper"),E=this.dialog.el.one(".autosave-state");if(this.hideMenuEvent&&this.hideMenuEvent.detach(),!v||!v._node||v.get("id")!==v._node.id){console.log("no menu node"),this.hideMenuEvent.detach();return}this.hideMenuAnim=new n.Anim({node:v,to:{top:"-"+v.get("offsetHeight")},duration:.3,easing:n.Easing.easeOutStrong}),this.hideMenuAnim.run(),E&&E.setStyle("visibility","hidden"),this.showMenuEvent=n.one("window").on("mousemove",this.showMenuBar,this),this.events.push(this.showMenuEvent),this.showMenuEvent=n.one("body").on("mousemove",this.showMenuBar,this)}},showMenuBar:function(_){if(!(_.pageY>m)){typeof this.hideMenuAnim<"u"&&this.hideMenuAnim&&this.hideMenuAnim.stop();var v=this.html.one(".field-wysiwyg-control-wrapper"),E=this.dialog.el.one(".autosave-state");if(!v||!v._node||v.get("id")!==v._node.id){this.showMenuEvent.detach();return}this.showMenuEvent&&this.showMenuEvent.detach(),this.showMenuAnim=new n.Anim({node:v,to:{top:"0px"},duration:.3,easing:n.Easing.easeOutStrong}),this.showMenuAnim.run(),E&&E.setStyle("visibility",""),this.showMenuEvent&&this.showMenuEvent.detach(),this.menuHidden=!1}},fullScreenEditorResize:function(_){this.adjustHeight()},isFullscreen:function(){return this.viewMode===p},_textEditorShow:function(){this.events.push(n.one("body").on("click",this.onBodyClick,this)),this.viewMode===g&&!this.resizeEvent&&(this.resizeEvent=n.on("resize",this.adjustHeight,n.one(window),this))},getIdealColumnWidth:function(){var _=this.editor.getTemplate(),v=this.html.get("offsetWidth")-130;return v-=(_.getColumns()-1)*_.getMarginWidth(),v/_.getColumns()},onBodyClick:function(_){_.target.ancestor(".field-wysiwyg-control-wrapper",!0)||this.viewMode===p&&this.hideMenuBar(_)},getContentHeight:function(){return this.mode==="html"||this.mode==="markdown"?this.editor.getContentHeight():-1},adjustHeight:function(){var _=this.html.one("."+u),v;if(this.viewMode===p)v=_.get("winHeight"),_.setStyle("height",null);else if(this.viewMode===g){v=_.get("winHeight");var E=n.one(".content-title").get("offsetHeight"),S=Math.max(v-E-34-20,this.getContentHeight());this.control.setStyle("height",S+"px")}},setHeight:function(_){if(_=parseInt(_,10),this.viewMode===h){_=_-this.menuEl.get("offsetHeight")-30;var v=this.html.one("."+u);this.containerHeight=_,v.setStyle("height",this.containerHeight+"px")}},_renderTitle:function(){return this.config.title&&this.config.titleStyle==="top"?n.Node.create('<div class="field-lhs">'+this.config.title+"</div>"):null},_renderButton:function(_){var v=n.Lang.sub('<button tabIndex="-1" class="field-wysiwyg-tool field-wysiwyg-tool-{cmd}"><span class="icon">{iconText}</span></button>',{cmd:_.cmd,iconText:_.html||"&nbsp;"});return n.Node.create(v)},_renderMenuSeparator:function(_){return n.Node.create('<div class="separator"></div>')},_renderContainer:function(_){for(var v=n.Node.create('<div class="sqs-container" style="'+(_.style||"")+'"></div>'),E=this._renderMenu(_.contents),S=0;S<E.length;++S)v.append(E[S]);return v},_renderSelect:function(_){var v=n.Node.create('<select class="field-wysiwyg-select" tabIndex="-1"></select>');for(var E in _.options){var S=_.options[E],y=n.Node.create('<option value="'+E+'">'+S+"</option>");_.selected&&_.selected===E&&y.setAttribute("selected","selected"),v.append(y)}return v},_textEditorRender:function(){var _="sqs-text-edit mode-"+this.mode,v=n.Node.create('<textarea id="'+i+'" class="'+_+'" style="border:none" ></textarea>');return{control:v,title:this._renderTitle(),menu:this._textEditorRenderMenu()}},_textEditorRenderMenu:function(){return this._renderMenu(this.menuConfigs[this.menuConfig].code||this.menuConfigs[this.menuConfig].other||this.menuConfigs[this.menuConfig].markdown)},_renderMenu:function(_){for(var v=[],E=0;E<_.length;++E){var S=_[E];S.type==="separator"?v.push(this._renderMenuSeparator(S)):S.type==="button"?v.push(this._renderButton(S)):S.type==="container"?v.push(this._renderContainer(S)):S.type==="select"&&v.push(this._renderSelect(S))}return v},_destroy:function(){this._super(),this.destroyEvents(),typeof this.resizeEvent<"u"&&this.resizeEvent!==null&&(this.resizeEvent.detach(),this.resizeEvent=null),this.editor&&this.editor.destroy(),this.preCloseEvent&&this.preCloseEvent.detach()}})},"1.0",{requires:["node","squarespace-dialog","squarespace-flyout-link-edit","squarespace-markdown-editor","squarespace-code-editor","squarespace-util","squarespace-widgets-confirmation","transition"]})},435182:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-dialog-stringset",function(d){var o="boundingBox",e="contentBox",a=d.namespace("Squarespace.DialogFields").Stringset=d.Base.create("stringset-field",d.Squarespace.DialogField2,[d.WidgetParent,d.Squarespace.Mixins.StringSetUtils],{initializer:function(r){var s=this.get("mode"),n=s==="input",i=d.Lang.isValue(r.existingMembers),u=r.allowOnlyExistingMembers,h=d.Lang.isValue(r.requestUrl),g=n&&!i&&!u&&h;d.Lang.isValue(r.existingMembers)||this.set("existingMembers",[]),r.panel&&(this.panel=r.panel),!d.Lang.isNumber(r.maxMemberChars)&&d.Lang.isNumber(parseInt(r.maxMemberChars,10))&&this.set("maxMemberChars",parseInt(r.maxMemberChars,10)),g?this._requestMemberData(this._loadInputMembersSuccess):s==="select"&&(h||this.set("requestUrl","/api/commondata/GetCollectionCategories"),this._requestMemberData(this._loadSelectMembersSuccess)),this.get(o).addClass(this.get("style"))},renderUI:function(){a.superclass.renderUI.call(this);var r=this.get(e),s=r.one(this._setFieldWrapper),n=this.get("style"),i=this.get("description"),u=this.get("title")||"",h=d.Object.hasKey(this.PARTIALS,n)?n:"thin",g=this.PARTIALS[h],p,f;p=d.Node.create(d.Lang.sub(g,{title:u})),p.one(this._inputWrapperSelector).append(this.memberControl),d.Lang.isValue(i)&&(f=d.Node.create(d.Lang.sub(this.PARTIALS.descTemplate,{desc:i})),p.append(f)),s.addClass(n),s.append(p),this.memberControl=r.one(this._memberContainerSelector),this.flyoutTarget=r.one(this._flyoutTargetSelector),this._renderSetMembers()},bindUI:function(){a.superclass.bindUI.call(this),this.get(e).on("click",this.handleWidgetClick,this),this.memberControl.on("mouseenter",this.recalcMeasurements,this),this.memberControl.on("mouseover",this.blurInactiveMember,this),this.memberControl.on("mouseout",this.resetViewportAnimation,this),this.memberControl.on("mousemove",this.mapViewportToMousePosition,this),this.on("activeMemberChange",this._animateActiveMember,this),this.on("dataChange",this.afterDataChange,this),this.on("removingMemberChange",this._tryAddPlaceholder,this)},syncUI:function(){a.superclass.syncUI.call(this),this._updateMeasurements()},afterDataChange:function(r){var s=r.newVal,n=d.Lang.isArray(r.prevVal)?r.prevVal:[],i="_injectNewMemberList",u=[];d.Lang.isArray(r.newVal)&&s.length!==n.length&&(n.length===0&&this.memberControl.empty(),s.length<n.length&&(i="_ejectMemberList"),u=this.diffStringSets(s,n),this[i](u)),this.flyout&&this.flyout.set("data",s)},handleWidgetClick:function(r){r.halt();var s=r.target,n=this.get("mode"),i;s.hasClass("x")?(i=s.ancestor("."+this.get("memberClass")),i&&this._destroyMember(i.getData("data"))):this._isFlyoutOpen()||(n==="input"||n==="select")&&(this.panel&&this.panel.setActiveFlyout({constraintClasses:".workflow-flyout",field:this}),this.showFlyout())},recalcMeasurements:function(r){d.Lang.isNumber(this.get("memberContainerWidth"))&&this._updateMeasurements()},blurInactiveMember:function(r){this._cancelTimers(),!(r.target===this.get("activeMember")||r.target===this.get("removingMember"))&&r.target.hasClass("tag")&&(this._blurMember(),this.set("activeMember",r.target))},resetViewportAnimation:function(r){var s=r.target,n=s.hasClass("x"),i=!d.Lang.isNull(this._blurTimer);n||i||(this.snapBackTimer||(this.snapBackTimer=d.later(150,this,this._nudgeViewportTo,0)),this.blurTimer=d.later(50,this,this._blurMember))},mapViewportToMousePosition:function(r){var s=this.get(e).one(this._inputWrapperSelector),n=s.get("offsetWidth"),i=this._getViewportOverhang(),u;i>0&&(u=(r.clientX-s.getX())/n,this._nudgeViewportToPercent(u))},_updateData:function(r){var s=this.get("data"),n=r.newVal,i=this.get("existingMembers");(d.Lang.isString(n)||d.Lang.isArray(n))&&(d.Lang.isString(n)&&(n=[n]),i=i.concat(n),this.set("existingMembers",d.Array.dedupe(i)),d.Array.each(n,function(u){this._hasTag(u)?s.splice(s.indexOf(u),1):s.push(u)},this),this.set("data",s))},_tryAddPlaceholder:function(r){d.Lang.isNull(r.newVal)&&this.get("data").length===0&&this._addPlaceholder()},showFlyout:function(){if(this.flyout){this.closeFlyout(d.bind(this.showFlyout,this));return}var r=this._getMemberEditorWidget(),s={alignment:"tl",animateOpacity:!0,overflow:"visible"};this._initFlyout(r,s),this.get("data").length===0&&this._addPlaceholder()},closeFlyout:function(r,s){var n=this.flyoutPlugin,i=this.flyoutTarget,u=d.Lang.isValue(i)&&i.hasPlugin(n.NS);this.flyout&&(u&&(d.Lang.isValue(this.flyout)&&d.Lang.isFunction(this.flyout.hide)&&this.flyout.hide(),i[n.NS].on("hidden",this._cleanUpFlyout,this,r,s),i[n.NS].hide()),this.get("data").length===0&&this._addPlaceholder(!1))},_getMemberEditorWidget:function(){var r=this.get("mode");switch(r){case"input":return new d.Squarespace.DialogFields.InputEditor({allowOnlyExistingMembers:this.get("allowOnlyExistingMembers"),autoCompleteIndex:-1,data:this.get("data"),editorLabel:this.get("editorLabel"),placeholder:this.get("inputPlaceholder"),existingMembers:this.get("existingMembers"),memberClass:this.get("memberClass"),visible:!1});case"select":return new d.Squarespace.DialogFields.SelectEditor({addMemberText:this.get("addMemberText"),canAddMembers:this.get("canAddMembers"),collectionId:this.get("collectionId"),editorLabel:this.get("editorLabel"),data:this.get("data"),maxLength:this.get("maxMemberChars"),memberClass:this.get("memberClass"),options:this.get("existingMembers")});default:break}},_animate:function(r){if(!this.get("destroyed")){var s=new d.Anim(r);return this._anims.add(s),s}},_getViewportOverhang:function(){var r=this.get(e),s=r.one(this._inputWrapperSelector).get("offsetWidth"),n=this.get("memberContainerWidth")||0;return n-s},_nudgeViewportToPercent:function(r){var s=this._getViewportOverhang(),n;s>0&&((r<.04||r>.94)&&(r=Math.min(Math.round(r),1)),n=-1*s*r,this.get(e).one(this._memberContainerSelector).setStyle("left",n))},_nudgeViewportTo:function(r){var s=this._memberContainerSelector,n=this.get(e).one(s);this.get("destroyed")||(this.snapBackAnim&&this.snapBackAnim.stop(),this.snapBackAnim=this._animate({node:n,duration:.3,easing:d.Easing.easeOutStrong,to:{left:r}}),this.snapBackAnim.run(),this.snapBackTimer=null)},_blurMember:function(){var r,s;this.get("destroyed")||(r=this.get("activeMember"),d.Lang.isValue(r)&&(d.Object.hasKey(r,"anim")&&r.anim.stop(),s=r.one(":last-child"),s&&s.remove(),r.setStyle("paddingRight",this.get("activeMemberPadding")+"px"),r.anim=this._animate({node:r,duration:.25,easing:d.Easing.easeOutStrong,to:{paddingRight:this.get("defaultMemberPadding")}}),r.anim.run(),this.set("activeMember",null)))},_animateActiveMember:function(r){if(!d.Lang.isNull(r.newVal)){var s=r.newVal;s.anim=this._animate({node:s,duration:.25,easing:d.Easing.easeOutStrong,to:{paddingRight:this.get("activeMemberPadding")+"px"}}),s.anim.on("end",function(){var n=this.get("node"),i=d.Node.create('<span class="x">&times;</span>');n.append(i),n.setStyle("paddingRight","2px")}),s.anim.run()}},_cancelTimers:function(){this.blurTimer&&(this.blurTimer.cancel(),this.blurTimer=null),this.snapBackTimer&&(this.snapBackTimer.cancel(),this.snapBackTimer=null)},_updateMeasurements:function(r){var s=this.get(e),n;d.Lang.isNumber(r)||(r=0),this.get("data").length>0&&(n=s.one(this._memberContainerSelector).get("offsetWidth")+r+this.get("defaultMemberPadding"),this.set("memberContainerWidth",n))},_renderSetMembers:function(){var r=this.get("data");this.memberControl.empty(),d.Lang.isArray(r)&&r.length>0?d.Array.each(r,function(s,n){this.memberControl.append(this._createMemberNode(s))},this):this._addPlaceholder()},_addPlaceholder:function(r){var s;d.Lang.isUndefined(r)&&(r=this._isFlyoutOpen()),d.Lang.isValue(this.memberControl)||(this.memberControl=this.get(e).one(this._memberContainerSelector)),this.memberControl.empty(),s=d.Lang.sub('<div class="text dialog-element">{label}</div>',{label:r?this.get("emptyText"):'<div class="add-header">'+this.get("addText")+"</div>"}),this.memberControl.append(s)},_initFlyout:function(r,s){var n=this.flyoutPlugin,i=this.get(e).one(this._flyoutTargetSelector),u=["addMember","removeMember"];if(!d.Lang.isObject(r))throw new Error("Flyout widget is missing.");this.flyout=this.add(r).item(0),i.hasPlugin(n.NS)&&i.unplug(n.NS),s=d.merge(s,{host:this,node:this.flyout.get("flyoutNode"),duration:.2,overflow:"visible"}),i.plug(n,s),i[n.NS].show(),this.flyout.after(u,this._updateData,this)},_cleanUpFlyout:function(r,s,n){var i=this.flyoutPlugin,u=this.get(e),h=u.one(this._flyoutTargetSelector);this.removeAll(),this.flyout.destroy(!0),this.flyout=null,h.unplug(i.NS),d.Lang.isFunction(s)&&s.apply(n||this,arguments)},_createMemberNode:function(r){var s;return s=d.Node.create('<div class="tag"></div>'),s.set("text",r),s.addClass(this.get("memberClass")),s.setData("data",r),s},_destroyMember:function(r){var s=this.get(e).all("."+this.get("memberClass")),n=[];s.each(function(i){var u=i.getData("data");u!==r&&n.push(u)}),this.set("data",n)},_injectNewMember:function(r){var s=0,n=0,i=0,u=this._createMemberNode(r);u.setStyle("opacity",0),this.memberControl.append(u),s=u.get("offsetWidth"),i=u.getStyle("paddingLeft"),n=u.getStyle("paddingRight"),u.setStyles({width:0,paddingLeft:0,opacity:1});var h={node:u,duration:.25,easing:d.Easing.easeOutStrong};h=d.merge(h,{to:{width:s-20,paddingRight:n,paddingLeft:i}}),u.anim=this._animate(h),u.anim.on("end",function(){this.get("node").setStyle("width","")}),u.anim.run()},_injectNewMemberList:function(r){d.Array.each(r,function(s,n){this._injectNewMember(s)},this)},_ejectMember:function(r){var s=this.get(e),n=s.all(".tag."+this.get("memberClass")),i=[],u=0,h;n.each(function(g,p){var f=g.getData("data");f===r&&i.push(g)}),i.length&&(u>1&&console.warn("Duplicate items detected!"),h=i[0],h===this.get("activeMember")&&(this.set("activeMember",null),this.set("removingMember",h)),d.Object.hasKey(h,"anim")&&h.anim.stop(),h.anim=this._animate({node:h,duration:.22,easing:d.Easing.easeOutStrong,to:{width:0,paddingRight:0,paddingLeft:0,marginRight:0}}),h.anim.on("end",d.bind(function(g){h.anim.get("node").remove(!0),this.set("removingMember",null)},this)),h.anim.run())},_ejectMemberList:function(r){d.Array.each(r,function(s){this._ejectMember(s)},this)},_isFlyoutOpen:function(){var r=this.flyoutPlugin,s=this.flyoutTarget;return d.Lang.isValue(s)?!!s.hasPlugin(r.NS):!1},_hasTag:function(r,s){return d.Lang.isUndefined(s)&&(s=this.get("data")),d.Lang.isArray(s)?this.memberInSet(s,r):!1},_loadInputMembersSuccess:function(r){this.set("existingMembers",r)},_loadSelectMembersSuccess:function(r){var s=[];d.Object.each(r,function(n,i){s.push(n.name)},this),this.set("existingMembers",s)},_requestMemberData:function(r){var s={collectionId:this.get("collectionId")},n=this.get("requestUrl");d.Data.get({url:n,data:s,success:d.bind(r,this)},this)},_memberContainerSelector:".tag-field-container",_flyoutTargetSelector:".field-input-wrapper",_setFieldWrapper:".tag-field-wrapper",_inputWrapperSelector:".field-input-wrapper",_snapBackTimer:null,_blurTimer:null,flyoutPlugin:d.Squarespace.Animations.Flyout,PARTIALS:{thin:'<div class="field-lhs title">{title}</div><div class="field-rhs"><div class="field-input-wrapper"><div class="tag-field clear"><div class="tag-field-container"></div></div></div></div>',minor:'<div class="field-rhs"><div class="field-lhs title">{title}</div><div class="field-input-wrapper"><div class="tag-field clear"><div class="tag-field-container"></div></div></div></div>',descTemplate:'<div class="field-description-wrapper"><div class="field-description">{desc}</div></div>'}},{CSS_PREFIX:"sqs-stringset",TEMPLATE:'<div class="field-wrapper tag-field-wrapper clear"></div>',ATTRS:{activeMember:{},addText:{value:(0,l.t)("Click to add tags.",null,{project:"scripts-v6.dialog"})},addMemberText:{value:(0,l.t)("Create tag",null,{project:"scripts-v6.dialog"})},activeMemberPadding:{value:18},allowOnlyExistingMembers:{value:!1},canAddMembers:{value:!1},collectionId:{},data:{value:[],setter:function(r){return d.Lang.isArray(r)?r:[]},getter:function(r){return r.concat([])}},defaultMemberPadding:{value:6},description:{},inputPlaceholder:{value:(0,l.t)("Tags, comma separated",null,{project:"scripts-v6.dialog"})},editorLabel:{},emptyText:{},existingMembers:{value:[],validator:d.Lang.isArray},memberClass:{value:"tag"},mode:{value:"input",validator:function(r){var s=["input","select"];return s.indexOf(r)!==-1}},maxMemberChars:{value:null},removingMember:{},requestUrl:{},style:{value:"thin",validator:d.Lang.isString,getter:function(r){return r.toLowerCase()}},memberContainerWidth:{},title:{},visible:{value:!0}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-stringset-input-editor","squarespace-dialog-stringset-select-editor","squarespace-node-flyout","squarespace-stringset-utils-mixin"]})},469771:function(){YUI.add("squarespace-dialog-text-with-refresh",function(c){c.namespace("Squarespace.DialogFields");var b=c.Squarespace.DialogFields.TextWithRefresh=c.Base.create("TextWithRefresh",c.Squarespace.DialogFields.Text,[],{initializer:function(){this.publish("refresh")},renderUI:function(){b.superclass.renderUI.call(this),this.get("contentBox").append('<div class="refresh-icon"></div>')},bindUI:function(){b.superclass.bindUI.call(this),this.get("contentBox").one(".refresh-icon").after("click",(function(){this.fire("refresh")}).bind(this)),this._textField.after("keyup",(function(t){t.keyCode===13&&this.fire("refresh")}).bind(this))}},{CSS_PREFIX:"sqs-dialog-text-with-refresh",ATTRS:{}})},"1.0",{requires:["base","squarespace-dialog-text"]})},523572:function(){YUI.add("squarespace-dom-emitters-resize",function(c){c.Squarespace.ResizeEmitter=c.SQS.Gallery.ResizeEmitter},"1.0",{requires:["@sqs/yui-gallery/resize-emitter"]})},743924:function(c,b,t){"use strict";var l=t(696049),d=t(613702),o=t.n(d),e=t(803018),a=t.n(e);YUI.add("squarespace-domains-models-domain",function(r){r.namespace("Squarespace.Domains.Models");var s=r.Squarespace.Domains.Models.Domain=r.Base.create("Domain",r.Model,[r.Squarespace.ModelSync.REST],{root:r.Squarespace.REST_API_ROOT+"domains",serialize:function(){var n=s.superclass.toJSON.apply(this,arguments);delete n.discountExpiresOn,delete n.planLevel,delete n.certificates,n.basePrice instanceof l.default&&(n.basePrice=n.basePrice.toJson());var i=r.JSON.stringify(n);return i}},{ATTRS:{id:{validator:r.Squarespace.AttrValidators.isString},autoRenew:{validator:r.Squarespace.AttrValidators.isBoolean},renewsOn:{validator:r.Squarespace.AttrValidators.isNullOrNumber},createdOn:{validator:r.Squarespace.AttrValidators.isNumber},certificates:{validator:r.Squarespace.AttrValidators.isArray},discountExpiresOn:{setter:function(n){return n instanceof Date?n:r.Lang.isNumber(n)?new Date(n):null}},isVerified:{validator:r.Squarespace.AttrValidators.isBoolean},locked:{validator:r.Squarespace.AttrValidators.isBoolean},managedDomainExpiration:{validator:r.Squarespace.AttrValidators.isNullOrNumber},name:{validator:r.Squarespace.AttrValidators.isString},planLevel:{validator:r.Squarespace.AttrValidators.isValueIn(a())},basePrice:{value:null,setter:function(n){return r.Lang.isObject(n)&&!(n instanceof l.default)&&(n=l.default.fromJson(n)),n!==null&&!(n instanceof l.default)?r.Attribute.INVALID_VALUE:n}},providerId:{validator:r.Squarespace.AttrValidators.isNullOrNumber},purchasedGoogleApps:{validator:r.Squarespace.AttrValidators.isBoolean},revocable:{validator:r.Squarespace.AttrValidators.isBoolean},subscriptionId:{validator:r.Squarespace.AttrValidators.isString},subscriptionState:{validator:r.Squarespace.AttrValidators.isValueIn(o())},type:{validator:r.Squarespace.AttrValidators.isNumber},verficationCode:{validator:r.Squarespace.AttrValidators.isNullOrString},withinPropagationWindow:{validator:r.Squarespace.AttrValidators.isBoolean},whoisPrivacy:{validator:r.Squarespace.AttrValidators.isNullOrBoolean}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest"]})},7837:function(c,b,t){"use strict";var l=t(714487),d=t(96563),o=t(377688);YUI.add("squarespace-editor-form-product",function(e){e.namespace("Squarespace"),e.Squarespace.ProductFormModelEditor=e.Base.create("productFormModelEditor",e.Squarespace.FormModelEditor,[],{initializer:function(){this.get("dialog").on("remove-requested",this._confirmAndRemove,this)},_confirmAndRemove:function(){var a=this.get("model"),r=a.isNew(),s=r?(0,l.t)("Discard Form",null,{project:"scripts-v6.editor"}):(0,l.t)("Delete Form",null,{project:"scripts-v6.editor"}),n;r?n=(0,l.t)("Are you sure you wish to discard this form?",null,{project:"scripts-v6.editor"}):n=(0,l.t)('Are you sure you wish to delete this form? Any products that are currently using this form in their Workflow settings will be set to "No Form Required".',null,{project:"scripts-v6.editor"}),new e.Squarespace.Widgets.Confirmation({"strings.title":s,"strings.message":n}).on("confirm",function(){a.destroy({remove:!0}),this.destroy()},this)}},{ATTRS:{dialogConfigStrings:{value:{title:(0,l.t)("Edit Product Form",null,{project:"scripts-v6.editor"}),loadingText:(0,l.t)("Editing Product Form\u2026",null,{project:"scripts-v6.editor"})}},fieldsets:{valueFn:function(){return[d.Z.BUILD]}},excludedFieldTypes:{value:[o.Z.HIDDEN]}}})},"1.0",{requires:["base","squarespace-editor-form","squarespace-ui-base","squarespace-widgets-confirmation"]})},295169:function(c,b,t){"use strict";var l=t(714487),d=t(967361),o=t(259093),e=t.n(o),a=t(935154),r=t.n(a),s=t(481312),n=t.n(s),i=t(43594),u=t.n(i),h=t(96563),g=t(868192),p=t(126571),f=t(649315),m=t.n(f),_=t(953203),v=t.n(_),E=t(119978),S=t(157484);YUI.add("squarespace-editor-form",function(y){y.namespace("Squarespace");var C=y.Squarespace.FormModelEditor=y.Base.create("formModelEditor",y.Squarespace.ModelEditorDialog,[],{initializer:function(){var O=this.get("dialog");O.on("ready",function(){var A=O.getField("formFields"),I=O.getField("formPreview");A&&I&&A.on("change",I.syncUI,this),this.hasFieldset(h.Z.CAPTCHA)&&(this._syncModelFieldWithPreview("captchaEnabled"),this._syncModelFieldWithPreview("captchaTheme"),this._syncModelFieldWithPreview("captchaAlignment"),this._updateCaptchaOptionsByFieldChange())},this)},hasFieldset:function(O){return this.get("fieldsets").indexOf(O)!==-1},_updateCaptchaOptionsByFieldChange:function(){var O=this.get("dialog"),A=O.getField("captchaEnabled");A&&(A.after("dataChange",this._updateCaptchaOptionsByFieldChange),A.get("data")===!1?(O.getField("captchaTheme").hide(),O.getField("captchaAlignment").hide()):(O.getField("captchaTheme").show(),O.getField("captchaAlignment").show()))},_syncModelFieldWithPreview:function(O){var A=this.get("dialog"),I=A.getField(O);I&&I.after("dataChange",function(D){this._formCopy.set(O,D.newVal)},this)},getDialogData:function(){var O=this.get("model").toJSON(),A=this._formCopy=new y.Squarespace.Models.Form(O),I={};if(this.hasFieldset(h.Z.BUILD)&&(I.formName=A.get("name"),I.formFields=A.get("fields"),I.formPreview=A),this.hasFieldset(h.Z.STORAGE)&&this._setStorageBackendsData(I,A),this.hasFieldset(h.Z.ADVANCED)){I=y.merge(I,A.getAttrs(["submitButtonText"])),this.hasFieldset(h.Z.DISCLAIMER)&&(I=y.merge(I,A.getAttrs(["disclaimerMessage"]))),I=y.merge(I,A.getAttrs(["submissionMessage","submissionHTML"]));var D=A.get("successRedirect");D&&(I=y.merge(I,{successRedirect:{url:D}}))}return this.hasFieldset(h.Z.CAPTCHA)&&(I=y.merge(I,A.getAttrs(["captchaEnabled","captchaTheme","captchaAlignment"]))),I},sanitizeDialogData:function(O){O=C.superclass.sanitizeDialogData.call(this,O);var A={};return this.hasFieldset(h.Z.BUILD)&&(A.name=O.formName),this.hasFieldset(h.Z.STORAGE)&&(A.backendConnectionConfigs={emailConnect:y.merge(O.emailConnect,{backendType:n().EMAIL}),googleDocsConnect:y.merge(O.googleDocsConnect,{backendType:n().GOOGLE}),mailchimpConnect:y.merge(O.mailchimpConnect,{backendType:n().MAILCHIMP}),campaignsConnect:y.merge(O.campaignsConnect,{backendType:n().CAMPAIGNS}),zapierConnect:y.merge(O.zapierConnect,{backendType:n().ZAPIER})}),this.hasFieldset(h.Z.ADVANCED)&&(A.submissionMessage=O.submissionMessage,A.submissionHTML=O.submissionHTML,A.submitButtonText=O.submitButtonText,O.successRedirect?typeof O.successRedirect=="string"?A.successRedirect=O.successRedirect:typeof O.successRedirect=="object"&&O.successRedirect.url&&(A.successRedirect=O.successRedirect.url):A.successRedirect=""),this.hasFieldset(h.Z.DISCLAIMER)&&(A.disclaimerMessage=O.disclaimerMessage),this.hasFieldset(h.Z.CAPTCHA)&&(A.captchaEnabled=O.captchaEnabled,A.captchaTheme=O.captchaTheme,A.captchaAlignment=O.captchaAlignment),this.hasFieldset(h.Z.BUILD)&&this.get("model").get("type")===e().CHECKOUT_PAGE&&(A.type=e().FORM_BLOCK),this._formCopy.setAttrs(A),this._formCopy.toJSON()},_setStorageBackendsData:function(O,A){var I=A.get("connectedBackends");y.Lang.isValue(I)&&y.Array.each(I,function(D){y.Lang.isValue(D.backendId)&&this._setStorageBackendData(O,D)},this)},_setStorageBackendData:function(O,A){var I=A.backendId,D=A.socialConfig;switch(A.backendType){case n().EMAIL:O.emailConnect={connectionState:u().CONNECTED,email:I};break;case n().GOOGLE:O.googleDocsConnect={connectionState:u().CONNECTED,username:D.profileUserName,socialConfig:D,spreadsheetName:A.config.spreadsheetName};break;case n().MAILCHIMP:var T=!!(A.config&&A.config.useSingleOptIn==="true");O.mailchimpConnect={connectionState:u().CONNECTED,username:D.profileUserName,useSingleOptIn:T,socialConfig:D,list:I};break;case n().ZAPIER:O.zapierConnect={connectionState:u().CONNECTED,url:I};break;case n().CAMPAIGNS:O.campaignsConnect={connectionState:u().CONNECTED,listId:I};break}},_onSendRequested:function(O){if(this.hasFieldset(h.Z.STORAGE)){var A=this.get("dialog").getData(),I=Object.keys(A).reduce(function(B,N){return N.endsWith("Connect")&&B.push(A[N].connectionState),B},[]),D=I.indexOf(u().CONNECTED)!==-1||I.indexOf(u().PENDING)!==-1;if(!D){var T=new y.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("No Storage Configured",null,{project:"scripts-v6.editor"}),"strings.message":(0,l.t)("Must configure a storage option before saving this form.",null,{project:"scripts-v6.editor"})});T.on("confirm",(function(){this.get("dialog").allowEditing()}).bind(this));return}}this.name==="productFormModelEditor"&&(this.get("model").get("id")||E.zE(S.MX.YUI_EDITOR)),C.superclass._onSendRequested.call(this,O)},_getTabConfigs:function(){var O=[];return y.Array.each(this.get("fieldsets"),function(A){switch(A){case h.Z.BUILD:O.push({tabTitle:(0,l.t)("Build",null,{project:"scripts-v6.editor"}),fields:this._getBuildFieldConfigs()});break;case h.Z.STORAGE:O.push({tabTitle:(0,l.t)("Storage",null,{project:"scripts-v6.editor"}),fields:this._getStorageFieldConfigs()});break;case h.Z.ADVANCED:O.push({tabTitle:(0,l.t)("Advanced",null,{project:"scripts-v6.editor"}),scroll:!0,fields:this._getAdvancedFieldConfigs()});break;case h.Z.CAPTCHA:p.g()&&O.push({tabTitle:(0,l.t)("Captcha",null,{project:"scripts-v6.editor"}),scroll:!0,fields:this._getCaptchaFieldConfigs()});break}},this),O[0].icon="/universal/images-v6/icons/icon-form-16-light.png",O},_getBuildFieldConfigs:function(){return[{ctor:y.Squarespace.DialogFields.Text,config:{name:"formName","strings.title":(0,l.t)("Form Name",null,{project:"scripts-v6.editor"})}},{type:"splitter",fields:[{type:"stack",name:"formBuilder",width:.5,fields:[{ctor:y.Squarespace.DialogFields.HTML,config:{name:"formBuilderTitle",content:"<strong>"+(0,l.t)("Manage Form Fields",null,{project:"scripts-v6.editor"})+"</strong>",className:"manageFormFieldsTitle"}},{ctor:y.Squarespace.DialogFields.FormBuilder,config:{name:"formFields",minimumLength:this.get("minimumLength"),excludedFieldTypes:this.get("excludedFieldTypes")}}]},{type:"stack",name:"preview",width:.5,fields:[{ctor:y.Squarespace.DialogFields.HTML,config:{name:"formPreviewTitle",content:"<strong>"+(0,l.t)("Live Form Preview",null,{project:"scripts-v6.editor"})+"</strong>"}},{ctor:y.Squarespace.DialogFields.FormPreview,config:{name:"formPreview"}}]}]}]},_getStorageFieldConfigs:function(){var O=[];return y.Array.each(this.get("acceptedBackendTypes"),function(A){switch(A){case n().GOOGLE:O.push({ctor:y.Squarespace.DialogFields.GoogleDocsServiceConnect,config:{name:"googleDocsConnect"}});break;case n().MAILCHIMP:d.Z.isFeatureEnabled(r().MAILCHIMP_INTEGRATION)&&O.push({ctor:y.Squarespace.DialogFields.MailChimpServiceConnect,config:{name:"mailchimpConnect"}});break;case n().EMAIL:O.push({ctor:y.Squarespace.DialogFields.EmailServiceConnect,config:{name:"emailConnect"}});break;case n().ZAPIER:d.Z.isFeatureEnabled(r().FORMS_API)&&O.push({ctor:y.Squarespace.DialogFields.ZapierServiceConnect,config:{name:"zapierConnect",getZapsConnected:y.bind(function(){var I=this.get("model");return I.getConnBackend(n().ZAPIER).length},this)}});break;case n().CAMPAIGNS:O.push({ctor:y.Squarespace.DialogFields.CampaignsServiceConnect,config:{name:"campaignsConnect"}});break}},this),O},_getAdvancedFieldConfigs:function(){var O=[];return O.push({ctor:y.Squarespace.DialogFields.Text,config:{name:"submitButtonText",className:"thin","strings.title":(0,l.t)("Submit Button Label",null,{project:"scripts-v6.editor"}),"strings.placeholder":(0,l.t)("Submit",null,{project:"scripts-v6.editor"})}}),this.hasFieldset(h.Z.DISCLAIMER)&&(O.push({ctor:y.Squarespace.DialogFields.Description,config:{name:"disclaimerDescription",title:(0,l.t)("Disclaimer",null,{project:"scripts-v6.editor"}),text:(0,l.t)("Displayed below the input field.",null,{project:"scripts-v6.editor"})}}),O.push({ctor:y.Squarespace.DialogFields.Wysiwyg,config:{name:"disclaimerMessage",editorHeight:125,classNames:"disclaimer"}})),O.push({ctor:y.Squarespace.DialogFields.Description,config:{name:"successRedirectDescription",title:(0,l.t)("Post-Submit Redirect",null,{project:"scripts-v6.editor"}),text:(0,l.t)("If provided, the user will be redirected upon form submission.",null,{project:"scripts-v6.editor"})}}),O.push({ctor:y.Squarespace.DialogFields.CreateLink,config:{name:"successRedirect",disableNewWindow:!0,condensed:!0,required:!1,renderTabs:{content:!0,external:!0,files:!1}}}),O.push({ctor:y.Squarespace.DialogFields.Description,config:{name:"submissionMessageDescription",title:(0,l.t)("Post-Submit Message",null,{project:"scripts-v6.editor"}),text:(0,l.t)("Display this message to users after they submit your form.",null,{project:"scripts-v6.editor"})}}),O.push({ctor:y.Squarespace.DialogFields.Wysiwyg,config:{name:"submissionMessage",editorHeight:175,classNames:"submissionMessage"}}),O.push({ctor:y.Squarespace.DialogFields.Description,config:{name:"submissionHTMLDescription",title:(0,l.t)("Post-Submit HTML",null,{project:"scripts-v6.editor"}),text:(0,l.t)("HTML to be rendered in addition to the Post-Submit Message.",null,{project:"scripts-v6.editor"})}}),O.push({ctor:y.Squarespace.DialogFields.HtmlCode,config:{name:"submissionHTML"}}),O},_getCaptchaFieldConfigs:function(){return[{ctor:y.Squarespace.DialogFields.Description,config:{name:"captchaDescription",title:(0,l.t)("Google ReCaptcha",null,{project:"scripts-v6.editor"}),text:(0,l.t)('Prevent spam and abuse by asking visitors to check I\u2019m not a robot before submitting. <a href="{helpLink}" target="_blank">Learn more</a>',{helpLink:g.GOOGLE_RECAPTCHA_SETUP},{project:"scripts-v6.editor"})}},{ctor:y.Squarespace.DialogFields.Check,config:{name:"captchaEnabled","strings.title":(0,l.t)("Add Google reCaptcha",null,{project:"scripts-v6.editor"})}},{ctor:y.Squarespace.DialogFields.Select,config:{name:"captchaTheme","strings.title":(0,l.t)("Theme",null,{project:"scripts-v6.editor"}),defaultValue:v().LIGHT,className:"thin dark",numeric:!0,options:[{value:v().LIGHT,label:(0,l.t)("Light",null,{project:"scripts-v6.editor"})},{value:v().DARK,label:(0,l.t)("Dark",null,{project:"scripts-v6.editor"})}]}},{ctor:y.Squarespace.DialogFields.Select,config:{name:"captchaAlignment","strings.title":(0,l.t)("Alignment",null,{project:"scripts-v6.editor"}),defaultValue:m().LEFT,className:"thin dark",numeric:!0,options:[{value:m().LEFT,label:(0,l.t)("Left",null,{project:"scripts-v6.editor"})},{value:m().CENTER,label:(0,l.t)("Center",null,{project:"scripts-v6.editor"})},{value:m().RIGHT,label:(0,l.t)("Right",null,{project:"scripts-v6.editor"})}]}}]}},{ATTRS:{dialogConfigStrings:{value:{title:(0,l.t)("Form",null,{project:"scripts-v6.editor"}),loadingText:(0,l.t)("Editing Form\u2026",null,{project:"scripts-v6.editor"})},validator:y.Squarespace.AttrValidators.isObject},fieldsets:{valueFn:function(){return[h.Z.BUILD,h.Z.STORAGE,h.Z.ADVANCED,h.Z.CAPTCHA]},validator:y.Squarespace.AttrValidators.isArray},minimumLength:{value:0,validator:y.Squarespace.AttrValidators.isNumber},excludedFieldTypes:{values:[],validator:y.Squarespace.AttrValidators.isArray},buttons:{value:[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6.editor"})},{type:"remove",title:(0,l.t)("Delete Form",null,{project:"scripts-v6.editor"})},{type:"saveAndClose",title:(0,l.t)("Save",null,{project:"scripts-v6.editor"})}],validator:y.Squarespace.AttrValidators.isArray},acceptedBackendTypes:{valueFn:function(){return y.Object.values(n())}},model:{value:null,validator:function(O){return y.instanceOf(O,y.Squarespace.Models.Form)}},dialogConfig:{getter:function(){var O=this.get("dialogConfigStrings"),A={name:"editForm",title:O.title,loadingText:O.loadingText,closeOthers:!1,overlay:.7,style:"flyout",flyoutPointerDirection:"hidden",initialDataByReference:!0,width:850,height:454,buttons:this.get("buttons"),tabs:this._getTabConfigs()};return A}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-create-link","squarespace-dialog-email-service-connect","squarespace-dialog-form-builder","squarespace-dialog-form-preview","squarespace-dialog-campaigns-service-connect","squarespace-dialog-google-docs-service-connect","squarespace-dialog-html","squarespace-dialog-mailchimp-service-connect","squarespace-dialog-text","squarespace-dialog-wysiwyg","squarespace-dialog-zapier-service-connect","squarespace-model-editor","squarespace-models-form","squarespace-ui-base","squarespace-widgets-alert"]})},555060:function(c,b,t){"use strict";var l=t(714487),d=t(481312),o=t.n(d),e=t(96563);YUI.add("squarespace-editor-slide-custom-form",function(a){a.namespace("Squarespace"),a.Squarespace.SlideCustomFormEditor=a.Base.create("SlideCustomFormEditor",a.Squarespace.FormModelEditor,[],{},{ATTRS:{dialogConfigStrings:{value:{title:(0,l.t)("Edit Form",null,{project:"scripts-v6.editor"}),loadingText:(0,l.t)("Editing Form\u2026",null,{project:"scripts-v6.editor"})}},buttons:{value:[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6.editor"})},{type:"saveAndClose",title:(0,l.t)("Save",null,{project:"scripts-v6.editor"})}]},fieldsets:{valueFn:function(){return[e.Z.BUILD,e.Z.STORAGE,e.Z.ADVANCED,e.Z.DISCLAIMER,e.Z.CAPTCHA]}},acceptedBackendTypes:{valueFn:function(){return[o().EMAIL,o().GOOGLE,o().MAILCHIMP,o().ZAPIER]}}}})},"1.0",{requires:["base","squarespace-editor-form"]})},565186:function(c,b,t){"use strict";var l=t(714487),d=t(481312),o=t.n(d),e=t(96563);YUI.add("squarespace-editor-slide-newsletter-form",function(a){a.namespace("Squarespace"),a.Squarespace.SlideNewsletterFormEditor=a.Base.create("SlideNewsletterFormEditor",a.Squarespace.FormModelEditor,[],{},{ATTRS:{dialogConfigStrings:{value:{title:(0,l.t)("Edit Newsletter Signup",null,{project:"scripts-v6.editor"}),loadingText:(0,l.t)("Editing Newsletter Signup",null,{project:"scripts-v6.editor"})}},buttons:{value:[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6.editor"})},{type:"saveAndClose",title:(0,l.t)("Save",null,{project:"scripts-v6.editor"})}]},fieldsets:{valueFn:function(){return[e.Z.STORAGE,e.Z.ADVANCED,e.Z.DISCLAIMER]}},acceptedBackendTypes:{valueFn:function(){return[o().CAMPAIGNS,o().GOOGLE,o().MAILCHIMP]}}}})},"1.0",{requires:["base","squarespace-editor-form"]})},753:function(){YUI.add("squarespace-escaping-utils",function(c){c.namespace("Squarespace"),c.Squarespace.Escaping={escapeForHtml:function(b){return b&&b.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},escapeForHtmlTag:function(b){return b&&b.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;")}}},"1.0",{requires:[]})},577089:function(c,b,t){"use strict";var l=t(324270),d=t(208935),o=t(985913),e=[".add-page-popover"];YUI.add("squarespace-escmanager",function(a){a.Squarespace.STANDARD_CONTROL_CLASSES=[".standard-dialog-wrapper",".yui3-panel-type-tooltip",".sqsp-tooltip",".tooltip",".inline-field-title",".workflow-flyout",".page-map",".map-widget",".dialog-element",".error-message-wrapper",".squarespace-block",".sqs-block",".buttons a",".sqs-shopping-cart",".panel-menu-item",".flyout-variant-edit",".image-focal-point","a.return-button","a#deactivated-account-link",".site-chooser-glyph",".lightbox-inner",".sqs-configuration-menu .site-title-text",".sqs-configuration-menu .user-id",".sqs-add-to-cart-button",".additional-fields",".rte",".sqs-scroll-ac-item",".sqs-layout-insert-block-menu",".sqs-widgets-confirmation",".sqs-password-prompt",".tag-bubble",".sqs-fullscreen-overlay-imagepicker",".u-ActionButtons-container",".ReactModal__Overlay","."+d.ESCMANAGER_IGNORE_CLASSNAME,".CCLinkEditorModal",".CCPageDropDown",".sqs-dialog-field:not(.sqs-dialog-layout-wrapper)"],a.namespace("SQS.DDWrappers").STANDARD_CONTROL_CLASSES=a.Squarespace.STANDARD_CONTROL_CLASSES,a.Squarespace.EscManager={closeTargets:[],attached:[],attach:function(r){r=r||a.one(a.config.win);var s=r.generateID();if(this.attached.indexOf(s)===-1){var n=a.Squarespace.EscManager;(0,o.F)(a)&&(n=a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.EscManager"));var i=r;i.on("keyup",n.onKeyUp,n),i.on("click",n.onBodyClick,n),i.on("mousedown",n._onBodyDown,n),i.on("mouseup",n._onBodyUp,n),this.attached.push(s),this._disabled=!1}},destroy:function(){this.detach(),this._bodyDownTarget=null,this._bodyUpTarget=null},detach:function(r){r=r||a.one(a.config.win),r.detachAll()},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},onEsc:function(r){r.target.ancestor(e.join(", "))||(a.config.win.Static&&Static.IN_BACKEND?a.one("html").hasClass("sqs-guide-open")?window.CONFIG_PANEL.closeGuide():l.default.toggleFullScreenPreviewMode():window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.getAccount()&&this._redirectToConfig())},addTarget:function(r){this.closeTargets.push(r)},removeTarget:function(r){var s=this.closeTargets.indexOf(r);s!==-1&&this.closeTargets.splice(s,1)},onKeyUp:function(r){if(r.keyCode===27&&!this._disabled)if(r.halt(),this.closeTargets.length>0){var s=this.closeTargets.pop();this._closeTarget(s,r)}else a.later(10,this,this.onEsc,r)},_redirectToConfig:function(){var r=a.config.win.location,s="https://"+Static.SQUARESPACE_CONTEXT.website.identifier+"."+Static.SQUARESPACE_CONTEXT.appDomain+"/config/?frameUrl="+r.pathname+r.search;a.config.win.location=s},_closeTarget:function(r,s){a.Lang.isFunction(r.close)?r.close(s,(function(n){n===!1&&this.closeTargets.push(r)}).bind(this)):a.Lang.isFunction(r.cancel)?r.cancel(s):a.Lang.isFunction(r.hide)&&r.hide(s)},_onBodyDown:function(r){this._bodyDownTarget=r.target},_onBodyUp:function(r){this._bodyUpTarget=r.target},_didMouseDownMouseUpMatch:function(){var r=this._bodyDownTarget===this._bodyUpTarget;return this._bodyDownTarget=null,this._bodyUpTarget=null,r},onBodyClick:function(r){if(this.closeTargets&&this.closeTargets.length>0){var s=this.closeTargets[this.closeTargets.length-1];if(!this._didMouseDownMouseUpMatch()||s.ignoreBodyClicks)return;var n=r.clientX,i=r.clientY,u=r.target.get("winWidth"),h=r.target.get("winHeight");if(n<0||n>u||i<0||i>h)return;s.activeFlyout?r.target.ancestor(s.activeFlyout.constraintClasses,!0)||(s.activeFlyout.field.closeFlyout(),s.activeFlyout=null,a.fire("target-closed",{target:s})):r.target.ancestor(a.Squarespace.STANDARD_CONTROL_CLASSES.join(", "),!0)||(a.fire("target-closed",{target:s}),r.halt(),this.closeTargets.pop(),this._closeTarget(s,r))}}},typeof window<"u"&&(window.ESC_MANAGER?a.Squarespace.EscManager=window.ESC_MANAGER:window.ESC_MANAGER=a.Squarespace.EscManager)},"1.0",{requires:["event","node","squarespace-damask-context-globals","squarespace-util"]})},687338:function(){YUI.add("squarespace-event-dbltap",function(c){c.Event.define("dbltap",{on:function(b,t,l){this._clear(t),t._handle=b.on("tap",function(d){t._timer&&t._timer.cancel(),++t._counter===2?(this._clear(t),l.fire(d)):t._timer=c.later(300,this,this._clear,[t])},null,this)},detach:function(b,t,l){t._handle.detach(),t._timer&&t._timer.cancel()},_clear:function(b){b._counter=0,b._timer=null}})},"1.0",{requires:["event","event-synthetic","event-tap"]})},687561:function(c,b,t){"use strict";var l=t(545334),d=t.n(l);YUI.add("squarespace-events-collection-calendar",function(o){var e=o.namespace("Squarespace").EventsCollectionCalendar=o.Base.create("eventsCollectionCalendar",o.Squarespace.SquarespaceCalendar,[],{initializer:function(){this.set("_history",new o.History),this._addHistory()},destructor:function(){this._navClickEvent.detach(),this._historyChangeEvent.detach()},bindUI:function(){e.superclass.bindUI.call(this),this._navClickEvent=this.get("contentBox").delegate("click",this._addHistory,".yui3-calendarnav-prevmonth, .yui3-calendarnav-nextmonth",this),this._historyChangeEvent=o.on("history:change",function(a){a.src===o.HistoryHTML5.SRC_POPSTATE&&a.newVal.month&&this.set("date",a.newVal.month)},this)},_addHistory:function(){var a=this.get("date"),r=this._buildQueryStringForHistoryUrl(a),s=o.config.win.location.pathname+r;this.get("_history").addValue("month",a,{url:s})},_buildQueryStringForHistoryUrl:function(a){var r=d()(a).locale("en").format("MM-YYYY"),s=this.get("category"),n=this.get("tag"),i=this.get("author"),u="?view=calendar&month="+r+(s?"&category="+s:"")+(n?"&tag="+n:"")+(i?"&author="+i:"");return u},_preventSelectionStart:null},{ATTRS:{}})},"1.0",{requires:["base","history","node","squarespace-calendar-core-renderer","squarespace-util"]})},73700:function(c,b,t){"use strict";var l=t(329001),d=t(545334),o=t.n(d),e=t(899715),a=t.n(e);YUI.add("squarespace-events-collection",function(r){r.namespace("Squarespace.EventsCollection").ListViewPlugin=r.Base.create("eventsCollectionListViewPlugin",r.Plugin.Base,[],{initializer:function(){this.set("thumbnails",this.get("host").all(".eventlist-column-thumbnail img[data-src]")),this.get("thumbnails").each(function(s){s.plug(r.Squarespace.Loader2,{load:!0,mode:"fill"})}),this._syncUI(),this._bindUI()},destructor:function(){this._resizeEvent&&this._resizeEvent.detach(),this._tweakChangeEvent&&this._tweakChangeEvent.detach(),this._tweakResetEvent&&this._tweakResetEvent.detach()},_bindUI:function(){this._resizeEvent=r.on("windowresize",function(){this._syncUI()},r.config.win,this),this._bindTweakEvents()},_syncUI:function(){this.get("thumbnails").each(function(s){s.fire("refresh")})},_bindTweakEvents:function(){this._tweakChangeEvent=r.Global.on("tweak:change",function(s){var n=s.getName();(n==="event-thumbnails"||n==="event-thumbnail-size"||n==="event-list-compact-view"||n==="event-show-past-events")&&this._syncUI()},this),this._tweakResetEvent=r.Global.on("tweak:reset",function(s){this._syncUI()},this)}},{NS:"eventsCollection"}),r.Squarespace.EventsCollection.initializeListView=function(s){s.plug(r.Squarespace.EventsCollection.ListViewPlugin)},r.Squarespace.EventsCollection.initializeCalendarView=function(s){var n=r.QueryString.parse(r.config.win.location.search.substring(1)),i;if(n.month){i=n.month;var u=i.substring(0,2),h=r.config.win.parseInt(u,10),g=!r.config.win.isNaN(h),p=g?"MM-YYYY":"MMMM-YYYY";i=o()(i,p).toDate()}else i=(0,l.Z)(new Date);new r.Squarespace.EventsCollectionCalendar({contentBox:s,collectionId:s.getAttribute("data-collection-id"),date:i,category:n.category||"",tag:n.tag||"",author:n.author||"",render:!0}).plug(r.Squarespace.SquarespaceCalendarRenderer)},r.config.win.Squarespace.onInitialize(r,function(){r.one(".sqs-events-collection-list")&&r.all(".sqs-events-collection-list").each(r.Squarespace.EventsCollection.initializeListView),r.one(".sqs-events-collection-calendar")&&r.all(".sqs-events-collection-calendar").each(r.Squarespace.EventsCollection.initializeCalendarView)}),r.config.win.Squarespace.onDestroy(r,function(){r.one(".sqs-events-collection-list")&&r.all(".sqs-events-collection-list").each(function(s){s.unplug(r.Squarespace.EventsCollection.ListViewPlugin)}),r.one(".sqs-events-collection-calendar")&&r.all(".sqs-events-collection-calendar").each(function(s){var n=r.Widget.getByNode(s);n&&n.destroy()})}),r.namespace("Squarespace").EventCollectionCalendar=r.Base.create("eventCollectionCalendar",r.Widget,[],{render:function(){new r.Squarespace.EventsCollectionCalendar({contentBox:this.get("contentBox"),collectionId:r.config.win.Static.SQUARESPACE_CONTEXT.collectionId,render:!0}).plug(r.Squarespace.SquarespaceCalendarRenderer)}},{ATTRS:{}})},"1.0",{requires:["base","node","squarespace-calendar-core-renderer","squarespace-events-collection-calendar","squarespace-image-loader"]})},61961:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-existing-content-link-tab",function(d){d.namespace("Squarespace.Views");var o=d.Squarespace.Views.ExistingContentLinkTab=d.Base.create("ExistingContentLinkTab",d.Squarespace.View,[],{template:"existing-content-link-tab.html",initializer:function(e){o.superclass.initializer.apply(this,arguments),this._contentOptions=new d.Squarespace.DialogFields.ContentSelector({data:this.get("selectedContent")}),this.get("disableNewWindow")||(this._newWindowField=new d.Squarespace.DialogFields.Check({name:"newWindow","strings.title":(0,l.t)("Open in New Window",null,{project:"scripts-v6-root"}),data:this.get("newWindow")}))},render:function(){o.superclass.render.apply(this,arguments);var e=this.get("container");this._contentOptions.render(e.one(".content-options")),this.get("disableNewWindow")||this._newWindowField.render(e.one(".existing-content-link-tab")),this.bindUI()},bindUI:function(){this._contentOptions.on("dataChange",function(e){this.set("selectedContent",e.newVal),this._dataChanged()},this),this.get("disableNewWindow")||this._newWindowField.after("dataChange",function(e){this.set("newWindow",e.newVal),this._dataChanged(!0)},this)},reset:function(){this.set("selectedContent",null),this._contentOptions.clearSelected()},_dataChanged:function(e){var a=this.get("onDataChange");if(d.Lang.isFunction(a)){var r=this.get("selectedContent"),s=this.get("newWindow");a(r,s,e)}}},{ATTRS:{onDataChange:{value:null},selectedContent:{value:null},disableNewWindow:{value:!1},newWindow:{value:!1}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-content-selector","squarespace-dialog-html","squarespace-dialog-text","squarespace-existing-content-link-tab-template","squarespace-models-template-navigation-list","squarespace-ss-widget","squarespace-ui-base","squarespace-util-authenticated","squarespace-view"]})},791368:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-external-image-picker",function(d){var o=d.namespace("Squarespace.Widgets").ExternalImagePicker=d.Base.create("externalImagePicker",d.Squarespace.SSWidget,[d.WidgetParent],{initializer:function(e){if(!e.scrapeUrl)throw new Error(this.name+": A scrapeUrl is required in the initialization config.")},renderUI:function(){o.superclass.renderUI.call(this),this._imagePicker=new d.Squarespace.Widgets.ImagePicker({hideOnSelect:this.get("hideOnSelect"),"strings.noImages":(0,l.t)("No large images available at that URL.",null,{project:"scripts-v6-root"})}),this.after(this.get("id")+"|hideOnSelectChange",function(e){this._imagePicker.set("hideOnSelect",e.newVal)},this),this.add(this._imagePicker)},bindUI:function(){o.superclass.bindUI.call(this);var e=this.get("id");this._imagePicker.after(e+"|selectedImageURLChange",function(a){this._set("selectedImageURL",a.newVal)},this),this._imagePicker.after(e+"|cancel",function(a){this.fire("cancel")},this),this.on(e+"|visibleChange",this._updateVisibility,this)},syncUI:function(){o.superclass.syncUI.call(this),this._scrapeUrl()},_scrapeUrl:function(){this._imagePicker.set("dataState",this._imagePicker.getProperty("DATA_STATES").LOADING),d.Data.post({url:"/api/scrape/LocateInterestingTags",data:{url:this.get("scrapeUrl")},success:function(e){this._showLargeImages(e.images)},failure:function(e){var a=this._imagePicker.getProperty("DATA_STATES").LOAD_FAILED;this._imagePicker.set("dataState",a)}},this)},_showLargeImages:function(e){if(e&&e.length===0){this._imagePicker.setLoadedState();return}var a=this.get("id"),r=new d.Squarespace.AsyncTaskSynchronizer({completionCallback:function(i){this._imagePicker.setLoadedState()},callbackContext:this}),s=this.get("minimumImageDimensions"),n=[];d.Array.each(e,function(i){var u=new d.Squarespace.Image({src:i,loadOnSrcChange:!1});u.after(a+"|loadCompleteChange",function(h){if(!u.get("loadFailed")&&u.get("width")>=s.width&&u.get("height")>=s.height){var g=this._imagePicker.get("imageURLs");g.push(i),this._imagePicker.set("imageURLs",g)}},this),r.add(u,"loadCompleteChange"),n.push(u)},this),d.Array.each(n,function(i){i.load()},this)},_updateVisibility:function(e){e.silent||e.newVal===e.prevVal||(e.preventDefault(),this._imagePicker.after(this.get("id")+"|visibleChange",function(a){this.set("visible",a.newVal,{silent:!0})},this),e.newVal?this._imagePicker.show():this._imagePicker.hide())},show:function(){o.superclass.show.call(this),this.set("visible",!0)},hide:function(){o.superclass.hide.call(this),this.set("visible",!1)}},{CSS_PREFIX:"sqs-external-image-picker",ATTRS:{visible:{value:!1},scrapeUrl:{value:"",writeOnce:"initOnly"},minimumImageDimensions:{writeOnce:"initOnly",value:{height:150,width:150}},selectedImageURL:{value:null,readOnly:!0},hideOnSelect:{value:!0}}})},"1.0",{requires:["base","squarespace-async-task-synchronizer","squarespace-image","squarespace-image-picker","squarespace-ss-widget","squarespace-ui-base"]})},20463:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-external-link-tab",function(d){var o=d.namespace("Squarespace.Views").ExternalLinkTab=d.Base.create("ExternalLinkTab",d.Squarespace.View,[],{template:"external-link-tab.html",initializer:function(e){o.superclass.initializer.apply(this,arguments),this._protocolRegex=/(?:^#)|(?:^\.{0,2}\/)|(?:^mailto:)|^[a-z]+:\/\//,this._defaultProtocol="http://",this._initialLinkUrl=this.get("linkUrl"),this._input=new d.Squarespace.DialogFields.Text({data:this.get("linkUrl")=="#"?null:this.get("linkUrl"),"strings.placeholder":(0,l.t)("http://\u2026",null,{project:"scripts-v6-root"})}),this.get("disableNewWindow")||(this._newWindowField=new d.Squarespace.DialogFields.Check({name:"newWindow","strings.title":(0,l.t)("Open in New Window",null,{project:"scripts-v6-root"}),data:this.get("newWindow"),className:this.get("className")}))},destructor:function(){this._newWindowField&&this._newWindowField.destroy()},render:function(){o.superclass.render.apply(this,arguments);var e=this.get("container");this._input.render(e.one(".link")),this.get("disableNewWindow")||this._newWindowField.render(e.one(".external-link-tab")),this.bindUI()},bindUI:function(){var e=this._input.get("contentBox").one("input");e.on("valuechange",this._inputChange,this),e.on("key",function(a){this._dataChanged(!0),a.halt()},"down:13",this),this.get("disableNewWindow")||this._newWindowField.after("dataChange",function(a){this.set("newWindow",a.newVal),this._dataChanged()},this),this.get("container").one(".visit").on("click",this._visit,this)},reset:function(){this.set("linkUrl",""),this.set("newWindow",!1),this.get("container").one('input[type="text"]').set("value","")},_inputChange:function(){var e=this._linkTrim(this._input.get("contentBox").one("input").get("value"));e&&!this._protocolRegex.test(e)&&e.indexOf(":")===-1&&(e=this._defaultProtocol+e),this.set("linkUrl",e),this._dataChanged()},_visit:function(){var e=this._input.get("contentBox").one("input").get("value");e&&(this._protocolRegex.test(e)||(e=this._defaultProtocol+e),window.open(e,"visitLink"))},_dataChanged:function(e){var a=this.get("onDataChange");d.Lang.isFunction(a)&&a(this.get("linkUrl"),this.get("newWindow"),e)},_linkTrim:function(e){var a=/(?:^[^!-~]+)|(?:\s+$)/g;return(e||"").replace(a,"")}},{ATTRS:{disableNewWindow:{value:!1},linkUrl:{value:null},newWindow:{value:!1},externalServiceProviderType:{value:null},onDataChange:{value:null}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-text","squarespace-external-link-tab-template","squarespace-view"]})},596457:function(){YUI.add("squarespace-factory-utils",function(c){c.namespace("Squarespace"),c.Squarespace.FactoryUtils={createEnumToClassFactory:function(b,t,l,d){var o={},e=c.Object.values(b);return c.Array.reduce(e,o,function(a,r){var s,n=c.Object.some(t,function(i){if(i[l]===r)return s=i,!0});return n?a[r]=s:c.Lang.isValue(d)&&(a[r]=t[d]),a}),{create:function(a,r){var s=o[a];if(!c.Lang.isValue(s))throw new Error("FactoryUtils: Could not find ctor for enumValue "+a+".");return new s(r||{})}}}}},"1.0",{requires:[]})},698679:function(c,b,t){"use strict";var l=t(586745),d=t.n(l),o=t(714487);YUI.add("squarespace-file-manager-tab",function(e){var a=(0,o.t)("Add a file",null,{project:"scripts-v6-root"}),r=(0,o.t)("Uploading file\u2026",null,{project:"scripts-v6-root"}),s=(0,o.t)("Uploaded ",null,{project:"scripts-v6-root"}),n=e.namespace("Squarespace.Views").FileManagerTab=e.Base.create("FileManagerTab",e.Squarespace.View,[],{template:"file-manager-tab.html",initializer:function(i){n.superclass.initializer.apply(this,arguments),this._options=new e.Squarespace.DialogFields.MultiOption({data:this.get("selectedFile")?"existing":"new",options:[{value:"new",title:(0,o.t)("New File",null,{project:"scripts-v6-root"}),icon:"new"},{value:"existing",title:(0,o.t)("Existing File",null,{project:"scripts-v6-root"}),icon:"existing"}]}),this._frames=new e.Squarespace.DialogFields.MultiFrame({data:this.get("selectedFile")?"existing":"new",frames:[{name:"new",fields:[]},{name:"existing",fields:[{ctor:e.Squarespace.DialogFields.FileManager,config:{name:"selectFile",data:this.get("selectedFile")}}]}]}),this._uploader=new e.Squarespace.Uploader({process:!1,autoUpload:!0,uploadURL:"/api/uploads/files"}),this._spinnerEl=e.Node.create('<div class="spinner"></div>'),this.get("disableNewWindow")||(this._newWindowField=new e.Squarespace.DialogFields.Check({name:"newWindow","strings.title":(0,o.t)("Open in New Window",null,{project:"scripts-v6-root"}),data:this.get("newWindow")}))},render:function(){n.superclass.render.apply(this,arguments);var i=this.get("container");this._options.render(i.one(".options")),this._frames.render(i.one(".frames")),this._frames.get("contentBox").all(".frame").each(function(u){if(u.getAttribute("data-name")==="new"){this._uploader.set("dragAndDropArea",u),this._uploader.render(u);var h=this._uploader.get("contentBox");this._uploaderIcon=h.one(".icon"),this._uploaderText=h.one(".text"),this._spinnerEl.hide(),this._uploaderIcon.append(this._spinnerEl)}},this),this.get("disableNewWindow")||this._newWindowField.render(i.one(".file-manager-tab")),this.bindUI()},bindUI:function(){this._options.on("dataChange",function(i){if(this._frames.switchFrames(i.newVal),i.newVal==="existing"){var u=this._frames.get("contentBox");u.one(".search input").focus(),u.set("scrollLeft",0)}},this),this._frames.getField("selectFile").on("dataChange",function(i){this.set("selectedFile",i.newVal),this._dataChanged()},this),this._uploader.set("processFile",e.bind(function(i){if(i.invalid){var u=i.invalid[0];new e.Squarespace.Widgets.Alert({"strings.title":u.title,"strings.message":u.message})}else this._uploaderIcon.addClass("loading"),this._uploaderText.setContent(r),this._spinner=new e.Squarespace.Spinner({color:"dark",size:"large",render:this._spinnerEl}),this._spinnerEl.show(),i.postData={contentType:"binary",recordType:d().ATTACHMENT,useFilenameAsUrlId:"true"}},this)),this._uploader.set("fileComplete",e.bind(function(i,u){var h=u.media[0];this.set("selectedFile",h.urlId),this._spinnerEl.anim({opacity:0},{duration:1.25,start:function(){this._uploaderText.setContent(s+e.Escape.html(u.media[0].filename))},end:function(){this._spinnerEl.hide(),this._dataChanged(),new e.Squarespace.Widgets.Information({"strings.title":(0,o.t)("File Uploaded",null,{project:"scripts-v6-root"}),"strings.message":(0,o.t)("Your file has been successfully uploaded.",null,{project:"scripts-v6-root"})}),e.later(1e3,this,function(){this._uploaderIcon.removeClass("loading"),this._uploaderText.setContent(a);var g=this._frames.getField("selectFile");g.set("data",h.urlId,{silent:!0}),g.updateFullList(),this._options.selectOption("existing")})},context:this}).run()},this)),this.get("disableNewWindow")||this._newWindowField.after("dataChange",function(i){this.set("newWindow",i.newVal),this._dataChanged()},this)},reset:function(){this.set("selectedFile",null),this._options.selectOption("new"),this._frames.set("data",null),this.set("newWindow",!1),this._frames.get("contentBox").all(".attachment").removeClass("selected")},_dataChanged:function(){var i=this.get("onDataChange");if(e.Lang.isFunction(i)){var u=this.get("selectedFile"),h=this.get("newWindow");i(u,h)}}},{ATTRS:{selectedFile:{value:null},onDataChange:{value:null},disableNewWindow:{value:!1},newWindow:{value:!1}}})},"1.0",{requires:["base","squarespace-dialog-check","squarespace-dialog-file-manager","squarespace-dialog-html","squarespace-dialog-multi-frame","squarespace-dialog-multi-option","squarespace-dialog-text","squarespace-file-manager-tab-template","squarespace-spinner","squarespace-ui-base","squarespace-uploader","squarespace-view","squarespace-widgets-alert","squarespace-widgets-information"]})},608781:function(){YUI.add("squarespace-fluent-confirmation",function(c){var b=c.namespace("Squarespace.Fluent"),t=function(e,a,r,s){e.on("confirm",c.bind.apply(this,[a,this].concat(s))),e.on("reject",c.bind(r,this,{cancel:!1})),e.on("cancel",c.bind(r,this,{cancel:!0}))},l=function(e,a,r){return new c.Promise(function(s,n){a=c.Lang.isObject(a)&&!c.Lang.isArray(a)?a:{};var i=new e(a);t(i,s,n,r)})},d=function(e){return function(a){return function(){var r=Array.prototype.slice.call(arguments,0);return l(e,a,r)}}},o=function(e){return function(a,r){return r=r?[r]:[],l(e,a,r)}};b.Confirm=o(c.Squarespace.Widgets.Confirmation),b.Alert=o(c.Squarespace.Widgets.Alert),b.Inform=o(c.Squarespace.Widgets.Information),b.DataConfirm=o(c.Squarespace.Widgets.DataConfirmation),b.Confirmation=d(c.Squarespace.Widgets.Confirmation),b.Alerting=d(c.Squarespace.Widgets.Alert),b.Information=d(c.Squarespace.Widgets.Information),b.DataConfirmation=d(c.Squarespace.Widgets.DataConfirmation),b.TYPE=c.Squarespace.Widgets.Confirmation.TYPE,b.ANCHOR=c.Squarespace.Widgets.Confirmation.ANCHOR},"1.0",{requires:["promise","squarespace-ui-base","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-data-confirmation","squarespace-widgets-information"]})},113361:function(c,b,t){"use strict";var l=t(233284),d=t(174161),o=t(762379),e=t(444867),a=t.n(e),r=t(208935),s=t(795478),n=t.n(s),i=t(845076),u=t.n(i),h=t(714487),g=t(934951),p=t(361411),f=t.n(p);function m(z,j,X){return j in z?Object.defineProperty(z,j,{value:X,enumerable:!0,configurable:!0,writable:!0}):z[j]=X,z}var _;class v extends(_=d.Component){UNSAFE_componentWillMount(){if(document.body.appendChild(this.node),this.props.isOpen){const j=this.getAnchor();j&&this.setState({anchor:j})}}UNSAFE_componentWillReceiveProps(j){if(j.isOpen&&j.link&&(!this.props.isOpen||!this.props.link||j.link.href!==this.props.link.href||!this.state.anchor)){const X=this.getAnchor(j);X&&this.setState({anchor:X})}}componentDidUpdate(j){this.props.isOpen&&this.props.inFullScreen!==j.inFullScreen&&setTimeout(()=>{const X=this.getAnchor();X&&this.setState({anchor:X})},0)}componentWillUnmount(){this.node.parentElement&&this.node.parentElement.removeChild(this.node)}getAnchor(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return j.anchor?j.anchor:v.getAnchor(j.getSelection())}renderPreview(){const{link:j,className:X}=this.props,{anchor:J}=this.state,Q=j.href,ie=(0,h.t)("No Link URL",null,{project:"src.shared"}),ce=u()(f().container,X);return d.createElement("div",{className:ce,style:J},d.createElement("a",{className:f().link,href:Q,target:"_blank",title:(0,h.t)("Go to URL",null,{project:"src.shared"}),onMouseDown:function(pe){pe.stopPropagation(),pe.preventDefault(),window.open(pe.currentTarget.href)}},d.createElement("span",{className:f().linkText},Q||ie)),d.createElement("button",{className:f().actionButton,onMouseDown:this.handleRemoveClick},d.createElement(g.T,{project:"src.shared"},"Remove")),d.createElement("button",{className:f().actionButton,onMouseDown:this.handleEditClick},d.createElement(g.T,{project:"src.shared"},"Edit")))}render(){const{link:j,isOpen:X}=this.props;return!X||!this.state.anchor||!j||!j.href?null:l.createPortal(this.renderPreview(),this.node)}constructor(...j){super(...j),m(this,"state",{anchor:this.props.anchor}),m(this,"node",document.createElement("div")),m(this,"handleRemoveClick",X=>{X.preventDefault(),this.props.onRemoveLink()}),m(this,"handleEditClick",X=>{X.preventDefault(),this.props.onEditLink(this.props.link)})}}m(v,"propTypes",{anchor:n().shape({left:n().number,top:n().number}),link:n().shape({href:n().string,target:n().string}),onRemoveLink:n().func.isRequired,onEditLink:n().func.isRequired,isOpen:n().bool,inFullScreen:n().bool,getSelection:n().func}),m(v,"defaultProps",{getSelection:function(){return window.getSelection()},isOpen:!1}),m(v,"getAnchor",function(z){if(!z||z.rangeCount===0)return null;let j=z.getRangeAt(0).startContainer;if(!j||!j.getBoundingClientRect&&(j=j.parentElement,!j))return null;const{bottom:X,left:J}=j.getBoundingClientRect();return{top:X,left:Math.min(J,window.innerWidth-305)}});const E=v;var S=t(153088),y=t(461761),C=t.n(y),O=t(685763),A=t(961360),I=t(553772),D=t(225840),T=t(646430),B=t(786498),N=t.n(B),P,x;const R=o.Z.isFeatureEnabled(a().NESTED_CATEGORIES)?{CONTENT_PICKER:{websiteId:(x=(0,D.getWebsiteContext)())===null||x===void 0||(P=x.website)===null||P===void 0?void 0:P.id,versions:{collection:{product:T.$}}}}:{},w=z=>z.stopPropagation();function k(z){let{className:j,modalClassName:X,modalContainerClassName:J,pageDropdownClassName:Q,isOpen:ie,initialPosition:ce,value:pe,onChange:ye,canEditTextContent:Ae,onRequestClose:Je,linkTypes:ke,preventPointerEvents:Fe=!0,modalBodyRef:Ie}=z;const ht=C()(window,"Y.Squarespace.DIALOG_ZINDEX_BASE",I.Ue.MODALS);return d.createElement(O.Z.Transition,null,ie&&d.createElement(O.Z,{className:u()({[N().noPointerEvents]:Fe},j),lockScroll:!1,lockFocus:!1,onRequestClose:Je,zIndex:ht+11},d.createElement(O.Z.Position,{className:Fe?N().noPointerEvents:null,position:ce,constraintTo:"window"},d.createElement(O.Z.Dialog,{className:u()(r.NONINTERACTIVE_CLASSNAME,N().pointerEvents,N().editorContainer,J)},d.createElement("div",{ref:Ie,onClick:w},d.createElement(A.Z,{canEditTextContent:Ae,className:N().linkModal,modalClassName:u()(N().linkModal,X),pageDropdownClassName:Q,value:pe,linkTypes:ke,onChange:ye,autocompleteContentItems:!0,onRequestClose:Je,componentProps:R}))))))}const q=k;function F(z){if(z.rangeCount===0)return null;let j=z.getRangeAt(0).startContainer;return j?(j.getBoundingClientRect||(j=j.parentNode),j.getBoundingClientRect()):null}YUI.add("squarespace-flyout-link-edit",function(z){z.namespace("Squarespace.Flyout"),z.Squarespace.Flyout.LinkEdit=z.Base.create("LinkEdit",z.Base,[],{initializer:function(){this.editorContainer=z.Node.create("<div></div>"),this.previewContainer=z.Node.create("<div></div>"),this.previewContainer.on("mouseup",function(X){X.stopPropagation()});var j=z.one(z.config.doc.body);j.append(this.editorContainer),j.append(this.previewContainer),this.publish("updateLink"),this.publish("removeLink"),this.publish("close")},destructor:function(j){this.close(),l.unmountComponentAtNode(this.editorContainer.getDOMNode()),l.unmountComponentAtNode(this.previewContainer.getDOMNode()),this.editorContainer.remove(!0),this.previewContainer.remove(!0),this.editorContainer=null,this.previewContainer=null},render:function(){this.renderEditor(),this.renderPreview()},getInitialPosition:function(){var j=this.get("initialPosition"),X=this.get("toolbarOffset");j||(j={x:0,y:X});var J=this.get("editorSelectionCoords");if(J&&(j={x:J.x,y:J.y+X}),this.get("cursorAtLink")){var Q=F(this.get("getSelection")());Q&&(j={x:Q.left,y:Q.bottom+X})}return j},renderEditor:function(){var j=this.getInitialPosition();l.render(d.createElement(q,{key:this.get("isEditorOpen"),isOpen:this.get("isEditorOpen"),cursorAtLink:this.get("cursorAtLink"),canEditTextContent:this.get("canEditTextContent"),className:this.get("classNames"),modalClassName:this.get("classNames"),pageDropdownClassName:this.get("classNames"),value:{url:this.get("linkUrl"),newWindow:this.get("newWindow"),name:this.get("textContent")},onChange:this.updateLink.bind(this),onRequestClose:this.close.bind(this),initialPosition:j}),this.editorContainer.getDOMNode())},renderPreview:function(){var j=this.get("getSelection"),X=E.getAnchor(j())||{left:0,top:0},J={left:X.left,top:X.top+this.get("toolbarOffset")};l.render(d.createElement(E,{key:this.get("isPreviewOpen")+"-"+this.get("linkUrl"),isOpen:this.get("isPreviewOpen"),getSelection:j,anchor:J,link:{href:this.get("linkUrl"),target:this.get("newWindow")?"_blank":null},onRemoveLink:this.removeLink.bind(this),onEditLink:this.openEditorFromPreview.bind(this,J),className:this.get("classNames")}),this.previewContainer.getDOMNode())},openEditorFromPreview:function(j){this.openEditor(this.get("linkUrl"),this.get("newWindow"),this.get("linkId"),j)},openEditor:function(j,X,J,Q){!this.get("isEditorOpen")&&!this.get("isPreviewOpen")&&z.Squarespace.EscManager.addTarget(this),this.setAttrs({anchor:Q||this.get("anchor"),isEditorOpen:!0,isPreviewOpen:!1,linkUrl:j||"",linkId:J||"",newWindow:z.Lang.isBoolean(X)?X:this.get("newWindow")}),this.render()},openPreview:function(j,X,J){!this.get("isEditorOpen")&&!this.get("isPreviewOpen")&&z.Squarespace.EscManager.addTarget(this),this.setAttrs({isEditorOpen:!1,isPreviewOpen:!0,linkUrl:j||"",linkId:J||"",newWindow:z.Lang.isBoolean(X)?X:this.get("newWindow")}),this.render()},close:function(){(this.get("isEditorOpen")||this.get("isPreviewOpen"))&&z.Squarespace.EscManager.removeTarget(this),this.setAttrs({isEditorOpen:!1,isPreviewOpen:!1,forceUpdate:!1}),this.render(),this.fire("close")},updateLink:function(j){(this.get("forceUpdate")||j.url!==this.get("linkUrl")||j.newWindow!==this.get("newWindow")||j.name!==this.get("textContent"))&&(this.setAttrs({linkUrl:j.url,newWindow:j.newWindow,textContent:j.name}),this.fire("updateLink",this.getAttrs(["linkUrl","newWindow","textContent"])))},removeLink:function(){this.setAttrs({linkUrl:null}),this.fire("removeLink"),this.close()}},{ATTRS:{anchor:{value:null,setter:function(j){return j&&j.getDOMNode?j.getDOMNode():j},getter:function(j){return j&&j.nodeType?j:j||"mousepointer"}},canEditTextContent:{value:!0},disableNewWindow:{value:!1},initialPosition:{value:null},linkId:{value:""},linkIndex:{value:""},linkUrl:{value:"#"},textContent:{value:""},newWindow:{value:!0},isEditorOpen:{value:!1},isPreviewOpen:{value:!1},forceUpdate:{value:!1},getSelection:{value:function(){return z.config.win.getSelection()}},toolbarOffset:{value:o.Z.isFeatureEnabled(a().NEW_STACKED_INDEX)?55:0,valueFn:function(){return this.get("toolbarOffsetOverride")}},toolbarOffsetOverride:{value:void 0},classNames:{value:r.NONINTERACTIVE_CLASSNAME}}})},"1.0",{requires:["base","squarespace-escmanager"]})},250172:function(c,b,t){"use strict";var l=t(714487),d=t(408549);YUI.add("squarespace-follow-button",function(o){o.namespace("Squarespace.Widgets").FollowButton=o.Base.create("followButton",o.Widget,[],{renderUI:function(){this.get("contentBox").setContent((0,d.Z)('<a href="https://twitter.com/{username}" class="twitter-follow-button" data-show-count="false">'+(0,l.t)("Follow @{username}",null,{project:"scripts-v6-root"})+"</a>",{username:this.get("username")}))},syncUI:function(){var e=function(){},a=function(){this.show()};o.Get.script("//platform.twitter.com/widgets.js",{onSuccess:a,onFailure:e,onTimeout:e,timeout:1e4,context:this,win:o.config.win})}},{ATTRS:{username:{value:""},visible:{value:!1}},CSS_PREFIX:"sqs-follow-button"})},"1.0",{requires:["base","widget"]})},418360:function(c,b,t){"use strict";var l=t(148289),d=t.n(l);YUI.add("squarespace-follow-buttons",function(o){o.namespace("Squarespace"),o.Squarespace.FollowButtonUtils=function(){var e=function(r){var s=r.one(".sqs-follow-button");if(s){var n=o.Widget.getByNode(s);n&&n.destroy()}},a=function(r){e(r);var s=r.getAttribute("data-username");s&&s.length&&new o.Squarespace.Widgets.FollowButton({username:s}).render(r)};return{renderAll:function(){o.all(".squarespace-follow-button").each(function(r){a(r)})}}}(),o.on("domready",function(){o.Squarespace.FollowButtonUtils.renderAll()})},"1.0",{requires:["squarespace-follow-button"]})},489513:function(c,b,t){"use strict";var l=t(714487),d=t(868192),o=t(137577);YUI.add("squarespace-form-builder-field-editor",function(e){var a={MAX_CHARACTER_LIMIT:1e5},r={description:{ctor:e.Squarespace.DialogFields.TextArea,config:{name:"description","strings.description":(0,l.t)("A description / instructions for this field.",null,{project:"scripts-v6-root"}),"strings.placeholder":(0,l.t)("Description",null,{project:"scripts-v6-root"})}},required:{ctor:e.Squarespace.DialogFields.Check,config:{name:"required","strings.title":(0,l.t)("Required",null,{project:"scripts-v6-root"})}},placeholder:{ctor:e.Squarespace.DialogFields.Text,config:{name:"placeholder",className:"thin","strings.placeholder":(0,l.t)("Placeholder text",null,{project:"scripts-v6-root"})}},maxLength:{ctor:e.Squarespace.DialogFields.NumericText,config:{name:"maxLength",className:"thin","strings.title":(0,l.t)("Character Limit (optional)",null,{project:"scripts-v6-root"}),"strings.validationFailMessage":(0,l.t)("Please enter a number between 1 and {max}",{max:a.MAX_CHARACTER_LIMIT},{project:"scripts-v6-root"}),displayFormatter:function(i){return i||""},validator:function(n){return n.length===0||e.Lang.isNumber(n)&&n>0&&n<a.MAX_CHARACTER_LIMIT}}},currencySymbol:{ctor:e.Squarespace.DialogFields.Text,config:{name:"currencySymbol",className:"thin","strings.placeholder":(0,l.t)("Currency symbol",null,{project:"scripts-v6-root"}),maxLength:1}},showCountryCode:{ctor:e.Squarespace.DialogFields.Check,config:{name:"showCountryCode","strings.title":(0,l.t)("Show Country Code",null,{project:"scripts-v6-root"})}},options:{ctor:e.Squarespace.DialogFields.TextArea,config:{name:"options","strings.placeholder":(0,l.t)("Options",null,{project:"scripts-v6-root"}),"strings.description":(0,l.t)("Enter options one per line.",null,{project:"scripts-v6-root"})}},underline:{ctor:e.Squarespace.DialogFields.Check,config:{name:"underline","strings.title":(0,l.t)("Underline",null,{project:"scripts-v6-root"})}},key:{ctor:e.Squarespace.DialogFields.Text,config:{name:"key",className:"thin",disabled:!0,"strings.placeholder":(0,l.t)("Key",null,{project:"scripts-v6-root"}),"strings.description":(0,l.t)('<strong>This is a hidden field.</strong> Hidden fields can be used to collect variables from the URL in your form submissions. To fill in this field, include the variable from the box above in the query string for this page. <a target="_blank" href="{url}">Learn more</a>',{url:d.HIDDEN_FORM_FIELD},{project:"scripts-v6-root"})}},value:{ctor:e.Squarespace.DialogFields.Text,config:{name:"value",className:"thin","strings.placeholder":(0,l.t)("Default Value",null,{project:"scripts-v6-root"}),"strings.description":(0,l.t)("If no value is passed through the query string, the default value above will be used.",null,{project:"scripts-v6-root"})}}};e.namespace("Squarespace.Widgets");var s=e.Squarespace.Widgets.FormBuilderFieldEditor=e.Base.create("FormBuilderFieldEditor",e.Squarespace.Widgets.SSWidget,[e.WidgetParent],{renderUI:function(){s.superclass.renderUI.call(this);var n=this.get("field"),i=o.Z[n.type],u=i.map(function(g){var p=e.merge({},r[g]),f=n[g];e.Lang.isValue(f)&&(g==="options"&&(f=f.join(`
`)),p.config.data=f);var m=p.ctor,_=p.config,v=new m(_);return v});this.add(u)},bindUI:function(){s.superclass.bindUI.call(this);var n=this.get("field");this.each(function(i){var u=i.get("name");i.after("dataChange",function(h){var g=h.newVal;u==="options"&&(g=g.split(`
`),g=e.Array.map(g,function(p){return p.trim()})),n[u]=g,this.fire("change",{fieldName:u,data:g})},this)},this)}},{CSS_PREFIX:"sqs-form-builder-field-editor",ATTRS:{field:{value:null}}})},"1.0",{requires:["base","node","widget-parent","squarespace-ss-widget","squarespace-dialog-check","squarespace-dialog-text","squarespace-dialog-text-area","squarespace-dialog-numeric-text"]})},651906:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-form-builder-field",function(d){d.namespace("Squarespace.Widgets");var o=d.Squarespace.Widgets.FormBuilderField=d.Base.create("formBuilderField",d.Squarespace.Widgets.SSWidget,[d.WidgetChild,d.Squarespace.Mixins.Expandable],{initializer:function(){this.publish("removeClicked",{emitFacade:!0});var e=this.get("field");this._titleField=new d.Squarespace.DialogFields.Text({name:"fieldTitle",data:e.title}),e.type==="hidden"&&(e.key=this._cleanTitleForHidden(e.title)),this._editor=new d.Squarespace.Widgets.FormBuilderFieldEditor({field:e})},destructor:function(){this._titleField.destroy(),this._editor.destroy()},renderUI:function(){o.superclass.renderUI.call(this);var e=this.get("contentBox");this._editButton=e.one(".edit-field"),this._editorWrapper=e.one(".editor-wrapper"),this._set("expandableNode",this._editorWrapper),this._editorWrapper.hide(!0),this._titleField.render(e.one(".field-title")),this._editor.render(this._editorWrapper)},bindUI:function(){o.superclass.bindUI.call(this),this.after("editingChange",this.syncUI,this),this._editor.on("change",function(e){this.fire("fieldChange")},this),this._bindTitleField(),this._bindEditButton(),this._bindRemoveButton()},syncUI:function(){o.superclass.syncUI.call(this),this.get("editing")?(this._editButton.setContent(this.get("strings.doneText")),this.open()):(this._editButton.setContent(this.get("strings.editText")),this.close());var e=this.get("field").locked;this.get("contentBox").toggleClass("field-locked",e)},openEdit:function(){this._set("editing",!0)},closeEdit:function(){this._set("editing",!1)},focusAndSelect:function(){var e=this._titleField;e.focus(),e.select()},lock:function(){this.get("field").locked=!0,this.fire("fieldChange"),this.syncUI()},unlock:function(){this.get("field").locked=!1,this.fire("fieldChange"),this.syncUI()},_bindTitleField:function(){var e=this._titleField,a=this.get("field");e.after("dataChange",function(r){if(a.title=r.newVal,a.type==="hidden"){var s=this._cleanTitleForHidden(a.title);this._editor.item(0).set("data",s)}this.fire("fieldChange")},this)},_bindEditButton:function(){this._editButton.on("click",function(){this.get("animating")||(this.get("editing")?this.closeEdit():this.openEdit())},this)},_bindRemoveButton:function(){this.get("contentBox").one(".remove-field").on("click",function(e){e.halt(),this.fire("removeClicked")},this)},_cleanTitleForHidden:function(e){var a=e.trim().replace(/\W/g,"_").toUpperCase();return a.indexOf("SQF_")!==0&&(a="SQF_"+a),a}},{CSS_PREFIX:"sqs-form-builder-field",HANDLEBARS_TEMPLATE:"form-builder-field.html",ATTRS:{strings:{value:{editText:(0,l.t)("Edit",null,{project:"scripts-v6-root"}),doneText:(0,l.t)("Done",null,{project:"scripts-v6-root"})},validator:d.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"},field:{value:null,validator:d.Squarespace.AttrValidators.isNullOrObject,writeOnce:"initOnly"},editing:{value:!1,validator:d.Squarespace.AttrValidators.isBoolean,readOnly:!0},animating:{value:!1,validator:d.Squarespace.AttrValidators.isBoolean,readOnly:!0}}})},"1.0",{requires:["base","squarespace-animations","squarespace-attr-validators","squarespace-dialog-text","squarespace-form-builder-field-editor","squarespace-form-builder-field-template","squarespace-mixins-expandable","squarespace-ss-widget","widget-child"]})},585761:function(c,b,t){"use strict";var l=t(759352);YUI.add("squarespace-form-editing-utils",function(d){d.namespace("Squarespace"),d.Squarespace.FormEditingUtils={resolveFieldTitle:function(o,e){var a=0;d.Array.each(e,function(r){r.type===o.type&&a++},this),a>0&&(o.title=o.title+" "+a)},resolveFieldId:function(o,e){o.id||(d.Lang.isValue(o.title)||d.Squarespace.FormEditingUtils.resolveFieldTitle(o,e),o.id=d.guid(l.vv(o.type)+"-"))}}},"1.0",{requires:[]})},913002:function(c,b,t){"use strict";var l=t(259093),d=t.n(l),o=t(784874),e=t(963327),a=t(337061),r=t(233232),s=t(164160),n=t(528215),i=t(714487),u=t(698137),h=t(456903),g=t(960970),p=t(20036),f=t(154210),m=t(643977),_=t(304212),v=!1,E=null;function S(){return E||(E=h.default.get("/api/template/GetTemplateSchema",{params:{type:o.Z.FORM}})),E}YUI.add("squarespace-form-preview",function(y){y.namespace("Squarespace.Widgets");var C=y.Squarespace.Widgets.FormPreview=y.Base.create("formPreview",y.Squarespace.Widgets.SSWidget,[],{initializer:function(){S().then(this.onTemplateSchemaLoaded.bind(this)),this._blockDisclosureRouteListenerUnsubscribe=(0,a.gH)(r.SY,this.onDisclosureRouteChange.bind(this)),this._currentBlockEditorIdListenerUnsubscribe=(0,a.gH)(r.MI,this.onCurrentBlockEditorIdChange.bind(this))},onDisclosureRouteChange:function(O){var A=(0,a.d6)().cmsEditorState.currentBlockEditorId;if(this.get("blockId")===A){var I=O==="post-submit";I&&!this._previewSubmissionState?(this._previewSubmissionState=!0,this.syncUI()):!I&&this._previewSubmissionState&&(this._previewSubmissionState=!1,this.syncUI())}},onCurrentBlockEditorIdChange:function(O){this.get("blockId")!==O&&this._previewSubmissionState&&(this._previewSubmissionState=!1,this.syncUI())},onTemplateSchemaLoaded:function(A){this.get("destroyed")||(this._template=A.data,this.syncUI())},destructor:function(){this._template=null,this._tweakChangeListener&&(this._tweakChangeListener.detach(),this._tweakChangeListener=null),this._blockDisclosureRouteListenerUnsubscribe&&(this._blockDisclosureRouteListenerUnsubscribe(),this._blockDisclosureRouteListenerUnsubscribe=null),this._currentBlockEditorIdListenerUnsubscribe&&(this._currentBlockEditorIdListenerUnsubscribe(),this._currentBlockEditorIdListenerUnsubscribe=null)},makeHandleChange:function(O){return function(I){this.syncUI()}},bindUI:function(){C.superclass.bindUI.call(this),this.after(["useLightboxChange","lightboxHandleTextChange","buttonAlignmentChange","buttonVariantChange","firstFieldHighlightTypeChange","submissionTextAlignmentChange","submissionVerticalAlignmentChange","submissionAnimationChange"],this.makeHandleChange("[FormPreview] Block Model changed, redraw preview"),this),this.get("form").after("change",this.makeHandleChange("[FormPreview] Form Model changed, redraw preview"),this),this._tweakChangeListener=y.Global.on("tweak:change",this._onTweakChange.bind(this))},_onTweakChange:function(O){if(O.getName()==="form-submit-button-style"){var A=O.getValue();this._previewSubmitButtonStyle!==A&&(this._previewSubmitButtonStyle=A,this.syncUI())}},syncUI:function(){var A=this.get("contentBox"),I=A.getDOMNode();if(I&&!(!this._template||!this._template.html)){var D=this.get("form");D.get("type")!==d().NEWSLETTER_BLOCK&&D.get("type")!==d().SLIDE&&D.set("disclaimerMessage",null);var T=this.get("useLightbox"),B={showTitle:T,useLightbox:T,lightboxHandleText:this.get("lightboxHandleText")||(0,i.t)("Open Form",null,{project:"scripts-v6-root"}),buttonAlignment:this.get("buttonAlignment"),buttonVariant:this.get("buttonVariant"),firstFieldHighlightType:this.get("firstFieldHighlightType"),formFields:D.get("fields"),formFieldFormats:this._template.formFieldFormats,formSubmitButtonText:D.get("submitButtonText"),formSubmissionMessage:D.get("parsedSubmissionMessage"),formSubmissionHTML:D.get("submissionHTML"),submissionTextAlignment:this.get("submissionTextAlignment"),submissionVerticalAlignment:this.get("submissionVerticalAlignment"),submissionAnimation:this.get("submissionAnimation"),hideSubmitButton:this.get("hideSubmitButton"),formId:D.get("id"),disclaimerMessage:D.get("disclaimerMessage"),captchaEnabled:D.get("captchaEnabled"),previewSubmitButtonStyle:this._previewSubmitButtonStyle,captchaAlignment:D.get("captchaAlignment"),captchaTheme:D.get("captchaTheme")};if(D.get("type")===d().FORM_BLOCK&&!T){var N="form-wrapper",P=A.one("."+N),x;P?x=P.getDOMNode():(x=document.createElement("div"),x.classList.add(N,"sqs-site-style-form"),A.empty().appendChild(x));var R=A.one(".lightbox-handle-wrapper");R&&R.remove(),x.classList.remove("hidden");var w=Object.fromEntries(new URLSearchParams(window.location.search)),k=(0,s.h)(B,p.Z,y.config.win),q=this._template.localizedStrings,F=!!this._previewSubmissionState;k.then(function(X){var J=y.merge({},X,{previewSubmissionState:F},{localizedStrings:q},{queryParams:w,recaptchaSiteKey:e.getSiteKey(window)},{uploadAuthorization:function(){return(0,m.t)(X,y.config.win)}},{mediaPlatformLibraryId:D.get("id")},{mediaPlatformBaseUrl:(0,m.S)(y.config.win)});(0,f.S)(J,x)})}else{var z=this.evaluateTemplate(B);if(A.empty().setHTML(z),(0,g.Z)(A.getDOMNode()),!D.get("captchaEnabled"))return;var j=(0,_.Z)(y.config.win);n.DU(y.config.win,j)}}},evaluateTemplate:function(O){try{return(0,u.Z)(this._template.html,y.merge({},O,{localizedStrings:this._template.localizedStrings}))}catch(A){return A.message}}},{CSS_PREFIX:"sqs-preview-form",ATTRS:{form:{value:null,validator:function(O){return y.instanceOf(O,y.Squarespace.Models.Form)}},blockId:{value:""},useLightbox:{value:!1},lightboxHandleText:{value:(0,i.t)("Open Form",null,{project:"scripts-v6-root"})},hideSubmitButton:{value:!1}}})},"1.0",{requires:["base","json","node","squarespace-models-form","squarespace-ss-widget"]})},472103:function(c,b,t){"use strict";var l=t(233284),d=t(762379),o=t(963327),e=t(164160),a=t(714487),r=t(910895),s=t(20036),n=t(528215),i=t(349239),u=t(643977),h=t(916661),g=t(154210),p=t(408878);YUI.add("squarespace-form-rendering-utils",function(f){f.namespace("Squarespace");function m(S,y){y&&(y.setData("lightbox",S),y.detach("click"),y.on("click",function(C){C.halt(),S.open()},this))}function _(S){if(!S.one(".form-wrapper"))return!1;var y=S.one(".lightbox-handle");if(!y)return!1;var C=y.getData("lightbox");return!C}function v(S){var y="form-wrapper",C=document.createElement("div");C.classList.add(y);var O="form-title",A=document.createElement("div");A.innerHTML=S,A.classList.add(O),C.appendChild(A);var I="form-inner-wrapper",D=document.createElement("div");D.classList.add(I);var T=document.createElement("div");return T.classList.add("sqs-block-form-lightbox"),h.Z.isSevenOne()&&(T.classList.add("sqs-block-form","sqs-background-enabled"),C.classList.add("sqs-site-style-form")),C.appendChild(D),T.appendChild(C),{sqsBlockForm:T,reactRoot:D}}function E(S){var y=S.getDOMNode(),C=(0,i.S)(y);if(!C){var O=y.id;console.error("Missing form context for block:"+O);return}var A=[],I={};if(d.Z.isFeatureEnabled("commerce-product-forms-rendering")){var D=(0,p._)(y);A=D.contentClasses,I=D.contentDataAttributes}else if(h.Z.isSevenOne()){var T=y.closest("[data-section-theme]"),B=T?T.getAttribute("data-section-theme"):"";B&&(A.push(B),I["data-section-theme"]=B),A.push("lightbox-form-content-background")}var N=C.formId,P=S.one(".lightbox-handle"),x;d.Z.isFeatureEnabled("commerce-product-forms-rendering")?x=(0,p.s)(C.formName):x=v(C.formName);var R=x.reactRoot,w=x.sqsBlockForm,k=Object.fromEntries(new URLSearchParams(window.location.search)),q=(0,e.h)(C,s.Z,f.config.win),F=q.then(function(j){var X=f.merge({},j,{queryParams:k},{onSubmit:(0,r.z)(C,f.config.win)},{recaptchaSiteKey:o.getSiteKey(f.config.win)},{uploadAuthorization:function(){return(0,u.t)(C,f.config.win)}},{mediaPlatformLibraryId:N},{mediaPlatformBaseUrl:(0,u.S)(f.config.win)});return(0,g.S)(X,R),X}),z=new f.Squarespace.Widgets.ModalLightbox({content:w,title:(0,a.t)("Form",null,{project:"scripts-v6-root",notes:"Title of a modal containing a web form"}),contentClassName:A.join(" "),contentDataAttributes:I,render:f.one("body")});z.on("open",function(){n.Yt({win:f.config.win})}),z.on("close",function(){var X=w.querySelector(".form-inner-wrapper");X&&l.unmountComponentAtNode(X),n.Yt({win:f.config.win});var J;d.Z.isFeatureEnabled("commerce-product-forms-rendering")?J=(0,p.s)(C.formName):J=v(C.formName);var Q=J.reactRoot,ie=J.sqsBlockForm;F.then(function(ce){(0,g.S)(ce,Q),z.set("content",ie),P.setData("lightbox",z)})}),m(z,P)}f.Squarespace.FormRenderingUtils={initializeFormLightbox:function(S){S.all(".sqs-block-form").each(function(y){_(y)&&E(y)})}},f.config.win.Squarespace.onInitialize(f,function(){var S=f.config.doc,y=f.one(S.body);f.Squarespace.FormRenderingUtils.initializeFormLightbox(y)})},"1.0",{requires:["squarespace-modal-lightbox"]})},852490:function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";var _sqs_enums_Flag__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(444867),_sqs_enums_Flag__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_sqs_enums_Flag__WEBPACK_IMPORTED_MODULE_0__),_sqs_universal_flags__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(762379),shared_utils_commerce_trackEvent__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(371467),_sqs_network__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(456903),_sqs_universal_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(963327),_sqs_websites_constants__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(607371),_sqs_enums_PageTypes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(113580),_sqs_enums_PageTypes__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_sqs_enums_PageTypes__WEBPACK_IMPORTED_MODULE_3__),shared_utils_FormHandler__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(582136),shared_utils_census_CensusUtils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(537312),_sqs_utils_focus__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(999762),_sqs_enterprise_recaptcha_api__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(528215);YUI.add("squarespace-form-submit",function(Y){Y.namespace("Squarespace");var FormSubmitV1=Y.Base.create("FormSubmitV1",Y.Base,[],{initializer:function(){this._submitButton=this.get("formNode").one("[type=submit]"),this._submitButtonText=this._submitButton.get("value");var c=this._getMultiFieldVal;this._typeGetterMap={date:c,name:c,time:c,address:c,phone:this._getPhoneFieldVal,radio:this._getRadioFieldVal,checkbox:this._getCheckFieldVal,select:this._getSelectVal,likert:this._getLikertVal,hidden:this._getHiddenVal},this._defaultGetter=this._getSingleFieldVal,Y.Global.publish("form:submitSuccess")},submit:function(b,t,l,d,o){var e=this.get("formNode"),a;typeof b=="object"?(a=b.formId,t=b.collectionId,l=b.objectName,d=b.isOverlayForm,o=b.submitButtonText):a=b;try{if(e.hasClass("submitting"))return;this._clearErrors(),this._lock();var r=Y.config.win.Static.SQUARESPACE_CONTEXT.pageType===_sqs_enums_PageTypes__WEBPACK_IMPORTED_MODULE_3___default().SPLASH_PAGE,s=r?_sqs_universal_utils__WEBPACK_IMPORTED_MODULE_8__.getCaptchaContainer(Y.config.win,this.get("formNode").getDOMNode()):_sqs_enterprise_recaptcha_api__WEBPACK_IMPORTED_MODULE_7__.qH(this.get("formNode").getDOMNode());if(!s)this._saveFormSubmission(a,t,l,d,o);else if(r){var n=_sqs_universal_utils__WEBPACK_IMPORTED_MODULE_8__.validate(Y.config.win,s);n?this._saveFormSubmission(a,t,l,d,o,n):this._submitFailure(shared_utils_FormHandler__WEBPACK_IMPORTED_MODULE_4__.Z.strings.CAPTCHA_INCOMPLETE_ERROR,d)}else{var i=e.hasClass("newsletter-form")&&!d,u=e.hasClass("newsletter-form")&&d,h=u?_sqs_enterprise_recaptcha_api__WEBPACK_IMPORTED_MODULE_7__.aI.PROMO_POPUP:i?_sqs_enterprise_recaptcha_api__WEBPACK_IMPORTED_MODULE_7__.aI.NEWSLETTER_BLOCK:_sqs_enterprise_recaptcha_api__WEBPACK_IMPORTED_MODULE_7__.aI.FORM_BLOCK;_sqs_enterprise_recaptcha_api__WEBPACK_IMPORTED_MODULE_7__.TJ(Y.config.win,h).then((function(g){this._saveFormSubmission(a,t,l,d,o,null,g)}).bind(this))}}catch{this._submitFailure(shared_utils_FormHandler__WEBPACK_IMPORTED_MODULE_4__.Z.strings.SUBMIT_ERROR,d)}finally{return!1}},_createErrorNode:function(c,b){return b?Y.Node.create('<div class="field-error" style="display:inline-block">'+c+"</div>"):Y.Node.create('<div class="field-error">'+c+"</div>")},_clearErrors:function(){var c=this.get("formNode");c.all(".field-error").each(function(b){b.remove()}),c.all(".form-item.error").each(function(b){b.removeClass("error")})},_lock:function(){this.get("formNode").addClass("submitting"),this._submitButton.set("value",shared_utils_FormHandler__WEBPACK_IMPORTED_MODULE_4__.Z.strings.SUBMIT_TEXT_IN_PROGRESS)},_unlock:function(){this.get("formNode").removeClass("submitting"),this._submitButton.set("value",this._submitButtonText)},_saveFormSubmission:function(c,b,t,l,d,o,e){var a={withCredentials:!0};_sqs_network__WEBPACK_IMPORTED_MODULE_2__.default.post("/api/form/FormSubmissionKey",{},a).then((function(r){if(r.data.key){var s={key:r.data.key,formId:c,collectionId:b,objectName:t,isOverlayForm:l,submitButtonText:d,form:Y.JSON.stringify(this._getData()),captchaKey:o,recaptchaEnterpriseV3Token:e};shared_utils_census_CensusUtils__WEBPACK_IMPORTED_MODULE_5__._5(s),_sqs_network__WEBPACK_IMPORTED_MODULE_2__.default.post("/api/form/SaveFormSubmission",s,a).then(this._submitSuccess.bind(this)).catch((function(n){this._submitFailure(n.response,l)}).bind(this))}else this._submitFailure(r,l)}).bind(this)).catch((function(r){this._submitFailure(r.response,l)}).bind(this))},_submitSuccess:function(){var c=this.get("formNode");c&&(c.hasClass("newsletter-form")||c.getById(_sqs_websites_constants__WEBPACK_IMPORTED_MODULE_9__.Z.NEWSLETTER_OVERLAY_NODE_ID))&&shared_utils_commerce_trackEvent__WEBPACK_IMPORTED_MODULE_1__.gW(),Y.Global.fire("form:submitSuccess");var b=c.getData("success-redirect");b&&(window.history.replaceState&&window.history.replaceState({},document.title,window.location.href),window.location.href=b),this._unlock(),this._renderSuccess()},_submitFailure:function(c,b){var t=this.get("formNode"),l=t.hasClass("newsletter-form"),d=c.status===401&&l,o=l&&d&&!b,e=null;if(Y.Lang.isString(c)?e=c:d?e=c.data.message:shared_utils_FormHandler__WEBPACK_IMPORTED_MODULE_4__.Z.errorCodes[c.status]?e=shared_utils_FormHandler__WEBPACK_IMPORTED_MODULE_4__.Z.errorCodes[c.status]:c.status===400&&c.data.errors?(Y.Object.each(c.data.errors,function(u,h){var g=t.one('[id="'+h+'"]');if(g){var p=g.one(".title");p.insert(this._createErrorNode(u),"before"),g.addClass("error")}},this),l||(e=shared_utils_FormHandler__WEBPACK_IMPORTED_MODULE_4__.Z.strings.ERROR_ABOVE)):c.data.error?e=c.data.error:e=shared_utils_FormHandler__WEBPACK_IMPORTED_MODULE_4__.Z.strings.UNKNOWN_ERROR,e){var a=this._createErrorNode(e,o);l?t.insertBefore(a,t.one(".newsletter-form-body")):t.prepend(a),a.setAttribute("tabindex",-1),a.focus()}else{var r=t.one(".error");if(r){var s=r.getDOMNode().matches(_sqs_utils_focus__WEBPACK_IMPORTED_MODULE_6__.focusableSelector)&&r||r.one(_sqs_utils_focus__WEBPACK_IMPORTED_MODULE_6__.focusableSelector);s&&s.focus()}}var n=t.one(".captcha-container");if(n){var i=this._submitButton.getDOMNode();i&&i.getAttribute("data-captcha-bound")&&(i.disabled=!0),_sqs_universal_utils__WEBPACK_IMPORTED_MODULE_8__.reset(Y.config.win,n)}this._unlock()},_renderSuccess:function(){var formEl=this.get("formNode"),messageNode=formEl.one(".form-submission-text"),htmlNode=formEl.one(".form-submission-html"),postSubmitHtml=htmlNode.getData("submission-html");formEl.all("*").each(function(c){c.addClass("hidden")}),htmlNode.setHTML(postSubmitHtml),htmlNode.removeClass("hidden"),messageNode.removeClass("hidden"),messageNode.all("*").each(function(c){c.removeClass("hidden")});var movedFocus=!1;function focusOn(c){c.setAttribute("tabindex",-1),c.focus(),movedFocus=!0}if(messageNode.getDOMNode().textContent.trim().length>0?focusOn(messageNode):htmlNode.getDOMNode().textContent.trim().length>0&&focusOn(htmlNode),!movedFocus){var win=Y.config.win,formElY=formEl.getY();formElY<win.scrollY&&win.scrollTo(0,formElY-25)}htmlNode.all("script").each(function(script){if(script.hasAttribute("src")){var dupeScriptDOMNode=document.createElement("script"),attributes=script.getDOMNode().attributes;Y.Array.each(attributes,function(c){dupeScriptDOMNode[c.name]=c.value}),script.replace(dupeScriptDOMNode)}else try{eval(script.getHTML())}catch(c){}},this)},_getData:function(){var c={};return this.get("formNode").all(".form-item").each(function(b){c[b.get("id")]=this._getFieldData(b)},this),c},_getFieldData:function(c){var b=this._typeGetterMap,t=c.get("className").split(new RegExp("\\s")),l,d=!1;if(Y.Array.each(t,function(o){Y.Object.hasKey(b,o)?l=b[o]:o==="section"&&(d=!0)},this),!d)return l||(l=this._defaultGetter),l.call(this,c)},_getSingleFieldVal:function(c){var b=c.one(".field-element");return b?b.get("value"):null},_getMultiFieldVal:function(c){var b=[];return c.all(".field-element").each(function(t){b.push(t.get("value"))}),b},_getPhoneFieldVal:function(c){var b=this._getMultiFieldVal(c);return b&&b.length===3&&b.unshift(""),b},_getRadioFieldVal:function(c){return this._getCheckFieldVal(c)[0]},_getCheckFieldVal:function(c){var b=[];return c.all("input").each(function(t){t.get("checked")&&b.push(t.get("value"))},this),b},_getSelectVal:function(c){return c.one("select").get("value")},_getLikertVal:function(c){var b={};return c.all(".item").each(function(t){var l;t.all("input").each(function(d){d.get("checked")&&(l=d.get("value"))}),Y.Lang.isValue(l)&&(b[t.getAttribute("data-question")]=l)}),b},_getHiddenVal:function(c){var b;Y.Lang.isValue(this._query)||(this._query=Y.QueryString.parse(window.location.search.replace(/^\?/,"")));var t=c.get("name");return Y.Object.hasKey(this._query,t)?b=this._query[t]:b=c.get("value"),b.toString()}},{ATTRS:{formNode:{value:null,validator:Y.Squarespace.AttrValidators.isNullOrInstanceOf(Y.Node),writeOnce:"initOnly"}}});Y.Squarespace.FormSubmit=function(c){var b;return c instanceof Element?b=_sqs_universal_flags__WEBPACK_IMPORTED_MODULE_10__.Z.isFeatureEnabled(_sqs_enums_Flag__WEBPACK_IMPORTED_MODULE_0___default().VANILLA_FORM_HANDLER)?new shared_utils_FormHandler__WEBPACK_IMPORTED_MODULE_4__.Z(Y.config.win,c):new FormSubmitV1({formNode:Y.Node(c)}):b=new FormSubmitV1(c),this.submit=b.submit.bind(b),_sqs_universal_flags__WEBPACK_IMPORTED_MODULE_10__.Z.isFeatureEnabled(_sqs_enums_Flag__WEBPACK_IMPORTED_MODULE_0___default().VANILLA_FORM_HANDLER)?(this.clearErrors=b.clearErrors.bind(b),this.createErrorNode=b.createErrorNode.bind(b)):(this.clearErrors=b._clearErrors.bind(b),this.createErrorNode=b._createErrorNode.bind(b)),this}},"1.0",{requires:["base","json","node","querystring-parse","squarespace-attr-validators","squarespace-util"]})},987999:function(){YUI.add("squarespace-form-utils",function(c){var b=c.namespace("Squarespace.FormUtils");b.setData=function(t,l){c.Lang.isValue(l)&&c.Array.each(t,function(d){var o=l[d.get("name")];c.Lang.isUndefined(o)||d.set("data",o)})},b.getData=function(t){return t=t||[],c.Array.reduce(t,{},function(l,d){var o=d.get("data");return!c.Lang.isUndefined(o)&&c.Lang.isValue(d.get("name"))&&(l[d.get("name")]=o),l})},b.template=function(t,l){c.Lang.isArray(l)?c.Array.each(l,function(d){var o=d.get("name"),e=t.one('[data-field-name="'+o+'"]');e&&d.render(e)}):c.Lang.isObject(l)&&c.Object.each(l.groups||{},function(d,o){var e=t.one('[data-field-group="'+o+'"]');e&&c.Array.each(d,function(a){a.render(e)})})},b.validate=function(t){return c.Array.reduce(t,{},function(l,d){if(c.Lang.isFunction(d.getErrors)){var o=d.getErrors();o.length&&(l[d.get("name")]=o[0])}return l})},b.showErrors=function(t,l){c.Array.each(t,function(d){var o=l[d.get("name")];c.Lang.isValue(o)&&o!==""&&c.Lang.isFunction(d.showError)&&d.showError(o)})},b.hideErrors=function(t){c.Array.each(t,function(l){c.Lang.isFunction(l.hideError)&&l.hideError()})}},"1.0",{requires:["array-extras","node"]})},396153:function(c,b,t){"use strict";var l=t(960162),d=t(174161),o=t(594127),e=t(413019),a=t(69637),r=t(816130),s=t.n(r),n=t(24175),i=t.n(n),u=t(437951),h=t.n(u),g=t(552007),p=t.n(g),f=t(434927),m=t.n(f),_=t(994336),v=t.n(_),E=t(714487),S=t(387582),y=t(734526),C=t(202369),O=t(273564),A=t(723796),I=t(916661),D=t(221923),T=t(681328),B=t(513738),N=t(292039),P=t.n(N),x=t(559409),R=t.n(x),w=t(472575),k=t(181124),q=t(337061),F=t(938077),z=t(629994),j=t(874644),X=t(834105),J=t(897820),Q=t(673951);const ie=re=>{const We=(0,q.Ze)(F.Pr$),yt=(0,q.Ze)(F.bAD);(0,d.useEffect)(()=>(We&&(We.get("boundingBox").toggleClass("sqs-block-focused",!0),re.body.classList.toggle("block-is-focused",!0),document.documentElement.classList.add("sqs-block-is-focused")),yt&&document.documentElement.classList.add("sqs-layers-panel-is-open"),()=>{We&&(We.get("boundingBox").toggleClass("sqs-block-focused",!1),re.body.classList.toggle("block-is-focused",!1),document.documentElement.classList.remove("sqs-block-is-focused")),document.documentElement.classList.remove("sqs-layers-panel-is-open")}),[We,re,yt])},ce=()=>{const re=(0,q.Ze)(F.Hlz);(0,d.useEffect)(()=>{(0,z.j)({frameDeviceView:re})},[re])},pe=re=>{const We=(0,q.Ze)(F.aEP);re.documentElement.classList.toggle("sqs-preview-full-screen",We===j.hn.PREVIEW_FULL_SCREEN),document.documentElement.classList.toggle("editing-page",(0,j.qN)(We))},ye=re=>{const We=(0,d.useCallback)(yt=>{re.current&&re.current.show(yt)},[re]);(0,d.useEffect)(()=>(0,w.QA)(w.yj,We),[We])},Ae=re=>{const We=(0,j.BX)((0,q.Ze)(F.aEP));(0,d.useEffect)(()=>{re.body.classList.toggle("is-expanded",We)},[re,We])},Je=(re,We)=>{var yt,_t;if(Q.Ay)return!0;if(!re.Squarespace.UtilAuthenticated.userHasAccessPermission(i().CONFIG_CONTENT_MANAGER))return!1;const Nt=We==null||(_t=We.Static)===null||_t===void 0||(yt=_t.SQUARESPACE_CONTEXT)===null||yt===void 0?void 0:yt.pageFeatures;return!Array.isArray(Nt)||X.Z.getState().siteStatus===R().EXPIRED?!1:Nt.includes(P().EDITABLE)},ke=(re,We)=>{const yt=(0,q.zC)();(0,d.useEffect)(()=>{We&&yt((0,J.VJ)(Je(re,We)))},[yt,re,We])},Ie=re=>{let{Y:We,frameDocument:yt}=re;var _t,at,Nt,ri,Qt;const Ai=(0,d.useRef)(null);return ie(yt),ce(),pe(yt),ye(Ai),Ae(yt),ke(We,yt.defaultView),d.createElement(k.Z,{cacheKey:"seven-one-frame-root-toast",container:(Nt=window)===null||Nt===void 0||(at=Nt.top)===null||at===void 0||(_t=at.document)===null||_t===void 0?void 0:_t.head},d.createElement(B.Z.Container,{ref:Ai,mountAt:(Qt=window.top)===null||Qt===void 0||(ri=Qt.document)===null||ri===void 0?void 0:ri.body}))};var ht=t(663634),me=t(859817);const Se=re=>{let{Y:We,frameDocument:yt}=re;return d.createElement(me.StatsigProvider,{client:(0,ht.GC)()},d.createElement(Ie,{Y:We,frameDocument:yt}))};var lt=t(906194),Lt=t(347560),Pt=t(779904);const Ce=()=>({mouseOverNode:null,editorOverlay:null,overlayEditors:[],visible:!0,isSaving:!1,pageSectionNodes:null});class je{onReset(){this.setState(Ce())}onSetOverlayEditors(We){this.setState({overlayEditors:We})}onShow(){this.setState({visible:!0})}onHide(){this.setState({visible:!1})}onSetMouseOver(We){let{referenceNode:yt,isOver:_t}=We;this.setState({mouseOverNode:_t?yt:null})}onShowEditorOverlay(We){this.setState({editorOverlay:We})}onHideEditorOverlay(){this.setState({editorOverlay:null})}onSetIsSaving(We){this.setState({isSaving:We})}onSetPageSectionNodes(We){this.setState({pageSectionNodes:We})}constructor(){this.state=Ce(),this.bindActions(Pt.Z)}}const Le=Lt.Z.createStore(je,"AnnotationsStore");var ci=t(549842),Jt=t(233284),Ft=t(338465),ti=t(1531),gi=t(469231),qt=t(708327);function Mt(re){let{theme:We,container:yt,dataAttrKey:_t,top:at=0}=re;const Nt=(0,q.zC)(),Ai={borderColor:We.startsWith("dark")||We.startsWith("black")?"rgba(255,255, 255, 0.4)":"rgba(0, 0, 0, 0.06)"};at&&(Ai.top=`${at}px`);const tn=(0,d.useCallback)(()=>{var An;Nt((0,ti.jC)(We));const rs=window.CONFIG_PANEL,Oe=rs==null?void 0:rs.get("router"),rt=Oe==null||(An=Oe.getCurrentLocation())===null||An===void 0?void 0:An.pathname;((rt==null?void 0:rt.match(gi.ZP.COLORS))??!1)&&(Oe==null||Oe.push(`/config${gi.ZP.THEME_EDITOR}`))},[Nt,We]);return(0,Jt.createPortal)(d.createElement(Ft.Z,{boxShadow:200,borderRadius:2,position:"absolute",sx:{pointerEvents:"auto",button:{border:0},...Ai},right:1,top:2,textAlign:"left",zIndex:10001},d.createElement(qt.yV,{capture:!0,themeName:We,onClick:tn,dataAttrKey:_t,isSectionThemeIndicator:!0,ml:3,mr:3})),yt)}const Vt=d.memo(Mt);var Ti=t(292302),Ni=t(188405);const gn=re=>{let{isHeaderTransparent:We,areSectionThemeIndicatorsVisible:yt,pageSectionNodes:_t}=re;var at,Nt,ri;if(!yt||!_t)return null;const Qt=(0,Ni.MM)(_t.header.node),tn=((ri=_t.header)===null||ri===void 0||(Nt=ri.node)===null||Nt===void 0||(at=Nt.attributes.getNamedItem("data-header-style"))===null||at===void 0?void 0:at.nodeValue)==="theme";let An=_t.header.theme;return We&&_t.sections.length>0?An=_t.sections[0].theme:Qt&&(An=_t.overlayNav.theme),_t&&d.createElement(d.Fragment,null,Qt&&d.createElement(Vt,{dataAttrKey:Ti.sN,theme:_t.overlayNav.theme,container:_t.overlayNav.node,top:_t.offsets.firstSection}),!Qt&&tn&&d.createElement(Vt,{dataAttrKey:Ti.rR,theme:An,container:_t.header.node,top:_t.offsets.header}),!Qt&&_t.sections.map((rs,Oe)=>{let{node:rt,theme:It}=rs;const Bt=`${Ti.w0}-${Oe}`;return d.createElement(Vt,{key:Bt,dataAttrKey:Bt,theme:It,container:rt,top:Oe===0?_t.offsets.firstSection:void 0})}))};function zi(){const re=(0,q.Ze)(F.ueS),We=(0,q.Ze)(F.sUl),yt=(0,q.Ze)(F.rQY),[_t,at]=(0,d.useState)(()=>{var Qt;return(Qt=Le.getState())===null||Qt===void 0?void 0:Qt.pageSectionNodes}),[Nt,ri]=(0,d.useState)(()=>!!(re&&(We==null?void 0:We["tweak-transparent-header"])==="true"));return(0,d.useEffect)(()=>{const Ai=[Le,ci.Z].map(tn=>tn.listen(()=>{var An;at((An=Le.getState())===null||An===void 0?void 0:An.pageSectionNodes),ri(!!(re&&(We==null?void 0:We["tweak-transparent-header"])==="true"))}));return()=>{for(const tn of Ai)tn()}},[re,We]),d.createElement(gn,{pageSectionNodes:_t,isHeaderTransparent:Nt,areSectionThemeIndicatorsVisible:yt})}var Mn=t(853333),Zt=t(419467),Te=t(48992),qe=t(35351),xt=t(175424);const Gt="",Li=re=>re instanceof Element&&re.closest("input, textarea, [contenteditable=true]"),le=re=>{const We=(0,q.Ze)(F.aEP),yt=(0,q.Ze)(F.Hlz),_t=(0,q.Ze)(F.Ouw),at=(0,q.Ze)(F._68),Nt=(0,q.Ze)(F.qCM),ri=(0,q.Ze)(F.eOW),Qt=(0,q.Ze)(Bt=>!!(0,F.MIi)(Bt)||!!(0,F.KzS)(Bt)),Ai=(0,q.zC)(),tn=(0,d.useMemo)(()=>(0,Zt.debounce)(Bt=>Ai((0,J.cF)(Bt)),500,{leading:!0,trailing:!1}),[Ai]),An=(0,d.useCallback)(()=>Nt.length>0?Nt:_t?[_t]:[],[_t,Nt]),rs=(0,d.useCallback)((Bt,yi)=>{var nn,vs;const Gs=An();if(Gs.length===0)return;const wa=((vs=(0,xt.wo)())===null||vs===void 0||(nn=vs.getSelection())===null||nn===void 0?void 0:nn.toString())!=="";if(!Li(Bt.target)&&!wa){var Ra;Bt==null||(Ra=Bt.clipboardData)===null||Ra===void 0||Ra.setData("text/plain",Gt),Bt.preventDefault(),Ai((0,J.CU)(Gs)),yi&&at&&Ai((0,J.y8)({sectionId:at,blockIds:Gs,isKeyboard:!0}))}},[Ai,at,An]),Oe=(0,d.useCallback)(Bt=>{rs(Bt,!0)},[rs]),rt=(0,d.useCallback)(Bt=>{var yi;(Bt==null||(yi=Bt.clipboardData)===null||yi===void 0?void 0:yi.getData("text/plain"))!==Gt&&ri&&Ai((0,J.n9)());const vs=(0,qe.Ls)({frameDocument:re})||at;vs&&!Qt&&tn(vs)},[tn,Ai,ri,at,Qt,re]),It=We===j.hn.PAGE_EDIT_FULL_SCREEN&&yt===lt.Z.DESKTOP;(0,Te.Z)("copy",rs,{element:re,shouldListen:It}),(0,Te.Z)("cut",Oe,{element:re,shouldListen:It}),(0,Te.Z)("paste",rt,{element:re,shouldListen:It}),(0,Te.Z)("paste",rt,{element:document.body,shouldListen:It})},Me=re=>{let{Y:We,frameDocument:yt}=re;const _t=(0,q.Ze)(F.Hlz),at=(0,q.Ze)(F.aEP),Nt=(0,q.Ze)(F._68);return(0,d.useEffect)(()=>{const ri=Nt&&(0,Ni.jd)(Nt);return ri&&ri.setAttribute("data-focused-section",""),()=>{ri&&ri.removeAttribute("data-focused-section")}},[Nt]),(0,d.useEffect)(()=>{yt.body.classList.toggle("sqs-is-page-editing",at===j.hn.PAGE_EDIT_FULL_SCREEN),yt.body.classList.toggle("sqs-site-styles-active",at===j.hn.PAGE_EDIT_RIGHT_PANEL)},[at,yt]),(0,d.useEffect)(()=>{yt.body.classList.toggle("sqs-device-view-desktop",_t===lt.Z.DESKTOP),yt.body.classList.toggle("sqs-device-view-phone",_t===lt.Z.PHONE)},[_t,yt]),le(yt),d.createElement(me.StatsigProvider,{client:(0,ht.GC)()},d.createElement(Ie,{Y:We,frameDocument:yt}),d.createElement(zi,null))};var et=t(374335),$t=t.n(et),Ki=t(795478),pi=t.n(Ki),Mi=t(721247);const Sn={surroundingOverlay:{enter:{className:"sqs-surrounding-overlay-container-enter",from:{opacity:0},to:{opacity:1}},leave:{className:"sqs-surrounding-overlay-container-leave",from:{opacity:1},to:{opacity:0}}}};var an=t(845076),dn=t.n(an);const W="sqs-button-vanilla",Zi=()=>d.createElement("div",{className:"icon"}),Zn=re=>d.createElement("div",{className:dn()(W,re.className),"data-test":re.name,onClick:re.handleClick,title:re.title||re.label},d.createElement("div",{className:W+"-content"},d.createElement("div",{className:"label"},re.label),re.icon&&d.createElement(Zi,null)));Zn.propTypes={className:pi().string,handleClick:pi().func.isRequired,icon:pi().bool,label:pi().string.isRequired,title:pi().string};const pn=Zn;function Yi(re,We,yt){return We in re?Object.defineProperty(re,We,{value:yt,enumerable:!0,configurable:!0,writable:!0}):re[We]=yt,re}const Un="sqs-frontend-overlay-editor-widget";var qi;class ls extends(qi=d.Component){render(){const{label:We,positionStyles:yt,buttons:_t,className:at,isActive:Nt,classNames:ri}=this.props;return d.createElement("div",{className:dn()(Un,at,{[Un+"-visible"]:Nt},ri),style:yt},d.createElement("div",{className:Un+"-content",onMouseEnter:this.handleOnMouseEnter,onMouseLeave:this.handleOnMouseLeave},d.createElement("div",{className:Un+"-label"},We),d.createElement("div",{className:Un+"-buttons-wrapper"},_t.map(Qt=>{let{handleClick:Ai,...tn}=Qt;return d.createElement(pn,{handleClick:Ai,key:tn.name,...tn})}))))}constructor(...We){super(...We),Yi(this,"handleOnMouseEnter",()=>{this.props.onMouseOverOverlayChange(!0)}),Yi(this,"handleOnMouseLeave",()=>{this.props.onMouseOverOverlayChange(!1)})}}Yi(ls,"propTypes",{label:pi().string,positionStyles:pi().object,isActive:pi().bool,onMouseOverOverlayChange:pi().func,buttons:pi().array,classNames:pi().array});const ct=ls;var fe=t(134521),it=t.n(fe),wi=t(210750),Fi=t.n(wi),fn=t(379835),ki=t.n(fn),un=t(92980),Xn=t.n(un),ne=t(684619),Xe=t.n(ne);function Qe(re,We,yt){return We in re?Object.defineProperty(re,We,{value:yt,enumerable:!0,configurable:!0,writable:!0}):re[We]=yt,re}const wt="sqs-frontend-node-header-widget",ai=wt+"-host",Hi=150,Xt=500,we=450,Ke=100,ge=100;var zt;class Ht extends(zt=d.Component){componentDidMount(){this.props.hostNode.classList.add(ai),this.state.previewWindow.addEventListener("scroll",this.throttledScrollHandler),this.state.previewWindow.addEventListener("resize",this.debouncedResizeHandler),this.debouncedResizeHandler(),this.ensureAnchorNodeIsOnScreen()}UNSAFE_componentWillReceiveProps(){this.debouncedTrailingSetHeaderPosition()}componentWillUnmount(){clearTimeout(this.updateAfterScrollTimeoutId),this.props.hostNode.classList.remove(ai),this.state.previewWindow.removeEventListener("scroll",this.throttledScrollHandler),this.state.previewWindow.removeEventListener("resize",this.debouncedResizeHandler),this.throttledScrollHandler.cancel(),this.debouncedTrailingSetHeaderPosition.cancel(),this.debouncedLeadingHideHeader.cancel()}render(){if(!this.state.isVisible)return null;const{buttons:We,className:yt,label:_t}=this.props,{isFixedBottom:at,isFixedTop:Nt,isNarrow:ri,left:Qt,top:Ai,width:tn}=this.state;return d.createElement("div",{className:dn()(yt,wt,{[wt+"-narrow"]:ri},{[wt+"-fixed-top"]:Nt},{[wt+"-fixed-bottom"]:at}),style:{left:Qt,top:Ai,width:tn}},d.createElement("div",{className:wt+"-content",onClick:this.handleHeaderClick},d.createElement("div",{className:wt+"-label",dangerouslySetInnerHTML:{__html:_t}}),d.createElement("div",{className:wt+"-buttons-wrapper"},We.map(An=>{let{handleClick:rs,...Oe}=An;return d.createElement(pn,{handleClick:rt=>{rs(rt)},key:Oe.name,...Oe})}))))}constructor(We,yt){super(We,yt),Qe(this,"hideHeader",()=>{this.setState({isVisible:!1})}),Qe(this,"ensureAnchorNodeIsOnScreen",()=>{const{hostNode:_t}=this.props,at=Xn()(_t);if(!at)return;const{scrollLayoutOnEditingStart:Nt}=this.props,ri=Xe()(at),Qt=Nt&&Nt.anchorNodeId;if(!Qt)return;const Ai=_t.querySelector("#"+Qt);if(!Ai)return;const{nodeHeaderHeight:tn}=this.state,An=ri.scrollTop,rs=Ai.getBoundingClientRect().top,Oe=Nt.anchorNodeOffsetTop||0,rt=An+rs-Oe-tn;Math.abs(An-rt)>Hi?(ki()(ri,rt,{minDuration:Xt,maxDuration:Xt,easing:"easeOutQuart"}),this.updateAfterScrollTimeoutId=setTimeout(Xt,this.props.updateAfterScroll)):this.props.updateAfterScroll()}),Qe(this,"setHeaderPosition",()=>{const _t=this.state.previewDocument.documentElement.getBoundingClientRect(),at=this.props.hostNode.getBoundingClientRect(),{nodeHeaderHeight:Nt}=this.state,ri=Nt,Qt=Math.max(0,Math.round(at.left-_t.left-ri)),Ai=Math.round(at.top-_t.top-ri-Nt),tn=Math.min(this.state.previewWindow.innerWidth,Math.round(at.width+ri*2)),An=tn<we,rs=!0;this.setState({isNarrow:An,isVisible:rs,left:Qt,top:Ai,width:tn},this.setHeaderFixed)}),Qe(this,"setHeaderFixed",()=>{const{previewWindow:_t,top:at}=this.state,Nt=_t.document,ri=Nt.documentElement&&Nt.documentElement.scrollTop||Nt.body.scrollTop;this.setState({isFixedBottom:at>ri+_t.innerHeight,isFixedTop:at<ri})}),Qe(this,"handleHeaderClick",_t=>{_t.target.classList.contains(wt+"-buttons-wrapper")&&this.ensureAnchorNodeIsOnScreen()}),this.throttledScrollHandler=it()(this.setHeaderFixed,ge),this.debouncedLeadingHideHeader=Fi()(this.hideHeader,Ke,{leading:!0,trailing:!1}),this.debouncedTrailingSetHeaderPosition=Fi()(this.setHeaderPosition,Ke),this.debouncedResizeHandler=()=>{this.debouncedLeadingHideHeader(),this.debouncedTrailingSetHeaderPosition()},this.state={previewWindow:We.hostNode.ownerDocument.defaultView,previewDocument:We.hostNode.ownerDocument,isFixedBottom:!1,isFixedTop:!1,isNarrow:!1,isVisible:!1,nodeHeaderHeight:44,left:0,top:0,width:0}}}Qe(Ht,"propTypes",{buttons:pi().arrayOf(pi().object).isRequired,className:pi().string,label:pi().string.isRequired,instrumentationDescription:pi().string,hostNode:pi().any.isRequired,scrollLayoutOnEditingStart:pi().shape({anchorNodeId:pi().string,anchorNodeOffsetTop:pi().number}),updateAfterScroll:pi().func}),Qe(Ht,"defaultProps",{instrumentationDescription:"",scrollLayoutOnEditingStart:{anchorNodeId:null,anchorNodeOffsetTop:0},updateAfterScroll:()=>{}});const bt=Ht;function he(re,We,yt){return We in re?Object.defineProperty(re,We,{value:yt,enumerable:!0,configurable:!0,writable:!0}):re[We]=yt,re}const Re=100,Wt="sqs-surrounding-overlay";var _i;class fi extends(_i=d.Component){componentDidMount(){this.state.previewWindow.addEventListener("resize",this.debouncedSetSectionsPositions),this.debouncedSetSectionsPositions()}UNSAFE_componentWillReceiveProps(){this.debouncedSetSectionsPositions()}componentWillUnmount(){this.state.previewWindow&&this.state.previewWindow.removeEventListener("resize",this.debouncedSetSectionsPositions),this.debouncedSetSectionsPositions.cancel()}render(){const{sections:We}=this.state;return d.createElement("div",null,We.map(yt=>{let{name:_t,...at}=yt;return this.renderSection(_t,at)}))}constructor(We){super(We),he(this,"getRectOffsets",()=>{const yt=this.state.previewDocument.documentElement.getBoundingClientRect(),_t=this.props.hostNode.getBoundingClientRect();return{left:_t.left-yt.left,top:_t.top-yt.top,height:_t.height,width:_t.width}}),he(this,"setSectionsPositions",()=>{const{previewDocument:yt,previewWindow:_t}=this.state,at=this.getRectOffsets(),Nt=44,ri=Math.max(yt.body.scrollHeight,_t.innerHeight),Qt=[{name:"top",height:at.top-Nt,left:0,right:0,top:0},{name:"bottom",height:ri-(at.top+at.height+Nt),left:0,right:0,top:at.top+at.height+Nt},{name:"left",height:at.height+Nt*2,left:0,top:at.top-Nt,width:at.left-Nt},{name:"right",height:at.height+Nt*2,left:at.left+at.width+Nt,right:0,top:at.top-Nt}];this.setState({sections:Qt})}),he(this,"renderSection",(yt,_t)=>d.createElement("div",{key:yt,className:dn()(Wt,`${Wt}-${yt}`),style:_t})),this.debouncedSetSectionsPositions=Fi()(this.setSectionsPositions,Re,{maxWait:Re*2}),this.state={previewWindow:We.hostNode.ownerDocument.defaultView,previewDocument:We.hostNode.ownerDocument,sections:[]}}}he(fi,"propTypes",{hostNode:pi().any.isRequired});const Ri=fi;function Be(re,We,yt){return We in re?Object.defineProperty(re,We,{value:yt,enumerable:!0,configurable:!0,writable:!0}):re[We]=yt,re}const bi="sqs-frontend-overlay-editor-widget-host-over";var Bi;class Tn extends(Bi=d.Component){render(){const{overlayEditors:We,editorOverlay:yt,visible:_t,mouseOverNode:at}=this.props;return We.length===0||!_t?null:d.createElement("div",null,We.map(Nt=>{let{label:ri,positionStyles:Qt,isMouseOver:Ai,referenceNode:tn,buttons:An,isNearby:rs,key:Oe,instrumentationDescription:rt,classNames:It}=Nt;const Bt=Ai||tn===at||rs;return d.createElement(ct,{key:Oe,isActive:Bt,label:ri,positionStyles:Qt,classNames:It,onMouseOverOverlayChange:yi=>{tn.classList.toggle(bi,yi),Pt.Z.setMouseOver({referenceNode:tn,isOver:yi})},instrumentationDescription:rt,buttons:An})}),d.createElement(Mi.CSSTransitionGroup,{transitions:Sn.surroundingOverlay},yt&&d.createElement(Ri,{hostNode:yt.hostNode})),yt&&d.createElement(bt,yt))}}Be(Tn,"propTypes",{overlayEditors:pi().arrayOf(pi().shape({label:pi().string,buttons:pi().arrayOf(pi().object),positionStyles:pi().object,referenceNode:pi().object,isNearby:pi().bool,isMouseOver:pi().bool,instrumentationDescription:pi().string,classNames:pi().arrayOf(pi().string)})),editorOverlay:pi().object,visible:pi().bool,mouseOverNode:pi().object});const Ln=Tn,hi=$t()({getStores(){return[Le]},getPropsFromStores(){const{overlayEditors:re,editorOverlay:We,visible:yt,mouseOverNode:_t,pageSectionNodes:at}=Le.getState();return{overlayEditors:re,editorOverlay:We,visible:yt,mouseOverNode:_t,pageSectionNodes:at}}},Ln);var di=t(249260);const Cs=(re,We)=>{if(re.width===0&&re.height===0)return null;let yt=re.top;[di.Z.BOTTOM_LEFT,di.Z.BOTTOM_CENTER,di.Z.BOTTOM_RIGHT].includes(We)&&(yt=re.top+re.height);let _t=re.left;return[di.Z.TOP_CENTER,di.Z.BOTTOM_CENTER].includes(We)?_t=re.left+re.width/2:[di.Z.TOP_RIGHT,di.Z.BOTTOM_RIGHT].includes(We)&&(_t=re.left+re.width),{top:yt,left:_t}},Qn=50,cs=(re,We)=>{let yt=null,_t;for(let at=0;at<re.length;at++){const Nt=re[at].top-We.top,ri=re[at].left-We.left,Qt=Math.sqrt(Math.pow(Nt,2)+Math.pow(ri,2));(yt===null||Qt<_t)&&(yt=re[at],_t=Qt)}return yt===null?!1:_t<Qn},Ea=[di.Z.TOP_LEFT,di.Z.TOP_RIGHT,di.Z.TOP_CENTER,di.Z.BOTTOM_LEFT,di.Z.BOTTOM_RIGHT,di.Z.BOTTOM_CENTER],Ys=re=>Ea[(Ea.indexOf(re)+1)%Ea.length],Fa=(re,We)=>{const yt=[];We&&yt.push({top:0,left:0}),re.filter(_t=>{let{alignPoint:at}=_t;return at}).forEach(_t=>{let{alignPoint:at,referenceNodeRect:Nt}=_t;const ri=Cs(Nt,at);yt.push(ri)}),re.filter(_t=>{let{alignPoint:at}=_t;return!at}).forEach(_t=>{let at=di.Z.TOP_LEFT,Nt=Cs(_t.referenceNodeRect,at);if(Nt===null){console.warn("No valid point on node!");return}let ri=0;for(;ri<5&&cs(yt,Nt);)at=Ys(at),Nt=Cs(_t.referenceNodeRect,at),ri=ri+1;yt.push(Nt),_t.alignPoint=at})},Ps=re=>re.getActionList().map(We=>{let{label:yt,handleClick:_t,name:at}=We;return{name:at,label:yt,handleClick:_t.bind(re)}}),As=(re,We)=>{const yt=re.getActionList();if(yt.length===0)return null;const _t=[];yt.filter(It=>{let{className:Bt}=It;return Bt}).forEach(It=>{let{className:Bt}=It;return _t.push(Bt)}),_t.push(We);const at=re.getOverlayEditorAlignPoint(),Nt=re.getId(),ri=re.hasPermission(),Qt=re.getClassificationLabel(),Ai=re.getClassificationLabel(),tn=Ps(re),An=re.state.overlayRootNode.getDOMNode(),rs=re.state.placeAnnotationInside,Oe=re.state.isMouseOver,rt=re.state.visible;return{key:Nt,hasPermission:ri,label:Qt,instrumentationDescription:Ai,buttons:tn,classNames:_t,visible:rt,referenceNode:An,alignPoint:at,placeInside:rs,isMouseOver:Oe}};var Wa=t(254229),ta=t.n(Wa),Ma=t(105229),Ha=t.n(Ma);const Qa=44,ao=(re,We,yt,_t)=>{const at={transform:[]},Nt=Cs(re,We);if(!Nt)return at;const ri=yt.innerWidth,Qt=yt.innerHeight;if([di.Z.TOP_LEFT,di.Z.TOP_CENTER,di.Z.TOP_RIGHT].includes(We)){let Ai=Qt-Nt.top,tn=Qt-Qa;_t&&(Ai=Ai-Qa,tn=Math.max(tn,Qt-re.bottom)),Ai=ta()(Ai,Qa,tn),at.bottom=0,at.transform.push(`translateY(${-1*Math.round(Ai)}px)`)}else if([di.Z.BOTTOM_LEFT,di.Z.BOTTOM_CENTER,di.Z.BOTTOM_RIGHT].includes(We)){let Ai=Nt.top;Ai=ta()(Ai,0,Qt-Qa),at.top=0,at.transform.push(`translateY(${Math.round(Ai)}px)`)}if([di.Z.TOP_LEFT,di.Z.BOTTOM_LEFT].includes(We)){let Ai=Nt.left;Ai=ta()(Ai,0,ri),at.left=0,at.transform.push(`translateX(${Math.round(Ai)}px)`)}else if([di.Z.TOP_CENTER,di.Z.BOTTOM_CENTER].includes(We))at.left=Math.round(Nt.left),at.transform.push("translateX(-50%)");else if([di.Z.TOP_RIGHT,di.Z.BOTTOM_RIGHT].includes(We)){let Ai=ri-Nt.left;Ai=ta()(Ai,0,ri),at.right=0,at.transform.push(`translateX(${-1*Math.round(Ai)}px)`)}return Object.assign({},at,{[Ha()("transform")]:at.transform.join(" ")})},Mo=(re,We)=>{const yt=We.client.lastX,_t=We.client.lastY;return!(re.top>_t||re.left>yt||re.top+re.height<_t||re.left+re.width<yt)},wo=(re,We)=>re.width>=We.innerWidth&&re.height>=We.innerHeight&&re.top<=0&&re.left<=0,ya=50,Sa=(re,We,yt)=>{if(Mo(re,We))return wo(re,yt);const _t=We.client.lastY,at=We.client.lastX,Nt=ta()(_t,re.top,re.bottom),ri=ta()(at,re.left,re.right),Qt=_t-Nt,Ai=at-ri;return Math.sqrt(Math.pow(Qt,2)+Math.pow(Ai,2))<=ya},sa=(re,We)=>{const yt=re.innerWidth,_t=re.innerHeight;return!(We.top+We.height<0||We.top>_t||We.left+We.width<0||We.left>yt)};var go=t(100514);const fs="data-content-field",Ct="main-content",Ds=(re,We)=>!((re.width===0||re.height===0)&&We.getAttribute(fs)!==Ct),Vn=re=>{let We=0;for(;re.parentNode;)We++,re=re.parentNode;return We},hn=re=>{let{contentModeController:We,placeLastClassifications:yt}=re,_t=We.getHotAnnotationControllers();if(_t.filter(at=>at.state.overlayRootNode&&at.state.overlayRootNode.getDOMNode()).sort((at,Nt)=>{const ri=at.state.overlayRootNode.getDOMNode(),Qt=Nt.state.overlayRootNode.getDOMNode();let Ai,tn;if(ri.parentNode===Qt.parentNode){const An=Array.from(ri.parentNode.children);Ai=An.indexOf(ri),tn=An.indexOf(Qt)}else Ai=Vn(ri),tn=Vn(Qt);return tn-Ai}),yt.length>0){const at=[];_t=_t.filter(function(Nt){return yt.includes(Nt.CLASSIFICATION)?(at.push(Nt),!1):!0}),_t=_t.concat(at)}return _t};class Ts{destroy(){this.destroyAnnotations(),this.win.removeEventListener("mousemove",this.handleMouseMove),this.win.removeEventListener("scroll",this.invalidateAndRequestRepaint),this.win.removeEventListener("resize",this.invalidateAndRequestRepaint),this.mouseMoveTimer&&this.win.clearTimeout(this.mouseMoveTimer),this.repaint=null,this.handleScroll=null,this.win=null,this.invalidateAndRequestRepaint=null,this.repaintRequest=null}evaluateAnnotations(){const{contentModeController:We,placeLastClassifications:yt,overlayEditorClassName:_t,win:at,mouse:Nt}=this;if(at===null){console.warn("repaint called after destroy!");return}if(!Le.getState().visible)return;let ri=hn({contentModeController:We,placeLastClassifications:yt}).map(Qt=>As(Qt,_t)).filter(Qt=>Qt&&Qt.hasPermission&&Qt.referenceNode&&Qt.visible).map(Qt=>({...Qt,referenceNodeRect:this.getBoundingClientRect(Qt.referenceNode)})).filter(Qt=>{let{referenceNodeRect:Ai,referenceNode:tn}=Qt;return Ds(Ai,tn)&&sa(at,Ai)});Fa(ri,this.allocateTopLeftCorner),ri=ri.map(Qt=>({...Qt,isNearby:this.mouseMoving&&Sa(Qt.referenceNodeRect,Nt,at),test:!0,positionStyles:ao(Qt.referenceNodeRect,Qt.alignPoint,at,Qt.placeInside)})),Pt.Z.setOverlayEditors.defer(ri)}mouseMoved(){this.mouseMoving=!0,this.mouseMoveTimer&&this.win.clearTimeout(this.mouseMoveTimer),this.mouseMoveTimer=this.win.setTimeout(()=>{this.mouseMoving=!1,this.mouseMoveTimer=null,this.repaintRequest()},3500)}renderAnnotations(){this.annotationMountNode=this.win.document.createElement("div"),this.win.document.body.appendChild(this.annotationMountNode),this.annotationReactRoot=(0,o.createRoot)(this.annotationMountNode),this.annotationReactRoot.render(d.createElement(me.StatsigProvider,{client:(0,ht.GC)()},d.createElement(hi,{styleContainer:this.win.document.head})))}destroyAnnotations(){this.annotationReactRoot&&(this.annotationReactRoot.unmount(),this.annotationReactRoot=null),this.annotationMountNode&&(this.annotationMountNode.remove(),this.annotationMountNode=null)}getBoundingClientRect(We){const yt=this._cache.find(at=>at.node===We);if(yt)return yt.rect;const _t=We.getBoundingClientRect();return this._cache.push({node:We,rect:_t}),_t}clearBoundingClientRectCache(){this._cache=[]}constructor({contentModeController:We,placeLastClassifications:yt,overlayEditorClassName:_t,win:at,mouse:Nt,allocateTopLeftCorner:ri}){this.contentModeController=We,this.placeLastClassifications=yt,this.overlayEditorClassName=_t,this.win=at,this.mouse=Nt,this.allocateTopLeftCorner=ri,this.mouseMoving=!1,this.clearBoundingClientRectCache(),this.renderAnnotations(),this.repaintRequest=(0,go.Z)(()=>this.evaluateAnnotations()),this.handleMouseMove=()=>{this.mouseMoved(),this.repaintRequest()},this.win.addEventListener("mousemove",this.handleMouseMove),this.invalidateAndRequestRepaint=()=>{this.clearBoundingClientRectCache(),this.repaintRequest()},this.win.addEventListener("scroll",this.invalidateAndRequestRepaint),this.win.addEventListener("resize",this.invalidateAndRequestRepaint),this.repaintRequest()}}const Fs=Ts;var ts=t(966819),In=t(543418),jo=t(474698);const Ja=new Map,Bs=(re,We)=>{Ja.set(re,We)},ms=()=>{Ja.clear()},po=re=>Ja.get(re);var Ks=t(396303),xn=t(890333),Ns=t(225378),or=t(762379),zo=t(444867),fo=t.n(zo),ks=t(335598),Bo=t(929698),Va=t(769518),st=t(985913),ve=t(787592),mt=t(166455),Ii=t.n(mt),Ei=!1,Ci=A.Em.createLogger("ContentModeController","khaki",Ei),Xi=A.Em.createWarningLogger("ContentModeController"),Fn=A.Em.createErrorLogger("ContentModeController");YUI.add("squarespace-frontend-content-mode",function(re){var We=re.Squarespace.Navigation.ListUtils,yt=250,_t=1e4,at=re.namespace("Squarespace.Frontend"),Nt=S.Z.IGNORED_ITEM_ANNOTATION_SELECTORS,ri=S.Z.REGISTERED_ACTIONS_FOR_NEXT_LOAD_STORE_KEY,Qt=["sqs-layout-dark","sqs-frontend-overlay-editor-widget"];function Ai(Oe){return(0,F.aqr)(Oe)&&(0,F.aEP)(Oe)!==j.hn.PREVIEW_FULL_SCREEN&&!(0,F.s6l)(Oe)}var tn=re.Base.create("ContentModeController",re.Base,[re.Squarespace.Mixins.EventRegistrar],{initializer:function(){this._events=[],this.annotationControllers=[],this.logReadyState(),re.Global.publish("annotationControllersInitialized"),this.publish("refresh",{emitFacade:!0}),this.publish("cmcSave70"),this.on("*:navigate",this._navigate,this),this._registerEvent(re.on("beforeunload",this.destroy,this)),this.set("visible",Ai((0,q.d6)())),this._registerEvent({detach:(0,q.gH)(F.l34,function(Oe){re.config&&(re.one(re.config.doc.body).toggleClass("sqs-hide-overlay-widgets",Oe),re.one(re.config.doc.body).toggleClass("sqs-edit-mode-active",Oe))})},{detach:(0,q.gH)(Ai,(function(Oe){Oe!==this.get("visible")&&this.set("visible",Oe)}).bind(this))}),Pt.Z.reset(),this._events.push(re.on("domready",function(){var rt=re.Object.getValue(Static,["SQUARESPACE_CONTEXT","accessPermissions"]),It=i().CONFIG_CONTENT_MANAGER;if(!(!rt||!rt.includes(It))){var Bt=this.get("contextCollection");if(I.Z.isSevenOne())this.annotationMountNode=re.config.win.document.createElement("div"),re.config.win.document.body.appendChild(this.annotationMountNode),this.annotationMountRoot=(0,o.createRoot)(this.annotationMountNode),this.annotationMountRoot.render((0,Ns.U)({frameCacheKey:"seven-one-frame-root"},d.createElement(Me,{Y:re,frameDocument:re.config.win.document}))),or.Z.isFeatureEnabled(fo().FLUID_ENGINE_OPT_OUT)||re.config.win.document.head.appendChild(Object.assign(re.config.win.document.createElement("script"),{src:"https://unpkg.com/wicg-inert@3.1.1/dist/inert.js"}));else{var yi={contentModeController:this,win:re.config.win,mouse:re.Squarespace.Mouse,overlayEditorClassName:"",placeLastClassifications:[],allocateTopLeftCorner:!1};Bt&&Bt.get("type")===h().SPLASH_PAGE&&(yi.overlayEditorClassName="sqs-cover-page-overlay",yi.placeLastClassifications.push("Gallery"),yi.allocateTopLeftCorner=!0),this.overlayAnnotationController=new Fs(yi),this.annotationMountNode=re.config.win.document.createElement("div"),re.config.win.document.body.appendChild(this.annotationMountNode),this.annotationMountRoot=(0,o.createRoot)(this.annotationMountNode),this.annotationMountRoot.render((0,Ns.U)({frameCacheKey:"seven-zero-frame-root"},d.createElement(Se,{Y:re,frameDocument:re.config.win.document})))}this.logReadyState(),this.stack=new re.Parallel,this.stack.done((function(){this._stackTimeoutId=setTimeout((function(){this.get("destroyed")||(this._stackTimeoutId=null,this.set("annotationControllersInitialized",!0),re.Global.fire("annotationControllersInitialized",{annotationControllers:this.annotationControllers}))}).bind(this),100)}).bind(this)),this._initializeAnnotationControllers(),this._handleRegisteredActionsOnNextLoad(),this.controllersInitailizedForRefreshToWork=!0}},this)),this.after("visibleChange",this._sync),I.Z.isSevenOne()||(this.windowExists()&&re.config.win.MutationObserver?this._bindSevenZeroObserver():this._bindSevenZeroWatcher()),this.bindLayoutEngineUpgradePills()},logReadyState:function(){Ci("document.readyState",{ready:re.config.doc.readyState,doc:re.config.doc})},bindLayoutEngineUpgradePills:function(){var Oe=re.config.win;re.Do.after(this.renderLayoutEngineUpgradeWrappers,Oe.Squarespace,"initializeLayoutBlocks",Oe.Squarespace),this._registerEvent(re.on("renderLayoutEngineUpgradeWrappers",this.renderLayoutEngineUpgradeWrappers,this)),Oe.Squarespace.SQUARESPACE_INITIALIZED_ONCE&&this.renderLayoutEngineUpgradeWrappers(),X.Z.isTrial()&&re.one(re.config.doc.documentElement).addClass("squarespace-page-in-trial"),re.one(re.config.doc.documentElement).addClass("sqs-feature-gate-refresh-enabled");var rt=jo.Z.getState().toJS().guilds,It=rt&&rt[p().CIRCLE_USER]||!1;(It||re.config.win.top.Static.SQUARESPACE_CONTEXT.isCircleMemberWebsite)&&re.one(re.config.doc.documentElement).addClass("squarespace-circle-member")},renderLayoutEngineUpgradeWrappers:function(){var Oe=re.one(re.config.doc);O.getFeatureGatedBlockTypes().forEach(function(rt){var It=".sqs-block-"+y.Z.BlockTypeNames[rt]+', .sqs-block-website-component[data-definition-name="website.components.'+y.Z.BlockTypeNames[rt]+'"]';Oe.all(It).each(function(Bt){O.renderBlockWrapper({node:Bt.getDOMNode(),blockType:rt})})})},_handleRegisteredActionsOnNextLoad:function(){try{this._getRegisteredActionsOnNextLoad().forEach((function(Oe){if(Oe.action==="enterPostEditFlow")this._enterEditPostFlow(Oe.options);else if(Oe.action==="ensureCollectionInStackedIndexIsOnScreen"){var rt=Oe.options.collectionId,It=Oe.options.parentCollectionId;this.ensureCollectionInStackedIndexIsOnScreen(rt,It)}}).bind(this))}catch(Oe){Xi("Issue handling registered actions on next load.",Oe)}finally{v().set(ri,"",{expires:new Date(0),path:"/"})}},_enterEditPostFlow:function(Oe){var rt=this._getAnnotationControllerByType(In.Zx);rt&&rt.requestEditFlowEntrance()},_getRegisteredActionsOnNextLoad:function(){var Oe=[];try{var rt=v().get(ri,{path:"/"});rt&&(Oe=JSON.parse(rt))}catch(It){Xi("Error de-serializing Set<ActionOnNextLoad>",It)}return re.Lang.isArray(Oe)?Oe:[]},registerActionOnNextLoad:function(Oe){var rt=this._getRegisteredActionsOnNextLoad();rt.push(Oe),v().set(ri,JSON.stringify(rt),{path:"/"})},_bindSevenZeroObserver:function(){re.config.doc.body&&(this._sevenZeroMutationObserver=new re.config.win.MutationObserver((function(Oe){if(this.get("visible")){var rt=Oe.find(function(It){if(!It.target)return Xi("mutation.target is not real!",It),!0;var Bt=It.target.classList;if(!Bt)return!0;var yi=Qt.find(function(nn){return Bt.contains(nn)});return!re.Lang.isValue(yi)});re.Lang.isValue(rt)&&this.windowExists()&&(this._sevenZeroDomChangeResponder&&this._sevenZeroDomChangeResponder.cancel(),this._sevenZeroDomChangeResponder=re.later(yt,this,function(){this._sevenZeroDomChangeResponder=null,this._refreshSevenZeroAnnotationControllers()}))}}).bind(this)),this._sevenZeroMutationObserver.observe(re.config.doc.body,{childList:!0,attributes:!0,subtree:!0}))},windowExists:function(){return re&&re.config&&re.config.win},_bindSevenZeroWatcher:function(){this._sevenZeroDomWatcher=re.later(_t,this,this._refreshSevenZeroAnnotationControllers,null,!0)},_refreshSevenZeroAnnotationControllers:function(){this.windowExists()&&this.controllersInitailizedForRefreshToWork&&(Ci("Request to update live edit controllers!"),this.initializeBlockFields(),this._initializeNavigations(),this.getHotAnnotationControllers().filter(function(rt){return rt instanceof In.gm}).forEach(function(rt){rt.syncChildCollectionAnnotationControllers()}),this.overlayAnnotationController&&this.overlayAnnotationController.invalidateAndRequestRepaint())},destructor:function(){re.Array.each(this.annotationControllers,function(Oe){Oe.state.destroyed||Oe.destroy(!0)},this),this.sevenOneSectionCatalog&&this.sevenOneSectionCatalog.destroy(),ms(),this.annotationMountRoot&&(this.annotationMountRoot.unmount(),this.annotationMountRoot=null),this.annotationMountNode&&this.annotationMountNode.remove(),re.Array.each(this._events,function(Oe){Oe.detach()}),this.annotationControllers.length=0,this._events.length=0,this._stackTimeoutId&&(clearTimeout(this._stackTimeoutId),this._stackTimeoutId=null),this._sevenZeroDomWatcher&&(this._sevenZeroDomWatcher.cancel(),this._sevenZeroDomWatcher=null),this._sevenZeroMutationObserver&&(this._sevenZeroMutationObserver.disconnect(),this._sevenZeroMutationObserver=null),this._sevenZeroDomChangeResponder&&this._sevenZeroDomChangeResponder.cancel(),this._slideEditController&&(this._slideEditController.destroy(),this._slideEditController=null),this._slideUpdateRenderSynchronizerHandle&&(this._slideUpdateRenderSynchronizerHandle.detach(),this._slideUpdateRenderSynchronizerHandle=null),this.overlayAnnotationController&&(this.overlayAnnotationController.destroy(),this.overlayAnnotationController=null),this._popupOverlayShowingHandle&&(this._popupOverlayShowingHandle.detach(),this._popupOverlayShowingHandle=null),Pt.Z.reset.defer()},_initializeAnnotationControllers:function(){if(this._initializeSlideAnnotationController(),I.Z.isSevenOne()){var Oe=this.get("contextCollection"),rt=function(){return Oe?ts.default.fetch(Oe.get("id")):Promise.resolve(null)};rt().then((function(It){var Bt=It?It.toJSON():{},yi=!1,nn=!1;Bt.headerFooterVisibilitySettings&&(yi=Bt.headerFooterVisibilitySettings.hideHeader,nn=Bt.headerFooterVisibilitySettings.hideFooter),yi||this._initializeSections(Ks.Z.HEADER_SECTION,"header#header",In.US),re.one("body").addClass("sqs-jacquard"),re.one("body").addClass("sqs-jacquard-outline-beta"),this._initializeSections(Ks.Z.PAGE_SECTIONS,"[data-page-sections]",In.Tx),this._initializeSections(Ks.Z.COLLECTION_ITEM_SECTIONS,"[data-collection-item-sections]",In.Ao),nn||this._initializeSections(Ks.Z.FOOTER_SECTIONS,"[data-footer-sections]",In.VX)}).bind(this))}else this.initializeBlockFields(),this._initializeSiteTitle(),this._initializeSiteDescription(),this._initializePageConfiguration(),this._initializeNavigations(),this._initializeContentField("connected-accounts",In.pD),this._initializeContentField("business-information",In.mB);this._sync()},isInitializing:function(){return!this.get("annotationControllersInitialized")},_navigate:function(Oe){if(Oe.source!==this.name){var rt={source:this.name};Oe.shimmy&&(rt.shimmy=Oe.shimmy),Oe.focus&&(rt.focus=Oe.focus),re.Squarespace.Singletons.Location.go(Oe.path,rt),Oe.stopPropagation()}},isNodeVisible:function(Oe,rt){var It=Oe.get("region"),Bt=It.width>0||It.height>0;if(!Bt)return!1;var yi=Oe.getComputedStyle("visibility");if(yi==="hidden")return!1;var nn=Oe.get("parentNode");return rt&&nn&&nn!==re.one(re.config.doc)?this.isNodeVisible(nn,rt):!0},_initializeSiteTitle:function(){var Oe=re.all('[data-content-field="site-title"]');Oe.each(function(rt){this.isNodeVisible(rt)&&this.registerAnnotationController(In.JL,{rootNode:rt})},this)},_initializeSiteHeader:function(){var Oe=re.all("header#header");Oe.each(function(rt){if(this.isNodeVisible(rt)){var It=this.registerAnnotationController(In.HV,{rootNode:rt});Bs(Ks.Z.HEADER_SECTION,It)}},this)},_initializeSiteDescription:function(){var Oe=re.all('[data-content-field="site-description"]');Oe.each(function(rt){this.isNodeVisible(rt)&&this.registerAnnotationController(In.bO,{rootNode:rt})},this)},_initializeSlideAnnotationController:function(){if(!re.one(".sqs-slide")){this._popupOverlayShowingHandle=re.Global.once("popupOverlay:showing",(function(){this._createSlideController(!0)}).bind(this));return}this._createSlideController()},_createSlideController:function(Oe){this._slideEditController=new re.Squarespace.SlideRendering.EditController({stack:this.stack,shouldShowPopup:Oe}),this.get("contextCollection")&&(this._slideUpdateRenderSynchronizerHandle=re.Global.after(["slideUpdateRendered","slideComponentSync"],(function(){this._syncSliceAnnotationControllers(),this._syncBodyClasses()}).bind(this)),this._syncSliceAnnotationControllers())},_syncSliceAnnotationControllers:function(){var Oe=[],rt=[];this.getHotAnnotationControllers().forEach(function(Bt){var yi=Bt.state.rootNode,nn=yi?yi.getDOMNode():null;if(Bt.state.destroyed||!nn||!yi.inDoc()){Oe.push(Bt);return}rt.push(nn);var vs=yi.ancestor("[data-compound-type]");vs&&rt.push(vs.getDOMNode())});for(var It=0;It<Oe.length;It++)this.removeAnnotationController(Oe[It]);re.all("[data-slice-type]").each(function(Bt){var yi=this._getValidRootNodeForSliceTypeNode(Bt);rt.indexOf(yi.getDOMNode())>-1||this._createAnnotationControllerForSliceNode(Bt)},this)},_getValidRootNodeForSliceTypeNode:function(Oe){var rt=Oe.getAttribute("data-slice-type"),It=C.Z[rt];if(It===m().IMAGE){var Bt=Oe.one("img");if(Bt)return Bt}else if(It===m().HEADING){var yi=Oe.one("h1");if(yi)return yi}return Oe},_createAnnotationControllerForSliceNode:function(Oe){var rt=this._getValidRootNodeForSliceTypeNode(Oe),It=Oe.hasAttribute("data-compound-type")?Oe.getAttribute("data-compound-type"):Oe.getAttribute("data-slice-type");this.registerAnnotationController(In.Ew,{contextCollectionId:this.get("contextCollection").get("id"),rootNode:rt,sliceTypeStr:It,visible:this.get("visible")})},_initializePageConfiguration:function(){var Oe=['[data-content-field="main-content"]','.sqs-layout[data-type="page"]',"[data-collection-id]"].join(","),rt=re.all(Oe);Ci("Found "+rt.size()+" page configuration wrappers."),rt.each(function(It){if(!It.ancestor(Oe)){for(var Bt=0;Bt<Nt.length;Bt++)if(It.hasClass(Nt[Bt]))return;this.initializeAnnotationControllerForNode(It)}},this)},initializeAnnotationControllerForNode:function(Oe,rt){var It=this._getCollection(Oe),Bt=this.getPageConfigurationCtor(It);if(!re.Lang.isFunction(Bt)){Ci("Could not find a PageConfigurationCtor for node.",Oe.getDOMNode());return}if(this.isBound(Oe,Bt)){Ci("Not rebinding on element.",Oe.getDOMNode(),Bt.NAME);return}if(Bt===In.T3&&!Oe.test('.sqs-layout[data-type="page"]')){var yi=Oe.all('.sqs-layout[data-type="page"]');yi.size()===1?Oe=yi.item(0):(yi.size()>1&&Xi("Multiple .sqs-layout found inside of wrapper. Creating generic annotation.",yi._nodes),Bt=In.FE)}var nn=this.registerAnnotationController(Bt,{rootNode:Oe,overlayRootNode:rt||Oe,collection:It});return rt&&rt!==Oe&&nn.set("placeAnnotationInside",!0),Ci("Plugged",Bt.NAME,"for ",It.toDebugString(),Oe.getDOMNode()),nn},getPageConfigurationCtor:function(Oe){if(!re.Lang.isValue(Oe))return null;var rt=Oe.get("typeName"),It=Oe.get("type");if(re.Lang.isValue(It)||(It=Oe.getTemplateConfiguration().get("collectionType")),!rt&&It===h().COLLECTION_TYPE_PAGE&&(Oe.set("typeName","page"),rt="page"),It===h().COLLECTION_TYPE_GENERIC){var Bt=Oe.get("ordering");if(!re.Lang.isValue(Bt)){var yi=T.default.getCollectionConfig(rt),nn=T.default.getPageConfig(rt),vs=yi||nn;Bt=vs?vs.ordering:null}if(re.Squarespace.ContentCollectionUtils.isIndex(Oe))return We.isCollectionAStackedIndex(Oe)?In.YX:In.gm;if(Bt===s().USER)return In.ri;if(Bt===s().CHRONOLOGICAL)return In.l3;if(Bt===s().CALENDAR)return In.f;if(Bt===s().MUSIC_ALBUM)return In.uB}if(It===h().COLLECTION_TYPE_PAGE)return In.T3;if(It===h().PRODUCTS)return In.QI},_getCollection:function(Oe){var rt=re.Squarespace.ContentCollectionCache,It=null;if(Oe.hasAttribute("data-collection-id")&&(It=Oe.getAttribute("data-collection-id")),Oe.test('.sqs-layout[data-type="page"]')&&(It=Oe.getAttribute("id").substr(5)),re.Lang.isString(It)&&It.length)return re.config.win.Static.SQUARESPACE_CONTEXT.collectionId===It?rt.getCollectionFromData(re.config.win.Static.SQUARESPACE_CONTEXT.collection):rt.getById(It);var Bt=re.config.win.Static.SQUARESPACE_CONTEXT.collection;if(re.Lang.isObject(Bt))return re.Squarespace.ContentCollectionCache.getCollectionFromData(Bt)},_initializeSections:function(Oe,rt,It){var Bt=re.all(rt);Ci("Found "+Bt.size()+" page sections.");var yi=re.Array.filter(this.annotationControllers,function(vs){return vs instanceof It});if(Bt.each(function(Gs){if(Gs.all(rt).isEmpty()){var wa=this._getRegisteredAnnotationController(Gs);if(!wa&&this.isNodeVisible(Gs))try{var Ra=this.registerAnnotationController(It,{rootNode:Gs});Bs(Oe,Ra)}catch(Ko){Fn("Controller init failed",Ko)}else wa&&yi.includes(wa)&&this.isNodeVisible(Gs)&&yi.remove(wa)}},this),yi.length>0){Ci("Page sections are waiting for garbage collection",yi);for(var nn=0;nn<yi.length;nn++)this.removeAnnotationController(yi[nn])}},_initializeNavigations:function(){var Oe='[data-content-field^="navigation"]',rt=re.all(Oe);Ci("Found "+rt.size()+" navigations.");var It=re.Array.filter(this.annotationControllers,function(yi){return yi instanceof In.W_});if(rt.each(function(yi){if(yi.all(Oe).isEmpty()){var nn=this._getRegisteredAnnotationController(yi);!nn&&this.isNodeVisible(yi)?this.registerAnnotationController(In.W_,{rootNode:yi}):nn&&It.includes(nn)&&this.isNodeVisible(yi)&&It.remove(nn)}},this),It.length>0){Ci("Navigations waiting for garbage collection.",It);for(var Bt=0;Bt<It.length;Bt++)this.removeAnnotationController(It[Bt])}},_initializeContentField:function(Oe,rt){re.all('[data-content-field="'+Oe+'"]').each(function(It){this.isNodeVisible(It)&&this.registerAnnotationController(rt,{rootNode:It})},this)},getValidBlockFieldNodes:function(){var Oe=re.all('.sqs-layout[data-type="block"], .sqs-layout[data-type="block-field"]'),rt=[];return Oe.each(function(It){if(!this.isNodeVisible(It)&&!(0,Va.L)()){Ci("Skipping blockField because element is not visible.",It._node);return}rt.push(It)},this),rt},initializeBlockFields:function(){var Oe=this.getValidBlockFieldNodes();Ci("Valid block nodes",Oe);var rt=re.Array.filter(this.annotationControllers,function(Bt){return Bt instanceof In.SR});if(re.Array.each(Oe,function(Bt){var yi=this._getRegisteredAnnotationController(Bt);re.Lang.isValue(yi)||(yi=this.registerAnnotationController(In.SR,{rootNode:Bt})),rt.includes(yi)&&rt.remove(yi)},this),rt.length>0){Ci("Block fields waiting for garbage collection",rt);for(var It=0;It<rt.length;It++)this.removeAnnotationController(rt[It])}},removeAnnotationController:function(Oe){this.annotationControllers.remove(Oe),Oe.destroy(),this.overlayAnnotationController&&this.overlayAnnotationController.repaintRequest()},registerAnnotationController:function(rt,It){if(!this.overlayAnnotationController&&!I.Z.isSevenOne()){Fn("Tried to registerAnnotationController without overlayAnnotationController");return}var Bt={stack:this.stack,Y:re},yi=I.Z.isSevenOne()?Bt:Object.assign({},Bt,{annotationController:this.overlayAnnotationController,contentModeControllerSet:this.set.bind(this),fireRequestDiscardChangesEvent:this.fireRequestDiscardChangesEvent.bind(this),fireRequestSaveChangesEvent:this.fireRequestSaveChangesEvent.bind(this),initializeAnnotationControllerForNode:this.initializeAnnotationControllerForNode.bind(this),isNodeVisible:this.isNodeVisible.bind(this),registerActionOnNextLoad:this.registerActionOnNextLoad.bind(this),registerAnnotationController:this.registerAnnotationController.bind(this),removeAnnotationController:this.removeAnnotationController.bind(this)}),nn=new rt(yi,It);return this.get("visible")!==nn.state.visible&&nn.set("visible",this.get("visible")),nn.addAfterChangeHandler("editable",this._syncAnnotationEditableState,this),I.Z.isSevenOne()||(nn.addAfterChangeHandler("dirty",this._sync70DirtyAnnotationState,this),nn.addAfterChangeHandler("visible",function(){this.overlayAnnotationController.repaintRequest()},this)),this.annotationControllers.push(nn),I.Z.isSevenOne()||this.overlayAnnotationController.repaintRequest(),nn},isBound:function(Oe,rt){return re.Lang.isValue(re.Array.find(this.annotationControllers,function(It){return It instanceof rt&&It.state.rootNode===Oe}))},_getAnnotationControllerByType:function(Oe){if(this.annotationControllers)return re.Array.find(this.annotationControllers,function(rt){return rt instanceof Oe})},_getRegisteredAnnotationController:function(Oe){return re.Array.find(this.annotationControllers,function(rt){return rt.state.rootNode===Oe})},_getPropertyFromAnnotationController:function(Oe){return re.Array.map(this.annotationControllers,function(rt){return rt.state[Oe]})},_sync70DirtyAnnotationState:function(){(0,q.GE)((0,J.jd)(this._getPropertyFromAnnotationController("dirty").includes(!0)))},_syncAnnotationEditableState:function(){setTimeout((function(){(0,q.GE)((0,J.NF)(this._getPropertyFromAnnotationController("editable").includes(!0)))}).bind(this),0)},__getActiveAnnotationController:function(){return re.Array.find(this.annotationControllers,function(Oe){return Oe.state.editable})},fireRequestDiscardChangesEvent:function(){this.fire("request-discard-changes")},revert70AnnotationControllerChangesAndDisableEditing:function(){if(ks.Z.clearUploads(),I.Z.isSevenOne())throw new Error("revert70AnnotationControllerChangesAndDisableEditing should only be used in 7.0");var Oe=Promise.all((this.annotationControllers||[]).map(function(rt){return new Promise(function(It,Bt){rt.state.dirty?rt.revert().then(function(){rt.set("editable",!1),It()},Bt):(rt.set("editable",!1),It())})}));return Oe.catch(function(rt){return Fn("Error reverting edit controller changes",rt),new re.Squarespace.Widgets.Alert({"strings.title":(0,E.t)("Error Reverting",null,{project:"scripts-v6.frontend"}),"strings.message":rt||(0,E.t)("Please try reverting again.",null,{project:"scripts-v6.frontend"})})}),Oe.then(this._clearBlockFocus),Oe},fireRequestSaveChangesEvent:function(Oe){var rt={};Oe&&(rt.model=Oe),this.fire("cmcSave70",rt),(0,e.B1)("save-page",{tracer:a.Z}),this.save70AnnotationControllerChangesAndDisableEditing().then(function(){(0,e.L8)("save-page",{tracer:a.Z})},function(){(0,e.L8)("save-page",{tracer:a.Z})})},save70AnnotationControllerChangesAndDisableEditing:function(){if(Le.getState().isSaving)return re.Promise.reject(new Error("Save in progress"));var Oe;window.__saveOpenBlockEditor&&(Oe=window.__saveOpenBlockEditor()),(!Oe||!Oe.then)&&(Oe=re.Promise.resolve()),ks.Z.saveUploads(function(It){return(0,Bo.q5)(It.fieldId)});var rt=Oe.then((function(){return re.Promise.all(re.Array.reduce(this.annotationControllers,[],function(It,Bt){return Bt.state.dirty&&(Pt.Z.setIsSaving(!0),It.push(Bt.save().then(function(){Bt.set("editable",!1),Pt.Z.setIsSaving(!1)}).catch(function(yi){return Pt.Z.setIsSaving(!1),re.Promise.reject(yi)}))),Bt.set("editable",!1),It}))}).bind(this));return rt.catch(function(It){return Fn("Error saving edit controller changes",It),It==="Block is missing definition name"&&ve.$e(function(Bt){Bt.setTag("owner",Ii().CONTENT_RENDERING),ve.Tb(It)}),new re.Squarespace.Widgets.Alert({"strings.title":(0,E.t)("Error Saving",null,{project:"scripts-v6.frontend"}),"strings.message":It||(0,E.t)("Please try saving again.",null,{project:"scripts-v6.frontend"})})}),rt.then(this._clearBlockFocus),rt},_clearBlockFocus:function(){(0,q.GE)(J.wv())},_sync:function(){var Oe=this.get("visible");this._syncBodyClasses();var rt=[];for(re.Array.each(this.annotationControllers,function(Bt){if(Bt.state&&(!Bt.state.rootNode||!Bt.state.rootNode.inDoc())){rt.push(Bt);return}Ci("Set edit controller visible",{controller:Bt,isVisible:Oe}),Bt.set("visible",Oe)},this);rt.length!==0;){var It=rt.shift();this.removeAnnotationController(It)}},_syncBodyClasses:function(){var Oe=this.get("visible");re.one(re.config.doc.body).toggleClass("sqs-edit-mode",Oe),re.one(re.config.doc.body).toggleClass("sqs-hide-overlay-widgets",!Oe),re.Global.fire("_syncBodyClasses",re.config.win)},getDamaskHideFields:function(){var Oe=[];return re.Array.each(this.annotationControllers,function(rt){var It=rt.state.damaskFieldsToHide;re.Lang.isValue(It)&&re.Object.each(It,function(Bt,yi){Bt.call(this)&&Oe.push(yi)},rt)}),Oe},getHotAnnotationControllers:function(){return this.annotationControllers},ensureCollectionInStackedIndexIsOnScreen:function(Oe,rt,It){var Bt=this.get("contextCollection");if(It||!Bt||Bt.get("id")!==rt&&!We.isCollectionInIndex(Bt)){if(this.registerActionOnNextLoad({action:"ensureCollectionInStackedIndexIsOnScreen",options:{collectionId:Oe,parentCollectionId:rt}}),!re.config)return;It&&re.config.win.location.reload();var yi=re.Squarespace.ContentCollectionCache.getById(Oe),nn=CONFIG_PANEL.get("contentBridge").getCollectionUrl(yi);re.Squarespace.Singletons.Location.setFrameUrlOrRefresh(nn);return}var vs=this._getAnnotationControllerByType(In.gm);vs&&vs.ensureCollectionIsInView(Oe)}},{ATTRS:{visible:{value:!1},dirty:{value:!1},annotationControllersInitialized:{value:!1},contextCollection:{}}});if((0,st.F)(re)){var An=re.config.win.Static.SQUARESPACE_CONTEXT.collection,rs;re.Lang.isObject(An)&&(rs=re.Squarespace.ContentCollectionCache.getCollectionFromData((0,D.Z)(An))),at.ContentModeController=new tn({contextCollection:rs}),re.Global.ContentModeController=at.ContentModeController,xn.tX(re,re.config.win)}},"1.0",{requires:["base","promise","@sqs/layout-engine/block-content-html","@sqs/layout-engine/events","@sqs/layout-engine/layout-builder","@sqs/layout-engine/models-layout","squarespace-attr-validators","squarespace-block-content-html-editor","squarespace-content-collection-utils","squarespace-content-item-types-editor","squarespace-content-item-types-enum-record-type","squarespace-content-manager-navigation-ui-utils","squarespace-damask-context-globals","squarespace-layout-engine-edit-controller","squarespace-layout-renderable-blocks-web-app","squarespace-logger","squarespace-mixins-event-registrar","squarespace-models-content-collection","squarespace-models-content-item","squarespace-models-layout-block-field","squarespace-models-layout-page-collection-data","squarespace-models-template-navigation-list","squarespace-navigation-list-utils","squarespace-promises","squarespace-singletons-location","squarespace-slice-type-groups","squarespace-slide-rendering-edit-controller","squarespace-ss-widget","squarespace-util-authenticated","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation-media","widget-position-align"]})},426704:function(c,b,t){"use strict";var l=t(687833),d=t.n(l);YUI.add("squarespace-gallery-collection-list",function(o){var e=o.config.win,a=o.config.win.document,r=function(){var n={body:o.one("body"),gallery:o.one(".sqs-system-gallery"),slideWrapper:o.one(".sqs-system-gallery").one(".gallery-wrapper"),slidesAndControls:o.one(".sqs-system-gallery").one(".slides-controls"),circles:o.one(".sqs-system-gallery").one(".circles")},i={show:"show",ready:"sqs-system-gallery-ready",interaction:"sqs-system-gallery-interaction",mouseenterleft:"sqs-system-gallery-hover-slides-left",mouseenterright:"sqs-system-gallery-hover-slides-right",init:"sqs-system-gallery-init",circlesNav:"gallery-navigation-circles",crop:"gallery-auto-crop",iframe:"sqs-system-gallery-video-iframe"},u=null,h=null,g=window.innerWidth,p=[],f=[];function m(R,w){var k=o.Squarespace.Template.getTweakValue(R);return w?k=parseFloat(k):typeof k=="string"&&(k=k.toLowerCase()),k==="true"?k=!0:k==="false"&&(k=!1),k}function _(){var R=n.gallery.one(".slide.sqs-active-slide");return R&&R.getAttribute("data-type")==="video"&&R.one("iframe")}function v(){return m("gallery-design")!=="grid"}function E(R){var w=0,k=R&&R.match(/(\d+):(\d+)/);return k&&k.length===3&&(w=k[1]/k[2]),w}function S(){var R=n.gallery.one(".slide.sqs-active-slide"),w=R&&R.getAttribute("data-slide-id")||null,k=n.gallery.one('.slide-meta[data-slide-id="'+w+'"]');k&&(n.body.hasClass(i.crop)?k.setStyles({top:null,bottom:null,left:null,width:null}):(n.body.hasClass(i.circlesNav)?(k.setStyle("top",(parseFloat(R._node.clientHeight)-parseFloat(R.one("img")._node.clientHeight))/2),k.setStyle("bottom",null)):(k.setStyle("top",null),k.setStyle("bottom",(parseFloat(R._node.clientHeight)-parseFloat(R.one("img")._node.clientHeight))/2)),k.setStyles({left:R.one("img").getComputedStyle("left"),width:R.one("img")._node.clientWidth})))}function y(R,w,k){var q,F,z;return w&&(q=w.one(".title"),F=w.one(".description"),(q&&q._node.innerHTML||F&&F._node.innerHTML)&&(k?z=!0:(w.addClass(i.show),S()))),z}function C(R){var w=n.gallery.one(".slide.sqs-active-slide"),k=w&&w.one("img"),q=w&&w.getAttribute("data-slide-id")||null,F;if(n.gallery.all(".slide-meta").removeClass(i.show),R&&Modernizr&&!Modernizr.touch&&n.gallery.addClass(i.interaction),_()?(n.gallery.addClass(i.iframe),n.gallery.removeClass(i.mouseenterleft),n.gallery.removeClass(i.mouseenterright)):(n.gallery.removeClass(i.iframe),R&&R.type==="Gallery:currentIndexChange"&&(R.direction===-1?n.gallery.addClass(i.mouseenterleft):n.gallery.addClass(i.mouseenterright))),q&&(y(w,n.gallery.one('.slide-meta[data-slide-id="'+q+'"]')),k&&n.body.hasClass(i.circlesNav))){var z=function(){F=Math.max(0,(parseFloat(w._node.clientHeight)-parseFloat(k._node.clientHeight))/2),n.circles.setStyle("bottom",F)};k.get("complete")?z():p.push(k.on("load",z))}}function O(){var R=m("gallery-loop"),w=m("gallery-auto-crop"),k=m("gallery-autoplay"),q=m("gallery-transitions"),F=m("galleryAutoplaySpeed",!0)*1e3,z=m("gallery-navigation"),j=m("gallery-aspect-ratio"),X=j.split(" ")[0],J=!v(),Q=0;X=parseInt(j.split(":")[1],10)/parseInt(j.split(":")[0],10),j=n.gallery._node.clientWidth*X,n.gallery.removeClass(i.init),n.gallery.removeClass(i.ready),n.gallery.removeClass(i.interaction),n.gallery.removeClass(i.mouseenterleft),n.gallery.removeClass(i.mouseenterright),n.gallery.all(".slide-meta").removeClass(i.show),u&&(Q=u.get("currentIndex"),n.gallery.all(".sqs-disabled").removeClass("sqs-disabled"),n.gallery.all(".sqs-active-slide").removeClass("sqs-active-slide"),n.gallery.all(".slide, img").setStyles({visibility:null,left:null,top:null,overflow:null,width:null,height:null}),u.destroy()),h&&(n.gallery.all(".thumbnail img[data-src]").each(function(pe){pe.setStyles({height:null,width:null,top:null,left:null})}),h.destroy()),n.gallery.one(".slides-controls").setStyle("height",J?null:j),n.slideWrapper.setStyle("minHeight",J?null:j),u=new o.SQS.Gallery.Gallery2({container:".slides",slides:".slide",currentIndex:Q,elements:{next:".next-slide, .simple .next",previous:".previous-slide, .simple .previous",controls:".dots, .numbers, .circles",currentIndex:".current-index",totalSlides:".total-slides"},loop:R,autoplay:J?!1:k,autoplayOptions:{randomize:!1,timeout:F,pauseOnMouseover:[".thumbnail-wrapper"]},lazyLoad:!0,loaderOptions:{mode:J?m("aspect-ratio")==="auto"?"none":"fill":w?"fill":"fit"},design:J?"autocolumns":"stacked",designOptions:{transition:q,lightbox:J,clickBehavior:"auto",gutter:m("gridSpacing",!0),columnWidth:m("gridSize",!0),aspectRatio:E(m("aspect-ratio"))},historyHash:!0}),n.gallery.all(".arrow").each(function(pe){pe.setStyle("top",n.slideWrapper._node.clientHeight/2)}),!J&&z==="thumbnails"&&(h=new o.SQS.Gallery.Gallery2({container:".thumbnail-wrapper",currentIndex:Q,loaderOptions:{mode:"fill",load:!0},lazyLoad:!0,design:"strip"}),u.addChild(h));var ie=u.after("currentIndexChange",C);C();var ce=u.after("image-loaded",S);S(),n.gallery.addClass(i.ready),p.push(ie,ce)}function A(R){typeof R=="function"&&(window.throttleTimeout&&clearTimeout(window.throttleTimeout),window.throttleTimeout=setTimeout(R,750))}function I(R,w){var k=R._event.offsetX||R._event.layerX;n.gallery.addClass(i.interaction),R._event.target&&(R._event.target.localName==="img"||R._event.target.className==="sqs-video-opaque"||R.target.hasClass("slide"))&&(w?(n.gallery.removeClass(i.mouseenterleft),n.gallery.removeClass(i.mouseenterright)):k<=R._currentTarget.clientWidth/2?(n.gallery.removeClass(i.mouseenterright),n.gallery.addClass(i.mouseenterleft)):(n.gallery.removeClass(i.mouseenterleft),n.gallery.addClass(i.mouseenterright)))}function D(R){var w=R.keyCode;(w===37||w===39&&v())&&n.gallery.addClass(i.interaction)}function T(){var R=new o.Squarespace.ResizeEmitter({timeout:100});R.on("resize:end",function(){window.innerWidth!==g&&(g=window.innerWidth,A(O))}),f.push(R),Modernizr&&!Modernizr.touch&&p.push(o.on("mousemove",function(w){v()&&I(w,!1)},n.gallery.one(".slides-controls")),o.on("mouseleave",function(w){v()&&(I(w,!0),n.gallery.removeClass(i.iframe))},n.gallery.one(".slides-controls")),o.on("mouseenter",function(w){v()&&_()&&n.gallery.addClass(i.iframe)},n.gallery.one(".slides-controls"))),p.push(o.on("keydown",D))}function B(R,w){p.push(o.Global.on("tweak:change",function(k){if(k.getName()===R&&typeof w=="function"){var q=k.getValue();q==="true"?q=!0:q==="false"&&(q=!1),w(q)}}))}function N(){B("gallery-loop",O),B("gallery-transitions",O),B("gallery-auto-crop",O),B("gallery-navigation",function(R){R==="Thumbnails"&&!n.gallery.one(".thumbnail-wrapper img[src]")&&O(),S()}),B("gallery-autoplay",function(R){u.set("autoplay",R)}),B("gallery-aspect-ratio",function(){O()}),B("galleryAutoplaySpeed",function(){A(O)}),B("galleryInfoBackground",function(){C()}),B("gallery-design",O),B("aspect-ratio",O),B("gridSpacing",O),B("gridSize",O),o.Global&&p.push(o.Global.on(["tweak:reset","tweak:close"],function(R){o.later(500,this,O)},this))}function P(){O(),T(),o.Lang.isValue(Static.SQUARESPACE_CONTEXT.authenticatedAccount)&&N()}function x(){p=p.filter(function(R){return R.detach(),!1}),f=f.filter(function(R){return typeof R.destroy=="function"&&R.destroy(),!1}),u&&(u.get("container")&&u.get("container").hide(),typeof u.destroy=="function"&&u.destroy()),h&&(h.get("container")&&h.get("container").hide(),typeof h.destroy=="function"&&h.destroy())}return{init:P,destroy:x}},s;e.Squarespace.onInitialize(o,function(){var n=a.querySelector(".sqs-gallery-list");n&&(s=new r,s.init())}),e.Squarespace.onDestroy(o,function(){s&&(s.destroy&&typeof s.destroy=="function"&&s.destroy(),s=null)})},"1.0",{requires:["base","node","squarespace-dom-emitters-resize","squarespace-gallery-ng","squarespace-image-loader","squarespace-public-api"]})},405144:function(){var c=".js-gallery-lightbox-opener";YUI.add("squarespace-gallery-manager",function(b){var t={lightboxify:function(l,d){if(this._destroyLightbox(),!l||!d||!d.size()){this.unlightboxify(d);return}var o=!!d.item(0).ancestor(".sqs-system-gallery"),e=[];d.each(function(a,r){e.push(this._createLightboxItem(a));var s=a.getAttribute("data-click-through-url");if(!s){var n=a.one(c)||a;if(n){var i={index:r,slideHitArea:n,lightboxSet:e,isFromHash:o},u=this._makeOpenLightbox(i).bind(this);n.on("click",u,this),n.on("keydown",function(h){var g=h.keyCode===13,p=h.keyCode===32;(g||p)&&u(h)},this)}}},this),o&&this._openInitialSlide(d,e)},unlightboxify:function(l){if(this._destroyLightbox(),!!l){var d;l.each(function(o){d=o.one(c),d&&(d.detach("click"),d.detach("keydown"))})}},_destroyLightbox:function(){this.lightbox&&(this.lightbox.destroy(),delete this.lightbox)},_createLightboxItem:function(l){if(l.getAttribute("data-type")==="video"){var d=l.one(".sqs-video-wrapper"),o=d.videoloader.get("overlay");return o&&o.detach("click"),{content:d}}var e,a,r;return l.hasAttribute("data-title")?e=l.getAttribute("data-title"):l.one("[data-title]")?e=l.one("[data-title]").getAttribute("data-title"):l.one(".title")&&(e=l.one(".title").getHTML()),l.hasAttribute("data-description")?a=l.getAttribute("data-description"):l.one("[data-description]")?a=l.one("[data-description]").getAttribute("data-description"):l.one(".description")&&(a=l.one(".description").getHTML()),l.hasAttribute("data-lightbox-theme")?r=l.getAttribute("data-lightbox-theme"):l.one("[data-lightbox-theme]")?r=l.one("[data-lightbox-theme]").getAttribute("data-lightbox-theme"):l.one(".lightbox-theme")&&(r=l.one(".lightbox-theme").getHTML()),{theme:r,content:l.one("img"),meta:(e?"<h1>"+e+"</h1>":"")+(a||"")}},_getLightboxTheme:function(l){var d=l.ancestor("[data-lightbox-theme]",!0);return d&&d.getAttribute("data-lightbox-theme")==="light"?"light":"dark"},_makeOpenLightbox:function(l){return function(d){d.halt(),this._destroyLightbox(),this.lightbox=new b.Squarespace.Lightbox2({controls:{previous:!0,next:!0},set:l.lightboxSet,currentSetIndex:l.index,historyHash:l.isFromHash,theme:this._getLightboxTheme(l.slideHitArea)}),this.lightbox.render(),l.isFromHash&&this.lightbox._slideshow.set("currentIndex",l.index)}},_getInitialSlideId:function(l){var d=new b.HistoryHash,o=d.get("itemId");if(o)return o;if(l&&l.size()){var e="",a=l.item(0).ancestor(".slides");if(a)return e=a.getAttribute("data-collection-full-url"),window.location.pathname.replace(e,"")}var r=window.location.pathname.split("/");return r[r.length-1]},_getSlideIndexByLink:function(l,d){var o=-1;return l.some(function(a,r){if(a.ancestor(".sqs-layout"))return!1;var s=a.getAttribute("data-slide-url");return a.getAttribute("data-slide-id")!==d&&s!==d?!1:(o=r,!0)},this),o},_getSlideIndexByRoughUrl:function(l,d){var o=-1;return l.some(function(a,r){if(a.ancestor(".sqs-layout"))return!1;var s=a.getAttribute("data-slide-url"),n=s.substr(s.length-d.length)===d,i=s.indexOf("/"+d)>-1;return!n||!i?!1:(o=r,!0)},this),o},_openInitialSlide:function(l,d){var o=this._getInitialSlideId();if(o){var e=this._getSlideIndexByLink(l,o);e===-1&&(e=this._getSlideIndexByRoughUrl(l,o),e===-1)||(this._destroyLightbox(),this.lightbox=new b.Squarespace.Lightbox2({controls:{previous:!0,next:!0},set:d,currentSetIndex:e,historyHash:"yui-throttle"}),this.lightbox.render())}}};b.mix(b.SQS.Gallery.Manager,t,!0),b.Squarespace.GalleryManager=b.SQS.Gallery.Manager},"1.0",{requires:["squarespace-image-loader","squarespace-plugin-lightbox2","squarespace-video-loader","squarespace-widgets-lightbox2","@sqs/yui-gallery/manager"]})},976309:function(){YUI.add("squarespace-gallery-ng",function(c){c.namespace("Squarespace"),c.Squarespace.Gallery2=c.SQS.Gallery.Gallery2,c.Squarespace.GalleryDesigns2=c.SQS.Gallery.Designs},"1.0",{requires:["@sqs/yui-gallery"]})},800180:function(c,b,t){"use strict";var l=t(936177),d=t.n(l);YUI.add("squarespace-gallery",function(o){o.namespace("Squarespace");var e=!1,a=o.Squarespace.Legacy.Class;o.augment(o.Node,a.create({outerWidth:function(r){var s=parseFloat(this.getComputedStyle("marginLeft")),n=parseFloat(this.getComputedStyle("marginRight"));return d().trackCaughtError("squarespace-gallery-deprecation","YNode#outerWidth invoked"),this.get("offsetWidth")+s+n},outerHeight:function(r){var s=parseFloat(this.getComputedStyle("marginTop")),n=parseFloat(this.getComputedStyle("marginBottom"));return d().trackCaughtError("squarespace-gallery-deprecation","YNode#outerHeight invoked"),this.get("offsetHeight")+s+n}})),o.Squarespace.Gallery=a.create({defaultOpts:{previous:!1,next:!1,itemSelector:!1,startIndex:0,loop:!1,design:"off",designOptions:{},autoplay:!1,autoplayOptions:{timeout:1e3,resumeAfter:1e3,randomize:!1},currentIndex:!1,totalSlides:!1,linked:!1,keyboard:{previous:"down:37",next:"down:39"},renderWithCanvas:!1,loaderOptions:{},updateContainerHeight:!1,focusOnClick:!1},getContainer:function(){return this.elems.container},getSlide:function(r){return this.elems.slides.item(r)},getCurrentSlide:function(){return this.elems.slides.item(this.data.currentIndex)},getCurrentSlideId:function(){return this.getCurrentSlide().getAttribute("data-slide-id")||this.data.currentIndex},getSlides:function(){return this.elems.slides},initialize:function(r){d().trackCaughtError("squarespace-gallery-deprecation","Y.Squarespace.Gallery initialized!"),o.Lang.isBoolean(r.keyboard)&&r.keyboard&&delete r.keyboard,this.params=o.merge(this.defaultOpts,r),this.elems={};var s=o.one(this.params.slideshowElement);if(o.Lang.isNull(s))throw new Error("No gallery '"+this.params.slideshowElement+"' container found.");var n=this.params.itemSelector?s.all(this.params.itemSelector):s.get("children");if(this.elems.container=s,this.elems.slides=n,this.getContainer().getData("galleryInstance")){this.getContainer().getData("galleryInstance")._debug.warn("Node already bound to gallery instance.");return}if(this._debug=new o.Squarespace.Debugger({name:"Gallery",uid:!0}),this.getContainer().setData("galleryInstance",this),this.history=new o.HistoryHash,this.params.historyHash||this.history.get("itemId")){this.history=new o.HistoryHash;var i=this.history.get("itemId")||this.history.get(this.params.historyHash),u;i&&(this.elems.slides.each(function(f,m){f.getAttribute("data-slide-id")===i&&(u=m)}),o.Lang.isNumber(u)||(u=parseInt(this.history.get(this.params.historyHash),10)),this.history.get("itemId")&&this.history.replaceValue("itemId",null),o.Lang.isNumber(u)&&(this.params.startIndex=u))}if(this.data={currentIndex:this.params.startIndex,totalSlides:n.size()},this.events=[],this.data.totalSlides<=0)return!1;if(!o.Squarespace.GalleryDesigns[this.params.design]){var h=[];for(var g in o.Squarespace.GalleryDesigns)h.push(g);throw new Error("Design '"+this.params.design+"' not found. Currently loaded designs: ["+h.join(", ")+"].")}if(this.design=new o.Squarespace.GalleryDesigns[this.params.design],this.design.gallery=this,this.design.options=o.merge(this.design.options,this.params.designOptions),this.params.previous&&o.all(this.params.previous).each(function(f){this.events.push(f.on("click",function(m){m.halt(),this.previousSlide()},this))},this),this.params.next&&o.all(this.params.next).each(function(f){this.events.push(f.on("click",function(m){m.halt(),this.nextSlide()},this))},this),this.params.focusOnClick&&n.each(function(f){f.on("click",function(){this.fire("changeIndex",n.indexOf(f))},this)},this),this.params.keyboard){var p=function(){return this.params.keyboardWhenInFrame?this.getContainer().inRegion(o.one(this.params.keyboardWhenInFrame).get("region")):!0};this.params.keyboard.previous&&this.events.push(o.on("key",function(){p.call(this)&&this.previousSlide()},window,this.params.keyboard.previous,this)),this.params.keyboard.next&&this.events.push(o.on("key",function(){p.call(this)&&this.nextSlide()},window,this.params.keyboard.next,this))}this.params.linked&&o.Array.each(this.params.linked,function(f){this.linkGallery(f)},this),this.setup(),this.fire("changeIndex",this.params.startIndex),this.isInitialized=!0},linkGallery:function(r){function s(n,i){n&&this._changeIndex(i),o.Array.each(this.elems.linked,function(u){n!==u&&u._changeIndex(i)})}this.elems.linked||(this.on("changeIndex",function(n){s.call(this,!1,n)},this),this.elems.linked=[]),this.elems.linked.push(r),r.on("changeIndex",function(n){s.call(this,r,n)},this)},setup:function(){if(this.on("changeIndex",this._changeIndex),this.loadSlides(),this.design.setup(this.elems.container,this.elems.slides),this.params.autoplay){var r=this;setInterval(function(){if(r.params.autoplayOptions.randomize){for(var s=Math.ceil(Math.random()*r.data.totalSlides);s===r.data.currentIndex;)s=Math.ceil(Math.random()*r.data.totalSlides);r.fire("changeIndex",s)}else r.nextSlide()},this.params.autoplayOptions.timeout)}e&&console.log("Y.Squarespace.Gallery.setup",[this.params,this.data,this.elems]),this.params.updateContainerHeight&&this.on("changeIndex",this.updateContainerHeight)},getSlideDimension:function(r,s){var n=this.elems.slides.item(r),i=n;n.one("img,canvas")&&(i=n.one("img,canvas")),i&&n.getStyle("display")==="inline"&&(n=i);var u=s==="width"?"offsetWidth":"offsetHeight";return i.loader?i.loader.get("loaded")?i.loader.get("node").get(u):i.loader.getDimensionForValue(s,n.get(s==="width"?"offsetHeight":"offsetWidth")):n.get(u)},updateContainerHeight:function(){var r={container:this.elems.container};o.Lang.isObject(this.params.updateContainerHeight)&&(r=o.merge(r,this.params.updateContainerHeight));var s=this.getSlideDimension(this.data.currentIndex,"height");r.maxHeight&&s>r.maxHeight&&(s=r.maxHeight);var n=o.all(r.container);r.anim&&this._updateContainerHeightRanOnce?n.each(function(i){i.anim({},o.merge({to:{height:s},duration:.3,easing:o.Easing.easeOutStrong},r.anim)).run()}):n.setStyles({height:s}),this._updateContainerHeightRanOnce=!0},previousSlide:function(){var r=this.data.currentIndex-1;r<0&&!this.params.loop||this.fire("changeIndex",r)},nextSlide:function(){var r=this.data.currentIndex+1;r>=this.data.totalSlides&&!this.params.loop||this.fire("changeIndex",r)},beforeChange:function(r){this.params.loop||(this.params.next&&(r.toIndex>=this.data.totalSlides-1?o.all(this.params.next).addClass("disabled"):o.all(this.params.next).removeClass("disabled")),this.params.previous&&(r.toIndex<=0?o.all(this.params.previous).addClass("disabled"):o.all(this.params.previous).removeClass("disabled"))),this.fire("before-change",r)},afterChange:function(r){(this.params.currentIndex||this.params.totalSlides)&&(o.all(this.params.currentIndex).each(function(s){s.set("innerHTML",this.data.currentIndex+1)},this),o.all(this.params.totalSlides).each(function(s){s.set("innerHTML",this.data.totalSlides)},this)),this.params.historyHash&&this.history.replaceValue(this.params.historyHash,this.getCurrentSlideId()),this.fire("after-change",r)},changeIndex:function(r){this.fire("changeIndex",r)},_changeIndex:function(r){if(!o.Lang.isObject(r)&&(this.params.loop||(r<0&&(r=0),r>=this.data.totalSlides&&(r=this.data.totalSlides-1)),r<0&&(r=this.data.totalSlides+r),!(this.isInitialized&&this.data.currentIndex===r))){e&&console.log("Y.Squarespace.Gallery.changeIndex",[r]);var s=this.data.currentIndex,n=r%this.data.totalSlides,i=this.elems.slides,u=s===this.data.totalSlides-1&&n===0,h=s===0&&n===this.data.totalSlides-1,g;s<n&&!u&&!h||s>n&&u&&!h?g="fwd":(s>n&&!h||s<n&&h)&&(g="rev");var p={fromIndex:s,toIndex:n,direction:g};this.beforeChange(p),i.filter(".active").removeClass("active"),i.item(n).addClass("active"),this.fire("change",p),this.data.currentIndex=n,this.afterChange(p)}},loadSlides:function(r){var s=this.elems.container.all("img[data-src][data-image-dimensions][data-image-focal-point]");s.plug(o.Squarespace.Loader2,this.params.loaderOptions)}}),o.augment(o.Squarespace.Gallery,o.EventTarget),o.Squarespace.GalleryDesigns={},o.Squarespace.GalleryDesigns.off=a.create({gallery:!1,options:{},beforeChange:function(r){},afterChange:function(r){},change:function(r,s){},setup:function(){},getGallery:function(){return this.gallery},events:[]})},"1.0",{requires:["node","event-key","squarespace-image-loader","squarespace-legacy-class","squarespace-ui-base","history"]})},872801:function(){YUI.add("squarespace-gismo",function(c){c.Squarespace.GismoBase=function(){this._gismoEvents={},this._timers={},this._anims=this._anims||[]},c.Squarespace.GismoBase.prototype={destructor:function(){c.Object.each(this._gismoEvents,function(b,t){c.Array.invoke(b,"detach"),this._gismoEvents[t]=null},this),c.Object.each(this._timers,function(b,t){c.Array.invoke(b,"cancel"),this._timers[t]=null},this),this._anims.shift?(c.Array.invoke(this._anims,"destroy"),this._anims=null):this._anims.destructor&&this._anims.destructor()},_anim:function(b,t,l){var d=b.anim(t,l||{});return d.on("end",function(){this._anims.remove(d)},this),this._anims.push(d),d},_event:function(b,t){t=t||"generic",this._gismoEvents[t]=this._gismoEvents[t]||[],this._gismoEvents[t].push(b)},_getEvents:function(b){return this._gismoEvents[b||"generic"]},_flushEvents:function(b){var t=this._gismoEvents[b||"generic"];t&&(c.Array.invoke(t,"detach"),this._gismoEvents[b]=null)},_timer:function(b,t){t=t||"generic",this._timers[t]=this._timers[t]||[],this._timers[t].push(b)}}},"1.0",{requires:["array-invoke","squarespace-anims"]})},205017:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-gizmo",function(d){d.namespace("Squarespace");var o="squarespace-",e="-bbox",a=new RegExp("[ ]+","g"),r=new RegExp("[^a-zA-Z0-9\\-]","g"),s=function(i,u,h,g,p){var f=p?d.Array.reject:d.Array.filter;return f(i,function(m){for(var _=0;_<h.length;++_){var v=h[_],E=g[_];if(m[v]!==E)return!1}return u&&u(m),!0})},n=function(i,u,h,g,p){if(!this._destroyed){if(d.Lang.isArray(u))return d.Array.map(u,function(_){return n.apply(this,[i].concat(d.Array(_)))},this);if(d.Lang.isObject(u)&&d.Lang.isFunction(u[i])){var f=[h,g,p||this];f=f.concat(Array.prototype.slice.call(arguments,5));var m=u[i].apply(u,f);return this._eventSubList.push({object:u,event:h,eventSub:m}),m}throw new Error("Gizmo["+this._name+"]: Could not subscribe to event: "+h)}};d.Squarespace.Gizmo=Class.create({_name:"Gizmo",_events:{render:{},rendered:{},destroy:{},destroyed:{}},initialize:function(i){d.augment(this,d.EventTarget,!0,null,{prefix:this._name}),this.params=d.merge(i),this._initState();for(var u=this,h=function(g,p){this.publish(p,g)};u!=null;)d.Object.each(u._events,h,this),u=u.superclass},getClassNames:function(){for(var i=this,u=[];;i=i.superclass){if(!i)return u;u.push(i.getClassName())}},_initState:function(){this._el=null,this._parentEl=null,this._eventSubList=[],this._anims=[],this._timers=[],this._destroyed=!1,this.destroyed=!1,this._children=[],this._guid=d.guid(),this._name||(this._name=(0,l.t)("No Name",null,{project:"scripts-v6-root"}))},getClassName:function(){return this._name},getId:function(){return this._guid},getCssClassName:function(){var i=this._name;return i=i.trim().replace(a,"-").replace(r,"").toLowerCase(),o+i},getElement:function(){return this._el},render:function(i){this.fire("render"),i=i||this._parentEl,this.params.noBoundingBox?this._el=this._render():(this._el=d.Node.create("<div></div>"),this._el.addClass(this.getCssClassName()+e),this._el.append(this._render())),i&&d.Lang.isFunction(i.append)&&i.append(this._el),this._parentEl=i,this.fire("rendered")},_render:function(){},_subscribe:function(i,u,h,g){var p=["on"].concat(d.Array(arguments));return n.apply(this,p)},_subscribeOnce:function(i,u,h,g){var p=["once"].concat(d.Array(arguments));return n.apply(this,p)},_subscribeBefore:function(i,u,h,g){var p=["before"].concat(d.Array(arguments));return n.apply(this,p)},_subscribeAfter:function(i,u,h,g){var p=["after"].concat(d.Array(arguments));return n.apply(this,p)},_unsubscribe:function(i,u){var h=u?["object","event"]:["object"];this._eventSubList=s(this._eventSubList,function(g){g.eventSub.detach()},h,d.Array(arguments),!0)},_detach:function(i){this._eventSubList=s(this._eventSubList,function(u){u.eventSub.detach()},["eventSub"],[i],!0)},_clearEvents:function(){for(var i=this._eventSubList,u=0;u<i.length;++u)i[u].eventSub.detach();this._eventSubList=[]},destroy:function(){if(!this._destroyed){if(!this._eventSubList)throw new Error("Gizmo["+this._name+"] was never initialzed.  Missing _super?");this.fire("destroy"),this._destroy();var i=0;this._clearEvents(),this._eventSubList=[];var u=[];d.Array.each(this._anims,function(m){u.push(m)},this),d.Array.each(u,function(m){m.get("running")&&m.stop(!1),m.destroy()}),this._anims=null;for(var h=this._children;h.length>0;){var g=h[0];g._removeParent(),g.destroy()}this._children=null;var p=this._timers;for(i=0;i<p.length;++i){var f=p[i];f.cancel()}this._timers=null,this._el&&d.Lang.isFunction(this._el.remove)&&(this._el.remove(),this._el=null),this._destroyed=!0,this.destroyed=!0,this.fire("destroyed")}},_destroy:function(){},isDestroyed:function(){return this._destroyed},_setParent:function(i){this._parentGizmo=i},_removeParent:function(){this._parentGizmo&&(this._parentGizmo._removeChild(this),this._parentGizmo=null)},_addChild:function(i){this._children&&(i._setParent&&i._setParent(this),this._children.push(i))},_removeChild:function(i){this._children.splice(this._children.indexOf(i),1)},_getChildren:function(){return this._children},_anim:function(i){if(!this._destroyed){if(!i.node)throw new Error("Gizmo["+this._name+"]: Animation must specify a node!");var u;return i.node.ancestor("body",!0)?i.node._node?(u=new d.Anim(i),u.on("end",function(h){this._removeAnim(u)},this),this._anims.push(u)):u=new d.Anim:u=new d.Anim,u}},_removeAnim:function(i){var u=this._anims.indexOf(i);u!==-1&&this._anims.splice(u,1)},_trace:function(i){for(var u=this.getEvent(i),h=u.getSubs(),g=[],p=function(_,v){if(_.context&&_.context.getName)g.push(_.context.getName());else{var E={};E[_.fn.name]=_.fn.toString(),g.push(E)}},f=0;f<h.length;++f){var m=h[f];d.Object.each(m,p)}this.fire(i)},_later:function(i,u,h,g,p){if(!this._destroyed){h=h||this;var f=d.later(i,h,u,g,p);return this._timers.push(f),f}},_cb:function(i){var u=d.bind(function(){if(!this._destroyed)return i.apply(this,arguments)},this);return u}}),d.augment(d.Squarespace.Gizmo,d.EventTarget),d.Squarespace.ZombieGizmo=Class.extend(d.Squarespace.Gizmo,{_name:"ZombieGizmo",_events:{resurrect:{},resurrected:{}},initialize:function(i){this._super(i)},destroy:function(){this._super(),this.resurrect()},resurrect:function(){this.fire("resurrect"),this._initState(),this.fire("resurrected")}})},"1.0",{requires:["array-extras","event-custom","node"]})},82100:function(){YUI.add("squarespace-global-event-bubbler",function(c){c.namespace("Squarespace");var b=["layout-engine:block-menu-search-query-change","layout-engine:block-menu-search-query-enter","layout-engine:open-block-menu","layout-engine:insert-block","layout-engine:delete-block"];c.Squarespace.GlobalEventBubbler=c.Base.create("global-event-bubbler",c.Base,[],{publishEventsForBubbling:function(){c.Array.forEach(b,function(t){c.Global.publish(t)})},bubbleEventsToGlobal:function(){c.Array.forEach(b,function(t){c.Global.publish(t),c.SQS.LayoutEngine.Events.on(t,function(l){c.Global.fire(t,l)},c)})}},{})},"1.0",{requires:["base","@sqs/layout-engine/events"]})},868908:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-google-domains-consent-service",function(d){d.namespace("Squarespace");var o="https://oauth.{appDomain}/auth/google-web-hosting/consent-initialize?domain={domain}&websiteId={websiteId}&userId={userId}",e="https://oauth.{appDomain}/auth/google-web-hosting/domain-consent-initialize?domain={domain}&requestId={requestId}",a="https://oauth.{appDomain}/auth/google-web-hosting/list-domains-consent-initialize?requestIdentifier={identifier}",r="https://oauth.{appDomain}/auth/google-web-hosting/signup-consent-initialize?domain={domain}&userId={userId}";d.Squarespace.GoogleDomainsConsentService=new(d.Base.create("domainConsentService",d.Base,[],{initializer:function(){this._openWindows={},this._messageCallbacks={},this._messageEventHandler=window.addEventListener("message",d.bind(this._routeMessage,this))},destructor:function(){window.removeEventListener("message",this._messageEventHandler),this._endMonitor()},getConsent:function(s,n,i){return d.Squarespace.Promises.create(function(u,h){this._messageCallbacks[s]=function(g){g.consentGranted?u(g):h()},this._openConsentWindow(s,n,i)},this)},getConsentForNewSite:function(s,n){return d.Squarespace.Promises.create(function(i,u){this._messageCallbacks[s]=function(h){h.consentGranted?i(h):u()},this._openSignupConsentWindow(s,n)},this)},getConsentForDomain:function(s){return d.Squarespace.Promises.create(function(n,i){this._messageCallbacks[s]=function(u){u.consentGranted?n(u):i(u)},this._openListConsentWindow(s)},this)},getDomainOnlyConsent:function(s,n,i){return d.Squarespace.Promises.create(function(u,h){this._messageCallbacks[s]=function(g){g.consentGranted?u(g):h()},this._openDomainConsentOnlyWindow(s,n,i)},this)},getConsentForList:function(){return d.Squarespace.Promises.create(function(s,n){var i=d.guid();this._messageCallbacks[i]=function(u){u.consentGranted?s(u):n()},this._openListConsentWindow(i)},this)},_routeMessage:function(s){var n=s.data.domain;if(d.Lang.isString(n)){var i=this._messageCallbacks[n];d.Lang.isFunction(i)&&(i.call(this,s.data),delete this._messageCallbacks[n])}},_registerOpenWindow:function(s,n){d.Object.size(this._openWindows)<=0&&this._beginMonitor(),this._openWindows[s]=n},_unregisterOpenWindow:function(s){delete this._openWindows[s],d.Object.size(this._openWindows)<=0&&this._endMonitor()},_endMonitor:function(){this._monitor&&this._monitor.cancel()},_beginMonitor:function(){this._monitor=d.later(300,this,function(){var s=[];d.Object.each(this._openWindows,function(n,i){n.closed&&(this._routeMessage({data:{domain:i,consentGranted:!1}}),s.push(i))},this),d.Array.each(s,this._unregisterOpenWindow,this)},null,!0)},_openListConsentWindow:function(s){var n=d.Lang.sub(a,{identifier:s,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(n,s)},_openDomainConsentOnlyWindow:function(s,n,i){var u=d.Lang.sub(e,{requestId:n,domain:s,websiteId:i,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(u,s)},_openConsentWindow:function(s,n,i){var u=d.Lang.sub(o,{domain:s,appDomain:Static.SQUARESPACE_CONTEXT.appDomain,websiteId:i||"",userId:n});this._openConsentPopup(u,s)},_openSignupConsentWindow:function(s,n){var i=d.Lang.sub(r,{domain:s,userId:n,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(i,s)},_openConsentPopup:function(s,n){var i=window.open(s,(0,l.t)("Google Domains Consent",null,{project:"scripts-v6-root"}),"status=0,width=1020,height=520");this._registerOpenWindow(n,i)}}))},"1.0",{requires:["base","promise","squarespace-promises"]})},51422:function(c,b,t){"use strict";var l=t(714487),d=t(408549),o=t(931229),e=t.n(o),a=t(507229),r=t.n(a),s=t(29865),n=t.n(s),i=t(100666),u=t(681275),h=t(456903);YUI.add("squarespace-google-domains-utils",function(g){g.namespace("Squarespace.GoogleDomains");var p=function(A){g.Lang.isString(A)||(A="");var I=new g.Squarespace.Lightbox({disableNormalClose:!0,clickAnywhereToExit:!1,content:'<div class="bigtext"><div class="title">'+(0,l.t)("Failed to add domain",null,{project:"scripts-v6-root"})+'</div><div class="description">'+A+'</div><div class="buttons"></div></div>',margin:100,noHeightConstrain:!0});I.show()};g.Squarespace.GoogleDomains.initialize=function(){var A=g.Squarespace.GoogleDomains.getGoogleDomainUrlParams();g.Lang.isNull(A.userId)||g.Lang.isNull(A.domainName)||g.Squarespace.SessionStorage.saveSessionData("googleDomain",A,new Date().addDays(7))},g.Squarespace.GoogleDomains.getGoogleDomainUrlParams=function(){var A=g.QueryString.parse(window.location.search.substr(1));return{userId:A.userId||null,domainName:A.domainName||null}},g.Squarespace.GoogleDomains.getGoogleDomainSessionData=function(){return g.Squarespace.SessionStorage.getSessionData("googleDomain")},g.Squarespace.GoogleDomains.isGoogleDomainFlow=function(){var A=this.getGoogleDomainSessionData();return!!(g.Lang.isObject(A)||(A=g.Squarespace.GoogleDomains.getGoogleDomainUrlParams(),!g.Lang.isNull(A.userId)&&!g.Lang.isNull(A.domainName)))},g.Squarespace.GoogleDomains.showConfirmMessage=function(A,I,D){var T=g.Squarespace.GoogleDomains.getGoogleDomainUrlParams(),B=T.userId,N="http://"+window.location.hostname,P=new g.Squarespace.Lightbox({disableNormalClose:!0,clickAnywhereToExit:!1,content:(0,d.Z)('<div class="bigtext"><div class="title">'+(0,l.t)("Connect Domain: {domainName}",null,{project:"scripts-v6-root"})+'</div><div class="description">'+(0,l.t)("Your site <b>{url}</b> will be available at <b>http://www.{domainName}</b>.",null,{project:"scripts-v6-root"})+'</div><div class="buttons"><input type="button" class="login-button" name="login" value="'+(0,l.t)("Connect Domain",null,{project:"scripts-v6-root"})+'"/></div></div>',{domainName:I,url:N}),noHeightConstrain:!0});P.show(),P.getContentEl().on("click",function(){P.hide(),D(A,B,I)})},g.Squarespace.GoogleDomains.startConsentFlow=function(A,I,D){var T=new g.Squarespace.Spinner({color:"light",size:"large",render:g.one(".spinner-wrapper")});return T.spin(),g.Squarespace.GoogleDomainsConsentService.getConsent(D,I,A).then(function(B){var N=new g.Squarespace.Domains.Models.Domain({name:D,type:e().LINKED,providerId:r().GOOGLE,providerData:{userId:B.userId,accessToken:B.accessToken,subId:B.subId,email:B.email}});N.save({},function(P){if(T.stop(),g.Lang.isValue(P)){p(P.responseJSON.message);return}window.location="/config"})},function(B){T.stop(),p(B)})};function f(A){var I="http://"+window.location.hostname;return new g.Squarespace.Lightbox({disableNormalClose:!0,clickAnywhereToExit:!1,content:(0,d.Z)('<div class="bigtext"><div class="title">'+(0,l.t)("Connect Domain: {domainName}",null,{project:"scripts-v6-root"})+'</div><div class="description">'+(0,l.t)("Your site <b>{url}</b> will be available at <b>http://www.{domainName}</b>.",null,{project:"scripts-v6-root"})+'</div><div class="buttons"><input type="button" class="login-button" name="login" value="'+(0,l.t)("Connect Domain",null,{project:"scripts-v6-root"})+'"/></div></div>',{domainName:A,url:I}),noHeightConstrain:!0})}function m(){var A=new g.Squarespace.Spinner({color:"light",size:"large",render:g.one(".spinner-wrapper")});return A.spin(),A}function _(A){return i.Z.createLinkedDomain({name:A,providerId:r().GOOGLE,strategyId:n().DOMAINCONNECT})}function v(){return window.open("","_blank","status=0,width=780,height=785,left=400,top=400")}function E(A){return new g.Promise(function(I){var D=setInterval(function(){A.closed&&(clearInterval(D),I())},1e3)})}function S(A){return h.default.get("/api/domain-connect/"+A.id)}function y(A){A.closed||A.close()}function C(A,I){return new g.Promise(function(D){I.location=A.url,D()})}function O(A,I){var D;return _(A).then(function(T){return D=T.data,u.Z.getStrategy(D.name)}).then(function(T){var B=T.data;return C(B,I)}).then(function(){return E(I)}).then(function(){return S(D)}).then(function(T){if(!T.data.success)throw"Google reported an error."})}g.Squarespace.GoogleDomains.googleInitiatedDomainConnect=function(A){var I=f(A);I.show(),I.getContentEl().on("click",function(){I.hide();var D=m(),T=v();O(A,T).then(function(){window.location="/config"}).catch(function(B){y(T),D.stop(),p(B)})})}},"1.0",{requires:["querystring","squarespace-domains-models-domain","squarespace-google-domains-consent-service","squarespace-session-storage","squarespace-spinner","squarespace-ui-base","squarespace-util"]})},62321:function(){YUI.add("squarespace-hb-compare",function(c){c.Handlebars.registerHelper("if_eq",function(b,t){return b===t.hash.compare?t.fn(this):t.inverse(this)}),c.Handlebars.registerHelper("unless_eq",function(b,t){return b===t.hash.compare?t.inverse(this):t.fn(this)}),c.Handlebars.registerHelper("if_gt",function(b,t){return b>t.hash.compare?t.fn(this):t.inverse(this)}),c.Handlebars.registerHelper("unless_gt",function(b,t){return b>t.hash.compare?t.inverse(this):t.fn(this)}),c.Handlebars.registerHelper("if_lt",function(b,t){return b<t.hash.compare?t.fn(this):t.inverse(this)}),c.Handlebars.registerHelper("unless_lt",function(b,t){return b<t.hash.compare?t.inverse(this):t.fn(this)}),c.Handlebars.registerHelper("if_gteq",function(b,t){return b>=t.hash.compare?t.fn(this):t.inverse(this)}),c.Handlebars.registerHelper("unless_gteq",function(b,t){return b>=t.hash.compare?t.inverse(this):t.fn(this)}),c.Handlebars.registerHelper("if_lteq",function(b,t){return b<=t.hash.compare?t.fn(this):t.inverse(this)}),c.Handlebars.registerHelper("unless_lteq",function(b,t){return b<=t.hash.compare?t.inverse(this):t.fn(this)})},"1.0",{requires:["handlebars-base"]})},180207:function(){YUI.add("squarespace-hb-product-price-string",function(c){c.Handlebars.registerHelper("price-string",function(b){return new c.Handlebars.SafeString(c.Squarespace.Commerce.priceString(b))})},"1.0",{requires:["handlebars-base","squarespace-commerce-utils"]})},712815:function(c,b,t){"use strict";var l=t(296923),d=t.n(l);YUI.add("squarespace-hb-product-types",function(o){o.Handlebars.registerHelper("product-physical",function(e){var a=this.structuredContent;return a.productType===d().PHYSICAL?e.fn(this):e.inverse(this)}),o.Handlebars.registerHelper("product-digital",function(e){var a=this.structuredContent;return a.productType===d().DIGITAL?e.fn(this):e.inverse(this)}),o.Handlebars.registerHelper("product-service",function(e){var a=this.structuredContent;return a.productType===d().SERVICE?e.fn(this):e.inverse(this)}),o.Handlebars.registerHelper("product-variants",function(e){var a=this.structuredContent,r=a.productType;return r===d().PHYSICAL||r===d().SERVICE?e.fn(this):e.inverse(this)})},"1.0",{requires:["handlebars-base","squarespace-util"]})},950609:function(c,b,t){"use strict";var l=t(994336),d=t.n(l),o=t(331280);YUI.add("squarespace-help",function(e){e.Squarespace.Help={isTutorialCompleted:function(){var a=e.merge(e.Squarespace.Context.getInstance().get("websiteSettings").get("tutorialsCompleted")),r=a.welcome||a["damask-guide"]||a["commerce-guide"]||a.onboarding;return d().get("skipOnboarding")?!0:d().get("alwaysShowGuide")?!1:a?(0,o.rM)()?!0:(0,o.a9)()?r:(0,o.wN)()?d().get("showParkingPageOnboarding")!=="true":r:!1}}},"1.0",{requires:["squarespace-util"]})},397302:function(c,b,t){"use strict";var l=t(916661);YUI.add("squarespace-image-loader",function(d){d.namespace("Squarespace"),d.Squarespace.Loader=d.Base.create("Loader",d.Base,[],{initializer:function(){this.get("frames")&&this._processFrames(),this.get("img")&&this._processImages()},_processFrames:function(){this._getNodeList("frames").each(function(o){o.getAttribute("data-embed")&&o.resizeToParent({scale:"contain",sizeOnly:!0})})},_processImages:function(){this._getNodeList("img").each(function(o){var e=!1;o.loader&&(e=!0),o.plug(d.Squarespace.Loader2,this.get("loaderOptions")||{}),e&&o.fire("refresh")},this)},_getNodeList:function(o){var e=this.get(o);return d.Lang.isString(e)?d.all(e):e.size?e:new d.NodeList(e)}},{ATTRS:{frames:{},img:{},loaderOptions:{}}}),d.Squarespace.Loader2=d.Base.create("Loader2",d.Plugin.Base,[],{initializer:function(){var o=this.get("host"),e=100,a=0;function r(){!o.inDoc()&&++a<e?d.later(10,this,r):this.load()}r.call(this),this.on("refresh",this.load,this),this.afterHostEvent("refresh",this.load,this)},_isInvalidHost:function(){return this.get("host").getDOMNode()===null||!this.get("host").inDoc()},load:function(){var o=this.get("host");if(o.getAttribute("src")&&o.get("complete")&&o.fire("loaded"),this.afterHostEvent("load",function(){this._isInvalidHost()||(this.get("host").removeClass("loading").addClass("loaded"),this.get("host").fire("loaded"))},this),this.afterHostEvent("loaded",function(){this.get("host").removeClass("loading").addClass("loaded")},this),!this._isInvalidHost()){var e=this.get("load"),a=l.Z.isSevenOne()&&d.config.win.ImageLoader.loadLazy&&e!=="viewport",r=(a?d.config.win.ImageLoader.loadLazy:d.config.win.ImageLoader.load).bind(d.config.win.ImageLoader),s=o.getDOMNode();!s||!s.ownerDocument.defaultView||r(s,d.merge(this.getAttrs(),{load:e}))}},getDimensionForValue:function(o,e){var a=this.get("host").getDOMNode(),r=d.config.win.ImageLoader._getDataFromNode(a);return d.config.win.ImageLoader.getDimensionForValue(o,e,r)},getBareElement:function(){var o=this.get("host"),e=d.Node.create("<img />");return e.setAttribute("data-src",o.getAttribute("data-src")),e.setAttribute("data-image-dimensions",o.getAttribute("data-image-dimensions")),e.setAttribute("data-image-focal-point",o.getAttribute("data-image-focal-point")),e.setAttribute("alt",o.getAttribute("alt")),e},destructor:function(){}},{NS:"loader",ATTRS:{stretch:{},load:{value:!0},source:{},fixedRatio:{value:!1},fitAlignment:{},fit:{value:!1,setter:function(o){o&&this.set("mode","fit")}},fill:{value:!1,setter:function(o){o&&this.set("mode","fill")}},focalPoint:{setter:function(o){return d.config.win.ImageLoader.load(this.get("host").getDOMNode(),{focalPoint:o.x+","+o.y}),o}},mode:{validator:function(o){return["fit","fill","none",null].indexOf(o)!==-1}},refreshOnResize:{value:!1},useBgImage:{validator:function(o){return d.Lang.isBoolean(o)}}}}),d.Squarespace.ImageLoadManager=new(d.Base.create("ImageLoadManager",d.Base,[],{refreshAll:function(){d.all("img[data-src]").each(function(o){o.fire("refresh")})}})),d.augment(d.Node,Class.create({refresh:function(){this.fire("refresh")}}))},"1.0",{requires:["base","node","plugin"]})},966113:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-image-picker",function(d){var o="loading",e="imageURL",a="width",r="height",s=".error",n=".instructions",i=".images",u=".preview",h=".label.width",g=".label.height",p=".ruler",f=p+".width",m=p+".height",_=".dimensions",v=_+" span",E=".size-visualizer",S=".cancel",y=".confirm",C=".prev",O=".next",A=".pagination",I=d.namespace("Squarespace.Widgets").ImagePicker=d.Base.create("imagePicker",d.Squarespace.Widgets.DataWidget,[],{initializer:function(){this._displayedImages={},this.plug(d.Plugin.WidgetAnim)},destructor:function(){d.Squarespace.EscManager.removeTarget(this)},renderUI:function(){I.superclass.renderUI.call(this);var D=this.get("boundingBox"),T=this.get("strings");D.one(n).setContent(T.instructions),D.one(S).setContent(T.cancelButton),D.one(y).setContent(T.confirmButton),D.one(C).setContent("Previous"),D.one(O).setContent("Next");var B=D.one(s);B.hide(),B.setContent(T.loadFailed),this._updateEscapeManager(),this._sizeVisualizerNode=D.one(E),this._hideSizeVisualizer()},bindUI:function(){I.superclass.bindUI.call(this);var D=this.get("id");this.on(D+"|dataStateChange",this._uiSyncDataState,this),this.after(D+"|imageURLsChange",this.syncUI,this),this.after(D+"|visibleChange",this._updateEscapeManager,this),this.after(D+"|pageChange",this.syncUI,this);var T=this.get("boundingBox");T.on(D+"|click",this._selectImage,this),T.plug(d.Squarespace.Plugin.ScrollLock),T.one(i).on(D+"|mouseleave",this._hideSizeVisualizer,this),T.one(S).on(D+"|click",function(B){this.hide(),this.fire("cancel")},this),T.one(y).on(D+"|click",function(B){this.hide(),this.fire("submit")},this),T.one(O).on(D+"|click",function(B){B.halt(),this.set("page",this.get("page")+1)},this),T.one(C).on(D+"|click",function(B){B.halt(),this.set("page",this.get("page")-1)},this)},syncUI:function(){I.superclass.syncUI.call(this);var D=this.get("contentBox"),T=D.one(i),B=this.get("imageURLs").slice(0),N=this.get("strings");if(this.get("sizeInfo")?D.addClass("has-size-info"):D.removeClass("has-size-info"),this.get("paginate")){var P=this.get("pageSize"),x=this.get("page")*P,R=x+P,w=Math.min(R,B.length),k=D.one(".prev");this.get("page")<=0?k.addClass("hidden"):k.removeClass("hidden");var q=D.one(O);x+P>=B.length?q.addClass("hidden"):q.removeClass("hidden"),B=B.slice(x,w)}var F=D.one(y);this.get("multiSelect")?F.show():F.hide(),d.Object.each(this._displayedImages,function(j,X){if(B.indexOf(X)===-1){var J=T.one('[data-id="'+this._displayedImages[X]+'"]');J&&(J.ancestor(".preview",!0).remove(!0),this._displayedImages[X]=null)}},this),d.Array.each(B,function(j){var X=this.get("id");if(!this._displayedImages[j]){this.get("dataState")!==this.getProperty("DATA_STATES").LOADED&&this.setLoadedState();var J=d.Node.create(this.getProperty("IMAGE_TEMPLATE")),Q=J.one("img");J.setData(e,j),T.appendChild(J),this.get("multiSelect")&&this.get("selectedImageURLs").indexOf(j)!==-1&&J.addClass("selected"),Q.onceAfter(X+"|load",function(Ae){var Je=Ae.target.get("naturalHeight"),ke=Ae.target.get("naturalHeight");J.one(v).setContent(d.substitute(N.imageDimensions,{height:ke,width:Je})),J.setData(a,Je),J.setData(r,ke);var Fe=J.one(".image-underlay"),Ie=Fe.width(),ht=Fe.height(),me=Ae.target.get("width"),Ee=Ae.target.get("height"),Se=2;J.one(".image-wrapper").setStyles({width:me+Se*2,height:Ee+Se*2,top:Math.floor(ht/2-Ee/2),left:Math.floor(Ie/2-me/2)}),Q.setStyles({top:null,left:null,position:"static"}),J.on(X+"|mouseenter",this._updateSizeVisualizer,this)},this),Q.plug(d.Squarespace.Loader2,{source:j,fit:!0});var ie=Q.loader,ce=J.one(_),pe=function(){ie.get("loading")?ce.addClass(o):ce.removeClass(o)};pe(),ie.after(X+"|loadingChange",pe,this);var ye=Q.getAttribute("data-id");ye||(ye=d.guid(),Q.setAttribute("data-id",ye)),this._displayedImages[j]=ye}},this),B.length>0&&D.one(s).hide();var z=D.one(A);this.get("paginate")?z.show():z.hide()},_uiSyncDataState:function(D){var T=D?D.newVal:this.get("dataState"),B=this.getProperty("DATA_STATES"),N=this.get("contentBox").one(s),P=this.get("imageURLs"),x=this.get("strings");switch(T){case B.LOADED:P.length===0&&(N.setContent(x.noImages),N.show());break;case B.LOAD_FAILED:N.setContent(x.loadFailed),N.show();break;default:N.hide();break}},_isImageWrapper:function(D){return!!D.getData(e)},_selectImage:function(D){D.preventDefault(),D.stopPropagation();var T=D.target.ancestor(this._isImageWrapper,!0),B=this.get("contentBox").one(i),N=this.get("selectedImageURLs"),P=this.get("multiSelect");if(!T){P&&(this._set("selectedImageURLs",[]),this.get("contentBox").all(".preview.selected").each(function(R){R.removeClass("selected")}));return}var x=T.getData(e);P?N.length>=this.get("maxSelected")?new d.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Too Many Images",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("You have selected the maximum number of images allowed. Please remove an image before selecting another.",null,{project:"scripts-v6-root"})}):(T.hasClass("selected")?N=d.Array.filter(N,function(R){return R!==x}):N.push(x),T.toggleClass("selected"),this._set("selectedImageURLs",N)):(T.addClass("selected"),B.all(u).removeClass("selected"),this._set("selectedImageURL",x)),this.get("hideOnSelect")&&this.hide()},_updateSizeVisualizer:function(D){if(this._sizeVisualizerNode){var T=D.target.ancestor(this._isImageWrapper,!0),B=T.getData(a),N=T.getData(r),P=this._sizeVisualizerNode.one(h),x=this._sizeVisualizerNode.one(g);P.setContent(B+"px"),x.setContent(N+"px"),P.setStyle("left",B-38),x.setStyle("top",N-20),this._sizeVisualizerNode.show(),this._sizeVisualizerNode.one(f).setStyle("width",B),this._sizeVisualizerNode.one(m).setStyle("height",N)}},_hideSizeVisualizer:function(){this._sizeVisualizerNode&&this._sizeVisualizerNode.hide()},_updateEscapeManager:function(){this.get("visible")?d.Squarespace.EscManager.addTarget(this):d.Squarespace.EscManager.removeTarget(this)}},{CSS_PREFIX:"sqs-image-picker",HANDLEBARS_TEMPLATE:"image-picker.html",IMAGE_TEMPLATE:'<div class="preview"><div class="image-underlay"><div class="dimensions"><span></span></div><div class="image-wrapper"><img /></div></div></div>',ATTRS:{visible:{value:!1},strings:{value:{instructions:(0,l.t)("Select an Image",null,{project:"scripts-v6-root"}),cancelButton:(0,l.t)("Cancel",null,{project:"scripts-v6-root"}),loadFailed:(0,l.t)("Unable to load images, please check the URL and try again later.",null,{project:"scripts-v6-root"}),noImages:(0,l.t)("No images available.",null,{project:"scripts-v6-root"}),imageDimensions:(0,l.t)("{width} x {height}",null,{project:"scripts-v6-root"}),confirmButton:(0,l.t)("Confirm",null,{project:"scripts-v6-root"})}},imageURLs:{value:[],validator:d.Lang.isArray},selectedImageURL:{value:null,readOnly:!0},selectedImageURLs:{value:[],readOnly:!0},hideOnSelect:{value:!0},multiSelect:{value:!1},maxSelected:{value:Number.MAX_VALUE,validator:d.Lang.isNumber},paginate:{value:!1},pageSize:{value:25},page:{value:0,validatore:d.Lang.isNumber},sizeInfo:{value:!0}}})},"1.0",{requires:["base","plugin","squarespace-async-task-synchronizer","squarespace-escmanager","squarespace-image","squarespace-image-loader","squarespace-image-picker-template","squarespace-plugin-scroll-lock","squarespace-ui-base","squarespace-widgets-alert","squarespace-widgets-data-widget","widget","widget-anim","widget-parent"]})},808574:function(){YUI.add("squarespace-image-picker-has-download-request",function(c){c.namespace("Squarespace.ImagePicker.DownloadRequest"),c.Squarespace.ImagePicker.HasDownloadRequest=c.Base.create("HasDownloadRequest",c.Plugin.Base,[],{initializer:function(){this.publish("downloadRequest",{emitFacade:!0,bubbles:!0})},requestDownload:function(b){return c.instanceOf(b,c.Squarespace.ImagePicker.DownloadRequest)||(b=new c.Squarespace.ImagePicker.DownloadRequest(b)),c.Squarespace.Promises.create(function(t,l){this.fire("downloadRequest",{request:b}),t()},this)}})},"1.0",{requires:["base","plugin","squarespace-image-picker-download-request","squarespace-promises"]})},614312:function(){YUI.add("squarespace-image-picker-download-request",function(c){c.namespace("Squarespace.ImagePicker").DownloadRequest=c.Base.create("DownloadRequest",c.Model,[],{},{ATTRS:{url:{value:null},licensedAssetPreview:{value:null},licensedAssetId:{value:null},isPurchased:{value:!1}}})},"1.0",{requires:["base","model"]})},669413:function(c,b,t){"use strict";var l=t(174161),d=t(233284),o=t(435769),e=t(626606),a=t(61796),r=t(970671);YUI.add("squarespace-image-picker-selector",function(s){s.namespace("Squarespace.ImagePicker.Widgets"),s.Squarespace.ImagePicker.Widgets.Selector=s.Base.create("ImagePickerSelector",s.Squarespace.Widgets.SSWidget,[s.Squarespace.ImagePicker.HasDownloadRequest],{initializer:function(){this.publish("assetsPicked",{emitFacade:!0,bubbles:!0}),this.publish("bulkAssetsPicked",{emitFacade:!1,bubbles:!0})},destructor:function(){this.set("isShow",!1),d.unmountComponentAtNode(this.get("contentBox").getDOMNode()),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},bindUI:function(){this.on("isShowChange",this._onShowChange,this)},show:function(){this.set("isShow",!0)},hide:function(){this.set("isShow",!1),this.timeout=setTimeout((function(){this.get("isShow")||d.unmountComponentAtNode(this.get("contentBox").getDOMNode())}).bind(this),300)},_onShowChange:function(n){d.render(l.createElement(r.Z,null,l.createElement(o.Z,{onChooseAssetIds:(function(i){this.hide(),i.assets.length>1?this.fire("bulkAssetsPicked",i.assets):this.fire("assetsPicked",i.assetIds)}).bind(this),onChooseImageUrl:(function(i){this.hide(),i.data.licensedAssetId?this._firePurchasedPreviewRequest(i.data):this._fireDownloadRequest(i.data)}).bind(this),loadOnInit:!0,assetDestination:this.get("imageDestination"),isOpen:n.newVal,onRequestClose:this.hide.bind(this),upperLimitForCollection:1/0})),this.get("contentBox").getDOMNode())},_fireDownloadRequest:function(n){n.licensedAssetPreview=new s.Squarespace.LicensedAssets.Models.Preview(n.licensedAssetPreview),this.requestDownload(n)},_firePurchasedPreviewRequest:function(n){this.requestDownload(n).then((function(){e.Z.finishLoadingImage(),this.hide()}).bind(this)).catch(function(){a.Z.showError()})}},{CSS_PREFIX:"sqs-image-picker-selector",ATTRS:{isShow:{value:!1},imageDestination:{}}})},"1.0",{requires:["base","squarespace-image-picker-has-download-request","squarespace-licensed-assets-preview","widget-parent"]})},656397:function(c,b,t){"use strict";var l=t(868796),d=t(966522),o=t.n(d);YUI.add("squarespace-image-zoom",function(e){e.namespace("Squarespace");var a=e.Squarespace.ImageZoom=e.Base.create("image-zoom",e.Base,[],{initializer:function(){this._shouldInitialize()&&this.get("host")&&this._initializeZoom()},destructor:function(){if(this._shouldInitialize()){var r=this.get("zoomedNode");r&&r.remove(!0),this.get("host").removeClass(a.CSS_PREFIX).removeClass(a.CSS_PREFIX+"--behavior-"+this.get("behavior")),this.get("dropzone").setStyle("position","").removeClass(a.CSS_PREFIX+"-dropzone"),this._zoomTriggerEvent&&this._zoomTriggerEvent.detach(),this._mouseMoveEvent&&this._mouseMoveEvent.detach(),this._mouseOutEvent&&this._mouseOutEvent.detach(),this._resizeEvent&&this._resizeEvent.detach(),this._zoomTriggerEvent=null,this._mouseMoveEvent=null,this._mouseOutEvent=null,this._resizeEvent=null}},_bindUI:function(){var r=this.get("host");this._zoomTriggerEvent=r.on(this.get("behavior"),this._toggleZoom,this),this._mouseMoveEvent=r.on("mousemove",this._trackMovement,this),this._mouseOutEvent=r.on("mouseout",this._zoomOut,this),this._resizeEvent=e.one(window).on("resize",this._refresh,this)},_shouldInitialize:function(){return!e.UA.mobile&&window.Modernizr.csstransforms},_initializeZoom:function(){var r=this.get("host"),s=r.one("img"),n=this.get("dropzone");r.addClass(a.CSS_PREFIX),r.addClass(a.CSS_PREFIX+"--behavior-"+this.get("behavior")),n.addClass(a.CSS_PREFIX+"-dropzone"),n.getStyle("position")==="static"&&n.setStyle("position","relative"),s.getAttribute("src")?(this._appendZoomedNode(),this._bindUI()):s.once("load",function(){this._appendZoomedNode(),this._bindUI()},this)},_appendZoomedNode:function(){var r=this.get("host").one("img"),s=r.getAttribute("data-src");if(!s)return null;var n=r.getAttribute("data-image-dimensions");n||(n=r.get("clientWidth")+"x"+r.get("clientHeight"));var i=r.getAttribute("data-image-focal-point");i||(i="0.5,0.5");var u=e.Node.create('<div class="'+a.CSS_PREFIX+'-duplicate"><img src="'+s+"?format="+this._getSquarespaceSizeForWidth()+'" data-image-dimensions="'+n+'" aria-hidden="true" data-image-focal-point="'+i+'"></div>');u.setStyle("transform","scale("+this.get("zoom")+")"),u.one("img").plug(e.Squarespace.Loader2,{load:!0,mode:"fill"}),this.set("zoomedNode",u),this.get("dropzone").append(u)},_refresh:function(){var r=this.get("host").one("img").getAttribute("data-src"),s=this.get("zoomedNode").one("img");s.setAttribute("src",r+"?format="+this._getSquarespaceSizeForWidth()),s.fire("refresh")},_toggleZoom:function(r){this.get("_isZoomedIn")?this._zoomOut():this._zoomIn(r),r.stopPropagation()},_zoomIn:function(r){this.get("host").addClass("is-zoomed"),this.set("_isZoomedIn",!0),this._trackMovement(r)},_zoomOut:function(){this.get("host").removeClass("is-zoomed"),this.set("_isZoomedIn",!1)},_trackMovement:function(r){if(this.get("_isZoomedIn")){var s=Math.max((r.pageX-this.get("host").getX())/this.get("host").get("clientWidth")*100,0),n=Math.max((r.pageY-this.get("host").getY())/this.get("host").get("clientHeight")*100,0);this.get("zoomedNode").setStyle("transformOrigin",s+"% "+n+"%")}},_getSquarespaceSizeForWidth:function(){var r=this.get("host").one("img").get("clientWidth");return l.zU(r*this.get("zoom"))}},{CSS_PREFIX:"sqs-image-zoom",ATTRS:{host:{value:null,validator:function(r){var s=e.one(r);return e.instanceOf(s,e.Node)&&s.one("img")&&s.all("img").size()<2},writeOnce:!0},dropzone:{valueFn:function(){return this.get("host")},validator:function(r){return e.instanceOf(e.one(r),e.Node)},writeOnce:!0},behavior:{value:"hover",validator:function(r){return!(r!=="hover"&&r!=="click")},writeOnce:!0},zoom:{value:1.5,validator:function(r){return typeof r!="number"||r<=1||r>5,!0},writeOnce:!0},_isZoomedIn:{value:!1}}})},"1.0",{requires:["base","event","node","squarespace-image-loader","yui-base"]})},43398:function(){YUI.add("squarespace-image",function(c){var b=c.Squarespace.Image=c.Base.create("image",c.Base,[],{initializer:function(t){this._initImg(),this.get("loadOnSrcChange")&&this.load()},bindUI:function(){var t=this.get("id");this.after(t+"|srcChange",function(l){this._initImg(),this.get("loadOnSrcChange")&&this.load()},this)},destructor:function(){this._img&&(this._img.onload=null,this._img.onerror=null,this._img=null),c.detach(this.get("id")+"|*")},load:function(){var t=this.get("src");if(t)this._img.src=this.get("src");else throw new Error(this.name+": This image has no URL specified.")},_initImg:function(){this._setAttrs({loadComplete:b.ATTRS.loadComplete.value,loadFailed:b.ATTRS.loadFailed.value});var t=this._img=new Image;t.onload=c.bind(function(l){this._set("loadComplete",!0)},this),t.onerror=c.bind(function(l){this._set("loadFailed",!0),this._set("loadComplete",!0)},this)},_getWidth:function(){return this._getDim("width")},_getHeight:function(){return this._getDim("height")},_getDim:function(t){var l=null;return this._img&&this.get("loadComplete")&&!this.get("loadFailed")&&(l=this._img[t]),l}},{ATTRS:{src:{value:null},width:{value:null,readOnly:!0,getter:"_getWidth"},height:{value:null,readOnly:!0,getter:"_getHeight"},loadOnSrcChange:{value:!1},loadFailed:{value:!1,readOnly:!0},loadComplete:{value:!1,readOnly:!0}}})},"1.0",{requires:["base","base-build"]})},461370:function(c,b,t){"use strict";var l=t(640695),d=t(230121),o=t(979825),e=t(948265),a=t.n(e),r=t(985913);YUI.add("squarespace-job-manager",function(s){s.namespace("Squarespace"),s.Squarespace.JobManager=s.Base.create("JobManager",s.Base,[],{initializer:function(){this.recentJobs={},this.currentJobs={},this.completedJobs={},this.failedJobs={},this.publish("opened"),this.publish("started"),this.publish("completed"),this.publish("failed"),s.config.win.Static.SQUARESPACE_CONTEXT?this.processExistingJobs(s.config.win.Static.SQUARESPACE_CONTEXT):l.Z.addActionListener(d.Z.BOOTSTRAP,this.processExistingJobs.bind(this)),l.Z.addActionListener(o.Z.LOAD_SUCCESS,this.onJobsLoad.bind(this)),l.Z.addActionListener(o.Z.DELETE,this.removeJobById.bind(this))},getSize:function(){return s.Object.keys(this.currentJobs).length},completedJobsCount:function(){return s.Object.keys(this.completedJobs).length},failedJobsCount:function(){return s.Object.keys(this.failedJobs).length},onJobsLoad:function(n){n.forEach((function(i){var u=this.findInQueue(i.id);u&&setTimeout(function(){u.update(i)},0)}).bind(this))},onJobStart:function(n){var i=n.target;this.fire("started",{job:i})},onJobSuccess:function(n){this._processSucessfulJob(n.target)},_processSucessfulJob:function(n){var i=n.get("id");this.completedJobs[i]=n,this.removeFromQueue(i),this.fire("completed",{job:n})},onJobFailure:function(n){var i=n.target,u=i.get("id");this.failedJobs[u]=i,this.removeFromQueue(u),this.fire("failed",{job:i})},onJobOpen:function(n){var i=n.target,u=i.get("id");this.currentJobs[u]=i,this.fire("opened",{job:i})},removeFromQueue:function(n){s.Object.hasKey(this.currentJobs,n)&&delete this.currentJobs[n]},findJob:function(n){for(var i=[this.findInQueue,this.findCompletedJob,this.findFailedJob],u=0;u<i.length;++u){var h=i[u],g=h.call(this,n);if(g)return g}return null},findInQueue:function(n){return this.currentJobs[n]},findCompletedJob:function(n){return this.completedJobs[n]},findFailedJob:function(n){return this.failedJobs[n]},resolveIds:function(n){for(var i=[],u=0;u<n.length;++u){var h=this.findJob(n[u]);h&&i.push(h)}return i},addJob:function(n){this._subscribeToJob(n),this.currentJobs[n.get("id")]=n,o.Z.monitor(n.get("id"))},_subscribeToJob:function(n){n.after("start",this.onJobStart,this),n.after("complete",this.onJobSuccess,this),n.after("failure",this.onJobFailure,this),n.after("open",this.onJobOpen,this)},totalJobs:function(){return[this.completedJobs,this.failedJobs,this.currentJobs].map(function(n){return s.Object.keys(n).length}).reduce(function(n,i){return n+i})},allJobs:function(){return s.Object.values(s.merge(this.completedJobs,this.failedJobs,this.currentJobs,this.recentJobs))},removeJobById:function(n){delete this.completedJobs[n],delete this.failedJobs[n],delete this.currentJobs[n],delete this.recentJobs[n]},processExistingJobs:function(n){n&&n.pendingJobs&&n.pendingJobs.forEach(function(i){var u=this._jobDataToJob(i);this.currentJobs[u.get("id")]=u,this._subscribeToJob(u),u.get("status")===a().SUCCESS&&this._processSucessfulJob(u)},this),n&&n.recentJobs&&n.recentJobs.forEach(function(i){var u=this._jobDataToJob(i);this.recentJobs[u.get("id")]=u},this)},_jobDataToJob:function(n){var i=new s.Squarespace.Job(s.merge(n,{messages:n.messages?n.messages.map(function(u){return new s.Squarespace.JobMessage(u)}):[]}));return i}}),(0,r.F)(s)?s.config.win.Static.JOB_MANAGER=s.Squarespace.Damask.ContextGlobals.fromTop("Y.config.win.top.Static.JOB_MANAGER"):s.config.win.Static.JOB_MANAGER=new s.Squarespace.JobManager},"1.0",{requires:["base","squarespace-beforeunload","squarespace-damask-context-globals","squarespace-jobs","squarespace-util"]})},939268:function(c,b,t){"use strict";var l=t(714487),d=t(767042),o=t.n(d),e=t(948265),a=t.n(e);YUI.add("squarespace-jobs",function(r){r.namespace("Squarespace");var s={TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5},n=r.Squarespace.JobMessage=r.Base.create("jobMessage",r.Base,[],{},{ATTRS:{level:{validator:r.Lang.isNumber},date:{validator:r.Lang.isDate},message:{validator:r.Lang.isString,value:""}}});r.Squarespace.Job=r.Base.create("job",r.Model,[],{initializer:function(i){this.set("data",r.merge({},i.data)),this.publish("open",{defaultFn:this.onOpen,context:this}),this.publish("start",{defaultFn:this.onStart,context:this}),this.publish("complete",{defaultFn:this.onComplete,context:this}),this.publish("failure",{defaultFn:this.onFailure,context:this}),this.publish("update",{defaultFn:this.onUpdate,context:this})},getData:function(){return{name:this.get("name"),id:this.get("id"),status:this.get("status"),type:this.get("type"),data:this.get("data")}},update:function(i){var u=i.status,h=this.get("data"),g=this.get("status");i.data&&(h=this.set("data",r.merge({},i.data)).get("data")),i.childJobs&&this.set("childJobs",i.childJobs),h&&h.update&&this.fire("update",this);var p=i.update?i.update.numFailed:0;if(u!==a().SUCCESS&&this.getItemCount()<=this.getCompletedItemCount()+this.get("failedItems")+p&&(u=a().SUCCESS),this.set("progress",i.progress),i.messages&&this.set("messages",i.messages.map(function(f){return new n(r.merge(f,{date:new Date(f.date)}))})),this.set("addedOn",new Date(i.addedOn)),u!==g)switch(u&&this.set("status",u),this.set("statusMessage",i.statusMessage),g=this.get("status"),g!==a().WAITING&&!this.get("started")&&(this.fire("start",this),this.set("started",!0)),g){case a().SUCCESS:this.fire("complete",this);break;case a().FAILURE:this.fire("failure",this);break}},setCollection:function(i){this.set("collection",i)},getItemCount:function(){return 1},getCompletedItemCount:function(){return this.get("status")===a().SUCCESS?1:0},opened:function(){this.fire("open",this)},onOpen:function(){},onComplete:function(){},onStart:function(){},onFailure:function(){}},{ATTRS:{name:{value:""},progress:{value:0,validator:r.Lang.isNumber},lastError:{value:"",readOnly:!0,getter:function(){if(!r.Lang.isValue(this.get("messages")))return null;var i=this.get("messages").filter(function(u){return u.get("level")===s.ERROR}).sort(function(u,h){return r.DataType.Date.isGreater(h.get("date"),u.get("date"))});return i.length?i.shift().get("message"):"Error"}},collection:{setter:function(i){var u=this.get("data");i&&(u.collectionId=i.getId())}},status:{value:a().WAITING},statusMessage:{value:"",setter:function(i){return i||""}},messages:{validator:r.Lang.isArray},updateData:{value:null},data:{},failedItems:{value:0},type:{},childJobs:{value:[],validator:r.Lang.isArray},addedOn:{setter:function(i){return r.Lang.isDate(i)?i:new Date(i)}}}}),r.Squarespace.ImageProcessingJob=r.Base.create("imageProcessingJob",r.Squarespace.Job,[],{setNumFiles:function(i){var u=this.get("data");u.numFiles=i},setBatchId:function(i){var u=this.get("data");u.batchId=i},getItemCount:function(){return this.get("data").numFiles},getCompletedItemCount:function(){return this.processedItems?this.processedItems.length:0},getProcessedItems:function(){return this.processedItems.slice(0)},onUpdate:function(){var i=this.get("data");i&&i.update&&i.update.newProcessedItems&&(this.processedItems||(this.processedItems=[]),Array.prototype.push.apply(this.processedItems,i.update.newProcessedItems))},incrementFailedItemCount:function(){var i=this.get("failedItems");this.set("failedItems",i+1)}},{ATTRS:{type:{value:o().IMAGE_PROCESSING},started:{value:!1}}}),r.Squarespace.AudioProcessingJob=r.Base.create("AudioProcessingJob",r.Squarespace.ImageProcessingJob,[],{},{ATTRS:{type:o().AUDIO_PROCESSING}}),r.Squarespace.WordpressExportJob=r.Base.create("wordpressExportJob",r.Squarespace.Job,[],{onComplete:function(){r.Squarespace.Navigation.ListUtils.refreshNavigationList(),new r.Squarespace.Widgets.Information({"strings.title":(0,l.t)("Export Complete",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("Your export has finished and your content can be downloaded in the Import / Export panel.",null,{project:"scripts-v6-root"})})}},{ATTRS:{type:{value:o().EXPORTING_WORDPRESS}}}),r.Squarespace.ImportingJob=r.Base.create("importingJob",r.Squarespace.Job,[],{onComplete:function(){r.Squarespace.Navigation.ListUtils.refreshNavigationList(),new r.Squarespace.Widgets.Information({"strings.title":(0,l.t)("Import Complete",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("Your import has finished and your content can be found in the Content Library.",null,{project:"scripts-v6-root"})})}},{ATTRS:{type:{value:o().IMPORTING}}}),r.Squarespace.StatsMigrationJob=r.Base.create("statsMigrationJob",r.Squarespace.Job,[],{onComplete:function(){new r.Squarespace.Widgets.Information({"strings.title":(0,l.t)("Migration Complete",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("Your legacy statistics have been migrated and analysis has begun.",null,{project:"scripts-v6-root"})})}},{ATTRS:{type:{value:o().STATS_MIGRATION}}}),r.Squarespace.PushJob=r.Base.create("pushJob",r.Squarespace.Job,[],{},{ATTRS:{type:{value:o().PUSH}}}),r.Squarespace.CollectionSyncJob=r.Base.create("collectionSyncJob",r.Squarespace.Job,[],{onComplete:function(){new r.Squarespace.Widgets.Information({"strings.title":this.get("strings.successTitle"),"strings.message":this.get("strings.successMessage")}),this._setCollectionSyncState(!1);var i=r.Squarespace.ACTIVE_MANAGER;i.getActiveCollectionManager&&i.getActiveCollection().getId()===this.get("data.collectionId")&&i.getActiveCollectionManager().refreshPage()},onFailure:function(){new r.Squarespace.Widgets.Information({"strings.title":this.get("strings.failureTitle"),"strings.message":this.get("strings.failureMessage")}),this._setCollectionSyncState(!1)},_setCollectionSyncState:function(i){var u=this.get("data.collectionId"),h=r.Squarespace.ContentCollectionCache.getById(u);h&&h.set("synchronizing",i)}},{ATTRS:{strings:{value:{successTitle:(0,l.t)("Sync Completed",null,{project:"scripts-v6-root"}),successMessage:(0,l.t)("Collection sync completed. Your images may still be processing. This can take several minutes to complete.",null,{project:"scripts-v6-root"}),failureTitle:(0,l.t)("Sync Failed",null,{project:"scripts-v6-root"}),failureMessage:(0,l.t)("Collection sync failed.",null,{project:"scripts-v6-root"})}},type:{value:o().COLLECTION_SYNC}}})},"1.0",{requires:["base","datatype-date-math","event","model","squarespace-models-content-collection","squarespace-navigation-list-utils","squarespace-upsell-product-violations","squarespace-util","squarespace-widgets-alert","squarespace-widgets-confirmation","squarespace-widgets-information"]})},277597:function(c,b,t){"use strict";var l=t(153088),d=t(714487),o=t(174161),e=t(233284),a=t(620172);YUI.add("layout-engine/block-label-premium",function(r){var s=r.namespace("SQS.LayoutEngine.Block").PremiumLabel=r.Base.create("blockLabelPremium",r.Widget,[r.WidgetChild],{renderUI:function(){s.superclass.renderUI.call(this),e.render(o.createElement("div",null,this.get("label")+" ",o.createElement(a.default,{premiumFeatureLabel:(0,d.t)("Premium Feature",null,{project:"scripts-v6.layout-engine"})})),this.get("contentBox").getDOMNode())}},{CSS_PREFIX:"sqs-blocklabel",NS:"blockLabel",ATTRS:{label:{value:null},meta:{value:{}}}})},"1.0",{requires:["base","widget","widget-child"]})},987720:function(c,b,t){"use strict";var l=t(104495);YUI.add("squarespace-layout-insert-block-menu-section",function(d){d.Squarespace.Layout.InsertBlockMenuSection=d.Base.create("layoutInsertBlockMenuSection",d.Squarespace.Layout.InsertBlockMenuWebApp,[],{},{CSS_PREFIX:"sqs-layout-insert-block-menu",ATTRS:{editMode:{readOnly:!0,value:l.Z.SECTION}}})},"1.0",{requires:["base","@sqs/layout-engine/edit-controller-base","squarespace-layout-insert-block-menu-web-app"]})},146589:function(c,b,t){"use strict";var l=t(714487),d=t(625392),o=t.n(d),e=t(273564),a=t(637533),r=t(489152),s=t(673951),n=t(104495),i=o()(function(){return(0,r.Z)({isFluidEngine:!1,isSquarespaceApp:s.Ay})});YUI.add("squarespace-layout-insert-block-menu-web-app",function(u){u.namespace("Squarespace.Layout");var h=u.Squarespace.Layout.InsertBlockMenuWebApp=u.Base.create("layoutInsertBlockMenu",u.SQS.LayoutEngine.Layout.InsertBlockMenuWebBase,[u.Squarespace.Mixins.EventRegistrar],{_onFocusedChange:function(g){g.newVal||this.hide()},_getInsertableBlockItems:function(){var g=this.get("editMode")===n.Z.WEB_APP,p=[e.featureGateBlockItems({isMainContentSection:g}),a.e];return p.reduce(function(f,m){return m(f)},i())},_getBlockLabelInstance:function(g,p){return g.premium?u.SQS.LayoutEngine.Block.PremiumLabel:h.superclass._getBlockLabelInstance.call(this,g)}},{CSS_PREFIX:"sqs-layout-insert-block-menu",ATTRS:{editMode:{readOnly:!0,value:n.Z.WEB_APP},blockIcon:{valueFn:function(){return u.Squarespace.Block.Icon}},zIndexBase:{getter:function(){return u.Squarespace.DIALOG_ZINDEX_BASE}},searchPlaceHolderText:{value:(0,l.t)("Search Content Blocks",null,{project:"scripts-v6.layout-engine"})}}})},"1.0",{requires:["base","@sqs/layout-engine/events","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/layout-insert-block-menu-web-base","layout-engine/block-label-premium","squarespace-layout-renderable-blocks-web-app","squarespace-block-icon"]})},567930:function(c,b,t){"use strict";var l=t(101246),d=t(104495),o=t(688239),e=t.n(o);YUI.add("squarespace-layout-engine-edit-controller",function(a){a.namespace("Squarespace.LayoutEngine");var r=a.Squarespace.LayoutEngine.EditController=a.Base.create("editcontroller",a.SQS.LayoutEngine.EditControllerWebApp,[a.Squarespace.GlobalEventBubbler],{initializer:function(){r.superclass.initializer.call(this),this.bubbleEventsToGlobal()}},{ATTRS:{renderableBlockSet:{value:[{ctor:a.Squarespace.Layout.RenderableBlocksWebApp,editMode:d.Z.WEB_APP},{ctor:a.Squarespace.Layout.RenderableBlocksWebApp,editMode:d.Z.SECTION}]},insertMenuSet:{valueFn:function(){return[{ctor:a.Squarespace.Layout.InsertBlockMenuWebApp,editMode:d.Z.WEB_APP,editController:this},{ctor:a.Squarespace.Layout.InsertBlockMenuSection,editMode:d.Z.SECTION,editController:this}]}}}});r.getInstance=function(){var s;return function(){return a.Lang.isValue(s)||(s=new r,a.on("beforeunload",function(){s.get("destroyed")||s.destroy(),s=null})),s}}(),(0,l.r)()&&a.use("@sqs/layout-engine/tablet-dd-overrides")},"1.0",{requires:["base","@sqs/layout-engine/edit-controller-base","@sqs/layout-engine/edit-controller-web-app","squarespace-global-event-bubbler","squarespace-layout-insert-block-menu-section","squarespace-layout-insert-block-menu-web-app","squarespace-layout-renderable-blocks-web-app"]})},414562:function(c,b,t){"use strict";var l=t(734526),d=t(723796),o=t(436715),e=t(675641),a=t(784874),r=t(135118),s=t(714551),n=t(414998),i=t(714487);function u(g){const p={...l.Z.BlockTypeKeys,...e.Z};return{[p[a.Z.HTML]]:{value:{id:"html",ctor:g.Squarespace.Block.Html,label:n.A[a.Z.HTML],tags:[(0,i.t)("text",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("blockquote",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("copy",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("file",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("link",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("word",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.MARKDOWN]]:{value:{id:"markdown",ctor:g.Squarespace.Block.Markdown,label:n.A[a.Z.MARKDOWN],tags:[(0,i.t)("markdown",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("code",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("html",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("word",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.QUOTE]]:{value:{id:"quote",ctor:g.Squarespace.Block.Quote,label:n.A[a.Z.QUOTE],tags:[(0,i.t)("quote",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("text",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("blockquote",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.IMAGE]]:{value:{id:"image",ctor:g.Squarespace.Block.Image,label:n.A[a.Z.IMAGE],tags:[(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("banner",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("gif",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("photo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("picture",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("PNG",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("thumbnail",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.GALLERY]]:{value:{id:"gallery",ctor:g.Squarespace.Block.Gallery,label:n.A[a.Z.GALLERY],tags:[(0,i.t)("gallery",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("animation",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("grid",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("images",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("photo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("picture",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("slider",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("slideshow",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("stacked",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.WEBSITE_COMPONENT]]:{value:{id:"websiteComponent",ctor:g.Squarespace.Block.WebsiteComponent,label:"",tags:[]}},[p[a.Z.VIDEO]]:{value:{id:"video",ctor:g.Squarespace.Block.Video,label:n.A[a.Z.VIDEO],tags:[(0,i.t)("video",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("animoto",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("embed",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("movie",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("vimeo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("wistia",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("youtube",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.AUDIO]]:{value:{id:"audio",ctor:g.Squarespace.Block.Audio,label:n.A[a.Z.AUDIO],tags:[(0,i.t)("audio",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("album",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("music",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("player",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("song",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("track",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.EMBED]]:{value:{id:"embed",ctor:g.Squarespace.Block.Embed,label:n.A[a.Z.EMBED],tags:[(0,i.t)("embed",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("3rd party",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("code",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("html",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("iframe",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("video",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.PRODUCT]]:{value:{id:"product",ctor:g.Squarespace.Block.Product,label:n.A[a.Z.PRODUCT],tags:[(0,i.t)("product",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("digital",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("items",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("options",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("physical",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("service",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("variable",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("variants",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("money",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.AMAZON]]:{value:{id:"amazon",ctor:g.Squarespace.Block.Amazon,label:n.A[a.Z.AMAZON],tags:[(0,i.t)("amazon",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("product",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("sell",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("money",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.DONATION]]:{value:{id:"donation",ctor:g.Squarespace.Block.Donation,label:n.A[a.Z.DONATION],tags:[(0,i.t)("donation",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("charity",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("donate",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("payment",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("money",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.MEMBER_AREA]]:{value:{id:"member-area",ctor:g.Squarespace.Block.MemberArea,label:n.A[a.Z.MEMBER_AREA],tags:[(0,i.t)("member",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("area",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("product",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("money",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.PRICING_PLAN]]:{value:{id:"pricing-plan",ctor:g.Squarespace.Block.PricingPlan,label:n.A[a.Z.PRICING_PLAN],tags:[(0,i.t)("course",null,{project:"scripts-v6.layout-engine",notes:"Course to learn something, a lesson."}),(0,i.t)("courses",null,{project:"scripts-v6.layout-engine",notes:"Courses to learn something, lessons."}),(0,i.t)("member",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("members",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("membership,",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("memberships",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("site",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("sites",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("video",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("videos",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("library",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("demand",null,{project:"scripts-v6.layout-engine",notes:"Like in video on demand"}),(0,i.t)("lesson",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("lessons",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("digital",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("product",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("signup",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("sign-up",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("pricing",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("plan",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("tier",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("tiers",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("bundle",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("bundles",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("digital product",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("digital products",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("member area",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("member areas",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("member site",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("member sites",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("video library",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("video libraries",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("video on demand",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("vod",null,{project:"scripts-v6.layout-engine",notes:"Abbreviation for video on demand"}),(0,i.t)("digital product block",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("digital products block",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("member area block",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("member areas block",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("sign up block",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.FORM]]:{value:{id:"form",ctor:g.Squarespace.Block.Form,label:n.A[a.Z.FORM],tags:[(0,i.t)("form",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("contact",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("mailing list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("survey",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.NEWSLETTER]]:{value:{id:"newsletter",ctor:g.Squarespace.Block.Newsletter,label:n.A[a.Z.NEWSLETTER],tags:[(0,i.t)("newsletter",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("blog",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("mailing list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("subscribe",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("subscription",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.MAP]]:{value:{id:"map",ctor:g.Squarespace.Block.Map,label:n.A[a.Z.MAP],tags:[(0,i.t)("map",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("address",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("geography",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("location",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("google maps",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.CODE]]:{value:{id:"code",ctor:g.Squarespace.Block.Code,label:n.A[a.Z.CODE],tags:[(0,i.t)("code",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("css",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("embed",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("html",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("iframe",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("javascript",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("script",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.MENU]]:{value:{id:"menu",ctor:g.Squarespace.Block.Menu,label:n.A[a.Z.MENU],tags:[(0,i.t)("menu",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("chompy",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("food",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("restaurant",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.LINK]]:{value:{id:"link",ctor:g.Squarespace.Block.Link,label:n.A[a.Z.LINK],tags:[(0,i.t)("link",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.CALENDAR]]:{value:{id:"calendar",ctor:g.Squarespace.Block.Calendar,label:n.A[a.Z.CALENDAR],tags:[(0,i.t)("calendar",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("archive",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("dates",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("events",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("shows",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("schedule",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.OPENTABLE]]:{value:{id:"opentable",ctor:g.Squarespace.Block.OpenTable,label:n.A[a.Z.OPENTABLE],tags:[(0,i.t)("opentable",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("dates",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("food",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("reservations",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("restaurant",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.OPENTABLE_V2]]:{value:{id:"opentable",ctor:g.Squarespace.Block.OpenTableV2,label:n.A[a.Z.OPENTABLE_V2],tags:[(0,i.t)("opentable",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("dates",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("food",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("reservations",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("restaurant",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.TOCK]]:{value:{id:"tock-reservations",ctor:g.Squarespace.Block.Tock,label:n.A[a.Z.TOCK],defaultContentModel:{blockSelectorSource:"tock-reservations"},tags:[(0,i.t)("reservations",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("restaurant",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("events",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("food",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("meal",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("delivery",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("takeout",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("resy",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("seamless",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("opentable",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("caviar",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("tick",null,{project:"scripts-v6.layout-engine",notes:'The "tick" in "tick tock"'}),(0,i.t)("tock",null,{project:"scripts-v6.layout-engine",notes:"Tock the company"})]}},[p[r.Z.TOCK_RESERVATIONS]]:{value:{id:"tock-reservations",ctor:g.Squarespace.Block.Tock,label:n.A[r.Z.TOCK_RESERVATIONS],defaultContentModel:{blockSelectorSource:"tock-reservations"},tags:[(0,i.t)("reservations",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("restaurant",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("events",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("food",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("meal",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("delivery",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("takeout",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("resy",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("seamless",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("opentable",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("caviar",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("tick",null,{project:"scripts-v6.layout-engine",notes:'The "tick" in "tick tock"'}),(0,i.t)("tock",null,{project:"scripts-v6.layout-engine",notes:"Tock the company"})]}},[p[r.Z.TOCK_EVENTS]]:{value:{id:"tock-events",ctor:g.Squarespace.Block.Tock,label:n.A[r.Z.TOCK_EVENTS],defaultContentModel:{blockSelectorSource:"tock-events"},tags:[(0,i.t)("reservations",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("restaurant",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("events",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("food",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("resy",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("seamless",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("opentable",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("eventbrite",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("meetup",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("tick",null,{project:"scripts-v6.layout-engine",notes:'The "tick" in "tick tock"'}),(0,i.t)("tock",null,{project:"scripts-v6.layout-engine",notes:"Tock the company"})]}},[p[a.Z.TOURDATES]]:{value:{id:"tourdates",ctor:g.Squarespace.Block.TourDates,label:n.A[a.Z.TOURDATES],tags:[(0,i.t)("bandsintown",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("artists",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("concerts",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("events",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("music",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("shows",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("tours",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.SPACER]]:{value:{id:"spacer",ctor:g.Squarespace.Block.Spacer,label:n.A[a.Z.SPACER],tags:[(0,i.t)("spacer",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("area",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("blank",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("structure",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("room",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.HORIZONTAL_RULE]]:{value:{id:"horizontal-rule",ctor:g.Squarespace.Block.HorizontalRule,label:n.A[a.Z.HORIZONTAL_RULE],tags:[(0,i.t)("line",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("divider",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("horizontal rule",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("hr",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.SEARCH]]:{value:{id:"search",ctor:g.Squarespace.Block.Search,label:n.A[a.Z.SEARCH],tags:[(0,i.t)("search",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("bing",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("google search",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("lookup",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("look up",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("find",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.COLLECTION_LINK]]:{value:{id:"collection-link",ctor:g.Squarespace.Block.CollectionLink,label:n.A[a.Z.COLLECTION_LINK],tags:[(0,i.t)("content link",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("navigation",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("page",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.BUTTON]]:{value:{id:"button",ctor:g.Squarespace.Block.Button,label:n.A[a.Z.BUTTON],tags:[(0,i.t)("button",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("link",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("call to action",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.SUMMARY]]:{value:{id:"summary",ctor:g.Squarespace.Block.Summary,label:n.A[a.Z.SUMMARY],tags:[(0,i.t)("summary",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("archive",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("collection",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("index",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("list",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.SUMMARY_V2]]:{value:{id:"summary-v2",ctor:g.Squarespace.Block.SummaryV2,label:n.A[a.Z.SUMMARY_V2],tags:[(0,i.t)("summary",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("archive",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("collection",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("index",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("list",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.TAGCLOUD]]:{value:{id:"tagcloud",ctor:g.Squarespace.Block.Tagcloud,label:n.A[a.Z.TAGCLOUD],tags:[(0,i.t)("tag cloud",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("category",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("taxonomy",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.POSTS_BY_TAG]]:{value:{id:"posts-by-tag",ctor:g.Squarespace.Block.PostsByTag,label:n.A[a.Z.POSTS_BY_TAG],tags:[(0,i.t)("tag list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("category",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.POSTS_BY_AUTHOR]]:{value:{id:"posts-by-author",ctor:g.Squarespace.Block.PostsByAuthor,label:n.A[a.Z.POSTS_BY_AUTHOR],tags:[(0,i.t)("author list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("people",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("contributors",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.POSTS_BY_CATEGORY]]:{value:{id:"posts-by-category",ctor:g.Squarespace.Block.PostsByCategory,label:n.A[a.Z.POSTS_BY_CATEGORY],tags:[(0,i.t)("category list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("tag",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("taxonomy",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.POSTS_BY_MONTH]]:{value:{id:"posts-by-month",ctor:g.Squarespace.Block.PostsByMonth,label:n.A[a.Z.POSTS_BY_MONTH],tags:[(0,i.t)("month list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("calendar",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("time",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.ARCHIVE]]:{value:{id:"archive",ctor:g.Squarespace.Block.Archive,label:n.A[a.Z.ARCHIVE],tags:[(0,i.t)("archive",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("index",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("tag list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("category",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("author list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("people",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("contributors",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("category list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("tag",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("taxonomy",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("month list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("year list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("calendar",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("time",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("group by month",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("group by year",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("group by author",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("group by tag",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("group by category",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("group",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("group by",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.TWITTER]]:{value:{id:"twitter",ctor:g.Squarespace.Block.Twitter,label:n.A[a.Z.TWITTER],tags:[(0,i.t)("twitter",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("feed",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("social",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.FOURSQUARE]]:{value:{id:"foursquare",ctor:g.Squarespace.Block.Foursquare,label:n.A[a.Z.FOURSQUARE],tags:[(0,i.t)("foursquare",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("social",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("location",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.SOCIAL_ACCOUNT_LINKS]]:{value:{id:"social-links",ctor:g.Squarespace.Block.SocialAccountLinks,label:n.A[a.Z.SOCIAL_ACCOUNT_LINKS],tags:[(0,i.t)("social links",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("facebook",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("twitter",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("google",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("tumblr",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("dropbox",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("foursquare",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("instagram",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("flickr",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("youtube",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("vimeo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("linkedin",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("dribble",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("pinterest",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("smugmug",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("500px",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("email",null,{project:"scripts-v6.layout-engine"}),"e-mail",(0,i.t)("github",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("soundcloud",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("spotify",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("itunes store",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("google play",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.SOCIAL_ACCOUNT_LINKS_V2]]:{value:{id:"social-links",ctor:g.Squarespace.Block.SocialAccountLinksV2,label:n.A[a.Z.SOCIAL_ACCOUNT_LINKS_V2],tags:[(0,i.t)("social links",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("facebook",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("twitter",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("google",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("tumblr",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("dropbox",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("foursquare",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("instagram",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("flickr",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("youtube",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("vimeo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("linkedin",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("dribble",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("pinterest",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("smugmug",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("500px",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("email",null,{project:"scripts-v6.layout-engine"}),"e-mail",(0,i.t)("github",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("soundcloud",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("spotify",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("itunes store",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("google play",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.RSS]]:{value:{id:"rss",ctor:g.Squarespace.Block.Rss,label:n.A[a.Z.RSS],tags:[(0,i.t)("rss",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("news feed",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("subscribe",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("subscription",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("rich site summary",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("really simple syndication",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.FIVEHUNDREDPIX]]:{value:{id:"fivehundredpix",ctor:g.Squarespace.Block.Fivehundredpix,label:n.A[a.Z.FIVEHUNDREDPIX],tags:[(0,i.t)("500px",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("photo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("picture",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.INSTAGRAM]]:{value:{id:"instagram",ctor:g.Squarespace.Block.Instagram,label:n.A[a.Z.INSTAGRAM],tags:[(0,i.t)("instagram",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("photo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("picture",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.FLICKR]]:{value:{id:"flickr",ctor:g.Squarespace.Block.Flickr,label:n.A[a.Z.FLICKR],tags:[(0,i.t)("flickr",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("photo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("picture",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.SOUNDCLOUD]]:{value:{id:"soundcloud",ctor:g.Squarespace.Block.SoundCloud,label:n.A[a.Z.SOUNDCLOUD],tags:[(0,i.t)("soundcloud",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("album",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("audio",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("media",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("music player",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("playlist",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.CHART]]:{value:{id:"chart",ctor:g.Squarespace.Block.Chart,label:n.A[a.Z.CHART],defaultContentModel:{chartType:r.Z.CHART_BAR.toString(),dataTable:g.ChartJS.getDefaultChartData(r.Z.CHART_BAR)},tags:[(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("chart",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("graph",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("data",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.CHART_BAR]]:{value:{id:"chart-bar",ctor:g.Squarespace.Block.Chart,label:n.A[r.Z.CHART_BAR],defaultContentModel:{chartType:r.Z.CHART_BAR.toString(),dataTable:g.ChartJS.getDefaultChartData(r.Z.CHART_BAR)},tags:[(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("chart",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("graph",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("data",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("bar",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.CHART_LINE]]:{value:{id:"chart-line",ctor:g.Squarespace.Block.Chart,label:n.A[r.Z.CHART_LINE],defaultContentModel:{chartType:r.Z.CHART_LINE.toString(),dataTable:g.ChartJS.getDefaultChartData(r.Z.CHART_LINE)},tags:[(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("chart",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("graph",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("data",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("line",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.CHART_PIE]]:{value:{id:"chart-pie",ctor:g.Squarespace.Block.Chart,label:n.A[r.Z.CHART_PIE],defaultContentModel:{chartType:r.Z.CHART_PIE.toString(),dataTable:g.ChartJS.getDefaultChartData(r.Z.CHART_PIE),legend:"visible"},tags:[(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("chart",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("graph",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("data",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("pie",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.GALLERY_SLIDESHOW]]:{value:{id:"gallery-slideshow",ctor:g.Squarespace.Block.Gallery,label:n.A[r.Z.GALLERY_SLIDESHOW],defaultContentModel:{design:"slideshow"},tags:[(0,i.t)("gallery",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("slideshow",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.GALLERY_CAROUSEL]]:{value:{id:"gallery-carousel",ctor:g.Squarespace.Block.Gallery,label:n.A[r.Z.GALLERY_CAROUSEL],defaultContentModel:{design:"slider",aspectRatio:s.Z.DEFAULT_SLIDER_ASPECT_RATIO},tags:[(0,i.t)("gallery",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("carousel",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("slider",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.GALLERY_GRID]]:{value:{id:"gallery-grid",ctor:g.Squarespace.Block.Gallery,label:n.A[r.Z.GALLERY_GRID],defaultContentModel:{design:"grid"},tags:[(0,i.t)("gallery",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("grid",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.GALLERY_STACK]]:{value:{id:"gallery-stack",ctor:g.Squarespace.Block.Gallery,label:n.A[r.Z.GALLERY_STACK],defaultContentModel:{design:"stacked"},tags:[(0,i.t)("gallery",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("stacked",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.SUMMARY_WALL]]:{value:{id:"summary-wall",ctor:g.Squarespace.Block.SummaryV2,label:n.A[r.Z.SUMMARY_WALL],defaultContentModel:{design:"autocolumns"},tags:[(0,i.t)("feature",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("summary",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("wall",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("autocolumns",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.SUMMARY_CAROUSEL]]:{value:{id:"summary-carousel",ctor:g.Squarespace.Block.SummaryV2,label:n.A[r.Z.SUMMARY_CAROUSEL],defaultContentModel:{design:"carousel"},tags:[(0,i.t)("feature",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("summary",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("carousel",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.SUMMARY_LIST]]:{value:{id:"summary-list",ctor:g.Squarespace.Block.SummaryV2,label:n.A[r.Z.SUMMARY_LIST],defaultContentModel:{design:"list"},tags:[(0,i.t)("feature",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("summary",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("list",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.SUMMARY_GRID]]:{value:{id:"summary-grid",ctor:g.Squarespace.Block.SummaryV2,label:n.A[r.Z.SUMMARY_GRID],defaultContentModel:{design:"autogrid"},tags:[(0,i.t)("feature",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("summary",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("autogrid",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("grid",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.ZOLA]]:{value:{id:"zola",ctor:g.Squarespace.Block.Zola,label:n.A[a.Z.ZOLA],tags:[(0,i.t)("zola",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("wedding registry",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("wedding",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("weddings",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("registry",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("gettin' hitched!",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.ACUITY]]:{value:{id:"acuity",ctor:g.Squarespace.Block.Acuity,label:n.A[a.Z.ACUITY],tags:["acuity",(0,i.t)("calendar",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("scheduling",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("appointment",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("appointments",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("booking",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("class",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("classes",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("yoga",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("salon",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.IMAGE_INLINE]]:{value:{id:"image-inline",ctor:g.Squarespace.Block.Image,label:n.A[r.Z.IMAGE_INLINE],defaultContentModel:{designLayout:"inline"},tags:[(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("inline",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("banner",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("gif",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("photo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("picture",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("PNG",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("thumbnail",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.IMAGE_POSTER]]:{value:{id:"image-poster",ctor:g.Squarespace.Block.Image,label:n.A[r.Z.IMAGE_POSTER],defaultContentModel:{designLayout:"poster"},tags:[(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("poster",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("banner",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("gif",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("photo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("picture",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("PNG",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("thumbnail",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.IMAGE_CARD]]:{value:{id:"image-card",ctor:g.Squarespace.Block.Image,label:n.A[r.Z.IMAGE_CARD],defaultContentModel:{designLayout:"card"},tags:[(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("card",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("banner",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("gif",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("photo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("picture",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("PNG",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("thumbnail",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.IMAGE_OVERLAP]]:{value:{id:"image-overlap",ctor:g.Squarespace.Block.Image,label:n.A[r.Z.IMAGE_OVERLAP],defaultContentModel:{designLayout:"overlap"},tags:[(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("overlap",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("banner",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("gif",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("photo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("picture",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("PNG",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("thumbnail",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.IMAGE_COLLAGE]]:{value:{id:"image-collage",ctor:g.Squarespace.Block.Image,label:n.A[r.Z.IMAGE_COLLAGE],defaultContentModel:{designLayout:"collage"},tags:[(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("collage",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("banner",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("gif",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("photo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("picture",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("PNG",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("thumbnail",null,{project:"scripts-v6.layout-engine"})]}},[p[r.Z.IMAGE_STACK]]:{value:{id:"image-stack",ctor:g.Squarespace.Block.Image,label:n.A[r.Z.IMAGE_STACK],defaultContentModel:{designLayout:"stack"},tags:[(0,i.t)("image",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("stack",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("banner",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("gif",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("photo",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("picture",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("PNG",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("thumbnail",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.ACCORDION]]:{value:{id:"accordion",ctor:g.Squarespace.Block.Accordion,label:n.A[a.Z.ACCORDION],tags:[(0,i.t)("accordion",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("list",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("faq",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("expand",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("expandable",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("collapse",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("collapsible",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("dropdown",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.MARQUEE]]:{value:{id:"marquee",ctor:g.Squarespace.Block.Marquee,label:n.A[a.Z.MARQUEE],tags:[(0,i.t)("marquee",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("scrolling",null,{project:"scripts-v6.layout-engine"}),(0,i.t)("rolling",null,{project:"scripts-v6.layout-engine"})]}},[p[a.Z.SHAPE]]:{value:{id:"shape",ctor:g.Squarespace.Block.Shape,label:n.A[a.Z.SHAPE],tags:[(0,i.t)("shape",null,{project:"scripts-v6.layout-engine"})]}}}}var h=d.Em.createLogger("le/renderable-blocks-web-app","red");YUI.add("squarespace-layout-renderable-blocks-web-app",function(g){var p=u(g),f={envInit:function(){g.Squarespace.SSWidget.prototype.initializer.apply(this),this._bindV6UIBlock()},_bindV6UIBlock:function(){g.after(this.removeBlock,this.trackEngagementRemoved,this),this.after("dropped",this.trackEngagementDropped,this)},trackEngagementRemoved:function(){this._trackInternal("remove")},trackEngagementDropped:function(){this._trackInternal("drop")},trackEngagementCreate:function(_){this._trackInternal("create",_)},_trackInternal:function(_,v){if(g.Lang.isString(_)&&_.length>0){var E="sidebar";g.config.win.Static.IN_BACKEND&&(g.one("body").hasClass("collection-type-page")?E="page":g.one("body").hasClass("dialog-open")&&(E="post")),v=g.merge({backend:g.config.win.Static.IN_BACKEND,region:E},v),g.Global.fire("Block:"+_,g.merge({blockType:l.Z.BlockTypeKeys[this.get("type")]},v))}},removeBlock:function(_){this.get("model").fire("remove");function v(){var y=this.get("boundingBox");!_&&y.ancestor(".sqs-block-remover")&&y.unwrap(),this.queueForDestruction();var C=this.get("editController");if(!(0,o.yR)(y.getDOMNode())){var O=y.ancestor(".sqs-layout");C.cleanGrids(O),C.alignInsertPoints(O)}}if(_)v.call(this);else{var E=g.Node.create('<div class="sqs-block-remover">');E.setStyle("overflow","hidden"),this.get("boundingBox").wrap(E);var S=new g.Anim({node:E,to:{height:0,opacity:0},duration:.5,easing:g.Easing.easeOutStrong});S.on("end",v,this),this._anims.add(S),S.run()}}};g.mix(g.SQS.LayoutEngine.Block.Base.prototype,g.Squarespace.SSWidget.prototype),g.mix(g.SQS.LayoutEngine.Block.Base.prototype,f,!0);var m={_syncEditableButtons:function(){var _=this.get("editingButtons");if(!_&&this._editingButtons)this._editingButtons.destroy();else if(_&&!this._editingButtons){var v=this.get("host"),E={blockName:this.get("blockName"),blockType:v.get("type"),host:v,includeEdit:this.get("includeEdit"),onEditClicked:this.onEditClicked,includeRemove:!this.get("lockedLayout"),render:v.get("boundingBox")};this._editingButtons=new g.Squarespace.Block.Editor.ButtonContainer(E),this._registerEvent(this._editingButtons.after("edit",function(){h("set editing true on block"),this.openEditor()},this),this._editingButtons.after("remove",g.bind(this.removeBlock,this)))}}};g.mix(g.SQS.LayoutEngine.Block.Editor.Base.prototype,m,!0),g.namespace("Squarespace.Layout").RenderableBlocksWebApp=g.Base.create("squarespace-layout-renderable-blocks",g.Base,[],{},{ATTRS:p})},"1.0",{requires:["base","@sqs/layout-engine/block-unrenderable","squarespace-block-accordion","squarespace-block-acuity","squarespace-block-amazon","squarespace-block-archive","squarespace-block-audio","squarespace-block-button","squarespace-block-calendar","squarespace-block-code","squarespace-block-collection-link","squarespace-block-donation","squarespace-block-editor-button-container","squarespace-block-embed","squarespace-block-soundcloud","squarespace-block-fivehundredpix","squarespace-block-flickr","squarespace-block-form","squarespace-block-foursquare","squarespace-block-gallery","squarespace-block-horizontal-rule","squarespace-block-html","squarespace-block-content-html-editor","squarespace-block-image","squarespace-block-instagram","squarespace-block-link","squarespace-block-map","squarespace-block-markdown","squarespace-block-marquee","squarespace-block-pricing-plan","squarespace-block-menu","squarespace-block-newsletter","squarespace-block-opentable","squarespace-block-opentable-v2","squarespace-block-posts-by","squarespace-block-product","squarespace-block-quote","squarespace-block-rss","squarespace-block-search","squarespace-block-shape","squarespace-block-social-account-links","squarespace-block-social-account-links-v2","squarespace-block-social-summary","squarespace-block-spacer","squarespace-block-summary","squarespace-block-summary-v2","squarespace-block-tagcloud","squarespace-block-tock","squarespace-block-tourdates","squarespace-block-twitter","squarespace-block-website-component","squarespace-block-video","squarespace-block-chart","squarespace-block-zola","squarespace-chartjs-helpers","squarespace-ss-widget"]})},475123:function(){YUI.add("squarespace-legacy-class",function(c){c.namespace("Squarespace.Legacy"),c.Squarespace.Legacy.Class={create:function(b){var t;return b.initialize?t=function(){this.initialize.apply(this,arguments)}:t=function(){},t.prototype=b,t.extend=function(l){return Class.extend(this,l)},t.specialize=function(l,d){var o=Class.specialize(this,l);return o._parent=d,o},t},extend:function(b,t){t.initialize||(t.initialize=b.prototype.initialize);var l=Class.create(t),d=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;for(var o in b.prototype)l.prototype[o]?typeof l.prototype[o]=="function"&&d.test(l.prototype[o])&&(l.prototype[o]=function(e,a){return function(){var r=this._super;this._super=b.prototype[e];var s=a.apply(this,arguments);return this._super=r,s}}(o,l.prototype[o])):l.prototype[o]=b.prototype[o];return l.prototype.superclass=b.prototype,l},specialize:function(b,t){var l=Class.extend(b,t);return new l}}},"1.0",{requires:[]})},162082:function(){YUI.add("squarespace-licensed-assets-manager",function(c){c.namespace("Squarespace.LicensedAssets");var b=c.Base.create("LicensedAssetsManager",c.Base,[],{buy:function(t){return c.Squarespace.Promises.create(function(l,d){c.Data.post({url:"/api/licensed-assets",data:t.toJSON(),success:l,failure:d,json:!0},this)},this)},getById:function(t){return c.Squarespace.Promises.create(function(l,d){c.Data.get({url:"/api/licensed-assets/"+t,success:l,failure:d},this)},this)},getDownloadUrl:function(t){return c.Squarespace.Promises.create(function(l,d){c.Data.get({url:"/api/licensed-assets/"+t.id+"/download-url",success:l,failure:d},this)},this)}});c.Squarespace.LicensedAssets.Manager=new b},"1.0",{requires:["base","squarespace-promises"]})},451535:function(c,b,t){"use strict";var l=t(854129),d=t.n(l);YUI.add("squarespace-licensed-assets-preview",function(o){o.namespace("Squarespace.LicensedAssets.Models"),o.Squarespace.LicensedAssets.Models.Preview=o.Base.create("LicensedAssetPreview",o.Model,[],{},{ATTRS:{assetId:{validator:o.Squarespace.AttrValidators.isNullOrString},source:{validator:o.Squarespace.AttrValidators.isValueIn(d())},artist:{validator:o.Lang.isString},collectionName:{validator:o.Lang.isString},collectionId:{validator:o.Squarespace.AttrValidators.isNullOrString},title:{validator:o.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},542413:function(c,b,t){"use strict";var l=t(174161),d=t(233284),o=t(776533),e=t(970671);YUI.add("squarespace-licensed-assets-details",function(a){a.namespace("Squarespace.LicensedAssets.Widgets");var r=a.Squarespace.LicensedAssets.Widgets.Details=a.Base.create("LicensedAssetDetails",a.Widget,[a.Squarespace.ImagePicker.HasDownloadRequest],{destructor:function(){this.get("rendered")&&d.unmountComponentAtNode(this.get("mountNode")),this._changeBinding&&this._changeBinding.detach()},renderUI:function(){r.superclass.renderUI.apply(this,arguments),this._renderLicenseImage()},bindUI:function(){r.superclass.bindUI.apply(this,arguments),this._changeBinding=this.after(["licensedAssetPreviewChange","isOpenChange","previewUrlChange"],this._renderLicenseImage.bind(this))},_renderLicenseImage:function(){var s=this.get("licensedAssetPreview");d.render(l.createElement(e.Z,null,l.createElement(o.Z,{assetPreview:s?s.toJSON():null,previewUrl:this.get("previewUrl"),isOpen:this.get("isOpen"),onRequestClose:this._close.bind(this),onPurchaseSuccess:this._onPurchaseSuccess.bind(this)})),this.get("mountNode"))},_close:function(){this.set("isOpen",!1)},_onPurchaseSuccess:function(s){this._close(),this.requestDownload({url:s.url,licensedAssetId:s.licensedAssetId,isPurchased:!0})}},{CONTENT_TEMPLATE:null,ATTRS:{isOpen:{validator:a.Squarespace.AttrValidators.isBoolean,value:!1},licensedAssetPreview:{value:null,validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.LicensedAssets.Models.Preview)},mountNode:{getter:function(){return this.get("contentBox").getDOMNode()},readOnly:!0},previewUrl:{validator:a.Squarespace.AttrValidators.isNullOrString,value:null}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-image-picker-has-download-request","squarespace-licensed-assets-preview","widget"]})},501521:function(c,b,t){"use strict";var l=t(829499),d=t(286465),o=t(714487),e=t(885878),a=t.n(e);YUI.add("squarespace-licensed-assets-preview-alert",function(r){r.namespace("Squarespace.LicensedAssets.Widgets");var s=r.Squarespace.LicensedAssets.Widgets.PreviewAlert=r.Base.create("LicensedAssetPreviewAlert",r.Squarespace.Widgets.SSWidget,[],{bindUI:function(){s.superclass.bindUI.call(this)},showPreviewAlert:function(){var n=l.default.getState().assetPurchasesByNonAdminsAllowed;n||d.Z.hasRole(a().ADMIN)?this._updateCopy((0,o.t)("This is an unlicensed preview image. To license it, use the link above. Watermarks will be removed after purchase.",null,{project:"scripts-v6.licensed-assets"})):this._updateCopy((0,o.t)("This is an unlicensed preview image. To license it, please speak with an admin. Watermarks will be removed after purchase.",null,{project:"scripts-v6.licensed-assets"})),this.get("contentBox").addClass("is-yellow"),this.show()},showLicensedAssetAlert:function(n){var i=(0,o.t)('This is a licensed image. Click <a href="{url}" target="_blank">here</a> to purchase further licensing options for print, social, and more.',{url:n},{project:"scripts-v6.licensed-assets"});this._updateCopy(i),this.get("contentBox").removeClass("is-yellow"),this.show()},_updateCopy:function(n){this.get("contentBox").one(".copy").set("innerHTML",n)}},{CSS_PREFIX:"sqs-licensed-asset-preview-alert",TEMPLATE:'<span class="copy"></span>'})},"1.0",{requires:["base","squarespace-ss-widget"]})},180115:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-licensed-assets-preview-bar",function(d){d.namespace("Squarespace.LicensedAssets.Widgets"),d.Squarespace.LicensedAssets.Widgets.PreviewBar=d.Base.create("LicensedAssetPreviewBar",d.Squarespace.Widgets.SSWidget,[],{},{CSS_PREFIX:"sqs-licensed-asset-preview-bar",TEMPLATE:"<span>"+(0,l.t)("This page is using preview images from Getty Images. Please purchase them to remove the watermark.",null,{project:"scripts-v6.licensed-assets"})+"</span>"})},"1.0",{requires:["base","squarespace-ss-widget"]})},287025:function(c,b,t){"use strict";var l=t(714487),d=t(659519);YUI.add("squarespace-licensed-assets-workflow",function(o){o.namespace("Squarespace.LicensedAssets"),o.Squarespace.LicensedAssets.Workflow=o.Base.create("LicensedAssetsWorkflow",o.Base,[o.Squarespace.ImagePicker.HasDownloadRequest],{initializer:function(){this._imagePicker=new o.Squarespace.ImagePicker.Widgets.Selector({imageDestination:this.get("imageDestination")}),this._previewDetails=new o.Squarespace.LicensedAssets.Widgets.Details,this.publish("assetsPicked",{emitFacade:!1,bubbles:!0}),this.publish("bulkAssetsPicked",{emitFacade:!1,bubbles:!0}),this._bindEvents()},destructor:function(){this._imagePicker.destroy(),this._previewDetails.destroy(),this._imagePicker=null,this._previewDetails=null},showImagePicker:function(){this._imagePicker.render(),this._imagePicker.show()},showPurchaseDetails:function(e,a){this._previewDetails.get("rendered")||this._previewDetails.render(),this._previewDetails.setAttrs({isOpen:!0,licensedAssetPreview:new o.Squarespace.LicensedAssets.Models.Preview(e),previewUrl:a})},showLicensingDetails:function(e,a){o.Squarespace.LicensedAssets.Manager.getById(e).then(function(r){new o.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("You Can Use This Image on Your Site",null,{project:"scripts-v6.licensed-assets"}),"strings.message":(0,l.t)('This is a licensed image. Click <a href="{url}" target="_blank">here</a> to purchase further licensing options for print, social, and more.',{url:r.originUrl},{project:"scripts-v6.licensed-assets"})})})},_bindEvents:function(){this._imagePicker.on("downloadRequest",this._fireDownloadRequest,this),this._imagePicker.on("assetsPicked",this._fireAssetsPicked,this),this._imagePicker.on("bulkAssetsPicked",this._fireBulkAssetsPicked,this),this._previewDetails.on("downloadRequest",this._fireDownloadRequest,this)},_fireDownloadRequest:function(e){e.target.hide(),e.stopPropagation(),this.requestDownload(e.request)},_fireAssetsPicked:function(e){this.fire("assetsPicked",e)},_fireBulkAssetsPicked:function(e){this.fire("bulkAssetsPicked",e)},_trackEvent:function(e,a,r){(0,d.Z)(e,{assetId:a,assetSource:r})}},{ATTRS:{imageDestination:{}}})},"1.0",{requires:["base","squarespace-image-picker-download-request","squarespace-image-picker-selector","squarespace-licensed-assets-details","squarespace-licensed-assets-manager","squarespace-licensed-assets-preview","squarespace-util","squarespace-widgets-alert"]})},385221:function(c,b,t){"use strict";var l=t(714487),d=t(413951),o=t(130399),e=t.n(o);YUI.add("squarespace-localities",function(a){var r={"":{title:(0,l.t)("Select a Country",null,{project:"scripts-v6-root"}),empty:!0}};a.namespace("Squarespace"),a.Squarespace.Localities={SPECIAL_KEYS:{DIVIDER:"DIVIDER"},COUNTRY_OPTIONS:a.merge(r,e()(d.Z,function(i){return{title:i}})),STATE_OPTIONS:{AL:{title:(0,l.t)("Alabama",null,{project:"scripts-v6-root"})},AK:{title:(0,l.t)("Alaska",null,{project:"scripts-v6-root"})},AZ:{title:(0,l.t)("Arizona",null,{project:"scripts-v6-root"})},AR:{title:(0,l.t)("Arkansas",null,{project:"scripts-v6-root"})},CA:{title:(0,l.t)("California",null,{project:"scripts-v6-root"})},CO:{title:(0,l.t)("Colorado",null,{project:"scripts-v6-root"})},CT:{title:(0,l.t)("Connecticut",null,{project:"scripts-v6-root"})},DE:{title:(0,l.t)("Delaware",null,{project:"scripts-v6-root"})},FL:{title:(0,l.t)("Florida",null,{project:"scripts-v6-root"})},GA:{title:(0,l.t)("Georgia",null,{project:"scripts-v6-root"})},HI:{title:(0,l.t)("Hawaii",null,{project:"scripts-v6-root"})},ID:{title:(0,l.t)("Idaho",null,{project:"scripts-v6-root"})},IL:{title:(0,l.t)("Illinois",null,{project:"scripts-v6-root"})},IN:{title:(0,l.t)("Indiana",null,{project:"scripts-v6-root"})},IA:{title:(0,l.t)("Iowa",null,{project:"scripts-v6-root"})},KS:{title:(0,l.t)("Kansas",null,{project:"scripts-v6-root"})},KY:{title:(0,l.t)("Kentucky",null,{project:"scripts-v6-root"})},LA:{title:(0,l.t)("Louisiana",null,{project:"scripts-v6-root"})},ME:{title:(0,l.t)("Maine",null,{project:"scripts-v6-root"})},MD:{title:(0,l.t)("Maryland",null,{project:"scripts-v6-root"})},MA:{title:(0,l.t)("Massachusetts",null,{project:"scripts-v6-root"})},MI:{title:(0,l.t)("Michigan",null,{project:"scripts-v6-root"})},MN:{title:(0,l.t)("Minnesota",null,{project:"scripts-v6-root"})},MS:{title:(0,l.t)("Mississippi",null,{project:"scripts-v6-root"})},MO:{title:(0,l.t)("Missouri",null,{project:"scripts-v6-root"})},MT:{title:(0,l.t)("Montana",null,{project:"scripts-v6-root"})},NE:{title:(0,l.t)("Nebraska",null,{project:"scripts-v6-root"})},NV:{title:(0,l.t)("Nevada",null,{project:"scripts-v6-root"})},NH:{title:(0,l.t)("New Hampshire",null,{project:"scripts-v6-root"})},NJ:{title:(0,l.t)("New Jersey",null,{project:"scripts-v6-root"})},NM:{title:(0,l.t)("New Mexico",null,{project:"scripts-v6-root"})},NY:{title:(0,l.t)("New York",null,{project:"scripts-v6-root"})},NC:{title:(0,l.t)("North Carolina",null,{project:"scripts-v6-root"})},ND:{title:(0,l.t)("North Dakota",null,{project:"scripts-v6-root"})},OH:{title:(0,l.t)("Ohio",null,{project:"scripts-v6-root"})},OK:{title:(0,l.t)("Oklahoma",null,{project:"scripts-v6-root"})},OR:{title:(0,l.t)("Oregon",null,{project:"scripts-v6-root"})},PA:{title:(0,l.t)("Pennsylvania",null,{project:"scripts-v6-root"})},RI:{title:(0,l.t)("Rhode Island",null,{project:"scripts-v6-root"})},SC:{title:(0,l.t)("South Carolina",null,{project:"scripts-v6-root"})},SD:{title:(0,l.t)("South Dakota",null,{project:"scripts-v6-root"})},TN:{title:(0,l.t)("Tennessee",null,{project:"scripts-v6-root"})},TX:{title:(0,l.t)("Texas",null,{project:"scripts-v6-root"})},UT:{title:(0,l.t)("Utah",null,{project:"scripts-v6-root"})},VT:{title:(0,l.t)("Vermont",null,{project:"scripts-v6-root"})},VA:{title:(0,l.t)("Virginia",null,{project:"scripts-v6-root"})},WA:{title:(0,l.t)("Washington",null,{project:"scripts-v6-root"})},DC:{title:(0,l.t)("Washington, District of Columbia",null,{project:"scripts-v6-root"})},WV:{title:(0,l.t)("West Virginia",null,{project:"scripts-v6-root"})},WI:{title:(0,l.t)("Wisconsin",null,{project:"scripts-v6-root"})},WY:{title:(0,l.t)("Wyoming",null,{project:"scripts-v6-root"})},AA:{title:(0,l.t)("Armed Forces Americas",null,{project:"scripts-v6-root"})},AE:{title:(0,l.t)("Armed Forces Europe",null,{project:"scripts-v6-root"})},AP:{title:(0,l.t)("Armed Forces Pacific",null,{project:"scripts-v6-root"})}}},a.Squarespace.Localities.COUNTRIES_TO_STATES={US:a.Squarespace.Localities.STATE_OPTIONS,CA:{ON:{title:(0,l.t)("Ontario",null,{project:"scripts-v6-root"})},QC:{title:(0,l.t)("Quebec",null,{project:"scripts-v6-root"})},NS:{title:(0,l.t)("Nova Scotia",null,{project:"scripts-v6-root"})},NB:{title:(0,l.t)("New Brunswick",null,{project:"scripts-v6-root"})},MB:{title:(0,l.t)("Manitoba",null,{project:"scripts-v6-root"})},BC:{title:(0,l.t)("British Columbia",null,{project:"scripts-v6-root"})},PE:{title:(0,l.t)("Prince Edward Island",null,{project:"scripts-v6-root"})},SK:{title:(0,l.t)("Saskatchewan",null,{project:"scripts-v6-root"})},AB:{title:(0,l.t)("Alberta",null,{project:"scripts-v6-root"})},NL:{title:(0,l.t)("Newfoundland and Labrador",null,{project:"scripts-v6-root"})},NT:{title:(0,l.t)("Northwest Territories",null,{project:"scripts-v6-root"})},YT:{title:(0,l.t)("Yukon",null,{project:"scripts-v6-root"})},NU:{title:(0,l.t)("Nunavut",null,{project:"scripts-v6-root"})}}},a.Squarespace.Localities.countryCodeFromName=function(i){for(var u in a.Squarespace.Localities.COUNTRY_OPTIONS)if(a.Squarespace.Localities.COUNTRY_OPTIONS[u].title===i)return u};var s=function(i){return a.Array.reduce(a.Object.keys(i).sort(),[],function(u,h){var g=i[h];return u.push({label:g.title,value:h}),u})},n=function(i){return i.sort(function(u,h){return u.value===""?-1:h.value===""?1:u.label<h.label?-1:1})};a.Squarespace.Localities.getAllCountryNames=function(){var i=[];return a.Object.each(a.Squarespace.Localities.COUNTRY_OPTIONS,function(u){u.empty||i.push(u.title)}),i},a.Squarespace.Localities.getNewCountryOptions=function(){return n(s(a.Squarespace.Localities.COUNTRY_OPTIONS))},a.Squarespace.Localities.getNewStateOptionsForCountry=function(i){return n(s(a.Squarespace.Localities.COUNTRIES_TO_STATES[i]))},a.Squarespace.Localities.getAmericentricSortedCountryOptions=function(){var i=a.Squarespace.Localities.getNewCountryOptions(),u=a.Array.filter(i,function(g){return!(g.value===""||g.value===a.Squarespace.Localities.SPECIAL_KEYS.DIVIDER)}),h={value:a.Squarespace.Localities.SPECIAL_KEYS.DIVIDER,label:"\u2014",disabled:!0};return u.unshift({value:"",label:r[""].title},h,{value:"US",label:d.Z.US},h),u}},"1.0",{requires:[]})},399603:function(c,b,t){"use strict";var l=t(408549);YUI.add("squarespace-logger",function(d){var o=[],e=null,a=d.Base.create("Logger",d.Base,[],{initializer:function(){d.one(d.config.win).on("beforeunload",this.flush,this),this._syncDebugActiveElement(),this.after("debugActiveElementChange",this._syncDebugActiveElement,this)},_syncDebugActiveElement:function(){this._debugActiveElementTimer&&this._debugActiveElementTimer.cancel(),this.get("debugActiveElement")&&(this._debugActiveElementTimer=d.later(500,this,function(){this.debug({focusElement:this._getDOMNodeDescriptor(d.config.doc.activeElement)})},null,!0))},_getDOMNodeDescriptor:function(r){r=d.one(r);var s=r.get("tagName").toLowerCase(),n=r.getAttribute("id"),i=r.get("className").split(" "),u="";return i.length>0&&(u="."+i.join("."),u.length>20&&(u=u.substr(0,20)+"\u2026")),s+(n?"#"+n:"")+u},enqueue:function(r){o.push(r),this.wait()},flush:function(r){try{clearTimeout(e)}catch{}e=null,o.length>0&&d.Data.post({url:"/api/events/Trace",data:{data:JSON.stringify(o)},failure:function(){}}),o=[]},wait:function(){e===null&&(e=setTimeout(d.bind(this.flush,this),this.get("timerLength")))},log:function(r,s){d.Lang.isValue(r)&&this.enqueue({pageUrl:document.location.href,type:r,data:JSON.stringify(d.Lang.isValue(s)?s:{})})},trace:function(r,s){try{var n={};n.lalala()}catch(i){this.log(r,d.merge(s,{stack:i.stack}))}},debug:function(r){var s=d.one("#logger-debug")||d.one(d.config.doc.body).appendChild(d.Node.create('<div id="logger-debug"></div>'));s.setStyles({position:"fixed",right:50,top:50,background:"rgba(150,100,100,0.9)",border:"solid 1px white",color:"white",borderRadius:"3px",padding:20,zIndex:1e7,fontSize:"10px"}),s.setContent((0,l.Z)('<xmp style="margin:0">{sub1}</xmp>',{sub1:JSON.stringify(r,null,2)}))}},{ATTRS:{timerLength:{value:30*1e3},debugActiveElement:{value:!1}}});d.namespace("Squarespace"),d.Squarespace.Logger||(d.Squarespace.Logger=new a)},"1.0",{requires:["base","event","io-base","node"]})},715376:function(c,b,t){"use strict";var l=t(174161),d=t(233284),o=t(994336),e=t.n(o),a=t(795478),r=t.n(a),s=t(965885),n=t(714487),i=t(861637),u=t.n(i);function h(v,E,S){return E in v?Object.defineProperty(v,E,{value:S,enumerable:!0,configurable:!0,writable:!0}):v[E]=S,v}var g;class p extends(g=l.Component){render(){const E=this.state.displayName==="";return l.createElement("div",null,l.createElement("div",{className:u().overlay}),l.createElement("div",{className:u().close,onClick:this.props.onClose}),l.createElement("i",{className:u().desktopLogo}),l.createElement("header",{className:u().mobileHeader},l.createElement("i",{className:u().mobileLogo}),l.createElement("h1",{className:u().title},(0,n.t)("Post a Comment",null,{project:"apps.CommentsGuestLogin"}))),l.createElement("div",{className:u().container},l.createElement("header",{className:u().desktopHeader},l.createElement("h1",{className:u().title},(0,n.t)("Post a Comment",null,{project:"apps.CommentsGuestLogin"}))),l.createElement(s.Input,{theme:"midnight",placeholder:(0,n.t)("Name",null,{project:"apps.CommentsGuestLogin"}),...this.bindField("displayName")}),l.createElement(s.Input,{theme:"midnight",placeholder:(0,n.t)("Email Address",null,{project:"apps.CommentsGuestLogin"}),...this.bindField("email")}),l.createElement(s.Input,{theme:"midnight",placeholder:(0,n.t)("Website URL",null,{project:"apps.CommentsGuestLogin"}),...this.bindField("authorUrl")}),l.createElement("button",{disabled:E,className:u().button,onClick:this.handleSubmit},(0,n.t)("Comment as Guest",null,{project:"apps.CommentsGuestLogin"}))))}constructor(...E){super(...E),h(this,"state",{authorUrl:"",displayName:"",email:"",errors:{}}),h(this,"handleSubmit",()=>{this.state.displayName===""?this.setState({errors:{displayName:!0}}):this.props.onSubmit(this.state)}),h(this,"bindField",S=>({value:this.state[S],hasErrors:this.state.errors[S],onKeyDown:y=>{y.key==="Enter"&&this.handleSubmit()},onChange:y=>{this.setState({[S]:y})}}))}}h(p,"propTypes",{onSubmit:r().func,onClose:r().func});const f=p;var m=t(623040),_={init:function(v){return{ready:function(){Static.SQUARESPACE_CONTEXT&&(this.account=Static.SQUARESPACE_CONTEXT.authenticatedAccount)},configure:function(){},isLoggedIn:function(){return!!this.account},getAccount:function(){return this.account},showCommentLogin:function(){var E=document.createElement("div");document.body.appendChild(E);var S=function(){d.unmountComponentAtNode(E),document.body.removeChild(E)};d.render(l.createElement(f,{onSubmit:(function(y){this.fireGuestLoginEvent(y),S()}).bind(this),onLoginClick:(function(){S(),this.showOAuthLogin()}).bind(this),onClose:function(){S(),v.config.win.SQUARESPACE_LOGIN.fire("cancel")}}),E)},fireGuestLoginEvent:function(E){e().set("email",E.email,{path:"/"}),e().set("displayName",E.displayName,{path:"/"}),e().set("authorUrl",E.authorUrl,{path:"/"}),v.config.win.SQUARESPACE_LOGIN.fire("guestLogin")}}}};YUI.add("squarespace-login",function(v){v.config.win.SQUARESPACE_LOGIN||(v.config.win.SQUARESPACE_LOGIN=m.Z.create(_.init(v)),v.augment(v.config.win.SQUARESPACE_LOGIN,v.EventTarget),v.config.win.SQUARESPACE_LOGIN_UTILS={loginPromise:new v.Promise(function(E){E(!0)})})},"1.0",{requires:["promise","squarespace-google-domains-utils"]})},160545:function(c,b,t){"use strict";var l=t(531982),d=t.n(l);YUI.add("squarespace-management",function(o){},"1.0",{requires:["squarespace-frontend-content-mode"]})},322137:function(c,b,t){"use strict";var l=t(900847),d=t.n(l);YUI.add("squarespace-markdown-editor",function(o){o.namespace("Squarespace"),o.Squarespace.MarkdownEditor=o.Base.create("markdownEditor",o.Squarespace.CodeEditor,[],{initializer:function(){this._editorNode=o.one(this.editor.getWrapperElement()),this._initializeLinkFlyout()},destructor:function(){this._linkEdit.close()},execCommand:function(e,a){var r=!0;switch(e){case"bold":this._toggleSurroundSelection("**");break;case"link":this._showLinkFlyout(this._findLinkId(),!0),r=!1;break;case"italic":this._toggleSurroundSelection("*");break;case"heading":this._toggleHeading(a);break;case"insertorderedlist":this._toggleSurroundSelection("1. ","",!0);break;case"insertunorderedlist":this._toggleSurroundSelection("* ","",!0);break;case"blockquote":this._toggleSurroundSelection("> ","",!0);break}r&&this.editor.focus()},_initializeLinkFlyout:function(){this._linkEdit=new o.Squarespace.Flyout.LinkEdit({toolbarOffsetOverride:0,disableNewWindow:!0,canEditTextContent:!1,anchor:o.one(".field-wysiwyg-control")}),this._linkEdit.on("updateLink",function(e){this._cmLink(this._linkEdit.get("linkIndex")||"0",e.linkUrl)},this),this._linkEdit.on("removeLink",function(){this._cmLink(this._linkEdit.get("linkIndex")||"0")},this),this._editorNode.after("mouseup",o.bind(function(e){this._linkEdit.setAttrs({editorSelectionCoords:{x:e.clientX,y:e.clientY}});var a=this._findLinkId();a!=="0"&&this._lastSeenLinkId!==a?(e.halt(),this._lastSeenLinkId=a,this._showLinkFlyout(a,!1)):(this._lastSeenLinkId="",this._linkEdit.close())},this))},_findLinkId:function(){var e=this.editor.getCursor(),a=e.ch,r=this.editor.getTokenTypeAt(e);if(r&&r.indexOf("link")>-1){for(;r&&r.indexOf("url")===-1;)a++,r=this.editor.getTokenTypeAt({line:e.line,ch:a});if(r){var s=this.editor.getTokenAt({line:e.line,ch:a+1});if(/\d+/.test(s.string))return s.string}}return"0"},_showLinkFlyout:function(e,a){var r="";if(e){var s=this.editor.getValue(),n=new RegExp("\\n\\s*\\["+e+`\\]\\s*:\\s*([^'"(\\n]+)[^\\n]*`),i=s.match(n)||[];i[1]?r=i[1]:e="0"}if(e!=="0"){var u=this.editor.getCursor(),h=this.editor.getTokenAt(u),g=new RegExp("(?:\\[([^\\]]+)\\]\\["+e+"\\])"),p=h.state.thisLine.string,f=p.match(g),m=f[1],_=f.index+1,v=_+m.length;this.editor.setSelection({line:u.line,ch:_},{line:u.line,ch:v})}var E=this.editor.cursorCoords();this._linkEdit.setAttrs({linkIndex:e,editorSelectionCoords:{x:E.left,y:E.bottom}}),a?this._linkEdit.openEditor(r,!1):this._linkEdit.openPreview(r,!1)},_cmHeading:function(e){var a=o.clone(this.editor.getCursor(!0)),r;this.editor.somethingSelected()?(r=this.editor.getSelection(),r=r.split(/[\r\n]{1,2}/)[0]):(r=this.editor.getLine(a.line),a.ch=0,this.editor.setSelection(a,{line:a.line,ch:1e6}));var s=["_","=","-","`"][e],n=Array(Math.max(r.length+1,3)).join(s);a.ch>0?(this.editor.replaceSelection(`

`+r+`
`+n+`
`),this.editor.setSelection({line:a.line+2,ch:0},{line:a.line+2,ch:1e6})):(this.editor.replaceSelection(r+`
`+n+`
`),this.editor.setSelection({line:a.line,ch:0},{line:a.line,ch:1e6}))},_cmUnheading:function(){var e=o.clone(this.editor.getCursor(!0)),a=e.line;if(/^[=\-]{3,}/.test(this.editor.getLine(a+1))){var r=/^\w*$/.test(this.editor.getLine(a+2));return this.editor.setSelection({line:a,ch:1e6},{line:a+1+r,ch:1e6}),this.editor.replaceSelection(""),this.editor.setSelection({line:a,ch:0},{line:a,ch:1e6}),!0}return!1},_toggleHeading:function(e){this._cmUnheading()||this._cmHeading(e)},_cmSurround:function(e,a,r){a=o.Lang.isUndefined(a)?e:a;var s=o.clone(this.editor.getCursor(!0)),n=o.clone(this.editor.getCursor(!1)),i=this.editor.getSelection();if(r){if(s.line!==n.line){for(var u=s.line,h=n.line+1;u<h;u++)this.editor.setSelection({line:u,ch:0}),this._cmSurround(e,a,!0);this.editor.setSelection({line:s.line,ch:0},{line:n.line,ch:1e6});return}var g=this.editor.getLine(s.line),p=o.clone(this.editor.getCursor(!0)),f=o.clone(this.editor.getCursor(!1));p.ch=Math.max(g.search(/\S/),0),f.ch=g.length,this.editor.setSelection(p,f),i=g.substr(Math.max(0,p.ch))}s.ch+=e.length,n.ch+=e.length,this.editor.replaceSelection(e+i+a),this.editor.setSelection(s,n)},_cmUnsurround:function(e,a,r){a=o.Lang.isUndefined(a)?e:a;var s=o.clone(this.editor.getCursor(!0)),n=o.clone(this.editor.getCursor(!1));if(r){if(s.line!==n.line){for(var i=!1,u,h=s.line,g=n.line+1;h<g;h++)this.editor.setSelection({line:h,ch:0},{line:h,ch:0}),u=this._cmUnsurround(e,a,!0),i=u||i;return this.editor.setSelection({line:s.line,ch:0},{line:n.line,ch:1e6}),i}var p=this.editor.getLine(s.line);s.ch=p.search(/\W/),n.ch=p.length}s.ch=Math.max(0,s.ch-e.length),n.ch+=a.length;var f=this.editor.getRange(s,n),m=f.length-a.length;return f.slice(0,e.length)==e&&f.slice(m)==a?(this.editor.setSelection(s,n),this.editor.replaceSelection(f.slice(e.length,m)),!0):!1},_toggleSurroundSelection:function(e,a,r){this._cmUnsurround(e,a,r)||this._cmSurround(e,a,r)},_cmLink:function(e,a){var r=!1,s=o.clone(this.editor.getCursor(!0)),n=o.clone(this.editor.getCursor(!1)),i,u;if(!a)u=new RegExp("(?:\\[([^\\]]+)\\]\\s?\\["+e+"\\])|(?:^\\s*\\["+e+"\\]\\s*:.*$(?:\\n$)?)","gm"),i=this.editor.getValue(),i=i.replace(u,"$1"),s.ch--,n.ch--,r=!0;else if(e==="0"){this._cmSurround("[","][0]"),s.ch++,n.ch++;var h=n.line,g,p=`
[0]: `+a;do if(h++,g=this.editor.getLine(h),o.Lang.isUndefined(g)){this.editor.replaceRange(`
`+p,{line:h,ch:0});break}else if(d()(g)){var f=this.editor.getLine(h+1);f&&f[0]&&f[0]!=="["&&(p=p+`
`),this.editor.replaceRange(p,{line:h,ch:0});break}while(g);i=this.editor.getValue(),r=!0}else u=new RegExp("(\\n\\s*\\["+e+`\\]\\s*:\\s*)[^'"(\\n]+([^\\n]*)`),i=this.editor.getValue(),i=i.replace(u,"$1"+a+"$2");if(r){var m=0,_={};i.replace(/\]\s*\[(\d{1,3})\]/g,function(v,E){return _[E]||(m=m+1,_[""+E]=m),v}),i=i.replace(/\[(\d{1,3})\]/g,function(v,E){return"["+(_[E]||E)+"]"}),e==="0"?this._linkEdit.set("linkIndex",_[e]):this._linkEdit.set("linkIndex","0")}this.editor.setValue(i),this.editor.setSelection(s,n)}},{ATTRS:{mode:{value:"code"},height:{value:-1}}})},"1.0",{requires:["base","squarespace-flyout-link-edit","squarespace-code-editor"]})},905968:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-mixin-save-changes",function(d){d.namespace("Squarespace.Mixins").SaveChanges=d.Base.create("saveChanges",d.Base,[],{ensureSavedChanges:function(){return this.hasUnsavedChanges()?d.Squarespace.Promises.create(function(o,e){var a=new d.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("Review Changes",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("You have made changes. Do you want to save or discard them?",null,{project:"scripts-v6-root"}),"strings.confirm":(0,l.t)("Save",null,{project:"scripts-v6-root",notes:"Save text for 3 option dialog; oldKey: dialogSave"}),"strings.reject":(0,l.t)("Discard",null,{project:"scripts-v6-root",notes:"Discard text for 3 option dialog; oldKey: dialogDiscard"}),style:d.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,showOverlay:!0});a.once("confirm",function(){this._initSaveChanges().then(o,e)},this),a.once("reject",function(){this._discardChanges().then(o,e)},this),a.once("cancel",function(){e()})},this):d.when()},requestDelete:function(){return d.Squarespace.Fluent.Confirm({"strings.title":(0,l.t)("Delete Post",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("Are you sure you wish to remove this item?",null,{project:"scripts-v6-root"}),"strings.confirm":(0,l.t)("Delete Post",null,{project:"scripts-v6-root"}),showOverlay:!0}).then(d.bind(this._deleteItem,this))},revertChanges:function(){return d.Squarespace.Fluent.Confirm({"strings.title":(0,l.t)("Revert Changes",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("This will revert the document back to the last saved version. Any changes will be lost. Do you want to proceed?",null,{project:"scripts-v6-root"}),"strings.confirm":(0,l.t)("Revert Changes",null,{project:"scripts-v6-root"}),showOverlay:!0}).then(d.bind(this._revertChanges,this)).then(d.bind(this.markAsClean,this))},_initSaveChanges:function(){return this._saveChanges().then(d.bind(this.markAsClean,this))},_discardChanges:function(){return this._revertChanges().then(d.bind(this.markAsClean,this))},markAsClean:function(){this.set("dirty",!1)},markAsDirty:function(){this.set("dirty",!0)},hasUnsavedChanges:function(){return this.get("dirty")},isInSavingContext:function(){return this.get("dirty")},_deleteItem:function(){throw new Error('Y.Squarespace.ContentManagerWidgets.HasTray: No "_saveChanges" method implemented.')},_saveChanges:function(){this._throwClassError((0,l.t)('No "_saveChanges" method implemented.',null,{project:"scripts-v6-root"}))},_revertChanges:function(){this._throwClassError((0,l.t)("No _revertChanges method implemented",null,{project:"scripts-v6-root"}))},_throwClassError:function(o){throw new Error(["Class",this.constructor.NAME,"-",o].join(" "))}},{ATTRS:{dirty:{value:!1,validator:d.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-fluent-confirmation","squarespace-promises","squarespace-widgets-confirmation"]})},835612:function(){YUI.add("squarespace-mixins-click-selectable-parent",function(c){c.namespace("Squarespace.Mixins"),c.Squarespace.Mixins.ClickSelectableParent=c.Base.create("clickSelectableParent",c.Base,[],{initializer:function(){if(this.publish("selectionChange"),!this.hasImpl(c.WidgetParent))throw new Error("You must have the WidgetParent extension.");this._registerEvent(c.Do.after(this._bindEvents,this,"bindUI"))},_bindEvents:function(){var b=this.get("defaultChildType").NAME;this.on(b+":plainClicked",function(t){t.stopPropagation(),this.setFocusedChild(t.target,{source:"list-click"})}),this.on(b+":modifierClicked",function(t){t.stopPropagation(),t.target.toggleSelected()})},setFocusedChild:function(b){this.each(function(t){t!==b&&(t.blur(),t.set("selected",0))},this),this.some(function(t){if(t===b)return t.focus(),t.set("selected",1),!0},this)},getFocusedWidget:function(){return c.Array.find(this.toJSON(),function(b){return b.get("focused")})},clearSelected:function(){c.Array.invoke(this._items,"blur"),c.Array.invoke(this._items,"set","selected",0)}},{ATTRS:{multiple:{value:!0,readOnly:!0}}})},"1.0",{requires:["array-invoke","base","widget-parent"]})},384271:function(){YUI.add("squarespace-mixins-click-selectable",function(c){c.namespace("Squarespace.Mixins"),c.Squarespace.Mixins.ClickSelectable=c.Base.create("clickSelectable",c.Base,[],{initializer:function(){if(this.publish("plainClicked"),this.publish("modifierClicked"),!this.hasImpl(c.WidgetChild))throw new Error("You must have the WidgetChild extension.");c.Do.after(this._bindClickSelectableEvents,this,"bindUI",this)},_bindClickSelectableEvents:function(){this.get("boundingBox").on(["contextmenu","click"],function(b){b.stopPropagation(),b.shiftKey||b.ctrlKey||b.metaKey?(b.preventDefault(),this.fire("modifierClicked")):this.fire("plainClicked")},this),this.after("selectedChange",function(){this.get("boundingBox").toggleClass(this.getClassName("selected"),this.get("selected")),this.get("selected")===0&&this.blur()})},toggleSelected:function(){this.set("selected",this.get("selected")===0?1:0)}})},"1.0",{requires:["base","widget-parent"]})},523462:function(){YUI.add("squarespace-mixins-editable-model",function(c){c.namespace("Squarespace.Mixins"),c.Squarespace.Mixins.EditableModel=c.Base.create("EditableModel",c.Base,[],{_edit:function(){var b=c.merge({model:this.get("model")},this.get("editorConfig")),t=new(this.get("editorCtor"))(b);this._bindEditor(t),t.show()},_bindEditor:function(b){}},{CSS_PREFIX:"sqs-editable-model",ATTRS:{editorCtor:{value:c.Squarespace.ModelEditorDialog,writeOnce:"initOnly"},editorConfig:{value:{},writeOnce:"initOnly"}}})},"1.0",{requires:["base","squarespace-model-editor"]})},207793:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-mixins-event-list",function(d){d.namespace("Squarespace.Mixins"),d.Squarespace.Mixins.EventList=d.Base.create("EventList",d.Base,[],{initializer:function(){d.Do.before(function(o){var e=d.Object.hasKey(o,"upcoming"),a=d.Object.hasKey(o,"past");if(e&&a)return new d.Do.AlterArgs((0,l.t)("Parsing calendar-specific response",null,{project:"scripts-v6.mixins"}),[[].concat(o.upcoming).concat(o.past)])},this,"parse",this)},getPastEvents:function(){var o=new Date;return this.filter(function(e){var a=e.get("structuredContent");if(a===null)return!1;var r=d.DataType.Date.parse(a.get("endDate"));return d.DataType.Date.isGreater(o,r)})},getUpcomingEvents:function(){var o=new Date;return this.filter(function(e){var a=e.get("structuredContent");if(a===null)return!1;var r=d.DataType.Date.parse(a.get("endDate"));return!d.DataType.Date.isGreater(o,r)})}})},"1.0",{requires:["base","datatype-date","event-custom","json"]})},148475:function(){YUI.add("squarespace-mixins-event-registrar",function(c){c.namespace("Squarespace.Mixins"),c.Squarespace.Mixins.EventRegistrar=c.Base.create("eventRegistrar",c.Base,[],{destructor:function(){c.Array.invoke(this.get("eventListeners"),"detach")},_registerEvent:function(){if(c.Lang.isArray(arguments[0]))this._registerEvent.apply(this,arguments[0]);else for(var b=0,t=arguments.length;b<t;b++)c.Lang.isValue(arguments[b])&&this.get("eventListeners").push(arguments[b])}},{ATTRS:{eventListeners:{value:[]}}})},"1.0",{requires:["array-invoke","base"]})},565931:function(){YUI.add("squarespace-mixins-expandable",function(c){c.namespace("Squarespace.Mixins"),c.Squarespace.Mixins.Expandable=c.Base.create("Expandable",c.Base,[],{initializer:function(){this.publish("expandableOpened"),this.publish("expandableClosed"),this.after("expandableNodeChange",function(b){var t=b.newVal;t.plug(c.Squarespace.Animations.Expandable,{duration:this.get("expandDuration")})},this)},open:function(b){var t=this.get("expandableNode");t.hasClass("expandable-hidden")&&(t.once("opened",function(){this._set("animating",!1),this._set("isOpen",!0),this.fire("expandableOpened")},this),this._set("animating",!0),t.show(b))},close:function(b){var t=this.get("expandableNode");t.hasClass("expandable-hidden")||(t.once("closed",function(){this._set("animating",!1),this._set("isOpen",!1),this.fire("expandableClosed")},this),this._set("animating",!0),t.hide(b))}},{ATTRS:{expandableNode:{valueFn:function(){return this.get("contentBox")},validator:c.Squarespace.AttrValidators.isInstanceOf(c.Node)},expandDuration:{value:.2,validator:c.Squarespace.AttrValidators.isNumber,readOnly:!0},isOpen:{value:!1,validator:c.Squarespace.AttrValidators.isBoolean,readOnly:!0},animating:{value:!1,validator:c.Squarespace.AttrValidators.isBoolean,readOnly:!0}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-attr-validators"]})},178312:function(c,b,t){"use strict";var l=t(210750),d=t.n(l),o=t(861288),e=t.n(o),a=t(542411),r=t(684353),s=r.translationLocale;YUI.add("squarespace-mixins-google-places-autocomplete",function(n){n.namespace("Squarespace.Mixins");var i={POSTAL_CODE:"postal_code",COUNTRY:"country",LOCALITY:"locality",ROUTE:"route",STREET_NUMBER:"street_number",STREET_ADDRESS:"street_address",ADMIN_LEVEL_1:"administrative_area_level_1",SUBLOCALITY:"sublocality",POSTAL_TOWN:"postal_town",NEIGHBORHOOD:"neighborhood",PREMISE:"premise"},u=n.Object.values(i),h=n.Squarespace.Localities.COUNTRY_OPTIONS,g=["address"],p="sqs-google-places-autocomplete-mixin",f="placeDetails",m="address_component";n.Squarespace.Mixins.GooglePlacesAutocomplete=n.Base.create("GooglePlacesAutocomplete",n.Base,[],{initializer:function(){this.publish(f),n.Do.after(this._afterRenderUI,this,"renderUI",this),n.Do.after(this._afterBindUI,this,"bindUI",this),this.after("render",this._enableBrowserAutoComplete,this),this.sessionToken=e()(),this.setAttrs({source:n.bind(this._performAutoComplete,this),enableCache:!1,resultTextLocator:"description",resultFilters:this._filterResults,resultFormatter:this._formatResults,minQueryLength:3})},_afterRenderUI:function(){var _=this.get("contentBox");_.addClass(p),_.one(".sqs-scroll-ac-scroll-container").append('<div class="google-required-elements"><div class="google-attributions"></div><div class="powered-by-google"></div></div>')},_afterBindUI:function(){this.before("select",this._getDetailsForPrediction,this),this.on("placeDetails",this._fillWithAddressLine1,this),this._inputNode.on("focus",function(){this._inputNode.setAttribute("autocomplete","off"),this._inputIsFocused=!0},this),this._inputNode.on("blur",function(){this._inputNode.setAttribute("autocomplete","on"),this._inputIsFocused=!1},this)},_enableBrowserAutoComplete:function(){this._inputNode.setAttribute("autocomplete","on")},_getDetailsForPrediction:function(_){_.halt();var v=_.result.raw;this._getPlaceDetails(v,function(E){var S=this._extractPlaceComponents(E.data),y=this._buildLocationPayload(S,v);this.fire("placeDetails",{place:y})})},_extractPlaceComponents:function(_){var v=_.address_components;return n.Array.reduce(v,{},function(E,S){var y=n.Array.find(S.types,function(C){return n.Array.indexOf(u,C)!==-1});return y?y===i.ADMIN_LEVEL_1?E[y]=S.short_name:y===i.COUNTRY?E[y]=h[S.short_name].title:E[y]=S.long_name:E[y]="",E})},_buildLocationPayload:function(_,v){var E=n.Object.getValue(_,"street_number")||"",S=n.Object.getValue(_,"route")||"",y=n.Object.getValue(_,"country")||"",C=n.Object.getValue(_,"locality")||"",O=n.Object.getValue(_,"sublocality")||"",A=n.Object.getValue(_,"neighborhood")||"",I=n.Object.getValue(_,"postal_town")||"",D=[I,C,O,A],T=n.Array.find(D,function(R){return n.Array.find(v.terms,function(w){return w.value===R})})||C,B=this._getPreferredStreetNumber(S,E),N=n.Object.getValue(_,i.ADMIN_LEVEL_1)||"",P=n.Object.getValue(_,i.POSTAL_CODE)||"",x=n.Array.filter([T,N,P],function(R){return!!R}).join(", ").trim();return{address:(B+" "+S).trim(),country:y,city:T,state:N,zip:P,fullLocality:x}},_getPreferredStreetNumber:function(_,v){var E=this.get("query"),S=_.split(" ")[0],y=E.toLowerCase().indexOf(S.toLowerCase()),C=E.substring(0,y).trim();return C.length>v.length?C:v},_performAutoComplete:d()(function(_,v){var E={query:_,types:g,language:s,sessiontoken:this.sessionToken};a.getPlacePredictions(E,this.get("googleTrackingContext")).then((function(S){this._inputIsFocused&&v(S.data)}).bind(this))},250),_getPlaceDetails:function(_,v){var E={placeid:_.place_id,language:s,sessiontoken:this.sessionToken,fields:m};a.getDetails(E,this.get("googleTrackingContext")).then(n.bind(v,this))},_formatResults:function(_,v){return n.Array.map(v,function(E){var S=E.raw.terms,y=E.raw.matched_substrings,C=n.Array.indexOf(E.raw.types,"street_address")!==-1,O=S[0].offset+S[0].value.length,A=S[1].offset+S[1].value.length,I=C?A:O;return n.Array.map(E.text.split(""),function(D,T){var B=["google-ac-character"];this._indexWithinMatchedSubstring(T,y)&&B.push("google-ac-matched-character");var N='<span class="'+B.join(" ").trim()+'">'+D+"</span>";return T===0?'<div class="google-ac-address">'+N:T===I?N+"</div>":T===I+1?'<div class="google-ac-trailing">'+N:T===E.text.length?N+"</div>":N},this).join("")},this)},_indexWithinMatchedSubstring:function(_,v){return n.Array.some(v,function(E){return _>=E.offset&&_<E.offset+E.length})},_filterResults:function(_,v){return n.Array.filter(v,function(E){return this._predictionHasRouteComponent(E.raw)&&this._predictionContainsCountryInList(E.raw)},this)},_predictionContainsCountryInList:function(_){var v=this.get("countriesAllowed");return!n.Lang.isArray(v)||v.length===0?!0:n.Array.find(v,function(E){return _.description.indexOf(E)!==-1})},_predictionHasRouteComponent:function(_){return n.Array.indexOf(_.types,i.ROUTE)!==-1||n.Array.indexOf(_.types,i.STREET_ADDRESS)!==-1||n.Array.indexOf(_.types,i.PREMISE)!==-1}},{ATTRS:{googleTrackingContext:{},countriesAllowed:{validator:n.Squarespace.AttrValidators.isNullOrArray}}})},"1.0",{requires:["autocomplete-highlighters","base","event-custom","squarespace-attr-validators","squarespace-localities","squarespace-util"]})},929151:function(){YUI.add("squarespace-mixins-loadable",function(c){c.namespace("Squarespace.Mixins"),c.Squarespace.Mixins.Loadable=c.Base.create("Loadable",c.Base,[],{initializer:function(){var b=this.get("loadable"),t=this.get("loadOnInitialize");c.Lang.isValue(b)&&(this._bindLoadable(),t&&b.load()),this.after("loadableChange",this._bindLoadable,this)},destructor:function(){this._beforeLoadHandler&&this._beforeLoadHandler.detach(),this._afterLoadHandler&&this._afterLoadHandler.detach(),this._afterBindHandler&&this._afterBindHandler.detach()},_bindLoadable:function(){var b=this.get("loadable");this._beforeLoadHandler=c.Do.before(function(){this._set("loading",!0)},b,"load",this),this._afterLoadHandler=b.after(["load","error"],function(){this.get("destroyed")||this._set("loading",!1)},this),this._afterBindHandler=c.Do.after(function(){this.after("loadingChange",this.syncUI,this)},this,"bindUI",this)}},{ATTRS:{loadable:{value:null},loading:{value:!1,validator:c.Squarespace.AttrValidators.isBoolean,readOnly:!0},loadOnInitialize:{value:!1,validator:c.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"}}})},"1.0",{requires:["base","event-custom","squarespace-attr-validators"]})},836938:function(){YUI.add("squarespace-mixins-paginated-model-list",function(c){c.namespace("Squarespace.Mixins"),c.Squarespace.Mixins.PaginatedModelList=c.Base.create("PaginatedModelList",c.Base,[],{initializer:function(){this.publish("firstPage"),this.publish("previousPage"),this.publish("nextPage"),this.publish("currentPage"),c.Do.after(function(){var b=this.get("paginator").paginateURL(c.Do.currentRetVal);return new c.Do.AlterReturn("Adding pagination params.",b)},this,"getURL",this),c.Do.before(function(b){var t=c.JSON.parse(b);this._set("hasPreviousPage",t.hasPreviousPage),this._set("hasNextPage",t.hasNextPage)},this,"parse",this)},firstPage:function(){this.get("paginator").firstPage(),this.fire("firstPage")},previousPage:function(){this.get("paginator").previousPage(),this.fire("previousPage")},nextPage:function(){this.get("paginator").nextPage(),this.fire("nextPage")},currentPage:function(){this.get("paginator").currentPage(),this.fire("currentPage")}},{ATTRS:{paginator:{valueFn:function(){return new c.Squarespace.Models.Paginator},validator:c.Squarespace.AttrValidators.isInstanceOf(c.Squarespace.Models.Paginator)},hasPreviousPage:{value:!1,validator:c.Squarespace.AttrValidators.isBoolean,readOnly:!0},hasNextPage:{value:!1,validator:c.Squarespace.AttrValidators.isBoolean,readOnly:!0}}})},"1.0",{requires:["base","event-custom","json","squarespace-attr-validators","squarespace-models-paginator"]})},721323:function(){YUI.add("squarespace-mixins-searchable-model-list",function(c){c.namespace("Squarespace.Mixins"),c.Squarespace.Mixins.SearchableModelList=c.Base.create("SearchableModelList",c.Base,[],{initializer:function(){c.Do.after(function(){var b=this._searchifyURL(c.Do.currentRetVal);return new c.Do.AlterReturn("Adding search query param.",b)},this,"getURL",this)},_searchifyURL:function(b){var t=this.get("searchQuery");if(!c.Lang.isValue(t)||t==="")return b;var l=b.split("?"),d=l[1],o=c.Lang.isValue(d),e=o?c.QueryString.parse(d):{};return e=c.merge(e,{q:t}),l[0]+"?"+c.QueryString.stringify(e)}},{ATTRS:{searchQuery:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","event-custom","querystring","squarespace-attr-validators"]})},889300:function(c,b,t){"use strict";var l=t(225059);YUI.add("squarespace-mixins-slide-refresher",function(d){d.namespace("Squarespace"),d.Squarespace.Mixins.SlideRefresher=d.Base.create("SlideRefresher",d.Base,[],{_refreshSlideRendering:function(o){var e=this.get("slideSummary").get("slide");l.Z.renderPreview(e.get("id"),e.get("layoutIdentifier"))}},{ATTRS:{slideSummary:{value:null}}})},"1.0",{requires:["base"]})},557441:function(c,b,t){"use strict";var l=t(823268),d=t.n(l),o=t(305533),e=t.n(o),a=t(406167),r=t.n(a),s=t(714487),n=t(210750),i=t.n(n),u=t(999762),h=t(204482),g=h.isEnterKey,p=h.isSpaceBar,f=h.isEscapeKey;YUI.add("squarespace-mobile-info-bar",function(m){var _="location",v="businessHours",E=m.namespace("Squarespace.Widgets").MobileInfoBar=m.Base.create("MobileInfoBar",m.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._bb=this.get("boundingBox"),this._cb=this.get("contentBox"),this._scrollNode=m.one(r()(m.config.doc)),this._content={},this._activeContent=null,this.after("render",function(){m.Global.fire("website-overlay:rendered",{selector:"."+this.getProperty("CSS_PREFIX")})})},bindUI:function(){E.superclass.bindUI.call(this);var S="."+this.getClassName("trigger[data-overlay]"),y="."+this.getClassName("overlay"),C="."+this.getClassName("overlay","content"),O="."+this.getClassName("overlay","close");this._overlay=this._cb.one(y),this._overlayContent=this._overlay.one(C),this._overlayClose=this._overlay.one(O),this._cb.delegate("click",this._handleClose,S,this),this._cb.delegate("keydown",function(I){(g(I)||p(I))&&this._handleClose(I)},S,this),this._overlayClose.on("keydown",function(I){(g(I)||p(I))&&this._handleClose(I)},this),this._overlayClose.on("click",this._handleClose,this);var A=m.one(m.config.win);this._registerEvent(A.on("scroll",i()(this._autoHideOrClose,100,{leading:!0,trailing:!0}),this)),this._overlay.on("touchmove",this._disableScroll,this),window.orientation!==void 0&&m.one(m.config.win).on("orientationchange",this._onOrientationChange,this)},syncUI:function(){E.superclass.syncUI.call(this),this._addStyleClass(this)},_onOrientationChange:function(){this._updateOverlay()},_autoHideOrClose:function(){if(this._bb.getDOMNode()){this.activeScreen&&this._toggleOverlay(this._overlayClose);var S=this._scrollNode.get("scrollTop"),y=this.getClassName("hide"),C=this._bb.hasClass(y),O=S<=0;C&&O?this._bb.removeClass(y):!C&&!O&&this._bb.addClass(y)}},_addStyleClass:function(S){if(this._isBarDark()){var y=S.get("boundingBox");y.addClass(S.getClassName("dark"))}},_isBarDark:function(){var S=this.get("style"),y=e().DARK;return S===y},_handleClose:function(S){var y=S.currentTarget;this._toggleOverlay(y)},_toggleOverlay:function(S){if(S){var y=S.getAttribute("data-type");this._bb.hasClass(this._getShowOverlayClassName())?this._hideOverlay():this._renderOverlay(y)}},_onKeyUp:function(S){f(S)&&(S.stopPropagation(),this._hideOverlay())},_getShowOverlayClassName:function(){return this.getClassName("show","overlay")},_renderOverlay:function(S){this._bb.addClass(this._getShowOverlayClassName()),this._activeContent=this._isContentAvailable(S),this._activeContent||(this._activeContent=this._createContent(S),this._content[S]=this._activeContent),this._adjustCloseButton(S),this._activeContent.wrapper.setStyle("display","block"),this._updateOverlay(),this.activeScreen=S,this.revertFocusContainment=(0,u.containFocus)({container:this._overlay.getDOMNode(),root:m.config.doc.body}),this._overlay.setAttribute("aria-label",this._activeContent.title),m.one(m.config.win.document.documentElement).on("keyup",this._onKeyUp,this)},_hideOverlay:function(){this._bb.removeClass(this._getShowOverlayClassName()),this._activeContent.wrapper.setStyle("display",null),this.activeScreen=null,this.revertFocusContainment&&(this.revertFocusContainment(),this.revertFocusContainment=null),m.one(m.config.win.document.documentElement).detach("keyup",this._onKeyUp)},_adjustCloseButton:function(S){var y=this._isBarDark(),C=this.getClassName("overlay","close","dark");S===_&&!y?this._overlayClose.addClass(C):this._overlayClose.removeClass(C)},_updateOverlay:function(){var S=this.getClassName("show","overlay");if(this._bb.hasClass(S)){var y=this._overlayContent.get("scrollHeight"),C=this._overlayContent.get("clientHeight");y>C?this._overlayContent.setStyle("overflow","scroll"):this._overlayContent.setStyle("overflow",null)}},_createContent:function(S){var y,C;return S===_?(y=this._renderLocation(),C=this.get("strings.labels.location")):S===v&&(y=this._renderBusinessHours(),C=this.get("strings.labels.hours")),{wrapper:y,title:C}},_renderLocation:function(){var S=this.get("mapTemplate"),y=m.Node.create(S);return this._overlayContent.appendChild(y),y=this._renderAddress(y),y=this._renderMap(y),y},_renderAddress:function(S){var y="."+this.getClassName("address"),C=this._getAddress();return S.one(y).setHTML(C),S},_getAddress:function(){var S=this.get("location"),y="",C="",O=["addressTitle","addressLine1","addressLine2","addressCountry"],A;if(m.Array.each(O,function(D){A=S[D],A&&(C+='<div data-type="'+D+'">'+A+"</div>",y+=A+" ")}),y){y=encodeURIComponent(y),y="//maps.google.com?q="+y;var I=this.getClassName("address","link");C+='<a rel="noopener" target="_blank" class="'+I+'" href="'+y+'"></a>'}return C},_renderMap:function(S){var y="."+this.getClassName("map"),C=this.get("location");delete C.markerLat,delete C.markerLng,m.Lang.isUndefined(C.mapZoom)&&(C.mapZoom=12);var O=S.one(y);return d().createView({},C,O.getDOMNode()).then(function(A){A.redraw()}),S},_renderBusinessHours:function(){var S=new m.Squarespace.Widgets.BusinessHours;return this._addStyleClass(S),S.render(this._overlayContent),S.get("boundingBox")},_isContentAvailable:function(S){return this._content[S]},_setDefaultContactEmail:function(S){var y=this.get("websiteSettings"),C=this.get("mobileInfoBarSettings");return m.Lang.isNull(S)&&C.isContactEmailEnabled&&(S=y.contactEmail),S},_setDefaultContactPhoneNumber:function(S){var y=this.get("websiteSettings"),C=this.get("mobileInfoBarSettings");return m.Lang.isNull(S)&&C.isContactPhoneNumberEnabled&&(S=y.contactPhoneNumber),S},_setDefaultLocation:function(S){var y=this.get("website"),C=this.get("mobileInfoBarSettings");return m.Lang.isNull(S)&&C.isLocationEnabled&&(S=y.location),S},_setDefaultBusinessHours:function(S){var y=this.get("websiteSettings"),C=this.get("mobileInfoBarSettings");return m.Lang.isNull(S)&&C.isBusinessHoursEnabled&&(S=y.businessHours),S},_disableScroll:function(S){var y=this.getClassName("overlay","content"),C=S.target,O=C.ancestor("."+y),A=O||C,I=!1;A?I=this._overlayContent.getStyle("overflow")!=="scroll":I=!0,I&&S.preventDefault()}},{CSS_PREFIX:"sqs-mobile-info-bar",HANDLEBARS_TEMPLATE:"mobile-info-bar.html",ATTRS:{mobileInfoBarSettings:{valueFn:function(){return m.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","mobileInfoBarSettings"])}},websiteSettings:{valueFn:function(){return m.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings"])}},website:{valueFn:function(){return m.Object.getValue(Static,["SQUARESPACE_CONTEXT","website"])}},mapTemplate:{value:'<div><div class="sqs-mobile-info-bar-map-wrapper"><div class="sqs-mobile-info-bar-map"></div><div class="sqs-mobile-info-bar-address"></div></div></div>'},contactEmail:{value:null,setter:"_setDefaultContactEmail"},contactPhoneNumber:{value:null,setter:"_setDefaultContactPhoneNumber"},location:{value:null,setter:"_setDefaultLocation"},businessHours:{value:null,setter:"_setDefaultBusinessHours"},style:{value:null},strings:{value:{labels:{email:(0,s.t)("Email",null,{project:"website.mobile-info-bar"}),phone:(0,s.t)("Call",null,{project:"website.mobile-info-bar"}),location:(0,s.t)("Map",null,{project:"website.mobile-info-bar"}),hours:(0,s.t)("Hours",null,{project:"website.mobile-info-bar"}),close:(0,s.t)("Close",null,{project:"website.mobile-info-bar"})}}}}})},"1.0",{requires:["base","node","squarespace-business-hours","squarespace-damask-context-globals","squarespace-mobile-info-bar-template","squarespace-ss-widget"]})},117938:function(c,b,t){"use strict";var l=t(714487),d=t(999762);YUI.add("squarespace-modal-lightbox",function(o){var e="sqs-modal-lightbox";o.namespace("Squarespace.Widgets");var a=o.Squarespace.Widgets.ModalLightbox=o.Base.create("modalLightbox",o.Squarespace.Widgets.SSWidget,[],{initializer:function(){var r=this.get("contentBox");r.set("role","dialog"),r.set("aria-label",this.get("title")),this.publish("open"),this.publish("close"),this._resizeEmitter=new o.Squarespace.ResizeEmitter({timeout:100})},destructor:function(){this._resizeEmitter.destroy(),o.Squarespace.EscManager.removeTarget(this)},renderUI:function(){a.superclass.renderUI.call(this),this.get("boundingBox").hide();var r=this._innerEl=o.Node.create('<div class="lightbox-inner"></div>'),s=o.Node.create('<div class="lightbox-content '+this.get("contentClassName")+'"></div>'),n=this.get("contentDataAttributes");Object.keys(n).forEach(function(i){s.getDOMNode().setAttribute(i,n[i])}),r.append(s),this.get("contentBox").append('<div class="lightbox-background"></div>').append(r),this._renderContent(),this.get("openOnRender")&&this.open()},bindUI:function(){a.superclass.bindUI.call(this),this.after("contentChange",function(){this._renderContent(),this.syncUI()},this),this._resizeEmitter.on("resize",this.syncUI,this),this.get("contentBox").delegate("click",function(){this.close()},".lightbox-close",this),this.get("contentBox").delegate("keydown",function(r){(r.keyCode===13||r.keyCode===32)&&(r.preventDefault(),this.close())},".lightbox-close",this),this._innerEl.plug(o.Squarespace.Plugin.ScrollLock)},syncUI:function(){a.superclass.syncUI.call(this),this._setContentMarginTop()},open:function(){o.one("html").addClass("sqs-modal-lightbox-open"),this.get("openClassNode")&&this.get("openClassNode").addClass("sqs-modal-lightbox-open"),this.get("boundingBox").show(),this._setContentBoxTop(),this.syncUI(),o.Squarespace.EscManager.addTarget(this),this.fire("open"),this.revertFocusContainment=(0,d.containFocus)({container:this.get("boundingBox")._node}),this.documentScrollSubscription=o.one("document").on("scroll",this._setContentBoxTop,this)},close:function(){o.one("html").removeClass("sqs-modal-lightbox-open"),this.get("openClassNode")&&this.get("openClassNode").removeClass("sqs-modal-lightbox-open"),this.get("boundingBox").hide(),this.fire("close"),o.Squarespace.EscManager.removeTarget(this),this.revertFocusContainment&&this.revertFocusContainment(),this.documentScrollSubscription&&(this.documentScrollSubscription.detach(),this.documentScrollSubscription=null)},_renderContent:function(){var r=this._innerEl.one(".lightbox-content"),s=this.get("content");r.empty(),o.instanceOf(s,o.Widget)?s.render(r):r.setContent(s);var n=(0,l.t)("Close",null,{project:"scripts-v6-root"});r.prepend('<div role="button" tabindex="0" class="lightbox-close" aria-label="'+n+'">&times;</div>')},_setContentBoxTop:function(){this.get("contentBox").setStyle("top",o.one(o.config.doc).get("scrollTop"))},_setContentMarginTop:function(){var r=this._innerEl.one(".lightbox-content"),s=o.one(o.config.win).get("winHeight"),n=r.get("offsetHeight"),i=n>s,u;i?u=50:u=s/2-n/2;var h=this.get("hasExtraBottomMargin")?s/2:u;r.setStyles({marginTop:u,marginBottom:h})}},{CSS_PREFIX:e,ATTRS:{content:{value:null},animDuration:{value:.3},openOnRender:{value:!1},openClassNode:{value:null},title:{value:""},hasExtraBottomMargin:{value:!1},contentClassName:{value:""},contentDataAttributes:{value:{}}}})},"1.0",{requires:["base","node","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-plugin-scroll-lock","squarespace-ss-widget","squarespace-util"]})},195307:function(c,b,t){"use strict";var l=t(936177),d=t.n(l),o=t(437951),e=t.n(o),a=t(444867),r=t.n(a),s=t(586745),n=t.n(s),i=t(714487),u=t(912289),h=t(730842),g=t(762379),p=t(119978),f=t(251678),m=t(416203),_=t.n(m),v=t(157484),E=t(976003),S=t.n(E),y=t(296923),C=t.n(y),O=t(774319),A=t(655191),I=t(989250);YUI.add("squarespace-model-editor",function(D){D.Squarespace.ModelEditorDialog=D.Base.create("ModelEditorDialog",D.Base,[],{initializer:function(){this.saving=!1,this.publish("nonSavingClose",{emitFacade:!0}),this.publish("savingClose",{emitFacade:!0});var T=this.get("dialog");this.on("visibleChange",function(B){if(B.source!=="dialog"&&B.newVal!==B.prevVal){var N=this.get("dialogConfig");if(T.detachAll(this.get("id")+"|*"),D.detachAll(this.get("id")+"|*"),!N)throw new Error("You need a DialogConfig for ModelEditorDialog to work!");B.newVal?this._showDialog():this._hideDialog()}},this),this.on("modelChange",function(B){B.prevVal&&B.prevVal.detachAll(this.get("id")+"|*")},this),T.on("send-requested",this._onSendRequested,this),T.on("auto-save-requested",this.autoSave,this),T.on(["close","dismiss"],function(B){this.saving?this.fire("savingClose"):this.fire("nonSavingClose"),this.set("visible",!1,{source:"dialog"})},this)},destructor:function(){this.get("visible")&&this.set("visible",!1)},_onSendRequested:function(T){var B=this.get("dialog"),N=this.validateFields();D.Lang.isValue(N)?B.showErrors(N):(this.saving=!0,this.save())},_showDialog:function(){var T=this.get("dialog"),B=this.get("dialogConfig"),N=D.Squarespace.ObjectBuilder.make(D.clone(B,this),this.get("dialogConfigContext"),this.getTemplateContext()),P=this.get("parentDialog");D.Lang.isValue(P)&&(N.parentDialog=P),T.setParams(N),T.setInitialData(this.getDialogData());var x={},R=this.get("anchorNode"),w=this.get("flyoutPointerDirection");R&&(x.anchor=R),w&&(x.flyoutPointerDirection=this.get("flyoutPointerDirection")),T.show(x)},_hideDialog:function(){this.get("model").detachAll(this.get("id")+"|*"),this.get("dialog").params.discardChangesConfirmation=!1,this.get("dialog").close()},validateFields:function(){var T=this.get("dialog").getErrors();if(T.errors===0)return null},save:function(T,B,N){T=T||{};var P=this.get("dialog"),x=this.get("model"),R=x.getAttrs();if(x.setAttrs(this.sanitizeDialogData(P.getData())),this.get("onlySetAttrsOnSave")){this._saveResponseHandler(null,R,B,N);return}x.save(T,D.bind(function(k,q){if(k&&q instanceof XMLHttpRequest)try{k=D.merge(k,JSON.parse(q.response))}catch{}this._saveResponseHandler(k,R,B,N)},this))},autoSave:function(T){T=T||{};var B=this.get("model");B.setAttrs(this.sanitizeDialogData(this.get("dialog").getData())),B.autoSave(T)},trackAction:function(T,B){try{var N=B.get("id"),P=B.get("collectionId");if(!N||!P||N===P)return;var x=h.Z.getCollection(P);if(!x||(0,I.j)(x)===A.A.PRODUCT_COLLECTION)return;var R=B.get("recordType"),w="blog";x.collectionType===e().COLLECTION_TYPE_GENERIC&&R===n().EVENT&&(w="events"),T({itemId:N,collectionType:w,collectionId:P})}catch(k){console.error(k)}},trackSave:function(T,B){this.trackAction(u.sk,T,B);var N=T.get("collectionId"),P=h.Z.getCollection(N);if((0,I.j)(P)===A.A.PRODUCT_COLLECTION){var x=B,R=T.getAttrs(),w=R.title,k=(0,f.Z)(T.get("productType")),q=v.MX.YUI_EDITOR,F=R.id;x.title!==R.title&&p.Xd(w,k,q,F),x.excerpt&&R.excerpt&&x.excerpt.html!==R.excerpt.html&&p.Su(w,k,q,F),x.tags!==R.tags&&(_()(x.tags,R.tags).forEach(function(z){p.z0({productName:w,productType:k,productEditor:q,productId:F,tag:z})}),_()(R.tags,x.tags).forEach(function(z){p.vc({productName:w,productType:k,productEditor:q,productId:F,tag:z})})),x.categories!==R.categories&&(_()(x.categories,R.categories).forEach(function(z){p.eY({productName:w,productType:k,productEditor:q,productId:F,category:z})}),_()(R.categories,x.categories).forEach(function(z){p.f2({productName:w,productType:k,productEditor:q,productId:F,category:z})})),x.workflowState!==R.workflowState&&p.U({productName:w,productType:k,productEditor:q,productId:F,workflowState:O.Q0(R.workflowState)}),x.additionalFieldsFormId!==R.additionalFieldsFormId&&p.kQ(w,k,q,F),x.relatedProductsStrategy===R.relatedProductsStrategy?R.relatedProductsStrategy==="categories"&&this._getRelatedCategoriesValue(x)!==this._getRelatedCategoriesValue(R)?p.Mc({productName:w,productType:k,productEditor:q,productId:F,newValue:this._getRelatedCategoriesValue(R)}):R.relatedProductsStrategy==="tags"&&x.relatedTags[0]!==R.relatedTags[0]&&p.Mc({productName:w,productType:k,productEditor:q,productId:F,newValue:R.relatedTags[0]}):x.relatedProductsStrategy!==R.relatedProductsStrategy&&(R.relatedProductsStrategy==="categories"?p.Mc({productName:w,productType:k,productEditor:q,productId:F,newValue:this._getRelatedCategoriesValue(R)}):R.relatedProductsStrategy==="tags"?p.Mc({productName:w,productType:k,productEditor:q,productId:F,newValue:R.relatedTags[0]}):p.Mc({productName:w,productType:k,productEditor:q,productId:F,newValue:"no-value-selected"})),S()(x.body,R.body)||p.cz(w,k,q,F),S()(x.subscriptionPlan,R.subscriptionPlan)||p.$g({productName:w,productType:k,productEditor:q,productId:F,val:!!R.subscriptionPlan}),T.get("productType")===C().DIGITAL?x.onSale!==R.onSale&&p.o9({productName:w,productType:k,productEditor:q,productId:F,isOnSale:R.onSale}):S()(x.variants,R.variants)||R.variants.forEach(function(z){var j;x.variants&&(j=x.variants.find(function(X){return X.id===z.id})),j?z.onSale!==j.onSale&&p.o9({productName:w,productType:k,productEditor:q,productId:F,isOnSale:z.onSale}):z.onSale&&p.o9({productName:w,productType:k,productEditor:q,productId:F,isOnSale:z.onSale})})}},_getRelatedCategoriesValue:function(T){var B=g.Z.isFeatureEnabled(r().NESTED_CATEGORIES);return B?T.relatedCategoryIds[0]:T.relatedCategories[0]},_saveResponseHandler:function(T,B,N,P){var x=this.get("dialog"),R=this.get("model");T?(T.errors?x.showErrors(T.errors):(this._createErrorAlert(T),x.allowEditing()),R.setAttrs(B)):(this.trackSave(R,B),N&&N(),P||this.hide()),this.saving=!1},_createErrorAlert:function(T){var B=String(T.code).charAt(0),N;if(B==="4"||B==="5"?N=T.message||this.get("strings.errorMessage"):D.Lang.isString(T)?N=T:D.Lang.isObject(T)&&(T.error?N=T.error:T.message&&(N=T.message)),d().trackCaughtError("damask","ModelEditorDialog._createErrorAlert ["+this.name+"]: "+N),N)return new D.Squarespace.Widgets.Alert({"strings.title":this.get("strings.errorTitle"),"strings.message":N})},getTemplateContext:function(){return this.get("model")},getDialogData:function(){return this.get("model").toJSON()},sanitizeDialogData:function(T){return T},show:function(){this.set("visible",!0)},hide:function(){this.set("visible",!1)}},{ATTRS:{model:{},onlySetAttrsOnSave:{value:!1},dialog:{readOnly:!0,valueFn:function(){return new D.Squarespace.EditingDialog}},dialogConfig:{},dialogConfigContext:{value:{}},anchorNode:{value:null},flyoutPointerDirection:{value:null},visible:{value:!1},parentDialog:{value:null},strings:{value:{errorMessage:(0,i.t)("Please try again.",null,{project:"scripts-v6-root"}),errorTitle:(0,i.t)("Error",null,{project:"scripts-v6-root"})}}}}),D.namespace("Squarespace.ModelEditorPlugins"),D.Squarespace.ModelEditorPlugins.AutoSave=D.Base.create("ModelEditorPluginAutoSave",D.Plugin.Base,[],{initializer:function(){this.afterHostMethod("_showDialog",function(){this._autoSaveRequest=D.later(5e3,this,this.requestAutoSave)},this);var T=D.bind(function(){this._autoSaveRequest&&(this._autoSaveRequest.cancel(),this._autoSaveRequest=null)},this),B=this.get("host").get("dialog");B&&B.on(["close","dismiss"],function(){T()},this),this.beforeHostMethod("_hideDialog",T,this),this.beforeHostMethod("autoSave",function(){this.get("host").get("model").once("save",function(){T(),this._autoSaving=!1},this)},this)},requestAutoSave:function(){this._autoSaving||!this.get("host").get("dialog").isVisible()||(this._autoSaving=!0,this.get("host").autoSave())}},{NS:"autoSavePlugin"}),D.Squarespace.ModelEditorPlugins.LoadBeforeShowing=D.Base.create("ModelEditorPluginLoadBeforeShowing",D.Plugin.Base,[],{initializer:function(){this.afterHostMethod("_showDialog",function(){var T=this.get("host"),B=T.get("dialog"),N=T.get("model");B.updateTitle(D.Squarespace.DialogStates.LOADING),B.showSaveOverlay();var P=this.get("id")+"|load";N.onceAfter(P,this.initDialogWithBlockModelData,this),N.load({forceReload:!0},D.bind(this._loadErrorCallback,this))},this)},initDialogWithBlockModelData:function(){var T=this.get("host"),B=T.get("dialog"),N=T.getDialogData();B.setInitialData(N),B.setData(N),B.hideSaveOverlay(),B.clearEdited()},_loadErrorCallback:function(T,B){if(T){if(B instanceof XMLHttpRequest)try{T=D.merge(T,JSON.parse(B.response))}catch{}var N=this.get("host"),P=N._createErrorAlert(T);P&&P.on("confirm",function(){N.get("dialog").close()},this)}}},{NS:"loadBeforeShowing"})},"1.0",{requires:["plugin","squarespace-dialog","squarespace-object-builder","squarespace-ss-widget","squarespace-ui-base","squarespace-widgets-alert"]})},602210:function(){YUI.add("squarespace-model-list-parse",function(c){function b(){}b.prototype={parse:function(t){var l=this.constructor.superclass.parse.call(this,t);return c.Lang.isObject(l)&&c.Lang.isArray(l.results)?l.results:l}},c.namespace("Squarespace").ModelListParse=b},"1.0",{requires:[]})},154326:function(){YUI.add("squarespace-model-sync-rest",function(c){function b(){this._ioConfigCache={}}b.prototype={sync:function(t,l,d){c.Lang.isValue(l.timeout)||(l.timeout=1e7),c.ModelSync.REST.prototype.sync.apply(this,arguments)},_storeRequest:function(t,l){this._ioConfigCache[t.id]=c.merge(l,{})},_retrieveAndEvict:function(t){var l=this._ioConfigCache[t];return this._ioConfigCache[t]=null,l},_isCrumbFailure:function(t){return t&&t.crumbFail&&t.crumb},_sendSyncIORequest:function(t){var l=c.ModelSync.REST.prototype._sendSyncIORequest.apply(this,arguments);return this._storeRequest(l,t),l},_onSyncIOEnd:function(t,l){this._retrieveAndEvict(t),c.ModelSync.REST.prototype._onSyncIOEnd.apply(this,arguments)},_onSyncIOSuccess:function(t,l,d){var o=this._retrieveAndEvict(t),e={},a=l.responseText;if(c.Lang.isValue(a)&&a.trim()&&(e=c.JSON.parse(a)),this._isCrumbFailure(e)){var r=e.crumb;c.ModelSync.REST.CSRF_TOKEN=r,c.Env.CSRF_TOKEN=r,o.headers["X-CSRF-Token"]=r,this._sendSyncIORequest(o)}else c.ModelSync.REST.prototype._onSyncIOSuccess.apply(this,arguments)},_onSyncIOFailure:function(t,l,d){var o=d.callback;if(o){var e={},a=l.responseText;c.Lang.isValue(a)&&a.trim()&&(e=c.JSON.parse(a)),o({code:l.status,msg:l.statusText,responseJSON:e},l)}}},c.mix(b,c.ModelSync.REST,!1,null,1),c.namespace("Squarespace.ModelSync").REST=b},"1.0",{requires:["model-sync-rest"]})},259322:function(c,b,t){"use strict";var l=t(586745),d=t.n(l),o=t(532099),e=t.n(o);YUI.add("squarespace-models-attachments-list",function(a){var r=a.namespace("Squarespace.Models").AttachmentsList=a.Base.create("AttachmentsList",a.Squarespace.Models.ModelList,[a.Squarespace.Mixins.PaginatedModelList],{model:a.Squarespace.Models.ContentItem,url:a.Squarespace.API_ROOT+"content-items?recordType={recordType}"},{ATTRS:{paginator:{valueFn:function(){return new a.Squarespace.Models.RangePaginator({models:this,orderBy:"addedOn",orderDirection:e().DESCENDING})}},recordType:{value:d().ATTACHMENT,readOnly:!0},pageSize:{validator:a.Lang.isNumber,value:20,setter:function(s){this.get("paginator").set("limit",s)}}}});a.namespace("Squarespace.Models").SearchedAttachmentsList=a.Base.create("SearchedAttachmentsList",r,[],{url:a.Squarespace.API_ROOT+"content-items/search?transient=true&recordType={recordType}&q={searchQuery}"},{ATTRS:{paginator:{valueFn:function(){return new a.Squarespace.Models.OffsetPaginator({models:this,orderBy:"addedOn",orderDirection:e().DESCENDING})}},searchQuery:{validator:a.Lang.isString,value:""}}})},"1.0",{requires:["squarespace-models-model-list","squarespace-models-range-paginator","squarespace-models-offset-paginator","squarespace-models-content-item","squarespace-model-sync-rest","squarespace-mixins-paginated-model-list","base"]})},331870:function(){YUI.add("squarespace-models-audio",function(c){c.namespace("Squarespace.Models"),c.Squarespace.Models.Audio=c.Base.create("Audio",c.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Audio",validator:function(b){return b==="Audio"},readOnly:!0},embed:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},audioAssetUrl:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},artistName:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},lengthInMilliSeconds:{value:null,validator:c.Squarespace.AttrValidators.isNullOrNumber},bitRate:{value:null,validator:c.Squarespace.AttrValidators.isNullOrNumber},sampleRate:{value:null,validator:c.Squarespace.AttrValidators.isNullOrNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},178329:function(){YUI.add("squarespace-models-calendar-event",function(c){c.namespace("Squarespace.Models"),c.Squarespace.Models.CalendarEvent=c.Base.create("CalendarEvent",c.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"CalendarEvent",validator:function(b){return b==="CalendarEvent"},readOnly:!0},startDate:{valueFn:function(){var b=new Date,t=b.getMinutes();return b.setSeconds(0),b.setMilliseconds(0),t>=30?(b.addHours(1),b.setMinutes(0)):b.setMinutes(30),b.getTime()},validator:c.Squarespace.AttrValidators.isNumber},endDate:{valueFn:function(){var b=new Date(this.get("startDate"));return b.addHours(1),b.getTime()},validator:c.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},649737:function(){YUI.add("squarespace-models-check-in",function(c){c.namespace("Squarespace.Models"),c.Squarespace.Models.CheckIn=c.Base.create("CheckIn",c.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"CheckIn",validator:function(b){return b==="CheckIn"},readOnly:!0},checkinId:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},venueId:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},venueName:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},address:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},crossStreet:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},city:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},state:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},country:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},postalCode:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},categoryId:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},categoryPluralName:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},categoryShortName:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},categoryIcon:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},886231:function(c,b,t){"use strict";var l=t(437951),d=t.n(l),o=t(210362),e=t.n(o);YUI.add("squarespace-models-collection-configuration",function(a){a.namespace("Squarespace.Models"),a.Squarespace.Models.CollectionConfiguration=a.Base.create("CollectionConfiguration",a.Model,[],{initializer:function(r){a.Lang.isBoolean(r.variation)&&r.variation?this.set("folderBehavior",e().VARIATION):a.Lang.isBoolean(r.index)&&r.index?this.set("folderBehavior",e().INDEX):a.Lang.isBoolean(r.folder)&&r.folder&&this.set("folderBehavior",e().NONE)}},{ATTRS:{collectionType:{value:d().COLLECTION_TYPE_GENERIC},folder:{value:!1},folderBehavior:{},supported:{value:!0}}})},"1.0",{requires:["base","model"]})},165648:function(c,b,t){"use strict";var l=t(44348),d=t.n(l),o=t(532099),e=t.n(o);YUI.add("squarespace-models-inventory",function(a){a.namespace("Squarespace.Models"),a.Squarespace.Models.Inventory=a.Base.create("Inventory",a.Squarespace.Models.GrowableModelList,[a.Squarespace.Mixins.SearchableModelList],{model:a.Squarespace.Models.ContentItem,url:a.Squarespace.API_ROOT+"commerce/inventory",initializer:function(){this.after("*:save",function(r){var s=r.target,n=this.indexOf(s);this.remove(s),s.get("workflowState")!==d().DELETED&&this.add(s,{index:n})},this)}},{getProductStock:function(r,s){a.Data.get({url:"/api/commerce/inventory/stock",data:{itemId:r.join(",")},success:function(n){a.Lang.isFunction(s)&&s(n)}})},ATTRS:{paginator:{valueFn:function(){return new a.Squarespace.Models.OffsetPaginator({models:this,orderBy:"title",orderDirection:e().DESCENDING})}}}})},"1.0",{requires:["base","squarespace-mixins-searchable-model-list","squarespace-models-content-item","squarespace-models-growable-model-list","squarespace-models-offset-paginator","squarespace-util","squarespace-promises"]})},763755:function(c,b,t){"use strict";var l=t(91098),d=t.n(l),o=t(840635);YUI.add("squarespace-models-connected-account",function(e){e.namespace("Squarespace.Models");var a=e.Base.create("ConnectedAccount",e.Model,[e.Squarespace.ModelSync.REST],{url:e.Squarespace.REST_API_ROOT+"social-accounts/{id}",root:e.Squarespace.REST_API_ROOT+"social-accounts",initializer:function(r){this.after("save",function(s){o.Z.refreshConnectedAccounts()})},resetSubscription:function(){e.Data.post({url:"/api/config/ResetSocialAccountSubscription",data:{connectedAccountId:this.get("id")}},this)}},{ATTRS:{unauthorized:{getter:function(){return this.get("accountState")===d().UNAUTHORIZED}},hash:{readOnly:!0,getter:function(){return this.get("serviceName").toLowerCase()+"-"+this.get("userId")}},userName:{validator:e.Lang.isString,value:null},accountState:{value:d().ACTIVE},websiteId:{value:null},profileUrl:{validator:e.Lang.isString,value:null},serviceId:{validator:e.Lang.isNumber},serviceName:{validator:e.Lang.isString},pullEnabled:{validator:e.Lang.isBoolean,value:!1},pushEnabled:{validator:e.Lang.isBoolean,value:!0},autoPushEnabled:{validator:e.Lang.isBoolean,value:!1},iconEnabled:{validator:e.Lang.isBoolean},userId:{validator:e.Lang.isString},iconURL:{validator:e.Lang.isString},defaultPushMessage:{validator:e.Lang.isString},screenName:{validator:e.Lang.isString},collectionId:{validator:e.Lang.isString},metaData:{validator:e.Lang.isObject,value:null}}});e.Squarespace.Models.ConnectedAccount=a},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-util"]})},143813:function(c,b,t){"use strict";var l=t(699321),d=t(35045);YUI.add("squarespace-models-connected-accounts",function(o){o.namespace("Squarespace.Models"),o.Squarespace.Models.ConnectedAccounts=o.Base.create("ConnectedAccounts",o.ModelList,[o.Squarespace.ModelSync.REST,o.Squarespace.ModelListParse],{model:o.Squarespace.Models.ConnectedAccount},{loadFromStore:function(){return new o.Squarespace.Models.ConnectedAccounts({websiteId:d.default.getState().id,items:l.Z.getState().connectedAccounts||[]})},ATTRS:{websiteId:{value:null}}})},"1.0",{requires:["base","model","model-list","squarespace-model-list-parse","squarespace-model-sync-rest","squarespace-models-connected-account","squarespace-util"]})},52160:function(c,b,t){"use strict";var l=t(480433),d=t.n(l),o=t(347560),e=t(516614),a=t(681328),r=t(142849),s=t(966819),n=t(522364),i=t(437951),u=t.n(i),h=t(387582),g=t(629266),p=t.n(g),f=t(816130),m=t.n(f),_=t(456903),v=t(131626),E=t.n(v),S=t(936177),y=t.n(S),C=t(730842),O=t(985913);YUI.add("squarespace-models-content-collection",function(A){A.namespace("Squarespace.Models");var I=A.Squarespace.Models.ContentCollection=A.Base.create("Collection",A.Model,[],{initializer:function(D){this._syncFolderChange=this._syncFolderChange.bind(this),this._ensureDemoCloneAndSave=this._ensureDemoCloneAndSave.bind(this),this._handleStoreChange=this._handleStoreChange.bind(this),this._errorHandler=this._errorHandler.bind(this),this._save=this._save.bind(this),this._delete=this._delete.bind(this),this._deleteUnusedCollectionPermanently=this._deleteUnusedCollectionPermanently.bind(this),this._read=this._read.bind(this),this._updateItemCount=this._updateItemCount.bind(this),this._fetchItemCount=this._fetchItemCount.bind(this),this._onContentBrowserSettingsSaved=this._onContentBrowserSettingsSaved.bind(this),this._cloneExampleContent=this._cloneExampleContent.bind(this),this._shouldCloneCollection=this._shouldCloneCollection.bind(this),this._set=this._set.bind(this),D?this.items=new A.Squarespace.Models.ContentItemList({items:D.items||[],parent:this,limit:this.get("itemLimit")}):this.items=new A.Squarespace.Models.ContentItemList({parent:this,limit:this.get("itemLimit")}),this._itemsEventHandle=this.items.after(["load","add","remove"],this._updateItemCount,this),this._syncFolderChange(this.get("folder")),this.after("folderChange",function(T){this._syncFolderChange(T.newVal)}),this.actionListener=new(d())(o.Z),this.actionListener.addActionListener(n.Z.CONTENT_BROWSER_SETTINGS_SAVED,this._onContentBrowserSettingsSaved.bind(this)),this._initialAttrs=this.getAttrs(),this.unlistenToModelStore=s.default.listen(this._handleStoreChange.bind(this))},destructor:function(){this.unlistenToModelStore&&(this.unlistenToModelStore(),this.unlistenToModelStore=null),this._itemsEventHandle.detach(),this._itemsEventHandle=null,this.items.destroy(),this.items=null,this.actionListener.removeAllActionListeners(),this.actionListener=null},toDebugString:function(){return A.JSON.stringify(this.getAttrs(["navigationTitle","urlId","id"]))},toJSON:function(){var D=this.constructor.superclass.toJSON.call(this);return this.items&&(D.items=this.items.toJSON()),D},parse:function(D){return D=I.superclass.parse.apply(this,arguments),D.passwordProtected&&(D.password=h.Z.PASSWORD_MASK),D},sync:function(D,T,B){switch(D){case"create":this._ensureDemoCloneAndSave(B);break;case"delete":T.isUnusedStarterPage?this._deleteUnusedCollectionPermanently(B):T.deleteCollection===!1?(r.Z.deleteSuccess(this.get("id")),typeof B=="function"&&B()):this._delete(B);break;case"read":this._read(T,B);break;case"update":this._ensureDemoCloneAndSave(B);break}},load:function(D,T,B){if(typeof D=="function"&&(B=T,T=D,D={}),this._readInProgress){this.onceAfter("load",T,B);return}A.Model.prototype.load.call(this,D,T?A.bind(T,B||this):null)},resetToLastRead:function(){return s.default.fetch(this.get("id")).then((function(D){var T=this.getAttrs();A.Object.keys(T).map(function(N){T[N]=void 0});var B=A.merge(T,this._initialAttrs,this.parse(D.toJS()));this.setAttrs(B),this.set("dirty",!1)}).bind(this)).catch(this._errorHandler)},ensureProcessedItems:function(){var D=(function(T){this.items.load({fields:["mediaProcessingState"]},(function(){var B=this.items.some(function(N){return N.get("mediaProcessingState")!==p().READY});B?A.later(500,this,D,T):T()}).bind(this))}).bind(this);return new A.Promise(function(T){D(T)})},_syncFolderChange:function(D){D&&this.set("dropdown",!0)},_ensureDemoCloneAndSave:function(D){if(this._shouldCloneCollection()){var T=this.toJSON();delete T.id,this.cloneToNewCollection({silent:!0}).then(A.bind(this._save,this,D,T))}else this._save(D)},_handleStoreChange:function(D){if(!A.Env){this.unlistenToModelStore&&(this.unlistenToModelStore(),this.unlistenToModelStore=null);return}var T=D.get(this.getId());T&&(this.setAttrs(this.parse(T.toJS())),this.set("dirty",!1))},serialize:function(D){return D=A.merge(D,this.toJSON()),D.collectionId=D.id,delete D.dirty,delete D.body,delete D.tags,delete D.categories,delete D.items,A.Lang.isValue(D.mainImage)&&(D.mainImageId=A.instanceOf(D.mainImage,A.Squarespace.Models.ContentItem)?D.mainImage.get("id"):D.mainImage.id,delete D.mainImage),D.metadata&&D.metadata.albumCover&&delete D.metadata.albumCover,D.productQuickViewEnabled&&(D.features.productQuickView.isEnabled=D.productQuickViewEnabled,delete D.productQuickViewEnabled),D.relatedItemsEnabled&&(D.features.relatedItems.isEnabled=D.relatedItemsEnabled,delete D.relatedItemsEnabled),D},serializeForReporting:function(){var D=this.getTemplateConfiguration(),T=this.serialize();return delete T.passwordProtected,delete T.password,delete T.memberAreaIds,T.templateConfig=D.toJSON(),T},_errorHandler:function(D){var T="ContentCollection._errorHandler ["+this.name+"] ";y().trackCaughtError("damask",T+D.message,D.stack)},_save:function(D,T){T=this.serialize(T),r.Z.update(T).then((function(B){if(B.error){D(B,null);return}this._initialAttrs=B,D(null,B)}).bind(this)).catch(this._errorHandler)},_delete:function(D){r.Z.delete(this.get("id")).then(function(T){D(null,T)},function(T){D(T,null)}).catch(this._errorHandler)},_deleteUnusedCollectionPermanently:function(D){r.Z.deleteUnusedCollectionPermanently(this.get("id")).then(function(T){D(null,T)},function(T){D(T,null)}).catch(this._errorHandler)},_read:function(D,T){this._readInProgress=!0;var B="fetch";D.forceReload&&(B="fetchFromServer");var N=new Error().stack;s.default[B](this.get("id")).then((function(P){var x=this.parse(P.toJS());A.Squarespace.ContentCollectionUtils.usesDisplayIndex(x.ordering)?this._fetchItemCount(x.id).then((function(R){this._readInProgress=!1,x.itemCount=R,T(null,x)}).bind(this)):(this._readInProgress=!1,T(null,x))}).bind(this),(function(P){this._readInProgress=!1,T(P,null);var x=D?"Options: "+JSON.stringify(D):"";y().trackCaughtError("damask","ContentCollection._read ["+this.name+`] Error retrieving content from store: 
`+x,N)}).bind(this)).catch(this._errorHandler)},_updateItemCount:function(){A.Squarespace.ContentCollectionUtils.usesDisplayIndex(this.get("ordering"))&&(this.isNew()?this.set("itemCount",0):this._fetchItemCount(this.get("id")).then((function(D){this.set("itemCount",D)}).bind(this)).catch(this._errorHandler))},_fetchItemCount:function(D){return new A.Promise(function(T,B){A.Data.get({url:"/api/content-collections/"+D+"/item-count",success:function(N){T(N)},failure:B},this)})},_onContentBrowserSettingsSaved:function(D){if(this.get("id")===D.collectionId){var T=this.items.getById(D.id);T?T.setAttrs(D,{source:n.Z.CONTENT_BROWSER_SETTINGS_SAVED}):this.items.add(D)}},getTemplateConfiguration:function(){var D,T=this.get("typeName"),B=this.get("type");return B===u().TEMPLATE_PAGE?D=a.default.getPageConfig(T):D=a.default.getCollectionConfig(T),D?new A.Squarespace.Models.CollectionConfiguration(D):new A.Squarespace.Models.CollectionConfiguration({collectionType:B||u().COLLECTION_TYPE_GENERIC,ordering:this.get("ordering"),folder:this.get("folder"),supported:!1})},cloneToNewCollection:function(D){return new A.Promise(A.bind(function(T,B){var N=A.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(this.get("id")),P=this._cloneExampleContent(D);P.then(A.bind(function(x){N.set("collectionId",x),N.save(T),T(x)},this)).catch(function(x){B(x)},this)},this))},cloneToNewCollectionWithItem:function(D,T){return new A.Promise(A.bind(function(B,N){var P=A.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(this.get("id")),x=this._cloneExampleContent(A.merge({itemId:D},T));x.then(A.bind(function(R){P.set("collectionId",R.collection.id),P.save(function(){B(R)})},this))},this))},_cloneExampleContent:function(D){D=D||{};var T=D.itemId,B=new A.Promise(A.bind(function(N,P){var x=this.get("id"),R;this.get("type")!==u().GALLERY_BLOCK&&C.Z.canHandleCollection(this.serialize())?T?R=C.Z.cloneDemoCollectionWithItem(this.get("id"),D.itemId):R=C.Z.cloneCollection(this.get("id")):R=_.default.post("/api/commondata/CopyCollection",E().stringify({collectionId:this.get("id"),processPointedCollectionItems:!0},{arrayFormat:"repeat"})).then(function(w){return w.data}),R.then((function(w){var k,q;T?(k=w.collection,q={collection:w.collection,itemFullUrl:w.itemFullUrl}):(k=w,q=w.id),this.setAttrs(A.merge({mainImageId:null,mainImage:null,seoSocialSharingImage:null},k));var F=k.id,z=e.Z.getHomepageCollectionId();z===x?C.Z.setHomepage(F).then(function(j){j.error?P():N(q)}):N(q)}).bind(this)).catch(function(w){P(w)})},this));return B.then(A.bind(function(){this.fire("clonedExampleContent",{silent:!!D.silent})},this)),B},_shouldCloneCollection:function(){return this.get("isDemoCollection")&&this.get("type")===u().COLLECTION_TYPE_PAGE},deleteTrashItems:function(D){A.Data.del({url:"/api/recycle-bin/collection/"+this.get("id")+"/items",success:function(T){D(T,null)},failure:function(T){D(null,T)}})},getId:function(){return this.get("id")},_set:function(D,T,B){return this.constructor.superclass._set.call(this,D,T,B)}},{ATTRS:{dirty:{value:!1},body:{value:null},navigationTitle:{validator:A.Lang.isString},description:{value:{html:"",source:""}},websiteId:{},id:{value:null},enabled:{value:!0,validator:A.Lang.isBoolean},deleted:{value:!1,validator:A.Lang.isBoolean},homepage:{validator:A.Lang.isBoolean},starred:{validator:A.Lang.isBoolean},synchronizing:{validator:A.Lang.isBoolean},updatedOn:{},folder:{value:!1},isDemoCollection:{getter:function(){return A.Squarespace.ContentCollectionUtils.isDemoCollectionId(this.get("id"))}},itemCount:{validator:A.Lang.isNumber},isEmpty:{getter:function(){return this.items&&this.items.size()===0}},tags:{value:[],validator:A.Lang.isArray},categories:{value:[],validator:A.Lang.isArray},pageSize:{validator:A.Lang.isNumber,valueFn:function(){if(this.getTemplateConfiguration().get("ordering")===m().CHRONOLOGICAL)return 20}},itemLimit:{value:20,validator:A.Squarespace.AttrValidators.isNumber},ordering:{validator:function(D){return A.Object.values(m()).includes(D)}},type:{validator:function(D){return A.Object.values(u()).includes(D)}},typeName:{validator:A.Lang.isString},video:{validator:A.Lang.isObject},fullUrl:{validator:A.Lang.isString},nextDisplayIndex:{getter:function(){return this.get("itemCount")}},regionName:{value:"default",validator:function(D){return!A.Lang.isString(D)||D.length===0?!1:A.Object.keys(a.default.getState().layouts).includes(D)}},title:{validator:A.Lang.isString},urlId:{validator:A.Squarespace.AttrValidators.isNullOrString},pagePermissionType:{value:null},memberAreaIds:{value:[]}}});A.Squarespace.Models.ContentCollectionList=A.Base.create("Collections",A.ModelList,[],{model:A.Squarespace.Models.ContentCollection,sync:function(D,T,B){D==="read"&&r.Z.readAll().then(function(N){B(null,N)},function(N){B(N,null)}).catch(this._errorHandler)},getCollectionById:function(D,T,B){var N=this.getById(D);N?T.call(B,N):(N=new A.Squarespace.Models.ContentCollection({id:D}),N.load({},function(){this.add(N),T.call(B,N)},this))},getCollectionFromData:function(D,T){if(!D)return null;if(!D.id)throw new Error("getCollectionFromData needs at least an ID in the data to work.");var B=this.getById(D.id);return B?T||B.setAttrs(D):B=this.add(new A.Squarespace.Models.ContentCollection(D)),B}}),(0,O.F)(A)?A.Squarespace.ContentCollectionCache=A.config.win.top.Y.Squarespace.ContentCollectionCache:A.Squarespace.ContentCollectionCache=new A.Squarespace.Models.ContentCollectionList},"2.0",{requires:["base","model","model-list","promise","squarespace-content-collection-utils","squarespace-models-collection-configuration","squarespace-models-content-item","squarespace-models-content-item-list","squarespace-util","squarespace-util-authenticated"]})},889857:function(c,b,t){"use strict";var l=t(699027);YUI.add("squarespace-models-content-item-list",function(d){d.namespace("Squarespace.Models");var o=d.Squarespace.Models.ContentItemList=d.Base.create("ContentItemList",d.ModelList,[d.Squarespace.Mixins.EventList],{initializer:function(e){this.model=d.Squarespace.Models.ContentItem,e=e||{};var a=e.items;a&&this.reset(a)},sync:function(e,a,r){switch(e){case"read":this._read(a,r);break;case"create":case"delete":case"update":break}},load:function(e,a){if(this.get("isChildItemList"))throw new Error("Squarespace.Models.ContentItemList: Child items are loaded with their parent item. Loading them manually is not supported");o.superclass.load.call(this,e,a)},removeItems:function(e,a,r){this.remove(e,{source:"bulk-remove"});var s=d.Array.map(e,function(u){var h=u.get("id");return u.destroy(),h},this),n=(function(u){this.get("parent").load(),d.Lang.isFunction(a)&&a(null,u),this.fire("bulk-remove",e)}).bind(this),i=function(u){d.Lang.isFunction(a)&&a(u,null)};r?r(e).then(function(u){n(u)}).catch(function(u){i(u)}):d.Data.post({url:"/api/commondata/RemoveItems",data:{items:s},success:function(u){n(u)},failure:function(u){i(u)}},this)},moveItems:function(e,a,r){if(this.get("isChildItemList"))throw new Error("Squarespace.Models.ContentItemList: Moving child items is not currently supported.");var s=d.Array.map(e,function(h){var g=this.getById(h.get("id"));return g!==null?this.remove(this.getById(h.get("id"))):h},this),n=a.get("id"),i=a.items;i.load(d.bind(function(){i.add(s)},this));var u=d.Array.map(s,function(h){return h.set("collectionId",n),h.get("items").each(function(g){g.set("collectionId",n)}),h.get("id")},this);d.Data.post({url:"/api/commondata/MoveItems",data:{toCollectionId:n,items:u},success:function(h){this.get("parent").load(),d.Lang.isFunction(r)&&r(null,h),this.fire("move-items",e,a)},failure:function(h){d.Lang.isFunction(r)&&r(h,null)}},this)},reorderItems:function(e,a,r){var s=this.get("parent"),n={};this.get("isChildItemList")?(n.collectionId=s.get("collectionId"),n.parentId=s.get("id")):n.collectionId=s.get("id");var i=e.length===1,u;if(i){var h=e[0];u=this.indexOf(this.getById(h.get("id"))),this._reorder([h],a),a!==0&&(n.afterId=this.item(a-1).get("id")),n.itemId=h.get("id")}else{this._reorder(e,a),a!==0&&(n.afterId=this.item(a-1).get("id"));var g=d.Array.map(e,function(f){return f.get("id")},this);n.itemIds=d.JSON.stringify(g)}var p=d.bind(function(f){d.Data.post({url:"/api/commondata/ReorderItems",data:f,success:function(m){i&&(u===0||a===0)&&s.load(),d.Lang.isUndefined(m.items)||d.Array.each(m.items,function(_,v){var E=this.getById(_.id);E&&E.set("displayIndex",_.displayIndex)},this),this.fire("reordered"),d.Lang.isFunction(r)&&r(null,m),this._reorderQueue.size()>0&&p(this._reorderQueue.next())},failure:function(m){d.Lang.isFunction(r)&&r(m,null)}},this)},this);this._reorderQueue||(this._reorderQueue=new d.Queue),this._reorderQueue.add(n),p(this._reorderQueue.next())},_reorder:function(a,r){var s=a.map(function(i){return this.getById(i.get("id"))},this).filter(Boolean);this.remove(s,{onReorder:!0,source:"reorder"}),this.add(s,{onReorder:!0,source:"reorder",index:r})},_read:function(e,a){d.Data.get({url:this._getReadUrl(),data:d.merge({limit:this.get("limit")},e),success:function(r){var s={hasNextPage:r.hasNextPage,hasPreviousPage:r.hasPreviousPage,nextPageStart:r.nextPageStart,previousPageStart:r.previousPageStart};this.set("pagination",s),a(null,r.results)},failure:function(r){a(r,null)}},this)},_getReadUrl:function(){var e=this.get("parent"),a=l.Tg(e.get("ordering"),e.get("type"));return d.Lang.sub(a,{collectionId:e.get("id")})}},{ATTRS:{parent:{value:null,validator:function(e){return e instanceof d.Squarespace.Models.ContentCollection||e instanceof d.Squarespace.Models.ContentItem}},isChildItemList:{getter:function(){var e=this.get("parent");return e instanceof d.Squarespace.Models.ContentItem}},pagination:{value:null},limit:{value:20,validator:d.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","json","model-list","squarespace-content-collection-utils","squarespace-mixins-event-list","squarespace-models-content-collection","squarespace-models-content-item","squarespace-util"]})},135943:function(c,b,t){"use strict";var l=t(726692),d=t.n(l),o=t(629266),e=t.n(o),a=t(586745),r=t.n(a),s=t(44348),n=t.n(s),i=t(522364),u=t(637635),h=t(829499),g=t(699027),p=t(759352);YUI.add("squarespace-models-content-item",function(f){f.namespace("Squarespace.Models");var m=f.Squarespace.Models.ContentItem=f.Base.create("Item",f.Model,[],{sync:function(_,v,E){switch(_){case"delete":this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._delete.bind(this,E));break;case"read":this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._read.bind(this,v,E));break;case"update":this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._save.bind(this,E));break;case"create":this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then(this._create.bind(this,v,E));break}},_errorHandler:function(_){console.error(_.stack)},_save:function(_,v){var E=this.serialize();E.id||this._create(_),E.collectionId?i.Z.updateForCollection(E,v).then(function(S){_(null,S)},function(S){_(S,null)}).catch(this._errorHandler):i.Z.update(E).then(function(S){_(null,S)},function(S){_(S,null)}).catch(this._errorHandler)},_create:function(_,v,E){var S=this.serialize();S.collectionId?i.Z.createForCollection(S,_,E).then(function(y){v(null,y)},function(y){v(y,null)}).catch(this._errorHandler):i.Z.create(S,_).then(function(y){v(null,y)},function(y){v(y,null)}).catch(this._errorHandler)},_delete:function(_,v){i.Z.delete(this.get("id"),v).then(function(E){_(null,E)},function(E){_(E,null)}).catch(this._errorHandler)},_read:function(_,v,E){if(this.get("isGlobalFakeContentItem")){this._readGlobalFakeContentItem(this.get("id"),_,v);return}this._readInProgress=!0,u.Z.fetchFromServer(this.get("id"),!1,E).then((function(S){this._readInProgress=!1;var y=S.toJS?S.toJS():S;y&&y.recordType&&this.set("recordType",y.recordType),v(null,y)}).bind(this),(function(S){this._readInProgress=!1,v(S,null)}).bind(this)).catch(this._errorHandler)},_readGlobalFakeContentItem:function(_,v,E){f.Data.get({url:"/api/rest/global-content-items/"+_,success:function(S){E(null,S)},failure:function(S){E(S,null)}},this)},_getUrlDeterminants:function(_){var v={recordType:this.get("recordType")};return _&&(v.collectionOrdering=_.get("ordering"),v.collectionType=_.get("type"),v.collectionId=_.get("id"),v.parentId=this.get("parentId")),v},resetToLastRead:function(_,v){return u.Z.fetchFromServer(this.get("id")).then((function(E){this.setAttrs(E.toJS()),_()}).bind(this)).catch((function(E){v(),this._errorHandler(E)}).bind(this))},initializer:function(_){this._needsJobListener()&&this._bindJobListener(),this._updateNextDisplayIndex();var v=this.get("items");v.after(["add","remove"],function(){this._updateNextDisplayIndex()},this),this.items=v},destructor:function(){this._jobListener&&(this._jobListener.detach(),this._jobListener=null)},getParentCollection:function(){return new f.Promise((function(_,v){var E=this.get("collectionId");E?f.Squarespace.ContentCollectionCache.getCollectionById(E,_):_(null)}).bind(this))},toJSON:function(){var _=m.superclass.toJSON.call(this),v=_.structuredContent;return f.Lang.isValue(v)&&(_.structuredContent=v.toJSON()),_.items=_.items.toJSON(),f.Lang.isObject(_.pushedServices)&&(_.pushedServices=f.Object.keys(_.pushedServices)),f.Lang.isObject(_.pendingPushedServices)&&(_.pendingPushedServices=f.Object.keys(_.pendingPushedServices)),_},serialize:function(){var _=this.toJSON();return delete _.items,delete _.author,delete _.fullUrl,delete _.assetUrl,delete _.resolved,delete _.postItemInjectCode,delete _.promotedBlock,delete _.promotedBlockType,delete _.nextDisplayIndex,delete _.mediaIsUploading,delete _.hasFileData,delete _.isGlobalFakeContentItem,delete _.childrenGroups,delete _.colorData,delete _.mainImage,delete _.gallery,this._normalizeDates(_),this._attachCommentingToData(_),this._attachWorkflowToData(_),this._updateStructuredContent(_),_},_updateStructuredContent:function(_){_.structuredContent&&_.startDate&&(_.structuredContent=f.merge(_.structuredContent,{startDate:_.startDate,endDate:_.endDate}))},_getWorkflowStateForString:function(_){var v={published:n().PUBLISHED,scheduled:n().SCHEDULED,needsreview:n().NEEDS_REVIEW,draft:n().DRAFT};return f.Object.getValue(v,_)},_attachWorkflowToData:function(_){f.Lang.isValue(_.workflow)&&(_.workflowState=this._getWorkflowStateForString(_.workflow.state),_.publishOn=_.workflow.date,delete _.workflow)},_attachCommentingToData:function(_){if(f.Lang.isValue(_.commenting)){var v=_.commenting.state==="allow"?"ENABLED":"DISABLED";_.commentState=d()[v],_.commentDisableOn=_.commenting.date,delete _.commenting}},_normalizeDates:function(_){var v=["addedOn","publishOn","updatedOn","commentDisableOn","startDate","endDate"];f.Array.each(v,function(E,S){f.Lang.isDate(_[E])&&(_[E]=_[E].getTime())},this)},save:function(_,v){this.isNew()||!(f.Lang.isObject(_)&&_.fields)?m.superclass.save.call(this,_,v):this._saveFields(_.fields,v)},autoSave:function(_,v){f.Lang.isFunction(_)?(v=_,_={}):f.Lang.isValue(_)||(_={}),_.headers=f.merge(_.headers,{"X-AutoSave":!0}),this.save(_,v)},clearFileData:function(_){this.setAttrs({systemDataId:null,systemDataOrigin:null,mediaProcessingState:null,systemDataSourceType:null,systemDataVariants:null,filename:null}),this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then((function(v){var E=this.get("id"),S=g.GQ(v).replace("{id}",E);f.Data.del({url:S,data:{itemId:E}})}).bind(this))},clearChildGroup:function(_,v){f.Data.post({url:"/api/commondata/ClearChildGroup",data:{childType:_,itemId:this.get("id")},success:function(E){f.Lang.isFunction(v)&&v(null,E)},failure:function(E){f.Lang.isFunction(v)&&v(E,null)}})},getAssetUrlForFormat:function(_){return f.Lang.sub("{assetUrl}?format={format}",{assetUrl:this.get("assetUrl"),format:_})},getId:function(){return this.get("id")},isLicensedAssetPreview:function(){return f.Lang.isValue(this.get("licensedAssetPreview"))},isLicensedAsset:function(){return f.Lang.isValue(this.get("licensedAssetId"))},getMainImageUploadUrl:function(_){this.getParentCollection().then(this._getUrlDeterminants.bind(this)).then((function(v){_(g.Jk(v).replace("{id}",this.get("id")))}).bind(this))},_needsJobListener:function(){var _=this.get("mediaProcessingState");return _===e().QUEUED||_===e().PROCESSING},_bindJobListener:function(){!Static||!Static.JOB_MANAGER||(this._jobListener=f.config.win.Static.JOB_MANAGER.on("completed",function(_){var v=_.job,E=this.get("id"),S=v.get("data.contentItemId"),y=v.get("data.globalContentItemId");S===E?(this.load({forceReload:!0}),this._jobListener.detach()):f.Lang.isValue(y)&&y===E&&(this._readGlobalFakeContentItem(y,{},(function(C,O){C||(this.set("assetUrl",O.assetUrl),this.setAttrs(O))}).bind(this)),this._jobListener.detach())},this))},_updateNextDisplayIndex:function(){var _=0;this.get("items").each(function(v){var E=v.get("displayIndex");E>=_&&(_=E+1)},this),this._set("nextDisplayIndex",_)},_saveFields:function(_,v){if(_.length>1)throw new Error("Saving multiple fields is not currently supported.");var E=_[0];i.Z.updateField(this.get("id"),E,this.get(E)).then(function(S){f.Lang.isFunction(v)&&v(null,S.item)},function(S){f.Lang.isFunction(v)&&v.call(S,null)}).catch(this._errorHandler)},_getStructuredContentCtor:function(){switch(this.get("recordType")){case r().AUDIO:return f.Squarespace.Models.Audio;case r().EVENT:return f.Squarespace.Models.CalendarEvent;case r().CHECKIN:return f.Squarespace.Models.CheckIn;case r().VIDEO:return f.Squarespace.Models.Embed;case r().KBARTICLE:return f.Squarespace.Models.KBArticle;case r().LINK:return f.Squarespace.Models.Link;case r().QUOTE:return f.Squarespace.Models.Quote;case r().STORE_ITEM:return f.Squarespace.Models.StoreItem;case r().TWEET:return f.Squarespace.Models.Tweet;default:return null}}},{ATTRS:{id:{value:null},collectionId:{value:null},parentId:{value:null},authorId:{valueFn:function(){var _=f.Object.getValue(Static,["SQUARESPACE_CONTEXT","authenticatedAccount"]);return _?_.id:null}},proxyForId:{value:null},recordType:{validator:f.Squarespace.AttrValidators.isValueIn(r()),writeOnce:!0},childType:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},addedOn:{valueFn:function(){return new Date().getTime()},validator:f.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"},updatedOn:{value:null,validator:f.Squarespace.AttrValidators.isNullOrNumber},publishOn:{valueFn:function(){return new Date().getTime()},validator:f.Squarespace.AttrValidators.isNumber},unsaved:{value:null,validator:f.Squarespace.AttrValidators.isNullOrBoolean},urlId:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},title:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},body:{value:null,setter:function(_){return f.merge(this.get("body"),_)},validator:f.Squarespace.AttrValidators.isNullOrObject},excerpt:{value:{html:"",raw:!1},validator:f.Squarespace.AttrValidators.isNullOrObject},displayIndex:{value:0,validator:f.Squarespace.AttrValidators.isNumber},starred:{value:!1,validator:f.Squarespace.AttrValidators.isBoolean},passthrough:{value:!1,validator:f.Squarespace.AttrValidators.isBoolean},tags:{value:[],validator:f.Squarespace.AttrValidators.isArray},categories:{value:[],validator:f.Squarespace.AttrValidators.isArray},workflowState:{value:n().DRAFT,validator:f.Squarespace.AttrValidators.isValueIn(n())},systemDataId:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},systemDataVariants:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},systemDataOrigin:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},contentType:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},filename:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},dataSize:{value:null,validator:f.Squarespace.AttrValidators.isNullOrNumber},sourceUrl:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},mediaProcessingState:{value:null,validator:f.Squarespace.AttrValidators.isNullOr(f.Squarespace.AttrValidators.isValueIn(e()))},mediaFocalPoint:{value:{x:.5,y:.5},setter:function(_){if(f.Lang.isString(_)){_=_.split(",");var v=parseFloat(_[0]),E=parseFloat(_[1]);return{x:!isNaN(v)&&v<=1?v:.5,y:!isNaN(E)&&E<=1?E:.5}}return _}},colorData:{value:null,validator:f.Squarespace.AttrValidators.isNullOrObject},clickthroughUrl:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},location:{value:null,validator:f.Squarespace.AttrValidators.isNullOrObject},customContent:{value:null},likeCount:{value:0,validator:f.Squarespace.AttrValidators.isNumber},dislikeCount:{value:0,validator:f.Squarespace.AttrValidators.isNumber},commentCount:{value:0,validator:f.Squarespace.AttrValidators.isNumber},publicCommentCount:{value:0,validator:f.Squarespace.AttrValidators.isNumber},commentState:{valueFn:function(){var _=h.default.getState(),v=_.commentEnableByDefault,E=_.commentsEnabled;return v&&E?d().ENABLED:d().DISABLED},validator:f.Squarespace.AttrValidators.isValueIn(d())},commentDisableOn:{valueFn:function(){var _=f.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","commentDisableAfterDaysDefault"]);return _?f.Date.addDays(new Date,_).getTime():null},validator:f.Squarespace.AttrValidators.isNullOrNumber},pushedServices:{value:{},validator:f.Squarespace.AttrValidators.isObject},shareStates:{value:[]},structuredContent:{valueFn:function(){var _=this._getStructuredContentCtor();return f.Lang.isNull(_)?null:new _},setter:function(_){if(_ instanceof f.Squarespace.Models.StructuredContent)return _;var v=this._getStructuredContentCtor();return f.Lang.isNull(v)?null:new v(_)}},items:{valueFn:function(){return new f.Squarespace.Models.ContentItemList({parent:this})},setter:function(_){var v=this.get("items");return f.Lang.isValue(v)?(v.reset(_),v):_ instanceof f.Squarespace.Models.ContentItemList?_:new f.Squarespace.Models.ContentItemList({items:_,parent:this})}},childrenGroups:{value:{},validator:f.Squarespace.AttrValidators.isObject},author:{value:null,validator:f.Squarespace.AttrValidators.isNullOrObject},fullUrl:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},assetUrl:{value:null,getter:function(_){return p.Bw()?p.is(_):_},validator:f.Squarespace.AttrValidators.isNulLOrString},resolved:{value:!1,validator:f.Squarespace.AttrValidators.isBoolean},postItemInjectCode:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},promotedBlock:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},promotedBlockType:{value:null,validator:f.Squarespace.AttrValidators.isNullOrString},nextDisplayIndex:{value:0,validator:f.Squarespace.AttrValidators.isNumber,readOnly:!0},mediaIsUploading:{value:!1,validator:f.Squarespace.AttrValidators.isBoolean},hasFileData:{value:!1,validator:f.Squarespace.AttrValidators.isBoolean},isGlobalFakeContentItem:{value:!1,validator:f.Squarespace.AttrValidators.isBoolean},licensedAssetPreview:{value:null,validator:f.Squarespace.AttrValidators.isNullOrObject},licensedAssetId:{value:null,validator:f.Lang.isString},isPusher:{value:!0,readOnly:!0,validator:f.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","json","model","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-models-audio","squarespace-models-calendar-event","squarespace-models-check-in","squarespace-models-content-collection","squarespace-models-content-item-list","squarespace-models-embed","squarespace-models-kb-article","squarespace-models-link","squarespace-models-quote","squarespace-models-store-item","squarespace-models-tweet","squarespace-util"]})},806396:function(){YUI.add("squarespace-models-content-stats",function(c){c.namespace("Squarespace.Models"),c.Squarespace.Models.ContentStats=c.Base.create("contentStats",c.Model,[c.Squarespace.ModelSync.REST],{root:c.Squarespace.REST_API_ROOT+"content-stats",getTagsAsStringArray:function(){return this._toNameArray(this.get("tagList"))},getCategoriesAsStringArray:function(){return this._toNameArray(this.get("categoryList"))},_toNameArray:function(b){var t=[];return c.Lang.isArray(b)&&c.Array.each(b,function(l){c.Lang.isString(l.name)&&t.push(l.name)}),t}},{ATTRS:{id:{value:null,validator:c.Lang.isString},websiteId:{value:null,validator:c.Lang.isString},collectionId:{value:null,validator:c.Lang.isString},tagList:{value:[],validator:c.Lang.isArray},categoryList:{value:[],validator:c.Lang.isArray}}}),c.Squarespace.Models.ContentStatsList=c.Base.create("contentStatsList",c.ModelList,[c.Squarespace.ModelSync.REST],{model:c.Squarespace.Models.ContentStats,getByCollectionId:function(b){var t;return this.each(function(l){l.get("collectionId")===b&&(t=l)}),t}}),c.Squarespace.ContentStatsCache=new c.Squarespace.Models.ContentStatsList},"1.0",{requires:["base","model","model-list","squarespace-util","squarespace-model-sync-rest"]})},366099:function(){YUI.add("squarespace-models-data-table",function(c){c.namespace("Squarespace.Models"),c.Squarespace.Models.DataTable=c.Base.create("data-table",c.Model,[c.Squarespace.ModelSync.REST],{root:c.Squarespace.API_ROOT+"datatable",url:c.Squarespace.API_ROOT+"datatable/{id}",serialize:function(){var b=this.toJSON();return c.JSON.stringify(b)}},{ATTRS:{id:{value:null},data:{value:[],validator:c.Squarespace.AttrValidators.isArray},sampleLabels:{value:[],validator:c.Squarespace.AttrValidators.isArray},seriesLabels:{value:[],validator:c.Squarespace.AttrValidators.isArray}}}),c.Squarespace.Models.DataTableList=c.Base.create("dataTableList",c.ModelList,[c.Squarespace.ModelSync.REST],{model:c.Squarespace.Models.DataTable,filterByType:function(b){return this.filter(function(t){return t.get("type")===b})}}),c.Squarespace.DataTableCache=new c.Squarespace.Models.DataTableList},"1.0",{requires:["base","json","model","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-util"]})},960719:function(){YUI.add("squarespace-models-donate-page",function(c){c.namespace("Squarespace.Models");var b=c.Squarespace.Models.DonatePage=c.Base.create("DonatePage",c.Model,[c.Squarespace.ModelSync.REST],{root:"/api/rest/commerce/donate-pages",url:"/api/rest/commerce/donate-pages/{id}",toJSON:function(){var t=b.superclass.toJSON.call(this);return c.Lang.isObject(t.customForm)&&(t.customForm={fields:c.Array.map(t.customForm,JSON.stringify)}),t}},{ATTRS:{title:{validator:c.Squarespace.AttrValidators.isString},suggestedContributions:{validator:c.Squarespace.AttrValidators.isArray},customForm:{validator:c.Squarespace.AttrValidators.isObject},buttonLabel:{validator:c.Squarespace.AttrValidators.isString},queuedSubmitEnabled:{validator:c.Squarespace.AttrValidators.isNullOrBoolean},customConfirmationPageUrl:{validator:c.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest"]})},832777:function(){YUI.add("squarespace-models-embed",function(c){c.namespace("Squarespace.Models"),c.Squarespace.Models.Embed=c.Base.create("Embed",c.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Embed",validator:function(b){return b==="Embed"},readOnly:!0},embed:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},oembed:{value:null,validator:c.Squarespace.AttrValidators.isNullOrObject},overlay:{value:!0,validator:c.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},992886:function(c,b,t){"use strict";var l=t(714487),d=t(259093),o=t.n(d),e=t(649315),a=t.n(e),r=t(953203),s=t.n(r),n=t(481312),i=t(43594),u=t.n(i);function h(p,f){if(!Array.isArray(p)||!p.length)return[];const m=f.map(_=>_.backendType);return p.reduce((_,v)=>(m.includes(v.backendType)||_.push(v.backendType),_),[])}function g(){let{formId:p,connections:f=[],legacyDefaults:m={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const _=f.reduce((v,E)=>{const{backendId:S,backendType:y,config:C,connectionState:O,socialConfig:A}=E;if(!S&&y!==FormBackendConnectionType.ZAPIER)return v;switch(y){case FormBackendConnectionType.CAMPAIGNS:v.campaignsConnect={connectionState:FormBackendConnectionState.CONNECTED,useSingleOptIn:!!(C&&C.useSingleOptIn==="true"),listId:S};break;case FormBackendConnectionType.EMAIL:v.emailConnect={connectionState:O,email:S};break;case FormBackendConnectionType.ZAPIER:v.zapierConnect={connectionState:O,url:S};break;case FormBackendConnectionType.GOOGLE:v.googleDocsConnect={connectionState:O,username:A.profileUserName,spreadsheetName:C.spreadsheetName||m.googleSpreadsheetName,socialConfig:A};break;case FormBackendConnectionType.MAILCHIMP:v.mailchimpConnect={connectionState:O,list:S,username:A.profileUserName||m.mailchimpUsername,useSingleOptIn:!!(C&&C.useSingleOptIn==="true"),socialConfig:A};break;default:v.errors=v.errors||[],v.errors.push(E);break}return v},{});if(!p){const{email:v}=window.Static.SQUARESPACE_CONTEXT.authenticatedAccount;v&&!_.emailConnect&&(_.emailConnect={connectionState:FormBackendConnectionState.CONNECTED,email:v})}return _}YUI.add("squarespace-models-form-base",function(p){var f=function(m){if(p.Lang.isArray(m))return m;var _=[];return p.Object.each(m,function(v,E){v&&(v.connectionState===u().CONNECTED||v.connectionState===u().PENDING)&&_.push(p.merge({_type:E},v))}),_};p.namespace("Squarespace.Models"),p.Squarespace.Models.FormBase=p.Base.create("formBase",p.Model,[p.Squarespace.ModelSync.REST],{root:p.Squarespace.REST_API_ROOT+"forms",url:p.Squarespace.REST_API_ROOT+"forms/{id}",serialize:function(){var m=this.toJSON();m.fields=p.Array.map(m.fields,function(v){return p.JSON.stringify(v)}),m.submissionMessage=p.JSON.stringify(m.submissionMessage),m.disclaimerMessage=p.JSON.stringify(m.disclaimerMessage);var _=m.backendConnectionConfigs;return delete m.backendConnectionConfigs,delete m.connectedBackends,{form:m,backendConnectionConfigs:_||[],removedBackends:this.get("removedConnectedBackends")}},getConnBackend:function(m){var _=this.get("connectedBackends");return p.Lang.isValue(_)?p.Array.filter(_,function(v){return v.backendType===m}):[]}},{ATTRS:{id:{value:null},type:{value:o().FORM_BLOCK,validator:p.Squarespace.AttrValidators.isValueIn(o())},name:{value:(0,l.t)("New Form",null,{project:"scripts-v6.models"}),validator:p.Squarespace.AttrValidators.isString},fields:{value:[],setter:function(m){return p.Array.map(m,function(_){return p.Lang.isString(_)?p.JSON.parse(_):_},this)},validator:p.Squarespace.AttrValidators.isArray},connectedBackends:{value:null,validator:p.Squarespace.AttrValidators.isNullOrArray},submitButtonText:{value:(0,l.t)("Submit",null,{project:"scripts-v6.models"}),validator:p.Squarespace.AttrValidators.isString},submissionMessage:{value:{html:(0,l.t)("Thank you!",null,{project:"scripts-v6.models"})},setter:function(m){return p.Lang.isString(m)?p.JSON.parse(m):m}},disclaimerMessage:{valueFn:function(){return this.get("type")===o().NEWSLETTER_BLOCK||this.get("type")===o().SLIDE?{html:(0,l.t)("We respect your privacy.",null,{project:"scripts-v6.models"})}:{html:""}},setter:function(m){return p.Lang.isString(m)?p.JSON.parse(m):m}},submissionHTML:{value:null,validator:p.Squarespace.AttrValidators.isNullOrString},successRedirect:{value:"",setter:function(m){if(m){if(typeof m=="string")return m;if(typeof m=="object")return m.url}return""},validator:p.Squarespace.AttrValidators.isNullOrString},backendConnectionConfigs:{value:[],setter:function(m){var _=f(m);return this.set("removedConnectedBackends",h(this.get("connectedBackends"),_)),p.Array.filter(_,function(v){return v.connectionState===u().CONNECTED})}},removedConnectedBackends:{value:[],validator:p.Squarespace.AttrValidators.isArray},captchaEnabled:{value:!1,validator:p.Squarespace.AttrValidators.isBoolean},captchaTheme:{value:s().LIGHT,validator:p.Squarespace.AttrValidators.isValueIn(s())},captchaAlignment:{value:a().LEFT,validator:p.Squarespace.AttrValidators.isValueIn(a())}}})},"1.0",{requires:["base","json","model","model-list","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-util"]})},742122:function(){YUI.add("squarespace-models-form",function(c){c.namespace("Squarespace.Models");var b=c.Squarespace.Models.Form=c.Base.create("form",c.Squarespace.Models.FormBase,[],{serialize:function(){var t=b.superclass.serialize.call(this);return c.JSON.stringify(t)}});c.Squarespace.Models.FormList=c.Base.create("formList",c.ModelList,[c.Squarespace.ModelSync.REST],{model:c.Squarespace.Models.Form,filterByType:function(t){return this.filter(function(l){return l.get("type")===t})}}),c.Squarespace.FormCache=new c.Squarespace.Models.FormList},"1.0",{requires:["base","json","model","model-list","squarespace-model-sync-rest","squarespace-models-form-base"]})},162762:function(){YUI.add("squarespace-models-geo-location",function(c){var b=40.72,t=-74;c.namespace("Squarespace.Models"),c.Squarespace.Models.GeoLocation=c.Base.create("GeoLocation",c.Model,[],{},{ATTRS:{mapZoom:{value:10,validator:c.Squarespace.AttrValidators.isNumber},mapLat:{value:b,validator:c.Squarespace.AttrValidators.isNumber},mapLng:{value:t,validator:c.Squarespace.AttrValidators.isNumber},markerLat:{value:b,validator:c.Squarespace.AttrValidators.isNumber},markerLng:{value:t,validator:c.Squarespace.AttrValidators.isNumber},addressTitle:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},addressLine1:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},addressLine2:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},addressCountry:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},66873:function(){YUI.add("squarespace-models-growable-model-list",function(c){c.namespace("Squarespace.Models");var b=c.Squarespace.Models.GrowableModelList=c.Base.create("GrowableModelList",c.Squarespace.Models.ModelList,[],{initializer:function(){c.Do.after(function(){this._ioRequest=c.Do.originalRetVal},this,"_sendSyncIORequest",this)},reset:function(){this._ioRequestInProgress()&&this._ioRequest.abort(),this._set("hasNextPage",!1),this.get("paginator").firstPage(),b.superclass.reset.apply(this,arguments)},_getResponseAttrs:function(t){return c.merge(b.superclass._getResponseAttrs.call(this,t),{hasNextPage:t.hasNextPage})},getURL:function(t,l){var d=b.superclass.getURL.call(this,t,l);return this.get("paginator").paginateURL(d)},refresh:function(t,l){this.reset(),this.load(t,l)},loadMore:function(t,l){this._ioRequestInProgress()||(this.get("paginator").nextPage(),this.load(t,l))},load:function(t,l){return c.Lang.isFunction(t)&&(l=t,t={}),t=t||{},this.sync("read",t,c.bind(function(d,o){var e={options:t,response:o},a;d?(e.error=d,e.src="load",this.set("lastError",{message:d,timestamp:Date.now(),attempts:this.get("error")?this.get("error").attempts+1:1}),this.fire("error",e)):(this.set("lastError",null),this._loadEvent||(this._loadEvent=this.publish("load",{preventable:!1})),a=e.parsed=this._parse(o),this.add(a,t),this.fire("load",e)),l&&l.apply(null,arguments)},this)),this},_ioRequestInProgress:function(){return this._ioRequest&&this._ioRequest.isInProgress()}},{ATTRS:{paginator:{valueFn:function(){return new c.Squarespace.Models.Paginator},validator:c.Squarespace.AttrValidators.isInstanceOf(c.Squarespace.Models.Paginator)},hasNextPage:{value:!1,validator:c.Squarespace.AttrValidators.isBoolean,readOnly:!0},lastError:{value:null}}})},"1.0",{requires:["squarespace-attr-validators","squarespace-models-model-list","squarespace-models-paginator"]})},121564:function(){YUI.add("squarespace-models-kb-article",function(c){c.namespace("Squarespace.Models"),c.Squarespace.Models.KBArticle=c.Base.create("KBArticle",c.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"KBArticle",validator:function(b){return b==="KBArticle"},readOnly:!0},upVotes:{value:0,validator:c.Squarespace.AttrValidators.isNumber},downVotes:{value:0,validator:c.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},288208:function(){YUI.add("squarespace-models-layout-block-field",function(c){c.namespace("Squarespace.Models").BlockField=c.Base.create("BlockField",c.Model,[c.Squarespace.ModelSync.REST,c.Squarespace.Models.Layout.ECBBackedModelSanitizerMixin],{url:c.Squarespace.API_ROOT+"block-fields/{widgetName}",root:c.Squarespace.API_ROOT+"block-fields",idAttribute:"widgetName"},{ATTRS:{widgetName:{validator:c.Lang.isString}}})},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-models-layout-ec-backed-model-sanitizer-mixin"]})},988792:function(){YUI.add("squarespace-models-layout-ec-backed-model-sanitizer-mixin",function(c){c.namespace("Squarespace.Models.Layout"),c.Squarespace.Models.Layout.ECBBackedModelSanitizerMixin=c.Base.create("ECBBackedModelSanitizerMixin",c.Base,[],{parse:function(b){return b=c.Model.prototype.parse.call(this,b),c.Lang.isObject(b)?(c.Lang.isObject(b.data)||(b.data={layout:{columns:12,rows:[]}}),b):{}},isLayoutEmpty:function(){return this.get("data").get("layout").isEmpty()},isLayoutBlank:function(){return this.get("data").get("layout").isBlank()},_setData:function(b){var t=this.get("data");return c.instanceOf(t,c.SQS.LayoutEngine.Models.EditableContentBlock)?(t.setAttrs(b),t):c.instanceOf(b,c.SQS.LayoutEngine.Models.EditableContentBlock)?b:new c.SQS.LayoutEngine.Models.EditableContentBlock(b)}},{ATTRS:{data:{value:{},setter:"_setData"}}})},"1.0",{requires:["base","model","@sqs/layout-engine/models-layout"]})},862430:function(c,b,t){"use strict";var l=t(657300);YUI.add("squarespace-models-layout-page-collection-data",function(d){d.namespace("Squarespace.Models");var o=d.Squarespace.Models.PageCollectionData=d.Base.create("Layout",d.Model,[d.Squarespace.Models.Layout.ECBBackedModelSanitizerMixin],{toJSON:function(){var e=o.superclass.toJSON.call(this);return delete e.collection,e.data=this.getDataInJSON(),e},getDataInJSON:function(){return this.get("data").toJSON()},sync:function(e,a,r){var s=this.get("collectionId"),n;switch(e){case"read":n=l.Z.getPageCollectionData(s);break;case"update":n=l.Z.savePageCollectionData(s,this.toJSON());break;case"create":n=l.Z.createPageCollectionData(s,this.toJSON())}n&&typeof r=="function"&&n.then(r.bind(this,null)).catch(r.bind(this))}},{ATTRS:{collectionId:{getter:function(){return this.get("collection").get("id")}},collection:{},websiteId:{getter:function(){return this.get("collection").get("websiteId")}}}})},"1.0",{requires:["base","model","squarespace-models-layout-ec-backed-model-sanitizer-mixin"]})},897023:function(){YUI.add("squarespace-models-link",function(c){c.namespace("Squarespace.Models"),c.Squarespace.Models.Link=c.Base.create("Link",c.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Link",validator:function(b){return b==="Link"},readOnly:!0},url:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},881754:function(c,b,t){"use strict";var l=t(130399),d=t.n(l),o=t(203027),e=t(474698),a=t(787592),r=t(175424),s=t(472575);YUI.add("squarespace-models-member-account",function(n){var i=n.namespace("Squarespace.Models").MemberAccount=n.Base.create("MemberAccount",n.Model,[n.Squarespace.ModelSync.REST],{root:"/api/member-accounts",serialize:function(){return n.JSON.stringify(this._getServerRelevantFields())},_getServerRelevantFields:function(){var E=n.Array.reduce(["id","firstName","lastName","displayName","websiteUrl","bio","email","avatarId","pseudonymAccount","notificationsRead","tutorialsCompleted","guilds","flags"],{},function(S,y){return S[y]=this.get(y),S},this);return n.Lang.isObject(E.notificationsRead)&&(E.notificationsRead=n.Object.keys(E.notificationsRead)),n.Lang.isObject(E.tutorialsCompleted)&&(E.tutorialsCompleted=n.Object.keys(E.tutorialsCompleted)),E},isMe:function(){return this.get("id")===Static.SQUARESPACE_CONTEXT.authenticatedAccount.id}},{ATTRS:{notificationsRead:{value:{}}}});if(n.namespace("Squarespace.Singletons"),Static&&Static.SQUARESPACE_CONTEXT&&Static.SQUARESPACE_CONTEXT.authenticatedAccount){var u=n.Squarespace.Singletons.AuthenticatedMemberAccount=new i(Static.SQUARESPACE_CONTEXT.authenticatedAccount),h=!0,g=!0,p=e.Z.listen(function(E){if(h){g=!1;try{u.setAttrs(E.toJSON())}catch(S){a.$e(function(y){y.setExtra("isFrameY",n!==top.Y),y.setExtra("isYEnvDestroyed",!n.Env),y.setExtra("isYConfigDestroyed",!n.config),y.setExtra("documentReadyState",document.readyState),a.Tb(S)})}}h=!0}),f=u.after("change",function(E){if(g){var S=d()(E.changed,function(y){return y.newVal});h=!1,o.Z.update(S)}g=!0}),m=(0,r.V6)(),_=m&&n===m.Y,v=function(){f.detach(),p()};_?(0,s.QA)(s.fv,v):window.addEventListener("beforeunload",v)}else n.Squarespace.Singletons.AuthenticatedMemberAccount=new i({})},"1.0",{requires:["base","model","promise","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-promises"]})},585024:function(){YUI.add("squarespace-models-model-list",function(c){c.namespace("Squarespace.Models");var b=c.Squarespace.Models.ModelList=c.Base.create("ModelList",c.ModelList,[c.Squarespace.ModelSync.REST],{parse:function(t){var l=b.superclass.parse.call(this,t),d=this._getResponseAttrs(l);return c.Object.each(d,function(o,e){this._set(e,o)},this),l.results},_getResponseAttrs:function(t){return{}}})},"1.0",{requires:["base","model-list","squarespace-model-sync-rest"]})},601559:function(c,b,t){"use strict";var l=t(548068),d=t.n(l),o=t(437951),e=t.n(o),a=t(179593),r=t(714487),s=t(681328),n=t(962398);YUI.add("squarespace-models-navigation",function(i){var u=!1,h=i.Base.create("NavigationItem",i.Model,[],{initializer:function(){this._events=[],this.get("collection")&&this._events.push(this.get("collection").after("navigationTitleChange",function(f){this.set("title",f.newVal)},this))},destructor:function(){i.Array.invoke(this._events,"detach")},sync:function(f,m,_){f==="delete"?this.get("collection")?this.get("collection").destroy(i.merge(m,{remove:!0}),_):this.getNavigationItemList().save(m,_):(f==="create"||f==="save")&&(this._updateChildren(),this.getNavigationItemList().save(m,_))},destroy:function(f,m){return typeof f=="function"&&(m=f,f=null),this.onceAfter("destroy",function(){i.Array.each(this.lists.concat(),function(_){_.remove(this,f)},this),f&&(f.remove||f.delete)?this.sync("delete",f,i.bind(function(){this.save(),m&&m.apply(null,arguments)},this)):m&&m.apply(null,arguments)},this),this.constructor.superclass.destroy.call(this)},toJSON:function(f){var m=this.constructor.superclass.toJSON.call(this);return f?delete m.collection:m.collection&&(m.collection=m.collection.toJSON()),m.children&&(m.items=m.children.toJSON(f),delete m.children),delete m.duplicated,m},isFolder:function(){if(this.get("collectionId")&&!this.get("children").isEmpty())return!0;if(this.get("collection")){var f=this.get("collection").getTemplateConfiguration();return!!(f&&f.get("folder"))}else if(this.get("memberAreaId"))return!0;return!1},isLink:function(){return i.Lang.isValue(this.get("externalLink"))&&!i.Lang.isValue(this.get("collection"))},isMemberArea:function(){var f=this.get("memberAreaId");return d()(f)&&f.length>0},_setChildren:function(f){if(f){var m=this.get("collection");this.get("collectionId")&&m&&m.get("type")===e().TEMPLATE_PAGE&&(f=[]);var _;i.Lang.isValue(m)&&(_=m.getTemplateConfiguration().get("acceptTypes"));var v;if(i.Lang.isArray(f)?v=new p({acceptTypes:_}):i.instanceOf(f,p)&&(v=f,v.setTemplateNavigation(this.getNavigationItemList().getTemplateNavigation())),v.setNavigationItem(this),v&&this._navigationItemList&&(v.setTemplateNavigation(this._navigationItemList.getTemplateNavigation()),v.setNavigationItemList(this._navigationItemList)),!v)throw new Error("Can't set navigation that isn't an instanceOf FolderItemList.");return i.Lang.isArray(f)&&f.length!==0&&(v.setTemplateNavigation(this.getNavigationItemList().getTemplateNavigation()),i.Array.each(f,function(E){var S=E.children;S&&delete E.children;var y=v.add(E);S&&y.set("children",S)})),v}},setNavigationItemList:function(f){if(f.name!=="NavigationItemList")throw new Error("Cant set a navigationitemlist that isnt actually a navigationitemlist");var m=this.get("children");m&&m.setNavigationItemList(f),this._navigationItemList=f},getNavigationItemList:function(){var f=this._navigationItemList;if(!f)throw new Error("No NavigationItemList found. Possible errors with wrapping data.");return f},setFolderItemList:function(f){if(!i.instanceOf(f,p)&&!i.Lang.isNull(f))throw new Error("Cant set a folder ItemList that isn't a folder.");this._folderItemList=f},getFolderItemList:function(){return this._folderItemList},_updateChildren:function(){if(this.isFolder()){var f=this.get("children"),m=this.getNavigationItemList(),_=m.getTemplateNavigation();f.setTemplateNavigation(_),f.setNavigationItemList(m)}},setIsDisplaced:function(f){this.set("isDisplaced",f)}},{ATTRS:{title:{value:""},collection:{valueFn:function(f){if(this._getAttr("collectionId")){var m={id:this._getAttr("collectionId"),urlId:this._getAttr("urlId"),typeName:this._getAttr("typeName"),enabled:this._getAttr("enabled"),type:this._getAttr("collectionType"),passwordProtected:this._getAttr("passwordProtected"),pagePermissionType:this._getAttr("pagePermissionType")};return i.config.win.Static.IN_BACKEND&&(m.navigationTitle=this._getAttr("title")),i.Squarespace.ContentCollectionCache.getCollectionFromData(m)}}},icon:{valueFn:function(){if(this.get("collectionId"))return i.Squarespace.ContentCollectionUtils.getIconClassNames(this.get("collection"));var f=this.get("externalLink");return f&&f.externalServiceProviderType?"external-link-"+a.Z[f.externalServiceProviderType].slug:f?"external-link":this.get("memberAreaId")?"member-area":""}},children:{value:[],lazyAdd:!1,setter:"_setChildren"},supported:{valueFn:function(){if(this.isLink()||this.isMemberArea())return!0;if(!this.get("collection"))return!1;var f=this.get("collection").getTemplateConfiguration();return i.Lang.isValue(f)&&f.get("supported")}},duplicated:{value:!1},isUnsupportedIndexMaybe:{getter:function(){return!this.get("supported")&&!!this.get("children")&&this.get("children").size()>0}},memberAreaId:{value:null},memberAreaDefaultLandingPageId:{value:null},isDisplaced:{value:!1}}}),g=i.Base.create("NavigationItemList",i.ModelList,[],{model:h,initializer:function(){this.each(function(f){this._bootstrapReference(f)},this),this.on(["create","add"],function(f){this._bootstrapReference(f.model)},this)},destructor:function(){this._navigationItem=null},setNavigationItem:function(f){this._navigationItem=f},getNavigationItem:function(){return this._navigationItem},add:function(f,m){return g.superclass.add.apply(this,arguments)},sync:function(f,m,_){if(console.log(this.name+" | sync called with action "+f+" and options ",m),f==="update"||f==="create"){if(u){var v=function(S){return i.Array.map(S,function(y){return y.items&&y.items.length?v(y.items):y.title})};console.trace(JSON.stringify(v(this.toJSON(!0)),null,2))}var E={fieldName:this.getTemplateNavigation().get("name"),navigation:{items:this.toJSON(!0)},templateId:s.default.getState().id};i.Data.post({json:!0,url:"/api/widget/UpdateNavigation",data:E,success:function(y){n.Z.refreshNavData(y),i.Squarespace.Navigation.Events.fire("navigation:updated",y),_&&_()},failure:function(S){new i.Squarespace.SystemError((0,r.t)("Something Went Wrong",null,{project:"scripts-v6.models"}),S,"json").show()}})}else typeof _=="function"&&_()},save:function(f,m){this.sync("update",f,i.bind(function(){this.fire("save"),i.Lang.isFunction(m)&&m()},this))},_bootstrapReference:function(f){f.setNavigationItemList(this)},setTemplateNavigation:function(f){this._templateNavigation=f},getTemplateNavigation:function(){var f=this._templateNavigation;if(!f)throw new Error("TemplateNavigation not found! Possible errors with wrapping data.");return f},toJSON:function(f){return this.map(function(m){return m.toJSON(f)})},getTotalSize:function(){return this.toArray().reduce(function(f,m){return f+m.get("children").size()},this.size())}}),p=i.Base.create("FolderItemList",g,[],{destructor:function(){this._navigationItemList=null},_bootstrapReference:function(f){f.setNavigationItemList(this.getNavigationItemList()),f.setFolderItemList(this)},sync:function(f,m,_){this.getNavigationItemList().sync(f,m,_)},setNavigationItemList:function(f){if(f.name!=="NavigationItemList")throw new Error("Cant set a navigationitemlist that isnt actually a navigationitemlist");this._navigationItemList=f},getNavigationItemList:function(){var f=this._navigationItemList;if(!f)throw new Error("No NavigationItemList found. Possible errors with wrapping data.");return f}},{ATTRS:{acceptTypes:{value:[]}}});i.namespace("Squarespace.Models").NavigationItemList=g,i.namespace("Squarespace.Models").NavigationFolderItemList=p},"1.0",{requires:["array-invoke","base","model","squarespace-navigation-events","squarespace-content-collection-utils","squarespace-models-content-collection","squarespace-system-error"]})},853746:function(){YUI.add("squarespace-models-offset-paginator",function(c){c.namespace("Squarespace.Models");var b=c.Squarespace.Models.OffsetPaginator=c.Base.create("OffsetPaginator",c.Squarespace.Models.Paginator,[],{firstPage:function(){b.superclass.firstPage.call(this),this.set("offset",0)},previousPage:function(){b.superclass.previousPage.call(this);var t=this.get("offset")-this.get("limit");t<0?this.firstPage():this.set("offset",t)},nextPage:function(){b.superclass.nextPage.call(this),this.set("offset",this.get("offset")+this.get("limit"))},_getPaginationParams:function(){var t=b.superclass._getPaginationParams.call(this);return c.merge(t,this.getAttrs(["offset"]))}},{ATTRS:{offset:{value:0,validator:c.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-paginator"]})},623885:function(c,b,t){"use strict";var l=t(532099),d=t.n(l);YUI.add("squarespace-models-paginator",function(o){var e=function(){};o.namespace("Squarespace.Models"),o.Squarespace.Models.Paginator=o.Base.create("Paginator",o.Base,[],{paginateURL:function(a){var r=a.split("?"),s=r[1],n=o.Lang.isValue(s),i=n?o.QueryString.parse(s):{};return i=o.merge(i,this._getPaginationParams()),r[0]+"?"+o.QueryString.stringify(i)},firstPage:e,previousPage:e,nextPage:e,currentPage:e,_getPaginationParams:function(){return{limit:this.get("limit"),orderBy:this.get("orderBy"),orderDirection:this.get("orderDirection")}}},{ATTRS:{models:{validator:o.Squarespace.AttrValidators.isInstanceOf(o.Squarespace.Models.ModelList),writeOnce:"initOnly"},limit:{value:20,validator:o.Squarespace.AttrValidators.isNumber},orderBy:{value:"id",validator:o.Squarespace.AttrValidators.isString},orderDirection:{value:d().ASCENDING,validator:function(a){return!!o.Object.hasValue(d(),a)}}}})},"1.0",{requires:["base","querystring","squarespace-attr-validators","squarespace-models-model-list"]})},618877:function(){YUI.add("squarespace-models-plan",function(c){var b=["bsnss","unltd","std"],t=c.namespace("Squarespace.Models");t.Plan=c.Base.create("plan",c.Model,[],{equals:function(l){return c.Lang.isValue(l)?this.get("planLevel.value")===l.get("planLevel.value")&&this.get("planPeriod.value")===l.get("planPeriod.value"):!1}},{ATTRS:{planLevel:{},planPeriod:{},price:{},subtotal:{},tax:{},taxRate:{},total:{},annualSubtotalWithMarketingDiscount:{getter:function(){return this.get("subtotal")*.625}},annualTaxWithMarketingDiscount:{getter:function(){return this.get("tax")*.625}},annualTotalWithMarketingDiscount:{getter:function(){return this.get("total")*.625}}}}),t.PlanList=c.Base.create("planList",c.ModelList,[c.Squarespace.ModelSync.REST],{model:t.Plan,initializer:function(l){this._productIndex=[],l.items&&c.Array.each(l.items,function(d){d instanceof c.Model&&this._addToIndex(d)},this),this.after("add",this._afterAdd,this),this.after("remove",this._afterRemove,this),this.after("reset",this._afterReset,this)},getProduct:function(l,d){var o=this._productIndex[this._getProductKey(l,d)];return c.Lang.isValue(o)?o:null},getProductsForPlanLevel:function(l){return this.filter(this._filterByPlan(l))},getProductsForPlanPeriod:function(l){return this.filter(this._filterByPeriod(l))},getProductForPlanInterval:function(l,d){var o=this.filter(this._filterByPlan(l));return c.Array.find(o,function(e){return e.get("planPeriod.intervalDays")===d})},getByName:function(l){return c.Array.find(this._items,function(d){return d.get("name")===l})},comparator:function(l){return b.indexOf(l.get("name"))},_filterByPeriod:function(l){return function(d){return d.get("planPeriod.value")===l}},_filterByPlan:function(l){return function(d){return d.get("planLevel.value")===l}},_hashPlan:function(l){return this._getProductKey(l.get("planLevel.value"),l.get("planPeriod.value"))},_getProductKey:function(l,d){return[l,d].join("-")},_afterReset:function(l){this._resetIndex(),c.Array.each(l.models,this._addToIndex,this)},_afterRemove:function(l){this._removeFromIndex(l.model)},_afterAdd:function(l){this._addToIndex(l.model)},_resetIndex:function(){this._productIndex={}},_addToIndex:function(l){this._productIndex[this._hashPlan(l)]=l},_removeFromIndex:function(l){delete this._productIndex[this._hashPlan(l)]}})},"1.0",{requires:["base","model","model-list","squarespace-model-sync-rest"]})},770262:function(){YUI.add("squarespace-models-quote",function(c){c.namespace("Squarespace.Models"),c.Squarespace.Models.Quote=c.Base.create("Quote",c.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Quote",validator:function(b){return b==="Quote"},readOnly:!0},quote:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},744932:function(c,b,t){"use strict";var l=t(457739),d=t.n(l);YUI.add("squarespace-models-range-paginator",function(o){o.namespace("Squarespace.Models");var e=o.Squarespace.Models.RangePaginator=o.Base.create("RangePaginator",o.Squarespace.Models.Paginator,[],{initializer:function(){o.Do.before(function(a){var r=o.JSON.parse(a),s=r.previousPageStart,n=r.nextPageStart;this._set("previousPageStart",s||null),this._set("nextPageStart",n||null)},this.get("models"),"parse",this)},firstPage:function(){e.superclass.firstPage.call(this),this._set("previousPageStart",null),this._set("nextPageStart",null),this._set("start",null),this.set("pageAction",d().NEXT)},previousPage:function(){e.superclass.previousPage.call(this),this._set("start",this.get("previousPageStart")),this.set("pageAction",d().PREVIOUS)},nextPage:function(){e.superclass.nextPage.call(this),this._set("start",this.get("nextPageStart")),this.set("pageAction",d().NEXT)},currentPage:function(){e.superclass.currentPage.call(this),this._set("pageAction",d().NEXT)},_getPaginationParams:function(){var a=e.superclass._getPaginationParams.call(this);a.pageAction=this.get("pageAction");var r=this.get("start");return o.Lang.isValue(r)&&(a.start=r),a}},{ATTRS:{pageAction:{value:d().NEXT,validator:function(a){return!!o.Object.hasValue(d(),a)}},start:{value:null,validator:o.Squarespace.AttrValidators.isNullOrString,readOnly:!0},previousPageStart:{value:null,validator:o.Squarespace.AttrValidators.isNullOrString,setter:function(a){return a},readOnly:!0},nextPageStart:{value:null,validator:o.Squarespace.AttrValidators.isNullOrString,setter:function(a){return a},readOnly:!0}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-paginator"]})},97889:function(c,b,t){"use strict";var l=t(587175);YUI.add("squarespace-models-shopping-cart-facade",function(d){d.namespace("Squarespace.Singletons");var o=d.Base.create("ShoppingCartFacade",d.Base,[],{},{ATTRS:{id:{validator:d.Lang.isString},websiteId:{validator:d.Lang.isString},orderId:{validator:d.Lang.isString},created:{getter:function(e){return d.Lang.isValue(e)?new Date(e):null},setter:function(e){return d.Lang.isDate(e)?e.getTime():e},validator:d.Lang.isNumber},isPurchased:{value:!1,validator:d.Lang.isBoolean},entries:{value:[],validator:d.Lang.isArray},shippingOptions:{value:[],validator:d.Lang.isArray},selectedShippingOption:{validator:d.Lang.isObject},shippingLocation:{validator:d.Lang.isObject},applicableTaxRules:{value:[],validator:d.Lang.isArray},coupons:{value:[],validator:d.Lang.isArray},validCoupons:{value:[],validator:d.Lang.isArray},invalidCoupons:{value:[],validator:d.Lang.isArray},subtotalCents:{validator:d.Lang.isNumber,value:0},subtotalAmount:{value:(0,l.Wy)(0,"USD")},taxCents:{validator:d.Lang.isNumber,value:0},shippingCostCents:{validator:d.Lang.isNumber,value:0},discountCents:{validator:d.Lang.isNumber,value:0},grandTotalCents:{validator:d.Lang.isNumber,value:0},totalQuantity:{validator:d.Lang.isNumber,value:0},hasDigital:{validator:d.Lang.isBoolean,value:!1},purelyDigital:{validator:d.Lang.isBoolean,value:!1},requiresShipping:{validator:d.Lang.isBoolean,value:!1}}});d.Squarespace.Singletons.ShoppingCart=new o},"1.0",{requires:["base"]})},213419:function(c,b,t){"use strict";var l=t(714487),d=t(554468),o=t(312713),e=t(587175);YUI.add("squarespace-models-shopping-cart",function(a){a.namespace("Squarespace.Models"),a.namespace("Squarespace.Singletons");var r=a.Squarespace.Models.ShoppingCart=a.Base.create("shoppingCart",a.Model,[],{initializer:function(){this.publish("item-added",{emitFacade:!0}),this.publish("loaded",{emitFacade:!0}),this.publish("recalculate-start",{emitFacade:!0}),this.publish("recalculate-end",{emitFacade:!0}),this._readInProgress=!1,this._isRecalculating=!1,this.on("recalculate-start",function(){this._isRecalculating=!0},this),this.on("recalculate-end",function(){this._isRecalculating=!1},this)},toJSON:function(){var s=r.superclass.toJSON.call(this),n=s.created;return a.Lang.isNull(n)||(s.created=n.getTime()),s},sync:function(s,n,i){switch(s){case"create":break;case"delete":break;case"read":this._read(n,i);break;case"update":break}},load:function(s,n,i){if(typeof s=="function"&&(n=s,s={}),this._readinProgress){this.after("load",n,i);return}a.Model.prototype.load.call(this,s,n?a.bind(n,i||this):null)},isRecalculating:function(){return this._isRecalculating},hasEntry:function(s,n){return a.Array.reduce(this.get("entries"),!1,function(i,u){return a.Lang.isValue(n)?i||u.itemId===s&&n.sku===u.chosenVariant.sku:i||u.itemId===s})},addEntry:function(s,n,i,u,h,g){a.Data.post({url:"/api/commerce/shopping-cart/entries",headers:{"Content-Type":"application/json"},data:a.JSON.stringify({itemId:s,sku:a.Lang.isValue(n)?n.sku:null,quantity:i,additionalFields:a.JSON.stringify(u)}),success:function(p){a.Squarespace.CommerceAnalytics.itemAdded(p),this.setAttrs(p.shoppingCart),this.fire("item-added"),a.Lang.isFunction(h)&&h.call(g||this,null,p.newlyAdded)},failure:function(p){p.crumbFail&&((0,o.z)()?p.message=(0,l.t)("Your session has expired. Please reload the page and try again.",null,{project:"scripts-v6.models"}):p.message=(0,l.t)("Please enable cookies in your browser, reload the page, and try again.",null,{project:"scripts-v6.models"})),p.status===429&&(p.message=(0,l.t)("Please try again in a few seconds.",null,{project:"scripts-v6.models"})),a.Lang.isFunction(h)&&h.call(g||this,p.message,null)}},this)},updateFormSubmission:function(s,n,i,u){var h=s.chosenVariant;this.fire("recalculate-start"),a.Data.put({headers:{"Content-Type":"application/json"},url:a.Lang.sub("/api/commerce/shopping-cart/entries/{entryId}/additionalFields",{entryId:s.id}),data:a.JSON.stringify({itemId:s.itemId,sku:a.Lang.isValue(h)?h.sku:null,additionalFields:a.JSON.stringify(n)}),success:function(g){this.fire("recalculate-end"),this.setAttrs(g.shoppingCart),a.Lang.isFunction(i)&&i.call(u||this,null,g.updatedEntry)},failure:function(g){this.fire("recalculate-end"),a.Lang.isFunction(i)&&i.call(u||this,g.message,null)}},this)},totalForItem:function(s,n){var i=a.Lang.isValue(n);return a.Array.reduce(this.get("entries"),0,function(u,h){return h.itemId===s&&(!i||i&&h.chosenVariant.sku===n.sku)?u+h.quantity:u})},_read:function(s,n){this._readInProgress=!0,this.fire("loading"),a.Data.get({url:"/api/commerce/shopping-cart",data:{mock:s.mock?"true":"false",timecode:Date.now(),calculateSubtotal:s.calculateSubtotal?"true":"false"},success:function(i){this.fire("loaded"),this._readInProgress=!1,n(null,i)},failure:function(i){this.fire("loaded"),this._readInProgress=!1,n(i.message,null)}},this)}},{ATTRS:{id:{validator:a.Lang.isString},websiteId:{validator:a.Lang.isString},orderId:{validator:a.Lang.isString},created:{getter:function(s){return a.Lang.isValue(s)?new Date(s):null},setter:function(s){return a.Lang.isDate(s)?s.getTime():s},validator:a.Lang.isNumber},isPurchased:{value:!1,validator:a.Lang.isBoolean},entries:{value:[],validator:a.Lang.isArray},shippingOptions:{value:[],validator:a.Lang.isArray},selectedShippingOption:{validator:a.Lang.isObject},shippingLocation:{validator:a.Lang.isObject},applicableTaxRules:{value:[],validator:a.Lang.isArray},coupons:{value:[],validator:a.Lang.isArray},validCoupons:{value:[],validator:a.Lang.isArray},invalidCoupons:{value:[],validator:a.Lang.isArray},subtotalCents:{validator:a.Lang.isNumber,value:0},subtotalAmount:{getter:function(){var s=d.Z.getStoreCurrency();return(0,e.Wy)(this.get("subtotalCents"),s)}},taxCents:{validator:a.Lang.isNumber,value:0},shippingCostCents:{validator:a.Lang.isNumber,value:0},discountCents:{validator:a.Lang.isNumber,value:0},grandTotalCents:{validator:a.Lang.isNumber,value:0},totalQuantity:{validator:a.Lang.isNumber,value:0},hasDigital:{validator:a.Lang.isBoolean,value:!1},purelyDigital:{validator:a.Lang.isBoolean,value:!1},requiresShipping:{validator:a.Lang.isBoolean,value:!1}}});a.Squarespace.Singletons.ShoppingCart=new r},"1.0",{requires:["base","model","squarespace-commerce-analytics","squarespace-commerce-utils","squarespace-util"]})},755384:function(){YUI.add("squarespace-models-slice-area-list",function(c){c.namespace("Squarespace.Models"),c.Squarespace.Models.SliceAreaList=c.Base.create("SliceAreaList",c.ModelList,[],{model:c.Squarespace.Models.SliceArea,filterBySliceTypes:function(b){return this.filter({asList:!0},function(t){return b.indexOf(t.get("sliceType"))!==-1})}})},"1.0",{requires:["base","model-list","squarespace-models-slice-area"]})},728535:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-area",function(o){o.namespace("Squarespace.Models");var e=o.Squarespace.Models.SliceArea=o.Base.create("SliceArea",o.Model,[],{toJSON:function(){var a=e.superclass.toJSON.call(this);return a.demoSlice=a.demoSlice.toJSON(),a}},{ATTRS:{sliceType:{value:d().HEADING,validator:o.Squarespace.AttrValidators.isValueIn(d()),writeOnce:"initOnly"},params:{value:{},validator:o.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"},demoSlice:{value:null,setter:function(a){return a instanceof o.Squarespace.Models.Slice?a:new o.Squarespace.Models.Slice(a)},writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-models-slice"]})},310705:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-action",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.Action=o.Base.create("Action",o.Squarespace.Models.SliceContent.Compound,[],{},{SLICE_TYPE:d().ACTION,ATTRS:{_type:{value:"Action"},acceptedTypes:{value:[d().BUTTONS,d().NAVIGATION]}}})},"1.0",{requires:["base","squarespace-models-slice-content-compound"]})},718324:function(c,b,t){"use strict";var l=t(714487),d=t(434927),o=t.n(d),e=t(816130),a=t.n(e),r=t(437951),s=t.n(r),n=t(965455);YUI.add("squarespace-models-slice-content-album",function(i){i.namespace("Squarespace.Models.SliceContent");var u=i.Squarespace.Models.SliceContent.Album=i.Base.create("Album",i.Squarespace.Models.SliceContent.Base,[i.Squarespace.Models.SliceContent.HasContentCollection],{toJSON:function(){var h=u.superclass.toJSON.call(this);return delete h.contentCollection,delete h.eventListeners,h},updateReferences:function(h){var g=this.get("contentCollectionId");if(i.Lang.isValue(g)){var p=h[g];i.Lang.isValue(p)&&this.get("contentCollection").setAttrs(p)}}},{SLICE_TYPE:o().ALBUM,ATTRS:{_type:{value:"Album"},contentCollection:{valueFn:function(){var h=(0,n.x)();return new i.Squarespace.Models.ContentCollection({id:this.get("contentCollectionId"),type:s().SLIDE_ALBUM,ordering:a().MUSIC_ALBUM,metadata:{typeName:"music-album"},title:(0,l.t)("Slide Album {id}",{id:h},{project:"scripts-v6.models"}),navigationTitle:h,enabled:!0,itemLimit:60,itemCount:0})}}}})},"1.0",{requires:["base","squarespace-models-content-collection","squarespace-models-slice-content-base","squarespace-models-slice-content-has-content-collection","squarespace-util"]})},202168:function(){YUI.add("squarespace-models-slice-content-base",function(c){c.namespace("Squarespace.Models.SliceContent"),c.Squarespace.Models.SliceContent.Base=c.Base.create("Base",c.Model,[],{saveReferences:function(b){c.Lang.isFunction(b)&&b()},updateReferences:function(b){},resetClientAttrs:function(){}},{ATTRS:{_type:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly",readOnly:!0},slideId:{value:null},refreshRenderingAfterSave:{value:!1,validator:c.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},431401:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-body",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.Body=o.Base.create("Body",o.Squarespace.Models.SliceContent.Base,[],{},{SLICE_TYPE:d().BODY,ATTRS:{_type:{value:"Body"},body:{value:null,validator:o.Squarespace.AttrValidators.isNullOrObject}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base"]})},103107:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-buttons",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.Buttons=o.Base.create("Buttons",o.Squarespace.Models.SliceContent.Base,[o.Squarespace.Models.SliceContent.HasLinks],{},{SLICE_TYPE:d().BUTTONS,ATTRS:{_type:{value:"Buttons"},limit:{value:2}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base","squarespace-models-slice-content-has-links"]})},459352:function(){YUI.add("squarespace-models-slice-content-compound",function(c){c.namespace("Squarespace.Models.SliceContent");var b=c.Squarespace.Models.SliceContent.Compound=c.Base.create("Compound",c.Squarespace.Models.SliceContent.Base,[],{initializer:function(){this._currentContentMap={};var t=c.Squarespace.Models.SliceContent.Factory;this.after("currentTypeChange",function(l){this._currentContentMap[l.prevVal]=this.get("currentContent");var d=l.newVal,o=this._currentContentMap[d];c.Lang.isValue(o)?this.set("currentContent",o):this.set("currentContent",t.create(d))},this)},toJSON:function(){var t=b.superclass.toJSON.call(this);return t.currentContent=t.currentContent.toJSON(),t},saveReferences:function(t){this.get("currentContent").saveReferences(t)},updateReferences:function(t){this.get("currentContent").updateReferences(t)}},{ATTRS:{acceptedTypes:{value:[],validator:c.Squarespace.AttrValidators.isArray,writeOnce:"initOnly"},currentType:{valueFn:function(){return this.get("acceptedTypes")[0]},validator:function(t){return this.get("acceptedTypes").indexOf(t)!==-1}},currentContent:{valueFn:function(){var t=this.get("currentType");return c.Squarespace.Models.SliceContent.Factory.create(t)},setter:function(t){if(!(t instanceof c.Squarespace.Models.SliceContent.Base)){var l=this.get("currentContent");if(c.Lang.isValue(l))return l.setAttrs(t),l;var d=this.get("currentType");return c.Squarespace.Models.SliceContent.Factory.create(d,t)}return t}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-content-item","squarespace-models-slice-content-base","squarespace-models-slice-content-factory"]})},444308:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-models-slice-content-custom-form",function(e){e.namespace("Squarespace.Models.SliceContent");function a(s,n){return function(){var i=this.get(s);if(e.Lang.isValue(i)){var u=new e.Squarespace.Models.Form({formId:i});return u}return new n}}var r=e.Squarespace.Models.SliceContent.CustomForm=e.Base.create("CustomForm",e.Squarespace.Models.SliceContent.Base,[e.Squarespace.Models.SliceContent.HasForm],{initializer:function(){this.get("newsletterForm").after("idChange",function(s){this.set("newsletterFormId",s.newVal)},this)},toJSON:function(){var s=r.superclass.toJSON.call(this);return delete s.form,delete s.newsletterForm,s},updateReferences:function(s){this._updateFormReferences(this.get("formId"),this.get("form"),s),this._updateFormReferences(this.get("newsletterFormId"),this.get("newsletterForm"),s)},_updateFormReferences:function(s,n,i){if(e.Lang.isValue(s)){var u=i[s];e.Lang.isValue(u)&&n.setAttrs(u)}}},{SLICE_TYPE:d().CUSTOM_FORM,ATTRS:{_type:{value:"CustomForm"},buttonLabel:{value:(0,o.t)("Open Form",null,{project:"scripts-v6.models"})},isNewsletterFormSelected:{value:!1},newsletterFormId:{value:null},newsletterForm:{valueFn:a("newsletterFormId",e.Squarespace.Models.SliceDemoNewsletterForm)},form:{valueFn:a("formId",e.Squarespace.Models.SliceDemoCustomForm)}}})},"1.0",{requires:["base","squarespace-models-slice-content-base","squarespace-models-slice-content-has-form","squarespace-models-slice-demo-custom-form","squarespace-models-slice-demo-newsletter-form"]})},121059:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-factory",function(o){var e=o.Squarespace.FactoryUtils.createEnumToClassFactory(d(),o.Squarespace.Models.SliceContent,"SLICE_TYPE");o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.Factory=e},"1.0",{requires:["squarespace-factory-utils","squarespace-models-slice-content-action","squarespace-models-slice-content-album","squarespace-models-slice-content-body","squarespace-models-slice-content-buttons","squarespace-models-slice-content-custom-form","squarespace-models-slice-content-gallery","squarespace-models-slice-content-heading","squarespace-models-slice-content-image","squarespace-models-slice-content-lock","squarespace-models-slice-content-logo","squarespace-models-slice-content-map","squarespace-models-slice-content-navigation","squarespace-models-slice-content-newsletter","squarespace-models-slice-content-popup-overlay-action","squarespace-models-slice-content-password","squarespace-models-slice-content-social-icons","squarespace-models-slice-content-sub-heading","squarespace-models-slice-content-twitter","squarespace-models-slice-content-video"]})},195274:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(437951),e=t.n(o),a=t(816130),r=t.n(a),s=t(287581),n=t.n(s),i=t(714487),u=t(965455);YUI.add("squarespace-models-slice-content-gallery",function(h){h.namespace("Squarespace.Models.SliceContent");var g=h.Squarespace.Models.SliceContent.Gallery=h.Base.create("Gallery",h.Squarespace.Models.SliceContent.Base,[h.Squarespace.Models.SliceContent.HasContentCollection],{initializer:function(){this.after("sourceChange",(function(p){this.set("contentCollection",this.get("defaultCollections")[p.newVal])}).bind(this))},toJSON:function(){var p=g.superclass.toJSON.call(this);return delete p.contentCollection,delete p.defaultCollections,delete p.eventListeners,p},updateReferences:function(p){var f=this.get("contentCollectionId");if(h.Lang.isValue(f)){var m=p[f];h.Lang.isValue(m)&&this.get("contentCollection").setAttrs(m)}},resetClientAttrs:function(){this.get("source")!==n().UPLOAD&&(this.get("defaultCollections")[n().UPLOAD]=this._getNewUploadCollection())},_getNewUploadCollection:function(){var p=(0,i.t)("Transient Gallery {transientGalleryId}",{transientGalleryId:(0,u.x)()},{project:"scripts-v6.models"});return new h.Squarespace.Models.ContentCollection({typeName:"transient-gallery",type:e().GALLERY_BLOCK,ordering:r().USER,title:p,navigationTitle:p,enabled:!0,urlId:(0,u.x)(),itemCount:0})},_getNewVideoCollection:function(){return this._getNewUploadCollection()}},{SLICE_TYPE:d().GALLERY,ATTRS:{_type:{value:"Gallery"},source:{value:n().UPLOAD,validator:h.Squarespace.AttrValidators.isValueIn(n())},disableImages:{value:!1},contentCollection:{valueFn:function(){var p=this.get("source");return this.get("defaultCollections")[p]}},defaultCollections:{valueFn:function(){var p={};return p[n().UPLOAD]=this._getNewUploadCollection(),p[n().VIDEO]=this._getNewVideoCollection(),p[n().NONE]=this._getNewUploadCollection(),p}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-content-collection","squarespace-models-slice-content-base","squarespace-models-slice-content-has-content-collection","squarespace-util"]})},156343:function(c,b,t){"use strict";var l=t(815211),d=t.n(l);YUI.add("squarespace-models-slice-content-has-connected-account",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.HasConnectedAccount=o.Base.create("HasConnectedAccount",o.Base,[],{initializer:function(){this.after("connectedAccountIdChange",function(){this.set("connectedAccount",this._getConnectedAccount())},this)},destructor:function(){this._afterToJSON.detach()},_getConnectedAccount:function(){var e=this.get("connectedAccountId");return o.Lang.isValue(e)?o.Squarespace.Models.ConnectedAccounts.loadFromStore().getById(e):null}},{ATTRS:{serviceId:{value:null,validator:o.Squarespace.AttrValidators.isNullOrValueIn(d())},connectedAccountId:{value:null},connectedAccount:{valueFn:"_getConnectedAccount",validator:o.Squarespace.AttrValidators.isNullOrInstanceOf(o.Squarespace.Models.ConnectedAccount)}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-connected-account","squarespace-models-connected-accounts"]})},901445:function(c,b,t){"use strict";var l=t(437951),d=t.n(l);YUI.add("squarespace-models-slice-content-has-content-collection",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.HasContentCollection=o.Base.create("HasContentCollection",o.Base,[o.Squarespace.Mixins.EventRegistrar],{initializer:function(){var e=this.get("contentCollection");e&&e.get("type")!==d().INSTAGRAM&&this._registerEvent(e.after("idChange",function(a){this.set("contentCollectionId",a.newVal)},this)),this.after("contentCollectionChange",(function(a){var r=a.newVal;r.get("type")!==d().INSTAGRAM&&this._registerEvent(r.after("idChange",(function(s){this.set("contentCollectionId",s.newVal)}).bind(this)))}).bind(this))}},{ATTRS:{contentCollectionId:{value:null},contentCollection:{valueFn:function(){return new o.Squarespace.Models.ContentCollection({id:this.get("contentCollectionId")})},validator:o.Squarespace.AttrValidators.isInstanceOf(o.Squarespace.Models.ContentCollection)}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-mixins-event-registrar","squarespace-models-content-collection"]})},817772:function(){YUI.add("squarespace-models-slice-content-has-content-item",function(c){c.namespace("Squarespace.Models.SliceContent"),c.Squarespace.Models.SliceContent.HasContentItem=c.Base.create("HasContentItem",c.Base,[],{initializer:function(){this._bindContentItemIdChange();var b=this.get("id");this.after(b+"|contentItemChange",function(t){this.set("contentItemId",t.newVal.get("id")),this._bindContentItemIdChange()},this),this._afterToJSON=c.after(function(){var t=c.Do.currentRetVal,l=t.contentItem;return c.Lang.isValue(l)&&(t.contentItem=l.toJSON()),new c.Do.AlterReturn("ContentItem toJSON",t)},this,"toJSON",this)},destructor:function(){this._afterToJSON.detach()},_bindContentItemIdChange:function(){var b=this.get("id");this.get("contentItem").after(b+"|idChange",function(t){this.set("contentItemId",t.newVal)},this)}},{ATTRS:{contentItemId:{value:null},contentItem:{valueFn:function(){var b=this.get("newContentItemConfig");return new c.Squarespace.Models.ContentItem(c.merge(b,{id:this.get("contentItemId")}))},getter:function(b){return b},setter:function(b){if(b instanceof c.Squarespace.Models.ContentItem)return b;if(c.Lang.isObject(b))return new c.Squarespace.Models.ContentItem(b);if(c.Lang.isNull(b)){var t=this.get("newContentItemConfig");return new c.Squarespace.Models.ContentItem(c.merge(t,{id:null}))}}},newContentItemConfig:{value:{},validator:c.Squarespace.AttrValidators.isObject}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-content-item"]})},270496:function(){YUI.add("squarespace-models-slice-content-has-form",function(c){c.namespace("Squarespace.Models.SliceContent"),c.Squarespace.Models.SliceContent.HasForm=c.Base.create("HasForm",c.Base,[],{initializer:function(){this.get("form").after("idChange",function(b){this.set("formId",b.newVal)},this)}},{ATTRS:{formId:{value:null},buttonLabel:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},form:{valueFn:function(){return new c.Squarespace.Models.Form({formId:this.get("formId")})},validator:c.Squarespace.AttrValidators.isInstanceOf(c.Squarespace.Models.Form),writeOnce:"initOnly"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-form"]})},847342:function(){YUI.add("squarespace-models-slice-content-has-links",function(c){c.namespace("Squarespace.Models.SliceContent"),c.Squarespace.Models.SliceContent.HasLinks=c.Base.create("HasLinks",c.Base,[],{initializer:function(){this.get("links").after("*:change",function(){this.fire("change")},this),c.Do.after(function(){var b=c.Do.currentRetVal;return b.links=b.links.toJSON(),b},this,"toJSON",this)}},{ATTRS:{links:{valueFn:function(){for(var b=new c.ModelList({model:c.Squarespace.Models.SliceContent.Link}),t=0;t<this.get("limit");t++)b.add({});return b},setter:function(b){return b instanceof c.ModelList?b:new c.ModelList({model:c.Squarespace.Models.SliceContent.Link,items:b})},validator:function(b){var t=this.get("limit");return b instanceof c.ModelList?b.size()<=t:c.Lang.isArray(b)?b.length<=t:!1},writeOnce:"initOnly"},limit:{value:5,validator:c.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"}}})},"1.0",{requires:["base","event-custom","model-list","squarespace-attr-validators","squarespace-models-slice-content-link"]})},981265:function(){YUI.add("squarespace-models-slice-content-has-text",function(c){c.namespace("Squarespace.Models.SliceContent"),c.Squarespace.Models.SliceContent.HasText=c.Base.create("HasText",c.Base,[],{},{ATTRS:{text:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators"]})},432365:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-heading",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.Heading=o.Base.create("Heading",o.Squarespace.Models.SliceContent.Base,[o.Squarespace.Models.SliceContent.HasText],{},{SLICE_TYPE:d().HEADING,ATTRS:{_type:{value:"Heading"}}})},"1.0",{requires:["base","squarespace-models-slice-content-base","squarespace-models-slice-content-has-text"]})},757122:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(586745),e=t.n(o);YUI.add("squarespace-models-slice-content-image",function(a){a.namespace("Squarespace.Models.SliceContent"),a.Squarespace.Models.SliceContent.Image=a.Base.create("Image",a.Squarespace.Models.SliceContent.Base,[a.Squarespace.Models.SliceContent.HasContentItem],{saveReferences:function(r){this.get("contentItem").save(a.bind(function(s,n){a.Lang.isFunction(r)&&r.call(this,s,n)},this))},updateReferences:function(r){var s=this.get("contentItemId");if(a.Lang.isValue(s)){var n=r[s];a.Lang.isValue(n)&&this.get("contentItem").setAttrs(n)}}},{SLICE_TYPE:d().IMAGE,ATTRS:{_type:{value:"Image"},newContentItemConfig:{value:{recordType:e().IMAGE}}}})},"1.0",{requires:["base","squarespace-models-slice-content-base","squarespace-models-slice-content-has-content-item"]})},981387:function(){YUI.add("squarespace-models-slice-content-link",function(c){c.namespace("Squarespace.Models.SliceContent"),c.Squarespace.Models.SliceContent.Link=c.Base.create("Link",c.Model,[],{},{ATTRS:{text:{value:"",validator:c.Squarespace.AttrValidators.isString},clickthroughUrl:{value:{},validator:c.Squarespace.AttrValidators.isObject}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},631096:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-lock",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.Lock=o.Base.create("Lock",o.Squarespace.Models.SliceContent.Base,[],{},{SLICE_TYPE:d().LOCK,ATTRS:{_type:{value:"Lock"},display:{value:!0,validator:o.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base"]})},812697:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-logo",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.Logo=o.Base.create("Logo",o.Squarespace.Models.SliceContent.Compound,[],{resetClientAttrs:function(){this.get("currentType")!==d().IMAGE&&delete this._currentContentMap[d().IMAGE]}},{SLICE_TYPE:d().LOGO,ATTRS:{_type:{value:"Logo"},acceptedTypes:{value:[d().IMAGE,d().HEADING]}}})},"1.0",{requires:["base","squarespace-models-slice-content-compound"]})},946567:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-map",function(o){o.namespace("Squarespace.Models.SliceContent");var e=o.Squarespace.Models.SliceContent.Map=o.Base.create("Map",o.Squarespace.Models.SliceContent.Base,[],{toJSON:function(){var a=e.superclass.toJSON.call(this);return a.location=a.location.toJSON(),a}},{SLICE_TYPE:d().MAP,ATTRS:{_type:{value:"Map"},location:{valueFn:function(){return new o.Squarespace.Models.GeoLocation},setter:function(a){return a instanceof o.Squarespace.Models.GeoLocation?a:new o.Squarespace.Models.GeoLocation(a)}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-geo-location","squarespace-models-slice-content-base"]})},196870:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-navigation",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.Navigation=o.Base.create("Navigation",o.Squarespace.Models.SliceContent.Base,[o.Squarespace.Models.SliceContent.HasLinks],{},{SLICE_TYPE:d().NAVIGATION,ATTRS:{_type:{value:"Navigation"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base","squarespace-models-slice-content-has-links"]})},919149:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-models-slice-content-newsletter",function(e){e.namespace("Squarespace.Models.SliceContent");var a=e.Squarespace.Models.SliceContent.Newsletter=e.Base.create("Newsletter",e.Squarespace.Models.SliceContent.Base,[e.Squarespace.Models.SliceContent.HasForm],{toJSON:function(){var r=a.superclass.toJSON.call(this);return delete r.form,r},saveReferences:function(r){var s=this.get("mailchimpConnect"),n=this.get("googleDocsConnect");if(s||n){var i=this.get("form");i.set("backendConnectionConfigs",{googleDocsConnect:n,mailchimpConnect:s}),i.save((function(u,h){e.Lang.isFunction(r)&&r.call(this,u,h)}).bind(this))}else r.call(this)},updateReferences:function(r){var s=this.get("formId");if(e.Lang.isValue(s)){var n=r[s];if(e.Lang.isValue(n)){var i=this.get("form");i.setAttrs(n)}}}},{SLICE_TYPE:d().NEWSLETTER,ATTRS:{_type:{value:"Newsletter"},form:{valueFn:function(){var r=this.get("formId");if(e.Lang.isValue(r))return new e.Squarespace.Models.Form({formId:r});var s=new e.Squarespace.Models.SliceDemoNewsletterForm,n=s.get("fields");return e.Array.each(n,function(i){e.Squarespace.FormEditingUtils.resolveFieldId(i,n)},this),s}},mailchimpConnect:{},googleDocsConnect:{},submitButtonText:{value:(0,o.t)("Sign Up",null,{project:"scripts-v6.models"})},disclaimerMessage:{value:{html:(0,o.t)("We respect your privacy.",null,{project:"scripts-v6.models"})}},submissionHTML:{},submissionMessage:{value:{html:(0,o.t)("Thank you!",null,{project:"scripts-v6.models"})}},successRedirect:{}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-form-editing-utils","squarespace-models-slice-content-base","squarespace-models-slice-content-has-form","squarespace-models-slice-demo-newsletter-form"]})},667227:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-password",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.Password=o.Base.create("Password",o.Squarespace.Models.SliceContent.Base,[],{},{SLICE_TYPE:d().PASSWORD,ATTRS:{_type:{value:"Password"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base"]})},364319:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-popup-overlay-action",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.PopupOverlayAction=o.Base.create("PopupOverlayAction",o.Squarespace.Models.SliceContent.Compound,[],{},{SLICE_TYPE:d().POPUP_OVERLAY_ACTION,ATTRS:{_type:{value:"PopupOverlayAction"},acceptedTypes:{value:[d().NEWSLETTER,d().BUTTONS]}}})},"1.0",{requires:["base","squarespace-models-slice-content-compound"]})},256440:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-social-icons",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.SocialIcons=o.Base.create("SocialIcons",o.Squarespace.Models.SliceContent.Base,[],{},{SLICE_TYPE:d().SOCIAL_ICONS,ATTRS:{_type:{value:"SocialIcons"},display:{value:!0,validator:o.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base"]})},114546:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-content-sub-heading",function(o){o.namespace("Squarespace.Models.SliceContent"),o.Squarespace.Models.SliceContent.SubHeading=o.Base.create("SubHeading",o.Squarespace.Models.SliceContent.Base,[o.Squarespace.Models.SliceContent.HasText],{},{SLICE_TYPE:d().SUB_HEADING,ATTRS:{_type:{value:"SubHeading"}}})},"1.0",{requires:["base","squarespace-models-slice-content-base","squarespace-models-slice-content-has-text"]})},818446:function(c,b,t){"use strict";var l=t(912246),d=t.n(l),o=t(434927),e=t.n(o),a=t(815211),r=t.n(a);YUI.add("squarespace-models-slice-content-twitter",function(s){s.namespace("Squarespace.Models.SliceContent");var n=s.Squarespace.Models.SliceContent.Twitter=s.Base.create("Twitter",s.Squarespace.Models.SliceContent.Base,[s.Squarespace.Models.SliceContent.HasConnectedAccount],{initializer:function(){var i=this.get("id");this.get("socialData").after(i+"|change",function(u){var h=u.changed.socialSearch;s.Lang.isValue(h)&&this.set("socialSearchId",h.newVal.id)},this),this.after("useSearchChange",(function(u){this.set("refreshRenderingAfterSave",u.newVal)}).bind(this))},toJSON:function(){var i=n.superclass.toJSON.call(this);return delete i.socialData,delete i.connectedAccount,i},saveReferences:function(i){if(this.get("useSearch")){var u=this.get("socialData");u.set("preview",!1),u.save((function(h,g){s.Lang.isFunction(i)&&i.call(this,h,g)}).bind(this))}else i.call(this)},updateReferences:function(i){var u=this.get("socialSearchId");if(s.Lang.isValue(u)){var h=i[u];s.Lang.isValue(h)&&this.get("socialData").set("socialSearch",h)}},previewSocialSearch:function(i){var u=this.get("socialData");u.set("preview",!0),u.save((function(h,g){s.Lang.isFunction(i)&&i.call(this,h,g)}).bind(this))}},{SLICE_TYPE:e().TWITTER,ATTRS:{_type:{value:"Twitter"},serviceId:{value:r().TWITTER},socialSearchId:{value:null},useSearch:{value:!1,validator:s.Squarespace.AttrValidators.isBoolean},numTweets:{value:10,validator:s.Squarespace.AttrValidators.isNumber},showAvatar:{value:!0,validator:s.Squarespace.AttrValidators.isBoolean},showDisplayName:{value:!0,validator:s.Squarespace.AttrValidators.isBoolean},socialData:{valueFn:function(){return new s.Squarespace.Models.SocialData({socialSearch:{referenceId:this.get("slideId"),referenceType:d().SLIDE,serviceProvider:r().TWITTER}})},setter:function(i){return i.get("socialSearch.referenceId")||i.set("socialSearch.referenceId",this.get("slideId")),i},validator:s.Squarespace.AttrValidators.isInstanceOf(s.Squarespace.Models.SocialData)},refreshRenderingAfterSave:{valueFn:function(){return this.get("useSearch")}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-base","squarespace-models-slice-content-has-connected-account","squarespace-models-social-data"]})},806710:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(586745),e=t.n(o);YUI.add("squarespace-models-slice-content-video",function(a){a.namespace("Squarespace.Models.SliceContent"),a.Squarespace.Models.SliceContent.Video=a.Base.create("Video",a.Squarespace.Models.SliceContent.Base,[a.Squarespace.Models.SliceContent.HasContentItem],{saveReferences:function(r){this.get("contentItem").save(a.bind(function(s,n){a.Lang.isFunction(r)&&r.call(this,s,n)},this))},updateReferences:function(r){var s=this.get("contentItemId");if(a.Lang.isValue(s)){var n=r[s];a.Lang.isValue(n)&&this.get("contentItem").setAttrs(n)}}},{SLICE_TYPE:d().VIDEO,ATTRS:{_type:{value:"Video"},newContentItemConfig:{value:{recordType:e().VIDEO}}}})},"1.0",{requires:["base","squarespace-models-content-item","squarespace-models-slice-content-base","squarespace-models-slice-content-has-content-item"]})},110765:function(c,b,t){"use strict";var l=t(714487),d=t(259093),o=t.n(d),e=t(649315),a=t.n(e),r=t(953203),s=t.n(r);YUI.add("squarespace-models-slice-demo-custom-form",function(n){n.namespace("Squarespace.Models"),n.Squarespace.Models.SliceDemoCustomForm=n.Base.create("SliceDemoCustomForm",n.Squarespace.Models.Form,[],{},{ATTRS:{type:{value:o().SLIDE},name:{value:(0,l.t)("Demo Form",null,{project:"scripts-v6.models"})},fields:{value:[{type:"name",id:null,locked:!1,title:(0,l.t)("Name",null,{project:"scripts-v6.models"}),description:"",required:!0,name:!0},{type:"email",id:null,locked:!1,title:(0,l.t)("Email Address",null,{project:"scripts-v6.models"}),description:"",placeholder:"",required:!0,email:!0},{type:"text",id:null,locked:!1,title:(0,l.t)("Subject",null,{project:"scripts-v6.models"}),description:"",placeholder:"",required:!0,text:!0},{type:"textarea",id:null,locked:!1,title:(0,l.t)("Message",null,{project:"scripts-v6.models"}),description:"",placeholder:"",required:!0,textarea:!0}]},submitButtonText:{value:(0,l.t)("Submit",null,{project:"scripts-v6.models"})},disclaimerMessage:{value:{html:(0,l.t)("We respect your privacy.",null,{project:"scripts-v6.models"})}},submissionMessage:{value:{html:(0,l.t)("Thank you!",null,{project:"scripts-v6.models"})}},captchaEnabled:{value:!1},captchaTheme:{value:s().LIGHT},captchaAlignment:{value:a().LEFT}}})},"1.0",{requires:["base","squarespace-models-form"]})},396929:function(c,b,t){"use strict";var l=t(259093),d=t.n(l),o=t(714487);YUI.add("squarespace-models-slice-demo-newsletter-form",function(e){e.namespace("Squarespace.Models"),e.Squarespace.Models.SliceDemoNewsletterForm=e.Base.create("SliceDemoNewsletterForm",e.Squarespace.Models.Form,[],{},{ATTRS:{type:{value:d().SLIDE},name:{value:(0,o.t)("Newsletter Form",null,{project:"scripts-v6.models"})},fields:{value:[{type:"email",id:"overlayNewsletterEmail",locked:!0,title:(0,o.t)("Email Address",null,{project:"scripts-v6.models"}),description:"",placeholder:(0,o.t)("Email Address",null,{project:"scripts-v6.models"}),required:!0,email:!0}]},disclaimerMessage:{value:{html:(0,o.t)("We respect your privacy.",null,{project:"scripts-v6.models"})},setter:function(a){return e.Lang.isString(a)?e.JSON.parse(a):a}}}})},"1.0",{requires:["base","squarespace-models-form"]})},593348:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice-list",function(o){o.namespace("Squarespace.Models"),o.Squarespace.Models.SliceList=o.Base.create("SliceList",o.Squarespace.Models.ModelList,[],{model:o.Squarespace.Models.Slice,getByType:function(e){var a,r=this.some(function(s){if(s.get("type")===e)return a=s,!0});return a},filterByTypes:function(e){return this.filter({asList:!0},function(a){return e.indexOf(a.get("type"))!==-1})},updateForLayout:function(e,a){this._removeAndDestroyDemoSlices(),this._addDemoSlices(e.get("sliceAreas"),a.get("id"))},_removeAndDestroyDemoSlices:function(){var e=this.filter({asList:!0},function(a){return a.get("isDemo")});this.remove(e),e.each(function(a){a.destroy()})},_addDemoSlices:function(e,a){e.each((function(r){if(r.get("sliceType")!==d().TEMP_LOCK_INJECT){var s=this.some(function(u){return u.get("type")===r.get("sliceType")});if(!s){var n=r.get("demoSlice"),i=new o.Squarespace.Models.Slice(o.merge(n.toJSON(),{slideId:a,isDemo:!0}));this.add(i)}}}).bind(this))}},{})},"1.0",{requires:["base","squarespace-models-model-list","squarespace-models-slice","squarespace-util"]})},504174:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-models-slice",function(o){o.namespace("Squarespace.Models");var e=o.Squarespace.Models.Slice=o.Base.create("Slice",o.Model,[o.Squarespace.ModelSync.REST],{root:o.Squarespace.API_ROOT+"slides/{slideId}/slices",url:o.Squarespace.API_ROOT+"slides/{slideId}/slices/{id}",initializer:function(){o.Do.after(function(){var a=o.Do.currentRetVal;return a=a.replace("{slideId}",this.get("slideId")),new o.Do.AlterReturn("Templating slideId.",a)},this,"getURL",this)},updateContentReferences:function(a){this.get("content").updateReferences(a)},save:function(a,r){o.Lang.isFunction(a)&&(r=a,a={}),this.get("content").saveReferences(o.bind(function(s,n){o.Lang.isValue(s)?o.Lang.isValue(r)&&r.call(this,s,n):e.superclass.save.call(this,a,(function(i,u){this._resetClientAttrs(),o.Lang.isFunction(r)&&r(i,u)}).bind(this))},this))},serialize:function(){var a=this.toJSON();return delete a.content.acceptedTypes,o.JSON.stringify(a)},parse:function(a){var r=e.superclass.parse.call(this,a);return this.get("content").setAttrs(r.content),delete r.content,r},toJSON:function(){var a=e.superclass.toJSON.call(this);return a.content=a.content.toJSON(),a},renderPreview:function(a,r){return new o.Promise(o.bind(function(s,n){try{o.Data.post({json:!0,url:o.Squarespace.API_ROOT+"slides/slice-preview",data:{slice:this.toJSON(),slideLayoutIdentifier:a,slideType:r},success:function(i){s(i)},failure:function(i){n(i)}},this)}catch{}},this))},_resetClientAttrs:function(){this.get("content").resetClientAttrs()}},{ATTRS:{id:{value:null},slideId:{value:null},type:{value:null,validator:o.Squarespace.AttrValidators.isNullOrValueIn(d())},content:{valueFn:function(){var a=this.get("type");return o.Squarespace.Models.SliceContent.Factory.create(a)},setter:function(a){var r=this.get("slideId");if(!(a instanceof o.Squarespace.Models.SliceContent.Base)){var s=this.get("type");return a=o.merge({},a,{slideId:r}),o.Squarespace.Models.SliceContent.Factory.create(s,a)}return a.set("slideId",r),a},writeOnce:"initOnly"},isDemo:{value:!1,validator:o.Squarespace.AttrValidators.isBoolean},isCompoundType:{getter:function(){var a=this.get("content");return a instanceof o.Squarespace.Models.SliceContent.Compound}},absoluteType:{getter:function(){return this.get("isCompoundType")?this.get("content").get("currentType"):this.get("type")}},absoluteContent:{getter:function(){var a=this.get("content");return this.get("isCompoundType")?a.get("currentContent"):a}}}})},"1.0",{requires:["base","event-custom","json","model","promise","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-models-slice-content-base","squarespace-models-slice-content-factory","squarespace-models-slice-content-compound","squarespace-util"]})},119873:function(c,b,t){"use strict";var l=t(89701),d=t.n(l);YUI.add("squarespace-models-slide-layout-list",function(o){o.namespace("Squarespace.Models");var e=o.Squarespace.Models.SlideLayoutList=o.Base.create("SlideLayoutList",o.Squarespace.Models.ModelList,[],{model:o.Squarespace.Models.SlideLayout,url:o.Squarespace.API_ROOT+"slide-layouts",getURL:function(){var a=o.Squarespace.ModelSync.REST.prototype.getURL.apply(this,arguments),r=a.split("?"),s=r[1],n=o.Lang.isValue(s),i=n?o.QueryString.parse(s):{};return this.get("slide")?i.slideTypes=this.get("slide").get("type"):this.get("slideTypes")&&(i.slideTypes=this.get("slideTypes")),r[0]+"?"+o.QueryString.stringify(i)},parse:function(a){var r=e.superclass.parse.call(this,a);return r.forEach(function(s){s.sliceAreas=o.Object.values(s.sliceAreas)}),r},getByIdentifier:function(a){var r,s=this.some(function(n){if(n.get("identifier")===a)return r=n,!0});return r},comparator:function(a){var r=a.get("status"),s=this.get("slide")?this.get("slide").get("layoutIdentifier"):"",n=a.get("identifier"),i=a.get("category")+n;return r===d().ALPHA?"z"+i:r===d().BETA?"y"+i:n===s?"0":i}},{ATTRS:{slide:{value:null,validator:o.Squarespace.AttrValidators.isNullOrInstanceOf(o.Squarespace.Models.Slide)},slideTypes:{}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-model-list","squarespace-models-slide","squarespace-models-slide-layout","squarespace-util"]})},422908:function(c,b,t){"use strict";var l=t(89701),d=t.n(l),o=t(385947),e=t.n(o);YUI.add("squarespace-models-slide-layout",function(a){a.namespace("Squarespace.Models");var r=a.Squarespace.Models.SlideLayout=a.Base.create("SlideLayout",a.Model,[a.Squarespace.ModelSync.REST],{root:a.Squarespace.API_ROOT+"slide-layouts",hasSliceType:function(s){return a.Lang.isArray(s)||(s=[s]),this.get("sliceAreas").some(function(n){return s.indexOf(n.get("sliceType"))!==-1})},toJSON:function(){var s=r.superclass.toJSON.call(this);return s.sliceAreas=s.sliceAreas.toJSON(),s}},{ATTRS:{identifier:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},sliceAreas:{valueFn:function(){return new a.Squarespace.Models.SliceAreaList},setter:function(s){return s instanceof a.Squarespace.Models.SliceAreaList?s:new a.Squarespace.Models.SliceAreaList({items:s})},writeOnce:"initOnly"},name:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},category:{value:null,validator:a.Squarespace.AttrValidators.isNullOrValueIn(e()),writeOnce:"initOnly"},status:{value:null,validator:a.Squarespace.AttrValidators.isNullOrValueIn(d()),writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-models-slice-area-list","squarespace-util"]})},160616:function(c,b,t){"use strict";var l=t(963351),d=t.n(l);YUI.add("squarespace-models-slide-summary",function(o){o.namespace("Squarespace.Models");var e=o.Squarespace.Models.SlideSummary=o.Base.create("SlideSummary",o.Model,[o.Squarespace.ModelSync.REST],{initializer:function(a){o.Lang.isValue(a.url)||console.error("Squarespace.Models.ResolvedSlideTweaks: Must pass contextual URL on initialize.")},parse:function(a){var r=e.superclass.parse.call(this,a),s=r.slide,n=r.slices,i=r.sliceContentReferences,u=this.get("slide"),h=this.get("slices");return u.setAttrs(s),h.reset(n),h.invoke("updateContentReferences",i),delete r.slide,delete r.slices,delete r.sliceContentReferences,r}},{ATTRS:{slide:{valueFn:function(){return new o.Squarespace.Models.Slide({type:this.get("slideType"),collectionId:this.get("collectionId")})},validator:o.Squarespace.AttrValidators.isInstanceOf(o.Squarespace.Models.Slide),writeOnce:"initOnly"},slices:{valueFn:function(){return new o.Squarespace.Models.SliceList},validator:o.Squarespace.AttrValidators.isInstanceOf(o.Squarespace.Models.SliceList),writeOnce:"initOnly"},slideType:{value:null,validator:o.Squarespace.AttrValidators.isNullOrValueIn(d()),writeOnce:"initOnly"},collectionId:{value:null}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-models-slice-list","squarespace-models-slide","squarespace-util"]})},529891:function(c,b,t){"use strict";var l=t(963351),d=t.n(l);YUI.add("squarespace-models-slide",function(o){o.namespace("Squarespace.Models"),o.Squarespace.Models.Slide=o.Base.create("Slide",o.Model,[o.Squarespace.ModelSync.REST],{root:o.Squarespace.API_ROOT+"slides",url:o.Squarespace.API_ROOT+"slides/{id}",renderPreview:function(e,a){return new o.Promise(o.bind(function(r,s){try{o.Data.post({headers:{"Content-Type":"application/json"},url:o.Squarespace.API_ROOT+"slides/preview",data:o.JSON.stringify({slide:this.toJSON(),slices:e.toJSON(),useDefaultTweaks:a}),success:function(n){r(n)},failure:function(n){s(n)}},this)}catch(n){console.error(n)}},this))}},{ATTRS:{id:{value:null},type:{value:null,validator:o.Squarespace.AttrValidators.isNullOrValueIn(d()),writeOnce:"initOnly"},collectionId:{value:null},createdOn:{value:null},updatedOn:{value:null},layoutIdentifier:{value:null,validator:o.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","model","promise","squarespace-attr-validators","squarespace-model-sync-rest","squarespace-util"]})},892711:function(){YUI.add("squarespace-models-social-data",function(c){var b=c.Base.create("social-data",c.Model,[c.Squarespace.ModelSync.REST],{url:"/api/social-search/activity",isNew:function(){return this.get("preview")&&!c.Lang.isValue(this.get("previewCollectionId"))||!this.get("preview")&&!c.Lang.isValue(this.get("socialCollectionId"))}},{ATTRS:{socialSearch:{},socialCollectionId:{},previewCollectionId:{},searchFlag:{},preview:{}}});c.namespace("Squarespace.Models").SocialData=b},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-model-sync-rest"]})},908395:function(c,b,t){"use strict";var l=t(714487),d=t(296923),o=t.n(d);YUI.add("squarespace-models-store-item",function(e){e.namespace("Squarespace.Models"),e.Squarespace.Models.StoreItem=e.Base.create("StoreItem",e.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"StoreItem",validator:function(a){return a==="StoreItem"},readOnly:!0},productType:{value:o().PHYSICAL,validator:e.Squarespace.AttrValidators.isValueIn(o())},priceCents:{value:0,validator:e.Squarespace.AttrValidators.isNumber},salePriceCents:{value:0,validator:e.Squarespace.AttrValidators.isNumber},onSale:{value:!1,validator:e.Squarespace.AttrValidators.isBoolean},variants:{value:[],validator:e.Squarespace.AttrValidators.isArray},originalVariants:{value:[],validator:e.Squarespace.AttrValidators.isArray},variantOptionOrdering:{value:[],validator:e.Squarespace.AttrValidators.isArray},additionalFieldsFormId:{value:null,validator:e.Squarespace.AttrValidators.isNullOrString},customAddButtonText:{value:(0,l.t)("Add to Cart",null,{project:"scripts-v6.models"}),validator:e.Squarespace.AttrValidators.isString},useCustomAddButtonText:{value:!1,validator:e.Squarespace.AttrValidators.isBoolean},additionalFieldsForm:{value:null},isSubscribable:{value:!1,validator:e.Squarespace.AttrValidators.isBoolean},relatedCategories:{value:[],validator:e.Squarespace.AttrValidators.isArray},relatedCategoryIds:{value:[],validator:e.Squarespace.AttrValidators.isArray}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},973108:function(){YUI.add("squarespace-models-structured-content",function(c){c.namespace("Squarespace.Models"),c.Squarespace.Models.StructuredContent=c.Base.create("StructuredContent",c.Model,[],{},{ATTRS:{_type:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators"]})},27411:function(c,b,t){"use strict";var l=t(516614);YUI.add("squarespace-models-template-installation",function(d){var o=d.namespace("Squarespace.Models").TemplateInstallation=d.Base.create("TemplateInstallation",d.Model,[d.Squarespace.ModelSync.REST],{url:"/api/template-installations/{id}",root:"/api/template-installations",getThumbnailAssetUrl:function(a){var r=this.get("templateWebsiteTaxonomy.thumbnailAssetUrl");return d.Lang.isValue(r)?r+="?format="+a:r="/universal/images-v6/configuration/no-image.png",r},serialize:function(){var a=this.toJSON();return delete a.templateWebsite,d.JSON.stringify(a)}},{ATTRS:{templateId:{validator:d.Lang.isString},displayName:{valueFn:function(){var a=this.get("templateWebsiteTaxonomy.displayName");return d.Lang.isValue(a)||(a=this.get("templateWebsite.siteTitle")),a}},isPreviewTemplate:{getter:function(){var a=l.Z.getState().previewInstallationId;return a===this.get("id")}},isLiveTemplate:{getter:function(){var a=l.Z.getState().liveInstallationId;return a===this.get("id")}}},createWithTemplateWebsiteIdentifier:function(a){return new d.Promise(function(r,s){d.Data.post({url:"/api/template-installations/addTemplate",data:{templateWebsiteIdentifier:a},success:function(n){r(new o(n))},failure:function(n){s(n)}})})},installSevenOneTemplate:function(){return new d.Promise(function(a,r){d.Data.post({url:"/api/sevenonemigration/preview",success:function(s){a(new o(s))},failure:r})})}}),e=d.Base.create("TemplateInstallationList",d.ModelList,[d.ModelSync.REST],{model:o,url:"/api/template-installations",initializer:function(){},sort:function(){var a=this.toArray(),r=a.find(function(n){return n.get("isPreviewTemplate")});r&&(a.splice(a.indexOf(r),1),a.unshift(r));var s=a.find(function(n){return n.get("isLiveTemplate")});return s&&(a.splice(a.indexOf(s),1),a.unshift(s)),this._defResetFn({models:a,src:"sort"}),this},getPreviewInstallation:function(){var a=l.Z.getState().previewInstallationId;return this.getById(a)}},{ATTRS:{}});d.namespace("Squarespace.Singletons"),d.Squarespace.Singletons.TemplateInstallationListCache=new e({items:[]})},"1.0",{requires:["base","model","model-list","promise","squarespace-model-sync-rest"]})},930762:function(c,b,t){"use strict";var l=t(714487),d=t(104002),o=t(681328),e=t(484623),a=t.n(e),r=t(28849),s=t(810965),n=t(985913),i=t(387582),u=t(868192);YUI.add("squarespace-models-template-navigation-list",function(h){var g=h.Base.create("TemplateNavigation",h.Model,[],{toJSON:function(){var m=this.constructor.superclass.toJSON.call(this);return m},_setItemList:function(m){h.Lang.isObject(m)&&(m=this.constructor.ATTRS.itemList.valueFn.call(this));var _=new h.Squarespace.Models.NavigationItemList;return _.setTemplateNavigation(this),h.Array.forEach(m,function(v){var E=h.clone(v.children,!0);delete v.children;var S=_.add(v);S.set("children",E||[])},this),_},setTemplateNavigationList:function(m){this._templateNavigationList=m},getTemplateNavigationList:function(){return this._templateNavigationList}},{ATTRS:{index:{validator:h.Lang.isBoolean},name:{},title:{},itemList:{lazyAdd:!1,value:[],valueFn:function(){var m=this.get("name"),_=d.default.getState()[m],v=_&&_.links?a()(_.links):[];return v},setter:"_setItemList"},acceptTypes:{valueFn:function(){var m=["subscription","gallery-block","template-page"],_=o.default.getState().collectionConfigs;return h.Array.filter(h.Object.keys(_),function(v){return m.indexOf(v)===-1}).concat(["link"])}},emptyMessage:{valueFn:function(){return(0,l.t)("This navigation is empty",null,{project:"scripts-v6.models"})}},errors:{valueFn:function(){var m=this.get("name"),_=d.default.getState()[m];return _&&_.errors?_.errors:[]}}}}),p=h.Base.create("TemplateNavigationList",h.ModelList,[],{model:g,initializer:function(){this._bootstrapNewList(),o.default.listen((function(){o.default.getState().installationId!==this.get("installationId")&&(this.reset(o.default.getState().navigations),this.set("installationId",o.default.getState().installationId),this.set("templateId",o.default.getState().id))}).bind(this)),this._maUnsubscribe=s.Z.listen((function(m){m.isMAFeatureEnabled!==this._prevIsMAFeatureEnabled&&(this._prevIsMAFeatureEnabled=m.isMAFeatureEnabled,this._bootstrapNewList())}).bind(this)),this.after("reset",this._bootstrapNewList),this.after("add",function(m){this._bootstrapReference(m.model)},this)},isValidNavigationName:function(m){return h.Lang.isValue(this.getNavigation(m))},getNavigation:function(m){var _=this.toArray();return h.Array.find(_,function(v){return v.get("name")===m})},destructor:function(){this._memberAreaNavigation&&(this._memberAreaNavigation.destroy(),this._memberAreaNavigation=null),this._hiddenNavigation.destroy(),this._hiddenNavigation=null,this._maUnsubscribe()},_bootstrapReference:function(m){m.setTemplateNavigationList(this)},_bootstrapNewList:function(){this._createMemberAreaNavigation(),this._createHiddenNavigation(),this.each(function(m){this._bootstrapReference(m)},this)},_createMemberAreaNavigation:function(){if(r.mP()){this._memberAreaNavigation&&this._memberAreaNavigation.destroy();var m={testAttr:i.Z.memberAreaNavigationTestAttr,index:!1,name:i.Z.memberAreaNavigationName,title:(0,l.t)("Member Sites",null,{project:"scripts-v6.models"}),className:"member-areas",emptyMessage:(0,l.t)("There are no member sites.",null,{project:"scripts-v6.models",notes:"Message shown in member site navigation in pages panel when there are no member sites"}),description:(0,l.t)('Create content for members only. <a href="{kbLinkAction}" target="_blank">Learn more</a>',{kbLinkAction:u.GETTING_STARTED_WITH_DIGITAL_PRODUCTS},{project:"scripts-v6.models"}),acceptTypes:[i.Z.MEMBER_AREA_NAVIGATION_TYPE]};this._memberAreaNavigation=this.add(m)}},_createHiddenNavigation:function(){this._hiddenNavigation&&this._hiddenNavigation.destroy(),this._hiddenNavigation=this.add({index:!1,name:i.Z.hiddenNavigationName,testAttr:"navlist-not_linked",title:(0,l.t)("Not Linked",null,{project:"scripts-v6.models"}),emptyMessage:(0,l.t)("There are no unlinked pages.",null,{project:"scripts-v6.models"}),description:(0,l.t)('These pages are public unless they\u2019re disabled or password-protected, but they don\u2019t appear in the navigation. Search engines can also discover them. <a href="{kbNotLinkAction}" target="_blank">Learn more</a>',{kbNotLinkAction:u.PAGE_NOT_LINKED},{project:"scripts-v6.models"})})},getHiddenNavigation:function(){return this._hiddenNavigation},getMemberAreaNavigation:function(){return this._memberAreaNavigation},_getNavigationItemForCollectionIdFromList:function(m,_){for(var v=m.toArray(),E=0;E<v.length;E++){if(v[E].get("collectionId")===_)return v[E];var S=v[E].get("children");if(S&&!S.isEmpty()){var y=this._getNavigationItemForCollectionIdFromList(S,_);if(h.Lang.isValue(y))return y}}},getItemByCollectionId:function(m){for(var _=this.toArray(),v=0;v<_.length;v++){var E=this._getNavigationItemForCollectionIdFromList(_[v].get("itemList"),m);if(h.Lang.isValue(E))return E}},getNavigationItemCount:function(){return this.get("itemList").reduce(function(m,_){return m+_.getTotalSize()},0)},getHiddenNavigationItemList:function(){return this.getHiddenNavigation().get("itemList")}},{ATTRS:{templateId:{},installationId:{},acceptTypes:{value:[]}}});if((0,n.F)(h))h.Squarespace.Singletons.TemplateNavigationList=h.Object.getValue(h.config.win.top,"Y.Squarespace.Singletons.TemplateNavigationList".split("."));else{var f=h.Object.getValue(Static,["SQUARESPACE_CONTEXT","template","navigations"]);f&&(h.Squarespace.Singletons.TemplateNavigationList=new p({items:f,templateId:h.Object.getValue(Static,["SQUARESPACE_CONTEXT","template","id"]),installationId:h.Object.getValue(Static,["SQUARESPACE_CONTEXT","installationId","id"])}))}},"1.0",{requires:["base","model","squarespace-damask-context-globals","squarespace-models-navigation","squarespace-util"]})},108390:function(){YUI.add("squarespace-models-tweet",function(c){c.namespace("Squarespace.Models"),c.Squarespace.Models.Tweet=c.Base.create("Tweet",c.Squarespace.Models.StructuredContent,[],{},{ATTRS:{_type:{value:"Tweet",validator:function(b){return b==="Tweet"},readOnly:!0},tweetId:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},timeZone:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},accountId:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},displayName:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},accountName:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},tweet:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},profileImageUrl:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},profileImageUrlHttps:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString},userLocation:{value:null,validator:c.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-structured-content"]})},190598:function(){YUI.add("squarespace-models-website-settings",function(c){var b=c.namespace("Squarespace.Models").WebsiteSettings=c.Base.create("WebsiteSettings",c.Model,[c.Squarespace.ModelSync.REST],{url:"/api/settings",root:"/api/settings",serialize:function(){var t=this.toJSON();return t&&c.Lang.isObject(t.tutorialsCompleted)?t.tutorialsCompleted=c.Object.keys(t.tutorialsCompleted):t.tutorialsCompleted=[],t.notFoundPageId==="system-default"&&(t.notFoundPageId=null),c.JSON.stringify(t)},parse:function(t){var l=b.superclass.parse.apply(this,arguments);return l=c.merge({contactPhoneNumber:""},l),l}},{ATTRS:{websiteId:{},ownerId:{},tutorialsCompleted:{},lastAgreedTermsOfService:{},type:{},content:{},goals:{},subject:{},country:{},state:{},markdownMode:{},simpleLikingEnabled:{},defaultPostFormat:{},commentLikesAllowed:{},commentAnonAllowed:{},commentThreaded:{},commentApprovalRequired:{},commentAvatarsOn:{},commentSortType:{},commentFlagThreshold:{},commentEnableByDefault:{},commentDisableAfterDaysDefault:{},disqusShortname:{},notFoundPageId:{},homepageTitleFormat:{},collectionTitleFormat:{},itemTitleFormat:{},commentsEnabled:{},amazonAssociateTag:{},contactPhoneNumber:{},contactEmail:{},hours:{},allowSquarespacePromotion:{},storeSettings:{},useEscapeKeyToLogin:{},configurationMenuItems:{},socialAccountDisplayOrder:{validator:c.Lang.isNullOrArray},announcementBarSettings:{value:{}},mobileInfoBarSettings:{value:{}},pinterestOverlayOptions:{value:{}},popupOverlaySettings:{value:{}}}})},"1.0",{requires:["base","model","squarespace-context","squarespace-model-sync-rest"]})},816660:function(c,b,t){"use strict";var l=t(387582);YUI.add("squarespace-models-website",function(d){var o=d.namespace("Squarespace.Models");o.Website=d.Base.create("website",d.Model,[d.Squarespace.ModelSync.REST],{url:d.Squarespace.REST_API_ROOT+"websites/mine",_parsePlanResponse:function(e){var a=e.results;return d.Array.map(a,function(r){var s=r.plan,n=r.period;return{disabled:r.disabled,planLevel:{genus:r.plan.genus,displayName:s.displayName,allowedPeriods:s.allowedPeriods,value:s.plan,featureLevel:s.featureLevel},planPeriod:{displayName:n.displayName,intervalDays:n.intervalDays,value:n.period},price:r.price,subtotal:r.subtotal,tax:r.tax,taxRate:r.taxRate,total:r.total}})},serialize:function(){var e=this.toJSON();return delete e.shareButtonOptions,delete e.logoImage,delete e.mobileLogoImage,delete e.socialLogoImage,delete e.faviconItem,d.JSON.stringify(e)},parse:function(){var e=o.Website.superclass.parse.apply(this,arguments);return d.Lang.isObject(e)&&(e.hasPassword?e.password=l.Z.PASSWORD_MASK:e.password="",e.logoImageId||(e.logoImageId=null,e.logoImage=null),e.mobileLogoImageId||(e.mobileLogoImageId=null,e.mobileLogoImage=null),e.socialLogoImageId||(e.socialLogoImageId=null,e.socialLogoImage=null),e.faviconItemId||(e.faviconItemId=null,e.faviconItem=null)),e},_imageSetterFactory:function(e){return d.bind(function(a){d.Lang.isObject(a)?a instanceof d.Squarespace.Models.ContentItem?this.set(e,a.get("id"),{silent:!0}):this.set(e,a.id,{silent:!0}):this.set(e,null,{silent:!0})},this)}},{ATTRS:{logoImage:{setter:function(e){return this._imageSetterFactory("logoImageId")(e)}},mobileLogoImage:{setter:function(e){return this._imageSetterFactory("mobileLogoImageId")(e)}},socialLogoImage:{setter:function(e){return this._imageSetterFactory("socialLogoImageId")(e)}},faviconItem:{setter:function(e){return this._imageSetterFactory("faviconItemId")(e)}}}})},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-models-plan","squarespace-util-authenticated"]})},802040:function(){YUI.add("squarespace-multi-loader",function(c){c.namespace("Squarespace"),c.Squarespace.MultiLoader=c.Base.create("MultiLoader",c.Base,[],{initializer:function(){this.publish("load")},load:function(){var b=new c.Parallel;c.Array.each(this.get("loadables"),function(t){t.load(b.add())}),b.done(c.bind(function(){this.fire("load")},this))}},{ATTRS:{loadables:{value:[],validator:function(b){var t=!c.Array.some(b,function(l){return!c.Lang.isFunction(l.load)});return!!t},writeOnce:"initOnly"}}})},"1.0",{requires:["base","parallel"]})},588771:function(){YUI.add("squarespace-navigation-events",function(c){c.namespace("Squarespace.Navigation");var b=new c.EventTarget;b.publish("item:initialize"),b.publish("item:destroy"),b.publish("item:delete"),b.publish("item:new"),b.publish("item:select"),b.publish("item:active"),b.publish("item:unsupported"),b.publish("item:registerPusher"),b.publish("item:deregisterPusher"),b.publish("itemList:addDialog"),b.publish("itemList:linkAdd"),b.publish("itemList:linkConfigure"),b.publish("itemList:delete"),b.publish("itemList:dd"),b.publish("itemList:dd-saved"),b.publish("collection:create"),b.publish("memberarea:create"),b.publish("memberarea:navigationTitleChange"),b.publish("memberarea:delete"),b.publish("memberarea:homepage:delete"),b.publish("collection:update"),b.publish("collection:homepage"),b.publish("memberarea:homepage"),b.publish("collection:emptyTrash"),b.publish("content:update"),b.publish("content:itemSelect"),b.publish("content:itemDelete"),b.publish("demo:editAttempt"),c.Lang.isValue(c.Squarespace.Navigation.Events)||(c.Squarespace.Navigation.Events=b)},"1.0",{requires:["event"]})},577259:function(c,b,t){"use strict";var l=t(437951),d=t.n(l),o=t(834304),e=t.n(o);YUI.add("squarespace-navigation-list-utils",function(a){a.namespace("Squarespace.Navigation"),a.Squarespace.Navigation.ListUtils={refreshNavigationList:function(){a.Data.get({url:"/api/commondata/GetSiteLayout",success:function(r){var s={};a.Squarespace.Singletons.TemplateNavigationList.each(function(n){s[n.name]=n}),r.layout.forEach(function(n){var i=s[n.identifier];if(!i)a.Squarespace.Logger.log("Missing Navigation",{message:'Could not locate "'+n.identifier+'" in Y.Squarespace.NavigationUIUtils',action:"refreshNavigationList",fileName:"content-manager/navigation-ui-utils.js"});else{var u={};i.itemList.forEach(function(h){var g=h.collectionId;g?u[g]=h:u[h.externalLink.url]=h}),n.links.forEach(function(h){!(a.Lang.isValue(h.collectionId)&&a.Object.hasKey(u,h.collectionId))&&!(a.Object.getValue(h,["externalLink","url"])&&a.Object.hasKey(u,h.externalLink.url))&&i.itemList.push(h)})}})}})},getParentCollection:function(r){var s=a.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(r.get("id"));if(!s)return!1;var n=s.getFolderItemList();if(!n)return!1;var i=n.getNavigationItem();return!i||!i.get("collectionId")?!1:i.get("collection")},getCollectionIndexInIndex:function(r){var s=a.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(r.get("id"));if(!s)return-1;var n=s.getFolderItemList();if(!n)return-1;var i=n.getNavigationItem();return!i||!i.get("collectionId")?-1:i.get("children")._items.indexOf(s)},indexCollectionRequiresReload:function(r){!this.isCollectionAnIndex(r)&&this.isCollectionInIndex(r)&&(r=a.Squarespace.Navigation.ListUtils.getParentCollection(r));var s=r.getTemplateConfiguration(),n=s.get("indexType");return n===e().FULL_URL||!a.Lang.isValue(n)},isCollectionInIndex:function(r){var s=a.Squarespace.Navigation.ListUtils.getParentCollection(r);return s?a.Squarespace.Navigation.ListUtils.isCollectionAnIndex(s):!1},isCollectionAnIndex:function(r){if(!r)return!1;var s=r.getTemplateConfiguration();if(s.get("index"))return!0;var n=s.get("indexType"),i=a.Object.values(e());return i.indexOf(n)!==-1},isCollectionAStackedIndex:function(r){if(!r)return!1;var s=r.getTemplateConfiguration();return s.get("indexType")===e().STACKED},isCollectionAPortfolio:function(r){if(!r)return!1;var s=r.getTemplateConfiguration();return s.get("collectionType")===d().PORTFOLIO||s.get("indexType")===e().GRID},isCollectionInPortfolio:function(r){if(!r)return!1;var s=a.Squarespace.Navigation.ListUtils.getParentCollection(r);return s?a.Squarespace.Navigation.ListUtils.isCollectionAPortfolio(s):!1},isCollectionInStackedIndex:function(r){if(!r)return!1;var s=a.Squarespace.Navigation.ListUtils.getParentCollection(r);return s?a.Squarespace.Navigation.ListUtils.isCollectionAStackedIndex(s):!1},getIndexCollectionForCollection:function(r){if(this.isCollectionAnIndex(r))return r;if(this.isCollectionInIndex(r)){var s=a.Squarespace.Navigation.ListUtils.getParentCollection(r);return s}return null},shouldAddChevron:function(r){if(!r)return!1;var s=r.getTemplateConfiguration(),n=s.get("collectionType");return n===d().PORTFOLIO||n===d().LESSONS||s.get("indexType")===e().GRID}}},"1.0",{requires:["squarespace-data","squarespace-logger","squarespace-models-template-navigation-list"]})},264878:function(c,b,t){"use strict";var l=t(798589),d=t(181298);YUI.add("squarespace-node-flyout",function(o){o.namespace("Squarespace.Animations").Flyout=o.Base.create("flyoutPlugin",o.Plugin.Base,[],{initializer:function(e){this._mask=o.Node.create('<div class="flyout-animation-wrapper sqs-flyout-mask"></div>'),this._mask.setStyles({position:"fixed",overflow:this.get("overflow")}),this._mask.setStyle("z-index","300001"),this._mask.setStyle("zIndex","300001"),this._isShowing=!1,this._isHiding=!1},destructor:function(){this._anim&&this._anim.stop().destroy(),this._mask.remove(!0),o.detachAll(this.get("id")+"|*")},_onScroll:function(e){var a=this.get("host");(e.target.contains(a)||e.currentTarget.contains(a))&&this._updateMaskPosition()},_onResize:function(){this._updateMaskPosition()},show:function(){!this.get("visible")&&!this._isShowing&&this._animateFlyout(!0)},hide:function(){this.get("visible")&&!this._isHiding&&this._animateFlyout(!1)},_measureNode:function(e){return o.Squarespace.NodeUtils.measureNode(e)},_animateFlyout:function(e){var a=this._mask,r=this.get("node"),s=this._measureNode(r),n=this._getInitialFlyoutOffset();if(this._updateMaskPosition(),this._anim&&(this._anim.stop(!0),this._anim=null),e){a.setStyles({height:s.height,width:s.width+1}),r.setStyles({position:"absolute",top:n.yOffset,left:n.xOffset}),a.appendChild(r);var i=this.get("renderTarget")||o.one("body");i.appendChild(a)}this._anim=new o.Anim({duration:this.get("duration"),easing:this.get("easing"),node:r,to:{top:e?0:n.yOffset,left:e?0:n.xOffset}}),this.get("animateOpacity")&&(this._anim.set("from.opacity",e?0:1),this._anim.set("to.opacity",e?1:0)),this._anim.on(this._yuid+"|end",function(){this._anim=null,e?(this._isShowing=!1,this._mousewheelEvent=o.on(this.get("id")+"|mousewheel",this._onScroll,this),this._resizeEvent=o.one(window).on(this.get("id")+"|resize",this._onResize,this)):(this._isHiding=!1,r.remove(),a.remove(),this._mousewheelEvent&&(this._mousewheelEvent.detach(),this._mousewheelEvent=null),this._resizeEvent&&(this._resizeEvent.detach(),this._resizeEvent=null)),this.set("visible",e),this.fire(e?"shown":"hidden",{flyout:r}),this.get("host").fire("flyout-"+e?"shown":"hidden",{flyout:r})},this),e?this._isShowing=!0:this._isHiding=!0,r.inDoc()&&this._anim.run()},_updateMaskPosition:function(){if(this._mask){var e=this._mask,a=this._getIntendedMaskPosition();return l.isSubDesktop()&&window.innerHeight<a.y?e.setStyles({left:a,top:null,bottom:d.GRID_PX/2+"px"}):e.setStyles({left:a.x,top:a.y}),a}},_getInitialFlyoutOffset:function(){var e=o.Squarespace.Animations.Flyout,a=this.get("alignment"),r=this._measureNode(this.get("node")),s,n;switch(a){case e.LT:case e.LC:case e.LR:s=r.width;break;case e.TL:case e.TC:case e.TR:case e.BL:case e.BC:s=0;break;case e.RT:case e.RC:case e.RB:s=r.width*-1;break;default:throw new Error("Flyout: This should never happened, check your alignment settings")}switch(a){case e.LT:case e.LC:case e.LB:case e.RT:case e.RC:case e.RB:n=0;break;case e.BL:case e.BC:case e.BR:n=r.height*-1;break;case e.TL:case e.TC:case e.TR:n=r.height;break;default:throw new Error("Flyout: This should never happened, check your alignment settings")}return{xOffset:s,yOffset:n}},_getIntendedMaskPosition:function(){var e=o.Squarespace.Animations.Flyout,a=this.get("alignment"),r=this.get("host").get("region"),s=this._measureNode(this.get("node")),n,i,u=o.DOM.docScrollY(),h=o.DOM.docScrollX();switch(r.top-=u,r.bottom-=u,r.left-=h,r.right-=h,a){case e.RT:case e.RC:case e.RB:n=r.right;break;case e.LT:case e.LC:case e.LB:n=r.left-s.width;break;case e.TL:case e.BL:n=r.left;break;case e.TC:case e.BC:n=r.left+r.width/2-s.width/2;break;case e.TR:case e.BR:n=r.right-s.width;break;default:throw new Error("Flyout: This should never happened, check your alignment settings")}switch(a){case e.TL:case e.TC:case e.TR:i=r.top-s.height;break;case e.LT:case e.RT:i=r.top;break;case e.LC:case e.RC:i=r.top+r.height/2-s.height/2;break;case e.LB:case e.RB:i=r.bottom-s.height;break;case e.BL:case e.BC:case e.BR:i=r.bottom;break;default:throw new Error("Flyout: This should never happened, check your alignment settings")}return{x:n,y:i}}},{NS:"flyoutPlugin",TL:"tl",TC:"tc",TR:"tr",RT:"rt",RC:"rc",RB:"rb",BC:"bc",BL:"bl",BR:"br",LT:"lt",LC:"lc",Lb:"lb",ATTRS:{duration:{value:.3,validator:o.Lang.isNumber},easing:{value:o.Easing.easeOutStrong},alignment:{value:"rt",validator:function(e){var a=o.Squarespace.Animations.Flyout;switch(e){case a.TL:case a.TC:case a.TR:case a.LT:case a.RT:case a.LC:case a.RC:case a.LB:case a.RB:case a.BL:case a.BC:case a.BR:return!0;default:return!1}}},node:{value:null},animateOpacity:{value:!0},renderTarget:{valueFn:function(){var e=this.get("host");return e instanceof o.Node&&e.ancestor("body")?e.ancestor("body"):o.one("body")}},overflow:{value:"hidden"},visible:{value:!1}}})},"1.0",{requires:["base","node","plugin","squarespace-node-utils"]})},788797:function(){YUI.add("squarespace-node-utils",function(c){c.namespace("Squarespace.NodeUtils"),c.Squarespace.NodeUtils={measureNode:function(b){var t=b.inDoc();t||(b.setStyle("visibility","hidden"),c.one("body").appendChild(b));var l=b.cloneNode(!0);l.setStyles({visibility:"hidden",display:"block",position:"absolute"}),b.insert(l,"after");var d=l.get("offsetHeight"),o=l.get("offsetWidth");return l.remove(!0),t||(b.remove(),b.setStyle("visibility",null)),{height:d,width:o}},getClosestScrollingAncestor:function(b){return b.ancestor(c.Squarespace.NodeUtils.isScrollable,!0,"body")},isScrollable:function(b){var t=getComputedStyle(b.getDOMNode()).overflowY;return t==="auto"||t==="scroll"}}},"1.0",{requires:[]})},298164:function(c,b,t){"use strict";var l=t(461761),d=t.n(l),o=t(787592);YUI.add("squarespace-object-builder",function(e){var a=e.namespace("Squarespace.StringTemplate");a.filters={lower:function(g){return(g||"").toLowerCase()},capitalize:function(g){return g.length<=1?g:g.charAt(0).toUpperCase()+g.slice(1)},withIndefiniteArticle:function(g){var p=["a","e","i","o","u"];return g.length===0?g:p.indexOf(g.charAt(0).toLowerCase())!==-1?"an "+g:"a "+g}};function r(g,p,f){f=e.merge(a.filters,f);var m=/\{(\s*)([^\s|]+)((?:\|[^}]+)?)(\s*)\}/g;return g.replace(m,function(v,E,S,y,C){var O=p[S],A=!1;if(typeof O>"u"&&(A=!0),y)try{for(var I=y.split("|").filter(function(P){return P}),D=0,T=I.length;D<T;D++){var B=I[D].split(/[:,\s]+/g),N=B.shift();if(N)if(f[N])O=f[N](O,B,p);else if(N[0]==="'"&&N[N.length-1]==="'"||N[9]==='"'&&N[N.length-1]==='"')O||(O=N.slice(1,-1));else throw new Error("Unknown filter: `"+N+'` in "'+v+'"')}}catch(P){return o.Tb(P),v}return E+(O||"")+C})}a.template=r;function s(){var g=Array.prototype.slice.call(arguments),p=g.shift(),f=g[g.length-1],m=f==="prependArrays";f==="prependArrays"||f==="appendArrays"?g.pop():f=null;for(var _=0,v=g.length;_<v;_++)if(g[_])for(var E in g[_])f&&g[_][E]&&e.Lang.isArray(g[_][E])?p[E]=(m?g[_][E]:p[E]||[]).concat((m?p[E]:g[_][E])||[]):p[E]=g[_][E];return p}function n(g,p){if(!(g instanceof e.Base)){for(var f in g)if(Object.prototype.hasOwnProperty.call(g,f)&&!(g[f]instanceof e.Base)&&!(g[f]instanceof e.Node)&&!e.Lang.isFunction(g[f])){for(var m=g[f],_=0;_<p.length&&((typeof p[_].test>"u"||p[_].test(g[f],f,g))&&(p[_].each&&p[_].each(g[f],f,g),p[_].map&&(g[f]=p[_].map(g[f],f,g))),!(typeof g[f]>"u"));_++);if(g[f]!==null&&typeof g[f]=="object"&&!m.$dontRecurse&&n(g[f],p),g[f]instanceof Array)for(var v=0;v<p.length;v++)(typeof p[v].postTest>"u"||p[v].postTest(g[f]))&&p[v].post&&(g[f]=p[v].post(g[f],f,g))}return g}}function i(g,p,f){var m={include:{test:function(_){return _&&_.$include},map:function(_){var v,E=_.$include;!e.Lang.isArray(E)&&!e.Lang.isObject(E[0])&&(E=[E]);for(var S=0,y=E.length;S<y;S++){var C=E[S],O;if(typeof C=="string"){var A=C.split(".");O=f;for(var I=0,D=A.length;I<D;I++)if(O[A[I]])O=e.clone(O[A[I]]);else throw new Error("Bad path `"+C+"`: `"+A[I]+"` not found.")}else{if(typeof C=="object"){for(var T in C)if(typeof T=="string"&&T.indexOf(".")!==-1){for(var B=T.split("."),N=O;B.length!==0;){var P=B.shift();if(B.length===0){N[P]=C[T];break}else{var x=[P].concat(B).join(".");if(N.hasOwnProperty(x)){B=[x];continue}else N.hasOwnProperty(P)||(N[P]={});N=N[P]}}delete C[T]}}O=C}v=s(v||(e.Lang.isArray(O)?[]:{}),O,"prependArrays")}return _.$update&&(v.$update=_.$update),_.$concat&&(v.$concat=_.$concat),_.$when&&(v.$when=_.$when),v}},update:{test:function(_){return _&&_.$update},each:function(_){var v=[],E=_.$update;delete _.$update;function S(O,A){return function(I,D){return D===O&&I===A}}function y(O){return function(A,I,D){e.mix(D,O,!0)}}for(var C in E)C[0]==="."?v.push({test:S("name",C.slice(1)),each:y(E[C])}):v.push({test:S("type",C),each:y(E[C])});return n(_,v)}},when:{test:function(_){return _&&_.$when},map:function(_){if(e.Lang.isFunction(_.$when)&&_.$when(f))return _.$value?_.$value:(delete _.$when,_)}},value:{test:function(_){return _&&_.$value},map:function(_){return f[_.$value]}},valueFn:{test:function(_){return _&&_.$valueFn},map:function(_){var v=_.$valueFn(f);return _.$concat&&(v.$concat=_.$concat),v}},template:{test:function(_,v,E){if(typeof _!="string"||E.$escape||!e.Squarespace.StringTemplate)return!1;var S=E.engine==="wysiwyg";if(S)return!1;if(E.engine==="source"||d()(E,"wysiwyg.engine")==="source"){var y=E.mode==="markdown"||d()(E,"wysiwyg.mode")==="markdown",C=E.mode==="htmlmixed"||d()(E,"wysiwyg.mode")==="htmlmixed";if(y||C)return!1}return!0},map:function(v){var E=e.Squarespace.StringTemplate.template(v,f);return E}},concat:{postTest:function(_){var v=!1;if(_&&_ instanceof Array)for(var E=0;E<_.length;E++)_[E]&&_[E]instanceof Array&&_[E].$concat&&(v=v||_[E].$concat);return v},post:function(_,v,E){for(var S=[],y=0;y<_.length;y++)_[y]&&_[y]instanceof Array&&_[y].$concat?S=S.concat(_[y]):S.push(_[y]);return S}},trim:{postTest:function(_){return e.Lang.isArray(_)},post:function(_,v,E){var S=_.filter(function(y){return!e.Lang.isUndefined(y)});return _.$concat&&(S.$concat=_.$concat),S}}};return n(e.merge(p),g.map(function(_){return m[_]}))}function u(g,p,f){var m=i(["include","update"],g,p);return m=i(["when","value","valueFn","template","concat","trim"],m,f),m}var h=e.namespace("Squarespace.ObjectBuilder");h.operations=["include","update","when","value","template","concat","trim"],h.walkObject=n,h.build=i,h.make=u,h.makeArray=function(g,p,f){var m=[];return m.push({obj:g}),p&&m.push(p),f&&m.push(f),u.apply(h,m).obj}},"1.0",{requires:["oop"]})},92408:function(c,b,t){"use strict";var l=t(304003),d=t.n(l);YUI.add("squarespace-oembed-resolvers",function(o){o.namespace("Squarespace"),o.Squarespace.EmbedResolver=o.Base.create("embedResolver",o.Base,[],{canProcess:function(a,r){var s=new RegExp(this.get("pattern"),"g");return a.match(s)&&(!o.Lang.isValue(r)||r===this.get("type"))},getProvider:function(){return this.get("serviceName").toLowerCase()},process:function(a,r,s){o.jsonp(this.get("serviceUrl")+"&url="+encodeURIComponent(a),{on:{success:o.bind(function(n,i){n=this._sanitizeResolvedData(n,i),r.onSuccess.apply(s,arguments)},this),failure:r.onFailure,timeout:r.onTimeout},args:[a],timeout:5e3,context:s})},_sanitizeResolvedData:function(a,r){var s=this.getProvider();if(s==="instagram")a.title==="Instagram"&&(a.title=null),a["instagram-url"]=a.thumbnail_url;else if(!a.html)return null;return this._camelCaseDataKeys(a),o.merge(a,{url:r,html:this._getCleanedHTML(a,r),resolveObject:this.get("objectName"),resolvedBy:s,resolved:!0})},_camelCaseDataKeys:function(a){var r=["author_name","author_url","provider_name","provider_url","thumbnail_url"];o.Array.each(r,function(s){var n=a[s];n&&(a[d()(s)]=n,delete a[s])})},_getCleanedHTML:function(a,r){var s=this.getProvider();if(s==="instagram")return o.Squarespace.UITemplates.render("instagram-oembed.html",o.merge({url:r},a));if(s==="youtube"){var n=/^.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,i=(r.match(n)||["",""])[1],u=r.split("?")[1]||"";u&&(u="?"+this._resolveYouTubeParams(u)),i&&(a.html=o.Squarespace.UITemplates.render("youtube-oembed.html",{data:a,src:"//www.youtube.com/embed/"+i+u}))}return this._augmentEmbed(a.html.trim())},_augmentEmbed:function(a){var r=o.Node.create("<div>"+a+"</div>"),s="";return r.all("iframe").each(this._augmentIframeEmbed,this),r.all("object").each(this._augmentObjectEmbed,this),s=r.get("innerHTML"),r.destroy(),s},_augmentIframeEmbed:function(a){var r=a.getAttribute("src"),s=r.match(/^[^\?&#]+/)[0],n=(r.match(/#[^\?&]+$/)||[""])[0],i=(r.match(/\?[^#]+/)||[""])[0],u=i.split(/[\?|&]/);switch(u=o.Array.filter(u,function(h){return h&&h.search(/^wmode=/)<0}),u.push("wmode=opaque"),this.getProvider()){case"youtube":u.push("enablejsapi=1")}r=s+"?"+u.join("&")+n,a.setAttribute("src",r)},_augmentObjectEmbed:function(a){a.all("embed").each(function(r){r.setAttribute("wmode","opaque")}),a.all("param").each(function(r){r.getAttribute("name")==="wmode"&&r.remove(!0)}),a.prepend(o.Node.create('<param name="wmode" value="opaque"/>'))},_resolveYouTubeParams:function(a){var r=/(^|\&)(?:v=)(?:[^#\&]*)(\&|$)/,s=/(^|\&)(?:t=)([^#\&]*)/g;return a=a.replace(r,function(n,i,u){return i&&u?"&":""}),a=a.replace(s,function(n,i,u){var h=i||"",g=0,p=u.match(/\d+\D/g);return o.Array.each(p,function(f){var m=u.slice(-1),_=parseInt(f,10);switch(m){case"h":g+=_*3600;break;case"m":g+=_*60;break;case"s":g+=_;break;default:console.warn("[embedResolver] parameter `t` contains unknown character")}}),!o.Lang.isNumber(g)||g===0?n:(h+="start="+g,h)}),a}},{ATTRS:{type:{},serviceName:{value:""},pattern:{value:""},serviceUrl:{value:""},objectName:{value:""}}});var e="https://api.embed.ly/1/oembed?key=61d05c9d54e8455ea7a9677c366be814&format=json&callback={callback}";o.Squarespace.oEmbedResolvers={twitter:new o.Squarespace.EmbedResolver({serviceName:"Twitter",pattern:"^https?://twitter.com[^ ]*$",serviceUrl:"https://api.twitter.com/1/statuses/oembed.json?callback={callback}",objectName:"Tweet"}),vimeo:new o.Squarespace.EmbedResolver({serviceName:"Vimeo",pattern:"^https?://(?:www\\.)?vimeo.com/",serviceUrl:"https://vimeo.com/api/oembed.json?callback={callback}",objectName:"Video",type:"video"}),wistia:new o.Squarespace.EmbedResolver({serviceName:"Wistia",pattern:"https?://(.+)?(wistia.com|wi.st)/(medias|embed)/.*",serviceUrl:"https://fast.wistia.com/oembed?callback={callback}",objectName:"Video",type:"video"}),animoto:new o.Squarespace.EmbedResolver({serviceName:"Animoto",pattern:"^https?://(?:www\\.)?animoto.com/play/",serviceUrl:"https://animoto.com/oembeds/create?format=json&ssl=true&callback={callback}",objectName:"Video",type:"video"}),flickr:new o.Squarespace.EmbedResolver({serviceName:"Flickr",pattern:"^https?://[a-zA-Z\\.]*flickr.com/[^ ]*$",serviceUrl:"https://www.flickr.com/services/oembed?format=json&jsoncallback={callback}",objectName:"Picture"}),instagram:new o.Squarespace.EmbedResolver({serviceName:"Instagram",pattern:"^https?://[a-zA-Z\\.]*instagram.com/p[^ ]*$",serviceUrl:e,objectName:"Picture"}),wikipedia:new o.Squarespace.EmbedResolver({serviceName:"Wikipedia",pattern:"^https?://en.wikipedia.org/wiki/[^ ]*$",serviceUrl:e,objectName:"Article"}),slideshare:new o.Squarespace.EmbedResolver({serviceName:"SlideShare",pattern:"^https?://www.slideshare.net[^ ]*$",serviceUrl:"https://www.slideshare.net/api/oembed/2?format=json&callback={callback}",objectName:"Presentation"}),soundcloud:new o.Squarespace.EmbedResolver({serviceName:"SoundCloud",pattern:"^https?://soundcloud.com[^ ]*$",serviceUrl:"https://soundcloud.com/oembed?format=js&callback={callback}",objectName:"Audio"}),sketchfab:new o.Squarespace.EmbedResolver({serviceName:"Sketchfab",pattern:"^https?://sketchfab.com[^ ]*$",serviceUrl:e,objectName:"3D Model"})},o.Squarespace.oEmbedResolvers.youtube=new o.Squarespace.EmbedResolver({serviceName:"Youtube",pattern:"^https?://[a-zA-Z\\.]*((?:youtube.com/watch)|(?:.be/))[^ ]*$",objectName:"Video",serviceUrl:e,type:"video"}),o.Squarespace.oEmbedResolversGeneric=new o.Squarespace.EmbedResolver({serviceName:"Embedly",serviceUrl:e,objectName:"Embedly"})},"1.0",{requires:["base","jsonp","squarespace-flickr-oembed-template","squarespace-instagram-oembed-template","squarespace-ui-templates","squarespace-youtube-oembed-template"]})},195665:function(c,b,t){"use strict";var l=t(714487),d=t(423394),o=t(684353),e=t(985913);YUI.add("squarespace-pill-shopping-cart",function(a){a.namespace("Squarespace.Widgets");var r=a.Squarespace.Widgets.PillShoppingCart=a.Base.create("pillShoppingCart",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){var s=(0,d.G2)();(0,l.i_)(o.translationLocale,s)},renderUI:function(){r.superclass.renderUI.call(this),this.get("boundingBox").plug(a.Squarespace.Animations.Scalable,{duration:.25}),this._hide(!0);var s=this.get("contentBox");s.setAttribute("data-test","continue-to-cart"),s.addClass(this.get("useLightCart")?"light":"dark")},bindUI:function(){r.superclass.bindUI.call(this),this.get("model").on("change",this.syncUI,this),this.get("contentBox").on("click",function(){(0,e.F)(a)?a.Squarespace.Singletons.Location.setFrameUrl("/cart"):a.config.win.location="/cart"})},syncUI:function(){r.superclass.syncUI.call(this);var s=this.get("model"),n=s.get("totalQuantity"),i=this.get("contentBox"),u=function(){var h=(0,l._6)({one:"item",other:"items"},n,null,{project:"apps.Commerce",notes:"oldKey: itemCount"});i.one(".total-quantity").setContent(n>100?"100+":n),i.one(".suffix").setContent(h);var g=s.get("subtotalAmount"),p={trimZeroFractions:!0};i.one(".subtotal .price").setContent((0,l.lb)(g,p))};n>0?(u(),this._show()):(this._hide(),u())},_show:function(){var s=this.get("boundingBox");if(s.hasClass("sqs-scalable-hidden"))s.show();else{var n=a.Easing.easeOutStrong,i=new a.Anim({node:s,to:{opacity:.7},duration:.2,easing:n}),u=new a.Anim({node:s,to:{opacity:1},duration:.5,easing:n});i.on("end",function(){u.run()}),i.run()}},_hide:function(s){var n=this.get("boundingBox");n.hasClass("sqs-scalable-hidden")||n.hide(s)}},{CSS_PREFIX:"sqs-pill-shopping-cart",HANDLEBARS_TEMPLATE:"pill-shopping-cart.html",ATTRS:{model:{value:null,validator:function(s){return a.instanceOf(s,a.Squarespace.Models.ShoppingCart)}},useLightCart:{value:!1}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-models-shopping-cart","squarespace-pill-shopping-cart-template","squarespace-ss-widget"]})},831816:function(c,b,t){"use strict";var l=t(965658),d=t(794367),o=t.n(d);YUI.add("squarespace-pinterest",function(e){var a=e.namespace("Squarespace.Pinterest");a.bind=function(r){if(e.Lang.isObject(r)){var s={};s.hover=!0;var n={round:{small:"16",large:"32"},rect:{small:"20",large:"28"}},i=r.shape;e.Lang.isValue(i)||(i="rect");var u=r.size;e.Lang.isValue(u)||(u="small"),s.shape=i,s.height=n[i][u],r.mode==="enabled_for_blogs"?s.ancestorSelectorTest=l.Z.BLOGS.join(","):r.mode==="enabled_for_blogs_and_pages"&&(s.ancestorSelectorTest=l.Z.BLOGS_AND_PAGES.join(","));var h=["#productList",".ProductList",".productlist"];h.forEach(function(g){s.ancestorSelectorTest.includes(g)&&e.all([g+" a[href][data-item-id]",g+" a.hentry[href]"].join(",")).each(function(p){var f=p.getAttribute("href");e.Lang.isString(f)&&f[0]==="/"&&e.Lang.isString(window.location.origin)&&(f=window.location.origin+f),p.all("img").each(function(m){m.setAttribute("data-pin-url",f)})})}),Promise.all([t.e("42188"),t.e("73007"),t.e("710"),t.e("74046"),t.e("35686"),t.e("39783"),t.e("89605"),t.e("84883")]).then(t.bind(t,121891)).then(function(g){g.default(e.config.win),e.config.win.PINTEREST.f.init(s)})}},e.config.win.Squarespace.onInitialize(e,function(){a.bind(e.Object.getValue(e.config.win.Static,"SQUARESPACE_CONTEXT.websiteSettings.pinterestOverlayOptions".split(".")))})},"1.0",{requires:[]})},276852:function(){YUI.add("squarespace-plugin-actionoverlay",function(c){c.namespace("Squarespace"),c.Squarespace.ActionOverlayButtons={EDIT_IMAGE:"edit-image",IMAGE_INFO:"image-info",REMOVE_IMAGE:"remove-image"},c.namespace("Squarespace.Plugin").ActionOverlay=c.Base.create("ActionOverlay",c.Plugin.Base,[],{initializer:function(){this._buttonEls={},this.render(),this.after("positionChange",function(){this.el&&this.el.set("className",this.constructor.CSS_NAMESPACE+" "+this.get("position"))}),(this.get("anchor")||this.get("host")).on("mouseenter",this._alignEl,this)},getButtonEl:function(b){return this._buttonEls[b]},setLoadingState:function(b,t){var l=this.getButtonEl(b);l&&(l.empty(!0),t?(this.el.addClass("loading"),l.addClass("loading"),new c.Squarespace.Spinner({render:l})):(this.el.removeClass("loading"),l.removeClass("loading")))},render:function(){this.el&&this.el.remove();for(var b=c.Node.create('<div class="'+this.constructor.CSS_NAMESPACE+" "+this.get("position")+'"></div>'),t=0;t<this.get("buttons").length;t++){var l=this.get("buttons")[t],d=c.Node.create('<div class="button '+l+'"></div>');d.setAttribute("data-button-name",l),b.append(d),this._buttonEls[l]=d}this.clickEvt=b.on("click",function(o){o.halt();var e=o.target.ancestor(".button",!0);if(e&&!e.hasClass("loading")){var a=e.getAttribute("data-button-name");this.fire("button-"+a,{buttonNode:e,buttonName:a})}},this),this.el=b,this._alignEl(),this.get("host").addClass(this.constructor.CSS_NAMESPACE+"-container"),this.get("host").append(b)},_alignEl:function(){if(this.get("anchor")&&this.get("anchor").getComputedStyle("position")!=="relative"){var b=this.get("anchor").get("region");this.el.setStyles({top:b.top,right:b.right-b.width})}},destructor:function(){this.get("host").removeClass(this.constructor.CSS_NAMESPACE+"-container"),this.clickEvt.detach(),this.el.remove()},getProperty:function(b){return this.constructor[b]}},{NS:"actionOverlay",CSS_NAMESPACE:"sqs-action-overlay",ATTRS:{buttons:{value:[]},position:{value:"top"},anchor:{value:null}}})},"1.0",{requires:["base","node","plugin","squarespace-spinner"]})},419421:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-plugin-focalpoint",function(d){d.namespace("Squarespace.Plugin").FocalPoint=d.Base.create("ImageFocalPoint",d.Plugin.Base,[d.Squarespace.GismoBase],{initializer:function(){this._renderUI(),this._bindUI(),this._syncUI()},_renderUI:function(){this._focalPointEl=this.get("relativeYUI").Node.create('<div class="image-focal-point"></div>'),this.get("parentNode").appendChild(this._focalPointEl),this.get("parentNode").getComputedStyle("position")},_bindUI:function(){var o=!1,e=this.get("relativeYUI");this._event(this.get("host").on(["mouseenter","mousemove"],function(a){this._anim(this._focalPointEl,{opacity:1}).run(),this._syncUI()},this)),this._event(this.get("host").on("mouseleave",function(a){o||a.relatedTarget===this._focalPointEl||this._anim(this._focalPointEl,{opacity:0}).run()},this)),this.dd=new e.DD.Drag({node:this._focalPointEl}),this.dd.plug(e.Plugin.DDConstrained,{constrain2region:this._getConstrainRegion(!0)}),this.dd.on("drag:start",function(){this.dd.plug(e.Plugin.DDConstrained,{constrain2region:this._getConstrainRegion(!0)}),o=!0,this._startPolling()},this),this.dd.on("drag:end",function(){o=!1,this._stopPolling(),this._syncUI(),this.fire("focalPointChanged",{focalPoint:this.get("focalPoint")})},this),this.tooltip=new e.Squarespace.ToolTip({target:this._focalPointEl,dialogTooltip:!0,title:(0,l.t)("Image Focal Point",null,{project:"scripts-v6-root"}),body:(0,l.t)("An image focal point allows Squarespace to make better cropping decisions when the image is placed within a thumbnail. Drag the circle to change the focal point in the image so it displays to your preference.",null,{project:"scripts-v6-root"})})},_startPolling:function(){this._hostRegion=this.get("host").get("region"),this._hostActualWidth=this.get("host").get("clientWidth"),this._hostActualHeight=this.get("host").get("clientHeight"),this._timer=d.later(50,this,this._evaluatedFocalPoint,this,{},!0)},_stopPolling:function(){this._evaluatedFocalPoint(),this._timer.cancel()},_evaluatedFocalPoint:function(){var o=this._focalPointEl.get("region"),e=o[0]-this._hostRegion[0],a=o[1]-this._hostRegion[1];e+=o.width/2,a+=o.height/2,e-=(this._hostRegion.width-this._hostActualWidth)/2,a-=(this._hostRegion.height-this._hostActualHeight)/2,this.set("focalPoint",{x:Math.max(0,e/this._hostActualWidth),y:Math.max(0,a/this._hostActualHeight)},{source:"plugin-focalPoint"})},_syncUI:function(){var o=this.get("host").get("clientWidth"),e=this.get("host").get("clientHeight"),a=o*this.get("focalPoint.x"),r=e*this.get("focalPoint.y"),s=this.get("host").get("region");a+=s[0],r+=s[1],a+=(s.width-o)/2,r+=(s.height-e)/2,a-=this._focalPointEl.get("offsetWidth")/2,r-=this._focalPointEl.get("offsetHeight")/2,this._focalPointEl.setXY([a,r])},_getConstrainRegion:function(){var o=this.get("host").get("region"),e=this._focalPointEl.get("offsetWidth"),a=this._focalPointEl.get("offsetHeight"),r=this.get("host").get("offsetWidth")-this.get("host").get("clientWidth"),s=this.get("host").get("offsetHeight")-this.get("host").get("clientHeight");return o.top-=e/2-s/2,o.left-=e/2-r/2,o.right+=e/2-r/2,o.bottom+=a/2-s/2,o.width-=r,o.height-=s,o},destructor:function(){this._focalPointEl.remove(),this.dd.destroy(),this.tooltip.destroy()}},{NS:"focalPoint",ATTRS:{focalPoint:{value:{x:.5,y:.5},setter:function(o){if(d.Lang.isUndefined(o)&&console.log("UNDEFINED"),d.Lang.isString(o)){o=o.split(",");var e=parseFloat(o[0]),a=parseFloat(o[1]);return{x:!isNaN(e)&&e<=1?e:.5,y:!isNaN(a)&&a<=1?a:.5}}return o}},parentNode:{valueFn:function(){return this.get("host").get("parentNode")}},relativeYUI:{valueFn:function(){return d.config.win!==window.top&&d.config.doc.body!==this.get("parentNode").ancestor("body").getDOMNode()?window.top.Y:d}}}})},"1.0",{requires:["base","dd","event-base","plugin","squarespace-gismo","squarespace-ui-base"]})},460974:function(){YUI.add("squarespace-plugin-lightbox2",function(c){c.namespace("Squarespace.Plugin"),c.Squarespace.Lightbox2Plug=c.Squarespace.Plugin.Lightbox2=c.Base.create("Lightbox2Plug",c.Plugin.Base,[c.Squarespace.GismoBase],{initializer:function(){this._event(this.get("host").on("click",function(b){b.preventDefault();var t=this;c.use("squarespace-ui-base",function(){var l=new c.Squarespace.Lightbox2(c.merge({content:c.Node.create(t.get("host").getAttribute("data-lightbox"))},t.get("lightboxOptions")));l.render()})},this))},destructor:function(){var b=this.get("lightboxOptions.content");b instanceof c.Node&&b.destroy(!0)}},{NS:"lightbox2plugin",ATTRS:{lightboxOptions:{}}})},"1.0",{requires:["base","node","plugin","squarespace-gismo","squarespace-widgets-lightbox2"]})},136957:function(){YUI.add("squarespace-plugin-loading-overlay",function(c){c.namespace("Squarespace.Plugins").LoadingOverlay=c.Base.create("LoadingOverlay",c.Plugin.Base,[],{initializer:function(){this._overlayNode=c.Node.create('<div class="sqs-loading-overlay-node"><div class="title"></div></div>'),this._overlayNode.on("mousedown",function(b){b.halt()}),this.spinner=new c.Squarespace.Spinner(c.merge(this.get("spinnerConfig"),{render:this._overlayNode})),this.on("spinnerConfigChange",function(b){this.spinner.setAttrs(b.newVal)},this),this.after("visibleChange",this.syncOverlaySize,this),this.syncOverlaySize(),this.get("host").addClass("sqs-loading-overlay-active")},destructor:function(){this.spinner.destroy(),this._overlayNode.remove(!0),this.get("host").removeClass("sqs-loading-overlay-active")},syncOverlaySize:function(){this.get("visible")?this._showOverlay():this._hideOverlay()},_showOverlay:function(){var b=this.get("title");this._overlayNode.one(".title").setContent(b),this._overlayNode.toggleClass("has-title",b!=="");var t=this.get("host");this._overlayNode.setStyles({position:"absolute",width:t.get("offsetWidth"),height:t.get("offsetHeight"),top:t.get("offsetTop"),left:t.get("offsetLeft")}),t.append(this._overlayNode),new c.Anim({node:this._overlayNode,duration:.25,from:{opacity:this._overlayNode.getStyle("opacity")},to:{opacity:1}}).run()},_hideOverlay:function(){this._overlayNode&&this._overlayNode.anim({opacity:0},{from:{opacity:1},end:function(){this._overlayNode&&this._overlayNode.getDOMNode()!==null&&this._overlayNode.inDoc()&&this._overlayNode.remove()}},this).run()}},{NS:"loadingOverlay",ATTRS:{visible:{value:!0},title:{value:"",validator:c.Lang.isString},description:{value:""},spinnerConfig:{value:{size:"large",color:"dark"}}}})},"1.0",{requires:["node","plugin","squarespace-spinner"]})},100166:function(c,b,t){"use strict";var l=t(587175),d=t(979221),o=t(554468);YUI.add("squarespace-plugin-money-formatter",function(e){e.namespace("Squarespace.Plugin"),e.Squarespace.Plugin.MoneyFormatter=e.Base.create("moneyFormatter",e.Squarespace.Plugin.NumericFormatter,[],{_transformToData:function(a){return Number((0,l.E1)(a))}},{NS:"moneyFormatterPlugin",ATTRS:{displayFormatter:{value:function(a){var r=o.Z.getStoreCurrency();return d.h.formatter.format((0,l.Wy)(a,r))}}}})},"1.0",{requires:["plugin","squarespace-commerce-utils","squarespace-plugin-numeric-formatter","squarespace-util"]})},321010:function(){YUI.add("squarespace-plugin-node-destroy-notifier",function(c){c.Squarespace.NodeDestroyNotifier=c.SQS.Gallery.NodeDestroyNotifier},"1.0",{requires:["@sqs/yui-gallery/node-destroy-notifier"]})},940258:function(){YUI.add("squarespace-plugin-node-expander",function(c){c.namespace("Squarespace.Plugins").NodeExpander=c.Base.create("NodeExpander",c.Plugin.Base,[],{initializer:function(){var b=this.get("node");b.addClass("sqs-node-expander"),this._button=b.appendChild('<div class="sqs-node-expander-wrapper"><div class="sqs-node-expander-button"></div></div>'),this._placeholderNode=c.Node.create("<div></div>"),this._resizeEmitter=new c.Squarespace.ResizeEmitter,this.publishEvents(),this.bindEvents(),this._escManagerTarget={close:this.toggleExpanded.bind(this)}},publishEvents:function(){this.publish("expand-start",{emitFacade:!0,defaultFn:this._expand}),this.publish("expand-end",{emitFacade:!0}),this.publish("contract-start",{emitFacade:!0,defaultFn:this._contract}),this.publish("contract-end",{emitFacade:!0}),this.publish("expand-resized",{emitFacade:!0,defaultFn:this._syncExpandedSizing})},bindEvents:function(){this._button.on("click",this.toggleExpanded,this),this.after("expandedChange",function(b){this._button.toggleClass("sqs-node-expander-active",!!b.newVal),b.newVal?this.fire("expand-start"):this.fire("contract-start")},this),this._resizeEmitter.on("resize",function(b){this.get("expanded")&&(this._expandSizingRequest&&(this._expandSizingRequest.cancel(),this._expandSizingRequest=null),this._expandSizingRequest=c.later(500,this,function(){this.fire("expand-resized")}))},this)},_syncExpandedSizing:function(){var b=this._placeholderNode.get("region");this.get("node").setStyles({top:b.top*-1,left:b.left*-1,width:c.config.win.innerWidth,height:c.config.win.innerHeight})},_expand:function(){var b=this.get("node");b.insert(this._placeholderNode.setStyles({width:b.get("offsetWidth"),height:b.get("offsetHeight")}),"after");var t=b.get("region");b.addClass("sqs-node-expander-active"),b.addClass("sqs-node-expander-expanding"),b.setStyles({position:"absolute",top:0,left:0,width:t.width,height:t.height,zIndex:101}),b.anim({top:t.top*-1,left:t.left*-1,width:c.config.win.innerWidth,height:c.config.win.innerHeight},{duration:.5,end:function(){this.fire("expand-end"),b.removeClass("sqs-node-expander-expanding")}},this).run(),c.Squarespace.EscManager.addTarget(this._escManagerTarget)},_contract:function(){var b=this.get("node"),t=this._placeholderNode.get("region");b.addClass("sqs-node-expander-contracting"),b.anim({top:0,left:0,width:t.width,height:t.height,zIndex:101},{end:function(){this._placeholderNode.remove(),b.removeClass("sqs-node-expander-contracting"),b.removeClass("sqs-node-expander-active"),b.setStyles({position:null,top:null,left:null,right:null,bottom:null}),this.fire("contract-end")}},this).run(),c.Squarespace.EscManager.removeTarget(this._escManagerTarget)},hideButton:function(){this._button&&this._button.addClass("sqs-node-expander-wrapper-hidden")},showButton:function(){this._button&&this._button.removeClass("sqs-node-expander-wrapper-hidden")},toggleExpanded:function(){this.set("expanded",!this.get("expanded"))},destructor:function(){this._button.detachAll(),this._button.remove(!0),this._button=null,this.get("node").removeClass("sqs-node-expander")}},{NS:"NodeExpander",ATTRS:{expanded:{value:!1},node:{valueFn:function(){return this.get("host")}}}})},"1.0",{requires:["base","node","plugin","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-util"]})},298376:function(){YUI.add("squarespace-plugin-numeric-formatter",function(c){c.namespace("Squarespace.Plugin");var b=229,t=function(){var d=[],o=[9,13,8,46,37,39,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,b];return o.forEach(function(e){d[e]=!0}),d},l=t();c.Squarespace.Plugin.NumericFormatter=c.Base.create("numericFormatter",c.Plugin.Base,[],{initializer:function(){c.Lang.isNumber(Number(this.get("host").get("value")))?this.set("data",Number(this.get("host").get("value"))):this.set("data",0),this.set("displayString",this._format(this.get("data"))),this._bindUI(),this._syncUI()},_format:function(d){return this.get("displayFormatter")(d)},_syncUI:function(){var d=this.get("data"),o=this.get("displayString");if(this.get("hasFocus"))this.get("host").set("value",d>0?o:"");else{var e="";c.Lang.isNull(this.get("prefixUnit"))||(e+=this.get("prefixUnit")),e+=this._format(d),c.Lang.isNull(this.get("postfixUnit"))||(e+=" "+this.get("postfixUnit")),this.get("host").set("value",e)}},_bindUI:function(){var d=this.get("host");this.on("displayStringChange",this._syncUI,this),d.on("valuechange",this._onValueChange,this),d.on("keydown",this._onKeyDown,this),d.on("focus",this._onFocus,this),d.on("blur",this._onBlur,this)},_onFocus:function(){this.set("hasFocus",!0),this._syncUI(),setTimeout(c.bind(function(){this.get("hasFocus")&&this.get("host").select()},this),0)},_onBlur:function(){this.set("hasFocus",!1),this.set("displayString",this._format(this.get("data")))},_onKeyDown:function(d){!d.shiftKey&&l[d.keyCode]||!this.get("suppressDecimal")&&(d.keyCode===110||d.keyCode===190)&&this.get("host").get("value").indexOf(".")===-1||isFinite(Number(String.fromCharCode(d.keyCode)))||(d.stopPropagation(),d.preventDefault())},_onValueChange:function(){var d=this.get("host").get("value"),o=this._transformToData(d);this.set("data",o)},_displayFormatter:function(d){return d},_transformToData:function(d){var o;return c.Lang.isUndefined(this.get("prefixUnit"))||(o=String(d).replace(new RegExp(this.get("prefixUnit")))),c.Lang.isUndefined(this.get("postfixUnit"))||(o=String(d).replace(new RegExp(this.get("postfixUnit")))),Number(o)}},{NS:"numericFormatterPlugin",ATTRS:{hasFocus:{value:!1},data:{value:null},displayString:{value:null},prefixUnit:{value:null},postfixUnit:{value:null},displayFormatter:{value:function(d){return d},suppressDecimal:{value:!1}}}})},"1.0",{requires:["plugin","squarespace-util"]})},265511:function(){YUI.add("squarespace-plugin-progress-bar",function(c){c.namespace("Squarespace.Plugin");var b=c.Squarespace.Plugin.ProgressBar=c.Base.create("ProgressBar",c.Squarespace.Plugin.ProgressBase,[],{_renderContent:function(){b.superclass._renderContent.call(this),this._syncProgressBar()},_bindAttributeChanges:function(){b.superclass._bindAttributeChanges.call(this),this.after("progressChange",this._syncProgressBar,this)},_syncProgressBar:function(){var t=this._meterEl.one(".bar-inner"),l=this.get("progress");l=Math.max(0,Math.min(100,0+l)),t.setStyle("width",l+5+"%")}},{NS:"progress-bar",PROGRESS_METER_TEMPLATE:'<div class="bar"><div class="bar-inner"></div></div>',ATTRS:{progress:{value:0,validator:function(t,l){return c.Lang.isNumber(t)&&t>=0&&t<=100}}}})},"1.0",{requires:["base","squarespace-plugin-progress-base"]})},434447:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-plugin-progress-base",function(d){d.namespace("Squarespace.Plugin"),d.Squarespace.Plugin.ProgressBase=d.Base.create("ProgressBase",d.Plugin.Base,[],{initializer:function(){this._renderContent(),this._bindAttributeChanges(),this._setClasses(),this._bindContent()},destructor:function(){var o=this._contentEl;o&&o.getDOMNode()&&(o.setStyle("opacity",0),d.later(this.get("unplugDelay"),this,function(){o&&o.remove&&o.remove()})),this._contentEl=null,this._meterEl=null,this._cancelEl=null,this.get("host").removeClass("progress-show-meter"),this.get("host").removeClass("progress-show-cancel")},_renderContent:function(){var o=this._contentEl=d.Node.create('<div class="progress-container"><div class="progress"><div class="cancel-process">'+(0,l.t)("Cancel",null,{project:"scripts-v6-root"})+"</div></div></div>"),e=o.one(".progress");this._meterEl=d.Node.create(this.constructor.PROGRESS_METER_TEMPLATE),e.prepend(this._meterEl),this._cancelEl=o.one(".cancel-process");var a=this.get("host");this.get("append")?a.append(o):a.prepend(o)},_bindAttributeChanges:function(){this.after(["showChange","showCancelChange"],this._setClasses,this)},_setClasses:function(){var o=this.get("host"),e=this.get("show"),a=this.get("showCancel");o.toggleClass("progress-show-meter",e),this._meterEl.toggleClass("visible",e),o.toggleClass("progress-show-cancel",a),this._cancelEl.toggleClass("visible",a)},_bindContent:function(){this._cancelEl.on("click",function(o){o.halt(),this.fire("cancel")},this)}},{NS:"progress",PROGRESS_METER_TEMPLATE:"",ATTRS:{show:{value:!1,validator:d.Squarespace.AttrValidators.isBoolean},showCancel:{value:!1,validator:d.Squarespace.AttrValidators.isBoolean},unplugDelay:{value:300,validator:d.Squarespace.AttrValidators.isNumber},append:{value:!1,validator:d.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"}}})},"1.0",{requires:["base","node","plugin","squarespace-attr-validators"]})},840292:function(){YUI.add("squarespace-plugin-progress-spinner",function(c){c.namespace("Squarespace.Plugin");var b=c.Squarespace.Plugin.ProgressSpinner=c.Base.create("ProgressSpinner",c.Squarespace.Plugin.ProgressBase,[],{_renderContent:function(){b.superclass._renderContent.call(this),new c.Squarespace.Spinner({render:this._meterEl,size:this.get("spinnerSize"),color:this.get("spinnerColor")}).get("boundingBox")}},{NS:"progress-spinner",PROGRESS_METER_TEMPLATE:'<div class="spinner"></div>',ATTRS:{spinnerSize:{value:30},spinnerColor:{value:"dark"}}})},"1.0",{requires:["base","squarespace-plugin-progress-base","squarespace-spinner"]})},612533:function(){YUI.add("squarespace-plugin-pulsewarn",function(c){c.namespace("Squarespace.Plugin"),c.Squarespace.Plugin.PulseWarn=c.Base.create("pulseWarn",c.Plugin.Base,[],{initializer:function(b){this.config=b,this.set("color",b.color),this.set("useClass",b.useClass),this.set("targetClass",b.targetClass),this.set("iterations",b.iterations),this.get("host").addClass("pulse-warnable"),c.Lang.isUndefined(b.interval)||this.set("interval",b.interval),this._timer=null},destructor:function(){this._timer&&(this._timer.cancel(),this._timer=null)},warn:function(){var b=this.get("host"),t=this.get("iterations"),l=b.getStyle("backgroundColor"),d=this.get("color");if(c.Lang.isNull(this._timer)||(this._timer.cancel(),this._timer=null),this.get("useClass")){var o=this.get("targetClass"),e=this.get("interval");this.fire("start"),b.addClass(o),this._timer=c.later(e,this,function(){if(t===0){b.removeClass(o),this.fire("stop"),this._timer.cancel(),this._timer=null;return}b.hasClass(o)?b.removeClass(o):b.addClass(o),t--},{},!0)}else{var a=new c.Anim({node:b,to:{backgroundColor:d,opacity:.8},easing:this.get("easingUp"),duration:this.get("duration")}),r=new c.Anim({node:b,to:{backgroundColor:l,opacity:1},easing:this.get("easingDown"),duration:this.get("duration")});a.on("end",function(){t>0&&r.run(),t--}),r.on("end",function(){t>0?a.run():this.fire("stop")},this),this.fire("start"),a.run()}}},{NS:"pulseWarn",ATTRS:{useClass:{value:!1},iterations:{value:3},color:{value:"#c1b12e"},interval:{value:2e3},duration:{value:.7},easingUp:{value:c.Easing.easeInSine},easingDown:{value:c.Easing.easeOutSine}}})},"1.0",{requires:["anim","base","plugin"]})},669476:function(){YUI.add("squarespace-plugin-scroll-lock",function(c){c.namespace("Squarespace.Plugin").ScrollLock=c.Base.create("ScrollLock",c.Plugin.Base,[],{initializer:function(b){var t=this.get("host"),l=t.getDOMNode();this.listener=function(d){if(d.stopPropagation(),!c.Lang.isNumber(l.scrollTop))return d.preventDefault(),!1;var o=parseInt(t.getComputedStyle("height"),10),e=l.scrollTop,a=l.scrollHeight-o,r=d.wheelDelta||-d.detail;if(e<=0&&r>0||e>=a&&r<0)return d.preventDefault(),!1},l.addEventListener?(l.addEventListener("mousewheel",this.listener),l.addEventListener("DOMMouseScroll",this.listener),l.addEventListener("MozMousePixelScroll",this.listener)):l.attachEvent&&l.attachEvent("onmousewheel",this.listener)},destructor:function(){var b=this.get("host").getDOMNode();b.removeEventListener?(b.removeEventListener("mousewheel",this.listener),b.removeEventListener("DOMMouseScroll",this.listener),b.removeEventListener("MozMousePixelScroll",this.listener)):b.detachEvent&&b.detachEvent("onmousewheel",this.listener)}},{NS:"ScrollLock",ATTRS:{}})},"1.0",{requires:["base","node","plugin"]})},596264:function(){YUI.add("squarespace-plugin-sizeanimator",function(c){var b=!1;c.namespace("Squarespace.Plugins").SizeAnimator=c.Base.create("SizeAnimator",c.Plugin.Base,[],{hold:function(){var t=this.get("host");this._width=t.get("offsetWidth"),this._height=t.get("offsetHeight")},release:function(){var t=this.get("host"),l=c.Node.create("<div></div>"),d=t.get("offsetWidth"),o=t.get("offsetHeight");if(d===this._width&&this._height===o){b&&console.log("[sizeanimator release] no change.");return}t.get("children").each(function(e){l.append(e)}),l.setStyles({width:d,height:o}),b&&console.log("[sizeanimator release]",d,this._width),t.appendChild(l),t.addClass("sqs-sizeanimator-animating"),t.anim({width:d,height:o},{from:{width:this._width,height:this._height},end:function(){t.removeClass("sqs-sizeanimator-animating"),t.setStyles({width:null,height:null}),l._node&&(l.get("children").each(function(e){t.append(e)}),l.remove())}}).run()}},{NS:"sizeAnimator",ATTRS:{}})},"1.0",{requires:["base","plugin"]})},250751:function(c,b,t){"use strict";var l=t(134521),d=t.n(l),o=t(714487),e=t(467661),a=t.n(e),r=t(507136),s=t.n(r),n=t(81720),i=t.n(n),u=t(999762),h=t(649297),g=t(126218),p=t(6233),f=t(537312),m=t(236153),_=t.n(m),v=t(528215),E=t(985913),S=600;YUI.add("squarespace-popup-overlay",function(y){var C=y.config.win.matchMedia("(max-width: "+S+"px)"),O=window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn();y.namespace("Squarespace.Widgets");var A=y.Squarespace.Widgets.PopupOverlay=y.Base.create("PopupOverlay",y.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.popupSettings=y.config.win.Static.SQUARESPACE_CONTEXT.websiteSettings.popupOverlaySettings||{},this.isHidden=!0,this.isSetup=!1,this._cb=this.get("contentBox"),this._slideLayout=null,this.documentHeight=this.getDocumentHeight(),this.viewportHeight=y.config.win.innerHeight,document.body.scrollLeft=0,this.publish("closed",{emitFacade:!0}),y.Global.publish("popupOverlay:showing"),y.Global.publish("popupOverlay:ready"),this.loadPopupJSON(),this.showEvent=y.Global.on("popupOverlay:requestShow",this.show,this),this.hideEvent=y.Global.on("popupOverlay:hide",this.hide,this),this.formSubmitEvent=y.Global.on("form:submitSuccess",this._markSubmitted,this),this._onMediaQueryChange=this._onMediaQueryChange.bind(this)},destructor:function(){this.showEvent.detach(),this.showEvent=null,this.hideEvent.detach(),this.hideEvent=null,this.formSubmitEvent.detach(),this.formSubmitEvent=null,this._slideLayout&&(this._slideLayout.destroy(!0),this._slideLayout=null),this.popupContainerNode.remove()},getDocumentHeight:function(){var I=y.config.win.document,D=I.body,T=I.documentElement;return Math.max(D.scrollHeight,D.offsetHeight,T.clientHeight,T.scrollHeight,T.offsetHeight)},render:function(){this.popupContainerNode=y.Node.create('<div class="yui-popup-container-node"></div>'),y.one("body").append(this.popupContainerNode),A.superclass.render.call(this,this.popupContainerNode)},loadPopupJSON:function(){var I=y.config.win.location,D=I.pathname+I.hash,T="currentUrl="+encodeURIComponent(D);(0,E.F)(y)&&(T+="&forceVisibility=true");var B=new XMLHttpRequest;B.open("GET","/api/popup-overlay/render?"+T),B.onload=(function(){var N=null;try{if(B.status===200)N=JSON.parse(B.response);else throw new Error("Could not fetch popup overlay JSON")}catch{N=null}if(!N||!N.shouldDisplayOnPage){y.Squarespace.Singletons.PopupOverlay.destroy(),y.Squarespace.Singletons.PopupOverlay=null;return}var P=g.C(p.Z.KEY)||{};P[p.Z.VERSION]=this.popupSettings.version,g.m(p.Z.KEY,P),O?this._loggedInResponse(N.renderedHtml):this._loggedOutResponse(N.renderedHtml)}).bind(this),B.send()},setupPopupOverlay:function(I){if(!(this.isSetup||!I)){this._cb.set("innerHTML",I),y.Global.fire("popupOverlay:ready");var D=this._cb.one(".sqs-slide-container .sqs-slide"),T=D.one(".sqs-popup-overlay-close");T.setAttribute("aria-label",(0,o.t)("Close",null,{project:"scripts-v6-root",notes:"Pop-up close button accessible name"})),O||(T.once("click",this._closePopup.bind(this)),T.on("keydown",(function(N){var P=N.keyCode===13,x=N.keyCode===32;(P||x)&&this._closePopup(N)}).bind(this)),D.one(".layer-back").once("click",this._closePopup,this),y.Squarespace.EscManager.disable(),y.one(y.config.win.document.documentElement).on("keyup",this._onKeyUp,this));var B=D.getAttribute("data-slide-layout-id");this.popupSettings.layout=B,this._slideLayout=y.Squarespace.SlideRendering.Layouts.Factory.create(B,{boundingBox:D,render:!0}),this.isSetup=!0}},scrollHandler:function(I,D,T,B){var N=y.config.win.document,P=N.defaultView&&N.defaultView.scrollY||N.documentElement&&N.documentElement.scrollTop,x=this.documentHeight-this.viewportHeight,R;if(x>0?R=P/x:R=1,R>=this.popupSettings.scrollPercentage/100){var w=y.one(y.config.win);w.detach("scroll",T),w.detach("resize",B),clearTimeout(this.popupTimer),this.setupPopupOverlay(D),this.triggeredBy=i().SCROLL,this.show()}},resizeHandler:function(){this.viewportHeight=y.config.win.innerHeight},_loggedOutResponse:function(I){var D=d()(this.scrollHandler,100),T=d()(this.resizeHandler,100),B=y.one(y.config.win);if(this.popupSettings.showOnTimer&&(this.popupTimer=setTimeout((function(){this.setupPopupOverlay(I),B.detach("scroll",D),B.detach("resize",T),this.triggeredBy=i().TIME,this.show()}).bind(this),this.popupSettings.timerDelay)),this.popupSettings.showOnScroll){if(this.documentHeight===this.viewportHeight&&!this.popupSettings.showOnTimer){this.setupPopupOverlay(I),this.triggeredBy=i().SCROLL,this.show();return}B.on("scroll",D,this,I,D,T),B.on("resize",T,this)}},_loggedInResponse:function(I){this.setupResponse=I,this.isHidden||(this.setupPopupOverlay(I),this.show())},_onKeyUp:function(I){var D=I.keyCode===27;D&&(I.stopPropagation(),this._closePopup(I))},_closePopup:function(I){if(I&&I.preventDefault(),!O){var D=I.currentTarget.hasClass("sqs-popup-overlay-close")?(0,o.t)("CLOSE",null,{project:"scripts-v6-root"}):(0,o.t)("DISMISS",null,{project:"scripts-v6-root"});this._trackEvent(s()[D])}this.hide(),this._recordClose(),y.Squarespace.EscManager.enable(),y.one(y.config.win.document.documentElement).detach("keyup",this._onKeyUp),this._resizeEvent&&this._resizeEvent.detach(),this.fire("closed"),v.Yt({win:y.config.win})},_recordClose:function(){var I=g.C(p.Z.KEY);I&&(I[p.Z.CLOSED_DATE]=Date.now(),g.m(p.Z.KEY,I))},_markSubmitted:function(){var I=g.C(p.Z.KEY);I&&(I[p.Z.SUBMITTED]=!0,g.m(p.Z.KEY,I))},_trackEvent:function(I){var D=[],T=null,B=y.one('div.sqs-slide[data-slide-type="popup-overlay"]');B.one(".sqs-slice-buttons")?B.all(".sqs-slice-buttons li a").each(function(N){D.push({buttonText:N.get("innerText"),clickthroughUrl:N.getAttribute("href")})}):B.one(".sqs-slice-newsletter")?(D.push({buttonText:B.one(".newsletter-form button").get("value"),clickthroughUrl:null}),T=B.one(".newsletter-form").getAttribute("data-form-id")):D=null,f.lZ({pagePath:y.config.win.location.pathname,version:this.popupSettings.version.toString(),action:I,trigger:this.triggeredBy,layoutId:this.popupSettings.layout,buttons:D,formId:T})},hide:function(){this.isHidden=!0;var I=this.get("boundingBox");I.removeClass("visible"),I.setStyle("display","none"),this.revertFocusContainment&&(this.revertFocusContainment(),this.revertFocusContainment=null),this.previouslyFocusedElement?this.previouslyFocusedElement.focus():y.one("body").focus(),C.removeListener(this._onMediaQueryChange)},show:function(){if(this.isHidden=!1,!(!this.isSetup&&this.setupResponse&&(this.setupPopupOverlay(this.setupResponse),!this.isSetup))){var I=this.get("boundingBox");I.addClass("visible"),I.setStyle("display","block"),O||this._trackEvent(s().DISPLAY),y.Global.fire("popupOverlay:showing"),!O&&y.Squarespace.Singletons.WebsiteOverlaysManager&&y.Squarespace.Singletons.WebsiteOverlaysManager.syncPreviewBar(),this.previouslyFocusedElement=y.one(y.config.doc.activeElement);var D=I.one(u.focusableSelector);D&&D.focus(),this._onShowOrMediaQueryChange(!C.matches),C.addListener(this._onMediaQueryChange)}},_onMediaQueryChange:function(I){this._onShowOrMediaQueryChange(!I.matches)},_onShowOrMediaQueryChange:function(I){var D=this.get("boundingBox");D.setAttribute("aria-labelledby","sqs-slash-page-header"),I?(D.setAttribute("role","dialog"),this.revertFocusContainment=u.containFocus({container:this.get("boundingBox").getDOMNode(),root:y.one("body").getDOMNode(),setFocusOnContain:!1,restoreFocusOnRevert:!1})):(D.setAttribute("role","region"),this.revertFocusContainment&&(this.revertFocusContainment(),this.revertFocusContainment=null))}},{CSS_PREFIX:"sqs-popup-overlay",ATTRS:{style:{}}});y.config.win.Squarespace.onInitialize(y,function(){var I=y.config.win.Static.SQUARESPACE_CONTEXT.websiteSettings.popupOverlaySettings,D=a().NONE;if(I&&I.style&&(D=I.style),!y.Squarespace.Singletons.PopupOverlay){y.Squarespace.Singletons.PopupOverlay=new A({style:D});var T=h.Z.shouldShowPopupOverlay({context:{pageType:y.config.win.Static.SQUARESPACE_CONTEXT.pageType,collection:y.config.win.Static.SQUARESPACE_CONTEXT.collection},settings:I,isMobile:y.UA.mobile,urlSearch:window.location.search});(O||T)&&y.Squarespace.Singletons.PopupOverlay.render()}}),y.config.win.Squarespace.onDestroy(y,function(){y.Squarespace.Singletons.PopupOverlay&&y.Squarespace.Singletons.PopupOverlay.destroy()})},"1.0",{requires:["base","json","node","squarespace-escmanager","squarespace-util","squarespace-slide-rendering-layouts-factory","squarespace-ss-widget"]})},15938:function(c,b,t){"use strict";var l=t(648200),d=t.n(l);YUI.add("squarespace-product-quick-view",function(o){var e=".sqs-product-quick-view-button[data-id]",a=[],r=[];o.config.win.Squarespace.onInitialize(o,function(){if(!o.UA.mobile){var s=null,n={},i=function(p,f,m){var _=p.getData("id"),v=p.getData("group")||"ungrouped";n[v]||(n[v]=[],o.all(e).each(function(E){(v===E.getData("group")||v==="ungrouped"&&!E.getData("group"))&&n[v].push(E.getData("id"))})),s?s.get("currentId")===_&&s.get("currentGroup")===v?s.open():(s.set("currentId",_),s.set("currentGroup",v),s.set("source",m)):(s=new o.Squarespace.Widgets.Products.QuickView({currentId:_,currentGroup:v,products:n,render:!0,source:m}),r.push(s)),f&&f.halt(!0)},u=function(p){return p.closest(".product-block")?"product-block":p.closest(".summary-item-list")?"summary-block":p.closest(".products-list")?"plp":null},h=o.one("body").delegate("click",function(p){var f=u(p.target._node);i(p.currentTarget,p,f)},e);o.one("body").delegate("keydown",function(p){(p.keyCode===13||p.keyCode===32)&&i(p.currentTarget,p)},e);var g=o.Global.on("tweak:change",function(p){var f=p.getName(),m=f.indexOf("tweak-product-quick-view-lightbox-")>-1,_=f.indexOf("tweak-product-item-gallery-")>-1,v=o.one(".collection-type-products.view-item");if(m||_&&!v)if(s)s.get("isLightboxOpen")||s.open();else{var E=o.one(e);i(E,null)}else s&&s.get("lightbox").close()});a.push(h,g)}}),o.config.win.Squarespace.onDestroy(o,function(){a.forEach(function(s){s.detach()}),r.forEach(function(s){s.destroy(),s.get("lightbox").destroy(!0)}),a.length=0,r.length=0})},"1.0",{requires:["squarespace-widgets-products-quick-view"]})},179760:function(){YUI.add("squarespace-promises",function(c){function b(){}var t=c.namespace("Squarespace.Promises");t.all=function(){var l=new c.Array(arguments);return new c.Promise(function(d,o){var e=[],a=l.length,r=0,s=function(n){return function(i){r++,e[n]=i,r>=a&&d(e)}};if(a===0)return d([]);c.Array.each(l,function(n,i){c.when(n).then(s(i),o)})})},t.resolve=function(l,d){return l.then(d)},t.reject=function(l,d){return l.then(b,d)},t.rejectWith=function(l){return c.Squarespace.Promises.create(function(d,o){o(l)})},t.finish=function(l,d){return l.then(d,d)},t.chainFns=function(l,d){return function(){d=d||this;var o=l.length>0?l.shift().apply(d,arguments):c.when(),e=function(a,r){return c.Squarespace.Promises.resolve(c.when(a),c.bind(r,d))};return c.Array.reduce(l,o,e)}},t.create=function(l,d){return new c.Promise(c.bind(l,d))}},"1.0",{requires:["promise"]})},775:function(c,b,t){"use strict";var l=t(924270),d=t.n(l),o=t(754299),e=t.n(o),a=t(714487),r=t(623040),s=t(916661);YUI.add("squarespace-public-api",function(n){n.namespace("Squarespace");var i=s.Z.isSevenOne();i?(n.config.win.ImageLoader=new(e()).Builder({allowConcurrentLoads:!0}).withLazyLoading().build(),n.config.win.ImageLoader.bootstrap=n.config.win.ImageLoader.loadAllLazy):(n.config.win.ImageLoader=new(d())({allowConcurrentLoads:!0}),n.config.win.ImageLoader.bootstrap=n.config.win.ImageLoader.loadAll),n.Squarespace.Template=r.Z.create({getTweakValue:function(h){if(h&&n.config.win.Static.SQUARESPACE_CONTEXT.tweakJSON)return n.config.win.Static.SQUARESPACE_CONTEXT.tweakJSON[h]||n.config.win.Static.SQUARESPACE_CONTEXT.tweakJSON[h.replace("@","").replace(".","")]}}),n.augment(n.Node,n.Squarespace.Legacy.Class.create({width:function(){return this.get("offsetWidth")},height:function(){return this.get("offsetHeight")}}));var u=[];n.config.win.JSTween={tween:function(h,g){console.error((0,a.t)("You are using the Squarespace provided global JSTween which is no longer supported. Please either remove your usage of JSTween or include JSTween yourself.",null,{project:"scripts-v6-root"})),u.push({node:h,config:g})},play:function(){u.forEach(function(h){console.error((0,a.t)("You are using the Squarespace provided global JSTween which is no longer supported. Please either remove your usage of JSTween or include JSTween yourself.",null,{project:"scripts-v6-root"}));var g=h.node,p=h.config,f={},m={},_=[],v=[];for(var E in p)f[E]=p[E].start,m[E]=p[E].stop,p[E].onStart&&_.push(p[E].onStart),p[E].onStop&&v.push(p[E].onStop);n.one(g).anim(m,{from:f,duration:p[Object.keys(p)[0]].duration,start:function(){_.forEach(function(S){S()})},end:function(){v.forEach(function(S){S()})}}).run()}),u=[]}}},"1.0",{requires:["history","node","node-event-simulate","node-load","squarespace-dom-emitters-resize","squarespace-gallery-manager","squarespace-gallery-ng","squarespace-legacy-class","thirdparty-modernizr","yui-throttle"]})},964129:function(c,b,t){"use strict";var l=t(131626),d=t.n(l);YUI.add("querystring-parse",function(o,e){var a=o.namespace("QueryString");a.parse=function(r){return d().parse(r)},a.unescape=function(r){return decodeURIComponent(r.replace(/\+/g," "))}},"3.17.2",{requires:["yui-base","array-extras"]})},947021:function(){YUI.add("squarespace-scrolling-auto-complete-list",function(c){c.namespace("Squarespace.Widgets");var b="keyboardContinue",t="listMouseUp",l="listMouseDown",d=c.Squarespace.Widgets.ScrollingAutoCompleteList=c.Base.create("ScrollingAutoCompleteList",c.AutoCompleteList,[],{initializer:function(){this.publish(b),this.publish(t),this.publish(l)},renderUI:function(){d.superclass.renderUI.call(this);var o=this._scrollNode=c.Node.create('<div class="'+this.getClassName()+'-scroll-container"></div>');this.get("listNode").wrap(o),o.hide();var e=this.get("className");e&&this.get("contentBox").addClass(e)},bindUI:function(){d.superclass.bindUI.call(this);var o=this._scrollNode,e=this.get("inputNode");this.after("activeItemChange",function(a){a.newVal&&this._scrollToActiveItem()},this),this.on("results",function(a){a.results.length>0?o.show():o.hide()},this),this.on(["select","clear"],function(){o.hide()}),this.get("boundingBox").on(["focusoutside","clickoutside"],function(a){o.hide()}),e.on("keydown",function(a){switch(a.keyCode){case 13:this.selectItem(),this.fire(b);break;case 9:this.get("activeItem")&&(this.selectItem(),this.fire(b));break;case 27:this.hide();break;case 38:this._activatePrevItem();break;case 40:this._activateNextItem();break}},this),this._listNode.delegate("mouseup",function(a){this.fire(t),a.preventDefault()},this._SELECTOR_ITEM,this),this._listNode.delegate("mousedown",function(a){this.fire(l)},this._SELECTOR_ITEM,this)},_activateNextItem:function(){d.superclass._activateNextItem.call(this),c.Lang.isNull(this.get("activeItem"))&&this.set("activeItem",this._getFirstItemNode())},_activatePrevItem:function(){d.superclass._activatePrevItem.call(this),c.Lang.isNull(this.get("activeItem"))&&this.set("activeItem",this._getLastItemNode())},_scrollToActiveItem:function(){this.get("activeItem").scrollIntoView();var o=this._scrollNode,e=o.get("scrollTop"),a=o.one("li:first-child").get("offsetHeight");o.set("scrollTop",a*Math.round(e/a))}},{CSS_PREFIX:"sqs-scroll-ac",ATTRS:{className:{validator:c.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:["autocomplete","base","event-outside","lang/autocomplete-list","squarespace-attr-validators"]})},440848:function(c,b,t){"use strict";var l=t(371467),d=t(103372),o=t.n(d),e=t(252152),a=t.n(e);YUI.add("squarespace-search-page",function(r){var s=function(u){var h=r.Node.create("<div>");return h.set("innerHTML",u),h.get("text")};r.namespace("Squarespace.Widgets");var n="/search",i=r.Squarespace.Widgets.SearchPage=r.Base.create("searchPage",r.Squarespace.Widgets.SearchContainer,[],{initializer:function(u){this._isFirstSync=!0,this.get("censusEnabled")&&this._trackSearchHit(this.get("searchQuery"),this.get("collectionFilter"),r.config.doc.referrer)},destructor:function(){this._resizeEmitter&&(this._resizeEmitter.destroy(),this._resizeEmitter=null),r.Lang.isValue(this._searchTypingTimeout)&&this._searchTypingTimeout.cancel()},renderUI:function(){i.superclass.renderUI.apply(this,arguments);var u=this.get("inputWrapper"),h=new r.Squarespace.Widgets.SearchInputBox({queryString:this.get("searchQuery"),srcNode:u,boundingBox:u,inputType:"text"});this.set("searchInputBox",h),h.render().focus(),this._resizeEmitter=new r.Squarespace.ResizeEmitter({timeout:100}),this._initRender()},_initRender:function(){var u=s(this.get("searchQuery"));this.get("inputWrapper").one("input").set("value",u);var h=!r.Lang.isValue(this.get("resultItemEls")),g=3;h&&u&&u.length>=g&&this.get("noticeEl").setContent(this.get("strings.emptyNotice")).toggleClass("hide"),this.get("resultsWrapperEl").toggleClass("empty",h);var p=this.get("collectionFilter");p!==""&&this.set("searchFilter",[{name:"collectionId",value:p}]),this._toggleMore(!0),this.get("outputEl").removeClass("hide")},bindUI:function(){i.superclass.bindUI.apply(this,arguments);var u=this.get("resultEl"),h=".search-result";u.delegate("click",this._onResultClick,h,this),u.delegate("keydown",(function(p){var f=p.keyCode===13;f&&this._onResultClick(p)}).bind(this),h,this),this.after("searchQueryChange",this._updateHistory,this),this.get("inputWrapper").one("input").on("keyup",this._onKeyUp,this);var g=this.get("moreEl");g.on("click",this._nextPage,this),g.on("keydown",function(p){var f=p.keyCode===13,m=p.keyCode===32;(f||m)&&this._nextPage(p)},this),this._resizeEmitter.on("resize",this._onResize,this)},syncUI:function(){this.get("page")===0&&this.get("outputEl").addClass("hide"),this._isFirstSync?(this._isFirstSync=!1,this._loadImages(),this.get("outputEl").removeClass("hide")):(i.superclass.syncUI.apply(this,arguments),this._toggleLoader(),setTimeout(this._syncOutput.bind(this),150))},_syncOutput:function(){var u=this.get("resultsWrapperEl"),h=this.get("page"),g=this.get("perPage"),p=r.Node.create(this._getResultsTemplate());if(r.Lang.isValue(p)){if(p.all(".sqs-search-ui-item").removeClass("sqs-search-ui-item").addClass("sqs-search-page-item"),h===0)u.setContent(p);else{var f=p.get("children"),m=f.size(),_=m%g===0?g:m%g;f=f.splice(-_),u.append(f)}this.set("resultItemEls",u.get("children"))}this._loadImages(),this._toggleNotice(p),this._toggleMore(),this.get("loading")||this.get("outputEl").removeClass("hide")},_loadImages:function(){this.get("contentBox").all("img[data-src]").each(function(u){ImageLoader.load(u,{load:!0})})},_toggleNotice:function(u){var h=this.get("noticeEl"),g=this.get("resultsWrapperEl"),p=3,f=this.get("searchQuery")&&this.get("searchQuery").length>=p,m=!r.Lang.isValue(u)&&!this.get("loading"),_=!m,v=this.get("outputEl"),E=v&&v.hasClass("sqs-search-page-has-error");h.toggleClass("hide",_||!f),g.toggleClass("empty",!r.Lang.isValue(u)),m&&(g.empty(),h.setContent(this.get(E?"strings.errorNotice":"strings.emptyNotice")))},_toggleLoader:function(){this.get("searchQuery")===""&&this.set("loading",!1);var u=r.Lang.isValue(this.get("loading"))&&this.get("loading"),h=this.get("spinnerEls");u&&!r.Lang.isValue(this._inputSpinner)&&!r.Lang.isValue(this._moreSpinner)&&(this._inputSpinner=new r.Squarespace.Spinner({color:"dark",size:"large",render:h.item(0)}),this._moreSpinner=new r.Squarespace.Spinner({size:"large",render:h.item(1)})),this.get("inputWrapper").toggleClass("loading",u),this.get("moreEl").toggleClass("loading",u),h.toggleView(u)},_toggleMore:function(u){var h=this.get("moreEl");if(!r.Lang.isValue(this.get("resultItemEls"))||this.get("searchQuery")===""){h.addClass("hide");return}var g=u?this.get("resultEl").getData("count"):this.get("totalCount");h.toggleClass("hide",g-this.get("resultItemEls").size()<=0)},_getResultsTemplate:function(){return r.Squarespace.UITemplates.render(i.TEMPLATE_RESULTS_NAME,this._getSearchDataModel())},_onKeyUp:function(u){r.Lang.isValue(this._searchTypingTimeout)&&this._searchTypingTimeout.cancel(),(u.keyCode<37||u.keyCode>40)&&(this._searchTypingTimeout=r.later(this.get("displayDelay"),this,function(){this.get("searchInputBox").onSubmit()}))},_onResultClick:function(u){u.halt();var h=u.target.ancestor(".search-result",!0),g=h.getData("url"),p=r.Lang.isValue(g)?g:this._getSearchItemUrl(h);this._trackSearchHelper(h),this._redirect(p+"?"+r.QueryString.stringify({rq:this.get("searchQuery")}))},_trackSearchHelper:function(u){var h=u.getAttribute("itemid"),g=this.get("resultItems");if(!o()(g)){for(var p,f,m,_=0;_<g.length;_++)if(g[_].id===h){p=g[_].title.replace(/<(.|\n)*?>/g,""),f=g[_].categories,m=g[_].tags;break}l.U3({content_name:p,content_category:f,content_tag:m,search_string:this.get("searchQuery")})}},_updateHistory:function(){var u=s(this.get("searchQuery"));if(!(!r.Lang.isValue(u)||u==="")){var h=r.config.win.history,g=u+" - "+r.config.doc.title,p={};p.q=u;var f=this.get("collectionFilter");f!==""&&(p.f_collectionId=f),h.pushState(p,g,n+"?"+r.QueryString.stringify(p))}},_onResize:function(){this._loadImages()},_setSearchQuery:function(u){return r.Lang.isValue(u)&&u!==""&&(u=r.Squarespace.Escaping.escapeForHtml(u+"")),r.Lang.isValue(u)?u:""}},{CSS_PREFIX:"sqs-search-page",TEMPLATE_RESULTS_NAME:"search-result.html",HTML_PARSER:{inputWrapper:".sqs-search-page-input",spinnerEls:[".spinner-wrapper"],outputEl:".sqs-search-page-output",noticeEl:".sqs-search-page-notice",resultEl:".sqs-search-page-result",resultsWrapperEl:".sqs-search-page-list .search-results",resultItemEls:[".sqs-search-page-list .search-results .search-result"],moreEl:".sqs-search-page-more"},ATTRS:{searchQuery:{valueFn:function(){var u=r.QueryString.parse(r.config.doc.location.search.substring(1)).q;return this._setSearchQuery(u)},setter:"_setSearchQuery",validator:r.Squarespace.AttrValidators.isString},collectionFilter:{valueFn:function(){var u=r.QueryString.parse(r.config.doc.location.search.substring(1)).f_collectionId;return r.Lang.isValue(u)&&u!==""&&(u=r.Squarespace.Escaping.escapeForHtml(u+"")),r.Lang.isValue(u)?u:""},validator:r.Squarespace.AttrValidators.isNullOrString},inputWrapper:{value:null,validator:r.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},outputEl:{value:null,validator:r.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},noticeEl:{value:null,validator:r.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},spinnerEls:{value:null,validator:r.Squarespace.AttrValidators.isNullOrNodeList,writeOnce:"initOnly"},resultEl:{value:null,validator:r.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},resultsWrapperEl:{value:null,validator:r.Squarespace.AttrValidators.isNullOrNode},resultItemEls:{value:null,validator:r.Squarespace.AttrValidators.isNullOrNodeList},moreEl:{value:null,validator:r.Squarespace.AttrValidators.isNullOrNode,writeOnce:"initOnly"},displayDelay:{value:1e3,validator:r.Squarespace.AttrValidators.isNumber},perPage:{value:20,validator:r.Squarespace.AttrValidators.isNumber,writeOnce:"initOnly"}}});r.config.win.Squarespace.onInitialize(r,function(){r.all(".sqs-search-page").each(function(u){new i({srcNode:u}).render()})})},"1.0",{requires:["autocomplete-plugin","base","datasource","event","querystring","squarespace-animations","squarespace-dom-emitters-resize","squarespace-escaping-utils","squarespace-search","squarespace-search-result-template","squarespace-spinner","squarespace-ss-widget","squarespace-ui-templates","squarespace-util"]})},64765:function(c,b,t){"use strict";var l=t(714487),d=t(356404),o=t.n(d),e=t(537312);YUI.add("squarespace-search",function(a){a.namespace("Squarespace");var r=38,s=40,n=13;a.Squarespace.Widgets.SearchContainer=a.Base.create("searchContainer",a.Squarespace.SSWidget,[],{bindUI:function(){var i=this.get("searchInputBox");i.after("queryStringChange",this._onSearchInputBoxChange,this),this.after("searchQueryChange",this._onSearchQueryChange,this),this.get("censusEnabled")&&this.after("searchQueryChange",this._trackOnQueryChange,this,this.get("collectionFilter")),this.after("resultItemsChange",this._onSearchResultChange,this),this.after("loadingChange",this.syncUI,this),this.get("contentBox").on("keyup",this._onKeyup,this)},_onSearchQueryChange:function(){this._clearResult(),this._search()},_onSearchFilterChange:function(){this._clearResult(),this._search()},_onSearchResultChange:function(){this.syncUI()},_clearResult:function(){this.set("resultItems",null),this.set("page",0)},_onSearchInputBoxChange:function(i){this.set("searchQuery",i.newVal)},_onKeyup:function(i){i.keyCode===r&&!this.get("searchInputBox").isAutocompleteEnabled()?this._moveSelectedResultItem(-1):i.keyCode===s&&!this.get("searchInputBox").isAutocompleteEnabled()?this._moveSelectedResultItem(1):i.keyCode===n&&this._onEnter()},_moveSelectedResultItem:function(i){var u=this.get("contentBox").one(".active");if(a.Lang.isValue(u)){u.removeClass("active");var h=this.get("contentBox").all(".sqs-search-ui-item"),g=h.indexOf(u),p=h.item(g+i);a.Lang.isValue(p)&&(p.addClass("active"),p.scrollIntoView())}else if(i>0){var f=this.get("contentBox").one(".sqs-search-ui-item");a.Lang.isValue(f)&&(f.addClass("active"),f.scrollIntoView())}},_onEnter:function(){var i=this.get("contentBox").one(".active");!a.Lang.isValue(i)&&!this.get("searchInputBox").isAutocompleteEnabled()&&this._redirect(this._getSearchItemUrl(i))},_getSearchItemUrl:function(i){if(a.Lang.isValue(i)){var u=i.getAttribute("itemid");if(a.Lang.isValue(u)){var h=this._getSearchResultObject(u);return h.itemUrl}}},_redirect:function(i){a.Lang.isValue(i)&&(document.location.href=i)},_search:function(){var i=this.get("searchQuery"),u=this.get("searchFilter"),h=this.get("page"),g=3;if(!(i.length<g)){this.set("loading",!0);var p={q:i,p:h};a.Lang.isValue(u)&&a.Array.each(u,function(f){p["f_"+f.name]=f.value}),a.Data.get({url:"/api/search/GeneralSearch",data:p,success:this._searchResultCallback,failure:this._searchResultCallbackError},this)}},_searchResultCallback:function(i){this.set("loading",!1),this.set("facets",i.facets),this.set("totalCount",i.totalCount);var u=this.get("resultItems"),h=this.get("page");i.serviceError?this._searchResultCallbackError():h>0&&u?(u=u.concat(i.items),this.set("resultItems",u)):this.set("resultItems",i.items)},_searchResultCallbackError:function(){this.set("loading",!1);var i=this.get("outputEl");i.addClass("sqs-search-page-has-error"),this._errorNotice=this.get("strings.errorNotice")},_getSearchDataModel:function(){var i=this.get("resultItems"),u={loading:this.get("loading"),error:this._errorNotice,items:i};return a.Lang.isValue(i)?u.error?u.notice=u.error:i.length===0&&(u.notice=this.get("strings.emptyNotice")):u.notice=this.get("strings.instruction"),u},_getSearchResultObject:function(i){return a.Array.find(this.get("resultItems"),function(u){return u.id===i})},_nextPage:function(){var i=this.get("page")+1;this.set("page",i),this._search()},_trackOnQueryChange:function(i,u){this._trackSearchHit(i.newVal,u,a.config.doc.location.href)},_trackSearchHit:function(i,u,h){if(!(!a.Lang.isValue(i)||i==="")){var g=[];a.Lang.isValue(u)&&u!==""&&g.push(u),e.j(o().SITE_SEARCH,{query:i,filters:{collectionIds:g},referrer:h})}}},{CSS_PREFIX:"sqs-search-container",ATTRS:{strings:{value:{errorNotice:(0,l.t)("Something went wrong. Please try your search again.",null,{project:"website.search"}),emptyNotice:(0,l.t)("Your search did not match any results. Try a different search.",null,{project:"website.search"}),instruction:(0,l.t)("Begin typing your search above and press return to search.",null,{project:"website.search"})}},searchInputBox:{value:null},searchFilter:{value:[],validator:a.Squarespace.AttrValidators.isArray},page:{value:0,validator:a.Squarespace.AttrValidators.isNumber},searchQuery:{value:"",validator:a.Squarespace.AttrValidators.isString},resultItems:{validator:a.Squarespace.AttrValidators.isNullOrArray},totalCount:{value:0,validator:a.Squarespace.AttrValidators.isNumber},facets:{value:[],validator:a.Squarespace.AttrValidators.isArray},loading:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},censusEnabled:{value:!0,validator:a.Squarespace.AttrValidators.isBoolean}}}),a.Squarespace.Widgets.SearchInputBox=a.Base.create("searchInputBox",a.Widget,[],{renderUI:function(){var i=this._createSearchNode();this.get("contentBox").append(i)},bindUI:function(){this._enableAutoComplete();var i=this.get("boundingBox").one("form");i.on("submit",this.onSubmit,this),i.on("keydown",this._onKeyDown,this),this.get("boundingBox").one("input").on("click",this.focus,this),this.after("queryStringChange",this._resetAutoComplete,this)},_onKeyDown:function(i){i.keyCode!==27&&i.stopPropagation()},_autocompleteSelected:function(i){a.later(1,this,function(u){this.set("queryString",u.result.text)},i)},onSubmit:function(i){a.Lang.isValue(i)&&i.preventDefault();var u=this.get("contentBox").one("input").get("value");this.set("queryString",u)},_enableAutoComplete:function(){var i=location.protocol+"//"+location.host+"/api/search/SearchSuggest",u=new a.DataSource.IO({source:i}),h=this.get("contentBox").one("input");if(this.get("withSearchSuggest")&&!h.ac){h.plug(a.Plugin.AutoComplete,{source:u,requestTemplate:"?q={query}",resultTextLocator:"suggestion",resultListLocator:function(p){return a.JSON.parse(p[0].responseText)}});var g=this.get("boundingBox").one("input").ac;g.on("select",this._autocompleteSelected,this)}},isAutocompleteEnabled:function(){var i=this.get("contentBox").all(".yui3-aclist-item");return i.size()>0},_resetAutoComplete:function(){var i=this.get("boundingBox").one("input");i.set("value",this.get("queryString")),i.ac&&i.unplug("ac"),this._enableAutoComplete()},focus:function(){var i=this.get("contentBox").one("input");i.focus(),i.set("value",this.get("queryString")),this.get("queryString")!==""&&i.select()},blur:function(){var i=this.get("contentBox").one("input");i.blur()},_createSearchNode:function(){var i=a.Node.create("<input/>");i.setAttrs({placeholder:(0,l.t)("Type to search\u2026",null,{project:"website.search"}),type:this.get("inputType"),spellcheck:!1}),i.setAttribute("value",this.get("queryString"));var u=a.Node.create("<form/>");return u.append(i),u}},{CSS_PREFIX:"sqs-search-input",ATTRS:{queryString:{value:"",validator:a.Squarespace.AttrValidators.isString},inputType:{value:"search",validator:a.Squarespace.AttrValidators.isString},withSearchSuggest:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["autocomplete-plugin","base","datasource","event","squarespace-animations","squarespace-ss-widget","squarespace-util"]})},711738:function(c,b,t){"use strict";var l=t(994336),d=t.n(l);YUI.add("squarespace-session-storage",function(o){o.namespace("Squarespace");var e=function(){return o.Lang.isValue(window.localStorage)};o.Squarespace.SessionStorage={saveSessionData:function(a,r,s){var n={value:r};o.Lang.isDate(s)?n.expires=s.getTime():s=null;var i=btoa(o.JSON.stringify(n));e()?window.localStorage.setItem(a,i):s===null?d().set(a,i,{path:"/"}):d().set(a,i,{path:"/",expires:s})},getSessionData:function(a){var r;if(e()?r=window.localStorage.getItem(a):r=d().get(a),!o.Lang.isValue(r))return null;var s=o.JSON.parse(atob(r));return o.Lang.isNumber(s.expires)&&s.expires<new Date().getTime()?(e()&&window.localStorage.removeItem(a),null):s.value},removeSessionData:function(a){e()?window.localStorage.removeItem(a):d().set(a,"",{expires:new Date(0)})}}},"1.0",{requires:["base"]})},838338:function(c,b,t){"use strict";var l=t(714487),d=t(622961),o=t(664350),e=t.n(o),a=t(692853),r=t.n(a),s=t(312713);YUI.add("squarespace-simple-liking",function(n){var i=n.config.win.Static;n.Squarespace.SimpleLike={TEXT_LIKE_VERB_NONE:(0,l.t)("No Likes",null,{project:"scripts-v6-root"}),TEXT_LIKE_VERB_SINGULAR:(0,l.t)("Like",null,{project:"scripts-v6-root"}),TEXT_LIKE_VERB_PLURAL:(0,l.t)("Likes",null,{project:"scripts-v6-root"}),TEXT_LIKE_ACTIVATED:(0,l.t)("You like this",null,{project:"scripts-v6-root"}),TEXT_LIKE_SUGGEST:(0,l.t)("Click to like",null,{project:"scripts-v6-root"}),attached:!1,attach:function(){if(!this.attached){this.attached=!0;var u;try{localStorage&&(u=n.JSON.parse(localStorage.getItem("squarespace-likes")),u||(u={}),localStorage.setItem("squarespace-likes",n.JSON.stringify(u)))}catch{u={}}this.eventHandlers=[];var h=n.delegate("click",function(p){var f=p.currentTarget,m=f.getAttribute("data-item-id");if(m){for(var _=0;_<5;++_)n.Squarespace.SimpleLike.burst(f);f.hasClass("clicked")||f.hasClass("float")||d.Z.like(m).then(function(v){if(v.commited===!0){if(f&&f.getDOMNode()){var E=parseInt(f.getAttribute("data-like-count"),10);f.setAttribute("data-like-count",E+1),n.Squarespace.SimpleLike.renderLikeCount(f),f.addClass("clicked")}try{localStorage&&(u[m]=!0,localStorage.setItem("squarespace-likes",n.JSON.stringify(u)))}catch(S){console.warn("Unable to save like to local storage: ",S)}}v.error&&((0,s.z)()||n.config.win.alert((0,l.t)("You need to enable cookies to be able to like something.",null,{project:"scripts-v6-root"})))}).catch(function(v){})}},"body",".sqs-simple-like");this.eventHandlers.push(h),n.all(".sqs-simple-like").each(function(g){var p=g.getAttribute("data-item-id");p&&(i.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled||g.remove(),u[p]&&g.addClass("clicked"),d.Z.getLikeCount(p).then(function(m){g.setAttribute("data-like-count",m),n.Squarespace.SimpleLike.renderLikeCount(g)}).catch(function(){n.Squarespace.SimpleLike.renderLikeCount(g)}))})}},detach:function(){this.attached=!1,this.eventHandlers.forEach(function(u){u.detach()})},renderLikeCount:function(h){var g=h&&h.getDOMNode?h.getDOMNode():h;if(!(!g||!g.ownerDocument||!g.ownerDocument.defaultView)){var p=h.getAttribute("data-item-id"),f=h.getAttribute("data-like-count"),m=h.one(".like-count");!p||!m||m.setContent(this.formatLikeText(f))}},formatLikeText:function(u){return u===0?n.Squarespace.SimpleLike.TEXT_LIKE_VERB_NONE:u===1?"1 "+n.Squarespace.SimpleLike.TEXT_LIKE_VERB_SINGULAR:u+" "+n.Squarespace.SimpleLike.TEXT_LIKE_VERB_PLURAL},burst:function(u){var h=u.cloneNode(!0);h.one(".like-count")&&h.one(".like-count").remove();var g=u.one(".like-icon");(!g||g.getStyle("display")==="none")&&(g=u),h.setStyles({position:"absolute",left:g.getX()+"px",top:g.getY()+"px"}),n.one(n.config.doc.body).append(h);var p=new n.Anim({node:h,duration:2,easing:n.Easing.easeOut});p.set("to",{curve:n.Squarespace.SimpleLike.randomCurve(h)}),p.on("end",function(){this.get("node").remove()}),p.run(),h.removeClass("clicked"),h.addClass("float")},randomCurve:function(u){for(var h=[],g=3,p=30,f=Math.floor(Math.random()*2)?1:-1,m=Math.floor(Math.random()*2)?1:-1,_=u.getX(),v=u.getY(),E=0;E<g;++E)_+=Math.floor(Math.random()*p)*f,v+=Math.floor(Math.random()*p)*m,h.push([_,v]);return h}},n.config.win.Squarespace.onInitialize(n,function(){i.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled&&n.Squarespace.SimpleLike.attach()}),n.config.win.Squarespace.onDestroy(n,function(){n.Squarespace.SimpleLike.attached===!0&&n.Squarespace.SimpleLike.detach()})},"1.0",{requires:["anim","json","node","squarespace-util"]})},608229:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-slice-type-groups",function(o){o.namespace("Squarespace"),o.Squarespace.SliceTypeGroups={BRANDING_TEXT:[d().HEADING,d().SUB_HEADING,d().BODY,d().LOGO,d().LOCK],ACTION:[d().BUTTONS,d().NAVIGATION,d().CUSTOM_FORM,d().NEWSLETTER,d().ACTION,d().POPUP_OVERLAY_ACTION],MEDIA:[d().IMAGE,d().GALLERY],VIDEO:[d().VIDEO],AUDIO:[d().ALBUM],LOCATION:[d().MAP],TWITTER:[d().TWITTER],SOCIAL_ICONS:[d().SOCIAL_ICONS]}},"1.0",{requires:[]})},19372:function(){YUI.add("squarespace-slide-rendering-color-processor",function(c){c.namespace("Squarespace.SlideRendering");var b="222222";c.Squarespace.SlideRendering.ColorProcessor={processNode:function(t){var l=t.getAttribute("data-average-color"),d;l?d=c.JSON.parse(l):d={topLeftAverage:b,topRightAverage:b,bottomLeftAverage:b,bottomRightAverage:b,centerAverage:b,suggestedBgColor:b},delete d.suggestedBgColor;var o=this._processColors(d),e=this._calculateStyles(o.averageColor,o.distribution);return t.setData("processedColorStyles",e),e},_processColors:function(t){var l=0,d=0,o=0,e=new c.Squarespace.SlideRendering.Slices.RGB({color:{r:0,g:0,b:0}}),a,r;c.Object.each(t,function(i){r=new c.Squarespace.SlideRendering.Slices.RGB({color:i}),a=r.getBrightness(),l++,d+=a,o+=Math.pow(a,2),e.add(r)});var s=(o-Math.pow(d,2)/l)/l,n=Math.sqrt(s)/(255/2);return e.divide(l),{distribution:n,averageColor:e}},_calculateStyles:function(t,l){var d=153,o=t.getBrightness(),e=l>.4?.5:.3,a=o>=d?30:20;return t.darken(a),{opacity:e,color:t}}}},"1.0",{requires:["json","squarespace-slide-rendering-slices-rgb"]})},685501:function(c,b,t){"use strict";var l=t(963351),d=t.n(l),o=t(150825),e=t(480253),a=t(347709);YUI.add("squarespace-slide-rendering-edit-controller",function(r){r.namespace("Squarespace.SlideRendering"),r.Squarespace.SlideRendering.EditController=r.Base.create("EditController",r.Base,[],{initializer:function(s){s.shouldShowPopup?this.onShowOverlay():this._initEditController(),this.showPopupOverlayEvent=r.Global.on("popupOverlay:showing",this.onShowOverlay,this),this.hidePopupOverlayEvent=r.Global.on("popupOverlay:hide",this.onHideOverlay,this)},destructor:function(){this._currentSlideWidget&&this._currentSlideWidget.unplug(r.Squarespace.SlideRendering.Editor),this.showPopupOverlayEvent.detach(),this.showPopupOverlayEvent=null,this.hidePopupOverlayEvent.detach(),this.hidePopupOverlayEvent=null},_initEditController:function(s){var n=s||r.one(".sqs-slide");n&&(this._currentSlideWidget&&this._currentSlideWidget.unplug(r.Squarespace.SlideRendering.Editor),this._currentSlideWidget=r.Widget.getByNode(n),this._currentSlideWidget&&(this._currentSlideWidget.plug(r.Squarespace.SlideRendering.Editor),this._loadLayoutsAndInitFonts(this._bindGlobalSlideUpdate.bind(this))))},onShowOverlay:function(){var s='.sqs-slide[data-slide-type="'+o.Z[d().POPUP_OVERLAY]+'"]',n=r.one(s);this._initEditController(n)},onHideOverlay:function(){var s='.sqs-slide[data-slide-type="'+o.Z[d().COVER_PAGE]+'"]',n=r.one(s);this._initEditController(n)},_bindGlobalSlideUpdate:function(){r.Global.detach("slideUpdate"),r.Global.after("slideUpdate",(function(s){var n=a.qG(s.slideType),i=r.one(n);if(i){var u=i.one(".sqs-slide"),h=r.Widget.getByNode(u);i.replace(s.renderedSlide),h&&h.destroy(),r.later(100,this,function(){h=this._createAndRenderNewSlideWidget(n),h.plug(r.Squarespace.SlideRendering.Editor),r.Global.fire("slideUpdateRendered")})}}).bind(this))},_createAndRenderNewSlideWidget:function(s){var n=r.one(s+" .sqs-slide"),i=n.getAttribute("data-slide-layout-id");return r.Squarespace.SlideRendering.Layouts.Factory.create(i,{boundingBox:n,render:!0})},_loadLayoutsAndInitFonts:function(s){var n=r.all(".sqs-slide"),i=[];n.each(function(g){i.push(e.Z[g.getAttribute("data-slide-type")])}),this._layouts=new r.Squarespace.Models.SlideLayoutList({slideTypes:i});var u=new r.Parallel,h=u.add();this._layouts.load((function(){h.call(this)}).bind(this)),u.done(function(){s&&s()})}})},"1.0",{requires:["base","parallel","widget","squarespace-models-slide","squarespace-models-slide-layout-list","squarespace-slide-rendering-editor","squarespace-slide-rendering-layouts-factory"]})},733228:function(c,b,t){"use strict";var l=t(210750),d=t.n(l),o=t(202369),e=t(986590),a=t(7595);YUI.add("squarespace-slide-rendering-editor",function(r){var s=["branding-font","heading-font","body-font","navigation-font","button-font","track-font","vertical-positioning","horizontal-positioning","alignment"],n=["enable-gallery-border","gallery-border-size","gallery-size"];r.namespace("Squarespace.SlideRendering"),r.Squarespace.SlideRendering.Editor=r.Base.create("Editor",r.Plugin.Base,[],{initializer:function(){this._bindGlobalEvents()},destructor:function(){this._sliceUpdateHandler&&this._sliceUpdateHandler.detach(),this._videoPropUpdateHandler&&this._videoPropUpdateHandler.detach(),this._tweakChangeHandler&&this._tweakChangeHandler.detach(),this._slicePreviewTimers&&r.Object.each(this._slicePreviewTimers,function(i){i.cancel()})},_bindGlobalEvents:function(){r.Global.detach("sliceUpdate"),this._sliceUpdateHandler=r.Global.after("sliceUpdate",function(u){var h=new r.Squarespace.Models.Slice(u.slice);!u.forceServerRefresh&&this._sliceCanClientRefresh(h)?this._clientRefreshSlice(h):this._serverRefreshSlice(h,u.slideType)},this),this._videoPropUpdateHandler=r.Global.after("videoPropUpdate",function(i){this.scheduledVideoUpdate&&(clearTimeout(this.scheduledVideoUpdate),this.scheduledVideoUpdate=null),this._attemptBackgroundVideoUpdate(i.slice,i.changeData)},this),this._tweakChangeHandler=r.Global.on("tweak:change",d()(function(i){var u=i.getName();this._isTweakResponsive(u)&&this.get("host")._syncResponsiveComponents(),this._isTweakImageRefresh(u)&&this.get("host").get("contentBox").one('[data-slice-type="gallery"] .sqs-active-slide img').refresh()},100),this)},_attemptBackgroundVideoUpdate:function(i,u){try{this._updateBackgroundVideo(i,u),this.scheduledVideoUpdate=null}catch{this.scheduledVideoUpdate=setTimeout((function(){this._attemptBackgroundVideoUpdate(i,u)}).bind(this),0)}},_sliceCanClientRefresh:function(i){var u=this._getSliceNode(i.get("type"),i.get("isCompoundType")),h=u.getAttribute("data-content-empty")==="true",g=u.getAttribute("data-slice-type"),p=i.get("absoluteType")!==o.Z[g];if(h||p)return!1;var f=this.get("host")._sliceWidgetMap[i.get("type")];return f&&f.get("canClientRefresh")},_clientRefreshSlice:function(i){var u=this.get("host")._sliceWidgetMap[i.get("type")];u.refreshFromSliceContent(i.get("absoluteContent")),this.get("host")._syncResponsiveComponents()},_serverRefreshSlice:function(i,u){r.Lang.isValue(this._slicePreviewTimers)||(this._slicePreviewTimers={});var h=i.get("type");this._slicePreviewTimers[h]&&this._slicePreviewTimers[h].cancel();var g=this.get("host"),p=g.get("slideLayoutIdentifier");this._slicePreviewTimers[h]=r.later(250,this,function(){i.renderPreview(p,u).then(r.bind(function(f){this._replaceSlice(f.renderedSlice),g._destroyResponsiveComponents(),g._initResponsiveComponents(),g._syncResponsiveComponents(),a.default.parse()},this))})},_updateBackgroundVideo:function(i,u){var h=this.get("host")._sliceWidgetMap[i.type],g=h.videoBg;g[u.key]=u.val,this._updateItemAttribute(h.get("items"),u),u.key==="url"?(g.destroy(),h._initGallery()):g.syncPlayer()},_updateItemAttribute:function(i,u){var h="data-config-"+u.key.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();i.each(function(g){g.setAttribute(h,u.val||"")})},_replaceSlice:function(i){var u=r.Node.create(i),h=o.Z[u.getAttribute("data-slice-type")],g=o.Z[u.getAttribute("data-compound-type")],p,f;g?(p=this._getSliceNode(g,!0),f=g):(p=this._getSliceNode(h,!1),f=h);var m=r.Node.create('<div class="wrap-node"></div>');p.wrap(m),p.remove(!0);var _=this.get("host");_._sliceWidgetMap[f]&&_._sliceWidgetMap[f].destroy(),m.setHTML(u),u.unwrap(),u.getAttribute("data-content-empty")==="true"?delete _._sliceWidgetMap[f]:_._widgetizeSliceNode(u)},_getSliceNode:function(i,u){var h=e.Z[i],g;u?g='[data-compound-type="'+h+'"]':g='[data-slice-type="'+h+'"]:not([data-compound-type])';var p=this.get("host").get("contentBox").one(g);return p},_isTweakResponsive:function(i){var u=!1;return s.forEach(function(h){i.indexOf(h)===0&&(u=!0)}),u},_isTweakImageRefresh:function(i){var u=!1;return n.forEach(function(h){i.indexOf(h)===0&&(u=!0)}),u}},{NS:"editor"})},"1.0",{requires:["base","node","plugin","squarespace-models-slice"]})},987144:function(){YUI.add("squarespace-slide-rendering-grid-gallery-densities",function(c){c.namespace("Squarespace.SlideRendering"),c.Squarespace.SlideRendering.GridGalleryDensities={desktop:{orientation:{horizontal:{ratio:{original:[3,4,5,6,7],r21:[3,4,5,6,7],r169:[3,4,5,6,7],r32:[3,4,5,6,7],r43:[3,4,5,6,7],r54:[3,4,5,6,7]}},vertical:{ratio:{original:[5,6,7,8,9],r21:[2,3,4,5,6],r169:[2,3,4,5,6],r32:[2,3,4,5,6],r43:[2,3,4,5,6],r54:[2,3,4,5,6]}},square:{ratio:{r11:[3,4,5,6,7]}}}},"maxWidth-800":{orientation:{horizontal:{ratio:{original:[5,6,7,8,9],r21:[3,4,5,6,7],r169:[3,4,5,6,7],r32:[3,4,5,6,7],r43:[3,4,5,6,7],r54:[3,4,5,6,7]}},vertical:{ratio:{original:[3,4,5,6,7],r21:[2,3,4,5,6],r169:[2,3,4,5,6],r32:[2,3,4,5,6],r43:[2,3,4,5,6],r54:[2,3,4,5,6]}},square:{ratio:{r11:[3,4,5,6,7]}}}},"maxWidth-600":{orientation:{horizontal:{ratio:{original:[6,7,8,9,10],r21:[7,7,11,14,14],r169:[7,7,10,13,13],r32:[6,6,8,11,11],r43:[5,5,7,10,10],r54:[5,5,7,9,9]}},vertical:{ratio:{original:[3,3,4,5,5],r21:[3,3,4,5,5],r169:[3,3,4,5,5],r32:[4,4,5,6,6],r43:[5,5,6,7,7],r54:[5,5,7,9,9]}},square:{ratio:{r11:[6,6,7,9,9]}}}},"maxHeight-600":{orientation:{horizontal:{ratio:{original:[3,3,4,5,5],r21:[3,3,4,5,5],r169:[3,3,4,5,5],r32:[3,3,4,5,5],r43:[3,3,4,5,5],r54:[3,3,4,5,5]}},vertical:{ratio:{original:[4,4,5,6,6],r21:[2,2,3,4,4],r169:[2,2,3,4,4],r32:[2,2,3,4,4],r43:[2,2,3,4,4],r54:[2,2,3,4,4]}},square:{ratio:{r11:[3,3,4,5,5]}}}}}},"1.0",{requires:[]})},862788:function(c,b,t){"use strict";var l=t(787592),d=t(134521),o=t.n(d);YUI.add("squarespace-slide-rendering-grid-gallery",function(e){e.namespace("Squarespace.SlideRendering");var a=100,r="sqs-gallery-grid",s=e.Squarespace.SlideRendering.GridGalleryDensities,n=!1;e.Squarespace.SlideRendering.GridGallery=e.Base.create("GridGallery",e.Base,[e.Squarespace.Mixins.EventRegistrar],{initializer:function(){this._initGallery(),this._bindUI(),this._timeouts=[],this._duplicationIterations=0,this._throttledSyncUI=o()(this.syncUI.bind(this),100,{leading:!1,trailing:!0})},destructor:function(){this._throttledSyncUI.cancel(),e.Array.each(this._timeouts,function(u){u.cancel()},this),this._removeClonedItems();var i=this.get("container");i&&i.inDoc()&&(i.removeClass(r),this._reset())},syncUI:function(){this._reset(),this._renderGrid()},_bindUI:function(){var i=window.orientation===void 0?"resize":"orientationchange";this._registerEvent(e.one(e.config.win).on(i,this._throttledSyncUI,this))},_initGallery:function(){this.get("container").addClass(r);var i=this.get("items"),u=new e.Parallel;i.each(function(h){var g=h.one("img");g.getAttribute("src")===""&&g.once("load",u.add())}),u.done((function(){this._throttledSyncUI()}).bind(this))},_reset:function(){var i=this.get("container");this.densityValues=this._parseDensityJSON(),this.imageOrdering=this._getTweakImageOrdering(),this.dimension=this._getAxisDimension(),this.axisGroups=[],this.imageRatios=[],i.setStyles({marginTop:null,marginLeft:null,width:null,height:null}),this._setAxisDirection(),this.currentAxisGroup={dimension:this.dimension,items:[],imageRatios:[]}},_renderGrid:function(){var u=this.get("items");u.each(function(p,f){this._resetItemStyles(p);var m=this.imageOrdering;if(m==="repeat"||m==="random"&&p.getAttribute("data-clone")!==""){var _=p.one("img"),v=this._getCalculatedImageDimensions(_);this.currentAxisGroup.imageRatios.push(v);var E=p._node,S=this._fitsInAxis(this.currentAxisGroup);S?this.currentAxisGroup.items.push(E):(this._growAxis(this.currentAxisGroup),this.axisGroups.push(this.currentAxisGroup),this.currentAxisGroup={dimension:this.dimension,items:[E],imageRatios:[this._getCalculatedImageDimensions(_)]})}},this);var h=this._duplicationIterations>=a;if(h)l.Tb(new Error("Could not duplicate enough rows to fill a grid gallery to fit container."));else{var g=this._isScreenFilled();if(!g){this._duplicateOriginalItems(),this._throttledSyncUI();return}}this._positionItems(),this._positionContainer(),this._loadImages(u)},_loadImages:function(i){i.each(function(h){var g=h.one("img"),p=this._getTweakLoadingAnimation();e.one(g).once("load",function(m){var _=1;p&&(_=Math.floor(Math.random()*2e3)),this._timeouts.push(e.later(_,m.currentTarget,function(){this.get("parentNode").addClass("loaded")}))},this),this._timeouts.push(e.later(10,this,function(){window.ImageLoader.load(g,{load:!0,mode:"fill"})}))},this)},previewImageLoading:function(i){var u=i,h=100,g=this.get("items"),p=this.get("container");p.addClass("no-transition"),g.each(function(f){f.removeClass("loaded"),u==="true"&&(h=Math.floor(Math.random()*2e3)+100),this._timeouts.push(e.later(h,f,function(){this.addClass("loaded")}))}),this._timeouts.push(e.later(100,this,function(){p.removeClass("no-transition")}))},_fitsInAxis:function(i){var u=this.get("container"),h=this._getRenderedAxisDimension(i),g=i.imageRatios[i.items.length],p=i.dimension,f=h+this._getProportionalDimension(g,p),m;return this.get("axisDirection")==="row"?m=u.get("clientWidth"):m=u.get("clientHeight"),f<=m},_getRenderedAxisDimension:function(i){for(var u=0,h=i.dimension,g=i.items.length,p=0;p<g;p++)u+=this._getProportionalDimension(i.imageRatios[p],h);return u},_getProportionalDimension:function(i,u){var h;return this.get("axisDirection")==="column"?h=i.height*u/i.width:this.get("axisDirection")==="row"&&(h=i.width*u/i.height),h},_getCalculatedImageDimensions:function(i){var u=i.getAttribute("data-image-dimensions").split("x"),h=parseInt(u[0],10),g=parseInt(u[1],10),p=h,f=g,m=this._getTweakImageRatio();return m!=="original"&&(h>g?f=h*m.ratioHeight/m.ratioWidth:p=g*m.ratioWidth/m.ratioHeight),{width:p,height:f}},_growAxis:function(i){var u=this.get("container"),h=this._getRenderedAxisDimension(i),g=this.get("axisDirection"),p;g==="row"?p=u.get("clientWidth"):p=u.get("clientHeight");for(var f=Math.floor(p*i.dimension/h),m,_=i.items.length,v=0;v<_;v++)m=i.items[v],g==="row"?(m.style.height=f+"px",m.style.width=Math.floor(this._getProportionalDimension(i.imageRatios[v],f))+"px"):(m.style.width=f+"px",m.style.height=Math.floor(this._getProportionalDimension(i.imageRatios[v],f))+"px");i.dimension=f},_positionItems:function(){this.axisGroups.forEach((function(i,u,h){var g,p,f=i.items.length,m=this.get("axisDirection"),_="height",v="top",E="left";m==="row"&&(_="width",v="left",E="top");for(var S=0;S<f;S++){g=i.items[S],p=i.items[S-1],p?g.style[v]=parseInt(p.style[_],10)+parseInt(p.style[v],10)+"px":g.style[v]="0";for(var y=0,C=0;C<u;C++)y+=h[C].dimension;g.style[E]=y+"px",g.style.visibility="visible"}}).bind(this))},_positionContainer:function(){var i=this.get("container"),u=this.axisGroups.overage/2,h=this.get("axisDirection")==="column",g=this._getTweakImageRatio(),p=g==="original";h&&p?i.setStyles({marginLeft:0-u+"px",width:"calc(100% + "+u+"px)"}):i.setStyles({marginTop:0-u+"px",height:"calc(100% + "+u+"px)"})},_duplicateOriginalItems:function(){var i=[],u=this.get("items");u.each(function(p,f){if(!p.hasAttribute("data-clone")){var m=p.get("outerHTML"),_=' data-clone="true" ',v=m.indexOf('class="sqs-slice-gallery-item'),E=[m.slice(0,v-1),_,m.slice(v)].join("");i.push(E)}},this),this.imageOrdering==="random"&&this._randomSortArray(i);var h=this.get("container");h.append(i.join(""));var g=h.all(".sqs-slice-gallery-item");this.set("items",g),this._duplicationIterations++},_removeClonedItems:function(){var i=this.get("items");i.each(function(u,h){u.hasAttribute("data-clone")&&u.remove()},this)},_resetItemStyles:function(i){i.setStyles({top:null,left:null,width:null,height:null,visibility:"hidden"})},_isScreenFilled:function(){var i=this.get("container"),u=0,h;return this.get("axisDirection")==="row"?h=i.get("clientHeight"):h=i.get("clientWidth"),this.axisGroups.lastVisibleAxisGroupIndex=null,this.axisGroups.overage=null,this.axisGroups.forEach((function(g,p,f){u+=g.dimension,u>h?this.axisGroups.lastVisibleAxisGroupIndex||(this.axisGroups.lastVisibleAxisGroupIndex=p,this.axisGroups.overage=u-h):this.axisGroups.overage=u-h}).bind(this)),u===0&&h===0?!0:u>h},_setAxisDirection:function(){if(this.get("container").inDoc()){var i=e.one(this.get("slideContainerSelector")).get("className"),u=i.match(/(grid-gallery-direction-)\w+/g)[0];u.indexOf("horizontal")!==-1||this._getTweakImageRatio()!=="original"?this.set("axisDirection","row"):this.set("axisDirection","column")}},_getGridDensity:function(){var i=this.densityValues,u=i[0],h=e.one(this.get("slideContainerSelector")),g=["grid-gallery-density-very-low","grid-gallery-density-low","grid-gallery-density-medium","grid-gallery-density-high","grid-gallery-density-very-high"];return g.forEach(function(p,f,m){h.hasClass(p)&&(u=i[f])}),u},_parseDensityJSON:function(){if(n===!0&&this.get("testDensityValue")){var i=this.get("testDensityValue");return[i,i,i,i,i]}var u=s,h=this.get("container"),g=this.get("axisDirection"),p=this._getTweakImageRatio(!0),f=this._getTweakImageOrientation(),m=h.get("clientWidth"),_=h.get("clientHeight"),v,E,S;return m<=600&&_<=600?m<_?v="maxWidth-600":v="maxHeight-600":m<=600?v="maxWidth-600":_<=600?v="maxHeight-600":m<=800?v="maxWidth-800":v="desktop",p==="original"?E="original":E="r"+p.ratioWidth.toString()+p.ratioHeight.toString(),E==="r11"?S="square":g==="column"?S="vertical":g==="row"&&(f==="portrait"?S="vertical":S="horizontal"),u[v].orientation[S].ratio[E]},_getAxisDimension:function(){var i=this.get("container");return this.get("axisDirection")==="row"?Math.ceil(i.get("clientHeight")/this._getGridDensity()):Math.ceil(i.get("clientWidth")/this._getGridDensity())},_getTweakImageRatio:function(i){var u=e.one(this.get("slideContainerSelector")).get("className"),h=u.match(/(grid-gallery-ratio-)\w+/g)[0],g=h.substring(h.lastIndexOf("-")+1),p,f;switch(g){case"11":p=1,f=1;break;case"54":p=5,f=4;break;case"43":p=4,f=3;break;case"32":p=3,f=2;break;case"169":p=16,f=9;break;case"21":p=2,f=1;break;default:return"original"}if(!i&&this._getTweakImageOrientation()==="portrait"&&p!==f){var m=p;p=f,f=m}return{ratioWidth:p,ratioHeight:f}},_getTweakImageOrientation:function(){var i=e.one(this.get("slideContainerSelector")).get("className"),u=i.match(/(grid-gallery-image-orientation-)\w+/g)[0];return u=u.substring(u.lastIndexOf("-")+1),u},_getTweakLoadingAnimation:function(){var i=!1;return e.one(this.get("slideContainerSelector")).hasClass("gallery-loading-animation")&&(i=!0),i},_getTweakImageOrdering:function(){var i="repeat";return e.one(this.get("slideContainerSelector")).hasClass("gallery-randomize-order")&&(i="random"),this.set("imageOrdering",i),this.get("imageOrdering")},_randomSortArray:function(i){function u(){var h=Math.random(),g;return h<=.36?g=-1:h<=.64?g=0:h<=1&&(g=1),g}i.sort(u),i.sort(u)}},{CSS_PREFIX:"sqs-grid-gallery",ATTRS:{container:{value:null,validator:e.Squarespace.AttrValidators.isNullOrNode},slideContainerSelector:{value:".sqs-slide-container",validator:e.Squarespace.AttrValidators.isNullOrString},items:{value:null,validator:e.Squarespace.AttrValidators.isNullOrNodeList},axisDirection:{value:"row",validator:function(i,u){return e.Squarespace.AttrValidators.isString(i,u)?i==="row"||i==="column":!1}},imageOrdering:{value:"repeat",validator:function(i,u){return e.Squarespace.AttrValidators.isString(i,u)?i==="repeat"||i==="random":!1}},testDensityValue:{value:null,validator:e.Squarespace.AttrValidators.isNullOrNumber}}})},"1.0",{requires:["base","parallel","squarespace-attr-validators","squarespace-slide-rendering-grid-gallery-densities","squarespace-mixins-event-registrar"]})},134372:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-audio-full-center-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.AudioFullCenter01=o.Base.create("AudioFullCenter01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".group-copy"),r=e.querySelector('[data-compound-type="logo"] > *'),s=e.querySelector(".responsive-wrapper"),n=e.querySelector(".layer-front .sqs-slide-layer-content"),i=e.querySelector('[data-slice-type="album"]'),u=Array.prototype.slice.call(e.querySelectorAll(".track"));u.forEach(function(g,p,f){g.insertBefore(g.querySelector(".track-title"),g.querySelector(".track-progress-bar"))}),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.49,minFontSize:13,onReset:function(g,p){p.classList.remove("text-align-center")},onMinFontSize:function(g,p){p.classList.add("text-align-center")}})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".sqs-slide-layer"),widthBoundaryNode:a,widthRatio:.9,heightRatio:.16,scale:.99,minFontSize:18}));var h=new l.FontSize({rootNode:s,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:a,minFontSize:10,widthRatio:.9,enabled:!0,onReset:function(g){g=new o.Node(g),g.removeClass("stacked"),n.clientWidth>900?(g.addClass("top-right"),g.one('[data-slice-type]:not([data-content-empty="true"])')&&g.ancestor(".sqs-slide").one('[data-compound-type="logo"]').addClass("text-align-left")):(g.removeClass("top-right"),g.one('[data-slice-type]:not([data-content-empty="true"])')&&g.ancestor(".sqs-slide").one('[data-compound-type="logo"]').removeClass("text-align-left"))},onMinFontSize:function(g){g=new o.Node(g),g.addClass("stacked"),g.removeClass("top-right"),g.ancestor(".sqs-slide").one('[data-compound-type="logo"]').removeClass("text-align-left")}});this._registerResponsiveComponent(h),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:r,targetNode:s,padding:60,onReset:function(g,p){n.clientWidth>900?(p.classList.add("top-right"),p.querySelector('[data-slice-type]:not([data-content-empty="true"])')&&g.parentNode.classList.add("text-align-left")):(p.classList.remove("top-right"),p.querySelector('[data-slice-type]:not([data-content-empty="true"])')&&g.parentNode.classList.remove("text-align-left"))},onRespond:function(g,p){p.classList.remove("top-right"),g.parentNode.classList.remove("text-align-left")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:i,padding:100,onReset:function(g,p){g.classList.add("align-center-js"),g.classList.remove("stacked"),n.classList.remove("scroll"),p.parentNode.classList.add("bottom"),o.later(10,g,function(){this.style.marginTop=-Math.floor(this.clientHeight/2)+"px",this.style.marginLeft=-Math.floor(this.clientWidth/2)+"px"})},onRespond:function(g,p){g.classList.remove("align-center-js"),g.classList.add("stacked"),n.classList.add("scroll"),p.parentNode.classList.remove("bottom")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:s,widthBoundaryNode:a,widthRatio:.8,onReset:function(g){g.classList.remove("stacked"),g.classList.add("top-right")},onRespond:function(g){g.classList.add("stacked"),g.classList.remove("top-right")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:s,padding:60,onReset:function(g,p){g.classList.add("align-center-js"),g.classList.remove("stacked"),p.classList.add("top-right"),n.classList.remove("scroll"),o.later(10,g,function(){this.style.marginTop=-Math.floor(this.clientHeight/2)+"px",this.style.marginLeft=-Math.floor(this.clientWidth/2)+"px"})},onRespond:function(g,p){g.classList.remove("align-center-js"),g.classList.add("stacked"),p.classList.remove("top-right"),n.classList.add("scroll")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:a,widthRatio:.9,onReset:function(g){g.classList.add("align-center-js"),g.classList.remove("stacked"),n.classList.remove("scroll"),i.parentNode.classList.add("bottom"),g.style.marginTop=-Math.floor(g.clientHeight/2)+"px",g.style.marginLeft=-Math.floor(g.clientWidth/2)+"px"},onRespond:function(g){g.classList.remove("align-center-js"),g.classList.add("stacked"),n.classList.add("scroll"),i.parentNode.classList.remove("bottom")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},135955:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-audio-full-left-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.AudioFullLeft01=o.Base.create("AudioFullLeft01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".sqs-slice-group.group-links");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.98,minFontSize:26})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.98,minFontSize:15}));var r=new l.FontSize({rootNode:e.querySelector(".responsive-wrapper.actions"),widthBoundaryNode:a,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,enabled:!1,onReset:function(n){n.classList.remove("stacked")},onMinFontSize:function(n){n.classList.add("stacked")}});this._registerResponsiveComponent(r);var s=new l.BoundaryRatios({rootNode:e.querySelector(".responsive-wrapper.social"),widthRatio:.9,enabled:!1,onReset:function(n){n.classList.remove("stacked")},onRespond:function(n){n.classList.add("stacked")}});this._registerResponsiveComponent(s),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:a,widthRatio:.9,onReset:function(n){n.classList.add("inline"),r.disable(),s.disable()},onRespond:function(n){n.classList.remove("inline"),r.enable(),s.enable()}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slide-layer-content > .sqs-slice-group"),onReset:function(n){n=new o.Node(n),n.removeClass("stacked"),n.ancestor(".sqs-slide-layer").removeClass("scroll")},onRespond:function(n){n=new o.Node(n),n.addClass("stacked"),n.ancestor(".sqs-slide-layer").addClass("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},104723:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-audio-full-right-01",function(o){var e=function(s){return new o.Node(s).ancestor(".sqs-slide-layer").getDOMNode()},a=function(s){e(s).classList.add("scroll")},r=function(s){e(s).classList.remove("scroll")};o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.AudioFullRight01=o.Base.create("AudioFullRight01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var s=this.get("contentBox").getDOMNode(),n=s.querySelector(".group-copy"),i=n.querySelector(".responsive-wrapper"),u=Array.prototype.slice.call(s.querySelectorAll(".track"));u.forEach(function(g,p,f){g.insertBefore(g.querySelector(".track-title"),g.querySelector(".track-progress-bar"))}),this._registerResponsiveComponent(new l.FontSize({rootNode:s.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.98,minFontSize:12})),this._registerResponsiveComponent(new l.FontSize({rootNode:s.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.98,minFontSize:15})),this._registerResponsiveComponent(new l.FontSize({rootNode:i,widthBoundaryNode:n,fontSizeNodes:[s.querySelector('[data-compound-type="action"] ul'),s.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(g){g.classList.remove("stacked")},onMinFontSize:function(g){g.classList.add("stacked")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:s.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthRatio:.9,onReset:function(g){g.classList.remove("stacked"),g.querySelector(".break")&&g.querySelector(".break").remove()},onRespond:function(g){g.classList.add("stacked");var p=g.childNodes;if(!g.querySelector(".break")){var f=new o.Node(p.item(Math.floor(p.length/2)));f.insert('<br class="break">',"before")}}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:s.querySelector(".group-logo"),targetNode:n,padding:20,onReset:function(g,p){r(p),g.classList.add("top-full-width"),p.classList.add("align-center-vert")},onRespond:function(g,p){a(p),g.classList.remove("top-full-width"),p.classList.remove("align-center-vert")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:s.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),targetNode:n,padding:50,onReset:function(g,p){g.parentNode.classList.add("bottom-full-width"),p.classList.add("align-center-vert")},onRespond:function(g,p){g.parentNode.classList.remove("bottom-full-width"),p.classList.remove("align-center-vert")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:s.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),targetNode:i,padding:50,onReset:function(g,p){g.parentNode.classList.add("bottom-full-width"),p.parentNode.classList.add("align-center-vert"),r(g),s.querySelector(".group-logo").classList.add("top-full-width")},onRespond:function(g,p){g.parentNode.classList.remove("bottom-full-width"),p.parentNode.classList.remove("align-center-vert"),a(g),s.querySelector(".group-logo").classList.remove("top-full-width")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:n,onReset:function(g){r(g),s.querySelector(".group-logo").classList.add("top-full-width")},onRespond:function(g){a(g),s.querySelector(".group-logo").classList.remove("top-full-width")}}));var h=new l.OverflowDetector({rootNode:s.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),onReset:function(g){r(g),s.querySelector(".group-logo").classList.add("top-full-width")},onRespond:function(g){a(g),s.querySelector(".group-logo").classList.remove("top-full-width")}});this._registerResponsiveComponent(h)}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},215451:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-audio-left-right-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.AudioLeftRight01=o.Base.create("AudioLeftRight01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".group-copy"),r=e.querySelector(".responsive-wrapper"),s=Array.prototype.slice.call(e.querySelectorAll(".track"));s.forEach(function(i,u,h){i.insertBefore(i.querySelector(".track-title"),i.querySelector(".track-progress-bar"))});var n=!!o.one("html.flexbox");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:a,widthRatio:.99,scale:.99,minFontSize:20})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthBoundaryNode:a,widthRatio:.99,scale:.99,minFontSize:16})),this._registerResponsiveComponent(new l.FontSize({rootNode:r,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(i){i.classList.remove("stacked")},onMinFontSize:function(i){i.classList.add("stacked")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.7,onReset:function(i){i.classList.remove("wrapped"),i.querySelector(".break")&&i.querySelector(".break").remove()},onRespond:function(i){i.classList.add("wrapped");var u=i.childNodes;if(!i.querySelector(".break")){var h=new o.Node(u.item(Math.floor(u.length/2)));h.insert('<br class="break">',"before")}}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:r,widthRatio:.9,onReset:function(i){i.classList.remove("stacked")},onRespond:function(i){i.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:e.querySelector('[data-compound-type="logo"] > *'),padding:40,onReset:function(i,u){document.querySelector("html.flexbox")||a.classList.add("align-center-vert")},onRespond:function(i,u){n||a.classList.remove("align-center-vert")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:e.querySelector(".content-gallery"),padding:parseInt(a.ownerDocument.defaultView.getComputedStyle(a.parentNode).paddingTop,10),onReset:function(i){n||(i.classList.add("align-center"),i.classList.remove("align-center-horiz"))},onRespond:function(i){a.ownerDocument.defaultView.getComputedStyle(a.parentNode).float!=="left"&&(n||(i.classList.remove("align-center"),i.classList.add("align-center-horiz")))}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:a,padding:Math.max(25,parseInt(getComputedStyle(e)["border-top-width"],10)*2),onReset:function(i){i.parentNode.classList.remove("scroll"),n||(a.classList.add("align-center"),a.classList.remove("align-center-horiz"))},onRespond:function(i){i.parentNode.classList.add("scroll"),n||(a.classList.remove("align-center"),a.classList.add("align-center-horiz"))}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},777709:function(c,b,t){"use strict";var l=t(210750),d=t.n(l),o=t(963351),e=t.n(o),a=t(807832),r=t.n(a),s=t(787592),n=t(150825),i=t(202369),u=t(7595);YUI.add("squarespace-slide-rendering-layouts-base",function(h){h.namespace("Squarespace.SlideRendering.Layouts");var g=h.Squarespace.SlideRendering.Layouts.Base=h.Base.create("LayoutBase",h.Widget,[],{initializer:function(){this._sliceWidgetMap={},this._responsiveComponents=[],this._debouncedSyncResponsiveComponents=d()(this._syncResponsiveComponents,200),this._windowResizeHandler=h.one(h.config.win).on("resize",this._debouncedSyncResponsiveComponents,this),this._watchTweaks(),h.Global.once("slideReady",function(){var p=this.get("contentBox");p.getAttribute("data-slide-type")===n.Z[e().POPUP_OVERLAY]&&setTimeout(function(){p.addClass("sqs-slide-animation-ready")},500)},this)},destructor:function(){this._debouncedSyncResponsiveComponents.cancel(),this._windowResizeHandler.detach(),h.Object.each(this._sliceWidgetMap,function(f){f.destroy(!0)}),this.get("contentBox").removeClass("sqs-slide-ready"),this._destroyResponsiveComponents()},renderUI:function(){var p=typeof squarespaceStartApp<"u",f;p||(f=new(r())(['[data-compound-type="logo"][data-slice-type="heading"] h1','[data-slice-type="heading"]:not([data-compound-type]) h1','[data-slice-type="body"]'],h.config.win.document.body)),this._checkSupportVH(),h.UA.safari>0&&!h.UA.mobile&&h.one("html").addClass("browser-safari"),g.superclass.renderUI.call(this);var m=this.get("contentBox");m.all("[data-slice-type]").each(function(C){C.getAttribute("data-content-empty")!=="true"&&this._widgetizeSliceNode(C)},this),this._initResponsiveComponents(),u.default.parse();var _=m.all('[data-slice-type="image"] img[data-image-dimensions*="x"]'),v=new h.Parallel,E=(function(){this._debouncedSyncResponsiveComponents(),this.get("contentBox").addClass("sqs-slide-ready"),h.Global.fire("slideReady")}).bind(this),S=function(){if(p)E();else{var C=f.check();h.Squarespace.Promises.all(C).then(function(){E()})}},y=setTimeout(S,2e3);_.each(function(C){C.once("load",v.add())},this),v.done(function(){clearTimeout(y),S()})},_widgetizeSliceNode:function(p){var f=p.getAttribute("data-slice-type"),m=p.getAttribute("data-compound-type"),_=i.Z[f],v=h.Squarespace.SlideRendering.Slices.Factory.create(_,{sliceId:p.getAttribute("data-slice-id")||null,slideType:this.get("slideType"),boundingBox:p,render:!0}),E=m?i.Z[m]:i.Z[f];this._sliceWidgetMap[E]=v},_syncSliceWidgets:function(){h.Object.each(this._sliceWidgetMap,function(p){p.syncUI()})},_destroyResponsiveComponents:function(){this._responsiveComponents=[]},_initResponsiveComponents:function(){},_watchTweaks:function(){var p=this.get("slideType");if(window.Static.SQUARESPACE_CONTEXT.authenticatedAccount&&p==="popup-overlay"){var f=this.get("contentBox").getDOMNode();this.tweakPreview=function(){f.querySelector(".sqs-slide-layer-content").style.transition="none",f.classList.remove("sqs-slide-animation-ready"),setTimeout((function(){this.querySelector(".sqs-slide-layer-content").style.transition="",this.classList.add("sqs-slide-animation-ready")}).bind(f),500)};var m=["button-layout-style","newsletter-layout-style"];h.Global.after("tweak:change",function(_){var v=_.config.category,E=_.getName();v==="Overlay Animation"?this.tweakPreview():v==="Overlay Design"&&this._debouncedSyncResponsiveComponents(),m.indexOf(E)>=0&&this._debouncedSyncResponsiveComponents()},this)}},_syncResponsiveComponents:function(){var p=[];if(this._responsiveComponents.forEach(function(_){try{_.reset(),_.respond()}catch(v){p.push(v)}}),p.length)if(p.every(function(m){return m.message.startsWith("Cannot read properties of null (reading 'getComputedStyle')")})){var f=new Error("Responsive components tried to access frame window after it was torn down");f.cause=p[0],s.Tb(f)}else p.forEach(function(m){s.Tb(m)});h.Global.fire("slideComponentSync")},_registerResponsiveComponent:function(p){this._responsiveComponents.push(p)},_checkSupportVH:function(){parseInt(h.UA.ios,10)===7?h.one("html").addClass("no-vh"):h.one("html").addClass("vh")},CONTENT_TEMPLATE:null},{CSS_PREFIX:"sqs-slide",ATTRS:{slideId:{valueFn:function(){return this.get("contentBox").getAttribute("data-slide-id")}},slideType:{valueFn:function(){return this.get("contentBox").getAttribute("data-slide-type")}},slideLayoutIdentifier:{valueFn:function(){return this.get("contentBox").getAttribute("data-slide-layout-id")}}}})},"1.0",{requires:["base","squarespace-attr-validators","parallel","squarespace-promises","squarespace-slide-rendering-slices-factory","widget"]})},903761:function(){YUI.add("squarespace-slide-rendering-layouts-factory",function(c){c.namespace("Squarespace.SlideRendering.Layouts");var b={"audio-full-center-01":c.Squarespace.SlideRendering.Layouts.AudioFullCenter01,"audio-full-left-01":c.Squarespace.SlideRendering.Layouts.AudioFullLeft01,"audio-full-right-01":c.Squarespace.SlideRendering.Layouts.AudioFullRight01,"audio-left-right-01":c.Squarespace.SlideRendering.Layouts.AudioLeftRight01,"landing-full-center-01":c.Squarespace.SlideRendering.Layouts.LandingFullCenter01,"landing-full-center-02":c.Squarespace.SlideRendering.Layouts.LandingFullCenter02,"landing-full-centercard-01":c.Squarespace.SlideRendering.Layouts.LandingFullCenterCard01,"landing-full-left-01":c.Squarespace.SlideRendering.Layouts.LandingFullLeft01,"landing-full-left-02":c.Squarespace.SlideRendering.Layouts.LandingFullLeft02,"landing-full-right-01":c.Squarespace.SlideRendering.Layouts.LandingFullRight01,"landing-full-topleft-01":c.Squarespace.SlideRendering.Layouts.LandingFullTopLeft01,"landing-left-right-01":c.Squarespace.SlideRendering.Layouts.LandingLeftRight01,"landing-right-left-01":c.Squarespace.SlideRendering.Layouts.LandingRightLeft01,"location-full-corners-01":c.Squarespace.SlideRendering.Layouts.LocationFullCorners01,"location-right-left-01":c.Squarespace.SlideRendering.Layouts.LocationRightLeft01,"lock-full-center-01":c.Squarespace.SlideRendering.Layouts.LockFullCenter01,"lock-full-center-02":c.Squarespace.SlideRendering.Layouts.LockFullCenter02,"lock-full-center-03":c.Squarespace.SlideRendering.Layouts.LockFullCenter03,"lock-full-center-04":c.Squarespace.SlideRendering.Layouts.LockFullCenter04,"lock-full-center-05":c.Squarespace.SlideRendering.Layouts.LockFullCenter05,"sso-full-center-01":c.Squarespace.SlideRendering.Layouts.SsoFullCenter01,"lock-full-bottomleft-01":c.Squarespace.SlideRendering.Layouts.LockFullBottomleft01,"overlay-center-card-01":c.Squarespace.SlideRendering.Layouts.OverlayCenterCard01,"overlay-center-card-02":c.Squarespace.SlideRendering.Layouts.OverlayCenterCard02,"overlay-center-card-03":c.Squarespace.SlideRendering.Layouts.OverlayCenterCard03,"overlay-center-card-04":c.Squarespace.SlideRendering.Layouts.OverlayCenterCard04,"overlay-center-card-05":c.Squarespace.SlideRendering.Layouts.OverlayCenterCard05,"overlay-corner-card-01":c.Squarespace.SlideRendering.Layouts.OverlayCornerCard01,"overlay-full-bottom-01":c.Squarespace.SlideRendering.Layouts.OverlayFullBottom01,"overlay-full-center-01":c.Squarespace.SlideRendering.Layouts.OverlayFullCenter01,"overlay-full-center-02":c.Squarespace.SlideRendering.Layouts.OverlayFullCenter02,"profile-center-center-01":c.Squarespace.SlideRendering.Layouts.ProfileCenterCenter01,"profile-center-center-02":c.Squarespace.SlideRendering.Layouts.ProfileCenterCenter02,"profile-full-bottom-01":c.Squarespace.SlideRendering.Layouts.ProfileFullBottom01,"profile-full-center-01":c.Squarespace.SlideRendering.Layouts.ProfileFullCenter01,"profile-full-left-01":c.Squarespace.SlideRendering.Layouts.ProfileFullLeft01,"profile-full-middleband-01":c.Squarespace.SlideRendering.Layouts.ProfileFullMiddleband01,"profile-full-right-01":c.Squarespace.SlideRendering.Layouts.ProfileFullRight01,"profile-full-top-01":c.Squarespace.SlideRendering.Layouts.ProfileFullTop01,"profile-left-left-01":c.Squarespace.SlideRendering.Layouts.ProfileLeftLeft01,"profile-left-right-01":c.Squarespace.SlideRendering.Layouts.ProfileLeftRight01,"twitter-full-center-01":c.Squarespace.SlideRendering.Layouts.TwitterFullCenter01,"twitter-full-left-01":c.Squarespace.SlideRendering.Layouts.TwitterFullLeft01,"video-full-bottom-01":c.Squarespace.SlideRendering.Layouts.VideoFullBottom01,"video-full-center-01":c.Squarespace.SlideRendering.Layouts.VideoFullCenter01,"video-full-corners-01":c.Squarespace.SlideRendering.Layouts.VideoFullCorners01};c.Squarespace.SlideRendering.Layouts.Factory={create:function(t,l){var d=b[t]||c.Squarespace.SlideRendering.Layouts.Base;return new d(l)}}},"1.0",{requires:["squarespace-slide-rendering-layouts-audio-full-center-01","squarespace-slide-rendering-layouts-audio-full-left-01","squarespace-slide-rendering-layouts-audio-full-right-01","squarespace-slide-rendering-layouts-audio-left-right-01","squarespace-slide-rendering-layouts-base","squarespace-slide-rendering-layouts-landing-full-center-01","squarespace-slide-rendering-layouts-landing-full-center-02","squarespace-slide-rendering-layouts-landing-full-centercard-01","squarespace-slide-rendering-layouts-landing-full-left-01","squarespace-slide-rendering-layouts-landing-full-left-02","squarespace-slide-rendering-layouts-landing-full-right-01","squarespace-slide-rendering-layouts-landing-full-topleft-01","squarespace-slide-rendering-layouts-landing-left-right-01","squarespace-slide-rendering-layouts-landing-right-left-01","squarespace-slide-rendering-layouts-location-full-corners-01","squarespace-slide-rendering-layouts-location-right-left-01","squarespace-slide-rendering-layouts-lock-full-bottomleft-01","squarespace-slide-rendering-layouts-lock-full-center-01","squarespace-slide-rendering-layouts-lock-full-center-02","squarespace-slide-rendering-layouts-lock-full-center-03","squarespace-slide-rendering-layouts-lock-full-center-04","squarespace-slide-rendering-layouts-lock-full-center-05","squarespace-slide-rendering-layouts-sso-full-center-01","squarespace-slide-rendering-layouts-overlay-center-card-01","squarespace-slide-rendering-layouts-overlay-center-card-02","squarespace-slide-rendering-layouts-overlay-center-card-03","squarespace-slide-rendering-layouts-overlay-center-card-04","squarespace-slide-rendering-layouts-overlay-center-card-05","squarespace-slide-rendering-layouts-overlay-corner-card-01","squarespace-slide-rendering-layouts-overlay-full-bottom-01","squarespace-slide-rendering-layouts-overlay-full-center-01","squarespace-slide-rendering-layouts-overlay-full-center-02","squarespace-slide-rendering-layouts-profile-center-center-01","squarespace-slide-rendering-layouts-profile-center-center-02","squarespace-slide-rendering-layouts-profile-full-bottom-01","squarespace-slide-rendering-layouts-profile-full-center-01","squarespace-slide-rendering-layouts-profile-full-left-01","squarespace-slide-rendering-layouts-profile-full-middleband-01","squarespace-slide-rendering-layouts-profile-full-right-01","squarespace-slide-rendering-layouts-profile-full-top-01","squarespace-slide-rendering-layouts-profile-left-left-01","squarespace-slide-rendering-layouts-profile-left-right-01","squarespace-slide-rendering-layouts-twitter-full-center-01","squarespace-slide-rendering-layouts-twitter-full-left-01","squarespace-slide-rendering-layouts-video-full-bottom-01","squarespace-slide-rendering-layouts-video-full-center-01","squarespace-slide-rendering-layouts-video-full-corners-01"]})},461782:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-landing-full-center-01",function(o){var e=function(a){return o.instanceOf(a,o.Node)?a.getDOMNode():null};o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LandingFullCenter01=o.Base.create("LandingFullCenter01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var a=this.get("contentBox");this._registerResponsiveComponent(new l.FontSize({rootNode:e(a.one('[data-compound-type="logo"][data-slice-type="heading"] h1')),widthRatio:.5,minFontSize:13}));var r;this._registerResponsiveComponent(new l.FontSize({rootNode:e(a.one('[data-slice-type="heading"]:not([data-compound-type]) h1')),widthRatio:.99,scale:.99,minFontSize:54,onReset:function(s){r.disable()},onRespond:function(s){},onMinFontSize:function(s){r.enable()}})),r=new l.FontSize({rootNode:e(a.one('[data-slice-type="heading"]:not([data-compound-type]) h1')),widthRatio:1,heightRatio:.2,scale:.99,minFontSize:18,enabled:!1,heightBoundaryNode:e(a.one(".sqs-slide-layer")),onReset:function(s){},onRespond:function(s){},onMinFontSize:function(s){}}),this._registerResponsiveComponent(r),this._registerResponsiveComponent(new l.FontSize({rootNode:e(a.one(".responsive-wrapper.actions")),fontSizeNodes:[e(a.one('[data-compound-type="action"] ul')),e(a.one('[data-slice-type="custom-form"]'))],minFontSize:10,widthRatio:.8,onReset:function(s){s=new o.Node(s),s.removeClass("stacked")},onMinFontSize:function(s){s=new o.Node(s),s.addClass("stacked")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:e(a.one(".responsive-wrapper.social")),widthRatio:.9,onReset:function(s){s=new o.Node(s),s.removeClass("stacked")},onRespond:function(s){s=new o.Node(s),s.addClass("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e(a.one(".group-copy")),targetNode:e(a.one(".group-social")),padding:20,onReset:function(s,n){s=new o.Node(s),n=new o.Node(n),s.addClass("align-center-vert"),s.addClass("full-width"),s.removeClass("stacked"),a.one(".sqs-slide-layer.layer-front").removeClass("scroll"),n.addClass("bottom-full-width")},onRespond:function(s,n){s=new o.Node(s),n=new o.Node(n),s.removeClass("align-center-vert"),s.addClass("full-width"),s.addClass("stacked"),a.one(".sqs-slide-layer.layer-front").addClass("scroll"),n.removeClass("bottom-full-width")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e(a.one(".group-copy")),targetNode:e(a.one('[data-compound-type="logo"]:not([data-content-empty="true"])')),padding:20,onReset:function(s,n){s=new o.Node(s),n=new o.Node(n),s.addClass("align-center-vert"),s.addClass("full-width"),s.removeClass("stacked"),a.one(".sqs-slide-layer.layer-front").removeClass("scroll"),n.addClass("align-center-horiz"),a.one(".group-social").addClass("bottom-full-width")},onRespond:function(s,n){s=new o.Node(s),n=new o.Node(n),s.removeClass("align-center-vert"),s.removeClass("full-width"),s.addClass("stacked"),a.one(".sqs-slide-layer.layer-front").addClass("scroll"),n.removeClass("align-center-horiz"),a.one(".group-social").removeClass("bottom-full-width")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},421367:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-landing-full-center-02",function(o){var e=function(a){return new o.Node(a).get("region")};o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LandingFullCenter02=o.Base.create("LandingFullCenter02",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var a=this.get("contentBox").getDOMNode(),r=a.querySelector(".layer-front .sqs-slide-layer-content"),s=a.querySelector(".group-copy"),n=s.querySelector('[data-slice-type="body"]'),i=a.querySelector(".responsive-wrapper"),u=a.querySelector('[data-compound-type="logo"]'),h=a.querySelector(".group-links");this._registerResponsiveComponent(new l.FontSize({rootNode:a.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,minFontSize:13})),this._registerResponsiveComponent(new l.FontSize({rootNode:a.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,heightRatio:.25,scale:.99,minFontSize:18,heightBoundaryNode:r})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:a.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:r,widthRatio:.8,onReset:function(g){i.classList.remove("stacked"),g.querySelector(".break")&&g.querySelector(".break").remove()},onRespond:function(g){i.classList.add("stacked");var p=g.childNodes;if(!g.querySelector(".break")){var f=new o.Node(p.item(Math.floor(p.length/2)));f.insert('<br class="break">',"before")}}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:h,widthBoundaryNode:r,widthRatio:.8,onReset:function(g){i.classList.remove("stacked")},onRespond:function(g){i.classList.add("stacked")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:a.querySelector('[data-slice-type="navigation"]'),widthBoundaryNode:r,widthRatio:.8,onReset:function(g){i.classList.remove("stacked")},onRespond:function(g){i.classList.add("stacked")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:h,widthBoundaryNode:r,widthRatio:.8,onReset:function(g){i.classList.remove("stacked"),h.classList.add("top-right"),u.classList.remove("aligned"),h.classList.remove("bottom-full-width")},onRespond:function(g){i.classList.add("stacked"),h.classList.remove("top-right"),u.classList.add("aligned"),h.classList.add("bottom-full-width")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a.querySelector('[data-compound-type="logo"] > *'),targetNode:h,padding:60,onReset:function(g,p){p.classList.add("top-right"),p.querySelector('.sqs-slice:not([data-content-empty="true"])')?u.classList.remove("aligned"):u.classList.add("aligned"),p.classList.remove("bottom-full-width");var f=g.parentNode;f.style.marginTop=null,f.style.marginBottom=null,p.style.marginTop=null,p.style.marginBottom=null;var m=Math.floor((e(f).height-e(p).height)/2),_=m>0?p:f;_.style.marginTop=Math.abs(m)+"px",_.style.marginBottom=Math.abs(m)+"px"},onRespond:function(g,p){p.classList.remove("top-right"),u.classList.add("aligned"),p.classList.add("bottom-full-width");var f=g.parentNode;f.style.marginTop=null,f.style.marginBottom=null,p.style.marginTop=null,p.style.marginBottom=null}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:s,targetNode:h,padding:60,onReset:function(g,p){g.classList.remove("stacked"),g.classList.add("align-center-vert"),g.classList.add("restrict-width-1000"),p.classList.add("top-right"),u.classList.remove("aligned"),p.classList.remove("bottom-full-width"),p.parentNode.classList.remove("scroll")},onRespond:function(g,p){g.classList.add("stacked"),g.classList.remove("align-center-vert"),g.classList.remove("restrict-width-1000"),p.classList.remove("top-right"),u.classList.add("aligned"),p.classList.add("bottom-full-width"),p.parentNode.classList.add("scroll")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:s,onReset:function(g){g.classList.add("align-center-vert"),g.parentNode.classList.remove("scroll")},onRespond:function(g){g.classList.remove("align-center-vert"),g.parentNode.classList.add("scroll")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:n,onReset:function(g){s.classList.add("align-center-vert"),s.parentNode.classList.remove("scroll")},onRespond:function(g){s.classList.remove("align-center-vert"),s.parentNode.classList.add("scroll")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:h,padding:10,onReset:function(g){s.classList.add("align-center-vert"),g.parentNode.classList.remove("scroll")},onRespond:function(g){s.classList.remove("align-center-vert"),g.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},700797:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-landing-full-centercard-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LandingFullCenterCard01=o.Base.create("LandingFullCenterCard01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,minFontSize:13,onReset:function(r,s){},onMinFontSize:function(r,s){}})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector(".responsive-wrapper.actions"),fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.6,onReset:function(r){r.classList.remove("stacked")},onMinFontSize:function(r){r.classList.add("stacked")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:e.querySelector(".group-social"),widthRatio:.95,onReset:function(r){r.classList.remove("wrapped"),r.parentNode.classList.remove("stacked"),r.querySelector(".break")&&r.querySelector(".break").remove()},onRespond:function(r){r.classList.add("wrapped"),r.parentNode.classList.add("stacked");var s=r.childNodes;if(!r.querySelector(".break")){var n=new o.Node(s.item(Math.floor(s.length/2)));n.insert('<br class="break">',"before")}}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:e.querySelector(".responsive-wrapper.social"),widthRatio:.9,onReset:function(r){r.classList.remove("stacked")},onRespond:function(r){r.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector(".group-copy"),targetNode:e.querySelector(".group-social"),padding:20,onReset:function(r,s){r.classList.add("align-center-vert"),r.classList.remove("stacked"),a.parentNode.classList.remove("scroll"),s.classList.add("bottom-full-width")},onRespond:function(r,s){r.classList.remove("align-center-vert"),r.classList.add("stacked"),a.parentNode.classList.add("scroll"),s.classList.remove("bottom-full-width")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},606014:function(){YUI.add("squarespace-slide-rendering-layouts-landing-full-left-01",function(c){c.namespace("Squarespace.SlideRendering.Layouts"),c.Squarespace.SlideRendering.Layouts.LandingFullLeft01=c.Base.create("LandingFullLeft01",c.Squarespace.SlideRendering.Layouts.LandingFullCenter01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-landing-full-center-01"]})},385121:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-landing-full-left-02",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LandingFullLeft02=o.Base.create("LandingFullLeft02",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content"),r=e.querySelector(".group-copy"),s=e.querySelector(".responsive-wrapper");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:1,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:14,heightBoundaryNode:e.querySelector(".group-copy")})),this._registerResponsiveComponent(new l.FontSize({rootNode:s,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:a,minFontSize:12})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.8,onReset:function(n){n.classList.remove("wrapped"),n.querySelector(".break")&&n.querySelector(".break").remove()},onRespond:function(n){n.classList.add("wrapped");var i=n.childNodes;if(!n.querySelector(".break")){var u=new o.Node(i.item(Math.floor(i.length/2)));u.insert('<br class="break">',"before")}}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:s,widthRatio:.99,onReset:function(n){n.classList.remove("stacked")},onRespond:function(n){n.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:r,targetNode:s,padding:40,onReset:function(n,i){n.classList.add("align-center-vert"),n.classList.remove("stacked"),a.parentNode.classList.remove("scroll"),i.parentNode.classList.add("bottom-full-width")},onRespond:function(n,i){n.classList.remove("align-center-vert"),n.classList.add("stacked"),a.parentNode.classList.add("scroll"),i.parentNode.classList.remove("bottom-full-width")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},39877:function(){YUI.add("squarespace-slide-rendering-layouts-landing-full-right-01",function(c){c.namespace("Squarespace.SlideRendering.Layouts"),c.Squarespace.SlideRendering.Layouts.LandingFullRight01=c.Base.create("LandingFullRight01",c.Squarespace.SlideRendering.Layouts.LandingFullCenter01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-landing-full-center-01"]})},885886:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-landing-full-topleft-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LandingFullTopLeft01=o.Base.create("LandingFullTopLeft01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front"),r=e.querySelector(".layer-front .sqs-slide-layer-content"),s=e.querySelector(".group-copy"),n=e.querySelector(".group-logo"),i=n.querySelector('[data-compound-type="logo"] > *'),u=e.querySelector('[data-slice-type="custom-form"]');this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.5,minFontSize:15})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="action"] ul'),widthBoundaryNode:s,minFontSize:11,widthRatio:.8,onReset:function(g){g.classList.remove("stacked"),u&&(u.style.fontSize=null)},onRespond:function(g){u&&(u.style.fontSize=g.ownerDocument.defaultView.getComputedStyle(g).fontSize)},onMinFontSize:function(g){g.classList.add("stacked"),u&&u.classList.add("stacked")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:e.querySelector(".sqs-slice-group.link-group-inline"),widthBoundaryNode:r,widthRatio:.99,onReset:function(g,p){g.classList.remove("stacked")},onRespond:function(g,p){g.classList.add("stacked")}}));var h=new l.BoundaryRatios({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:r,widthRatio:.99,onReset:function(g,p){g.classList.remove("stacked"),g.querySelector(".break")&&g.querySelector(".break").remove()},onRespond:function(g,p){g.classList.add("stacked");var f=g.childNodes;if(!g.querySelector(".break")){var m=new o.Node(f.item(Math.floor(f.length/2)));m.insert('<br class="break">',"before")}}});this._registerResponsiveComponent(h),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:i,targetNode:s,onReset:function(g,p){g=new o.Node(g),p=new o.Node(p),a.classList.remove("scroll"),n.classList.add("bottom-full-width"),n.classList.remove("stacked")},onRespond:function(g,p){g=new o.Node(g),p=new o.Node(p),a.classList.add("scroll"),n.classList.remove("bottom-full-width"),n.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:s,padding:20,onReset:function(g){a.classList.remove("scroll"),n.classList.add("bottom-full-width"),n.classList.remove("stacked")},onRespond:function(g){a.classList.add("scroll"),n.classList.remove("bottom-full-width"),n.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:i,padding:0,onReset:function(g){a.classList.remove("scroll"),n.classList.add("bottom-full-width"),n.classList.remove("stacked")},onRespond:function(g){a.classList.add("scroll"),n.classList.remove("bottom-full-width"),n.classList.add("stacked")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},83722:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-landing-left-right-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LandingLeftRight01=o.Base.create("LandingLeftRight01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".group-copy"),r=e.querySelector(".responsive-wrapper.actions"),s=e.querySelector(".responsive-wrapper.social");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:a,widthRatio:1,scale:.99,minFontSize:16})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthBoundaryNode:a,widthRatio:1,heightRatio:.2,scale:.99,minFontSize:20,heightBoundaryNode:e.querySelector(".sqs-slide-layer")})),this._registerResponsiveComponent(new l.FontSize({rootNode:r,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(n){n.classList.remove("stacked")},onMinFontSize:function(n){n.classList.add("stacked")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:s,widthRatio:.9,onReset:function(n){n.classList.remove("stacked")},onRespond:function(n){n.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:e.querySelector('[data-compound-type="logo"] > *'),padding:60,onReset:function(n,i){a.classList.add("align-center-vert")},onRespond:function(n,i){a.classList.remove("align-center-vert")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector('[data-compound-type="logo"]'),targetNode:s,padding:40,onReset:function(n,i){n.parentNode.classList.remove("scroll"),i.parentNode.classList.add("bottom-full-width"),n.classList.remove("stacked")},onRespond:function(n,i){n.classList.add("stacked"),n.parentNode.classList.add("scroll"),i.parentNode.classList.remove("bottom-full-width")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:s,padding:50,onReset:function(n,i){n.parentNode.classList.remove("scroll"),i.parentNode.classList.add("bottom-full-width"),n.classList.remove("stacked")},onRespond:function(n,i){n.classList.add("stacked"),n.parentNode.classList.add("scroll"),i.parentNode.classList.remove("bottom-full-width")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},711240:function(){YUI.add("squarespace-slide-rendering-layouts-landing-right-left-01",function(c){c.namespace("Squarespace.SlideRendering.Layouts"),c.Squarespace.SlideRendering.Layouts.LandingRightLeft01=c.Base.create("LandingRightLeft01",c.Squarespace.SlideRendering.Layouts.LandingLeftRight01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-landing-left-right-01"]})},557672:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-location-full-corners-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LocationFullCorners01=o.Base.create("LocationFullCorners01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".responsive-wrapper.actions");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),minFontSize:10,widthRatio:.99,onReset:function(n){n.classList.remove("stacked")},onMinFontSize:function(n){n.classList.add("stacked")}})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,minFontSize:20,scale:.99}));var r=new l.FontSize({rootNode:a,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.8,enabled:!1,onReset:function(n){n.classList.remove("stacked")},onMinFontSize:function(n){n.classList.add("stacked")}});this._registerResponsiveComponent(r);var s=new l.BoundaryRatios({rootNode:e.querySelector(".responsive-wrapper.social"),widthRatio:.9,enabled:!1,onReset:function(n){n.classList.remove("stacked"),n.classList.remove("text-align-left")},onRespond:function(n){n.classList.add("stacked"),n.classList.add("text-align-left")}});this._registerResponsiveComponent(s),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector(".group-copy"),targetNode:e.querySelector(".sqs-slice-group.group-links"),padding:60,onReset:function(n,i){n.classList.remove("stacked"),i.classList.add("top-right"),i.classList.remove("restrict-width-500"),r.disable(),s.disable()},onRespond:function(n,i){n.classList.add("stacked"),i.classList.remove("top-right"),i.classList.add("restrict-width-500"),r.enable(),s.enable()}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slide-layer.layer-front .sqs-slide-layer-content"),widthRatio:.95,padding:0,onReset:function(n){e.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll")},onRespond:function(n){e.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},874038:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-location-right-left-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LocationRightLeft01=o.Base.create("LocationRightLeft01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".group-copy");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:a,widthRatio:1,heightRatio:.25,scale:.99,minFontSize:30,heightBoundaryNode:e.querySelector(".sqs-slide-layer")})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthBoundaryNode:a,widthRatio:.9,scale:.99,minFontSize:20})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector(".responsive-wrapper"),fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(r){r.classList.remove("stacked")},onMinFontSize:function(r){r.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:e.querySelector(".sqs-slice-group.group-links"),padding:40,onReset:function(r,s){r.parentNode.classList.remove("scroll"),s.classList.add("bottom-full-width"),a.classList.add("align-center-vert")},onRespond:function(r,s){r.parentNode.classList.add("scroll"),s.classList.remove("bottom-full-width"),a.classList.remove("align-center-vert")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slide-layer-content.content-copy"),widthRatio:1,onReset:function(r){r.parentNode.parentNode.classList.remove("scroll")},onRespond:function(r){r.parentNode.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},726648:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-lock-full-bottomleft-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LockFullBottomleft01=o.Base.create("LockFullBottomleft01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".sqs-slice-group.group-content"),r=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector('[data-slice-type="lock"]'),targetNode:e.querySelector(".sqs-slice-group.group-copy-password"),onReset:function(){a.classList.remove("stack")},onRespond:function(){a.classList.add("stack")},padding:200})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:a,onReset:function(s){s.classList.add("bottom-full-width"),r.classList.remove("scroll")},onRespond:function(s){s.classList.remove("bottom-full-width"),r.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},169652:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-lock-full-center-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LockFullCenter01=o.Base.create("LockFullCenter01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,scale:.99,minFontSize:14,heightBoundaryNode:e.querySelector(".sqs-slide-layer"),heightRatio:.16})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightRatio:.16,heightBoundaryNode:e.querySelector(".sqs-slide-layer"),widthRatio:.99,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(r){r.classList.add("align-center"),r.classList.add("align-center-absolute"),a.classList.remove("scroll")},onRespond:function(r){r.classList.remove("align-center"),r.classList.remove("align-center-absolute"),a.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},652314:function(){YUI.add("squarespace-slide-rendering-layouts-lock-full-center-02",function(c){c.namespace("Squarespace.SlideRendering.Layouts"),c.Squarespace.SlideRendering.Layouts.LockFullCenter02=c.Base.create("LockFullCenter02",c.Squarespace.SlideRendering.Layouts.LockFullCenter01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-lock-full-center-01"]})},244689:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-lock-full-center-03",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LockFullCenter03=o.Base.create("LockFullCenter03",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.98,minFontSize:14})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.98,minFontSize:18})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector(".sqs-slice-group.group-copy"),targetNode:e.querySelector(".sqs-slice-group.group-password"),padding:50,onReset:function(a,r){r.classList.add("align-center"),r.classList.remove("stacked"),r.style.top="50%",r.style.left="50%"},onRespond:function(a,r){r.classList.remove("align-center"),r.classList.add("stacked");var s=a.getBoundingClientRect();r.style.top=s.bottom+"px",r.style.left=s.left+"px"}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},545936:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-lock-full-center-04",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LockFullCenter04=o.Base.create("LockFullCenter04",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightRatio:.16,heightBoundaryNode:e.querySelector(".sqs-slide-layer"),widthRaito:.99,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector(".sqs-slice-group.group-content"),targetNode:e.querySelector(".sqs-slice-group.group-top"),onReset:function(r){r.classList.add("align-center"),r.classList.add("align-center-absolute"),a.classList.remove("scroll")},onRespond:function(r){r.classList.remove("align-center"),r.classList.remove("align-center-absolute"),a.classList.add("scroll")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector('[data-slice-type="lock"]:not([data-content-empty])'),targetNode:e.querySelector('[data-compound-type="logo"]'),onReset:function(r,s){s.parentNode.classList.remove("stacked")},onRespond:function(r,s){s.parentNode.classList.add("stacked")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},255514:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-lock-full-center-05",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.LockFullCenter05=o.Base.create("LockFullCenter05",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".sqs-slice-group.group-content"),r=e.querySelector(".layer-front .sqs-slide-layer-content"),s=e.querySelector(".sqs-slide-layer");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,scale:.99,minFontSize:14,heightBoundaryNode:s,heightRatio:.16})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightRatio:.16,heightBoundaryNode:s,widthRatio:.99,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:a,onReset:function(n){n.classList.add("align-center"),n.classList.add("align-center-absolute"),r.classList.remove("scroll")},onRespond:function(n){n.classList.remove("align-center"),n.classList.remove("align-center-absolute"),r.classList.add("scroll")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:e.querySelector(".sqs-slice-group.group-password"),padding:0,onReset:function(n,i){n.classList.add("align-center"),n.classList.add("align-center-absolute"),n.classList.remove("stacked"),r.classList.remove("scroll"),i.classList.add("bottom"),i.classList.add("align-center-horiz")},onRespond:function(n,i){n.classList.remove("align-center"),n.classList.remove("align-center-absolute"),n.classList.add("stacked"),r.classList.add("scroll"),i.classList.remove("bottom"),i.classList.remove("align-center-horiz")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},899318:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.OverlayCenterCard01=o.Base.create("OverlayCenterCard01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content"),r=e.querySelector(".actions");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:r.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:r,widthRatio:.67,onReset:function(s){r.classList.remove("stacked")},onRespond:function(s){r.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slice-group.group-copy"),onReset:function(s){a.classList.remove("scroll")},onRespond:function(s){a.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},93836:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-02",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.OverlayCenterCard02=o.Base.create("OverlayCenterCard02",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content"),r=e.querySelector(".actions");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:r.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:r,widthRatio:.67,onReset:function(s){r.classList.remove("stacked")},onRespond:function(s){r.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(s){s.classList.add("align-center"),s.classList.add("align-center-absolute"),a.classList.remove("scroll")},onRespond:function(s){s.classList.remove("align-center"),s.classList.remove("align-center-absolute"),a.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},563923:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-03",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.OverlayCenterCard03=o.Base.create("OverlayCenterCard03",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content"),r=e.querySelector(".actions");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:r.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:r,widthRatio:.67,onReset:function(s){r.classList.remove("stacked")},onRespond:function(s){r.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(s){s.classList.add("align-center"),s.classList.add("align-center-absolute"),a.classList.remove("scroll")},onRespond:function(s){s.classList.remove("align-center"),s.classList.remove("align-center-absolute"),a.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},715202:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-04",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.OverlayCenterCard04=o.Base.create("OverlayCenterCard04",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content"),r=e.querySelector(".actions");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:r.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:r,widthRatio:.67,onReset:function(s){r.classList.remove("stacked")},onRespond:function(s){r.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(s){s.classList.add("align-center"),s.classList.add("align-center-absolute"),a.classList.remove("scroll")},onRespond:function(s){s.classList.remove("align-center"),s.classList.remove("align-center-absolute"),a.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},570923:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-overlay-center-card-05",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.OverlayCenterCard05=o.Base.create("OverlayCenterCard05",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content"),r=e.querySelector(".actions");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.16,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:r.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:r,widthRatio:.67,onReset:function(s){r.classList.remove("stacked")},onRespond:function(s){r.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(s){s.classList.add("align-center"),s.classList.add("align-center-absolute"),a.classList.remove("scroll")},onRespond:function(s){s.classList.remove("align-center"),s.classList.remove("align-center-absolute"),a.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},998035:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-overlay-corner-card-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.OverlayCornerCard01=o.Base.create("OverlayCornerCard01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content"),r=e.querySelector(".actions");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:r.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:r,widthRatio:.67,onReset:function(s){r.classList.remove("stacked")},onRespond:function(s){r.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(s){s.classList.add("align-center"),s.classList.add("align-center-absolute"),a.classList.remove("scroll")},onRespond:function(s){s.classList.remove("align-center"),s.classList.remove("align-center-absolute"),a.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},865453:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-overlay-full-bottom-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.OverlayFullBottom01=o.Base.create("OverlayFullBottom01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".actions");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:a.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:a,widthRatio:.67,onReset:function(r){a.classList.remove("stacked")},onRespond:function(r){a.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slide-layer.layer-front .sqs-slide-layer-content .group-content"),padding:0,onReset:function(r){e.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll")},onRespond:function(r){e.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},932858:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-overlay-full-center-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.OverlayFullCenter01=o.Base.create("OverlayFullCenter01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content"),r=e.querySelector(".actions");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:r.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:r,widthRatio:.67,onReset:function(s){r.classList.remove("stacked")},onRespond:function(s){r.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(s){s.classList.add("align-center"),s.classList.add("align-center-absolute"),a.classList.remove("scroll")},onRespond:function(s){s.classList.remove("align-center"),s.classList.remove("align-center-absolute"),a.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},521455:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-overlay-full-center-02",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.OverlayFullCenter02=o.Base.create("OverlayFullCenter02",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content"),r=e.querySelector(".actions");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightBoundaryNode:e.querySelector(".layer-front"),widthRatio:1,heightRatio:.15,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:r.querySelector('.sqs-slice[data-slice-type="newsletter"] button[type="submit"]'),widthBoundaryNode:r,widthRatio:.67,onReset:function(s){r.classList.remove("stacked")},onRespond:function(s){r.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(s){s.classList.add("align-center"),s.classList.add("align-center-absolute"),a.classList.remove("scroll")},onRespond:function(s){s.classList.remove("align-center"),s.classList.remove("align-center-absolute"),a.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},324011:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-profile-center-center-01",function(o){var e=function(a){return o.instanceOf(a,o.Node)?a.getDOMNode():null};o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.ProfileCenterCenter01=o.Base.create("ProfileCenterCenter01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var a=this.get("contentBox"),r=a.one(".sqs-slice-group.group-links");this._registerResponsiveComponent(new l.FontSize({rootNode:e(a.one('[data-compound-type="logo"][data-slice-type="heading"] h1')),minFontSize:26,widthRatio:.9})),this._registerResponsiveComponent(new l.FontSize({rootNode:e(a.one('[data-slice-type="heading"]:not([data-compound-type]) h1')),minFontSize:18,widthRatio:.9,widthBoundaryNode:e(a.one(".group-copy"))}));var s=new l.FontSize({rootNode:e(a.one(".responsive-wrapper")),fontSizeNodes:[e(a.one('[data-compound-type="action"] ul')),e(a.one('[data-slice-type="custom-form"]:not([data-content-empty])'))],widthBoundaryNode:r,widthRatio:.9,minFontSize:10,enabled:!0,onReset:function(i){i.classList.remove("stacked")},onMinFontSize:function(i){i.classList.add("stacked")}});this._registerResponsiveComponent(s);var n=new l.BoundaryRatios({rootNode:e(a.one('[data-slice-type="social-icons"]')),widthRatio:.9,enabled:!1,onReset:function(i){i.classList.remove("stacked")},onRespond:function(i){i.classList.add("stacked")}});this._registerResponsiveComponent(n),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:e(a.one(".responsive-wrapper")),widthRatio:.9,onReset:function(i){i.classList.remove("stacked"),i.querySelector(".group-actions").style.whiteSpace="nowrap",n.disable()},onRespond:function(i){i.classList.add("stacked"),i.querySelector(".group-actions").style.whiteSpace="normal",n.enable()}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e(a.one(".sqs-slice-group.group-content")),onReset:function(i){i.classList.add("align-center-vert"),a.one(".sqs-slide-layer").removeClass("scroll")},onRespond:function(i){i.classList.remove("align-center-vert"),a.one(".sqs-slide-layer").addClass("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},92201:function(){YUI.add("squarespace-slide-rendering-layouts-profile-center-center-02",function(c){c.namespace("Squarespace.SlideRendering.Layouts"),c.Squarespace.SlideRendering.Layouts.ProfileCenterCenter02=c.Base.create("ProfileCenterCenter02",c.Squarespace.SlideRendering.Layouts.ProfileCenterCenter01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-profile-center-center-01"]})},218933:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-profile-full-bottom-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.ProfileFullBottom01=o.Base.create("ProfileFullBottom01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".group-copy"),r=e.querySelector(".group-content"),s=e.querySelector(".group-links"),n=e.querySelector(".responsive-wrapper.social");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:r,minFontSize:20,widthRatio:.99,onReset:function(h){h.style.whiteSpace="nowrap"},onMinFontSize:function(h){h.style.whiteSpace="normal"}})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),minFontSize:15,widthBoundaryNode:r,widthRatio:.99,onReset:function(h){h.style.whiteSpace="nowrap"},onMinFontSize:function(h){h.style.whiteSpace="normal"}}));var i=new l.FontSize({rootNode:n,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:e.querySelector(".group-links"),minFontSize:12,widthRatio:.99,enabled:!1,onReset:function(h){h.classList.remove("stacked"),h.classList.remove("text-align-left")},onMinFontSize:function(h){h.classList.add("stacked"),h.classList.add("text-align-left")}});this._registerResponsiveComponent(i),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector('[data-slice-type="body"]'),targetNode:s,padding:120,onReset:function(){a.classList.remove("stacked")},onRespond:function(){a.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:s,padding:120,onReset:function(h,g){var p=h.parentNode;p.classList.remove("stacked"),p.classList.remove("left-right-floats-off"),n.classList.remove("wrapped"),i.disable()},onRespond:function(h,g){var p=h.parentNode;p.classList.add("stacked"),p.classList.add("left-right-floats-off"),n.classList.remove("wrapped"),i.enable()}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:n,widthBoundaryNode:r,widthRatio:.99,onReset:function(h){h.classList.remove("stacked"),u.disable()},onRespond:function(h){h.classList.add("stacked"),u.enable()}}));var u=new l.BoundaryRatios({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:r,widthRatio:.7,enabled:!1,onReset:function(h){h.classList.remove("wrapped"),h.querySelector(".break")&&h.querySelector(".break").remove()},onRespond:function(h){h=new o.Node(h),h.addClass("wrapped");var g=h.get("childNodes");h.one(".break")||g.item(Math.floor(g.size()/2)).insert('<br class="break">',"before")}});this._registerResponsiveComponent(u),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slide-layer.layer-front .sqs-slide-layer-content .group-content"),onReset:function(h){e.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll")},onRespond:function(h){e.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},717650:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-profile-full-center-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.ProfileFullCenter01=o.Base.create("ProfileFullCenter01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.5,minFontSize:13})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,scale:.99,minFontSize:54,onReset:function(s){r.disable()},onRespond:function(s){},onMinFontSize:function(s){r.enable()}}));var r=new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,heightRatio:.2,scale:.99,minFontSize:18,enabled:!1,heightBoundaryNode:e.querySelector(".sqs-slide-layer"),onReset:function(s){},onRespond:function(s){},onMinFontSize:function(s){}});this._registerResponsiveComponent(r),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector(".responsive-wrapper.actions"),fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.8,onReset:function(s){s.classList.remove("stacked")},onMinFontSize:function(s){s.classList.add("stacked")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:e.querySelector(".responsive-wrapper.social"),widthRatio:.9,onReset:function(s){s.classList.remove("stacked")},onRespond:function(s){s.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector(".group-copy"),targetNode:e.querySelector(".group-social"),padding:20,onReset:function(s,n){s.classList.add("align-center-vert"),s.classList.add("full-width"),s.classList.remove("stacked"),e.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll"),n.classList.add("bottom-full-width")},onRespond:function(s,n){s.classList.remove("align-center-vert"),s.classList.add("full-width"),s.classList.add("stacked"),e.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll"),n.classList.remove("bottom-full-width")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".group-copy"),onReset:function(s){s.classList.add("align-center-vert"),a.parentNode.classList.remove("scroll")},onRespond:function(s){s.classList.remove("align-center-vert"),a.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},252731:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-profile-full-left-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.ProfileFullLeft01=o.Base.create("ProfileFullLeft01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content"),r=e.querySelector(".group-copy"),s=e.querySelector(".group-links");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,minFontSize:26})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="action"] ul'),widthBoundaryNode:r,minFontSize:10,widthRatio:.99,onReset:function(n){n.classList.remove("stacked")},onMinFontSize:function(n){n.classList.add("stacked")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:r,widthRatio:.66,onReset:function(n,i){n.classList.remove("wrap"),n.parentNode.classList.remove("stacked"),n.querySelector(".break")&&n.querySelector(".break").remove()},onRespond:function(n,i){n.classList.add("wrap"),n.parentNode.classList.add("stacked");var u=n.childNodes;if(!n.querySelector(".break")){var h=new o.Node(u.item(Math.floor(u.length/2)));h.insert('<br class="break">',"before")}}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:s,widthBoundaryNode:r,widthRatio:.9,onReset:function(n,i){n.classList.remove("stacked")},onRespond:function(n,i){n.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:r,onReset:function(n){n.classList.add("align-center-vert"),a.parentNode.classList.remove("scroll")},onRespond:function(n){n.classList.remove("align-center-vert"),a.parentNode.classList.add("scroll")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:s,onReset:function(n){r.classList.add("align-center-vert"),a.parentNode.classList.remove("scroll")},onRespond:function(n){r.classList.remove("align-center-vert"),a.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},2345:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-profile-full-middleband-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.ProfileFullMiddleband01=o.Base.create("ProfileFullMiddleband01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".group-copy"),r=e.querySelector(".group-content"),s=e.querySelector(".group-links"),n=e.querySelector(".sqs-slide-layer.layer-front"),i=e.querySelector(".responsive-wrapper.social");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:r,minFontSize:20,widthRatio:.9,onReset:function(g){g.style.whiteSpace="nowrap"},onMinFontSize:function(g){g.style.whiteSpace="normal"}})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),minFontSize:15,widthBoundaryNode:r,widthRatio:.9,onReset:function(g){g.style.whiteSpace="nowrap"},onMinFontSize:function(g){g.style.whiteSpace="normal"}}));var u=new l.FontSize({rootNode:i,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:e.querySelector(".group-content > .sqs-slice-group:not(.group-branding)"),minFontSize:10,widthRatio:.9,enabled:!1,onReset:function(g){g.classList.remove("stacked"),g.classList.remove("text-align-left")},onMinFontSize:function(g){g.classList.add("stacked"),g.classList.add("text-align-left")}});this._registerResponsiveComponent(u),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:a,widthBoundaryNode:r,widthRatio:.99,onReset:function(g){g.classList.remove("stacked")},onRespond:function(g){g.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector('[data-slice-type="body"]'),targetNode:s,padding:60,onReset:function(){a.classList.remove("stacked")},onRespond:function(){a.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:s,padding:60,onReset:function(g,p){a.classList.remove("stacked");var f=g.parentNode;f.classList.remove("stacked"),f.classList.remove("left-right-floats-off"),i.classList.remove("wrapped"),u.disable()},onRespond:function(g,p){a.classList.add("stacked");var f=g.parentNode;f.classList.add("stacked"),f.classList.add("left-right-floats-off"),i.classList.remove("wrapped"),u.enable()}}));var h=new l.BoundaryRatios({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:r,widthRatio:.7,enabled:!1,onReset:function(g){g.classList.remove("wrapped"),g.querySelector(".break")&&g.querySelector(".break").remove()},onRespond:function(g){g.classList.add("wrapped");var p=g.childNodes;if(!g.querySelector(".break")){var f=new o.Node(p.item(Math.floor(p.length/2)));f.insert('<br class="break">',"before")}}});this._registerResponsiveComponent(h),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:i,widthBoundaryNode:r,widthRatio:.99,onReset:function(g){g.classList.remove("stacked"),h.disable()},onRespond:function(g){g.classList.add("stacked"),h.enable()}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:n.querySelector(".sqs-slide-layer-content"),padding:0,onReset:function(g){n.classList.remove("scroll")},onRespond:function(g){n.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},121726:function(){YUI.add("squarespace-slide-rendering-layouts-profile-full-right-01",function(c){c.namespace("Squarespace.SlideRendering.Layouts"),c.Squarespace.SlideRendering.Layouts.ProfileFullRight01=c.Base.create("ProfileFullRight01",c.Squarespace.SlideRendering.Layouts.ProfileFullLeft01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-profile-full-left-01"]})},199034:function(){YUI.add("squarespace-slide-rendering-layouts-profile-full-top-01",function(c){c.namespace("Squarespace.SlideRendering.Layouts"),c.Squarespace.SlideRendering.Layouts.ProfileFullTop01=c.Base.create("ProfileFullTop01",c.Squarespace.SlideRendering.Layouts.ProfileFullBottom01,[],{})},"1.0",{requires:["base","squarespace-slide-rendering-layouts-profile-full-bottom-01"]})},923127:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-profile-left-left-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.ProfileLeftLeft01=o.Base.create("ProfileLeftLeft01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode();this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:1,scale:.99,minFontSize:30,widthBoundaryNode:e.querySelector(".sqs-slice-heading-content"),heightBoundaryNode:e.querySelector(".sqs-slide-layer"),heightRatio:.3,onRespond:(function(){o.later(0,this,function(){this._syncSliceWidgets()})}).bind(this)})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:1,scale:.99,minFontSize:20,widthBoundaryNode:e.querySelector(".sqs-slice-heading-content"),heightBoundaryNode:e.querySelector(".sqs-slide-layer"),onRespond:(function(){o.later(0,this,function(){this._syncSliceWidgets()})}).bind(this)})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector(".responsive-wrapper"),fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:12,widthRatio:.9,scale:.9,onReset:function(a){a.classList.remove("stacked")},onMinFontSize:function(a){a.classList.add("stacked")},onRespond:(function(){o.later(0,this,function(){this._syncSliceWidgets()})}).bind(this)})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector(".group-copy"),targetNode:e.querySelector(".sqs-slice-group.group-links"),padding:0,onReset:function(a,r){r.classList.add("bottom-full-width")},onRespond:function(a,r){r.classList.remove("bottom-full-width")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slice-group.group-links"),onReset:function(a){a=new o.Node(a),a.ancestor(".sqs-slide-layer-content").removeClass("scroll")},onRespond:function(a){a=new o.Node(a),a.ancestor(".sqs-slide-layer-content").addClass("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},531140:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-profile-left-right-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.ProfileLeftRight01=o.Base.create("ProfileLeftRight01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".group-copy"),r=e.querySelector(".responsive-wrapper"),s=!!o.one("html.flexbox");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),minFontSize:26,widthRatio:.99})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthBoundaryNode:a,widthRatio:1,scale:.99,minFontSize:16})),this._registerResponsiveComponent(new l.FontSize({rootNode:r,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.9,onReset:function(){r.classList.remove("stacked")},onMinFontSize:function(){r.classList.add("stacked")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:a,widthRatio:.7,onReset:function(n){n.classList.remove("wrapped"),n.querySelector(".break")&&n.querySelector(".break").remove()},onRespond:function(n){n.classList.add("wrapped");var i=n.childNodes;if(!n.querySelector(".break")){var u=new o.Node(i.item(Math.floor(i.length/2)));u.insert('<br class="break">',"before")}}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:r,widthRatio:.9,onReset:function(n,i){n.classList.remove("stacked")},onRespond:function(n){n.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:e.querySelector('[data-compound-type="logo"] > *'),padding:40,onReset:function(n,i){s||a.classList.add("align-center-vert")},onRespond:function(n,i){o.one("html.flexbox")||a.classList.remove("align-center-vert")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:e.querySelector(".content-gallery"),padding:parseInt(a.ownerDocument.defaultView.getComputedStyle(a.parentNode).paddingTop,10),onReset:function(n){s||(n.classList.add("align-center"),n.classList.remove("align-center-horiz"))},onRespond:function(n){a.ownerDocument.defaultView.getComputedStyle(a.parentNode).float!=="left"&&(s||(n.classList.remove("align-center"),n.classList.add("align-center-horiz")))}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:a,padding:Math.max(25,parseInt(getComputedStyle(e)["border-top-width"],10)*2),onReset:function(n){n.parentNode.classList.remove("scroll"),s||(a.classList.add("align-center"),a.classList.remove("align-center-horiz"))},onRespond:function(n){n.parentNode.classList.add("scroll"),s||(a.classList.remove("align-center"),a.classList.add("align-center-horiz"))}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},673689:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-sso-full-center-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.SsoFullCenter01=o.Base.create("SsoFullCenter01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".layer-front .sqs-slide-layer-content");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.99,scale:.99,minFontSize:14,heightBoundaryNode:e.querySelector(".sqs-slide-layer"),heightRatio:.16})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),heightRatio:.16,heightBoundaryNode:e.querySelector(".sqs-slide-layer"),widthRatio:.99,scale:.99,minFontSize:18})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slice-group.group-content"),onReset:function(r){r.classList.add("align-center"),r.classList.add("align-center-absolute"),a.classList.remove("scroll")},onRespond:function(r){r.classList.remove("align-center"),r.classList.remove("align-center-absolute"),a.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},300213:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-twitter-full-center-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.TwitterFullCenter01=o.Base.create("TwitterFullCenter01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".group-twitter"),r=e.querySelector(".responsive-wrapper"),s=e.querySelector(".group-logo"),n=e.querySelector(".layer-front .sqs-slide-layer-content"),i=e.querySelector('[data-compound-type="logo"]'),u=function(){r.classList.contains("stacked")||!s.classList.contains("top-left")?(s.style.minHeight=null,r.style.minHeight=null):(s.style.minHeight=r.clientHeight+"px",r.style.minHeight=s.clientHeight+"px")};this._registerResponsiveComponent(new l.FontSize({rootNode:i.querySelector("h1"),widthRatio:.4,minFontSize:13,onReset:function(){u()},onRespond:function(){u()},onMinFontSize:function(){u()}})),this._registerResponsiveComponent(new l.FontSize({rootNode:r,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:a,minFontSize:10,widthRatio:.8,onReset:function(g){g.classList.remove("stacked")},onMinFontSize:function(g){g.classList.add("stacked")}}));var h=e.querySelectorAll('[data-slice-type="twitter"] .sqs-tweet .tweet-body');Array.prototype.forEach.call(h,function(g){this._registerResponsiveComponent(new l.FontSize({rootNode:g,widthRatio:1,heightRatio:.5,scale:.97,minFontSize:18,heightBoundaryNode:a,onReset:function(p){},onMinFontSize:function(p){}}))},this),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector('[data-compound-type="logo"] > *'),targetNode:r,onReset:function(g,p){p.classList.add("top-right"),s.classList.add("top-left"),p.classList.remove("stacked"),i.classList.remove("stacked"),u()},onRespond:function(g,p){p.classList.remove("top-right"),s.classList.remove("top-left"),p.classList.add("stacked"),i.classList.add("stacked"),u()}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:r,targetNode:a,padding:20,onReset:function(g,p){g.classList.add("top-right"),s.classList.add("top-left"),g.classList.remove("stacked"),i.classList.remove("stacked"),a.classList.remove("stacked"),n.classList.remove("scroll"),u()},onRespond:function(g,p){g.classList.remove("top-right"),s.classList.remove("top-left"),g.classList.add("stacked"),i.classList.add("stacked"),a.classList.add("stacked"),n.classList.add("scroll"),u()}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:a,onReset:function(){a.classList.remove("stacked"),n.classList.remove("scroll")},onRespond:function(){a.classList.add("stacked"),n.classList.add("scroll")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:r,onReset:function(){a.classList.remove("stacked"),n.classList.remove("scroll")},onRespond:function(){a.classList.add("stacked"),n.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},630712:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-twitter-full-left-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.TwitterFullLeft01=o.Base.create("TwitterFullLeft01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".group-twitter"),r=e.querySelector(".group-logo-social-actions"),s=e.querySelector(".responsive-wrapper"),n=e.querySelector(".layer-front .sqs-slide-layer-content"),i=e.querySelector('[data-compound-type="logo"]'),u=function(){i.style.minHeight=s.clientHeight+"px",s.style.minHeight=i.clientHeight+"px"};this._registerResponsiveComponent(new l.FontSize({rootNode:i.querySelector("h1"),widthBoundaryNode:n,widthRatio:.8,minFontSize:13,onReset:function(g,p){u()},onRespond:function(g,p){u()},onMinFontSize:function(g,p){u()}})),this._registerResponsiveComponent(new l.FontSize({rootNode:s,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:12,widthRatio:.99,onReset:function(g){r.classList.add("right-left"),g.classList.remove("stacked")},onRespond:function(g){},onMinFontSize:function(g){r.classList.remove("right-left"),g.classList.add("stacked")}}));var h=e.querySelectorAll('[data-slice-type="twitter"] .tweet-body');Array.prototype.forEach.call(h,o.bind(function(g){this._registerResponsiveComponent(new l.FontSize({rootNode:g,widthRatio:1,heightRatio:.55,scale:.97,minFontSize:18,heightBoundaryNode:a}))},this)),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector('[data-compound-type="logo"] > *'),targetNode:s.querySelector(".sqs-slice:last-child"),padding:40,onReset:function(g,p){r.classList.add("right-left")},onRespond:function(g,p){r.classList.remove("right-left")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector('[data-compound-type="logo"] > *'),targetNode:s.querySelector(".sqs-slice:first-child"),padding:40,onReset:function(g,p){r.classList.add("right-left")},onRespond:function(g,p){r.classList.remove("right-left")}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:s,widthRatio:.95,onReset:function(g){g.classList.remove("stacked"),u()},onRespond:function(g){g.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector(".group-logo-social-actions"),targetNode:a,padding:40,onReset:function(g,p){g.classList.add("bottom-full-width"),a.classList.remove("stacked"),n.classList.remove("scroll"),u()},onRespond:function(g,p){g.classList.remove("bottom-full-width"),a.classList.add("stacked"),n.classList.add("scroll")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:a,padding:20,onReset:function(){a.classList.remove("stacked"),n.classList.remove("scroll")},onRespond:function(){a.classList.add("stacked"),n.classList.add("scroll")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:s,padding:20,onReset:function(){a.classList.remove("stacked"),n.classList.remove("scroll")},onRespond:function(){a.classList.add("stacked"),n.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},482713:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-video-full-bottom-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.VideoFullBottom01=o.Base.create("VideoFullBottom01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".group-copy"),r=e.querySelector(".group-content"),s=e.querySelector(".group-links"),n=60;this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:r,minFontSize:20,widthRatio:.99,onReset:function(g){g.style.whiteSpace="nowrap"},onMinFontSize:function(g){g.style.whiteSpace="normal"}})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),minFontSize:15,widthBoundaryNode:r,widthRatio:.99,onReset:function(g){g.style.whiteSpace="nowrap"},onMinFontSize:function(g){g.style.whiteSpace="normal"}}));var i=new l.FontSize({rootNode:e.querySelector(".responsive-wrapper"),fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:e.querySelector(".group-content"),minFontSize:10,widthRatio:.45,enabled:!0,onReset:function(g){g.classList.remove("stacked"),g.classList.remove("text-align-left")},onMinFontSize:function(g){g.classList.add("stacked"),g.classList.add("text-align-left")}});this._registerResponsiveComponent(i),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector('[data-slice-type="body"]'),targetNode:s,padding:60,onReset:function(){a.classList.remove("stacked")},onRespond:function(){a.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:s,padding:60,onReset:function(g,p){var f=g.parentNode;f.classList.remove("stacked"),f.classList.remove("left-right-floats-off"),p.querySelector(".responsive-wrapper").classList.remove("wrapped"),i.disable()},onRespond:function(g,p){var f=g.parentNode;f.classList.add("stacked"),f.classList.add("left-right-floats-off"),p.querySelector(".responsive-wrapper").classList.remove("wrapped"),i.enable()}})),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:e.querySelector(".group-links .responsive-wrapper"),widthBoundaryNode:r,widthRatio:.99,onReset:function(g){g.classList.remove("stacked"),u.disable()},onRespond:function(g){g.classList.add("stacked"),u.enable()}}));var u=new l.BoundaryRatios({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:r,widthRatio:.7,enabled:!1,onReset:function(g){g.classList.remove("wrapped"),g.querySelector(".break")&&g.querySelector(".break").remove()},onRespond:function(g){g.classList.add("wrapped");var p=g.childNodes;if(!g.querySelector(".break")){var f=new o.Node(p.item(Math.floor(p.length/2)));f.insert('<br class="break">',"before")}}});this._registerResponsiveComponent(u),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:r,targetNode:e.querySelector(".group-video"),padding:120,onReset:function(g,p){h.disable(),p.classList.add("text-align-center"),p.classList.add("align-center"),p.classList.remove("bottom-full-width"),g.classList.add("full-width")},onRespond:function(g,p){p.classList.remove("text-align-center"),p.classList.remove("align-center"),e.querySelector(".vertical-positioning-top")&&(g.classList.remove("full-width"),p.classList.add("bottom-full-width")),h.enable()}}));var h=new l.OverlapDetector({rootNode:r,targetNode:e.querySelector(".group-video"),padding:60,enabled:!1,onReset:function(g,p){g.parentNode.classList.remove("scroll"),g.style.top=null,g.style.bottom=null,p.style.top=null,p.style.bottom=null},onRespond:function(g,p){setTimeout((function(){this.classList.add("scroll")}).bind(g.parentNode),50),e.querySelector(".vertical-positioning-top")?(p.style.top=g.getBoundingClientRect().bottom+n+"px",p.style.bottom="auto"):(g.style.top=p.getBoundingClientRect().bottom+n+"px",g.style.bottom="auto")}});this._registerResponsiveComponent(h),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:r,onReset:function(g){g.parentNode.classList.remove("scroll")},onRespond:function(g){setTimeout((function(){this.classList.add("scroll")}).bind(g.parentNode),50)}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".group-video"),onReset:function(g){g.parentNode.classList.remove("scroll")},onRespond:function(g){setTimeout((function(){this.classList.add("scroll")}).bind(g.parentNode),50)}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},897693:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-video-full-center-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.VideoFullCenter01=o.Base.create("VideoFullCenter01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".group-copy"),r=e.querySelector('[data-compound-type="logo"] > *'),s=e.querySelector(".responsive-wrapper");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthRatio:.49,minFontSize:13})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),widthRatio:.99,heightRatio:.1,scale:.99,minFontSize:18,heightBoundaryNode:e.querySelector(".sqs-slide-layer")}));var n=new l.FontSize({rootNode:s,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],minFontSize:10,widthRatio:.8,enabled:!1,onReset:function(u){u.classList.remove("stacked")},onMinFontSize:function(u){u.classList.add("stacked")}});this._registerResponsiveComponent(n);var i=new l.OverlapDetector({rootNode:a,targetNode:s,enabled:!1,padding:10,onRespond:function(u,h){u.classList.add("stacked"),u.classList.remove("align-center-vert"),u.parentNode.classList.add("scroll"),h.parentNode.classList.remove("bottom-full-width")}});this._registerResponsiveComponent(i),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:r,targetNode:s,padding:60,onReset:function(u,h){var g=h.parentNode;g.classList.add("top-right"),g.classList.remove("bottom-full-width"),n.disable(),i.disable(),h.querySelector('[data-slice-type]:not([data-content-empty="true"])')&&u.parentNode.classList.add("text-align-left")},onRespond:function(u,h){var g=h.parentNode;g.classList.remove("top-right"),g.classList.add("bottom-full-width"),n.enable(),i.enable(),u.parentNode.classList.remove("text-align-left")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:a,widthRatio:.9,onReset:function(u){u.classList.remove("stacked"),u.classList.add("align-center-vert"),u.classList.add("full-width"),u.parentNode.classList.remove("scroll")},onRespond:function(u){u.classList.add("stacked"),u.classList.remove("align-center-vert"),u.classList.remove("full-width"),u.parentNode.classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},651139:function(c,b,t){"use strict";var l=t(27351),d=t.n(l);YUI.add("squarespace-slide-rendering-layouts-video-full-corners-01",function(o){o.namespace("Squarespace.SlideRendering.Layouts"),o.Squarespace.SlideRendering.Layouts.VideoFullCorners01=o.Base.create("VideoFullCorners01",o.Squarespace.SlideRendering.Layouts.Base,[],{_initResponsiveComponents:function(){var e=this.get("contentBox").getDOMNode(),a=e.querySelector(".group-copy"),r=e.querySelector(".group-content"),s=e.querySelector(".group-links"),n=e.querySelector(".responsive-wrapper.social");this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-compound-type="logo"][data-slice-type="heading"] h1'),widthBoundaryNode:r,minFontSize:20,widthRatio:.99,onReset:function(h){h.style.whiteSpace="nowrap"},onMinFontSize:function(h){h.style.whiteSpace="normal"}})),this._registerResponsiveComponent(new l.FontSize({rootNode:e.querySelector('[data-slice-type="heading"]:not([data-compound-type]) h1'),minFontSize:15,widthBoundaryNode:r,widthRatio:.99,onReset:function(h){h.style.whiteSpace="nowrap"},onMinFontSize:function(h){h.style.whiteSpace="normal"}}));var i=new l.FontSize({rootNode:n,fontSizeNodes:[e.querySelector('[data-compound-type="action"] ul'),e.querySelector('[data-slice-type="custom-form"]')],widthBoundaryNode:e.querySelector(".group-content > .sqs-slice-group:not(.group-branding)"),minFontSize:10,widthRatio:.9,enabled:!1,onReset:function(h){h.classList.remove("stacked"),h.classList.remove("text-align-left")},onMinFontSize:function(h){h.classList.add("stacked"),h.classList.add("text-align-left")}});this._registerResponsiveComponent(i),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:a,widthBoundaryNode:r,widthRatio:.99,onReset:function(h){h.classList.remove("stacked")},onRespond:function(h){h.classList.add("stacked")}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:a,targetNode:s,padding:60,onReset:function(h,g){a.classList.remove("stacked");var p=h.parentNode;p.classList.remove("stacked"),p.classList.remove("left-right-floats-off"),n.classList.remove("wrapped"),i.disable()},onRespond:function(h,g){a.classList.add("stacked");var p=h.parentNode;p.classList.add("stacked"),p.classList.add("left-right-floats-off"),n.classList.remove("wrapped"),i.enable()}}));var u=new l.BoundaryRatios({rootNode:e.querySelector('[data-slice-type="social-icons"]:not([data-content-empty="true"])'),widthBoundaryNode:r,widthRatio:.7,enabled:!1,onReset:function(h){h.classList.remove("wrapped"),h.querySelector(".break")&&h.querySelector(".break").remove()},onRespond:function(h){h.classList.add("wrapped");var g=h.childNodes;if(!h.querySelector(".break")){var p=new o.Node(g.item(Math.floor(g.length/2)));p.insert('<br class="break">',"before")}}});this._registerResponsiveComponent(u),this._registerResponsiveComponent(new l.BoundaryRatios({rootNode:n,widthBoundaryNode:r,widthRatio:.99,onReset:function(h){h.classList.remove("stacked"),u.disable()},onRespond:function(h){h.classList.add("stacked"),u.enable()}})),this._registerResponsiveComponent(new l.OverlapDetector({rootNode:e.querySelector(".group-video"),targetNode:e.querySelector(".layer-front .sqs-slide-layer-content"),padding:0,onReset:function(h,g){h.classList.add("absolute"),g.parentNode.classList.remove("scroll")},onRespond:function(h,g){h.classList.remove("absolute"),g.parentNode.classList.add("scroll")}})),this._registerResponsiveComponent(new l.OverflowDetector({rootNode:e.querySelector(".sqs-slide-layer.layer-front .sqs-slide-layer-content"),widthRatio:.95,padding:-1,onReset:function(h){e.querySelector(".sqs-slide-layer.layer-front").classList.remove("scroll")},onRespond:function(h){e.querySelector(".sqs-slide-layer.layer-front").classList.add("scroll")}}))}})},"1.0",{requires:["squarespace-slide-rendering-layouts-base"]})},810490:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(869797),e=t(508057);class a extends o.Z{bindUIEvents(){const n=this.container,i=this.albumController,u=n.querySelector(".button-play-pause");u&&u.addEventListener("click",()=>i.playpause());const h=n.querySelector(".button-previous");h&&h.addEventListener("click",()=>i.goToPreviousTrack());const g=n.querySelector(".button-next");g&&g.addEventListener("click",()=>i.goToNextTrack()),this.trackNodes.forEach((p,f)=>{p.querySelector(".track-progress-bar").addEventListener("mousedown",this.getScrubHandlerForTrack(f)),p.addEventListener("click",m=>{m.preventDefault(),i.skipToTrack(f),i.play()})})}handleTrackPositionChange(n,i,u){const h=this.trackNodes[n];h.querySelector(".track-progress-bar .play-bar").style.width=u*100+"%",h.querySelector(".track-time").textContent=(0,e.Z)(i)}handleActiveTrackChange(n){this.trackNodes.forEach(i=>i.classList.remove("selected")),n!==null&&this.trackNodes[n].classList.add("selected")}}const r=a;YUI.add("squarespace-slide-rendering-slices-album",function(s){s.namespace("Squarespace.SlideRendering.Slices");var n=s.Squarespace.SlideRendering.Slices.Album=s.Base.create("Album",s.Squarespace.SlideRendering.Slices.Base,[],{initializer:function(){var i=this.get("contentBox"),u=i.one(".sqs-slice-album-playlist");u.hasClass("demo-album")?this.get("contentBox").all("a").on("click",function(h){h.halt()},this):this._playlist=new r},renderUI:function(){n.superclass.renderUI.call(this);var i=this.get("contentBox"),u=i.one(".sqs-slice-album-playlist");this._playlist&&this._playlist.connectToNode(u.getDOMNode())}},{SLICE_TYPE:d().ALBUM,CSS_PREFIX:"sqs-slice-album"})},"1.0",{requires:["base","squarespace-slide-rendering-slices-base"]})},526362:function(c,b,t){"use strict";var l=t(963351),d=t.n(l),o=t(150825),e=t(480253),a=t(347709);YUI.add("squarespace-slide-rendering-slices-base",function(r){r.namespace("Squarespace.SlideRendering.Slices"),r.Squarespace.SlideRendering.Slices.Base=r.Base.create("Base",r.Widget,[],{CONTENT_TEMPLATE:null},{CSS_PREFIX:"sqs-slice",ATTRS:{sliceId:{value:null},slideType:{value:o.Z[d().COVER_PAGE]},slideSelector:{getter:function(){var s=e.Z[this.get("slideType")];return a.qG(s)}},canClientRefresh:{value:!1}}})},"1.0",{requires:["base","widget"]})},563135:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-slide-rendering-slices-body",function(o){o.namespace("Squarespace.SlideRendering.Slices"),o.Squarespace.SlideRendering.Slices.Body=o.Base.create("Body",o.Squarespace.SlideRendering.Slices.Base,[o.Squarespace.SlideRendering.Slices.ClientRefresh],{refreshFromSliceContent:function(e){var a=e.get("body.html");a&&typeof a!="string"&&a.length&&(a=a.toString());var r=!o.Lang.isValue(a)||a==="";this.get("contentBox").setHTML(a),this._updateContentEmptyAttribute(r)}},{SLICE_TYPE:d().BODY,CSS_PREFIX:"sqs-slice-body"})},"1.0",{requires:["base","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},711775:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(723499),e=t.n(o),a=t(537312);YUI.add("squarespace-slide-rendering-slices-buttons",function(r){r.namespace("Squarespace.SlideRendering.Slices"),r.Squarespace.SlideRendering.Slices.Buttons=r.Base.create("Buttons",r.Squarespace.SlideRendering.Slices.Base,[r.Squarespace.SlideRendering.Slices.ClientRefresh],{renderUI:function(){this._trackButtonRender()},bindUI:function(){var s=this.get("contentBox");s.all("a").each(function(n){n.on("click",this._trackButtonClick,this)},this)},refreshFromSliceContent:function(s){var n="",i=!0;s.get("links").each(function(u){var h=u.get("text");if(r.Lang.isValue(h)&&h!==""){i=!1;var g=u.get("clickthroughUrl");n+=r.Lang.sub('<li><a href="{href}"{target}>{text}</a></li>',{href:g.url,targetNode:g.newWindow?' targetNode="_blank"':"",text:r.Squarespace.Escaping.escapeForHtml(h)})}}),this.get("contentBox").one("ul").setHTML(n),this._updateContentEmptyAttribute(i)},_getTrackingData:function(s){var n=s.getAttribute("href"),i=s.ancestor(".sqs-slide"),u=i.getAttribute("data-slide-layout-id"),h=i.getAttribute("data-slide-type"),g=h==="popup-overlay"?e().POPUP_OVERLAY:e().BUTTON_BLOCK;return{pagePath:r.config.win.location.pathname,id:u,buttonText:s.get("innerHTML"),clickthroughUrl:n,alignment:null,size:null,newWindow:s.hasAttribute("target"),context:g}},_trackButtonRender:function(){var s=this.get("contentBox");s.all("a").each(function(n){var i=this._getTrackingData(n);i.context!==e().POPUP_OVERLAY&&a.TP(i)},this)},_trackButtonClick:function(s){var n=s.currentTarget;if(n.hasAttribute("data-tracked")){n.removeAttribute("data-tracked");return}var i=n.hasAttribute("target"),u=s.target.getAttribute("href"),h=u&&u.split(":")[0].toLowerCase()==="mailto",g=(!i||s.metaKey||s.ctrlKey||s.shiftKey)&&!h;g&&(s.preventDefault(),s.stopImmediatePropagation());var p=function(){g&&(n.setAttribute("data-tracked",!0),n.simulate("click"))},f=this._getTrackingData(s.target);a.kO(f).then(function(){p()}).catch(function(m){p()})}},{SLICE_TYPE:d().BUTTONS,CSS_PREFIX:"sqs-slice-buttons"})},"1.0",{requires:["base","squarespace-escaping-utils","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},395308:function(){YUI.add("squarespace-slide-rendering-slices-client-refresh",function(c){c.namespace("Squarespace.SlideRendering.Slices"),c.Squarespace.SlideRendering.Slices.ClientRefresh=c.Base.create("Heading",c.Base,[],{refreshFromSliceContent:function(b){},_updateContentEmptyAttribute:function(b){var t=this.get("contentBox");b?t.setAttribute("data-content-empty",!0):t.removeAttribute("data-content-empty")}},{ATTRS:{canClientRefresh:{value:!0}}})},"1.0",{requires:["base"]})},44079:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(784874),e=t(963327);YUI.add("squarespace-slide-rendering-slices-custom-form",function(a){a.namespace("Squarespace.SlideRendering.Slices");var r=a.Squarespace.SlideRendering.Slices.CustomForm=a.Base.create("CustomForm",a.Squarespace.SlideRendering.Slices.Base,[a.Squarespace.SlideRendering.Slices.ClientRefresh],{initializer:function(){this._lightbox=new a.Squarespace.Widgets.ModalLightbox({render:a.one(this.get("slideSelector")),openClassNode:a.one(this.get("slideSelector")+" .sqs-slide-container")}),this._formTemplatePromise=this._getFormTemplateSchema()},destructor:function(){this._lightbox.close(),this._formWidget&&this._formWidget.destroy(),this._lightbox.destroy(),this._formTemplatePromise=null},renderUI:function(){r.superclass.renderUI.call(this),this._lightbox.render()},bindUI:function(){r.superclass.bindUI.call(this);var s=this.get("contentBox");s.delegate("click",this._openForm,".open-form-button",this)},_openForm:function(){var s=this.get("contentBox"),n=s.one(".open-form-button-container"),i=n.getData("form"),u=a.Lang.isValue(i)&&i!=="",h;u?h=a.JSON.parse(i.replace(/scr"\+"ipt/g,"script")):h=n.hasClass("slice-newsletter-form")?new a.Squarespace.Models.SliceDemoNewsletterForm().toJSON():new a.Squarespace.Models.SliceDemoCustomForm().toJSON(),this._formTemplatePromise.then(a.bind(function(g){this._formWidget&&this._formWidget.destroy(!0);var p=this._formWidget=new a.Squarespace.Widgets.AsyncForm({form:h,formTemplate:g,formSubmitButtonText:h.submitButtonText,formName:h.name,showTitle:!0,preventDefaultSubmit:!u,preventAllSubmits:!u}),f=this._lightbox;f.set("content",p);var m=e.getCaptchaContainer(a.config.win,p.get("contentBox").getDOMNode());if(m&&e.render(a.config.win,m),a.UA.ios>0){var _=a.one('meta[name="viewport"]');_.setAttribute("content",_.getAttribute("content")+", maximum-scale=1"),f.once("close",function(){var S=this.getAttribute("content"),y=S.substring(0,S.indexOf(", maximum-scale=1"));this.setAttribute("content",y),setTimeout(function(){window.dispatchEvent(new Event("resize"))},100)},_)}var v=a.one(this.get("slideSelector")+' [data-slice-type="gallery"] .scrim'),E=v?v.getComputedStyle("backgroundColor"):null;f.get("boundingBox").one(".lightbox-background").setStyle("backgroundColor",E),f.open()},this))},_getFormTemplateSchema:function(){return a.Squarespace.Promises.create(function(s){a.Data.get({url:"/api/template/GetTemplateSchema",data:{type:o.Z.FORM},success:function(n){s(n)}})})},refreshFromSliceContent:function(s){var n=this.get("contentBox"),i=n.one(".open-form-button-container");i.addClass(s.get("isNewsletterFormSelected")?"slice-newsletter-form":"slice-custom-form"),i.removeClass(s.get("isNewsletterFormSelected")?"slice-custom-form":"slice-newsletter-form");var u=s.get("buttonLabel"),h=!a.Lang.isValue(u)||u==="";h?i.setHTML(""):i.setHTML('<span><a class="open-form-button">'+u+"</a></span>"),this._updateContentEmptyAttribute(h)}},{SLICE_TYPE:d().CUSTOM_FORM,CSS_PREFIX:"sqs-slice-custom-form"})},"1.0",{requires:["base","json","squarespace-async-form","squarespace-modal-lightbox","squarespace-models-slice-demo-custom-form","squarespace-models-slice-demo-newsletter-form","squarespace-promises","squarespace-util","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},741385:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-slide-rendering-slices-factory",function(o){var e=o.Squarespace.FactoryUtils.createEnumToClassFactory(d(),o.Squarespace.SlideRendering.Slices,"SLICE_TYPE","Base");o.namespace("Squarespace.SlideRendering.Slices"),o.Squarespace.SlideRendering.Slices.Factory=e},"1.0",{requires:["squarespace-factory-utils","squarespace-slide-rendering-slices-album","squarespace-slide-rendering-slices-body","squarespace-slide-rendering-slices-buttons","squarespace-slide-rendering-slices-custom-form","squarespace-slide-rendering-slices-gallery","squarespace-slide-rendering-slices-heading","squarespace-slide-rendering-slices-image","squarespace-slide-rendering-slices-lock","squarespace-slide-rendering-slices-map","squarespace-slide-rendering-slices-newsletter","squarespace-slide-rendering-slices-navigation","squarespace-slide-rendering-slices-password","squarespace-slide-rendering-slices-social-icons","squarespace-slide-rendering-slices-sso","squarespace-slide-rendering-slices-sub-heading","squarespace-slide-rendering-slices-twitter","squarespace-slide-rendering-slices-video"]})},744542:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(428513);YUI.add("squarespace-slide-rendering-slices-gallery",function(e){e.namespace("Squarespace.SlideRendering.Slices");var a=!1,r=e.Squarespace.SlideRendering.Slices.Gallery=e.Base.create("Gallery",e.Squarespace.SlideRendering.Slices.Base,[e.Squarespace.SlideRendering.Slices.HasScrim],{initializer:function(){this._events=[],this._initGallery()},destructor:function(){this._events.forEach(function(s){s.detach()}),this._events=null,this._gallery&&this._gallery.destroy()},bindUI:function(){r.superclass.bindUI.call(this),this._events.push(e.Global.after("tweak:change",this._onTweakChange,this)),this._events.push(e.Global.after("slideUpdateRendered",function(){var n=this.get("items"),i=new e.Parallel;n.each(function(u){var h=u.one("img");h&&window.ImageLoader&&(window.ImageLoader.load(h,!0),h.once("load",i.add()))},this),i.done((function(){this.syncUI()}).bind(this))},this)),this._gallery&&this._gallery.after("currentIndexChange",this._syncScrim,this);var s=this.get("slideSelector")+' .sqs-slice[data-slice-type="video"]';this._isVideoBg()&&e.one(s)&&this._events.push(e.one(this.get("slideSelector")+" .sqs-slice-play-button").on("click",function(n){try{this.videoBg.player.pauseVideo()}catch(i){a&&console.warn(i)}},this),e.Global.on("lightbox-hidden",function(){try{this.videoBg.player.playVideo()}catch(n){a&&console.warn(n)}},this)),this._events.push(e.Global.after("tweak:reset",function(){this.get("items").each(function(n){n.setStyles({"background-color":null,height:null,width:null,"overflow-y":null,"overflow-x":null})}),this._gallery.destroy(),this._initGallery()},this))},syncUI:function(){r.superclass.syncUI.call(this),!this._isGrid()&&!this._isVideoBg()?(this._gallery.refresh(),this._syncScrim()):(this.get("boundingBox").one(".scrim")||this.get("boundingBox").append('<div class="scrim"></div>'),this._gallery&&this._gallery.syncUI())},_initGallery:function(){this._removeInvalidImages();var s=this.get("items"),n=this.get("boundingBox");if(this._isVideoBg()){var i=s.item(0).getDOMNode(),u=this._getVideoPropertiesFromElement(i);u.container=i,this.videoBg=new o.VideoBackground(u,e.config.win)}else this._isGrid()?(this.get("contentBox").ancestor(".sqs-slide").hasClass("sqs-slide-ready")?this._createGrid(n,s):e.Global.on("slideReady",this._createGrid(n,s)),a===!0&&(window.grid=this._gallery)):this._gallery=new e.SQS.Gallery.Gallery2({container:n,slides:s,autoplay:!0,autoplayOptions:{timeout:5e3},loaderOptions:{mode:"fill"},refreshOnResize:!0,loop:!0,design:"stacked",designOptions:{autoHeight:!1,speed:1,transition:"fade"}})},_removeInvalidImages:function(){var s=this.get("items");s&&s.each(function(n){n.one("img")&&!n.hasClass("gallery-video-background")&&!n.hasClass("demo-image")&&!n.one("img").getAttribute("data-image-dimensions")&&n.remove()}),this.set("items",this.get("boundingBox").all(".sqs-slice-gallery-item"))},_syncScrim:function(){var s=this._gallery.get("currentIndex"),n=this._gallery.get("slides").item(s);n&&this.updateScrim(n)},_createGrid:function(s,n){var i=this.get("slideSelector")+" .sqs-slide-container";this._gallery=new e.Squarespace.SlideRendering.GridGallery({container:s,items:n,slideContainerSelector:i})},_isGrid:function(){var s=!1;return e.one(this.get("slideSelector")+" .gallery-style-grid")&&(s=!0),s},_isVideoBg:function(){var s=!1;return e.one(this.get("slideSelector")+' [data-slice-type="gallery"] .gallery-video-background')&&(s=!0),s},_getVideoPropertiesFromElement:function(s){var n={};return s.getAttribute("data-config-url")&&(n.url=s.getAttribute("data-config-url")),s.getAttribute("data-config-playback-speed")&&(n.playbackSpeed=s.getAttribute("data-config-playback-speed")),s.getAttribute("data-config-filter")&&(n.filter=s.getAttribute("data-config-filter")),s.getAttribute("data-config-filter-strength")&&(n.filterStrength=s.getAttribute("data-config-filter-strength")),s.getAttribute("data-config-custom-fallback-image")&&(n.useCustomFallbackImage=!0),n},_onTweakChange:function(s){var n=s.getName(),i=s.getValue();if(n==="gallery-style")this.get("items").each(function(){this.getDOMNode().style.cssText="";var u=this.one("img");u.setAttribute("src",""),u.setAttribute("data-image-resolution",""),u.setStyle("display","initial")}),this._gallery.destroy(),this._initGallery();else if(this._isGrid())switch(n){case"gallery-style":this.get("items").each(function(){this._node.style.cssText=""}),this._gallery.destroy(),this._initGallery();break;case"grid-gallery-density":this._gallery._removeClonedItems(),this._gallery.destroy(),this._initGallery();break;case"grid-gallery-ratio":i!=="Original"?(this._gallery.set("axisDirection","row"),this._gallery._removeClonedItems(),this._gallery.destroy(),this._initGallery()):this._gallery._setAxisDirection();break;case"grid-gallery-image-orientation":this._gallery.set("axisDirection","row"),this._gallery._removeClonedItems(),this._gallery.destroy(),this._initGallery();break;case"grid-gallery-direction":i==="Horizontal"?this._gallery.set("axisDirection","row"):this._gallery.set("axisDirection","column");break;case"gallery-randomize-order":i==="true"?this._gallery.set("imageOrdering","random"):this._gallery.set("imageOrdering","repeat"),this._gallery._removeClonedItems(),this._gallery.destroy(),this._initGallery();break;case"gallery-loading-animation":this._gallery.previewImageLoading(i);break}this._isVideoBg()&&this.videoBg&&this.videoBg.scaleVideo(),this.syncUI()}},{SLICE_TYPE:d().GALLERY,CSS_PREFIX:"sqs-slice-gallery",ATTRS:{items:{value:null,validator:e.Squarespace.AttrValidators.isNullOrNodeList}},HTML_PARSER:{items:[".sqs-slice-gallery-item"]}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-gallery-ng","squarespace-slide-rendering-grid-gallery","squarespace-slide-rendering-slices-has-scrim","squarespace-slide-rendering-slices-base"]})},932492:function(){YUI.add("squarespace-slide-rendering-slices-has-scrim",function(c){c.namespace("Squarespace.SlideRendering.Slices"),c.Squarespace.SlideRendering.Slices.HasScrim=c.Base.create("HasScrim",c.Base,[],{initializer:function(){c.Do.after(this._renderScrim,this,"renderUI",this)},updateScrim:function(b){if(b){var t=b.getData("processedColorStyles");c.Lang.isUndefined(t)&&(t=c.Squarespace.SlideRendering.ColorProcessor.processNode(b)),this._styleScrim(t.color,t.opacity)}},_renderScrim:function(){var b=this.get("contentBox");this._scrim=b.one(".scrim"),this._scrim||(this._scrim=c.Node.create('<div class="scrim"></div>'),b.appendChild(this._scrim))},_styleScrim:function(b,t){this._scrim.setStyle("backgroundColor",b.toString()),this._scrim.setStyle("opacity",t),this._scrim.ancestor(".sqs-slice").setStyle("backgroundColor",b.toString())}},{ATTRS:{midPoint:{value:.6,writeOnce:"initOnly"}}})},"1.0",{requires:["base","squarespace-slide-rendering-color-processor","squarespace-slide-rendering-slices-rgb"]})},608391:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-slide-rendering-slices-heading",function(o){o.namespace("Squarespace.SlideRendering.Slices"),o.Squarespace.SlideRendering.Slices.Heading=o.Base.create("Heading",o.Squarespace.SlideRendering.Slices.Base,[o.Squarespace.SlideRendering.Slices.ClientRefresh],{refreshFromSliceContent:function(e){var a=e.get("text"),r=!o.Lang.isValue(a)||a==="",s=o.Squarespace.Escaping.escapeForHtml(a);this.get("contentBox").one("h1").setHTML(s),this._updateContentEmptyAttribute(r)}},{SLICE_TYPE:d().HEADING,CSS_PREFIX:"sqs-slice-heading"})},"1.0",{requires:["base","squarespace-escaping-utils","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},641828:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-slide-rendering-slices-image",function(o){o.namespace("Squarespace.SlideRendering.Slices");var e=o.Squarespace.SlideRendering.Slices.Image=o.Base.create("Base",o.Squarespace.SlideRendering.Slices.Base,[],{syncUI:function(){e.superclass.syncUI.call(this);var a=this.get("contentBox").one("img");a&&a.plug(o.Squarespace.Loader2,{load:!0,mode:"fit"})}},{SLICE_TYPE:d().IMAGE,CSS_PREFIX:"sqs-slice-image",ATTRS:{}})},"1.0",{requires:["base","squarespace-image-loader","squarespace-slide-rendering-slices-base"]})},725672:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-slide-rendering-slices-lock",function(o){o.namespace("Squarespace.SlideRendering.Slices"),o.Squarespace.SlideRendering.Slices.Lock=o.Base.create("Lock",o.Squarespace.SlideRendering.Slices.Base,[],{},{SLICE_TYPE:d().LOCK,CSS_PREFIX:"sqs-slice-lock"})},"1.0",{requires:["base","squarespace-slide-rendering-slices-base"]})},274451:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(823268),e=t.n(o),a=t(415537),r=t.n(a);YUI.add("squarespace-slide-rendering-slices-map",function(s){s.namespace("Squarespace.SlideRendering.Slices");var n=s.Squarespace.SlideRendering.Slices.Map=s.Base.create("Map",s.Squarespace.SlideRendering.Slices.Base,[s.Squarespace.SlideRendering.Slices.ClientRefresh],{initializer:function(){this._events=[]},destructor:function(){this._events.forEach(function(i){i.detach()}),this._events=null},renderUI:function(){n.superclass.renderUI.call(this),this._createMap()},bindUI:function(){n.superclass.bindUI.call(this),this._events.push(s.Global.on("tweak:change",this._onTweakChange,this)),this._events.push(s.Global.on("tweak:reset",this._syncMapStyle,this)),this._events.push(s.one(s.config.win).on("resize",this._centerMarker,this))},_onTweakChange:function(i){i.getName()==="map-style"&&this._syncMapStyle()},_syncMapStyle:function(){var i=this.get("map");i.updateUIOptions({style:this._getMapStyle()}),this._centerMarker()},_createMap:function(){var i=this.get("mapContainer"),u=i.getAttribute("data-location"),h=s.JSON.parse(u);this._renderLocation(h)},_getMapStyle:function(){var i=this.get("slideSelector")+" .sqs-slide-container",u=s.one(i).get("className"),h;return u.indexOf("minimal-dark")!==-1?h=r().MinimalDark:u.indexOf("minimal-blue")!==-1?h=r().MinimalBlue:h=r().MinimalLight,h},_renderLocation:function(i){var u=this.get("mapContainer"),h={mapZoom:i.mapZoom,mapLat:i.mapLat,mapLng:i.mapLng,markerLat:i.markerLat,markerLng:i.markerLng},g={draggable:!1,scrollwheel:!1,showLabels:!1,showControls:!1,style:this._getMapStyle()};e().createView(g,h,u.getDOMNode()).then(s.bind(function(p){this.set("map",p),p.centerMarker()},this),function(){})},_centerMarker:function(){this.get("map").centerMarker()},_rebuildContent:function(){this.get("mapContainer").remove(!0);var i=s.Node.create('<div class="sqs-slice-content-map"></div>');this.get("contentBox").appendChild(i),this.set("mapContainer",i)},refreshFromSliceContent:function(i){var u=i.get("location").toJSON();this._rebuildContent(),this._renderLocation(u)}},{SLICE_TYPE:d().MAP,CSS_PREFIX:"sqs-slice-map",ATTRS:{map:{value:null,validator:s.Squarespace.AttrValidators.isNullOrInstanceOf(e())},mapContainer:{value:null,validator:s.Squarespace.AttrValidators.isNullOrNode}},HTML_PARSER:{mapContainer:".sqs-slice-content-map"}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},700178:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-slide-rendering-slices-navigation",function(o){o.namespace("Squarespace.SlideRendering.Slices"),o.Squarespace.SlideRendering.Slices.Navigation=o.Base.create("Navigation",o.Squarespace.SlideRendering.Slices.Base,[o.Squarespace.SlideRendering.Slices.ClientRefresh],{refreshFromSliceContent:function(e){var a="",r=!0;e.get("links").each(function(s){var n=s.get("text");if(o.Lang.isValue(n)&&n!==""){r=!1;var i=s.get("clickthroughUrl");a+=o.Lang.sub('<li><a href="{href}"{target}>{text}</a></li>',{href:i.url,targetNode:i.newWindow?' targetNode="_blank"':"",text:o.Squarespace.Escaping.escapeForHtml(n)})}}),this.get("contentBox").one("ul").setHTML(a),this._updateContentEmptyAttribute(r)}},{SLICE_TYPE:d().NAVIGATION,CSS_PREFIX:"sqs-slice-navigation"})},"1.0",{requires:["base","squarespace-escaping-utils","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},865886:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487),e=t(868463),a=t(304212),r=t(528215);YUI.add("squarespace-slide-rendering-slices-newsletter",function(s){s.namespace("Squarespace.SlideRendering.Slices");var n=s.Squarespace.SlideRendering.Slices.Newsletter=s.Base.create("Newsletter",s.Squarespace.SlideRendering.Slices.Base,[s.Squarespace.SlideRendering.Slices.ClientRefresh],{initializer:function(){n.superclass.initializer.call(this),this._bindGlobalEvents()},renderUI:function(){n.superclass.renderUI.call(this),this.renderCaptcha()},bindUI:function(){n.superclass.bindUI.call(this);var i=this.get("contentBox"),u=i.one("form.newsletter-form"),h=s.Squarespace.FormSubmit(u.getDOMNode()),g=this._getEmailField(u);g.on("focus",function(){h.clearErrors()},this),u.on("submit",function(){h.clearErrors();function p(m){var _=h.createErrorNode(m);u.prepend(_),_.setAttribute("tabindex",-1),_.focus()}if(!(0,e.vV)(g.get("value")))return p((0,o.t)("Please enter a valid email address.",null,{project:"scripts-v6.slide-rendering"})),!1;var f=u.getAttribute("data-form-id");return f?(h.submit({collectionId:null,disableValidation:!0,formId:f,isOverlayForm:!0,objectName:null,submitButtonText:this._getSubmitButtonText(u)}),!1):(p((0,o.t)("Please connect your newsletter to a storage option.",null,{project:"scripts-v6.slide-rendering"})),!1)},this)},_getEmailField:function(i){return i.one('.field-element[type="text"]')},_getEmailPlaceholderText:function(i){return this._getEmailField(i).getDOMNode().getAttribute("placeholder")},_getSubmitButton:function(i){return i.one("button")},_getSubmitButtonText:function(i){return this._getSubmitButton(i).get("value")},_bindGlobalEvents:function(){s.Global.detach("refreshCaptchaFromState"),this._handleCaptchaRefresh=s.Global.after("refreshCaptchaFromState",function(i){var u=i.captchaConfig,h=this.get("contentBox"),g=h.one("div.captcha-container-wrapper");if(g){var p=g.one(".captcha-container");p&&p.remove(),u.captchaEnabled&&(g.append(s.Node.create('<div class="captcha-container"/>')),this.renderCaptcha())}},this)},renderCaptcha:function(){var i=this.get("contentBox");if(i){var u=i.one(".captcha-container"),h=u&&u.getDOMNode();if(h){var g=i.one("form.newsletter-form"),p=(0,a.Z)(s.config.win);r.DU(s.config.win,p),r.bI({formEl:g.getDOMNode(),win:s.config.win})}}},destructor:function(){this._handleCaptchaRefresh&&this._handleCaptchaRefresh.detach()},refreshFromSliceContent:function(i){var u=this.get("contentBox"),h=u.one("form.newsletter-form"),g=i.get("emailPlaceholder")||(0,o.t)("Email Address",null,{project:"scripts-v6.slide-rendering"});this._getEmailField(h).getDOMNode().setAttribute("placeholder",g);var p=i.get("submitButtonText")||"";this._getSubmitButton(h).set("innerHTML",p);var f=u.one(".form-submission-text"),m=i.get("submissionMessage")||{html:""};f.set("innerHTML",m.html);var _=u.one(".form-submission-html"),v=i.get("submissionHTML");_.set("innerHTML",v);var E=u.one(".form-disclaimer-text"),S=i.get("disclaimerMessage");E.set("innerHTML",S.html)}},{SLICE_TYPE:d().NEWSLETTER,CSS_PREFIX:"sqs-slice-newsletter"})},"1.0",{requires:["base","squarespace-form-submit","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},460437:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487),e=t(985913);YUI.add("squarespace-slide-rendering-slices-password",function(a){a.namespace("Squarespace.SlideRendering.Slices");var r=a.Squarespace.SlideRendering.Slices.Password=a.Base.create("Password",a.Squarespace.SlideRendering.Slices.Base,[],{renderUI:function(){a.UA.ios&&a.UA.safari||this.get("contentBox").one('input[type="password"]').focus()},bindUI:function(){r.superclass.bindUI.call(this);var s=this.get("contentBox"),n=s.one('input[type="password"]'),i=s.one(".password-form");n.after("valuechange",function(){this._hideErrorMessage()},this),i.on("submit",function(u){u.preventDefault(),this._hideErrorMessage(),this._authenticate()},this)},_authenticate:function(){if((0,e.F)(a)){this._showErrorMessage((0,o.t)("Log out to test.",null,{project:"scripts-v6.slide-rendering"}));return}var s=this.get("contentBox").one('input[type="password"]'),n=a.one("body").get("id"),i=a.Squarespace.API_ROOT+"auth/visitor",u={password:s.get("value")};n.indexOf("collection-")!==-1?(i+="/collection",u.collectionId=n.split("collection-")[1]):i+="/site",a.Data.post({headers:{"Content-Type":"application/json"},url:i,data:a.JSON.stringify(u),success:function(){window.location.reload(!0)},failure:function(){this._showErrorMessage((0,o.t)("Please try again.",null,{project:"scripts-v6.slide-rendering"})),this.get("contentBox").one('input[type="password"]').focus()}},this)},_showErrorMessage:function(s){var n=this.get("contentBox");n.one(".error-message").setHTML(s),n.addClass("show-error")},_hideErrorMessage:function(){this.get("contentBox").removeClass("show-error")}},{SLICE_TYPE:d().PASSWORD,CSS_PREFIX:"sqs-slice-password"})},"1.0",{requires:["base","squarespace-slide-rendering-slices-base","squarespace-util"]})},241211:function(c,b,t){"use strict";var l=t(825473),d=t.n(l);YUI.add("squarespace-slide-rendering-slices-rgb",function(o){o.namespace("Squarespace.SlideRendering.Slices"),o.Squarespace.SlideRendering.Slices.RGB=o.Base.create("RGB",o.Base,[],{getBrightness:function(){var e=this.get("color");return .2126*e.r+.7152*e.g+.0722*e.b},add:function(e){var a=this.get("color"),r=e.get("color");a.r+=r.r,a.g+=r.g,a.b+=r.b},darken:function(e){this.divide((100+e)/100)},divide:function(e){var a=this.get("color");a.r/=e,a.g/=e,a.b/=e,this._validate()},toString:function(){var e=this.get("color");return"rgb("+e.r+","+e.g+","+e.b+")"},_validate:function(){var e=this.get("color");o.Object.keys(e).forEach(function(a){e[a]=Math.round(Math.min(Math.max(0,e[a]),255))})},_fromHex:function(e){var a=d()(e,"rgb");return{r:a.red,g:a.green,b:a.blue}}},{ATTRS:{color:{value:{r:0,g:0,b:0},setter:function(e){return o.Lang.isString(e)&&(e[0]!=="#"&&(e="#"+e),e=this._fromHex(e)),e}}}})},"1.0",{requires:["base"]})},631333:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-slide-rendering-slices-social-icons",function(o){o.namespace("Squarespace.SlideRendering.Slices"),o.Squarespace.SlideRendering.Slices.SocialIcons=o.Base.create("SocialIcons",o.Squarespace.SlideRendering.Slices.Base,[],{},{SLICE_TYPE:d().SOCIAL_ICONS,CSS_PREFIX:"sqs-slice-social-icons"})},"1.0",{requires:["base","squarespace-slide-rendering-slices-base"]})},735357:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-slide-rendering-slices-sso",function(o){o.namespace("Squarespace.SlideRendering.Slices"),o.Squarespace.SlideRendering.Slices.SsoOptions=o.Base.create("SsoOptions",o.Squarespace.SlideRendering.Slices.Base,[o.Squarespace.SlideRendering.Slices.ClientRefresh],{},{SLICE_TYPE:d().SSO_OPTIONS,CSS_PREFIX:"sqs-slice-sso"})},"1.0",{requires:["base","squarespace-escaping-utils","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},598849:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-slide-rendering-slices-sub-heading",function(o){o.namespace("Squarespace.SlideRendering.Slices"),o.Squarespace.SlideRendering.Slices.SubHeading=o.Base.create("SubHeading",o.Squarespace.SlideRendering.Slices.Base,[o.Squarespace.SlideRendering.Slices.ClientRefresh],{refreshFromSliceContent:function(e){this.get("contentBox").one("h2").setHTML(e.get("text"))}},{SLICE_TYPE:d().SUB_HEADING,CSS_PREFIX:"sqs-slice-sub-heading"})},"1.0",{requires:["base","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh"]})},579297:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(415307),e=t.n(o);YUI.add("squarespace-slide-rendering-slices-twitter",function(a){a.namespace("Squarespace.SlideRendering.Slices"),a.Squarespace.SlideRendering.Slices.Twitter=a.Base.create("Twitter",a.Squarespace.SlideRendering.Slices.Base,[],{initializer:function(){var r=this.get("boundingBox"),s=r.all(".sqs-tweet");if(s.size()>0){s.each(function(i){i.all(".tweet-body a").each(function(u){u.setAttribute("target","_blank")})});var n=r.one(".sqs-tweets-container").getDOMNode();this._tweetGallery=new(e())(n,"sqs-tweet",a.config.win)}},destructor:function(){this._tweetGallery&&this._tweetGallery.destroy()}},{SLICE_TYPE:d().TWITTER,CSS_PREFIX:"sqs-slice-twitter",ATTRS:{}})},"1.0",{requires:["base","squarespace-slide-rendering-slices-base","squarespace-util"]})},792265:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-slide-rendering-slices-video",function(o){o.namespace("Squarespace.SlideRendering.Slices");var e=o.Squarespace.SlideRendering.Slices.Video=o.Base.create("Video",o.Squarespace.SlideRendering.Slices.Base,[o.Squarespace.SlideRendering.Slices.ClientRefresh],{destructor:function(){this._lightbox&&(this._lightbox.destroy(),delete this._lightbox)},bindUI:function(){e.superclass.bindUI.call(this),this.get("contentBox").one(".sqs-slice-play-button").on("click",function(){this._openVideo(),this._lightbox._overlay.once("hide",function(a){o.Global.fire("lightbox-hidden")},this)},this)},refreshFromSliceContent:function(a){var r=a.get("contentItem"),s=r.get("structuredContent"),n=s.get("oembed"),i=this.get("contentBox").one(".sqs-video-wrapper");if(o.Lang.isValue(i)&&i.remove(!0),o.Lang.isValue(n)&&o.Lang.isValue(n.html)&&n.html!==""){var u=n.html,h=n.providerName||"",g=this.get("contentBox"),p=g.one(".sqs-slice-play-button"),f=o.Squarespace.Escaping.escapeForHtmlTag(u);g.insertBefore('<div class="sqs-video-wrapper" data-load="false" data-html="'+f+'" data-providerName="'+h+'" ></div>',p)}},_openVideo:function(){var a=this.get("contentBox").one(".sqs-video-wrapper");o.Lang.isValue(a)&&(this._lightbox&&(this._lightbox.destroy(),delete this._lightbox),this._lightbox=new o.Squarespace.Lightbox2({controls:{previous:!1,next:!1},set:[{content:a}],currentSetIndex:0,videoLoaderOptions:{forceAutoplay:!0}}),this._lightbox.render())}},{SLICE_TYPE:d().VIDEO,CSS_PREFIX:"sqs-slice-video"})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-escaping-utils","squarespace-modal-lightbox","squarespace-slide-rendering-slices-base","squarespace-slide-rendering-slices-client-refresh","squarespace-video-loader"]})},894698:function(c,b,t){"use strict";var l=t(459913),d=t.n(l);YUI.add("squarespace-slides",function(o){o.config.win.Squarespace.onInitialize(o,function(){var e=o.one(".sqs-slide-container .sqs-slide"),a=e.getAttribute("data-slide-layout-id");o.Squarespace.SlideRendering.Layouts.Factory.create(a,{boundingBox:e,render:!0})})},"1.0",{requires:["squarespace-slide-rendering-layouts-factory"]})},891420:function(c,b,t){"use strict";var l=t(714487),d=t(518703),o=t(95672),e=t.n(o),a=t(868192),r=t(815211),s=t.n(r),n=t(840635),i=t(659519),u="https://www.chownow.com/lp/squarespace?utm_source=squarespace&utm_medium=squarespace_UI&utm_campaign=squarespace_referral",h={};h[s().APPLEPODCAST]={name:(0,l.t)("Apple Podcasts",null,{project:"scripts-v6-root"}),description:""},h[s().BANDSINTOWN]={name:(0,l.t)("Bandsintown",null,{project:"scripts-v6-root"}),description:""},h[s().BEHANCE]={name:(0,l.t)("Behance",null,{project:"scripts-v6-root"}),description:""},h[s().CODEPEN]={name:(0,l.t)("CodePen",null,{project:"scripts-v6-root"}),description:""},h[s().MEDIUM]={name:(0,l.t)("Medium",null,{project:"scripts-v6-root",notes:"oldKey: mediumSocialMediaProvider"}),description:""},h[s().MEETUP]={name:(0,l.t)("Meetup",null,{project:"scripts-v6-root"}),description:""},h[s().RDIO]={name:(0,l.t)("Rdio",null,{project:"scripts-v6-root"}),description:""},h[s().TWITCH]={name:(0,l.t)("Twitch",null,{project:"scripts-v6-root"}),description:""},h[s().VEVO]={name:(0,l.t)("Vevo",null,{project:"scripts-v6-root"}),description:""},h[s().VINE]={name:(0,l.t)("Vine",null,{project:"scripts-v6-root"}),description:""},h[s().VSCO]={name:(0,l.t)("VSCO",null,{project:"scripts-v6-root"}),description:""},h[s().YELP]={name:(0,l.t)("Yelp",null,{project:"scripts-v6-root"}),description:""},h[s().HOUZZ]={name:(0,l.t)("Houzz",null,{project:"scripts-v6-root"}),description:""},h[s().REDDIT]={name:(0,l.t)("Reddit",null,{project:"scripts-v6-root"}),description:""},h[s().STUMBLEUPON]={name:(0,l.t)("StumbleUpon",null,{project:"scripts-v6-root"}),description:""},h[s().IMDB]={name:(0,l.t)("IMDb",null,{project:"scripts-v6-root"}),description:""},h[s().GOODREADS]={name:(0,l.t)("Goodreads",null,{project:"scripts-v6-root"}),description:""},h[s().STITCHER]={name:(0,l.t)("Stitcher",null,{project:"scripts-v6-root"}),description:""},h[s().THEDOTS]={name:(0,l.t)("The Dots",null,{project:"scripts-v6-root"}),description:""},h[s().TRIPADVISOR]={name:(0,l.t)("TripAdvisor",null,{project:"scripts-v6-root"}),description:""},h[s().TIDAL]={name:(0,l.t)("TIDAL",null,{project:"scripts-v6-root"}),description:""},h[s().DRIBBBLE]={name:(0,l.t)("Connect to Dribbble",null,{project:"scripts-v6-root"}),accountName:(0,l.t)("Dribbble Username",null,{project:"scripts-v6-root"}),description:(0,l.t)("Enter your Dribbble account username to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>",null,{project:"scripts-v6-root"})},h[s().SNAPCHAT]={name:(0,l.t)("Connect to Snapchat",null,{project:"scripts-v6-root"}),accountName:(0,l.t)("Snapchat Username",null,{project:"scripts-v6-root"}),description:(0,l.t)("Enter your Snapchat account username to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>",null,{project:"scripts-v6-root"})},h[s().PINTEREST]={name:(0,l.t)("Connect to Pinterest",null,{project:"scripts-v6-root"}),accountName:(0,l.t)("Pinterest Username",null,{project:"scripts-v6-root"}),description:(0,l.t)("Enter your Pinterest account username to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>",null,{project:"scripts-v6-root"})},h[s().SMUGMUG]={name:(0,l.t)("Connect to SmugMug",null,{project:"scripts-v6-root"}),accountName:(0,l.t)("SmugMug Nickname",null,{project:"scripts-v6-root"}),description:(0,l.t)("Enter your SmugMug account nickname to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>",null,{project:"scripts-v6-root"})},h[s().CHOWNOW]={name:(0,l.t)("Connect to ChowNow",null,{project:"scripts-v6-root"}),accountName:(0,l.t)("ChowNow Company ID",null,{project:"scripts-v6-root"}),description:(0,l.t)('Enter your ChowNow Company ID to connect it to Squarespace and accept orders online. If you don\u2019t have a ChowNow account yet, <a href="{chowNowSignupLink}" target="_blank">sign up here</a>. <a href="{chowNowHelpLink}" target="_blank">Learn more</a>',{chowNowSignupLink:u,chowNowHelpLink:a.CHOWNOW},{project:"scripts-v6-root"})},h[s().EMAIL]={name:(0,l.t)("Add Email",null,{project:"scripts-v6-root"}),accountName:(0,l.t)("Email Address",null,{project:"scripts-v6-root"}),description:(0,l.t)("Enter your Email Address to add it to your Squarespace site. <strong>Please be sure this information is correct.</strong>",null,{project:"scripts-v6-root"})},h[s().ITUNES]={name:(0,l.t)("iTunes Store",null,{project:"scripts-v6-root"}),description:(0,l.t)(`Enter a URL to create an icon that links to the iTunes Store, App Store, iBooks Store, or Mac App Store. Find iTunes URLs with <a href="https://linkmaker.itunes.apple.com" target="_blank">Apple's Link Maker tool</a>.`,null,{project:"scripts-v6-root"})},h[s().GOOGLEPLAY]={name:(0,l.t)("Google Play",null,{project:"scripts-v6-root"}),description:(0,l.t)('Copy and paste a URL from <a href="http://play.google.com" target="_blank">play.google.com</a> to create an icon that links to Google Play music, apps, books, magazines, movies, or TV shows. ',null,{project:"scripts-v6-root"})},YUI.add("squarespace-social-authenticator",function(g){var p=function(_){return{loadingText:(0,l.t)("Loading\u2026",null,{project:"scripts-v6-root"}),style:"flyout",width:600,overlay:.5,flyoutPointerDirection:"centered",closeOthers:!1,tabs:[{title:_.name,icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:g.Squarespace.DialogFields.Description,config:{text:_.description,padding:[10,10]}},{ctor:g.Squarespace.DialogFields.Text,config:{"strings.title":_.accountName,name:"username",submitOnEnter:!0,required:!0}}]}],buttons:[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6-root"})},{type:"saveAndClose",title:_.name}]}},f=function(_){var v=[];return _.description&&_.description.length>0&&v.push({ctor:g.Squarespace.DialogFields.Description,config:{text:_.description,padding:[10,10]}}),v.push({ctor:g.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":(0,l.t)("{serviceName} URL",{serviceName:_.name},{project:"scripts-v6-root"}),"strings.placeholder":(0,l.t)("http://",null,{project:"scripts-v6-root"}),submitOnEnter:!0,required:!0}}),v.push({ctor:g.Squarespace.DialogFields.Text,config:{"strings.title":(0,l.t)("Label",null,{project:"scripts-v6-root"}),data:_.name,name:"username",required:!0}}),{loadingText:(0,l.t)("Loading\u2026",null,{project:"scripts-v6-root"}),style:"flyout",width:600,overlay:.5,flyoutPointerDirection:"centered",closeOthers:!1,title:(0,l.t)("Create {serviceName} Link",{serviceName:_.name},{project:"scripts-v6-root"}),icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:v,buttons:[{type:"cancel",title:(0,l.t)("Cancel",null,{project:"scripts-v6-root"})},{type:"saveAndClose",title:(0,l.t)("Add",null,{project:"scripts-v6-root"})}]}},m=p(h[s().SMUGMUG]);g.Squarespace.SocialAuthenticator=g.Base.create("socialAuthenticator",g.Base,[],{initializer:function(){this.publish("account-added"),this.publish("oauth-completed")},destructor:function(){this._connectedAccountEditor&&(this._connectedAccountEditor.destroy(),this._connectedAccountEditor=null)},addAccount:function(){var _=new g.Squarespace.EditingDialog(this.accountPickerDialogConfig());_.show();var v=_.getField("caption-position");v.set("optionClickCb",(function(E){_.cancel(),this.addNewAccountDialog(E)}).bind(this))},addNewAccountDialog:function(_){switch(_){case"smugmug":var v=new g.Squarespace.EditingDialog(m);v.once("send-requested",function(){this._startOAuth(_,null,{nickname:v.getData().username}),v.cancel()},this),v.show();break;case"twitter":case"instagram":this._startOAuth(_,null,{startSubscription:!0});break;case"dribbble":case"email":case"itunes":case"googleplay":case"bandsintown":case"behance":case"codepen":case"medium":case"meetup":case"rdio":case"twitch":case"vevo":case"vine":case"vsco":case"yelp":case"houzz":case"reddit":case"stumbleupon":case"chownow":case"snapchat":case"imdb":case"goodreads":case"stitcher":case"tidal":case"applepodcast":case"thedots":case"tripadvisor":this._createNonOAuthAccount(_);break;default:this._startOAuth(_)}},_getDialogConfigForService:function(_){switch(_){case s().DRIBBBLE:case s().SNAPCHAT:case s().PINTEREST:case s().EMAIL:case s().CHOWNOW:return p(h[_]);case s().APPLEPODCAST:case s().BANDSINTOWN:case s().BEHANCE:case s().CODEPEN:case s().GOODREADS:case s().GOOGLEPLAY:case s().HOUZZ:case s().IMDB:case s().ITUNES:case s().MEDIUM:case s().MEETUP:case s().RDIO:case s().REDDIT:case s().STITCHER:case s().STUMBLEUPON:case s().THEDOTS:case s().TIDAL:case s().TRIPADVISOR:case s().TWITCH:case s().VEVO:case s().VINE:case s().VSCO:case s().YELP:return f(h[_])}return null},_createNonOAuthAccount:function(_){var v=s()[_.toUpperCase()];if(this._isOnlyOneOfTypeAllowed(v)){var E=this._getExistingAccount(v);if(E){this._showEditorForExistingAccount(E);return}}var S=new g.Squarespace.EditingDialog(this._getDialogConfigForService(v)),y=function(){n.Z.createNonOAuthAccount(v,_,S.getData()).then((function(C){S.close(),this._refreshConnectedAccounts(C.account),(0,i.Z)("engagement_connected_account_add",{serviceName:_})}).bind(this))};S.once("send-requested",y,this),S.show()},_isOnlyOneOfTypeAllowed:function(_){for(var v in e())if(e()[v]===_)return!0;return!1},_getExistingAccount:function(_){var v=g.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray();return g.Array.find(v,function(E){return E.get("serviceId")===_})},_showEditorForExistingAccount:function(_){this._connectedAccountEditor=new g.Squarespace.Widgets.ConnectedAccount({model:_}),this._connectedAccountEditor.showEditor()},_startOAuth:function(_,v,E){E||(E={}),v&&(E.existingAccountId=v),d.Z.authenticate({serviceProvider:_,urlParams:{authenticationType:"website"},customParameters:E}).then((function(S){var y=S.socialConfig;y&&(this.fire("oauth-completed"),this._refreshConnectedAccounts(y))}).bind(this)).catch(function(S){return d.Z.logException(S,_)})},reauthenticate:function(_,v){d.Z.authenticate({serviceProvider:_,urlParams:{authenticationType:"website"},customParameters:v?{existingAccountId:v}:null}).then((function(){this.fire("oauth-completed")}).bind(this)).catch(function(E){return d.Z.logException(E,_)})},_refreshConnectedAccounts:function(_){n.Z.refreshConnectedAccounts().then((function(){if(_){var v=g.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray(),E=g.Array.find(v,function(S){return S.get("id")===_.externalAuthenticationId||S.get("id")===_.id});this.fire("account-added",{account:E})}}).bind(this))},accountPickerDialogConfig:function(){var _=g.Array.map(this.get("accounts"),function(v){return{value:v,title:g.Squarespace.ConnectedAccountConfigs[v].displayName,icon:g.Squarespace.ConnectedAccountConfigs[v].icon}},this);return{loadingText:(0,l.t)("Loading\u2026",null,{project:"scripts-v6-root"}),style:"flyout",width:700,overlay:.5,closeOthers:!1,flyoutPointerDirection:"centered",verticalHeight:"fit",primaryTabs:[{title:(0,l.t)("Add Account",null,{project:"scripts-v6-root"}),icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:g.Squarespace.DialogFields.MultiOption,config:{name:"caption-position",hideDisabled:!0,defaultValue:"normal",className:"round square button icon32",iconDropPx:32,columns:6,options:_}}]}]}}},{ATTRS:{accountTypes:{value:[]},accounts:{value:["facebook","twitter","tumblr","dropbox2017","foursquare","instagram","flickr","youtube","vimeo","linkedin","dribbble","pinterest","smugmug","fivehundredpix","email","github","soundcloud","spotify","itunes","googleplay","bandsintown","behance","codepen","medium","meetup","rdio","twitch","vevo","vine","vsco","yelp","houzz","reddit","stumbleupon","chownow","snapchat","imdb","goodreads","stitcher","tidal"],validator:function(_){if(!g.Lang.isArray(_))return!1;var v=g.Array.find(_,function(E){return!g.Object.hasKey(g.Squarespace.ConnectedAccountConfigs,E)});return v===null}}}})},"1.0",{requires:["array-extras","base","squarespace-connected-account-configs","squarespace-dialog","squarespace-dialog-description","squarespace-dialog-multi-option","squarespace-dialog-text","squarespace-models-connected-accounts"]})},336111:function(c,b,t){"use strict";var l=t(714487),d=t(423394),o=t(465874),e=t.n(o),a=t(311064),r=t.n(a);YUI.add("squarespace-social-button",function(s){s.namespace("Squarespace");var n=e(),i=400,u=function(g){return g},h=s.Squarespace.SocialButton=s.Base.create("socialButton",s.Widget,[],{initializer:function(g){this._servicesRendered={},g.services.forEach(function(p){this._servicesRendered[p]=!1},this),this._open=!1,this._anims={},this._serviceRenderers={},this._serviceRenderers[n.REDDIT]=this._renderReddit,this._serviceRenderers[n.FACEBOOK]=this._renderFacebook,this._serviceRenderers[n.TWITTER]=this._renderTwitter,this._serviceRenderers[n.LINKEDIN]=this._renderLinkedIn,this._serviceRenderers[n.STUMBLE]=this._renderStumble,this._serviceRenderers[n.PINTEREST]=this._renderPinterest,this._serviceRenderers[n.TUMBLR]=this._renderTumblr,this.publish("serviceRendered",{defaultFn:this._defaultServiceRendered,context:this}),this.publish("buttonClicked",{defaultFn:this._defaultButtonClicked,preventable:!0,context:this}),this.publish("close",{defaultFn:this.close,preventable:!0,context:this}),this.publish("servicesRendered"),this._serviceContainer=s.Node.create('<div class="ss-social-button-container"></div>')},_defaultServiceRendered:function(g){var p=g.details[0];this._servicesRendered[p]=!0,this._allServicesRendered()&&(this.set("loaded",!0),this.fire("servicesRendered",this))},open:function(){this._open=!0,this._openList()},close:function(){this._open=!1,this._closeList()},_onClick:function(g){this.fire("buttonClicked",g)},_defaultButtonClicked:function(g){this.get("loaded")?this.isOpen()?this.close():this.open():this.get("loading")||(this.once("servicesRendered",function(){this.set("loading",!1)},this),this.set("loading",!0),this._renderServices(),this.open())},isOpen:function(){return this._open},destructor:function(){this._stopAnimations()},_stopAnimations:function(){s.Object.values(this._anims).forEach(function(g){g.stop(),g=null})},_closeList:function(){var g=this.get("contentBox");if(g._node&&g.inDoc()){var p=g.one(".ss-social-list-wrapper"),f;p&&p._node&&p.inDoc()&&(f=new s.Anim({node:p,duration:.3,easing:s.Easing.easeOutStrong,to:{height:0,opacity:0}}),this._anims.close=f,f.on("end",function(){p.setStyle("overflow",null),this.fire("listClose")},this),f.run())}},_openList:function(){var g=this.get("contentBox");if(g._node&&g.inDoc()){var p=g.one(".ss-social-button-wrapper"),f=g.one(".ss-social-list-wrapper"),m=g.one(".ss-social-button-list"),_=p.get("offsetWidth"),v=p.get("offsetHeight"),E=f.get("offsetWidth"),S=Math.abs(_-E),y,C;f.setStyles({left:(_<=E?-1:1)*S/2,top:v});var O=s.DOM.viewportRegion(),A=m.get("region"),I=A.height+A.top,D=I-(O.height+O.top),T=O.left-A.left,B=T>0,N=20,P=20;D>0&&f.setStyle("top",parseInt(f.getComputedStyle("top"),10)-D-N),B&&f.setStyle("left",parseInt(f.getComputedStyle("left"),10)+T+P),f&&f._node&&f.inDoc()&&(C=new s.Anim({node:f,duration:.3,easing:s.Easing.easeOutStrong,to:{height:m.get("offsetHeight"),opacity:1}}),this._anims.open=C,C.on("end",function(){f.setStyle("overflow","visible");var x=s.config.win.document;s.UA.touchEnabled&&s.one(x.documentElement).setStyle("cursor","pointer"),y=s.one(x).on("click",function(R){R.target.ancestor(".ss-social-list-wrapper",!0)||(this.fire("close"),y.detach(),y=null,s.one(x.documentElement).setStyle("cursor",""))},this),this.fire("listOpen")},this),C.run())}},_allServicesRendered:function(){return s.Object.values(this._servicesRendered).every(u)},bindUI:function(){var g=this.get("contentBox"),p=g.one(".ss-social-button-wrapper");this.after("loadingChange",this._onLoadingChange,this),p.on("click",this._onClick,this)},_onLoadingChange:function(){this.get("boundingBox").ancestor(".squarespace-social-buttons").toggleClass("loading",this.get("loading"))},renderUI:function(){var g=this.get("contentBox");g.append('<div class="ss-social-button-wrapper"><div class="ss-social-button"><span class="ss-social-button-icon"></span>'+(0,l.t)("Share",null,{project:"scripts-v6-root"})+"</div></div>"),g.append('<div class="ss-social-list-wrapper"><div class="ss-social-button-list"></div></div>')},_renderServices:function(){var g=this.get("contentBox").one(".ss-social-button-list");this.get("services").forEach(function(p){p in this._serviceRenderers&&this._serviceRenderers[p].call(this,g)},this)},_defaultTimeoutCb:function(g,p){var f=r()(e()),m=(0,l.t)("(Social Button) Loading render script for service: {name} too longer than {sub1} seconds. Skipping.",{sub1:h.SCRIPT_TIMEOUT/1e3},{project:"scripts-v6-root"});return function(){this.fire("serviceRendered",g),p&&p.hide()}},_defaultFailureCb:function(g,p){var f=r()(e()),m=(0,l.t)("(Social Button) Service {name} render script failed to load.",null,{project:"scripts-v6-root"});return function(){this.fire("serviceRendered",g),p&&p.hide()}},_renderReddit:function(g){var p=this._serviceContainer.cloneNode(!0),f=this.get("url");p.addClass("reddit"),p.append(s.Node.create(h.REDDIT_LINK)),p.on("click",function(m){window.open("http://reddit.com/submit?url="+encodeURIComponent(f),(0,l.t)("Submit to Reddit",null,{project:"scripts-v6-root"})),m.stopImmediatePropagation()}),g.append(p),this.fire("serviceRendered",n.REDDIT)},_renderTumblr:function(g){var p=this._serviceContainer.cloneNode(!0),f={url:this.get("url"),name:this.get("title")},m=s.QueryString.stringify(f);p.addClass("tumblr"),p.append(s.substitute(h.TUMBLR_TAG_TEMPLATE,{query:m})),g.append(p),s.Get.script(h.TUMBLR_URL,{onSuccess:function(){s.later(i,this,function(){this.fire("serviceRendered",n.TUMBLR)})},onFailure:this._defaultFailureCb(n.TUMBLR,p),onTimeout:this._defaultTimeoutCb(n.TUMBLR,p),timeout:h.SCRIPT_TIMEOUT,context:this,win:s.config.win})},_renderFacebook:function(g){var p=this._serviceContainer.cloneNode(!0),f=this.get("url");p.addClass("facebook"),p.append(s.Node.create(s.substitute(h.FACEBOOK_TAG_TEMPLATE,{url:f}))),g.append(p);var m=s.config.win,_=m.Static.SQUARESPACE_CONTEXT.facebookAppId,v=m.Static.SQUARESPACE_CONTEXT.facebookApiVersion,E=s.substitute(h.FACEBOOK_URL,{locale:d.Vv(d.uu())});s.Get.script(E,{onSuccess:function(){m.FB&&s.later(i,this,function(){m.FB.init({appId:_,xfbml:!1,version:v}),m.FB.XFBML&&m.FB.XFBML.parse&&m.FB.XFBML.parse(),this.fire("serviceRendered",n.FACEBOOK)})},onFailure:this._defaultFailureCb(n.FACEBOOK,p),onTimeout:this._defaultTimeoutCb(n.FACEBOOK,p),timeout:h.SCRIPT_TIMEOUT,context:this})},_renderTwitter:function(g){var p=this._serviceContainer.cloneNode(!0),f=this.get("title"),m=this.get("url");p.append(s.Node.create('<a href="https://twitter.com/share" data-text="'+s.Escape.html(f||"")+'" data-url="'+s.Escape.html(m)+'"class="twitter-share-button">'+(0,l.t)("tweet",null,{project:"scripts-v6-root"})+"</a>")),p.addClass("twitter"),g.append(p),s.Get.script(h.TWITTER_URL,{onSuccess:function(){s.later(i,this,function(){this.fire("serviceRendered",n.TWITTER)})},onFailure:this._defaultFailureCb(n.TWITTER,p),onTimeout:this._defaultTimeoutCb(n.TWITTER,p),timeout:h.SCRIPT_TIMEOUT,context:this})},_renderLinkedIn:function(g){var p=this._serviceContainer.cloneNode(!0),f=this.get("url");p.addClass("linkedin"),p.append(s.Node.create(s.substitute(h.LINKEDIN_URL_TEMPLATE,{url:f}))),g.append(p),window.IN=void 0,s.Get.script(h.LINKEDIN_URL,{onSuccess:function(){s.later(i,this,function(){this.fire("serviceRendered",n.LINKEDIN)})},onFailure:this._defaultFailureCb(n.LINKEDIN,p),onTimeout:this._defaultTimeoutCb(n.LINKEDIN,p),timeout:h.SCRIPT_TIMEOUT,context:this})},_renderStumble:function(g){var p=this._serviceContainer.cloneNode(!0),f=this.get("url"),m=this.get("id");p.addClass("stumble"),p.append(s.Node.create(s.substitute(h.STUMBLE_TAG_TEMPLATE,{url:f,id:m}))),g.append(p),s.Get.script(h.STUMBLE_URL,{onSuccess:function(){s.later(i,this,function(){window.STMBLPN&&(window.STMBLPN.wasProcessLoaded&&(window.STMBLPN.wasProcessLoaded=!1),window.STMBLPN.processWidgets()),this.fire("serviceRendered",e().STUMBLE)})},onFailure:this._defaultFailureCb(n.STUMBLE,p),onTimeout:this._defaultTimeoutCb(n.STUMBLE,p),timeout:h.SCRIPT_TIMEOUT,context:this})},_renderPinterest:function(g){var p=this._serviceContainer.cloneNode(!0),f=this.get("assetUrl"),m=this.get("url"),_=Static.SQUARESPACE_CONTEXT.website.authenticUrl+g.ancestor(".squarespace-social-buttons").getAttribute("data-full-url");this.get("systemDataId")?(p.addClass("pinterest"),p.append(s.Node.create(s.substitute(h.PINTEREST_TAG_TEMPLATE,{url:encodeURIComponent(f||m),pageUrl:encodeURIComponent(_)}))),g.append(p),s.Get.script(h.PINTEREST_URL,{onSuccess:function(){s.later(i,this,function(){this.fire("serviceRendered",e().PINTEREST)},this)},onFailure:this._defaultFailureCb(n.PINTEREST,p),onTimeout:this._defaultTimeoutCb(n.PINTEREST,p),timeout:h.SCRIPT_TIMEOUT,context:this})):this.fire("serviceRendered",n.PINTEREST)}},{TWITTER_URL:"//platform.twitter.com/widgets.js",TUMBLR_URL:"//platform.tumblr.com/v1/share.js",FACEBOOK_URL:"//connect.facebook.net/{locale}/sdk.js",LINKEDIN_URL:"//platform.linkedin.com/in.js",STUMBLE_URL:"http://platform.stumbleupon.com/1/widgets.js",PINTEREST_URL:"//assets.pinterest.com/js/pinit.js",LINKEDIN_URL_TEMPLATE:'<script type="IN/Share" data-url="{url}" data-counter="right"><\/script>',FACEBOOK_TAG_TEMPLATE:'<div id="fb-root"></div><fb:like href="{url}" send="false" layout="button_count" show_faces="true"></fb:like>',PINTEREST_TAG_TEMPLATE:'<a href="//pinterest.com/pin/create/button?url={pageUrl}&media={url}" class="pin-it-button" count-layout="horizontal"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="'+(0,l.t)("Pin It",null,{project:"scripts-v6-root"})+'" /></a>',TUMBLR_TAG_TEMPLATE:'<a href="https://tumblr.com/share/link?{query}" title="'+(0,l.t)("Share on Tumblr",null,{project:"scripts-v6-root"})+`" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url('https://platform.tumblr.com/v1/share_1T.png') top left no-repeat transparent;">`+(0,l.t)("Share on Tumblr",null,{project:"scripts-v6-root"})+"</a>",SCRIPT_TIMEOUT:5e3,STUMBLE_TAG_TEMPLATE:'<su:badge layout="1" location="{url}"></su:badge>',REDDIT_LINK:'<a href="#"><img src="https://old.reddit.com/static/spreddit7.gif" alt="'+(0,l.t)("submit to reddit",null,{project:"scripts-v6-root"})+'" border="0" /></a>',ATTRS:{url:{value:window.location.href},title:{value:document.title||window.location.href},services:{},recordType:{},assetUrl:{value:""},systemDataId:{value:""},loaded:{value:!1},loading:{value:!1}}})},"1.0",{requires:["anim","base","escape","node","querystring-stringify","squarespace-util","substitute","widget"]})},478294:function(c,b,t){"use strict";var l=t(465874),d=t.n(l),o=t(586745),e=t.n(o),a=t(792606),r=t.n(a);YUI.add("squarespace-social-buttons",function(s){s.namespace("Squarespace");var n=s.config.win.Static,i=s.Squarespace.SocialButton,u=s.Squarespace.SocialButtons=s.Base.create("socialButtons",s.Base,[],{initializer:function(g){var p=this.get("services");this._buttonConfigs={},this._buttons=[],this._eventHandles=[],p.length>0?(this._scanForButtons(),this._initializeButtons(),this._bindEvents(),this._renderButtons()):this._markButtonsAsEmpty()},_markButtonsAsEmpty:function(){s.all(u.SOCIAL_BUTTON_CONTAINER).addClass("empty")},_scanForButtons:function(){var g=s.all(u.SOCIAL_BUTTON_CONTAINER),p=this.get("services");g.each(function(f){var m=f.getAttribute(u.TITLE),_=n.SQUARESPACE_CONTEXT.website.baseUrl+f.getAttribute(u.FULL_URL),v=parseInt(f.getAttribute(u.RECORD_TYPE),10),E=f.getAttribute(u.ASSET_URL),S=f.getAttribute(u.SYSTEM_DATA_ID),y=s.guid(u.ID_PREFIX);this._buttonConfigs[y]={id:y,title:m,url:_,recordType:v,assetUrl:E,systemDataId:S,services:p,node:f}},this)},_initializeButtons:function(){this._buttons=s.Array.map(s.Object.values(this._buttonConfigs),function(g){return new i(g)})},_bindEvents:function(){this._eventHandles.push(this.after("cleanup",this._defaultDestroy,this))},_renderButtons:function(){this._buttons.filter(this._excludeOnlyPinterest,this).forEach(function(g){var p=g.get("id");g.render(this._buttonConfigs[p].node)},this)},destructor:function(){this.fire("cleanup")},_unbindEvents:function(){this._eventHandles.forEach(function(g){g.detach(),g=null})},_defaultDestroy:function(){this._destroyButtons(),this._unbindEvents(),this.fire("destroyed")},_destroyButtons:function(){this._buttons.forEach(function(g){g.destroy()},this)},_excludeOnlyPinterest:function(g){var p=g.get("recordType");return!(p!==e().IMAGE&&this._onlyServiceIsPinterest(g))},_onlyServiceIsPinterest:function(g){var p=g.get("services");return p.length===1&&p[0]===d().PINTEREST}},{FULL_URL:"data-full-url",ASSET_URL:"data-asset-url",SYSTEM_DATA_ID:"data-system-data-id",RECORD_TYPE:"data-record-type",ID_PREFIX:"social-",TITLE:"data-title",SOCIAL_BUTTON_CONTAINER:".squarespace-social-buttons",ATTRS:{services:{valueFn:function(){return s.Array.map(s.Object.keys(n.SQUARESPACE_CONTEXT.website.shareButtonOptions||{}),function(g){return parseInt(g,10)})}}}}),h=[];s.config.win.Squarespace.onInitialize(s,function(){s.all(".squarespace-social-buttons").isEmpty()||h.push(new s.Squarespace.SocialButtons)}),s.config.win.Squarespace.onDestroy(s,function(){h.forEach(function(g){g.destroy()}),h.length=0})},"1.0",{requires:["array-extras","base","node","squarespace-social-button"]})},178577:function(){YUI.add("squarespace-spinner",function(c){c.namespace("Squarespace").Spinner=c.Base.create("Spinner",c.Widget,[],{renderUI:function(){this.get("boundingBox").addClass(this.get("color"));var b=this.get("size");c.Lang.isNumber(b)||this.get("boundingBox").addClass(b)},spin:function(){this.get("boundingBox").show()},stop:function(){this.get("boundingBox").hide()},addClass:function(b){this.get("boundingBox").addClass(b)}},{CSS_PREFIX:"sqs-spin",NS:"spinner",ATTRS:{size:{value:"default",setter:function(b){return c.Lang.isNumber(b)&&(this.set("width",b),this.set("height",b)),b}},color:{value:"light"}}})},"1.0",{requires:["base","widget"]})},321814:function(c,b,t){"use strict";var l=t(714487),d=t(834455),o=t.n(d),e=t(806037),a=t.n(e),r=t(563535),s=t.n(r),n=t(210750),i=t.n(n);YUI.add("squarespace-ss-badge",function(u){var h={};h[s().BLACK]="black",h[s().WHITE]="white";var g={};g[a().TOP_LEFT]="top-left",g[a().TOP_CENTER]="top-center",g[a().TOP_RIGHT]="top-right",g[a().BOTTOM_LEFT]="bottom-left",g[a().BOTTOM_CENTER]="bottom-center",g[a().BOTTOM_RIGHT]="bottom-right";var p={};p[o().ALL]="all-devices",p[o().DESKTOP_ONLY]="desktop-only";var f=50;u.namespace("Squarespace.Widgets");var m=u.Squarespace.Widgets.SSBadge=u.Base.create("SSBadge",u.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._coverNode=u.Node.create('<div class="sqs-ss-badge-cover"></div>'),this.after("render",function(){u.Global.fire("website-overlay:rendered",{selector:"."+this.getProperty("CSS_PREFIX")})}),this.resize=i()(this.handleResize.bind(this),f),u.config.win.addEventListener("resize",this.resize)},destructor:function(){this._coverNode.remove(!0),u.config.win.removeEventListener("resize",this.resize)},handleResize:function(){this.isMobile()?this.get("boundingBox").addClass("is-mobile"):this.get("boundingBox").removeClass("is-mobile")},isMobile:function(){if(!u.config||!u.config.win)return u.UA.mobile;var _=u.config.win.innerWidth,v=_<=768;return u.UA.mobile||v},renderUI:function(){m.superclass.renderUI.call(this),this.isMobile()&&this.get("boundingBox").addClass("is-mobile"),this.get("contentBox").append('<a href="'+this.get("goTo")+'" target="_blank"><div class="badge-closed"><div class="badge-symbol"></div></div><div class="badge-open"><div class="badge-open-inner"><h2>'+(0,l.t)("Powered by Squarespace",null,{project:"scripts-v6-root"})+"</h2></div></div></a>"),u.one("body").append(this._coverNode)},syncUI:function(){m.superclass.syncUI.call(this);var _=this.get("boundingBox");_.setAttribute("data-type",h[this.get("type")]),_.setAttribute("data-position",g[this.get("position")]),_.setAttribute("data-devices",p[this.get("devices")]),this.get("autoHide")?(_.addClass("badge-auto-hide"),this._checkAutoHide()):(_.removeClass("badge-auto-hide"),_.addClass("badge-visible"))},bindUI:function(){var _=this.get("contentBox");this.after(["typeChange","positionChange","autoHideChange","devicesChange"],this.syncUI,this),_.on("mouseenter",function(){_.addClass("badge-is-open")}),_.on("mouseleave",function(){_.removeClass("badge-is-open")}),this._registerEvent(u.one(u.config.win).on("scroll",this._checkAutoHide,this))},_checkAutoHide:function(){if(this.get("autoHide")){var _=this.get("boundingBox"),v=u.one("body"),E=u.one("html"),S=E.get("scrollTop")||v.get("scrollTop"),y=E.get("scrollHeight")||v.get("scrollHeight"),C=u.config.win.innerHeight,O=S>y-C-50;this._isPositionTop()&&S<50||O?_.addClass("badge-visible"):_.removeClass("badge-visible")}},_isPositionTop:function(){var _=[a().TOP_LEFT,a().TOP_CENTER,a().TOP_RIGHT];return _.indexOf(this.get("position"))!==-1}},{CSS_PREFIX:"sqs-ss-badge",ATTRS:{type:{value:s().BLACK,validator:function(_){return!!u.Object.hasValue(s(),_)}},position:{value:a().BOTTOM_LEFT,validator:function(_){return!!u.Object.hasValue(a(),_)}},autoHide:{value:!0,validator:u.Squarespace.AttrValidators.isBoolean},devices:{value:o().ALL,validator:function(_){return!!u.Object.hasValue(a(),_)}},goTo:{valueFn:function(){var _=u.QueryString.stringify({channel:"word_of_mouth",subchannel:"customer",source:"badge",campaign:u.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"])});return"https://www.squarespace.com?"+_},validator:u.Squarespace.AttrValidators.isString,readOnly:!0}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-ss-widget"]})},918065:function(){YUI.add("squarespace-stringset-utils-mixin",function(c){c.namespace("Squarespace.Mixins").StringSetUtils=c.Base.create("stringSetUtils",c.Base,[],{memberInSet:function(b,t,l){return l&&(b=c.Array.map(b,function(d){return d.toLowerCase()}),t=t.toLowerCase()),c.Array.indexOf(b,t)!==-1},cleanMember:function(b){var t=new RegExp("[,<>]","g");return c.Lang.trim(b.replace(t,""))},filterMember:function(b,t,l){return c.Array.filter(b,function(d){return l?d.toLowerCase()!==t.toLowerCase():d!==t})},diffStringSets:function(b,t,l){var d=b,o=t;return d.length<o.length&&(o=b,d=t),c.Array.filter(d,function(e){return!this.memberInSet(o,e,l)},this)}},{})},"1.0",{requires:["base","squarespace-util"]})},117997:function(c,b,t){"use strict";function l(g,p,f){return p in g?Object.defineProperty(g,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):g[p]=f,g}const d="sqs-pdp-gallery-slide",o="sqs-pdp-gallery-slide-active",e="sqs-pdp-gallery-slide-transition",a="ProductItem-gallery-slides-item",r="ProductItem-gallery-thumbnails-item",s="sqs-active-slide",n=0;class i{constructor(p,f){l(this,"thumbnails",void 0),l(this,"images",void 0),l(this,"currentIndex",n),l(this,"incrementCurrentIndex",()=>{const m=(this.currentIndex+1)%this.images.length;this.setNewIndex(m)}),l(this,"decrementCurrentIndex",()=>{let m=this.currentIndex-1;m=m<0?m+this.images.length:m,this.setNewIndex(m)}),l(this,"setNewIndex",m=>{m!==this.currentIndex&&(this.images.forEach(_=>_.classList.remove(e)),this.images[m].classList.add(e),this.images[this.currentIndex].classList.add(e),this.setInactiveImage(this.currentIndex),this.setActiveImage(m),this.currentIndex=m)}),l(this,"destroy",()=>{this.images.forEach(_=>{_.classList.remove(o,s,d,e)}),this.thumbnails.forEach(_=>{_.removeEventListener("click",this.handleThumbnailClick)});const m=document.querySelector("iframe#sqs-site-frame");m!==null&&m.contentWindow?m.contentWindow.removeEventListener("keyup",this.handleKeypress):document.removeEventListener("keyup",this.handleKeypress)}),l(this,"handleKeypress",m=>{const _=m.key||m.keyCode;_==="ArrowRight"||_===39?this.incrementCurrentIndex():(_==="ArrowLeft"||_===37)&&this.decrementCurrentIndex()}),l(this,"handleThumbnailClick",m=>{const v=m.currentTarget.getAttribute("data-thumbnail-index");v&&this.setNewIndex(+v-1)}),l(this,"setActiveImage",m=>this.images[m].classList.add(o,s)),l(this,"setInactiveImage",m=>this.images[m].classList.remove(o,s)),l(this,"attachEventListeners",()=>{this.thumbnails.forEach(_=>{_.addEventListener("click",this.handleThumbnailClick)});const m=document.querySelector("iframe#sqs-site-frame");m!==null&&m.contentWindow?m.contentWindow.addEventListener("keyup",this.handleKeypress):document.addEventListener("keyup",this.handleKeypress)}),this.images=Array.from(p.getElementsByClassName(a)),this.images.forEach((m,_)=>{_===n&&m.classList.add(o,s),m.classList.add(d)}),this.thumbnails=Array.from(f.getElementsByClassName(r)),this.attachEventListeners()}}var u=t(798589),h=t(869003);YUI.add("squarespace-products-collection-item-v2",function(g){g.namespace("Squarespace.SystemCollections.Products").ItemV2=g.Base.create("systemCollectionsProductsItemV2",g.Base,[],{initializer:function(){this._syncSelectedVariantOptions(),this._bindUI(),this._syncUI(),this.get("isLightboxEnabled")&&this._lightboxifyImages()},destructor:function(){this._resizeEvent&&this._resizeEvent.detach(),this._tweakChangeEvent&&this._tweakChangeEvent.detach(),this._tweakResetEvent&&this._tweakResetEvent.detach(),this._tweakCloseEvent&&this._tweakCloseEvent.detach();var f=this.get("host").one(".product-variants");f&&f.getDOMNode().removeEventListener("variant:change",this._variantChangeEvent),g.Array.each(this._selectChangeEvents,function(m){m.detach()}),this._resizeEvent=null,this._tweakChangeEvent=null,this._tweakResetEvent=null,this._tweakCloseEvent=null,this._selectChangeEvents=null,this._variantChangeEvent=null,this._zoomInstances&&this._zoomInstances.length>0&&this._destroyImageZoomInstances(),this.get("slideshow")&&this.get("slideshow").destroy(!0),this.get("lightbox")&&this._destroyLightbox()},_bindUI:function(){this._resizeEvent=g.on("windowresize",function(){this._syncUI()},g.config.win,this),this._tweakChangeEvent=g.Global.on("tweak:change",this._tweakChangeHandler,this),this._tweakResetEvent=g.Global.on("tweak:reset",this._syncUI,this),window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()&&g.on("beforeunload",function(){this.destroy(!0)},this)},_syncUI:function(){this.get("isProductGallerySlideshow")||this.get("isProductQuickView")?this.get("slideshow")?this._refreshSlideshowGallery():this._renderSlideshowGallery():this.get("isProductGalleryStacked")&&(this.get("isRenderedStackedGallery")?this._refreshStackedGallery():this._renderStackedGallery()),this._loadRelatedItemImages(),this._attachVariantImageListeners()},_attachVariantImageListeners:function(){var f=this.get("host").one(".product-variants");f&&(this._variantChangeEvent&&(f.getDOMNode().removeEventListener("variant:change",this._variantChangeEvent),this._variantChangeEvent=null),this.get("isProductGallerySlideshow")||this.get("isProductQuickView")?(this._variantChangeEvent=this._handleSlideshowGalleryVariantChange.bind(this),f.getDOMNode().addEventListener("variant:change",this._variantChangeEvent)):this.get("isProductGalleryStacked")&&!u.isMobile()&&(this._variantChangeEvent=this._handleStackedGalleryVariantChange.bind(this),f.getDOMNode().addEventListener("variant:change",this._variantChangeEvent)))},_handleStackedGalleryVariantChange:function(f){var m=f.detail.selectedVariant,_=m.mainImageId;if(_){var v=this.get("slideContainer").getDOMNode(),E=v.querySelector(".focus-image");if(E){E.classList.remove("focus-image");var S=E.getAttribute("data-slide-index");v.insertBefore(E,v.children[S])}var y=v.querySelector('[data-image-id="'+_+'"]');y&&(y.classList.add("focus-image"),v.insertBefore(y,v.firstChild))}},_handleSlideshowGalleryVariantChange:function(f){var m=this.get("slideContainer");if(m){var _=m.getDOMNode(),v=this.get("slideshow"),E=f.detail.selectedVariant;if(E.mainImageId){var S=E.mainImageId,y=_.querySelector('[data-image-id="'+S+'"]');if(y){var C=y.getAttribute("data-slide-index");C&&v.setNewIndex(C-1)}}}},_tweakChangeHandler:function(f){switch(f.getName()){case"tweak-product-item-spacing":case"tweak-product-item-gallery-design":case"tweak-product-item-gallery-width":case"tweak-product-item-gallery-aspect-ratio":case"tweak-product-item-gallery-thumbnail-width":this._syncUI();case"tweak-product-item-image-zoom-enabled":case"tweak-product-item-image-zoom-behavior":case"tweak-product-item-image-zoom-factor":this.get("isImageZoomEnabled")?this._instantiateZoom():this._destroyImageZoomInstances();case"tweak-product-item-lightbox-enabled":this.get("isLightboxEnabled")?this._lightboxifyImages():this.get("lightbox")&&this._destroyLightbox();break;case"tweak-related-products-items-per-row":case"tweak-related-products-item-spacing":case"tweak-related-products-image-aspect-ratio":this._loadRelatedItemImages();break}},_syncSelectedVariantOptions:function(){this._selectChangeEvents=[],this.get("host").all(".variant-option").each(function(f){var m=f.one(".variant-select-wrapper");if(m){var _=f.one("select"),v=_.one("option").get("text");m.setAttribute("data-text",v),this._selectChangeEvents.push(f.delegate("change",function(E){var S=_.get("value"),y=S===""?v:S;m.setAttribute("data-text",y)},"select"))}},this)},_renderSlideshowGallery:function(){this.get("isRenderedStackedGallery")&&(this._cleanupStackedGallery(),this.set("isRenderedStackedGallery",!1)),this.get("isImageZoomEnabled")&&this._instantiateZoom(),this._instantiateSlideshow()},_instantiateSlideshow:function(){if(!(this.get("images").size()<1)){var f=this.get("slideContainer").getDOMNode(),m=this.get("thumbnailContainer")&&this.get("thumbnailContainer").getDOMNode();m&&this.set("slideshow",new i(f,m)),this.get("images").each(function(_){_.plug(g.Squarespace.Loader2,{load:!0,mode:"fill"})}),this.get("images").each(function(_){_.fire("refresh")}),this._loadSlideshowThumbnails()}},_loadSlideshowThumbnails:function(){this.get("images").size()>1&&this.get("thumbnails").each(function(f){f.plug(g.Squarespace.Loader2,{load:!0,mode:"fill"})})},_loadRelatedItemImages:function(){this._onImageLoadEvents=[],this.get("relatedItemImages").each(function(f){f.hasClass("loaded")?f.fire("refresh"):(f.plug(g.Squarespace.Loader2,{load:!0,mode:"fill"}),this._onImageLoadEvents.push(f.on("load",function(){f.hasClass("ProductItem-relatedProducts-image--primary")&&f.ancestor(".ProductItem-relatedProducts-item").addClass("image-is-loaded")})))},this)},_refreshSlideshowGallery:function(){this.get("thumbnails").each(function(f){f.fire("refresh")}),this.get("images").each(function(f){f.fire("refresh")})},_destroySlideshowAndResetImageStyles:function(){this.get("slideshow").destroy(!0),this.get("images").each(function(f){f.setStyles({position:"",top:"",left:"",right:"",bottom:"",zIndex:"",width:"",height:"",overflow:""})})},_renderStackedGallery:function(){this.get("slideshow")&&(this._destroySlideshowAndResetImageStyles(),this.set("slideshow",null)),this.get("isImageZoomEnabled")&&this._instantiateZoom(),this.get("images").each(function(f){f.plug(g.Squarespace.Loader2,{load:!0,mode:null})}),this.set("isRenderedStackedGallery",!0)},_refreshStackedGallery:function(){this.get("images").each(function(f){f.fire("refresh")})},_cleanupStackedGallery:function(){var f=this.get("host").getDOMNode(),m=f.querySelector(".cloned-focus-image");m&&m.remove();var _=f.querySelector(".original-focus-image");_&&_.classList.remove(".original-focus-image")},_lightboxifyImages:function(){if(!(this.get("images").size()<1||this.get("isProductQuickView"))){var f=[];this.get("images").each(function(_){f.push({content:_})});var m=this.get("images").size()>1;this._imageClickEvent=this.get("slideContainer").delegate("click",function(_){this.set("lightbox",new g.Squarespace.Lightbox2({controls:{previous:m,next:m},set:f,currentSetIndex:parseInt(_.currentTarget.getAttribute("data-slide-index"),10)-1})),this.get("lightbox").render()},".ProductItem-gallery-slides-item",this)}},_destroyLightbox:function(){this.get("lightbox").destroy(!0),this.set("lightbox",null),this._imageClickEvent.detach(),this._imageClickEvent=null},_instantiateZoom:function(){this._destroyImageZoomInstances(),this._zoomInstances=[],this.get("images").each(function(f){this._zoomInstances.push(new g.Squarespace.ImageZoom({host:f.get("parentNode"),behavior:this.get("isImageZoomBehaviorClick")?"click":"hover",zoom:this.get("imageZoomFactor")}))},this)},_destroyImageZoomInstances:function(){!this._zoomInstances||this._zoomInstances.length<1||(g.Array.each(this._zoomInstances,function(f){f.destroy(!0)}),this._zoomInstances=null)}},{ATTRS:{host:{value:null,validator:function(f){var m=g.one(f);return g.instanceOf(m,g.Node)},writeOnce:!0},slideContainer:{valueFn:function(){return this.get("host").one(".ProductItem-gallery-slides")}},thumbnailContainer:{valueFn:function(){return this.get("host").one(".ProductItem-gallery-thumbnails")}},images:{valueFn:function(){return this.get("host").all(".ProductItem-gallery-slides-item-image")}},thumbnails:{valueFn:function(){return this.get("host").all(".ProductItem-gallery-thumbnails-item-image")}},relatedItemImages:{valueFn:function(){return this.get("host").all(".ProductItem-relatedProducts-image")}},isProductQuickView:{valueFn:function(){return this.get("host").ancestor(".sqs-product-quick-view-lightbox")}},isImageZoomEnabled:{getter:function(){return g.one(".tweak-product-item-image-zoom-enabled")}},isImageZoomBehaviorClick:{getter:function(){return g.one(".tweak-product-item-image-zoom-behavior-click")}},imageZoomFactor:{getter:function(){return parseFloat(g.Squarespace.Template.getTweakValue("tweak-product-item-image-zoom-factor"))}},isLightboxEnabled:{getter:function(){return g.one(".tweak-product-item-lightbox-enabled")&&!this.get("isImageZoomBehaviorClick")}},isProductGallerySlideshow:{getter:function(){return g.one(".tweak-product-item-gallery-design-slideshow")}},isProductGalleryStacked:{getter:function(){return g.one(".tweak-product-item-gallery-design-stacked")}}}});var p=[];g.config.win.Squarespace.onInitialize(g,function(){g.all(".ProductItem.products-collection-v2").each(function(f){if(f.get("parentNode").hasClass("sqs-product-quick-view-content"))return!1;f.one(".ProductItem-details .sqs-add-to-cart-button").removeClass("sqs-editable-button"),p.push(new g.Squarespace.SystemCollections.Products.ItemV2({host:f}))})}),g.config.win.Squarespace.onDestroy(g,function(){p.forEach(function(f){f.destroy()}),p.length=0})},"1.0",{requires:["base","node","squarespace-beforeunload","squarespace-gallery-ng","squarespace-image-loader","squarespace-image-zoom","squarespace-public-api","squarespace-widgets-lightbox2"]})},552247:function(c,b,t){"use strict";var l=t(714487),d=t(842186),o=t.n(d);YUI.add("squarespace-products-collection-list-v2",function(e){e.namespace("Squarespace.SystemCollections.Products").ListV2=e.Base.create("systemCollectionsProductsListV2",e.Base,[],{initializer:function(){this._loadImages(),this._bindUI(),this._syncUI()},destructor:function(){this._resizeEvent&&this._resizeEvent.detach(),this._tweakChangeEvent&&this._tweakChangeEvent.detach(),this._tweakResetEvent&&this._tweakResetEvent.detach(),e.Array.each(this._onImageLoadEvents,function(r){r.detach()}),this._resizeEvent=null,this._tweakChangeEvent=null,this._tweakResetEvent=null,this._onImageLoadEvents=null},_loadImages:function(){this._onImageLoadEvents=[],this.get("images").each(function(r){r.plug(e.Squarespace.Loader2,{load:!0,mode:"fill"}),this._onImageLoadEvents.push(r.on("load",function(){r.hasClass("ProductList-image--primary")&&r.ancestor(".ProductList-item").addClass("image-is-loaded")}))},this)},_bindUI:function(){this._resizeEvent=e.on("resize",function(){this._syncUI()},e.config.win,this),this._tweakChangeEvent=e.Global.on("tweak:change",this._tweakChangeHandler,this),this._tweakResetEvent=e.Global.on("tweak:reset",this._syncUI,this),window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()&&e.on("beforeunload",function(){this.destroy(!0)},this)},_syncUI:function(){this._adjustSubPixelValues(),this.get("images").each(function(r){r.fire("refresh")})},_adjustSubPixelValues:function(){var r=this.get("host").all(".ProductList-item");r&&(r.setStyle("width",""),r.setStyle("width",Math.floor(parseInt(r.getStyle("width")[0],10))+"px"))},_tweakChangeHandler:function(r){var s=r.getName(),n=r.getValue();s==="tweak-product-list-image-aspect-ratio"||s==="tweak-product-list-item-spacing"||s==="tweak-product-list-filter-display"||s==="tweak-product-list-filter-width"?this._syncUI():s==="tweak-product-list-items-per-row"?(this._previewTweakChangeItemsPerRow(),this._syncUI()):s==="tweak-product-list-item-hover-behavior"&&n===(0,l.t)("Show Alternate Image",null,{project:"scripts-v6.system-collections"})&&(this._loadImages(),this._previewTweakChangeItemHoverBehavior())},_previewTweakChangeItemsPerRow:function(){var r=parseInt(e.Squarespace.Template.getTweakValue("tweak-product-list-items-per-row"),10);this.get("host").all(".ProductList-item").setStyle("clear","none"),this.get("host").all(".ProductList-item:nth-child("+r+"n+1)").setStyle("clear","left"),this.get("host").one(".ProductList-grid").setAttribute("data-items-per-row",r)},_previewTweakChangeItemHoverBehavior:function(){var r=this.get("host").one(".ProductList-image--alt"),s=function(){r.setStyle("opacity",1),e.later(1e3,this,function(){r.setStyle("opacity","")})};r.hasClass("loaded")?s():r.once("load",function(){s()})}},{ATTRS:{host:{value:null,validator:function(r){var s=e.one(r);return e.instanceOf(s,e.Node)},writeOnce:!0},images:{getter:function(){var r=e.one(".tweak-product-list-item-hover-behavior-show-alternate-image")&&e.one(".tweak-product-list-meta-position-under");return r&&!e.UA.mobile?this.get("host").all(".ProductList-image[data-src]"):this.get("host").all(".ProductList-image--primary[data-src]")}}}});var a=[];e.config.win.Squarespace.onInitialize(e,function(){e.all(".ProductList.products-collection-v2").each(function(r){var s=e.config.win.Static.SQUARESPACE_CONTEXT.tweakJSON["tweak-product-list-items-per-row"];r.one(".ProductList-grid").getDOMNode().dataset.itemsPerRow=s,a.push(new e.Squarespace.SystemCollections.Products.ListV2({host:r}))})}),e.config.win.Squarespace.onDestroy(e,function(){a.forEach(function(r){r.destroy()}),a.length=0})},"1.0",{requires:["base","node","squarespace-beforeunload","squarespace-image-loader","squarespace-image-zoom","squarespace-public-api"]})},694671:function(c,b,t){"use strict";var l=t(714487),d=t(408549),o=t(924647),e=t(659519);YUI.add("squarespace-system-error",function(a){a.namespace("Squarespace"),a.Squarespace.SystemError=Class.create({initialize:function(r,s,n){this.url=a.Squarespace.Escaping.escapeForHtml(r),this.data=s,this.format=n,a.config.win.__clearError=this.clear},clear:function(){a.one(".sqs-system-error").remove(),a.one(o.j8+".sqs-system-error-overlay").remove()},show:function(){var r,s="";if(this.data.cleaned)r='<div style="font-weight: normal; font-size: 22px; margin-top: -2px;">'+(0,l.t)("Something Went Wrong!",null,{project:"scripts-v6-root"})+'</div><div style="font-weight: normal; font-size: 13px; padding-top: 5px;">'+(0,l.t)("Our system has encountered an error.  This exception has been automatically logged and reported.  We will return shortly.",null,{project:"scripts-v6-root"})+"</div>";else if(this.data.network){if(s=(0,l.t)("Unable to connect to Squarespace.  Please try again.",null,{project:"scripts-v6-root"}),a.Lang.isString(this.data.error)&&this.data.error.length>0&&(s=this.data.error),r='<div style="font-weight: normal; font-size: 17px;">'+s+"</div>",this.url)try{(0,e.Z)("system_network_error",{urlRequested:this.url})}catch{}}else s=a.Squarespace.Escaping.escapeForHtml(this.data.error||this.data.message||""),r=(0,d.Z)('<div style="font-weight: normal; font-size: 17px;">{sub1} &nbsp;<span style="color: #888;">({sub2})</span></div><br/><pre>{sub3}</pre>',{sub1:this.url,sub2:this.format.toUpperCase(),sub3:s.replace(new RegExp(`
`,"g"),"<br/>")});if(!a.one(".sqs-system-error")){var n='<input type="button" value="Clear" onclick="Y.config.win.__clearError();"/>',i="position: absolute; -webkit-user-select: text; left: 25px; top: 25px; right: 25px; font-size: 12px; color: #fff; padding: 26px 20px 20px 80px; border-radius: 5px; overflow: auto; height: 90%; z-index: 10000001;",u=r+'<br/><br/><input type="button" value="'+(0,l.t)("Reload Page",null,{project:"scripts-v6-root"})+'" onclick="Y.config.doc.location.reload();"/> &nbsp; ';u+=n+"<br/><br/><br/>",this.data.errorKey&&(u+='<span style="color: #777; font-size: 10px;">'+this.data.errorKey+"</span>"),this.errorEl=a.Node.create('<div class="sqs-system-error" style="'+i+'">'+u+"</div>"),a.one(a.config.doc.body).append(this.errorEl),this.overlayEl=a.Node.create('<div class="'+o.jI+' sqs-system-error-overlay"></div>'),this.overlayEl.setStyles({zIndex:1e7}),a.one(a.config.doc.body).append(this.overlayEl);var h=new a.Anim({node:this.overlayEl,to:{opacity:1},duration:.35,easing:a.Easing.easeOutStrong});h.run()}}})},"1.0",{requires:["squarespace-escaping-utils","squarespace-util"]})},647251:function(){YUI.add("squarespace-tab-view",function(c){var b="tab-wrapper",t="active",l="tabId",d="-self",o="-children",e=c.namespace("Squarespace.Widgets").TabView=c.Base.create("tabView",c.Squarespace.Widgets.SSWidget,[],{initializer:function(a){this._saveChildWidgetDeclarations(),this._childWidgets={},this._tabContentWrapperNodes=[],this._activeChildWidget=null,this._activeChildId=null,this.publish("tab-switch-requested",{defaultFn:this._switchTabsDefFn,preventable:!0,context:this,emitFacade:!0})},destructor:function(){this._childWidgetDeclarations=null,this._childWidgetOrder=null,this._childWidgetIndexes=null,this._activeChildWidget=null,this._activeChildId=null,this._parent=null,this._tabContentWrapperNodes=null,c.Object.each(this._childWidgets,function(a){a&&a.destroy({remove:!0})},this),this._childWidgets=null},renderUI:function(){e.superclass.renderUI.call(this);var a=this.getProperty("CSS_PREFIX"),r=this.get("contentBox"),s="."+a+d,n=r.one(s);if(n)this._set("tabBox",n);else throw new Error(this.name+": No element found matching tabBox selector ("+s+").");var i=this.get("tabContentBox");i.inDoc()||r.appendChild(i),i.addClass(a+o),this._selectInitialTab()},bindUI:function(){e.superclass.bindUI.call(this);var a=this.get("id");this.get("tabBox").on(a+"|click",function(s){s.preventDefault(),s.stopPropagation();var n=s.target.ancestor(function(i){return!!i.getData(l)},!0);n&&this.switchTabs(n.getData(l))},this);var r=this.get("parent")||this._parent;r&&r.on(a+"|tab-switch-requested",function(s){this.fire("tab-switch-requested",{tabId:null,originalTabSwitchEvent:s.originalTabSwitchEvent||s})},this)},_saveChildWidgetDeclarations:function(){this._childWidgetDeclarations={},this._childWidgetIndexes={},this._childWidgetOrder=[],this._recurseThroughDeclarations(),c.Array.each(this._childWidgetOrder,function(a,r){this._childWidgetIndexes[a]=r},this)},_recurseThroughDeclarations:function(){var a=arguments[0];c.Lang.isUndefined(a)&&(a=this.get("widgets")),c.Array.each(a,function(r){if(!c.Lang.isNull(r))if(r.widgets)this._saveChildWidgetDeclarations(r.widgets);else if(r.ctor)this._childWidgetDeclarations[r.id]=r,this._childWidgetOrder.push(r.id);else throw new Error(this.name+": No ctor or widgets array found in declaration")},this)},_selectInitialTab:function(){var a=this.get("initialTabId");if(!a){var r=null;if(this.get("tabBox").all("*").some(function(s){return s.getData(l)?(r=s,!0):!1},this),!r)return;a=r.getData(l)}this.switchTabs(a)},refreshCurrentTab:function(){this._switchTabs(this._activeChildId)},switchTabs:function(a){if(!c.Lang.isNull(a)&&!this._childWidgetDeclarations[a])throw new Error(this.name+": Tab id '"+a+"' does not exist");a!==this._activeChild&&this.fire("tab-switch-requested",{tabId:a})},getActiveChildId:function(){return this._activeChildId},getChildWidgets:function(){return this._childWidgets},_switchTabsDefFn:function(a){this._switchTabs(a.tabId)},_switchTabs:function(a){var r=this.get("tabBox"),s=this._activeChildId,n=this._childWidgetIndexes[s],i=this._childWidgets[s],u=a,h=this._childWidgetIndexes[u],g=this._childWidgets[u];if(!c.Lang.isNull(u)){var p="."+t;r.all(p).removeClass(t);var f,m;if(i&&(f=this._tabContentWrapperNodes[n]),g)m=this._tabContentWrapperNodes[h];else{m=c.Node.create("<div/>"),m.addClass(b),m.setAttribute("data-"+l,a),this.get("tabContentBox").insert(m,h+1);var _=this._childWidgetDeclarations[u];g=new _.ctor(c.merge(_.config||{},{parent:this,container:m})),g.render(m),this._childWidgets[u]=g,this._tabContentWrapperNodes[h]=m}var v=c.bind(function(){this.get("destroyOnSwitch")?(f.remove(!0),i.destroy({remove:!0}),this._childWidgets[s]=null,this._tabContentWrapperNodes[n]=null):f.hide()},this);f&&m&&v(),m.show(),r.all("*").some(function(E){return E.getData(l)===u?(E.addClass(t),!0):!1},this),this._activeChildId=u,this._activeChildWidget=g}},toJSON:function(){var a=this.getAttrs();return{widgets:this._convertForTemplateContext(a.widgets),id:a.id,className:a.className,strings:a.strings}},_convertForTemplateContext:function(a){var r=[];return c.Array.each(a,function(s){if(!c.Lang.isNull(s))if(s.widgets)r.push({label:s.label||"",widgets:this._convertForTemplateContext(s.widgets)});else if(s.ctor)r.push({label:s.label||"",id:s.id});else throw new Error(this.name+": No ctor or widgets array found in declaration")},this),r},_validateWidgets:function(a){return c.Lang.isArray(a)?c.Array.some(a,function(r){if(c.Lang.isUndefined(r.ctor)){if(!c.Lang.isUndefined(r.widgets))return!this._validateWidgetGroupDeclaration(r)}else return!this._validateWidgetDeclaration(r);return!0},this):(console.warn(this.name+": An array of tab item declarations is required."),!1)},_validateWidgetDeclaration:function(a){if(!c.Lang.isString(a.id)||!a.ctor||!c.Lang.isFunction(a.ctor))return!1},_validateWidgetGroupDeclaration:function(a){var r=a.widgets;return r?c.Array.some(r,function(s){return!this._validateWidgetDeclaration},this):!1}},{CSS_PREFIX:"sqs-tab-view",HANDLEBARS_TEMPLATE:"tab-view.html",ATTRS:{strings:{value:{title:"",description:""}},tabBox:{value:null,readOnly:!0},tabContentBox:{valueFn:function(){return c.Node.create("<div/>")},writeOnce:"initOnly"},initialTabId:{value:null},destroyOnSwitch:{value:!1,validator:c.Lang.isBoolean},widgets:{value:[],validator:"_validateWidgets",initOnly:!0},switchAnimation:{value:null}}})},"1.0",{requires:["base","squarespace-ss-widget","squarespace-tab-view-tab-group-template","squarespace-tab-view-tab-template","squarespace-tab-view-template"]})},556158:function(c,b,t){"use strict";var l=t(714487),d=t(659519);YUI.add("squarespace-terms-of-service-overlay",function(o){var e=o.namespace("Squarespace.Widgets").TermsOfService=o.Base.create("termsOfServiceOverlay",o.Squarespace.Widgets.SSWidget,[o.Overlay],{renderUI:function(){e.superclass.renderUI.call(this),this._animateIn()},bindUI:function(){e.superclass.bindUI.call(this);var a=this.get("contentBox");o.Squarespace.EscManager&&this.after("visibleChange",this._toggleEscapeManager,this),o.delegate("click",this._acceptNewToS,a,".button.accept",this),o.delegate("click",this._rejectNewToS,a,".button.cancel, .close-button",this),this.after("frameContentChange",this._updateFrameContent,this)},_toggleEscapeManager:function(){this.get("visible")?o.Squarespace.EscManager.addTarget(this):o.Squarespace.EscManager.removeTarget(this)},_animateIn:function(){this.get("boundingBox").setStyles({opacity:1,transform:"scale(1)"})},_animateOut:function(){var a=new o.Anim({node:this.get("boundingBox"),duration:.3,easing:o.Easing.easeOutStrong,to:{opacity:0,transform:"scale(0.94)"},from:{opacity:1,transform:"scale(1)"}});this._anims.add(a),a.after("end",function(){this.set("visible",!1),this.destroy()},this),a.run()},_acceptNewToS:function(a){a.halt(),this._setUserToS()},_setUserToS:function(){var a=this.get("websiteSettings"),r=a.get("lastAgreedTermsOfService"),s=this.get("mostRecentToSVersion");a.set("lastAgreedTermsOfService",this.get("mostRecentToSVersion")),a.save(o.bind(function(){(0,d.Z)("engagement_terms_of_service_updated",{oldTOSVersion:r,agreedTOSVersion:s}),this._animateOut()},this))},_rejectNewToS:function(a){a.preventDefault();var r=this.get("websiteSettings").get("mostRecentToSVersion");new o.Squarespace.Widgets.Confirmation({"strings.title":(0,l.t)("Reject Terms of Servce",null,{project:"scripts-v6-root"}),"strings.message":(0,l.t)("Are you sure you wish to reject the Terms of Service? You will not be able to edit your website.",null,{project:"scripts-v6-root"}),"strings.confirm":(0,l.t)("Reject Terms of Service",null,{project:"scripts-v6-root"})}).on("confirm",function(){o.Squarespace.Analytics.trackInternal("engagement_terms_of_service_rejected",{rejectedVersion:r}),window.location="http://www.squarespace.com"},this)}},{HANDLEBARS_TEMPLATE:"terms-of-service-overlay.html",CSS_PREFIX:"sqs-terms-of-service-overlay",ATTRS:{websiteSettings:{setter:function(a){return o.instanceOf(a,o.Squarespace.Models.WebsiteSettings)?a:new o.Squarespace.Models.WebsiteSettings(a)}},mostRecentToSVersion:{},endPoint:{value:"/api/config/acceptTos"},tosURL:{value:"https://www.squarespace.com/terms-of-service"},strings:{value:{title:(0,l.t)("Updated Terms of Service",null,{project:"scripts-v6-root"}),accept:(0,l.t)("I accept, continue to my account.",null,{project:"scripts-v6-root"}),cancel:(0,l.t)("Cancel",null,{project:"scripts-v6-root"})}},iframeHeight:{value:400},align:{value:{node:null,points:[o.WidgetPositionAlign.TL,o.WidgetPositionAlign.TL]}},zIndex:{value:300001}}})},"1.0",{requires:["base","overlay","squarespace-escmanager","squarespace-models-website-settings","squarespace-ss-widget","squarespace-terms-of-service-overlay-template","squarespace-util","squarespace-widgets-confirmation"]})},293805:function(c,b,t){"use strict";var l=t(714487),d=t(439939),o=t(181298),e=t(553772);YUI.add("squarespace-text-editor-commands-pasteplain",function(a){var r=a.Lang.sub('<html style="height:100%;margin:0;"><body contenteditable=true style="min-height:100%;margin:0;padding:{grid}px;box-sizing:border-box;"><script>document.addEventListener("DOMContentLoaded", function() {document.body.addEventListener("paste", function(e) {e.preventDefault();var text = e.clipboardData.getData("text/plain");document.execCommand("insertText", false, text);});});<\/script></body></html>',{grid:o.GRID_PX});a.namespace("Squarespace.TextEditorCommands"),a.Squarespace.TextEditorCommands.PastePlain=a.Base.create("TextEditorCommandsPastePlain",a.Base,[],{openPasteModal:function(){var s=new a.Squarespace.Widgets.ConfirmationMedia({style:a.Squarespace.Widgets.ConfirmationMedia.TYPE.CONFIRM_OR_CANCEL,mediaType:a.Squarespace.Widgets.ConfirmationMedia.TYPE_MEDIA.IFRAME,mediaSrc:{srcDoc:r},"strings.confirm":(0,l.t)("OK",null,{project:"scripts-v6"}),"strings.cancel":(0,l.t)("Cancel",null,{project:"scripts-v6"}),"strings.title":(0,l.t)("Paste as Plain Text",null,{project:"scripts-v6"}),"strings.message":(0,l.t)("Paste into the box and hit OK. Squarespace will strip out special formatting and insert this content to your document as plain text.",null,{project:"scripts-v6"})});s.once("show",function(){var n=s.get("boundingBox").one("iframe").getDOMNode();n.contentDocument.body.focus(),n.contentDocument.body.contentEditable=!0}),s.once("confirm",function(){var n=s.get("boundingBox").one("iframe").getDOMNode(),i=n.contentDocument.body,u=this.PLAIN_TEXT_SCHEMA;if(!u){var h=e.lg[e.rg.PLAIN_TEXT];u=d.se.create(h),this.PLAIN_TEXT_SCHEMA=u}var g=d.aw(u,i),p=this.get("execCommand");p?p.call(this,"insertHTML",{html:g}):this._rte&&this._rte.insertHTML&&this._rte.insertHTML(g)},this)}})},"1.0",{requires:["base","squarespace-widgets-confirmation-media"]})},483431:function(c,b,t){"use strict";var l=t(700436),d=t.n(l),o=t(134521),e=t.n(o),a=t(181298),r=t(439939),s=t(988482),n=t.n(s),i=t(92980),u=t.n(i),h=t(208935),g=t(553772),p=t(614649),f=t(250632);YUI.add("squarespace-text-editor-toolbar",function(m){m.namespace("Squarespace");var _=r.NI,v=r.P,E=r.pc,S='<span class="{cssPrefix}-divider"></span>',y='<label title="{title}" for="{name}" class="{cssPrefix}-select"><span class="{cssPrefix}-select-facade {placeholderClass}">{facadeContent}</span><select name="{name}">{options}</select></label>',C='<option value="{command}" {selected} {disabled}>{title}{hotKey}</option>',O='<button type="button" title="{title}{hotKey}" {value} {disabled} class="{cssPrefix}-button {cssPrefix}-button-{icon} {activeClass}">{children}</button>',A={};A[v.link]=_.LINK;var I=["editorNode","items","visible","itemStates","selectionType","showLinkPreview","linkId"];function D(w){return m.Lang.sub(w,m.merge.apply(null,Array.prototype.slice.call(arguments,1)))}function T(w,k){return m.Array.find(w,function(q){var F=k[q.command];return F&&F.active===!0})}function B(w){w||(w=[]);var k=w.filter(function(q){return q.items});return k.reduce(function(q,F){return q[F.name]=F,q},{})}var N=m.Squarespace.TextEditorToolbar=m.Base.create("TextEditorToolbar",m.Squarespace.SSWidget,[m.Squarespace.TextEditorCommands.PastePlain],{initializer:function(){this.updatePositionOnScroll=this._updatePositionOnScroll.bind(this),this.closeOnScroll=this._closeOnScroll.bind(this),this.updatePositionOnResize=e()(this._updatePositionOnResize.bind(this),40,{leading:!0,trailing:!0})},renderUI:function(){this.get("boundingBox").addClass(h.NONINTERACTIVE_CLASSNAME),this.renderItems(),this.renderLinkPicker()},bindUI:function(){var w=this.get("contentBox");document.onpointerdown?w.on("pointerdown",this.handleMouseDown,this):w.on("mousedown",this.handleMouseDown,this),w.on("change",this.handleSelectChange,this)},syncUI:function(){this.get("visible")&&(this.cleanAfterPositioning(),this.setupPositioning(),this.get("contentBox").get("children").each(this.updateMenuItem.bind(this,this.get("itemStates"))))},syncAfterChange:function(w,k,q){if(!(!w.visible&&!k.visible)){var F=this.get("boundingBox");if(!k.visible){this.cleanAfterPositioning(),F.addClass(this.getClassName("hidden"));return}q||w.items!==k.items?(this.setAttrs({selects:B(k.items),forceReRender:!1}),this.renderItems()):w.itemStates!==k.itemStates&&this.get("contentBox").get("children").each(this.updateMenuItem.bind(this,k.itemStates)),w.visible?(w.editorNode!==k.editorNode||w.items!==k.items)&&(this.cleanAfterPositioning(),this.setupPositioning()):(F.removeClass(this.getClassName("hidden")),this.setupPositioning()),(w.showLinkPreview!==k.showLinkPreview||w.linkId!==k.linkId)&&this.toggleLinkPreview(k.showLinkPreview)}},destructor:function(){this.linkFlyout&&(this.linkFlyout.destroy(),this.linkFlyout=null),this.cleanAfterPositioning()},destroyMenu:function(){this.destroy(!0)},renderSelect:function(w,k,q){var F=T(q.items,w);return D(y,k,q,{placeholderClass:F?"":this.getClassName("select-placeholder"),facadeContent:F?F.title:q.placeholder||q.items[0].title,options:q.items.map(function(z){var j=w[z.command],X=E[z.command];return D(C,z,{selected:j&&j.active?"selected":"",disabled:j&&j.enabled===!1?"disabled":"",hotKey:X?" ("+X+")":""})}).join("")})},renderButton:function(w,k,q){var F=w[q.command],z=E[q.command];return D(O,k,q,{activeClass:F&&F.active?this.getClassName("button-active"):"",value:q.command?'value="'+q.command+'"':"",disabled:q.enabled===!1?"disabled":"",children:q.children||q.title,hotKey:z?" ("+z+")":""})},renderItems:function(){var w=this.get("itemStates"),k={cssPrefix:this.constructor.CSS_PREFIX},q=this.get("items")||[],F=q.map((function(j){return j.isDivider?D(S,k):j.items?this.renderSelect(w,k,j):this.renderButton(w,k,j)}).bind(this)).join("");this.get("contentBox").setHTML(F)},resolveLinkAttrs:function(w){return Array.isArray(w)&&w[0]?w[0]:w},updateState:function(w){var k=w.itemStates,q=k[_.LINK],F=w.viewFocused,z=!1,j=this.get("linkId");if(q&&q.active===!0){var X=this.resolveLinkAttrs(q.attrs);z=!!X.href,j=X.href?X.href:null}var J=w.editorId||this.get("editorId"),Q=this.get("forceReRender")||this.get("editorId")!==J,ie=this.getAttrs(I);F&&this.linkFlyout.get("isEditorOpen")&&this.linkFlyout.close(),this.setAttrs({editorId:J,editorNode:w.editorNode||this.get("editorNode"),items:w.items,visible:F||(this.linkFlyout?this.linkFlyout.get("isEditorOpen"):!1),itemStates:k,selectionType:w.selectionType,showLinkPreview:F&&z,cursorAtLink:z,editorSelectionCoords:w.editorSelectionCoords,linkId:j,forceReRender:Q}),this.syncAfterChange(ie,this.getAttrs(I),Q)},handleCommand:function(w){if(!w)return!1;if(w===_.LINK)return this.toggleLinkEditor(),!0;if(w===g.Ep.PASTE_PLAIN)return this.openPasteModal(),!0;var k=this.get("execCommand");return k.call(this,w)},renderLinkPicker:function(){var w=this.get("itemStates")[_.LINK];!w||!this.get("link")||(this.linkFlyout=new window.top.Y.Squarespace.Flyout.LinkEdit({getSelection:function(){return m.config.win.getSelection()}}),this.linkFlyout.after(["updateLink","removeLink"],(function(){(0,f.wJ)({value:this.linkFlyout.get("linkUrl")||null,blockTypeName:this.get("getBlockTypeName").call(this)}),this.get("execCommand").call(this,_.LINK,{href:this.linkFlyout.get("linkUrl")||null,target:this.linkFlyout.get("newWindow")?"_blank":null,textContent:this.linkFlyout.get("textContent")},{skipFocus:!0})}).bind(this)),this.linkFlyout.on("close",(function(){this.get("preserveCurrentSelection").call(this,null)}).bind(this)))},updateMenuItem:function(w,k){var q=k.getAttribute("for"),F=k.get("value"),z=this.get("selects"),j=q&&z[q];j?this.updateSelect(k,T(j.items,w),j.placeholder||j.items[0].title):F&&w[F]&&this.updateButton(k,w[F].enabled,w[F].active)},updateSelect:function(w,k,q){var F=w.one(this.getSelector("select-facade"));F.setContent(k?k.title:q),F.toggleClass(this.getClassName("select-placeholder"),!k);var z=w.one("select");z.set("value",k?k.value:"")},updateButton:function(w,k,q){k===!1?(w.removeClass(this.getClassName("button-active")),w.set("disabled",!0)):(w.toggleClass(this.getClassName("button-active"),!!q),w.removeAttribute("disabled"))},handleMouseDown:function(w){w.stopPropagation(),this.linkFlyout.get("isEditorOpen")&&(this.linkFlyout.setAttrs({isEditorOpen:!1}),this.toggleLinkEditor()),w.target.ancestor(this.getSelector("select"),!0,this.getSelector("content"))?this.get("preventEditorBlur").call(this):w.preventDefault(),w.target.get("nodeName")==="BUTTON"&&this.handleButtonClick(w)},handleButtonClick:function(w){var k=this.get("getBlockTypeName").call(this),q=w.target.get("value");p.BX({blockTypeName:k,command:q}),this.handleCommand(q)},handleSelectChange:function(w){var k=w.target;if(k&&k.get("nodeName")==="SELECT"){var q=k.get("value");(0,f.ru)({value:q,blockTypeName:this.get("getBlockTypeName").call(this)}),this.handleCommand(q)}},getTextContent:function(){var w=this.get("getEditor").call(this),k=w.view.state,q=r.Y0(k.schema.marks[_.LINK],k),F=q.mark,z=q.from,j=q.to,X=k.selection,J=X.from,Q=X.to;F&&J>z&&(J=z),F&&Q<j&&(Q=j);var ie=k.doc.cut(J,Q).textContent;return ie},toggleLinkEditor:function(){if(this.linkFlyout){var w=this.get("itemStates");if(this.linkFlyout.get("isEditorOpen"))this.linkFlyout.close();else if(this.get("selectionType")==="range"||w.link.active){var k=this.get("itemStates")[_.LINK],q=k.attrs?k.attrs[0]||k.attrs:{};this.linkFlyout.setAttrs({anchor:this.get("linkButton"),editorSelectionCoords:this.get("editorSelectionCoords"),textContent:this.getTextContent(),cursorAtLink:this.get("cursorAtLink"),forceUpdate:q.href&&!k.active}),this.get("preserveCurrentSelection").call(this),this.linkFlyout.openEditor(q.href,q.target==="_blank",null,null)}}},toggleLinkPreview:function(w){if(this.linkFlyout){var k=this.get("itemStates")[_.LINK];if(w){var q=k.attrs?k.attrs[0]||k.attrs:{};this.linkFlyout.setAttrs({editorSelectionCoords:this.get("editorSelectionCoords"),cursorAtLink:this.get("cursorAtLink"),textContent:this.getTextContent()}),this.linkFlyout.openPreview(q.href,q.target==="_blank",this.get("linkId"))}else this.linkFlyout.get("isPreviewOpen")&&this.linkFlyout.close()}},setupPositioning:function(){var w=this.get("editorNode"),k=u()(w,!1,!0)||m.config.doc.body;this.set("scrollNode",k),this.calculatePosition(),this.updatePosition(),n().addScrollListener(k,this.updatePositionOnScroll),n().addScrollListener(k,this.closeOnScroll),window.addEventListener("resize",this.updatePositionOnResize)},cleanAfterPositioning:function(){var w=this.get("scrollNode");w&&(n().removeScrollListener(w,this.updatePositionOnScroll),n().removeScrollListener(w,this.closeOnScroll)),this.updatePositionOnResize.cancel(),window.removeEventListener("resize",this.updatePositionOnResize)},calculatePosition:function(){var w=this.get("boundingBox"),k=this.get("editorNode"),q=this.get("scrollNode"),F=q.ownerDocument.defaultView,z={top:0,bottom:F.innerHeight,left:0,right:F.innerWidth},j=k.getBoundingClientRect(),X=["HTML","BODY"].indexOf(q.nodeName)>-1?z:q.getBoundingClientRect(),J=w.get("region"),Q=J.height,ie=J.width;this._pos={minTop:Math.max(z.top,X.top)+5,maxTop:Math.min(z.bottom,X.bottom)-5-Q,top:j.top-a.GRID_PX-Q,left:j.left,minLeft:Math.max(z.left,X.left)+a.GRID_PX,maxLeft:Math.min(z.right,X.right)-ie-a.GRID_PX}},updatePosition:function(){var w=this.get("boundingBox"),k=w.getDOMNode();this.get("destroyed")||!k||!k.ownerDocument.defaultView||(w.setStyle("left",d()(this._pos.left,this._pos.minLeft,this._pos.maxLeft)),w.setStyle("top",d()(this._pos.top,this._pos.minTop,this._pos.maxTop)))},_updatePositionOnScroll:function(w,k){this._pos.top+=k,this.updatePosition()},_closeOnScroll:function(w,k){var q=this.get("editorNode");if(q){var F=q.getBoundingClientRect();F.top>=0&&F.top<=window.innerHeight||F.bottom>=0&&F.bottom<=window.innerHeight||F.top<0&&F.bottom>=window.innerHeight||this.set("visible",!1)}},_updatePositionOnResize:function(){this.calculatePosition(),this.updatePosition()},getClassName:function(w){return N.CSS_PREFIX+"-"+w},getSelector:function(w){return"."+this.getClassName(w)}},{CSS_PREFIX:"sqs-rte-toolbar",KEY_COMMAND_MAP:A,getItems:p.kk,ATTRS:{cssPrefix:{valueFn:function(){return N.CSS_PREFIX}},render:{valueFn:function(){return m.config.doc.body}},height:{value:33},visible:{value:!1},editorNode:{},scrollNode:{},type:{value:"classic"},selectionType:{},selects:{valueFn:function(){return B(this.get("items"))}},getBlockTypeName:{value:function(){return"UNKNOWN"}},linkButton:{getter:function(){var w=g.ob.LINK.icon;return this.get("contentBox").one(this.getSelector("button-"+w))}},linkId:{},items:{valueFn:function(){var w=this.getAttrs(["link"]),k=this.getAttrs(["type"]);return p.kk(w,k)}},itemStates:{value:{}},link:{value:!0},showLinkPreview:{valueFn:function(){var w=this.get("itemStates"),k=w[_.LINK]&&w[_.LINK].attrs||{},q=k[0]?k[0].href:k.href;return!!q}},getEditor:{},preventEditorBlur:{},execCommand:{},preserveCurrentSelection:{}}}),P,x={},R=m.Squarespace.Singletons.TextEditorToolbar=function(w){var k=w.editorId;return x[k]=w,P||(P=new N(m.merge(w,{getEditor:function(){return x[this.get("editorId")]?x[this.get("editorId")].editor:{}},preventEditorBlur:function(){return x[this.get("editorId")]?x[this.get("editorId")].preventEditorBlur():!1},getBlockTypeName:function(){if(x[this.get("editorId")])return x[this.get("editorId")].blockTypeName},execCommand:function(q,F,z){var j=x[this.get("editorId")];return j&&j.execCommand?j.execCommand(q,F,z):!1},preserveCurrentSelection:function(q){return x[this.get("editorId")]?x[this.get("editorId")].preserveCurrentSelection(q):!1}})),P.destroyMenu=function(q){delete x[q],m.Object.size(x)===0&&(P.destroy(!0),P=null)}),P};R.KEY_COMMAND_MAP=A,R.getItems=p.kk},"1.0",{requires:["base","squarespace-ss-widget","squarespace-flyout-link-edit","squarespace-text-editor-commands-pasteplain"]})},263261:function(c,b,t){"use strict";var l=t(134521),d=t.n(l),o=t(174161),e=t(594127),a=t(439939),r=t(260175),s=t(352635),n=t(723796),i=t(208935),u=t(181298),h=t(714487),g=t(175424),p=t(614649),f=t(553772),m=t(924647),_=t(896093);function v(Zt,Te,qe){return Te in Zt?Object.defineProperty(Zt,Te,{value:qe,enumerable:!0,configurable:!0,writable:!0}):Zt[Te]=qe,Zt}class E{bindListeners(){this.scaledTextNode=(0,_.Z)(this.dom)}unbindListeners(){this.scaledTextNode.destroy()}constructor(Te){v(this,"ignoreMutation",()=>!0),v(this,"node",void 0),v(this,"dom",void 0),v(this,"contentDOM",void 0),v(this,"scaledTextNode",void 0),v(this,"update",qe=>qe.type.name!==a.NI.SCALED_TEXT||qe.sameMarkup(this.node)?!1:(this.render(),!0)),v(this,"destroy",()=>{this.unbindListeners()}),v(this,"render",()=>{const qe=document.createElement("div"),xt=document.createElement("span");qe.classList.add("sqsrte-scaled-text-container"),qe.classList.add("loaded"),xt.classList.add("sqsrte-scaled-text"),qe.appendChild(xt),this.dom=qe,this.contentDOM=xt}),this.node=Te,this.render(),this.bindListeners()}}var S=t(944933),y=t(337061),C=t(938077),O=t(188405),A=t(797400),I=t(875864);function D(Zt,Te,qe){return Te in Zt?Object.defineProperty(Zt,Te,{value:qe,enumerable:!0,configurable:!0,writable:!0}):Zt[Te]=qe,Zt}const T="#ffffff";class B{getColorValue(Te){const qe=(0,C.XNs)((0,y.d6)()),xt=(0,C.$jS)((0,y.d6)()),Gt=(0,C.XS9)((0,y.d6)(),this.blockSectionId),Li=xt.find(le=>le.themeName===Gt);if(!Li)return T;const mi=Te==null?void 0:Te.color;if(!mi||mi.type===I.$.THEME_COLOR){const le=this.backgroundEnabled?"text-highlight-color-on-background":"text-highlight-color",_e=(0,A.gM)(le,Li)||(0,A.Ir)(le);return(0,A._F)(_e,qe)}return(0,A.lA)(mi,qe)}setPluginState(Te){const{state:qe,dispatch:xt}=this.editorView,Gt=Te==null?void 0:Te.reduce((mi,le)=>{const _e=this.getColorValue(le);return mi[le==null?void 0:le.id]={...le,color:_e},mi},{}),Li=qe.tr.setMeta(a.YQ,Gt);Li.setMeta(a.cD,{textAttributes:Te}),xt&&xt(Li)}initializePluginState(){const Te=this.blockModel.get("textAttributes");this.setPluginState(Te)}onUpdateThemeStyles(){const Te=this.blockModel.get("textAttributes");Te==null||Te.forEach(qe=>{const xt=`[class=TextShape-node][data-text-attribute-id="${qe.id}"]`,Gt=this.contentNode.querySelector(xt),Li=this.getColorValue(qe);Gt.style.setProperty("--stroke",Li)})}onSectionThemeChange(Te){const qe=this.blockModel.get("textAttributes");qe&&Te===this.blockSectionId&&this.setPluginState(qe)}onContainerStylesChange(Te){var qe,xt;const Gt=Te,Li=this.blockModel.get("textAttributes");if(Li&&((qe=Gt.newVal)===null||qe===void 0?void 0:qe.backgroundEnabled)!==((xt=Gt.prevVal)===null||xt===void 0?void 0:xt.backgroundEnabled)){var mi;this.backgroundEnabled=!!(!((mi=Gt.newVal)===null||mi===void 0)&&mi.backgroundEnabled),this.setPluginState(Li)}}bindListeners(){this.blockModel.after("change",function(Te){let xt=Te.target.get("textAttributes");if(!xt)return;const Li=new DOMParser().parseFromString(this.blockModel.get("html"),"text/html").querySelectorAll(`.${S.KM}`),mi=Array.from(Li).map(_e=>_e.getAttribute(S.Ae));let le=!1;xt=xt==null?void 0:xt.filter(_e=>{const Me=mi.includes(_e==null?void 0:_e.id);return Me||(le=!0),Me}),le&&this.blockModel.set("textAttributes",xt,{silent:!0}),this.setPluginState(xt)},this),this.blockWidget.on("containerStylesChange",this.onContainerStylesChange,this),window.Y.Global.on("section:theme:change",this.onSectionThemeChange,this),window.Y.Global.on("colors:updateThemeStyles",()=>{this.onUpdateThemeStyles()})}unbindListeners(){this.blockModel.off("change"),this.blockWidget.off("containerStylesChange"),window.Y&&window.Y.Global&&(window.Y.Global.detach("section:theme:change",this.onSectionThemeChange,this),window.Y.Global.detach("colors:updateThemeStyles",this.onUpdateThemeStyles,this))}constructor(Te,qe,{blockModel:xt,blockWidget:Gt,contentNode:Li}){var mi;D(this,"node",void 0),D(this,"editorView",void 0),D(this,"blockModel",void 0),D(this,"blockWidget",void 0),D(this,"contentNode",void 0),D(this,"blockSectionId",void 0),D(this,"id",void 0),D(this,"backgroundEnabled",void 0),D(this,"dom",void 0),D(this,"contentDOM",void 0),D(this,"ignoreMutation",void 0),D(this,"destroy",void 0),D(this,"update",void 0),D(this,"_recoverMissingState",()=>{const le=this.blockModel.get("textAttributes");if(!(le==null?void 0:le.find(et=>(et==null?void 0:et.id)===this.node.attrs.id))){var Me;const et=a.cD.getState(this.editorView.state),$t=et==null||(Me=et.restoredTextAttributes)===null||Me===void 0?void 0:Me[this.node.attrs.id];let Ki=[];$t?Ki=[...le,{...$t,id:this.node.attrs.id}]:Ki=le==null?void 0:le.filter(pi=>(pi==null?void 0:pi.id)!==this.node.attrs.id),this.blockModel.set("textAttributes",Ki,{silent:!0})}}),D(this,"_render",()=>{const le=document.createElement("span");le.classList.add(S.KM),le.setAttribute(S.Ae,this.id),this.dom=le,this.contentDOM=le}),this.node=Te,this.editorView=qe,this.blockModel=xt,this.blockWidget=Gt,this.contentNode=Li,this.backgroundEnabled=Gt==null||(mi=Gt.get("containerStyles"))===null||mi===void 0?void 0:mi.backgroundEnabled,this.blockSectionId=O.I4(O.gk(this.contentNode)),this.id=this.node.attrs.id,setTimeout(()=>{this.initializePluginState()},0),this._recoverMissingState(),this._render(),this.bindListeners(),this.ignoreMutation=()=>!0,this.update=(le,_e,Me)=>le.type.name!==a.NI.HIGHLIGHT||le.sameMarkup(this.node)?!1:(this._render(),!0),this.destroy=function(){this.unbindListeners()}}}var N=t(210750),P=t.n(N),x=t(79306),R=t(472575),w=t(900391);function k(Zt,Te,qe){return Te in Zt?Object.defineProperty(Zt,Te,{value:qe,enumerable:!0,configurable:!0,writable:!0}):Zt[Te]=qe,Zt}const q="insertHTML",F="setSelection";function z(Zt){let{schemaType:Te,schema:qe,isInline:xt=!1,isLinkable:Gt=!1,initialData:Li,placeholder:mi,textAttributes:le}=Zt;const Me={schema:qe?(0,w.Ew)({schema:qe,isInline:xt,isLinkable:Gt}):(0,w.Ew)({schemaType:Te,isInline:xt,isLinkable:Gt}),initialData:Li,placeholder:mi,textAttributes:le};return(0,w.eK)(Me)}function j(Zt){let{maybeNodeToReplace:Te,maybeNodeToAppendTo:qe}=Zt;if(!Te&&!qe)throw new Error("TextEditor must be given a Node to either replace or mount within");if(!Te&&qe===!0)return{nodeToAppendTo:document.body};if(!Te&&qe&&typeof qe!="boolean")return{nodeToAppendTo:J(qe)};if(Te)return{nodeToReplace:J(Te)};throw new Error("Unexpected parameters given to TextEditor - cannot determine how to mount RTE")}function X(Zt){let{isInline:Te=!1,maybeTagName:qe}=Zt;return qe||(Te?"SPAN":"DIV")}function J(Zt){return"getDOMNode"in Zt?Zt.getDOMNode():Zt}class Q{_assignPropsFromConstructorParams(Te){let{blockTypeName:qe,blockWidget:xt,blockModel:Gt,commands:Li={},editable:mi,menuItems:le,type:_e}=Te;this._blockTypeName=qe??null,this._blockWidget=xt,this._blockModel=Gt,this._isEditable=mi,this._menuItems=le,this._schemaType=_e,this._commands={...Li??{},...this._getDefaultCommands()}}destroy(){clearTimeout(this._toolbarInitTimeout),this._unsubscribeToConfigWebSaveEvent&&this._unsubscribeToConfigWebSaveEvent(),this._unsubscribeToConfigWebSaveEvent=null,this._unmountRTE(),this._destroyToolbar(),this._destroyEditor(),this._isDestroyed=!0}getData(Te){if(Te||this._cachedHTML===void 0){var qe;this._cachedHTML=(qe=this._rte)===null||qe===void 0?void 0:qe.getHTML()}return this._cachedHTML}setData(Te){if(Te!==this._cachedHTML){var qe;(qe=this._rte)===null||qe===void 0||qe.setContent(Te,{preserveSelection:!0,preserveWhitespace:!0}),this._cachedHTML=Te}}getNode(){return this._rteNode}setEditable(Te){Te!==this._isEditable&&(this._isEditable=Te,this._rte&&this._rte.setEditable(Te),this._updateToolbar())}focus(Te){if(!this._rte)throw new Error("Tried to focus RTE, but no RTE exists");let qe;if(typeof(Te==null?void 0:Te.top)=="number"){const Gt=this._rte.view.posAtCoords(Te);Gt&&(qe={from:Gt.pos,to:Gt.pos})}const xt=!!qe;this._rte.focus(xt,{range:qe})}blur(Te){if(!this._rte)throw new Error("Tried to blur RTE, but no RTE exists");this._rte.blur(Te)}isEmpty(){if(!this._rte)throw new Error("Tried to blur RTE, but no RTE exists");return this._rte.getContentSize()<=2&&this._rte.getText()===""}_getDefaultCommands(){return{[q]:(Te,qe)=>{var xt;return(xt=this._rte)===null||xt===void 0?void 0:xt.insertHTML(qe.html)},[F]:(Te,qe)=>{var xt;return(xt=this._rte)===null||xt===void 0?void 0:xt.setSelection({anchor:qe.anchor,head:qe.head})}}}_mountRTE(){if(!this._parentNode&&!this._replacedNode)throw new Error("No element given to mount RTE with");if(this._replacedNode){if(this._rteNode.className=this._replacedNode.className,!this._replacedNode.parentElement)throw new Error("Can not mount RTE - `replacedNode` has no parent element");this._replacedNode.parentElement.replaceChild(this._rteNode,this._replacedNode)}else this._parentNode&&this._parentNode.appendChild(this._rteNode);this._mouseDownListener=Te=>{this._invokeEventListeners("mouseDown",Te)},this._rteNode.addEventListener("mousedown",this._mouseDownListener)}_unmountRTE(){if(this._mouseDownListener&&this._rteNode.removeEventListener("mousedown",this._mouseDownListener),this._mouseDownListener=null,this._replacedNode){const Te=this._rteNode.parentElement;if(!this._replacedNode.isConnected){const qe=this.getData(!0);this._replacedNode.innerHTML=qe}Te&&Te.replaceChild(this._replacedNode,this._rteNode)}else this._parentNode&&this._parentNode.contains(this._rteNode)&&this._parentNode.removeChild(this._rteNode)}_destroyEditor(){var Te;this._finishUpdates(),(Te=this._rte)===null||Te===void 0||Te.destroy(),this._rte=null}_fireUpdate(){this._cachedHTML=this.getData(!0),this._invokeEventListeners("contentUpdated",{content:this.getData()})}_saveCurrentSelection(Te){var qe;this._savedSelectionPos=Te??((qe=this._rte)===null||qe===void 0?void 0:qe.getSelectionPos())??null}_clearSavedSelection(){this._savedSelectionPos=null}_execCommand(Te,qe,xt){if(!this._rte)return;this._savedSelectionPos&&(this._rte.setSelection(this._savedSelectionPos),this._savedSelectionPos=null);const Gt=this._commands[Te];return typeof Gt=="function"?Gt(Te,qe,xt):this._rte.execCommand(Te,qe,xt)}constructor(Te){k(this,"_ownerDocument",void 0),k(this,"_rteNode",void 0),k(this,"_rte",null),k(this,"_blockWidget",void 0),k(this,"_blockModel",void 0),k(this,"_blockTypeName",void 0),k(this,"_replacedNode",void 0),k(this,"_parentNode",void 0),k(this,"_menuItems",void 0),k(this,"_uuid",(0,x.v4)()),k(this,"_initialState",void 0),k(this,"_toolbarInitTimeout",void 0),k(this,"_eventListeners",{mouseDown:[],isVisible:[],isItemConfigEditorOpenChange:[],stateUpdated:[],contentUpdated:[],showRteToolbarTextBlockChange:[]}),k(this,"_isDestroyed",!1),k(this,"_cachedHTML",void 0),k(this,"_unsubscribeToConfigWebSaveEvent",void 0),k(this,"_givenSchema",void 0),k(this,"_givenSchemaPreset",void 0),k(this,"_initialData",void 0),k(this,"_placeholder",void 0),k(this,"_commands",void 0),k(this,"_savedSelectionPos",null),k(this,"_schemaType",void 0),k(this,"_outline",void 0),k(this,"on",(ln,Sn,an)=>{if(!(ln in this._eventListeners))throw new Error("invalid event");an&&(Sn=Sn.bind(an)),this._eventListeners[ln].push(Sn)}),k(this,"_invokeEventListeners",(ln,Sn)=>{for(const an of this._eventListeners[ln])Sn&&(Sn.details=[Sn]),an(Sn)}),k(this,"_mouseDownListener",null),k(this,"_debouncedFireUpdate",P()(this._fireUpdate,500)),k(this,"_isEditable",!1),this._assignPropsFromConstructorParams(Te);const{blockModel:qe,initialData:xt,isInline:Gt=!1,isLinkable:Li=!1,replaceNode:mi,render:le=!1,type:_e,boundingBox:Me,placeholder:et,schema:$t}=Te;this._unsubscribeToConfigWebSaveEvent=(0,R.QA)(R.lD,()=>{this._debouncedFireUpdate.flush()});const{nodeToAppendTo:Ki,nodeToReplace:pi}=j({maybeNodeToAppendTo:le,maybeNodeToReplace:mi}),Mi=X({isInline:Gt,maybeTagName:Me});this._replacedNode=pi??null,this._parentNode=Ki??null;const vn=pi??Ki;if(!vn)throw new Error("No node was given to mount RTE to");this._ownerDocument=vn.ownerDocument,this._rteNode=this._ownerDocument.createElement(Mi),this._mountRTE(),this._initialState=z({schemaType:_e,schema:$t,isInline:Gt,isLinkable:Li,initialData:xt,placeholder:et,textAttributes:(qe==null?void 0:qe.get("textAttributes"))??[]}),this._rte=this._initializeEditor()}}var ie=t(300879),ce=t.n(ie),pe=t(567713),ye=t(663634),Ae=t(859817),Je=t(181124),ke=t(68468),Fe=t(795478),Ie=t.n(Fe),ht=t(100310),me=t(100371),Ee=t(546866),Se=t(113691),lt=t(150732);const Lt=Zt=>{const Te=(0,lt.$)({});return o.createElement(ht.Z,null,qe=>o.createElement(me.RichTextFieldToolbar,{renderedInField:!0,topOffset:-28,itemConfigEditorProps:{onClick:xt=>xt.stopPropagation(),preventEditorBlur:Zt.menuProps.preventEditorBlur,editorView:Zt.menuProps.editor.view,className:i.NONINTERACTIVE_CLASSNAME,modalClassName:i.NONINTERACTIVE_CLASSNAME,overlayClassName:i.NONINTERACTIVE_CLASSNAME,pageDropdownClassName:i.NONINTERACTIVE_CLASSNAME,rteToolbarElement:Zt.mountAt.querySelector(".rte-menu"),trackingPayload:Te},...Zt,zIndex:Math.max(qe,Zt.zIndex),className:Se.ZP.UNMASK_ELEMENT}))},Pt=Ie().shape({tagName:Ie().string.isRequired});Lt.propTypes={parentEl:Pt,fixedMobileToolbar:Ie().bool,menuProps:Ie().shape({editor:Ie().object.isRequired,execCommand:Ie().func.isRequired,menuState:Ie().object,onOpenItemConfigEditor:Ie().func,onCloseItemConfigEditor:Ie().func,preventEditorBlur:Ie().func,registerKeybinding:Ie().func.isRequired,deregisterKeybinding:Ie().func.isRequired}),mountAt:Pt,toolbarOptions:Ie().arrayOf(Ie().oneOfType([Ie().string,Ie().object])),zIndex:Ie().number};const Ce=Lt;var je=t(970671);const Le=new(ce()),ci={REQUEST_TOOLBAR:"request_toolbar",REMOVE_TOOLBAR:"remove_toolbar"},Jt=pe.Z.Provider;class Ft extends Jt{componentDidMount(){}componentWillUnmount(){}}const ti={"mobile-0":"only screen and (max-width: 375px)","desktop-0":"only screen and (min-width: 376px) and (max-width: 800px)","desktop-100":"only screen and (min-width: 801px)"};function gi(Zt){if(!Zt)return null;const Te=Object.entries(ti),qe=Te.findIndex(_e=>{let[Me,et]=_e;return Zt.matchMedia(et).matches}),xt=qe>-1?qe:Te.length-1,[Gt,Li]=Te[xt],[mi,le]=Gt.split("-");return{name:Gt,rule:Li,platform:mi,scale:le}}const qt=Zt=>{let{mountNode:Te}=Zt;const[qe,xt]=(0,o.useState)(null);return(0,o.useEffect)(()=>(Le.on(ci.REQUEST_TOOLBAR,Gt=>{var Li;const mi=(Li=Gt.parentEl)===null||Li===void 0?void 0:Li.ownerDocument.defaultView;Te.ownerDocument.defaultView===mi&&xt(Gt)}),Le.on(ci.REMOVE_TOOLBAR,()=>{xt(null)}),function(){Le.removeAllListeners()}),[Te]),qe&&o.createElement(Ce,{mountAt:Te,...qe})},Mt=Zt=>{let{mountNode:Te}=Zt;const[qe,xt]=(0,o.useState)(()=>gi(Te.ownerDocument.defaultView));(0,o.useEffect)(()=>{const Li=Te.ownerDocument.defaultView,mi=()=>xt(gi(Li));return Li.addEventListener("resize",mi),()=>{Li.removeEventListener("resize",mi)}},[Te]);const Gt=Te.ownerDocument.defaultView===window.top?"rosetta-rte-toolbars-outside":"rosetta-rte-toolbars-inside";return qe?o.createElement(je.Z,null,o.createElement(Ae.StatsigProvider,{client:(0,ye.GC)()},o.createElement(Ft,{value:qe},o.createElement(Je.Z,{container:Te,cacheKey:Gt},o.createElement(y.ZP,null,o.createElement(qt,{mountNode:Te})))))):null};var Vt=t(746933),Ti=t(757681),Ni=t(897820);function ui(Zt,Te,qe){return Te in Zt?Object.defineProperty(Zt,Te,{value:qe,enumerable:!0,configurable:!0,writable:!0}):Zt[Te]=qe,Zt}const gn=(0,n.FB)("TextEditorWeb"),zi=(Zt,Te)=>{Te.stopPropagation()};class Mn extends Q{_initializeEditor(){var Te,qe;const xt=this._rteNode;this._initializeToolbar();const Gt={bottom:60};let Li;try{var mi;Li=(mi=(0,g.wo)())===null||mi===void 0?void 0:mi.body.querySelector('[class*="sqs-cookie-banner-v2"]')}catch(et){console.error("Unable to find the cookie banner",et)}Li&&Li.classList.contains("BOTTOM")&&(Gt.bottom=Li.getBoundingClientRect().height);const le={};!((Te=this._outline)===null||Te===void 0)&&Te.isEnabled&&(le["data-outline-enabled"]="true"),!((qe=this._outline)===null||qe===void 0)&&qe.label&&(le["data-outline-label"]=this._outline.label);const _e={mountNode:xt,editable:this._isEditable,state:this._initialState,scrollMargin:Gt,scrollThreshold:Gt,onStateChange:this._onStateChange.bind(this),handleDOMEvents:{click:zi,dblclick:zi,pointerdown:zi,contextmenu:zi,focus:this._bindVisualViewportListener.bind(this),blur:this._destroyToolbar.bind(this)},nodeViews:{scaledText:et=>new E(et)},attributes:le};if(this._blockWidget&&this._blockModel){const et=this._blockWidget,$t=this._blockModel;_e.nodeViews.highlight=(Ki,pi)=>new B(Ki,pi,{blockWidget:et,blockModel:$t,contentNode:this._rteNode})}const Me=new a.ZP(_e);return Me.view.dom.addEventListener("mousedown",this._handleMouseDown.bind(this),{useCapture:!0}),Me}_getDefaultCommands(){return{...super._getDefaultCommands(),[f.Ep.PASTE_PLAIN]:()=>(this._openPasteModal(),!0)}}_initializeToolbar(){const Te=this._ownerDocument;let qe=Te.getElementById("rosetta-rte-toolbars");qe||(qe=Te.createElement("div"),qe.id="rosetta-rte-toolbars",qe.className=i.NONINTERACTIVE_CLASSNAME,Te.body.appendChild(qe),(0,e.createRoot)(qe).render(o.createElement(Mt,{mountNode:qe}))),this._toolbarMountNode=qe}_updateToolbar(Te){Te===void 0?this._destroyToolbar():this._renderToolbar(Te)}_destroyToolbar(){Le.emit(ci.REMOVE_TOOLBAR),this._unbindVisualViewportListener()}_onStateChange(Te,qe){this._rte&&this._rte.updateState(Te),this._updateToolbar(Te),qe.docChanged&&(this._invokeEventListeners("stateUpdated",{isInitialRender:!this._cachedHTML}),this._debouncedFireUpdate())}_finishUpdates(){this._debouncedFireUpdate.cancel()}_bindVisualViewportListener(){var Te;const qe=((Te=(0,r.i)(s.breakpoints))===null||Te===void 0?void 0:Te.platform)==="mobile";window.visualViewport&&window.Y.UA.ios&&qe&&window.visualViewport.addEventListener("scroll",this._resetScroll)}_unbindVisualViewportListener(){window.visualViewport&&window.visualViewport.removeEventListener("scroll",this._resetScroll)}_trackToolbarCommand(Te,qe,xt){if(qe!=null&&qe.skipEventTracking)return;if(!this._rte)throw new Error("Tried to track toolbar command, but no RTE exists");const Li=this._rte.getMenuState().itemStates[Te];let mi;Li&&(mi=Li.active?"disabled":"enabled"),p.BX({attrs:qe,blockTypeName:this._blockTypeName||"UNKNOWN",value:mi,command:Te,opts:xt})}_renderToolbar(Te){const qe=this._rteNode;if(!qe.ownerDocument||!qe.isConnected)return;if(!this._rte)throw new Error("renderToolbar called without an existing RTE");const xt=this._menuItems;if(this._toolbarOptions=this._toolbarOptions||p.IN(xt??[]),this._toolbarOptions.length===0)return;const Gt=this._blockTypeName,Li=p.bY({toolbarOptions:this._toolbarOptions,editor:this._rte,state:Te},{blockTypeName:Gt}),mi=this._isEditable&&(Li.viewFocused||this._isItemConfigEditorOpen);mi&&this._invokeEventListeners("isVisible");const le={anchorNode:this._rte.view.dom,anchorPoint:{x:"left",y:"top"},position:"top-left",topOffset:-8,leftOffset:this._rte.view.dom.closest(".fluid-engine")?-22:-40,editor:this._rte,execCommand:this._execCommand.bind(this),isVisible:mi,itemEditorZIndex:this._zIndexBase,menuState:Li,onOpenItemConfigEditor:this._onOpenItemConfigEditor.bind(this),onCloseItemConfigEditor:this._onCloseItemConfigEditor.bind(this),preventEditorBlur:this._rte.preventEditorBlur,closePopOverOnSelect:!1,registerKeybinding:this._registerKeybinding.bind(this),deregisterKeybinding:this._deregisterKeybinding.bind(this)},_e=this._rteNode,Me={key:this._uuid,parentEl:_e,fixedMobileToolbar:!0,menuProps:le,toolbarOptions:this._toolbarOptions,zIndex:this._zIndexBase};Le.emit(ci.REQUEST_TOOLBAR,Me),this._adjustZIndexForV7Dialogs()}_adjustZIndexForV7Dialogs(){const Te=this._rteNode.closest(m.gu);Te&&(this._zIndexBase=(parseInt(Te.style.zIndex)||0)+1,this._toolbarMountNode&&(this._toolbarMountNode.style.position="fixed",this._toolbarMountNode.style.zIndex=String(this._zIndexBase)))}_getRosettaKeymap(){return this._keymap}_registerKeybinding(Te,qe){if(!this._rte)throw new Error("Tried to register keybinding, but this.rte was null");const xt={...this._getRosettaKeymap()};xt[Te]=qe,this._keymap=xt,this._rte.setKeymap(xt)}_deregisterKeybinding(Te){const qe={...this._getRosettaKeymap()};delete qe[Te],this._keymap=qe,this._rte&&this._rte.setKeymap(qe)}_handleMouseDown(Te){Te.stopPropagation(),this._invokeEventListeners("mouseDown",Te),Vt.c.emit(Ti.TI),(0,y.GE)((0,Ni.AZ)())}_openPasteModal(){const Te=window.Y,qe=Te.Lang.sub('<html style="height:100%;margin:0;"><body contenteditable=true style="min-height:100%;margin:0;padding:{grid}px;box-sizing:border-box;"><script>document.addEventListener("DOMContentLoaded", function() {document.body.addEventListener("paste", function(e) {e.preventDefault();var text = e.clipboardData.getData("text/plain");document.execCommand("insertText", false, text);});});<\/script></body></html>',{grid:u.GRID_PX}),xt=new Te.Squarespace.Widgets.ConfirmationMedia({style:Te.Squarespace.Widgets.ConfirmationMedia.TYPE.CONFIRM_OR_CANCEL,mediaType:Te.Squarespace.Widgets.ConfirmationMedia.TYPE_MEDIA.IFRAME,mediaSrc:{srcDoc:qe},"strings.confirm":(0,h.t)("OK",null,{project:"scripts-v6"}),"strings.cancel":(0,h.t)("Cancel",null,{project:"scripts-v6"}),"strings.title":(0,h.t)("Paste as Plain Text",null,{project:"scripts-v6"}),"strings.message":(0,h.t)("Paste into the box and hit OK. Squarespace will strip out special formatting and insert this content to your document as plain text.",null,{project:"scripts-v6"})});xt.once("show",function(){const Gt=xt.get("boundingBox").one("iframe").getDOMNode();Gt.contentDocument.body.focus(),Gt.contentDocument.body.contentEditable=!0}),xt.once("confirm",()=>{var Gt;const mi=xt.get("boundingBox").one("iframe").getDOMNode().contentDocument.body,le=a.se.create(f.lg[f.rg.PLAIN_TEXT]),_e=a.aw(le,mi);this._execCommand?this._execCommand("insertHTML",{html:_e}):!((Gt=this._rte)===null||Gt===void 0)&&Gt.insertHTML&&this._rte.insertHTML(_e)})}constructor(...Te){super(...Te),ui(this,"_zIndexBase",f.Ue.TOOLBAR),ui(this,"_toolbarOptions",void 0),ui(this,"_isItemConfigEditorOpen",!1),ui(this,"_toolbarMountNode",null),ui(this,"_keymap",{}),ui(this,"addRteFocusListener",qe=>{if(!this._rte)throw new Error("Tried to add focus listener, but RTE does not exist");const xt=()=>{var Gt;qe({isFocused:!!(!((Gt=this._rte)===null||Gt===void 0)&&Gt.view.focused)})};return this._rte.view.dom.addEventListener("focus",xt),()=>{var Gt;(Gt=this._rte)===null||Gt===void 0||Gt.view.dom.removeEventListener("focus",xt)}}),ui(this,"addRteBlurListener",qe=>{if(!this._rte)throw new Error("Tried to add blur listener, but RTE does not exist");const xt=()=>{var Gt;qe({isFocused:!!(!((Gt=this._rte)===null||Gt===void 0)&&Gt.view.focused)})};return this._rte.view.dom.addEventListener("blur",xt),()=>{var Gt;(Gt=this._rte)===null||Gt===void 0||Gt.view.dom.removeEventListener("blur",xt)}}),ui(this,"refreshToolbar",()=>{if(!this._rte)throw new Error("Tried to update toolbar, but RTE does not exist");this._updateToolbar(this._rte.view.state)}),ui(this,"focusRte",()=>{if(!this._rte)throw new Error("Tried to focus RTE, but RTE does not exist");this._rte.focus()}),ui(this,"scrollRteIntoView",()=>{if(!this._rte)throw new Error("Tried to scroll RTE into view, but RTE does not exist");const qe=this._rte.view.dispatch;if(qe){const xt=this._rte.view.state.tr;qe(xt.scrollIntoView())}}),ui(this,"_execCommand",(qe,xt,Gt)=>(this._trackToolbarCommand(qe,xt,Gt),super._execCommand(qe,xt,Gt))),ui(this,"_onOpenItemConfigEditor",()=>{this._saveCurrentSelection(),this._isItemConfigEditorOpen=!0,this._invokeEventListeners("isItemConfigEditorOpenChange"),this._renderToolbar()}),ui(this,"_onCloseItemConfigEditor",()=>{this._clearSavedSelection(),this._isItemConfigEditorOpen=!1,this._invokeEventListeners("isItemConfigEditorOpenChange"),this._renderToolbar()}),ui(this,"_resetScroll",d()(()=>{window.scrollTo(0,1)},150))}}YUI.add("squarespace-text-editor",function(Zt){Zt.namespace("Squarespace"),Zt.Squarespace.TextEditor=Mn},"1.0",{requires:["base","squarespace-ss-widget"]})},446469:function(){YUI.add("squarespace-toggle",function(c){c.namespace("Squarespace.Widgets"),c.Squarespace.Widgets.ToggleButton=c.Base.create("toggleButton",c.Widget,[c.WidgetChild],{renderUI:function(){var t=this.getAttrs(["active"]),l=t.active?"active":"inactive";this.get("contentBox").append('<div class="switch-box-container animate '+l+'"><div class="switch-box"><div class="toggle-box"><div class="togglebg"></div></div></div><div class="switch-shadow">&nbsp;</div><div class="handle-wrapper"><div class="handle">&nbsp</div></div></div>')},destructor:function(){c.detachAll(this.get("id")+"|*")},bindUI:function(){this.get("contentBox").delegate("click",this._onClick,".handle-wrapper",this),this.after(["activeChange","enabledChange"],this.syncUI,this)},_onClick:function(t){t.halt(),this.get("enabled")&&this.set("active",!this.get("active"))},syncUI:function(){var t=this.get("contentBox"),l=this.get("boundingBox"),d=t.one(".switch-box-container"),o=t.all(".togglebg, .handle"),e=!!this.get("active"),a=!!this.get("enabled");o.setStyles({marginLeft:null,left:null}),d.toggleClass("inactive",!e),d.toggleClass("active",e),l.toggleClass("enable",a),l.toggleClass("disabled",!a)}},{CSS_PREFIX:"sqs-toggle-button",ATTRS:{active:{value:!1},enabled:{value:!0}}});function b(){b.superclass.constructor.apply(this,arguments)}b.NAME="toggleDragPlugin",b.NS="drag",c.extend(b,c.Plugin.Base,{initializer:function(){this._host=this.get("host"),this.afterHostMethod("bindUI",this._afterBindUI)},destructor:function(){c.detachAll(this.get("id")+"|*"),this._handleDrag&&this._handleDrag.destroy()},_afterBindUI:function(){var t=this._host.get("contentBox"),l=this.get("id");this._handleDrag=new c.DD.Drag({node:t.one(".handle")}),this._handleDrag.plug(c.Plugin.DDProxy),this._handleDrag.on(l+"|drag:start",this._onDragStart,this),this._handleDrag.on(l+"|drag:drag",this._onDragDrag,this),this._handleDrag.on(l+"|drag:end",this._onDragEnd,this)},_onDragStart:function(t){var l=t.target,d=this._host.get("contentBox").one(".handle-wrapper").get("region");l.hasPlugin("con")||l.plug(c.Plugin.DDConstrained,{constrain:d})},_onDragDrag:function(t){var l=t.target,d=this._host.get("contentBox"),o=this.get("maxValue"),e=d.one(".handle-wrapper").getX(),a=Math.abs(e-l.lastXY[0]);a=Math.max(0,a),a=Math.min(o,a),d.one(".togglebg").setStyle("marginLeft",a),d.one(".handle").setStyle("left",t.target.get("dragNode").getX()-d.one(".handle-wrapper").getX())},_onDragEnd:function(t){var l=t.target,d=l.get("node"),o=l.con.get("constrain"),e=Math.abs(o.left-o.right),a=Math.abs(l.nodeXY[0]-l.lastXY[0])/(e-d.get("offsetWidth")),r=this._host.get("active");a>.5&&this._host.set("active",!r),this._host.get("active")===r&&this._host.syncUI()}},{ATTRS:{resistance:{value:10},maxValue:{value:70}}}),c.Squarespace.ToggleDrag=b},"1.0",{requires:["base","dd-constrain","dd-drag","dd-proxy","widget","widget-child"]})},127714:function(){YUI.add("squarespace-touch-event-listener",function(c){c.Squarespace.TouchEventListener=c.SQS.Gallery.TouchEventListener},"1.0",{requires:["@sqs/yui-gallery/touch-event-listener"]})},358055:function(c,b,t){"use strict";var l=t(490268),d=t.n(l);YUI.add("squarespace-tourdates",function(o){o.namespace("Squarespace.Tourdates");var e=[];o.Squarespace.Tourdates.initializeNode=function(a){var r=!!o.Array.find(e,function(i){return i.get("boundingBox").ancestor(".sqs-block")===a});if(!r){var s=JSON.parse(a.getAttribute("data-block-json")),n=new o.Squarespace.Widgets.BandsInTownTourDatesList({artistId:s.artistId,timeframe:s.timeframe,startDate:s.startDate,endDate:s.endDate}).render(a);e.push(n)}},o.config.win.Squarespace.onInitialize(o,function(){o.all(".sqs-block-tourdates[data-block-json]").each(o.Squarespace.Tourdates.initializeNode)}),o.config.win.Squarespace.onDestroy(o,function(){e.forEach(function(r){r.destroy&&r.destroy()}),o.all(".sqs-block-tourdates[data-block-json]").each(function(r){r.empty()}),e.length=0})},"1.0",{requires:["squarespace-widgets-tourdates-bandsintown"]})},107953:function(c,b,t){"use strict";var l=t(714487),d=t(759352),o=t(324270);YUI.add("squarespace-tray",function(e){e.namespace("Squarespace.Widgets");var a=e.Squarespace.Widgets.Tray=e.Base.create("tray",e.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._buttonWidgets=[]},destructor:function(){this._emptyButtons()},bindUI:function(){a.superclass.bindUI.call(this);var u=this.get("id");this.after(u+"|stringsChange",this._afterStringsChange),this.after(u+"|buttonsChange",this._afterButtonsChange)},syncUI:function(){a.superclass.syncUI.call(this),this._uiUpdateText(),this._uiSetButtons(this.get("buttons"))},_afterButtonsChange:function(u){this._uiSetButtons(u.newVal,u.animate)},_afterStringsChange:function(u){this._uiUpdateText()},_uiUpdateText:function(){var u=this.get("contentBox");u.one(".title").empty().setContent(e.Escape.html(this.get("strings.title"))),u.one(".title").setAttribute("title",e.Escape.html(this.get("strings.title"))),u.one(".subtitle").empty().setContent(this.get("strings.subtitle"))},_emptyButtons:function(){e.Array.invoke(this._buttonWidgets,"destroy"),this._buttonWidgets=[]},_registerButtonWidget:function(u){this._buttonWidgets.push(u)},_uiSetButtons:function(u,h){var g=this.get("contentBox").one(this.getProperty("CONTROLS_CONTAINER"));if(!g)throw new Error("No CONTROLS_CONTAINER in the template to put buttons in.");h&&(g.plug(e.Squarespace.Plugins.SizeAnimator),g.sizeAnimator.hold()),this._emptyButtons(),g.empty(),e.Array.each(u,function(p,f,m){var _=this._createButtonWidget(p);this._registerButtonWidget(_);var v=g;_.on(this.get("id")+"|click",function(E){if(p.allowMouseEvents||(E.halt(),E.stopImmediatePropagation()),this.fire("button-click",{button:_,buttonConfig:p,originalClickEvent:E}),p.action){E.button=_,E.buttonConfig=p;var S=p.action;e.Lang.isString(S)&&(S=this[S]),S.call(p.context||this,E)}},this),_.get("boundingBox").addClass("label-"+d.vv(p.label)),p.container&&(v=this.get("contentBox").one(p.container)),_.render(v)},this),h&&g.sizeAnimator.release()},_createButtonWidget:function(u){return new(this.get("buttonCtor"))({"strings.text":u.label,className:u.className})}},{CSS_PREFIX:"sqs-tray",CONTROLS_CONTAINER:".buttons",TEMPLATE:'<div class="header"><div class="title"></div><div class="spinner-wrapper"></div><div class="subtitle"></div></div><div class="body"><div class="buttons"></div></div>',ATTRS:{strings:{value:{title:"",subtitle:""}},buttonCtor:{value:e.Squarespace.Widgets.Button},buttons:{value:[],validator:function(u,h){for(var g=1;g<u.length;g++){var p=u[g];if(!p.label)return!1}return!0}}}}),r=e.Squarespace.Widgets.HeaderTray=e.Base.create("headerTray",e.Squarespace.Widgets.Tray,[e.WidgetParent,e.WidgetChild],{renderUI:function(){r.superclass.renderUI.call(this),this.get("loading")?this._startSpinner():this._stopSpinner()},bindUI:function(){r.superclass.bindUI.call(this),this.after(this.get("id")+"|loadingChange",function(u){u.newVal?this.get("rendered")&&this._startSpinner():this._stopSpinner()},this)},_startSpinner:function(){this._uiUpdateText();var u=this.get("contentBox").one(".spinner-wrapper");this._spinnerTimer&&this._spinnerTimer.cancel(),this._spinner=new e.Squarespace.Spinner({render:u,color:"dark"})},_stopSpinner:function(){this._spinnerTimer&&(this._spinnerTimer.cancel(),this._spinnerTimer=null),this._spinner&&(this._spinner.destroy(),this._spinner=null)},_createButtonWidget:function(u){var h={"strings.text":u.label,href:u.href,name:u.name,className:u.className,active:u.active,testAttribute:u.testAttribute};return new e.Squarespace.Widgets.Button(h)}},{CSS_PREFIX:"sqs-header-tray",TEMPLATE:'<div class="header"><div class="title"></div><div class="spinner-wrapper"></div><div class="subtitle"></div></div><div class="body"><div class="buttons"></div></div>',ATTRS:{loading:{value:!1,validator:e.Lang.isBoolean}}}),s=e.Squarespace.Widgets.LibraryManagerHeaderTray=e.Base.create("libraryManagerHeaderTray",e.Squarespace.Widgets.HeaderTray,[],{_uiSetButtons:function(){s.superclass._uiSetButtons.apply(this,arguments)},bindUI:function(){s.superclass.bindUI.call(this),this.get("inlineTitleEditingEnabled")&&this.get("contentBox").one(".header .title").on("click",this._navigateFrameToPageRoot,this),this.get("searchFieldEnabled")&&this._attachQuickSearchKeyBindings()},_navigateFrameToPageRoot:function(){o.default.setUrl(this.get("collection").get("fullUrl"))},_attachQuickSearchKeyBindings:function(){this._registerEvent(e.one(e.config.win).on("keyup",function(u){if(!u.target.test("textarea,input,[contenteditable]")){var h=70;[h].indexOf(u.keyCode)>-1&&(u.stopImmediatePropagation(),this.revealQuickSearch())}},this))},revealQuickSearch:function(u){this._quickSearch&&(this._quickSearch.destroy(),this._quickSearch=null);var h=this.get("contentBox").one(".search.sqs-button");h&&(this._quickSearch=this._createQuickSearch(),this._quickSearch.render(h),h.addClass("active"),e.later(10,this,function(){this._quickSearch.get("boundingBox").addClass("show")}),this._quickSearch.on("attemptedClose",function(){this._quickSearch.destroy(),this._quickSearch=null,h.removeClass("active")},this))},_createQuickSearch:function(){var u=new e.Squarespace.ContentManagerWidgets.ProductQuickSearch({collectionId:this.get("collection").get("id"),itemIdRequestHandler:this.get("itemIdRequestHandler")});return u.addTarget(this),u}},{CSS_PREFIX:"sqs-library-manager-header-tray",TEMPLATE:'<div class="header"><div class="title"></div><div class="filters"></div><div class="pagination"></div><div class="subtitle"></div></div><div class="body"><div class="buttons"></div></div>',ATTRS:{collection:{validator:e.Squarespace.AttrValidators.isInstanceOf("Y.Squarespace.Models.ContentCollection")},inlineTitleEditingEnabled:{value:!0},searchFieldEnabled:{value:!1},itemIdRequestHandler:{value:function(){}}}}),n=e.Squarespace.Widgets.TabbedHeaderTray=e.Base.create("tabbedHeaderTray",e.Squarespace.Widgets.HeaderTray,[],{initializer:function(){this.publish("tab-switch-requested",{emitFacade:!0,defaultFn:this._updateActiveButtonClass,context:this,preventable:!0}),this.after(this.get("id")+"|button-click",function(u){u.button.ancestor(this.getProperty("CONTROLS_CONTAINER"))!==null&&this.fire("tab-switch-requested",{button:u.button})},this)},_createButtonWidget:function(u){var h={"strings.text":u.label,href:u.href,name:u.name,className:u.className,active:u.active};return new e.Squarespace.Widgets.TabButton(h)},_uiSetButtons:function(){n.superclass._uiSetButtons.apply(this,arguments);var u=this.get("defaultTab"),h=this.get("boundingBox").one(this.getProperty("CONTROLS_CONTAINER")).get("children");h.size()!==0&&(u?h.each(function(g){g.hasClass("name-"+u)&&g.addClass("active")},this):h.item(0).addClass("active"))},_updateActiveButtonClass:function(u){this.get("boundingBox").one(this.getProperty("CONTROLS_CONTAINER")).get("children").each(function(h,g,p){h.toggleClass("active",u.button.get("boundingBox")===h)},this)}},{CSS_PREFIX:"sqs-tabbed-header-tray",CONTROLS_CONTAINER:".tabs",TEMPLATE:'<div class="header"><div class="title"></div><div class="spinner-wrapper"></div><div class="subtitle"></div></div><div class="body"><div class="tabs"></div><div class="buttons"></div></div>',ATTRS:{defaultTab:{}}}),i=e.Squarespace.Widgets.ActionTray=e.Base.create("actionTray",e.Squarespace.Widgets.Tray,[],{renderUI:function(){e.Squarespace.Widgets.ActionTray.superclass.renderUI.call(this)},bindUI:function(){var u=this.get("id");this.get("contentBox").on(u+"|click",function(h){h.halt()}),this.after(u+"|visibleChange",this._afterVisibleChange),this.after([u+"|buttonsChange",u+"|countChange",u+"|showThresholdChange",u+"|stringsChange"],this._afterUIAttributeChange)},syncUI:function(){this._uiSetCount(this.get("count")),this._uiSetButtons(this.get("buttons")),this._uiSetTitle(this.get("strings.title")),this._uiSetSubtitle(this.get("strings.subtitle"))},_afterVisibleChange:function(u){if(u.newVal){var h=this.get("boundingBox"),g=this.get("scrollNode"),p=0;g&&(p=g.get("offsetWidth")-g.get("clientWidth")),h.setStyle("right",null),p&&h.setStyle("right",parseInt(h.getStyle("right"),10)+p+"px")}},_afterUIAttributeChange:function(u){switch(u.attrName){case"showThreshold":case"count":this._uiSetCount();return;case"buttons":this._uiSetButtons(this.get("buttons"));return;case"strings":u.subAttrName==="strings.subtitle"?this._uiSetSubtitle(this.get("strings.subtitle")):u.subAttrName==="strings.title"?this._uiSetTitle(this.get("strings.title")):this._uiSetCount();return;default:}},_uiSetCount:function(){var u=this.get("count");this.get("contentBox").one(".description .top").setContent((0,l._6)({one:"{%n} Item selected",other:"{%n} Items selected"},u,null,{project:"scripts-v6-root",notes:"oldKey: numItemsSelected"}));var h=this.get("showThreshold");u>=h?this.show():this.hide()},_uiSetSubtitle:function(u){this.get("contentBox").one(".bottom").setContent(u)},_uiSetTitle:function(u){this.get("contentBox").one(".top").setContent(u)},_setEnabled:function(u){return u||this.hide(),u},show:function(){this.get("enabled")&&i.superclass.show.call(this)},enable:function(){this.set("enabled",!0)},disable:function(){this.set("enabled",!1)}},{CSS_PREFIX:"sqs-action-tray",TEMPLATE:'<div class="action-tray"><div class="description"><div class="top"></div><div class="bottom"></div></div><div class="buttons"></div></div>',ATTRS:{strings:{value:{title:"",subtitle:(0,l.t)("This action will be applied to all selected items above.",null,{project:"scripts-v6-root"})}},visible:{value:!1},enabled:{value:!0,setter:"_setEnabled",lazyAdd:!1},buttons:{value:[],validator:function(u,h){for(var g=1;g<u.length;g++){var p=u[g];if(!p.action||!p.label)return!1}return!0}},count:{value:0},showThreshold:{value:1},scrollNode:{valueFn:function(){return this.get("boundingBox").siblings(e.Squarespace.NodeUtils.isScrollable).item(0)}}}});e.Squarespace.Widgets.ProductGridActionTray=e.Base.create("ProductGridAcionTray",e.Squarespace.Widgets.ActionTray,[],{},{CSS_PREFIX:"sqs-product-grid-action-tray",TEMPLATE:'<div class="product-grid-action-tray"><div class="description"><div class="top"></div><div class="bottom"></div></div><div class="buttons"></div></div>',ATTRS:{buttonCtor:{value:e.Squarespace.Widgets.VanillaButton}}})},"1.0",{requires:["array-invoke","base","squarespace-attr-validators","squarespace-content-manager-widgets-product-quick-search","squarespace-dialog-button","squarespace-dialog-tab","squarespace-node-utils","squarespace-plugin-sizeanimator","squarespace-spinner","squarespace-ss-widget","squarespace-util"]})},683548:function(){YUI.add("squarespace-tumblr-connected-account-editor",function(c){c.namespace("Squarespace").TumblrAccountEditor=c.Base.create("tumblrAccountEditor",c.Squarespace.ModelEditorDialog,[],{sanitizeDialogData:function(b){return b.metaData.primaryBlog=b.primaryBlog,c.Array.each(b.metaData.blogs,function(t){t.primary=b.primaryBlog===t.name}),b},getDialogData:function(){var b=c.Squarespace.TumblrAccountEditor.superclass.getDialogData.call(this);return b.primaryBlog=b.metaData.primaryBlog,b}})},"1.0",{requires:["base","squarespace-model-editor"]})},741471:function(c,b,t){"use strict";var l=t(714487),d=t(629539),o=t(924647);YUI.add("squarespace-ui-base",function(e){e.namespace("Squarespace"),e.mix(e.Node.DOM_EVENTS,{message:!0}),e.Squarespace.DIALOG_ZINDEX_BASE=o.Ue.BASE,e.Anim._intervalTime=10;var a=Number;e.Anim.DEFAULT_SETTER=function(r,s,n,i,u,h,g,p){var f=r._node,m=f._node,_=g(u,a(n),a(i)-a(n),h);f._node!==null&&(m?"style"in m&&(s in m.style||s in e.DOM.CUSTOM_STYLES)?(p=p||"",f.setStyle(s,_+p)):"attributes"in m&&s in m.attributes?f.setAttribute(s,_):s in m&&(m[s]=_):f.set?f.set(s,_):s in f&&(f[s]=_))},e.Squarespace.TextShrink=e.Base.create("TextShrink",e.Plugin.Base,[],{initializer:function(){var r=this.get("host");e.Lang.isValue(this.get("parentEl"))||this.set("parentEl",r.ancestor()),this._setupEl(),e.on("domready",this.refresh,this),this._resizeEvent=e.on("resize",function(){this._timeout&&this._timeout.cancel(),this._timeout=e.later(100,this,this.refresh)},e.config.win,this),this._tweakChange=e.Global.on("tweak:change",this.refresh,this),this._tweakSaveResetClose=e.Global.on(["tweak:save","tweak:reset","tweak:close"],this.refresh,this)},refresh:function(){this._reset(),this._setupEl(),this._adjust()},isOverflowing:function(){var r=this._getWidths();return Math.abs(r.el-r.parentEl)<=3&&(r.el=r.parentEl=Math.min(r.el,r.parentEl)),r.el>r.parentEl},_adjust:function(){var r=this.get("host"),s=this._getWidths();if(this.isOverflowing()){var n=this._getStyleValue(r,"fontSize");n=s.parentEl/s.el*n,this._setFontSize(Math.floor(n))}return!0},_setFontSize:function(r){var s=this.get("host"),n=this.get("minFontSize");n&&r<n&&(r=n),isNaN(r)||s.setStyle("fontSize",r+"px")},_getStyleValue:function(r,s){return parseInt(r.getStyle(s),10)},_getWidths:function(){var r=this.get("host"),s=this.get("parentEl"),n=r.get("scrollWidth"),i=this._getStyleValue(s,"paddingLeft")+this._getStyleValue(s,"paddingRight"),u=s.get("offsetWidth")-i;return(n===0||!e.Lang.isValue(n))&&(n=r.get("offsetWidth")),{parentEl:u,el:n}},_setupEl:function(){var r=this.get("host");r.setAttribute("data-shrink-original-size",this._getStyleValue(r,"fontSize")),this.letterSpacing=this._getStyleValue(r,"letterSpacing")/r.getAttribute("data-shrink-original-size")+"em",r.setStyle("letterSpacing",this.letterSpacing)},_reset:function(){var r=this.get("host");r.setStyles({letterSpacing:null,fontSize:null})},destructor:function(){this._resizeEvent&&this._resizeEvent.detach(),this._tweakChange&&this._tweakChange.detach(),this._tweakSaveResetClose&&this._tweakSaveResetClose.detach()}},{ATTRS:{minFontSize:{value:11},parentEl:{value:null}},NS:"TextShrink"}),e.Squarespace.SimpleFlexibleGrid=e.Base.create("SimpleFlexibleGrid",e.Plugin.Base,[],{initializer:function(){this._stylesheetEl=e.Node.create("<style></style>"),this.get("host").append(this._stylesheetEl),this._resizeEvent=e.on("resize",this.syncUI,e.config.win,this),this.syncUI()},syncUI:function(){var r;this.get("minWidth")?r=Math.floor(this.get("container").get("offsetWidth")/this.get("minWidth")):r=Math.ceil(this.get("container").get("offsetWidth")/this.get("maxWidth")),this._stylesheetEl.set("innerHTML",this.get("selector")+"{width:"+100/r+"% !important;}"),this.get("host").fire("simpleFlexibleGridSyncUI")},destructor:function(){this._stylesheetEl.remove(),this._resizeEvent.detach()}},{ATTRS:{container:{},selector:{},maxWidth:{},minWidth:{}},NS:"simple-flexible-grid"}),e.Squarespace.Mouse={lastX:100,lastY:100,client:{lastX:100,lastY:100},debug:function(){this.isDebugging=!0,this._debugNode||(this._debugNode=e.one(e.config.doc.body).appendChild("<div></div>"),this._debugNode.setStyles({position:"fixed",width:50,height:50,borderRadius:"50%",background:"rgba(20, 170, 255, 0.5)",marginLeft:-25,marginTop:-25,zIndex:Math.pow(10,5),pointerEvents:"none"})),this._debugNode.setStyles({top:e.Squarespace.Mouse.lastY,left:e.Squarespace.Mouse.lastX})}},e.Object.getValue(e.config.win,"Static.SQUARESPACE_CONTEXT.authenticatedAccount".split("."))&&e.on(e.UA.mobile?"touchmove":"mousemove",function(r){e.Squarespace.Mouse.lastX=r.pageX,e.Squarespace.Mouse.lastY=r.pageY,e.Squarespace.Mouse.client.lastX=r.clientX,e.Squarespace.Mouse.client.lastY=r.clientY,e.Squarespace.Mouse.isDebugging&&e.Squarespace.Mouse.debug()},e.one("html")),e.Squarespace.Image={loadAndFit:function(r,s){var n=new Image;n.src=s,e.one(n).on("load",function(i,u,h){u.set("src",h.src),u.resizeToParent({scale:"cover"})},this,r,n)},straighten:function(r,s,n,i){var u=(i<0?360-i:i)%360,h=u;u>=90&&(h=u%90-90),u>=180&&(h=-1*u%180-180),u>=270&&(h=u%270-90);var g=Math.abs(h)*(Math.PI/180),p;n>s?p=(s*Math.cos(g)+n*Math.sin(g))/s:p=(n*Math.cos(g)+s*Math.sin(g))/n,r.setStyle("transform","rotate("+i+"deg) scale("+Math.abs(p)+")")}},e.Squarespace.Position=Class.create({initialize:function(r){this.EDGE_MARGIN=20,this.avoidElX=r.avoidElX,this.avoidElY=r.avoidElY,this.xdir=r.xdir,this.ydir=r.ydir,this.x=r.x,this.y=r.y,this.xo=r.xo?r.xo:0,this.yo=r.yo?r.yo:0,this.w=r.w,this.h=r.h,this.initialX=this.getX(),this.initialY=this.getY()},setX:function(r){this.x=r},setY:function(r){this.y=r},getX:function(){return this.x+this.getXO()},getY:function(){return this.y+this.getYO()},getXY:function(){return[this.getX(),this.getY()]},getXAdj:function(){return this.initialX-this.getX()},getYAdj:function(){return this.initialY-this.getY()},getXO:function(){return(this.avoidElX&&this.xdir==="right"?this.avoidElX.get("offsetWidth"):0)+this.xo},getYO:function(){return(this.avoidElY&&this.ydir==="top"?-this.avoidElY.get("offsetHeight"):0)+this.yo},isRightViolation:function(){return this.x+this.w-Math.abs(this.getXO())+this.EDGE_MARGIN>e.one(document.body).get("winWidth")},isLeftViolation:function(){return this.x-Math.abs(this.getXO())-this.EDGE_MARGIN<0},isTopViolation:function(){return this.y-Math.abs(this.getYO())-this.EDGE_MARGIN<e.one(document.body).get("docScrollY")},isBottomViolation:function(){return this.y+this.h-Math.abs(this.getYO())+this.EDGE_MARGIN>e.one(document.body).get("winHeight")+e.one(document.body).get("docScrollY")},reflectFix:function(){this.xdir==="right"&&this.isRightViolation()?(this.xdir="left",this.getX=function(){return this.x-this.w-this.getXO()+11}):this.xdir==="left"&&this.isLeftViolation()&&(this.xdir="right",this.getX=function(){return this.x+this.w+this.getXO()}),this.ydir==="bottom"&&this.isBottomViolation()?(this.ydir="top",this.getY=function(){return this.y-this.h-this.getYO()},console.log("bottom violation .. now "+this.getY())):this.ydir==="top"&&this.isTopViolation()&&(this.ydir="bottom",this.getY=function(){return this.y+this.h+this.getYO()},console.log("top violation")),this.getY()-this.EDGE_MARGIN<0?(this.getY=function(){return e.one(document.body).get("winHeight")-this.h-this.EDGE_MARGIN},this.ydir="bottom"):this.getY()+this.h+this.EDGE_MARGIN>e.one(document.body).get("winHeight")+e.one(document.body).get("docScrollY")&&(this.getY=function(){return e.one(document.body).get("winHeight")+e.one(document.body).get("docScrollY")-this.EDGE_MARGIN-this.h},this.ydir="top"),this.getX()-this.EDGE_MARGIN<0?(this.getX=function(){return this.EDGE_MARGIN},this.ydir="left"):this.getX()+this.w+this.EDGE_MARGIN>e.one(document.body).get("winWidth")&&(this.getX=function(){return e.one(document.body).get("winWidth")-this.w-this.EDGE_MARGIN},this.ydir="right"),this.getY()<e.one(document.body).get("docScrollY")&&(console.log("fixing y offscreen issues."),this.yo=e.one(document.body).get("docScrollY")+this.EDGE_MARGIN-this.y)},nudgeFix:function(){this.isRightViolation()?this.getX=function(){return e.one(document.body).get("winWidth")+e.one(document.body).get("docScrollX")-this.w-this.EDGE_MARGIN}:this.isLeftViolation()&&(this.getX=function(){return this.EDGE_MARGIN}),this.isBottomViolation()?this.getY=function(){return e.one(document.body).get("winHeight")+e.one(document.body).get("docScrollY")-this.h-this.EDGE_MARGIN}:this.isTopViolation()&&(this.getY=function(){return this.EDGE_MARGIN})},overflowFix:function(){this.isRightViolation()?this.x=e.one(document.body).get("winWidth")+e.one(document.body).get("docScrollX")-this.w-this.EDGE_MARGIN:this.isLeftViolation()&&(this.x=this.EDGE_MARGIN),this.isBottomViolation()?this.y=e.one(document.body).get("winHeight")+e.one(document.body).get("docScrollY")-this.h-this.EDGE_MARGIN:this.y-Math.abs(this.getXO())-this.EDGE_MARGIN<0&&(this.y=this.EDGE_MARGIN)}}),e.Squarespace.ToolTipManager={canShow:!0,disableTooltips:function(){this.canShow=!1,this.currentTip&&(this.currentTip.hide(),this.currentTip=null)},enableTooltips:function(){this.canShow=!0}},e.Squarespace.ToolTip=Class.create({initialize:function(r){this.params=r;var s=e.all(this.params.target);s.size()!==0&&(this.params.showTimeout===void 0&&(this.params.showTimeout=1200),this.params.width===void 0&&(this.params.width=250),this.params.style===void 0&&(this.params.style="info"),this.mouseOffset=15,this.events=[],s.each(function(n){this.events.push(n.on("mouseover",function(i){this.lastX=i.pageX,this.lastY=i.pageY,this.move(),!this.showTimer&&(this.showTimer=e.later(this.params.showTimeout,this,this.show))},this)),this.events.push(n.on("mouseout",function(i){this.showTimer&&(this.showTimer.cancel(),this.showTimer=null),this.hide()},this)),this.events.push(n.on("click",function(i){this.params.clickToShow?(this.show(),i.halt()):this.hide()},this))},this),this.events.push(e.Global.on("manager:change-mode",function(n){this.hide()},this)))},destroy:function(){for(var r=0;r<this.events.length;++r)this.events[r].detach();this.el&&(this.el.remove(),this.el=null),this.events=[],this.destroyed=!0,this.shown=!1},move:function(){this.el&&(this.position.x=this.lastX,this.position.y=this.lastY,this.a?this.el.setStyles({left:this.position.getX()+"px"}):this.el.setStyles({left:this.position.getX()+"px",top:this.position.getY()+"px"}))},show:function(){this.el||this.destroyed||this.shown||!e.Squarespace.ToolTipManager.canShow&&!this.params.dialogTooltip||(this.el=e.Node.create('<div class="sqsp-tooltip "'+this.params.style+'><div class="title">'+this.params.title+"</div></div>"),this.params.body&&this.el.append('<div class="description">'+this.params.body+"</div>"),e.one(document.body).append(this.el),this.position=new e.Squarespace.Position({xdir:"right",ydir:"bottom",x:this.lastX,y:this.lastY,xo:this.mouseOffset,yo:this.mouseOffset,w:this.el.get("offsetWidth"),h:this.el.get("offsetHeight")}),this.position.reflectFix(),this.el.setStyles({left:this.position.getX()+"px",top:this.position.getY()-this.position.yo+"px",width:this.params.width+"px",zIndex:2000000001,opacity:0}),this.params.icon&&this.el.setStyle("backgroundImage","url("+this.params.icon+")"),this.shown=!0,this.a=new e.Anim({node:this.el,to:{top:this.position.getY(),opacity:1},duration:.3,easing:e.Easing.easeOutStrong}),this.a.on("end",function(){this.a=null},this),this.a.run(),e.Squarespace.ToolTipManager.currentTip=this)},hide:function(){if(this.el){var r=new e.Anim({node:this.el,to:{top:this.position.getY()+15,opacity:0},duration:.3,easing:e.Easing.easeOutStrong});r.on("end",function(){this.get("node").remove()}),r.run(),this.el=null,this.a=null,this.shown=!1}}}),e.Squarespace.Lightbox=Class.create({defaultOpts:{overlayShowDuration:.35,contentShowDuration:.6,margin:0,opacity:1,transition:"fade",clickAnywhereToExit:!0,name:null,content:"<div>&nbsp;</div>",theme:"black",overlayStyle:"orb"},name:"Lightbox",initialize:function(r){this.enabled=!0,this.params=e.merge(this.defaultOpts,r),this.params.containerNode||(this.params.containerNode=e.one("body")),this.params.transition||(this.params.transition="fade"),this.params.zIndex||(e.Squarespace.DIALOG_ZINDEX_BASE+=10,this.params.zIndex=e.Squarespace.DIALOG_ZINDEX_BASE),this.events=[]},enable:function(){this.enabled=!0,this.overlayEl&&this.overlayEl.setStyle("display","block")},disable:function(){this.enabled=!1,this.overlayEl&&this.overlayEl.setStyle("display","none")},getContentEl:function(){return this.contentEl},show:function(){var r="sqs-lightbox"+(this.params.name?" sqs-lightbox-"+this.params.name:"");if(e.Lang.isArray(this.params.classNames)&&(r=r+" "+this.params.classNames.join(" ")),this.contentEl=e.Node.create('<div class="'+r+'"></div>'),e.Lang.isArray(this.params.content)?this.params.content.forEach(function(n){this.contentEl.append(n)},this):this.contentEl.append(this.params.content),this.contentEl.setStyles({position:"fixed",opacity:"0",zIndex:this.params.zIndex}),this.events.push(e.on("resize",this.position,e.one(window),this)),this.params.disableNormalClose||e.Squarespace.EscManager.addTarget(this),this.params.containerNode.append(this.contentEl),this.params.contentOnly)this._showContent();else{var s="sqs-lightbox-overlay"+(this.params.name?" sqs-lightbox-overlay-"+this.params.name:"")+" "+this.params.theme;this.params.name&&(s+=" sqs-lightbox-overlay-"+this.params.name),this.params.overlayStyle&&(s+=" sqs-lightbox-overlay-style-"+this.params.overlayStyle),e.Lang.isArray(this.params.classNames)&&(s=s+" "+this.params.classNames.join(" ")),this.overlayEl=e.Node.create('<div class="'+s+'"></div>'),this.overlayEl.setStyles({zIndex:this.params.zIndex-1}),this.params.containerNode.append(this.overlayEl),this.fire("showing"),this.a=e.Squarespace.Transitions.getTransition({el:this.overlayEl,opacity:this.params.opacity,name:"fade",direction:"in",duration:this.params.overlayShowDuration}),this.a.on("end",function(){this.fire("overlay-visible"),this.a=null,this._showContent()},this),this.a.run(),this.params.disableNormalClose?this.events.push(e.on("click",function(n){n.halt()},this.overlayEl,this)):this.events.push(e.on("click",this.close,this.overlayEl,this))}this.params.clickAnywhereToExit&&this.events.push(e.on("click",this.hide,this.contentEl,this))},position:function(){if(this.enabled){var r=e.one(document).get("winWidth"),s=e.one(document).get("winHeight"),n,i;r<this.naturalW+this.params.margin*2?n=r-this.params.margin*2:n=this.naturalW,s<this.naturalH+this.params.margin*2?i=s-this.params.margin*2:i=this.naturalH;var u=(r-n)/2,h=(s-i)/2;this.contentAttached&&(this.contentEl.setStyles({left:u+"px",top:h+"px",width:n+"px"}),this.params.noHeightConstrain||this.contentEl.setStyles({height:i+"px"}),this.resizeTarget&&this.resizeTarget.resizeToParent({scale:"contain"})),this.fire("position",{width:n,height:i,verticalWidth:r,verticalHeight:s,maxWidth:r-this.params.margin*2,maxHeight:s-this.params.margin*2})}},_showContent:function(){this.contentAttached=!0,this.resizeTarget=this.contentEl.one(".resize-target"),this.naturalW=this.contentEl.one("*").get("offsetWidth"),this.naturalH=this.params.height||this.contentEl.one("*").get("offsetHeight"),this.position(),this.fire("content-ready");var r=e.Squarespace.Transitions.getTransition({el:this.contentEl,name:this.params.transition,direction:"in",duration:this.params.contentShowDuration});r.on("end",function(){this.fire("content-visible")},this),r.run()},close:function(r){!this.params.clickAnywhereToExit&&(!r||this.overlayEl&&this.overlayEl.compareTo(r.target))||this.hide()},hide:function(){var r;this.enabled&&(this.a&&this.a.stop(),this.a=null,this.fire("hiding"),e.Squarespace.EscManager.removeTarget(this),this.overlayEl&&(r=e.Squarespace.Transitions.getTransition({el:this.overlayEl,name:"fade",direction:"out",duration:this.params.overlayShowDuration}),this.params.overlayShowDuration>this.params.contentShowDuration&&(this.a=r),r.run()),r=e.Squarespace.Transitions.getTransition({el:this.contentEl,name:this.params.transition,direction:"out",duration:this.params.contentShowDuration}),this.a||(this.a=r),r.run(),this.a.on("end",function(){this.destroy(),this.fire("hidden")},this))},destroy:function(){for(var r=0;r<this.events.length;++r)this.events[r].detach();this.contentEl&&this.contentEl.remove(),this.overlayEl&&this.overlayEl.remove(),this.contentEl=null,this.overlayEl=null,this.events=[]}}),e.augment(e.Squarespace.Lightbox,e.EventTarget),e.Squarespace.CustomAnim=Class.create({initialize:function(r){this.params=r},cancel:function(){},stop:function(){}}),e.augment(e.Squarespace.CustomAnim,e.EventTarget),e.augment(e.Squarespace.CustomAnim,e.Attribute),e.Squarespace.Transitions={STANDARD_DURATION:.3,getTransition:function(r){return!r.el||!r.el._node?new e.Anim:(r.duration||(r.duration=e.Squarespace.Transitions.STANDARD_DURATION),e.Squarespace.Transitions.transitionsByName[r.name](r))},transitionsByName:{fade:function(r){return new e.Anim({node:r.el,to:{opacity:e.Lang.isValue(r.opacity)?r.opacity:r.direction==="in"?1:0},duration:e.Squarespace.Transitions.STANDARD_DURATION,easing:e.Easing.easeOutStrong})},scale:function(r){return new(Class.extend(e.Squarespace.CustomAnim,{run:function(){r.opacity||(r.opacity=1),e.Lang.isValue(r.duration)||(r.duration=e.Squarespace.Transitions.STANDARD_DURATION);var s=this.params.el;this.params.direction==="in"?(s.setStyles({transform:"scale(.95)",opacity:0}),e.later(10,s,s.setStyles,{transitionProperty:"transform, opacity",transitionDuration:r.duration+"s",transitionTimingFunction:"ease-out","backface-visibility":"hidden"}),e.later(20,s,s.setStyles,{transform:"scale(1)",opacity:r.opacity})):(s.setStyles({transform:"scale(1)",opacity:r.opacity}),e.later(10,s,s.setStyles,{transitionProperty:"transform, opacity",transitionDuration:r.duration+"s",transitionTimingFunction:"ease-out",backfaceVisibility:"hidden"}),e.later(20,s,s.setStyles,{transform:"scale(.95)",opacity:0})),e.later(r.duration*1e3+100,this,function(){this.fire("end",{_event:!0})})}}))(r)},none:function(r){return new(Class.extend(e.Squarespace.CustomAnim,{run:function(){this.params.direction==="in"?this.el.setStyle("opacity",1):this.el.setStyle("opacity",0),this.fire("end")}}))(r)}}},e.Squarespace.Effects={bounce:function(r){r.setStyles({transform:"scale(1)"}),e.later(10,r,r.setStyles,{transitionProperty:"transform, opacity",transitionDuration:".1s",transitionTimingFunction:"ease-out",backfaceVisibility:"hidden"}),e.later(20,r,r.setStyles,{transform:"scale(1.1)"}),e.later(100,r,r.setStyles,{transform:"scale(1)"})},focus:function(r){r.setStyles({boxShadow:"0px 0px 0px rgb(20, 170, 255)"}),e.later(10,r,r.setStyles,{transitionProperty:"boxShadow",transitionDuration:".2s",transitionTimingFunction:"ease-out"}),e.later(20,r,r.setStyles,{boxShadow:"0px 0px 10px rgb(20, 170, 255)"}),e.later(200,r,r.setStyles,{boxShadow:null})},blink:function(r){var s=new e.Anim({node:r,to:{opacity:0},duration:.6,easing:e.Easing.easeOutStrong});s.on("end",function(){var n=new e.Anim({node:this.get("node"),to:{opacity:1},duration:.6,easing:e.Easing.easeOutStrong});n.on("end",function(){}),n.run()}),s.run()},shimmy:function(r){r.setStyles({transform:"translateX(0px)"}),e.UA.safari?e.later(10,r,r.setStyles,{webkitTransitionProperty:"-webkit-transform",webkitTransitionDuration:".3s",webkitTransitionTimingFunction:"cubic-bezier(0.175, 0.885, 0.32, 1.275)"}):e.later(10,r,r.setStyles,{transitionProperty:"transform",transitionDuration:".3s",transitionTimingFunction:"cubic-bezier(0.175, 0.885, 0.32, 1.275)"}),e.later(20,r,r.setStyles,{transform:"translateX(-33px)"}),e.later(200,r,r.setStyles,{transform:null})}},e.augment(e.Node,Class.create({intersectXY:function(r,s){var n=this.get("region");return n.left<r&&r<n.right&&n.top<s&&s<n.bottom},forceClass:function(r,s){this.toggleClass(r,!!s)},data:function(r){var s=this._node;if(r)for(;s;){if(s.data&&s.className.indexOf(r)!==-1)return s.data;s=s.parentNode}else for(;s;){if(s.data)return s.data;s=s.parentNode}return null},setNodeData:function(r){this._node.data=r}})),e.Squarespace.RelativeTimeDisplay=e.Base.create("RelativeTimeDisplay",e.Plugin.Base,[],{initializer:function(){this.timer=e.later(this.get("interval"),this,this.syncUI,{},!0),this.syncUI()},syncUI:function(){var r=Math.floor((new Date().getTime()-this.get("date").getTime())/1e3);r<60?r===0?this.get("host").setContent((0,l.t)("just now",null,{project:"scripts-v6-root"})):this.get("host").setContent((0,l.t)("about {secondsDifference} seconds ago",{secondsDifference:r},{project:"scripts-v6-root"})):this.get("host").setContent((0,d.Z)(this.get("date"),!0))},destructor:function(){this.timer.cancel()}},{NS:"RelativeTimeDisplay",CSS_NAMESPACE:"sqs-action-overlay",ATTRS:{date:{valueFn:function(){return new Date}},interval:{value:5e3}}}),e.Squarespace.PositionAnimator=e.Base.create("PositionAnimator",e.Plugin.Base,[],{hold:function(){this.set("originalTop",this.get("host").get("offsetTop")),this.set("originalLeft",this.get("host").get("offsetLeft")),this.previousPosition=this.get("host").getStyle("position")},release:function(r){var s=this.get("host").get("offsetTop"),n=this.get("host").get("offsetLeft"),i=this.get("baseSpeed")+(r?0:Math.random()*.2),u=r?0:200*Math.random(),h=this.get("originalTop")-s,g=this.get("originalLeft")-n;this.get("host").setStyles({position:"relative",top:h,left:g,transition:"none"});var p=this,f=this.get("host").anim({top:0,left:0},{from:{top:h,left:g},duration:i,end:function(){this.get("node")._node&&(this.get("node").setStyles({position:this.previousPosition,top:null,left:null,transition:null}),p.get("releasedFn")&&p.get("releasedFn")(),p.fire("released"))}});e.later(u,f,f.run)},destructor:function(){}},{NS:"positionAnimator",ATTRS:{originalTop:{},originalLeft:{},releasedFn:{value:!1},baseSpeed:{value:.2}}}),e.Anim.behaviors.translate={set:function(r,s,n,i,u,h,g){var p=g(u,parseInt(n[0],10),parseInt(i[0],10)-parseInt(n[0],10),h),f=g(u,parseInt(n[1],10),parseInt(i[1],10)-parseInt(n[1],10),h);r._node.setStyles({transform:"translate("+p+"px, "+f+"px)"})},get:function(r){return[0,0]}}},"1.0",{requires:["anim","attribute","base","event-custom","node","plugin"]})},30076:function(c,b,t){"use strict";var l=t(714487),d=t(362958),o=t(324959),e=t(762379),a=t(444867),r=t.n(a),s=t(985913);YUI.add("squarespace-uploader",function(n){if(n.namespace("Squarespace"),(0,s.F)(n)){n.Squarespace.Uploader=n.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Uploader");return}var i={ERR_FILE_UPLOAD:(0,l.t)("Upload failed, please retry",null,{project:"scripts-v6-root"}),ERR_FILE_PROCESSING:(0,l.t)("Error processing file, please retry.",null,{project:"scripts-v6-root"}),INVALID_SIZE_TITLE:(0,l.t)("File Size Limit Exceeded",null,{project:"scripts-v6-root"}),INVALID_SIZE:(0,l.t)("The file <strong>{name}</strong> is too large. The maximum allowed file size is <strong>{size}MB</strong>.",null,{project:"scripts-v6-root"}),INVALID_TYPE_TITLE:(0,l.t)("Only {typeDescription} Allowed",null,{project:"scripts-v6-root"}),INVALID_TYPE:(0,l.t)("The file <strong>{name}</strong> does not appear to be a supported {type} file.",null,{project:"scripts-v6-root"}),HINT_FILE_UPLOAD:(0,l.t)("Add a file",null,{project:"scripts-v6-root"}),HINT_FILE_UPLOAD_CLICK_ONLY:(0,l.t)("Click here to add a file",null,{project:"scripts-v6-root"})};if(n.Uploader.TYPE==="none"){console.error("non-functional uploader");return}n.mix(n.FileHTML5,{isValidFile:function(u){var h=n.config.win.File,g;try{g=n.Squarespace.Damask.ContextGlobals.fromFrame("File")}catch{console.warn("[FileUploader] Could not find bottomFrameFile.")}return h&&(u instanceof h||u instanceof g)}},!0),n.Squarespace.Uploader=n.Base.create("uploader",n.Uploader,[n.WidgetChild],{initializer:function(u){this.set("swfURL","/combo/yui/?3.10.1/uploader/assets/flashuploader.swf"),this.set("buttonClassNames",{hover:"",active:"",focus:""}),this.after(["dragenter","dragover","dragleave","drop"],this._ddHandler,this),this._files={},this.get("fileFilters")||this.addAttr("fileFilters",{value:null}),this.after("uploadprogress",this._onUploadFileProgress,this),this.after("uploadcomplete",this._onUploadFileComplete,this),this.on("uploaderror",this._onUploadFileFailure,this),this.on("fileListChange",this._fileListChange,this),this.after("fileFiltersChange",this._fileFiltersChange,this),n.Data.DEBUG,u.fileFilters&&this.set("fileFilters",u.fileFilters)},destructor:function(){var u=this.get("dragAndDropArea");u&&u.removeClass("drop-active"),this._jobOnceCompleteEvt&&this._jobOnceCompleteEvt.detach(),this._jobOnceFailureEvt&&this._jobOnceFailureEvt.detach()},cleanupFile:function(u){if(u){var h=u.get("id");this.set("fileList",this.get("fileList").filter(function(g){return g.get("id")!==h}),{source:"cleanupFile"}),delete this._files[h]}},bindUI:function(){n.Squarespace.Uploader.superclass.bindUI.call(this),this.on("selectButtonLabelChange",function(u){this.get("selectFilesButton").one(".text").setContent(u.newVal)},this)},_onUploadFileProgress:function(u){var h=u.file&&u.file.get("id"),g=this._files[h],p=g&&g.placeholder&&g.placeholder[n.Squarespace.Plugin.ProgressBar.NS];p&&(p.set("show",!0),p.set("progress",u.percentLoaded))},_onUploadFileComplete:function(u){var h=u.file&&u.file.get("id"),g=this._files[h]||{},p=g.placeholder&&g.placeholder[n.Squarespace.Plugin.ProgressBar.NS],f=g.placeholder&&g.placeholder[n.Squarespace.Plugin.ProgressSpinner.NS],m=u.data;if(typeof m=="string")try{m=n.JSON.parse(m)}catch{this._onUploadFileFailure(u)}if(m.error){this._onServerRejectFile(u,m);return}if(p&&(p.set("progress",100),p.set("show",!1)),this.get("fileComplete")&&this.get("fileComplete")(g,m),!this.get("createJob")){p&&p.set("show",!1),f&&f.set("show",!1),this.cleanupFile(u.file),this.fire("upload-complete",n.JSON.parse(u.data));return}m&&m.job&&(f&&f.set("show",!0),this._processResponse(m,g))},_processResponse:function(u,h){if(u&&u.job){var g=h.job=this.get("createJob")(h,u);g&&(g.get("id")||g.set("id",h.id),this._jobOnceCompleteEvt=g.once("complete",n.bind(this._onJobHandler,this,"jobComplete",h)),this._jobOnceFailureEvt=g.once("failure",n.bind(this._onJobHandler,this,"jobFailure",h)),Static.JOB_MANAGER.addJob(g))}},_onServerRejectFile:function(u,h){new n.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Upload Error",null,{project:"scripts-v6-root"}),"strings.message":h.error}),this.fire("upload-failure"),this.cleanupFile(u.file)},_onUploadFileFailure:function(u){var h=this.fileDataFromFile(u.file);h.error={type:d.Z.UPLOAD,message:i.ERR_FILE_UPLOAD},u.fileData=h,this.cleanupFile(u.file),this.abort()},_onJobHandler:function(u,h,g){var p=h.placeholder&&h.placeholder[n.Squarespace.Plugin.ProgressSpinner.NS];if(p&&p.set("show",!1),h.id&&!this._files[h.id])return console.log("file upload aborted");u==="jobFailure"&&(h.error={type:d.Z.PROCESSING,message:i.ERR_FILE_PROCESSING}),this.get(u)&&this.get(u)(h,g.target),this.cleanupFile(h.file),this.fire(u,{job:g.target,fileData:h})},_ddEventHandler:function(u){if(u.stopPropagation(),u.preventDefault(),n.Array.indexOf(u._event.dataTransfer.types,"Files")>-1)switch(u.type){case"dragenter":this.fire("dragenter",{originalEvent:u});break;case"dragover":this.fire("dragover",{originalEvent:u});break;case"dragleave":this.fire("dragleave",{originalEvent:u});break;case"drop":var h=u._event.dataTransfer.files,g=[],p=this.get("fileFilterFunction"),f;p?n.each(h,function(m){var _=new n.FileHTML5(m);p(_)&&g.push(_)}):n.each(h,function(m){g.push(new n.FileHTML5(m))}),g.length>0&&(f=this.get("fileList"),this.set("fileList",this.get("appendNewFiles")?f.concat(g):g,{source:"drag-and-drop"}),this.fire("fileselect",{fileList:g})),this.fire("drop",{fileList:g});break}},getDataTransferFromEvent:function(u){return n.Object.getValue(u,"domEvent._event.dataTransfer".split("."))||n.Object.getValue(u,"originalEvent._event.dataTransfer".split("."))},_ddHandler:function(u){var h=this.get("dragAndDropArea");if(h){var g=this.getDataTransferFromEvent(u);u.type==="uploader:dragover"||u.type==="uploader:dragenter"?(h.addClass("drop-active"),(0,o.Z)(g,"move")):(h.removeClass("drop-active"),(0,o.Z)(g,"none"))}},uploadAll:function(){var u=this.get("fileList");if(!(u&&u.length===0)){var h=this.get("preflight");h?h(n.bind(function(){n.each(this.get("fileList"),function(g,p){this._processFile(this.fileDataFromFile(g))},this),n.Squarespace.Uploader.superclass.uploadAll.call(this)},this)):n.Squarespace.Uploader.superclass.uploadAll.call(this)}},abort:function(){this.set("fileList",[])},fileDataFromFile:function(u){if(u)return this._files[u.get("id")]},validateFile:function(u){u=u.get?this.fileDataFromFile(u):u;var h=u.file,g=[];if(h.get("size")>this.get("maxSize")*1024*1024&&!e.Z.isFeatureEnabled(r().ALLOW_VIP_SIZE_UPLOADS)&&g.push({title:i.INVALID_SIZE_TITLE,message:n.substitute(i.INVALID_SIZE,{name:n.Escape.html(h.get("name")),size:this.get("maxSize")})}),this._extensionCheck&&!this._extensionCheck.test(h.get("name"))){var p=this.get("fileFilters").map(function(E){return E.description}),f=p.length>1?(0,l.t)("{sub1} or {sub2}",{sub1:p.slice(0,-1).join(","),sub2:p[p.length-1]},{project:"scripts-v6-root"}):p[0],m={typeDescription:f,name:n.Escape.html(h.get("name")),type:f.toLowerCase().replace(/s\b/g,"")};g.push({title:n.substitute(i.INVALID_TYPE_TITLE,m),message:n.substitute(i.INVALID_TYPE,m)})}var _=this.get("validateFileFn");if(n.Lang.isFunction(_)){var v=_(h,u);n.Lang.isObject(v)&&g.push(v)}return g.length&&(u.invalid=g),!g.length},makeDefaultErrorBlock:function(u){var h=u.file?u:this.fileDataFromFile(u),g=h&&h.error;if(!g)return"";var p=n.Node.create('<div class="failed"><div class="message">'+g.message+'</div><div class="filename">'+h.file.get("name")+'</div><div class="button"><div class="button-title">'+(0,l.t)("Dismiss",null,{project:"scripts-v6-root"})+"</div></div></div>");return p},_fileFiltersChange:function(u){var h=[];u.newVal&&(n.each(u.newVal,function(g){var p=g.extensions.split(";").map(function(f){return"(?:"+f.slice(2)+"$)"});h=h.concat(p)},this),this._extensionCheck=new RegExp(h.join("|"),"i"))},_setFileFilters:function(){if(this._fileInputField)if(this.get("fileFilters").length>0){for(var u=[],h=this.get("fileFilters"),g=0;g<h.length;g++)u+=h[g].acceptTypes;this._fileInputField.set("accept",u)}else this._fileInputField.set("accept","")},_fileListChange:function(u){if(u.source!=="cleanupFile"){var h={},g=!1,p=this.get("uploadLimit");if(!this.get("multipleFiles")&&u.newVal.length>1&&(u.newVal=[u.newVal[0]]),n.Lang.isNumber(p)&&u.newVal.length>p){u.newVal=u.newVal.slice(0,p);var f=(0,l.t)("You have exceeded the upload limit! Only your first {uploadLimit} will be uploaded.",{uploadLimit:p},{project:"scripts-v6-root"});new n.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Upload Limit Exceeded",null,{project:"scripts-v6-root"}),"strings.message":f})}var m=[];if(n.each(u.newVal,function(v,E){var S=v.get("id");if(this._files[S]){m.push(v);return}var y=this._processFile({id:S,file:v,index:E});if(y.invalid){m.push(v);return}h[S]=y,g=!0,!h[S].placeholder&&this.get("addPlaceholder")&&(h[S].placeholder=this.get("addPlaceholder")(h[S])),delete this._files[S]},this),m.length)for(var _=0;_<m.length;_++)u.newVal.remove(m[_]);this.get("removePlaceholder")&&n.each(this._files,function(v,E){this.queue&&this.queue.cancelUpload(v.file),v.job&&Static.JOB_MANAGER.removeJobById(v.job.id),this.get("removePlaceholder")(v)},this),this._files=h,g&&this.get("autoUpload")&&(this.fire("track-image-upload",{source:u.source}),n.later(0,this,this.uploadAll))}},_processFile:function(u){this.validateFile(u);var h=this.get("processFile");h&&h(u),u.postData=n.merge(u.postData||{},{fileName:u.file.get("name"),fileSize:u.file.get("size")});var g=this.get("postVarsPerFile");return g[u.id]=u.postData,this.set("postVarsPerFile",g),u},_makeDefaultSelectFilesButton:function(){return n.Node.create('<button class="upload-indicator image" tabindex="0"><div class="icon">&nbsp;</div><div class="text">'+this.get("selectButtonLabel")+"</div></button>")}},{CSS_PREFIX:"sqs-uploader",ATTRS:{processFile:{},addPlaceholder:{},removePlaceholder:{},preflight:{},createJob:{},fileComplete:{},jobComplete:{},jobFailure:{},autoUpload:{value:!1},isTransient:{value:!1},isGlobal:{value:!1},transientItemId:{value:""},transientItemUrl:{value:""},maxSize:{value:20},uploadLimit:{value:null},uploadURL:{valueFn:function(){return"/api/commondata/"+(this.get("isGlobal")?"SaveGlobalMedia":"SaveMedia")},setter:function(u){return n.Data.addCrumb(u)}},selectButtonLabel:{value:n.Uploader.TYPE==="flash"?i.HINT_FILE_UPLOAD_CLICK_ONLY_HINT:i.HINT_FILE_UPLOAD},selectFilesButton:{valueFn:"_makeDefaultSelectFilesButton",setter:function(u){return u||this._makeDefaultSelectFilesButton()}},validateFileFn:{},persistTransient:{value:!1,validator:n.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","file-html5","node","squarespace-attr-validators","squarespace-damask-context-globals","squarespace-plugin-progress-bar","squarespace-plugin-progress-spinner","squarespace-util","squarespace-widgets-alert","uploader","widget-child"]})},551593:function(c,b,t){"use strict";var l=t(714487),d=t(437951),o=t.n(d),e=t(816130),a=t.n(e),r=t(387582),s=t(762379),n=t(444867),i=t.n(n);YUI.add("squarespace-upsell-product-violations",function(u){u.namespace("Squarespace.Upsell");var h=["51b3dc8ee4b051b96ceb10de"];function g(p){return p.get("type")===o().PRODUCTS?s.Z.isFeatureEnabled(i().NESTED_CATEGORIES)?r.Z.NESTED_CATEGORIES_LIMIT:r.Z.MAX_PRODUCTS_IN_COLLECTION:p.get("ordering")===a().USER?r.Z.MAX_ITEMS_IN_USER_ORDERABLE_COLLECTION:p.get("ordering")===a().MUSIC_ALBUM?r.Z.MAX_TRACKS_IN_ALBUM:99999}u.Squarespace.Upsell.getMaxItemCountForCollection=g,u.Squarespace.ProductViolations={isAllowedToAddItemToCollection:function(p,f){return u.Squarespace.Promises.create(function(m,_){var v=p.get("nextDisplayIndex"),E=g(p),S=u.Squarespace.Context.getInstance().get("website").get("id"),y=h.includes(S);if(y)return m(!0);if(v+f>E)return new u.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Page Max Size Reached",null,{project:"scripts-v6.upsell"}),"strings.message":(0,l.t)("This page has a maximum size of {maxItemCount} items. We recommend adding an additional page to hold your items.",{maxItemCount:E},{project:"scripts-v6.upsell"})}),_();m(!0)})}}},"1.0",{requires:["base","squarespace-models-inventory","squarespace-models-plan","squarespace-promises"]})},679810:function(c,b,t){"use strict";var l=t(991735);YUI.add("squarespace-util-authenticated",function(d){d.namespace("Squarespace"),d.Squarespace.UtilAuthenticated={userHasAccessPermission:function(o){return l.Z.hasPermission(o)},isSquarespaceAdmin:function(){return l.Z.isAdmin()}}},"1.0",{requires:["squarespace-util"]})},85548:function(c,b,t){"use strict";var l=t(659519),d=t(985913),o=t(312713),e=t(635845);function a(r,s,n){for(var i=arguments.length,u=new Array(i>3?i-3:0),h=3;h<i;h++)u[h-3]=arguments[h];return r.on("click",s,n,...u)}YUI.add("squarespace-util",function(r){r.Squarespace.API_ROOT="/api/",r.Squarespace.REST_API_ROOT="/api/rest/",r.Squarespace.Utils={isInDamaskFrame:function(){return(0,d.F)(r)},areCookiesEnabled:function(){return(0,o.z)()},storeSharedSSIdentity:function(){return(0,e.m)()},removeSharedSSIdentity:function(){return(0,e.W)()},onPointerAction:function(){return a.apply(this,Array.prototype.slice.call(arguments))}},r.Squarespace.Analytics={trackInternal:function(s,n,i){(0,l.Z)(s,n).then(i)}}},"1.0",{requires:["squarespace-browser-patches"]})},330171:function(c,b,t){"use strict";var l=t(714487),d=t(994336),o=t.n(d);function e(){var n;return(n=window.Static)===null||n===void 0?void 0:n.SQUARESPACE_CONTEXT}function a(){const{website:n}=e();return!!(n!=null&&n.cloneable)}function r(){const{cookieSettings:n}=e(),{isRestrictiveCookiePolicyEnabled:i,isCookieBannerEnabled:u}=n;if(a())return!0;const h=o().get("ss_performanceCookiesAllowed"),g=o().get("ss_marketingCookiesAllowed");return n&&i&&(!u||!h||h==="false"||!g||g==="false")}var s=t(759352);YUI.add("squarespace-video-loader",function(n){n.namespace("Squarespace"),n.Squarespace.VideoLoader=n.Base.create("VideoLoader",n.Plugin.Base,[],{initializer:function(){var i=this.get("host");i.plug(n.Squarespace.NodeDestroyNotifier,{onDestroy:function(){this.destroy()},context:this}),this._setVariables(),this._resizeEmitter=new n.Squarespace.ResizeEmitter({timeout:1e3}),this._onFullscreenChangeHandler=this.handleFullScreenChange.bind(this),this._modeClass="video-"+this.get("mode"),i.addClass(this._modeClass),this.once("loaded",this.bindUI,this),this.get("load")&&this.load(),this.after("forceAutoplayChange",function(){this._augmentVideoSrc()})},destructor:function(){this.prefixedFullScreenEvents.forEach((function(i){n.config.doc.removeEventListener(i,this._onFullscreenChangeHandler)}).bind(this)),this._resizeEmitter.destroy()},load:function(){if(!this._loaded){this.get("type")==="invalid"&&(this._intrinsic=!1,this.get("overlay")&&(this.get("overlay").remove(),this._set("overlay",null)));var i=this.get("host"),u=this.get("mode");i.removeClass(this._modeClass),this._modeClass="video-"+u,i.addClass(this._modeClass);var h,g;if(this._intrinsic){var p=this.getWidth(),f=this.getHeight(),m;p&&f?m=f/p*100:m=56.3,h=this._getOrCreateNode(".intrinsic",'<div class="intrinsic"></div>'),g=this._getOrCreateNode(".intrinsic-inner",'<div class="intrinsic-inner"></div>'),g.setStyle("paddingBottom",m+"%");var _=i.get("parentNode"),v=_.getComputedStyle("position");u==="fit"?(i.setStyles(i.getAdjustedDimensions({scale:"contain",width:this.getWidth(),height:this.getHeight()})),v==="static"&&_.setStyle("position","relative")):u==="fill"&&v==="static"&&_.setStyle("position","relative"),this.get("overlay")?(this.get("overlay").wrap(g),g.wrap(h)):(h.appendChild(g),i.appendChild(h))}var E=this.get("overlay");if(E){E.setStyle("opacity",1);var S=E.one(".sqs-video-opaque");S||(S=n.Node.create('<div class="sqs-video-opaque"></div>'),E.appendChild(S));var y=E.one(".sqs-video-icon");y||(y=n.Node.create('<div class="sqs-video-icon"></div>'),E.appendChild(y)),this._setPlayButtonAttributes(this.get("inactive")),this.after("inactiveChange",function(O){this._setPlayButtonAttributes(O.newVal)},this);var C=E.one("img");C&&(C.fire("refresh"),C.plug(n.Squarespace.Loader2,{load:!0,mode:"fill"}),C.fire("refresh"))}else h?g.appendChild(this.get("video")):i.appendChild(this.get("video")),this._set("showingVideo",!0);this._cacheOverlayWrapperHeight(),this.fire("loaded"),this._loaded=!0}},_setPlayButtonAttributes:function(i){var u=this.get("overlay").one(".sqs-video-icon");i?(u.removeAttribute("tabindex"),u.removeAttribute("role"),u.removeAttribute("aria-label")):(u.setAttribute("tabindex",0),u.setAttribute("role","button"),u.setAttribute("aria-label",(0,l.t)("Play",null,{project:"scripts-v6-root",notes:"Play video button label"})))},_cacheOverlayWrapperHeight:function(){var i=this.get("host").get("parentNode"),u=i.get("offsetHeight");i.setData("cached-height",u)},_getOrCreateNode:function(i,u){var h=this.get("host").one(i);return h||n.Node.create(u)},unload:function(){var i=this.get("host");i.setStyles({top:null}),this.showOverlay(),this.get("overlay")&&this.get("overlay").remove(),this.get("video").remove(),this._intrinsic&&i.one(".intrinsic").remove(!0),this.get("overlay")&&(this.get("overlay").setStyle("opacity",0),i.appendChild(this.get("overlay"))),this._setIntrinsic(),this._loaded=!1},reload:function(){this.unload(),this.load()},handleFullScreenChange:function(i){this.isFullScreen=!this.isFullScreen},showVideoIfNotInactive:function(){this.get("inactive")||this.showVideo()},bindUI:function(){this.get("overlay")&&(this.get("overlay").on("click",this.showVideoIfNotInactive,this),this.get("overlay").one(".sqs-video-icon").on("keydown",function(i){var u=i.keyCode===13,h=i.keyCode===32;(u||h)&&this.showVideoIfNotInactive()},this)),this.after("modeChange",this.reload,this),this._resizeEmitter.on("resize",function(){if(this.get("mode")==="fit"&&this._resetFitTop(),this.get("overlay")){var i=this.get("overlay").one("img");i&&i.fire("refresh")}},this),this._resizeEmitter.on("resize:end",function(){this.get("mode")==="fit"&&!this.isFullScreen&&(this._cacheOverlayWrapperHeight(),this._resetFitTop())},this),this.prefixedFullScreenEvents.forEach((function(i){n.config.doc.addEventListener(i,this._onFullscreenChangeHandler)}).bind(this)),n.Global.on("tweak:aftershow",function(){this.get("mode")==="fit"&&this._resetFitTop()},this),n.Global.after("tweak:afterclose",function(){this.get("mode")==="fit"&&setTimeout(n.bind(function(){this._resetFitTop()},this),1e3)},this)},showVideo:function(){if(!(this.get("showingVideo")||!this.get("overlay"))){this._set("showingVideo",!0),this._showOverlayOnOthers();var i=this.get("video");i.setStyle("opacity",0),this._intrinsic?this.get("host").one(".intrinsic-inner").appendChild(i):this.get("host").appendChild(i);var u=this.get("overlay"),h=u.one(".sqs-video-opaque");h.anim({opacity:1},{duration:1,start:function(){u.one(".sqs-video-icon").setStyle("visibility","hidden")},end:function(){this.get("video").setStyle("opacity",1),this.get("showingVideo")&&u.setStyle("visibility","hidden"),u.hasClass("no-thumb")?h.setStyle("opacity",1):h.setStyle("opacity",0),u.one(".sqs-video-icon").setStyle("visibility",null)},context:this}).run()}},showOverlay:function(){if(!(!this.get("showingVideo")||!this.get("overlay"))){this._set("showingVideo",!1),this.get("overlay").setStyle("opacity",0),this.get("overlay").setStyle("visibility",null);var i=this.get("video");i.anim({opacity:0},{duration:.3,start:function(){this.get("overlay").anim({opacity:1},{duration:.3}).run()},end:function(){i.remove()},context:this}).run()}},refreshVideo:function(){if(this.get("showingVideo")){var i=this.get("video");if(this.get("type")==="object"){i.remove();var u=this.get("host");this._intrinsic?u.one(".intrinsic-inner").appendChild(i):u.appendChild(i)}else this.get("type")==="iframe"&&i.setAttribute("src",i.getAttribute("src"))}},play:function(){if(this.get("apiFriendly")){var i=this.get("video").getDOMNode().contentWindow;switch(this._providerName){case"Vimeo":i.postMessage('{"method": "play", "value": "true"}',"*");break;case"YouTube":i.postMessage('{"event":"command","func":"playVideo","args":""}',"*");break}}},pause:function(){if(this.get("apiFriendly")){var i=this.get("video").getDOMNode().contentWindow;switch(this._providerName){case"Vimeo":i.postMessage('{"method": "pause", "value": "true"}',"*");break;case"YouTube":i.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");break}}},getWidth:function(){return this.get("video").getAttribute("width")},getHeight:function(){return this.get("video").getAttribute("height")},_setVariables:function(){var i=this.get("host");this._setIntrinsic(),this._set("overlay",i.one(".sqs-video-overlay"));var u=n.Node.create(i.getAttribute("data-html")),h=n.Node.create('<div class="sqs-video-invalid-wrapper"><div class="state-message">'+(0,l.t)("Custom featured images only available with embedded videos. Go back into embed settings to turn off featured images.",null,{project:"scripts-v6-root"})+"</div></div>"),g=n.Node.create('<div class="sqs-video-invalid-wrapper"><div class="state-message">'+(0,l.t)("Invalid video embed.",null,{project:"scripts-v6-root"})+"</div></div>"),p;u?u.test("iframe")?(p=u,this._set("type","iframe")):u.test("object")?(p=u,this._set("type","object")):u.one("iframe")?(p=u.one("iframe"),this._set("type","iframe")):u.one("object")?u.one("embed")?(p=u.one("object"),this._set("type","object")):(p=g,this._set("type","invalid")):this.get("overlay")?(p=h,this._set("type","invalid")):(p=g,this._set("type","invalid")):(p=g,this._set("type","invalid")),this._set("video",p);var f=i.getAttribute("data-provider-name");if((!f||f==="")&&this.get("type")!=="invalid"){var m=this.get("video").getAttribute("src");m.match("player.vimeo.com")?f="Vimeo":m.match("www.youtube.com")&&(f="YouTube")}this._providerName=f,this.isFullScreen=n.config.doc.fullScreen||n.config.doc.mozFullScreen||n.config.doc.webkitIsFullScreen,this.prefixedFullScreenEvents=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],this.get("type")==="invalid"?i.addClass("video-invalid"):(this._augmentVideoSrc(),i.removeClass("video-invalid"))},_setIntrinsic:function(){this._intrinsic=this.get("mode")==="none"||this.get("mode")==="fit"},_resetFitTop:function(){var i=this.get("host"),u=i.get("parentNode").get("offsetHeight");u>n.config.win.innerHeight&&(u=i.get("parentNode").getData("cached-height")||n.config.win.innerHeight);var h=i.one(".intrinsic");h.setStyle("top",null);var g=h.get("offsetHeight");i.setStyle("top",(u-g)/2+"px")},_augmentVideoSrc:function(){var i=this.get("type"),u=this.get("video"),h=i==="iframe"?u:u.one("embed")||u,g=h.test("object")?"data":"src",p=h.getAttribute(g),f=p.split("?"),m=f[0],_=f[1]||"",v=n.QueryString.parse(_),E=this._providerName;(this.get("overlay")||this.get("forceAutoplay"))&&(E===(0,l.t)("Wistia, Inc.",null,{project:"scripts-v6-root"})?v.autoPlay="true":E==="Animoto"?v.options="autostart":v.autoplay=1);var S=["Vimeo","YouTube","Wistia, Inc.","Animoto"];if((i==="object"||S.indexOf(E)!==-1)&&s.Bw()&&(m=s.is(m)),m=m.replace("http:////","//"),m=m.replace("https:////","//"),E==="YouTube"&&r()&&(m=m.replace("https://www.youtube.com","https://www.youtube-nocookie.com")),i==="iframe")switch(E){case"YouTube":v.enablejsapi=1,this._set("apiFriendly",!0);break}p=m+"?"+n.QueryString.stringify(v),h.setAttribute(g,p)},_showOverlayOnOthers:function(){n.all(".sqs-video-wrapper").each(function(i){i!==this.get("host")&&i.videoloader.showOverlay()},this)}},{NS:"videoloader",ATTRS:{apiFriendly:{value:!1,readOnly:!0},inactive:{value:!1},load:{value:!0},mode:{value:"none",validator:function(i){return["none","fit","fill",null].indexOf(i)!==-1}},overlay:{value:null,readOnly:!0},showingVideo:{value:!1,readOnly:!0},type:{value:null,readOnly:!0},video:{value:null,readOnly:!0},forceAutoplay:{value:!1}}})},"1.0",{requires:["base","node","plugin","querystring","squarespace-dom-emitters-resize","squarespace-image-loader","squarespace-plugin-node-destroy-notifier","squarespace-ui-base"]})},269385:function(c,b,t){"use strict";var l=t(994336),d=t.n(l);YUI.add("squarespace-view",function(o){o.namespace("Squarespace").View=o.Base.create("sqsView",o.View,[],{initializer:function(e){var a=this.get("id");this.after(a+"|modelChange",function(r){r.prevVal&&r.prevVal.removeTarget(this),r.newVal&&(r.newVal.addTarget(this),r.newVal.after("destroy",this.destroy,this))}),e&&e.model&&this.set("model",e.model),this._rerenderSub=this.after(a+"|*:change",function(r){r.silent||this.render()},this)},destructor:function(e){(!e||e&&!e.preserveContainer)&&this.get("container").remove(!0),o.detachAll(this.get("id")+"|*")},render:function(e){var a=this.get("container");if(this.template){var r=this._getTemplateContext(),s=o.Squarespace.UITemplates.render(this.template,r);a.setHTML(s),d().get("SQUARESPACE_UI_DEBUG")}e&&e instanceof o.Node&&a.appendTo(e)},_getTemplateContext:function(){var e=this.get("model");return e?e.toJSON():this.getAttrs()}},{ATTRS:{container:{valueFn:function(){return o.Node.create('<div class="sqs-'+this.name+'"/>')},readOnly:!0}}})},"1.0",{requires:["base","model","node","squarespace-ui-templates","view"]})},204557:function(c,b,t){"use strict";var l=t(437951),d=t.n(l),o=t(305533),e=t.n(o),a=t(292039),r=t.n(a),s=t(113580),n=t.n(s),i=t(563535),u=t.n(i),h=t(947456),g=t.n(h),p=t(649297),f=t(916661),m=t(639236),_=t.n(m);YUI.add("squarespace-website-overlays-manager",function(v){v.namespace("Squarespace.Frontend").WebsiteOverlaysManager=v.Base.create("websiteOverlaysManager",v.Base,[],{initializer:function(){this._body=v.one(v.config.doc.body);var E=v.config.win.Static.SQUARESPACE_CONTEXT.pageType;if(E===n().NOT_FOUND&&v.config.win.Static.SQUARESPACE_CONTEXT.collection&&v.config.win.Static.SQUARESPACE_CONTEXT.collection.type===d().SPLASH_PAGE&&(E=n().SPLASH_PAGE),E===n().SPLASH_PAGE||E===n().LOCK_SCREEN){this.syncPreviewBar();return}this.syncPreviewBar(),this._initializeMobileInfoBar(),this._syncSSBadge(),this._manageOverlaps(),this.after("ssBadgeSettingsChange",this._syncSSBadge,this),this.after("mobileInfoBarSettingsChange",this.showMobileInfoBar)},syncPreviewBar:function(){if(!v.config.win.SQUARESPACE_LOGIN){var E=this._body.all('img[data-licensed-asset-preview="true"]'),S=this._body.hasClass("has-preview-getty-imgs");S||E.size()>0&&!this.previewBar?this.previewBar=new v.Squarespace.LicensedAssets.Widgets.PreviewBar({render:!0}):this.previewBar&&(this.previewBar.destroy(),this.previewBar=null)}},_syncSSBadge:function(){if(!f.Z.isSevenOne()){var E=this.get("ssBadgeSettings"),S=E.type;if(S===u().NONE){this._ssBadge&&(this._ssBadge.destroy(),this._ssBadge=null);return}var y=E.visibility===g().SCROLL,C=E.position,O=E.devices;this._ssBadge||(this._ssBadge=new v.Squarespace.Widgets.SSBadge({render:this._body})),this._ssBadge.setAttrs({type:S,position:C,autoHide:y,devices:O})}},_initializeMobileInfoBar:function(){var E=this._getMobileInfoBarSettings();E&&(this._mobileInfoBar=new v.Squarespace.Widgets.MobileInfoBar({mobileInfoBarSettings:E,style:E.style}),this._mobileInfoBar.render())},showMobileInfoBar:function(){var E=this._getMobileInfoBarSettings(!0);this.hideMobileInfoBar(),E&&(this._mobileInfoBar=new v.Squarespace.Widgets.MobileInfoBar({mobileInfoBarSettings:E,style:E.style}),this._mobileInfoBar.render())},hideMobileInfoBar:function(){this._mobileInfoBar&&(this._mobileInfoBar.destroy(),this._mobileInfoBar=null)},_manageOverlaps:function(){if(!f.Z.isSevenOne()){var E=this._isSSBadgeVisible(),S=this._isMobileInfoBarVisible(),y=this.get("ssBadgeSettings");if(y){var C=y.visibility,O=C===g().ALWAYS;E&&S&&O&&(this._adjustSSBadgeBottomOffset(),v.one(v.config.win).on("scroll",function(){var A=v.config.doc.body.scrollTop;A<=0?this._adjustSSBadgeBottomOffset():this._clearSSbadgeBottomOffset()},this))}}},_getMobileInfoBarSettings:function(E){var S=this.get("mobileInfoBarSettings"),y=null,C=E||p.Z.shouldShowMobileInformationBar({win:v.config.win,isMobile:v.UA.mobile,settings:S});if(!v.Lang.isUndefined(S)&&C){var O=e().NONE;S.style=parseInt(S.style,10),S.style!==O&&(y=S)}return y},_adjustSSBadgeBottomOffset:function(){this._ssBadge.set("className","sqs-ss-badge-mobile-info-bar-present")},_clearSSbadgeBottomOffset:function(){this._ssBadge.set("className",null)},_isSSBadgeVisible:function(){var E=this._ssBadge,S=!1;if(E){var y=E.get("boundingBox").getStyle("visibility");S=y==="visible"}return S},_isMobileInfoBarVisible:function(){var E=this._mobileInfoBar;return!!E}},{ATTRS:{ssBadgeSettings:{getter:function(E){return E=E||v.Object.getValue(v.config.win.Static,["SQUARESPACE_CONTEXT","websiteSettings"]),{visibility:E.ssBadgeVisibility,position:E.ssBadgePosition,devices:E.ssBadgeDevices,type:E.ssBadgeType}}},mobileInfoBarSettings:{valueFn:function(){return v.Object.getValue(v.config.win.Static,["SQUARESPACE_CONTEXT","websiteSettings","mobileInfoBarSettings"])}}}}),v.config.win.Squarespace.onInitialize(v,function(){var E=v.config.win.Static.SQUARESPACE_CONTEXT.pageFeatures||[];E.indexOf(r().OVERLAYS)!==-1&&(v.Squarespace.Singletons.WebsiteOverlaysManager?v.Squarespace.Singletons.WebsiteOverlaysManager.syncPreviewBar():v.Squarespace.Singletons.WebsiteOverlaysManager=new v.Squarespace.Frontend.WebsiteOverlaysManager)})},"1.0",{requires:["base","node","squarespace-licensed-assets-preview-bar","squarespace-mobile-info-bar","squarespace-ss-badge"]})},850995:function(){YUI.add("squarespace-actions-inline",function(c){c.namespace("Squarespace.Widgets");var b=c.Squarespace.Widgets.ActionsInline=c.Base.create("ActionsInline",c.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.publish("action",{emitFacade:!0,bubbles:!0})},renderUI:function(){b.superclass.renderUI.call(this),this._renderButtons()},bindUI:function(){b.superclass.renderUI.call(this),this.after("buttonsChange",this._renderButtons,this),this.get("contentBox").delegate("click",this._onButtonClick,".button-block",this),this.on("disabledChange",function(t){t.newVal?this.get("boundingBox").addClass("disabled"):this.get("boundingBox").removeClass("disabled")})},showSpinner:function(){this.get("contentBox").plug(c.Squarespace.Plugin.ProgressSpinner,{spinnerColor:"dark",spinnerSize:15,showCancel:!1,show:!0,append:!0})},hideSpinner:function(){this.get("contentBox").unplug(c.Squarespace.Plugin.ProgressSpinner)},reset:function(){this.set("buttons",[])},_renderButtons:function(){var t=this.get("contentBox"),l=c.Node.create('<div class="sqs-actions-inline-buttons button-holder"></div>');t.empty(),this.get("buttons").forEach(function(d){l.appendChild('<div class="button-block '+d.action+'" data-action="'+d.action+'"><button><span class="button-label-container"><span class="button-icon"></span><span class="button-label">'+d.label+"</span></span></button></div>")},this),t.append(l)},_onButtonClick:function(t){this.get("disabled")||this.fire("action",{actionName:t.currentTarget.getAttribute("data-action")})}},{CSS_PREFIX:"sqs-actions-inline",ATTRS:{buttons:{value:[],validator:c.Lang.isArray},disabled:{value:!1,validator:c.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-plugin-progress-spinner","squarespace-ss-widget"]})},217713:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-widgets-alert",function(d){d.namespace("Squarespace.Widgets");var o=d.Squarespace.Widgets.Alert=d.Base.create("alert",d.Squarespace.Widgets.Confirmation,[],{},{CSS_PREFIX:"sqs-widgets-confirmation",TYPE:d.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:d.Squarespace.Widgets.Confirmation.ANCHOR,TEMPLATE:d.Squarespace.Widgets.Confirmation.TEMPLATE,show:function(e){return new o(e)},ATTRS:{className:{value:"alert"},style:{value:d.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY},"strings.confirm":{value:(0,l.t)("Okay",null,{project:"scripts-v6.widgets"})}}})},"1.0",{requires:["base","squarespace-widgets-confirmation"]})},372988:function(c,b,t){"use strict";var l=t(714487),d=t(297107),o=t(759352),e=t(195949),a=t(423753);YUI.add("squarespace-widgets-audio-player",function(r){var s=100,n=2,i=75,u=r.namespace("Squarespace.Widgets").AudioPlayerMinimal=r.Base.create("audioPlayer",r.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.setAttrs(this.get("render").getData()),this.get("title")===""&&this.get("url")!==""&&this.set("title",(0,l.t)("Untitled",null,{project:"scripts-v6.widgets"})),this.set("showDownload",this.get("show-download")==="true"),this.set("colorTheme",this.get("color-theme")),this.set("artistName",this.get("author")),this._resizeEmitter=new r.Squarespace.ResizeEmitter,this._registerTrack()},destructor:function(){r.Lang.isValue(this._funk)&&(this._funk.pause(),this._funk=null),r.Lang.isValue(this._resizeEmitter)&&(this._resizeEmitter.destroy(),this._resizeEmitter=null),this._pauseAudio(),this._deregisterKeyboardScrubber&&this._deregisterKeyboardScrubber()},renderUI:function(){u.superclass.renderUI.call(this),this.get("showDownload")&&this._renderDownloadLink(),this.get("boundingBox").addClass(this.get("colorTheme"))},bindUI:function(){var h=this.get("contentBox"),g=h.one(".action");g.on("click",this._onActionButtonClick,this),g.on("keydown",function(_){var v=_.keyCode===13,E=_.keyCode===32;(v||E)&&(_.halt(),this._onActionButtonClick())},this),this.after("playingChange",this._playingChange,this),this.after("progressChange",function(_){var v=this.get("contentBox").one(".player .time .progress");v.setContent(_.newVal),v.addClass("loaded"),this._updateTracker(this.get("position"))},this),this.after("durationChange",function(_){var v=this.get("contentBox").one(".player .time .total");v.setContent(_.newVal),v.addClass("loaded"),this.syncUI()},this),this.after("titleChange",function(_){this.get("contentBox").one(".player .labels .title").setContent(_.newVal)},this),this.after("artistNameChange",function(_){this.get("contentBox").one(".player .labels .artistName").setContent(_.newVal)},this),this._registerEvent(this._resizeEmitter.on("resize:end",this.syncUI,this));var p,f;function m(_){_.halt(),p.detach(),p=null,f.detach(),f=null,this._setupScrubber(),this.set("firstPlay",!1),this.set("playing",!0)}p=h.on("click",function(_){var v=this.get("showDownload")&&_.target===this._downloadNode.one("a");v||!this.get("url")||this.get("firstPlay")&&m.call(this,_)},this),f=h.one(".action").on("keydown",function(_){var v=_.keyCode===13,E=_.keyCode===32;(v||E)&&this.get("firstPlay")&&m.call(this,_)},this)},syncUI:function(){var h=this.get("boundingBox");if(h.getDOMNode()){h.ancestor(".sqs-editing")&&(this._pauseAudio(),this.set("playing",!1));var g=h.get("offsetWidth");h.one(".player .track").setStyle("width",g),h.toggleClass("playing",this.get("playing")),h.toggleClass("tiny",g<300),h.toggleClass("no-artist",this.get("artistName")===""),h.toggleClass("first-play",this.get("firstPlay"));var p=h.one(".player .labels .title"),f=p.get("offsetWidth")<p.get("scrollWidth");p.toggleClass("marquee-mark",f)}},_onActionButtonClick:function(){this.get("firstPlay")||this.set("playing",!this.get("playing"))},_renderNativeAudio:function(){var h=r.Lang.sub(u.NATIVE_TEMPLATE,this.getAttrs());this.get("contentBox").replace(r.Node.create(h))},_createDownloadLink:function(h){return h.includes("https://audio-origin.dev.squarespace.net")||h.includes("https://audio.squarespace-cdn.com")?(0,a.N)(h):Promise.resolve(h)},_renderDownloadLink:function(){var h=this.get("contentBox").one(".player");this._createDownloadLink(this.get("url")).then((function(g){var p=(0,o.Xi)(g,"download","true"),f='<div class="download"><a href="'+p+'" target="_blank">'+(0,l.t)("Download",null,{project:"scripts-v6.widgets"})+"</a></div>";this._downloadNode=h.one(".secondary-controls").appendChild(f),h.addClass("download")}).bind(this))},_renderVisualizer:function(){for(var h=this.get("contentBox").one(".visualizer"),g="",p=0;p<s;p++)g+='<div class="eq-bar"><div class="height"></div></div>';h.append(g)},_pauseAudio:function(){d.Z.player&&d.Z.player.pause&&d.Z.player.pause()},_playingChange:function(h){if(r.UA.ios){this._createDownloadLink(this.get("fixedUrl")).then(function(g){window.location.href=g});return}r.Lang.isValue(this._funk)||this._registerTrack(),h.newVal?this._funk.play():this._funk.pause(),this.syncUI()},_registerTrack:function(){var h=r.bind(function(){this.set("playing",!1)},this),g=r.bind(function(){this.set("playing",!0),d.Z.player.setVolume(this.get("volume")/100)},this),p=r.bind(function(){var m=this._funk.duration;m>0&&(m=this._durationToStr(m),this.set("duration",m))},this),f=r.bind(function(){this.set("playing",!1),this.set("position",0)},this);this._funk=d.Z.createTrack(this.get("fixedUrl")),this._funk.on("ready",p),this._funk.on("ended",f),this._funk.on("play",g),this._funk.on("pause",h),this._funk.on("inactive",h),this._funk.on("positionChange",r.bind(this._whilePlaying,this))},_whilePlaying:function(h){this.get("playing")&&(this.set("position",h.position),this.set("progress",this._durationToStr(h.position)))},_updateTracker:function(h){var g=this.get("contentBox").one(".track .played"),p=h/this._funk.duration*100;g.setStyle("width",p+"%")},_mergeEQData:function(){for(var h=theSound.eqData,g=h.left,p=h.right,f=g.length,m=[],_=0;_<f;_++)m.push((parseFloat(g[_])+parseFloat(p[_]))/2);return m},_calculateEQChunks:function(){for(var h=this._mergeEQData(),g=[],p=0;p<length;p+=n){var f=0;r.Array.each(h.slice(p,p+n),function(m){f+=m}),g.push(f/n*i)}return g},_drawEQBars:function(){var h=this.get("contentBox").all(".eq-bar .height"),g=this._calculateEQChunks();r.Array.each(g,function(p,f){var m=h.item(f);r.Lang.isValue(m)&&m.setStyle("height",Math.min(45,g[f]))},this),this.syncUI()},_setupScrubber:function(){var h=r.Node.create('<div class="scrubber-shim"></div>'),g;h.setStyles({position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:Math.pow(10,7),cursor:"none"});var p=this.get("contentBox").one(".player .track");p.on("mousedown",function(f){this._updatePosition(f);var m=d.Z.player.getVolume();g=this.get("contentBox").one(".track").get("region"),this._funk.isActive&&d.Z.player.setVolume(m*.25),r.one("body").append(h),h.once("mouseup",function(){d.Z.player.setVolume(m),h.remove()},this)},this),h.on("mousemove",function(f){var m=this._getRelativePosition(g,f.pageX);this._funk.seek(m),this.get("playing")||(this.set("progress",this._durationToStr(m)),this.set("position",m))},this),p.setAttribute("tabindex",0),this._deregisterKeyboardScrubber=(0,e.Z)({element:p,getDuration:(function(){return this._funk.duration}).bind(this),getPosition:(function(){return this.get("position")}).bind(this),isPlaying:(function(){return this.get("playing")}).bind(this),play:(function(){this.set("playing",!0)}).bind(this),pause:(function(){this.set("playing",!1)}).bind(this),setPosition:(function(f){this._funk.seek(f),this.set("progress",this._durationToStr(f)),this.set("position",f)}).bind(this)})},_updatePosition:function(h){if(!this.get("firstPlay")){var g=this.get("contentBox").one(".track").get("region"),p=this.get("contentBox").one(".track .played .icon"),f=p.get("offsetWidth")/2;this._funk.seek(this._getRelativePosition(g,h.pageX-f))}},_durationToStr:function(h){var g=Math.floor(h%60),p=Math.floor(h/60),f=Math.floor(p/60);f>0&&(p=p%60);var m="";return f>0&&(m+=f+":",p<10&&(m+="0")),g<10&&(g="0"+g),m+=p+":"+g,m},_getRelativePosition:function(h,g){return this._funk.duration*Math.min(1,Math.max(0,(g-h.left)/h.width))},_selectVolume:function(h){var g=this.get("contentBox").all(".player .volume .bar");g.removeClass("active"),g.filter(function(p){var f=parseInt(p.getAttribute("data-level"),10);return f<=h}).addClass("active"),r.Squarespace.Singletons.Audio.set("volume",h)}},{CSS_PREFIX:"sqs-widgets-audio-player",HANDLEBARS_TEMPLATE:"block-audio-player.html",ATTRS:{fixedUrl:{getter:function(){var h=this.get("url");return h.indexOf(Static.SQUARESPACE_CONTEXT.appDomain)>0&&(h=h.replace(/^(http:\/\/|https:\/\/|\/\/)/i,window.location.protocol+"//")),h},readOnly:!0},firstPlay:{value:!0,validator:r.Squarespace.AttrValidators.isBoolean},position:{value:0,validator:r.Squarespace.AttrValidators.isNumber},progress:{validator:r.Squarespace.AttrValidators.isNullOrString},duration:{validator:r.Squarespace.AttrValidators.isNullOrString},title:{value:"",validator:r.Squarespace.AttrValidators.isString},artistName:{value:"",validator:r.Squarespace.AttrValidators.isString},playing:{value:!1,validator:r.Squarespace.AttrValidators.isBoolean},volume:{value:100,validator:r.Squarespace.AttrValidators.isNumber}}})},"1.0",{requires:["base","node","squarespace-block-audio-player-template","squarespace-dom-emitters-resize","squarespace-ss-widget","widget"]})},985931:function(c,b,t){"use strict";var l=t(714487),d=t(408549),o=t(759352);YUI.add("squarespace-widgets-confirmation-media",function(e){e.namespace("Squarespace.Widgets");var a={IMAGE:0,VIDEO:1,IFRAME:2},r=e.Squarespace.Widgets.ConfirmationMedia=e.Base.create("confirmation",e.Squarespace.Widgets.Confirmation,[],{renderUI:function(){r.superclass.renderUI.call(this);var s=this.get("mediaType");s===a.IMAGE?this._renderImage():s===a.VIDEO?this._renderVideo():s===a.IFRAME&&this._renderIframe()},_renderImage:function(){this._renderMediaNodeFromHTML('<img src="'+this.get("mediaSrc")+'"/>',this.show)},_renderVideo:function(){if(this.get("videoResolver"))this._getHTMLFromVideoResolver((function(n){this._renderMediaNodeFromHTML(n,this.show)}).bind(this));else{var s=this.get("mediaSrc");Array.isArray(s)||(s=[s]),this._renderMediaNodeFromHTML((0,d.Z)('<video preload="auto" autoplay loop>{sub1}</video>',{sub1:s.reduce(function(n,i){var u=i.src||i,h=i.type||"video/"+u.match(/\.([^\.]+)$/)[1];return(0,d.Z)('{html}<source src="{src}" type="{type}"/>',{html:n,src:u,type:h})},"")}),this.show)}},_getHTMLFromVideoResolver:function(s){this.get("videoResolver").process(this.get("mediaSrc"),{onSuccess:function(n){if(!n||!n.html){console.error("[ConfirmationMedia] no data or html passed from oembed resolver",n);return}s(n.html)},onFailure:function(n){console.warn("[ConfirmationMedia]",n)},onTimeout:function(n){console.warn("[ConfirmationMedia]",n)}},this)},_renderIframe:function(){var s=this.get("mediaSrc"),n="";s.srcDoc?n="srcDoc='"+s.srcDoc+"'":s.src?n="src='"+s.src+"'":typeof s=="string"&&(n="src='"+s+"'"),this._renderMediaNodeFromHTML("<iframe "+n+"/>",this.show)},_renderMediaNodeFromHTML:function(s,n){var i=e.Node.create(s),u=["IMG","IFRAME"].indexOf(i.get("nodeName"))>-1;u&&(i.once("load",function(g){i.detachAll(),n.call(this)},this),i.once("error",function(g){i.detachAll(),console.error("[ConfirmationMedia] Could not load image",g)}));var h=this.get("mediaDimension");e.Array.each(["width","height"],function(g){h[g]&&i.setStyle(g,h[g]+"px")}),this.set("mediaNode",i.appendTo(this.get("contentBox").one(".media"))),u||n.call(this)}},{CSS_PREFIX:"sqs-widgets-confirmation",TEMPLATE:'<div class="title"></div><div class="message"></div><div class="media"></div><div class="buttons"></div>',TYPE:e.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:e.Squarespace.Widgets.Confirmation.ANCHOR,TYPE_MEDIA:a,ATTRS:{className:{value:"with-media"},visible:{value:!1},style:{value:e.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY},"strings.confirm":{value:(0,l.t)("Okay, got it.",null,{project:"scripts-v6.widgets"})},width:{value:null,getter:function(s){var n=this.get("mediaDimension"),i=this.get("mediaNode");if(s)return s;if(n&&n.width)return n.width;if(i)return i.get("naturalWidth")||i.get("width")},lazyAdd:!1},showOverlay:{value:!0},position:{value:e.Squarespace.Widgets.PositionHelper.ANCHOR.CENTER},mediaType:{value:a.IMAGE,validator:function(s){return e.Object.hasValue(a,s)}},mediaSrc:{value:"",setter:function(s){return s&&typeof s=="string"&&(0,o.pM)(s)?(0,o.XP)(s):s}},mediaDimension:{value:{width:null,height:null}},videoResolver:{valueFn:function(){if(this.get("mediaType")!==a.VIDEO)return null;var s=e.Squarespace.oEmbedResolvers.youtube,n=e.Squarespace.oEmbedResolvers.vimeo,i=this.get("mediaSrc");if(i&&typeof i=="string"){if(s.canProcess(i,"video"))return s;if(n.canProcess(i,"video"))return n}return null},validator:e.Squarespace.AttrValidators.isNullOrInstanceOf(e.Squarespace.EmbedResolver)},mediaNode:{value:null,validator:e.Squarespace.AttrValidators.isNullOrNode}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-oembed-resolvers","squarespace-widgets-confirmation","squarespace-widgets-position-helper"]})},815464:function(c,b,t){"use strict";var l=t(714487),d=t(798589),o=t(999762);YUI.add("squarespace-widgets-confirmation",function(e){e.namespace("Squarespace.Widgets");var a={CONFIRM_OR_REJECT:0,CONFIRM_OR_CANCEL:1,CONFIRM_ONLY:2,NO_BUTTONS:3},r=e.Squarespace.Widgets.Confirmation=e.Base.create("confirmation",e.Widget,[e.Squarespace.Mixins.EventRegistrar],{initializer:function(){this._posHelper=new e.Squarespace.Widgets.PositionHelper(this.get("position"),this.get("padding")),this._resizeEmitter=new e.Squarespace.ResizeEmitter,this.get("escToCancel")&&(e.Squarespace.EscManager.addTarget(this),this.ignoreBodyClicks=!0);var s=["show","hide","confirm","reject","cancel"];e.Array.each(s,function(n){this.publish(n,{emitFacade:!0,broadcast:2})},this),this._timers=[]},destructor:function(){for(e.Squarespace.EscManager.removeTarget(this),this._resizeEmitter.destroy(),this._resizeEmitter=null,this._posHelper=null,this._overlay=null,this._buttonsNode=null,this._cancelButton=null,this._rejectButton=null,this._confirmButton=null;this._timers.length!==0;)this._timers.shift().cancel();this._timers=null,this.detachAll()},renderUI:function(){r.superclass.renderUI.call(this);var s=this.get("zIndex"),n=this.get("boundingBox"),i=this.get("contentBox"),u=this.constructor.TEMPLATE;e.Lang.isString(u)&&i.prepend(u),n.addClass(this.get("className")),e.Lang.isValue(s)&&n.setStyle("z-index",s),i.addClass("clear"),i.one(".title").setContent(this.get("strings.title"));var h=e.guid();i.one(".title").setAttribute("id",h),i.one(".message").setContent(this.get("strings.message"));var g=e.guid();i.one(".message").setAttribute("id",g),i.setAttribute("role","dialog"),i.setAttribute("aria-labelledby",h+" "+g),this._buttonsNode=i.one(".buttons"),this._renderButtons(),this.get("visible")&&this.show()},bindUI:function(){var s=e.bind(function(h){return function(p){p.halt(),this._handleResponse(h)}},this),n=e.bind(function(h){return function(p){(p.keyCode===32||p.keyCode===13)&&(p.halt(),this._handleResponse(h))}},this);e.Lang.isValue(this._confirmButton)&&(this._confirmButton.on("click",s("confirm"),this),this._confirmButton.on("keydown",n("confirm"),this)),e.Lang.isValue(this._cancelButton)&&(this._cancelButton.on("click",s("cancel"),this),this._cancelButton.on("keydown",n("cancel"),this)),e.Lang.isValue(this._rejectButton)&&(this._rejectButton.on("click",s("reject"),this),this._rejectButton.on("keydown",n("reject"),this)),this.after("positionChange",function(){this._posHelper=new e.Squarespace.Widgets.PositionHelper(this.get("position"),this.get("padding"))},this),this.get("position")!==e.Squarespace.Widgets.PositionHelper.ANCHOR.MOUSE&&this._registerEvent(this._resizeEmitter.on("resize",this._updatePosition,this));var i=this.get("hideAfterTime");e.Lang.isNumber(i)&&this._registerTimer(e.later(i,this,this._hideAfterTime)),this.get("destroyOnHide")&&this.onceAfter("hide",this.destroy,this),this.before("hide",function(){this._revertFocusContainment(),e.Lang.isValue(this._overlay)&&this._overlay.remove(!0)},this),this.on("cancel",this.hide,this),this.onceAfter("confirm",this.hide,this),this.onceAfter("reject",this.hide,this)},_handleResponse:function(s){this.fire(s)},_renderButtons:function(){var s=this.get("style");s!==a.NO_BUTTONS&&(s!==a.CONFIRM_ONLY&&(this._cancelButton=this._buttonsNode.appendChild(this._createButton("cancel"))),s===a.CONFIRM_OR_REJECT&&(this._rejectButton=this._buttonsNode.appendChild(this._createButton("reject"))),this._confirmButton=this._buttonsNode.appendChild(this._createButton("confirm")))},_createButton:function(s){var n="div";return e.Node.create(e.Lang.sub('<{element} role="button" tabindex="0" class="confirmation-button no-frame {type}">{sub1}</{element}>',{type:s,sub1:this.get("strings."+s),element:n}))},_updatePosition:function(){var s=this.get("boundingBox"),n=this._posHelper.fetch(s,this.get("anchor"));s.setStyles(n)},_renderOverlay:function(){var s=this.get("boundingBox"),n=this.get("zIndex")||parseInt(s.getStyle("z-index"),10);this._overlay=s.insertBefore("<div></div>",s),this._overlay.addClass(this.getClassName("overlay")),this._overlay.setStyle("z-index",n-1),this.get("showOverlay")||this._overlay.setStyle("opacity","0"),this._overlay.on("click",function(i){i.halt(),this._handleResponse("cancel")},this)},show:function(){e.Lang.isValue(this._overlay)||this._renderOverlay();var s=this.get("boundingBox");this.set("visible",!0),s.setStyle("width",this.get("width")),this._updatePosition(),s.addClass("shown"),this._revertFocusContainment=(0,o.containFocus)({container:s.getDOMNode(),root:e.one("body").getDOMNode(),setFocusOnContain:this._confirmButton&&this._confirmButton.getDOMNode()||!0}),this.fire("show")},hide:function(s){var n=function(h,g){var p=h.addClass;g&&(p=h.removeClass),e.bind(p,h,"hiding")(),e.Lang.isValue(e.UA.mobile)&&e.bind(p,h,"mobile")()},i=this.get("boundingBox"),u=function(){e.Lang.isValue(i.getDOMNode())&&i.hasClass("hiding")&&(n(i,!0),this.set("visible",!1),this.fire("hide"))};e.Lang.isBoolean(s)&&s?u.call(this):(n(i),i.once(["transitionend","oTransitionEnd","otransitionend","webkitTransitionEnd"],u,this),this._registerTimer(e.later(600,this,u)))},_hideAfterTime:function(){this.hide()},_registerTimer:function(s){this._timers.push(s)}},{CSS_PREFIX:"sqs-widgets-confirmation",TEMPLATE:'<div class="title"></div><div class="message"></div><div class="buttons"></div>',TYPE:a,ANCHOR:e.Squarespace.Widgets.PositionHelper.ANCHOR,show:function(s){return new r(s)},ATTRS:{className:{value:"question",validator:e.Lang.isString},escToCancel:{value:!0,validator:e.Lang.isBoolean},hideAfterTime:{validator:e.Squarespace.AttrValidators.isNullOrNumber},destroyOnHide:{value:!0,validator:e.Lang.isBoolean},position:{getter:function(s){return e.Lang.isValue(s)?s:e.Lang.isValue(e.UA.mobile)||d.isSubDesktop()?e.Squarespace.Widgets.PositionHelper.ANCHOR.CENTER:e.Squarespace.Widgets.PositionHelper.ANCHOR.MOUSE},validator:e.Lang.isFunction},anchor:{},padding:{value:20,validator:e.Lang.isNumber},render:{valueFn:function(){var s=e.one(e.Squarespace.Damask.ContextGlobals.fromTop("Y.config.doc.body"));return e.Lang.isValue(s)?s:e.one(e.config.doc.body)}},style:{value:a.CONFIRM_OR_CANCEL,validator:e.Lang.isNumber},showOverlay:{value:!1,validator:e.Lang.isBoolean},strings:{value:{title:"",message:"",confirm:(0,l.t)("Confirm",null,{project:"scripts-v6.widgets",notes:"Confirm text for 3 option dialog; oldKey: dialogConfirm"}),cancel:(0,l.t)("Cancel",null,{project:"scripts-v6.widgets",notes:"Cancel text for 3 option dialog; oldKey: dialogCancel"}),reject:(0,l.t)("Reject",null,{project:"scripts-v6.widgets",notes:"Reject text for 3 option dialog; oldKey: dialogReject"})}},width:{value:350},zIndex:{validator:e.Squarespace.AttrValidators.isNullOrNumber},instrumentationTitle:{value:null}}})},"1.0",{requires:["base","squarespace-damask-context-globals","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-mixins-event-registrar","squarespace-util","squarespace-widgets-position-helper"]})},898524:function(){YUI.add("squarespace-widgets-data-confirmation",function(c){c.namespace("Squarespace.Widgets");var b=c.Squarespace.Widgets.DataConfirmation=c.Base.create("dataConfirmation",c.Squarespace.Widgets.Confirmation,[c.WidgetParent],{initializer:function(){this._addFields()},renderUI:function(){b.superclass.renderUI.call(this),this._childrenContainer=this.get("contentBox").one(".fields"),this.get("boundingBox").addClass("sqs-widgets-data-confirmation")},syncUI:function(){this._updatePosition()},_addFields:function(){c.Array.each(this.get("fields"),function(t){c.Object.hasKey(t,"name")?this.add(t):console.warn("[DataConfirmation] Dialog field missing name. Skipping.")},this)},_handleResponse:function(t){this.fire(t,{data:c.Squarespace.FormUtils.getData(this._items)})}},{CSS_PREFIX:"sqs-widgets-confirmation",TEMPLATE:'<div class="title"></div><div class="message"></div><div class="fields"></div><div class="buttons"></div>',TYPE:c.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:c.Squarespace.Widgets.Confirmation.ANCHOR,ATTRS:{fields:{value:[],validator:c.Lang.isArray}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-form-utils","squarespace-widgets-confirmation"]})},575727:function(){YUI.add("squarespace-widgets-data-widget",function(c){c.namespace("Squarespace.Widgets");var b="data-state-",t=c.Squarespace.Widgets.DataWidget=c.Base.create("dataWidget",c.Squarespace.Widgets.SSWidget,[],{initializer:function(l){l.dataState||(this.getProperty("ASYNC_DATA")?this.set("dataState",this.getProperty("DATA_STATES").INITIALIZED):this.set("dataState",this.getProperty("DATA_STATES").LOADED))},renderUI:function(){t.superclass.renderUI.call(this),this._updateDataStateClassName()},bindUI:function(){t.superclass.bindUI.call(this);var l=this.get("id");this.after(l+"|dataChange",function(d){d.noSyncUI||this.syncUI()},this),this.after(l+"|dataStateChange",this._updateDataStateClassName,this)},_updateDataStateClassName:function(){var l=this.get("boundingBox"),d=this.get("dataState");c.Object.each(this.getProperty("DATA_STATES"),function(o){l.removeClass(b+o)}),l.addClass(b+d)},setLoadingState:function(){return this.set("dataState",this.getProperty("DATA_STATES").LOADING)},setLoadedState:function(){return this.set("dataState",this.getProperty("DATA_STATES").LOADED)},setLoadFailedState:function(){return this.set("dataState",this.getProperty("DATA_STATES").LOAD_FAILED)},loadedSuccessfully:function(){return this.get("dataState")===this.getProperty("DATA_STATES").LOADED},isLoading:function(){return this.get("dataState")===this.getProperty("DATA_STATES").LOADING},loadFailed:function(){return this.get("dataState")===this.getProperty("DATA_STATES").LOAD_FAILED}},{CSS_PREFIX:"sqs-data-widget",ASYNC_DATA:!1,DATA_STATES:{INITIALIZED:"initialized",LOADING:"loading",LOADED:"loaded",LOAD_FAILED:"load-failed"},ATTRS:{data:{value:null,validator:function(l){return c.Lang.isUndefined(l)?(console.warn(this.name+": Will not set data to undefined."),!1):!0}},dataState:{valueFn:function(){return this.getProperty("DATA_STATES").INITIALIZED}},preventRenderTemplate:{value:!1,validator:c.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","node","squarespace-attr-validators","squarespace-ss-widget","widget"]})},100602:function(){YUI.add("squarespace-widgets-gismo",function(c){c.namespace("Squarespace.Widgets"),c.Squarespace.Widgets.Gismo=c.Base.create("Gismo",c.Widget,[c.Squarespace.GismoBase])},"1.0",{requires:["base","squarespace-gismo","widget"]})},430303:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-widgets-google-places-autocomplete",function(d){d.namespace("Squarespace.Widgets"),d.Squarespace.Widgets.GooglePlacesAutocomplete=d.Base.create("GooglePlacesAutoCompleteWidget",d.Squarespace.Widgets.ScrollingAutoCompleteList,[d.Squarespace.Mixins.GooglePlacesAutocomplete],{},{CSS_PREFIX:d.Squarespace.Widgets.ScrollingAutoCompleteList.CSS_PREFIX,ATTRS:{strings:{value:{items_available:(0,l.t)("Suggestions are available. Use up and down arrows to select suggestions.",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-mixins-google-places-autocomplete","squarespace-scrolling-auto-complete-list"]})},14590:function(){YUI.add("squarespace-widgets-information",function(c){c.namespace("Squarespace.Widgets");var b=c.Squarespace.Widgets.Information=c.Base.create("information",c.Squarespace.Widgets.Confirmation,[],{_hideAfterTime:function(){this.hide(),this._handleResponse("confirm")},_renderOverlay:function(){this.get("showOverlay")&&b.superclass._renderOverlay.call(this)}},{CSS_PREFIX:"sqs-widgets-confirmation",TYPE:c.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:c.Squarespace.Widgets.Confirmation.ANCHOR,TEMPLATE:c.Squarespace.Widgets.Confirmation.TEMPLATE,show:function(t){return new b(t)},ATTRS:{className:{value:"okay"},style:{value:c.Squarespace.Widgets.Confirmation.TYPE.NO_BUTTONS},position:{value:c.Squarespace.Widgets.PositionHelper.ANCHOR.TOP_RIGHT},hideAfterTime:{value:2e3},escToCancel:{value:!1}}})},"1.0",{requires:["base","squarespace-widgets-confirmation","squarespace-widgets-position-helper"]})},455677:function(){YUI.add("squarespace-widgets-lightbox2-overlay",function(c){c.namespace("Squarespace.Widgets"),c.Squarespace.Widgets.Lightbox2Overlay=c.Squarespace.Lightbox2Overlay=c.Base.create("LightboxOverlay",c.Squarespace.Widgets.Gismo,[],{destructor:function(){c.Lang.isValue(this._overlayEl)&&(this._overlayEl.destroy(!0),this._overlayEl=null)},renderUI:function(){this._overlayEl=c.Node.create('<div class="sqs-lightbox-overlay"></div>'),this._overlayEl.addClass("sqs-lightbox-overlay-"+this.get("overlayStyle")),this.get("theme")==="light"&&this._overlayEl.addClass("light"),this.get("contentBox").appendChild(this._overlayEl),this.get("contentBox").plug(c.Squarespace.Plugin.ScrollLock),this.show()},show:function(){this._overlayEl.setStyles({zIndex:"10000000"});var b=this._anim(this._overlayEl,{opacity:this.get("opacity")},{duration:this.get("speed")});b.on("end",function(){this.fire("shown")},this),b.run()},overlayHideAndDestroy:function(){this.once("hidden",this.destroy),this._hide()},_hide:function(){this.fire("hide");var b=this._anim(this._overlayEl,{opacity:0},{duration:this.get("speed")});b.on("end",function(){this.fire("hidden")},this),this.get("destroyed")?this.fire("hidden"):b.run()},_getContainer:function(){return this._overlayEl}},{NS:"overlay",ATTRS:{opacity:{value:.95},overlayStyle:{value:"default"},theme:{value:"dark"},container:{getter:"_getContainer"},speed:{value:.3}}})},"1.0",{requires:["base","node","squarespace-plugin-scroll-lock","squarespace-widgets-gismo"]})},554671:function(c,b,t){"use strict";var l=t(714487),d=t(406167),o=t.n(d),e=t(102577),a=t.n(e),r=t(100514),s=t(999762);function n(i,u){var h=i._node,g=u._node,p=h.clientWidth,f=h.clientHeight,m=p/f,_=g.getAttribute("width"),v=g.getAttribute("height"),E=_/v,S=m>E?"height":"width";if(u.setStyle("position","relative"),u.setStyle("object-fit","contain"),S==="height"){var y=f*E;u.setStyle("width",y+"px"),u.setStyle("height",f+"px"),u.setStyle("left",p/2-y/2+"px"),u.setStyle("top","0px")}else{var C=p/E;u.setStyle("height",C+"px"),u.setStyle("width",p+"px"),u.setStyle("left","0px"),u.setStyle("top",f/2-C/2+"px")}var O=100*(p/Y.config.win.innerWidth),A=100*(f/Y.config.win.innerHeight);g.sizes="min("+O+"vw,"+A*E+"vh)"}YUI.add("squarespace-widgets-lightbox2",function(i){i.namespace("Squarespace.Widgets"),i.Squarespace.Widgets.Lightbox2=i.Squarespace.Lightbox2=i.Base.create("Lightbox2",i.Squarespace.Widgets.Gismo,[],{initializer:function(){i.config.win.ACTIVE_LIGHTBOX=this;var u=this.get("contentBox");u.set("role","dialog"),u.set("aria-label",this.get("title")),this._overlay=new i.Squarespace.Lightbox2Overlay({theme:this.get("theme")}),this._overlay.on("hide",this.hideAndDestroy,this),this.bMobile=i.SQS.Gallery.Manager.isMobile(),this.requestUpdateHeightAndRefresh=(0,r.Z)(this.updateHeightAndRefresh.bind(this))},destructor:function(){this._flushEvents(),i.Lang.isValue(this._slideshow)&&(this._slideshow.destroy(),this._slideshow=null),this._overlay.destroy(),this._overlay=null,i.config.win.ACTIVE_LIGHTBOX=null,this.crossBrowserResizeHandle&&a().removeListener(this.crossBrowserResizeHandle)},renderUI:function(){i.Squarespace.Lightbox2.superclass.renderUI.call(this),i.one("body").addClass("sqs-lightbox-open");var u=this.get("contentBox");this._overlay.render(u);var h=(0,l.t)("Close",null,{project:"scripts-v6.widgets"});if(this._closeEl=i.Node.create('<a class="sqs-lightbox-close" role="button" tabindex="0" aria-label="'+h+'"></a>').appendTo(u).hide(),this.get("set").length>1){if(!this.bMobile&&this.get("controls.previous")){var g=(0,l.t)("Previous Item",null,{project:"scripts-v6.widgets"});this._previousEl=i.Node.create('<a class="sqs-lightbox-previous" role="button" tabindex="0" aria-label="'+g+'"></a>'),u.appendChild(this._previousEl)}if(!this.bMobile&&this.get("controls.next")){var p=(0,l.t)("Next Item",null,{project:"scripts-v6.widgets"});this._nextEl=i.Node.create('<a class="sqs-lightbox-next" role="button" tabindex="0" aria-label="'+p+'"></a>'),u.appendChild(this._nextEl)}}else this.get("set").length||this.set("set",[{content:this.get("content"),meta:this.get("meta")}]);if(this._slideshow=this.createSlideshow(u),this._lightboxContentEl=this._slideshow.get("container"),this.bMobile){var f=(0,l.t)("Toggle Caption",null,{project:"scripts-v6.widgets"});this._metaTriggerEl=i.Node.create('<a class="sqs-lightbox-meta-trigger" role="button" tabindex="0" aria-label="'+f+'">&bull;</a>').appendTo(u)}this._lightboxContentEl.setStyles({opacity:1}),this._overlay.once("shown",function(){if(this.ignoreBodyClicks=!0,i.Squarespace.EscManager.addTarget(this),this._lightboxContentEl.show(),this._closeEl&&this._closeEl.show(),this._slideshow){var m=this._slideshow.get("slides").item(this._slideshow.get("currentIndex")).one(".sqs-video-wrapper");m&&m.videoloader.showVideo()}this.revertFocusContainment=(0,s.containFocus)({container:u._node})},this),u.plug(i.Squarespace.Plugin.ScrollLock)},bindClickAndKeyDownEvents:function(u,h,g){this._event(u.on("click",h,this),g),this._event(u.on("keydown",function(p){(p.keyCode===13||p.keyCode===32)&&h.call(this,p)},this),g)},bindUI:function(){if(i.Squarespace.Lightbox2.superclass.bindUI.call(this),this._slideshow.after("currentIndexChange",i.bind(function(g){this.set("currentSetIndex",g.newVal),this.syncUI()},this)),i.config.win.orientation!==void 0&&this._event(i.one(i.config.win).on("orientationchange",this.requestUpdateHeightAndRefresh,this)),this._closeEl&&this.bindClickAndKeyDownEvents(this._closeEl,function(g){g.halt(),this.hideAndDestroy(!0)}),this._metaTriggerEl&&this.bindClickAndKeyDownEvents(this._metaTriggerEl,function(){this.toggleMeta()},"meta-trigger"),this._previousEl){this.bindClickAndKeyDownEvents(this._previousEl,function(g){g.halt(),this.previous()},"previous-click");var u=i.throttle(i.bind(this.previous,this),200);this._event(i.on("key",function(g){g.halt(),u()},i.config.win,"down:37",this),"keyboard")}if(this._nextEl){this.bindClickAndKeyDownEvents(this._nextEl,function(g){g.halt(),this.next()},"next-click");var h=i.throttle(i.bind(this.next,this),200);this._event(i.on("key",function(g){g.halt(),h()},i.config.win,"down:39",this),"keyboard"),this.bMobile||this.setupNavigationFade()}this.isMobile||this._event(this.get("contentBox").on("click",this.onContentBoxClick,this)),this._event(i.on("transition:scroll:tapped",function(g){this.onContentBoxClick(g.touchEvent)},this)),this.crossBrowserResizeHandle=a().addListener(this.requestUpdateHeightAndRefresh.bind(this))},syncUI:function(){var u=o()(i.config.doc).scrollTop;this.get("contentBox").setStyles({top:u,height:i.config.win.innerHeight});var h=this._slideshow._currentSlide(),g=h.one(".sqs-lightbox-meta")||this.createMetaEl(h);if(g)if(i.Lang.isValue(this._metaTriggerEl)&&this._metaTriggerEl.show(),this.bMobile)g.appendTo(h),g.setStyles({bottom:this.bMetaEnabled?0:"-5000px",left:0,right:0}),g.addClass("overlay-description-visible");else{var p=h.one(".sqs-lightbox-padder").get("children").item(0);g.setStyles({bottom:parseInt(p.getStyle("top"),10)-1+"px",left:p.getStyle("left"),right:parseInt(p.getStyle("left"),10)-1+"px"})}else i.Lang.isValue(this._metaTriggerEl)&&this._metaTriggerEl.hide()},updateHeightAndRefresh:function(){this.syncUI(),this._slideshow.refresh()},onContentBoxClick:function(u){if(!u.target.ancestor("a",!0)){if(u.halt(),u.target.ancestor(".sqs-video-wrapper")){u.target.ancestor(".sqs-video-wrapper").videoloader.showVideo();return}if(!this.bMobile){var h=i.one("body").get("winWidth"),g=i.one("body").get("winHeight"),p=.02;if(u.clientX>h*p&&u.clientX<h*(1-p)&&u.clientY>g*p&&u.clientY<g*(1-p)){if(u.clientX>=h/2&&this._nextEl){this.next();return}else if(u.clientX<i.one("body").get("winWidth")/2&&this._previousEl){this.previous();return}}}if(u.target.ancestor("img",!0))return;this.hideAndDestroy(!0)}},previous:function(){this._slideshow.previousSlide()},next:function(){this._slideshow.nextSlide()},close:function(){this.hideAndDestroy()},toggleMeta:function(){this.get("contentBox").all(".sqs-lightbox-meta").each(i.bind(function(u){this.bMetaEnabled=parseInt(u.getStyle("bottom"),10)===0,this._anim(u,{bottom:this.bMetaEnabled?"-5000px":"0"},{duration:this.get("speed")}).run(),this.bMetaEnabled=!this.bMetaEnabled},this))},hideAndDestroy:function(u){i.Lang.isBoolean(u)&&u?this._overlay.overlayHideAndDestroy():(this.once("hidden",this.destroy),this.hide()),i.one("body").removeClass("sqs-lightbox-open"),this.revertFocusContainment&&this.revertFocusContainment(),this.get("historyHash")&&this._slideshow.set("currentIndex",null)},hide:function(){var u=this.get("speed"),h;this.get("contentBox").setStyles({transition:"opacity "+u+"s ease",zIndex:889,opacity:0}),h=i.later(u*1e3,this,function(){i.Squarespace.EscManager.removeTarget(this),this.fire("hidden"),h.cancel(),h=null})},setupNavigationFade:function(){var u,h=function(){u&&u.cancel()},g=function(p){h(),p&&p.inViewportRegion()&&(p.addClass("mouseover").siblings().removeClass("mouseover"),u=i.later(500,this,function(){p&&p.inViewportRegion()&&p.removeClass("mouseover")}))};this._event(this._nextEl.on("mouseenter",function(){h()}),"nav-next-onmouse"),this._event(this._previousEl.on("mouseenter",function(){h()}),"nav-prev-onmouse"),this._event(this._lightboxContentEl.on("mousemove",i.bind(function(p){p.clientX<i.one("body").get("winWidth")/2?g(this._previousEl):g(this._nextEl)},this)),"container-hovering")},createSlideshow:function(u){for(var h=i.Node.create('<div class="sqs-lightbox-slideshow"></div>').appendTo(u),g=this.get("set"),p=0;p<g.length;p++){var f=i.Node.create('<div class="sqs-lightbox-slide"></div>').appendTo(h),m=i.Node.create('<div class="sqs-lightbox-padder"></div>').appendTo(f),_=i.one(g[p].content.cloneNode(!0)).appendTo(m).setAttribute("data-image-stretch","false").setStyle("opacity",null).setStyle("visibility","visible").removeClass("video-fill");_.getAttribute("data-loader")&&n(m,_);var v=g[p].content.ancestor();this.get("historyHash")&&v&&(v.getAttribute("data-slide-url")&&f.setAttribute("data-slide-url",v.getAttribute("data-slide-url")),v.getAttribute("data-slide-id")&&f.setAttribute("data-slide-id",v.getAttribute("data-slide-id"))),_.all("iframe").remove()}var E=new i.SQS.Gallery.Gallery2({container:h,currentIndex:this.get("currentSetIndex"),loop:!this.bMobile,autoplay:!1,refreshOnResize:!0,refreshOnOrientationChange:!0,design:"stacked",keyboard:!1,designOptions:{clickBehavior:!1,easing:i.Easing.easeInOutExpo,speed:.6,autoHeight:!1,transition:this.bMobile?"scroll":"fade",transitionOptions:{direction:"horizontal",allowPageScroll:!1}},loaderOptions:{mode:"fit"},lazyLoad:!0,videoLoaderOptions:this.get("videoLoaderOptions"),historyHash:this.get("historyHash")});return E},createMetaEl:function(u){u=u.one(".sqs-lightbox-padder");var h=this.getCurrentElMeta();if(h){var g=i.Node.create('<div class="sqs-lightbox-meta"></div>');return g.appendChild(h),u.appendChild(g),this.bMobile||(this._event(u.one(":first-child").on("mouseenter",function(){g.addClass("overlay-description-visible")},this),"meta-hovering"),this._event(u.one(":first-child").on("mouseleave",function(){g.removeClass("overlay-description-visible")},this),"meta-hovering"),this._event(g.on("mouseenter",function(){g.addClass("overlay-description-visible")},this),"meta-hovering"),this._event(g.on("mouseleave",function(){g.removeClass("overlay-description-visible")},this),"meta-hovering")),g}},getCurrentElContent:function(){return this.get("set").length>0?this.get("set")[this.get("currentSetIndex")].content:this.get("content")},getCurrentElMeta:function(){return this.get("set").length>0?this.get("set")[this.get("currentSetIndex")].meta:this.get("meta")}},{NS:"lightbox2",ATTRS:{content:{},controls:{value:{previous:!1,next:!1}},currentSetIndex:{value:0},meta:{},padding:{value:100},set:{value:[]},speed:{value:.6},theme:{value:"dark"},title:{value:(0,l.t)("Gallery",null,{project:"scripts-v6.widgets"})},videoLoaderOptions:{value:{}},historyHash:{value:!1}}})},"1.0",{requires:["base","dom-style-ie","event-key","event-mouseenter","node","plugin","squarespace-animations","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-plugin-scroll-lock","squarespace-touch-event-listener","squarespace-video-loader","squarespace-widgets-gismo","squarespace-widgets-lightbox2-overlay","yui-throttle"]})},731687:function(c,b,t){"use strict";var l=t(714487),d=t(44348),o=t.n(d),e=t(726692),a=t.n(e),r=t(437951),s=t.n(r),n=t(586745),i=t.n(n),u=t(27351),h=t.n(u),g=t(752364),p=t(246098),f=t(912289),m=t(723796),_=t(787592),v=m.Em.createLogger("content-item list widget","black");YUI.add("squarespace-widgets-list-base-item-view",function(E){E.namespace("Squarespace.Widgets.List");var S=E.Squarespace.Widgets.List.BaseItem=E.Base.create("BaseItem",E.Squarespace.SSWidget,[E.WidgetChild,E.Squarespace.Mixins.ClickSelectable],{initializer:function(){this.publish("buttonAction")},bindUI:function(){var y=this.get("id");this.get("boundingBox").delegate("click",function(C){C.stopImmediatePropagation(),this._handleActionClick(C.target.getAttribute("attr-button-name"))},".button",this),this._registerEvent(this.get("item").after(y+"|save",this._renderAgain,this)),this._registerEvent(this.get("item").after(y+"|titleChange",this._renderAgain,this)),this._registerEvent(this.get("item").after(y+"|publishOnChange",this._renderAgain,this)),this._registerEvent(this.get("item").after(y+"|structuredContentChange",(function(C){this.get("item").get("recordType")===i().EVENT&&this._renderAgain(C)}).bind(this),this)),this._registerEvent(this.get("item").after("workflowStateChange",this.syncUI,this)),this._registerEvent(this.get("item").after("workflowStateChange",this.trackAction,this))},_handleActionClick:function(y){this.fire("buttonAction",{action:y})},renderUI:function(){S.superclass.renderUI.call(this),this.get("boundingBox").addClass("sqs-item-view"),this.get("contentBox").addClass("sqs-item-view-content"),this._addButtons()},syncUI:function(){this._fitText()},_fitText:function(){var y=this.get("contentBox").one(".title");y&&(this._responsiveTitle=new u.FontSize({rootNode:y.getDOMNode(),widthRatio:1,minFontSize:13}),y.setStyle("display","inline-block"),this._responsiveTitle.resetAndRespond(),y.setStyle("display",null))},destructor:function(){this.detachAll(),this.get("item").detach(this.get("id")+"|*"),this._responsiveTitle&&(this._responsiveTitle=null)},trackAction:function(y){try{var C=this.get("item"),O=C.get("id"),A=C.get("recordType"),I=this.get("parent"),D=C.get("collectionId"),T=I?I.get("collection"):null;if(T=T||E.Squarespace.ContentCollectionCache.getById(D),!T)throw new Error("Could not find item's collection");var B=T.get("type"),N="blog";B===s().COLLECTION_TYPE_GENERIC&&A===i().EVENT&&(N="events"),y.target.get("workflowState")===o().DELETED&&(v("Delete item via widget",{item:C}),(0,f.RZ)({itemId:O,collectionType:N,collectionId:D}))}catch(P){(0,_.Tb)(P)}},_renderAgain:function(y){if(y.target.get("workflowState")===o().DELETED){this.destroy(!0);return}this.get("destroyed")||(this.get("contentBox").empty().prepend(this.renderTemplate()),this._addButtons(),this.syncUI())},_addButtons:function(){var y=this.get("contentBox").one(".list-item"),C=E.Node.create('<div class="buttons controls">'),O=this.get("buttonList"),A=this.get("boundingBox").get("offsetHeight")/O.length;E.Array.each(O,function(I){C.append('<div class="button button-'+I.key+'" attr-button-name="'+I.key+'" style="line-height:'+A+'px">'+I.label+"</div>")}),y.append(C)},_getLikeText:function(y){if(Static.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled){if(y.likeCount===0)return!1;if(y.likeCount===1)return(0,l.t)("1 Like",null,{project:"scripts-v6.widgets"});if(!E.Lang.isValue(y.likeCount))return!1}else return!1;return(0,l.t)("{number} Likes",{number:y.likeCount},{project:"scripts-v6.widgets"})},_getCommentText:function(y){return Static.SQUARESPACE_CONTEXT.websiteSettings.disqusShortname||y.commentState===a().DISABLED||y.commentCount===0||!E.Lang.isValue(y.commentCount)?!1:y.commentCount},_getEventDate:function(y){var C,O,A=y.structuredContent,I=new Date(A.startDate),D=new Date(A.endDate);return I.toDateString()===D.toDateString()?(C=(0,g.Z)(I,"LLLLT"),O=(0,g.Z)(D,"LT")):(C=(0,g.Z)(I,"LLL"),O=(0,g.Z)(D,"LLL")),(I?C+"&nbsp;&mdash;&nbsp;":"")+(D?O:"")},_getHBTemplateContext:function(){var y=this.get("item").toJSON();return y.commentCount=this._getCommentText(y),y.likeCount=this._getLikeText(y),E.Lang.isValue(y.proxyForId)&&(y.flag={className:"example-content",message:"Example"}),y.recordType===i().EVENT&&(y.eventDateDescriptor=this._getEventDate(y)),y.imageUrl&&!y.coverImageUrl&&(y.coverImageUrl=y.imageUrl),E.Lang.isString(y.coverImageUrl)&&(y.coverImageUrl=y.coverImageUrl.replace(/http(s?):/,"")),y.author&&(y.author.displayName=this._getUserName(y.author)),y.publishOn=(0,p.Z)(y.publishOn),y},_getUserName:function(y){var C=y.displayName,O=y.firstName,A=y.lastName,I=E.Squarespace.Context.getInstance().get("memberAccountNames"),D=E.Object.some(I,function(T){return T.displayName!==y.displayName&&E.Lang.isString(T.displayName)&&T.displayName.indexOf(A)!==-1},this);return E.Object.size(I)===1?null:(E.Object.size(I)<10&&!D&&(C=this._getNameWithInitials(O,A)),E.Lang.isString(C)?E.Escape.html(E.Lang.trim(C)):null)},_getNameWithInitials:function(y,C){var O=null;return E.Lang.isString(y)&&E.Lang.trim(y)!==""&&(O=E.Lang.trim(y).substr(0,1)+".",E.Lang.isString(C)&&E.Lang.trim(C)!==""&&(O+=" "+E.Lang.trim(C))),O}},{CSS_PREFIX:"sqs-item-view",HANDLEBARS_TEMPLATE:"widgets-list-base-item-view.html",ATTRS:{buttonList:{value:[{key:"edit",label:(0,l.t)("Edit",null,{project:"scripts-v6.widgets"})},{key:"delete",label:(0,l.t)("Delete",null,{project:"scripts-v6.widgets"})}]},item:{},strings:{value:{typeName:"item"}}}})},"1.0",{requires:["base","squarespace-content-item-types-editor","squarespace-mixins-click-selectable","squarespace-ss-widget","squarespace-util","squarespace-widgets-list-base-item-view-template","widget-child"]})},434982:function(){YUI.add("squarespace-widgets-list-base-view",function(c){c.namespace("Squarespace.Widgets.List");var b=c.Squarespace.Widgets.List.BaseView=c.Base.create("BaseView",c.Squarespace.Widgets.DataWidget,[c.WidgetParent],{destructor:function(){this._detachItemEvents()},renderUI:function(){b.superclass.renderUI.call(this),this.get("boundingBox").addClass("sqs-list-view"),this.get("contentBox").addClass("sqs-list-view-content"),this._addChildren(this.get("items"))},bindUI:function(){b.superclass.bindUI.call(this),this._registerItemEvents(),this.after("itemsChange",this._onItemChange)},syncUI:function(){b.superclass.syncUI.call(this),this._syncListItems(this.get("items"))},_syncListItems:function(t){t instanceof c.ModelList&&(t=t.toArray());var l=[],d=[];c.Array.each(t,function(o){var e=this.getWidgetForItemById(o.get("id")),a=this.indexOf(e);(a===-1||e.get("item")!==o)&&l.push(o)},this),this.each(function(o,e){var a=c.Array.some(t,function(r){return o.get("item")===r},this);d[e]=!a&&o},this),this._removeChildren(d),this._addChildren(l)},_rerenderChildren:function(t){this._removeAllChildren(),this._addChildren(t)},_removeChildren:function(t){c.Array.each(t,this._removeChild,this)},_removeChild:function(t,l){t&&(this.remove(l),t.destroy(!0))},_removeAllChildren:function(){var t=this.removeAll();c.Array.invoke(t,"destroy",!0)},_addChildren:function(t){!t||t.length===0||(t instanceof c.ModelList&&(t=t.toArray()),t.forEach(this._addItemWidget,this))},_addItemWidget:function(t){t.get("id")&&this.add({item:t})},_onItemChange:function(t){t.prevVal&&this._detachItemEvents(),t.newVal&&this._registerItemEvents(),this._rerenderChildren(t.newVal),this.syncUI()},_detachItemEvents:function(){this._itemEventHandle&&(this._itemEventHandle.detach(),this._itemEventHandle=null)},_registerItemEvents:function(){this._itemEventHandle,this._itemEventHandle=this.get("items").after("add",function(t){t.source!=="reorder"&&this._addItemWidget(t.model)},this)},getWidgetForItemById:function(t){return t&&!c.Lang.isString(t)&&(t=t.get("id")),c.Array.find(this.toJSON(),function(l){return l.get("item").get("id")===t})||null},getWidgetForItem:function(t){return c.Array.find(this.toJSON(),function(l){return l.get("item")===t})||null}},{CSS_PREFIX:"sqs-list-view",ATTRS:{defaultChildType:{value:c.Squarespace.Widgets.List.ItemBase},items:{value:new c.ModelList}}})},"1.0",{requires:["array-invoke","base","@sqs/yui-dd-wrappers/dd-behaviors","squarespace-widgets-data-widget","squarespace-widgets-list-base-item-view","widget-parent"]})},644409:function(){YUI.add("squarespace-widgets-list-selectable-view",function(c){c.namespace("Squarespace.Widgets.List");var b=c.Squarespace.Widgets.List.SelectableListView=c.Base.create("SelectableListView",c.Squarespace.Widgets.List.BaseView,[c.Squarespace.Mixins.ClickSelectableParent,c.Squarespace.Mixins.ContentCollectionBulkActionable],{bindUI:function(){b.superclass.bindUI.call(this),this.after("selectionChange",function(t){this.get("contentBox").toggleClass("multi-select-enabled",t.newVal&&t.newVal.size()>1),this.updateActionTray()},this),this.get("reorderable")&&this._enableItemReorder()},syncUI:function(){var t=this.getFocusedWidget(),l;c.Lang.isValue(t)&&(l=t.get("item")),b.superclass.syncUI.call(this),c.Lang.isValue(l)&&this.setFocusedChild(this.getWidgetForItemById(l.get("id"))),this._ddDelegate&&this._ddDelegate.syncTargets()},destructor:function(){this._ddDelegate&&(this._ddDelegate.destroy(!0),this._ddDelegate=null)},_enableItemReorder:function(){var t="."+this.get("defaultChildType").CSS_PREFIX,l=this.get("contentBox"),d=this.get("multiple");this._ddDelegate=new c.SQS.DDWrappers.DD.Delegate({container:l,nodes:t,dragConfig:{groups:["list-"+this.get("id")]},enableDragReorder:!0,dragReorderConfig:{selectedClassSelector:t+"-selected",enableGrouping:d},enableDragConstrained:!0,dragConstrainedConfig:{stickY:!0}}),this._ddDelegate.on("reorder:reordered",function(o){this._reorderListItems(d?o.reordered:[o.reordered])},this)},_reorderListItems:function(t){var l=c.Array.map(t,function(d){return c.Widget.getByNode(d.node).get("item")});this.get("model").items.reorderItems(l,t[0].newIndex)}},{CSS_PREFIX:"sqs-list-view",ATTRS:{collection:{},model:{getter:function(t){return this.get("collection")||t}},moveable:{value:!0},multiple:{value:!0},reorderable:{value:!1}}})},"1.0",{requires:["base","squarespace-widgets-list-base-view","squarespace-content-collection-bulk-actionable","squarespace-mixins-click-selectable-parent"]})},781349:function(){YUI.add("squarespace-widgets-model",function(c){c.namespace("Squarespace.Widgets");var b=c.Squarespace.Widgets.Model=c.Base.create("Model",c.Squarespace.Widgets.SSWidget,[c.WidgetChild],{bindUI:function(){b.superclass.bindUI.call(this),this._registerEvent(this.get("model").after("change",this.syncUI,this))},_getHBTemplateContext:function(){var t=b.superclass._getHBTemplateContext.call(this);return t.model=t.model.toJSON(),t}},{CSS_PREFIX:"sqs-model",ATTRS:{model:{valueFn:function(){return new c.Model},validator:c.Squarespace.AttrValidators.isInstanceOf(c.Model),writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","squarespace-attr-validators","squarespace-ss-widget","widget-child"]})},691647:function(c,b,t){"use strict";var l=t(714487),d=t(586745),o=t.n(d),e=t(629266),a=t.n(e),r=t(437951),s=t.n(r),n=t(731648),i=t(730842);YUI.add("squarespace-widgets-music-album-track",function(u){u.namespace("Squarespace.Widgets");var h=u.UA.os==="macintosh"?"metaKey":"ctrlKey",g=u.Squarespace.Widgets.MusicAlbumTrack=u.Base.create("MusicAlbumTrack",u.Squarespace.Widgets.Model,[u.WidgetChild,u.Squarespace.Mixins.EditableModel],{renderUI:function(){g.superclass.renderUI.call(this);var p=this.get("contentBox"),f=p.one(".meta");this._titleNode=p.one(".title"),this._artistNameNode=f.one(".artist-name"),this._durationNode=f.one(".duration"),this._utilsNode=p.one(".utils")},bindUI:function(){g.superclass.bindUI.call(this),this._bindStructuredContentListener(),this.get("contentBox").on(["click","contextmenu"],function(p){var f=this.get("model");p.shiftKey||p[h]?this._toggleSelected():p.target.ancestor(".remove",!0)?this._confirmAndDestroy():f&&f.get("mediaProcessingState")===a().READY&&(this.get("parent").get("collection").get("type")===s().COLLECTION_TYPE_GENERIC?i.Z.showCollectionItemSettingsEditor(this.get("model").getAttrs()):this._edit())},this)},syncUI:function(){g.superclass.syncUI.call(this),this._syncMediaProcessingState();var p=this.get("model"),f=p.get("title")||(0,l.t)("No Title",null,{project:"scripts-v6.widgets"}),m=p.get("structuredContent"),_=m.get("artistName")||(0,l.t)("Unknown Artist",null,{project:"scripts-v6.widgets"}),v=m.get("lengthInMilliSeconds");u.Lang.isValue(v)?v=(0,n.Z)(v):v=(0,l.t)("N/A",null,{project:"scripts-v6.widgets"}),this._titleNode.empty().setHTML(f),this._artistNameNode.empty().setHTML(_),this._durationNode.empty().setHTML(v)},_toggleSelected:function(){this.set("selected",this.get("selected")===0?1:0)},_confirmAndDestroy:function(){var p=(0,l.t)("Remove Track",null,{project:"scripts-v6.widgets"}),f=(0,l.t)("Are you sure you wish to remove this track?",null,{project:"scripts-v6.widgets"}),m=function(){this.get("model").destroy({remove:!0})};new u.Squarespace.Widgets.Confirmation({"strings.title":p,"strings.message":f}).on("confirm",m,this)},_syncMediaProcessingState:function(){var p=this.get("contentBox").one(".processing-wrapper");p&&p.remove(!0);var f=this.get("model"),m=f.get("mediaProcessingState"),_=f.get("mediaIsUploading"),v=f.get("systemDataId");switch(m){case a().QUEUED:case a().PROCESSING:this._showProcessingStatus((0,l.t)("Processing\u2026",null,{project:"scripts-v6.widgets"}),!0);break;case a().READY:this.set("className",this.getClassName("ready"));break;default:_?this._showProcessingStatus((0,l.t)("Uploading\u2026",null,{project:"scripts-v6.widgets"}),!0):v?(this.set("className",this.getClassName("error")),this._showProcessingStatus((0,l.t)("Error Processing",null,{project:"scripts-v6.widgets"}),!1)):(this.set("className",this.getClassName("error")),this._showProcessingStatus((0,l.t)("No Audio Asset",null,{project:"scripts-v6.widgets"}),!1));break}},_showProcessingStatus:function(p,f){this.set("className",this.getClassName("processing"));var m=this._utilsNode.appendChild('<div class="processing-wrapper"></div>');f&&new u.Squarespace.Spinner({render:m,color:this.get("spinnerColor")}),m.append("<span>"+p+"</span>")},_bindStructuredContentListener:function(){var p=this.get("model").get("structuredContent");p&&this._registerEvent(p.after("change",this.syncUI,this))}},{CSS_PREFIX:"sqs-music-album-track",HANDLEBARS_TEMPLATE:"widgets-music-album-track.html",ATTRS:{editorCtor:{valueFn:function(){return u.Squarespace.ContentItemEditor.Audio}},model:{valueFn:function(){return new u.Squarespace.Models.ContentItem({recordType:o().Audio})},validator:u.Squarespace.AttrValidators.isInstanceOf(u.Squarespace.Models.ContentItem)},item:{getter:function(){return this.get("model")},readOnly:!0},spinnerColor:{value:"dark"}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-content-item-types-audio","squarespace-mixins-editable-model","squarespace-models-content-item","squarespace-spinner","squarespace-ui-base","squarespace-widgets-confirmation","squarespace-widgets-model","squarespace-widgets-music-album-track-template","widget-child"]})},463016:function(c,b,t){"use strict";var l=t(714487),d=t(586745),o=t.n(d),e=t(629266),a=t.n(e),r=t(387582);YUI.add("squarespace-widgets-music-albums-list-view",function(s){s.namespace("Squarespace.Widgets.MusicAlbums");var n=s.Squarespace.Widgets.MusicAlbums.ListView=s.Base.create("trackList",s.Squarespace.Widgets.List.SelectableListView,[],{destructor:function(){this.uploader.destroy(),this.uploader=null},_addItemWidget:function(i){this.add({model:i,render:this.get("contentBox").one(".tracks"),spinnerColor:this.get("spinnerColor")})},renderUI:function(){n.superclass.renderUI.call(this),this._renderUploader()},bindUI:function(){n.superclass.bindUI.call(this),this.on("uploadPreflightChange",function(i){this.uploader.get("destroyed")||this.uploader.set("preflight",i.newVal)}),this._registerEvent(this.get("items").after(["add","remove"],function(i){i.source!=="reorder"&&this.get("rendered")&&this.syncUI()},this))},syncUI:function(){n.superclass.syncUI.call(this),this._syncEmptyState()},removeItemInPlace:function(i){var u=this.getWidgetForItemById(i.get("id"));this.remove(u.get("index")),u.destroy()},_syncListItems:function(){this._rerenderChildren(this.get("items"))},_syncEmptyState:function(i){var u=i;s.Lang.isBoolean(u)||(u=this.get("items").isEmpty()),this.get("boundingBox").toggleClass(this.getClassName("empty"),!!u);var h='<div class="title">'+this.get("strings.uploadText")+"</div>";u&&(h+='<div class="desc">'+this.get("strings.emptyDescription")+"</div>"),this.uploader.set("selectButtonLabel",h)},_enableItemReorder:function(){n.superclass._enableItemReorder.call(this),this._ddDelegate.set("dragConstrainedConfig",s.merge(this._ddDelegate.get("dragConstrainedConfig"),{constrain:this.get("contentBox").one(".tracks")})),this._ddDelegate.on("reorder:reorder",this._onDDReorder,this)},_onDDReorder:function(i){var u=i.reorder;u.proxyNode.setAttribute("data-track-number",u.visibleIndex+1)},_renderUploader:function(){this.uploader=new s.Squarespace.Uploader({dragAndDropArea:this.get("boundingBox"),multipleFiles:!0,autoUpload:!0,fileFilters:[{description:(0,l.t)("Audio",null,{project:"scripts-v6.widgets"}),extensions:"*.mp3;*.mp4;*.ogg;*.m4a"}],processFile:s.bind(this._uploadAudioProcessor,this),addPlaceholder:s.bind(this._addAudioPlaceholder,this),fileComplete:s.bind(this._audioUploadComplete,this),createJob:s.bind(this._createAudioProcessingJob,this),jobFailure:s.bind(this._audioProcessingUpdate,this),jobComplete:s.bind(this._audioProcessingUpdate,this),selectButtonLabel:this.get("strings.uploadText"),preflight:this._doPreflightThenSetUploadURL.bind(this),validateFileFn:s.bind(this._validateFileBeforeUpload,this),render:this.get("contentBox")})},_doPreflightThenSetUploadURL:function(i){var u=this.get("uploadPreflight")||function(h){h()};u((function(){this._updateUploadURL(),i()}).bind(this))},_updateUploadURL:function(){this.uploader.set("uploadURL","/api/albums/"+this.get("collection").get("id")+"/tracks")},_uploadAudioProcessor:function(i){var u=this.get("model"),h=this.uploader.fileDataFromFile(i.file);h&&!i.item&&(i.item=h.item);var g=i.index;if(i.item)g=i.item.get("displayIndex");else{var p=u.get("nextDisplayIndex");s.Lang.isNumber(g)&&u instanceof s.Squarespace.Models.ContentCollection?g=g+p:g=p}if(i.postData={contentType:"audio",process:"true",index:g,collectionId:this.get("collection").get("id"),id:i.id},i.invalid){var f=i.invalid[0];new s.Squarespace.Widgets.Alert({"strings.title":f.title,"strings.message":f.message})}},_validateFileBeforeUpload:function(){if(this.get("collection").get("nextDisplayIndex")>=r.Z.MAX_TRACKS_IN_ALBUM)return{title:(0,l.t)("Max Size Reached",null,{project:"scripts-v6.widgets"}),message:(0,l.t)("This album has a maximum size of {number} tracks.",{number:r.Z.MAX_TRACKS_IN_ALBUM},{project:"scripts-v6.widgets"})}},_addAudioPlaceholder:function(i){var u=new s.Squarespace.Models.ContentItem({mediaIsUploading:!0,mediaProcessingState:a().QUEUED,displayIndex:i.postData.index,recordType:o().AUDIO});i.item=u,this.get("model").items.add(i.item,{source:"upload"});var h=this.getWidgetForItemById(u.get("id"));if(s.Lang.isValue(h))return h.get("contentBox")},_audioUploadComplete:function(i,u){var h=i.item;h.set("mediaIsUploading",!1),h.setAttrs(u.media[0]),i.index===0&&this.get("model").load()},_createAudioProcessingJob:function(i,u){if(!u.job)return null;i.item.setAttrs(u.media[0]);var h=new s.Squarespace.AudioProcessingJob(s.merge(u.job,{started:!0}));return h.set("collection",this.get("model")),h},_audioProcessingUpdate:function(i,u){var h=new s.Squarespace.Models.ContentItem({id:u.get("data.contentItemId"),recordType:o().AUDIO});h.load(function(g,p){s.Lang.isValue(g)||i.item.setAttrs(p)})},_uiAddChild:function(i,u){var h=i.get("boundingBox");u.contains(h)||u.appendChild(i.get("boundingBox"))}},{TEMPLATE:'<div class="sqs-music-album-track-list-header">'+(0,l.t)("Tracks",null,{project:"scripts-v6.widgets"})+'</div><div class="tracks"></div>',CSS_PREFIX:"sqs-music-album-track-list",ATTRS:{defaultChildType:{value:s.Squarespace.Widgets.MusicAlbumTrack},model:{getter:function(i){return this.get("collection")||i}},"strings.uploadText":{value:(0,l.t)("Add Tracks",null,{project:"scripts-v6.widgets"})},"strings.emptyDescription":{value:(0,l.t)("This collection is empty. Click here to add your first item.",null,{project:"scripts-v6.widgets"})},spinnerColor:{value:"dark"},uploadPreflight:{value:null},reorderable:{value:!0}}})},"1.0",{requires:["base","@sqs/yui-dd-wrappers/dd-delegate","squarespace-job-manager","squarespace-uploader","squarespace-widgets-alert","squarespace-widgets-list-selectable-view","squarespace-widgets-music-album-track"]})},551375:function(){YUI.add("squarespace-widgets-position-helper",function(c){c.namespace("Squarespace.Widgets");var b=20;function t(u,h,g,p){var f;try{f=c.Squarespace.Damask.ContextGlobals.relative(p,"Y")}catch{f=c}var m=f.DOM.viewportRegion(),_=m.width,v=m.height,E={x:g,y:g};return u.x+h.width>=_&&(u.x=_-h.width-g),u.x<=E.x&&(u.x=E.x),u.y+h.height>=v&&(u.y=v-h.height-g),u.y<=E.y&&(u.y=E.y),u}function l(u,h,g){var p=u.get("className").split(" ").map(function(v){return"."+v}).join(""),f=c.all(p).size(),m=g;if(f===1)return m;var _;switch(h){case"top":case"bottom":_=u.get("offsetHeight");break;case"left":case"right":_=u.get("offsetWidth");break}return m=_*(f-1)+g*f,m}var d=function(u){var h={x:c.Squarespace.Mouse.client.lastX,y:c.Squarespace.Mouse.client.lastY},g={width:u.get("offsetWidth"),height:u.get("offsetHeight")},p=t({x:h.x-Math.floor(g.width/2),y:h.y-Math.floor(g.height/2)},g,this.padding,u);return{position:"fixed",top:p.y,left:p.x}},o=function(u){return{position:"fixed",top:l(u,"top",this.padding),left:this.padding}},e=function(u){return{position:"fixed",top:l(u,"top",this.padding),right:this.padding}},a=function(u){return{position:"fixed",bottom:l(u,"bottom",this.padding),left:this.padding}},r=function(u){return{position:"fixed",bottom:l(u,"bottom",this.padding),right:this.padding}},s=function(u,h){if(!c.Lang.isValue(h))return d(u);var g=h.getX()+h.get("offsetWidth")+this.padding,p={width:u.get("offsetWidth"),height:u.get("offsetHeight")},f=t({x:g,y:h.getY()},p,this.padding,u);return{top:f.y,left:f.x}},n=function(u){var h={x:Math.floor(c.DOM.winWidth()/2),y:Math.floor(c.DOM.winHeight()/2)},g={width:Math.floor(u.get("offsetWidth")/2),height:Math.floor(u.get("offsetHeight")/2)},p=t({x:h.x-g.width,y:h.y-g.height},g,this.padding,u);return{position:"fixed",top:p.y,left:p.x}},i={MOUSE:d,TOP_LEFT:o,TOP_RIGHT:e,BOTTOM_LEFT:a,BOTTOM_RIGHT:r,ELEMENT:s,CENTER:n};c.Squarespace.Widgets.PositionHelper=function(u,h){return{padding:h||b,fetch:function(g,p){return u.call(this,g,p)}}},c.Squarespace.Widgets.PositionHelper.ANCHOR=i},"1.0",{requires:["dom-base","squarespace-damask-context-globals","squarespace-ui-base"]})},285757:function(c,b,t){"use strict";var l=t(960162),d=t(994336),o=t.n(d),e=t(714487),a=t(408549),r=t(537312),s=t(478278),n=t(916661);YUI.add("squarespace-widgets-products-quick-view",function(i){i.namespace("Squarespace.Widgets.Products");var u=i.Squarespace.Widgets.Products.QuickView=i.Base.create("quickView",i.Squarespace.SSWidget,[],{initializer:function(){this.set("lightbox",new i.Squarespace.Widgets.ModalLightbox({content:this.get("boundingBox"),render:i.one("body"),className:u.CSS_LIGHTBOX_PREFIX})),this.get("lightbox").get("boundingBox").prepend(this.get("closeButton")),this.get("boundingBox").append(this.get("prevButton")).append(this.get("nextButton"))},bindUI:function(){u.superclass.bindUI.call(this),this.after(["currentIdChange","currentGroupChange"],function(){this._destroyProductItemViewInstance(),this.syncUI()}),this._registerEvent(this.get("lightbox").on("open",function(){this.syncUI()},this)),this._registerEvent(this.get("lightbox").on("close",function(){this._destroyProductItemViewInstance(),this.set("isLightboxOpen",!1)},this)),this._bindUIControls(),this._bindKeyboardControls(),window.SQUARESPACE_LOGIN&&window.SQUARESPACE_LOGIN.isLoggedIn()&&i.on("beforeunload",function(){this.destroy(!0),this.get("lightbox").destroy(!0)},this)},syncUI:function(){u.superclass.syncUI.call(this),this._getData(),this.get("nextButton").toggleClass(u.CSS_HIDDEN,!this._getNextId()),this.get("prevButton").toggleClass(u.CSS_HIDDEN,!this._getPrevId()),(0,r.AV)(this.get("currentId"))},destructor:function(){this._destroyProductItemViewInstance(),this.get("lightbox").close()},_bindUIControls:function(){var h=this.get("boundingBox");this._registerEvent(h.delegate("click",function(g){this._setId(this._getNextId()),g.halt(!0)},"."+u.CSS_NEXT_BUTTON,this)),this._registerEvent(h.delegate("click",function(g){this._setId(this._getPrevId()),g.halt(!0)},"."+u.CSS_PREV_BUTTON,this)),this._registerEvent(h.delegate("click",function(g){this.get("lightbox").close(),g.stopPropagation()},"."+u.CSS_CLOSE_BUTTON,this)),this._registerEvent(i.one("body").on("click",function(g){this.get("isLightboxOpen")&&!h.contains(g.target)&&!this._isProductForm(g.target)&&this.get("lightbox").close(),g.stopPropagation()},this))},_bindKeyboardControls:function(){this._registerEvent(i.on("key",function(){this.get("isLightboxOpen")&&this._setId(this._getNextId())},i.config.win,"down:39",this)),this._registerEvent(i.on("key",function(){this.get("isLightboxOpen")&&this._setId(this._getPrevId())},i.config.win,"down:37",this))},_getData:function(){i.Data.get({url:"/api/rendering/product-quick-view/"+this.get("currentId"),success:function(h){this._renderModal(h.html)},failure:function(h){this._renderError(h)}},this)},_renderModal:function(h){this.get("contentBox").empty().insert(h),this.set("productsItemViewInstance",new i.Squarespace.SystemCollections.Products.ItemV2({host:this.get("contentBox")})),this.get("isLightboxOpen")?this.get("lightbox").syncUI():this.open(),this._executeScripts(),this._initializeCheckoutArea();var g=this.get("boundingBox")._node.querySelector(".sqs-add-to-cart-button"),p=this.get("source");g&&p&&g.setAttribute("data-quick-view-source",p),i.Global.fire("SQSProductQuickView:load")},open:function(){this.get("lightbox").open(),this.set("isLightboxOpen",!0),i.one(".sqs-style-mode-active")&&i.Squarespace.EscManager.removeTarget(this.get("lightbox"))},_executeScripts:function(){var h=this.get("contentBox");h.all("script").each(function(g){var p=document.createElement("script");p.type="text/javascript",g.getAttribute("src")?p.src=g.getAttribute("src"):p.innerHTML=g.get("innerHTML"),g.remove(),h.append(p)},this)},_initializeCheckoutArea:function(){var h=this.get("contentBox"),g;if(n.Z.isSevenOne()){g=h.one(".product-detail .sqs-add-to-cart-button");var p=new s.Z(g.getDOMNode(),i.config.win,this.get("source"));i.config.win.Squarespace.onDestroy(i,function(){p.destroy()})}else i.config.win.document.getElementsByClassName("product-variants").length&&Promise.all([t.e("70474"),t.e("63631"),t.e("74046"),t.e("42914"),t.e("51864"),t.e("69847")]).then(t.bind(t,111059)).then(function(f){var m=f.default;m.initializeVariantDropdowns(i.config.win.document,h.getDOMNode())}),g=h.one(".sqs-add-to-cart-button"),i.Squarespace.CartUtils.initializeSingleAddToCartButton(g);o().get("hasCart")==="true"||i.Lang.isValue(o().get("CART"))?i.Squarespace.Singletons.ShoppingCart.load(function(){i.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")},this):i.all(".sqs-add-to-cart-button-wrapper").setStyle("visibility","visible")},_renderError:function(h){var g=(0,e.t)("There was an issue loading the quick view of this product. Please see the product's page for full product details.",null,{project:"scripts-v6.widgets"});new i.Squarespace.Widgets.Alert({"strings.title":(0,e.t)("Error: {message}",{message:h&&h.title?h.title:""},{project:"scripts-v6.widgets"}),"strings.message":h&&h.error||g})},_getNextId:function(){var h=this.get("products")[this.get("currentGroup")],g=h.indexOf(this.get("currentId"))+1,p=h[g];return p||!1},_getPrevId:function(){var h=this.get("products")[this.get("currentGroup")],g=h.indexOf(this.get("currentId"))-1,p=h[g];return p||!1},_setId:function(h){h&&this.set("currentId",h)},_destroyProductItemViewInstance:function(){this.get("productsItemViewInstance")&&this.get("productsItemViewInstance").destroy(!0),i.Global.fire("SQSProductQuickView:destroy")},_isProductForm:function(h){var g=i.Squarespace.Widgets.AsyncForm.CSS_PREFIX;return h.ancestor("."+g)||h.hasClass("lightbox-close")&&h.siblings("."+g)||h.one("."+g)||h.hasClass(g)}},{CSS_PREFIX:"sqs-product-quick-view",CSS_LIGHTBOX_PREFIX:"sqs-product-quick-view-lightbox",CSS_NEXT_BUTTON:"sqs-product-quick-view-lightbox-next-button",CSS_PREV_BUTTON:"sqs-product-quick-view-lightbox-prev-button",CSS_CLOSE_BUTTON:"sqs-product-quick-view-lightbox-close-button",CSS_HIDDEN:"sqs-product-quick-view-lightbox-element-hidden",ATTRS:{currentId:{value:null},currentGroup:{value:null},products:{value:{}},lightbox:{value:null},prevButton:{valueFn:function(){return i.Node.create((0,a.Z)('<button class="{sub1}" aria-label="'+(0,e.t)("Previous item",null,{project:"scripts-v6.widgets"})+'"><svg viewBox="0 0 23 48"><g class="svg-icon"><polyline fill="none" stroke-miterlimit="10" points="21.5,1.3 2.6,23.4 21.5,45.7 "/></g></svg></button>',{sub1:u.CSS_PREV_BUTTON}))}},nextButton:{valueFn:function(){return i.Node.create((0,a.Z)('<button class="{sub1}" aria-label="'+(0,e.t)("Next item",null,{project:"scripts-v6.widgets"})+'"><svg viewBox="0 0 23 48"><g class="svg-icon"><polyline fill="none" stroke-miterlimit="10" points="1.5,45.7 20.4,23.5 1.5,1.3 "/></g></svg></button>',{sub1:u.CSS_NEXT_BUTTON}))}},closeButton:{valueFn:function(){return i.Node.create((0,a.Z)('<button class="{sub1}" aria-label="'+(0,e.t)("Close quick view",null,{project:"scripts-v6.widgets"})+'"><svg viewBox="0 0 16 16"><g class="svg-icon"><line fill="none" stroke-miterlimit="10" x1="1.4" y1="1.4" x2="14.4" y2="14.4"/><line fill="none" stroke-miterlimit="10" x1="1.4" y1="14.4" x2="14.4" y2="1.4"/></g></svg></button>',{sub1:u.CSS_CLOSE_BUTTON}))}},isLightboxOpen:{value:!1},source:{value:null}}})},"1.0",{requires:["squarespace-beforeunload","squarespace-cart-utils","squarespace-escmanager","squarespace-image-loader","squarespace-modal-lightbox","squarespace-models-shopping-cart","squarespace-products-collection-item-v2","squarespace-ss-widget","squarespace-widgets-alert"]})},854241:function(c,b,t){"use strict";var l=t(687048),d=t.n(l),o=t(174161),e=t(594127),a=t(969145),r=t(762005);YUI.add("squarespace-react-dialog-field",function(s){s.namespace("Squarespace.DialogFields");var n=s.Squarespace.DialogFields.ReactDialogField=s.Base.create("ReactDialogField",s.Squarespace.DialogField2,[],{renderUI:function(){this._reactRoot=(0,e.createRoot)(this.get("contentBox").getDOMNode()),n.superclass.renderUI.call(this),this.syncUI()},bindUI:function(){n.superclass.bindUI.call(this),this.after("propsChange",s.bind(this.syncUI,this))},syncUI:function(){var i=this.get("props"),u=this.get("component"),h=o.createElement(u,d()(i)?i():i),g=o.createElement(a.Z.Provider,{theme:r.rosetta.white},h);this._reactRoot.render(g)},destructor:function(){this._reactRoot&&this._reactRoot.unmount()},didDataChange:function(){var i=this.get("isDirty");return i!==void 0?i:n.superclass.didDataChange.call(this)}},{CSS_PREFIX:"sqs-react-dialog-field",ATTRS:{component:{},props:{},isDirty:{}}})},"1.0",{requires:["node","squarespace-dialog-field-2","squarespace-util"]})},865389:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-action",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor"),e.Squarespace.Widgets.SliceContentEditor.Action=e.Base.create("Action",e.Squarespace.Widgets.SliceContentEditor.Compound,[],{},{SLICE_TYPE:d().ACTION,CSS_PREFIX:"sqs-slice-content-editor-action",ATTRS:{sliceContent:{validator:function(a){return a instanceof e.Squarespace.Models.SliceContent.Action}},strings:{value:{title:(0,o.t)("Select Action Type",null,{project:"scripts-v6.widgets"}),description:(0,o.t)("Choose between buttons or navigation links.",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-models-slice-content-action","squarespace-widgets-slice-content-editor-compound"]})},475678:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-album",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor"),e.Squarespace.Widgets.SliceContentEditor.Album=e.Base.create("Album",e.Squarespace.Widgets.SliceContentEditor.AsyncBase,[],{},{SLICE_TYPE:d().ALBUM,CSS_PREFIX:"sqs-slice-content-editor-album",ATTRS:{sliceContent:{validator:function(a){return a instanceof e.Squarespace.Models.SliceContent.Album}},fields:{value:[e.Squarespace.Widgets.SliceContentEditor.Fields.ALBUM]},loadable:{valueFn:function(){return this.get("sliceContent").get("contentCollection").items}},loadOnInitialize:{valueFn:function(){return!this.get("sliceContent").get("contentCollection").isNew()}},strings:{value:{title:(0,o.t)("Album",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-album","squarespace-widgets-slice-content-editor-async-base"]})},315339:function(){YUI.add("squarespace-widgets-slice-content-editor-async-base",function(c){c.namespace("Squarespace.Widgets.SliceContentEditor"),c.Squarespace.Widgets.SliceContentEditor.AsyncBase=c.Base.create("AsyncBase",c.Squarespace.Widgets.SliceContentEditor.Base,[c.Squarespace.Mixins.Loadable],{destructor:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._loadingSpinner&&this._loadingSpinner.destroy()},renderUI:function(){},syncUI:function(){this.get("loading")?this._renderLoadingState():this._renderLoadedState()},_renderLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._loadingTimer=c.later(500,this,function(){this._empty(),this._loadingSpinner=new c.Squarespace.Spinner({render:this.get("contentBox"),size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._empty();var b=this.get("sliceContent");c.Array.each(this.get("fields"),function(t){this.add(t(b))},this),this.after("*:dataChange",this._onFieldDataChange,this)},_empty:function(){this._loadingSpinner&&this._loadingSpinner.destroy();var b=this.removeAll();b.each(function(t){t.destroy()}),this.get("contentBox").empty()}},{CSS_PREFIX:"sqs-slice-content-editor-async-base",ATTRS:{}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-mixins-loadable","squarespace-spinner","squarespace-ss-widget","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},871710:function(c,b,t){"use strict";var l=t(986590);YUI.add("squarespace-widgets-slice-content-editor-base",function(d){d.namespace("Squarespace.Widgets.SliceContentEditor");var o=o||function(){},e=d.Squarespace.Widgets.SliceContentEditor.Base=d.Base.create("Base",d.Squarespace.Widgets.SSWidget,[d.WidgetParent],{initializer:function(){if(!this.get("isCompoundCurrentContent")){var a=l.Z[this.get("sliceType")];this.get("boundingBox").setAttribute("data-shimmy-id",a)}},destructor:function(){this._descriptionField&&this._descriptionField.destroy(!0)},renderUI:function(){e.superclass.renderUI.call(this),this._descriptionField=new d.Squarespace.DialogFields.Description({render:this.get("contentBox"),title:this.get("strings.title"),text:this.get("strings.description")});var a=this.get("sliceContent");d.Array.each(this.get("fields"),function(r){this.add(r(a))},this)},bindUI:function(){e.superclass.bindUI.call(this),this.after("*:dataChange",this._onFieldDataChange,this)},renderError:function(a){this.hideError(),this._errorNode=d.Node.create('<div class="error">'+a+"</div>"),this.get("contentBox").one(".sqs-description").insert(this._errorNode,"after")},hideError:function(){this._errorNode&&this._errorNode.remove(!0)},resetAfterSave:o,_onFieldDataChange:function(a){this.get("sliceContent").set(a.target.get("name"),a.newVal)},_getFieldByName:function(a){var r;return this.some(function(s){if(s.get("name")===a)return r=s,!0}),r}},{CSS_PREFIX:"sqs-slice-content-editor-base",ATTRS:{sliceContent:{value:null,validator:d.Squarespace.AttrValidators.isNullOrInstanceOf(d.Squarespace.Models.SliceContent.Base)},sliceType:{},isCompoundCurrentContent:{value:!1},fields:{value:[],validator:function(a){if(!d.Lang.isArray(a))return!1;var r=d.Squarespace.Widgets.SliceContentEditor.Fields,s=d.Array.some(a,function(n){return!d.Object.hasValue(r,n)});return!s},writeOnce:"initOnly"}}})},"1.0",{requires:["base","widget-parent","squarespace-attr-validators","squarespace-models-slice-content-base","squarespace-ss-widget","squarespace-widgets-slice-content-editor-fields"]})},818866:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-buttons",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor"),e.Squarespace.Widgets.SliceContentEditor.Buttons=e.Base.create("Buttons",e.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:d().BUTTONS,CSS_PREFIX:"sqs-slice-content-editor-buttons",ATTRS:{sliceContent:{validator:function(a){return a instanceof e.Squarespace.Models.SliceContent.Buttons}},fields:{value:[e.Squarespace.Widgets.SliceContentEditor.Fields.LINKS_BUTTONS]},strings:{value:{title:(0,o.t)("Buttons",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-widgets-slice-content-editor-base","squarespace-models-slice-content-buttons","squarespace-widgets-slice-content-editor-fields"]})},744843:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-compound",function(e){var a={};a[d().BODY]=(0,o.t)("Body",null,{project:"scripts-v6.widgets"}),a[d().IMAGE]=(0,o.t)("Image",null,{project:"scripts-v6.widgets"}),a[d().SOCIAL_ICONS]=(0,o.t)("Social Icons",null,{project:"scripts-v6.widgets"}),a[d().MAP]=(0,o.t)("Map",null,{project:"scripts-v6.widgets"}),a[d().BUTTONS]=(0,o.t)("Buttons",null,{project:"scripts-v6.widgets"}),a[d().NAVIGATION]=(0,o.t)("Navigation",null,{project:"scripts-v6.widgets"}),a[d().NEWSLETTER]=(0,o.t)("Newsletter Form",null,{project:"scripts-v6.widgets"}),a[d().CUSTOM_FORM]=(0,o.t)("Custom Form",null,{project:"scripts-v6.widgets"}),a[d().ALBUM]=(0,o.t)("Album",null,{project:"scripts-v6.widgets"}),a[d().GALLERY]=(0,o.t)("Gallery",null,{project:"scripts-v6.widgets"}),a[d().VIDEO]=(0,o.t)("Video",null,{project:"scripts-v6.widgets"}),a[d().HEADING]=(0,o.t)("Heading",null,{project:"scripts-v6.widgets"}),a[d().SUB_HEADING]=(0,o.t)("Sub Heading",null,{project:"scripts-v6.widgets"}),a[d().LOGO]=(0,o.t)("Logo",null,{project:"scripts-v6.widgets"}),a[d().ACTION]=(0,o.t)("Action",null,{project:"scripts-v6.widgets"}),a[d().POPUP_OVERLAY_ACTION]=(0,o.t)("Action",null,{project:"scripts-v6.widgets"}),e.namespace("Squarespace.Widgets.SliceContentEditor");var r=e.Squarespace.Widgets.SliceContentEditor.Compound=e.Base.create("Compound",e.Squarespace.Widgets.SliceContentEditor.Base,[],{initializer:function(){this.get("contentBox").addClass("sqs-slice-content-editor-compound-content");var s=this.get("sliceContent");this._currentTypeSelect=new e.Squarespace.DialogFields.Radio({name:"currentType-"+a[s.get("currentType")],className:"dark",numeric:!0,data:s.get("currentType"),options:e.bind(function(){var n=[];return e.Array.each(s.get("acceptedTypes"),function(i){n.push({label:this._getLabelForSliceType(i),value:i})},this),n},this)()})},destructor:function(){this._currentTypeSelect&&this._currentTypeSelect.destroy(),this._sliceContentEditor&&this._sliceContentEditor.destroy(),this._descriptionField&&this._descriptionField.destroy(!0)},renderUI:function(){r.superclass.renderUI.call(this),this._currentTypeSelect.render(this.get("contentBox"))},bindUI:function(){r.superclass.bindUI.call(this);var s=this.get("sliceContent");this._registerEvent(s.after("currentContentChange",this.syncUI,this)),this._currentTypeSelect.after("dataChange",function(n){s.set("currentType",n.newVal)})},syncUI:function(){r.superclass.syncUI.call(this),this._destroySliceContentEditor(),this._renderSliceContentEditor()},_renderLoadedState:function(){r.superclass._renderLoadedState.call(this)},_empty:function(){r.superclass._empty.call(this)},_getLabelForSliceType:function(s){return a[s]},_renderSliceContentEditor:function(){var s=this.get("sliceContent"),n=s.get("currentType"),i=e.Squarespace.Widgets.SliceContentEditor.Factory;this._sliceContentEditor=i.create(n,{render:this.get("contentBox"),sliceContent:s.get("currentContent"),isCompoundCurrentContent:!0})},_destroySliceContentEditor:function(){this._sliceContentEditor&&this._sliceContentEditor.destroy()}},{CSS_PREFIX:"sqs-slice-content-editor-compound",ATTRS:{sliceContent:{validator:function(s){return s instanceof e.Squarespace.Models.SliceContent.Compound}}}})},"1.0",{requires:["base","squarespace-dialog-description","squarespace-dialog-radio","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-factory"]})},880262:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-custom-form",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor");var a={FORM:"FORM",NEWSLETTER:"NEWSLETTER"},r=e.Squarespace.Widgets.SliceContentEditor.CustomForm=e.Base.create("CustomForm",e.Squarespace.Widgets.SliceContentEditor.Base,[],{initializer:function(){this.get("contentBox").addClass("sqs-slice-content-editor-compound-content");var s=this.get("sliceContent");this._formTypeSelect=new e.Squarespace.DialogFields.Radio({name:"currentType-Form",className:"dark",data:s.get("isNewsletterFormSelected")?a.NEWSLETTER:a.FORM,options:[{label:(0,o.t)("Form",null,{project:"scripts-v6.widgets"}),value:a.FORM},{label:(0,o.t)("Newsletter Signup",null,{project:"scripts-v6.widgets"}),value:a.NEWSLETTER}]}),this._buttonLabelInput=new e.Squarespace.DialogFields.Text({className:"custom-form-button-label",data:s.get("buttonLabel"),"strings.placeholder":(0,o.t)("Button Label",null,{project:"scripts-v6.widgets"})}),this._editFormButton=new e.Squarespace.DialogFields.Button({"strings.text":this._getEditButtonLabel()})},destructor:function(){this._editFormDialog&&this._editFormDialog.destroy(!0),this._formTypeSelect.destroy(),this._buttonLabelInput.destroy(),this._editFormButton.destroy()},renderUI:function(){r.superclass.renderUI.call(this);var s=this.get("contentBox");this._formTypeSelect.render(s),this._buttonLabelInput.render(s),this._editFormButton.render(s)},bindUI:function(){r.superclass.bindUI.call(this);var s=this.get("sliceContent");this._formTypeSelect.after("dataChange",(function(n){var i=n.newVal===a.NEWSLETTER;s.set("isNewsletterFormSelected",i),this._editFormButton.set("strings.text",this._getEditButtonLabel())}).bind(this)),this._buttonLabelInput.after("dataChange",function(n){s.set("buttonLabel",n.newVal)}),this._editFormButton.after("click",this._showEditDialog.bind(this))},_showEditDialog:function(){this._editFormDialog&&this._editFormDialog.destroy(!0),this.get("sliceContent").get("isNewsletterFormSelected")?this._editFormDialog=new e.Squarespace.SlideNewsletterFormEditor({model:this.get("sliceContent").get("newsletterForm")}):this._editFormDialog=new e.Squarespace.SlideCustomFormEditor({model:this.get("sliceContent").get("form")}),this._editFormDialog.show()},_getEditButtonLabel:function(){return this.get("sliceContent").get("isNewsletterFormSelected")?(0,o.t)("Edit Newsletter Signup",null,{project:"scripts-v6.widgets"}):(0,o.t)("Edit Form",null,{project:"scripts-v6.widgets"})}},{SLICE_TYPE:d().CUSTOM_FORM,CSS_PREFIX:"sqs-slice-content-editor-custom-form",ATTRS:{sliceContent:{validator:function(s){return s instanceof e.Squarespace.Models.SliceContent.CustomForm}},strings:{value:{title:(0,o.t)("Select Submission Type",null,{project:"scripts-v6.widgets"}),description:(0,o.t)("Choose between a custom form and a newsletter signup.",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-dialog-button","squarespace-dialog-radio","squarespace-dialog-text","squarespace-editor-slide-custom-form","squarespace-editor-slide-newsletter-form","squarespace-models-slice-content-custom-form","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},681797:function(c,b,t){"use strict";var l=t(434927),d=t.n(l);YUI.add("squarespace-widgets-slice-content-editor-factory",function(o){var e=o.Squarespace.FactoryUtils.createEnumToClassFactory(d(),o.Squarespace.Widgets.SliceContentEditor,"SLICE_TYPE");o.namespace("Squarespace.Widgets.SliceContentEditor"),o.Squarespace.Widgets.SliceContentEditor.Factory=e},"1.0",{requires:["squarespace-factory-utils","squarespace-widgets-slice-content-editor-action","squarespace-widgets-slice-content-editor-album","squarespace-widgets-slice-content-editor-buttons","squarespace-widgets-slice-content-editor-custom-form","squarespace-widgets-slice-content-editor-gallery","squarespace-widgets-slice-content-editor-lock","squarespace-widgets-slice-content-editor-map","squarespace-widgets-slice-content-editor-navigation","squarespace-widgets-slice-content-editor-newsletter","squarespace-widgets-slice-content-editor-password","squarespace-widgets-slice-content-editor-popup-overlay-action","squarespace-widgets-slice-content-editor-social-icons","squarespace-widgets-slice-content-editor-sub-heading","squarespace-widgets-slice-content-editor-twitter","squarespace-widgets-slice-content-editor-video"]})},808865:function(c,b,t){"use strict";var l=t(714487),d=t(967361),o=t(935154),e=t.n(o),a=t(481312),r=t.n(a),s=t(43594),n=t.n(s),i=t(815211),u=t.n(i);YUI.add("squarespace-widgets-slice-content-editor-fields",function(h){h.namespace("Squarespace.Widgets.SliceContentEditor"),h.Squarespace.Widgets.SliceContentEditor.Fields={DISPLAY_SOCIAL:function(f){return{childType:h.Squarespace.DialogFields.Check,name:"display",data:f.get("display"),className:"dark","strings.title":(0,l.t)("Display Social Icons",null,{project:"scripts-v6.widgets"}),"strings.description":(0,l.t)("If enabled, the social icons you have configured in your site settings will be displayed.",null,{project:"scripts-v6.widgets"})}},DISPLAY_SOCIAL_PUSHER:function(f){return{childType:h.Squarespace.Damask.Panel.PanelPusher,name:"connected-services",title:(0,l.t)("Connected Accounts",null,{project:"scripts-v6.widgets"}),description:(0,l.t)("Connect your social services.",null,{project:"scripts-v6.widgets"}),childPanelConfig:{"strings.title":(0,l.t)("Connected Accounts",null,{project:"scripts-v6.widgets"})}}},DISPLAY_LOCK:function(f){return{childType:h.Squarespace.DialogFields.Check,name:"display",data:f.get("display"),className:"dark","strings.title":(0,l.t)("Display Lock Icon",null,{project:"scripts-v6.widgets"})}},VIDEO:function(f){var m=f.get("contentItem"),_=m.get("structuredContent");return[{childType:h.Squarespace.DialogFields.Oembed,name:"oembed",filter:"video",data:_.get("oembed")}]},MAP:function(f){return{childType:h.Squarespace.DialogFields.Map,name:"location",data:f.get("location").toJSON(),height:250,showTitle:!1,googleTrackingContext:{productPage:"cover-page",productSection:"panel"}}},LINKS_BUTTONS:function(f){return{childType:h.Squarespace.Widgets.SliceContentEditor.LinkList,name:"links",numLinksAllowed:f.get("limit"),"strings.linkLabelPlaceholder":(0,l.t)("Button Label",null,{project:"scripts-v6.widgets"}),data:f.get("links")}},LINKS_NAVIGATION:function(f){return{childType:h.Squarespace.Widgets.SliceContentEditor.LinkList,name:"links",numLinksAllowed:f.get("limit"),"strings.linkLabelPlaceholder":(0,l.t)("Link Label",null,{project:"scripts-v6.widgets"}),data:f.get("links")}},ALBUM:function(f){var m=f.get("contentCollection"),_=function(v){m.isNew()?(m.onceAfter("save",function(){v()}),m.save()):v()};return{childType:h.Squarespace.DialogFields.TrackList,name:"contentCollectionId",data:m,stickyHeadersEnabled:!1,uploadPreflight:_}},BUTTON_LABEL:function(f){return{childType:h.Squarespace.DialogFields.Text,name:"buttonLabel","strings.placeholder":(0,l.t)("Button Label",null,{project:"scripts-v6.widgets"}),data:f.get("buttonLabel")}},CUSTOM_FORM:function(f){return{childType:h.Squarespace.DialogFields.Button,name:"editForm",strings:{text:(0,l.t)("Edit Form",null,{project:"scripts-v6.widgets"})}}},NEWSLETTER_FORM:function(f){return{childType:h.Squarespace.DialogFields.Button,name:"editNewsletterForm",strings:{text:(0,l.t)("Storage & Advanced Options",null,{project:"scripts-v6.widgets"})}}},NEWSLETTER_STORAGE:function(f){return[{childType:h.Squarespace.DialogFields.Description,title:(0,l.t)("Storage Options",null,{project:"scripts-v6.widgets"})},d.Z.isFeatureEnabled(e().MAILCHIMP_INTEGRATION)?{childType:h.Squarespace.DialogFields.MailChimpServiceConnect,name:"mailchimpConnect",data:g(f.get("form"),r().MAILCHIMP)}:null,{childType:h.Squarespace.DialogFields.GoogleDocsServiceConnect,name:"googleDocsConnect",data:g(f.get("form"),r().GOOGLE)}].filter(function(m){return m})},NEWSLETTER_SUBMIT_LABEL:function(f){return[{childType:h.Squarespace.DialogFields.Description,title:(0,l.t)("Submit Button Label",null,{project:"scripts-v6.widgets"}),text:(0,l.t)("Display this message to users after they submit your form.",null,{project:"scripts-v6.widgets"})},{childType:h.Squarespace.DialogFields.Text,name:"submitButtonText","strings.placeholder":(0,l.t)("Submit Button Label",null,{project:"scripts-v6.widgets"}),data:f.get("submitButtonText")}]},NEWSLETTER_POST_SUBMIT_HTML:function(f){return[{childType:h.Squarespace.DialogFields.Description,title:(0,l.t)("Post-Submit HTML",null,{project:"scripts-v6.widgets"})},{childType:h.Squarespace.DialogFields.HtmlCode,name:"submissionHTML",data:f.get("submissionHTML")}]},NEWSLETTER_POST_SUBMIT_MESSAGE:function(f){return[{childType:h.Squarespace.DialogFields.Description,title:(0,l.t)("Post-Submit Message",null,{project:"scripts-v6.widgets"})},{childType:h.Squarespace.DialogFields.Wysiwyg,name:"submissionMessage",data:f.get("submissionMessage"),editorHeight:175}]},TWITTER:function(f){var m=f.get("useSearch"),_=p(u().TWITTER,f.get("connectedAccountId"),!0);return _.concat([{childType:h.Squarespace.DialogFields.Check,name:"useSearch",data:m,className:"dark","strings.title":(0,l.t)("Use Twitter Search",null,{project:"scripts-v6.widgets"}),"strings.description":(0,l.t)("Search twitter for a phrase, hashtag, or handle.",null,{project:"scripts-v6.widgets"})},{childType:h.Squarespace.DialogFields.TextWithRefresh,name:"searchTerm",className:"thin","strings.placeholder":(0,l.t)("Search Term",null,{project:"scripts-v6.widgets"}),visible:m,data:f.get("socialData").get("socialSearch.searchTerm")},{childType:h.Squarespace.DialogFields.Slider,name:"numTweets",range:[1,20],getPluralizedSliderLabel:function(v){return(0,l._6)({one:"{%n} Tweet",other:"{%n} Tweets"},v,null,{project:"scripts-v6.widgets",notes:"oldKey: twitterTweetsPerPageLabel"})},labelWidth:70,data:f.get("numTweets")},{childType:h.Squarespace.DialogFields.Check,name:"showAvatar",data:f.get("showAvatar"),className:"dark","strings.title":(0,l.t)("Show Avatar",null,{project:"scripts-v6.widgets"}),"strings.description":(0,l.t)("Display the Twitter user's avatar image.",null,{project:"scripts-v6.widgets"})},{childType:h.Squarespace.DialogFields.Check,name:"showDisplayName",data:f.get("showDisplayName"),className:"dark","strings.title":(0,l.t)("Show Display Name",null,{project:"scripts-v6.widgets"}),"strings.description":(0,l.t)("Show the Twitter user's display name.",null,{project:"scripts-v6.widgets"})}])}};function g(f,m){var _={};if(f){var v=f.getConnBackend(m);if(v.length>0){var E=v[0];_={connectionState:n().CONNECTED,username:E.socialConfig.profileUserName,socialConfig:E.socialConfig},m===r().GOOGLE?_.spreadsheetName=E.config.spreadsheetName:m===r().MAILCHIMP&&(_.list=E.backendId)}}return _}function p(f,m,_){var v=h.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray(),E=v.sort(function(C,O){return 0+(C.addedOn<O.addedOn)}),S=h.Array.reduce(E,[],function(C,O){var A=O.get("collectionId"),I=h.Lang.isValue(A),D=O.get("serviceId")===f;return I&&D&&C.push({label:O.get("screenname"),value:O.get("id")}),C}),y={childType:h.Squarespace.DialogFields.Select,name:"connectedAccountId",className:"thin dark",padding:[10,10],options:S,visible:_&&S.length>0,"strings.placeholder":(0,l.t)("Select Account",null,{project:"scripts-v6.widgets"}),data:m};return[y,{childType:h.Squarespace.DialogFields.Button,name:"addAccount",alignment:"center","strings.text":(0,l.t)("Add Account",null,{project:"scripts-v6.widgets"}),visible:_}]}},"1.0",{requires:["squarespace-damask-panel-panel-pusher","squarespace-dialog-button","squarespace-dialog-check","squarespace-dialog-code","squarespace-dialog-description","squarespace-dialog-file-image","squarespace-dialog-google-docs-service-connect","squarespace-dialog-mailchimp-service-connect","squarespace-dialog-map","squarespace-dialog-music-track-list","squarespace-dialog-oembed","squarespace-dialog-select","squarespace-dialog-slider","squarespace-dialog-text","squarespace-dialog-text-with-refresh","squarespace-dialog-video","squarespace-dialog-wysiwyg","squarespace-models-connected-accounts","squarespace-models-content-item","squarespace-util-authenticated","squarespace-widgets-slice-content-editor-link-list","squarespace-content-item-types-editor"]})},940811:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(815211),e=t.n(o),a=t(287581),r=t.n(a),s=t(714487);YUI.add("squarespace-widgets-slice-content-editor-gallery",function(n){n.namespace("Squarespace.Widgets.SliceContentEditor");var i=n.Squarespace.Widgets.SliceContentEditor.Gallery=n.Base.create("Gallery",n.Squarespace.Widgets.SliceContentEditor.Base,[n.Squarespace.Widgets.SliceContentEditor.HasExternalAuth],{resetAfterSave:function(){var u=this.get("sliceContent");if(u.get("source")!==r().UPLOAD){var h=u.get("defaultCollections"),g=h[r().UPLOAD],p=function(f){g.isNew()?(g.onceAfter("save",function(){f()}),g.save()):f()};this._getFieldByName("contentCollectionId").setAttrs({data:g,uploadPreflight:p})}},_getServiceProvider:function(){return e().INSTAGRAM},_onFieldDataChange:function(u){var h=u.target.get("name"),g=u.newVal;h!=="contentCollectionId"&&(h==="connectedAccountId"?this._updateCollectionIdForConnectedAccount():h==="source"?(this.get("sliceContent").set("source",parseInt(g,10)),this._updateCollectionId(),this._hideAndShowFieldsForSource()):i.superclass._onFieldDataChange.call(this,u))},_hideAndShowFieldsForSource:function(){var u=this.get("sliceContent").get("source"),h,g;if(u===r().UPLOAD)h=[this._getFieldByName("connectedAccountId"),this._getFieldByName("addAccount")],g=[this._getFieldByName("contentCollectionId")];else{h=[this._getFieldByName("contentCollectionId")],g=[];var p=this._getFieldByName("connectedAccountId");p.get("options").length>0&&g.push(p),g.push(this._getFieldByName("addAccount"))}n.Array.invoke(h,"set","visible",!1),n.Array.invoke(g,"set","visible",!0)},_updateCollectionId:function(){var u=this.get("sliceContent"),h=this.get("sliceContent").get("source"),g=null;if(h===r().UPLOAD){var p=this._getFieldByName("contentCollectionId");g=p.get("data").get("id")}else{var f=this._getFieldByName("connectedAccountId"),m=f.get("data");if(m){var _=n.Squarespace.Models.ConnectedAccounts.loadFromStore().getById(m);_&&(g=_.get("collectionId"))}}u.set("contentCollectionId",g)},_updateCollectionIdForConnectedAccount:function(){var u=this._getFieldByName("connectedAccountId"),h=u.get("data"),g=n.Squarespace.Models.ConnectedAccounts.loadFromStore().getById(h),p=g.get("collectionId"),f=this.get("sliceContent"),m=f.get("contentCollection");m.set("id",p),m.ensureProcessedItems().then(function(){f.set("contentCollectionId",p)})}},{SLICE_TYPE:d().GALLERY,CSS_PREFIX:"sqs-slice-content-editor-gallery",ATTRS:{sliceContent:{validator:function(u){return u instanceof n.Squarespace.Models.SliceContent.Gallery}},fields:{value:[n.Squarespace.Widgets.SliceContentEditor.Fields.GALLERY]},strings:{value:{title:(0,s.t)("Gallery",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["array-invoke","base","squarespace-models-connected-accounts","squarespace-models-slice-content-gallery","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields","squarespace-widgets-slice-content-editor-has-external-auth"]})},894946:function(c,b,t){"use strict";var l=t(518703),d=t(840635);YUI.add("squarespace-widgets-slice-content-editor-has-external-auth",function(o){o.namespace("Squarespace.Widgets.SliceContentEditor"),o.Squarespace.Widgets.SliceContentEditor.HasExternalAuth=o.Base.create("HasExternalAuth",o.Base,[],{initializer:function(){o.Do.after(function(){var e=this._getFieldByName("addAccount");e&&e.after("click",this._addAccount,this)},this,"bindUI",this)},_addAccount:function(){var e=this._getServiceProvider();l.Z.authenticate({urlParams:{authenticationType:"website",startSubscription:!0},serviceProvider:e}).then(this._continueAuthentication.bind(this)).catch(function(a){return l.Z.logException(a,e)})},_continueAuthentication:function(e){var a=e.socialConfig;if(o.Lang.isValue(a)){var r=a.externalAuthenticationId;this._refreshConnectedAccountField(r)}},_refreshConnectedAccountField:function(e){this._getAccountFieldOptions().then(o.bind(function(a){var r=this._getFieldByName("connectedAccountId");r.setAttrs({options:a,data:e}),a.length>0&&r.set("visible",!0)},this))},_getAccountFieldOptions:function(){var e=this._getServiceProvider();return o.Squarespace.Promises.create(function(a){d.Z.refreshConnectedAccounts(!0).then(function(){var r=o.Squarespace.Models.ConnectedAccounts.loadFromStore().toArray(),s=r.sort(function(i,u){return 0+(i.addedOn<u.addedOn)}),n=o.Array.reduce(s,[],function(i,u){var h=u.get("collectionId"),g=o.Lang.isValue(h),p=u.get("serviceId")===e;return g&&p&&i.push({label:u.get("screenname"),value:u.get("id")}),i});a(n)})},this)},_getServiceProvider:function(){}})},"1.0",{requires:["base","squarespace-models-connected-accounts","squarespace-promises"]})},330143:function(){YUI.add("squarespace-widgets-slice-content-editor-has-pusher-mixin",function(c){c.namespace("Squarespace.Widgets.SliceContentEditor"),c.Squarespace.Widgets.SliceContentEditor.HasPusherMixin=c.Base.create("HasPusherMixin",c.Base,[],{getPushers:function(){return this.toJSON().filter(function(b){return b instanceof c.Squarespace.Damask.Panel.PanelPusher})}})},"1.0",{requires:["base","squarespace-damask-panel-panel-pusher"]})},437101:function(){YUI.add("squarespace-widgets-slice-content-editor-link-list",function(c){c.namespace("Squarespace.Widgets.SliceContentEditor");var b=c.Squarespace.Widgets.SliceContentEditor.LinkList=c.Base.create("LinkList",c.Squarespace.DialogField2,[],{initializer:function(){this._linkEditors=[];var t=this.get("data"),l=this.get("strings.linkLabelPlaceholder");t.each(function(n){var i=new c.Squarespace.Widgets.SliceContentEditor.Link({link:n,"strings.linkLabelPlaceholder":l});this._linkEditors.push(i)},this);var d=t.size(),o=this.get("numLinksAllowed");if(o>d)for(var e=o-d,a=0;a<e;a++){var r=new c.Squarespace.Models.SliceContent.Link,s=new c.Squarespace.Widgets.SliceContentEditor.Link({link:r,"strings.linkLabelPlaceholder":l});t.add(r),this._linkEditors.push(s)}},destructor:function(){c.Array.each(this._linkEditors,function(t){t.destroy()})},renderUI:function(){b.superclass.renderUI.call(this);var t=this.get("contentBox");c.Array.each(this._linkEditors,function(l){l.render(t)})}},{CSS_PREFIX:"sqs-widgets-slice-content-editor-link-list",ATTRS:{numLinksAllowed:{value:1,validator:c.Squarespace.AttrValidators.isNumber},data:{validator:c.Squarespace.AttrValidators.isInstanceOf(c.ModelList)}}})},"1.0",{requires:["base","model-list","squarespace-attr-validators","squarespace-dialog-field-2","squarespace-models-slice-content-link","squarespace-widgets-slice-content-editor-link"]})},866058:function(c,b,t){"use strict";var l=t(174161),d=t(233284),o=t(246512);YUI.add("squarespace-widgets-slice-content-editor-link",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor");var a=e.Squarespace.Widgets.SliceContentEditor.Link=e.Base.create("Link",e.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.reactMountNode=null,this._textField=new e.Squarespace.DialogFields.Text({data:this.get("link").get("text"),className:"thin","strings.placeholder":this.get("strings.linkLabelPlaceholder")})},destructor:function(){this._textField.destroy(),this.reactMountNode&&(d.unmountComponentAtNode(this.reactMountNode),this.reactMountNode.remove(),this.reactMountNode=null)},renderUI:function(){a.superclass.renderUI.call(this);var r=this.get("contentBox");this._textField.render(r),this.reactMountNode===null&&(this.reactMountNode=this.get("contentBox").appendChild('<div class="yui3-widget sqs-widget sqs-data-widget sqs-dialog-field sqs-create-link data-state-loaded"></div>').getDOMNode(),this.renderReact())},getReactProps:function(){return{flush:!0,isDark:!0,showVisitLink:!1,value:this.get("link").get("clickthroughUrl"),onChange:(function(r){this.get("link").set("clickthroughUrl",r)}).bind(this)}},renderReact:function(){d.render(l.createElement(o.Z,this.getReactProps()),this.reactMountNode)},bindUI:function(){a.superclass.bindUI.call(this);var r=this.get("link");this._textField.after("dataChange",function(s){r.set("text",s.newVal)})}},{CSS_PREFIX:"sqs-widgets-slice-content-editor-link",ATTRS:{link:{valueFn:function(){return new e.Squarespace.Models.SliceContent.Link},validator:e.Squarespace.AttrValidators.isInstanceOf(e.Squarespace.Models.SliceContent.Link)}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-dialog-create-link","squarespace-dialog-text","squarespace-models-slice-content-link","squarespace-ss-widget","squarespace-util"]})},636970:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-lock",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor"),e.Squarespace.Widgets.SliceContentEditor.Lock=e.Base.create("Lock",e.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:d().LOCK,CSS_PREFIX:"sqs-slice-content-editor-lock",ATTRS:{sliceContent:{validator:function(a){return a instanceof e.Squarespace.Models.SliceContent.Lock}},fields:{value:[e.Squarespace.Widgets.SliceContentEditor.Fields.DISPLAY_LOCK]},strings:{value:{title:(0,o.t)("Lock",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-models-slice-content-lock","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},716830:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-map",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor"),e.Squarespace.Widgets.SliceContentEditor.Map=e.Base.create("Map",e.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:d().MAP,CSS_PREFIX:"sqs-slice-content-editor-map",ATTRS:{sliceContent:{validator:function(a){return a instanceof e.Squarespace.Models.SliceContent.Map}},fields:{value:[e.Squarespace.Widgets.SliceContentEditor.Fields.MAP]},strings:{value:{title:(0,o.t)("Map",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-models-slice-content-map","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},703064:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-navigation",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor"),e.Squarespace.Widgets.SliceContentEditor.Navigation=e.Base.create("Navigation",e.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:d().NAVIGATION,CSS_PREFIX:"sqs-slice-content-editor-navigation",ATTRS:{sliceContent:{validator:function(a){return a instanceof e.Squarespace.Models.SliceContent.Navigation}},fields:{value:[e.Squarespace.Widgets.SliceContentEditor.Fields.LINKS_NAVIGATION]},strings:{value:{title:(0,o.t)("Navigation",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-models-slice-content-navigation","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},894085:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-newsletter",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor"),e.Squarespace.Widgets.SliceContentEditor.Newsletter=e.Base.create("Newsletter",e.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:d().NEWSLETTER,CSS_PREFIX:"sqs-slice-content-editor-newsletter",ATTRS:{sliceContent:{validator:function(a){return a instanceof e.Squarespace.Models.SliceContent.Newsletter}},fields:{value:[e.Squarespace.Widgets.SliceContentEditor.Fields.NEWSLETTER_SUBMIT_LABEL,e.Squarespace.Widgets.SliceContentEditor.Fields.NEWSLETTER_STORAGE,e.Squarespace.Widgets.SliceContentEditor.Fields.NEWSLETTER_POST_SUBMIT_MESSAGE,e.Squarespace.Widgets.SliceContentEditor.Fields.NEWSLETTER_POST_SUBMIT_HTML]},strings:{value:{title:(0,o.t)("Newsletter",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-editor-slide-newsletter-form","squarespace-models-slice-content-newsletter","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},128293:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-password",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor"),e.Squarespace.Widgets.SliceContentEditor.Password=e.Base.create("Password",e.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:d().PASSWORD,CSS_PREFIX:"sqs-slice-content-editor-password",ATTRS:{sliceContent:{validator:function(a){return a instanceof e.Squarespace.Models.SliceContent.Password}},fields:{value:[]},strings:{value:{title:(0,o.t)("Password",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-models-slice-content-password","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},608104:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-popup-overlay-action",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor"),e.Squarespace.Widgets.SliceContentEditor.PopupOverlayAction=e.Base.create("PopupOverlayAction",e.Squarespace.Widgets.SliceContentEditor.Compound,[],{},{SLICE_TYPE:d().POPUP_OVERLAY_ACTION,CSS_PREFIX:"sqs-slice-content-editor-popup-overlay-action",ATTRS:{sliceContent:{validator:function(a){return a instanceof e.Squarespace.Models.SliceContent.PopupOverlayAction}},strings:{value:{title:(0,o.t)("Select Action Type",null,{project:"scripts-v6.widgets"}),description:(0,o.t)("Choose between a newsletter or buttons.",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-models-slice-content-action","squarespace-widgets-slice-content-editor-compound"]})},461036:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487),e=t(331280);YUI.add("squarespace-widgets-slice-content-editor-social-icons",function(a){a.namespace("Squarespace.Widgets.SliceContentEditor"),a.Squarespace.Widgets.SliceContentEditor.SocialIcons=a.Base.create("SocialIcons",a.Squarespace.Widgets.SliceContentEditor.Base,[a.Squarespace.Widgets.SliceContentEditor.HasPusherMixin],{},{SLICE_TYPE:d().SOCIAL_ICONS,CSS_PREFIX:"sqs-slice-content-editor-social-icons",ATTRS:{sliceContent:{validator:function(r){return r instanceof a.Squarespace.Models.SliceContent.SocialIcons}},fields:{valueFn:function(){var r=[a.Squarespace.Widgets.SliceContentEditor.Fields.DISPLAY_SOCIAL];return(0,e.rM)()&&r.push(a.Squarespace.Widgets.SliceContentEditor.Fields.DISPLAY_SOCIAL_PUSHER),r}},strings:{value:{title:(0,o.t)("Social Icons",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-models-slice-content-social-icons","squarespace-util","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields","squarespace-widgets-slice-content-editor-has-pusher-mixin"]})},22563:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-sub-heading",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor"),e.Squarespace.Widgets.SliceContentEditor.SubHeading=e.Base.create("SubHeading",e.Squarespace.Widgets.SliceContentEditor.Base,[],{},{SLICE_TYPE:d().SUB_HEADING,CSS_PREFIX:"sqs-slice-content-editor-sub-heading",ATTRS:{sliceContent:{validator:function(a){return a instanceof e.Squarespace.Models.SliceContent.SubHeading}},fields:{value:[e.Squarespace.Widgets.SliceContentEditor.Fields.TEXT]},strings:{value:{title:(0,o.t)("Subtitle",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-models-slice-content-sub-heading","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},899736:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(815211),e=t.n(o),a=t(714487);YUI.add("squarespace-widgets-slice-content-editor-twitter",function(r){r.namespace("Squarespace.Widgets.SliceContentEditor");var s=r.Squarespace.Widgets.SliceContentEditor.Twitter=r.Base.create("Twitter",r.Squarespace.Widgets.SliceContentEditor.Base,[r.Squarespace.Widgets.SliceContentEditor.HasExternalAuth],{bindUI:function(){s.superclass.bindUI.call(this),this._getFieldByName("searchTerm").after("refresh",(function(){this.hideError();var n=this.get("sliceContent"),i=n.get("socialData").get("socialSearch.searchTerm");(!r.Lang.isValue(i)||i==="")&&this.renderError((0,a.t)("Search term has not been defined.",null,{project:"scripts-v6.widgets"})),n.previewSocialSearch((function(u,h){r.Lang.isValue(u)&&this.renderError(u.responseJSON.message)}).bind(this))}).bind(this))},_onFieldDataChange:function(n){var i=n.target.get("name"),u=n.newVal;if(i==="searchTerm"){var h=this.get("sliceContent").get("socialData");h.set("socialSearch.searchTerm",u)}else i==="useSearch"&&this._getFieldByName("searchTerm").set("visible",u),s.superclass._onFieldDataChange.call(this,n)},_getServiceProvider:function(){return e().TWITTER}},{SLICE_TYPE:d().TWITTER,CSS_PREFIX:"sqs-slice-content-editor-twitter",ATTRS:{sliceContent:{validator:function(n){return n instanceof r.Squarespace.Models.SliceContent.Twitter}},fields:{value:[r.Squarespace.Widgets.SliceContentEditor.Fields.TWITTER]},strings:{value:{title:(0,a.t)("Twitter",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-models-slice-content-twitter","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields","squarespace-widgets-slice-content-editor-has-external-auth"]})},338065:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(714487);YUI.add("squarespace-widgets-slice-content-editor-video",function(e){e.namespace("Squarespace.Widgets.SliceContentEditor");var a=e.Squarespace.Widgets.SliceContentEditor.Video=e.Base.create("Video",e.Squarespace.Widgets.SliceContentEditor.Base,[],{destructor:function(){this._thumbnailSyncTimer&&this._thumbnailSyncTimer.cancel()},_onFieldDataChange:function(r){var s=this.get("sliceContent"),n=s.get("contentItem"),i=n.get("structuredContent"),u=r.newVal;switch(r.target.get("name")){case"title":n.set("title",u);break;case"body":n.set("body",u);break;case"overlay":i.set("overlay",u);break;case"oembed":i.set("oembed",u);var h=u.title,g=u.description;e.Lang.isValue(h)&&n.set("title",u.title),e.Lang.isValue(g)&&n.set("body",{html:"<p>"+u.description+"</p>"});break;case"mainImage":break;default:a.superclass._onFieldDataChange.call(this,r)}},_syncFieldsForOembedChange:function(r){var s=r.title,n=r.description,i=r.thumbnailUrl;if(e.Lang.isValue(s)&&this._getFieldByName("title").set("data",s),e.Lang.isValue(n)&&this._getFieldByName("body").set("data",{html:"<p>"+n+"</p>"}),e.Lang.isValue(i)){var u=this._getFieldByName("mainImage"),h=this._getFieldByName("overlay");this._thumbnailSyncTimer&&this._thumbnailSyncTimer.cancel(),this._thumbnailSyncTimer=e.later(1e3,this,function(){var g=this.get("sliceContent").get("contentItem");g.isNew()?g.save(function(){u.saveFromUrl(i,g.get("id")),h.set("data",!0)}):(u.saveFromUrl(i,g.get("id")),h.set("data",!0))})}}},{SLICE_TYPE:d().VIDEO,CSS_PREFIX:"sqs-slice-content-editor-video",ATTRS:{sliceContent:{validator:function(r){return r instanceof e.Squarespace.Models.SliceContent.Video}},fields:{value:[e.Squarespace.Widgets.SliceContentEditor.Fields.VIDEO]},strings:{value:{title:(0,o.t)("Video",null,{project:"scripts-v6.widgets"})}}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-models-slice-content-video","squarespace-widgets-slice-content-editor-base","squarespace-widgets-slice-content-editor-fields"]})},70187:function(c,b,t){"use strict";var l=t(434927),d=t.n(l),o=t(629266),e=t.n(o),a=t(659519);YUI.add("squarespace-widgets-slice-group-editor",function(r){r.namespace("Squarespace.Widgets");var s=r.Squarespace.Widgets.SliceContentEditor.HasPusherMixin,n=r.Squarespace.Widgets.SliceGroupEditor=r.Base.create("SliceGroupEditor",r.Squarespace.Widgets.SSWidget,[r.Squarespace.Damask.Panel.MixinPanel,r.Squarespace.Mixins.Loadable,r.Squarespace.Mixins.SaveChanges,r.Squarespace.Mixins.SlideRefresher,r.Squarespace.Damask.Panel.MixinPanelParent],{initializer:function(){this._renderedEditors={},this.get("loading")||this._bindSlicesForChanges(),this._registerEvent(this.get("loadable").after("load",function(){this.set("slices",this._getSlicesFromSummary()),this._bindSlicesForChanges()},this))},destructor:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._loadingSpinner&&this._loadingSpinner.destroy(!0),r.Object.each(this._renderedEditors,function(i){i.destroy(!0)})},renderUI:function(){var i=this.get("contentBox"),u=this.get("strings.title"),h=this.get("strings.description");i.append('<div class="title">'+u+"</div>"),i.append('<div class="description">'+h+"</div>")},syncUI:function(){n.superclass.syncUI.call(this),this.get("loading")?this._renderLoadingState():this._renderLoadedState()},markAsDirty:function(i){this.get("slicesSaving")||(r.Lang.isValue(i)&&i.set("isDemo",!1),r.Squarespace.Mixins.SaveChanges.prototype.markAsDirty.apply(this,arguments))},_renderLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._loadingTimer=r.later(500,this,function(){this._emptyEditorsAndSpinner(),this._loadingSpinner=new r.Squarespace.Spinner({render:this.get("contentBox"),size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel(),this._emptyEditorsAndSpinner();var i=this.get("sliceTypeOrdering"),u=this.get("sliceAreas");r.Array.each(i,function(h){var g=u.filter({asList:!0},function(p){return p.get("sliceType")===h});g.each(this._renderEditorForSliceArea,this)},this),u.each(function(h){i.indexOf(h.get("sliceType"))===-1&&this._renderEditorForSliceArea(h)},this),this._registerPushers()},_getRenderedPushersArray:function(){var i=[];return r.Object.each(this._renderedEditors,function(u){if(u.hasImpl(s))for(var h=u.getPushers();h.length>0;)i.push(h.shift())}),i},_renderEditorForSliceArea:function(i){var u=this.get("slices"),h=i.get("sliceType"),g=u.getByType(h),p=r.Squarespace.Widgets.SliceContentEditor.Factory.create(h,{render:this.get("contentBox"),sliceContent:g.get("content"),sliceType:h});this._renderedEditors[h]=p},_emptyEditorsAndSpinner:function(){r.Object.each(this._renderedEditors,function(i){i.destroy(!0)}),this._renderedEditors={},this._loadingSpinner&&this._loadingSpinner.destroy(!0)},_getSlicesFromSummary:function(){var i=this.get("slideSummary").get("slices"),u=this.get("sliceAreas").map(function(h){return h.get("sliceType")});return i.filter({asList:!0},function(h){var g=h.get("type");return u.indexOf(g)!==-1})},_bindSlicesForChanges:function(){var i=this.get("slices");this._registerEvent(i.after("*:change",function(u){this._sliceChangeNeedsRefresh(u.changed)&&this._markAsDirtyAndRefreshSliceRendering(u.target)},this)),this._registerEvent(i.each(function(u){this._bindSliceContentForChanges(u.get("content"),u)},this)),this._registerEvent(i.after("add",function(u){this._bindSliceContentForChanges(u.model.get("content"),u.model)},this))},_bindSliceContentForChanges:function(i,u){if(this._registerEvent(i.after("change",function(g){g.changed&&("isNewsletterFormSelected"in g.changed||!this._sliceContentChangeNeedsRefresh(g.changed))||this._markAsDirtyAndRefreshSliceRendering(u)},this)),i instanceof r.Squarespace.Models.SliceContent.Compound){var h=i.get("currentContent");this._bindSliceContentForChanges(h,u),this._registerEvent(i.after("currentContentChange",function(g){g.newVal!==g.prevVal&&this._bindSliceContentForChanges(g.newVal,u)},this))}else this._bindSliceContentReferencesForChanges(i,u),this._bindSliceContentReferencedForm(i,u)},_bindSliceContentReferencedForm:function(i,u){r.Array.each(["form","newsletterForm"],function(h){var g=i.get(h);g&&(this._bindFormReference(g,u),this._registerEvent(i.after("*:change",function(p){r.Lang.isValue(p.newVal)&&p.newVal!==p.prevVal&&(this._markAsDirtyAndRefreshSliceRendering(u,!0),this._bindFormReference(p.newVal,u))},this)))},this)},_bindSliceContentReferencesForChanges:function(i,u){var h=i.get("contentCollection");r.Lang.isValue(h)&&(this._bindContentCollectionReference(h,u),this._registerEvent(i.after("contentCollectionChange",function(f){r.Lang.isValue(f.newVal)&&f.newVal!==f.prevVal&&(this._markAsDirtyAndRefreshSliceRendering(u),this._bindContentCollectionReference(f.newVal,u))},this)));var g=i.get("contentItem");r.Lang.isValue(g)&&(this._bindContentItemReference(g,u),this._registerEvent(i.after("contentItemChange",function(f){r.Lang.isValue(f.newVal)&&f.newVal!==f.prevVal&&(this._markAsDirtyAndRefreshSliceRendering(u),this._bindContentItemReference(f.newVal,u))},this)));var p=i.get("socialData");r.Lang.isValue(p)&&(this._bindTwitterSocialDataReference(p,u),this._registerEvent(i.after("socialDataChange",function(f){r.Lang.isValue(f.newVal)&&f.newVal!==f.prevVal&&(this._markAsDirtyAndRefreshSliceRendering(u),this._bindTwitterSocialDataReference(f.newVal,u))},this))),u.get("type")===d().CUSTOM_FORM&&this._registerEvent(i.after("isNewsletterFormSelectedChange",function(f){if(r.Lang.isValue(f.newVal)&&f.newVal!==f.prevVal){var m=f.currentTarget;m.get("newsletterFormId")?this._markAsDirtyAndRefreshSliceRendering(u,!0):this._markAsDirtyAndRefreshSliceRendering(u,!1)}},this))},_bindFormReference:function(i,u){this._registerEvent(i.after("save",function(){this._refreshSliceRendering(u,!0)},this))},_bindContentCollectionReference:function(i,u){var h=i.items;this._registerEvent(h.after("remove",function(g){g.onReorder?this._refreshSliceRendering(u):this._markAsDirtyAndRefreshSliceRendering(u)},this)),this._registerEvent(h.after("*:change",function(g){var p=g.changed;if(!(r.Object.hasKey(p,"displayIndex")&&r.Object.size(p)===1)){var f=h.some(function(m){return m.get("mediaProcessingState")!==e().READY});f||this._markAsDirtyAndRefreshSliceRendering(u)}},this))},_bindContentItemReference:function(i,u){this._registerEvent(i.after("change",function(){this._markAsDirtyAndRefreshSliceRendering(u)},this));var h=i.get("structuredContent");r.Lang.isValue(h)&&this._registerEvent(h.after("change",function(){this._markAsDirtyAndRefreshSliceRendering(u)},this))},_bindTwitterSocialDataReference:function(i,u){this._registerEvent(i.after("change",function(h){this._markAsDirtyAndRefreshSliceRendering(u)},this))},_sliceChangeNeedsRefresh:function(i){var u=["id","websiteId","createdOn","updatedOn","isDemo"];return r.Object.some(i,function(h,g){return u.indexOf(g)===-1})},_sliceContentChangeNeedsRefresh:function(i){var u=[];return r.Object.some(i,function(h,g){return u.indexOf(g)===-1})},_markAsDirtyAndRefreshSliceRendering:function(i,u){this.markAsDirty(i),this._refreshSliceRendering(i,u)},_refreshSliceRendering:function(i,u,h){if(!(this.get("slicesSaving")&&!h))try{r.Global.fire("sliceUpdate",{slice:i.toJSON(),forceServerRefresh:u,slideType:this.get("slideSummary").get("slide").get("type")})}catch(g){console.error(g.stack)}},_saveChanges:function(){return r.Squarespace.Promises.create(function(i){var u=new r.Parallel;this._set("slicesSaving",!0),this.get("slices").each(function(h){var g=h.get("type");this._renderedEditors[g].hideError(),h.get("isDemo")||h.save(u.add(r.bind(function(p,f){if(r.Lang.isValue(p)){var m=p.responseJSON.message;this._renderedEditors[g].renderError(m)}else h.get("content").get("refreshRenderingAfterSave")&&this._refreshSliceRendering(h,!1,!0)},this)))},this),u.done(r.bind(function(){var h=this.get("slideSummary").get("slide");(0,a.Z)("coverpage_content_update",{slideId:h.get("id"),collectionId:h.get("collectionId")}),this._set("slicesSaving",!1),r.Object.each(this._renderedEditors,function(g){g.resetAfterSave()}),i()},this))},this)},_revertChanges:function(){return r.Squarespace.Promises.create(function(i){this.get("slideSummary").load(r.bind(function(){this._refreshSlideRendering(!1),i()},this))},this)}},{CSS_PREFIX:"sqs-slice-group-editor",ATTRS:{slideSummary:{value:null,validator:r.Squarespace.AttrValidators.isNullOrInstanceOf(r.Squarespace.Models.SlideSummary)},sliceAreas:{valueFn:function(){return new r.Squarespace.Models.SliceAreaList},validator:r.Squarespace.AttrValidators.isInstanceOf(r.Squarespace.Models.SliceAreaList)},slices:{valueFn:"_getSlicesFromSummary",validator:r.Squarespace.AttrValidators.isInstanceOf(r.Squarespace.Models.SliceList)},sliceTypeOrdering:{value:[],validator:r.Squarespace.AttrValidators.isArray},slicesSaving:{value:!1},loadable:{valueFn:function(){return this.get("slideSummary")}}}})},"1.0",{requires:["base","parallel","squarespace-attr-validators","squarespace-damask-panel-mixin-panel","squarespace-damask-panel-mixin-panel-parent","squarespace-mixin-save-changes","squarespace-mixins-loadable","squarespace-mixins-slide-refresher","squarespace-models-slice-area-list","squarespace-models-slice-content-compound","squarespace-models-slice-list","squarespace-models-slide-summary","squarespace-promises","squarespace-spinner","squarespace-ss-widget","squarespace-util","squarespace-widgets-slice-content-editor-factory","squarespace-widgets-slice-content-editor-has-pusher-mixin","widget-parent"]})},338190:function(c,b,t){"use strict";var l=t(714487);YUI.add("squarespace-widgets-slide-layout-chooser-pusher",function(d){d.namespace("Squarespace.Widgets");var o=d.Squarespace.Widgets.SlideLayoutChooserPusher=d.Base.create("SlideLayoutChooserPusher",d.Squarespace.Widgets.SSWidget,[d.Squarespace.Damask.Panel.MixinPusher],{bindUI:function(){o.superclass.bindUI.call(this),this.after("selectedLayoutChange",this.syncUI,this)},syncUI:function(){o.superclass.syncUI.call(this);var e=this.get("contentBox").one(".image-thumbnail img");e.setAttribute("src",this.get("selectedLayout").get("thumbnailUrl"))}},{CSS_PREFIX:"sqs-slide-layout-chooser-pusher",TEMPLATE:'<div class="image-thumbnail"><img/><div class="image-thumbnail-overlay"></div></div><div class="change-layout-button" data-test="change-layout-button">'+(0,l.t)("Change Layout",null,{project:"scripts-v6.widgets"})+"</div>",ATTRS:{selectedLayout:{value:null,validator:d.Squarespace.AttrValidators.isNullOrInstanceOf(d.Squarespace.Models.SlideLayout)}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-damask-panel-mixin-pusher","squarespace-models-slide","squarespace-models-slide-layout","squarespace-ss-widget"]})},95954:function(c,b,t){"use strict";var l=t(222142),d=t.n(l),o=t(860921),e=t.n(o),a=t(947465),r=t.n(a),s=t(714487),n=t(456903),i=t(759352),u=t(459612),h=t.n(u);YUI.add("squarespace-widgets-tourdates-bandsintown",function(g){var p="mkt_source",f=["utm_source","utm_medium","utm_campaign","utm_term","utm_content",p];function m(S){return[S.getFullYear(),d()(S.getMonth()+1,2,"0"),d()(S.getDate(),2,"0")].join("-")}function _(S,y){return S+(S.includes("?")?"&":"?")+g.QueryString.stringify(y)}var v=g.Base.create("bandsInTownTourDatesModelList",g.ModelList,[],{sync:function(S,y,C){if(S!=="read"){console.warn("[TourDatesModelList] Unsupported sync action: "+S);return}C=g.Lang.isFunction(C)?C:e();var O=g.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","identifier"]),A="squarespace-"+O,I,D;this.get("artistId")?(D=(0,i.HK)(this.get("artistId").replace(/"/g,"'")),I=this.get("timeframe")==="dateRange"?m(new Date(this.get("startDate")))+","+m(new Date(this.get("endDate"))):"upcoming"):(D=encodeURIComponent("Beyonce"),I="2023-08-01,2023-08-15");var T="https://rest.bandsintown.com/artists/"+D+"/events?app_id="+A+"&date="+I;n.default.get(T).then(function(B){C(null,B.data)}).catch(function(B){C(B)})}},{ATTRS:{artistId:{value:null},timeframe:{value:null},startDate:{value:null},endDate:{value:null}}});g.namespace("Squarespace.Widgets");var E=g.Squarespace.Widgets.BandsInTownTourDatesList=g.Base.create("bandsInTownTourDatesList",g.Squarespace.SSWidget,[],{initializer:function(){this.onceAfter("loadedChange",this._onLoaded,this),this.get("modelList").load(g.bind(function(){this.set("loaded",!0)},this))},_onLoaded:function(){this._registerEvent(g.on("windowresize",g.bind(function(){this._venues.size()&&this._setFlexDirection()},this))),this._registerEvent(g.on("domready",function(){this.renderUI()},this))},renderUI:function(){E.superclass.renderUI.call(this);var S=this.get("boundingBox");if(!this.get("loaded")){this.spinner||(this.spinner=new g.Squarespace.Spinner({size:30,color:"dark",render:S}));return}var y=this.get("contentBox");this.spinner.destroy(),y.empty().append(this.renderTemplate()),this.appendStructuredData(),S.addClass("loaded"),this.get("artistId")||(S.setAttribute("data-block-state","uninitialized"),S.addClass("sqs-block-is-placeholder")),this._venues=y.all(".sqs-tourdates__venue-name"),this._setFlexDirection(),this.fire("templateRendered")},_setFlexDirection:function(){var S=this.get("contentBox");if(S.getDOMNode()){S.removeClass("sqs-tourdates--venuelocation--column"),S.removeClass("sqs-tourdates--info--column");var y=this._venues.item(0);if(y){var C=y.getX(),O=this._venues.some(function(A){return A.getX()!==C});O&&S.addClass("sqs-tourdates--venuelocation--column"),C=y.getX(),O=this._venues.some(function(A){return A.getX()!==C}),O&&S.addClass("sqs-tourdates--info--column")}}},appendStructuredData:function(){var S=document.createElement("script");S.type="application/ld+json",S.text=this.get("contentBox").one("script").get("innerHTML"),g.one("head").append(S)},getTourDateUrlAdditionalParams:function(){var S=g.config.win.location.search.slice(1),y=g.QueryString.parse(S),C=Object.keys(y).filter(function(O){return f.includes(O)}).reduce(function(O,A){return O[A]=y[A],O},{});return C.hasOwnProperty(p)||(C[p]=g.config.win.location.hostname),C},responseToStructuredData:function(S){var y;!S.lineup||!S.lineup.length?(console.error("[tourdates-bandsintown] event is missing lineup",S),y=(0,s.t)("artist not listed",null,{project:"scripts-v6.widgets"})):y=S.lineup[0];var C=(0,s.t)("{artist} @ {venue} in {city}, {region}",{artist:y,venue:S.venue.name,city:S.venue.city,region:S.venue.country==="United States"?S.venue.region:S.venue.country},{project:"scripts-v6.widgets"}),O={"@type":"MusicGroup",name:y,url:"https://www.bandsintown.com/"+(0,i.HK)(y)},A=S.offers.map(function(I){return{"@type":"Offer",url:I.url,availability:I.status,category:I.type}});return{"@context":"https://schema.org","@type":"MusicEvent",name:C,url:S.url,startDate:S.datetime,location:{"@type":"Place",name:S.venue.name,address:{"@type":"PostalAddress",addressCountry:S.venue.country,addressLocality:S.venue.city,addressRegion:S.venue.region},geo:{"@type":"GeoCoordinates",latitude:S.venue.latitude,longitude:S.venue.longitude}},performer:O,offers:A}},_getHBTemplateContext:function(){var S={loading:!this.get("loaded"),strings:{rsvp:(0,s.t)("RSVP",null,{project:"scripts-v6.widgets"}),noResults:(0,s.t)("There are no upcoming tour dates.",null,{project:"scripts-v6.widgets"}),loading:(0,s.t)("Loading tour dates...",null,{project:"scripts-v6.widgets"}),notifyMe:(0,s.t)("Notify Me",null,{project:"scripts-v6.widgets"})},newWindow:!g.UA.mobile};if(!this.get("loaded"))return S;var y=this.get("modelList").toJSON();if(!y.length)return S;var C=this.getTourDateUrlAdditionalParams();S.tourdates=y.map(function(A){return A.url?g.merge({},A,{url:_(A.url,C),offers:A.offers.map(function(I){return I.url?g.merge({},I,{url:_(I.url,C)}):I})}):A});var O=y.map(this.responseToStructuredData).filter(function(A){return!!A});return S.structuredData=r()(O,null,2),S}},{CSS_PREFIX:"sqs-tourdates-bandsintown-list",HANDLEBARS_TEMPLATE:"tourdates-bandsintown-list.html",ATTRS:{artistId:{value:null},timeframe:{value:null},startDate:{value:null},endDate:{value:null},modelList:{valueFn:function(){return new v(this.getAttrs(["artistId","timeframe","startDate","endDate"]))}},loaded:{value:!1}}});g.Handlebars.registerHelper("tourdates-bit-datetime",function(S,y){var C=S.match(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/)[1],O=new Date(C);if(y.hash.format==="date")return(0,s.p6)(O,{skeleton:"MMMd"});if(y.hash.format==="weekday")return(0,s.p6)(O,{skeleton:"E"});if(y.hash.format==="time")return(0,s.p6)(O,{time:"short"})}),g.Handlebars.registerHelper("tourdates-timezone-abbr",function(S){return h().tz(S).zoneAbbr()}),g.Handlebars.registerHelper("equals-string",function(S,y,C){return g.Handlebars.helpers.if.call(this,function(){return S===y.toString()},C)}),g.Handlebars.registerHelper("is-live",function(S,y){return g.Handlebars.helpers.if.call(this,function(){var C=S.filter(function(O){return O.type==="Watch Live"});return C.length>0},y)}),g.Handlebars.registerHelper("url-encode",function(S){return encodeURIComponent(S)}),g.Handlebars.registerHelper("url-encode-patch",i.HK)},"1.0",{requires:["jsonp","model-list","squarespace-hb-compare","squarespace-promises","squarespace-spinner","squarespace-ss-widget","squarespace-tourdates-bandsintown-list-template"]})},341237:function(){window.YUI_CONFIG={base:"/universal/yui3/3.17.2/",allowRollup:!1,combine:!1,fetchCSS:!1,bootstrap:!1},SQUARESPACE_ROLLUPS=window.SQUARESPACE_ROLLUPS||{}},546338:function(c,b,t){"use strict";var l=t(998402),d=t(714487),o=t(480433),e=t.n(o),a=t(347560),r=t(829447),s=t(103197),n=t(924270),i=t.n(n),u=t(935154),h=t.n(u),g=t(967361),p=t(35045),f=t(543418),m=t(708929),_=t(200887),v=t(419757),E=t(684353),S=t(324959),y=t(423394),C=t(337061),O=t(938077),A=t(635845);YUI.add("squarespace-yui-for-react-first",function(I){I.namespace("Squarespace.Damask"),I.config.win.ImageLoader=new(i());var D={PREVIEW_FRAME_LOAD:"previewFrameLoad"};I.Squarespace.Damask.ReactFirst=I.Base.create("Damask",I.Squarespace.Widgets.SSWidget,[],{initializer:function(){I.Squarespace.Singletons.Location.set("controller",this),_.Z.setRouter(this.get("router")),this.publish(D.PREVIEW_FRAME_LOAD),this._bindInstrumentation(),I.Global.publish("popupOverlay:requestShow"),I.Global.publish("popupOverlay:hide"),I.Global.publish("cookieBanner:force"),I.Global.publish("cookieBanner:unforce"),I.Global.on("siteTitleChange",function(B){var N=this.getSiteTitleAnnotationController();if(N){var P=p.default.getState().siteTitle;N.setSiteTitle(B.newVal,P)}},this),I.Global.on("siteDescriptionChange",function(B){var N=this.getSiteDescriptionAnnotationController();if(N){var P=p.default.getState().siteDescription;N.setSiteDescription(B.newVal,P)}},this),(0,A.m)(),this._bindBrowserDragStart(),this._bindActionListeners(),this._bindOverlayEvents();var T=(0,y.FN)();(0,d.i_)(E.translationLocale,T),I.one("html").addClass((0,v.d)())},_bindFrame:function(){var T=this.get("previewFrame");this._instrumentation.bindFrame(),T.addTarget(this),this._registerEvent({detach:(0,C.gH)(O.l34,(function(B){B?this._setBannerVisibility(!1):this._syncBannerVisibility()}).bind(this))})},_bindInstrumentation:function(){this._instrumentation=new I.Squarespace.Damask.Instrumentation({damask:this,frame:this.get("previewFrame")}),this.get("previewFrame")?this._bindFrame():this.after("previewFrameChange",function(){this._bindFrame()})},destructor:function(){this._resizeEmitter.destroy(),this._actionListener.removeAllActionListeners(),this._actionListener=null,r.Z.unlisten(this.boundSyncBannerVisibility)},renderUI:function(){},bindUI:function(){I.Squarespace.EscManager.attach(),m.Z.isProductionEnvironment()&&this._bindContextMenuClick(),this._bindAltRToRefresh(),this._bindOverlayEvents()},_bindAltRToRefresh:function(){I.one(I.config.doc).on("keyup",function(T){T.altKey&&String.fromCharCode(T.charCode).toLowerCase()==="r"&&T.target.test("body")&&this.requestFrameRefresh()},this)},_bindActionListeners:function(){this._actionListener||(this._actionListener=new(e())(a.Z)),this.boundSyncBannerVisibility=this._syncBannerVisibility.bind(this),r.Z.listen(this.boundSyncBannerVisibility)},_bindOverlayEvents:function(){g.Z.isFeatureEnabled(h().POPUP_OVERLAY)&&(this._actionListener.addActionListener(s.Z.SHOW,function(){I.Global.fire("popupOverlay:requestShow")}),this._actionListener.addActionListener(s.Z.HIDE,function(){I.Global.fire("popupOverlay:hide")}))},_syncBannerVisibility:function(){var T=r.Z.getState();this._setBannerVisibility(T.isBannerVisible)},_setBannerVisibility:function(T){this.get("boundingBox").toggleClass(this.getClassName("banner-visible"),T)},_bindContextMenuClick:function(){I.one(I.config.doc).on("contextmenu",function(T){T.target.ancestor('input, textarea, [contenteditable="true"]',!0)||(T.stopPropagation(),T.preventDefault())})},_bindBrowserDragStart:function(){I.config.doc.addEventListener("dragover",function(T){T.dataTransfer&&T.dataTransfer.types&&T.dataTransfer.types.includes("Files")&&(T.preventDefault(),(0,S.Z)(T.dataTransfer,"none"))},!0)},syncUI:function(){this._updateBodyClass()},_fireEvent:function(T){return function(){this.fire(T)}},getAnnotationControllerByType:function(T){var B=this.getContentModeController();if(B)return B._getAnnotationControllerByType(T)},getSiteTitleAnnotationController:function(){return this.getAnnotationControllerByType(f.JL)},getSiteDescriptionAnnotationController:function(){return this.getAnnotationControllerByType(f.bO)},_updateBodyClass:function(){var T=I.one("body");T.addClass("sqs-locale-"+((0,y.mg)()+"").toLowerCase())},shouldFrameBeExpandedOnLoad:function(){return!I.Squarespace.Help.isTutorialCompleted()},getPanelPath:function(){return this.get("router").getCurrentLocation().pathname.substr(1).split("/")},getHistoryPreviewUrl:function(){var T=this.get("router").parseLocationHash();return T[1]||null},getPreviewFrameCollection:function(){return this.get("contentBridge").get("collection")},requestFrameRefresh:function(){this.get("previewFrame")&&this.get("previewFrame").requestRefresh("yui-for-react-first requeestFrameRefresh")},getFrameUrl:function(){if(this.get("previewFrame"))return this.get("previewFrame").get("url")},setFrameUrl:function(T){this.get("router").replaceFrameUrl(T)},setFrameUrlOrRefresh:function(T){this.get("previewFrame")&&this.get("previewFrame").setUrlOrRequestRefresh(T)},getContentModeController:function(){return this.get("contentBridge").get("controller")},getWebsiteOverlaysManager:function(){var T=this.get("previewFrame");return I.Lang.isValue(T)?T.getWebsiteOverlaysManager():null},getFrameContentWindow:function(){return this.get("previewFrame").get("iframe").get("contentWindow")}},{CSS_PREFIX:"sqs-damask",EVENTS:D,ATTRS:{isSafariPrivate:{valueFn:function(){if(I.UA.safari)try{window.sessionStorage.setItem("safari-test","testing"),window.sessionStorage.removeItem("safari-test")}catch(T){if(T.code===DOMException.QUOTA_EXCEEDED_ERR&&window.sessionStorage.length===0)return!0}return!1}},router:{},basename:{value:"/config"},redirects:{value:[]},contentBridge:{valueFn:function(){return new I.Squarespace.Damask.Preview.ContentBridge},validator:I.Squarespace.AttrValidators.isNullOrInstanceOf(I.Squarespace.Damask.Preview.ContentBridge)},memberAccount:{valueFn:function(){return I.Squarespace.Singletons.AuthenticatedMemberAccount},setter:function(T){if(!I.instanceOf(T,I.Squarespace.Models.MemberAccount)){var B=this.get("siteContext.authenticatedAccount")||{};return new I.Squarespace.Models.MemberAccount(B)}return T}},modalManager:{valueFn:function(){var T=new I.Squarespace.Damask.Modal.Manager({damask:this});return T},validator:I.Squarespace.AttrValidators.isNullOrInstanceOf(I.Squarespace.Damask.Modal.Manager)},previewFrame:{},siteContext:{}}})},"1.0",{requires:["squarespace-common","squarespace-dialog","array-invoke","base","event-custom-base","node","squarespace-attr-validators","squarespace-context","squarespace-damask-instrumentation","squarespace-damask-modal-manager","squarespace-damask-preview-content-bridge","squarespace-damask-preview-frame","squarespace-damask-panel-async-data-panel","squarespace-dom-emitters-resize","squarespace-escmanager","squarespace-help","squarespace-models-content-collection","squarespace-models-member-account","squarespace-navigation-list-utils","squarespace-pinterest","squarespace-singletons-location","squarespace-ss-widget","squarespace-ui-base","squarespace-util","squarespace-widgets-information","widget-parent","squarespace-content-manager-widgets-cover-page","squarespace-async-wrappers-cover-page-editors-for-standalone"]})},995265:function(c){c.exports={"10a7bdac33c0cfacb77dc380bf77e56d":"or {numInstallments} interest-free payments of {amount} with","251529e490cc8f71672b879d8687bc29":"More information","5ed1ad6425ddddce7926ac560a67e7f1":"available for orders over {amount}","6ff73a34da0878e5c2c211f893802d86":"Installments by {afterpayButton}","9f773505bb70d151e1f3504da46a16e8":"available for orders up to {amount}",a0e08d61d25e36151ba681132d6ec330:"Close Popup",dc982e89fd0ff84f89b6c640afb673c5:"Afterpay Information Popup",e57957d5526503eb0180d7fa08abfb43:"{numInstallments} interest-free payments of {amount}"}},281928:function(c){c.exports={"03ed8a0a8208f38d91ea43fcfb2674fa":"Cart","129d605196848a5638c140d2ee728388":"Checkout","177e608763b10b394a59507332431b9e":"Update the missing or invalid information above.","267b971d79b2fd102479491abeece7a1":"Unable to update quantity","379317016f8f9e771879bf7dd63c15b6":"Continue Shopping","4f37e4b63223b240b7d8d53b357fa762":"Close","4f4eb57cee331e4bce9b9b2b9e8787ec":"{price}, total price for {item}","4f7eec6a53703ee7e5f759e1d5e2a932":"{item} alert information","5594067ec2eb7899758e4961f9edc86b":"Unable to update form","5b0c6983e64dfd82f5948970fdb62cd4":"Remove {item}","76034908ec4e681b5486eb2040618f52":"Summary","7f1359b2385766869c9cbec90c29645c":"Add to cart","823e8fd2d89128022ff0fef0e9cb8c0f":"{productName} was added to your cart.","87bb6b3e520f3909e9e90f2386e89960":"Save","896b6eee6556a3723e31ad740e64d38a":"Shopping Cart","8dbc0b4f78369772fd9d831f990d543c":"{name} variant for {item}","8e733ed90c5bf49d5613c720508a60dd":"Please try again.","8ee71d998d748ba00e9e80234ce3a89d":"Subtotal label","90f2d72735116a9f7d4ec2aef34957bb":{one:"One item in cart",other:"{%n} items in cart"},"97a89a6a325cbc309ebe4e597f9fc1f9":"Subtotal price","9f6b08d833a751dcd0af336891007285":"No image",a4cde40c49be65e0781faad94fcbe519:"Quantity, {item}",a8958871ab8577d6667b57be6ef975ed:"{item}",b22005e29f0c7dd253328702493c917e:"Unable to open form",b97b63060e510629f77447c892a821ab:"Edit {item} details",bffdc4040665ab2a6af115da4073829a:"To check out, your order subtotal must be {subtotal} or more.",c43a6b7311c1eb75a85be7748c0cf830:"Customers also bought",ca02eaf2ea5e4b8b5f41df0576414393:{one:"More than one item in cart",other:"More than {%n} items in cart"},cadbd64edd794291e3a686905bacc208:"Unable to add item",d043e6155f48bd75d2b2c48f3b0e9258:"Please check your internet connection.",d16d3227422da60a63f98c59082c1029:"Subtotal",d16fa1f1d19313d233e2e75b13a1ddf3:"{item} image",dd5ce0a01f6e1c36fa9177510819e3d6:"Edit product details",e66ff745b1e97900c957e5a0a9f01ead:"Cancel",ea8d571cae88f8ae3cf5a6e7b007fa5f:"You have nothing in your shopping cart.",f62e405c0a46f7352e63fede4db0d913:"Okay",f8ab967379a4c6bbb037e255f201604a:"Edit Details",fd657139d48231170d72b9031b2a97c7:"Unable to remove item"}},251707:function(c){c.exports={"035d6db48366598d55c20c93e0c44ae4":"Thanks for your feedback","10d06f3cc584f88f516b460f757876b7":"You have already reviewed this purchase","14c484b8f59becfc9289037e340c3a5d":"Continue Shopping","162bc6da1abeb8f06f87b62c96d22bf7":"Something went wrong","2701f1d9dcb3d93702ea50717cce9354":"Try submitting your review again","384b3777b20b19cd61953eaa7e051043":"Review","623c88477a8b3fef5dd67843fa8dbf7e":"Submit","75e6c93da70e9792d0a01dae20499ad7":"Close",b063faac29a0c4f947fdf9586a0a1d2f:"Rating (required)",cf99e3390d505a466a43de7d194687b4:"Please select a star rating",d00161a7f82400bab5d2f6be1c43885a:{one:"Rate your other purchase",other:"Rate your other purchases"},d517f2bae8e7873c9b13cd3d52839410:"Your review request has expired",e0c04bc42f2ab551c09d41345fd25155:"Rate your purchase",e3a6618e2010bfff8207009bc3ef07b4:"There are no products to review",e4398ec9a661fe01116cd3c6bb35a7e2:"characters left",efa2df24f7875c0a02986e53f90d467c:"Describe your experience"}},91118:function(c,b,t){"use strict";t.r(b),t.d(b,{YUI:()=>d}),c=t.hmd(c);var l=t(760636);/**
@license
YUI 3.17.2 (build 9c3c78e)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/typeof d<"u"&&(d._YUI=d);var d=function(){var o=0,e=this,a=arguments,r=a.length,s=function(i,u){return i&&i.hasOwnProperty&&i instanceof u},n=typeof YUI_config<"u"&&YUI_config;if(s(e,d)?(e._init(),d.GlobalConfig&&e.applyConfig(d.GlobalConfig),n&&e.applyConfig(n),r||e._setup()):e=new d,r){for(;o<r;o++)e.applyConfig(a[o]);e._setup()}return e.instanceOf=s,e};(function(){var o,e,a="3.17.2",r=".",s="http://yui.yahooapis.com/",n="yui3-js-enabled",i="yui3-css-stamp",u=function(){},h=Array.prototype.slice,g={"io.xdrReady":1,"io.xdrResponse":1,"SWF.eventHandler":1},p=typeof window<"u",f=p?window:null,m=p?f.document:null,_=m&&m.documentElement,v=_&&_.className,E={},S=new Date().getTime(),y=function(N,P,x,R){N&&N.addEventListener?N.addEventListener(P,x,R):N&&N.attachEvent&&N.attachEvent("on"+P,x)},C=function(N,P,x,R){if(N&&N.removeEventListener)try{N.removeEventListener(P,x,R)}catch{}else N&&N.detachEvent&&N.detachEvent("on"+P,x)},O=function(){d.Env.DOMReady=!0;var N=new Event("domready");window.dispatchEvent(N),p&&C(m,"DOMContentLoaded",O)},A=function(){d.Env.windowLoaded=!0,d.Env.DOMReady=!0;var N=new Event("domready");window.dispatchEvent(N),p&&C(window,"load",A)},I=function(N,P){var x=N.Env._loader,R=["loader-base"],w=d.Env,k=w.mods;return x?(x.ignoreRegistered=!1,x.onEnd=null,x.data=null,x.required=[],x.loadType=null):(x=new N.Loader(N.config),N.Env._loader=x),k&&k.loader&&(R=[].concat(R,d.Env.loaderExtras)),d.Env.core=N.Array.dedupe([].concat(d.Env.core,R)),x},D=function(N,P){for(var x in P)P.hasOwnProperty(x)&&(N[x]=P[x])},T={success:!0};_&&v.indexOf(n)==-1&&(v&&(v+=" "),v+=n,_.className=v),a.indexOf("@")>-1&&(a="3.5.0");var B={};o={stats:{getAll:function(){try{return window.top.YUIStats=window.top.YUIStats||B}catch{return B}},getOne:function(N){return o.stats.getAll()[N]=o.stats.getAll()[N]||{create:0,initializer:0,destructor:0}},getSerializedDataForReporter:function(){var N={},P=o.stats.getAll();return Y.Object.keys(P).forEach(function(x){var R=P[x],w=R.create,k=R.initializer,q=R.destructor;N.hasOwnProperty(w)||(N[w]={}),N[w].hasOwnProperty(k)||(N[w][k]={}),N[w][k].hasOwnProperty(q)||(N[w][k][q]=[]),N[w][k][q].push(x)}),N},markCreate:function(N){var P=o.stats.getOne(N);P.create++},markInitializer:function(N){var P=o.stats.getOne(N);P.initializer++},markDestructor:function(N){var P=o.stats.getOne(N);P.destructor++}},applyConfig:function(N){N=N||u;var P,x,R=this.config,w=R.modules,k=R.groups,q=R.aliases,F=this.Env._loader;for(x in N)N.hasOwnProperty(x)&&(P=N[x],w&&x=="modules"?D(w,P):q&&x=="aliases"?D(q,P):k&&x=="groups"?D(k,P):x=="win"?(R[x]=P&&P.contentWindow||P,R.doc=R[x]?R[x].document:null):x=="_yuid"||(R[x]=P));F&&F._config(N)},_config:function(N){this.applyConfig(N)},_init:function(){var N,P,x=this,R=d.Env,w=x.Env,k;if(x.version=a,!w){if(x.Env={core:["get","features","intl-base","yui-log","yui-later"],loaderExtras:["loader-rollup","loader-yui3"],mods:{},versions:{},base:s,cdn:s+a+"/build/",_idx:0,_used:{},_attached:{},_exported:{},_missed:[],_yidx:0,_uidx:0,_guidp:"y",_loaded:{},_BASE_RE:/(?:\?(?:[^&]*&)*([^&]*))?\b(yui(?:-\w+)?)\/\2(?:-(min|debug))?\.js/,parseBasePath:function(q,F){var z=q.match(F),j,X;return z&&(j=RegExp.leftContext||q.slice(0,q.indexOf(z[0])),X=z[3],z[1]&&(j+="?"+z[1]),j={filter:X,path:j}),j},getBase:R&&R.getBase||function(q){var F=m&&m.getElementsByTagName("script")||[],z=w.cdn,j,X,J,Q;for(X=0,J=F.length;X<J;++X)if(Q=F[X].src,Q&&(j=x.Env.parseBasePath(Q,q),j)){N=j.filter,z=j.path;break}return z}},w=x.Env,w._loaded[a]={},R&&x!==d)w._yidx=++R._yidx,w._guidp=("yui_"+a+"_"+w._yidx+"_"+S).replace(/[^a-z0-9_]+/g,"_");else if(d._YUI){R=d._YUI.Env,w._yidx+=R._yidx,w._uidx+=R._uidx;for(k in R)k in w||(w[k]=R[k]);delete d._YUI}x.id=x.stamp(x),E[x.id]=x}x.constructor=d,x.config=x.config||{bootstrap:!0,cacheUse:!0,debug:!0,doc:m,fetchCSS:!0,throwFail:!0,useBrowserConsole:!0,useNativeES5:!0,win:f,global:Function("return this")()},m&&!m.getElementById(i)?(P=m.createElement("div"),P.innerHTML='<div id="'+i+'" style="position: absolute !important; visibility: hidden !important"></div>',d.Env.cssStampEl=P.firstChild,m.body?m.body.appendChild(d.Env.cssStampEl):_.insertBefore(d.Env.cssStampEl,_.firstChild)):m&&m.getElementById(i)&&!d.Env.cssStampEl&&(d.Env.cssStampEl=m.getElementById(i)),x.config.lang=x.config.lang||"en-US",x.config.base=d.config.base||x.Env.getBase(x.Env._BASE_RE),(!N||!"mindebug".indexOf(N))&&(N="min"),N=N&&"-"+N,x.config.loaderPath=d.config.loaderPath||"loader/loader"+N+".js"},_setup:function(){var N,P=this,x=[],R=d.Env.mods,w=P.config.core||[].concat(d.Env.core);for(N=0;N<w.length;N++)R[w[N]]&&x.push(w[N]);P._attach(["yui-base"]),P._attach(x),P.Loader&&I(P)},applyTo:function(N,P,x){if(!(P in g))return this.log(P+": applyTo not allowed","warn","yui"),null;var R=E[N],w,k,q;if(R){for(w=P.split("."),k=R,q=0;q<w.length;q=q+1)k=k[w[q]],k||this.log("applyTo not found: "+P,"warn","yui");return k&&k.apply(R,x)}return null},add:function(N,P,x,R){R=R||{};var w=d.Env,k={name:N,fn:P,version:x,details:R},q={},F,z,j,X,J=w.versions;w.mods[N]=k,J[x]=J[x]||{},J[x][N]=k;for(X in E)E.hasOwnProperty(X)&&(z=E[X],q[z.id]||(q[z.id]=!0,F=z.Env._loader,F&&(j=F.getModuleInfo(N),(!j||j.temp)&&F.addModule(R,N))));return this},_attach:function(N,P){var x,R,w,k,q,F,z,j=d.Env.mods,X=d.Env.aliases,J=this,Q,ie=d.Env._renderedMods,Ae=J.Env._loader,ce=J.Env._attached,pe=J.Env._exported,ye=N.length,Ae,Je,ke,Fe=[],Ie,ht,me,Ee,Se,lt,Lt;for(x=0;x<ye;x++)if(R=N[x],w=j[R],Fe.push(R),Ae&&Ae.conditions[R])for(Q in Ae.conditions[R])Ae.conditions[R].hasOwnProperty(Q)&&(Je=Ae.conditions[R][Q],ke=Je&&(Je.ua&&J.UA[Je.ua]||Je.test&&Je.test(J)),ke&&Fe.push(Je.name));for(N=Fe,ye=N.length,x=0;x<ye;x++)if(!ce[N[x]]){if(R=N[x],w=j[R],X&&X[R]&&!w){J._attach(X[R]);continue}if(!w)Ee=Ae&&Ae.getModuleInfo(R),Ee&&(w=Ee,P=!0),!P&&R&&R.indexOf("skin-")===-1&&R.indexOf("css")===-1&&(J.Env._missed.push(R),J.Env._missed=J.Array.dedupe(J.Env._missed),J.message("NOT loaded: "+R,"warn","yui"));else{for(ce[R]=!0,Q=0;Q<J.Env._missed.length;Q++)J.Env._missed[Q]===R&&(J.message("Found: "+R+" (was reported as missing earlier)","warn","yui"),J.Env._missed.splice(Q,1));if(Ae&&!Ae._canBeAttached(R))return!0;if(Ae&&ie&&ie[R]&&ie[R].temp){Ae.getRequires(ie[R]),q=[],Ee=Ae.getModuleInfo(R);for(Q in Ee.expanded_map)Ee.expanded_map.hasOwnProperty(Q)&&q.push(Q);J._attach(q)}if(k=w.details,q=k.requires,ht=k.es,F=k.use,z=k.after,k.lang&&(q=q||[],q.unshift("intl")),q){for(me=q.length,Q=0;Q<me;Q++)if(!ce[q[Q]]){if(!J._attach(q))return!1;break}}if(z){for(Q=0;Q<z.length;Q++)if(!ce[z[Q]]){if(!J._attach(z,!0))return!1;break}}if(w.fn){if(Ie=[J,R],ht&&(Lt={},lt={},Ie.push(Lt,lt),q))for(me=q.length,Q=0;Q<me;Q++)Lt[q[Q]]=pe.hasOwnProperty(q[Q])?pe[q[Q]]:J;if(J.config.throwFail)lt=w.fn.apply(ht?void 0:w,Ie);else try{lt=w.fn.apply(ht?void 0:w,Ie)}catch(Pt){return J.error("Attach error: "+R,Pt,R),!1}ht&&(pe[R]=lt,Se=w.details.condition,Se&&Se.when==="instead"&&(pe[Se.trigger]=lt))}if(F){for(Q=0;Q<F.length;Q++)if(!ce[F[Q]]){if(!J._attach(F))return!1;break}}}}return!0},_delayCallback:function(N,P){var x=this,R=["event-base"];return P=x.Lang.isObject(P)?P:{event:P},P.event==="load"&&R.push("event-synthetic"),function(){var w=arguments;x._use(R,function(){x.on(P.event,function(){w[1].delayUntil=P.event,N.apply(x,w)},P.args)})}},use:function(){var N=h.call(arguments,0),P=N[N.length-1],x=this,R=0,w,k=x.Env,q=!0;if(x.Lang.isFunction(P)?(N.pop(),x.config.delayUntil&&(P=x._delayCallback(P,x.config.delayUntil))):P=null,x.Lang.isArray(N[0])&&(N=N[0]),x.config.cacheUse){for(;w=N[R++];)if(!k._attached[w]){q=!1;break}if(q)return N.length,x._notify(P,T,N),x}return x._loading?(x._useQueue=x._useQueue||new x.Queue,x._useQueue.add([N,P])):x._use(N,function(F,z){F._notify(P,z,N)}),x},require:function(){var N=h.call(arguments),P;typeof N[N.length-1]=="function"&&(P=N.pop(),N.push(function(x){var R,w=N.length,k=x.Env._exported,q={};for(R=0;R<w;R++)k.hasOwnProperty(N[R])&&(q[N[R]]=k[N[R]]);P.call(void 0,x,q)})),this.use.apply(this,N)},_notify:function(N,P,x){if(!P.success&&this.config.loadErrorFn)this.config.loadErrorFn.call(this,this,N,P,x);else if(N)if(this.Env._missed&&this.Env._missed.length&&(P.msg="Missing modules: "+this.Env._missed.join(),P.success=!1),this.config.throwFail)N(this,P);else try{N(this,P)}catch(R){this.error("use callback error",R,x)}},_use:function(N,P){this.Array||this._attach(["yui-base"]);var x,R,w,k=this,q=d.Env,F=q.mods,z=k.Env,j=z._used,X=q.aliases,J=q._loaderQueue,Q=N[0],ie=k.Array,ce=k.config,pe=ce.bootstrap,ye=[],Ae,Je=[],ke=!0,Fe=ce.fetchCSS,Ie=function(me,Ee){var Se=0,lt=[],Lt,Pt,Ce,je,Le;if(me.length){if(X){for(Pt=me.length,Se=0;Se<Pt;Se++)X[me[Se]]&&!F[me[Se]]?lt=[].concat(lt,X[me[Se]]):lt.push(me[Se]);me=lt}for(Pt=me.length,Se=0;Se<Pt;Se++)Lt=me[Se],Ee||Je.push(Lt),!j[Lt]&&(Ce=F[Lt],je=null,Le=null,Ce?(j[Lt]=!0,je=Ce.details.requires,Le=Ce.details.use):q._loaded[a][Lt]?j[Lt]=!0:ye.push(Lt),je&&je.length&&Ie(je),Le&&Le.length&&Ie(Le,1))}},ht=function(me){var Ee=me||{success:!0,msg:"not dynamic"},Se,lt,Lt=!0,Pt=Ee.data;k._loading=!1,Pt&&(lt=ye,ye=[],Je=[],Ie(Pt),Se=ye.length,Se&&[].concat(ye).sort().join()==lt.sort().join()&&(Se=!1)),Se&&Pt?(k._loading=!0,k._use(ye,function(){k._attach(Pt)&&k._notify(P,Ee,Pt)})):(Pt&&(Lt=k._attach(Pt)),Lt&&k._notify(P,Ee,N)),k._useQueue&&k._useQueue.size()&&!k._loading&&k._use.apply(k,k._useQueue.next())};if(Q==="*"){N=[];for(Ae in F)F.hasOwnProperty(Ae)&&N.push(Ae);return ke=k._attach(N),ke&&ht(),k}return(F.loader||F["loader-base"])&&!k.Loader&&k._attach(["loader"+(F.loader?"":"-base")]),pe&&k.Loader&&N.length&&(R=I(k),R.require(N),R.ignoreRegistered=!0,R._boot=!0,R.calculate(null,Fe?null:"js"),N=R.sorted,R._boot=!1),Ie(N),x=ye.length,x&&(ye=ie.dedupe(ye),x=ye.length),pe&&x&&k.Loader?(k._loading=!0,R=I(k),R.onEnd=ht,R.context=k,R.data=N,R.ignoreRegistered=!1,R.require(ye),R.insert(null,Fe?null:"js")):pe&&x&&k.Get&&!z.bootstrapped?(k._loading=!0,w=function(){k._loading=!1,J.running=!1,z.bootstrapped=!0,q._bootstrapping=!1,k._attach(["loader"])&&k._use(N,P)},q._bootstrapping?J.add(w):(q._bootstrapping=!0,k.Get.script(ce.base+ce.loaderPath,{onEnd:w}))):(ke=k._attach(N),ke&&ht()),k},namespace:function(){for(var N=arguments,P,x=0,R,w,k;x<N.length;x++)if(P=this,k=N[x],k.indexOf(r)>-1)for(w=k.split(r),R=w[0]=="YAHOO"?1:0;R<w.length;R++)P[w[R]]=P[w[R]]||{},P=P[w[R]];else P[k]=P[k]||{},P=P[k];return P},log:u,message:u,dump:function(N){return""+N},error:function(N,P,x){var R=this,w;if(R.config&&R.config.errorFn&&(w=R.config.errorFn.apply(R,arguments)),w)R.message(N,"error",""+x);else throw P||new Error(N);return R},guid:function(N){var P=this.Env._guidp+"_"+ ++this.Env._uidx;return N?N+P:P},stamp:function(N,P){var x;if(!N)return N;if(N.uniqueID&&N.nodeType&&N.nodeType!==9?x=N.uniqueID:x=typeof N=="string"?N:N._yuid,!x&&(x=this.guid(),!P))try{N._yuid=x}catch{x=null}return x},destroy:function(){var N=this;N.Event&&N.Event._unload(),delete E[N.id],delete N.Env,delete N.config}},d.prototype=o;for(e in o)o.hasOwnProperty(e)&&(d[e]=o[e]);d.applyConfig=function(N){N&&(d.GlobalConfig&&this.prototype.applyConfig.call(this,d.GlobalConfig),this.prototype.applyConfig.call(this,N),d.GlobalConfig=this.config)},d._init(),p?(y(m,"DOMContentLoaded",O),y(window,"load",A)):(O(),A()),d.Env.add=y,d.Env.remove=C,typeof exports=="object"&&(exports.YUI=c.exports=d,d.setLoadHook=function(N){d._getLoadHook=N},d._getLoadHook=null),d.Env[a]={}})(),d.add("yui-base",function(o,e){var a=o.Lang||(o.Lang={}),r=String.prototype,s=Object.prototype.toString,n={undefined:"undefined",number:"number",boolean:"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"},i=/\{\s*([^|}]+?)\s*(?:\|([^}]*))?\s*\}/g,u=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF`,h="[	-\r \xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+",g=new RegExp("^"+h),p=new RegExp(h+"$"),f=new RegExp(g.source+"|"+p.source,"g"),m=/\{\s*\[(?:native code|function)\]\s*\}/i;a._isNative=function(P){return!!(o.config.useNativeES5&&P&&m.test(P))},a.isArray=a._isNative(Array.isArray)?Array.isArray:function(P){return a.type(P)==="array"},a.isBoolean=function(P){return typeof P=="boolean"},a.isDate=function(P){return a.type(P)==="date"&&P.toString()!=="Invalid Date"&&!isNaN(P)},a.isFunction=function(P){return a.type(P)==="function"},a.isNull=function(P){return P===null},a.isNumber=function(P){return typeof P=="number"&&isFinite(P)},a.isObject=function(P,x){var R=typeof P;return P&&(R==="object"||!x&&(R==="function"||a.isFunction(P)))||!1},a.isRegExp=function(P){return a.type(P)==="regexp"},a.isString=function(P){return typeof P=="string"},a.isUndefined=function(P){return typeof P>"u"},a.isValue=function(P){var x=a.type(P);switch(x){case"number":return isFinite(P);case"null":case"undefined":return!1;default:return!!x}},a.now=Date.now||function(){return new Date().getTime()},a.sub=function(P,x){return P.replace?P.replace(i,function(R,w){return a.isUndefined(x[w])?R:x[w]}):P},a.trim=a._isNative(r.trim)&&!u.trim()?function(P){return P&&P.trim?P.trim():P}:function(P){try{return P.replace(f,"")}catch{return P}},a.trimLeft=a._isNative(r.trimLeft)&&!u.trimLeft()?function(P){return P.trimLeft()}:function(P){return P.replace(g,"")},a.trimRight=a._isNative(r.trimRight)&&!u.trimRight()?function(P){return P.trimRight()}:function(P){return P.replace(p,"")},a.type=function(P){return n[typeof P]||n[s.call(P)]||(P?"object":"null")};var C=o.Lang,_=Array.prototype,O=Object.prototype.hasOwnProperty;function v(P,x,R){var w,k;if(x||(x=0),R||v.test(P))try{return _.slice.call(P,x)}catch{for(k=[],w=P.length;x<w;++x)k.push(P[x]);return k}return[P]}o.Array=v,v.dedupe=C._isNative(Object.create)?function(P){var x=Object.create(null),R=[],w,k,q;for(w=0,q=P.length;w<q;++w)k=P[w],x[k]||(x[k]=1,R.push(k));return R}:function(P){var x={},R=[],w,k,q;for(w=0,q=P.length;w<q;++w)k=P[w],O.call(x,k)||(x[k]=1,R.push(k));return R},v.each=v.forEach=C._isNative(_.forEach)?function(P,x,R){return _.forEach.call(P||[],x,R||o),o}:function(P,x,R){for(var w=0,k=P&&P.length||0;w<k;++w)w in P&&x.call(R||o,P[w],w,P);return o},v.hash=function(P,x){var R={},w=x&&x.length||0,k,q;for(k=0,q=P.length;k<q;++k)k in P&&(R[P[k]]=w>k&&k in x?x[k]:!0);return R},v.indexOf=C._isNative(_.indexOf)?function(P,x,R){return _.indexOf.call(P,x,R)}:function(P,x,R){var w=P.length;for(R=+R||0,R=(R>0||-1)*Math.floor(Math.abs(R)),R<0&&(R+=w,R<0&&(R=0));R<w;++R)if(R in P&&P[R]===x)return R;return-1},v.numericSort=function(P,x){return P-x},v.some=C._isNative(_.some)?function(P,x,R){return _.some.call(P,x,R)}:function(P,x,R){for(var w=0,k=P.length;w<k;++w)if(w in P&&x.call(R,P[w],w,P))return!0;return!1},v.test=function(P){var x=0;if(C.isArray(P))x=1;else if(C.isObject(P))try{"length"in P&&!P.tagName&&!(P.scrollTo&&P.document)&&!P.apply&&(x=2)}catch{}return x};function E(){this._init(),this.add.apply(this,arguments)}E.prototype={_init:function(){this._q=[]},next:function(){return this._q.shift()},last:function(){return this._q.pop()},add:function(){return this._q.push.apply(this._q,arguments),this},size:function(){return this._q.length}},o.Queue=E,d.Env._loaderQueue=d.Env._loaderQueue||new E;var S="__",O=Object.prototype.hasOwnProperty,y=o.Lang.isObject;o.cached=function(P,x,R){return x||(x={}),function(w){var k=arguments.length>1?Array.prototype.join.call(arguments,S):String(w);return(!(k in x)||R&&x[k]==R)&&(x[k]=P.apply(P,arguments)),x[k]}},o.getLocation=function(){var P=o.config.win;return P&&P.location},o.merge=function(){for(var P=0,x=arguments.length,R={},w,k;P<x;++P){k=arguments[P];for(w in k)O.call(k,w)&&(R[w]=k[w])}return R},o.mix=function(P,x,R,w,k,q){var F,z,j,X,J,Q,ie;if(!P||!x)return P||o;if(k){if(k===2&&o.mix(P.prototype,x.prototype,R,w,0,q),j=k===1||k===3?x.prototype:x,ie=k===1||k===4?P.prototype:P,!j||!ie)return P}else j=x,ie=P;if(F=R&&!q,w)for(X=0,Q=w.length;X<Q;++X)J=w[X],O.call(j,J)&&(z=F?!1:J in ie,q&&z&&y(ie[J],!0)&&y(j[J],!0)?o.mix(ie[J],j[J],R,null,0,q):(R||!z)&&(ie[J]=j[J]));else{for(J in j)O.call(j,J)&&(z=F?!1:J in ie,q&&z&&y(ie[J],!0)&&y(j[J],!0)?o.mix(ie[J],j[J],R,null,0,q):(R||!z)&&(ie[J]=j[J]));o.Object._hasEnumBug&&o.mix(ie,j,R,o.Object._forceEnum,k,q)}return P};var C=o.Lang,O=Object.prototype.hasOwnProperty,A,I=o.Object=C._isNative(Object.create)?function(P){return Object.create(P)}:function(){function P(){}return function(x){return P.prototype=x,new P}}(),D=I._forceEnum=["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"],T=I._hasEnumBug=!{valueOf:0}.propertyIsEnumerable("valueOf"),B=I._hasProtoEnumBug=(function(){}).propertyIsEnumerable("prototype"),N=I.owns=function(P,x){return!!P&&O.call(P,x)};I.hasKey=N,I.keys=C._isNative(Object.keys)&&!B?Object.keys:function(P){if(!C.isObject(P))throw new TypeError("Object.keys called on a non-object");var x=[],R,w,k;if(B&&typeof P=="function")for(w in P)N(P,w)&&w!=="prototype"&&x.push(w);else for(w in P)N(P,w)&&x.push(w);if(T)for(R=0,k=D.length;R<k;++R)w=D[R],N(P,w)&&x.push(w);return x},I.values=function(P){for(var x=I.keys(P),R=0,w=x.length,k=[];R<w;++R)k.push(P[x[R]]);return k},I.size=function(P){try{return I.keys(P).length}catch{return 0}},I.hasValue=function(P,x){return o.Array.indexOf(I.values(P),x)>-1},I.each=function(P,x,R,w){var k;for(k in P)(w||N(P,k))&&x.call(R||o,P[k],k,P);return o},I.some=function(P,x,R,w){var k;for(k in P)if((w||N(P,k))&&x.call(R||o,P[k],k,P))return!0;return!1},I.getValue=function(P,x){if(!C.isObject(P))return A;var R,w=o.Array(x),k=w.length;for(R=0;P!==A&&R<k;R++)P=P[w[R]];return P},I.setValue=function(P,x,R){var w,k=o.Array(x),q=k.length-1,F=P;if(q>=0){for(w=0;F!==A&&w<q;w++)F=F[k[w]];if(F!==A)F[k[w]]=R;else return A}return P},I.isEmpty=function(P){return!I.keys(Object(P)).length},d.Env.parseUA=function(P){var x=function(X){var J=0;return parseFloat(X.replace(/\./g,function(){return J++===1?"":"."}))},R=o.config.win,w=R&&R.navigator,k={ie:0,opera:0,gecko:0,webkit:0,safari:0,chrome:0,mobile:null,air:0,phantomjs:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,silk:0,ubuntu:0,accel:!1,webos:0,caja:w&&w.cajaVersion,secure:!1,os:null,nodejs:0,winjs:!!(typeof Windows<"u"&&Windows.System),touchEnabled:!1},q=P||w&&w.userAgent,F=R&&R.location,z=F&&F.href,j;return k.userAgent=q,k.secure=z&&z.toLowerCase().indexOf("https")===0,q&&(/windows|win32/i.test(q)?k.os="windows":/macintosh|mac_powerpc/i.test(q)?k.os="macintosh":/android/i.test(q)?k.os="android":/symbos/i.test(q)?k.os="symbos":/linux/i.test(q)?k.os="linux":/rhino/i.test(q)&&(k.os="rhino"),/KHTML/.test(q)&&(k.webkit=1),/IEMobile|XBLWP7/.test(q)&&(k.mobile="windows"),/Fennec/.test(q)&&(k.mobile="gecko"),j=q.match(/AppleWebKit\/([^\s]*)/),j&&j[1]&&(k.webkit=x(j[1]),k.safari=k.webkit,/PhantomJS/.test(q)&&(j=q.match(/PhantomJS\/([^\s]*)/),j&&j[1]&&(k.phantomjs=x(j[1]))),/ Mobile\//.test(q)||/iPad|iPod|iPhone/.test(q)?(k.mobile="Apple",j=q.match(/OS ([^\s]*)/),j&&j[1]&&(j=x(j[1].replace("_","."))),k.ios=j,k.os="ios",k.ipad=k.ipod=k.iphone=0,j=q.match(/iPad|iPod|iPhone/),j&&j[0]&&(k[j[0].toLowerCase()]=k.ios)):(j=q.match(/NokiaN[^\/]*|webOS\/\d\.\d/),j&&(k.mobile=j[0]),/webOS/.test(q)&&(k.mobile="WebOS",j=q.match(/webOS\/([^\s]*);/),j&&j[1]&&(k.webos=x(j[1]))),/ Android/.test(q)&&(/Mobile/.test(q)&&(k.mobile="Android"),j=q.match(/Android ([^\s]*);/),j&&j[1]&&(k.android=x(j[1]))),/Silk/.test(q)&&(j=q.match(/Silk\/([^\s]*)/),j&&j[1]&&(k.silk=x(j[1])),k.android||(k.android=2.34,k.os="Android"),/Accelerated=true/.test(q)&&(k.accel=!0))),j=q.match(/OPR\/(\d+\.\d+)/),j&&j[1]?k.opera=x(j[1]):(j=q.match(/(Chrome|CrMo|CriOS)\/([^\s]*)/),j&&j[1]&&j[2]?(k.chrome=x(j[2]),k.safari=0,j[1]==="CrMo"&&(k.mobile="chrome")):(j=q.match(/AdobeAIR\/([^\s]*)/),j&&(k.air=j[0])))),j=q.match(/Ubuntu\ (\d+\.\d+)/),j&&j[1]&&(k.os="linux",k.ubuntu=x(j[1]),j=q.match(/\ WebKit\/([^\s]*)/),j&&j[1]&&(k.webkit=x(j[1])),j=q.match(/\ Chromium\/([^\s]*)/),j&&j[1]&&(k.chrome=x(j[1])),/ Mobile$/.test(q)&&(k.mobile="Ubuntu")),k.webkit||(/Opera/.test(q)?(j=q.match(/Opera[\s\/]([^\s]*)/),j&&j[1]&&(k.opera=x(j[1])),j=q.match(/Version\/([^\s]*)/),j&&j[1]&&(k.opera=x(j[1])),/Opera Mobi/.test(q)&&(k.mobile="opera",j=q.replace("Opera Mobi","").match(/Opera ([^\s]*)/),j&&j[1]&&(k.opera=x(j[1]))),j=q.match(/Opera Mini[^;]*/),j&&(k.mobile=j[0])):(j=q.match(/MSIE ([^;]*)|Trident.*; rv:([0-9.]+)/),j&&(j[1]||j[2])?k.ie=x(j[1]||j[2]):(j=q.match(/Gecko\/([^\s]*)/),j&&(k.gecko=1,j=q.match(/rv:([^\s\)]*)/),j&&j[1]&&(k.gecko=x(j[1]),/Mobile|Tablet/.test(q)&&(k.mobile="ffos"))))))),R&&w&&!(k.chrome&&k.chrome<6)&&(k.touchEnabled="ontouchstart"in R||"msMaxTouchPoints"in w&&w.msMaxTouchPoints>0),P||(typeof l=="object"&&l.versions&&l.versions.node&&(k.os=l.platform,k.nodejs=x(l.versions.node)),d.Env.UA=k),k},o.UA=d.Env.UA||d.Env.parseUA(),o.UA.compareVersions=function(P,x){var R,w,k,q,F,z;if(P===x)return 0;for(w=(P+"").split("."),q=(x+"").split("."),F=0,z=Math.max(w.length,q.length);F<z;++F){if(R=parseInt(w[F],10),k=parseInt(q[F],10),isNaN(R)&&(R=0),isNaN(k)&&(k=0),R<k)return-1;if(R>k)return 1}return 0},d.Env.aliases={anim:["anim-base","anim-color","anim-curve","anim-easing","anim-node-plugin","anim-scroll","anim-xy"],"anim-shape-transform":["anim-shape"],app:["app-base","app-content","app-transitions","lazy-model-list","model","model-list","model-sync-rest","model-sync-local","router","view","view-node-map"],attribute:["attribute-base","attribute-complex"],"attribute-events":["attribute-observable"],autocomplete:["autocomplete-base","autocomplete-sources","autocomplete-list","autocomplete-plugin"],axes:["axis-numeric","axis-category","axis-time","axis-stacked"],"axes-base":["axis-numeric-base","axis-category-base","axis-time-base","axis-stacked-base"],base:["base-base","base-pluginhost","base-build"],cache:["cache-base","cache-offline","cache-plugin"],charts:["charts-base"],collection:["array-extras","arraylist","arraylist-add","arraylist-filter","array-invoke"],color:["color-base","color-hsl","color-harmony"],controller:["router"],dataschema:["dataschema-base","dataschema-json","dataschema-xml","dataschema-array","dataschema-text"],datasource:["datasource-local","datasource-io","datasource-get","datasource-function","datasource-cache","datasource-jsonschema","datasource-xmlschema","datasource-arrayschema","datasource-textschema","datasource-polling"],datatable:["datatable-core","datatable-table","datatable-head","datatable-body","datatable-base","datatable-column-widths","datatable-message","datatable-mutable","datatable-sort","datatable-datasource"],datatype:["datatype-date","datatype-number","datatype-xml"],"datatype-date":["datatype-date-parse","datatype-date-format","datatype-date-math"],"datatype-number":["datatype-number-parse","datatype-number-format"],"datatype-xml":["datatype-xml-parse","datatype-xml-format"],dd:["dd-ddm-base","dd-ddm","dd-ddm-drop","dd-drag","dd-proxy","dd-constrain","dd-drop","dd-scroll","dd-delegate"],dom:["dom-base","dom-screen","dom-style","selector-native","selector"],editor:["frame","editor-selection","exec-command","editor-base","editor-para","editor-br","editor-bidi","editor-tab","createlink-base"],event:["event-base","event-delegate","event-synthetic","event-mousewheel","event-mouseenter","event-key","event-focus","event-resize","event-hover","event-outside","event-touch","event-move","event-flick","event-valuechange","event-tap"],"event-custom":["event-custom-base","event-custom-complex"],"event-gestures":["event-flick","event-move"],handlebars:["handlebars-compiler"],highlight:["highlight-base","highlight-accentfold"],history:["history-base","history-hash","history-html5"],io:["io-base","io-xdr","io-form","io-upload-iframe","io-queue"],json:["json-parse","json-stringify"],loader:["loader-base","loader-rollup","loader-yui3"],node:["node-base","node-event-delegate","node-pluginhost","node-screen","node-style"],pluginhost:["pluginhost-base","pluginhost-config"],querystring:["querystring-parse","querystring-stringify"],recordset:["recordset-base","recordset-sort","recordset-filter","recordset-indexer"],resize:["resize-base","resize-proxy","resize-constrain"],slider:["slider-base","slider-value-range","clickable-rail","range-slider"],template:["template-base","template-micro"],text:["text-accentfold","text-wordbreak"],widget:["widget-base","widget-htmlparser","widget-skin","widget-uievents"]}},"3.17.2",{use:["get","features","intl-base","yui-log","yui-later"]}),d.add("get",function(o,e){var a=o.Lang,r,s,n;o.Get=s={cssOptions:{attributes:{rel:"stylesheet"},doc:o.config.linkDoc||o.config.doc,pollInterval:50},jsOptions:{autopurge:!0,doc:o.config.scriptDoc||o.config.doc},options:{attributes:{charset:"utf-8"},purgethreshold:20},REGEX_CSS:/\.css(?:[?;].*)?$/i,REGEX_JS:/\.js(?:[?;].*)?$/i,_insertCache:{},_pending:null,_purgeNodes:[],_queue:[],abort:function(i){var u,h,g,p,f;if(!i.abort){if(h=i,f=this._pending,i=null,f&&f.transaction.id===h)i=f.transaction,this._pending=null;else for(u=0,p=this._queue.length;u<p;++u)if(g=this._queue[u].transaction,g.id===h){i=g,this._queue.splice(u,1);break}}i&&i.abort()},css:function(i,u,h){return this._load("css",i,u,h)},js:function(i,u,h){return this._load("js",i,u,h)},load:function(i,u,h){return this._load(null,i,u,h)},_autoPurge:function(i){i&&this._purgeNodes.length>=i&&this._purge(this._purgeNodes)},_getEnv:function(){var i=o.config.doc,u=o.UA;return this._env={async:i&&i.createElement("script").async===!0||u.ie>=10,cssFail:u.gecko>=9||u.compareVersions(u.webkit,535.24)>=0,cssLoad:(!u.gecko&&!u.webkit||u.gecko>=9||u.compareVersions(u.webkit,535.24)>=0)&&!(u.chrome&&u.chrome<=18),preservesScriptOrder:!!(u.gecko||u.opera||u.ie&&u.ie>=10)}},_getTransaction:function(i,u){var h=[],g,p,f,m;for(a.isArray(i)||(i=[i]),u=o.merge(this.options,u),u.attributes=o.merge(this.options.attributes,u.attributes),g=0,p=i.length;g<p;++g){if(m=i[g],f={attributes:{}},typeof m=="string")f.url=m;else if(m.url)o.mix(f,m,!1,null,0,!0),m=m.url;else continue;o.mix(f,u,!1,null,0,!0),f.type||(this.REGEX_CSS.test(m)?f.type="css":(this.REGEX_JS.test(m),f.type="js")),o.mix(f,f.type==="js"?this.jsOptions:this.cssOptions,!1,null,0,!0),f.attributes.id||(f.attributes.id=o.guid()),f.win?f.doc=f.win.document:f.win=f.doc.defaultView||f.doc.parentWindow,f.charset&&(f.attributes.charset=f.charset),h.push(f)}return new n(h,u)},_load:function(i,u,h,g){var p;return typeof h=="function"&&(g=h,h={}),h||(h={}),h.type=i,h._onFinish=s._onTransactionFinish,this._env||this._getEnv(),p=this._getTransaction(u,h),this._queue.push({callback:g,transaction:p}),this._next(),p},_onTransactionFinish:function(){s._pending=null,s._next()},_next:function(){var i;this._pending||(i=this._queue.shift(),i&&(this._pending=i,i.transaction.execute(i.callback)))},_purge:function(i){for(var u=this._purgeNodes,h=i!==u,g,p;p=i.pop();)p._yuiget_finished&&(p.parentNode&&p.parentNode.removeChild(p),h&&(g=o.Array.indexOf(u,p),g>-1&&u.splice(g,1)))}},s.script=s.js,s.Transaction=n=function(i,u){var h=this;h.id=n._lastId+=1,h.data=u.data,h.errors=[],h.nodes=[],h.options=u,h.requests=i,h._callbacks=[],h._queue=[],h._reqsWaiting=0,h.tId=h.id,h.win=u.win||o.config.win},n._lastId=0,n.prototype={_state:"new",abort:function(i){this._pending=null,this._pendingCSS=null,this._pollTimer=clearTimeout(this._pollTimer),this._queue=[],this._reqsWaiting=0,this.errors.push({error:i||"Aborted"}),this._finish()},execute:function(i){var u=this,h=u.requests,g=u._state,p,f,m,_;if(g==="done"){i&&i(u.errors.length?u.errors:null,u);return}else if(i&&u._callbacks.push(i),g==="executing")return;for(u._state="executing",u._queue=m=[],u.options.timeout&&(u._timeout=setTimeout(function(){u.abort("Timeout")},u.options.timeout)),u._reqsWaiting=h.length,p=0,f=h.length;p<f;++p)_=h[p],_.async||_.type==="css"?u._insert(_):m.push(_);u._next()},purge:function(){s._purge(this.nodes)},_createNode:function(i,u,h){var g=h.createElement(i),p,f;r||(f=h.createElement("div"),f.setAttribute("class","a"),r=f.className==="a"?{}:{for:"htmlFor",class:"className"});for(p in u)u.hasOwnProperty(p)&&g.setAttribute(r[p]||p,u[p]);return g},_finish:function(){var i=this.errors.length?this.errors:null,u=this.options,h=u.context||this,g,p,f;if(this._state!=="done"){for(this._state="done",p=0,f=this._callbacks.length;p<f;++p)this._callbacks[p].call(h,i,this);g=this._getEventData(),i?(u.onTimeout&&i[i.length-1].error==="Timeout"&&u.onTimeout.call(h,g),u.onFailure&&u.onFailure.call(h,g)):u.onSuccess&&u.onSuccess.call(h,g),u.onEnd&&u.onEnd.call(h,g),u._onFinish&&u._onFinish()}},_getEventData:function(i){return i?o.merge(this,{abort:this.abort,purge:this.purge,request:i,url:i.url,win:i.win}):this},_getInsertBefore:function(i){var u=i.doc,h=i.insertBefore,g,p;return h?typeof h=="string"?u.getElementById(h):h:(g=s._insertCache,p=o.stamp(u),(h=g[p])?h:(h=u.getElementsByTagName("base")[0])?g[p]=h:(h=u.head||u.getElementsByTagName("head")[0],h?(h.appendChild(u.createTextNode("")),g[p]=h.lastChild):g[p]=u.getElementsByTagName("script")[0]))},_insert:function(i){var u=s._env,h=this._getInsertBefore(i),g=i.type==="js",p=i.node,f=this,m=o.UA,_,v;p||(g?v="script":!u.cssLoad&&m.gecko?v="style":v="link",p=i.node=this._createNode(v,i.attributes,i.doc));function E(){f._progress("Failed to load "+i.url,i)}function S(){_&&clearTimeout(_),f._progress(null,i)}g?(p.setAttribute("src",i.url),i.async?p.async=!0:(u.async&&(p.async=!1),u.preservesScriptOrder||(this._pending=i))):!u.cssLoad&&m.gecko?p.innerHTML=(i.attributes.charset?'@charset "'+i.attributes.charset+'";':"")+'@import "'+i.url+'";':p.setAttribute("href",i.url),g&&m.ie&&(m.ie<9||document.documentMode&&document.documentMode<9)?p.onreadystatechange=function(){/loaded|complete/.test(p.readyState)&&(p.onreadystatechange=null,S())}:!g&&!u.cssLoad?this._poll(i):(m.ie>=10?(p.onerror=function(){setTimeout(E,0)},p.onload=function(){setTimeout(S,0)}):(p.onerror=E,p.onload=S),!u.cssFail&&!g&&(_=setTimeout(E,i.timeout||3e3))),this.nodes.push(p),h.parentNode.insertBefore(p,h)},_next:function(){this._pending||(this._queue.length?this._insert(this._queue.shift()):this._reqsWaiting||this._finish())},_poll:function(i){var u=this,h=u._pendingCSS,g=o.UA.webkit,p,f,m,_,v,E;if(!(i&&(h||(h=u._pendingCSS=[]),h.push(i),u._pollTimer))){for(u._pollTimer=null,p=0;p<h.length;++p)if(v=h[p],g){for(E=v.doc.styleSheets,m=E.length,_=v.node.href;--m>=0;)if(E[m].href===_){h.splice(p,1),p-=1,u._progress(null,v);break}}else try{f=!!v.node.sheet.cssRules,h.splice(p,1),p-=1,u._progress(null,v)}catch{}h.length&&(u._pollTimer=setTimeout(function(){u._poll.call(u)},u.options.pollInterval))}},_progress:function(i,u){var h=this.options;i&&(u.error=i,this.errors.push({error:i,request:u})),u.node._yuiget_finished=u.finished=!0,h.onProgress&&h.onProgress.call(h.context||this,this._getEventData(u)),u.autopurge&&(s._autoPurge(this.options.purgethreshold),s._purgeNodes.push(u.node)),this._pending===u&&(this._pending=null),this._reqsWaiting-=1,this._next()}}},"3.17.2",{requires:["yui-base"]}),d.add("features",function(o,e){var a={};o.mix(o.namespace("Features"),{tests:a,add:function(s,n,i){a[s]=a[s]||{},a[s][n]=i},all:function(s,n){var i=a[s],u=[];return i&&o.Object.each(i,function(h,g){u.push(g+":"+(o.Features.test(s,g,n)?1:0))}),u.length?u.join(";"):""},test:function(s,n,i){i=i||[];var u,h,g,p=a[s],f=p&&p[n];return f&&(u=f.result,o.Lang.isUndefined(u)&&(h=f.ua,h&&(u=o.UA[h]),g=f.test,g&&(!h||u)&&(u=g.apply(o,i)),f.result=u)),u}});var r=o.Features.add;r("load","0",{name:"app-transitions-native",test:function(s){var n=s.config.doc,i=n?n.documentElement:null;return i&&i.style?"MozTransition"in i.style||"WebkitTransition"in i.style||"transition"in i.style:!1},trigger:"app-transitions"}),r("load","1",{name:"autocomplete-list-keys",test:function(s){return!(s.UA.ios||s.UA.android)},trigger:"autocomplete-list"}),r("load","2",{name:"dd-gestures",trigger:"dd-drag",ua:"touchEnabled"}),r("load","3",{name:"dom-style-ie",test:function(s){var n=s.Features.test,i=s.Features.add,u=s.config.win,h=s.config.doc,g="documentElement",p=!1;return i("style","computedStyle",{test:function(){return u&&"getComputedStyle"in u}}),i("style","opacity",{test:function(){return h&&"opacity"in h[g].style}}),p=!n("style","opacity")&&!n("style","computedStyle"),p},trigger:"dom-style"}),r("load","4",{name:"editor-para-ie",trigger:"editor-para",ua:"ie",when:"instead"}),r("load","5",{name:"event-base-ie",test:function(s){var n=s.config.doc&&s.config.doc.implementation;return n&&!n.hasFeature("Events","2.0")},trigger:"node-base"}),r("load","6",{name:"graphics-canvas",test:function(s){var n=s.config.doc,i=s.config.defaultGraphicEngine&&s.config.defaultGraphicEngine=="canvas",u=n&&n.createElement("canvas"),h=n&&n.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");return(!h||i)&&u&&u.getContext&&u.getContext("2d")},trigger:"graphics"}),r("load","7",{name:"graphics-canvas-default",test:function(s){var n=s.config.doc,i=s.config.defaultGraphicEngine&&s.config.defaultGraphicEngine=="canvas",u=n&&n.createElement("canvas"),h=n&&n.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");return(!h||i)&&u&&u.getContext&&u.getContext("2d")},trigger:"graphics"}),r("load","8",{name:"graphics-svg",test:function(s){var n=s.config.doc,i=!s.config.defaultGraphicEngine||s.config.defaultGraphicEngine!="canvas",u=n&&n.createElement("canvas"),h=n&&n.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");return h&&(i||!u)},trigger:"graphics"}),r("load","9",{name:"graphics-svg-default",test:function(s){var n=s.config.doc,i=!s.config.defaultGraphicEngine||s.config.defaultGraphicEngine!="canvas",u=n&&n.createElement("canvas"),h=n&&n.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");return h&&(i||!u)},trigger:"graphics"}),r("load","10",{name:"graphics-vml",test:function(s){var n=s.config.doc,i=n&&n.createElement("canvas");return n&&!n.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(!i||!i.getContext||!i.getContext("2d"))},trigger:"graphics"}),r("load","11",{name:"graphics-vml-default",test:function(s){var n=s.config.doc,i=n&&n.createElement("canvas");return n&&!n.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(!i||!i.getContext||!i.getContext("2d"))},trigger:"graphics"}),r("load","12",{name:"history-hash-ie",test:function(s){var n=s.config.doc&&s.config.doc.documentMode;return s.UA.ie&&(!("onhashchange"in s.config.win)||!n||n<8)},trigger:"history-hash"}),r("load","13",{name:"io-nodejs",trigger:"io-base",ua:"nodejs"}),r("load","14",{name:"json-parse-shim",test:function(s){var n=s.config.global.JSON,i=Object.prototype.toString.call(n)==="[object JSON]"&&n,u=s.config.useNativeJSONParse!==!1&&!!i;function h(g,p){return g==="ok"?!0:p}if(u)try{u=i.parse('{"ok":false}',h).ok}catch{u=!1}return!u},trigger:"json-parse"}),r("load","15",{name:"json-stringify-shim",test:function(s){var n=s.config.global.JSON,i=Object.prototype.toString.call(n)==="[object JSON]"&&n,u=s.config.useNativeJSONStringify!==!1&&!!i;if(u)try{u=i.stringify(0)==="0"}catch{u=!1}return!u},trigger:"json-stringify"}),r("load","16",{name:"scrollview-base-ie",trigger:"scrollview-base",ua:"ie"}),r("load","17",{name:"selector-css2",test:function(s){var n=s.config.doc,i=n&&!("querySelectorAll"in n);return i},trigger:"selector"}),r("load","18",{name:"transition-timer",test:function(s){var n=s.config.doc,i=n?n.documentElement:null,u=!0;return i&&i.style&&(u=!("MozTransition"in i.style||"WebkitTransition"in i.style||"transition"in i.style)),u},trigger:"transition"}),r("load","19",{name:"widget-base-ie",trigger:"widget-base",ua:"ie"}),r("load","20",{name:"yql-jsonp",test:function(s){return!s.UA.nodejs&&!s.UA.winjs},trigger:"yql"}),r("load","21",{name:"yql-nodejs",trigger:"yql",ua:"nodejs"}),r("load","22",{name:"yql-winjs",trigger:"yql",ua:"winjs"})},"3.17.2",{requires:["yui-base"]}),d.add("intl-base",function(o,e){var a=/[, ]/;o.mix(o.namespace("Intl"),{lookupBestLang:function(r,s){var n,i,u,h;function g(p){var f;for(f=0;f<s.length;f+=1)if(p.toLowerCase()===s[f].toLowerCase())return s[f]}for(o.Lang.isString(r)&&(r=r.split(a)),n=0;n<r.length;n+=1)if(i=r[n],!(!i||i==="*"))for(;i.length>0;){if(u=g(i),u)return u;if(h=i.lastIndexOf("-"),h>=0)i=i.substring(0,h),h>=2&&i.charAt(h-2)==="-"&&(i=i.substring(0,h-2));else break}return""}})},"3.17.2",{requires:["yui-base"]}),d.add("yui-log",function(o,e){var a=o,r="yui:log",s="undefined",n={debug:1,info:2,warn:4,error:8};a.log=function(i,u,h,g){var p,f,m,_,v,E,S=a,y=S.config,C=S.fire?S:d.Env.globalEvents;return y.debug&&(h=h||"",typeof h<"u"&&(f=y.logExclude,m=y.logInclude,m&&!(h in m)?p=1:m&&h in m?p=!m[h]:f&&h in f&&(p=f[h]),typeof u>"u"&&(u="info"),S.config.logLevel=S.config.logLevel||"debug",E=n[S.config.logLevel.toLowerCase()],u in n&&n[u]<E&&(p=1)),p||(y.useBrowserConsole&&(_=h?h+": "+i:i,S.Lang.isFunction(y.logFn)?y.logFn.call(S,i,u,h):typeof console!==s&&console.log?(v=u&&console[u]&&u in n?u:"log",console[v](_)):typeof opera!==s&&opera.postError(_)),C&&!g&&(C===S&&!C.getEvent(r)&&C.publish(r,{broadcast:2}),C.fire(r,{msg:i,cat:u,src:h})))),S},a.message=function(){return a.log.apply(a,arguments)}},"3.17.2",{requires:["yui-base"]}),d.add("yui-later",function(o,e){var a=[];o.later=function(r,s,n,i,u){r=r||0,i=o.Lang.isUndefined(i)?a:o.Array(i),s=s||o.config.win||o;var h=!1,g=s&&o.Lang.isString(n)?s[n]:n,p=function(){h||(g.apply?g.apply(s,i||a):g(i[0],i[1],i[2],i[3]))},f=u?o.config.win.setInterval(p,r):o.config.win.setTimeout(p,r);return{id:f,interval:u,cancel:function(){h=!0,this.interval?o.config.win.clearInterval(f):o.config.win.clearTimeout(f)}}},o.Lang.later=o.later},"3.17.2",{requires:["yui-base"]}),d.add("yui",function(o,e){},"3.17.2",{use:["get","features","intl-base","yui-log","yui-later"]})},941856:function(c,b,t){var l=t(91118),d=t(189229),o=d,e=l.YUI;o.YUI=e,c.exports=l},53297:function(c){c.exports="data:image/svg+xml,%3csvg width='22' height='22' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cg clip-path='url(%23a)' fill='%23fff'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M0 15.5V13l4 3.5L8 13v2.5L4 19l-4-3.5ZM0 6.5V9l4-3.5L8 9V6.5L4 3 0 6.5Z'/%3e%3cpath d='M5 5v12H3V5zM10 8h12v2H10zM10 4h12v2H10zM10 16h12v2H10zM10 12h12v2H10z'/%3e%3c/g%3e%3cdefs%3e%3cclipPath id='a'%3e%3cpath fill='%23fff' d='M0 0h22v22H0z'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e"},869797:function(c,b,t){"use strict";t.d(b,{Z:()=>u});var l=t(297107);const d=()=>{},o={handleTrackPositionChange:d,handleCurrentTrackPositionChange:d,handleActiveTrackChange:d,handlePlayingChange:d,handleTrackDurationChange:d};class e{constructor(g,p){this.handlers=Object.assign({},o,p),this.tracks=g.map(f=>l.Z.createTrack(f)),this.currentTrackId=null,this.isPlaying=!1,this._currentTrackEventListeners={},this.tracks.forEach((f,m)=>{f.on("positionChange",()=>{this.handlers.handleTrackPositionChange(m,f.position,f.position/f.duration)}).on("durationChange",()=>{this.handlers.handleTrackDurationChange(m,f.duration)})}),this.currentTrackEventListeners={positionChange:f=>this.handlers.handleCurrentTrackPositionChange(f.position,f.position/f.duration),ended:()=>!this.isScrubbing&&this.goToNextTrack(),inactive:()=>this.setIsPlayingImpl(!1)}}skipToTrack(g){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;(g<0||g>=this.tracks.length)&&(g=null),p&&g!==null&&this.seekTrack(g,0),this.changeCurrentTrackImpl(g)}play(){this.currentTrackId!==null?(this.tracks[this.currentTrackId].play(),this.setIsPlayingImpl(!0)):this.tracks.length>0&&(this.skipToTrack(0,!0),this.play())}pause(){this.currentTrackId!==null&&this.tracks[this.currentTrackId].pause(),this.setIsPlayingImpl(!1)}playpause(){this.isPlaying?this.pause():this.play()}goToPreviousTrack(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.currentTrackId!==null&&this.skipToTrack(this.currentTrackId-1,g)}goToNextTrack(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.currentTrackId!==null&&this.skipToTrack(this.currentTrackId+1,g)}seekCurrentTrack(g){this.currentTrackId!==null&&this.seekTrack(this.currentTrackId,g)}seekCurrentTrackByPercentage(g){this.currentTrackId!==null&&this.seekTrackByPercentage(this.currentTrackId,g)}seekTrack(g,p){this.tracks[g].seek(p)}seekTrackByPercentage(g,p){const f=this.tracks[g];this.seekTrack(g,p*f.duration)}beginScrubbing(){this.isScrubbing=!0}endScrubbing(){this.isScrubbing=!1,this.isPlaying&&this.tracks[this.currentTrackId].play()}changeCurrentTrackImpl(g){const p=this.currentTrackEventListeners;if(g!==this.currentTrackId){if(this.currentTrackId!==null){const f=this.tracks[this.currentTrackId];f.pause(),Object.keys(p).forEach(m=>f.removeListener(m,p[m]))}if(g!==null){const f=this.tracks[g];Object.keys(p).forEach(m=>f.on(m,p[m])),this.isPlaying&&f.play()}else this.setIsPlayingImpl(!1);this.currentTrackId=g,this.handlers.handleActiveTrackChange(g)}}setIsPlayingImpl(g){g!==this.isPlaying&&(this.isPlaying=g,this.handlers.handlePlayingChange(g))}}const a=e,r=function(h,g,p,f){const m=f.currentTarget,_=document.createElement("div");_.style.cssText="position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 10000000; cursor: pointer;";const v=function(y){let C=0;const O=m.ownerDocument.defaultView,A=O.parent===O?null:O.parent;A&&(C=A.document.querySelector("iframe#sqs-site-frame").getBoundingClientRect().left);const I=m.getBoundingClientRect(),D=I.left+C,T=I.right-I.left,B=(y-D)/T;return Math.max(Math.min(B,1),0)},E=function(y){_.onmousemove=null,_.onmouseup=null,_.remove(),y.preventDefault(),p(v(y.clientX)),g(),window.onmouseleave=null},S=function(y){y.preventDefault(),p(v(y.clientX))};_.onmousemove=S,_.onmouseup=E,window.onmouseleave=E,f.preventDefault(),h(),document.body.appendChild(_)},n=function(h,g,p){return r.bind(null,h,g,p)};class i{connectToNode(g){this.container=g,this.trackNodes=this.getTrackNodes(g);const p=this.trackNodes.map(this.getUrlFromTrackNode),f={handleTrackPositionChange:(m,_,v)=>this.handleTrackPositionChange(m,_,v),handleCurrentTrackPositionChange:(m,_)=>this.handleCurrentTrackPositionChange(m,_),handleActiveTrackChange:m=>this.handleActiveTrackChange(m),handlePlayingChange:m=>this.handlePlayingChange(m),handleTrackDurationChange:(m,_)=>this.handleTrackDurationChange(m,_)};this.albumController=new a(p,f),this.bindUIEvents()}getTrackNodes(g){const p=g.querySelectorAll(".tracks .track"),f=new Array(p.length);for(let m=0;m<p.length;m++)f[m]=p[m];return f}getUrlFromTrackNode(g){return g.querySelector(".link").getAttribute("href")}bindUIEvents(){throw new Error("Not implemented")}handleCurrentTrackPositionChange(){}handleTrackPositionChange(){}handleActiveTrackChange(){}handlePlayingChange(g){this.container.classList.toggle("playing",g),this.container.classList.toggle("paused",!g)}handleTrackDurationChange(){}getScrubHandlerForTrack(g){const p=this.albumController,f=n(()=>{p.skipToTrack(g),p.beginScrubbing()},()=>p.endScrubbing(),m=>p.seekTrackByPercentage(g,m));return m=>{g===p.currentTrackId&&f(m)}}}const u=i},508057:function(c,b,t){"use strict";t.d(b,{Z:()=>d});const d=function(o){let e=Math.floor(o%60),a=Math.floor(o/60);const r=Math.floor(a/60);r>0&&(a=a%60);let s="";return r>0&&(s+=r+":",a<10&&(s+="0")),e<10&&(e="0"+e),s+=a+":"+e,s}},297107:function(c,b,t){"use strict";t.d(b,{Z:()=>y});var l=t(392338),d=t(101432),o=t.n(d);const e=navigator.userAgent.toLowerCase(),r=e.indexOf("safari")!==-1&&e.indexOf("chrome")===-1;var s=t(364948);const n={timeupdate:"playing",loadstart:"load",durationchange:"durationchange",canplay:"ready",pause:"pause",playing:"play",ended:"ended"},i={url:null,volume:1};class u extends o(){constructor(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),O=Object.assign({},i,O),this.audioEl=document.createElement("audio"),O.url&&(this.audioEl.src=this.url=O.url),this.audioEl.volume=O.volume,this._needsLoad=!0,this.protectAudioAsset=this.protectAudioAsset.bind(this),this.audioEvents=[],Object.keys(n).forEach(A=>{const I=()=>this.emit(n[A]);this.audioEvents.push({name:A,fn:I}),this.audioEl.addEventListener(A,I)})}destroy(){this.audioEvents.forEach(O=>{this.audioEl.removeEventListener(O.name,O.fn)}),this.audioEl.removeEventListener("error",this.protectAudioAsset)}setVolume(O){this.audioEl.volume=O}getVolume(){return this.audioEl.volume}setSrc(O){this.audioEl.src=this.url=O,this._needsLoad=!0}loadAndPlay(){this.audioEl.load(),this.audioEl.play(),this._needsLoad=!1}isMplatUrlFormat(O){return O.includes("https://audio-origin.dev.squarespace.net")||O.includes("https://audio.squarespace-cdn.com")}async protectAudioAsset(O){const A=new URL(this.audioEl.src);if(O.target.error.code!==4||A.searchParams.has("token"))this.audioEl.removeEventListener("error",this.protectAudioAsset);else{let I=await(0,s.getAssetDeliveryAuthToken)();(0,s.getIsTokenStale)(I)&&(I=await(0,s.getAssetDeliveryAuthToken)(!0)),this.audioEl.src=(0,s.addTokenToUrl)(this.audioEl.src,I),this.loadAndPlay()}}play(){if(!this.audioEl.src)throw new Error("Cannot play: Need to set a url first.");this._needsLoad?(this.once("ready",()=>this.audioEl.play()),this.isMplatUrlFormat(this.audioEl.src)&&this.audioEl.addEventListener("error",this.protectAudioAsset),this.loadAndPlay()):this.audioEl.readyState>=3&&this.audioEl.play()}playFrom(O){if(!this.audioEl.src)throw new Error("Cannot play: Need to set a url first.");this._needsLoad?(this.once("ready",()=>{this.audioEl.currentTime=O,this.audioEl.play()}),this.isMplatUrlFormat(this.audioEl.src)&&this.audioEl.addEventListener("error",this.protectAudioAsset),this.loadAndPlay()):this.audioEl.readyState>=3&&(this.audioEl.currentTime=O,this.audioEl.play())}pause(){this.audioEl.pause()}seek(O){if(this.audioEl.readyState===0)return;!this.audioEl.paused&&r&&(O=Math.floor(O));const A=this.audioEl.currentTime;this.audioEl.currentTime=O,this.emit("seek",A,O)}getPosition(){return this.audioEl.currentTime}getDuration(){return this.audioEl.duration}}const h=u,g=()=>{},p={handlePlay:g,handlePause:g,handleSeek:g};class f extends o(){constructor(O){super(),this.url=O,this.position=0,this.duration=0,this.isActive=!1,this.callbacks=Object.assign({},p)}setCallbacks(O){this.callbacks=Object.assign({},p,O)}play(){this.callbacks.handlePlay()}pause(){this.callbacks.handlePause()}seek(O){this.callbacks.handleSeek(O)}handlePositionChanged(O){this.position=O,this.emit("positionChange",this)}handlePlay(){this.emit("play",this)}handlePaused(){this.emit("pause",this)}handleEnded(){this.emit("ended",this)}handleDurationChanged(O){this.duration=O,this.emit("durationChange",this)}handleReady(){this.emit("ready",this)}handleActiveChange(O){this.isActive=O,this.emit(O?"active":"inactive",this)}}const m=f;class _{constructor(){this.player=new h,this.activeTrack=null,this.player.on("playing",()=>{this.activeTrack&&this.activeTrack.handlePositionChanged(this.player.getPosition())}).on("durationchange",()=>{this.activeTrack&&this.activeTrack.handleDurationChanged(this.player.getDuration())}).on("ready",()=>{this.activeTrack&&this.activeTrack.handleReady()}).on("play",()=>{this.activeTrack&&this.activeTrack.handlePlay()}).on("pause",()=>{this.activeTrack&&this.activeTrack.handlePaused()}).on("ended",()=>{this.activeTrack&&this.activeTrack.handleEnded()})}createTrack(O){const A=new m(O);return A.setCallbacks({handlePlay:()=>{this.activate(A),this.player.playFrom(A.position)},handlePause:()=>{A.isActive&&this.player.pause()},handleSeek:I=>{A.isActive&&this.player.seek(I),A.handlePositionChanged(I)}}),A}activate(O){this.activeTrack!==O&&(this.activeTrack&&(this.activeTrack.pause(),this.activeTrack.handleActiveChange(!1)),this.activeTrack=O,O&&(this.player.setSrc(O.url),O.handleActiveChange(!0)))}}const v=_,y=new v},878515:function(){YUI.add("anim-base",function(c,b){var t="running",l="startTime",d="elapsedTime",o="start",e="tween",a="end",r="node",s="paused",n="reverse",i="iterationCount",u=Number,h={},g;c.Anim=function(){c.Anim.superclass.constructor.apply(this,arguments),c.Anim._instances[c.stamp(this)]=this},c.Anim.NAME="anim",c.Anim._instances={},c.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i,c.Anim.DEFAULT_UNIT="px",c.Anim.DEFAULT_EASING=function(f,m,_,v){return _*f/v+m},c.Anim._intervalTime=20,c.Anim.behaviors={left:{get:function(f,m){return f._getOffset(m)}}},c.Anim.behaviors.top=c.Anim.behaviors.left,c.Anim.DEFAULT_SETTER=function(f,m,_,v,E,S,y,C){var O=f._node,A=O._node,I=y(E,u(_),u(v)-u(_),S);A?"style"in A&&(m in A.style||m in c.DOM.CUSTOM_STYLES)?(C=C||"",O.setStyle(m,I+C)):"attributes"in A&&m in A.attributes?O.setAttribute(m,I):m in A&&(A[m]=I):O.set?O.set(m,I):m in O&&(O[m]=I)},c.Anim.DEFAULT_GETTER=function(f,m){var _=f._node,v=_._node,E="";return v?"style"in v&&(m in v.style||m in c.DOM.CUSTOM_STYLES)?E=_.getComputedStyle(m):"attributes"in v&&m in v.attributes?E=_.getAttribute(m):m in v&&(E=v[m]):_.get?E=_.get(m):m in _&&(E=_[m]),E},c.Anim.ATTRS={node:{setter:function(f){return f&&(typeof f=="string"||f.nodeType)&&(f=c.one(f)),this._node=f,f}},duration:{value:1},easing:{value:c.Anim.DEFAULT_EASING,setter:function(f){if(typeof f=="string"&&c.Easing)return c.Easing[f]}},from:{},to:{},startTime:{value:0,readOnly:!0},elapsedTime:{value:0,readOnly:!0},running:{getter:function(){return!!h[c.stamp(this)]},value:!1,readOnly:!0},iterations:{value:1},iterationCount:{value:0,readOnly:!0},direction:{value:"normal"},paused:{readOnly:!0,value:!1},reverse:{value:!1}},c.Anim.run=function(){var f=c.Anim._instances,m;for(m in f)f[m].run&&f[m].run()},c.Anim.pause=function(){for(var f in h)h[f].pause&&h[f].pause();c.Anim._stopTimer()},c.Anim.stop=function(){for(var f in h)h[f].stop&&h[f].stop();c.Anim._stopTimer()},c.Anim._startTimer=function(){g||(g=setInterval(c.Anim._runFrame,c.Anim._intervalTime))},c.Anim._stopTimer=function(){clearInterval(g),g=0},c.Anim._runFrame=function(){var f=!0,m;for(m in h)h[m]._runFrame&&(f=!1,h[m]._runFrame());f&&c.Anim._stopTimer()},c.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var p={run:function(){return this.get(s)?this._resume():this.get(t)||this._start(),this},pause:function(){return this.get(t)&&this._pause(),this},stop:function(f){return(this.get(t)||this.get(s))&&this._end(f),this},_added:!1,_start:function(){this._set(l,new Date-this.get(d)),this._actualFrames=0,this.get(s)||this._initAnimAttr(),h[c.stamp(this)]=this,c.Anim._startTimer(),this.fire(o)},_pause:function(){this._set(l,null),this._set(s,!0),delete h[c.stamp(this)],this.fire("pause")},_resume:function(){this._set(s,!1),h[c.stamp(this)]=this,this._set(l,new Date-this.get(d)),c.Anim._startTimer(),this.fire("resume")},_end:function(f){var m=this.get("duration")*1e3;f&&this._runAttrs(m,m,this.get(n)),this._set(l,null),this._set(d,0),this._set(s,!1),delete h[c.stamp(this)],this.fire(a,{elapsed:this.get(d)})},_runFrame:function(){var f=this._runtimeAttr.duration,m=new Date-this.get(l),_=this.get(n),v=m>=f;this._runAttrs(m,f,_),this._actualFrames+=1,this._set(d,m),this.fire(e),v&&this._lastFrame()},_runAttrs:function(f,m,_){var v=this._runtimeAttr,E=c.Anim.behaviors,S=v.easing,y=m,C=!1,O,A,I;f>=m&&(C=!0),_&&(f=m-f,y=0);for(I in v)v[I].to&&(O=v[I],A=I in E&&"set"in E[I]?E[I].set:c.Anim.DEFAULT_SETTER,C?A(this,I,O.from,O.to,y,m,S,O.unit):A(this,I,O.from,O.to,f,m,S,O.unit))},_lastFrame:function(){var f=this.get("iterations"),m=this.get(i);m+=1,f==="infinite"||m<f?(this.get("direction")==="alternate"&&this.set(n,!this.get(n)),this.fire("iteration")):(m=0,this._end()),this._set(l,new Date),this._set(i,m)},_initAnimAttr:function(){var f=this.get("from")||{},m=this.get("to")||{},_={duration:this.get("duration")*1e3,easing:this.get("easing")},v=c.Anim.behaviors,E=this.get(r),S,y,C;c.each(m,function(O,A){typeof O=="function"&&(O=O.call(this,E)),y=f[A],y===void 0?y=A in v&&"get"in v[A]?v[A].get(this,A):c.Anim.DEFAULT_GETTER(this,A):typeof y=="function"&&(y=y.call(this,E));var I=c.Anim.RE_UNITS.exec(y),D=c.Anim.RE_UNITS.exec(O);if(y=I?I[1]:y,C=D?D[1]:O,S=D?D[2]:I?I[2]:"",!S&&c.Anim.RE_DEFAULT_UNIT.test(A)&&(S=c.Anim.DEFAULT_UNIT),!y||!C){c.error('invalid "from" or "to" for "'+A+'"',"Anim");return}_[A]={from:c.Lang.isObject(y)?c.clone(y):y,to:C,unit:S}},this),this._runtimeAttr=_},_getOffset:function(f){var m=this._node,_=m.getComputedStyle(f),v=f==="left"?"getX":"getY",E=f==="left"?"setX":"setY",S;return _==="auto"&&(S=m.getStyle("position"),S==="absolute"||S==="fixed"?(_=m[v](),m[E](_)):_=0),_},destructor:function(){delete c.Anim._instances[c.stamp(this)]}};c.extend(c.Anim,c.Base,p)},"3.17.2",{requires:["base-base","node-style","color-base"]})},568096:function(){YUI.add("anim-color",function(c,b){var t=Number;c.Anim.getUpdatedColorValue=function(l,d,o,e,a){return l=c.Color.re_RGB.exec(c.Color.toRGB(l)),d=c.Color.re_RGB.exec(c.Color.toRGB(d)),(!l||l.length<3||!d||d.length<3)&&c.error("invalid from or to passed to color behavior"),"rgb("+[Math.floor(a(o,t(l[1]),t(d[1])-t(l[1]),e)),Math.floor(a(o,t(l[2]),t(d[2])-t(l[2]),e)),Math.floor(a(o,t(l[3]),t(d[3])-t(l[3]),e))].join(", ")+")"},c.Anim.behaviors.color={set:function(l,d,o,e,a,r,s){l._node.setStyle(d,c.Anim.getUpdatedColorValue(o,e,a,r,s))},get:function(l,d){var o=l._node.getComputedStyle(d);return o=o==="transparent"?"rgb(255, 255, 255)":o,o}},c.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(l){c.Anim.behaviors[l]=c.Anim.behaviors.color})},"3.17.2",{requires:["anim-base"]})},263446:function(){YUI.add("anim-curve",function(c,b){c.Anim.behaviors.curve={set:function(t,l,d,o,e,a,r){d=d.slice.call(d),o=o.slice.call(o);var s=r(e,0,100,a)/100;o.unshift(d),t._node.setXY(c.Anim.getBezier(o,s))},get:function(t){return t._node.getXY()}},c.Anim.getBezier=function(t,l){var d=t.length,o=[],e,a;for(e=0;e<d;++e)o[e]=[t[e][0],t[e][1]];for(a=1;a<d;++a)for(e=0;e<d-a;++e)o[e][0]=(1-l)*o[e][0]+l*o[parseInt(e+1,10)][0],o[e][1]=(1-l)*o[e][1]+l*o[parseInt(e+1,10)][1];return[o[0][0],o[0][1]]}},"3.17.2",{requires:["anim-xy"]})},699993:function(){YUI.add("anim-easing",function(c,b){var t={easeNone:function(l,d,o,e){return o*l/e+d},easeIn:function(l,d,o,e){return o*(l/=e)*l+d},easeOut:function(l,d,o,e){return-o*(l/=e)*(l-2)+d},easeBoth:function(l,d,o,e){return(l/=e/2)<1?o/2*l*l+d:-o/2*(--l*(l-2)-1)+d},easeInStrong:function(l,d,o,e){return o*(l/=e)*l*l*l+d},easeOutStrong:function(l,d,o,e){return-o*((l=l/e-1)*l*l*l-1)+d},easeBothStrong:function(l,d,o,e){return(l/=e/2)<1?o/2*l*l*l*l+d:-o/2*((l-=2)*l*l*l-2)+d},elasticIn:function(l,d,o,e,a,r){var s;return l===0?d:(l/=e)===1?d+o:(r||(r=e*.3),!a||a<Math.abs(o)?(a=o,s=r/4):s=r/(2*Math.PI)*Math.asin(o/a),-(a*Math.pow(2,10*(l-=1))*Math.sin((l*e-s)*(2*Math.PI)/r))+d)},elasticOut:function(l,d,o,e,a,r){var s;return l===0?d:(l/=e)===1?d+o:(r||(r=e*.3),!a||a<Math.abs(o)?(a=o,s=r/4):s=r/(2*Math.PI)*Math.asin(o/a),a*Math.pow(2,-10*l)*Math.sin((l*e-s)*(2*Math.PI)/r)+o+d)},elasticBoth:function(l,d,o,e,a,r){var s;return l===0?d:(l/=e/2)===2?d+o:(r||(r=e*.44999999999999996),!a||a<Math.abs(o)?(a=o,s=r/4):s=r/(2*Math.PI)*Math.asin(o/a),l<1?-.5*(a*Math.pow(2,10*(l-=1))*Math.sin((l*e-s)*(2*Math.PI)/r))+d:a*Math.pow(2,-10*(l-=1))*Math.sin((l*e-s)*(2*Math.PI)/r)*.5+o+d)},backIn:function(l,d,o,e,a){return a===void 0&&(a=1.70158),l===e&&(l-=.001),o*(l/=e)*l*((a+1)*l-a)+d},backOut:function(l,d,o,e,a){return typeof a>"u"&&(a=1.70158),o*((l=l/e-1)*l*((a+1)*l+a)+1)+d},backBoth:function(l,d,o,e,a){return typeof a>"u"&&(a=1.70158),(l/=e/2)<1?o/2*(l*l*(((a*=1.525)+1)*l-a))+d:o/2*((l-=2)*l*(((a*=1.525)+1)*l+a)+2)+d},bounceIn:function(l,d,o,e){return o-c.Easing.bounceOut(e-l,0,o,e)+d},bounceOut:function(l,d,o,e){return(l/=e)<.36363636363636365?o*(7.5625*l*l)+d:l<.7272727272727273?o*(7.5625*(l-=.5454545454545454)*l+.75)+d:l<.9090909090909091?o*(7.5625*(l-=.8181818181818182)*l+.9375)+d:o*(7.5625*(l-=.9545454545454546)*l+.984375)+d},bounceBoth:function(l,d,o,e){return l<e/2?c.Easing.bounceIn(l*2,0,o,e)*.5+d:c.Easing.bounceOut(l*2-e,0,o,e)*.5+o*.5+d}};c.Easing=t},"3.17.2",{requires:["anim-base"]})},305531:function(){YUI.add("anim-node-plugin",function(c,b){var t=function(l){l=l?c.merge(l):{},l.node=l.host,t.superclass.constructor.apply(this,arguments)};t.NAME="nodefx",t.NS="fx",c.extend(t,c.Anim),c.namespace("Plugin"),c.Plugin.NodeFX=t},"3.17.2",{requires:["node-pluginhost","anim-base"]})},991950:function(){YUI.add("anim-scroll",function(c,b){var t=Number;c.Anim.behaviors.scroll={set:function(l,d,o,e,a,r,s){var n=l._node,i=[s(a,t(o[0]),t(e[0])-t(o[0]),r),s(a,t(o[1]),t(e[1])-t(o[1]),r)];i[0]&&n.set("scrollLeft",i[0]),i[1]&&n.set("scrollTop",i[1])},get:function(l){var d=l._node;return[d.get("scrollLeft"),d.get("scrollTop")]}}},"3.17.2",{requires:["anim-base"]})},605585:function(){YUI.add("anim-xy",function(c,b){var t=Number;c.Anim.behaviors.xy={set:function(l,d,o,e,a,r,s){l._node.setXY([s(a,t(o[0]),t(e[0])-t(o[0]),r),s(a,t(o[1]),t(e[1])-t(o[1]),r)])},get:function(l){return l._node.getXY()}}},"3.17.2",{requires:["anim-base","node-screen"]})},3299:function(){YUI.add("array-extras",function(c,b){var t=c.Array,l=c.Lang,d=Array.prototype;t.lastIndexOf=l._isNative(d.lastIndexOf)?function(o,e,a){return a||a===0?o.lastIndexOf(e,a):o.lastIndexOf(e)}:function(o,e,a){var r=o.length,s=r-1;if((a||a===0)&&(s=Math.min(a<0?r+a:a,r)),s>-1&&r>0){for(;s>-1;--s)if(s in o&&o[s]===e)return s}return-1},t.unique=function(o,e){var a=0,r=o.length,s=[],n,i,u,h;e:for(;a<r;a++){for(h=o[a],n=0,u=s.length;n<u;n++)if(i=s[n],e){if(e.call(o,h,i,a,o))continue e}else if(h===i)continue e;s.push(h)}return s},t.filter=l._isNative(d.filter)?function(o,e,a){return d.filter.call(o,e,a)}:function(o,e,a){for(var r=0,s=o.length,n=[],i;r<s;++r)r in o&&(i=o[r],e.call(a,i,r,o)&&n.push(i));return n},t.reject=function(o,e,a){return t.filter(o,function(r,s,n){return!e.call(a,r,s,n)})},t.every=l._isNative(d.every)?function(o,e,a){return d.every.call(o,e,a)}:function(o,e,a){for(var r=0,s=o.length;r<s;++r)if(r in o&&!e.call(a,o[r],r,o))return!1;return!0},t.map=l._isNative(d.map)?function(o,e,a){return d.map.call(o,e,a)}:function(o,e,a){for(var r=0,s=o.length,n=d.concat.call(o);r<s;++r)r in o&&(n[r]=e.call(a,o[r],r,o));return n},t.reduce=l._isNative(d.reduce)?function(o,e,a,r){return d.reduce.call(o,function(s,n,i,u){return a.call(r,s,n,i,u)},e)}:function(o,e,a,r){for(var s=0,n=o.length,i=e;s<n;++s)s in o&&(i=a.call(r,i,o[s],s,o));return i},t.find=function(o,e,a){for(var r=0,s=o.length;r<s;r++)if(r in o&&e.call(a,o[r],r,o))return o[r];return null},t.grep=function(o,e){return t.filter(o,function(a,r){return e.test(a)})},t.partition=function(o,e,a){var r={matches:[],rejects:[]};return t.each(o,function(s,n){var i=e.call(a,s,n,o)?r.matches:r.rejects;i.push(s)}),r},t.zip=function(o,e){var a=[];return t.each(o,function(r,s){a.push([r,e[s]])}),a},t.flatten=function(o){var e=[],a,r,s;if(!o)return e;for(a=0,r=o.length;a<r;++a)s=o[a],l.isArray(s)?e.push.apply(e,t.flatten(s)):e.push(s);return e}},"3.17.2",{requires:["yui-base"]})},623339:function(){YUI.add("array-invoke",function(c,b){c.Array.invoke=function(t,l){var d=c.Array(arguments,2,!0),o=c.Lang.isFunction,e=[];return c.Array.each(c.Array(t),function(a,r){a&&o(a[l])&&(e[r]=a[l].apply(a,d))}),e}},"3.17.2",{requires:["yui-base"]})},241601:function(){YUI.add("arraylist",function(c,b){var t=c.Array,l=t.each,d;function o(e){e!==void 0?this._items=c.Lang.isArray(e)?e:t(e):this._items=this._items||[]}d={item:function(e){return this._items[e]},each:function(e,a){return l(this._items,function(r,s){r=this.item(s),e.call(a||r,r,s,this)},this),this},some:function(e,a){return t.some(this._items,function(r,s){return r=this.item(s),e.call(a||r,r,s,this)},this)},indexOf:function(e){return t.indexOf(this._items,e)},size:function(){return this._items.length},isEmpty:function(){return!this.size()},toJSON:function(){return this._items}},d._item=d.item,c.mix(o.prototype,d),c.mix(o,{addMethod:function(e,a){a=t(a),l(a,function(r){e[r]=function(){var s=t(arguments,0,!0),n=[];return l(this._items,function(i,u){i=this._item(u);var h=i[r].apply(i,s);h!==void 0&&h!==i&&(n[u]=h)},this),n.length?n:this}})}}),c.ArrayList=o},"3.17.2",{requires:["yui-base"]})},983810:function(){YUI.add("async-queue",function(c,b){c.AsyncQueue=function(){this._init(),this.add.apply(this,arguments)};var t=c.AsyncQueue,l="execute",d="shift",o="promote",e="remove",a=c.Lang.isObject,r=c.Lang.isFunction;t.defaults=c.mix({autoContinue:!0,iterations:1,timeout:10,until:function(){return this.iterations|=0,this.iterations<=0}},c.config.queueDefaults||{}),c.extend(t,c.EventTarget,{_running:!1,_init:function(){c.EventTarget.call(this,{prefix:"queue",emitFacade:!0}),this._q=[],this.defaults={},this._initEvents()},_initEvents:function(){this.publish({execute:{defaultFn:this._defExecFn,emitFacade:!0},shift:{defaultFn:this._defShiftFn,emitFacade:!0},add:{defaultFn:this._defAddFn,emitFacade:!0},promote:{defaultFn:this._defPromoteFn,emitFacade:!0},remove:{defaultFn:this._defRemoveFn,emitFacade:!0}})},next:function(){for(var s;this._q.length&&(s=this._q[0]=this._prepare(this._q[0]),s&&s.until());)this.fire(d,{callback:s}),s=null;return s||null},_defShiftFn:function(s){this.indexOf(s.callback)===0&&this._q.shift()},_prepare:function(s){if(r(s)&&s._prepared)return s;var n=c.merge(t.defaults,{context:this,args:[],_prepared:!0},this.defaults,r(s)?{fn:s}:s),i=c.bind(function(){i._running||i.iterations--,r(i.fn)&&i.fn.apply(i.context||c,c.Array(i.args))},this);return c.mix(i,n)},run:function(){var s,n=!0;if(this._executing)return this._running=!0,this;for(s=this.next();s&&!this.isRunning()&&(n=s.timeout<0?this._execute(s):this._schedule(s),!!n);s=this.next());return s||this.fire("complete"),this},_execute:function(s){this._running=s._running=!0,this._executing=s,s.iterations--,this.fire(l,{callback:s});var n=this._running&&s.autoContinue;return this._running=s._running=!1,this._executing=!1,n},_schedule:function(s){return this._running=c.later(s.timeout,this,function(){this._execute(s)&&this.run()}),!1},isRunning:function(){return!!this._running},_defExecFn:function(s){s.callback()},add:function(){return this.fire("add",{callbacks:c.Array(arguments,0,!0)}),this},_defAddFn:function(s){var n=this._q,i=[];c.Array.each(s.callbacks,function(u){a(u)&&(n.push(u),i.push(u))}),s.added=i},pause:function(){return this._running&&a(this._running)&&this._running.cancel(),this._running=!1,this},stop:function(){return this._q=[],this._running&&a(this._running)&&(this._running.cancel(),this._running=!1),this._executing||this.run(),this},indexOf:function(s){for(var n=0,i=this._q.length,u;n<i;++n)if(u=this._q[n],u===s||u.id===s)return n;return-1},getCallback:function(s){var n=this.indexOf(s);return n>-1?this._q[n]:null},promote:function(s){var n={callback:s},i;return this.isRunning()?i=this.after(d,function(){this.fire(o,n),i.detach()},this):this.fire(o,n),this},_defPromoteFn:function(s){var n=this.indexOf(s.callback),i=n>-1?this._q.splice(n,1)[0]:null;s.promoted=i,i&&this._q.unshift(i)},remove:function(s){var n={callback:s},i;return this.isRunning()?i=this.after(d,function(){this.fire(e,n),i.detach()},this):this.fire(e,n),this},_defRemoveFn:function(s){var n=this.indexOf(s.callback);s.removed=n>-1?this._q.splice(n,1)[0]:null},size:function(){return this.isRunning()||this.next(),this._q.length}})},"3.17.2",{requires:["event-custom"]})},917645:function(){YUI.add("attribute-base",function(c,b){function t(){c.AttributeCore.apply(this,arguments),c.AttributeObservable.apply(this,arguments),c.AttributeExtras.apply(this,arguments)}c.mix(t,c.AttributeCore,!1,null,1),c.mix(t,c.AttributeExtras,!1,null,1),c.mix(t,c.AttributeObservable,!0,null,1),t.INVALID_VALUE=c.AttributeCore.INVALID_VALUE,t._ATTR_CFG=c.AttributeCore._ATTR_CFG.concat(c.AttributeObservable._ATTR_CFG),t.protectAttrs=c.AttributeCore.protectAttrs,c.Attribute=t},"3.17.2",{requires:["attribute-core","attribute-observable","attribute-extras"]})},725707:function(){YUI.add("attribute-complex",function(c,b){var t=c.Attribute;t.Complex=function(){},t.Complex.prototype={_normAttrVals:t.prototype._normAttrVals,_getAttrInitVal:t.prototype._getAttrInitVal},c.AttributeComplex=t.Complex},"3.17.2",{requires:["attribute-base"]})},659413:function(){YUI.add("attribute-core",function(c,b){c.State=function(){this.data={}},c.State.prototype={add:function(E,S,y){var C=this.data[E];C||(C=this.data[E]={}),C[S]=y},addAll:function(E,S){var y=this.data[E],C;y||(y=this.data[E]={});for(C in S)S.hasOwnProperty(C)&&(y[C]=S[C])},remove:function(E,S){var y=this.data[E];y&&delete y[S]},removeAll:function(E,S){var y;S?c.each(S,function(C,O){this.remove(E,typeof O=="string"?O:C)},this):(y=this.data,E in y&&delete y[E])},get:function(E,S){var y=this.data[E];if(y)return y[S]},getAll:function(E,S){var y=this.data[E],C,O;if(S)O=y;else if(y){O={};for(C in y)y.hasOwnProperty(C)&&(O[C]=y[C])}return O}};var t=c.Object,l=c.Lang,d=".",o="getter",e="setter",a="readOnly",r="writeOnce",s="initOnly",n="validator",i="value",u="valueFn",h="lazyAdd",g="added",p="_bypassProxy",f="initValue",m="lazy",_;function v(E,S,y){this._yuievt=null,this._initAttrHost(E,S,y)}v.INVALID_VALUE={},_=v.INVALID_VALUE,v._ATTR_CFG=[e,o,n,i,u,r,a,h,p],v.protectAttrs=function(E){if(E){E=c.merge(E);for(var S in E)E.hasOwnProperty(S)&&(E[S]=c.merge(E[S]))}return E},v.prototype={_initAttrHost:function(E,S,y){this._state=new c.State,this._initAttrs(E,S,y)},addAttr:function(E,S,y){var C=this,O=C._state,A=O.data,I,D,T;return S=S||{},h in S&&(y=S[h]),D=O.get(E,g),y&&!D?O.data[E]={lazy:S,added:!0}:(!D||S.isLazyAdd)&&(T=i in S,T&&(I=S.value,S.value=void 0),S.added=!0,S.initializing=!0,A[E]=S,T&&C.set(E,I),S.initializing=!1),C},attrAdded:function(E){return!!this._state.get(E,g)},get:function(E){return this._getAttr(E)},_isLazyAttr:function(E){return this._state.get(E,m)},_addLazyAttr:function(E,S){var y=this._state;S=S||y.get(E,m),S&&(y.data[E].lazy=void 0,S.isLazyAdd=!0,this.addAttr(E,S))},set:function(E,S,y){return this._setAttr(E,S,y)},_set:function(E,S,y){return this._setAttr(E,S,y,!0)},_setAttr:function(E,S,y,C){var O=!0,A=this._state,I=this._stateProxy,D=this._tCfgs,T,B,N,P,x,R,w;return E.indexOf(d)!==-1&&(N=E,P=E.split(d),E=P.shift()),D&&D[E]&&this._addOutOfOrder(E,D[E]),T=A.data[E]||{},T.lazy&&(T=T.lazy,this._addLazyAttr(E,T)),B=T.value===void 0,I&&E in I&&!T._bypassProxy&&(B=!1),R=T.writeOnce,w=T.initializing,!B&&!C&&(R&&(O=!1),T.readOnly&&(O=!1)),!w&&!C&&R===s&&(O=!1),O&&(B||(x=this.get(E)),P&&(S=t.setValue(c.clone(x),P,S),S===void 0&&(O=!1)),O&&(!this._fireAttrChange||w?this._setAttrVal(E,N,x,S,y,T):this._fireAttrChange(E,N,x,S,y,T))),this},_addOutOfOrder:function(E,S){var y={};y[E]=S,delete this._tCfgs[E],this._addAttrs(y,this._tVals)},_getAttr:function(E){var S=E,y=this._tCfgs,C,O,A,I;return E.indexOf(d)!==-1&&(C=E.split(d),E=C.shift()),y&&y[E]&&this._addOutOfOrder(E,y[E]),I=this._state.data[E]||{},I.lazy&&(I=I.lazy,this._addLazyAttr(E,I)),A=this._getStateVal(E,I),O=I.getter,O&&!O.call&&(O=this[O]),A=O?O.call(this,A,S):A,A=C?t.getValue(A,C):A,A},_getStateVal:function(E,S){var y=this._stateProxy;return S||(S=this._state.getAll(E)||{}),y&&E in y&&!S._bypassProxy?y[E]:S.value},_setStateVal:function(E,S){var y=this._stateProxy;y&&E in y&&!this._state.get(E,p)?y[E]=S:this._state.add(E,i,S)},_setAttrVal:function(E,S,y,C,O,A){var I=this,D=!0,T=A||this._state.data[E]||{},B=T.validator,N=T.setter,P=T.initializing,x=this._getStateVal(E,T),R=S||E,w,k;return B&&(B.call||(B=this[B]),B&&(k=B.call(I,C,R,O),!k&&P&&(C=T.defaultValue,k=!0))),!B||k?(N&&(N.call||(N=this[N]),N&&(w=N.call(I,C,R,O),w===_?P?C=T.defaultValue:D=!1:w!==void 0&&(C=w))),D&&(!S&&C===x&&!l.isObject(C)?D=!1:(f in T||(T.initValue=C),I._setStateVal(E,C)))):D=!1,D},setAttrs:function(E,S){return this._setAttrs(E,S)},_setAttrs:function(E,S){var y;for(y in E)E.hasOwnProperty(y)&&this.set(y,E[y],S);return this},getAttrs:function(E){return this._getAttrs(E)},_getAttrs:function(E){var S={},y,C,O,A=E===!0;for((!E||A)&&(E=t.keys(this._state.data)),C=0,O=E.length;C<O;C++)y=E[C],(!A||this._getStateVal(y)!=this._state.get(y,f))&&(S[y]=this.get(y));return S},addAttrs:function(E,S,y){return E&&(this._tCfgs=E,this._tVals=S?this._normAttrVals(S):null,this._addAttrs(E,this._tVals,y),this._tCfgs=this._tVals=null),this},_addAttrs:function(E,S,y){var C=this._tCfgs,O=this._tVals,A,I,D;for(A in E)E.hasOwnProperty(A)&&(I=E[A],I.defaultValue=I.value,D=this._getAttrInitVal(A,I,O),D!==void 0&&(I.value=D),C[A]&&(C[A]=void 0),this.addAttr(A,I,y))},_protectAttrs:v.protectAttrs,_normAttrVals:function(E){var S,y,C,O,A,I;if(!E)return null;S={};for(I in E)E.hasOwnProperty(I)&&(I.indexOf(d)!==-1?(C=I.split(d),O=C.shift(),y=y||{},A=y[O]=y[O]||[],A[A.length]={path:C,value:E[I]}):S[I]=E[I]);return{simple:S,complex:y}},_getAttrInitVal:function(E,S,y){var C=S.value,O=S.valueFn,A,I=!1,D=S.readOnly,T,B,N,P,x,R,w;if(!D&&y&&(T=y.simple,T&&T.hasOwnProperty(E)&&(C=T[E],I=!0)),O&&!I&&(O.call||(O=this[O]),O&&(A=O.call(this,E),C=A)),!D&&y&&(B=y.complex,B&&B.hasOwnProperty(E)&&C!==void 0&&C!==null))for(w=B[E],N=0,P=w.length;N<P;++N)x=w[N].path,R=w[N].value,t.setValue(C,x,R);return C},_initAttrs:function(E,S,y){E=E||this.constructor.ATTRS;var C=c.Base,O=c.BaseCore,A=C&&c.instanceOf(this,C),I=!A&&O&&c.instanceOf(this,O);E&&!A&&!I&&this.addAttrs(c.AttributeCore.protectAttrs(E),S,y)}},c.AttributeCore=v},"3.17.2",{requires:["oop"]})},756426:function(){YUI.add("attribute-extras",function(c,b){var t="broadcast",l="published",d="initValue",o={readOnly:1,writeOnce:1,getter:1,broadcast:1};function e(){}e.prototype={modifyAttr:function(a,r){var s=this,n,i;if(s.attrAdded(a)){s._isLazyAttr(a)&&s._addLazyAttr(a),i=s._state;for(n in r)o[n]&&r.hasOwnProperty(n)&&(i.add(a,n,r[n]),n===t&&i.remove(a,l))}},removeAttr:function(a){this._state.removeAll(a)},reset:function(a){var r=this;return a?(r._isLazyAttr(a)&&r._addLazyAttr(a),r.set(a,r._state.get(a,d))):c.Object.each(r._state.data,function(s,n){r.reset(n)}),r},_getAttrCfg:function(a){var r,s=this._state;return a?r=s.getAll(a)||{}:(r={},c.each(s.data,function(n,i){r[i]=s.getAll(i)})),r}},c.AttributeExtras=e},"3.17.2",{requires:["oop"]})},132266:function(){YUI.add("attribute-observable",function(c,b){var t=c.EventTarget,l="Change",d="broadcast";function o(){this._ATTR_E_FACADE={},t.call(this,{emitFacade:!0})}o._ATTR_CFG=[d],o.prototype={set:function(e,a,r){return this._setAttr(e,a,r)},_set:function(e,a,r){return this._setAttr(e,a,r,!0)},setAttrs:function(e,a){return this._setAttrs(e,a)},_setAttrs:function(e,a){var r;for(r in e)e.hasOwnProperty(r)&&this.set(r,e[r],a);return this},_fireAttrChange:function(e,a,r,s,n,i){var u=this,h=this._getFullType(e+l),g=u._state,p,f,m;i||(i=g.data[e]||{}),i.published||(m=u._publish(h),m.emitFacade=!0,m.defaultTargetOnly=!0,m.defaultFn=u._defAttrChangeFn,f=i.broadcast,f!==void 0&&(m.broadcast=f),i.published=!0),n?(p=c.merge(n),p._attrOpts=n):p=u._ATTR_E_FACADE,p.attrName=e,p.subAttrName=a,p.prevVal=r,p.newVal=s,u._hasPotentialSubscribers(h)?u.fire(h,p):this._setAttrVal(e,a,r,s,n,i)},_defAttrChangeFn:function(e,a){var r=e._attrOpts;r&&delete e._attrOpts,this._setAttrVal(e.attrName,e.subAttrName,e.prevVal,e.newVal,r)?a||(e.newVal=this.get(e.attrName)):a||e.stopImmediatePropagation()}},c.mix(o,t,!1,null,1),c.AttributeObservable=o,c.AttributeEvents=o},"3.17.2",{requires:["event-custom"]})},729677:function(){YUI.add("autocomplete-base",function(c,b){var t=c.Escape,l=c.Lang,d=c.Array,o=c.Object,e=l.isFunction,a=l.isString,r=l.trim,s=c.Attribute.INVALID_VALUE,n="_functionValidator",i="_sourceSuccess",u="allowBrowserAutocomplete",h="inputNode",g="query",p="queryDelimiter",f="requestTemplate",m="results",_="resultListLocator",v="value",E="valueChange",S="clear",y=g,C=m;function O(){}O.prototype={initializer:function(){c.before(this._bindUIACBase,this,"bindUI"),c.before(this._syncUIACBase,this,"syncUI"),this.publish(S,{defaultFn:this._defClearFn}),this.publish(y,{defaultFn:this._defQueryFn}),this.publish(C,{defaultFn:this._defResultsFn})},destructor:function(){this._acBaseEvents&&this._acBaseEvents.detach(),delete this._acBaseEvents,delete this._cache,delete this._inputNode,delete this._rawSource},clearCache:function(){return this._cache&&(this._cache={}),this},sendRequest:function(A,I){var D,T=this.get("source");return A||A===""?this._set(g,A):A=this.get(g)||"",T&&(I||(I=this.get(f)),D=I?I.call(this,A):A,T.sendRequest({query:A,request:D,callback:{success:c.bind(this._onResponse,this,A)}})),this},_bindUIACBase:function(){var A=this.get(h),I=A&&A.tokenInput;if(I&&(A=I.get(h),this._set("tokenInput",I)),!A){c.error("No inputNode specified.");return}this._inputNode=A,this._acBaseEvents=new c.EventHandle([A.on(E,this._onInputValueChange,this),A.on("blur",this._onInputBlur,this),this.after(u+"Change",this._syncBrowserAutocomplete),this.after("sourceTypeChange",this._afterSourceTypeChange),this.after(E,this._afterValueChange)])},_syncUIACBase:function(){this._syncBrowserAutocomplete(),this.set(v,this.get(h).get(v))},_createArraySource:function(A){var I=this;return{type:"array",sendRequest:function(D){I[i](A.concat(),D)}}},_createFunctionSource:function(A){var I=this;return{type:"function",sendRequest:function(D){var T;function B(N){I[i](N||[],D)}(T=A(D.query,B))&&B(T)}}},_createObjectSource:function(A){var I=this;return{type:"object",sendRequest:function(D){var T=D.query;I[i](o.owns(A,T)?A[T]:[],D)}}},_functionValidator:function(A){return A===null||e(A)},_getObjectValue:function(A,I){if(A){for(var D=0,T=I.length;A&&D<T;D++)A=A[I[D]];return A}},_parseResponse:function(A,I,D){var T={data:D,query:A,results:[]},B=this.get(_),N=[],P=I&&I.results,x,R,w,k,q,F,z,j,X,J,Q;if(P&&B&&(P=B.call(this,P)),P&&P.length){for(x=this.get("resultFilters"),Q=this.get("resultTextLocator"),F=0,z=P.length;F<z;++F)X=P[F],J=Q?Q.call(this,X):X.toString(),N.push({display:t.html(J),raw:X,text:J});for(F=0,z=x.length;F<z;++F){if(N=x[F].call(this,A,N.concat()),!N)return;if(!N.length)break}if(N.length){if(w=this.get("resultFormatter"),q=this.get("resultHighlighter"),j=this.get("maxResults"),j&&j>0&&N.length>j&&(N.length=j),q){if(k=q.call(this,A,N.concat()),!k)return;for(F=0,z=k.length;F<z;++F)X=N[F],X.highlighted=k[F],X.display=X.highlighted}if(w){if(R=w.call(this,A,N.concat()),!R)return;for(F=0,z=R.length;F<z;++F)N[F].display=R[F]}}}T.results=N,this.fire(C,T)},_parseValue:function(A){var I=this.get(p);return I&&(A=A.split(I),A=A[A.length-1]),l.trimLeft(A)},_setEnableCache:function(A){this._cache=A?{}:null},_setLocator:function(A){if(this[n](A))return A;var I=this;return A=A.toString().split("."),function(D){return D&&I._getObjectValue(D,A)}},_setRequestTemplate:function(A){return this[n](A)?A:(A=A.toString(),function(I){return l.sub(A,{query:encodeURIComponent(I)})})},_setResultFilters:function(A){var I,D;return A===null?[]:(I=c.AutoCompleteFilters,D=function(T){return e(T)?T:a(T)&&I&&e(I[T])?I[T]:!1},l.isArray(A)?(A=d.map(A,D),d.every(A,function(T){return!!T})?A:s):(A=D(A),A?[A]:s))},_setResultHighlighter:function(A){var I;return this[n](A)?A:(I=c.AutoCompleteHighlighters,a(A)&&I&&e(I[A])?I[A]:s)},_setSource:function(A){var I=this.get("sourceType")||l.type(A),D;return A&&e(A.sendRequest)||A===null||I==="datasource"?(this._rawSource=A,A):(D=O.SOURCE_TYPES[I])?(this._rawSource=A,l.isString(D)?this[D](A):D(A)):(c.error("Unsupported source type '"+I+"'. Maybe autocomplete-sources isn't loaded?"),s)},_sourceSuccess:function(A,I){I.callback.success({data:A,response:{results:A}})},_syncBrowserAutocomplete:function(){var A=this.get(h);A.get("nodeName").toLowerCase()==="input"&&A.setAttribute("autocomplete",this.get(u)?"on":"off")},_updateValue:function(A){var I=this.get(p),D,T,B;A=l.trimLeft(A),I&&(D=r(I),B=d.map(r(this.get(v)).split(I),r),T=B.length,T>1&&(B[T-1]=A,A=B.join(D+" ")),A=A+D+" "),this.set(v,A)},_afterSourceTypeChange:function(A){this._rawSource&&this.set("source",this._rawSource)},_afterValueChange:function(A){var I=A.newVal,D=this,T=A.src===O.UI_SRC,B,N,P,x;T||D._inputNode.set(v,I),P=D.get("minQueryLength"),x=D._parseValue(I)||"",P>=0&&x.length>=P?T?(B=D.get("queryDelay"),N=function(){D.fire(y,{inputValue:I,query:x,src:A.src})},B?(clearTimeout(D._delay),D._delay=setTimeout(N,B)):N()):D._set(g,x):(clearTimeout(D._delay),D.fire(S,{prevVal:A.prevVal?D._parseValue(A.prevVal):null,src:A.src}))},_onInputBlur:function(A){var I=this.get(p),D,T,B;if(I&&!this.get("allowTrailingDelimiter")){if(I=l.trimRight(I),B=T=this._inputNode.get(v),I)for(;(T=l.trimRight(T))&&(D=T.length-I.length)&&T.lastIndexOf(I)===D;)T=T.substring(0,D);else T=l.trimRight(T);T!==B&&this.set(v,T)}},_onInputValueChange:function(A){var I=A.newVal;I!==this.get(v)&&this.set(v,I,{src:O.UI_SRC})},_onResponse:function(A,I){A===(this.get(g)||"")&&this._parseResponse(A||"",I.response,I.data)},_defClearFn:function(){this._set(g,null),this._set(m,[])},_defQueryFn:function(A){this.sendRequest(A.query)},_defResultsFn:function(A){this._set(m,A[m])}},O.ATTRS={allowBrowserAutocomplete:{value:!1},allowTrailingDelimiter:{value:!1},enableCache:{lazyAdd:!1,setter:"_setEnableCache",value:!0},inputNode:{setter:c.one,writeOnce:"initOnly"},maxResults:{value:0},minQueryLength:{value:1},query:{readOnly:!0,value:null},queryDelay:{value:100},queryDelimiter:{value:null},requestTemplate:{setter:"_setRequestTemplate",value:null},resultFilters:{setter:"_setResultFilters",value:[]},resultFormatter:{validator:n,value:null},resultHighlighter:{setter:"_setResultHighlighter",value:null},resultListLocator:{setter:"_setLocator",value:null},results:{readOnly:!0,value:[]},resultTextLocator:{setter:"_setLocator",value:null},source:{setter:"_setSource",value:null},sourceType:{value:null},tokenInput:{readOnly:!0},value:{value:""}},O._buildCfg={aggregates:["SOURCE_TYPES"],statics:["UI_SRC"]},O.SOURCE_TYPES={array:"_createArraySource",function:"_createFunctionSource",object:"_createObjectSource"},O.UI_SRC=c.Widget&&c.Widget.UI_SRC||"ui",c.AutoCompleteBase=O},"3.17.2",{optional:["autocomplete-sources"],requires:["array-extras","base-build","escape","event-valuechange","node-base"]})},902423:function(){YUI.add("autocomplete-filters",function(c,b){var t=c.Array,l=c.Object,d=c.Text.WordBreak,o=c.mix(c.namespace("AutoCompleteFilters"),{charMatch:function(e,a,r){if(!e)return a;var s=t.unique((r?e:e.toLowerCase()).split(""));return t.filter(a,function(n){return n=n.text,r||(n=n.toLowerCase()),t.every(s,function(i){return n.indexOf(i)!==-1})})},charMatchCase:function(e,a){return o.charMatch(e,a,!0)},phraseMatch:function(e,a,r){return e?(r||(e=e.toLowerCase()),t.filter(a,function(s){return(r?s.text:s.text.toLowerCase()).indexOf(e)!==-1})):a},phraseMatchCase:function(e,a){return o.phraseMatch(e,a,!0)},startsWith:function(e,a,r){return e?(r||(e=e.toLowerCase()),t.filter(a,function(s){return(r?s.text:s.text.toLowerCase()).indexOf(e)===0})):a},startsWithCase:function(e,a){return o.startsWith(e,a,!0)},subWordMatch:function(e,a,r){if(!e)return a;var s=d.getUniqueWords(e,{ignoreCase:!r});return t.filter(a,function(n){var i=r?n.text:n.text.toLowerCase();return t.every(s,function(u){return i.indexOf(u)!==-1})})},subWordMatchCase:function(e,a){return o.subWordMatch(e,a,!0)},wordMatch:function(e,a,r){if(!e)return a;var s={ignoreCase:!r},n=d.getUniqueWords(e,s);return t.filter(a,function(i){var u=t.hash(d.getUniqueWords(i.text,s));return t.every(n,function(h){return l.owns(u,h)})})},wordMatchCase:function(e,a){return o.wordMatch(e,a,!0)}})},"3.17.2",{requires:["array-extras","text-wordbreak"]})},531760:function(){YUI.add("autocomplete-highlighters",function(c,b){var t=c.Array,l=c.Highlight,d=c.mix(c.namespace("AutoCompleteHighlighters"),{charMatch:function(o,e,a){var r=t.unique((a?o:o.toLowerCase()).split(""));return t.map(e,function(s){return l.all(s.text,r,{caseSensitive:a})})},charMatchCase:function(o,e){return d.charMatch(o,e,!0)},phraseMatch:function(o,e,a){return t.map(e,function(r){return l.all(r.text,[o],{caseSensitive:a})})},phraseMatchCase:function(o,e){return d.phraseMatch(o,e,!0)},startsWith:function(o,e,a){return t.map(e,function(r){return l.all(r.text,[o],{caseSensitive:a,startsWith:!0})})},startsWithCase:function(o,e){return d.startsWith(o,e,!0)},subWordMatch:function(o,e,a){var r=c.Text.WordBreak.getUniqueWords(o,{ignoreCase:!a});return t.map(e,function(s){return l.all(s.text,r,{caseSensitive:a})})},subWordMatchCase:function(o,e){return d.subWordMatch(o,e,!0)},wordMatch:function(o,e,a){return t.map(e,function(r){return l.words(r.text,o,{caseSensitive:a})})},wordMatchCase:function(o,e){return d.wordMatch(o,e,!0)}})},"3.17.2",{requires:["array-extras","highlight-base"]})},799819:function(){YUI.add("autocomplete-list",function(c,b){var t=c.Lang,l=c.Node,d=c.Array,o=c.UA.ie&&c.UA.ie<7,e=9,a="_CLASS_ITEM",r="_CLASS_ITEM_ACTIVE",s="_CLASS_ITEM_HOVER",n="_SELECTOR_ITEM",i="activeItem",u="alwaysShowList",h="circular",g="hoveredItem",p="id",f="item",m="list",_="result",v="results",E="visible",S="width",y="select",C=c.Base.create("autocompleteList",c.Widget,[c.AutoCompleteBase,c.WidgetPosition,c.WidgetPositionAlign],{ARIA_TEMPLATE:"<div/>",ITEM_TEMPLATE:"<li/>",LIST_TEMPLATE:"<ul/>",UI_EVENTS:function(){var O=c.merge(c.Node.DOM_EVENTS);return delete O.valuechange,delete O.valueChange,O}(),initializer:function(){var O=this.get("inputNode");if(!O){c.error("No inputNode specified.");return}this._inputNode=O,this._listEvents=[],this.DEF_PARENT_NODE=O.get("parentNode"),this[a]=this.getClassName(f),this[r]=this.getClassName(f,"active"),this[s]=this.getClassName(f,"hover"),this[n]="."+this[a],this.publish(y,{defaultFn:this._defSelectFn})},destructor:function(){for(;this._listEvents.length;)this._listEvents.pop().detach();this._ariaNode&&this._ariaNode.remove().destroy(!0)},bindUI:function(){this._bindInput(),this._bindList()},renderUI:function(){var O=this._createAriaNode(),A=this.get("boundingBox"),I=this.get("contentBox"),D=this._inputNode,T=this._createListNode(),B=D.get("parentNode");D.addClass(this.getClassName("input")).setAttrs({"aria-autocomplete":m,"aria-expanded":!1,"aria-owns":T.get("id")}),B.append(O),o&&A.plug(c.Plugin.Shim),this._ariaNode=O,this._boundingBox=A,this._contentBox=I,this._listNode=T,this._parentNode=B},syncUI:function(){this._syncResults(),this._syncVisibility()},hide:function(){return this.get(u)?this:this.set(E,!1)},selectItem:function(O,A){if(O){if(!O.hasClass(this[a]))return this}else if(O=this.get(i),!O)return this;return this.fire(y,{itemNode:O,originEvent:A||null,result:O.getData(_)}),this},_activateNextItem:function(){var O=this.get(i),A;return O?A=O.next(this[n])||(this.get(h)?null:O):A=this._getFirstItemNode(),this.set(i,A),this},_activatePrevItem:function(){var O=this.get(i),A=O?O.previous(this[n]):this.get(h)&&this._getLastItemNode();return this.set(i,A||null),this},_add:function(O){var A=[];return d.each(t.isArray(O)?O:[O],function(I){A.push(this._createItemNode(I).setData(_,I))},this),A=c.all(A),this._listNode.append(A.toFrag()),A},_ariaSay:function(O,A){var I=this.get("strings."+O);this._ariaNode.set("text",A?t.sub(I,A):I)},_bindInput:function(){var O=this._inputNode,A,I,D;this.get("align")===null&&(D=this.get("tokenInput"),A=D&&D.get("boundingBox")||O,this.set("align",{node:A,points:["tl","bl"]}),!this.get(S)&&(I=A.get("offsetWidth"))&&this.set(S,I)),this._listEvents=this._listEvents.concat([O.after("blur",this._afterListInputBlur,this),O.after("focus",this._afterListInputFocus,this)])},_bindList:function(){this._listEvents=this._listEvents.concat([c.one("doc").after("click",this._afterDocClick,this),c.one("win").after("windowresize",this._syncPosition,this),this.after({mouseover:this._afterMouseOver,mouseout:this._afterMouseOut,activeItemChange:this._afterActiveItemChange,alwaysShowListChange:this._afterAlwaysShowListChange,hoveredItemChange:this._afterHoveredItemChange,resultsChange:this._afterResultsChange,visibleChange:this._afterVisibleChange}),this._listNode.delegate("click",this._onItemClick,this[n],this)])},_clear:function(){this.set(i,null),this._set(g,null),this._listNode.get("children").remove(!0)},_createAriaNode:function(){var O=l.create(this.ARIA_TEMPLATE);return O.addClass(this.getClassName("aria")).setAttrs({"aria-live":"polite",role:"status"})},_createItemNode:function(O){var A=l.create(this.ITEM_TEMPLATE);return A.addClass(this[a]).setAttrs({id:c.stamp(A),role:"option"}).setAttribute("data-text",O.text).append(O.display)},_createListNode:function(){var O=this.get("listNode")||l.create(this.LIST_TEMPLATE);return O.addClass(this.getClassName(m)).setAttrs({id:c.stamp(O),role:"listbox"}),this._set("listNode",O),this.get("contentBox").append(O),O},_getFirstItemNode:function(){return this._listNode.one(this[n])},_getLastItemNode:function(){return this._listNode.one(this[n]+":last-child")},_syncPosition:function(){this._syncUIPosAlign(),this._syncShim()},_syncResults:function(O){O||(O=this.get(v)),this._clear(),O.length&&(this._add(O),this._ariaSay("items_available")),this._syncPosition(),this.get("activateFirstItem")&&!this.get(i)&&this.set(i,this._getFirstItemNode())},_syncShim:o?function(){var O=this._boundingBox.shim;O&&O.sync()}:function(){},_syncVisibility:function(O){this.get(u)&&(O=!0,this.set(E,O)),typeof O>"u"&&(O=this.get(E)),this._inputNode.set("aria-expanded",O),this._boundingBox.set("aria-hidden",!O),O?this._syncPosition():(this.set(i,null),this._set(g,null),this._boundingBox.get("offsetWidth")),c.UA.ie===7&&c.one("body").addClass("yui3-ie7-sucks").removeClass("yui3-ie7-sucks")},_afterActiveItemChange:function(O){var A=this._inputNode,I=O.newVal,D=O.prevVal,T;D&&D._node&&D.removeClass(this[r]),I?(I.addClass(this[r]),A.set("aria-activedescendant",I.get(p))):A.removeAttribute("aria-activedescendant"),this.get("scrollIntoView")&&(T=I||A,(!T.inRegion(c.DOM.viewportRegion(),!0)||!T.inRegion(this._contentBox,!0))&&T.scrollIntoView())},_afterAlwaysShowListChange:function(O){this.set(E,O.newVal||this.get(v).length>0)},_afterDocClick:function(O){var A=this._boundingBox,I=O.target;I!==this._inputNode&&I!==A&&!I.ancestor("#"+A.get("id"),!0)&&this.hide()},_afterHoveredItemChange:function(O){var A=O.newVal,I=O.prevVal;I&&I.removeClass(this[s]),A&&A.addClass(this[s])},_afterListInputBlur:function(){this._listInputFocused=!1,this.get(E)&&!this._mouseOverList&&(this._lastInputKey!==e||!this.get("tabSelect")||!this.get(i))&&this.hide()},_afterListInputFocus:function(){this._listInputFocused=!0},_afterMouseOver:function(O){var A=O.domEvent.target.ancestor(this[n],!0);this._mouseOverList=!0,A&&this._set(g,A)},_afterMouseOut:function(){this._mouseOverList=!1,this._set(g,null)},_afterResultsChange:function(O){this._syncResults(O.newVal),this.get(u)||this.set(E,!!O.newVal.length)},_afterVisibleChange:function(O){this._syncVisibility(!!O.newVal)},_onItemClick:function(O){var A=O.currentTarget;this.set(i,A),this.selectItem(A,O)},_defSelectFn:function(O){var A=O.result.text;this._inputNode.focus(),this._updateValue(A),this._ariaSay("item_selected",{item:A}),this.hide()}},{ATTRS:{activateFirstItem:{value:!1},activeItem:{setter:c.one,value:null},alwaysShowList:{value:!1},circular:{value:!0},hoveredItem:{readOnly:!0,value:null},listNode:{writeOnce:"initOnly",value:null},scrollIntoView:{value:!1},strings:{valueFn:function(){return c.Intl.get("autocomplete-list")}},tabSelect:{value:!0},visible:{value:!1}},CSS_PREFIX:c.ClassNameManager.getClassName("aclist")});c.AutoCompleteList=C,c.AutoComplete=C},"3.17.2",{lang:["en","es","hu","it"],requires:["autocomplete-base","event-resize","node-screen","selector-css3","shim-plugin","widget","widget-position","widget-position-align"],skinnable:!0})},117428:function(){YUI.add("lang/autocomplete-list",function(c){c.Intl.add("autocomplete-list","",{item_selected:"{item} selected.",items_available:"Suggestions are available. Use the up and down arrow keys to select suggestions."})},"3.17.2")},592969:function(){YUI.add("autocomplete-plugin",function(c,b){var t=c.Plugin;function l(d){d.inputNode=d.host,!d.render&&d.render!==!1&&(d.render=!0),l.superclass.constructor.apply(this,arguments)}c.extend(l,c.AutoCompleteList,{},{NAME:"autocompleteListPlugin",NS:"ac",CSS_PREFIX:c.ClassNameManager.getClassName("aclist")}),t.AutoComplete=l,t.AutoCompleteList=l},"3.17.2",{requires:["autocomplete-list","node-pluginhost"]})},695552:function(){YUI.add("autocomplete-sources",function(c,b){var t=c.AutoCompleteBase,l=c.Lang,d="_sourceSuccess",o="maxResults",e="requestTemplate",a="resultListLocator";c.mix(t.prototype,{_YQL_SOURCE_REGEX:/^(?:select|set|use)\s+/i,_beforeCreateObjectSource:function(r){return r instanceof c.Node&&r.get("nodeName").toLowerCase()==="select"?this._createSelectSource(r):c.JSONPRequest&&r instanceof c.JSONPRequest?this._createJSONPSource(r):this._createObjectSource(r)},_createIOSource:function(r){var s={type:"io"},n=this,i,u,h;function g(p){var f=p.request;if(n._cache&&f in n._cache){n[d](n._cache[f],p);return}i&&i.isInProgress()&&i.abort(),i=c.io(n._getXHRUrl(r,p),{on:{success:function(m,_){var v;try{v=c.JSON.parse(_.responseText)}catch(E){c.error("JSON parse error",E)}v&&(n._cache&&(n._cache[f]=v),n[d](v,p))}}})}return s.sendRequest=function(p){u=p,!h&&(h=!0,c.use("io-base","json-parse",function(){s.sendRequest=g,g(u)}))},s},_createJSONPSource:function(r){var s={type:"jsonp"},n=this,i,u;function h(g){var p=g.request,f=g.query;if(n._cache&&p in n._cache){n[d](n._cache[p],g);return}r._config.on.success=function(m){n._cache&&(n._cache[p]=m),n[d](m,g)},r.send(f)}return s.sendRequest=function(g){i=g,!u&&(u=!0,c.use("jsonp",function(){r instanceof c.JSONPRequest||(r=new c.JSONPRequest(r,{format:c.bind(n._jsonpFormatter,n)})),s.sendRequest=h,h(i)}))},s},_createSelectSource:function(r){var s=this;return{type:"select",sendRequest:function(n){var i=[];r.get("options").each(function(u){i.push({html:u.get("innerHTML"),index:u.get("index"),node:u,selected:u.get("selected"),text:u.get("text"),value:u.get("value")})}),s[d](i,n)}}},_createStringSource:function(r){return this._YQL_SOURCE_REGEX.test(r)?this._createYQLSource(r):r.indexOf("{callback}")!==-1?this._createJSONPSource(r):this._createIOSource(r)},_createYQLSource:function(r){var s=this,n={type:"yql"},i,u,h;s.get(a)||s.set(a,s._defaultYQLLocator);function g(p){var f=p.query,m=s.get("yqlEnv"),_=s.get(o),v,E,S;if(S=l.sub(r,{maxResults:_>0?_:1e3,request:p.request,query:f}),s._cache&&S in s._cache){s[d](s._cache[S],p);return}v=function(y){s._cache&&(s._cache[S]=y),s[d](y,p)},E={proto:s.get("yqlProtocol")},h?(h._callback=v,h._opts=E,h._params.q=S,m&&(h._params.env=m)):h=new c.YQLRequest(S,{on:{success:v},allowCache:!1},m?{env:m}:null,E),h.send()}return n.sendRequest=function(p){i=p,u||(u=!0,c.use("yql",function(){n.sendRequest=g,g(i)}))},n},_defaultYQLLocator:function(r){var s=r&&r.query&&r.query.results,n;return s&&l.isObject(s)?(n=c.Object.values(s)||[],s=n.length===1?n[0]:n,l.isArray(s)||(s=[s])):s=[],s},_getXHRUrl:function(r,s){var n=this.get(o);return s.query!==s.request&&(r+=s.request),l.sub(r,{maxResults:n>0?n:1e3,query:encodeURIComponent(s.query)})},_jsonpFormatter:function(r,s,n){var i=this.get(o),u=this.get(e);return u&&(r+=u(n)),l.sub(r,{callback:s,maxResults:i>0?i:1e3,query:encodeURIComponent(n)})}}),c.mix(t.ATTRS,{yqlEnv:{value:null},yqlProtocol:{value:"http"}}),c.mix(t.SOURCE_TYPES,{io:"_createIOSource",jsonp:"_createJSONPSource",object:"_beforeCreateObjectSource",select:"_createSelectSource",string:"_createStringSource",yql:"_createYQLSource"},!0)},"3.17.2",{optional:["io-base","json-parse","jsonp","yql"],requires:["autocomplete-base"]})},922770:function(){YUI.add("base-base",function(c,b){var t=c.AttributeCore,l=c.AttributeExtras,d=c.BaseCore,o=c.BaseObservable;function e(){d.apply(this,arguments),o.apply(this,arguments),l.apply(this,arguments)}e._ATTR_CFG=d._ATTR_CFG.concat(o._ATTR_CFG),e._NON_ATTRS_CFG=d._NON_ATTRS_CFG.concat(o._NON_ATTRS_CFG),e.NAME="base",e.ATTRS=t.protectAttrs(d.ATTRS),e.modifyAttrs=d.modifyAttrs,c.mix(e,d,!1,null,1),c.mix(e,l,!1,null,1),c.mix(e,o,!0,null,1),e.prototype.constructor=e,c.Base=e},"3.17.2",{requires:["attribute-base","base-core","base-observable"]})},230070:function(){YUI.add("base-build",function(c,b){var t=c.BaseCore,l=c.Base,d=c.Lang,o="initializer",e="destructor",a=["_PLUG","_UNPLUG"],r;function s(u,h,g){g[u]&&(h[u]=(h[u]||[]).concat(g[u]))}function n(u,h,g){g._ATTR_CFG&&(h._ATTR_CFG_HASH=null,s.apply(null,arguments))}function i(u,h,g){t.modifyAttrs(h,g.ATTRS)}l._build=function(u,h,g,p,f,m){var _=l._build,v=_._ctor(h,m),E=_._cfg(h,m,g),S=_._mixCust,y=v._yuibuild.dynamic,C,O,A,I,D,T;for(C=0,O=g.length;C<O;C++)A=g[C],I=A.prototype,D=I[o],T=I[e],delete I[o],delete I[e],c.mix(v,A,!0,null,1),S(v,A,E),D&&(I[o]=D),T&&(I[e]=T),v._yuibuild.exts.push(A);return p&&c.mix(v.prototype,p,!0),f&&(c.mix(v,_._clean(f,E),!0),S(v,f,E)),v.prototype.hasImpl=_._impl,y&&(v.NAME=u,v.prototype.constructor=v,v.modifyAttrs=h.modifyAttrs),v},r=l._build,c.mix(r,{_mixCust:function(u,h,g){var p,f,m,_,v,E;if(g&&(p=g.aggregates,f=g.custom,m=g.statics),m&&c.mix(u,h,!0,m),p)for(E=0,v=p.length;E<v;E++)_=p[E],!u.hasOwnProperty(_)&&h.hasOwnProperty(_)&&(u[_]=d.isArray(h[_])?[]:{}),c.aggregate(u,h,!0,[_]);if(f)for(E in f)f.hasOwnProperty(E)&&f[E](E,u,h)},_tmpl:function(u){function h(){h.superclass.constructor.apply(this,arguments)}return c.extend(h,u),h},_impl:function(u){var h=this._getClasses(),g,p,f,m,_,v;for(g=0,p=h.length;g<p;g++)if(f=h[g],f._yuibuild){for(m=f._yuibuild.exts,_=m.length,v=0;v<_;v++)if(m[v]===u)return!0}return!1},_ctor:function(u,h){var g=!(h&&h.dynamic===!1),p=g?r._tmpl(u):u,f=p._yuibuild;return f||(f=p._yuibuild={}),f.id=f.id||null,f.exts=f.exts||[],f.dynamic=g,p},_cfg:function(u,h,g){for(var p=[],f={},m=[],_,v=h&&h.aggregates,E=h&&h.custom,S=h&&h.statics,y=u,C,O;y&&y.prototype;)_=y._buildCfg,_&&(_.aggregates&&(p=p.concat(_.aggregates)),_.custom&&c.mix(f,_.custom,!0),_.statics&&(m=m.concat(_.statics))),y=y.superclass?y.superclass.constructor:null;if(g)for(C=0,O=g.length;C<O;C++)y=g[C],_=y._buildCfg,_&&(_.aggregates&&(p=p.concat(_.aggregates)),_.custom&&c.mix(f,_.custom,!0),_.statics&&(m=m.concat(_.statics)));return v&&(p=p.concat(v)),E&&c.mix(f,h.cfgBuild,!0),S&&(m=m.concat(S)),{aggregates:p,custom:f,statics:m}},_clean:function(u,h){var g,p,f,m=c.merge(u),_=h.aggregates,v=h.custom;for(g in v)m.hasOwnProperty(g)&&delete m[g];for(p=0,f=_.length;p<f;p++)g=_[p],m.hasOwnProperty(g)&&delete m[g];return m}}),l.build=function(u,h,g,p){return r(u,h,g,null,null,p)},l.create=function(u,h,g,p,f){return c.config.win===c.config.win.top&&YUI.stats.markCreate(u),r(u,h,g,p,f)},l.mix=function(u,h){return u._CACHED_CLASS_DATA&&(u._CACHED_CLASS_DATA=null),r(null,u,h,null,null,{dynamic:!1})},t._buildCfg={aggregates:a.concat(),custom:{ATTRS:i,_ATTR_CFG:n,_NON_ATTRS_CFG:s}},l._buildCfg={aggregates:a.concat(),custom:{ATTRS:i,_ATTR_CFG:n,_NON_ATTRS_CFG:s}}},"3.17.2",{requires:["base-base"]})},60471:function(){YUI.add("base-core",function(c,b){var t=c.Object,l=c.Lang,d=".",o="initialized",e="destroyed",a="initializer",r="value",s=Object.prototype.constructor,n="deep",i="shallow",u="destructor",h=c.AttributeCore,g=function(f,m,_){var v;for(v in m)_[v]&&(f[v]=m[v]);return f};function p(f){this._BaseInvoked||(this._BaseInvoked=!0,this._initBase(f))}p._ATTR_CFG=h._ATTR_CFG.concat("cloneDefaultValue"),p._NON_ATTRS_CFG=["plugins"],p.NAME="baseCore",p.ATTRS={initialized:{readOnly:!0,value:!1},destroyed:{readOnly:!0,value:!1}},p.modifyAttrs=function(f,m){typeof f!="function"&&(m=f,f=this);var _,v,E;if(_=f.ATTRS||(f.ATTRS={}),m){f._CACHED_CLASS_DATA=null;for(E in m)m.hasOwnProperty(E)&&(v=_[E]||(_[E]={}),c.mix(v,m[E],!0))}},p.prototype={_initBase:function(f){c.stamp(this),this._initAttribute(f);var m=c.Plugin&&c.Plugin.Host;this._initPlugins&&m&&m.call(this),this._lazyAddAttrs!==!1&&(this._lazyAddAttrs=!0),this.name=this.constructor.NAME,this.init.apply(this,arguments)},_initAttribute:function(){h.call(this)},init:function(f){return this._baseInit(f),this},_baseInit:function(f){this._initHierarchy(f),this._initPlugins&&this._initPlugins(f),this._set(o,!0)},destroy:function(){return this._baseDestroy(),this},_baseDestroy:function(){this._destroyPlugins&&this._destroyPlugins(),this._destroyHierarchy(),this._set(e,!0)},_getClasses:function(){return this._classes||this._initHierarchyData(),this._classes},_getAttrCfgs:function(){return this._attrs||this._initHierarchyData(),this._attrs},_getInstanceAttrCfgs:function(f){var m={},_,v,E,S,y,C,O,A=f._subAttrs,I=this._attrCfgHash();for(C in f)if(f.hasOwnProperty(C)&&C!=="_subAttrs"&&(O=f[C],_=m[C]=g({},O,I),v=_.value,v&&typeof v=="object"&&this._cloneDefaultValue(C,_),A&&A.hasOwnProperty(C))){S=f._subAttrs[C];for(y in S)E=S[y],E.path&&t.setValue(_.value,E.path,E.value)}return m},_filterAdHocAttrs:function(f,m){var _,v=this._nonAttrs,E;if(m){_={};for(E in m)!f[E]&&!v[E]&&m.hasOwnProperty(E)&&(_[E]={value:m[E]})}return _},_initHierarchyData:function(){var f=this.constructor,m=f._CACHED_CLASS_DATA,_,v,E,S,y,C=!f._ATTR_CFG_HASH,O,A={},I=[],D=[];if(_=f,!m){for(;_;){if(I[I.length]=_,_.ATTRS&&(D[D.length]=_.ATTRS),C&&(S=_._ATTR_CFG,y=y||{},S))for(v=0,E=S.length;v<E;v+=1)y[S[v]]=!0;if(O=_._NON_ATTRS_CFG,O)for(v=0,E=O.length;v<E;v++)A[O[v]]=!0;_=_.superclass?_.superclass.constructor:null}C&&(f._ATTR_CFG_HASH=y),m=f._CACHED_CLASS_DATA={classes:I,nonAttrs:A,attrs:this._aggregateAttrs(D)}}this._classes=m.classes,this._attrs=m.attrs,this._nonAttrs=m.nonAttrs},_attrCfgHash:function(){return this.constructor._ATTR_CFG_HASH},_cloneDefaultValue:function(f,m){var _=m.value,v=m.cloneDefaultValue;v===n||v===!0?m.value=c.clone(_):v===i?m.value=c.merge(_):v===void 0&&(s===_.constructor||l.isArray(_))&&(m.value=c.clone(_))},_aggregateAttrs:function(f){var m,_,v,E,S,y,C=this._attrCfgHash(),O,A={};if(f)for(y=f.length-1;y>=0;--y){_=f[y];for(m in _)_.hasOwnProperty(m)&&(E=g({},_[m],C),S=null,m.indexOf(d)!==-1&&(S=m.split(d),m=S.shift()),O=A[m],S&&O&&O.value?(v=A._subAttrs,v||(v=A._subAttrs={}),v[m]||(v[m]={}),v[m][S.join(d)]={value:E.value,path:S}):S||(O?(O.valueFn&&r in E&&(O.valueFn=null),g(O,E,C)):A[m]=E))}return A},_initHierarchy:function(f){var m=this._lazyAddAttrs,_,v,E,S,y,C,O,A,I,D,T,B=[],N=this._getClasses(),P=this._getAttrCfgs(),x=N.length-1;for(y=x;y>=0;y--)if(_=N[y],v=_.prototype,D=_._yuibuild&&_._yuibuild.exts,c.config.win===c.config.win.top&&YUI.stats.markInitializer(_.NAME),v.hasOwnProperty(a)&&(B[B.length]=v.initializer),D)for(C=0,O=D.length;C<O;C++)A=D[C],c.config.win===c.config.win.top&&YUI.stats.markInitializer(A.NAME),A.apply(this,arguments),I=A.prototype,I.hasOwnProperty(a)&&(B[B.length]=I.initializer);for(T=this._getInstanceAttrCfgs(P),this._preAddAttrs&&this._preAddAttrs(T,f,m),this._allowAdHocAttrs&&this.addAttrs(this._filterAdHocAttrs(P,f),f,m),this.addAttrs(T,f,m),E=0,S=B.length;E<S;E++)B[E].apply(this,arguments)},_destroyHierarchy:function(){var f,m,_,v,E,S,y,C,O=this._getClasses();for(_=0,v=O.length;_<v;_++){if(f=O[_],m=f.prototype,y=f._yuibuild&&f._yuibuild.exts,y)for(E=0,S=y.length;E<S;E++)C=y[E].prototype,C.hasOwnProperty(u)&&(c.config.win===c.config.win.top&&YUI.stats.markDestructor(y[E].NAME),C.destructor.apply(this,arguments));m.hasOwnProperty(u)&&(c.config.win===c.config.win.top&&YUI.stats.markDestructor(f.NAME),m.destructor.apply(this,arguments))}},toString:function(){return this.name+"["+c.stamp(this,!0)+"]"}},c.mix(p,h,!1,null,1),p.prototype.constructor=p,c.BaseCore=p},"3.17.2",{requires:["attribute-core"]})},115470:function(){YUI.add("base-observable",function(c,b){var t=c.Lang,l="destroy",d="init",o="bubbleTargets",e="_bubbleTargets",a=c.AttributeObservable,r=c.BaseCore;function s(){}s._ATTR_CFG=a._ATTR_CFG.concat(),s._NON_ATTRS_CFG=["on","after","bubbleTargets"],s.prototype={_initAttribute:function(){r.prototype._initAttribute.apply(this,arguments),a.call(this),this._eventPrefix=this.constructor.EVENT_PREFIX||this.constructor.NAME,this._yuievt.config.prefix=this._eventPrefix},init:function(n){var i=this._getFullType(d),u=this._publish(i);return u.emitFacade=!0,u.fireOnce=!0,u.defaultTargetOnly=!0,u.defaultFn=this._defInitFn,this._preInitEventCfg(n),u._hasPotentialSubscribers()?this.fire(i,{cfg:n}):(this._baseInit(n),u.fired=!0,u.firedWith=[{cfg:n}]),this},_preInitEventCfg:function(n){n&&(n.on&&this.on(n.on),n.after&&this.after(n.after));var i,u,h,g=n&&o in n;if(g||e in this)if(h=g?n&&n.bubbleTargets:this._bubbleTargets,t.isArray(h))for(i=0,u=h.length;i<u;i++)this.addTarget(h[i]);else h&&this.addTarget(h)},destroy:function(){return this.publish(l,{fireOnce:!0,defaultTargetOnly:!0,defaultFn:this._defDestroyFn}),this.fire(l),this.detachAll(),this},_defInitFn:function(n){this._baseInit(n.cfg)},_defDestroyFn:function(n){this._baseDestroy(n.cfg)}},c.mix(s,a,!1,null,1),c.BaseObservable=s},"3.17.2",{requires:["attribute-observable","base-core"]})},585784:function(){YUI.add("base-pluginhost",function(c,b){var t=c.Base,l=c.Plugin.Host;c.mix(t,l,!1,null,1),t.plug=l.plug,t.unplug=l.unplug},"3.17.2",{requires:["base-base","pluginhost"]})},303132:function(){YUI.add("calendar-base",function(c,b){var t=c.ClassNameManager.getClassName,l="calendar",d=t(l,"grid"),o=t(l,"left-grid"),e=t(l,"right-grid"),a=t(l,"body"),r=t(l,"header"),s=t(l,"header-label"),n=t(l,"weekdayrow"),i=t(l,"weekday"),u=t(l,"column-hidden"),h=t(l,"day-selected"),g=t(l,"selection-disabled"),p=t(l,"row"),f=t(l,"day"),m=t(l,"prevmonth-day"),_=t(l,"nextmonth-day"),v=t(l,"anchor"),E=t(l,"pane"),S=t(l,"status"),y=c.Lang,C=y.sub,O=c.Array.each,A=c.Object.each,I=c.Array.indexOf,D=c.Object.hasKey,T=c.Object.setValue,B=c.Object.isEmpty,N=c.DataType.Date;function P(){P.superclass.constructor.apply(this,arguments)}c.CalendarBase=c.extend(P,c.Widget,{_paneProperties:{},_paneNumber:1,_calendarId:null,_selectedDates:{},_rules:{},_filterFunction:null,_storedDateCells:{},initializer:function(){this._paneProperties={},this._calendarId=c.guid("calendar"),this._selectedDates={},B(this._rules)&&(this._rules={}),this._storedDateCells={}},renderUI:function(){var x=this.get("contentBox");x.appendChild(this._initCalendarHTML(this.get("date"))),this.get("showPrevMonth")&&this._afterShowPrevMonthChange(),this.get("showNextMonth")&&this._afterShowNextMonthChange(),this._renderCustomRules(),this._renderSelectedDates(),this.get("boundingBox").setAttribute("aria-labelledby",this._calendarId+"_header")},bindUI:function(){this.after("dateChange",this._afterDateChange),this.after("showPrevMonthChange",this._afterShowPrevMonthChange),this.after("showNextMonthChange",this._afterShowNextMonthChange),this.after("headerRendererChange",this._afterHeaderRendererChange),this.after("customRendererChange",this._afterCustomRendererChange),this.after("enabledDatesRuleChange",this._afterCustomRendererChange),this.after("disabledDatesRuleChange",this._afterCustomRendererChange),this.after("focusedChange",this._afterFocusedChange),this.after("selectionChange",this._renderSelectedDates),this._bindCalendarEvents()},_getSelectedDatesList:function(){var x=[];return A(this._selectedDates,function(R){A(R,function(w){A(w,function(k){x.push(k)},this)},this)},this),x},_getSelectedDatesInMonth:function(x){var R=x.getFullYear(),w=x.getMonth();return D(this._selectedDates,R)&&D(this._selectedDates[R],w)?c.Object.values(this._selectedDates[R][w]):[]},_isNumInList:function(x,R){if(R==="all")return!0;for(var w=R.split(","),k=w.length,q;k--;){if(q=w[k].split("-"),q.length===2&&x>=parseInt(q[0],10)&&x<=parseInt(q[1],10))return!0;if(q.length===1&&parseInt(w[k],10)===x)return!0}return!1},_getRulesForDate:function(x){var R=x.getFullYear(),w=x.getMonth(),k=x.getDate(),q=x.getDay(),F=this._rules,z=[],j,X,J,Q;for(j in F)if(this._isNumInList(R,j)){if(y.isString(F[j]))z.push(F[j]);else for(X in F[j])if(this._isNumInList(w,X)){if(y.isString(F[j][X]))z.push(F[j][X]);else for(J in F[j][X])if(this._isNumInList(k,J))if(y.isString(F[j][X][J]))z.push(F[j][X][J]);else for(Q in F[j][X][J])this._isNumInList(q,Q)&&y.isString(F[j][X][J][Q])&&z.push(F[j][X][J][Q])}}return z},_matchesRule:function(x,R){return I(this._getRulesForDate(x),R)>=0},_canBeSelected:function(x){var R=this.get("enabledDatesRule"),w=this.get("disabledDatesRule");return R?this._matchesRule(x,R):w?!this._matchesRule(x,w):!0},selectDates:function(x){return N.isValidDate(x)?this._addDateToSelection(x):y.isArray(x)&&this._addDatesToSelection(x),this},deselectDates:function(x){return x?N.isValidDate(x)?this._removeDateFromSelection(x):y.isArray(x)&&this._removeDatesFromSelection(x):this._clearSelection(),this},_addDateToSelection:function(x,R){if(x=this._normalizeTime(x),this._canBeSelected(x)){var w=x.getFullYear(),k=x.getMonth(),q=x.getDate();D(this._selectedDates,w)?D(this._selectedDates[w],k)?this._selectedDates[w][k][q]=x:(this._selectedDates[w][k]={},this._selectedDates[w][k][q]=x):(this._selectedDates[w]={},this._selectedDates[w][k]={},this._selectedDates[w][k][q]=x),this._selectedDates=T(this._selectedDates,[w,k,q],x),R||this._fireSelectionChange()}},_addDatesToSelection:function(x){O(x,this._addDateToSelection,this),this._fireSelectionChange()},_addDateRangeToSelection:function(x,R){var w=(R.getTimezoneOffset()-x.getTimezoneOffset())*6e4,k=x.getTime(),q=R.getTime(),F,z,j;for(k>q?(F=k,k=q,q=F+w):q=q-w,z=k;z<=q;z+=864e5)j=new Date(z),j.setHours(12),this._addDateToSelection(j,z);this._fireSelectionChange()},_removeDateFromSelection:function(x,R){var w=x.getFullYear(),k=x.getMonth(),q=x.getDate();D(this._selectedDates,w)&&D(this._selectedDates[w],k)&&D(this._selectedDates[w][k],q)&&(delete this._selectedDates[w][k][q],R||this._fireSelectionChange())},_removeDatesFromSelection:function(x){O(x,this._removeDateFromSelection,this),this._fireSelectionChange()},_removeDateRangeFromSelection:function(x,R){var w=x.getTime(),k=R.getTime(),q;for(q=w;q<=k;q+=864e5)this._removeDateFromSelection(new Date(q),q);this._fireSelectionChange()},_clearSelection:function(x){this._selectedDates={},this.get("contentBox").all("."+h).removeClass(h).setAttribute("aria-selected",!1),x||this._fireSelectionChange()},_fireSelectionChange:function(){this.fire("selectionChange",{newSelection:this._getSelectedDatesList()})},_restoreModifiedCells:function(){var x=this.get("contentBox"),R;for(R in this._storedDateCells)x.one("#"+R).replace(this._storedDateCells[R]),delete this._storedDateCells[R]},_renderCustomRules:function(){if(this.get("contentBox").all("."+f+",."+_).removeClass(g).setAttribute("aria-disabled",!1),!B(this._rules)){var x,R,w;for(x=0;x<this._paneNumber;x++)R=N.addMonths(this.get("date"),x),w=N.listOfDatesInMonth(R),O(w,c.bind(this._renderCustomRulesHelper,this))}},_renderCustomRulesHelper:function(x){var R=this.get("enabledDatesRule"),w=this.get("disabledDatesRule"),k,q;k=this._getRulesForDate(x),k.length>0?((R&&I(k,R)<0||!R&&w&&I(k,w)>=0)&&this._disableDate(x),y.isFunction(this._filterFunction)&&(q=this._dateToNode(x),this._storedDateCells[q.get("id")]=q.cloneNode(!0),this._filterFunction(x,q,k))):R&&this._disableDate(x)},_renderSelectedDates:function(){this.get("contentBox").all("."+h).removeClass(h).setAttribute("aria-selected",!1);var x,R,w;for(x=0;x<this._paneNumber;x++)R=N.addMonths(this.get("date"),x),w=this._getSelectedDatesInMonth(R),O(w,c.bind(this._renderSelectedDatesHelper,this))},_renderSelectedDatesHelper:function(x){this._dateToNode(x).addClass(h).setAttribute("aria-selected",!0)},_disableDate:function(x){this._dateToNode(x).addClass(g).setAttribute("aria-disabled",!0)},_dateToNode:function(x){var R=x.getDate(),w=0,k=R%7,q=(12+x.getMonth()-this.get("date").getMonth())%12,F=this._calendarId+"_pane_"+q,z=this._paneProperties[F].cutoffCol;switch(k){case 0:z>=6?w=12:w=5;break;case 1:w=6;break;case 2:z>0?w=7:w=0;break;case 3:z>1?w=8:w=1;break;case 4:z>2?w=9:w=2;break;case 5:z>3?w=10:w=3;break;case 6:z>4?w=11:w=4;break}return this.get("contentBox").one("#"+this._calendarId+"_pane_"+q+"_"+w+"_"+R)},_nodeToDate:function(x){var R=x.get("id").split("_").reverse(),w=parseInt(R[2],10),k=parseInt(R[0],10),q=N.addMonths(this.get("date"),w),F=q.getFullYear(),z=q.getMonth();return new Date(F,z,k,12,0,0,0)},_bindCalendarEvents:function(){},_normalizeDate:function(x){return x?new Date(x.getFullYear(),x.getMonth(),1,12,0,0,0):null},_normalizeTime:function(x){return x?new Date(x.getFullYear(),x.getMonth(),x.getDate(),12,0,0,0):null},_getCutoffColumn:function(x,R){var w=this._normalizeDate(x).getDay()-R,k=6-(w+7)%7;return k},_turnPrevMonthOn:function(x){var R=x.get("id"),w=this._paneProperties[R].paneDate,k=N.daysInMonth(N.addMonths(w,-1)),q;if(this._paneProperties[R].hasOwnProperty("daysInPrevMonth")||(this._paneProperties[R].daysInPrevMonth=0),k!==this._paneProperties[R].daysInPrevMonth)for(this._paneProperties[R].daysInPrevMonth=k,q=5;q>=0;q--)x.one("#"+R+"_"+q+"_"+(q-5)).set("text",k--)},_turnPrevMonthOff:function(x){var R=x.get("id"),w;for(this._paneProperties[R].daysInPrevMonth=0,w=5;w>=0;w--)x.one("#"+R+"_"+w+"_"+(w-5)).setContent("&nbsp;")},_cleanUpNextMonthCells:function(x){var R=x.get("id");x.one("#"+R+"_6_29").removeClass(_),x.one("#"+R+"_7_30").removeClass(_),x.one("#"+R+"_8_31").removeClass(_),x.one("#"+R+"_0_30").removeClass(_),x.one("#"+R+"_1_31").removeClass(_)},_turnNextMonthOn:function(x){var R=1,w=x.get("id"),k=this._paneProperties[w].daysInMonth,q=this._paneProperties[w].cutoffCol,F,z;for(F=k-22;F<q+7;F++)x.one("#"+w+"_"+F+"_"+(F+23)).set("text",R++).addClass(_);for(z=q,k===31&&q<=1?z=2:k===30&&q===0&&(z=1),F=z;F<q+7;F++)x.one("#"+w+"_"+F+"_"+(F+30)).set("text",R++).addClass(_)},_turnNextMonthOff:function(x){var R=x.get("id"),w=this._paneProperties[R].daysInMonth,k=this._paneProperties[R].cutoffCol,q,F;for(q=w-22;q<=12;q++)x.one("#"+R+"_"+q+"_"+(q+23)).setContent("&nbsp;").addClass(_);for(F=0,w===31&&k<=1?F=2:w===30&&k===0&&(F=1),q=F;q<=12;q++)x.one("#"+R+"_"+q+"_"+(q+30)).setContent("&nbsp;").addClass(_)},_afterShowNextMonthChange:function(){var x=this.get("contentBox"),R=x.one("#"+this._calendarId+"_pane_"+(this._paneNumber-1));this._cleanUpNextMonthCells(R),this.get("showNextMonth")?this._turnNextMonthOn(R):this._turnNextMonthOff(R)},_afterShowPrevMonthChange:function(){var x=this.get("contentBox"),R=x.one("#"+this._calendarId+"_pane_0");this.get("showPrevMonth")?this._turnPrevMonthOn(R):this._turnPrevMonthOff(R)},_afterHeaderRendererChange:function(){var x=this.get("contentBox").one("."+s);x.setContent(this._updateCalendarHeader(this.get("date")))},_afterCustomRendererChange:function(){this._restoreModifiedCells(),this._renderCustomRules()},_afterDateChange:function(){var x=this.get("contentBox"),R=x.one("."+r).one("."+s),w=x.all("."+d),k=this.get("date"),q=0;x.setStyle("visibility","hidden"),R.setContent(this._updateCalendarHeader(k)),this._restoreModifiedCells(),w.each(function(F){this._rerenderCalendarPane(N.addMonths(k,q++),F)},this),this._afterShowPrevMonthChange(),this._afterShowNextMonthChange(),this._renderCustomRules(),this._renderSelectedDates(),x.setStyle("visibility","inherit")},_initCalendarPane:function(x,R){var w=this.get("strings.very_short_weekdays")||["Su","Mo","Tu","We","Th","Fr","Sa"],k=c.Intl.get("datatype-date-format").A,q=this.get("strings.first_weekday")||0,F=this._getCutoffColumn(x,q),z=N.daysInMonth(x),j=["","","","","",""],X={},J,Q,ie,ce,pe,ye,Ae,Je;for(X.weekday_row="",J=q;J<=q+6;J++)X.weekday_row+=C(P.WEEKDAY_TEMPLATE,{short_weekdayname:w[J%7],weekdayname:k[J%7]});for(X.weekday_row_template=C(P.WEEKDAY_ROW_TEMPLATE,X),Q=0;Q<=5;Q++)for(ie=0;ie<=12;ie++)ce=7*Q-5+ie,pe=R+"_"+ie+"_"+ce,ye=f,ce<1?ye=m:ce>z&&(ye=_),(ce<1||ce>z)&&(ce="&nbsp;"),Ae=ie>=F&&ie<F+7?"":u,j[Q]+=C(P.CALDAY_TEMPLATE,{day_content:ce,calendar_col_class:"calendar_col"+ie,calendar_col_visibility_class:Ae,calendar_day_class:ye,calendar_day_id:pe});return X.body_template="",O(j,function(ke){X.body_template+=C(P.CALDAY_ROW_TEMPLATE,{calday_row:ke})}),X.calendar_pane_id=R,X.pane_arialabel=N.format(x,{format:"%B %Y"}),Je=C(C(P.CALENDAR_GRID_TEMPLATE,X),P.CALENDAR_STRINGS),this._paneProperties[R]={cutoffCol:F,daysInMonth:z,paneDate:x},Je},_rerenderCalendarPane:function(x,R){var w=this.get("strings.first_weekday")||0,k=this._getCutoffColumn(x,w),q=N.daysInMonth(x),F=R.get("id"),z,j,X;for(R.setStyle("visibility","hidden"),R.setAttribute("aria-label",N.format(x,{format:"%B %Y"})),z=0;z<=12;z++)if(j=R.all(".calendar_col"+z),j.removeClass(u),z<k||z>=k+7)j.addClass(u);else switch(z){case 0:X=R.one("#"+F+"_0_30"),q>=30?(X.set("text","30"),X.removeClass(_).addClass(f)):(X.setContent("&nbsp;"),X.removeClass(f).addClass(_));break;case 1:X=R.one("#"+F+"_1_31"),q>=31?(X.set("text","31"),X.removeClass(_).addClass(f)):(X.setContent("&nbsp;"),X.removeClass(f).addClass(_));break;case 6:X=R.one("#"+F+"_6_29"),q>=29?(X.set("text","29"),X.removeClass(_).addClass(f)):(X.setContent("&nbsp;"),X.removeClass(f).addClass(_));break;case 7:X=R.one("#"+F+"_7_30"),q>=30?(X.set("text","30"),X.removeClass(_).addClass(f)):(X.setContent("&nbsp;"),X.removeClass(f).addClass(_));break;case 8:X=R.one("#"+F+"_8_31"),q>=31?(X.set("text","31"),X.removeClass(_).addClass(f)):(X.setContent("&nbsp;"),X.removeClass(f).addClass(_));break}this._paneProperties[F].cutoffCol=k,this._paneProperties[F].daysInMonth=q,this._paneProperties[F].paneDate=x,R.setStyle("visibility","inherit")},_updateCalendarHeader:function(x){var R="",w=this.get("headerRenderer");return c.Lang.isString(w)?R=N.format(x,{format:w}):c.Lang.isFunction(w)&&(R=w.call(this,x)),R},_initCalendarHeader:function(x){return C(C(P.HEADER_TEMPLATE,{calheader:this._updateCalendarHeader(x),calendar_id:this._calendarId}),P.CALENDAR_STRINGS)},_initCalendarHTML:function(x){var R={},w=0,k,q;R.header_template=this._initCalendarHeader(x),R.calendar_id=this._calendarId,R.body_template=C(C(P.CONTENT_TEMPLATE,R),P.CALENDAR_STRINGS);function F(){return k=this._initCalendarPane(N.addMonths(x,w),R.calendar_id+"_pane_"+w),w++,k}return q=R.body_template.replace(/\{calendar_grid_template\}/g,c.bind(F,this)),this._paneNumber=w,q}},{CALENDAR_STRINGS:{calendar_grid_class:d,calendar_body_class:a,calendar_hd_class:r,calendar_hd_label_class:s,calendar_weekdayrow_class:n,calendar_weekday_class:i,calendar_row_class:p,calendar_day_class:f,calendar_dayanchor_class:v,calendar_pane_class:E,calendar_right_grid_class:e,calendar_left_grid_class:o,calendar_status_class:S},CONTENT_TEMPLATE:'<div class="yui3-g {calendar_pane_class}" id="{calendar_id}">{header_template}<div class="yui3-u-1">{calendar_grid_template}</div></div>',ONE_PANE_TEMPLATE:'<div class="yui3-g {calendar_pane_class}" id="{calendar_id}">{header_template}<div class="yui3-u-1">{calendar_grid_template}</div></div>',TWO_PANE_TEMPLATE:'<div class="yui3-g {calendar_pane_class}" id="{calendar_id}">{header_template}<div class="yui3-u-1-2"><div class = "{calendar_left_grid_class}">{calendar_grid_template}</div></div><div class="yui3-u-1-2"><div class = "{calendar_right_grid_class}">{calendar_grid_template}</div></div></div>',THREE_PANE_TEMPLATE:'<div class="yui3-g {calendar_pane_class}" id="{calendar_id}">{header_template}<div class="yui3-u-1-3"><div class="{calendar_left_grid_class}">{calendar_grid_template}</div></div><div class="yui3-u-1-3">{calendar_grid_template}</div><div class="yui3-u-1-3"><div class="{calendar_right_grid_class}">{calendar_grid_template}</div></div></div>',CALENDAR_GRID_TEMPLATE:'<table class="{calendar_grid_class}" id="{calendar_pane_id}" role="grid" aria-readonly="true" aria-label="{pane_arialabel}" tabindex="-1"><thead>{weekday_row_template}</thead><tbody>{body_template}</tbody></table>',HEADER_TEMPLATE:'<div class="yui3-g {calendar_hd_class}"><div class="yui3-u {calendar_hd_label_class}" id="{calendar_id}_header" aria-role="heading">{calheader}</div></div>',WEEKDAY_ROW_TEMPLATE:'<tr class="{calendar_weekdayrow_class}" role="row">{weekday_row}</tr>',CALDAY_ROW_TEMPLATE:'<tr class="{calendar_row_class}" role="row">{calday_row}</tr>',WEEKDAY_TEMPLATE:'<th class="{calendar_weekday_class}" role="columnheader" aria-label="{weekdayname}">{short_weekdayname}</th>',CALDAY_TEMPLATE:'<td class="{calendar_col_class} {calendar_day_class} {calendar_col_visibility_class}" id="{calendar_day_id}" role="gridcell" tabindex="-1">{day_content}</td>',NAME:"calendarBase",ATTRS:{date:{value:new Date,setter:function(x){var R=this._normalizeDate(x);return N.areEqual(R,this.get("date"))?this.get("date"):R}},showPrevMonth:{value:!1},showNextMonth:{value:!1},strings:{valueFn:function(){return c.Intl.get("calendar-base")}},headerRenderer:{value:"%B %Y"},enabledDatesRule:{value:null},disabledDatesRule:{value:null},selectedDates:{readOnly:!0,getter:function(){return this._getSelectedDatesList()}},customRenderer:{lazyAdd:!1,value:{},setter:function(x){this._rules=x.rules,this._filterFunction=x.filterFunction}}}})},"3.17.2",{requires:["widget","datatype-date","datatype-date-math","cssgrids"],lang:["de","en","es","es-AR","fr","hu","it","ja","nb-NO","nl","pt-BR","ru","zh-Hans","zh-Hans-CN","zh-Hant","zh-Hant-HK","zh-HANT-TW"],skinnable:!0})},690611:function(){YUI.add("calendar",function(c,b){var t=c.ClassNameManager.getClassName,l="calendar",d=40,o=38,e=37,a=39,r=13,s=32,n=t(l,"day-selected"),i=t(l,"day-highlighted"),u=t(l,"day"),h=t(l,"prevmonth-day"),g=t(l,"nextmonth-day"),p=t(l,"grid"),f=c.DataType.Date,m=t(l,"pane"),_=c.UA.os;function v(){v.superclass.constructor.apply(this,arguments)}c.Calendar=c.extend(v,c.CalendarBase,{_keyEvents:[],_highlightedDateNode:null,_lastSelectedDate:null,initializer:function(){this.plug(c.Plugin.CalendarNavigator),this._keyEvents=[],this._highlightedDateNode=null,this._lastSelectedDate=null},_bindCalendarEvents:function(){var E=this.get("contentBox"),S=E.one("."+m);S.on("selectstart",this._preventSelectionStart),S.delegate("click",this._clickCalendar,"."+u+", ."+h+", ."+g,this),S.delegate("keydown",this._keydownCalendar,"."+p,this),S.delegate("focus",this._focusCalendarGrid,"."+p,this),S.delegate("focus",this._focusCalendarCell,"."+u,this),S.delegate("blur",this._blurCalendarGrid,"."+p+",."+u,this),this.after(["minimumDateChange","maximumDateChange"],this._afterCustomRendererChange)},_preventSelectionStart:function(E){E.preventDefault()},_highlightDateNode:function(E){this._unhighlightCurrentDateNode();var S=this._dateToNode(E);S.focus(),S.addClass(i)},_unhighlightCurrentDateNode:function(){var E=this.get("contentBox").all("."+i);E&&E.removeClass(i)},_getGridNumber:function(E){var S=E.get("id").split("_").reverse();return parseInt(S[0],10)},_blurCalendarGrid:function(){this._unhighlightCurrentDateNode()},_focusCalendarCell:function(E){this._highlightedDateNode=E.target,E.stopPropagation()},_focusCalendarGrid:function(){this._unhighlightCurrentDateNode(),this._highlightedDateNode=null},_keydownCalendar:function(E){var S=this._getGridNumber(E.target),y=this._highlightedDateNode?this._nodeToDate(this._highlightedDateNode):null,C=E.keyCode,O=0,A="",I,D,T,B,N;switch(C){case d:O=7,A="s";break;case o:O=-7,A="n";break;case e:O=-1,A="w";break;case a:O=1,A="e";break;case s:case r:this._highlightedDateNode&&(I=this.get("selectionMode"),I==="single"&&!this._highlightedDateNode.hasClass(n)?(this._clearSelection(!0),this._addDateToSelection(y)):(I==="multiple"||I==="multiple-sticky")&&(this._highlightedDateNode.hasClass(n)?this._removeDateFromSelection(y):this._addDateToSelection(y)));break}(C===d||C===o||C===e||C===a)&&(y||(y=f.addMonths(this.get("date"),S),O=0),E.preventDefault(),D=f.addDays(y,O),T=this.get("date"),B=f.addMonths(this.get("date"),this._paneNumber-1),N=new Date(B),B.setDate(f.daysInMonth(B)),f.isInRange(D,T,B)?this._highlightDateNode(D):f.isGreater(T,D)?f.isGreaterOrEqual(this.get("minimumDate"),T)||(this.set("date",f.addMonths(T,-1)),this._highlightDateNode(D)):f.isGreater(D,B)&&(f.isGreaterOrEqual(N,this.get("maximumDate"))||(this.set("date",f.addMonths(T,1)),this._highlightDateNode(D))))},_clickCalendar:function(E){var S=E.currentTarget,y=S.hasClass(u)&&!S.hasClass(h)&&!S.hasClass(g),C=S.hasClass(n),O;switch(this.get("selectionMode")){case"single":y&&(C||(this._clearSelection(!0),this._addDateToSelection(this._nodeToDate(S))));break;case"multiple-sticky":y&&(C?this._removeDateFromSelection(this._nodeToDate(S)):this._addDateToSelection(this._nodeToDate(S)));break;case"multiple":y&&(!E.metaKey&&!E.ctrlKey&&!E.shiftKey?(this._clearSelection(!0),this._lastSelectedDate=this._nodeToDate(S),this._addDateToSelection(this._lastSelectedDate)):(_==="macintosh"&&E.metaKey||_!=="macintosh"&&E.ctrlKey)&&!E.shiftKey?C?(this._removeDateFromSelection(this._nodeToDate(S)),this._lastSelectedDate=null):(this._lastSelectedDate=this._nodeToDate(S),this._addDateToSelection(this._lastSelectedDate)):(_==="macintosh"&&E.metaKey||_!=="macintosh"&&E.ctrlKey)&&E.shiftKey?this._lastSelectedDate?(O=this._nodeToDate(S),this._addDateRangeToSelection(O,this._lastSelectedDate),this._lastSelectedDate=O):(this._lastSelectedDate=this._nodeToDate(S),this._addDateToSelection(this._lastSelectedDate)):E.shiftKey&&(this._lastSelectedDate?(O=this._nodeToDate(S),this._clearSelection(!0),this._addDateRangeToSelection(O,this._lastSelectedDate),this._lastSelectedDate=O):(this._clearSelection(!0),this._lastSelectedDate=this._nodeToDate(S),this._addDateToSelection(this._lastSelectedDate))));break}y?this.fire("dateClick",{cell:S,date:this._nodeToDate(S)}):S.hasClass(h)?this.fire("prevMonthClick"):S.hasClass(g)&&this.fire("nextMonthClick")},_canBeSelected:function(E){var S=this.get("minimumDate"),y=this.get("maximumDate");return S&&!f.isGreaterOrEqual(E,S)||y&&f.isGreater(E,y)?!1:v.superclass._canBeSelected.call(this,E)},_renderCustomRules:function(){v.superclass._renderCustomRules.call(this);var E=this.get("minimumDate"),S=this.get("maximumDate"),y=[],C,O,A,I;if(!(!E&&!S)){for(I=0;I<this._paneNumber;I++)A=f.addMonths(this.get("date"),I),y=y.concat(f.listOfDatesInMonth(A));if(E)for(C=0,O=y.length;C<O&&!f.isGreaterOrEqual(y[C],E);C++)this._disableDate(y[C]);if(S)for(C=y.length-1;C>=0&&f.isGreater(y[C],S);C--)this._disableDate(y[C])}},subtractMonth:function(E){return this.set("date",f.addMonths(this.get("date"),-1)),E&&E.halt(),this},subtractYear:function(E){return this.set("date",f.addYears(this.get("date"),-1)),E&&E.halt(),this},addMonth:function(E){return this.set("date",f.addMonths(this.get("date"),1)),E&&E.halt(),this},addYear:function(E){return this.set("date",f.addYears(this.get("date"),1)),E&&E.halt(),this}},{NAME:"calendar",ATTRS:{selectionMode:{value:"single"},date:{value:new Date,lazyAdd:!1,setter:function(E){var S=this._normalizeDate(E),y=f.addMonths(S,this._paneNumber-1),C=this.get("minimumDate"),O=this.get("maximumDate");if((!C||f.isGreaterOrEqual(S,C))&&(!O||f.isGreaterOrEqual(O,y)))return S;if(C&&f.isGreater(C,S))return this._normalizeDate(C);if(O&&f.isGreater(y,O))return f.addMonths(this._normalizeDate(O),1-this._paneNumber)}},minimumDate:{value:null,setter:function(E){if(c.Lang.isDate(E)){var S=this.get("date"),y=this._normalizeTime(E);return S&&!f.isGreaterOrEqual(S,y)&&this.set("date",E),y}else return null}},maximumDate:{value:null,setter:function(E){if(c.Lang.isDate(E)){var S=this.get("date");return S&&!f.isGreaterOrEqual(E,f.addMonths(S,this._paneNumber-1))&&this.set("date",f.addMonths(this._normalizeDate(E),1-this._paneNumber)),this._normalizeTime(E)}else return null}}}})},"3.17.2",{requires:["calendar-base","calendarnavigator"],skinnable:!0})},789821:function(){YUI.add("calendarnavigator",function(c,b){var t="contentBox",l="host",d=c.ClassNameManager.getClassName,o=c.Lang.sub,e=c.Node,a=e.create,r="calendar",s="calendarnav",n=d(r,"header"),i=d(s,"prevmonth"),u=d(s,"nextmonth"),h=d(s,"month-disabled"),g=c.DataType.Date;function p(){p.superclass.constructor.apply(this,arguments)}p.NS="navigator",p.NAME="pluginCalendarNavigator",p.ATTRS={shiftByMonths:{value:1}},p.CALENDARNAV_STRINGS={prev_month_class:i,next_month_class:u},p.PREV_MONTH_CONTROL_TEMPLATE='<a class="yui3-u {prev_month_class}" role="button" aria-label="{prev_month_arialabel}" tabindex="0" />',p.NEXT_MONTH_CONTROL_TEMPLATE='<a class="yui3-u {next_month_class}" role="button" aria-label="{next_month_arialabel}" tabindex="0" />',c.extend(p,c.Plugin.Base,{_eventAttachments:{},_controls:{},initializer:function(){this._controls={},this._eventAttachments={},this.afterHostMethod("renderUI",this._initNavigationControls)},destructor:function(){},_focusNavigation:function(f){f.currentTarget.focus()},_subtractMonths:function(f){if(f.type==="click"||f.type==="keydown"&&(f.keyCode===13||f.keyCode===32)){var m=this.get(l),_=m.get("date");m.set("date",g.addMonths(_,-1*this.get("shiftByMonths"))),f.preventDefault()}},_addMonths:function(f){if(f.type==="click"||f.type==="keydown"&&(f.keyCode===13||f.keyCode===32)){var m=this.get(l),_=m.get("date");m.set("date",g.addMonths(_,this.get("shiftByMonths"))),f.preventDefault()}},_updateControlState:function(){var f=this.get(l),m=f.get("date"),_=g.addMonths(m,f._paneNumber-1),v=f._normalizeDate(f.get("minimumDate")),E=f._normalizeDate(f.get("maximumDate"));g.areEqual(v,m)?(this._eventAttachments.prevMonth&&(this._eventAttachments.prevMonth.detach(),this._eventAttachments.prevMonth=!1),this._controls.prevMonth.hasClass(h)||this._controls.prevMonth.addClass(h).setAttribute("aria-disabled","true")):(this._eventAttachments.prevMonth||(this._eventAttachments.prevMonth=this._controls.prevMonth.on(["click","keydown"],this._subtractMonths,this)),this._controls.prevMonth.hasClass(h)&&this._controls.prevMonth.removeClass(h).setAttribute("aria-disabled","false")),g.areEqual(E,_)?(this._eventAttachments.nextMonth&&(this._eventAttachments.nextMonth.detach(),this._eventAttachments.nextMonth=!1),this._controls.nextMonth.hasClass(h)||this._controls.nextMonth.addClass(h).setAttribute("aria-disabled","true")):(this._eventAttachments.nextMonth||(this._eventAttachments.nextMonth=this._controls.nextMonth.on(["click","keydown"],this._addMonths,this)),this._controls.nextMonth.hasClass(h)&&this._controls.nextMonth.removeClass(h).setAttribute("aria-disabled","false")),this._controls.prevMonth.on(["click","keydown"],this._focusNavigation,this),this._controls.nextMonth.on(["click","keydown"],this._focusNavigation,this)},_renderPrevControls:function(){var f=a(o(p.PREV_MONTH_CONTROL_TEMPLATE,p.CALENDARNAV_STRINGS));return f.on("selectstart",this.get(l)._preventSelectionStart),f},_renderNextControls:function(){var f=a(o(p.NEXT_MONTH_CONTROL_TEMPLATE,p.CALENDARNAV_STRINGS));return f.on("selectstart",this.get(l)._preventSelectionStart),f},_initNavigationControls:function(){var f=this.get(l),m=f.get(t).one("."+n);p.CALENDARNAV_STRINGS.prev_month_arialabel="Go to previous month",p.CALENDARNAV_STRINGS.next_month_arialabel="Go to next month",this._controls.prevMonth=this._renderPrevControls(),this._controls.nextMonth=this._renderNextControls(),this._updateControlState(),f.after(["dateChange","minimumDateChange","maximumDateChange"],this._updateControlState,this),m.prepend(this._controls.prevMonth),m.append(this._controls.nextMonth)}}),c.namespace("Plugin").CalendarNavigator=p},"3.17.2",{requires:["plugin","classnamemanager","datatype-date","node"],skinnable:!0})},521956:function(){YUI.add("classnamemanager",function(c,b){var t="classNamePrefix",l="classNameDelimiter",d=c.config;d[t]=d[t]||"yui3",d[l]=d[l]||"-",c.ClassNameManager=function(){var o=d[t],e=d[l];return{getClassName:c.cached(function(){var a=c.Array(arguments);return a[a.length-1]!==!0?a.unshift(o):a.pop(),a.join(e)})}}()},"3.17.2",{requires:["yui-base"]})},2986:function(){YUI.add("clickable-rail",function(c,b){function t(){this._initClickableRail()}c.ClickableRail=c.mix(t,{prototype:{_initClickableRail:function(){this._evtGuid=this._evtGuid||c.guid()+"|",this.publish("railMouseDown",{defaultFn:this._defRailMouseDownFn}),this.after("render",this._bindClickableRail),this.on("destroy",this._unbindClickableRail)},_bindClickableRail:function(){this._dd.addHandle(this.rail),this.rail.on(this._evtGuid+c.DD.Drag.START_EVENT,c.bind(this._onRailMouseDown,this))},_unbindClickableRail:function(){if(this.get("rendered")){var l=this.get("contentBox"),d=l.one("."+this.getClassName("rail"));d.detach(this.evtGuid+"*")}},_onRailMouseDown:function(l){this.get("clickableRail")&&!this.get("disabled")&&(this.fire("railMouseDown",{ev:l}),this.thumb.focus())},_defRailMouseDownFn:function(l){l=l.ev;var d=this._resolveThumb(l),o=this._key.xyIndex,e=parseFloat(this.get("length"),10),a,r,s;d&&(a=d.get("dragNode"),r=parseFloat(a.getStyle(this._key.dim),10),s=this._getThumbDestination(l,a),s=s[o]-this.rail.getXY()[o],s=Math.min(Math.max(s,0),e-r),this._uiMoveThumb(s,{source:"rail"}),l.target=this.thumb.one("img")||this.thumb,d._handleMouseDownEvent(l))},_resolveThumb:function(l){return this._dd},_getThumbDestination:function(l,d){var o=d.get("offsetWidth"),e=d.get("offsetHeight");return[l.pageX-Math.round(o/2),l.pageY-Math.round(e/2)]}},ATTRS:{clickableRail:{value:!0,validator:c.Lang.isBoolean}}},!0)},"3.17.2",{requires:["slider-base"]})},794783:function(){YUI.add("color-base",function(c,b){var t=/^#?([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})(\ufffe)?/,l=/^#?([\da-fA-F]{1})([\da-fA-F]{1})([\da-fA-F]{1})(\ufffe)?/,d=/rgba?\(([\d]{1,3}), ?([\d]{1,3}), ?([\d]{1,3}),? ?([.\d]*)?\)/,o={HEX:"hex",RGB:"rgb",RGBA:"rgba"},e={hex:"toHex",rgb:"toRGB",rgba:"toRGBA"};c.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},REGEX_HEX:t,REGEX_HEX3:l,REGEX_RGB:d,re_RGB:d,re_hex:t,re_hex3:l,STR_HEX:"#{*}{*}{*}",STR_RGB:"rgb({*}, {*}, {*})",STR_RGBA:"rgba({*}, {*}, {*}, {*})",TYPES:o,CONVERTS:e,convert:function(a,r){var s=c.Color.CONVERTS[r.toLowerCase()],n=a;return s&&c.Color[s]&&(n=c.Color[s](a)),n},toHex:function(a){var r=c.Color._convertTo(a,"hex"),s=r.toLowerCase()==="transparent";return r.charAt(0)!=="#"&&!s&&(r="#"+r),s?r.toLowerCase():r.toUpperCase()},toRGB:function(a){var r=c.Color._convertTo(a,"rgb");return r.toLowerCase()},toRGBA:function(a){var r=c.Color._convertTo(a,"rgba");return r.toLowerCase()},toArray:function(a){var r=c.Color.findType(a).toUpperCase(),s,n,i,u;return r==="HEX"&&a.length<5&&(r="HEX3"),r.charAt(r.length-1)==="A"&&(r=r.slice(0,-1)),s=c.Color["REGEX_"+r],s&&(n=s.exec(a)||[],i=n.length,i&&(n.shift(),i--,r==="HEX3"&&(n[0]+=n[0],n[1]+=n[1],n[2]+=n[2]),u=n[i-1],u||(n[i-1]=1))),n},fromArray:function(a,r){if(a=a.concat(),typeof r>"u")return a.join(", ");var s="{*}";for(r=c.Color["STR_"+r.toUpperCase()],a.length===3&&r.match(/\{\*\}/g).length===4&&a.push(1);r.indexOf(s)>=0&&a.length>0;)r=r.replace(s,a.shift());return r},findType:function(a){if(c.Color.KEYWORDS[a])return"keyword";var r=a.indexOf("("),s;return r>0&&(s=a.substr(0,r)),s&&c.Color.TYPES[s.toUpperCase()]?c.Color.TYPES[s.toUpperCase()]:"hex"},_getAlpha:function(a){var r,s=c.Color.toArray(a);return s.length>3&&(r=s.pop()),+r||1},_keywordToHex:function(a){var r=c.Color.KEYWORDS[a];if(r)return r},_convertTo:function(a,r){if(a==="transparent")return a;var s=c.Color.findType(a),n=r,i,u,h,g;return s==="keyword"&&(a=c.Color._keywordToHex(a),s="hex"),s==="hex"&&a.length<5&&(a.charAt(0)==="#"&&(a=a.substr(1)),a="#"+a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),s===r||(s.charAt(s.length-1)==="a"&&(s=s.slice(0,-1)),i=r.charAt(r.length-1)==="a",i&&(r=r.slice(0,-1),u=c.Color._getAlpha(a)),g=r.charAt(0).toUpperCase()+r.substr(1).toLowerCase(),h=c.Color["_"+s+"To"+g],h||s!=="rgb"&&r!=="rgb"&&(a=c.Color["_"+s+"ToRgb"](a),s="rgb",h=c.Color["_"+s+"To"+g]),h&&(a=h(a,i)),i&&(c.Lang.isArray(a)||(a=c.Color.toArray(a)),a.push(u),a=c.Color.fromArray(a,n.toUpperCase()))),a},_hexToRgb:function(a,r){var s,n,i;return a.charAt(0)==="#"&&(a=a.substr(1)),a=parseInt(a,16),s=a>>16,n=a>>8&255,i=a&255,r?[s,n,i]:"rgb("+s+", "+n+", "+i+")"},_rgbToHex:function(a){var r=c.Color.toArray(a),s=r[2]|r[1]<<8|r[0]<<16;for(s=(+s).toString(16);s.length<6;)s="0"+s;return"#"+s}}},"3.17.2",{requires:["yui-base"]})},975042:function(){YUI.add("cookie",function(c,b){var t=c.Lang,l=c.Object,d=null,o=t.isString,e=t.isObject,a=t.isUndefined,r=t.isFunction,s=encodeURIComponent,n=decodeURIComponent,i=c.config.doc;function u(p){throw new TypeError(p)}function h(p){(!o(p)||p==="")&&u("Cookie name must be a non-empty string.")}function g(p){(!o(p)||p==="")&&u("Subcookie name must be a non-empty string.")}c.Cookie={_createCookieString:function(p,f,m,_){_=_||{};var v=s(p)+"="+(m?s(f):f),E=_.expires,S=_.path,y=_.domain;return e(_)&&(E instanceof Date&&(v+="; expires="+E.toUTCString()),o(S)&&S!==""&&(v+="; path="+S),o(y)&&y!==""&&(v+="; domain="+y),_.secure===!0&&(v+="; secure")),v},_createCookieHashString:function(p){e(p)||u("Cookie._createCookieHashString(): Argument must be an object.");var f=[];return l.each(p,function(m,_){!r(m)&&!a(m)&&f.push(s(_)+"="+s(String(m)))}),f.join("&")},_parseCookieHash:function(p){var f=p.split("&"),m=d,_={};if(p.length)for(var v=0,E=f.length;v<E;v++)m=f[v].split("="),_[n(m[0])]=n(m[1]);return _},_parseCookieString:function(p,f,m){var _={};if(o(p)&&p.length>0)for(var v=f===!1?function(I){return I}:n,E=p.split(/;\s/g),S=d,y=d,C=d,O=0,A=E.length;O<A;O++){if(C=E[O].match(/([^=]+)=/i),C instanceof Array)try{S=n(C[1]),y=v(E[O].substring(C[1].length+1))}catch{}else S=n(E[O]),y="";!a(m)&&m.reverseCookieLoading?a(_[S])&&(_[S]=y):_[S]=y}return _},_setDoc:function(p){i=p},exists:function(p){h(p);var f=this._parseCookieString(i.cookie,!0);return f.hasOwnProperty(p)},get:function(p,f){h(p);var m,_,v;return r(f)?(v=f,f={}):e(f)?v=f.converter:f={},m=this._parseCookieString(i.cookie,!f.raw,f),_=m[p],a(_)?d:r(v)?v(_):_},getSub:function(p,f,m,_){var v=this.getSubs(p,_);return v!==d?(g(f),a(v[f])?d:r(m)?m(v[f]):v[f]):d},getSubs:function(p,f){h(p);var m=this._parseCookieString(i.cookie,!1,f);return o(m[p])?this._parseCookieHash(m[p]):d},remove:function(p,f){return h(p),f=c.merge(f||{},{expires:new Date(0)}),this.set(p,"",f)},removeSub:function(p,f,m){h(p),g(f),m=m||{};var _=this.getSubs(p);if(e(_)&&_.hasOwnProperty(f))if(delete _[f],m.removeIfEmpty){for(var v in _)if(_.hasOwnProperty(v)&&!r(_[v])&&!a(_[v]))return this.setSubs(p,_,m);return this.remove(p,m)}else return this.setSubs(p,_,m);else return""},set:function(p,f,m){h(p),a(f)&&u("Cookie.set(): Value cannot be undefined."),m=m||{};var _=this._createCookieString(p,f,!m.raw,m);return i.cookie=_,_},setSub:function(p,f,m,_){h(p),g(f),a(m)&&u("Cookie.setSub(): Subcookie value cannot be undefined.");var v=this.getSubs(p);return e(v)||(v={}),v[f]=m,this.setSubs(p,v,_)},setSubs:function(p,f,m){h(p),e(f)||u("Cookie.setSubs(): Cookie value must be an object.");var _=this._createCookieString(p,this._createCookieHashString(f),!1,m);return i.cookie=_,_}}},"3.17.2",{requires:["yui-base"]})},525218:function(){YUI.add("datatype-date-format",function(c,b){var t=function(d,o,e){for(typeof e>"u"&&(e=10),o=o+"";parseInt(d,10)<e&&e>1;e/=10)d=o+d;return d.toString()},l={formats:{a:function(d,o){return o.a[d.getDay()]},A:function(d,o){return o.A[d.getDay()]},b:function(d,o){return o.b[d.getMonth()]},B:function(d,o){return o.B[d.getMonth()]},C:function(d){return t(parseInt(d.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(d){return t(parseInt(l.formats.G(d)%100,10),0)},G:function(d){var o=d.getFullYear(),e=parseInt(l.formats.V(d),10),a=parseInt(l.formats.W(d),10);return a>e?o++:a===0&&e>=52&&o--,o},H:["getHours","0"],I:function(d){var o=d.getHours()%12;return t(o===0?12:o,0)},j:function(d){var o=new Date(""+d.getFullYear()+"/1/1 GMT"),e=new Date(""+d.getFullYear()+"/"+(d.getMonth()+1)+"/"+d.getDate()+" GMT"),a=e-o,r=parseInt(a/6e4/60/24,10)+1;return t(r,0,100)},k:["getHours"," "],l:function(d){var o=d.getHours()%12;return t(o===0?12:o," ")},m:function(d){return t(d.getMonth()+1,0)},M:["getMinutes","0"],p:function(d,o){return o.p[d.getHours()>=12?1:0]},P:function(d,o){return o.P[d.getHours()>=12?1:0]},s:function(d,o){return parseInt(d.getTime()/1e3,10)},S:["getSeconds","0"],u:function(d){var o=d.getDay();return o===0?7:o},U:function(d){var o=parseInt(l.formats.j(d),10),e=6-d.getDay(),a=parseInt((o+e)/7,10);return t(a,0)},V:function(d){var o=parseInt(l.formats.W(d),10),e=new Date(""+d.getFullYear()+"/1/1").getDay(),a=o+(e>4||e<=1?0:1);return a===53&&new Date(""+d.getFullYear()+"/12/31").getDay()<4?a=1:a===0&&(a=l.formats.V(new Date(""+(d.getFullYear()-1)+"/12/31"))),t(a,0)},w:"getDay",W:function(d){var o=parseInt(l.formats.j(d),10),e=7-l.formats.u(d),a=parseInt((o+e)/7,10);return t(a,0,10)},y:function(d){return t(d.getFullYear()%100,0)},Y:"getFullYear",z:function(d){var o=d.getTimezoneOffset(),e=t(parseInt(Math.abs(o/60),10),0),a=t(Math.abs(o%60),0);return(o>0?"-":"+")+e+a},Z:function(d){var o=d.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");return o.length>4&&(o=l.formats.z(d)),o},"%":function(d){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:`
`,r:"%I:%M:%S %p",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(d,o){if(o=o||{},!c.Lang.isDate(d))return c.Lang.isValue(d)?d:"";var e,a,r,s,n;e=o.format||"%Y-%m-%d",a=c.Intl.get("datatype-date-format");for(var i=function(g,p){if(r&&p==="r")return a[p];var f=l.aggregates[p];return f==="locale"?a[p]:f},u=function(g,p){var f=l.formats[p];switch(c.Lang.type(f)){case"string":return d[f]();case"function":return f.call(d,d,a);case"array":if(c.Lang.type(f[0])==="string")return t(d[f[0]](),f[1]);default:return p}};e.match(/%[cDFhnrRtTxX]/);)e=e.replace(/%([cDFhnrRtTxX])/g,i);var h=e.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,u);return i=u=void 0,h}};c.mix(c.namespace("Date"),l),c.namespace("DataType"),c.DataType.Date=c.Date},"3.17.2",{lang:["ar","ar-JO","ca","ca-ES","da","da-DK","de","de-AT","de-DE","el","el-GR","en","en-AU","en-CA","en-GB","en-IE","en-IN","en-JO","en-MY","en-NZ","en-PH","en-SG","en-US","es","es-AR","es-BO","es-CL","es-CO","es-EC","es-ES","es-MX","es-PE","es-PY","es-US","es-UY","es-VE","fi","fi-FI","fr","fr-BE","fr-CA","fr-FR","hi","hi-IN","hu","id","id-ID","it","it-IT","ja","ja-JP","ko","ko-KR","ms","ms-MY","nb","nb-NO","nl","nl-BE","nl-NL","pl","pl-PL","pt","pt-BR","ro","ro-RO","ru","ru-RU","sv","sv-SE","th","th-TH","tr","tr-TR","vi","vi-VN","zh-Hans","zh-Hans-CN","zh-Hant","zh-Hant-HK","zh-Hant-TW"]})},422059:function(){YUI.add("datatype-date-math",function(c,b){var t=c.Lang;c.mix(c.namespace("Date"),{isValidDate:function(l){return!!(t.isDate(l)&&isFinite(l)&&l!="Invalid Date"&&!isNaN(l)&&l!=null)},areEqual:function(l,d){return this.isValidDate(l)&&this.isValidDate(d)&&l.getTime()==d.getTime()},isGreater:function(l,d){return this.isValidDate(l)&&this.isValidDate(d)&&l.getTime()>d.getTime()},isGreaterOrEqual:function(l,d){return this.isValidDate(l)&&this.isValidDate(d)&&l.getTime()>=d.getTime()},isInRange:function(l,d,o){return this.isGreaterOrEqual(l,d)&&this.isGreaterOrEqual(o,l)},addDays:function(l,d){return new Date(l.getTime()+864e5*d)},addMonths:function(l,d){var o=l.getFullYear(),e=l.getMonth()+d;o=Math.floor(o+e/12),e=(e%12+12)%12;var a=new Date(l.getTime());return a.setFullYear(o),a.setMonth(e),a},addYears:function(l,d){var o=l.getFullYear()+d,e=new Date(l.getTime());return e.setFullYear(o),e},listOfDatesInMonth:function(l){if(!this.isValidDate(l))return[];for(var d=this.daysInMonth(l),o=l.getFullYear(),e=l.getMonth(),a=[],r=1;r<=d;r++)a.push(new Date(o,e,r,12,0,0));return a},daysInMonth:function(l){if(!this.isValidDate(l))return 0;var d=l.getMonth(),o=[31,28,31,30,31,30,31,31,30,31,30,31];if(d!=1)return o[d];var e=l.getFullYear();return e%400===0?29:e%100===0?28:e%4===0?29:28}}),c.namespace("DataType"),c.DataType.Date=c.Date},"3.17.2",{requires:["yui-base"]})},810873:function(){YUI.add("datatype-date-parse",function(c,b){c.mix(c.namespace("Date"),{parse:function(t){var l=new Date(+t||t);return c.Lang.isDate(l)?l:null}}),c.namespace("Parsers").date=c.Date.parse,c.namespace("DataType"),c.DataType.Date=c.Date},"3.17.2")},788589:function(){YUI.add("datatype-number-parse",function(c,b){var t=c.Escape.regex,l="\\s*";c.mix(c.namespace("Number"),{_buildParser:c.cached(function(d,o,e,a){var r=[],s;return d&&r.push("^"+l+t(d)+l),o&&r.push(l+t(o)+l+"$"),e&&r.push(t(e)+"(?=\\d)"),s=new RegExp("(?:"+r.join("|")+")","g"),a==="."&&(a=null),function(n){return n=n.replace(s,""),a?n.replace(a,"."):n}}),parse:function(d,o){var e;return o&&typeof d=="string"&&(e=this._buildParser(o.prefix,o.suffix,o.thousandsSeparator,o.decimalSeparator),d=e(d)),typeof d=="string"&&c.Lang.trim(d)!==""&&(d=+d),(typeof d!="number"||!isFinite(d))&&(d=null),d}}),c.namespace("Parsers").number=c.Number.parse,c.namespace("DataType"),c.DataType.Number=c.Number},"3.17.2",{requires:["escape"]})},95084:function(){YUI.add("datatype-xml-parse",function(c,b){c.mix(c.namespace("XML"),{parse:function(t){var l=null,d;return typeof t=="string"&&(d=c.config.win,d.ActiveXObject!==void 0?(l=new ActiveXObject("Microsoft.XMLDOM"),l.async=!1,l.loadXML(t)):d.DOMParser!==void 0?l=new DOMParser().parseFromString(t,"text/xml"):d.Windows!==void 0&&(l=new Windows.Data.Xml.Dom.XmlDocument,l.loadXml(t))),l===null||l.documentElement===null||l.documentElement.nodeName,l}}),c.namespace("Parsers").xml=c.XML.parse,c.namespace("DataType"),c.DataType.XML=c.XML},"3.17.2")},89650:function(){YUI.add("dd-constrain",function(c,b){var t="dragNode",l="offsetHeight",d="offsetWidth",o="host",e="tickXArray",a="tickYArray",r=c.DD.DDM,s="top",n="right",i="bottom",u="left",h="view",g=null,p="drag:tickAlignX",f="drag:tickAlignY",m=function(){this._lazyAddAttrs=!1,m.superclass.constructor.apply(this,arguments)};m.NAME="ddConstrained",m.NS="con",m.ATTRS={host:{},stickX:{value:!1},stickY:{value:!1},tickX:{value:!1},tickY:{value:!1},tickXArray:{value:!1},tickYArray:{value:!1},gutter:{value:"0",setter:function(_){return c.DD.DDM.cssSizestoObject(_)}},constrain:{value:h,setter:function(_){var v=c.one(_);return v&&(_=v),_}},constrain2region:{setter:function(_){return this.set("constrain",_)}},constrain2node:{setter:function(_){return this.set("constrain",c.one(_))}},constrain2view:{setter:function(){return this.set("constrain",h)}},cacheRegion:{value:!0}},g={_lastTickXFired:null,_lastTickYFired:null,initializer:function(){this._createEvents(),this._eventHandles=[this.get(o).on("drag:end",c.bind(this._handleEnd,this)),this.get(o).on("drag:start",c.bind(this._handleStart,this)),this.get(o).after("drag:align",c.bind(this.align,this)),this.get(o).after("drag:drag",c.bind(this.drag,this))]},destructor:function(){c.Array.each(this._eventHandles,function(_){_.detach()}),this._eventHandles.length=0},_createEvents:function(){var _=[p,f];c.Array.each(_,function(v){this.publish(v,{type:v,emitFacade:!0,bubbles:!0,queuable:!1,prefix:"drag"})},this)},_handleEnd:function(){this._lastTickYFired=null,this._lastTickXFired=null},_handleStart:function(){this.resetCache()},_regionCache:null,_cacheRegion:function(){this._regionCache=this.get("constrain").get("region")},resetCache:function(){this._regionCache=null},_getConstraint:function(){var _=this.get("constrain"),v=this.get("gutter"),E;return _&&(_ instanceof c.Node?(this._regionCache||(this._eventHandles.push(c.on("resize",c.bind(this._cacheRegion,this),c.config.win)),this._cacheRegion()),E=c.clone(this._regionCache),this.get("cacheRegion")||this.resetCache()):c.Lang.isObject(_)&&(E=c.clone(_))),(!_||!E)&&(_=h),_===h&&(E=this.get(o).get(t).get("viewportRegion")),c.Object.each(v,function(S,y){y===n||y===i?E[y]-=S:E[y]+=S}),E},getRegion:function(_){var v={},E=null,S=null,y=this.get(o);return v=this._getConstraint(),_&&(E=y.get(t).get(l),S=y.get(t).get(d),v[n]=v[n]-S,v[i]=v[i]-E),v},_checkRegion:function(_){var v=_,E=this.getRegion(),S=this.get(o),y=S.get(t).get(l),C=S.get(t).get(d);return v[1]>E[i]-y&&(_[1]=E[i]-y),E[s]>v[1]&&(_[1]=E[s]),v[0]>E[n]-C&&(_[0]=E[n]-C),E[u]>v[0]&&(_[0]=E[u]),_},inRegion:function(_){_=_||this.get(o).get(t).getXY();var v=this._checkRegion([_[0],_[1]]),E=!1;return _[0]===v[0]&&_[1]===v[1]&&(E=!0),E},align:function(){var _=this.get(o),v=[_.actXY[0],_.actXY[1]],E=this.getRegion(!0);this.get("stickX")&&(v[1]=_.startXY[1]-_.deltaXY[1]),this.get("stickY")&&(v[0]=_.startXY[0]-_.deltaXY[0]),E&&(v=this._checkRegion(v)),v=this._checkTicks(v,E),_.actXY=v},drag:function(){var _=this.get(o),v=this.get("tickX"),E=this.get("tickY"),S=[_.actXY[0],_.actXY[1]];(c.Lang.isNumber(v)||this.get(e))&&this._lastTickXFired!==S[0]&&(this._tickAlignX(),this._lastTickXFired=S[0]),(c.Lang.isNumber(E)||this.get(a))&&this._lastTickYFired!==S[1]&&(this._tickAlignY(),this._lastTickYFired=S[1])},_checkTicks:function(_,v){var E=this.get(o),S=E.startXY[0]-E.deltaXY[0],y=E.startXY[1]-E.deltaXY[1],C=this.get("tickX"),O=this.get("tickY");return C&&!this.get(e)&&(_[0]=r._calcTicks(_[0],S,C,v[u],v[n])),O&&!this.get(a)&&(_[1]=r._calcTicks(_[1],y,O,v[s],v[i])),this.get(e)&&(_[0]=r._calcTickArray(_[0],this.get(e),v[u],v[n])),this.get(a)&&(_[1]=r._calcTickArray(_[1],this.get(a),v[s],v[i])),_},_tickAlignX:function(){this.fire(p)},_tickAlignY:function(){this.fire(f)}},c.namespace("Plugin"),c.extend(m,c.Base,g),c.Plugin.DDConstrained=m,c.mix(r,{_calcTicks:function(_,v,E,S,y){var C=(_-v)/E,O=Math.floor(C),A=Math.ceil(C);return(O!==0||A!==0)&&C>=O&&C<=A&&(_=v+E*O,S&&y&&(_<S&&(_=v+E*(O+1)),_>y&&(_=v+E*(O-1)))),_},_calcTickArray:function(_,v,E,S){var y=0,C=v.length,O=0,A,I,D;if(!v||v.length===0)return _;if(v[0]>=_)return v[0];for(y=0;y<C;y++)if(O=y+1,v[O]&&v[O]>=_)return A=_-v[y],I=v[O]-_,D=I>A?v[y]:v[O],E&&S&&D>S&&(v[y]?D=v[y]:D=v[C-1]),D;return v[v.length-1]}})},"3.17.2",{requires:["dd-drag"]})},689727:function(){YUI.add("dd-ddm-base",function(c,b){var t=function(){t.superclass.constructor.apply(this,arguments)};t.NAME="ddm",t.ATTRS={dragCursor:{value:"move"},clickPixelThresh:{value:3},clickTimeThresh:{value:1e3},throttleTime:{value:-1},dragMode:{value:"point",setter:function(l){return this._setDragMode(l),l}}},c.extend(t,c.Base,{_createPG:function(){},_active:null,_setDragMode:function(l){switch(l===null&&(l=c.DD.DDM.get("dragMode")),l){case 1:case"intersect":return 1;case 2:case"strict":return 2;case 0:case"point":return 0}return 0},CSS_PREFIX:c.ClassNameManager.getClassName("dd"),_activateTargets:function(){},_drags:[],activeDrag:!1,_regDrag:function(l){return this.getDrag(l.get("node"))?!1:(this._active||this._setupListeners(),this._drags.push(l),!0)},_unregDrag:function(l){var d=[];c.Array.each(this._drags,function(o){o!==l&&(d[d.length]=o)}),this._drags=d},_setupListeners:function(){this._createPG(),this._active=!0;var l=c.one(c.config.doc);l.on("mousemove",c.throttle(c.bind(this._docMove,this),this.get("throttleTime"))),l.on("mouseup",c.bind(this._end,this))},_start:function(){this.fire("ddm:start"),this._startDrag()},_startDrag:function(){},_endDrag:function(){},_dropMove:function(){},_end:function(){this.activeDrag&&(this._shimming=!1,this._endDrag(),this.fire("ddm:end"),this.activeDrag.end.call(this.activeDrag),this.activeDrag=null)},stopDrag:function(){return this.activeDrag&&this._end(),this},_shimming:!1,_docMove:function(l){this._shimming||this._move(l)},_move:function(l){this.activeDrag&&(this.activeDrag._move.call(this.activeDrag,l),this._dropMove())},cssSizestoObject:function(l){var d=l.split(" ");switch(d.length){case 1:d[1]=d[2]=d[3]=d[0];break;case 2:d[2]=d[0],d[3]=d[1];break;case 3:d[3]=d[1];break}return{top:parseInt(d[0],10),right:parseInt(d[1],10),bottom:parseInt(d[2],10),left:parseInt(d[3],10)}},getDrag:function(l){var d=!1,o=c.one(l);return o instanceof c.Node&&c.Array.each(this._drags,function(e){o.compareTo(e.get("node"))&&(d=e)}),d},swapPosition:function(l,d){l=c.DD.DDM.getNode(l),d=c.DD.DDM.getNode(d);var o=l.getXY(),e=d.getXY();return l.setXY(e),d.setXY(o),l},getNode:function(l){return l instanceof c.Node||(l&&l.get?c.Widget&&l instanceof c.Widget?l=l.get("boundingBox"):l=l.get("node"):l=c.one(l)),l},swapNode:function(l,d){l=c.DD.DDM.getNode(l),d=c.DD.DDM.getNode(d);var o=d.get("parentNode"),e=d.get("nextSibling");return e===l?o.insertBefore(l,d):d===l.get("nextSibling")?o.insertBefore(d,l):(l.get("parentNode").replaceChild(d,l),o.insertBefore(l,e)),l}}),c.namespace("DD"),c.DD.DDM=new t},"3.17.2",{requires:["node","base","yui-throttle","classnamemanager"]})},49773:function(){YUI.add("dd-ddm-drop",function(c,b){c.mix(c.DD.DDM,{_noShim:!1,_activeShims:[],_hasActiveShim:function(){return this._noShim?!0:this._activeShims.length},_addActiveShim:function(t){this._activeShims.push(t)},_removeActiveShim:function(t){var l=[];c.Array.each(this._activeShims,function(d){d._yuid!==t._yuid&&l.push(d)}),this._activeShims=l},syncActiveShims:function(t){c.later(0,this,function(l){var d=l?this.targets:this._lookup();c.Array.each(d,function(o){o.sizeShim.call(o)},this)},t)},mode:0,POINT:0,INTERSECT:1,STRICT:2,useHash:!0,activeDrop:null,validDrops:[],otherDrops:{},targets:[],_addValid:function(t){return this.validDrops.push(t),this},_removeValid:function(t){var l=[];return c.Array.each(this.validDrops,function(d){d!==t&&l.push(d)}),this.validDrops=l,this},isOverTarget:function(t){if(this.activeDrag&&t){var l=this.activeDrag.mouseXY,d,o=this.activeDrag.get("dragMode"),e,a=t.shim;if(l&&this.activeDrag){if(e=this.activeDrag.region,o===this.STRICT)return this.activeDrag.get("dragNode").inRegion(t.region,!0,e);if(t&&t.shim)return o===this.INTERSECT&&this._noShim?(d=e||this.activeDrag.get("node"),t.get("node").intersect(d,t.region).inRegion):(this._noShim&&(a=t.get("node")),a.intersect({top:l[1],bottom:l[1],left:l[0],right:l[0]},t.region).inRegion)}}return!1},clearCache:function(){this.validDrops=[],this.otherDrops={},this._activeShims=[]},_activateTargets:function(){this._noShim=!0,this.clearCache(),c.Array.each(this.targets,function(t){t._activateShim([]),t.get("noShim")===!0&&(this._noShim=!1)},this),this._handleTargetOver()},getBestMatch:function(t,l){var d=null,o=0,e;return c.Object.each(t,function(a){var r=this.activeDrag.get("dragNode").intersect(a.get("node"));a.region.area=r.area,r.inRegion&&r.area>o&&(o=r.area,d=a)},this),l?(e=[],c.Object.each(t,function(a){a!==d&&e.push(a)},this),[d,e]):d},_deactivateTargets:function(){var t=[],l,d=this.activeDrag,o=this.activeDrop;d&&o&&this.otherDrops[o]?(d.get("dragMode")?(l=this.getBestMatch(this.otherDrops,!0),o=l[0],t=l[1]):(t=this.otherDrops,delete t[o]),d.get("node").removeClass(this.CSS_PREFIX+"-drag-over"),o&&(o.fire("drop:hit",{drag:d,drop:o,others:t}),d.fire("drag:drophit",{drag:d,drop:o,others:t}))):d&&d.get("dragging")&&(d.get("node").removeClass(this.CSS_PREFIX+"-drag-over"),d.fire("drag:dropmiss",{pageX:d.lastXY[0],pageY:d.lastXY[1]})),this.activeDrop=null,c.Array.each(this.targets,function(e){e._deactivateShim([])},this)},_dropMove:function(){this._hasActiveShim()?this._handleTargetOver():c.Object.each(this.otherDrops,function(t){t._handleOut.apply(t,[])})},_lookup:function(){if(!this.useHash||this._noShim)return this.validDrops;var t=[];return c.Array.each(this.validDrops,function(l){l.shim&&l.shim.inViewportRegion(!1,l.region)&&t.push(l)}),t},_handleTargetOver:function(){var t=this._lookup();c.Array.each(t,function(l){l._handleTargetOver.call(l)},this)},_regTarget:function(t){this.targets.push(t)},_unregTarget:function(t){var l=[],d;c.Array.each(this.targets,function(o){o!==t&&l.push(o)},this),this.targets=l,d=[],c.Array.each(this.validDrops,function(o){o!==t&&d.push(o)}),this.validDrops=d},getDrop:function(t){var l=!1,d=c.one(t);return d instanceof c.Node&&c.Array.each(this.targets,function(o){d.compareTo(o.get("node"))&&(l=o)}),l}},!0)},"3.17.2",{requires:["dd-ddm"]})},678406:function(){YUI.add("dd-ddm",function(c,b){c.mix(c.DD.DDM,{_pg:null,_debugShim:!1,_activateTargets:function(){},_deactivateTargets:function(){},_startDrag:function(){this.activeDrag&&this.activeDrag.get("useShim")&&(this._shimming=!0,this._pg_activate(),this._activateTargets())},_endDrag:function(){this._pg_deactivate(),this._deactivateTargets()},_pg_deactivate:function(){this._pg.setStyle("display","none")},_pg_activate:function(){this._pg||this._createPG();var t=this.activeDrag.get("activeHandle"),l="auto";t&&(l=t.getStyle("cursor")),l==="auto"&&(l=this.get("dragCursor")),this._pg_size(),this._pg.setStyles({top:0,left:0,display:"block",opacity:this._debugShim?".5":"0",cursor:l})},_pg_size:function(){if(this.activeDrag){var t=c.one("body"),l=t.get("docHeight"),d=t.get("docWidth");this._pg.setStyles({height:l+"px",width:d+"px"})}},_createPG:function(){var t=c.Node.create("<div></div>"),l=c.one("body"),d;t.setStyles({top:"0",left:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:"red",display:"none",height:"5px",width:"5px"}),t.set("id",c.stamp(t)),t.addClass(c.DD.DDM.CSS_PREFIX+"-shim"),l.prepend(t),this._pg=t,this._pg.on("mousemove",c.throttle(c.bind(this._move,this),this.get("throttleTime"))),this._pg.on("mouseup",c.bind(this._end,this)),d=c.one("win"),c.on("window:resize",c.bind(this._pg_size,this)),d.on("scroll",c.bind(this._pg_size,this))}},!0)},"3.17.2",{requires:["dd-ddm-base","event-resize"]})},160714:function(){YUI.add("dd-delegate",function(c,b){var t=function(){t.superclass.constructor.apply(this,arguments)},l="container",d="nodes",o=c.Node.create("<div>Temp Node</div>");c.extend(t,c.Base,{_bubbleTargets:c.DD.DDM,dd:null,_shimState:null,_handles:null,_onNodeChange:function(e){this.set("dragNode",e.newVal)},_afterDragEnd:function(){c.DD.DDM._noShim=this._shimState,this.set("lastNode",this.dd.get("node")),this.get("lastNode").removeClass(c.DD.DDM.CSS_PREFIX+"-dragging"),this.dd._unprep(),this.dd.set("node",o)},_delMouseDown:function(e){var a=e.currentTarget,r=this.dd,s=a,n=this.get("dragConfig");a.test(this.get(d))&&!a.test(this.get("invalid"))&&(this._shimState=c.DD.DDM._noShim,c.DD.DDM._noShim=!0,this.set("currentNode",a),r.set("node",a),n&&n.dragNode?s=n.dragNode:r.proxy&&(s=c.DD.DDM._proxy),r.set("dragNode",s),r._prep(),r.fire("drag:mouseDown",{ev:e}))},_onMouseEnter:function(){this._shimState=c.DD.DDM._noShim,c.DD.DDM._noShim=!0},_onMouseLeave:function(){c.DD.DDM._noShim=this._shimState},initializer:function(){this._handles=[];var e=this.get("dragConfig")||{},a=this.get(l);e.node=o.cloneNode(!0),e.bubbleTargets=this,this.get("handles")&&(e.handles=this.get("handles")),this.dd=new c.DD.Drag(e),this.dd.after("drag:end",c.bind(this._afterDragEnd,this)),this.dd.on("dragNodeChange",c.bind(this._onNodeChange,this)),this.dd.after("drag:mouseup",function(){this._unprep()}),this._handles.push(c.delegate(c.DD.Drag.START_EVENT,c.bind(this._delMouseDown,this),a,this.get(d))),this._handles.push(c.on("mouseenter",c.bind(this._onMouseEnter,this),a)),this._handles.push(c.on("mouseleave",c.bind(this._onMouseLeave,this),a)),c.later(50,this,this.syncTargets),c.DD.DDM.regDelegate(this)},syncTargets:function(){if(!(!c.Plugin.Drop||this.get("destroyed"))){var e,a,r;return this.get("target")&&(e=c.one(this.get(l)).all(this.get(d)),a=this.dd.get("groups"),r=this.get("dragConfig"),r&&r.groups&&(a=r.groups),e.each(function(s){this.createDrop(s,a)},this)),this}},createDrop:function(e,a){var r={useShim:!1,bubbleTargets:this};return e.drop||e.plug(c.Plugin.Drop,r),e.drop.set("groups",a),e},destructor:function(){if(this.dd&&this.dd.destroy(),c.Plugin.Drop){var e=c.one(this.get(l)).all(this.get(d));e.unplug(c.Plugin.Drop)}c.Array.each(this._handles,function(a){a.detach()})}},{NAME:"delegate",ATTRS:{container:{value:"body"},nodes:{value:".dd-draggable"},invalid:{value:"input, select, button, a, textarea"},lastNode:{value:o},currentNode:{value:o},dragNode:{value:o},over:{value:!1},target:{value:!1},dragConfig:{value:null},handles:{value:null}}}),c.mix(c.DD.DDM,{_delegates:[],regDelegate:function(e){this._delegates.push(e)},getDelegate:function(e){var a=null;return e=c.one(e),c.Array.each(this._delegates,function(r){e.test(r.get(l))&&(a=r)},this),a}}),c.namespace("DD"),c.DD.Delegate=t},"3.17.2",{requires:["dd-drag","dd-drop-plugin","event-mouseenter"]})},722306:function(){YUI.add("dd-drag",function(c,b){var t=c.DD.DDM,l="node",d="dragging",o="dragNode",e="offsetHeight",a="offsetWidth",r="drag:mouseDown",s="drag:afterMouseDown",n="drag:removeHandle",i="drag:addHandle",u="drag:removeInvalid",h="drag:addInvalid",g="drag:start",p="drag:end",f="drag:drag",m="drag:align",_=function(v){this._lazyAddAttrs=!1,_.superclass.constructor.apply(this,arguments);var E=t._regDrag(this);E||c.error("Failed to register node, already in use: "+v.node)};_.NAME="drag",_.START_EVENT="mousedown",_.ATTRS={node:{setter:function(v){if(this._canDrag(v))return v;var E=c.one(v);return E||c.error("DD.Drag: Invalid Node Given: "+v),E}},dragNode:{setter:function(v){if(this._canDrag(v))return v;var E=c.one(v);return E||c.error("DD.Drag: Invalid dragNode Given: "+v),E}},offsetNode:{value:!0},startCentered:{value:!1},clickPixelThresh:{value:t.get("clickPixelThresh")},clickTimeThresh:{value:t.get("clickTimeThresh")},lock:{value:!1,setter:function(v){return v?this.get(l).addClass(t.CSS_PREFIX+"-locked"):this.get(l).removeClass(t.CSS_PREFIX+"-locked"),v}},data:{value:!1},move:{value:!0},useShim:{value:!0},activeHandle:{value:!1},primaryButtonOnly:{value:!0},dragging:{value:!1},parent:{value:!1},target:{value:!1,setter:function(v){return this._handleTarget(v),v}},dragMode:{value:null,setter:function(v){return t._setDragMode(v)}},groups:{value:["default"],getter:function(){return this._groups?c.Object.keys(this._groups):(this._groups={},[])},setter:function(v){return this._groups=c.Array.hash(v),v}},handles:{value:null,setter:function(v){return v?(this._handles={},c.Array.each(v,function(E){var S=E;(E instanceof c.Node||E instanceof c.NodeList)&&(S=E._yuid),this._handles[S]=E},this)):this._handles=null,v}},bubbles:{setter:function(v){return this.addTarget(v),v}},haltDown:{value:!0}},c.extend(_,c.Base,{_canDrag:function(v){return!!(v&&v.setXY&&v.getXY&&v.test&&v.contains)},_bubbleTargets:c.DD.DDM,addToGroup:function(v){return this._groups[v]=!0,t._activateTargets(),this},removeFromGroup:function(v){return delete this._groups[v],t._activateTargets(),this},target:null,_handleTarget:function(v){c.DD.Drop&&(v===!1?this.target&&(t._unregTarget(this.target),this.target=null):(c.Lang.isObject(v)||(v={}),v.bubbleTargets=v.bubbleTargets||this.getTargets(),v.node=this.get(l),v.groups=v.groups||this.get("groups"),this.target=new c.DD.Drop(v)))},_groups:null,_createEvents:function(){this.publish(r,{defaultFn:this._defMouseDownFn,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"drag"}),this.publish(m,{defaultFn:this._defAlignFn,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"drag"}),this.publish(f,{defaultFn:this._defDragFn,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"drag"}),this.publish(p,{defaultFn:this._defEndFn,preventedFn:this._prevEndFn,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"drag"});var v=[s,n,i,u,h,g,"drag:drophit","drag:dropmiss","drag:over","drag:enter","drag:exit"];c.Array.each(v,function(E){this.publish(E,{type:E,emitFacade:!0,bubbles:!0,preventable:!1,queuable:!1,prefix:"drag"})},this)},_ev_md:null,_startTime:null,_endTime:null,_handles:null,_invalids:null,_invalidsDefault:{textarea:!0,input:!0,a:!0,button:!0,select:!0},_dragThreshMet:null,_fromTimeout:null,_clickTimeout:null,deltaXY:null,startXY:null,nodeXY:null,lastXY:null,actXY:null,realXY:null,mouseXY:null,region:null,_handleMouseUp:function(){this.fire("drag:mouseup"),this._fixIEMouseUp(),t.activeDrag&&t._end()},_fixDragStart:function(v){this.validClick(v)&&v.preventDefault()},_ieSelectFix:function(){return!1},_ieSelectBack:null,_fixIEMouseDown:function(){c.UA.ie&&(this._ieSelectBack=c.config.doc.body.onselectstart,c.config.doc.body.onselectstart=this._ieSelectFix)},_fixIEMouseUp:function(){c.UA.ie&&(c.config.doc.body.onselectstart=this._ieSelectBack)},_handleMouseDownEvent:function(v){this.validClick(v)&&v.preventDefault(),this.fire(r,{ev:v})},_defMouseDownFn:function(v){var E=v.ev;if(this._dragThreshMet=!1,this._ev_md=E,this.get("primaryButtonOnly")&&E.button>1)return!1;this.validClick(E)&&(this._fixIEMouseDown(E),_.START_EVENT.indexOf("gesture")!==0&&(this.get("haltDown")?E.halt():E.preventDefault()),this._setStartPosition([E.pageX,E.pageY]),t.activeDrag=this,this._clickTimeout=c.later(this.get("clickTimeThresh"),this,this._timeoutCheck)),this.fire(s,{ev:E})},validClick:function(v){var E=!1,S=!1,y=v.target,C=null,O=null,A=null,I=!1;return this._handles?c.Object.each(this._handles,function(D,T){D instanceof c.Node||D instanceof c.NodeList?E||(A=D,A instanceof c.Node&&(A=new c.NodeList(D._node)),A.each(function(B){B.contains(y)&&(E=!0)})):c.Lang.isString(T)&&y.test(T+", "+T+" *")&&!C&&(C=T,E=!0)}):(S=this.get(l),(S.contains(y)||S.compareTo(y))&&(E=!0)),E&&this._invalids&&c.Object.each(this._invalids,function(D,T){c.Lang.isString(T)&&y.test(T+", "+T+" *")&&(E=!1)}),E&&(C?(O=v.currentTarget.all(C),I=!1,O.each(function(D){(D.contains(y)||D.compareTo(y))&&!I&&(I=!0,this.set("activeHandle",D))},this)):this.set("activeHandle",this.get(l))),E},_setStartPosition:function(v){this.startXY=v,this.nodeXY=this.lastXY=this.realXY=this.get(l).getXY(),this.get("offsetNode")?this.deltaXY=[this.startXY[0]-this.nodeXY[0],this.startXY[1]-this.nodeXY[1]]:this.deltaXY=[0,0]},_timeoutCheck:function(){!this.get("lock")&&!this._dragThreshMet&&this._ev_md&&(this._fromTimeout=this._dragThreshMet=!0,this.start(),this._alignNode([this._ev_md.pageX,this._ev_md.pageY],!0))},removeHandle:function(v){var E=v;return(v instanceof c.Node||v instanceof c.NodeList)&&(E=v._yuid),this._handles[E]&&(delete this._handles[E],this.fire(n,{handle:v})),this},addHandle:function(v){this._handles||(this._handles={});var E=v;return(v instanceof c.Node||v instanceof c.NodeList)&&(E=v._yuid),this._handles[E]=v,this.fire(i,{handle:v}),this},removeInvalid:function(v){return this._invalids[v]&&(this._invalids[v]=null,delete this._invalids[v],this.fire(u,{handle:v})),this},addInvalid:function(v){return c.Lang.isString(v)&&(this._invalids[v]=!0,this.fire(h,{handle:v})),this},initializer:function(){if(this.get(l).dd=this,!this.get(l).get("id")){var v=c.stamp(this.get(l));this.get(l).set("id",v)}this.actXY=[],this._invalids=c.clone(this._invalidsDefault,!0),this._createEvents(),this.get(o)||this.set(o,this.get(l)),this.on("initializedChange",c.bind(this._prep,this)),this.set("groups",this.get("groups"))},_prep:function(){this._dragThreshMet=!1;var v=this.get(l);v.addClass(t.CSS_PREFIX+"-draggable"),v.on(_.START_EVENT,c.bind(this._handleMouseDownEvent,this)),v.on("mouseup",c.bind(this._handleMouseUp,this)),v.on("dragstart",c.bind(this._fixDragStart,this))},_unprep:function(){var v=this.get(l);v.removeClass(t.CSS_PREFIX+"-draggable"),v.detachAll("mouseup"),v.detachAll("dragstart"),v.detachAll(_.START_EVENT),this.mouseXY=[],this.deltaXY=[0,0],this.startXY=[],this.nodeXY=[],this.lastXY=[],this.actXY=[],this.realXY=[]},start:function(){if(!this.get("lock")&&!this.get(d)){var v=this.get(l),E,S,y;this._startTime=new Date().getTime(),t._start(),v.addClass(t.CSS_PREFIX+"-dragging"),this.fire(g,{pageX:this.nodeXY[0],pageY:this.nodeXY[1],startTime:this._startTime}),v=this.get(o),y=this.nodeXY,E=v.get(a),S=v.get(e),this.get("startCentered")&&this._setStartPosition([y[0]+E/2,y[1]+S/2]),this.region={0:y[0],1:y[1],area:0,top:y[1],right:y[0]+E,bottom:y[1]+S,left:y[0]},this.set(d,!0)}return this},end:function(){return this._endTime=new Date().getTime(),this._clickTimeout&&this._clickTimeout.cancel(),this._dragThreshMet=this._fromTimeout=!1,!this.get("lock")&&this.get(d)&&this.fire(p,{pageX:this.lastXY[0],pageY:this.lastXY[1],startTime:this._startTime,endTime:this._endTime}),this.get(l).removeClass(t.CSS_PREFIX+"-dragging"),this.set(d,!1),this.deltaXY=[0,0],this},_defEndFn:function(){this._fixIEMouseUp(),this._ev_md=null},_prevEndFn:function(){this._fixIEMouseUp(),this.get(o).setXY(this.nodeXY),this._ev_md=null,this.region=null},_align:function(v){this.fire(m,{pageX:v[0],pageY:v[1]})},_defAlignFn:function(v){this.actXY=[v.pageX-this.deltaXY[0],v.pageY-this.deltaXY[1]]},_alignNode:function(v,E){this._align(v),E||this._moveNode()},_moveNode:function(v){var E=[],S=[],y=this.nodeXY,C=this.actXY;E[0]=C[0]-this.lastXY[0],E[1]=C[1]-this.lastXY[1],S[0]=C[0]-this.nodeXY[0],S[1]=C[1]-this.nodeXY[1],this.region={0:C[0],1:C[1],area:0,top:C[1],right:C[0]+this.get(o).get(a),bottom:C[1]+this.get(o).get(e),left:C[0]},this.fire(f,{pageX:C[0],pageY:C[1],scroll:v,info:{start:y,xy:C,delta:E,offset:S}}),this.lastXY=C},_defDragFn:function(v){if(this.get("move")){if(v.scroll&&v.scroll.node){var E=v.scroll.node.getDOMNode();E===c.config.win?E.scrollTo(v.scroll.left,v.scroll.top):(v.scroll.node.set("scrollTop",v.scroll.top),v.scroll.node.set("scrollLeft",v.scroll.left))}this.get(o).setXY([v.pageX,v.pageY]),this.realXY=[v.pageX,v.pageY]}},_move:function(v){if(this.get("lock"))return!1;if(this.mouseXY=[v.pageX,v.pageY],this._dragThreshMet)this._clickTimeout&&this._clickTimeout.cancel(),this._alignNode([v.pageX,v.pageY]);else{var E=Math.abs(this.startXY[0]-v.pageX),S=Math.abs(this.startXY[1]-v.pageY);(E>this.get("clickPixelThresh")||S>this.get("clickPixelThresh"))&&(this._dragThreshMet=!0,this.start(),v&&v.preventDefault&&v.preventDefault(),this._alignNode([v.pageX,v.pageY]))}},stopDrag:function(){return this.get(d)&&t._end(),this},destructor:function(){this._unprep(),this.target&&this.target.destroy(),t._unregDrag(this)}}),c.namespace("DD"),c.DD.Drag=_},"3.17.2",{requires:["dd-ddm-base"]})},52976:function(){YUI.add("dd-drop-plugin",function(c,b){var t=function(l){l.node=l.host,t.superclass.constructor.apply(this,arguments)};t.NAME="dd-drop-plugin",t.NS="drop",c.extend(t,c.DD.Drop),c.namespace("Plugin"),c.Plugin.Drop=t},"3.17.2",{requires:["dd-drop"]})},46097:function(){YUI.add("dd-drop",function(c,b){var t="node",l=c.DD.DDM,d="offsetHeight",o="offsetWidth",e="drop:over",a="drop:enter",r="drop:exit",s=function(){this._lazyAddAttrs=!1,s.superclass.constructor.apply(this,arguments),c.on("domready",c.bind(function(){c.later(100,this,this._createShim)},this)),l._regTarget(this)};s.NAME="drop",s.ATTRS={node:{setter:function(n){var i=c.one(n);return i||c.error("DD.Drop: Invalid Node Given: "+n),i}},groups:{value:["default"],getter:function(){return this._groups?c.Object.keys(this._groups):(this._groups={},[])},setter:function(n){return this._groups=c.Array.hash(n),n}},padding:{value:"0",setter:function(n){return l.cssSizestoObject(n)}},lock:{value:!1,setter:function(n){return n?this.get(t).addClass(l.CSS_PREFIX+"-drop-locked"):this.get(t).removeClass(l.CSS_PREFIX+"-drop-locked"),n}},bubbles:{setter:function(n){return this.addTarget(n),n}},useShim:{value:!0,setter:function(n){return c.DD.DDM._noShim=!n,n}}},c.extend(s,c.Base,{_bubbleTargets:c.DD.DDM,addToGroup:function(n){return this._groups[n]=!0,this},removeFromGroup:function(n){return delete this._groups[n],this},_createEvents:function(){var n=[e,a,r,"drop:hit"];c.Array.each(n,function(i){this.publish(i,{type:i,emitFacade:!0,preventable:!1,bubbles:!0,queuable:!1,prefix:"drop"})},this)},_valid:null,_groups:null,shim:null,region:null,overTarget:null,inGroup:function(n){this._valid=!1;var i=!1;return c.Array.each(n,function(u){this._groups[u]&&(i=!0,this._valid=!0)},this),i},initializer:function(){c.later(100,this,this._createEvents);var n=this.get(t),i;n.get("id")||(i=c.stamp(n),n.set("id",i)),n.addClass(l.CSS_PREFIX+"-drop"),this.set("groups",this.get("groups"))},destructor:function(){l._unregTarget(this),this.shim&&this.shim!==this.get(t)&&(this.shim.detachAll(),this.shim.remove(),this.shim=null),this.get(t).removeClass(l.CSS_PREFIX+"-drop"),this.detachAll()},_deactivateShim:function(){if(!this.shim)return!1;this.get(t).removeClass(l.CSS_PREFIX+"-drop-active-valid"),this.get(t).removeClass(l.CSS_PREFIX+"-drop-active-invalid"),this.get(t).removeClass(l.CSS_PREFIX+"-drop-over"),this.get("useShim")&&this.shim.setStyles({top:"-999px",left:"-999px",zIndex:"1"}),this.overTarget=!1},_activateShim:function(){if(!l.activeDrag||this.get(t)===l.activeDrag.get(t)||this.get("lock"))return!1;var n=this.get(t);this.inGroup(l.activeDrag.get("groups"))?(n.removeClass(l.CSS_PREFIX+"-drop-active-invalid"),n.addClass(l.CSS_PREFIX+"-drop-active-valid"),l._addValid(this),this.overTarget=!1,this.get("useShim")||(this.shim=this.get(t)),this.sizeShim()):(l._removeValid(this),n.removeClass(l.CSS_PREFIX+"-drop-active-valid"),n.addClass(l.CSS_PREFIX+"-drop-active-invalid"))},sizeShim:function(){if(!l.activeDrag||this.get(t)===l.activeDrag.get(t)||this.get("lock"))return!1;if(!this.shim)return c.later(100,this,this.sizeShim),!1;var n=this.get(t),i=n.get(d),u=n.get(o),h=n.getXY(),g=this.get("padding"),p,f,m;u=u+g.left+g.right,i=i+g.top+g.bottom,h[0]=h[0]-g.left,h[1]=h[1]-g.top,l.activeDrag.get("dragMode")===l.INTERSECT&&(p=l.activeDrag,f=p.get(t).get(d),m=p.get(t).get(o),i=i+f,u=u+m,h[0]=h[0]-(m-p.deltaXY[0]),h[1]=h[1]-(f-p.deltaXY[1])),this.get("useShim")&&this.shim.setStyles({height:i+"px",width:u+"px",top:h[1]+"px",left:h[0]+"px"}),this.region={0:h[0],1:h[1],area:0,top:h[1],right:h[0]+u,bottom:h[1]+i,left:h[0]}},_createShim:function(){if(!l._pg){c.later(10,this,this._createShim);return}if(!this.shim){var n=this.get("node");this.get("useShim")&&(n=c.Node.create('<div id="'+this.get(t).get("id")+'_shim"></div>'),n.setStyles({height:this.get(t).get(d)+"px",width:this.get(t).get(o)+"px",backgroundColor:"yellow",opacity:".5",zIndex:"1",overflow:"hidden",top:"-900px",left:"-900px",position:"absolute"}),l._pg.appendChild(n),n.on("mouseover",c.bind(this._handleOverEvent,this)),n.on("mouseout",c.bind(this._handleOutEvent,this))),this.shim=n}},_handleTargetOver:function(){l.isOverTarget(this)?(this.get(t).addClass(l.CSS_PREFIX+"-drop-over"),l.activeDrop=this,l.otherDrops[this]=this,this.overTarget?(l.activeDrag.fire("drag:over",{drop:this,drag:l.activeDrag}),this.fire(e,{drop:this,drag:l.activeDrag})):l.activeDrag.get("dragging")&&(this.overTarget=!0,this.fire(a,{drop:this,drag:l.activeDrag}),l.activeDrag.fire("drag:enter",{drop:this,drag:l.activeDrag}),l.activeDrag.get(t).addClass(l.CSS_PREFIX+"-drag-over"))):this._handleOut()},_handleOverEvent:function(){this.shim.setStyle("zIndex","999"),l._addActiveShim(this)},_handleOutEvent:function(){this.shim.setStyle("zIndex","1"),l._removeActiveShim(this)},_handleOut:function(n){(!l.isOverTarget(this)||n)&&this.overTarget&&(this.overTarget=!1,n||l._removeActiveShim(this),l.activeDrag&&(this.get(t).removeClass(l.CSS_PREFIX+"-drop-over"),l.activeDrag.get(t).removeClass(l.CSS_PREFIX+"-drag-over"),this.fire(r,{drop:this,drag:l.activeDrag}),l.activeDrag.fire("drag:exit",{drop:this,drag:l.activeDrag}),delete l.otherDrops[this]))}}),c.DD.Drop=s},"3.17.2",{requires:["dd-drag","dd-ddm-drop"]})},664853:function(){YUI.add("dd-proxy",function(c,b){var t=c.DD.DDM,l="node",d="dragNode",o="host",e=!0,a,r=function(){r.superclass.constructor.apply(this,arguments)};r.NAME="DDProxy",r.NS="proxy",r.ATTRS={host:{},moveOnEnd:{value:e},hideOnEnd:{value:e},resizeFrame:{value:e},positionProxy:{value:e},borderStyle:{value:"1px solid #808080"},cloneNode:{value:!1}},a={_hands:null,_init:function(){if(!t._proxy){t._createFrame(),c.on("domready",c.bind(this._init,this));return}this._hands||(this._hands=[]);var s,n,i=this.get(o),u=i.get(d);u.compareTo(i.get(l))&&t._proxy&&i.set(d,t._proxy),c.Array.each(this._hands,function(h){h.detach()}),s=t.on("ddm:start",c.bind(function(){t.activeDrag===i&&t._setFrame(i)},this)),n=t.on("ddm:end",c.bind(function(){i.get("dragging")&&(this.get("moveOnEnd")&&i.get(l).setXY(i.lastXY),this.get("hideOnEnd")&&i.get(d).setStyle("display","none"),this.get("cloneNode")&&(i.get(d).remove(),i.set(d,t._proxy)))},this)),this._hands=[s,n]},initializer:function(){this._init()},destructor:function(){var s=this.get(o);c.Array.each(this._hands,function(n){n.detach()}),s.set(d,s.get(l))},clone:function(){var s=this.get(o),n=s.get(l),i=n.cloneNode(!0);return i.all('input[type="radio"]').removeAttribute("name"),delete i._yuid,i.setAttribute("id",c.guid()),i.setStyle("position","absolute"),n.get("parentNode").appendChild(i),s.set(d,i),i}},c.namespace("Plugin"),c.extend(r,c.Base,a),c.Plugin.DDProxy=r,c.mix(t,{_createFrame:function(){if(!t._proxy){t._proxy=e;var s=c.Node.create("<div></div>"),n=c.one("body");s.setStyles({position:"absolute",display:"none",zIndex:"999",top:"-999px",left:"-999px"}),n.prepend(s),s.set("id",c.guid()),s.addClass(t.CSS_PREFIX+"-proxy"),t._proxy=s}},_setFrame:function(s){var n=s.get(l),i=s.get(d),u,h="auto";u=t.activeDrag.get("activeHandle"),u&&(h=u.getStyle("cursor")),h==="auto"&&(h=t.get("dragCursor")),i.setStyles({visibility:"hidden",display:"block",cursor:h,border:s.proxy.get("borderStyle")}),s.proxy.get("cloneNode")&&(i=s.proxy.clone()),s.proxy.get("resizeFrame")&&i.setStyles({height:n.get("offsetHeight")+"px",width:n.get("offsetWidth")+"px"}),s.proxy.get("positionProxy")&&i.setXY(s.nodeXY),i.setStyle("visibility","visible")}})},"3.17.2",{requires:["dd-drag"]})},102492:function(){YUI.add("dd-scroll",function(c,b){var t=function(){t.superclass.constructor.apply(this,arguments)},l,d,o="host",e="buffer",a="parentScroll",r="windowScroll",s="scrollTop",n="scrollLeft",i="offsetWidth",u="offsetHeight";t.ATTRS={parentScroll:{value:!1,setter:function(h){return h||!1}},buffer:{value:30,validator:c.Lang.isNumber},scrollDelay:{value:235,validator:c.Lang.isNumber},host:{value:null},windowScroll:{value:!1,validator:c.Lang.isBoolean},vertical:{value:!0,validator:c.Lang.isBoolean},horizontal:{value:!0,validator:c.Lang.isBoolean}},c.extend(t,c.Base,{_scrolling:null,_vpRegionCache:null,_dimCache:null,_scrollTimer:null,_getVPRegion:function(){var h={},g=this.get(a),p=this.get(e),f=this.get(r),m=f?[]:g.getXY(),_=f?"winWidth":i,v=f?"winHeight":u,E=f?g.get(s):m[1],S=f?g.get(n):m[0];return h={top:E+p,right:g.get(_)+S-p,bottom:g.get(v)+E-p,left:S+p},this._vpRegionCache=h,h},initializer:function(){var h=this.get(o);h.after("drag:start",c.bind(this.start,this)),h.after("drag:end",c.bind(this.end,this)),h.on("drag:align",c.bind(this.align,this)),c.one("win").on("scroll",c.bind(function(){this._vpRegionCache=null},this))},_checkWinScroll:function(h){var g=this._getVPRegion(),p=this.get(o),f=this.get(r),m=p.lastXY,_=!1,v=this.get(e),E=this.get(a),S=E.get(s),y=E.get(n),C=this._dimCache.w,O=this._dimCache.h,A=m[1]+O,I=m[1],D=m[0]+C,T=m[0],B=I,N=T,P=S,x=y;this.get("horizontal")&&(T<=g.left&&(_=!0,N=m[0]-(f?v:0),x=y-v),D>=g.right&&(_=!0,N=m[0]+(f?v:0),x=y+v)),this.get("vertical")&&(A>=g.bottom&&(_=!0,B=m[1]+(f?v:0),P=S+v),I<=g.top&&(_=!0,B=m[1]-(f?v:0),P=S-v)),P<0&&(P=0,B=m[1]),x<0&&(x=0,N=m[0]),B<0&&(B=m[1]),N<0&&(N=m[0]),h?(p.actXY=[N,B],p._alignNode([N,B],!0),m=p.actXY,p.actXY=[N,B],p._moveNode({node:E,top:P,left:x}),!P&&!x&&this._cancelScroll()):_?this._initScroll():this._cancelScroll()},_initScroll:function(){this._cancelScroll(),this._scrollTimer=c.Lang.later(this.get("scrollDelay"),this,this._checkWinScroll,[!0],!0)},_cancelScroll:function(){this._scrolling=!1,this._scrollTimer&&(this._scrollTimer.cancel(),delete this._scrollTimer)},align:function(h){this._scrolling&&(this._cancelScroll(),h.preventDefault()),this._scrolling||this._checkWinScroll()},_setDimCache:function(){var h=this.get(o).get("dragNode");this._dimCache={h:h.get(u),w:h.get(i)}},start:function(){this._setDimCache()},end:function(){this._dimCache=null,this._cancelScroll()}}),c.namespace("Plugin"),l=function(){l.superclass.constructor.apply(this,arguments)},l.ATTRS=c.merge(t.ATTRS,{windowScroll:{value:!0,setter:function(h){return h&&this.set(a,c.one("win")),h}}}),c.extend(l,t,{initializer:function(){this.set("windowScroll",this.get("windowScroll"))}}),l.NAME=l.NS="winscroll",c.Plugin.DDWinScroll=l,d=function(){d.superclass.constructor.apply(this,arguments)},d.ATTRS=c.merge(t.ATTRS,{node:{value:!1,setter:function(h){var g=c.one(h);return g?this.set(a,g):h!==!1&&c.error("DDNodeScroll: Invalid Node Given: "+h),g}}}),c.extend(d,t,{initializer:function(){this.set("node",this.get("node"))}}),d.NAME=d.NS="nodescroll",c.Plugin.DDNodeScroll=d,c.DD.Scroll=t},"3.17.2",{requires:["dd-drag"]})},134495:function(){YUI.add("dom-base",function(c,b){var t=c.config.doc.documentElement,n=c.DOM,l="tagName",d="ownerDocument",o="",i=c.Features.add,u=c.Features.test;c.mix(n,{getText:t.textContent!==void 0?function(v){var E="";return v&&(E=v.textContent),E||""}:function(v){var E="";return v&&(E=v.innerText||v.nodeValue),E||""},setText:t.textContent!==void 0?function(v,E){v&&(v.textContent=E)}:function(v,E){"innerText"in v?v.innerText=E:"nodeValue"in v&&(v.nodeValue=E)},CUSTOM_ATTRIBUTES:t.hasAttribute?{htmlFor:"for",className:"class"}:{for:"htmlFor",class:"className"},setAttribute:function(v,E,S,y){v&&E&&v.setAttribute&&(E=n.CUSTOM_ATTRIBUTES[E]||E,v.setAttribute(E,S,y))},getAttribute:function(v,E,S){S=S!==void 0?S:2;var y="";return v&&E&&v.getAttribute&&(E=n.CUSTOM_ATTRIBUTES[E]||E,y=v.tagName==="BUTTON"&&E==="value"?n.getValue(v):v.getAttribute(E,S),y===null&&(y="")),y},VALUE_SETTERS:{},VALUE_GETTERS:{},getValue:function(v){var E="",S;return v&&v[l]&&(S=n.VALUE_GETTERS[v[l].toLowerCase()],S?E=S(v):E=v.value),E===o&&(E=o),typeof E=="string"?E:""},setValue:function(v,E){var S;v&&v[l]&&(S=n.VALUE_SETTERS[v[l].toLowerCase()],E=E===null?"":E,S?S(v,E):v.value=E)},creators:{}}),i("value-set","select",{test:function(){var v=c.config.doc.createElement("select");return v.innerHTML="<option>1</option><option>2</option>",v.value="2",v.value&&v.value==="2"}}),u("value-set","select")||(n.VALUE_SETTERS.select=function(v,E){for(var S=0,y=v.getElementsByTagName("option"),C;C=y[S++];)if(n.getValue(C)===E){C.selected=!0;break}}),c.mix(n.VALUE_GETTERS,{button:function(v){return v.attributes&&v.attributes.value?v.attributes.value.value:""}}),c.mix(n.VALUE_SETTERS,{button:function(v,E){var S=v.attributes.value;S||(S=v[d].createAttribute("value"),v.setAttributeNode(S)),S.value=E}}),c.mix(n.VALUE_GETTERS,{option:function(v){var E=v.attributes;return E.value&&E.value.specified?v.value:v.text},select:function(v){var E=v.value,S=v.options;return S&&S.length&&(v.multiple||v.selectedIndex>-1&&(E=n.getValue(S[v.selectedIndex]))),E}});var e,a,r;c.mix(c.DOM,{hasClass:function(v,E){var S=c.DOM._getRegExp("(?:^|\\s+)"+E+"(?:\\s+|$)");return v?S.test(v.className):!1},addClass:function(v,E){v&&!c.DOM.hasClass(v,E)&&(v.className=c.Lang.trim([v.className,E].join(" ")))},removeClass:function(v,E){E&&a(v,E)&&(v.className=c.Lang.trim(v.className.replace(c.DOM._getRegExp("(?:^|\\s+)"+E+"(?:\\s+|$)")," ")),a(v,E)&&r(v,E))},replaceClass:function(v,E,S){r(v,E),e(v,S)},toggleClass:function(v,E,S){var y=S!==void 0?S:!a(v,E);y?e(v,E):r(v,E)}}),a=c.DOM.hasClass,r=c.DOM.removeClass,e=c.DOM.addClass;var s=/<([a-z]+)/i,n=c.DOM,i=c.Features.add,u=c.Features.test,h={},g=function(v,E){var S=c.config.doc.createElement("div"),y=!0;return S.innerHTML=v,(!S.firstChild||S.firstChild.tagName!==E.toUpperCase())&&(y=!1),y},p=/(?:\/(?:thead|tfoot|tbody|caption|col|colgroup)>)+\s*<tbody/,f="<table>",m="</table>",_;c.mix(c.DOM,{_fragClones:{},_create:function(v,E,S){S=S||"div";var y=n._fragClones[S];return y?y=y.cloneNode(!1):y=n._fragClones[S]=E.createElement(S),y.innerHTML=v,y},_children:function(v,E){var S=0,y=v.children,C,O,A;if(y&&y.tags&&(E?y=v.children.tags(E):O=y.tags("!").length),!y||!y.tags&&E||O)for(C=y||v.childNodes,y=[];A=C[S++];)A.nodeType===1&&(!E||E===A.tagName)&&y.push(A);return y||[]},create:function(v,E){typeof v=="string"&&(v=c.Lang.trim(v)),E=E||c.config.doc;var S=s.exec(v),y=n._create,C=h,O=null,A,I,D,T;return v!=null&&(S&&S[1]&&(A=C[S[1].toLowerCase()],typeof A=="function"?y=A:I=A),D=y(v,E,I),T=D.childNodes,T.length===1?O=D.removeChild(T[0]):T[0]&&T[0].className==="yui3-big-dummy"?(_=D.selectedIndex,T.length===2?O=T[0].nextSibling:(D.removeChild(T[0]),O=n._nl2frag(T,E))):O=n._nl2frag(T,E)),O},_nl2frag:function(v,E){var S=null,y,C;if(v&&(v.push||v.item)&&v[0])for(E=E||v[0].ownerDocument,S=E.createDocumentFragment(),v.item&&(v=c.Array(v,0,!0)),y=0,C=v.length;y<C;y++)S.appendChild(v[y]);return S},addHTML:function(v,E,S){var y=v.parentNode,C=0,O,A=E,I;if(E!=null){if(E.nodeType)I=E;else if(typeof E=="string"||typeof E=="number")A=I=n.create(E);else if(E[0]&&E[0].nodeType)for(I=c.config.doc.createDocumentFragment();O=E[C++];)I.appendChild(O)}if(S)if(I&&S.parentNode)S.parentNode.insertBefore(I,S);else switch(S){case"replace":for(;v.firstChild;)v.removeChild(v.firstChild);I&&v.appendChild(I);break;case"before":I&&y.insertBefore(I,v);break;case"after":I&&(v.nextSibling?y.insertBefore(I,v.nextSibling):y.appendChild(I));break;default:I&&v.appendChild(I)}else I&&v.appendChild(I);return v.nodeName=="SELECT"&&_>0&&(v.selectedIndex=_-1),A},wrap:function(v,E){var S=E&&E.nodeType?E:c.DOM.create(E),y=S.getElementsByTagName("*");y.length&&(S=y[y.length-1]),v.parentNode&&v.parentNode.replaceChild(S,v),S.appendChild(v)},unwrap:function(v){var E=v.parentNode,S=E.lastChild,y=v,C;if(E)if(C=E.parentNode,C){for(v=E.firstChild;v!==S;)y=v.nextSibling,C.insertBefore(v,E),v=y;C.replaceChild(S,E)}else E.removeChild(v)}}),i("innerhtml","table",{test:function(){var v=c.config.doc.createElement("table");try{v.innerHTML="<tbody></tbody>"}catch{return!1}return v.firstChild&&v.firstChild.nodeName==="TBODY"}}),i("innerhtml-div","tr",{test:function(){return g("<tr></tr>","tr")}}),i("innerhtml-div","script",{test:function(){return g("<script><\/script>","script")}}),u("innerhtml","table")||(h.tbody=function(v,E){var S=n.create(f+v+m,E),y=c.DOM._children(S,"tbody")[0];return S.children.length>1&&y&&!p.test(v)&&y.parentNode.removeChild(y),S}),u("innerhtml-div","script")||(h.script=function(v,E){var S=E.createElement("div");return S.innerHTML="-"+v,S.removeChild(S.firstChild),S},h.link=h.style=h.script),u("innerhtml-div","tr")||(c.mix(h,{option:function(v,E){return n.create('<select><option class="yui3-big-dummy" selected></option>'+v+"</select>",E)},tr:function(v,E){return n.create("<tbody>"+v+"</tbody>",E)},td:function(v,E){return n.create("<tr>"+v+"</tr>",E)},col:function(v,E){return n.create("<colgroup>"+v+"</colgroup>",E)},tbody:"table"}),c.mix(h,{legend:"fieldset",th:h.td,thead:h.tbody,tfoot:h.tbody,caption:h.tbody,colgroup:h.tbody,optgroup:h.option})),n.creators=h,c.mix(c.DOM,{setWidth:function(v,E){c.DOM._setSize(v,"width",E)},setHeight:function(v,E){c.DOM._setSize(v,"height",E)},_setSize:function(v,E,S){S=S>0?S:0;var y=0;v.style[E]=S+"px",y=E==="height"?v.offsetHeight:v.offsetWidth,y>S&&(S=S-(y-S),S<0&&(S=0),v.style[E]=S+"px")}})},"3.17.2",{requires:["dom-core"]})},239429:function(){YUI.add("dom-core",function(c,b){var t="nodeType",l="ownerDocument",d="documentElement",o="defaultView",e="parentWindow",a="tagName",r="parentNode",s="previousSibling",n="nextSibling",i="contains",u="compareDocumentPosition",h=[],g=function(){var f=c.config.doc.createElement("div"),m=f.appendChild(c.config.doc.createTextNode("")),_=!1;try{_=f.contains(m)}catch{}return _}(),p={byId:function(f,m){return p.allById(f,m)[0]||null},getId:function(f){var m;return f.id&&!f.id.tagName&&!f.id.item?m=f.id:f.attributes&&f.attributes.id&&(m=f.attributes.id.value),m},setId:function(f,m){f.setAttribute?f.setAttribute("id",m):f.id=m},ancestor:function(f,m,_,v){var E=null;return _&&(E=!m||m(f)?f:null),E||p.elementByAxis(f,r,m,null,v)},ancestors:function(f,m,_,v){for(var E=f,S=[];E=p.ancestor(E,m,_,v);)if(_=!1,E&&(S.unshift(E),v&&v(E)))return S;return S},elementByAxis:function(f,m,_,v,E){for(;f&&(f=f[m]);){if((v||f[a])&&(!_||_(f)))return f;if(E&&E(f))return null}return null},contains:function(f,m){var _=!1;return!m||!f||!m[t]||!f[t]?_=!1:f[i]&&(m[t]===1||g)?_=f[i](m):f[u]?(f===m||f[u](m)&16)&&(_=!0):_=p._bruteContains(f,m),_},inDoc:function(f,m){var _=!1,v;return f&&f.nodeType&&(m||(m=f[l]),v=m[d],v&&v.contains&&f.tagName?_=v.contains(f):_=p.contains(v,f)),_},allById:function(f,m){m=m||c.config.doc;var _=[],v=[],E,S;if(m.querySelectorAll)v=m.querySelectorAll('[id="'+f+'"]');else if(m.all){if(_=m.all(f),_&&(_.nodeName&&(_.id===f?(v.push(_),_=h):_=[_]),_.length))for(E=0;S=_[E++];)(S.id===f||S.attributes&&S.attributes.id&&S.attributes.id.value===f)&&v.push(S)}else v=[p._getDoc(m).getElementById(f)];return v},isWindow:function(f){return!!(f&&f.scrollTo&&f.document)},_removeChildNodes:function(f){for(;f.firstChild;)f.removeChild(f.firstChild)},siblings:function(f,m){for(var _=[],v=f;v=v[s];)v[a]&&(!m||m(v))&&_.unshift(v);for(v=f;v=v[n];)v[a]&&(!m||m(v))&&_.push(v);return _},_bruteContains:function(f,m){for(;m;){if(f===m)return!0;m=m.parentNode}return!1},_getRegExp:function(f,m){return m=m||"",p._regexCache=p._regexCache||{},p._regexCache[f+m]||(p._regexCache[f+m]=new RegExp(f,m)),p._regexCache[f+m]},_getDoc:function(f){var m=c.config.doc;return f&&(m=f[t]===9?f:f[l]||f.document||c.config.doc),m},_getWin:function(f){var m=p._getDoc(f);return m[o]||m[e]||c.config.win},_batch:function(f,m,_,v,E,S){m=typeof m=="string"?p[m]:m;var y,C=0,O,A;if(m&&f)for(;O=f[C++];)y=y=m.call(p,O,_,v,E,S),typeof y<"u"&&(A||(A=[]),A.push(y));return typeof A<"u"?A:f},generateID:function(f){var m=f.id;return m||(m=c.stamp(f),f.id=m),m}};c.DOM=p},"3.17.2",{requires:["oop","features"]})},353015:function(){YUI.add("dom-screen",function(c,b){(function(t){var l="documentElement",d="compatMode",o="position",e="fixed",a="relative",r="left",s="top",n="BackCompat",i="medium",u="borderLeftWidth",h="borderTopWidth",g="getBoundingClientRect",p="getComputedStyle",f=t.DOM,m=/^t(?:able|d|h)$/i,_;t.UA.ie&&(t.config.doc[d]!=="BackCompat"?_=l:_="body"),t.mix(f,{winHeight:function(v){var E=f._getWinSize(v).height;return E},winWidth:function(v){var E=f._getWinSize(v).width;return E},docHeight:function(v){var E=f._getDocSize(v).height;return Math.max(E,f._getWinSize(v).height)},docWidth:function(v){var E=f._getDocSize(v).width;return Math.max(E,f._getWinSize(v).width)},docScrollX:function(v,E){E=E||v?f._getDoc(v):t.config.doc;var S=E.defaultView,y=S?S.pageXOffset:0;return Math.max(E[l].scrollLeft,E.body.scrollLeft,y)},docScrollY:function(v,E){E=E||v?f._getDoc(v):t.config.doc;var S=E.defaultView,y=S?S.pageYOffset:0;return Math.max(E[l].scrollTop,E.body.scrollTop,y)},getXY:function(){return t.config.doc[l][g]?function(v){var E=null,S,y,C,O,A,I,D,T,B,N;return v&&v.tagName&&(D=v.ownerDocument,C=D[d],C!==n?N=D[l]:N=D.body,N.contains?B=N.contains(v):B=t.DOM.contains(N,v),B?(T=D.defaultView,T&&"pageXOffset"in T?(S=T.pageXOffset,y=T.pageYOffset):(S=_?D[_].scrollLeft:f.docScrollX(v,D),y=_?D[_].scrollTop:f.docScrollY(v,D)),t.UA.ie&&(!D.documentMode||D.documentMode<8||C===n)&&(A=N.clientLeft,I=N.clientTop),O=v[g](),E=[O.left,O.top],(A||I)&&(E[0]-=A,E[1]-=I),(y||S)&&(!t.UA.ios||t.UA.ios>=4.2)&&(E[0]+=S,E[1]+=y)):E=f._getOffset(v)),E}:function(v){var E=null,S,y,C,O,A;if(v)if(f.inDoc(v)){for(E=[v.offsetLeft,v.offsetTop],S=v.ownerDocument,y=v,C=!!(t.UA.gecko||t.UA.webkit>519);y=y.offsetParent;)E[0]+=y.offsetLeft,E[1]+=y.offsetTop,C&&(E=f._calcBorders(y,E));if(f.getStyle(v,o)!=e){for(y=v;y=y.parentNode;)O=y.scrollTop,A=y.scrollLeft,t.UA.gecko&&f.getStyle(y,"overflow")!=="visible"&&(E=f._calcBorders(y,E)),(O||A)&&(E[0]-=A,E[1]-=O);E[0]+=f.docScrollX(v,S),E[1]+=f.docScrollY(v,S)}else E[0]+=f.docScrollX(v,S),E[1]+=f.docScrollY(v,S)}else E=f._getOffset(v);return E}}(),getScrollbarWidth:t.cached(function(){var v=t.config.doc,E=v.createElement("div"),S=v.getElementsByTagName("body")[0],y=.1;return S&&(E.style.cssText="position:absolute;visibility:hidden;overflow:scroll;width:20px;",E.appendChild(v.createElement("p")).style.height="1px",S.insertBefore(E,S.firstChild),y=E.offsetWidth-E.clientWidth,S.removeChild(E)),y},null,.1),getX:function(v){return f.getXY(v)[0]},getY:function(v){return f.getXY(v)[1]},setXY:function(v,E,S){var y=f.setStyle,C,O,A,I;v&&E&&(C=f.getStyle(v,o),O=f._getOffset(v),C=="static"&&(C=a,y(v,o,C)),I=f.getXY(v),E[0]!==null&&y(v,r,Math.floor(E[0]-I[0]+O[0])+"px"),E[1]!==null&&y(v,s,Math.floor(E[1]-I[1]+O[1])+"px"),S||(A=f.getXY(v),(A[0]!==E[0]||A[1]!==E[1])&&f.setXY(v,E,!0)))},setX:function(v,E){return f.setXY(v,[E,null])},setY:function(v,E){return f.setXY(v,[null,E])},swapXY:function(v,E){var S=f.getXY(v);f.setXY(v,f.getXY(E)),f.setXY(E,S)},_calcBorders:function(v,E){var S=parseInt(f[p](v,h),10)||0,y=parseInt(f[p](v,u),10)||0;return t.UA.gecko&&m.test(v.tagName)&&(S=0,y=0),E[0]+=y,E[1]+=S,E},_getWinSize:function(v,E){E=E||v?f._getDoc(v):t.config.doc;var S=E.defaultView||E.parentWindow,y=E[d],C=S.innerHeight,O=S.innerWidth,A=E[l];return y&&!t.UA.opera&&(y!="CSS1Compat"&&(A=E.body),C=A.clientHeight,O=A.clientWidth),{height:C,width:O}},_getDocSize:function(v){var E=v?f._getDoc(v):t.config.doc,S=E[l];return E[d]!="CSS1Compat"&&(S=E.body),{height:S.scrollHeight,width:S.scrollWidth}}})})(c),function(t){var l="top",d="right",o="bottom",e="left",a=function(s,n){var i=Math.max(s[l],n[l]),u=Math.min(s[d],n[d]),h=Math.min(s[o],n[o]),g=Math.max(s[e],n[e]),p={};return p[l]=i,p[d]=u,p[o]=h,p[e]=g,p},r=t.DOM;t.mix(r,{region:function(s){var n=r.getXY(s),i=!1;return s&&n&&(i=r._getRegion(n[1],n[0]+s.offsetWidth,n[1]+s.offsetHeight,n[0])),i},intersect:function(s,n,i){var u=i||r.region(s),h={},g=n,p;if(g.tagName)h=r.region(g);else if(t.Lang.isObject(n))h=n;else return!1;return p=a(h,u),{top:p[l],right:p[d],bottom:p[o],left:p[e],area:(p[o]-p[l])*(p[d]-p[e]),yoff:p[o]-p[l],xoff:p[d]-p[e],inRegion:r.inRegion(s,n,!1,i)}},inRegion:function(s,n,i,u){var h={},g=u||r.region(s),p=n,f;if(p.tagName)h=r.region(p);else if(t.Lang.isObject(n))h=n;else return!1;return i?g[e]>=h[e]&&g[d]<=h[d]&&g[l]>=h[l]&&g[o]<=h[o]:(f=a(h,g),f[o]>=f[l]&&f[d]>=f[e])},inViewportRegion:function(s,n,i){return r.inRegion(s,r.viewportRegion(s),n,i)},_getRegion:function(s,n,i,u){var h={};return h[l]=h[1]=s,h[e]=h[0]=u,h[o]=i,h[d]=n,h.width=h[d]-h[e],h.height=h[o]-h[l],h},viewportRegion:function(s){s=s||t.config.doc.documentElement;var n=!1,i,u;return s&&(i=r.docScrollX(s),u=r.docScrollY(s),n=r._getRegion(u,r.winWidth(s)+i,u+r.winHeight(s),i)),n}})}(c)},"3.17.2",{requires:["dom-base","dom-style"]})},819406:function(){YUI.add("dom-style-ie",function(c,b){var t="hasLayout",l="px",d="filter",o="filters",e="opacity",a="auto",r="borderWidth",s="borderTopWidth",n="borderRightWidth",i="borderBottomWidth",u="borderLeftWidth",h="width",g="height",p="transparent",f="visible",m="getComputedStyle",_=c.config.doc.documentElement,v=c.Features.test,E=c.Features.add,S=/^(\d[.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz|%){1}?/i,y=c.UA.ie>=8,C=function(I){return I.currentStyle||I.style},O={CUSTOM_STYLES:{},get:function(I,D){var T="",B;return I&&(B=C(I)[D],D===e&&c.DOM.CUSTOM_STYLES[e]?T=c.DOM.CUSTOM_STYLES[e].get(I):!B||B.indexOf&&B.indexOf(l)>-1?T=B:c.DOM.IE.COMPUTED[D]?T=c.DOM.IE.COMPUTED[D](I,D):S.test(B)?T=O.getPixel(I,D)+l:T=B),T},sizeOffsets:{width:["Left","Right"],height:["Top","Bottom"],top:["Top"],bottom:["Bottom"]},getOffset:function(I,D){var T=C(I)[D],B=D.charAt(0).toUpperCase()+D.substr(1),N="pixel"+B,P=O.sizeOffsets[D],x=I.ownerDocument.compatMode,R="";return T===a||T.indexOf("%")>-1?(R=I["offset"+B],x!=="BackCompat"&&(P[0]&&(R-=O.getPixel(I,"padding"+P[0]),R-=O.getBorderWidth(I,"border"+P[0]+"Width",1)),P[1]&&(R-=O.getPixel(I,"padding"+P[1]),R-=O.getBorderWidth(I,"border"+P[1]+"Width",1)))):(!I.style[N]&&!I.style[D]&&(I.style[D]=T),R=I.style[N]),R+l},borderMap:{thin:y?"1px":"2px",medium:y?"3px":"4px",thick:y?"5px":"6px"},getBorderWidth:function(I,D,T){var B=I.currentStyle[D];return B.indexOf(l)<0&&(O.borderMap[B]&&I.currentStyle.borderStyle!=="none"?B=O.borderMap[B]:B=0),T?parseFloat(B):B},getPixel:function(I,D){var T=null,B=C(I),N=B.right,P=B[D];return I.style.right=P,T=I.style.pixelRight,I.style.right=N,T},getMargin:function(I,D){var T,B=C(I);return B[D]===a?T=0:T=O.getPixel(I,D),T+l},getVisibility:function(I,D){for(var T;(T=I.currentStyle)&&T[D]==="inherit";)I=I.parentNode;return T?T[D]:f},getColor:function(I,D){var T=C(I)[D];return(!T||T===p)&&c.DOM.elementByAxis(I,"parentNode",null,function(B){if(T=C(B)[D],T&&T!==p)return I=B,!0}),c.Color.toRGB(T)},getBorderColor:function(I,D){var T=C(I),B=T[D]||T.color;return c.Color.toRGB(c.Color.toHex(B))}},A={};E("style","computedStyle",{test:function(){return"getComputedStyle"in c.config.win}}),E("style","opacity",{test:function(){return"opacity"in _.style}}),E("style","filter",{test:function(){return"filters"in _}}),!v("style","opacity")&&v("style","filter")&&(c.DOM.CUSTOM_STYLES[e]={get:function(I){var D=100;try{D=I[o]["DXImageTransform.Microsoft.Alpha"][e]}catch{try{D=I[o]("alpha")[e]}catch{}}return D/100},set:function(I,D,T){var B,N=C(I),P=N[d];T=T||I.style,D===""&&(B=e in N?N[e]:1,D=B),typeof P=="string"&&(T[d]=P.replace(/alpha([^)]*\))/gi,"")+(D<=1?"alpha("+e+"="+D*100+")":""),T[d]||T.removeAttribute(d),N[t]||(T.zoom=1))}});try{c.config.doc.createElement("div").style.height="-1px"}catch{c.DOM.CUSTOM_STYLES.height={set:function(D,T,B){var N=parseFloat(T);(N>=0||T==="auto"||T==="")&&(B.height=T)}},c.DOM.CUSTOM_STYLES.width={set:function(D,T,B){var N=parseFloat(T);(N>=0||T==="auto"||T==="")&&(B.width=T)}}}v("style","computedStyle")||(A[h]=A[g]=O.getOffset,A.color=A.backgroundColor=O.getColor,A[r]=A[s]=A[n]=A[i]=A[u]=O.getBorderWidth,A.marginTop=A.marginRight=A.marginBottom=A.marginLeft=O.getMargin,A.visibility=O.getVisibility,A.borderColor=A.borderTopColor=A.borderRightColor=A.borderBottomColor=A.borderLeftColor=O.getBorderColor,c.DOM[m]=O.get,c.namespace("DOM.IE"),c.DOM.IE.COMPUTED=A,c.DOM.IE.ComputedStyle=O)},"3.17.2",{requires:["dom-style","color-base"]})},743384:function(){YUI.add("dom-style",function(c,b){var t="documentElement",l="defaultView",d="ownerDocument",o="style",e="float",a="cssFloat",r="styleFloat",s="transparent",n="getComputedStyle",i="getBoundingClientRect",u=c.config.doc,h=c.DOM,g,p,f=["WebkitTransform","MozTransform","OTransform","msTransform","transform"],m=/width|height|top|left|right|bottom|margin|padding/i;c.Array.each(f,function(_){_ in u[t].style&&(g=_,p=_+"Origin")}),c.mix(h,{DEFAULT_UNIT:"px",CUSTOM_STYLES:{},setStyle:function(_,v,E,S){S=S||_.style;var y=h.CUSTOM_STYLES;if(S){if(E===null||E===""?E="":!isNaN(Number(E))&&m.test(v)&&(E+=h.DEFAULT_UNIT),v in y)if(y[v].set){y[v].set(_,E,S);return}else typeof y[v]=="string"&&(v=y[v]);else v===""&&(v="cssText",E="");S[v]=E}},getStyle:function(_,v,E){E=E||_.style;var S=h.CUSTOM_STYLES,y="";if(E){if(v in S){if(S[v].get)return S[v].get(_,v,E);typeof S[v]=="string"&&(v=S[v])}y=E[v],y===""&&(y=h[n](_,v))}return y},setStyles:function(_,v){var E=_.style;c.each(v,function(S,y){h.setStyle(_,y,S,E)},h)},getComputedStyle:function(_,v){var E="",S=_[d],y;return _[o]&&S[l]&&S[l][n]&&(y=S[l][n](_,null),y&&(E=y[v])),E}}),u[t][o][a]!==void 0?h.CUSTOM_STYLES[e]=a:u[t][o][r]!==void 0&&(h.CUSTOM_STYLES[e]=r),c.UA.webkit&&(h[n]=function(_,v){if(_&&_[d]&&_[d][l]&&_[d][l][n]){var E=_[d][l],S=E[n](_,"")[v];return S==="rgba(0, 0, 0, 0)"&&(S=s),S}return""}),c.DOM._getAttrOffset=function(_,v){var E=c.DOM[n](_,v),S=_.offsetParent,y,C,O;return E==="auto"&&(y=c.DOM.getStyle(_,"position"),y==="static"||y==="relative"?E=0:S&&S[i]&&(C=S[i]()[v],O=_[i]()[v],v==="left"||v==="top"?E=O-C:E=C-_[i]()[v])),E},c.DOM._getOffset=function(_){var v,E=null;return _&&(v=h.getStyle(_,"position"),E=[parseInt(h[n](_,"left"),10),parseInt(h[n](_,"top"),10)],isNaN(E[0])&&(E[0]=parseInt(h.getStyle(_,"left"),10),isNaN(E[0])&&(E[0]=v==="relative"?0:_.offsetLeft||0)),isNaN(E[1])&&(E[1]=parseInt(h.getStyle(_,"top"),10),isNaN(E[1])&&(E[1]=v==="relative"?0:_.offsetTop||0))),E},g&&(h.CUSTOM_STYLES.transform={set:function(_,v,E){E[g]=v},get:function(_){return h[n](_,g)}},h.CUSTOM_STYLES.transformOrigin={set:function(_,v,E){E[p]=v},get:function(_){return h[n](_,p)}})},"3.17.2",{requires:["dom-base"]})},514054:function(){YUI.add("escape",function(c,b){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},l={html:function(d){return(d+"").replace(/[&<>"'\/`]/g,l._htmlReplacer)},regex:function(d){return(d+"").replace(/[\-$\^*()+\[\]{}|\\,.?\s]/g,"\\$&")},_htmlReplacer:function(d){return t[d]}};l.regexp=l.regex,c.Escape=l},"3.17.2",{requires:["yui-base"]})},245518:function(){(function(){var c,b=YUI.Env,t=YUI.config,l=t.doc,d=l&&l.documentElement,o="onreadystatechange",e=t.pollInterval||40;if(d.doScroll&&!b._ieready){b._ieready=function(){b._ready()};/*! DOMReady: based on work by: Dean Edwards/John Resig/Matthias Miller/Diego Perini */self!==self.top?(c=function(){l.readyState=="complete"&&(b.remove(l,o,c),b.ieready())},b.add(l,o,c)):b._dri=setInterval(function(){try{d.doScroll("left"),clearInterval(b._dri),b._dri=null,b._ieready()}catch{}},e)}})(),YUI.add("event-base-ie",function(c,b){function t(){c.DOM2EventFacade.apply(this,arguments)}function l(n){var i=c.config.doc.createEventObject(n),u=l.prototype;return i.hasOwnProperty=function(){return!0},i.init=u.init,i.halt=u.halt,i.preventDefault=u.preventDefault,i.stopPropagation=u.stopPropagation,i.stopImmediatePropagation=u.stopImmediatePropagation,c.DOM2EventFacade.apply(i,arguments),i}var d=c.config.doc&&c.config.doc.implementation,o=c.config.lazyEventFacade,e={0:1,4:2,2:3},a={mouseout:"toElement",mouseover:"fromElement"},r=c.DOM2EventFacade.resolve,s={init:function(){t.superclass.init.apply(this,arguments);var n=this._event,i,u,h,g,p,f;this.target=r(n.srcElement),"clientX"in n&&!i&&i!==0&&(i=n.clientX,u=n.clientY,h=c.config.doc,g=h.body,p=h.documentElement,i+=p.scrollLeft||g&&g.scrollLeft||0,u+=p.scrollTop||g&&g.scrollTop||0,this.pageX=i,this.pageY=u),n.type=="mouseout"?f=n.toElement:n.type=="mouseover"&&(f=n.fromElement),this.relatedTarget=r(f||n.relatedTarget),this.which=this.button=n.keyCode||e[n.button]||n.button},stopPropagation:function(){this._event.cancelBubble=!0,this._wrapper.stopped=1,this.stopped=1},stopImmediatePropagation:function(){this.stopPropagation(),this._wrapper.stopped=2,this.stopped=2},preventDefault:function(n){this._event.returnValue=n||!1,this._wrapper.prevented=1,this.prevented=1}};if(c.extend(t,c.DOM2EventFacade,s),c.extend(l,c.DOM2EventFacade,s),l.prototype.init=function(){var n=this._event,i=this._wrapper.overrides,u=l._define,h=l._lazyProperties,g;this.altKey=n.altKey,this.ctrlKey=n.ctrlKey,this.metaKey=n.metaKey,this.shiftKey=n.shiftKey,this.type=i&&i.type||n.type,this.clientX=n.clientX,this.clientY=n.clientY,this.keyCode=this.charCode=n.keyCode,this.which=this.button=n.keyCode||e[n.button]||n.button;for(g in h)h.hasOwnProperty(g)&&u(this,g,h[g]);this._touch&&this._touch(n,this._currentTarget,this._wrapper)},l._lazyProperties={target:function(){return r(this._event.srcElement)},relatedTarget:function(){var n=this._event,i=a[n.type]||"relatedTarget";return r(n[i]||n.relatedTarget)},currentTarget:function(){return r(this._currentTarget)},wheelDelta:function(){var n=this._event;if(n.type==="mousewheel"||n.type==="DOMMouseScroll")return n.detail?n.detail*-1:Math.round(n.wheelDelta/80)||(n.wheelDelta<0?-1:1)},pageX:function(){var n=this._event,i=n.pageX,u,h,g;return i===void 0&&(u=c.config.doc,h=u.body&&u.body.scrollLeft,g=u.documentElement.scrollLeft,i=n.clientX+(g||h||0)),i},pageY:function(){var n=this._event,i=n.pageY,u,h,g;return i===void 0&&(u=c.config.doc,h=u.body&&u.body.scrollTop,g=u.documentElement.scrollTop,i=n.clientY+(g||h||0)),i}},l._define=function(n,i,u){function h(g){var p=arguments.length?g:u.call(this);return delete n[i],Object.defineProperty(n,i,{value:p,configurable:!0,writable:!0}),p}Object.defineProperty(n,i,{get:h,set:h,configurable:!0})},d&&!d.hasFeature("Events","2.0")){if(o)try{Object.defineProperty(c.config.doc.createEventObject(),"z",{})}catch{o=!1}c.DOMEventFacade=o?l:t}},"3.17.2",{requires:["node-base"]})},68367:function(){YUI.add("event-base",function(c,b){c.publish("domready",{fireOnce:!0,async:!0}),YUI.Env.DOMReady?c.fire("domready"):c.Do.before(function(){c.fire("domready")},YUI.Env,"_ready"),window.addEventListener("domready",function(a){c.fire("domready")});var t=c.UA,l={},d={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9,63272:46,63273:36,63275:35},o=function(a){if(!a)return a;try{a&&a.nodeType==3&&(a=a.parentNode)}catch{return null}return c.one(a)},e=function(a,r,s){this._event=a,this._currentTarget=r,this._wrapper=s||l,this.init()};c.extend(e,Object,{init:function(){var a=this._event,r=this._wrapper.overrides,s=a.pageX,n=a.pageY,i,u=this._currentTarget;this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.metaKey=a.metaKey,this.shiftKey=a.shiftKey,this.type=r&&r.type||a.type,this.clientX=a.clientX,this.clientY=a.clientY,this.pageX=s,this.pageY=n,i=a.keyCode||a.charCode,t.webkit&&i in d&&(i=d[i]),this.keyCode=i,this.charCode=i,this.which=a.which||a.charCode||i,this.button=this.which,this.target=o(a.target),this.currentTarget=o(u),this.relatedTarget=o(a.relatedTarget),(a.type=="mousewheel"||a.type=="DOMMouseScroll")&&(this.wheelDelta=a.detail?a.detail*-1:Math.round(a.wheelDelta/80)||(a.wheelDelta<0?-1:1)),this._touch&&this._touch(a,u,this._wrapper)},stopPropagation:function(){this._event.stopPropagation(),this._wrapper.stopped=1,this.stopped=1},stopImmediatePropagation:function(){var a=this._event;a.stopImmediatePropagation?a.stopImmediatePropagation():this.stopPropagation(),this._wrapper.stopped=2,this.stopped=2},preventDefault:function(a){var r=this._event;r.preventDefault(),a&&(r.returnValue=a),this._wrapper.prevented=1,this.prevented=1},halt:function(a){a?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}}),e.resolve=o,c.DOM2EventFacade=e,c.DOMEventFacade=e,function(){c.Env.evt.dom_wrappers={},c.Env.evt.dom_map={};var a=c.Env.evt,r=c.config,s=r.win,n=YUI.Env.add,i=YUI.Env.remove,u=function(){YUI.Env.windowLoaded=!0,c.Event._load(),i(s,"load",u)},h=function(){c.Event._unload()},g="domready",p="~yui|2|compat~",f=function(E){try{return E&&typeof E!="string"&&c.Lang.isNumber(E.length)&&!E.tagName&&!c.DOM.isWindow(E)}catch{return!1}},m=c.CustomEvent.prototype._delete,_=function(E){var S=m.apply(this,arguments);return this.hasSubs()||c.Event._clean(this),S},v=function(){var E=!1,S=0,y=[],C=a.dom_wrappers,O=null,A=a.dom_map;return{POLL_RETRYS:1e3,POLL_INTERVAL:40,lastError:null,_interval:null,_dri:null,DOMReady:!1,startInterval:function(){v._interval||(v._interval=setInterval(v._poll,v.POLL_INTERVAL))},onAvailable:function(I,D,T,B,N,P){var x=c.Array(I),R,w;for(R=0;R<x.length;R=R+1)y.push({id:x[R],fn:D,obj:T,override:B,checkReady:N,compat:P});return S=this.POLL_RETRYS,c.config.win.setTimeout(v._poll,0),w=new c.EventHandle({_delete:function(){if(w.handle){w.handle.detach();return}var k,q;for(k=0;k<x.length;k++)for(q=0;q<y.length;q++)x[k]===y[q].id&&y.splice(q,1)}}),w},onContentReady:function(I,D,T,B,N){return v.onAvailable(I,D,T,B,!0,N)},attach:function(I,D,T,B){return v._attach(c.Array(arguments,0,!0))},_createWrapper:function(I,D,T,B,N){var P,x=c.stamp(I),R="event:"+x+D;return N===!1&&(R+="native"),T&&(R+="capture"),P=C[R],P||(P=c.publish(R,{silent:!0,bubbles:!1,emitFacade:!1,contextFn:function(){return B?P.el:(P.nodeRef=P.nodeRef||c.one(P.el),P.nodeRef)}}),P.overrides={},P.el=I,P.key=R,P.domkey=x,P.type=D,P.fn=function(w){P.fire(v.getEvent(w,I,B||N===!1))},P.capture=T,I==s&&D=="load"&&(P.fireOnce=!0,O=R),P._delete=_,C[R]=P,A[x]=A[x]||{},A[x][R]=P,n(I,D,P.fn,T)),P},_attach:function(I,D){var T,B,N,P,x,R=!1,w,k=I[0],q=I[1],F=I[2]||s,z=D&&D.facade,j=D&&D.capture,X=D&&D.overrides;if(I[I.length-1]===p&&(T=!0),!q||!q.call)return!1;if(f(F))return B=[],c.each(F,function(J,Q){I[2]=J,B.push(v._attach(I.slice(),D))}),new c.EventHandle(B);if(c.Lang.isString(F)){if(T)N=c.DOM.byId(F);else switch(N=c.Selector.query(F),N.length){case 0:N=null;break;case 1:N=N[0];break;default:return I[2]=N,v._attach(I,D)}if(N)F=N;else return w=v.onAvailable(F,function(){w.handle=v._attach(I,D)},v,!0,!1,T),w}return F?(c.Node&&c.instanceOf(F,c.Node)&&(F=c.Node.getDOMNode(F)),P=v._createWrapper(F,k,j,T,z),X&&c.mix(P.overrides,X),F==s&&k=="load"&&YUI.Env.windowLoaded&&(R=!0),T&&I.pop(),x=I[3],w=P._on(q,x,I.length>4?I.slice(4):null),R&&P.fire(),w):!1},detach:function(I,D,T,B){var N=c.Array(arguments,0,!0),P,x,R,w,k,q;if(N[N.length-1]===p&&(P=!0),I&&I.detach)return I.detach();if(typeof T=="string"&&(P?T=c.DOM.byId(T):(T=c.Selector.query(T),x=T.length,x<1?T=null:x==1&&(T=T[0]))),!T)return!1;if(T.detach)return N.splice(2,1),T.detach.apply(T,N);if(f(T)){for(R=!0,w=0,x=T.length;w<x;++w)N[2]=T[w],R=c.Event.detach.apply(c.Event,N)&&R;return R}return!I||!D||!D.call?v.purgeElement(T,!1,I):(k="event:"+c.stamp(T)+I,q=C[k],q?q.detach(D):!1)},getEvent:function(I,D,T){var B=I||s.event;return T?B:new c.DOMEventFacade(B,D,C["event:"+c.stamp(D)+I.type])},generateId:function(I){return c.DOM.generateID(I)},_isValidCollection:f,_load:function(I){E||(E=!0,c.fire&&c.fire(g),v._poll())},_poll:function(){if(!v.locked){if(c.UA.ie&&!YUI.Env.DOMReady){v.startInterval();return}v.locked=!0;var I,D,T,B,N,P,x=!E;for(x||(x=S>0),N=[],P=function(R,w){var k,q=w.override;try{w.compat?(w.override?q===!0?k=w.obj:k=q:k=R,w.fn.call(k,w.obj)):(k=w.obj||c.one(R),w.fn.apply(k,c.Lang.isArray(q)?q:[]))}catch{}},I=0,D=y.length;I<D;++I)T=y[I],T&&!T.checkReady&&(B=T.compat?c.DOM.byId(T.id):c.Selector.query(T.id,null,!0),B?(P(B,T),y[I]=null):N.push(T));for(I=0,D=y.length;I<D;++I)T=y[I],T&&T.checkReady&&(B=T.compat?c.DOM.byId(T.id):c.Selector.query(T.id,null,!0),B?(E||B.get&&B.get("nextSibling")||B.nextSibling)&&(P(B,T),y[I]=null):N.push(T));S=N.length===0?0:S-1,x?v.startInterval():(clearInterval(v._interval),v._interval=null),v.locked=!1}},purgeElement:function(I,D,T){var B=c.Lang.isString(I)?c.Selector.query(I,null,!0):I,N=v.getListeners(B,T),P,x,R,w;if(D&&B)for(N=N||[],R=c.Selector.query("*",B),x=R.length,P=0;P<x;++P)w=v.getListeners(R[P],T),w&&(N=N.concat(w));if(N)for(P=0,x=N.length;P<x;++P)N[P].detachAll()},_clean:function(I){var D=I.key,T=I.domkey;i(I.el,I.type,I.fn,I.capture),delete C[D],delete c._yuievt.events[D],A[T]&&(delete A[T][D],c.Object.size(A[T])||delete A[T])},getListeners:function(I,D){var T=c.stamp(I,!0),B=A[T],N=[],P=D?"event:"+T+D:null,x=a.plugins;return B?(P?(x[D]&&x[D].eventDef&&(P+="_synth"),B[P]&&N.push(B[P]),P+="native",B[P]&&N.push(B[P])):c.each(B,function(R,w){N.push(R)}),N.length?N:null):null},_unload:function(I){c.each(C,function(D,T){D.type=="unload"&&D.fire(I),D.detachAll()}),i(s,"unload",h)},nativeAdd:n,nativeRemove:i}}();if(c.Event=v,r.injected||YUI.Env.windowLoaded?u():n(s,"load",u),c.UA.ie&&(c.on(g,v._poll),c.UA.ie<7))try{n(s,"unload",h)}catch{}v.Custom=c.CustomEvent,v.Subscriber=c.Subscriber,v.Target=c.EventTarget,v.Handle=c.EventHandle,v.Facade=c.EventFacade,v._poll()}(),c.Env.evt.plugins.available={on:function(a,r,s,n){var i=arguments.length>4?c.Array(arguments,4,!0):null;return c.Event.onAvailable.call(c.Event,s,r,n,i)}},c.Env.evt.plugins.contentready={on:function(a,r,s,n){var i=arguments.length>4?c.Array(arguments,4,!0):null;return c.Event.onContentReady.call(c.Event,s,r,n,i)}}},"3.17.2",{requires:["event-custom-base"]})},51852:function(){YUI.add("event-custom-base",function(c,b){c.Env.evt={handles:{},plugins:{}};var t=0,l=1,d={objs:null,before:function(y,C,O,A){var I=y,D;return A&&(D=[y,A].concat(c.Array(arguments,4,!0)),I=c.rbind.apply(c,D)),this._inject(t,I,C,O)},after:function(y,C,O,A){var I=y,D;return A&&(D=[y,A].concat(c.Array(arguments,4,!0)),I=c.rbind.apply(c,D)),this._inject(l,I,C,O)},_inject:function(y,C,O,A){var I=c.stamp(O),D,T;return O._yuiaop||(O._yuiaop={}),D=O._yuiaop,D[A]||(D[A]=new c.Do.Method(O,A),O[A]=function(){return D[A].exec.apply(D[A],arguments)}),T=I+c.stamp(C)+A,D[A].register(T,C,y),new c.EventHandle(D[A],T)},detach:function(y){y.detach&&y.detach()}};c.Do=d,d.Method=function(y,C){this.obj=y,this.methodName=C,this.method=y[C],this.before={},this.after={}},d.Method.prototype.register=function(y,C,O){O?this.after[y]=C:this.before[y]=C},d.Method.prototype._delete=function(y){delete this.before[y],delete this.after[y]},d.Method.prototype.exec=function(){var y=c.Array(arguments,0,!0),C,O,A,I=this.before,D=this.after,T=!1;for(C in I)if(I.hasOwnProperty(C)&&(O=I[C].apply(this.obj,y),O))switch(O.constructor){case d.Halt:return O.retVal;case d.AlterArgs:y=O.newArgs;break;case d.Prevent:T=!0;break;default:}T||(O=this.method.apply(this.obj,y)),d.originalRetVal=O,d.currentRetVal=O;for(C in D)if(D.hasOwnProperty(C)){if(A=D[C].apply(this.obj,y),A&&A.constructor===d.Halt)return A.retVal;A&&A.constructor===d.AlterReturn&&(O=A.newRetVal,d.currentRetVal=O)}return O},d.AlterArgs=function(y,C){this.msg=y,this.newArgs=C},d.AlterReturn=function(y,C){this.msg=y,this.newRetVal=C},d.Halt=function(y,C){this.msg=y,this.retVal=C},d.Prevent=function(y){this.msg=y},d.Error=d.Halt;var o=c.Array,e="after",a=["broadcast","monitored","bubbles","context","contextFn","currentTarget","defaultFn","defaultTargetOnly","details","emitFacade","fireOnce","async","host","preventable","preventedFn","queuable","silent","stoppedFn","target","type"],r=o.hash(a),s=Array.prototype.slice,n=9,i="yui:log",u=function(y,C,O){var A;for(A in C)r[A]&&(O||!(A in y))&&(y[A]=C[A]);return y};c.CustomEvent=function(y,C){this._kds=c.CustomEvent.keepDeprecatedSubs,this.id=c.guid(),this.type=y,this.silent=this.logSystem=y===i,this._kds&&(this.subscribers={},this.afters={}),C&&u(this,C,!0)},c.CustomEvent.keepDeprecatedSubs=!1,c.CustomEvent.mixConfigs=u,c.CustomEvent.prototype={constructor:c.CustomEvent,signature:n,context:c,preventable:!0,bubbles:!0,hasSubs:function(y){var C=0,O=0,A=this._subscribers,I=this._afters,D=this.sibling;return A&&(C=A.length),I&&(O=I.length),D&&(A=D._subscribers,I=D._afters,A&&(C+=A.length),I&&(O+=I.length)),y?y==="after"?O:C:C+O},monitor:function(y){this.monitored=!0;var C=this.id+"|"+this.type+"_"+y,O=s.call(arguments,0);return O[0]=C,this.host.on.apply(this.host,O)},getSubs:function(){var y=this.sibling,C=this._subscribers,O=this._afters,A,I;return y&&(A=y._subscribers,I=y._afters),A?C?C=C.concat(A):C=A.concat():C?C=C.concat():C=[],I?O?O=O.concat(I):O=I.concat():O?O=O.concat():O=[],[C,O]},applyConfig:function(y,C){u(this,y,C)},_on:function(y,C,O,A){var I=new c.Subscriber(y,C,O,A),D;return this.fireOnce&&this.fired&&(D=this.firedWith,this.emitFacade&&this._addFacadeToArgs&&this._addFacadeToArgs(D),this.async?c.config.win.setTimeout(c.bind(this._notify,this,I,D),0):this._notify(I,D)),A===e?(this._afters||(this._afters=[]),this._afters.push(I)):(this._subscribers||(this._subscribers=[]),this._subscribers.push(I)),this._kds&&(A===e?this.afters[I.id]=I:this.subscribers[I.id]=I),new c.EventHandle(this,I)},subscribe:function(y,C){var O=arguments.length>2?s.call(arguments,2):null;return this._on(y,C,O,!0)},on:function(y,C){var O=arguments.length>2?s.call(arguments,2):null;return this.monitored&&this.host&&this.host._monitor("attach",this,{args:arguments}),this._on(y,C,O,!0)},after:function(y,C){var O=arguments.length>2?s.call(arguments,2):null;return this._on(y,C,O,e)},detach:function(y,C){if(y&&y.detach)return y.detach();var O,A,I=0,D=this._subscribers,T=this._afters;if(D)for(O=D.length;O>=0;O--)A=D[O],A&&(!y||y===A.fn)&&(this._delete(A,D,O),I++);if(T)for(O=T.length;O>=0;O--)A=T[O],A&&(!y||y===A.fn)&&(this._delete(A,T,O),I++);return I},unsubscribe:function(){return this.detach.apply(this,arguments)},_notify:function(y,C,O){var A;return A=y.notify(C,this),!(A===!1||this.stopped>1)},log:function(y,C){},fire:function(){var y=[];return y.push.apply(y,arguments),this._fire(y)},_fire:function(y){return this.fireOnce&&this.fired?!0:(this.fired=!0,this.fireOnce&&(this.firedWith=y),this.emitFacade?this.fireComplex(y):this.fireSimple(y))},fireSimple:function(y){if(this.stopped=0,this.prevented=0,this.hasSubs()){var C=this.getSubs();this._procSubs(C[0],y),this._procSubs(C[1],y)}return this.broadcast&&this._broadcast(y),!this.stopped},fireComplex:function(y){return y[0]=y[0]||{},this.fireSimple(y)},_procSubs:function(y,C,O){var A,I,D;for(I=0,D=y.length;I<D;I++)if(A=y[I],A&&A.fn&&(this._notify(A,C,O)===!1&&(this.stopped=2),this.stopped===2))return!1;return!0},_broadcast:function(y){if(!this.stopped&&this.broadcast){var C=y.concat();C.unshift(this.type),this.host!==c&&c.fire.apply(c,C),this.broadcast===2&&c.Global.fire.apply(c.Global,C)}},unsubscribeAll:function(){return this.detachAll.apply(this,arguments)},detachAll:function(){return this.detach()},_delete:function(y,C,O){var A=y._when;C||(C=A===e?this._afters:this._subscribers),C&&(O=o.indexOf(C,y,0),y&&C[O]===y&&C.splice(O,1)),this._kds&&(A===e?delete this.afters[y.id]:delete this.subscribers[y.id]),this.monitored&&this.host&&this.host._monitor("detach",this,{ce:this,sub:y}),y&&(y.deleted=!0)}},c.Subscriber=function(y,C,O,A){this.fn=y,this.context=C,this.id=c.guid(),this.args=O,this._when=A},c.Subscriber.prototype={constructor:c.Subscriber,_notify:function(y,C,O){if(this.deleted&&!this.postponed)if(this.postponed)delete this.fn,delete this.context;else return delete this.postponed,null;var A=this.args,I;switch(O.signature){case 0:I=this.fn.call(y,O.type,C,y);break;case 1:I=this.fn.call(y,C[0]||null,y);break;default:A||C?(C=C||[],A=A?C.concat(A):C,I=this.fn.apply(y,A)):I=this.fn.call(y)}return this.once&&O._delete(this),I},notify:function(y,C){var O=this.context,A=!0;if(O||(O=C.contextFn?C.contextFn():C.context),c.config&&c.config.throwFail)A=this._notify(O,y,C);else try{A=this._notify(O,y,C)}catch(I){c.error(this+" failed: "+I.message,I)}return A},contains:function(y,C){return C?this.fn===y&&this.context===C:this.fn===y},valueOf:function(){return this.id}},c.EventHandle=function(y,C){this.evt=y,this.sub=C},c.EventHandle.prototype={batch:function(y,C){y.call(C||this,this),c.Lang.isArray(this.evt)&&c.Array.each(this.evt,function(O){O.batch.call(C||O,y)})},detach:function(){var y=this.evt,C=0,O;if(y)if(c.Lang.isArray(y))for(O=0;O<y.length;O++)C+=y[O].detach();else y._delete(this.sub),C=1;return C},monitor:function(y){return this.evt.monitor.apply(this.evt,arguments)}};var h=c.Lang,g=":",p="|",f="~AFTER~",m=/(.*?)(:)(.*?)/,_=c.cached(function(y){return y.replace(m,"*$2$3")}),v=function(y,C){return!C||!y||y.indexOf(g)>-1?y:C+g+y},E=c.cached(function(y,C){var O=y,A,I,D;return h.isString(O)?(D=O.indexOf(f),D>-1&&(I=!0,O=O.substr(f.length)),D=O.indexOf(p),D>-1&&(A=O.substr(0,D),O=O.substr(D+1),O==="*"&&(O=null)),[A,C?v(O,C):O,I,O]):O}),S=function(y){var C=this._yuievt,O;C||(C=this._yuievt={events:{},targets:null,config:{host:this,context:this},chain:c.config.chain}),O=C.config,y&&(u(O,y,!0),y.chain!==void 0&&(C.chain=y.chain),y.prefix&&(O.prefix=y.prefix))};S.prototype={constructor:S,once:function(){var y=this.on.apply(this,arguments);return y.batch(function(C){C.sub&&(C.sub.once=!0)}),y},onceAfter:function(){var y=this.after.apply(this,arguments);return y.batch(function(C){C.sub&&(C.sub.once=!0)}),y},parseType:function(y,C){return E(y,C||this._yuievt.config.prefix)},on:function(y,C,O){var A=this._yuievt,I=E(y,A.config.prefix),D,T,B,N,P,x,R,w=c.Env.evt.handles,k,q,F,z=c.Node,j,X,J;return this._monitor("attach",I[1],{args:arguments,category:I[0],after:I[2]}),h.isObject(y)?h.isFunction(y)?c.Do.before.apply(c.Do,arguments):(D=C,T=O,B=s.call(arguments,0),N=[],h.isArray(y)&&(J=!0),k=y._after,delete y._after,c.each(y,function(Q,ie){h.isObject(Q)&&(D=Q.fn||(h.isFunction(Q)?Q:D),T=Q.context||T);var ce=k?f:"";B[0]=ce+(J?Q:ie),B[1]=D,B[2]=T,N.push(this.on.apply(this,B))},this),A.chain?this:new c.EventHandle(N)):(x=I[0],k=I[2],F=I[3],z&&c.instanceOf(this,z)&&F in z.DOM_EVENTS?(B=s.call(arguments,0),B.splice(2,0,z.getDOMNode(this)),c.on.apply(c,B)):(y=I[1],c.instanceOf(this,YUI)&&(q=c.Env.evt.plugins[y],B=s.call(arguments,0),B[0]=F,z&&(j=B[2],c.instanceOf(j,c.NodeList)?j=c.NodeList.getDOMNodes(j):c.instanceOf(j,z)&&(j=z.getDOMNode(j)),X=F in z.DOM_EVENTS,X&&(B[2]=j)),q?R=q.on.apply(c,B):(!y||X)&&(R=c.Event._attach(B))),R||(P=A.events[y]||this.publish(y),R=P._on(C,O,arguments.length>3?s.call(arguments,3):null,k?"after":!0),y.indexOf("*:")!==-1&&(this._hasSiblings=!0)),x&&(w[x]=w[x]||{},w[x][y]=w[x][y]||[],w[x][y].push(R)),A.chain?this:R))},subscribe:function(){return this.on.apply(this,arguments)},detach:function(y,C,O){var A=this._yuievt.events,I,D=c.Node,T=D&&c.instanceOf(this,D);if(!y&&this!==c){for(I in A)A.hasOwnProperty(I)&&A[I].detach(C,O);return T&&c.Event.purgeElement(D.getDOMNode(this)),this}var B=E(y,this._yuievt.config.prefix),N=h.isArray(B)?B[0]:null,P=B?B[3]:null,x,R=c.Env.evt.handles,w,k,q,F,z=function(j,X,J){var Q=j[X],ie,ce;if(Q)for(ce=Q.length-1;ce>=0;--ce)ie=Q[ce].evt,(ie.host===J||ie.el===J)&&Q[ce].detach()};if(N){if(k=R[N],y=B[1],w=T?c.Node.getDOMNode(this):this,k){if(y)z(k,y,w);else for(I in k)k.hasOwnProperty(I)&&z(k,I,w);return this}}else{if(h.isObject(y)&&y.detach)return y.detach(),this;if(T&&(!P||P in D.DOM_EVENTS))return q=s.call(arguments,0),q[2]=D.getDOMNode(this),c.detach.apply(c,q),this}if(x=c.Env.evt.plugins[P],c.instanceOf(this,YUI)){if(q=s.call(arguments,0),x&&x.detach)return x.detach.apply(c,q),this;if(!y||!x&&D&&y in D.DOM_EVENTS)return q[0]=y,c.Event.detach.apply(c.Event,q),this}return F=A[B[1]],F&&F.detach(C,O),this},unsubscribe:function(){return this.detach.apply(this,arguments)},detachAll:function(y){return this.detach(y)},unsubscribeAll:function(){return this.detachAll.apply(this,arguments)},publish:function(y,C){var O,A=this._yuievt,I=A.config,D=I.prefix;return typeof y=="string"?(D&&(y=v(y,D)),O=this._publish(y,I,C)):(O={},c.each(y,function(T,B){D&&(B=v(B,D)),O[B]=this._publish(B,I,T||C)},this)),O},_getFullType:function(y){var C=this._yuievt.config.prefix;return C?C+g+y:y},_publish:function(y,C,O){var A,I=this._yuievt,D=I.config,T=D.host,B=D.context,N=I.events;return A=N[y],(D.monitored&&!A||A&&A.monitored)&&this._monitor("publish",y,{args:arguments}),A||(A=N[y]=new c.CustomEvent(y,C),C||(A.host=T,A.context=B)),O&&u(A,O,!0),A},_monitor:function(y,C,O){var A,I,D;C&&(typeof C=="string"?(D=C,I=this.getEvent(C,!0)):(I=C,D=C.type),(this._yuievt.config.monitored&&(!I||I.monitored)||I&&I.monitored)&&(A=D+"_"+y,O.monitored=y,this.fire.call(this,A,O)))},fire:function(y){var C=typeof y=="string",O=arguments.length,A=y,I=this._yuievt,D=I.config,T=D.prefix,B,N,P,x;if(C&&O<=3?O===2?x=[arguments[1]]:O===3?x=[arguments[1],arguments[2]]:x=[]:x=s.call(arguments,C?1:0),C||(A=y&&y.type),T&&(A=v(A,T)),N=I.events[A],this._hasSiblings&&(P=this.getSibling(A,N),P&&!N&&(N=this.publish(A))),(D.monitored&&(!N||N.monitored)||N&&N.monitored)&&this._monitor("fire",N||A,{args:x}),N)P&&(N.sibling=P),B=N._fire(x);else{if(I.hasTargets)return this.bubble({type:A},x,this);B=!0}return I.chain?this:B},getSibling:function(y,C){var O;return y.indexOf(g)>-1&&(y=_(y),O=this.getEvent(y,!0),O&&(O.applyConfig(C),O.bubbles=!1,O.broadcast=0)),O},getEvent:function(y,C){var O,A;return C||(O=this._yuievt.config.prefix,y=O?v(y,O):y),A=this._yuievt.events,A[y]||null},after:function(y,C){var O=s.call(arguments,0);switch(h.type(y)){case"function":return c.Do.after.apply(c.Do,arguments);case"array":case"object":O[0]._after=!0;break;default:O[0]=f+y}return this.on.apply(this,O)},before:function(){return this.on.apply(this,arguments)}},c.EventTarget=S,c.mix(c,S.prototype),S.call(c,{bubbles:!1}),YUI.Env.globalEvents=YUI.Env.globalEvents||new S,c.Global=YUI.Env.globalEvents},"3.17.2",{requires:["oop"]})},606536:function(){YUI.add("event-custom-complex",function(c,b){var t,l,d=c.Object,o,e={},a=c.CustomEvent.prototype,r=c.EventTarget.prototype,s=function(n,i){var u;for(u in i)l.hasOwnProperty(u)||(n[u]=i[u])};c.EventFacade=function(n,i){n||(n=e),this._event=n,this.details=n.details,this.type=n.type,this._type=n.type,this.target=n.target,this.currentTarget=i,this.relatedTarget=n.relatedTarget},c.mix(c.EventFacade.prototype,{stopPropagation:function(){this._event.stopPropagation(),this.stopped=1},stopImmediatePropagation:function(){this._event.stopImmediatePropagation(),this.stopped=2},preventDefault:function(){this._event.preventDefault(),this.prevented=1},halt:function(n){this._event.halt(n),this.prevented=1,this.stopped=n?2:1}}),a.fireComplex=function(n){var i,u,h,g,p,f=!0,m,_,v,E,S,y,C,O,A,I=this,D=I.host||I,T,B,N=I.stack,P=D._yuievt,x;if(N&&I.queuable&&I.type!==N.next.type)return N.queue||(N.queue=[]),N.queue.push([I,n]),!0;if(x=I.hasSubs()||P.hasTargets||I.broadcast,I.target=I.target||D,I.currentTarget=D,I.details=n.concat(),x){if(i=N||{id:I.id,next:I,silent:I.silent,stopped:0,prevented:0,bubbling:null,type:I.type,defaultTargetOnly:I.defaultTargetOnly},_=I.getSubs(),v=_[0],E=_[1],I.stopped=I.type!==i.type?0:i.stopped,I.prevented=I.type!==i.type?0:i.prevented,I.stoppedFn&&(m=new c.EventTarget({fireOnce:!0,context:D}),I.events=m,m.on("stopped",I.stoppedFn)),I._facade=null,u=I._createFacade(n),v&&I._procSubs(v,n,u),I.bubbles&&D.bubble&&!I.stopped&&(B=i.bubbling,i.bubbling=I.type,i.type!==I.type&&(i.stopped=0,i.prevented=0),f=D.bubble(I,n,null,i),I.stopped=Math.max(I.stopped,i.stopped),I.prevented=Math.max(I.prevented,i.prevented),i.bubbling=B),C=I.prevented,C?(O=I.preventedFn,O&&O.apply(D,n)):(A=I.defaultFn,A&&(!I.defaultTargetOnly&&!i.defaultTargetOnly||D===u.target)&&A.apply(D,n)),I.broadcast&&I._broadcast(n),E&&!I.prevented&&I.stopped<2)if(S=i.afterQueue,i.id===I.id||I.type!==P.bubbling){if(I._procSubs(E,n,u),S)for(;T=S.last();)T()}else y=E,i.execDefaultCnt&&(y=c.merge(y),c.each(y,function(R){R.postponed=!0})),S||(i.afterQueue=new c.Queue),i.afterQueue.add(function(){I._procSubs(y,n,u)});if(I.target=null,i.id===I.id){if(g=i.queue,g)for(;g.length;)h=g.pop(),p=h[0],i.next=p,p._fire(h[1]);I.stack=null}f=!I.stopped,I.type!==P.bubbling&&(i.stopped=0,i.prevented=0,I.stopped=0,I.prevented=0)}else A=I.defaultFn,A&&(u=I._createFacade(n),(!I.defaultTargetOnly||D===u.target)&&A.apply(D,n));return I._facade=null,f},a._hasPotentialSubscribers=function(){return this.hasSubs()||this.host._yuievt.hasTargets||this.broadcast},a._createFacade=a._getFacade=function(n){var i=this.details,u=i&&i[0],h=u&&typeof u=="object",g=this._facade;return g||(g=new c.EventFacade(this,this.currentTarget)),h?(s(g,u),u.type&&(g.type=u.type),n&&(n[0]=g)):n&&n.unshift(g),g.details=this.details,g.target=this.originalTarget||this.target,g.currentTarget=this.currentTarget,g.stopped=0,g.prevented=0,this._facade=g,this._facade},a._addFacadeToArgs=function(n){var i=n[0];i&&i.halt&&i.stopImmediatePropagation&&i.stopPropagation&&i._event||this._createFacade(n)},a.stopPropagation=function(){this.stopped=1,this.stack&&(this.stack.stopped=1),this.events&&this.events.fire("stopped",this)},a.stopImmediatePropagation=function(){this.stopped=2,this.stack&&(this.stack.stopped=2),this.events&&this.events.fire("stopped",this)},a.preventDefault=function(){this.preventable&&(this.prevented=1,this.stack&&(this.stack.prevented=1))},a.halt=function(n){n?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()},r.addTarget=function(n){var i=this._yuievt;return i.targets||(i.targets={}),i.targets[c.stamp(n)]=n,i.hasTargets=!0,this},r.getTargets=function(){var n=this._yuievt.targets;return n?d.values(n):[]},r.removeTarget=function(n){var i=this._yuievt.targets;return i&&(delete i[c.stamp(n,!0)],d.size(i)===0&&(this._yuievt.hasTargets=!1)),this},r.bubble=function(n,i,u,h){var g=this._yuievt.targets,p=!0,f,m,_,v,E,S=n&&n.type,y=u||n&&n.target||this,C;if(!n||!n.stopped&&g){for(_ in g)if(g.hasOwnProperty(_)){if(f=g[_],m=f._yuievt.events[S],f._hasSiblings&&(E=f.getSibling(S,m)),E&&!m&&(m=f.publish(S)),C=f._yuievt.bubbling,f._yuievt.bubbling=S,!m)f._yuievt.hasTargets&&f.bubble(n,i,y,h);else if(E&&(m.sibling=E),m.target=y,m.originalTarget=y,m.currentTarget=f,v=m.broadcast,m.broadcast=!1,m.emitFacade=!0,m.stack=h,p=p&&m.fire.apply(m,i||n.details||[]),m.broadcast=v,m.originalTarget=null,m.stopped)break;f._yuievt.bubbling=C}}return p},r._hasPotentialSubscribers=function(n){var i=this._yuievt,u=i.events[n];return u?u.hasSubs()||i.hasTargets||u.broadcast:!1},t=new c.EventFacade,l={};for(o in t)l[o]=!0},"3.17.2",{requires:["event-custom-base"]})},33146:function(){YUI.add("event-delegate",function(c,b){var t=c.Array,l=c.Lang,d=l.isString,o=l.isObject,e=l.isArray,a=c.Selector.test,r=c.Env.evt.handles;function s(n,i,u,h){var g=t(arguments,0,!0),p=d(u)?u:null,f,m,_,v,E,S,y,C,O;if(o(n)){if(C=[],e(n))for(S=0,y=n.length;S<y;++S)g[0]=n[S],C.push(c.delegate.apply(c,g));else{g.unshift(null);for(S in n)n.hasOwnProperty(S)&&(g[0]=S,g[1]=n[S],C.push(c.delegate.apply(c,g)))}return new c.EventHandle(C)}if(f=n.split(/\|/),f.length>1&&(E=f.shift(),g[0]=n=f.shift()),m=c.Node.DOM_EVENTS[n],o(m)&&m.delegate&&(O=m.delegate.apply(m,arguments)),!O){if(!n||!i||!u||!h)return;_=p?c.Selector.query(p,null,!0):u,!_&&d(u)&&(O=c.on("available",function(){c.mix(O,c.delegate.apply(c,g),!0)},u)),!O&&_&&(g.splice(2,2,_),O=c.Event._attach(g,{facade:!1}),O.sub.filter=h,O.sub._notify=s.notifySub)}return O&&E&&(v=r[E]||(r[E]={}),v=v[n]||(v[n]=[]),v.push(O)),O}s.notifySub=function(n,i,u){i=i.slice(),this.args&&i.push.apply(i,this.args);var h=s._applyFilter(this.filter,i,u),g,p,f,m;if(h){for(h=t(h),g=i[0]=new c.DOMEventFacade(i[0],u.el,u),g.container=c.one(u.el),p=0,f=h.length;p<f&&!g.stopped&&(g.currentTarget=c.one(h[p]),m=this.fn.apply(this.context||g.currentTarget,i),m!==!1);++p);return m}},s.compileFilter=c.cached(function(n){return function(i,u){return a(i._node,n,u.currentTarget===u.target?null:u.currentTarget._node)}}),s._disabledRE=/^(?:button|input|select|textarea)$/i,s._applyFilter=function(n,i,u){var h=i[0],g=u.el,p=h.target||h.srcElement,f=[],m=!1;if(typeof SVGElementInstance<"u"&&!p.nodeType&&p.correspondingElement&&(p=p.correspondingUseElement||p.correspondingElement),p.nodeType===3&&(p=p.parentNode),p.disabled&&s._disabledRE.test(p.nodeName))return f;if(i.unshift(p),d(n))for(;p&&(m=p===g,a(p,n,m?null:g)&&f.push(p),!m);)p=p.parentNode;else{for(i[0]=c.one(p),i[1]=new c.DOMEventFacade(h,g,u);p&&(n.apply(i[0],i)&&f.push(p),p!==g);)p=p.parentNode,i[0]=c.one(p);i[1]=h}return f.length<=1&&(f=f[0]),i.shift(),f},c.delegate=c.Event.delegate=s},"3.17.2",{requires:["node-base"]})},773452:function(){YUI.add("event-flick",function(c,b){var t=c.Event._GESTURE_MAP,l={start:t.start,end:t.end,move:t.move},d="start",o="end",e="move",a="ownerDocument",r="minVelocity",s="minDistance",n="preventDefault",i="_fs",u="_fsh",h="_feh",g="_fmh",p="nodeType";c.Event.define("flick",{on:function(f,m,_){var v=f.on(l[d],this._onStart,this,f,m,_);m[u]=v},detach:function(f,m,_){var v=m[u],E=m[h];v&&(v.detach(),m[u]=null),E&&(E.detach(),m[h]=null)},processArgs:function(f){var m=f.length>3?c.merge(f.splice(3,1)[0]):{};return r in m||(m[r]=this.MIN_VELOCITY),s in m||(m[s]=this.MIN_DISTANCE),n in m||(m[n]=this.PREVENT_DEFAULT),m},_onStart:function(f,m,_,v){var E=!0,S,y,C,O=_._extra.preventDefault,A=f;f.touches&&(E=f.touches.length===1,f=f.touches[0]),E&&(O&&(!O.call||O(f))&&A.preventDefault(),f.flick={time:new Date().getTime()},_[i]=f,S=_[h],C=m.get(p)===9?m:m.get(a),S||(S=C.on(l[o],c.bind(this._onEnd,this),null,m,_,v),_[h]=S),_[g]=C.once(l[e],c.bind(this._onMove,this),null,m,_,v))},_onMove:function(f,m,_,v){var E=_[i];E&&E.flick&&(E.flick.time=new Date().getTime())},_onEnd:function(f,m,_,v){var E=new Date().getTime(),S=_[i],y=!!S,C=f,O,A,I,D,T,B,N,P,x=_[g];x&&(x.detach(),delete _[g]),y&&(f.changedTouches&&(f.changedTouches.length===1&&f.touches.length===0?C=f.changedTouches[0]:y=!1),y&&(D=_._extra,I=D[n],I&&(!I.call||I(f))&&f.preventDefault(),O=S.flick.time,E=new Date().getTime(),A=E-O,T=[C.pageX-S.pageX,C.pageY-S.pageY],D.axis?P=D.axis:P=Math.abs(T[0])>=Math.abs(T[1])?"x":"y",B=T[P==="x"?0:1],N=A!==0?B/A:0,isFinite(N)&&Math.abs(B)>=D[s]&&Math.abs(N)>=D[r]&&(f.type="flick",f.flick={time:A,distance:B,velocity:N,axis:P,start:S},v.fire(f)),_[i]=null))},MIN_VELOCITY:0,MIN_DISTANCE:0,PREVENT_DEFAULT:!1})},"3.17.2",{requires:["node-base","event-touch","event-synthetic"]})},950122:function(){YUI.add("event-focus",function(c,b){var t=c.Event,l=c.Lang,d=l.isString,o=c.Array.indexOf,e=function(){var r=!1,s=c.config.doc,n;return s&&(n=s.createElement("p"),n.setAttribute("onbeforeactivate",";"),r=n.onbeforeactivate!==void 0),r}();function a(r,s,n){var i="_"+r+"Notifiers";c.Event.define(r,{_useActivate:e,_attach:function(u,h,g){return c.DOM.isWindow(u)?t._attach([r,function(p){h.fire(p)},u]):t._attach([s,this._proxy,u,this,h,g],{capture:!0})},_proxy:function(u,h,g){var p=u.target,f=u.currentTarget,m=p.getData(i),_=c.stamp(f._node),v=e||p!==f,E;h.currentTarget=g?p:f,h.container=g?f:null,m?v=!0:(m={},p.setData(i,m),v&&(E=t._attach([n,this._notify,p._node]).sub,E.once=!0)),m[_]||(m[_]=[]),m[_].push(h),v||this._notify(u)},_notify:function(u,h){var g=u.currentTarget,p=g.getData(i),f=g.ancestors(),m=g.get("ownerDocument"),_=[],v=p?c.Object.keys(p).length:0,E,S,y,C,O,A,I,D,T,B;for(g.clearData(i),f.push(g),m&&f.unshift(m),f._nodes.reverse(),v&&(A=v,f.some(function(N){var P=c.stamp(N),x=p[P],R,w;if(x)for(v--,R=0,w=x.length;R<w;++R)x[R].handle.sub.filter&&_.push(x[R]);return!v}),v=A);v&&(E=f.shift());){if(C=c.stamp(E),S=p[C],S){for(I=0,D=S.length;I<D&&(y=S[I],T=y.handle.sub,O=!0,u.currentTarget=E,T.filter&&(O=T.filter.apply(E,[E,u].concat(T.args||[])),_.splice(o(_,y),1)),O&&(u.container=y.container,B=y.fire(u)),!(B===!1||u.stopped===2));++I);delete S[C],v--}if(u.stopped!==2)for(I=0,D=_.length;I<D&&(y=_[I],T=y.handle.sub,T.filter.apply(E,[E,u].concat(T.args||[]))&&(u.container=y.container,u.currentTarget=E,B=y.fire(u)),!(B===!1||u.stopped===2||u.stopped&&_[I+1]&&_[I+1].container!==y.container));++I);if(u.stopped)break}},on:function(u,h,g){h.handle=this._attach(u._node,g)},detach:function(u,h){h.handle.detach()},delegate:function(u,h,g,p){d(p)&&(h.filter=function(f){return c.Selector.test(f._node,p,u===f?null:u._node)}),h.handle=this._attach(u._node,g,!0)},detachDelegate:function(u,h){h.handle.detach()}},!0)}e?(a("focus","beforeactivate","focusin"),a("blur","beforedeactivate","focusout")):(a("focus","focus","focus"),a("blur","blur","blur"))},"3.17.2",{requires:["event-synthetic"]})},105495:function(){YUI.add("event-hover",function(c,b){var t=c.Lang.isFunction,l=function(){},d={processArgs:function(o){var e=t(o[2])?2:3;return t(o[e])?o.splice(e,1)[0]:l},on:function(o,e,a,r){var s=e.args?e.args.slice():[];s.unshift(null),e._detach=o[r?"delegate":"on"]({mouseenter:function(n){n.phase="over",a.fire(n)},mouseleave:function(n){var i=e.context||this;s[0]=n,n.type="hover",n.phase="out",e._extra.apply(i,s)}},r)},detach:function(o,e,a){e._detach.detach()}};d.delegate=d.on,d.detachDelegate=d.detach,c.Event.define("hover",d)},"3.17.2",{requires:["event-mouseenter"]})},541903:function(){YUI.add("event-key",function(c,b){var t="+alt",l="+ctrl",d="+meta",o="+shift",e=c.Lang.trim,a={KEY_MAP:{enter:13,space:32,esc:27,backspace:8,tab:9,pageup:33,pagedown:34},_typeRE:/^(up|down|press):/,_keysRE:/^(?:up|down|press):|\+(alt|ctrl|meta|shift)/g,processArgs:function(r){var s=r.splice(3,1)[0],n=c.Array.hash(s.match(/\+(?:alt|ctrl|meta|shift)\b/g)||[]),i={type:this._typeRE.test(s)?RegExp.$1:null,mods:n,keys:null},u=s.replace(this._keysRE,""),h,g,p,f;if(u)for(u=u.split(","),i.keys={},f=u.length-1;f>=0;--f)h=e(u[f]),h&&(+h==h?i.keys[h]=n:(p=h.toLowerCase(),this.KEY_MAP[p]?(i.keys[this.KEY_MAP[p]]=n,i.type||(i.type="down")):(h=h.charAt(0),g=h.toUpperCase(),n["+shift"]&&(h=g),i.keys[h.charCodeAt(0)]=h===g?c.merge(n,{"+shift":!0}):n)));return i.type||(i.type="press"),i},on:function(r,s,n,i){var u=s._extra,h="key"+u.type,g=u.keys,p=i?"delegate":"on";s._detach=r[p](h,function(f){var m=g?g[f.which]:u.mods;m&&(!m[t]||m[t]&&f.altKey)&&(!m[l]||m[l]&&f.ctrlKey)&&(!m[d]||m[d]&&f.metaKey)&&(!m[o]||m[o]&&f.shiftKey)&&n.fire(f)},i)},detach:function(r,s,n){s._detach.detach()}};a.delegate=a.on,a.detachDelegate=a.detach,c.Event.define("key",a,!0)},"3.17.2",{requires:["event-synthetic"]})},125057:function(){YUI.add("event-mouseenter",function(c,b){var t=c.Env.evt.dom_wrappers,l=c.DOM.contains,d=c.Array,o=function(){},e={proxyType:"mouseover",relProperty:"fromElement",_notify:function(a,r,s){var n=this._node,i=a.relatedTarget||a[r];n!==i&&!l(n,i)&&s.fire(new c.DOMEventFacade(a,n,t["event:"+c.stamp(n)+a.type]))},on:function(a,r,s){var n=c.Node.getDOMNode(a),i=[this.proxyType,this._notify,n,null,this.relProperty,s];r.handle=c.Event._attach(i,{facade:!1})},detach:function(a,r){r.handle.detach()},delegate:function(a,r,s,n){var i=c.Node.getDOMNode(a),u=[this.proxyType,o,i,null,s];r.handle=c.Event._attach(u,{facade:!1}),r.handle.sub.filter=n,r.handle.sub.relProperty=this.relProperty,r.handle.sub._notify=this._filterNotify},_filterNotify:function(a,r,s){r=r.slice(),this.args&&r.push.apply(r,this.args);var n=c.delegate._applyFilter(this.filter,r,s),i=r[0].relatedTarget||r[0][this.relProperty],u,h,g,p,f;if(n)for(n=d(n),h=0,g=n.length&&(!u||!u.stopped);h<g&&(f=n[0],!(!l(f,i)&&(u||(u=new c.DOMEventFacade(r[0],f,s),u.container=c.one(s.el)),u.currentTarget=c.one(f),p=r[1].fire(u),p===!1)));++h);return p},detachDelegate:function(a,r){r.handle.detach()}};c.Event.define("mouseenter",e,!0),c.Event.define("mouseleave",c.merge(e,{proxyType:"mouseout",relProperty:"toElement"}),!0)},"3.17.2",{requires:["event-synthetic"]})},481133:function(){YUI.add("event-mousewheel",function(c,b){var t="DOMMouseScroll",l=function(d){var o=c.Array(d,0,!0),e;return c.UA.gecko?(o[0]=t,e=c.config.win):e=c.config.doc,o.length<3?o[2]=e:o.splice(2,0,e),o};c.Env.evt.plugins.mousewheel={on:function(){return c.Event._attach(l(arguments))},detach:function(){return c.Event.detach.apply(c.Event,l(arguments))}}},"3.17.2",{requires:["node-base"]})},192312:function(){YUI.add("event-move",function(c,b){var t=c.Event._GESTURE_MAP,l={start:t.start,end:t.end,move:t.move},d="start",o="move",e="end",a="gesture"+o,r=a+e,s=a+d,n="_msh",i="_mh",u="_meh",h="_dmsh",g="_dmh",p="_dmeh",f="_ms",m="_m",_="minTime",v="minDistance",E="preventDefault",S="button",y="ownerDocument",C="currentTarget",O="target",A="nodeType",I=c.config.win&&"msPointerEnabled"in c.config.win.navigator,D="msTouchActionCount",T="msInitTouchAction",B=function(F,z,j){var X=j?4:3,J=z.length>X?c.merge(z.splice(X,1)[0]):{};return E in J||(J[E]=F.PREVENT_DEFAULT),J},N=function(F,z){return z._extra.root||F.get(A)===9?F:F.get(y)},P=function(F){var z=F.getDOMNode();return F.compareTo(c.config.doc)&&z.documentElement?z.documentElement:!1},x=function(F,z,j){F.pageX=z.pageX,F.pageY=z.pageY,F.screenX=z.screenX,F.screenY=z.screenY,F.clientX=z.clientX,F.clientY=z.clientY,F[O]=F[O]||z[O],F[C]=F[C]||z[C],F[S]=j&&j[S]||1},R=function(F){var z=P(F)||F.getDOMNode(),j=F.getData(D);I&&(j||(j=0,F.setData(T,z.style.msTouchAction)),z.style.msTouchAction=c.Event._DEFAULT_TOUCH_ACTION,j++,F.setData(D,j))},w=function(F){var z=P(F)||F.getDOMNode(),j=F.getData(D),X=F.getData(T);I&&(j--,F.setData(D,j),j===0&&z.style.msTouchAction!==X&&(z.style.msTouchAction=X))},k=function(F,z){z&&(!z.call||z(F))&&F.preventDefault()},q=c.Event.define;c.Event._DEFAULT_TOUCH_ACTION="none",q(s,{on:function(F,z,j){R(F),z[n]=F.on(l[d],this._onStart,this,F,z,j)},delegate:function(F,z,j,X){var J=this;z[h]=F.delegate(l[d],function(Q){J._onStart(Q,F,z,j,!0)},X)},detachDelegate:function(F,z,j,X){var J=z[h];J&&(J.detach(),z[h]=null),w(F)},detach:function(F,z,j){var X=z[n];X&&(X.detach(),z[n]=null),w(F)},processArgs:function(F,z){var j=B(this,F,z);return _ in j||(j[_]=this.MIN_TIME),v in j||(j[v]=this.MIN_DISTANCE),j},_onStart:function(F,z,j,X,J){J&&(z=F[C]);var Q=j._extra,ie=!0,ce=Q[_],pe=Q[v],ye=Q.button,Ae=Q[E],Je=N(z,j),ke;F.touches?F.touches.length===1?x(F,F.touches[0],Q):ie=!1:ie=ye===void 0||ye===F.button,ie&&(k(F,Ae),ce===0||pe===0?this._start(F,z,X,Q):(ke=[F.pageX,F.pageY],ce>0&&(Q._ht=c.later(ce,this,this._start,[F,z,X,Q]),Q._hme=Je.on(l[e],c.bind(function(){this._cancel(Q)},this))),pe>0&&(Q._hm=Je.on(l[o],c.bind(function(Fe){(Math.abs(Fe.pageX-ke[0])>pe||Math.abs(Fe.pageY-ke[1])>pe)&&this._start(F,z,X,Q)},this)))))},_cancel:function(F){F._ht&&(F._ht.cancel(),F._ht=null),F._hme&&(F._hme.detach(),F._hme=null),F._hm&&(F._hm.detach(),F._hm=null)},_start:function(F,z,j,X){X&&this._cancel(X),F.type=s,z.setData(f,F),j.fire(F)},MIN_TIME:0,MIN_DISTANCE:0,PREVENT_DEFAULT:!1}),q(a,{on:function(F,z,j){R(F);var X=N(F,z,l[o]),J=X.on(l[o],this._onMove,this,F,z,j);z[i]=J},delegate:function(F,z,j,X){var J=this;z[g]=F.delegate(l[o],function(Q){J._onMove(Q,F,z,j,!0)},X)},detach:function(F,z,j){var X=z[i];X&&(X.detach(),z[i]=null),w(F)},detachDelegate:function(F,z,j,X){var J=z[g];J&&(J.detach(),z[g]=null),w(F)},processArgs:function(F,z){return B(this,F,z)},_onMove:function(F,z,j,X,J){J&&(z=F[C]);var Q=j._extra.standAlone||z.getData(f),ie=j._extra.preventDefault;Q&&(F.touches&&(F.touches.length===1?x(F,F.touches[0]):Q=!1),Q&&(k(F,ie),F.type=a,X.fire(F)))},PREVENT_DEFAULT:!1}),q(r,{on:function(F,z,j){R(F);var X=N(F,z),J=X.on(l[e],this._onEnd,this,F,z,j);z[u]=J},delegate:function(F,z,j,X){var J=this;z[p]=F.delegate(l[e],function(Q){J._onEnd(Q,F,z,j,!0)},X)},detachDelegate:function(F,z,j,X){var J=z[p];J&&(J.detach(),z[p]=null),w(F)},detach:function(F,z,j){var X=z[u];X&&(X.detach(),z[u]=null),w(F)},processArgs:function(F,z){return B(this,F,z)},_onEnd:function(F,z,j,X,J){J&&(z=F[C]);var Q=j._extra.standAlone||z.getData(m)||z.getData(f),ie=j._extra.preventDefault;Q&&(F.changedTouches&&(F.changedTouches.length===1?x(F,F.changedTouches[0]):Q=!1),Q&&(k(F,ie),F.type=r,X.fire(F),z.clearData(f),z.clearData(m)))},PREVENT_DEFAULT:!1})},"3.17.2",{requires:["node-base","event-touch","event-synthetic"]})},540856:function(){YUI.add("event-outside",function(c,b){var t=["blur","change","click","dblclick","focus","keydown","keypress","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","select","submit"];c.Event.defineOutside=function(l,d){d=d||l+"outside";var o={on:function(e,a,r){a.handle=c.one("doc").on(l,function(s){this.isOutside(e,s.target)&&(s.currentTarget=e,r.fire(s))},this)},detach:function(e,a,r){a.handle.detach()},delegate:function(e,a,r,s){a.handle=c.one("doc").delegate(l,function(n){this.isOutside(e,n.target)&&r.fire(n)},s,this)},isOutside:function(e,a){return a!==e&&!a.ancestor(function(r){return r===e})}};o.detachDelegate=o.detach,c.Event.define(d,o)},c.Array.each(t,function(l){c.Event.defineOutside(l)})},"3.17.2",{requires:["event-synthetic"]})},130110:function(){YUI.add("event-resize",function(c,b){c.Event.define("windowresize",{on:c.UA.gecko&&c.UA.gecko<1.91?function(t,l,d){l._handle=c.Event.attach("resize",function(o){d.fire(o)})}:function(t,l,d){var o=c.config.windowResizeDelay||100;l._handle=c.Event.attach("resize",function(e){l._timer&&l._timer.cancel(),l._timer=c.later(o,c,function(){d.fire(e)})})},detach:function(t,l){l._timer&&l._timer.cancel(),l._handle.detach()}})},"3.17.2",{requires:["node-base","event-synthetic"]})},489565:function(){YUI.add("event-simulate",function(c,b){(function(){var t=c.Lang,l=c.config.win,d=t.isFunction,o=t.isString,e=t.isBoolean,a=t.isObject,r=t.isNumber,s={click:1,dblclick:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,mousemove:1,contextmenu:1},n=l&&l.PointerEvent?{pointerover:1,pointerout:1,pointerdown:1,pointerup:1,pointermove:1}:{MSPointerOver:1,MSPointerOut:1,MSPointerDown:1,MSPointerUp:1,MSPointerMove:1},i={keydown:1,keyup:1,keypress:1},u={submit:1,blur:1,change:1,focus:1,resize:1,scroll:1,select:1},h={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1},g={touchstart:1,touchmove:1,touchend:1,touchcancel:1},p={gesturestart:1,gesturechange:1,gestureend:1};c.mix(h,s),c.mix(h,i),c.mix(h,g);function f(S,y,C,O,A,I,D,T,B,N,P){if(S||c.error("simulateKeyEvent(): Invalid target."),o(y))switch(y=y.toLowerCase(),y){case"textevent":y="keypress";break;case"keyup":case"keydown":case"keypress":break;default:c.error("simulateKeyEvent(): Event type '"+y+"' not supported.")}else c.error("simulateKeyEvent(): Event type must be a string.");e(C)||(C=!0),e(O)||(O=!0),a(A)||(A=c.config.win),e(I)||(I=!1),e(D)||(D=!1),e(T)||(T=!1),e(B)||(B=!1),r(N)||(N=0),r(P)||(P=0);var x=null;if(d(c.config.doc.createEvent)){try{x=c.config.doc.createEvent("KeyEvents"),x.initKeyEvent(y,C,O,A,I,D,T,B,N,P)}catch{try{x=c.config.doc.createEvent("Events")}catch{x=c.config.doc.createEvent("UIEvents")}finally{x.initEvent(y,C,O),x.view=A,x.altKey=D,x.ctrlKey=I,x.shiftKey=T,x.metaKey=B,x.keyCode=N,x.charCode=P}}S.dispatchEvent(x)}else a(c.config.doc.createEventObject)?(x=c.config.doc.createEventObject(),x.bubbles=C,x.cancelable=O,x.view=A,x.ctrlKey=I,x.altKey=D,x.shiftKey=T,x.metaKey=B,x.keyCode=P>0?P:N,S.fireEvent("on"+y,x)):c.error("simulateKeyEvent(): No event simulation framework present.")}function m(S,y,C,O,A,I,D,T,B,N,P,x,R,w,k,q){S||c.error("simulateMouseEvent(): Invalid target."),o(y)?!s[y.toLowerCase()]&&!n[y]&&c.error("simulateMouseEvent(): Event type '"+y+"' not supported."):c.error("simulateMouseEvent(): Event type must be a string."),e(C)||(C=!0),e(O)||(O=y!=="mousemove"),a(A)||(A=c.config.win),r(I)||(I=1),r(D)||(D=0),r(T)||(T=0),r(B)||(B=0),r(N)||(N=0),e(P)||(P=!1),e(x)||(x=!1),e(R)||(R=!1),e(w)||(w=!1),r(k)||(k=0),q=q||null;var F=null;if(d(c.config.doc.createEvent))F=c.config.doc.createEvent("MouseEvents"),F.initMouseEvent?F.initMouseEvent(y,C,O,A,I,D,T,B,N,P,x,R,w,k,q):(F=c.config.doc.createEvent("UIEvents"),F.initEvent(y,C,O),F.view=A,F.detail=I,F.screenX=D,F.screenY=T,F.clientX=B,F.clientY=N,F.ctrlKey=P,F.altKey=x,F.metaKey=w,F.shiftKey=R,F.button=k,F.relatedTarget=q),q&&!F.relatedTarget&&(y==="mouseout"?F.toElement=q:y==="mouseover"&&(F.fromElement=q)),S.dispatchEvent(F);else if(a(c.config.doc.createEventObject)){switch(F=c.config.doc.createEventObject(),F.bubbles=C,F.cancelable=O,F.view=A,F.detail=I,F.screenX=D,F.screenY=T,F.clientX=B,F.clientY=N,F.ctrlKey=P,F.altKey=x,F.metaKey=w,F.shiftKey=R,k){case 0:F.button=1;break;case 1:F.button=4;break;case 2:break;default:F.button=0}F.relatedTarget=q,S.fireEvent("on"+y,F)}else c.error("simulateMouseEvent(): No event simulation framework present.")}function _(S,y,C,O,A,I){S||c.error("simulateUIEvent(): Invalid target."),o(y)?(y=y.toLowerCase(),u[y]||c.error("simulateUIEvent(): Event type '"+y+"' not supported.")):c.error("simulateUIEvent(): Event type must be a string.");var D=null;e(C)||(C=y in h),e(O)||(O=y==="submit"),a(A)||(A=c.config.win),r(I)||(I=1),d(c.config.doc.createEvent)?(D=c.config.doc.createEvent("UIEvents"),D.initUIEvent(y,C,O,A,I),S.dispatchEvent(D)):a(c.config.doc.createEventObject)?(D=c.config.doc.createEventObject(),D.bubbles=C,D.cancelable=O,D.view=A,D.detail=I,S.fireEvent("on"+y,D)):c.error("simulateUIEvent(): No event simulation framework present.")}function v(S,y,C,O,A,I,D,T,B,N,P,x,R,w,k,q){var F;(!c.UA.ios||c.UA.ios<2)&&c.error("simulateGestureEvent(): Native gesture DOM eventframe is not available in this platform."),S||c.error("simulateGestureEvent(): Invalid target."),c.Lang.isString(y)?(y=y.toLowerCase(),p[y]||c.error("simulateTouchEvent(): Event type '"+y+"' not supported.")):c.error("simulateGestureEvent(): Event type must be a string."),c.Lang.isBoolean(C)||(C=!0),c.Lang.isBoolean(O)||(O=!0),c.Lang.isObject(A)||(A=c.config.win),c.Lang.isNumber(I)||(I=2),c.Lang.isNumber(D)||(D=0),c.Lang.isNumber(T)||(T=0),c.Lang.isNumber(B)||(B=0),c.Lang.isNumber(N)||(N=0),c.Lang.isBoolean(P)||(P=!1),c.Lang.isBoolean(x)||(x=!1),c.Lang.isBoolean(R)||(R=!1),c.Lang.isBoolean(w)||(w=!1),c.Lang.isNumber(k)||(k=1),c.Lang.isNumber(q)||(q=0),F=c.config.doc.createEvent("GestureEvent"),F.initGestureEvent(y,C,O,A,I,D,T,B,N,P,x,R,w,S,k,q),S.dispatchEvent(F)}function E(S,y,C,O,A,I,D,T,B,N,P,x,R,w,k,q,F,z,j){var X;S||c.error("simulateTouchEvent(): Invalid target."),c.Lang.isString(y)?(y=y.toLowerCase(),g[y]||c.error("simulateTouchEvent(): Event type '"+y+"' not supported.")):c.error("simulateTouchEvent(): Event type must be a string."),y==="touchstart"||y==="touchmove"?k.length===0&&c.error("simulateTouchEvent(): No touch object in touches"):y==="touchend"&&F.length===0&&c.error("simulateTouchEvent(): No touch object in changedTouches"),c.Lang.isBoolean(C)||(C=!0),c.Lang.isBoolean(O)||(O=y!=="touchcancel"),c.Lang.isObject(A)||(A=c.config.win),c.Lang.isNumber(I)||(I=1),c.Lang.isNumber(D)||(D=0),c.Lang.isNumber(T)||(T=0),c.Lang.isNumber(B)||(B=0),c.Lang.isNumber(N)||(N=0),c.Lang.isBoolean(P)||(P=!1),c.Lang.isBoolean(x)||(x=!1),c.Lang.isBoolean(R)||(R=!1),c.Lang.isBoolean(w)||(w=!1),c.Lang.isNumber(z)||(z=1),c.Lang.isNumber(j)||(j=0),c.Lang.isFunction(c.config.doc.createEvent)?(c.UA.android?c.UA.android<4?(X=c.config.doc.createEvent("MouseEvents"),X.initMouseEvent(y,C,O,A,I,D,T,B,N,P,x,R,w,0,S),X.touches=k,X.targetTouches=q,X.changedTouches=F):(X=c.config.doc.createEvent("TouchEvent"),X.initTouchEvent(k,q,F,y,A,D,T,B,N,P,x,R,w)):c.UA.ios?c.UA.ios>=2?(X=c.config.doc.createEvent("TouchEvent"),X.initTouchEvent(y,C,O,A,I,D,T,B,N,P,x,R,w,k,q,F,z,j)):c.error("simulateTouchEvent(): No touch event simulation framework present for iOS, "+c.UA.ios+"."):c.error("simulateTouchEvent(): Not supported agent yet, "+c.UA.userAgent),S.dispatchEvent(X)):c.error("simulateTouchEvent(): No event simulation framework present.")}c.Event.simulate=function(S,y,C){C=C||{},s[y]||n[y]?m(S,y,C.bubbles,C.cancelable,C.view,C.detail,C.screenX,C.screenY,C.clientX,C.clientY,C.ctrlKey,C.altKey,C.shiftKey,C.metaKey,C.button,C.relatedTarget):i[y]?f(S,y,C.bubbles,C.cancelable,C.view,C.ctrlKey,C.altKey,C.shiftKey,C.metaKey,C.keyCode,C.charCode):u[y]?_(S,y,C.bubbles,C.cancelable,C.view,C.detail):g[y]?c.config.win&&"ontouchstart"in c.config.win&&!c.UA.phantomjs&&!(c.UA.chrome&&c.UA.chrome<6)?E(S,y,C.bubbles,C.cancelable,C.view,C.detail,C.screenX,C.screenY,C.clientX,C.clientY,C.ctrlKey,C.altKey,C.shiftKey,C.metaKey,C.touches,C.targetTouches,C.changedTouches,C.scale,C.rotation):c.error("simulate(): Event '"+y+"' can't be simulated. Use gesture-simulate module instead."):c.UA.ios&&c.UA.ios>=2&&p[y]?v(S,y,C.bubbles,C.cancelable,C.view,C.detail,C.screenX,C.screenY,C.clientX,C.clientY,C.ctrlKey,C.altKey,C.shiftKey,C.metaKey,C.scale,C.rotation):c.error("simulate(): Event '"+y+"' can't be simulated.")}})()},"3.17.2",{requires:["event-base"]})},989746:function(){YUI.add("event-synthetic",function(c,b){var t=c.CustomEvent,l=c.Env.evt.dom_map,d=c.Array,o=c.Lang,e=o.isObject,a=o.isString,r=o.isArray,s=c.Selector.query,n=function(){};function i(g,p){this.handle=g,this.emitFacade=p}i.prototype.fire=function(g){var p=d(arguments,0,!0),f=this.handle,m=f.evt,_=f.sub,v=_.context,E=_.filter,S=g||{},y;return this.emitFacade?((!g||!g.preventDefault)&&(S=m._getFacade(),e(g)&&!g.preventDefault?(c.mix(S,g,!0),p[0]=S):p.unshift(S)),S.type=m.type,S.details=p.slice(),E&&(S.container=m.host)):E&&e(g)&&g.currentTarget&&p.shift(),_.context=v||S.currentTarget||m.host,y=m.fire.apply(m,p),g.prevented&&m.preventedFn&&m.preventedFn.apply(m,p),g.stopped&&m.stoppedFn&&m.stoppedFn.apply(m,p),_.context=v,y};function u(g,p,f){this.handles=[],this.el=g,this.key=f,this.domkey=p}u.prototype={constructor:u,type:"_synth",fn:n,capture:!1,register:function(g){g.evt.registry=this,this.handles.push(g)},unregister:function(g){var p=this.handles,f=l[this.domkey],m;for(m=p.length-1;m>=0;--m)if(p[m].sub===g){p.splice(m,1);break}p.length||(delete f[this.key],c.Object.size(f)||delete l[this.domkey])},detachAll:function(){for(var g=this.handles,p=g.length;--p>=0;)g[p].detach()}};function h(){this._init.apply(this,arguments)}c.mix(h,{Notifier:i,SynthRegistry:u,getRegistry:function(g,p,f){var m=g._node,_=c.stamp(m),v="event:"+_+p+"_synth",E=l[_];return f&&(E||(E=l[_]={}),E[v]||(E[v]=new u(m,_,v))),E&&E[v]||null},_deleteSub:function(g){if(g&&g.fn){var p=this.eventDef,f=g.filter?"detachDelegate":"detach";this._subscribers=[],t.keepDeprecatedSubs&&(this.subscribers={}),p[f](g.node,g,this.notifier,g.filter),this.registry.unregister(g),delete g.fn,delete g.node,delete g.context}},prototype:{constructor:h,_init:function(){var g=this.publishConfig||(this.publishConfig={});this.emitFacade="emitFacade"in g?g.emitFacade:!0,g.emitFacade=!1},processArgs:n,on:n,detach:n,delegate:n,detachDelegate:n,_on:function(g,p){var f=[],m=g.slice(),_=this.processArgs(g,p),v=g[2],E=p?"delegate":"on",S,y;return S=a(v)?s(v):d(v||c.one(c.config.win)),!S.length&&a(v)?(y=c.on("available",function(){c.mix(y,c[E].apply(c,m),!0)},v),y):(c.Array.each(S,function(C){var O=g.slice(),A;C=c.one(C),C&&(p&&(A=O.splice(3,1)[0]),O.splice(0,4,O[1],O[3]),(!this.preventDups||!this.getSubs(C,g,null,!0))&&f.push(this._subscribe(C,E,O,_,A)))},this),f.length===1?f[0]:new c.EventHandle(f))},_subscribe:function(g,p,f,m,_){var v=new c.CustomEvent(this.type,this.publishConfig),E=v.on.apply(v,f),S=new i(E,this.emitFacade),y=h.getRegistry(g,this.type,!0),C=E.sub;return C.node=g,C.filter=_,m&&this.applyArgExtras(m,C),c.mix(v,{eventDef:this,notifier:S,host:g,currentTarget:g,target:g,el:g._node,_delete:h._deleteSub},!0),E.notifier=S,y.register(E),this[p](g,C,S,_),E},applyArgExtras:function(g,p){p._extra=g},_detach:function(g){var p=g[2],f=a(p)?s(p):d(p),m,_,v,E,S;for(g.splice(2,1),_=0,v=f.length;_<v;++_)if(m=c.one(f[_]),m&&(E=this.getSubs(m,g),E))for(S=E.length-1;S>=0;--S)E[S].detach()},getSubs:function(g,p,f,m){var _=h.getRegistry(g,this.type),v=[],E,S,y,C;if(_){for(E=_.handles,f||(f=this.subMatch),S=0,y=E.length;S<y;++S)if(C=E[S],f.call(this,C.sub,p)){if(m)return C;v.push(E[S])}}return v.length&&v},subMatch:function(g,p){return!p[1]||g.fn===p[1]}}},!0),c.SyntheticEvent=h,c.Event.define=function(g,p,f){var m,_,v;return g&&g.type?(m=g,f=p):p&&(m=c.merge({type:g},p)),m?(f||!c.Node.DOM_EVENTS[m.type])&&(_=function(){h.apply(this,arguments)},c.extend(_,h,m),v=new _,g=v.type,c.Node.DOM_EVENTS[g]=c.Env.evt.plugins[g]={eventDef:v,on:function(){return v._on(d(arguments))},delegate:function(){return v._on(d(arguments),!0)},detach:function(){return v._detach(d(arguments))}}):(a(g)||r(g))&&c.Array.each(d(g),function(E){c.Node.DOM_EVENTS[E]=1}),v}},"3.17.2",{requires:["node-base","event-custom-complex"]})},931619:function(){YUI.add("event-tap",function(c,b){var t=c.config.doc,l=c.Event._GESTURE_MAP,d=l.start,o="tap",e=/pointer/i,a={START:"Y_TAP_ON_START_HANDLE",END:"Y_TAP_ON_END_HANDLE",CANCEL:"Y_TAP_ON_CANCEL_HANDLE"};function r(s,n){n=n||c.Object.values(a),c.Array.each(n,function(i){var u=s[i];u&&(u.detach(),s[i]=null)})}c.Event.define(o,{publishConfig:{preventedFn:function(s){var n=s.target.once("click",function(i){i.preventDefault()});setTimeout(function(){n.detach()},100)}},processArgs:function(s,n){if(!n){var i=s[3];return s.splice(3,1),i}},on:function(s,n,i){n[a.START]=s.on(d,this._start,this,s,n,i)},detach:function(s,n,i){r(n)},delegate:function(s,n,i,u){n[a.START]=c.delegate(d,function(h){this._start(h,s,n,i,!0)},s,u,this)},detachDelegate:function(s,n,i){r(n)},_start:function(s,n,i,u,h){var g={canceled:!1,eventType:s.type},p=i.preventMouse||!1;s.button&&s.button===3||s.touches&&s.touches.length!==1||(g.node=h?s.currentTarget:n,s.touches?g.startXY=[s.touches[0].pageX,s.touches[0].pageY]:g.startXY=[s.pageX,s.pageY],s.touches?(i[a.END]=n.once("touchend",this._end,this,n,i,u,h,g),i[a.CANCEL]=n.once("touchcancel",this.detach,this,n,i,u,h,g),i.preventMouse=!0):g.eventType.indexOf("mouse")!==-1&&!p?(i[a.END]=n.once("mouseup",this._end,this,n,i,u,h,g),i[a.CANCEL]=n.once("mousecancel",this.detach,this,n,i,u,h,g)):g.eventType.indexOf("mouse")!==-1&&p?i.preventMouse=!1:e.test(g.eventType)&&(i[a.END]=n.once(l.end,this._end,this,n,i,u,h,g),i[a.CANCEL]=n.once(l.cancel,this.detach,this,n,i,u,h,g)))},_end:function(s,n,i,u,h,g){var p=g.startXY,f,m,_=15;i._extra&&i._extra.sensitivity>=0&&(_=i._extra.sensitivity),s.changedTouches?(f=[s.changedTouches[0].pageX,s.changedTouches[0].pageY],m=[s.changedTouches[0].clientX,s.changedTouches[0].clientY]):(f=[s.pageX,s.pageY],m=[s.clientX,s.clientY]),Math.abs(f[0]-p[0])<=_&&Math.abs(f[1]-p[1])<=_&&(s.type=o,s.pageX=f[0],s.pageY=f[1],s.clientX=m[0],s.clientY=m[1],s.currentTarget=g.node,u.fire(s)),r(i,[a.END,a.CANCEL])}})},"3.17.2",{requires:["node-base","event-base","event-touch","event-synthetic"]})},559747:function(){YUI.add("event-touch",function(c,b){var t="scale",l="rotation",d="identifier",o=c.config.win,e={};c.DOMEventFacade.prototype._touch=function(a,r,s){var n,i,u,h,g;if(a.touches)for(this.touches=[],g={},n=0,i=a.touches.length;n<i;++n)h=a.touches[n],g[c.stamp(h)]=this.touches[n]=new c.DOMEventFacade(h,r,s);if(a.targetTouches)for(this.targetTouches=[],n=0,i=a.targetTouches.length;n<i;++n)h=a.targetTouches[n],u=g&&g[c.stamp(h,!0)],this.targetTouches[n]=u||new c.DOMEventFacade(h,r,s);if(a.changedTouches)for(this.changedTouches=[],n=0,i=a.changedTouches.length;n<i;++n)h=a.changedTouches[n],u=g&&g[c.stamp(h,!0)],this.changedTouches[n]=u||new c.DOMEventFacade(h,r,s);t in a&&(this[t]=a[t]),l in a&&(this[l]=a[l]),d in a&&(this[d]=a[d])},c.Node.DOM_EVENTS&&c.mix(c.Node.DOM_EVENTS,{touchstart:1,touchmove:1,touchend:1,touchcancel:1,gesturestart:1,gesturechange:1,gestureend:1,MSPointerDown:1,MSPointerUp:1,MSPointerMove:1,MSPointerCancel:1,pointerdown:1,pointerup:1,pointermove:1,pointercancel:1}),o&&o.PointerEvent?(e.start="pointerdown",e.end="pointerup",e.move="pointermove",e.cancel="pointercancel"):o&&"ontouchstart"in o&&!(c.UA.chrome&&c.UA.chrome<6)?(e.start="touchstart",e.end="touchend",e.move="touchmove",e.cancel="touchcancel"):o&&"msPointerEnabled"in o.navigator?(e.start="MSPointerDown",e.end="MSPointerUp",e.move="MSPointerMove",e.cancel="MSPointerCancel"):(e.start="mousedown",e.end="mouseup",e.move="mousemove",e.cancel="mousecancel"),c.Event._GESTURE_MAP=e},"3.17.2",{requires:["node-base"]})},924999:function(){YUI.add("event-valuechange",function(c,b){var t="_valuechange",l="value",d="nodeName",o,e={POLL_INTERVAL:50,TIMEOUT:1e4,_poll:function(a,r){var s=a._node,n=r.e,i=a._data&&a._data[t],u=0,h,g,p,f,m,_;if(!(s&&i)){e._stopPolling(a);return}g=i.prevVal,f=i.nodeName,i.isEditable?p=s.innerHTML:f==="input"||f==="textarea"?p=s.value:f==="select"&&(m=s.options[s.selectedIndex],p=m.value||m.text),p!==g&&(i.prevVal=p,h={_event:n,currentTarget:n&&n.currentTarget||a,newVal:p,prevVal:g,target:n&&n.target||a},c.Object.some(i.notifiers,function(v){var E=v.handle.evt,S;if((u!==1||E.el===_)&&v.fire(h),S=E&&E._facade?E._facade.stopped:0,S>u&&(u=S,u===1&&(_=E.el)),u===2)return!0}),e._refreshTimeout(a))},_refreshTimeout:function(a,r){if(a._node){var s=a.getData(t);e._stopTimeout(a),s.timeout=setTimeout(function(){e._stopPolling(a,r)},e.TIMEOUT)}},_startPolling:function(a,r,s){var n,i;if(!(!a.test("input,textarea,select")&&!(i=e._isEditable(a)))){if(n=a.getData(t),n||(n={nodeName:a.get(d).toLowerCase(),isEditable:i,prevVal:i?a.getDOMNode().innerHTML:a.get(l)},a.setData(t,n)),n.notifiers||(n.notifiers={}),n.interval)if(s.force)e._stopPolling(a,r);else{n.notifiers[c.stamp(r)]=r;return}n.notifiers[c.stamp(r)]=r,n.interval=setInterval(function(){e._poll(a,s)},e.POLL_INTERVAL),e._refreshTimeout(a,r)}},_stopPolling:function(a,r){if(a._node){var s=a.getData(t)||{};clearInterval(s.interval),delete s.interval,e._stopTimeout(a),r?s.notifiers&&delete s.notifiers[c.stamp(r)]:s.notifiers={}}},_stopTimeout:function(a){var r=a.getData(t)||{};clearTimeout(r.timeout),delete r.timeout},_isEditable:function(a){var r=a._node;return r.contentEditable==="true"||r.contentEditable===""},_onBlur:function(a,r){e._stopPolling(a.currentTarget,r)},_onFocus:function(a,r){var s=a.currentTarget,n=s.getData(t);n||(n={isEditable:e._isEditable(s),nodeName:s.get(d).toLowerCase()},s.setData(t,n)),n.prevVal=n.isEditable?s.getDOMNode().innerHTML:s.get(l),e._startPolling(s,r,{e:a})},_onKeyDown:function(a,r){e._startPolling(a.currentTarget,r,{e:a})},_onKeyUp:function(a,r){(a.charCode===229||a.charCode===197)&&e._startPolling(a.currentTarget,r,{e:a,force:!0})},_onMouseDown:function(a,r){e._startPolling(a.currentTarget,r,{e:a})},_onSubscribe:function(a,r,s,n){var i,u,h,g,p;if(u={blur:e._onBlur,focus:e._onFocus,keydown:e._onKeyDown,keyup:e._onKeyUp,mousedown:e._onMouseDown},i=s._valuechange={},n)i.delegated=!0,i.getNodes=function(){return g=a.all("input,textarea,select").filter(n),p=a.all('[contenteditable="true"],[contenteditable=""]').filter(n),g.concat(p)},i.getNodes().each(function(f){f.getData(t)||f.setData(t,{nodeName:f.get(d).toLowerCase(),isEditable:e._isEditable(f),prevVal:h?f.getDOMNode().innerHTML:f.get(l)})}),s._handles=c.delegate(u,a,n,null,s);else{if(h=e._isEditable(a),!a.test("input,textarea,select")&&!h)return;a.getData(t)||a.setData(t,{nodeName:a.get(d).toLowerCase(),isEditable:h,prevVal:h?a.getDOMNode().innerHTML:a.get(l)}),s._handles=a.on(u,null,null,s)}},_onUnsubscribe:function(a,r,s){var n=s._valuechange;s._handles&&s._handles.detach(),n.delegated?n.getNodes().each(function(i){e._stopPolling(i,s)}):e._stopPolling(a,s)}};o={detach:e._onUnsubscribe,on:e._onSubscribe,delegate:e._onSubscribe,detachDelegate:e._onUnsubscribe,publishConfig:{emitFacade:!0}},c.Event.define("valuechange",o),c.Event.define("valueChange",o),c.ValueChange=e},"3.17.2",{requires:["event-focus","event-synthetic"]})},986182:function(){YUI.add("file-html5",function(c,b){var t=c.Lang,l=c.bind,d=c.config.win,o=function(e){var a=null;o.isValidFile(e)?a=e:o.isValidFile(e.file)?a=e.file:a=!1,o.superclass.constructor.apply(this,arguments),a&&o.canUpload()&&(this.get("file")||this._set("file",a),this.get("name")||this._set("name",a.name||a.fileName),this.get("size")!=(a.size||a.fileSize)&&this._set("size",a.size||a.fileSize),this.get("type")||this._set("type",a.type),a.hasOwnProperty("lastModifiedDate")&&!this.get("dateModified")&&this._set("dateModified",a.lastModifiedDate))};c.extend(o,c.Base,{initializer:function(e){this.get("id")||this._set("id",c.guid("file"))},_uploadEventHandler:function(e){var a=this.get("xhr");switch(e.type){case"progress":this.fire("uploadprogress",{originEvent:e,bytesLoaded:e.loaded,bytesTotal:this.get("size"),percentLoaded:Math.min(100,Math.round(1e4*e.loaded/this.get("size"))/100)}),this._set("bytesUploaded",e.loaded);break;case"load":if(a.status>=200&&a.status<=299){this.fire("uploadcomplete",{originEvent:e,data:e.target.responseText});var r=a.upload,s=this.get("boundEventHandler");r.removeEventListener("progress",s),r.removeEventListener("error",s),r.removeEventListener("abort",s),a.removeEventListener("load",s),a.removeEventListener("error",s),a.removeEventListener("readystatechange",s),this._set("xhr",null)}else this.fire("uploaderror",{originEvent:e,data:a.responseText,status:a.status,statusText:a.statusText,source:"http"});break;case"error":this.fire("uploaderror",{originEvent:e,data:a.responseText,status:a.status,statusText:a.statusText,source:"io"});break;case"abort":this.fire("uploadcancel",{originEvent:e});break;case"readystatechange":this.fire("readystatechange",{readyState:e.target.readyState,originEvent:e});break}},startUpload:function(e,a,r){this._set("bytesUploaded",0),this._set("xhr",new XMLHttpRequest),this._set("boundEventHandler",l(this._uploadEventHandler,this));var s=new FormData,n=r||"Filedata",i=this.get("xhr"),u=this.get("xhr").upload,h=this.get("boundEventHandler");c.each(a,function(g,p){s.append(p,g)}),s.append(n,this.get("file")),i.addEventListener("loadstart",h,!1),u.addEventListener("progress",h,!1),i.addEventListener("load",h,!1),i.addEventListener("error",h,!1),u.addEventListener("error",h,!1),u.addEventListener("abort",h,!1),i.addEventListener("abort",h,!1),i.addEventListener("loadend",h,!1),i.addEventListener("readystatechange",h,!1),i.open("POST",e,!0),i.withCredentials=this.get("xhrWithCredentials"),c.each(this.get("xhrHeaders"),function(g,p){i.setRequestHeader(p,g)}),i.send(s),this.fire("uploadstart",{xhr:i})},cancelUpload:function(){var e=this.get("xhr");e&&e.abort()}},{NAME:"file",TYPE:"html5",ATTRS:{id:{writeOnce:"initOnly",value:null},size:{writeOnce:"initOnly",value:0},name:{writeOnce:"initOnly",value:null},dateCreated:{writeOnce:"initOnly",value:null},dateModified:{writeOnce:"initOnly",value:null},bytesUploaded:{readOnly:!0,value:0},type:{writeOnce:"initOnly",value:null},file:{writeOnce:"initOnly",value:null},xhr:{readOnly:!0,value:null},xhrHeaders:{value:{}},xhrWithCredentials:{value:!0},boundEventHandler:{readOnly:!0,value:null}},isValidFile:function(e){return d&&d.File&&e instanceof File},canUpload:function(){return d&&d.FormData&&d.XMLHttpRequest}}),c.FileHTML5=o},"3.17.2",{requires:["base"]})},599302:function(){YUI.add("gesture-simulate",function(c,t){var t="gesture-simulate",l=c.config.win&&"ontouchstart"in c.config.win&&!c.UA.phantomjs&&!(c.UA.chrome&&c.UA.chrome<6),d={tap:1,doubletap:1,press:1,move:1,flick:1,pinch:1,rotate:1},o={touchstart:1,touchmove:1,touchend:1,touchcancel:1},e=c.config.doc,a,r=20,s,n,i={HOLD_TAP:10,DELAY_TAP:10,HOLD_PRESS:3e3,MIN_HOLD_PRESS:1e3,MAX_HOLD_PRESS:6e4,DISTANCE_MOVE:200,DURATION_MOVE:1e3,MAX_DURATION_MOVE:5e3,MIN_VELOCITY_FLICK:1.3,DISTANCE_FLICK:200,DURATION_FLICK:1e3,MAX_DURATION_FLICK:5e3,DURATION_PINCH:1e3},u="touchstart",h="touchmove",g="touchend",p="gesturestart",f="gesturechange",m="gestureend",_="mouseup",v="mousemove",E="mousedown",S="click",y="dblclick",C="x",O="y";function A(I){I||c.error(t+": invalid target node"),this.node=I,this.target=c.Node.getDOMNode(I);var D=this.node.getXY(),T=this._getDims();s=D[0]+T[0]/2,n=D[1]+T[1]/2}A.prototype={_toRadian:function(I){return I*(Math.PI/180)},_getDims:function(){var I,D,T;return this.target.getBoundingClientRect?(I=this.target.getBoundingClientRect(),"height"in I?T=I.height:T=Math.abs(I.bottom-I.top),"width"in I?D=I.width:D=Math.abs(I.right-I.left)):(I=this.node.get("region"),D=I.width,T=I.height),[D,T]},_calculateDefaultPoint:function(I){var D;return!c.Lang.isArray(I)||I.length===0?I=[s,n]:(I.length==1&&(D=this._getDims[1],I[1]=D/2),I[0]=this.node.getX()+I[0],I[1]=this.node.getY()+I[1]),I},rotate:function(I,D,T,B,N,P,x){var R,w=T,k=B;(!c.Lang.isNumber(w)||!c.Lang.isNumber(k)||w<0||k<0)&&(R=this.target.offsetWidth<this.target.offsetHeight?this.target.offsetWidth/4:this.target.offsetHeight/4,w=R,k=R),c.Lang.isNumber(x)||c.error(t+"Invalid rotation detected."),this.pinch(I,D,w,k,N,P,x)},pinch:function(I,D,T,B,N,P,x){var R,w,k=r,q,F=0,z=T,j=B,X,J,Q,ie,ce,pe,ye,Ae,Je,ke={start:[],end:[]},Fe={start:[],end:[]},Ie,ht;if(D=this._calculateDefaultPoint(D),(!c.Lang.isNumber(z)||!c.Lang.isNumber(j)||z<0||j<0)&&c.error(t+"Invalid startRadius and endRadius detected."),(!c.Lang.isNumber(N)||N<=0)&&(N=i.DURATION_PINCH),!c.Lang.isNumber(P))P=0;else for(P=P%360;P<0;)P+=360;for(c.Lang.isNumber(x)||(x=0),c.AsyncQueue.defaults.timeout=k,R=new c.AsyncQueue,J=D[0],Q=D[1],ye=P,Ae=P+x,ke.start=[J+z*Math.sin(this._toRadian(ye)),Q-z*Math.cos(this._toRadian(ye))],ke.end=[J+j*Math.sin(this._toRadian(Ae)),Q-j*Math.cos(this._toRadian(Ae))],Fe.start=[J-z*Math.sin(this._toRadian(ye)),Q+z*Math.cos(this._toRadian(ye))],Fe.end=[J-j*Math.sin(this._toRadian(Ae)),Q+j*Math.cos(this._toRadian(Ae))],ie=1,ce=B/T,R.add({fn:function(){var me,Ee,Se,lt;me={pageX:ke.start[0],pageY:ke.start[1],clientX:ke.start[0],clientY:ke.start[1]},Ee={pageX:Fe.start[0],pageY:Fe.start[1],clientX:Fe.start[0],clientY:Fe.start[1]},lt=this._createTouchList([c.merge({identifier:F++},me),c.merge({identifier:F++},Ee)]),Se={pageX:(ke.start[0]+Fe.start[0])/2,pageY:(ke.start[0]+Fe.start[1])/2,clientX:(ke.start[0]+Fe.start[0])/2,clientY:(ke.start[0]+Fe.start[1])/2},this._simulateEvent(this.target,u,c.merge({touches:lt,targetTouches:lt,changedTouches:lt,scale:ie,rotation:ye},Se)),c.UA.ios>=2&&this._simulateEvent(this.target,p,c.merge({scale:ie,rotation:ye},Se))},timeout:0,context:this}),Ie=Math.floor(N/k),X=(j-z)/Ie,pe=(ce-ie)/Ie,Je=(Ae-ye)/Ie,ht=function(me){var Ee=z+X*me,Se=J+Ee*Math.sin(this._toRadian(ye+Je*me)),lt=Q-Ee*Math.cos(this._toRadian(ye+Je*me)),Lt=J-Ee*Math.sin(this._toRadian(ye+Je*me)),Pt=Q+Ee*Math.cos(this._toRadian(ye+Je*me)),Ce=(Se+Lt)/2,je=(lt+Pt)/2,Le,ci,Jt,Ft;Le={pageX:Se,pageY:lt,clientX:Se,clientY:lt},ci={pageX:Lt,pageY:Pt,clientX:Lt,clientY:Pt},Ft=this._createTouchList([c.merge({identifier:F++},Le),c.merge({identifier:F++},ci)]),Jt={pageX:Ce,pageY:je,clientX:Ce,clientY:je},this._simulateEvent(this.target,h,c.merge({touches:Ft,targetTouches:Ft,changedTouches:Ft,scale:ie+pe*me,rotation:ye+Je*me},Jt)),c.UA.ios>=2&&this._simulateEvent(this.target,f,c.merge({scale:ie+pe*me,rotation:ye+Je*me},Jt))},w=0;w<Ie;w++)R.add({fn:ht,args:[w],context:this});R.add({fn:function(){var me=this._getEmptyTouchList(),Ee,Se,lt,Lt;Ee={pageX:ke.end[0],pageY:ke.end[1],clientX:ke.end[0],clientY:ke.end[1]},Se={pageX:Fe.end[0],pageY:Fe.end[1],clientX:Fe.end[0],clientY:Fe.end[1]},Lt=this._createTouchList([c.merge({identifier:F++},Ee),c.merge({identifier:F++},Se)]),lt={pageX:(ke.end[0]+Fe.end[0])/2,pageY:(ke.end[0]+Fe.end[1])/2,clientX:(ke.end[0]+Fe.end[0])/2,clientY:(ke.end[0]+Fe.end[1])/2},c.UA.ios>=2&&this._simulateEvent(this.target,m,c.merge({scale:ce,rotation:Ae},lt)),this._simulateEvent(this.target,g,c.merge({touches:me,targetTouches:me,changedTouches:Lt,scale:ce,rotation:Ae},lt))},context:this}),I&&c.Lang.isFunction(I)&&R.add({fn:I,context:this.node}),R.run()},tap:function(I,D,T,B,N){var P=new c.AsyncQueue,x=this._getEmptyTouchList(),R,w,k,q,F;for(D=this._calculateDefaultPoint(D),(!c.Lang.isNumber(T)||T<1)&&(T=1),c.Lang.isNumber(B)||(B=i.HOLD_TAP),c.Lang.isNumber(N)||(N=i.DELAY_TAP),w={pageX:D[0],pageY:D[1],clientX:D[0],clientY:D[1]},R=this._createTouchList([c.merge({identifier:0},w)]),q=function(){this._simulateEvent(this.target,u,c.merge({touches:R,targetTouches:R,changedTouches:R},w))},F=function(){this._simulateEvent(this.target,g,c.merge({touches:x,targetTouches:x,changedTouches:R},w))},k=0;k<T;k++)P.add({fn:q,context:this,timeout:k===0?0:N}),P.add({fn:F,context:this,timeout:B});T>1&&!l&&P.add({fn:function(){this._simulateEvent(this.target,y,w)},context:this}),I&&c.Lang.isFunction(I)&&P.add({fn:I,context:this.node}),P.run()},flick:function(I,D,T,B,N){var P;D=this._calculateDefaultPoint(D),c.Lang.isString(T)?(T=T.toLowerCase(),T!==C&&T!==O&&c.error(t+"(flick): Only x or y axis allowed")):T=C,c.Lang.isNumber(B)||(B=i.DISTANCE_FLICK),c.Lang.isNumber(N)?N>i.MAX_DURATION_FLICK&&(N=i.MAX_DURATION_FLICK):N=i.DURATION_FLICK,Math.abs(B)/N<i.MIN_VELOCITY_FLICK&&(N=Math.abs(B)/i.MIN_VELOCITY_FLICK),P={start:c.clone(D),end:[T===C?D[0]+B:D[0],T===O?D[1]+B:D[1]]},this._move(I,P,N)},move:function(I,D,T){var B;c.Lang.isObject(D)?(c.Lang.isArray(D.point)?D.point=this._calculateDefaultPoint(D.point):D.point=this._calculateDefaultPoint([]),c.Lang.isNumber(D.xdist)||(D.xdist=i.DISTANCE_MOVE),c.Lang.isNumber(D.ydist)||(D.ydist=0)):D={point:this._calculateDefaultPoint([]),xdist:i.DISTANCE_MOVE,ydist:0},c.Lang.isNumber(T)?T>i.MAX_DURATION_MOVE&&(T=i.MAX_DURATION_MOVE):T=i.DURATION_MOVE,B={start:c.clone(D.point),end:[D.point[0]+D.xdist,D.point[1]+D.ydist]},this._move(I,B,T)},_move:function(I,D,T){var B,N,P=r,x,R,w,k=0,q;for(c.Lang.isNumber(T)?T>i.MAX_DURATION_MOVE&&(T=i.MAX_DURATION_MOVE):T=i.DURATION_MOVE,c.Lang.isObject(D)?(c.Lang.isArray(D.start)||(D.start=[s,n]),c.Lang.isArray(D.end)||(D.end=[s+i.DISTANCE_MOVE,n])):D={start:[s,n],end:[s+i.DISTANCE_MOVE,n]},c.AsyncQueue.defaults.timeout=P,B=new c.AsyncQueue,B.add({fn:function(){var F={pageX:D.start[0],pageY:D.start[1],clientX:D.start[0],clientY:D.start[1]},z=this._createTouchList([c.merge({identifier:k++},F)]);this._simulateEvent(this.target,u,c.merge({touches:z,targetTouches:z,changedTouches:z},F))},timeout:0,context:this}),x=Math.floor(T/P),R=(D.end[0]-D.start[0])/x,w=(D.end[1]-D.start[1])/x,q=function(F){var z=D.start[0]+R*F,j=D.start[1]+w*F,X={pageX:z,pageY:j,clientX:z,clientY:j},J=this._createTouchList([c.merge({identifier:k++},X)]);this._simulateEvent(this.target,h,c.merge({touches:J,targetTouches:J,changedTouches:J},X))},N=0;N<x;N++)B.add({fn:q,args:[N],context:this});B.add({fn:function(){var F={pageX:D.end[0],pageY:D.end[1],clientX:D.end[0],clientY:D.end[1]},z=this._createTouchList([c.merge({identifier:k},F)]);this._simulateEvent(this.target,h,c.merge({touches:z,targetTouches:z,changedTouches:z},F))},timeout:0,context:this}),B.add({fn:function(){var F={pageX:D.end[0],pageY:D.end[1],clientX:D.end[0],clientY:D.end[1]},z=this._getEmptyTouchList(),j=this._createTouchList([c.merge({identifier:k},F)]);this._simulateEvent(this.target,g,c.merge({touches:z,targetTouches:z,changedTouches:j},F))},context:this}),I&&c.Lang.isFunction(I)&&B.add({fn:I,context:this.node}),B.run()},_getEmptyTouchList:function(){return a||(a=this._createTouchList([])),a},_createTouchList:function(I){var D=[],T,B=this;return I&&c.Lang.isArray(I)?c.UA.android&&c.UA.android>=4||c.UA.ios&&c.UA.ios>=2?(c.each(I,function(N){N.identifier||(N.identifier=0),N.pageX||(N.pageX=0),N.pageY||(N.pageY=0),N.screenX||(N.screenX=0),N.screenY||(N.screenY=0),D.push(e.createTouch(c.config.win,B.target,N.identifier,N.pageX,N.pageY,N.screenX,N.screenY))}),T=e.createTouchList.apply(e,D)):c.UA.ios&&c.UA.ios<2?c.error(t+": No touch event simulation framework present."):(T=[],c.each(I,function(N){N.identifier||(N.identifier=0),N.clientX||(N.clientX=0),N.clientY||(N.clientY=0),N.pageX||(N.pageX=0),N.pageY||(N.pageY=0),N.screenX||(N.screenX=0),N.screenY||(N.screenY=0),T.push({target:B.target,identifier:N.identifier,clientX:N.clientX,clientY:N.clientY,pageX:N.pageX,pageY:N.pageY,screenX:N.screenX,screenY:N.screenY})}),T.item=function(N){return T[N]}):c.error(t+": Invalid touchPoints passed"),T},_simulateEvent:function(I,D,T){var B;o[D]?l?c.Event.simulate(I,D,T):this._isSingleTouch(T.touches,T.targetTouches,T.changedTouches)?(D={touchstart:E,touchmove:v,touchend:_}[D],T.button=0,T.relatedTarget=null,B=D===_?T.changedTouches:T.touches,T=c.mix(T,{screenX:B.item(0).screenX,screenY:B.item(0).screenY,clientX:B.item(0).clientX,clientY:B.item(0).clientY},!0),c.Event.simulate(I,D,T),D==_&&c.Event.simulate(I,S,T)):c.error("_simulateEvent(): Event '"+D+"' has multi touch objects that can't be simulated in your platform."):c.Event.simulate(I,D,T)},_isSingleTouch:function(I,D,T){return I&&I.length<=1&&D&&D.length<=1&&T&&T.length<=1}},c.GestureSimulation=A,c.GestureSimulation.defaults=i,c.GestureSimulation.GESTURES=d,c.Event.simulateGesture=function(I,D,T,B){I=c.one(I);var N=new c.GestureSimulation(I);if(D=D.toLowerCase(),!B&&c.Lang.isFunction(T)&&(B=T,T={}),T=T||{},d[D])switch(D){case"tap":N.tap(B,T.point,T.times,T.hold,T.delay);break;case"doubletap":N.tap(B,T.point,2);break;case"press":c.Lang.isNumber(T.hold)?T.hold<i.MIN_HOLD_PRESS?T.hold=i.MIN_HOLD_PRESS:T.hold>i.MAX_HOLD_PRESS&&(T.hold=i.MAX_HOLD_PRESS):T.hold=i.HOLD_PRESS,N.tap(B,T.point,1,T.hold);break;case"move":N.move(B,T.path,T.duration);break;case"flick":N.flick(B,T.point,T.axis,T.distance,T.duration);break;case"pinch":N.pinch(B,T.center,T.r1,T.r2,T.duration,T.start,T.rotation);break;case"rotate":N.rotate(B,T.center,T.r1,T.r2,T.duration,T.start,T.rotation);break}else c.error(t+": Not a supported gesture simulation: "+D)}},"3.17.2",{requires:["async-queue","event-simulate","node-screen"]})},414743:function(){YUI.add("highlight-accentfold",function(c,b){var t=c.Text.AccentFold,l=c.Escape,d={},o=c.mix(c.Highlight,{allFold:function(e,a,r){var s=o._TEMPLATE,n=[],i=0,u,h,g,p,f;for(r=c.merge({escapeHTML:!1,replacer:function(m,_,v,E){var S;if(_&&!/\s/.test(v))return m;S=v.length,n.push([e.substring(i,E),e.substr(E,S)]),i=E+S}},r||d),o.all(t.fold(e),t.fold(a),r),i<e.length&&n.push([e.substr(i)]),h=0,g=n.length;h<g;++h)u=l.html(n[h][0]),(p=n[h][1])&&(u+=s.replace(/\{s\}/g,l.html(p))),n[h]=u;return n.join("")},startFold:function(e,a){return o.allFold(e,a,{startsWith:!0})},wordsFold:function(e,a){var r=o._TEMPLATE;return o.words(e,t.fold(a),{mapper:function(s,n){return n.hasOwnProperty(t.fold(s))?r.replace(/\{s\}/g,l.html(s)):l.html(s)}})}})},"3.17.2",{requires:["highlight-base","text-accentfold"]})},785469:function(){YUI.add("highlight-base",function(c,b){var t=c.Array,l=c.Escape,d=c.Text.WordBreak,o=c.Lang.isArray,e={},a="(&[^;\\s]*)?",r={_REGEX:a+"(%needles)",_REPLACER:function(s,n,i){return n&&!/\s/.test(i)?s:r._TEMPLATE.replace(/\{s\}/g,i)},_START_REGEX:"^"+a+"(%needles)",_TEMPLATE:'<b class="'+c.ClassNameManager.getClassName("highlight")+'">{s}</b>',all:function(s,n,i){var u=[],h,g,p,f,m,_;for(i||(i=e),h=i.escapeHTML!==!1,m=i.startsWith?r._START_REGEX:r._REGEX,_=i.replacer||r._REPLACER,n=o(n)?n:[n],g=0,p=n.length;g<p;++g)f=n[g],f&&u.push(l.regex(h?l.html(f):f));return h&&(s=l.html(s)),u.length?s.replace(new RegExp(m.replace("%needles",u.join("|")),i.caseSensitive?"g":"gi"),_):s},allCase:function(s,n,i){return r.all(s,n,c.merge(i||e,{caseSensitive:!0}))},start:function(s,n,i){return r.all(s,n,c.merge(i||e,{startsWith:!0}))},startCase:function(s,n){return r.start(s,n,{caseSensitive:!0})},words:function(s,n,i){var u,h,g=r._TEMPLATE,p;return i||(i=e),u=!!i.caseSensitive,n=t.hash(o(n)?n:d.getUniqueWords(n,{ignoreCase:!u})),h=i.mapper||function(f,m){return m.hasOwnProperty(u?f:f.toLowerCase())?g.replace(/\{s\}/g,l.html(f)):l.html(f)},p=d.getWords(s,{includePunctuation:!0,includeWhitespace:!0}),t.map(p,function(f){return h(f,n)}).join("")},wordsCase:function(s,n){return r.words(s,n,{caseSensitive:!0})}};c.Highlight=r},"3.17.2",{requires:["array-extras","classnamemanager","escape","text-wordbreak"]})},163562:function(){YUI.add("history-base",function(c,b){var t=c.Lang,l=c.Object,d=YUI.namespace("Env.History"),o=c.Array,e=c.config.doc,a=e.documentMode,r=c.config.win,s={merge:!0},n="change",i="add",u="replace";function h(){this._init.apply(this,arguments)}c.augment(h,c.EventTarget,null,null,{emitFacade:!0,prefix:"history",preventable:!1,queueable:!0}),d._state||(d._state={});function g(p){return t.type(p)==="object"}h.NAME="historyBase",h.SRC_ADD=i,h.SRC_REPLACE=u,h.html5=!!(r.history&&r.history.pushState&&r.history.replaceState&&("onpopstate"in r||c.UA.gecko>=2)&&(!c.UA.android||c.UA.android>=2.4)),h.nativeHashChange=("onhashchange"in r||"onhashchange"in e)&&(!a||a>7),c.mix(h.prototype,{_init:function(p){var f;p=this._config=p||{},this.force=!!p.force,f=this._initialState=this._initialState||p.initialState||null,this.publish(n,{broadcast:2,defaultFn:this._defChangeFn}),f&&this.replace(f)},add:function(){var p=o(arguments,0,!0);return p.unshift(i),this._change.apply(this,p)},addValue:function(p,f,m){var _={};return _[p]=f,this._change(i,_,m)},get:function(p){var f=d._state,m=g(f);return p?m&&l.owns(f,p)?f[p]:void 0:m?c.mix({},f,!0):f},replace:function(){var p=o(arguments,0,!0);return p.unshift(u),this._change.apply(this,p)},replaceValue:function(p,f,m){var _={};return _[p]=f,this._change(u,_,m)},_change:function(p,f,m){return m=m?c.merge(s,m):s,m.merge&&g(f)&&g(d._state)&&(f=c.merge(d._state,f)),this._resolveChanges(p,f,m),this},_fireEvents:function(p,f,m){this.fire(n,{_options:m,changed:f.changed,newVal:f.newState,prevVal:f.prevState,removed:f.removed,src:p}),l.each(f.changed,function(_,v){this._fireChangeEvent(p,v,_)},this),l.each(f.removed,function(_,v){this._fireRemoveEvent(p,v,_)},this)},_fireChangeEvent:function(p,f,m){this.fire(f+"Change",{newVal:m.newVal,prevVal:m.prevVal,src:p})},_fireRemoveEvent:function(p,f,m){this.fire(f+"Remove",{prevVal:m,src:p})},_resolveChanges:function(p,f,m){var _={},v,E=d._state,S={};f||(f={}),m||(m={}),g(f)&&g(E)?(l.each(f,function(y,C){var O=E[C];y!==O&&(_[C]={newVal:y,prevVal:O},v=!0)},this),l.each(E,function(y,C){(!l.owns(f,C)||f[C]===null)&&(delete f[C],S[C]=y,v=!0)},this)):v=f!==E,(v||this.force)&&this._fireEvents(p,{changed:_,newState:f,prevState:E,removed:S},m)},_storeState:function(p,f){d._state=f||{}},_defChangeFn:function(p){this._storeState(p.src,p.newVal,p._options)}},!0),c.HistoryBase=h},"3.17.2",{requires:["event-custom-complex"]})},827476:function(){YUI.add("history-hash-ie",function(c,b){if(c.UA.ie&&!c.HistoryBase.nativeHashChange){var t=c.Do,l=YUI.namespace("Env.HistoryHash"),d=c.HistoryHash,o=l._iframe,e=c.config.win;d.getIframeHash=function(){if(!o||!o.contentWindow)return"";var a=d.hashPrefix,r=o.contentWindow.location.hash.substr(1);return a&&r.indexOf(a)===0?r.replace(a,""):r},d._updateIframe=function(a,r){var s=o&&o.contentWindow&&o.contentWindow.document,n=s&&s.location;!s||!n||(r?n.replace(a.charAt(0)==="#"?a:"#"+a):(s.open().close(),n.hash=a))},t.before(d._updateIframe,d,"replaceHash",d,!0),o||c.on("domready",function(){var a=d.getHash();o=l._iframe=c.Node.getDOMNode(c.Node.create('<iframe src="javascript:0" style="display:none" height="0" width="0" tabindex="-1" title="empty"/>')),c.config.doc.documentElement.appendChild(o),d._updateIframe(a||"#"),c.on("hashchange",function(r){a=r.newHash,d.getIframeHash()!==a&&d._updateIframe(a)},e),c.later(50,null,function(){var r=d.getIframeHash();r!==a&&d.setHash(r)},null,!0)})}},"3.17.2",{requires:["history-hash","node-base"]})},213978:function(){YUI.add("squarespace-history-hash",function(c,b){},"1.0",{requires:["squarespace-beforeunload"]}),function(c){var b=!1;c.add("history-hash",function(t){var l=t.HistoryBase,d=t.Lang,o=t.Array,e=t.Object,a=c.namespace("Env.HistoryHash"),r="hash",s,n,i,u,h=t.config.win,g=t.config.useHistoryHTML5;function p(){p.superclass.constructor.apply(this,arguments)}t.extend(p,l,{_init:function(m){var _=p.parseHash();m=m||{},this._initialState=m.initialState?t.merge(m.initialState,_):_,t.after("hashchange",t.bind(this._afterHashChange,this),h),p.superclass._init.apply(this,arguments)},_change:function(m,_,v){return e.each(_,function(E,S){d.isValue(E)&&(_[S]=E.toString())}),p.superclass._change.call(this,m,_,v)},_storeState:function(m,_){var v=p.decode,E=p.createHash(_);p.superclass._storeState.apply(this,arguments),m!==r&&v(p.getHash())!==v(E)&&p[m===l.SRC_REPLACE?"replaceHash":"setHash"](E)},_afterHashChange:function(m){this._resolveChanges(r,p.parseHash(m.newHash),{})}},{NAME:"historyHash",SRC_HASH:r,hashPrefix:"",_REGEX_HASH:/([^\?#&=]+)=?([^&=]*)/g,createHash:function(m){var _=p.encode,v=[];return e.each(m,function(E,S){d.isValue(E)&&v.push(_(S)+"="+_(E))}),v.join("&")},decode:function(m){return decodeURIComponent(m.replace(/\+/g," "))},encode:function(m){return encodeURIComponent(m).replace(/%20/g,"+")},getHash:t.UA.gecko?function(){var m=t.getLocation(),_=/#(.*)$/.exec(m.href),v=_&&_[1]||"",E=p.hashPrefix;return E&&v.indexOf(E)===0?v.replace(E,""):v}:function(){var m=t.getLocation(),_=m.hash.substring(1),v=p.hashPrefix;return v&&_.indexOf(v)===0?_.replace(v,""):_},getUrl:function(){return location.href},parseHash:function(m){var _=p.decode,v,E,S,y,C,O={},A=p.hashPrefix,I;for(m=d.isValue(m)?m:p.getHash(),A&&(I=m.indexOf(A),(I===0||I===1&&m.charAt(0)==="#")&&(m=m.replace(A,""))),y=m.match(p._REGEX_HASH)||[],v=0,E=y.length;v<E;++v)S=y[v],C=S.split("="),C.length>1?O[_(C[0])]=_(C[1]):O[_(S)]="";return O},replaceHash:function(m){var _=t.getLocation(),v=_.href.replace(/#.*$/,"");m.charAt(0)==="#"&&(m=m.substring(1)),_.replace(v+"#"+(p.hashPrefix||"")+m)},setHash:function(m){var _=t.getLocation();m.charAt(0)==="#"&&(m=m.substring(1)),_.hash=(p.hashPrefix||"")+m}});var f=t.config.win._YUI_HISTORY_HASH_ENVIRONMENT_ID;f||(f=t.guid(),t.config.win._YUI_HISTORY_HASH_ENVIRONMENT_ID=f,b&&console.log("Created the hash",f," for window",t.config.win)),s=a._notifiers,s||(s={},a._notifiers=s),n=s[f],n||(n=[],s[f]=n),t.Event.define("hashchange",{on:function(m,_,v){(m.compareTo(h)||m.compareTo(t.config.doc.body))&&n.push(v)},detach:function(m,_,v){var E=o.indexOf(n,v);E!==-1&&n.splice(E,1)}}),i=p.getHash(),u=p.getUrl(),l.nativeHashChange?(a._hashHandle||(a._hashHandle={}),a._hashHandle[f]||(a._hashHandle[f]=t.Event.attach("hashchange",function(m){var _=p.getHash(),v=p.getUrl();o.each(n.concat(),function(E){E.fire({_event:m,oldHash:i,oldUrl:u,newHash:_,newUrl:v})}),i=_,u=v},h),b&&console.log("Binded hashchange event listener for ",f," on window",t.config.win),t.on("beforeunload",function(){var m=a._hashHandle[f];m&&(m.detach(),a._hashHandle[f]=null),delete a._hashHandle[f],b&&console.log("DETACHED hashchange event listener for ",f," on window",t.config.win)}))):(a._hashPoll||(a._hashPoll={}),a._hashPoll[f]||(a._hashPoll[f]=t.later(50,null,function(){var m=p.getHash(),_,v;i!==m&&(v=p.getUrl(),_={oldHash:i,oldUrl:u,newHash:m,newUrl:v},i=m,u=v,o.each(n.concat(),function(E){E.fire(_)}))},null,!0),b&&console.log("Binded hashchange poller for ",f," on window",t.config.win),t.on("beforeunload",function(){a._hashPoll[f].cancel(),a._hashPoll[f]=null,delete a._hashPoll[f],b&&console.log("DETACHED hashchange poller for ",f," on window",t.config.win)}))),t.HistoryHash=p,(g===!1||!t.History&&g!==!0&&(!l.html5||!t.HistoryHTML5))&&(t.History=p)},"3.17.2",{requires:["event-synthetic","history-base","yui-later","squarespace-beforeunload"]})}(YUI)},277200:function(){YUI.add("history-html5",function(c,b){var t=c.HistoryBase,l=c.Lang,d=c.config.win,o=c.config.useHistoryHTML5,e="popstate",a=t.SRC_REPLACE;function r(){r.superclass.constructor.apply(this,arguments)}c.extend(r,t,{_init:function(s){var n;try{n=d.history.state}catch{n=null}c.Object.isEmpty(n)&&(n=null),s||(s={}),s.initialState&&l.type(s.initialState)==="object"&&l.type(n)==="object"?this._initialState=c.merge(s.initialState,n):this._initialState=n,c.on("popstate",this._onPopState,d,this),r.superclass._init.apply(this,arguments)},_storeState:function(s,n,i){s!==e&&d.history[s===a?"replaceState":"pushState"](n,i.title||c.config.doc.title||"",i.url||c.config.doc.URL),r.superclass._storeState.apply(this,arguments)},_onPopState:function(s){this._resolveChanges(e,s._event.state||null)}},{NAME:"historyhtml5",SRC_POPSTATE:e}),c.Node.DOM_EVENTS.popstate||(c.Node.DOM_EVENTS.popstate=1),c.HistoryHTML5=r,(o===!0||o!==!1&&t.html5)&&(c.History=r)},"3.17.2",{optional:["json"],requires:["event-base","history-base","node-base"]})},474863:function(){YUI.add("intl",function(c,b){var t={},l="yuiRootLang",d="yuiActiveLang",o=[];c.mix(c.namespace("Intl"),{_mod:function(e){return t[e]||(t[e]={}),t[e]},setLang:function(e,a){var r=this._mod(e),s=r[d],n=!!r[a];return n&&a!==s&&(r[d]=a,this.fire("intl:langChange",{module:e,prevVal:s,newVal:a===l?"":a})),n},getLang:function(e){var a=this._mod(e)[d];return a===l?"":a},add:function(e,a,r){a=a||l,this._mod(e)[a]=r,this.setLang(e,a)},get:function(e,a,r){var s=this._mod(e),n;return r=r||s[d],n=s[r]||{},a?n[a]:c.merge(n)},getAvailableLangs:function(e){var a=c.Env._loader,r=a&&a.moduleInfo[e],s=r&&r.lang;return s?s.concat():o}}),c.augment(c.Intl,c.EventTarget),c.Intl.publish("intl:langChange",{emitFacade:!0})},"3.17.2",{requires:["intl-base","event-custom"]})},918916:function(){YUI.add("io-base",function(c,b){var t=["start","complete","end","success","failure","progress"],l=["status","statusText","responseText","responseXML"],d=c.config.win,o=0;function e(i){var u=this;u._uid="io:"+o++,u._init(i),c.io._map[u._uid]=u}e.prototype={_id:0,_headers:{"X-Requested-With":"XMLHttpRequest"},_timeout:{},_init:function(i){var u=this,h,g;for(u.cfg=i||{},c.augment(u,c.EventTarget),h=0,g=t.length;h<g;++h)u.publish("io:"+t[h],c.merge({broadcast:1},i)),u.publish("io-trn:"+t[h],i)},_create:function(i,u){var h=this,g={id:c.Lang.isNumber(u)?u:h._id++,uid:h._uid},p=i.xdr?i.xdr.use:null,f=i.form&&i.form.upload?"iframe":null,m;return p==="native"&&(p=c.UA.ie&&!n?"xdr":null,h.setHeader("X-Requested-With")),m=p||f,g=m?c.merge(c.IO.customTransport(m),g):c.merge(c.IO.defaultTransport(),g),g.notify&&(i.notify=function(_,v,E){h.notify(_,v,E)}),m||d&&d.FormData&&i.data instanceof d.FormData&&(g.c.upload.onprogress=function(_){h.progress(g,_,i)},g.c.onload=function(_){h.load(g,_,i)},g.c.onerror=function(_){h.error(g,_,i)},g.upload=!0),g},_destroy:function(i){d&&!i.notify&&!i.xdr&&(a&&!i.upload?i.c.onreadystatechange=null:i.upload?(i.c.upload.onprogress=null,i.c.onload=null,i.c.onerror=null):c.UA.ie&&!i.e&&i.c.abort()),i=i.c=null},_evt:function(i,u,h){var g=this,p,f=h.arguments,m=g.cfg.emitFacade,_="io:"+i,v="io-trn:"+i;this.detach(v),u.e&&(u.c={status:0,statusText:u.e}),p=[m?{id:u.id,data:u.c,cfg:h,arguments:f}:u.id],m||(i===t[0]||i===t[2]||(u.evt?p.push(u.evt):p.push(u.c)),f&&p.push(f)),p.unshift(_),g.fire.apply(g,p),h.on&&(p[0]=v,g.once(v,h.on[i],h.context||c),g.fire.apply(g,p))},start:function(i,u){this._evt(t[0],i,u)},complete:function(i,u){this._evt(t[1],i,u)},end:function(i,u){this._evt(t[2],i,u),this._destroy(i)},success:function(i,u){this._evt(t[3],i,u),this.end(i,u)},failure:function(i,u){this._evt(t[4],i,u),this.end(i,u)},progress:function(i,u,h){i.evt=u,this._evt(t[5],i,h)},load:function(i,u,h){i.evt=u.target,this._evt(t[1],i,h)},error:function(i,u,h){i.evt=u,this._evt(t[4],i,h)},_retry:function(i,u,h){return this._destroy(i),h.xdr.use="flash",this.send(u,h,i.id)},_concat:function(i,u){return i+=(i.indexOf("?")===-1?"?":"&")+u,i},setHeader:function(i,u){u?this._headers[i]=u:delete this._headers[i]},_setHeaders:function(i,u){u=c.merge(this._headers,u),c.Object.each(u,function(h,g){h!=="disable"&&i.setRequestHeader(g,u[g])})},_startTimeout:function(i,u){var h=this;h._timeout[i.id]=setTimeout(function(){h._abort(i,"timeout")},u)},_clearTimeout:function(i){clearTimeout(this._timeout[i]),delete this._timeout[i]},_result:function(i,u){var h;try{h=i.c.status}catch{h=0}h>=200&&h<300||h===304||h===1223?this.success(i,u):this.failure(i,u)},_rS:function(i,u){var h=this;i.c.readyState===4&&(u.timeout&&h._clearTimeout(i.id),setTimeout(function(){h.complete(i,u),h._result(i,u)},0))},_abort:function(i,u){i&&i.c&&(i.e=u,i.c.abort())},send:function(i,u,h){var g,p,f,m,_,v,E=this,S=i,y={};if(u=u?c.Object(u):{},g=E._create(u,h),p=u.method?u.method.toUpperCase():"GET",_=u.sync,v=u.data,c.Lang.isObject(v)&&!v.nodeType&&!g.upload&&c.QueryString&&c.QueryString.stringify&&(u.data=v=c.QueryString.stringify(v)),u.form){if(u.form.upload)return E.upload(g,i,u);v=E._serialize(u.form,v)}if(v||(v=""),v)switch(p){case"GET":case"HEAD":case"DELETE":S=E._concat(S,v),v="";break;case"POST":case"PUT":u.headers=c.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},u.headers);break}if(g.xdr)return E.xdr(S,g,u);if(g.notify)return g.c.send(g,i,u);!_&&!g.upload&&(g.c.onreadystatechange=function(){E._rS(g,u)});try{if(g.c.open(p,S,!_,u.username||null,u.password||null),E._setHeaders(g.c,u.headers||{}),E.start(g,u),u.xdr&&u.xdr.credentials&&n&&(g.c.withCredentials=!0),g.c.send(v),_){for(f=0,m=l.length;f<m;++f)y[l[f]]=g.c[l[f]];return y.getAllResponseHeaders=function(){return g.c.getAllResponseHeaders()},y.getResponseHeader=function(C){return g.c.getResponseHeader(C)},E.complete(g,u),E._result(g,u),y}}catch{if(g.xdr)return E._retry(g,i,u);E.complete(g,u),E._result(g,u)}return u.timeout&&E._startTimeout(g,u.timeout),{id:g.id,abort:function(){return g.c?E._abort(g,"abort"):!1},isInProgress:function(){return g.c?g.c.readyState%4:!1},io:E}}},c.io=function(i,u){var h=c.io._map["io:0"]||new e;return h.send.apply(h,[i,u])},c.io.header=function(i,u){var h=c.io._map["io:0"]||new e;h.setHeader(i,u)},c.IO=e,c.io._map={};var a=d&&d.XMLHttpRequest,r=d&&d.XDomainRequest,s=d&&d.ActiveXObject,n=a&&"withCredentials"in new XMLHttpRequest;c.mix(c.IO,{_default:"xhr",defaultTransport:function(i){if(i)c.IO._default=i;else{var u={c:c.IO.transports[c.IO._default](),notify:c.IO._default!=="xhr"};return u}},transports:{xhr:function(){return a?new XMLHttpRequest:s?new ActiveXObject("Microsoft.XMLHTTP"):null},xdr:function(){return r?new XDomainRequest:null},iframe:function(){return{}},flash:null,nodejs:null},customTransport:function(i){var u={c:c.IO.transports[i]()};return u[i==="xdr"||i==="flash"?"xdr":"notify"]=!0,u}}),c.mix(c.IO.prototype,{notify:function(i,u,h){var g=this;switch(i){case"timeout":case"abort":case"transport error":u.c={status:0,statusText:i},i="failure";default:g[i].apply(g,[u,h])}}})},"3.17.2",{requires:["event-custom-base","querystring-stringify-simple"]})},479839:function(){YUI.add("io-form",function(c,b){var t=encodeURIComponent;c.IO.stringify=function(l,d){d=d||{};var o=c.IO.prototype._serialize({id:l,useDisabled:d.useDisabled},d.extra&&typeof d.extra=="object"?c.QueryString.stringify(d.extra):d.extra);return o},c.mix(c.IO.prototype,{_serialize:function(l,d){var o=[],e=l.useDisabled||!1,a=0,r=typeof l.id=="string"?l.id:l.id.getAttribute("id"),s,n,i,u,h,g,p,f,m,_;if(r||(r=c.guid("io:"),l.id.setAttribute("id",r)),n=c.config.doc.getElementById(r),!n||!n.elements)return d||"";for(g=0,p=n.elements.length;g<p;++g)if(s=n.elements[g],h=s.disabled,i=s.name,e?i:i&&!h)switch(i=t(i)+"=",u=t(s.value),s.type){case"select-one":s.selectedIndex>-1&&(_=s.options[s.selectedIndex],o[a++]=i+t(_.attributes.value&&_.attributes.value.specified?_.value:_.text));break;case"select-multiple":if(s.selectedIndex>-1)for(f=s.selectedIndex,m=s.options.length;f<m;++f)_=s.options[f],_.selected&&(o[a++]=i+t(_.attributes.value&&_.attributes.value.specified?_.value:_.text));break;case"radio":case"checkbox":s.checked&&(o[a++]=i+u);break;case"file":case void 0:case"reset":case"button":break;case"submit":default:o[a++]=i+u}return d&&(o[a++]=d),o.join("&")}},!0)},"3.17.2",{requires:["io-base","node-base"]})},821303:function(){YUI.add("io-queue",function(c,b){var t=c.io._map["io:0"]||new c.IO;c.mix(c.IO.prototype,{_q:new c.Queue,_qActiveId:null,_qInit:!1,_qState:1,_qShift:function(){var d=this,o=d._q.next();d._qActiveId=o.id,d._qState=0,d.send(o.uri,o.cfg,o.id)},queue:function(d,o){var e=this,a={uri:d,cfg:o,id:this._id++};return e._qInit||(c.on("io:complete",function(r,s){e._qNext(r)},e),e._qInit=!0),e._q.add(a),e._qState===1&&e._qShift(),a},_qNext:function(d){var o=this;o._qState=1,o._qActiveId===d&&o._q.size()>0&&o._qShift()},qPromote:function(d){this._q.promote(d)},qRemove:function(d){this._q.remove(d)},qEmpty:function(){this._q=new c.Queue},qStart:function(){var d=this;d._qState=1,d._q.size()>0&&d._qShift()},qStop:function(){this._qState=0},qSize:function(){return this._q.size()}},!0);function l(d,o){return t.queue.apply(t,[d,o])}l.start=function(){t.qStart()},l.stop=function(){t.qStop()},l.promote=function(d){t.qPromote(d)},l.remove=function(d){t.qRemove(d)},l.size=function(){t.qSize()},l.empty=function(){t.qEmpty()},c.io.queue=l},"3.17.2",{requires:["io-base","queue-promote"]})},343140:function(){YUI.add("io-upload-iframe",function(c,b){var t=c.config.win,l=c.config.doc,d=l.documentMode&&l.documentMode>=8,o=decodeURIComponent,e=c.IO.prototype.end;function a(s,n,i){var u=c.Node.create('<iframe id="io_iframe'+s.id+'" name="io_iframe'+s.id+'" />');u._node.style.position="absolute",u._node.style.top="-1000px",u._node.style.left="-1000px",c.one("body").appendChild(u),c.on("load",function(){i._uploadComplete(s,n)},"#io_iframe"+s.id)}function r(s){c.Event.purgeElement("#io_iframe"+s,!1),c.one("body").removeChild(c.one("#io_iframe"+s))}c.mix(c.IO.prototype,{_addData:function(s,n){c.Lang.isObject(n)&&(n=c.QueryString.stringify(n));var i=[],u=n.split("="),h,g;for(h=0,g=u.length-1;h<g;h++)i[h]=l.createElement("input"),i[h].type="hidden",i[h].name=o(u[h].substring(u[h].lastIndexOf("&")+1)),i[h].value=h+1===g?o(u[h+1]):o(u[h+1].substring(0,u[h+1].lastIndexOf("&"))),s.appendChild(i[h]);return i},_removeData:function(s,n){var i,u;for(i=0,u=n.length;i<u;i++)s.removeChild(n[i])},_setAttrs:function(s,n,i){this._originalFormAttrs={action:s.getAttribute("action"),target:s.getAttribute("target")},s.setAttribute("action",i),s.setAttribute("method","POST"),s.setAttribute("target","io_iframe"+n),s.setAttribute(c.UA.ie&&!d?"encoding":"enctype","multipart/form-data")},_resetAttrs:function(s,n){c.Object.each(n,function(i,u){i?s.setAttribute(u,i):s.removeAttribute(u)})},_startUploadTimeout:function(s,n){var i=this;i._timeout[s.id]=t.setTimeout(function(){s.status=0,s.statusText="timeout",i.complete(s,n),i.end(s,n)},n.timeout)},_clearUploadTimeout:function(s){var n=this;t.clearTimeout(n._timeout[s]),delete n._timeout[s]},_uploadComplete:function(s,n){var i=this,u=c.one("#io_iframe"+s.id).get("contentWindow.document"),h=u.one("body"),g;n.timeout&&i._clearUploadTimeout(s.id);try{h?(g=h.one("pre:first-child"),s.c.responseText=g?g.get("text"):h.get("text")):s.c.responseXML=u._node}catch{s.e="upload failure"}i.complete(s,n),i.end(s,n),t.setTimeout(function(){r(s.id)},0)},_upload:function(s,n,i){var u=this,h=typeof i.form.id=="string"?l.getElementById(i.form.id):i.form.id,g;return u._setAttrs(h,s.id,n),i.data&&(g=u._addData(h,i.data)),i.timeout&&u._startUploadTimeout(s,i),h.submit(),u.start(s,i),i.data&&u._removeData(h,g),{id:s.id,abort:function(){if(s.status=0,s.statusText="abort",c.one("#io_iframe"+s.id))r(s.id),u.complete(s,i),u.end(s,i);else return!1},isInProgress:function(){return!!c.one("#io_iframe"+s.id)},io:u}},upload:function(s,n,i){return a(s,i,this),this._upload(s,n,i)},end:function(s,n){var i,u;return n&&(i=n.form,i&&i.upload&&(u=this,i=typeof i.id=="string"?l.getElementById(i.id):i.id,i&&u._resetAttrs(i,this._originalFormAttrs))),e.call(this,s,n)}},!0)},"3.17.2",{requires:["io-base","node-base"]})},480149:function(){YUI.add("io-xdr",function(c,b){var t=c.publish("io:xdrReady",{fireOnce:!0}),l={},d={},o=c.config.doc,e=c.config.win,a=e&&e.XDomainRequest;function r(u,h,g){var p='<object id="io_swf" type="application/x-shockwave-flash" data="'+u+'" width="0" height="0"><param name="movie" value="'+u+'"><param name="FlashVars" value="yid='+h+"&uid="+g+'"><param name="allowScriptAccess" value="always"></object>',f=o.createElement("div");o.body.appendChild(f),f.innerHTML=p}function s(u,h,g){return h==="flash"&&(u.c.responseText=decodeURI(u.c.responseText)),g==="xml"&&(u.c.responseXML=c.DataType.XML.parse(u.c.responseText)),u}function n(u,h){return u.c.abort(u.id,h)}function i(u){return a?d[u.id]!==4:u.c.isInProgress(u.id)}c.mix(c.IO.prototype,{_transport:{},_ieEvt:function(u,h){var g=this,p=u.id,f="timeout";u.c.onprogress=function(){d[p]=3},u.c.onload=function(){d[p]=4,g.xdrResponse("success",u,h)},u.c.onerror=function(){d[p]=4,g.xdrResponse("failure",u,h)},u.c.ontimeout=function(){d[p]=4,g.xdrResponse(f,u,h)},u.c[f]=h[f]||0},xdr:function(u,h,g){var p=this;return g.xdr.use==="flash"?(l[h.id]=g,e.setTimeout(function(){try{h.c.send(u,{id:h.id,uid:h.uid,method:g.method,data:g.data,headers:g.headers})}catch{p.xdrResponse("transport error",h,g),delete l[h.id]}},c.io.xdr.delay)):a?(p._ieEvt(h,g),h.c.open(g.method||"GET",u),setTimeout(function(){h.c.send(g.data)},0)):h.c.send(u,h,g),{id:h.id,abort:function(){return h.c?n(h,g):!1},isInProgress:function(){return h.c?i(h.id):!1},io:p}},xdrResponse:function(u,h,g){g=l[h.id]?l[h.id]:g;var p=this,f=a?d:l,m=g.xdr.use,_=g.xdr.dataType;switch(u){case"start":p.start(h,g);break;case"success":p.success(s(h,m,_),g),delete f[h.id];break;case"timeout":case"abort":case"transport error":h.c={status:0,statusText:u};case"failure":p.failure(s(h,m,_),g),delete f[h.id];break}},_xdrReady:function(u,h){c.fire(t,u,h)},transport:function(u){u.id==="flash"&&(r(c.UA.ie?u.src+"?d="+new Date().valueOf().toString():u.src,c.id,u.uid),c.IO.transports.flash=function(){return o.getElementById("io_swf")})}}),c.io.xdrReady=function(u,h){var g=c.io._map[h];c.io.xdr.delay=0,g._xdrReady.apply(g,[u,h])},c.io.xdrResponse=function(u,h,g){var p=c.io._map[h.uid];p.xdrResponse.apply(p,[u,h,g])},c.io.transport=function(u){var h=c.io._map["io:0"]||new c.IO;u.uid=h._uid,h.transport.apply(h,[u])},c.io.xdr={delay:100}},"3.17.2",{requires:["io-base","datatype-xml-parse"]})},98315:function(){YUI.add("json-parse",function(c,b){var t=c.config.global.JSON;c.namespace("JSON").parse=function(l,d,o){return t.parse(typeof l=="string"?l:l+"",d,o)}},"3.17.2",{requires:["yui-base"]})},522353:function(){YUI.add("json-stringify",function(c,b){var t=":",l=c.config.global.JSON;c.mix(c.namespace("JSON"),{dateToString:function(d){function o(e){return e<10?"0"+e:e}return d.getUTCFullYear()+"-"+o(d.getUTCMonth()+1)+"-"+o(d.getUTCDate())+"T"+o(d.getUTCHours())+t+o(d.getUTCMinutes())+t+o(d.getUTCSeconds())+"Z"},stringify:function(){return l.stringify.apply(l,arguments)},charCacheThreshold:100})},"3.17.2",{requires:["yui-base"]})},614722:function(){YUI.add("jsonp",function(c,b){var t=c.Lang.isFunction;function l(){this._init.apply(this,arguments)}l.prototype={_init:function(d,o){this.url=d,this._requests={},this._timeouts={},o=t(o)?{on:{success:o}}:o||{};var e=o.on||{};e.success||(e.success=this._defaultCallback(d,o)),this._config=c.merge({context:this,args:[],format:this._format,allowCache:!1},o,{on:e})},_defaultCallback:function(){},send:function(){var d=this,o=c.Array(arguments,0,!0),e=d._config,a=d._proxy||c.guid(),r;if(e.allowCache&&(d._proxy=a),d._requests[a]===void 0&&(d._requests[a]=0),d._timeouts[a]===void 0&&(d._timeouts[a]=0),d._requests[a]++,o.unshift(d.url,"YUI.Env.JSONP."+a),r=e.format.apply(d,o),!e.on.success)return d;function s(n,i){return t(n)?function(u){var h=!0,g="_requests";i?(++d._timeouts[a],--d._requests[a]):(d._requests[a]||(h=!1,g="_timeouts"),--d[g][a]),!d._requests[a]&&!d._timeouts[a]&&delete YUI.Env.JSONP[a],h&&n.apply(e.context,[u].concat(e.args))}:null}return YUI.Env.JSONP[a]=s(e.on.success),c.Get.js(r,{onFailure:s(e.on.failure),onTimeout:s(e.on.timeout,!0),timeout:e.timeout,charset:e.charset,attributes:e.attributes,async:e.async}).execute(),d},_format:function(d,o){return d.replace(/\{callback\}/,o)}},c.JSONPRequest=l,c.jsonp=function(d,o){var e=new c.JSONPRequest(d,o);return e.send.apply(e,c.Array(arguments,2,!0))},YUI.Env.JSONP||(YUI.Env.JSONP={})},"3.17.2",{requires:["get","oop"]})},210015:function(){YUI.add("model-list",function(c,b){var t=c.Attribute.prototype,l=c.Lang,d=c.Array,o="add",e="create",a="error",r="load",s="remove",n="reset";function i(){i.superclass.constructor.apply(this,arguments)}c.ModelList=c.extend(i,c.Base,{model:c.Model,_isYUIModelList:!0,initializer:function(u){u||(u={});var h=this.model=u.model||this.model;typeof h=="string"&&(this.model=c.Object.getValue(c,h.split(".")),this.model||c.error("ModelList: Model class not found: "+h)),this.publish(o,{defaultFn:this._defAddFn}),this.publish(n,{defaultFn:this._defResetFn}),this.publish(s,{defaultFn:this._defRemoveFn}),this.after("*:idChange",this._afterIdChange),this._clear(),u.items&&this.add(u.items,{silent:!0})},destructor:function(){this._clear()},add:function(u,h){var g=u._isYUIModelList;return g||l.isArray(u)?d.map(g?u.toArray():u,function(p,f){var m=h||{};return"index"in m&&(m=c.merge(m,{index:m.index+f})),this._add(p,m)},this):this._add(u,h)},create:function(u,h,g){var p=this;return typeof h=="function"&&(g=h,h={}),h||(h={}),u._isYUIModel||(u=new this.model(u)),p.fire(e,c.merge(h,{model:u})),u.save(h,function(f){f||p.add(u,h),g&&g.apply(null,arguments)})},each:function(u,h){var g=this._items.concat(),p,f,m;for(p=0,m=g.length;p<m;p++)f=g[p],u.call(h||f,f,p,this);return this},filter:function(u,h){var g=[],p=this._items,f,m,_,v;for(typeof u=="function"&&(h=u,u={}),f=0,_=p.length;f<_;++f)m=p[f],h.call(this,m,f,this)&&g.push(m);return u.asList?(v=new this.constructor({model:this.model}),g.length&&v.add(g,{silent:!0}),v):g},get:function(u){return this.attrAdded(u)?t.get.apply(this,arguments):this.invoke("get",u)},getAsHTML:function(u){return this.attrAdded(u)?c.Escape.html(t.get.apply(this,arguments)):this.invoke("getAsHTML",u)},getAsURL:function(u){return this.attrAdded(u)?encodeURIComponent(t.get.apply(this,arguments)):this.invoke("getAsURL",u)},getByClientId:function(u){return this._clientIdMap[u]||null},getById:function(u){return this._idMap[u]||null},invoke:function(u){var h=[this._items,u].concat(d(arguments,1,!0));return d.invoke.apply(d,h)},load:function(u,h){var g=this;return typeof u=="function"&&(h=u,u={}),u||(u={}),this.sync("read",u,function(p,f){var m={options:u,response:f},_;p?(m.error=p,m.src="load",g.fire(a,m)):(g._loadEvent||(g._loadEvent=g.publish(r,{preventable:!1})),_=m.parsed=g._parse(f),g.reset(_,u),g.fire(r,m)),h&&h.apply(null,arguments)}),this},map:function(u,h){return d.map(this._items,u,h)},parse:function(u){if(typeof u=="string")try{return c.JSON.parse(u)||[]}catch(h){return this.fire(a,{error:h,response:u,src:"parse"}),null}return u||[]},remove:function(u,h){var g=u._isYUIModelList;return g||l.isArray(u)?(u=d.map(g?u.toArray():u,function(p){return l.isNumber(p)?this.item(p):p},this),d.map(u,function(p){return this._remove(p,h)},this)):this._remove(u,h)},reset:function(u,h){u||(u=[]),h||(h={});var g=c.merge({src:"reset"},h);return u._isYUIModelList?u=u.toArray():u=d.map(u,function(p){return p._isYUIModel?p:new this.model(p)},this),g.models=u,h.silent?this._defResetFn(g):(this.comparator&&u.sort(c.bind(this._sort,this)),this.fire(n,g)),this},some:function(u,h){var g=this._items.concat(),p,f,m;for(p=0,m=g.length;p<m;p++)if(f=g[p],u.call(h||f,f,p,this))return!0;return!1},sort:function(u){if(!this.comparator)return this;var h=this._items.concat(),g;return u||(u={}),h.sort(c.rbind(this._sort,this,u)),g=c.merge(u,{models:h,src:"sort"}),u.silent?this._defResetFn(g):this.fire(n,g),this},sync:function(){var u=d(arguments,0,!0).pop();typeof u=="function"&&u()},toArray:function(){return this._items.concat()},toJSON:function(){return this.map(function(u){return u.toJSON()})},_add:function(u,h){var g,p;if(h||(h={}),u._isYUIModel||(u=new this.model(u)),p=u.get("id"),this._clientIdMap[u.get("clientId")]||l.isValue(p)&&this._idMap[p]){this.fire(a,{error:"Model is already in the list.",model:u,src:"add"});return}return g=c.merge(h,{index:"index"in h?h.index:this._findIndex(u),model:u}),h.silent?this._defAddFn(g):this.fire(o,g),u},_attachList:function(u){u.lists.push(this),u.addTarget(this)},_clear:function(){d.each(this._items,this._detachList,this),this._clientIdMap={},this._idMap={},this._items=[]},_compare:function(u,h){return u<h?-1:u>h?1:0},_detachList:function(u){var h=d.indexOf(u.lists,this);h>-1&&(u.lists.splice(h,1),u.removeTarget(this))},_findIndex:function(u){var h=this._items,g=h.length,p=0,f,m,_;if(!this.comparator||!g)return g;for(_=this.comparator(u);p<g;)m=p+g>>1,f=h[m],this._compare(this.comparator(f),_)<0?p=m+1:g=m;return p},_parse:function(u){return this.parse(u)},_remove:function(u,h){var g,p;if(h||(h={}),l.isNumber(u)?(g=u,u=this.item(g)):g=this.indexOf(u),g===-1||!u){this.fire(a,{error:"Model is not in the list.",index:g,model:u,src:"remove"});return}return p=c.merge(h,{index:g,model:u}),h.silent?this._defRemoveFn(p):this.fire(s,p),u},_sort:function(u,h,g){var p=this._compare(this.comparator(u),this.comparator(h));return p===0?p:g&&g.descending?-p:p},_afterIdChange:function(u){var h=u.newVal,g=u.prevVal,p=u.target;if(l.isValue(g))if(this._idMap[g]===p)delete this._idMap[g];else return;else if(this.indexOf(p)===-1)return;l.isValue(h)&&(this._idMap[h]=p)},_defAddFn:function(u){var h=u.model,g=h.get("id");this._clientIdMap[h.get("clientId")]=h,l.isValue(g)&&(this._idMap[g]=h),this._attachList(h),this._items.splice(u.index,0,h)},_defRemoveFn:function(u){var h=u.model,g=h.get("id");this._detachList(h),delete this._clientIdMap[h.get("clientId")],l.isValue(g)&&delete this._idMap[g],this._items.splice(u.index,1)},_defResetFn:function(u){if(u.src==="sort"){this._items=u.models.concat();return}this._clear(),u.models.length&&this.add(u.models,{silent:!0})}},{NAME:"modelList"}),c.augment(i,c.ArrayList)},"3.17.2",{requires:["array-extras","array-invoke","arraylist","base-build","escape","json-parse","model"]})},970778:function(){YUI.add("model-sync-rest",function(c,b){var t=c.Lang;function l(){}l.CSRF_TOKEN=YUI.Env.CSRF_TOKEN,l.EMULATE_HTTP=!1,l.HTTP_HEADERS={Accept:"application/json","Content-Type":"application/json"},l.HTTP_METHODS={create:"POST",read:"GET",update:"PUT",delete:"DELETE"},l.HTTP_TIMEOUT=3e4,l._NON_ATTRS_CFG=["root","url"],l.prototype={root:"",url:"",initializer:function(d){d||(d={}),"root"in d&&(this.root=d.root||""),"url"in d&&(this.url=d.url||"")},getURL:function(d,o){var e=this.root,a=this.url;return this._isYUIModelList?a?this._substituteURL(a,c.merge(this.getAttrs(),o)):this.model.prototype.root:e&&(d==="create"||this.isNew())?e:a?this._substituteURL(a,c.merge(this.getAttrs(),o)):this._joinURL(this.getAsURL("id")||"")},parseIOResponse:function(d){return d.responseText},serialize:function(d){return c.JSON.stringify(this)},sync:function(d,o,e){o||(o={});var a=this.getURL(d,o),r=l.HTTP_METHODS[d],s=c.merge(l.HTTP_HEADERS,o.headers),n=o.timeout||l.HTTP_TIMEOUT,i=o.csrfToken||l.CSRF_TOKEN,u;r==="POST"||r==="PUT"?u=this.serialize(d):delete s["Content-Type"],l.EMULATE_HTTP&&(r==="PUT"||r==="DELETE")&&(s["X-HTTP-Method-Override"]=r,r="POST"),i&&(r==="POST"||r==="PUT"||r==="DELETE")&&(s["X-CSRF-Token"]=i),this._sendSyncIORequest({action:d,callback:e,entity:u,headers:s,method:r,timeout:n,url:a})},_joinURL:function(d){var o=this.root;return o||d?(d.charAt(0)==="/"&&(d=d.substring(1)),o&&o.charAt(o.length-1)==="/"?o+d+"/":o+"/"+d):""},_parse:function(d){return typeof this.parseIOResponse=="function"&&(d=this.parseIOResponse(d)),this.parse(d)},_sendSyncIORequest:function(d){return c.io(d.url,{arguments:{action:d.action,callback:d.callback,url:d.url},context:this,data:d.entity,headers:d.headers,method:d.method,timeout:d.timeout,on:{start:this._onSyncIOStart,failure:this._onSyncIOFailure,success:this._onSyncIOSuccess,end:this._onSyncIOEnd}})},_substituteURL:function(d,o){if(!d)return"";var e={};return c.Object.each(o,function(a,r){(t.isString(a)||t.isNumber(a))&&(e[r]=encodeURIComponent(a))}),t.sub(d,e)},_onSyncIOEnd:function(d,o){},_onSyncIOFailure:function(d,o,e){var a=e.callback;a&&a({code:o.status,msg:o.statusText},o)},_onSyncIOSuccess:function(d,o,e){var a=e.callback;a&&a(null,o)},_onSyncIOStart:function(d,o){}},c.namespace("ModelSync").REST=l},"3.17.2",{requires:["model","io-base","json-stringify"]})},6580:function(){YUI.add("model",function(c,b){var t=YUI.namespace("Env.Model"),l=c.Lang,d=c.Array,o=c.Object,e="change",a="error",r="load",s="save";function n(){n.superclass.constructor.apply(this,arguments)}c.Model=c.extend(n,c.Base,{idAttribute:"id",_allowAdHocAttrs:!0,_isYUIModel:!0,initializer:function(i){this.changed={},this.lastChange={},this.lists=[]},destroy:function(i,u){var h=this;return typeof i=="function"&&(u=i,i=null),h.onceAfter("destroy",function(){function g(p){p||d.each(h.lists.concat(),function(f){f.remove(h,i)}),u&&u.apply(null,arguments)}i&&(i.remove||i.delete)?h.sync("delete",i,g):g()}),n.superclass.destroy.call(h)},generateClientId:function(){return t.lastId||(t.lastId=0),this.constructor.NAME+"_"+(t.lastId+=1)},getAsHTML:function(i){var u=this.get(i);return c.Escape.html(l.isValue(u)?String(u):"")},getAsURL:function(i){var u=this.get(i);return encodeURIComponent(l.isValue(u)?String(u):"")},isModified:function(){return this.isNew()||!o.isEmpty(this.changed)},isNew:function(){return!l.isValue(this.get("id"))},load:function(i,u){var h=this;return typeof i=="function"&&(u=i,i={}),i||(i={}),h.sync("read",i,function(g,p){var f={options:i,response:p},m;g?(f.error=g,f.src="load",h.fire(a,f)):(h._loadEvent||(h._loadEvent=h.publish(r,{preventable:!1})),m=f.parsed=h._parse(p),h.setAttrs(m,i),h.changed={},h.fire(r,f)),u&&u.apply(null,arguments)}),h},parse:function(i){if(typeof i=="string")try{return c.JSON.parse(i)}catch(u){return this.fire(a,{error:u,response:i,src:"parse"}),null}return i},save:function(i,u){var h=this;return typeof i=="function"&&(u=i,i={}),i||(i={}),h._validate(h.toJSON(),function(g){if(g){u&&u.call(null,g);return}h.sync(h.isNew()?"create":"update",i,function(p,f){var m={options:i,response:f},_;p?(m.error=p,m.src="save",h.fire(a,m)):(h._saveEvent||(h._saveEvent=h.publish(s,{preventable:!1})),f&&(_=m.parsed=h._parse(f),h.setAttrs(_,i)),h.changed={},h.fire(s,m)),u&&u.apply(null,arguments)})}),h},set:function(i,u,h){var g={};return g[i]=u,this.setAttrs(g,h)},setAttrs:function(i,u){var h=this.idAttribute,g,p,f,m,_;u=c.merge(u),_=u._transaction={},h!=="id"&&(i=c.merge(i),o.owns(i,h)?i.id=i[h]:o.owns(i,"id")&&(i[h]=i.id));for(f in i)o.owns(i,f)&&this._setAttr(f,i[f],u);if(!o.isEmpty(_)){g=this.changed,m=this.lastChange={};for(f in _)o.owns(_,f)&&(p=_[f],g[f]=p.newVal,m[f]={newVal:p.newVal,prevVal:p.prevVal,src:p.src||null});u.silent||(this._changeEvent||(this._changeEvent=this.publish(e,{preventable:!1})),u.changed=m,this.fire(e,u))}return this},sync:function(){var i=d(arguments,0,!0).pop();typeof i=="function"&&i()},toJSON:function(){var i=this.getAttrs();return delete i.clientId,delete i.destroyed,delete i.initialized,this.idAttribute!=="id"&&delete i.id,i},undo:function(i,u){var h=this.lastChange,g=this.idAttribute,p={},f;return i||(i=o.keys(h)),d.each(i,function(m){o.owns(h,m)&&(m=m===g?"id":m,f=!0,p[m]=h[m].prevVal)}),f?this.setAttrs(p,u):this},validate:function(i,u){u&&u()},addAttr:function(i,u,h){var g=this.idAttribute,p,f;return g&&i===g&&(p=this._isLazyAttr("id")||this._getAttrCfg("id"),f=u.value===u.defaultValue?null:u.value,l.isValue(f)||(f=p.value===p.defaultValue?null:p.value,l.isValue(f)||(f=l.isValue(u.defaultValue)?u.defaultValue:p.defaultValue)),u.value=f,p.value!==f&&(p.value=f,this._isLazyAttr("id")?this._state.add("id","lazy",p):this._state.add("id","value",f))),n.superclass.addAttr.apply(this,arguments)},_parse:function(i){return this.parse(i)},_validate:function(i,u){var h=this;function g(p){if(l.isValue(p)){h.fire(a,{attributes:i,error:p,src:"validate"}),u(p);return}u()}h.validate.length===1?g(h.validate(i,g)):h.validate(i,g)},_setAttrVal:function(i,u,h,g,p,f){var m=n.superclass._setAttrVal.apply(this,arguments),_=p&&p._transaction,v=f&&f.initializing;return m&&_&&!v&&(_[i]={newVal:this.get(i),prevVal:h,src:p.src||null}),m}},{NAME:"model",ATTRS:{clientId:{valueFn:"generateClientId",readOnly:!0},id:{value:null}}})},"3.17.2",{requires:["base-build","escape","json-parse"]})},317375:function(){YUI.add("node-base",function(c,b){var t=["hasClass","addClass","removeClass","replaceClass","toggleClass"];c.Node.importMethod(c.DOM,t),c.NodeList.importMethod(c.Node.prototype,t);var d=c.Node,l=c.DOM;d.create=function(e,a){return a&&a._node&&(a=a._node),c.one(l.create(e,a))},c.mix(d.prototype,{create:d.create,insert:function(e,a){return this._insert(e,a),this},_insert:function(e,a){var r=this._node,s=null;return typeof a=="number"?a=this._node.childNodes[a]:a&&a._node&&(a=a._node),e&&typeof e!="string"&&(e=e._node||e._nodes||e),s=l.addHTML(r,e,a),s},prepend:function(e){return this.insert(e,0)},append:function(e){return this.insert(e,null)},appendChild:function(e){return d.scrubVal(this._insert(e))},insertBefore:function(e,a){return c.Node.scrubVal(this._insert(e,a))},appendTo:function(e){return c.one(e).append(this),this},setContent:function(e){return this._insert(e,"replace"),this},getContent:function(){var e=this;return e._node.nodeType===11&&(e=e.create("<div/>").append(e.cloneNode(!0))),e.get("innerHTML")}}),c.Node.prototype.setHTML=c.Node.prototype.setContent,c.Node.prototype.getHTML=c.Node.prototype.getContent,c.NodeList.importMethod(c.Node.prototype,["append","insert","appendChild","insertBefore","prepend","setContent","getContent","setHTML","getHTML"]);var d=c.Node,l=c.DOM;d.ATTRS={text:{getter:function(){return l.getText(this._node)},setter:function(e){return l.setText(this._node,e),e}},for:{getter:function(){return l.getAttribute(this._node,"for")},setter:function(e){return l.setAttribute(this._node,"for",e),e}},options:{getter:function(){return this._node.getElementsByTagName("option")}},children:{getter:function(){var e=this._node,a=e.children,r,s,n;if(!a)for(r=e.childNodes,a=[],s=0,n=r.length;s<n;++s)r[s].tagName&&(a[a.length]=r[s]);return c.all(a)}},value:{getter:function(){return l.getValue(this._node)},setter:function(e){return l.setValue(this._node,e),e}}},c.Node.importMethod(c.DOM,["setAttribute","getAttribute"]);var d=c.Node,o=c.NodeList;d.DOM_EVENTS={abort:1,beforeunload:1,blur:1,change:1,click:1,close:1,command:1,contextmenu:1,copy:1,cut:1,dblclick:1,DOMMouseScroll:1,drag:1,dragstart:1,dragenter:1,dragover:1,dragleave:1,dragend:1,drop:1,error:1,focus:1,key:1,keydown:1,keypress:1,keyup:1,load:1,message:1,mousedown:1,mouseenter:1,mouseleave:1,mousemove:1,mousemultiwheel:1,mouseout:1,mouseover:1,mouseup:1,mousewheel:1,orientationchange:1,paste:1,reset:1,resize:1,select:1,selectstart:1,submit:1,scroll:1,textInput:1,unload:1,invalid:1},c.mix(d.DOM_EVENTS,c.Env.evt.plugins),c.augment(d,c.EventTarget),c.mix(d.prototype,{purge:function(e,a){return c.Event.purgeElement(this._node,e,a),this}}),c.mix(c.NodeList.prototype,{_prepEvtArgs:function(e,a,r){var s=c.Array(arguments,0,!0);return s.length<2?s[2]=this._nodes:s.splice(2,0,this._nodes),s[3]=r||this,s},on:function(e,a,r){return c.on.apply(c,this._prepEvtArgs.apply(this,arguments))},once:function(e,a,r){return c.once.apply(c,this._prepEvtArgs.apply(this,arguments))},after:function(e,a,r){return c.after.apply(c,this._prepEvtArgs.apply(this,arguments))},onceAfter:function(e,a,r){return c.onceAfter.apply(c,this._prepEvtArgs.apply(this,arguments))}}),o.importMethod(c.Node.prototype,["detach","detachAll"]),c.mix(c.Node.ATTRS,{offsetHeight:{setter:function(e){return c.DOM.setHeight(this._node,e),e},getter:function(){return this._node.offsetHeight}},offsetWidth:{setter:function(e){return c.DOM.setWidth(this._node,e),e},getter:function(){return this._node.offsetWidth}}}),c.mix(c.Node.prototype,{sizeTo:function(e,a){var r;arguments.length<2&&(r=c.one(e),e=r.get("offsetWidth"),a=r.get("offsetHeight")),this.setAttrs({offsetWidth:e,offsetHeight:a})}}),c.config.doc.documentElement.hasAttribute||(c.Node.prototype.hasAttribute=function(e){return e==="value"&&this.get("value")!==""?!0:!!(this._node.attributes[e]&&this._node.attributes[e].specified)}),c.Node.prototype.focus=function(){try{this._node.focus()}catch{}return this},c.Node.ATTRS.type={setter:function(e){if(e==="hidden")try{this._node.type="hidden"}catch{this._node.style.display="none",this._inputType="hidden"}else try{this._node.type=e}catch{}return e},getter:function(){return this._inputType||this._node.type},_bypassProxy:!0},c.config.doc.createElement("form").elements.nodeType&&(c.Node.ATTRS.elements={getter:function(){return this.all("input, textarea, button, select")}}),c.mix(c.Node.prototype,{_initData:function(){"_data"in this||(this._data={})},getData:function(e){this._initData();var a=this._data,r=a;return arguments.length?e in a?r=a[e]:r=this._getDataAttribute(e):typeof a=="object"&&a!==null&&(r={},c.Object.each(a,function(s,n){r[n]=s}),r=this._getDataAttributes(r)),r},_getDataAttributes:function(e){e=e||{};for(var a=0,r=this._node.attributes,s=r.length,n=this.DATA_PREFIX,i=n.length,u;a<s;)u=r[a].name,u.indexOf(n)===0&&(u=u.substr(i),u in e||(e[u]=this._getDataAttribute(u))),a+=1;return e},_getDataAttribute:function(e){e=this.DATA_PREFIX+e;var a=this._node,r=a.attributes,s=r&&r[e]&&r[e].value;return s},setData:function(e,a){return this._initData(),arguments.length>1?this._data[e]=a:this._data=e,this},clearData:function(e){return"_data"in this&&(typeof e<"u"?delete this._data[e]:delete this._data),this}}),c.mix(c.NodeList.prototype,{getData:function(e){var a=arguments.length?[e]:[];return this._invoke("getData",a,!0)},setData:function(e,a){var r=arguments.length>1?[e,a]:[e];return this._invoke("setData",r)},clearData:function(e){var a=arguments.length?[e]:[];return this._invoke("clearData",[e])}})},"3.17.2",{requires:["event-base","node-core","dom-base","dom-style"]})},577679:function(){YUI.add("node-core",function(c,b){var t=".",l="nodeName",d="nodeType",o="ownerDocument",e="tagName",a="_yuid",r={},s=Array.prototype.slice,n=c.DOM,i=function(m){if(m&&m.closest&&m.closest("[data-yui-ignore-cache]"))return null;if(!this.getDOMNode)return new i(m);if(typeof m=="string"&&(m=i._fromString(m),!m))return null;var _=m.nodeType!==9?m.uniqueID:m[a];_&&i._instances[_]&&i._instances[_]._node!==m&&(m[a]=null),_=_||c.stamp(m),_||(_=c.guid()),this[a]=_,this._node=m,this._stateProxy=m,this._initPlugins&&this._initPlugins()},u=function(m){var _=null;return m&&(_=typeof m=="string"?function(v){return c.Selector.test(v,m)}:function(v){return m(c.one(v))}),_};i.ATTRS={},i.DOM_EVENTS={},i._fromString=function(m){return m&&(m.indexOf("doc")===0?m=c.config.doc:m.indexOf("win")===0?m=c.config.win:m=c.Selector.query(m,null,!0)),m||null},i.NAME="node",i.re_aria=/^(?:role$|aria-)/,i.SHOW_TRANSITION="fadeIn",i.HIDE_TRANSITION="fadeOut",i._instances={},i.getDOMNode=function(m){return m?m.nodeType?m:m._node||null:null},i.scrubVal=function(m,_){return m?(typeof m=="object"||typeof m=="function")&&(d in m||n.isWindow(m)?m=c.one(m):typeof SVGElementInstance<"u"&&m.correspondingElement?m=c.one(m.correspondingUseElement||m.correspondingElement):(m.item&&!m._nodes||m[0]&&m[0][d])&&(m=c.all(m))):typeof m>"u"?m=_:m===null&&(m=null),m},i.addMethod=function(m,_,v){m&&_&&typeof _=="function"&&(i.prototype[m]=function(){var E=s.call(arguments),S=this,y;return E[0]&&E[0]._node&&(E[0]=E[0]._node),E[1]&&E[1]._node&&(E[1]=E[1]._node),E.unshift(S._node),y=_.apply(v||S,E),y&&(y=i.scrubVal(y,S)),typeof y<"u"||(y=S),y})},i.importMethod=function(m,_,v){typeof _=="string"?(v=v||_,i.addMethod(v,m[_],m)):c.Array.each(_,function(E){i.importMethod(m,E)})},i.one=function(m){var _=null,v,E;if(m){if(typeof m=="string"){if(m=i._fromString(m),!m)return null}else if(m.getDOMNode)return m;typeof SVGElementInstance<"u"&&!m.nodeType&&m.correspondingElement&&(m=m.correspondingUseElement||m.correspondingElement),(m.nodeType||c.DOM.isWindow(m))&&(E=m.uniqueID&&m.nodeType!==9?m.uniqueID:m._yuid,_=i._instances[E],v=_?_._node:null,(!_||v&&m!==v)&&(_=new i(m),m.nodeType!=11&&(i._instances[_[a]]=_)))}return _},i.DEFAULT_SETTER=function(m,_){var v=this._stateProxy,E;return m.indexOf(t)>-1?(E=m,m=m.split(t),c.Object.setValue(v,m,_)):typeof v[m]<"u"&&(v[m]=_),_},i.DEFAULT_GETTER=function(m){var _=this._stateProxy,v;return m.indexOf&&m.indexOf(t)>-1?v=c.Object.getValue(_,m.split(t)):typeof _[m]<"u"&&(v=_[m]),v},c.mix(i.prototype,{DATA_PREFIX:"data-",toString:function(){var m=this[a]+": not bound to a node",_=this._node,v,E,S;return _&&(v=_.attributes,E=v&&v.id?_.getAttribute("id"):null,S=v&&v.className?_.getAttribute("className"):null,m=_[l],E&&(m+="#"+E),S&&(m+="."+S.replace(" ",".")),m+=" "+this[a]),m},get:function(m){var _;return this._getAttr?_=this._getAttr(m):_=this._get(m),_?_=i.scrubVal(_,this):_===null&&(_=null),_},_get:function(m){var _=i.ATTRS[m],v;return _&&_.getter?v=_.getter.call(this):i.re_aria.test(m)?v=this._node.getAttribute(m,2):v=i.DEFAULT_GETTER.apply(this,arguments),v},set:function(m,_){var v=i.ATTRS[m];return this._setAttr?this._setAttr.apply(this,arguments):v&&v.setter?v.setter.call(this,_,m):i.re_aria.test(m)?this._node.setAttribute(m,_):i.DEFAULT_SETTER.apply(this,arguments),this},setAttrs:function(m){return this._setAttrs?this._setAttrs(m):c.Object.each(m,function(_,v){this.set(v,_)},this),this},getAttrs:function(m){var _={};return this._getAttrs?this._getAttrs(m):c.Array.each(m,function(v,E){_[v]=this.get(v)},this),_},compareTo:function(m){var _=this._node;return m&&m._node&&(m=m._node),_===m},inDoc:function(m){var _=this._node;return _&&(m=m?m._node||m:_[o],m.documentElement)?n.contains(m.documentElement,_):!1},getById:function(m){var _=this._node,v=n.byId(m,_[o]);return v&&n.contains(_,v)?v=c.one(v):v=null,v},ancestor:function(m,_,v){return arguments.length===2&&(typeof _=="string"||typeof _=="function")&&(v=_),c.one(n.ancestor(this._node,u(m),_,u(v)))},ancestors:function(m,_,v){return arguments.length===2&&(typeof _=="string"||typeof _=="function")&&(v=_),c.all(n.ancestors(this._node,u(m),_,u(v)))},previous:function(m,_){return c.one(n.elementByAxis(this._node,"previousSibling",u(m),_))},next:function(m,_){return c.one(n.elementByAxis(this._node,"nextSibling",u(m),_))},siblings:function(m){return c.all(n.siblings(this._node,u(m)))},one:function(m){return c.one(c.Selector.query(m,this._node,!0))},all:function(m){var _;return this._node&&(_=c.all(c.Selector.query(m,this._node)),_._query=m,_._queryRoot=this._node),_||c.all([])},test:function(m){return c.Selector.test(this._node,m)},remove:function(m){var _=this._node;return _&&_.parentNode&&_.parentNode.removeChild(_),m&&this.destroy(),this},replace:function(m){var _=this._node;return typeof m=="string"&&(m=i.create(m)),_.parentNode.replaceChild(i.getDOMNode(m),_),this},replaceChild:function(m,_){return typeof m=="string"&&(m=n.create(m)),c.one(this._node.replaceChild(i.getDOMNode(m),i.getDOMNode(_)))},destroy:function(m){var _=c.config.doc.uniqueID?"uniqueID":"_yuid",v;this.purge(),this.unplug&&this.unplug(),this.clearData(),m&&c.NodeList.each(this.all("*"),function(E){v=i._instances[E[_]],v?v.destroy():c.Event.purgeElement(E)}),this._node=null,this._stateProxy=null,delete i._instances[this._yuid]},invoke:function(m,_,v,E,S,y){var C=this._node,O;return _&&_._node&&(_=_._node),v&&v._node&&(v=v._node),O=C[m](_,v,E,S,y),i.scrubVal(O,this)},swap:c.config.doc.documentElement.swapNode?function(m){this._node.swapNode(i.getDOMNode(m))}:function(m){m=i.getDOMNode(m);var _=this._node,v=m.parentNode,E=m.nextSibling;return E===_?v.insertBefore(_,m):m===_.nextSibling?v.insertBefore(m,_):(_.parentNode.replaceChild(m,_),n.addHTML(v,_,E)),this},hasMethod:function(m){var _=this._node;return!!(_&&m in _&&typeof _[m]!="unknown"&&(typeof _[m]=="function"||String(_[m]).indexOf("function")===1))},isFragment:function(){return this.get("nodeType")===11},empty:function(){return this.get("childNodes").remove().destroy(!0),this},getDOMNode:function(){return this._node}},!0),c.Node=i,c.one=i.one;var h=function(m){var _=[];m&&(typeof m=="string"?(this._query=m,m=c.Selector.query(m)):m.nodeType||n.isWindow(m)?m=[m]:typeof SVGElementInstance<"u"&&m.correspondingElement?m=[m.correspondingUseElement||m.correspondingElement]:m._node?m=[m._node]:m[0]&&m[0]._node?(c.Array.each(m,function(v){v._node&&_.push(v._node)}),m=_):m=c.Array(m,0,!0)),this._nodes=m||[]};h.NAME="NodeList",h.getDOMNodes=function(m){return m&&m._nodes?m._nodes:m},h.each=function(m,_,v){var E=m._nodes;E&&E.length&&c.Array.each(E,_,v||m)},h.addMethod=function(m,_,v){m&&_&&(h.prototype[m]=function(){var E=[],S=arguments;return c.Array.each(this._nodes,function(y){var C=y.uniqueID&&y.nodeType!==9?"uniqueID":"_yuid",O=c.Node._instances[y[C]],A,I;O||(O=h._getTempNode(y)),A=v||O,I=_.apply(A,S),I!==void 0&&I!==O&&(E[E.length]=I)}),E.length?E:this})},h.importMethod=function(m,_,v){typeof _=="string"?(v=v||_,h.addMethod(_,m[_])):c.Array.each(_,function(E){h.importMethod(m,E)})},h._getTempNode=function(m){var _=h._tempNode;return _||(_=c.Node.create("<div></div>"),h._tempNode=_),_._node=m,_._stateProxy=m,_},c.mix(h.prototype,{_invoke:function(m,_,v){var E=v?[]:this;return this.each(function(S){var y=S[m].apply(S,_);v&&E.push(y)}),E},item:function(m){return c.one((this._nodes||[])[m])},each:function(m,_){var v=this;return c.Array.each(this._nodes,function(E,S){return E=c.one(E),m.call(_||E,E,S,v)}),v},batch:function(m,_){var v=this;return c.Array.each(this._nodes,function(E,S){var y=c.Node._instances[E[a]];return y||(y=h._getTempNode(E)),m.call(_||y,y,S,v)}),v},some:function(m,_){var v=this;return c.Array.some(this._nodes,function(E,S){return E=c.one(E),_=_||E,m.call(_,E,S,v)})},toFrag:function(){return c.one(c.DOM._nl2frag(this._nodes))},indexOf:function(m){return c.Array.indexOf(this._nodes,c.Node.getDOMNode(m))},filter:function(m){return c.all(c.Selector.filter(this._nodes,m))},modulus:function(m,_){_=_||0;var v=[];return h.each(this,function(E,S){S%m===_&&v.push(E)}),c.all(v)},odd:function(){return this.modulus(2,1)},even:function(){return this.modulus(2)},destructor:function(){},refresh:function(){var m,_=this._nodes,v=this._query,E=this._queryRoot;return v&&(E||_&&_[0]&&_[0].ownerDocument&&(E=_[0].ownerDocument),this._nodes=c.Selector.query(v,E)),this},size:function(){return this._nodes.length},isEmpty:function(){return this._nodes.length<1},toString:function(){var m="",_=this[a]+": not bound to any nodes",v=this._nodes,E;return v&&v[0]&&(E=v[0],m+=E[l],E.id&&(m+="#"+E.id),E.className&&(m+="."+E.className.replace(" ",".")),v.length>1&&(m+="...["+v.length+" items]")),m||_},getDOMNodes:function(){return this._nodes}},!0),h.importMethod(c.Node.prototype,["destroy","empty","remove","set"]),h.prototype.get=function(m){var _=[],v=this._nodes,E=!1,S=h._getTempNode,y,C;return v[0]&&(y=c.Node._instances[v[0]._yuid]||S(v[0]),C=y._get(m),C&&C.nodeType&&(E=!0)),c.Array.each(v,function(O){y=c.Node._instances[O._yuid],y||(y=S(O)),C=y._get(m),E||(C=c.Node.scrubVal(C,y)),_.push(C)}),E?c.all(_):_},c.NodeList=h,c.all=function(m){return new h(m)},c.Node.all=c.all;var g=c.NodeList,p=Array.prototype,f={concat:1,pop:0,push:0,shift:0,slice:1,splice:1,unshift:0};c.Object.each(f,function(m,_){g.prototype[_]=function(){for(var v=[],E=0,S,y;typeof(S=arguments[E++])<"u";)v.push(S._node||S._nodes||S);return y=p[_].apply(this._nodes,v),m?y=c.all(y):y=c.Node.scrubVal(y),y}}),c.Array.each(["removeChild","hasChildNodes","cloneNode","hasAttribute","scrollIntoView","getElementsByTagName","focus","blur","submit","reset","select","createCaption"],function(m){c.Node.prototype[m]=function(_,v,E){var S=this.invoke(m,_,v,E);return S}}),c.Node.prototype.removeAttribute=function(m){var _=this._node;return _&&_.removeAttribute(m,0),this},c.Node.importMethod(c.DOM,["contains","setAttribute","getAttribute","wrap","unwrap","generateID"]),c.NodeList.importMethod(c.Node.prototype,["getAttribute","setAttribute","removeAttribute","unwrap","wrap","generateID"])},"3.17.2",{requires:["dom-core","selector"]})},630173:function(){YUI.add("node-event-delegate",function(c,b){c.Node.prototype.delegate=function(t){var l=c.Array(arguments,0,!0),d=c.Lang.isObject(t)&&!c.Lang.isArray(t)?1:2;return l.splice(d,0,this._node),c.delegate.apply(c,l)}},"3.17.2",{requires:["node-base","event-delegate"]})},859077:function(){YUI.add("node-event-simulate",function(c,b){c.Node.prototype.simulate=function(t,l){c.Event.simulate(c.Node.getDOMNode(this),t,l)},c.Node.prototype.simulateGesture=function(t,l,d){c.Event.simulateGesture(this,t,l,d)}},"3.17.2",{requires:["node-base","event-simulate","gesture-simulate"]})},777402:function(){YUI.add("node-focusmanager",function(c,b){var t="activeDescendant",l="id",d="disabled",o="tabIndex",e="focused",a="focusClass",r="circular",s="UI",n="key",i=t+"Change",u="host",h={37:!0,38:!0,39:!0,40:!0},g={a:!0,button:!0,input:!0,object:!0},p=c.Lang,f=c.UA,m=function(){m.superclass.constructor.apply(this,arguments)};m.ATTRS={focused:{value:!1,readOnly:!0},descendants:{getter:function(_){return this.get(u).all(_)}},activeDescendant:{setter:function(_){var v=p.isNumber,E=c.Attribute.INVALID_VALUE,S=this._descendantsMap,y=this._descendants,C,O,A;return v(_)?(C=_,O=C):_ instanceof c.Node&&S?(C=S[_.get(l)],v(C)?O=C:O=E):O=E,y&&(A=y.item(C),A&&A.get("disabled")&&(O=E)),O}},keys:{value:{next:null,previous:null}},focusClass:{},circular:{value:!0}},c.extend(m,c.Plugin.Base,{_stopped:!0,_descendants:null,_descendantsMap:null,_focusedNode:null,_lastNodeIndex:0,_eventHandlers:null,_initDescendants:function(){var _=this.get("descendants"),v={},E=-1,S,y=this.get(t),C,O,A=0;if(p.isUndefined(y)&&(y=-1),_){for(S=_.size(),A=0;A<S;A++)C=_.item(A),E===-1&&!C.get(d)&&(E=A),y<0&&parseInt(C.getAttribute(o,2),10)===0&&(y=A),C&&C.set(o,-1),O=C.get(l),O||(O=c.guid(),C.set(l,O)),v[O]=A;y<0&&(y=0),C=_.item(y),(!C||C.get(d))&&(C=_.item(E),y=E),this._lastNodeIndex=S-1,this._descendants=_,this._descendantsMap=v,this.set(t,y),C&&C.set(o,0)}},_isDescendant:function(_){return _.get(l)in this._descendantsMap},_removeFocusClass:function(){var _=this._focusedNode,v=this.get(a),E;v&&(E=p.isString(v)?v:v.className),_&&E&&_.removeClass(E)},_detachKeyHandler:function(){var _=this._prevKeyHandler,v=this._nextKeyHandler;_&&_.detach(),v&&v.detach()},_preventScroll:function(_){h[_.keyCode]&&this._isDescendant(_.target)&&_.preventDefault()},_fireClick:function(_){var v=_.target,E=v.get("nodeName").toLowerCase();_.keyCode===13&&(!g[E]||E==="a"&&!v.getAttribute("href"))&&v.simulate("click")},_attachKeyHandler:function(){this._detachKeyHandler();var _=this.get("keys.next"),v=this.get("keys.previous"),E=this.get(u),S=this._eventHandlers;v&&(this._prevKeyHandler=c.on(n,c.bind(this._focusPrevious,this),E,v)),_&&(this._nextKeyHandler=c.on(n,c.bind(this._focusNext,this),E,_)),f.opera&&S.push(E.on("keypress",this._preventScroll,this)),f.opera||S.push(E.on("keypress",this._fireClick,this))},_detachEventHandlers:function(){this._detachKeyHandler();var _=this._eventHandlers;_&&(c.Array.each(_,function(v){v.detach()}),this._eventHandlers=null)},_attachEventHandlers:function(){var _=this._descendants,v,E,S;_&&_.size()&&(v=this._eventHandlers||[],E=this.get(u).get("ownerDocument"),v.length===0&&(v.push(E.on("focus",this._onDocFocus,this)),v.push(E.on("mousedown",this._onDocMouseDown,this)),v.push(this.after("keysChange",this._attachKeyHandler)),v.push(this.after("descendantsChange",this._initDescendants)),v.push(this.after(i,this._afterActiveDescendantChange)),S=this.after("focusedChange",c.bind(function(y){y.newVal&&(this._attachKeyHandler(),S.detach())},this)),v.push(S)),this._eventHandlers=v)},_onDocMouseDown:function(_){var v=this.get(u),E=_.target,S=v.contains(E),y,C=function(O){var A=!1;return O.compareTo(v)||(A=this._isDescendant(O)?O:C.call(this,O.get("parentNode"))),A};S&&(y=C.call(this,E),y?E=y:!y&&this.get(e)&&(this._set(e,!1),this._onDocFocus(_))),S&&this._isDescendant(E)?this.focus(E):f.webkit&&this.get(e)&&(!S||S&&!this._isDescendant(E))&&(this._set(e,!1),this._onDocFocus(_))},_onDocFocus:function(_){var v=this._focusTarget||_.target,E=this.get(e),S=this.get(a),y=this._focusedNode,C;this._focusTarget&&(this._focusTarget=null),this.get(u).contains(v)?(C=this._isDescendant(v),!E&&C?E=!0:E&&!C&&(E=!1)):E=!1,S&&(y&&(!y.compareTo(v)||!E)&&this._removeFocusClass(),C&&E&&(S.fn?(v=S.fn(v),v.addClass(S.className)):v.addClass(S),this._focusedNode=v)),this._set(e,E)},_focusNext:function(_,v){var E=v||this.get(t),S;this._isDescendant(_.target)&&E<=this._lastNodeIndex&&(E=E+1,E===this._lastNodeIndex+1&&this.get(r)&&(E=0),S=this._descendants.item(E),S&&(S.get("disabled")?this._focusNext(_,E):this.focus(E))),this._preventScroll(_)},_focusPrevious:function(_,v){var E=v||this.get(t),S;this._isDescendant(_.target)&&E>=0&&(E=E-1,E===-1&&this.get(r)&&(E=this._lastNodeIndex),S=this._descendants.item(E),S&&(S.get("disabled")?this._focusPrevious(_,E):this.focus(E))),this._preventScroll(_)},_afterActiveDescendantChange:function(_){var v=this._descendants.item(_.prevVal);v&&v.set(o,-1),v=this._descendants.item(_.newVal),v&&v.set(o,0)},initializer:function(_){this.start()},destructor:function(){this.stop(),this.get(u).focusManager=null},focus:function(_){p.isUndefined(_)&&(_=this.get(t)),this.set(t,_,{src:s});var v=this._descendants.item(this.get(t));v&&(v.focus(),f.opera&&v.get("nodeName").toLowerCase()==="button"&&(this._focusTarget=v))},blur:function(){var _;this.get(e)&&(_=this._descendants.item(this.get(t)),_&&(_.blur(),this._removeFocusClass()),this._set(e,!1,{src:s}))},start:function(){this._stopped&&(this._initDescendants(),this._attachEventHandlers(),this._stopped=!1)},stop:function(){this._stopped||(this._detachEventHandlers(),this._descendants=null,this._focusedNode=null,this._lastNodeIndex=0,this._stopped=!0)},refresh:function(){this._initDescendants(),this._eventHandlers||this._attachEventHandlers()}}),m.NAME="nodeFocusManager",m.NS="focusManager",c.namespace("Plugin"),c.Plugin.NodeFocusManager=m},"3.17.2",{requires:["attribute","node","plugin","node-event-simulate","event-key","event-focus"]})},687596:function(){YUI.add("node-load",function(c,b){c.Node.prototype._ioComplete=function(t,l,d){var o=d[0],e=d[1],a,r;l&&l.responseText&&(r=l.responseText,o&&(a=c.DOM.create(r),r=c.Selector.query(o,a)),this.setContent(r)),e&&e.call(this,t,l)},c.Node.prototype.load=function(t,l,d){typeof l=="function"&&(d=l,l=null);var o={context:this,on:{complete:this._ioComplete},arguments:[l,d]};return c.io(t,o),this}},"3.17.2",{requires:["node-base","io-base"]})},24717:function(){YUI.add("node-pluginhost",function(c,b){c.Node.plug=function(){var t=c.Array(arguments);return t.unshift(c.Node),c.Plugin.Host.plug.apply(c.Base,t),c.Node},c.Node.unplug=function(){var t=c.Array(arguments);return t.unshift(c.Node),c.Plugin.Host.unplug.apply(c.Base,t),c.Node},c.mix(c.Node,c.Plugin.Host,!1,null,1),c.Object.each(c.Node._instances,function(t){c.Plugin.Host.apply(t)}),c.NodeList.prototype.plug=function(){var t=arguments;return c.NodeList.each(this,function(l){c.Node.prototype.plug.apply(c.one(l),t)}),this},c.NodeList.prototype.unplug=function(){var t=arguments;return c.NodeList.each(this,function(l){c.Node.prototype.unplug.apply(c.one(l),t)}),this}},"3.17.2",{requires:["node-base","pluginhost"]})},402359:function(){YUI.add("node-screen",function(c,b){c.each(["winWidth","winHeight","docWidth","docHeight","docScrollX","docScrollY"],function(t){c.Node.ATTRS[t]={getter:function(){var l=Array.prototype.slice.call(arguments);return l.unshift(c.Node.getDOMNode(this)),c.DOM[t].apply(this,l)}}}),c.Node.ATTRS.scrollLeft={getter:function(){var t=c.Node.getDOMNode(this);return"scrollLeft"in t?t.scrollLeft:c.DOM.docScrollX(t)},setter:function(t){var l=c.Node.getDOMNode(this);l&&("scrollLeft"in l?l.scrollLeft=t:(l.document||l.nodeType===9)&&c.DOM._getWin(l).scrollTo(t,c.DOM.docScrollY(l)))}},c.Node.ATTRS.scrollTop={getter:function(){var t=c.Node.getDOMNode(this);return"scrollTop"in t?t.scrollTop:c.DOM.docScrollY(t)},setter:function(t){var l=c.Node.getDOMNode(this);l&&("scrollTop"in l?l.scrollTop=t:(l.document||l.nodeType===9)&&c.DOM._getWin(l).scrollTo(c.DOM.docScrollX(l),t))}},c.Node.importMethod(c.DOM,["getXY","setXY","getX","setX","getY","setY","swapXY"]),c.Node.ATTRS.region={getter:function(){var t=this.getDOMNode(),l;return t&&!t.tagName&&t.nodeType===9&&(t=t.documentElement),c.DOM.isWindow(t)?l=c.DOM.viewportRegion(t):l=c.DOM.region(t),l}},c.Node.ATTRS.viewportRegion={getter:function(){return c.DOM.viewportRegion(c.Node.getDOMNode(this))}},c.Node.importMethod(c.DOM,"inViewportRegion"),c.Node.prototype.intersect=function(t,l){var d=c.Node.getDOMNode(this);return c.instanceOf(t,c.Node)&&(t=c.Node.getDOMNode(t)),c.DOM.intersect(d,t,l)},c.Node.prototype.inRegion=function(t,l,d){var o=c.Node.getDOMNode(this);return c.instanceOf(t,c.Node)&&(t=c.Node.getDOMNode(t)),c.DOM.inRegion(o,t,l,d)}},"3.17.2",{requires:["dom-screen","node-base"]})},657649:function(){YUI.add("node-style",function(c,b){(function(l){l.mix(l.Node.prototype,{setStyle:function(d,o){return l.DOM.setStyle(this._node,d,o),this},setStyles:function(d){return l.DOM.setStyles(this._node,d),this},getStyle:function(d){return l.DOM.getStyle(this._node,d)},getComputedStyle:function(d){return l.DOM.getComputedStyle(this._node,d)}}),l.NodeList.importMethod(l.Node.prototype,["getStyle","getComputedStyle","setStyle","setStyles"])})(c);var t=c.Node;c.mix(t.prototype,{show:function(l){return l=arguments[arguments.length-1],this.toggleView(!0,l),this},_show:function(){this.removeAttribute("hidden"),this.setStyle("display","")},_isHidden:function(){return this.hasAttribute("hidden")||c.DOM.getComputedStyle(this._node,"display")==="none"},toggleView:function(l,d){return this._toggleView.apply(this,arguments),this},_toggleView:function(l,d){return d=arguments[arguments.length-1],typeof l!="boolean"&&(l=this._isHidden()?1:0),l?this._show():this._hide(),typeof d=="function"&&d.call(this),this},hide:function(l){return l=arguments[arguments.length-1],this.toggleView(!1,l),this},_hide:function(){this.setAttribute("hidden","hidden"),this.setStyle("display","none")}}),c.NodeList.importMethod(c.Node.prototype,["show","hide","toggleView"])},"3.17.2",{requires:["dom-style","node-base"]})},159585:function(){YUI.add("oop",function(c,b){var t=c.Lang,l=c.Array,d=Object.prototype,o="_~yuim~_",e=d.hasOwnProperty,a=d.toString;function r(s,n,i,u,h){if(s&&s[h]&&s!==c)return s[h].call(s,n,i);switch(l.test(s)){case 1:return l[h](s,n,i);case 2:return l[h](c.Array(s,0,!0),n,i);default:return c.Object[h](s,n,i,u)}}c.augment=function(s,n,i,u,h){var g=s.prototype,p=g&&n,f=n.prototype,m=g||s,_,v,E,S,y;return h=h?c.Array(h):[],p&&(v={},E={},S={},_=function(C,O){(i||!(O in g))&&(a.call(C)==="[object Function]"?(S[O]=C,v[O]=E[O]=function(){return y(this,C,arguments)}):v[O]=C)},y=function(C,O,A){for(var I in S)e.call(S,I)&&C[I]===E[I]&&(C[I]=S[I]);return n.apply(C,h),O.apply(C,A)},u?c.Array.each(u,function(C){C in f&&_(f[C],C)}):c.Object.each(f,_,null,!0)),c.mix(m,v||f,i,u),p||n.apply(m,h),s},c.aggregate=function(s,n,i,u){return c.mix(s,n,i,u,0,!0)},c.extend=function(s,n,i,u){(!n||!s)&&c.error("extend failed, verify dependencies");var h=n.prototype,g=c.Object(h);return s.prototype=g,g.constructor=s,s.superclass=h,n!=Object&&h.constructor==d.constructor&&(h.constructor=n),i&&c.mix(g,i,!0),u&&c.mix(s,u,!0),s},c.each=function(s,n,i,u){return r(s,n,i,u,"each")},c.some=function(s,n,i,u){return r(s,n,i,u,"some")},c.clone=function(s,n,i,u,h,g){var p,f,m;if(!t.isObject(s)||c.instanceOf(s,YUI)||s.addEventListener||s.attachEvent)return s;switch(f=g||{},t.type(s)){case"date":return new Date(s);case"regexp":return s;case"function":return s;case"array":p=[];break;default:if(s[o])return f[s[o]];if(m=c.guid(),n)p={};else{var _={};for(var v in s)s.hasOwnProperty(v)&&(_[v]=s[v]);p=c.Object(_)}s[o]=m,f[m]=s}return c.each(s,function(E,S){(S||S===0)&&(!i||i.call(u||this,E,S,this,s)!==!1)&&S!==o&&(S=="prototype"||(this[S]=c.clone(E,n,i,u,h||s,f)))},p),g||(c.Object.each(f,function(E,S){if(E[o])try{delete E[o]}catch{E[o]=null}},this),f=null),p},c.bind=function(s,n){var i=arguments.length>2?c.Array(arguments,2,!0):null;return function(){var u=t.isString(s)?n[s]:s,h=i?i.concat(c.Array(arguments,0,!0)):arguments;return u.apply(n||u,h)}},c.rbind=function(s,n){var i=arguments.length>2?c.Array(arguments,2,!0):null;return function(){var u=t.isString(s)?n[s]:s,h=i?c.Array(arguments,0,!0).concat(i):arguments;return u.apply(n||u,h)}}},"3.17.2",{requires:["yui-base"]})},731254:function(){YUI.add("overlay",function(c,b){c.Overlay=c.Base.create("overlay",c.Widget,[c.WidgetStdMod,c.WidgetPosition,c.WidgetStack,c.WidgetPositionAlign,c.WidgetPositionConstrain])},"3.17.2",{requires:["widget","widget-stdmod","widget-position","widget-position-align","widget-stack","widget-position-constrain"],skinnable:!0})},179758:function(){YUI.add("parallel",function(c,b){c.Parallel=function(t){this.config=t||{},this.results=[],this.context=this.config.context||c,this.total=0,this.finished=0},c.Parallel.prototype={results:null,total:null,finished:null,add:function(t){var l=this,d=l.total;return l.total+=1,function(){l.finished++,l.results[d]=t&&t.apply(l.context,arguments)||(arguments.length===1?arguments[0]:c.Array(arguments)),l.test()}},test:function(){var t=this;t.finished>=t.total&&t.callback&&t.callback.call(t.context,t.results,t.data)},done:function(t,l){this.callback=t,this.data=l,this.test()}}},"3.17.2",{requires:["yui-base"]})},693373:function(){YUI.add("plugin",function(c,b){function t(l){this.hasImpl&&this.hasImpl(c.Plugin.Base)?t.prototype.initializer.apply(this,arguments):t.superclass.constructor.apply(this,arguments)}t.ATTRS={host:{writeOnce:!0}},t.NAME="plugin",t.NS="plugin",c.extend(t,c.Base,{_handles:null,initializer:function(l){this._handles=[]},destructor:function(){if(this._handles)for(var l=0,d=this._handles.length;l<d;l++)this._handles[l].detach()},doBefore:function(l,d,o){var e=this.get("host"),a;return l in e?a=this.beforeHostMethod(l,d,o):e.on&&(a=this.onHostEvent(l,d,o)),a},doAfter:function(l,d,o){var e=this.get("host"),a;return l in e?a=this.afterHostMethod(l,d,o):e.after&&(a=this.afterHostEvent(l,d,o)),a},onHostEvent:function(l,d,o){var e=this.get("host").on(l,d,o||this);return this._handles.push(e),e},onceHostEvent:function(l,d,o){var e=this.get("host").once(l,d,o||this);return this._handles.push(e),e},afterHostEvent:function(l,d,o){var e=this.get("host").after(l,d,o||this);return this._handles.push(e),e},onceAfterHostEvent:function(l,d,o){var e=this.get("host").onceAfter(l,d,o||this);return this._handles.push(e),e},beforeHostMethod:function(l,d,o){var e=c.Do.before(d,this.get("host"),l,o||this);return this._handles.push(e),e},afterHostMethod:function(l,d,o){var e=c.Do.after(d,this.get("host"),l,o||this);return this._handles.push(e),e},toString:function(){return this.constructor.NAME+"["+this.constructor.NS+"]"}}),c.namespace("Plugin").Base=t},"3.17.2",{requires:["base-base"]})},786763:function(){YUI.add("pluginhost-base",function(c,b){var t=c.Lang;function l(){this._plugins={}}l.prototype={plug:function(d,o){var e,a,r;if(t.isArray(d))for(e=0,a=d.length;e<a;e++)this.plug(d[e]);else d&&!t.isFunction(d)&&(o=d.cfg,d=d.fn),d&&d.NS&&(r=d.NS,o=o||{},o.host=this,this.hasPlugin(r)?this[r].setAttrs&&this[r].setAttrs(o):(this[r]=new d(o),this._plugins[r]=d));return this},unplug:function(d){var o=d,e=this._plugins;if(d)t.isFunction(d)&&(o=d.NS,o&&(!e[o]||e[o]!==d)&&(o=null)),o&&(this[o]&&(this[o].destroy&&this[o].destroy(),delete this[o]),e[o]&&delete e[o]);else for(o in this._plugins)this._plugins.hasOwnProperty(o)&&this.unplug(o);return this},hasPlugin:function(d){return this._plugins[d]&&this[d]},_initPlugins:function(d){this._plugins=this._plugins||{},this._initConfigPlugins&&this._initConfigPlugins(d)},_destroyPlugins:function(){this.unplug()}},c.namespace("Plugin").Host=l},"3.17.2",{requires:["yui-base"]})},508996:function(){YUI.add("pluginhost-config",function(c,b){var t=c.Plugin.Host,l=c.Lang;t.prototype._initConfigPlugins=function(d){var o=this._getClasses?this._getClasses():[this.constructor],e=[],a={},r,s,n,i,u;for(s=o.length-1;s>=0;s--)r=o[s],i=r._UNPLUG,i&&c.mix(a,i,!0),n=r._PLUG,n&&c.mix(e,n,!0);for(u in e)e.hasOwnProperty(u)&&(a[u]||this.plug(e[u]));d&&d.plugins&&this.plug(d.plugins)},t.plug=function(d,o,e){var a,r,s,n;if(d!==c.Base)for(d._PLUG=d._PLUG||{},l.isArray(o)||(e&&(o={fn:o,cfg:e}),o=[o]),r=0,s=o.length;r<s;r++)a=o[r],n=a.NAME||a.fn.NAME,d._PLUG[n]=a},t.unplug=function(d,o){var e,a,r,s;if(d!==c.Base)for(d._UNPLUG=d._UNPLUG||{},l.isArray(o)||(o=[o]),a=0,r=o.length;a<r;a++)e=o[a],s=e.NAME,d._PLUG[s]?delete d._PLUG[s]:d._UNPLUG[s]=e}},"3.17.2",{requires:["pluginhost-base"]})},244345:function(){YUI.add("promise",function(c,b){var t=c.Lang,l=[].slice;function d(e){if(!(this instanceof d))return new d(e);var a=new d.Resolver(this);this._resolver=a;try{e.call(this,function(r){a.resolve(r)},function(r){a.reject(r)})}catch(r){a.reject(r)}}c.mix(d.prototype,{then:function(e,a){var r=this.constructor,s=this._resolver;return new r(function(n,i){s._addCallbacks(typeof e=="function"?d._wrap(n,i,e):n,typeof a=="function"?d._wrap(n,i,a):i)})},catch:function(e){return this.then(void 0,e)},getStatus:function(){return this._resolver.getStatus()}}),d._wrap=function(e,a,r){return function(s){var n;try{n=r(s)}catch(i){i instanceof Error?console.error(i.stack):console.error(`Non-error error: Please throw actual errors!
`+i),a(i);return}e(n)}},d.isPromise=function(e){var a;try{a=e.then}catch{}return typeof a=="function"},d.resolve=function(e){return d.isPromise(e)&&e.constructor===this?e:new this(function(a){a(e)})},d.reject=function(e){return new this(function(a,r){r(e)})},d.all=function(e){var a=this;return new a(function(r,s){if(!t.isArray(e)){s(new TypeError("Promise.all expects an array of values or promises"));return}var n=e.length,i=0,u=e.length,h=[];function g(p){return function(f){h[p]=f,n--,n||r(h)}}if(u<1)return r(h);for(;i<u;i++)a.resolve(e[i]).then(g(i),s)})},d.race=function(e){var a=this;return new a(function(r,s){if(!t.isArray(e)){s(new TypeError("Promise.race expects an array of values or promises"));return}for(var n=0,i=e.length;n<i;n++)a.resolve(e[n]).then(r,s)})},c.Promise=d;function o(e){this._callbacks=[],this._errbacks=[],this.promise=e,this._status="pending",this._result=null}c.mix(o.prototype,{fulfill:function(e){this._status==="pending"&&(this._result=e,this._status="fulfilled"),this._status==="fulfilled"&&(this._notify(this._callbacks,this._result),this._callbacks=[],this._errbacks=null)},reject:function(e){this._status==="pending"&&(this._result=e,this._status="rejected"),this._status==="rejected"&&(this._notify(this._errbacks,this._result),this._callbacks=null,this._errbacks=[])},resolve:function(e){var a=this;d.isPromise(e)?e.then(function(r){a.resolve(r)},function(r){a.reject(r)}):this.fulfill(e)},then:function(e,a){return this.promise.then(e,a)},_addCallbacks:function(e,a){var r=this._callbacks,s=this._errbacks,n=this._status,i=this._result;r&&typeof e=="function"&&r.push(e),s&&typeof a=="function"&&s.push(a),n==="fulfilled"?this.fulfill(i):n==="rejected"&&this.reject(i)},getStatus:function(){return this._status},_notify:function(e,a){e.length&&c.soon(function(){var r,s;for(r=0,s=e.length;r<s;++r)e[r](a)})}},!0),c.Promise.Resolver=o,c.when=function(e,a,r){return e=d.resolve(e),a||r?e.then(a,r):e},c.batch=function(){return d.all(l.call(arguments))}},"3.17.2",{requires:["timers"]})},668205:function(){YUI.add("querystring-stringify-simple",function(c,b){var t=c.namespace("QueryString"),l=encodeURIComponent;t.stringify=function(d,o){var e=[],a=!!(o&&o.arrayKey),r,s,n;for(r in d)if(d.hasOwnProperty(r))if(c.Lang.isArray(d[r]))for(s=0,n=d[r].length;s<n;s++)e.push(l(a?r+"[]":r)+"="+l(d[r][s]));else e.push(l(r)+"="+l(d[r]));return e.join("&")}},"3.17.2",{requires:["yui-base"]})},794964:function(){YUI.add("querystring-stringify",function(c,b){var t=c.namespace("QueryString"),l=[],d=c.Lang;t.escape=encodeURIComponent,t.stringify=function(o,e,a){var r,s,n,i,u,h,g=e&&e.sep?e.sep:"&",p=e&&e.eq?e.eq:"=",f=e&&e.arrayKey?e.arrayKey:!1;if(d.isNull(o)||d.isUndefined(o)||d.isFunction(o))return a?t.escape(a)+p:"";if((d.isBoolean(o)||Object.prototype.toString.call(o)==="[object Boolean]")&&(o=+o),d.isNumber(o)||d.isString(o))return t.escape(a)+p+t.escape(o);if(d.isArray(o)){for(h=[],a=f?a+"[]":a,i=o.length,n=0;n<i;n++)h.push(t.stringify(o[n],e,a));return h.join(g)}for(n=l.length-1;n>=0;--n)if(l[n]===o)throw new Error("QueryString.stringify. Cyclical reference");l.push(o),h=[],r=a?a+"[":"",s=a?"]":"";for(n in o)o.hasOwnProperty(n)&&(u=r+n+s,h.push(t.stringify(o[n],e,u)));return l.pop(),h=h.join(g),!h&&a?a+"=":h}},"3.17.2",{requires:["yui-base"]})},18709:function(){YUI.add("queue-promote",function(c,b){c.mix(c.Queue.prototype,{indexOf:function(t){return c.Array.indexOf(this._q,t)},promote:function(t){var l=this.indexOf(t);l>-1&&this._q.unshift(this._q.splice(l,1)[0])},remove:function(t){var l=this.indexOf(t);l>-1&&this._q.splice(l,1)}})},"3.17.2",{requires:["yui-base"]})},566418:function(){YUI.add("range-slider",function(c,b){c.Slider=c.Base.build("slider",c.SliderBase,[c.SliderValueRange,c.ClickableRail])},"3.17.2",{requires:["slider-base","slider-value-range","clickable-rail"]})},717783:function(){YUI.add("resize-base",function(c,b){var t=c.Lang,l=t.isArray,d=t.isBoolean,o=t.isNumber,e=t.isString,a=c.Array,r=t.trim,s=a.indexOf,n=",",i=".",u="",h="{handle}",g=" ",p="active",f="activeHandle",m="activeHandleNode",_="all",v="autoHide",E="border",S="bottom",y="className",C="color",O="defMinHeight",A="defMinWidth",I="handle",D="handles",T="handlesWrapper",B="hidden",N="inner",P="left",x="margin",R="node",w="nodeName",k="none",q="offsetHeight",F="offsetWidth",z="padding",j="parentNode",X="position",J="relative",Q="resize",ie="resizing",ce="right",pe="static",ye="style",Ae="top",Je="width",ke="wrap",Fe="wrapper",Ie="wrapTypes",ht="resize:mouseUp",me="resize:resize",Ee="resize:align",Se="resize:end",lt="resize:start",Lt="t",Pt="tr",Ce="r",je="br",Le="b",ci="bl",Jt="l",Ft="tl",ti=function(){return Array.prototype.slice.call(arguments).join(g)},gi=function(le){return Math.round(parseFloat(le))||0},qt=function(le,_e){return le.getComputedStyle(_e)},Mt=function(le){return I+le.toUpperCase()},Vt=function(le){return le instanceof c.Node},Ti=c.cached(function(le){return le.substring(0,1).toUpperCase()+le.substring(1)}),Ni=c.cached(function(){var le=[],_e=a(arguments,0,!0);return a.each(_e,function(Me,et){et>0&&(Me=Ti(Me)),le.push(Me)}),le.join(u)}),ui=c.ClassNameManager.getClassName,gn=ui(Q),zi=ui(Q,I),Mn=ui(Q,I,p),Zt=ui(Q,I,N),Te=ui(Q,I,N,h),qe=ui(Q,I,h),xt=ui(Q,B,D),Gt=ui(Q,D,Fe),Li=ui(Q,Fe);function mi(){mi.superclass.constructor.apply(this,arguments)}c.mix(mi,{NAME:Q,ATTRS:{activeHandle:{value:null,validator:function(le){return c.Lang.isString(le)||c.Lang.isNull(le)}},activeHandleNode:{value:null,validator:Vt},autoHide:{value:!1,validator:d},defMinHeight:{value:15,validator:o},defMinWidth:{value:15,validator:o},handles:{setter:"_setHandles",value:_},handlesWrapper:{readOnly:!0,setter:c.one,valueFn:"_valueHandlesWrapper"},node:{setter:c.one},resizing:{value:!1,validator:d},wrap:{setter:"_setWrap",value:!1,validator:d},wrapTypes:{readOnly:!0,value:/^canvas|textarea|input|select|button|img|iframe|table|embed$/i},wrapper:{readOnly:!0,valueFn:"_valueWrapper",writeOnce:!0}},RULES:{b:function(le,_e,Me){var et=le.info,$t=le.originalInfo;et.offsetHeight=$t.offsetHeight+Me},l:function(le,_e){var Me=le.info,et=le.originalInfo;Me.left=et.left+_e,Me.offsetWidth=et.offsetWidth-_e},r:function(le,_e){var Me=le.info,et=le.originalInfo;Me.offsetWidth=et.offsetWidth+_e},t:function(le,_e,Me){var et=le.info,$t=le.originalInfo;et.top=$t.top+Me,et.offsetHeight=$t.offsetHeight-Me},tr:function(){this.t.apply(this,arguments),this.r.apply(this,arguments)},bl:function(){this.b.apply(this,arguments),this.l.apply(this,arguments)},br:function(){this.b.apply(this,arguments),this.r.apply(this,arguments)},tl:function(){this.t.apply(this,arguments),this.l.apply(this,arguments)}},capitalize:Ni}),c.Resize=c.extend(mi,c.Base,{ALL_HANDLES:[Lt,Pt,Ce,je,Le,ci,Jt,Ft],REGEX_CHANGE_HEIGHT:/^(t|tr|b|bl|br|tl)$/i,REGEX_CHANGE_LEFT:/^(tl|l|bl)$/i,REGEX_CHANGE_TOP:/^(tl|t|tr)$/i,REGEX_CHANGE_WIDTH:/^(bl|br|l|r|tl|tr)$/i,HANDLES_WRAP_TEMPLATE:'<div class="'+Gt+'"></div>',WRAP_TEMPLATE:'<div class="'+Li+'"></div>',HANDLE_TEMPLATE:'<div class="'+ti(zi,qe)+'"><div class="'+ti(Zt,Te)+'">&nbsp;</div></div>',totalHSurrounding:0,totalVSurrounding:0,nodeSurrounding:null,wrapperSurrounding:null,changeHeightHandles:!1,changeLeftHandles:!1,changeTopHandles:!1,changeWidthHandles:!1,delegate:null,info:null,lastInfo:null,originalInfo:null,initializer:function(){this._eventHandles=[],this.renderer()},renderUI:function(){var le=this;le._renderHandles()},bindUI:function(){var le=this;le._createEvents(),le._bindDD(),le._bindHandle()},syncUI:function(){var le=this;this.get(R).addClass(gn),le._setHideHandlesUI(le.get(v))},destructor:function(){var le=this,_e=le.get(R),Me=le.get(Fe),et=Me.get(j);c.each(le._eventHandles,function($t){$t.detach()}),le._eventHandles.length=0,le.eachHandle(function($t){le.delegate.dd.destroy(),$t.remove(!0)}),le.delegate.destroy(),le.get(ke)&&(le._copyStyles(Me,_e),et&&et.insertBefore(_e,Me),Me.remove(!0)),_e.removeClass(gn),_e.removeClass(xt)},renderer:function(){this.renderUI(),this.bindUI(),this.syncUI()},eachHandle:function(le){var _e=this;c.each(_e.get(D),function(Me,et){var $t=_e.get(Mt(Me));le.apply(_e,[$t,Me,et])})},_bindDD:function(){var le=this;le.delegate=new c.DD.Delegate({bubbleTargets:le,container:le.get(T),dragConfig:{clickPixelThresh:0,clickTimeThresh:0,useShim:!0,move:!1},nodes:i+zi,target:!1}),le._eventHandles.push(le.on("drag:drag",le._handleResizeEvent),le.on("drag:dropmiss",le._handleMouseUpEvent),le.on("drag:end",le._handleResizeEndEvent),le.on("drag:start",le._handleResizeStartEvent))},_bindHandle:function(){var le=this,_e=le.get(Fe);le._eventHandles.push(_e.on("mouseenter",c.bind(le._onWrapperMouseEnter,le)),_e.on("mouseleave",c.bind(le._onWrapperMouseLeave,le)),_e.delegate("mouseenter",c.bind(le._onHandleMouseEnter,le),i+zi),_e.delegate("mouseleave",c.bind(le._onHandleMouseLeave,le),i+zi))},_createEvents:function(){var le=this,_e=function(Me,et){le.publish(Me,{defaultFn:et,queuable:!1,emitFacade:!0,bubbles:!0,prefix:Q})};_e(lt,this._defResizeStartFn),_e(me,this._defResizeFn),_e(Ee,this._defResizeAlignFn),_e(Se,this._defResizeEndFn),_e(ht,this._defMouseUpFn)},_renderHandles:function(){var le=this,_e=le.get(Fe),Me=le.get(T);le.eachHandle(function(et){Me.append(et)}),_e.append(Me)},_buildHandle:function(le){var _e=this;return c.Node.create(c.Lang.sub(_e.HANDLE_TEMPLATE,{handle:le}))},_calcResize:function(){var le=this,_e=le.handle,Me=le.info,et=le.originalInfo,$t=Me.actXY[0]-et.actXY[0],Ki=Me.actXY[1]-et.actXY[1];_e&&c.Resize.RULES[_e]&&c.Resize.RULES[_e](le,$t,Ki)},_checkSize:function(le,_e){var Me=this,et=Me.info,$t=Me.originalInfo,Ki=le===q?Ae:P;et[le]=_e,(Ki===P&&Me.changeLeftHandles||Ki===Ae&&Me.changeTopHandles)&&(et[Ki]=$t[Ki]+$t[le]-_e)},_copyStyles:function(le,_e){var Me=le.getStyle(X).toLowerCase(),et=this._getBoxSurroundingInfo(le),$t;Me===pe&&(Me=J),$t={position:Me,left:qt(le,P),top:qt(le,Ae)},c.mix($t,et.margin),c.mix($t,et.border),_e.setStyles($t),le.setStyles({border:0,margin:0}),_e.sizeTo(le.get(F)+et.totalHBorder,le.get(q)+et.totalVBorder)},_extractHandleName:c.cached(function(le){var _e=le.get(y),Me=_e.match(new RegExp(ui(Q,I,"(\\w{1,2})\\b")));return Me?Me[1]:null}),_getInfo:function(le,_e){var Me=[0,0],et=_e.dragEvent.target,$t=le.getXY(),Ki=$t[0],pi=$t[1],Mi=le.get(q),vn=le.get(F);return _e&&(Me=et.actXY.length?et.actXY:et.lastXY),{actXY:Me,bottom:pi+Mi,left:Ki,offsetHeight:Mi,offsetWidth:vn,right:Ki+vn,top:pi}},_getBoxSurroundingInfo:function(le){var _e={padding:{},margin:{},border:{}};return Vt(le)&&c.each([Ae,ce,S,P],function(Me){var et=Ni(z,Me),$t=Ni(x,Me),Ki=Ni(E,Me,Je),pi=Ni(E,Me,C),Mi=Ni(E,Me,ye);_e.border[pi]=qt(le,pi),_e.border[Mi]=qt(le,Mi),_e.border[Ki]=qt(le,Ki),_e.margin[$t]=qt(le,$t),_e.padding[et]=qt(le,et)}),_e.totalHBorder=gi(_e.border.borderLeftWidth)+gi(_e.border.borderRightWidth),_e.totalHPadding=gi(_e.padding.paddingLeft)+gi(_e.padding.paddingRight),_e.totalVBorder=gi(_e.border.borderBottomWidth)+gi(_e.border.borderTopWidth),_e.totalVPadding=gi(_e.padding.paddingBottom)+gi(_e.padding.paddingTop),_e},_syncUI:function(){var le=this,_e=le.info,Me=le.wrapperSurrounding,et=le.get(Fe),$t=le.get(R);et.sizeTo(_e.offsetWidth,_e.offsetHeight),(le.changeLeftHandles||le.changeTopHandles)&&et.setXY([_e.left,_e.top]),et.compareTo($t)||$t.sizeTo(_e.offsetWidth-Me.totalHBorder,_e.offsetHeight-Me.totalVBorder),c.UA.webkit&&$t.setStyle(Q,k)},_updateChangeHandleInfo:function(le){var _e=this;_e.changeHeightHandles=_e.REGEX_CHANGE_HEIGHT.test(le),_e.changeLeftHandles=_e.REGEX_CHANGE_LEFT.test(le),_e.changeTopHandles=_e.REGEX_CHANGE_TOP.test(le),_e.changeWidthHandles=_e.REGEX_CHANGE_WIDTH.test(le)},_updateInfo:function(le){var _e=this;_e.info=_e._getInfo(_e.get(Fe),le)},_updateSurroundingInfo:function(){var le=this,_e=le.get(R),Me=le.get(Fe),et=le._getBoxSurroundingInfo(_e),$t=le._getBoxSurroundingInfo(Me);le.nodeSurrounding=et,le.wrapperSurrounding=$t,le.totalVSurrounding=et.totalVPadding+$t.totalVBorder,le.totalHSurrounding=et.totalHPadding+$t.totalHBorder},_setActiveHandlesUI:function(le){var _e=this,Me=_e.get(m);Me&&(le?(_e.eachHandle(function(et){et.removeClass(Mn)}),Me.addClass(Mn)):Me.removeClass(Mn))},_setHandles:function(le){var _e=this,Me=[];return l(le)?Me=le:e(le)&&(le.toLowerCase()===_?Me=_e.ALL_HANDLES:c.each(le.split(n),function(et){var $t=r(et);s(_e.ALL_HANDLES,$t)>-1&&Me.push($t)})),Me},_setHideHandlesUI:function(le){var _e=this,Me=_e.get(Fe);_e.get(ie)||(le?Me.addClass(xt):Me.removeClass(xt))},_setWrap:function(le){var _e=this,Me=_e.get(R),et=Me.get(w),$t=_e.get(Ie);return $t.test(et)&&(le=!0),le},_defMouseUpFn:function(){var le=this;le.set(ie,!1)},_defResizeFn:function(le){var _e=this;_e._resize(le)},_resize:function(le){var _e=this;_e._handleResizeAlignEvent(le.dragEvent),_e._syncUI()},_defResizeAlignFn:function(le){var _e=this;_e._resizeAlign(le)},_resizeAlign:function(le){var _e=this,Me,et,$t;_e.lastInfo=_e.info,_e._updateInfo(le),Me=_e.info,_e._calcResize(),_e.con||(et=_e.get(O)+_e.totalVSurrounding,$t=_e.get(A)+_e.totalHSurrounding,Me.offsetHeight<=et&&_e._checkSize(q,et),Me.offsetWidth<=$t&&_e._checkSize(F,$t))},_defResizeEndFn:function(le){var _e=this;_e._resizeEnd(le)},_resizeEnd:function(le){var _e=this,Me=le.dragEvent.target;Me.actXY=[],_e._syncUI(),_e._setActiveHandlesUI(!1),_e.set(f,null),_e.set(m,null),_e.handle=null},_defResizeStartFn:function(le){var _e=this;_e._resizeStart(le)},_resizeStart:function(le){var _e=this,Me=_e.get(Fe);_e.handle=_e.get(f),_e.set(ie,!0),_e._updateSurroundingInfo(),_e.originalInfo=_e._getInfo(Me,le),_e._updateInfo(le)},_handleMouseUpEvent:function(le){this.fire(ht,{dragEvent:le,info:this.info})},_handleResizeEvent:function(le){this.fire(me,{dragEvent:le,info:this.info})},_handleResizeAlignEvent:function(le){this.fire(Ee,{dragEvent:le,info:this.info})},_handleResizeEndEvent:function(le){this.fire(Se,{dragEvent:le,info:this.info})},_handleResizeStartEvent:function(le){this.get(f)||this._setHandleFromNode(le.target.get("node")),this.fire(lt,{dragEvent:le,info:this.info})},_onWrapperMouseEnter:function(){var le=this;le.get(v)&&le._setHideHandlesUI(!1)},_onWrapperMouseLeave:function(){var le=this;le.get(v)&&le._setHideHandlesUI(!0)},_setHandleFromNode:function(le){var _e=this,Me=_e._extractHandleName(le);_e.get(ie)||(_e.set(f,Me),_e.set(m,le),_e._setActiveHandlesUI(!0),_e._updateChangeHandleInfo(Me))},_onHandleMouseEnter:function(le){this._setHandleFromNode(le.currentTarget)},_onHandleMouseLeave:function(){var le=this;le.get(ie)||le._setActiveHandlesUI(!1)},_valueHandlesWrapper:function(){return c.Node.create(this.HANDLES_WRAP_TEMPLATE)},_valueWrapper:function(){var le=this,_e=le.get(R),Me=_e.get(j),et=_e;return le.get(ke)&&(et=c.Node.create(le.WRAP_TEMPLATE),Me&&Me.insertBefore(et,_e),et.append(_e),le._copyStyles(_e,et),_e.setStyles({position:pe,left:0,top:0})),et}}),c.each(c.Resize.prototype.ALL_HANDLES,function(le){c.Resize.ATTRS[Mt(le)]={setter:function(){return this._buildHandle(le)},value:null,writeOnce:!0}})},"3.17.2",{requires:["base","widget","event","oop","dd-drag","dd-delegate","dd-drop"],skinnable:!0})},459649:function(){YUI.add("resize-constrain",function(c,b){var t=c.Lang,l=t.isBoolean,d=t.isNumber,o=t.isString,e=c.Resize.capitalize,a=function(F){return F instanceof c.Node},r=function(F){return parseFloat(F)||0},s="borderBottomWidth",n="borderLeftWidth",i="borderRightWidth",u="borderTopWidth",h="border",g="bottom",p="con",f="constrain",m="host",_="left",v="maxHeight",E="maxWidth",S="minHeight",y="minWidth",C="node",O="offsetHeight",A="offsetWidth",I="preserveRatio",D="region",T="resizeConstrained",B="right",N="tickX",P="tickY",x="top",R="width",w="view",k="viewportRegion";function q(){q.superclass.constructor.apply(this,arguments)}c.mix(q,{NAME:T,NS:p,ATTRS:{constrain:{setter:function(F){return F&&(a(F)||o(F)||F.nodeType)&&(F=c.one(F)),F}},minHeight:{value:15,validator:d},minWidth:{value:15,validator:d},maxHeight:{value:1/0,validator:d},maxWidth:{value:1/0,validator:d},preserveRatio:{value:!1,validator:l},tickX:{value:!1},tickY:{value:!1}}}),c.extend(q,c.Plugin.Base,{constrainSurrounding:null,initializer:function(){var F=this,z=F.get(m);z.delegate.dd.plug(c.Plugin.DDConstrained,{tickX:F.get(N),tickY:F.get(P)}),z.after("resize:align",c.bind(F._handleResizeAlignEvent,F)),z.on("resize:start",c.bind(F._handleResizeStartEvent,F))},_checkConstrain:function(F,z,j){var X=this,J,Q,ie,ce,pe=X.get(m),ye=pe.info,Ae=X.constrainSurrounding.border,Je=X._getConstrainRegion();Je&&(J=ye[F]+ye[j],Q=Je[z]-r(Ae[e(h,z,R)]),J>=Q&&(ye[j]-=J-Q),ie=ye[F],ce=Je[F]+r(Ae[e(h,F,R)]),ie<=ce&&(ye[F]+=ce-ie,ye[j]-=ce-ie))},_checkHeight:function(){var F=this,z=F.get(m),j=z.info,X=F.get(v)+z.totalVSurrounding,J=F.get(S)+z.totalVSurrounding;F._checkConstrain(x,g,O),j.offsetHeight>X&&z._checkSize(O,X),j.offsetHeight<J&&z._checkSize(O,J)},_checkRatio:function(){var F=this,z=F.get(m),j=z.info,X=z.originalInfo,J=X.offsetWidth,Q=X.offsetHeight,ie=X.top,ce=X.left,pe=X.bottom,ye=X.right,Ae=function(){return j.offsetWidth/J},Je=function(){return j.offsetHeight/Q},ke=z.changeHeightHandles,Fe,Ie,ht,me,Ee,Se;F.get(f)&&z.changeHeightHandles&&z.changeWidthHandles&&(ht=F._getConstrainRegion(),Ie=F.constrainSurrounding.border,Fe=ht.bottom-r(Ie[s])-pe,me=ce-(ht.left+r(Ie[n])),Ee=ht.right-r(Ie[i])-ye,Se=ie-(ht.top+r(Ie[u])),z.changeLeftHandles&&z.changeTopHandles?ke=Se<me:z.changeLeftHandles?ke=Fe<me:z.changeTopHandles?ke=Se<Ee:ke=Fe<Ee),ke?(j.offsetWidth=J*Je(),F._checkWidth(),j.offsetHeight=Q*Ae()):(j.offsetHeight=Q*Ae(),F._checkHeight(),j.offsetWidth=J*Je()),z.changeTopHandles&&(j.top=ie+(Q-j.offsetHeight)),z.changeLeftHandles&&(j.left=ce+(J-j.offsetWidth)),c.each(j,function(lt,Lt){d(lt)&&(j[Lt]=Math.round(lt))})},_checkRegion:function(){var F=this,z=F.get(m),j=F._getConstrainRegion();return c.DOM.inRegion(null,j,!0,z.info)},_checkWidth:function(){var F=this,z=F.get(m),j=z.info,X=F.get(E)+z.totalHSurrounding,J=F.get(y)+z.totalHSurrounding;F._checkConstrain(_,B,A),j.offsetWidth<J&&z._checkSize(A,J),j.offsetWidth>X&&z._checkSize(A,X)},_getConstrainRegion:function(){var F=this,z=F.get(m),j=z.get(C),X=F.get(f),J=null;return X&&(X===w?J=j.get(k):a(X)?J=X.get(D):J=X),J},_handleResizeAlignEvent:function(){var F=this,z=F.get(m);F._checkHeight(),F._checkWidth(),F.get(I)&&F._checkRatio(),F.get(f)&&!F._checkRegion()&&(z.info=z.lastInfo)},_handleResizeStartEvent:function(){var F=this,z=F.get(f),j=F.get(m);F.constrainSurrounding=j._getBoxSurroundingInfo(z)}}),c.namespace("Plugin"),c.Plugin.ResizeConstrained=q},"3.17.2",{requires:["plugin","resize-base"]})},119350:function(){YUI.add("resize-plugin",function(c,b){var t=function(l){l.node=c.Widget&&l.host instanceof c.Widget?l.host.get("boundingBox"):l.host,l.host instanceof c.Widget?l.widget=l.host:l.widget=!1,t.superclass.constructor.call(this,l)};t.NAME="resize-plugin",t.NS="resize",t.ATTRS={node:{value:void 0},widget:{value:void 0}},c.extend(t,c.Resize,{initializer:function(l){this.set("node",l.node),this.set("widget",l.widget),this.on("resize:resize",function(d){this._correctDimensions(d)})},_correctDimensions:function(l){var d=this.get("node"),o={old:d.getX(),cur:l.currentTarget.info.left},e={old:d.getY(),cur:l.currentTarget.info.top};this.get("widget")&&this._setWidgetProperties(l,o,e),this._isDifferent(o.old,o.cur)&&d.set("x",o.cur),this._isDifferent(e.old,e.cur)&&d.set("y",e.cur)},_setWidgetProperties:function(l,d,o){var e=this.get("widget"),a=e.get("height"),r=e.get("width"),s=l.currentTarget.info.offsetWidth-l.currentTarget.totalHSurrounding,n=l.currentTarget.info.offsetHeight-l.currentTarget.totalVSurrounding;this._isDifferent(a,n)&&e.set("height",n),this._isDifferent(r,s)&&e.set("width",s),e.hasImpl&&e.hasImpl(c.WidgetPosition)&&(this._isDifferent(e.get("x"),d.cur)&&e.set("x",d.cur),this._isDifferent(e.get("y"),o.cur)&&e.set("y",o.cur))},_isDifferent:function(l,d){var o=!1;return l!==d&&(o=d),o}}),c.namespace("Plugin"),c.Plugin.Resize=t},"3.17.2",{requires:["resize-base","plugin"],optional:["resize-constrain"]})},702843:function(){YUI.add("resize-proxy",function(c,b){var t="activeHandleNode",l="cursor",d="dragCursor",o="host",e="parentNode",a="proxy",r="proxyNode",s="resize",n="resize-proxy",i="wrapper",u=c.ClassNameManager.getClassName,h=u(s,a);function g(){g.superclass.constructor.apply(this,arguments)}c.mix(g,{NAME:n,NS:a,ATTRS:{proxyNode:{setter:c.one,valueFn:function(){return c.Node.create(this.PROXY_TEMPLATE)}}}}),c.extend(g,c.Plugin.Base,{PROXY_TEMPLATE:'<div class="'+h+'"></div>',initializer:function(){var p=this;p.afterHostEvent("resize:start",p._afterResizeStart),p.beforeHostMethod("_resize",p._beforeHostResize),p.afterHostMethod("_resizeEnd",p._afterHostResizeEnd)},destructor:function(){var p=this;p.get(r).remove(!0)},_afterHostResizeEnd:function(p){var f=this,m=p.dragEvent.target;m.actXY=[],f._syncProxyUI(),f.get(r).hide()},_afterResizeStart:function(){var p=this;p._renderProxy()},_beforeHostResize:function(p){var f=this,m=this.get(o);return m._handleResizeAlignEvent(p.dragEvent),f._syncProxyUI(),new c.Do.Prevent},_renderProxy:function(){var p=this,f=this.get(o),m=p.get(r);m.inDoc()||f.get(i).get(e).append(m.hide())},_syncProxyUI:function(){var p=this,f=this.get(o),m=f.info,_=f.get(t),v=p.get(r),E=_.getStyle(l);v.show().setStyle(l,E),f.delegate.dd.set(d,E),v.sizeTo(m.offsetWidth,m.offsetHeight),v.setXY([m.left,m.top])}}),c.namespace("Plugin"),c.Plugin.ResizeProxy=g},"3.17.2",{requires:["plugin","resize-base"]})},370499:function(){YUI.add("selector-css2",function(c,b){var t="parentNode",l="tagName",d="attributes",o="combinator",e="pseudos",a=c.Selector,r={_reRegExpTokens:/([\^\$\?\[\]\*\+\-\.\(\)\|\\])/,SORT_RESULTS:!0,_isXML:function(){var s=c.config.doc.createElement("div").tagName!=="DIV";return s}(),shorthand:{"\\#(-?[_a-z0-9]+[-\\w\\uE000]*)":"[id=$1]","\\.(-?[_a-z]+[-\\w\\uE000]*)":"[className~=$1]"},operators:{"":function(s,n){return c.DOM.getAttribute(s,n)!==""},"~=":"(?:^|\\s+){val}(?:\\s+|$)","|=":"^{val}-?"},pseudos:{"first-child":function(s){return c.DOM._children(s[t])[0]===s}},_bruteQuery:function(s,n,i){var u=[],h=[],g,p=a._tokenize(s),f=p[p.length-1],m=c.DOM._getDoc(n),_,v,E,S,y;if(f){if(v=f.id,E=f.className,S=f.tagName||"*",n.getElementsByTagName)v&&(n.all||n.nodeType===9||c.DOM.inDoc(n))?h=c.DOM.allById(v,n):E?h=n.getElementsByClassName(E):h=n.getElementsByTagName(S);else for(g=[],_=n.firstChild,y=S==="*";_;){for(;_;)_.tagName>"@"&&(y||_.tagName===S)&&h.push(_),g.push(_),_=_.firstChild;for(;g.length>0&&!_;)_=g.pop().nextSibling}h.length&&(u=a._filterNodes(h,p,i))}return u},_filterNodes:function(s,n,i){var u=0,h,g=n.length,p=g-1,f=[],m=s[0],_=m,v=c.Selector.getters,E,S,y,C,O,A,I,D;for(u=0;_=m=s[u++];){p=g-1,C=null;e:for(;_&&_.tagName;){if(y=n[p],I=y.tests,h=I.length,h&&!O){for(;D=I[--h];)if(E=D[1],v[D[0]]?A=v[D[0]](_,D[0]):(A=_[D[0]],D[0]==="tagName"&&!a._isXML&&(A=A.toUpperCase()),typeof A!="string"&&A!==void 0&&A.toString?A=A.toString():A===void 0&&_.getAttribute&&(A=_.getAttribute(D[0],2))),E==="="&&A!==D[2]||typeof E!="string"&&E.test&&!E.test(A)||!E.test&&typeof E=="function"&&!E(_,D[0],D[2])){if(_=_[C])for(;_&&(!_.tagName||y.tagName&&y.tagName!==_.tagName);)_=_[C];continue e}}if(p--,!O&&(S=y.combinator)){for(C=S.axis,_=_[C];_&&!_.tagName;)_=_[C];S.direct&&(C=null)}else{if(f.push(m),i)return f;break}}}return m=_=null,f},combinators:{" ":{axis:"parentNode"},">":{axis:"parentNode",direct:!0},"+":{axis:"previousSibling",direct:!0}},_parsers:[{name:d,re:/^\uE003(-?[a-z]+[\w\-]*)+([~\|\^\$\*!=]=?)?['"]?([^\uE004'"]*)['"]?\uE004/i,fn:function(s,n){var i=s[2]||"",u=a.operators,h=s[3]?s[3].replace(/\\/g,""):"",g;if((s[1]==="id"&&i==="="||s[1]==="className"&&c.config.doc.documentElement.getElementsByClassName&&(i==="~="||i==="="))&&(n.prefilter=s[1],s[3]=h,n[s[1]]=s[1]==="id"?s[3]:h),i in u&&(g=u[i],typeof g=="string"&&(s[3]=h.replace(a._reRegExpTokens,"\\$1"),g=new RegExp(g.replace("{val}",s[3]))),s[2]=g),!n.last||n.prefilter!==s[1])return s.slice(1)}},{name:l,re:/^((?:-?[_a-z]+[\w-]*)|\*)/i,fn:function(s,n){var i=s[1];if(a._isXML||(i=i.toUpperCase()),n.tagName=i,i!=="*"&&(!n.last||n.prefilter))return[l,"=",i];n.prefilter||(n.prefilter="tagName")}},{name:o,re:/^\s*([>+~]|\s)\s*/,fn:function(s,n){}},{name:e,re:/^:([\-\w]+)(?:\uE005['"]?([^\uE005]*)['"]?\uE006)*/i,fn:function(s,n){var i=a[e][s[1]];return i?(s[2]&&(s[2]=s[2].replace(/\\/g,"")),[s[2],i]):!1}}],_getToken:function(s){return{tagName:null,id:null,className:null,attributes:{},combinator:null,tests:[]}},_tokenize:function(s){s=s||"",s=a._parseSelector(c.Lang.trim(s));var n=a._getToken(),i=s,u=[],h=!1,g,p,f,m;e:do for(h=!1,f=0;m=a._parsers[f++];)if(g=m.re.exec(s)){if(m.name!==o&&(n.selector=s),s=s.replace(g[0],""),s.length||(n.last=!0),a._attrFilters[g[1]]&&(g[1]=a._attrFilters[g[1]]),p=m.fn(g,n),p===!1){h=!1;break e}else p&&n.tests.push(p);(!s.length||m.name===o)&&(u.push(n),n=a._getToken(n),m.name===o&&(n.combinator=c.Selector.combinators[g[1]])),h=!0}while(h&&s.length);return(!h||s.length)&&(u=[]),u},_replaceMarkers:function(s){return s=s.replace(/\[/g,"\uE003"),s=s.replace(/\]/g,"\uE004"),s=s.replace(/\(/g,"\uE005"),s=s.replace(/\)/g,"\uE006"),s},_replaceShorthand:function(s){var n=c.Selector.shorthand,i;for(i in n)n.hasOwnProperty(i)&&(s=s.replace(new RegExp(i,"gi"),n[i]));return s},_parseSelector:function(i){var n=c.Selector._replaceSelector(i),i=n.selector;return i=c.Selector._replaceShorthand(i),i=c.Selector._restore("attr",i,n.attrs),i=c.Selector._restore("pseudo",i,n.pseudos),i=c.Selector._replaceMarkers(i),i=c.Selector._restore("esc",i,n.esc),i},_attrFilters:{class:"className",for:"htmlFor"},getters:{href:function(s,n){return c.DOM.getAttribute(s,n)},id:function(s,n){return c.DOM.getId(s)}}};c.mix(c.Selector,r,!0),c.Selector.getters.src=c.Selector.getters.rel=c.Selector.getters.href,c.Selector.useNative&&c.config.doc.querySelector&&(c.Selector.shorthand["\\.(-?[_a-z]+[-\\w]*)"]="[class~=$1]")},"3.17.2",{requires:["selector-native"]})},703885:function(){YUI.add("selector-css3",function(c,b){c.Selector._reNth=/^(?:([\-]?\d*)(n){1}|(odd|even)$)*([\-+]?\d*)$/,c.Selector._getNth=function(t,l,d,o){c.Selector._reNth.test(l);var e=parseInt(RegExp.$1,10),a=RegExp.$2,r=RegExp.$3,s=parseInt(RegExp.$4,10)||0,n=[],i=c.DOM._children(t.parentNode,d),u;if(r?(e=2,u="+",a="n",s=r==="odd"?1:0):isNaN(e)&&(e=a?1:0),e===0)return o&&(s=i.length-s+1),i[s-1]===t;if(e<0&&(o=!!o,e=Math.abs(e)),o){for(var h=i.length-s,g=i.length;h>=0;h-=e)if(h<g&&i[h]===t)return!0}else for(var h=s-1,g=i.length;h<g;h+=e)if(h>=0&&i[h]===t)return!0;return!1},c.mix(c.Selector.pseudos,{root:function(t){return t===t.ownerDocument.documentElement},"nth-child":function(t,l){return c.Selector._getNth(t,l)},"nth-last-child":function(t,l){return c.Selector._getNth(t,l,null,!0)},"nth-of-type":function(t,l){return c.Selector._getNth(t,l,t.tagName)},"nth-last-of-type":function(t,l){return c.Selector._getNth(t,l,t.tagName,!0)},"last-child":function(t){var l=c.DOM._children(t.parentNode);return l[l.length-1]===t},"first-of-type":function(t){return c.DOM._children(t.parentNode,t.tagName)[0]===t},"last-of-type":function(t){var l=c.DOM._children(t.parentNode,t.tagName);return l[l.length-1]===t},"only-child":function(t){var l=c.DOM._children(t.parentNode);return l.length===1&&l[0]===t},"only-of-type":function(t){var l=c.DOM._children(t.parentNode,t.tagName);return l.length===1&&l[0]===t},empty:function(t){return t.childNodes.length===0},not:function(t,l){return!c.Selector.test(t,l)},contains:function(t,l){var d=t.innerText||t.textContent||"";return d.indexOf(l)>-1},checked:function(t){return t.checked===!0||t.selected===!0},enabled:function(t){return t.disabled!==void 0&&!t.disabled},disabled:function(t){return t.disabled}}),c.mix(c.Selector.operators,{"^=":"^{val}","$=":"{val}$","*=":"{val}"}),c.Selector.combinators["~"]={axis:"previousSibling"}},"3.17.2",{requires:["selector-native","selector-css2"]})},383324:function(){YUI.add("selector-native",function(c,b){(function(t){t.namespace("Selector");var l="compareDocumentPosition",d="ownerDocument",o={_types:{esc:{token:"\uE000",re:/\\[:\[\]\(\)#\.\'\>+~"]/gi},attr:{token:"\uE001",re:/(\[[^\]]*\])/g},pseudo:{token:"\uE002",re:/(\([^\)]*\))/g}},useNative:!0,_escapeId:function(e){return e&&(e=e.replace(/([:\[\]\(\)#\.'<>+~"])/g,"\\$1")),e},_compare:"sourceIndex"in t.config.doc.documentElement?function(e,a){var r=e.sourceIndex,s=a.sourceIndex;return r===s?0:r>s?1:-1}:t.config.doc.documentElement[l]?function(e,a){return e[l](a)&4?-1:1}:function(e,a){var r,s,n;return e&&a&&(r=e[d].createRange(),r.setStart(e,0),s=a[d].createRange(),s.setStart(a,0),n=r.compareBoundaryPoints(1,s)),n},_sort:function(e){return e&&(e=t.Array(e,0,!0),e.sort&&e.sort(o._compare)),e},_deDupe:function(e){var a=[],r,s;for(r=0;s=e[r++];)s._found||(a[a.length]=s,s._found=!0);for(r=0;s=a[r++];)s._found=null,s.removeAttribute("_found");return a},query:function(e,a,r,s){a=a||t.config.doc;var n=[],i=t.Selector.useNative&&t.config.doc.querySelector&&!s,u=[[e,a]],h,g,p,f=i?t.Selector._nativeQuery:t.Selector._bruteQuery;if(e&&f){for(!s&&(!i||a.tagName)&&(u=o._splitQueries(e,a)),p=0;h=u[p++];)g=f(h[0],h[1],r),r||(g=t.Array(g,0,!0)),g&&(n=n.concat(g));u.length>1&&(n=o._sort(o._deDupe(n)))}return r?n[0]||null:n},_replaceSelector:function(e){var a=t.Selector._parse("esc",e),r,s;return e=t.Selector._replace("esc",e),s=t.Selector._parse("pseudo",e),e=o._replace("pseudo",e),r=t.Selector._parse("attr",e),e=t.Selector._replace("attr",e),{esc:a,attrs:r,pseudos:s,selector:e}},_restoreSelector:function(e){var a=e.selector;return a=t.Selector._restore("attr",a,e.attrs),a=t.Selector._restore("pseudo",a,e.pseudos),a=t.Selector._restore("esc",a,e.esc),a},_replaceCommas:function(r){var a=t.Selector._replaceSelector(r),r=a.selector;return r&&(r=r.replace(/,/g,"\uE007"),a.selector=r,r=t.Selector._restoreSelector(a)),r},_splitQueries:function(e,a){e.indexOf(",")>-1&&(e=t.Selector._replaceCommas(e));var r=e.split("\uE007"),s=[],n="",i,u,h;if(a)for(a.nodeType===1&&(i=t.Selector._escapeId(t.DOM.getId(a)),i||(i=t.guid(),t.DOM.setId(a,i)),n='[id="'+i+'"] '),u=0,h=r.length;u<h;++u)e=n+r[u],s.push([e,a]);return s},_nativeQuery:function(e,a,r){if((t.UA.webkit||t.UA.opera)&&e.indexOf(":checked")>-1&&t.Selector.pseudos&&t.Selector.pseudos.checked)return t.Selector.query(e,a,r,!0);try{return a["querySelector"+(r?"":"All")](e)}catch{return t.Selector.query(e,a,r,!0)}},filter:function(e,a){var r=[],s,n;if(e&&a)for(s=0;n=e[s++];)t.Selector.test(n,a)&&(r[r.length]=n);return r},test:function(e,a,r){var s=!1,n=!1,i,u,h,g,p,f,m,_,v;if(e&&e.tagName)if(typeof a=="function")s=a.call(e,e);else{for(i=a.split(","),!r&&!t.DOM.inDoc(e)&&(u=e.parentNode,u?r=u:(p=e[d].createDocumentFragment(),p.appendChild(e),r=p,n=!0)),r=r||e[d],f=t.Selector._escapeId(t.DOM.getId(e)),f||(f=t.guid(),t.DOM.setId(e,f)),m=0;v=i[m++];){for(v+='[id="'+f+'"]',g=t.Selector.query(v,r),_=0;h=g[_++];)if(h===e){s=!0;break}if(s)break}n&&p.removeChild(e)}return s},ancestor:function(e,a,r){return t.DOM.ancestor(e,function(s){return t.Selector.test(s,a)},r)},_parse:function(e,a){return a.match(t.Selector._types[e].re)},_replace:function(e,a){var r=t.Selector._types[e];return a.replace(r.re,r.token)},_restore:function(e,a,r){if(r){var s=t.Selector._types[e].token,n,i;for(n=0,i=r.length;n<i;++n)a=a.replace(s,r[n])}return a}};t.mix(t.Selector,o,!0)})(c)},"3.17.2",{requires:["dom-base"]})},723949:function(){YUI.add("selector",function(c,b){},"3.17.2",{requires:["selector-native"]})},977969:function(){YUI.add("shim-plugin",function(c,b){function t(l){this.init(l)}t.CLASS_NAME="yui-node-shim",t.TEMPLATE='<iframe class="'+t.CLASS_NAME+'" frameborder="0" title="Node Stacking Shim"src="javascript:false" tabindex="-1" role="presentation"style="position:absolute; z-index:-1;"></iframe>',t.prototype={init:function(l){this._host=l.host,this.initEvents(),this.insert(),this.sync()},initEvents:function(){this._resizeHandle=this._host.on("resize",this.sync,this)},getShim:function(){return this._shim||(this._shim=c.Node.create(t.TEMPLATE,this._host.get("ownerDocument")))},insert:function(){var l=this._host;this._shim=l.insertBefore(this.getShim(),l.get("firstChild"))},sync:function(){var l=this._shim,d=this._host;l&&l.setAttrs({width:d.getStyle("width"),height:d.getStyle("height")})},destroy:function(){var l=this._shim;l&&l.remove(!0),this._resizeHandle.detach()}},t.NAME="Shim",t.NS="shim",c.namespace("Plugin"),c.Plugin.Shim=t},"3.17.2",{requires:["node-style","node-pluginhost"]})},516774:function(){YUI.add("slider-base",function(c,b){var t=c.Attribute.INVALID_VALUE;function l(){l.superclass.constructor.apply(this,arguments)}c.SliderBase=c.extend(l,c.Widget,{initializer:function(){this.axis=this.get("axis"),this._key={dim:this.axis==="y"?"height":"width",minEdge:this.axis==="y"?"top":"left",maxEdge:this.axis==="y"?"bottom":"right",xyIndex:this.axis==="y"?1:0},this.publish("thumbMove",{defaultFn:this._defThumbMoveFn,queuable:!0})},renderUI:function(){var d=this.get("contentBox");this.rail=this.renderRail(),this._uiSetRailLength(this.get("length")),this.thumb=this.renderThumb(),this.rail.appendChild(this.thumb),d.appendChild(this.rail),d.addClass(this.getClassName(this.axis))},renderRail:function(){var d=this.getClassName("rail","cap",this._key.minEdge),o=this.getClassName("rail","cap",this._key.maxEdge);return c.Node.create(c.Lang.sub(this.RAIL_TEMPLATE,{railClass:this.getClassName("rail"),railMinCapClass:d,railMaxCapClass:o}))},_uiSetRailLength:function(d){this.rail.setStyle(this._key.dim,d)},renderThumb:function(){this._initThumbUrl();var d=this.get("thumbUrl");return c.Node.create(c.Lang.sub(this.THUMB_TEMPLATE,{thumbClass:this.getClassName("thumb"),thumbShadowClass:this.getClassName("thumb","shadow"),thumbImageClass:this.getClassName("thumb","image"),thumbShadowUrl:d,thumbImageUrl:d,thumbAriaLabelId:this.getClassName("label",c.guid())}))},_onThumbClick:function(d){this.thumb.focus()},bindUI:function(){var d=this.get("boundingBox"),o=c.UA.opera?"press:":"down:",e=o+"38,40,33,34,35,36",a=o+"37,39",r=o+"37+meta,39+meta";d.on("key",this._onDirectionKey,e,this),d.on("key",this._onLeftRightKey,a,this),d.on("key",this._onLeftRightKeyMeta,r,this),this.thumb.on("click",this._onThumbClick,this),this._bindThumbDD(),this._bindValueLogic(),this.after("disabledChange",this._afterDisabledChange),this.after("lengthChange",this._afterLengthChange)},_incrMinor:function(){this.set("value",this.get("value")+this.get("minorStep"))},_decrMinor:function(){this.set("value",this.get("value")-this.get("minorStep"))},_incrMajor:function(){this.set("value",this.get("value")+this.get("majorStep"))},_decrMajor:function(){this.set("value",this.get("value")-this.get("majorStep"))},_setToMin:function(d){this.set("value",this.get("min"))},_setToMax:function(d){this.set("value",this.get("max"))},_onDirectionKey:function(d){if(d.preventDefault(),this.get("disabled")===!1)switch(d.charCode){case 38:this._incrMinor();break;case 40:this._decrMinor();break;case 36:this._setToMin();break;case 35:this._setToMax();break;case 33:this._incrMajor();break;case 34:this._decrMajor();break}},_onLeftRightKey:function(d){if(d.preventDefault(),this.get("disabled")===!1)switch(d.charCode){case 37:this._decrMinor();break;case 39:this._incrMinor();break}},_onLeftRightKeyMeta:function(d){if(d.preventDefault(),this.get("disabled")===!1)switch(d.charCode){case 37:this._setToMin();break;case 39:this._setToMax();break}},_bindThumbDD:function(){var d={constrain:this.rail};d["stick"+this.axis.toUpperCase()]=!0,this._dd=new c.DD.Drag({node:this.thumb,bubble:!1,on:{"drag:start":c.bind(this._onDragStart,this)},after:{"drag:drag":c.bind(this._afterDrag,this),"drag:end":c.bind(this._afterDragEnd,this)}}),this._dd.plug(c.Plugin.DDConstrained,d)},_bindValueLogic:function(){},_uiMoveThumb:function(d,o){this.thumb&&(this.thumb.setStyle(this._key.minEdge,d+"px"),o||(o={}),o.offset=d,this.fire("thumbMove",o))},_onDragStart:function(d){this.fire("slideStart",{ddEvent:d,originEvent:d})},_afterDrag:function(d){var o=d.info.xy[this._key.xyIndex],e=d.target.con._regionCache[this._key.minEdge];this.fire("thumbMove",{offset:o-e,ddEvent:d,originEvent:d})},_afterDragEnd:function(d){this.fire("slideEnd",{ddEvent:d,originEvent:d})},_afterDisabledChange:function(d){this._dd.set("lock",d.newVal)},_afterLengthChange:function(d){this.get("rendered")&&(this._uiSetRailLength(d.newVal),this.syncUI())},syncUI:function(){this._dd.con.resetCache(),this._syncThumbPosition(),this.thumb.set("aria-valuemin",this.get("min")),this.thumb.set("aria-valuemax",this.get("max")),this._dd.set("lock",this.get("disabled"))},_syncThumbPosition:function(){},_setAxis:function(d){return d=(d+"").toLowerCase(),d==="x"||d==="y"?d:t},_setLength:function(d){d=(d+"").toLowerCase();var o=parseFloat(d,10),e=d.replace(/[\d\.\-]/g,"")||this.DEF_UNIT;return o>0?o+e:t},_initThumbUrl:function(){if(!this.get("thumbUrl")){var d=this.getSkinName()||"sam",o=c.config.base;o.indexOf("http://yui.yahooapis.com/combo")===0&&(o="http://yui.yahooapis.com/"+c.version+"/build/"),this.set("thumbUrl",o+"slider-base/assets/skins/"+d+"/thumb-"+this.axis+".png")}},BOUNDING_TEMPLATE:"<span></span>",CONTENT_TEMPLATE:"<span></span>",RAIL_TEMPLATE:'<span class="{railClass}"><span class="{railMinCapClass}"></span><span class="{railMaxCapClass}"></span></span>',THUMB_TEMPLATE:'<span class="{thumbClass}" aria-labelledby="{thumbAriaLabelId}" aria-valuetext="" aria-valuemax="" aria-valuemin="" aria-valuenow="" role="slider" tabindex="0"><img src="{thumbShadowUrl}" alt="Slider thumb shadow" class="{thumbShadowClass}"><img src="{thumbImageUrl}" alt="Slider thumb" class="{thumbImageClass}"></span>'},{NAME:"sliderBase",ATTRS:{axis:{value:"x",writeOnce:!0,setter:"_setAxis",lazyAdd:!1},length:{value:"150px",setter:"_setLength"},thumbUrl:{value:null,validator:c.Lang.isString}}})},"3.17.2",{requires:["widget","dd-constrain","event-key"],skinnable:!0})},769688:function(){YUI.add("slider-value-range",function(c,b){var t="min",l="max",d="value",o=Math.round;function e(){this._initSliderValueRange()}c.SliderValueRange=c.mix(e,{prototype:{_factor:1,_initSliderValueRange:function(){},_bindValueLogic:function(){this.after({minChange:this._afterMinChange,maxChange:this._afterMaxChange,valueChange:this._afterValueChange})},_syncThumbPosition:function(){this._calculateFactor(),this._setPosition(this.get(d))},_calculateFactor:function(){var a=this.get("length"),r=this.thumb.getStyle(this._key.dim),s=this.get(t),n=this.get(l);a=parseFloat(a)||150,r=parseFloat(r)||15,this._factor=(n-s)/(a-r)},_defThumbMoveFn:function(a){a.source!=="set"&&this.set(d,this._offsetToValue(a.offset))},_offsetToValue:function(a){var r=o(a*this._factor)+this.get(t);return o(this._nearestValue(r))},_valueToOffset:function(a){var r=o((a-this.get(t))/this._factor);return r},getValue:function(){return this.get(d)},setValue:function(a){return this.set(d,a)},_afterMinChange:function(a){this._verifyValue(),this._syncThumbPosition()},_afterMaxChange:function(a){this._verifyValue(),this._syncThumbPosition()},_verifyValue:function(){var a=this.get(d),r=this._nearestValue(a);a!==r&&this.set(d,r)},_afterValueChange:function(a){var r=a.newVal;this._setPosition(r,{source:"set"})},_setPosition:function(a,r){this._uiMoveThumb(this._valueToOffset(a),r),this.thumb.set("aria-valuenow",a),this.thumb.set("aria-valuetext",a)},_validateNewMin:function(a){return c.Lang.isNumber(a)},_validateNewMax:function(a){return c.Lang.isNumber(a)},_setNewValue:function(a){return c.Lang.isNumber(a)?o(this._nearestValue(a)):c.Attribute.INVALID_VALUE},_nearestValue:function(a){var r=this.get(t),s=this.get(l),n;return n=s>r?s:r,r=s>r?r:s,s=n,a<r?r:a>s?s:a}},ATTRS:{min:{value:0,validator:"_validateNewMin"},max:{value:100,validator:"_validateNewMax"},minorStep:{value:1},majorStep:{value:10},value:{value:0,setter:"_setNewValue"}}},!0)},"3.17.2",{requires:["slider-base"]})},406129:function(){YUI.add("swfdetect",function(c,b){var t=0,l=c.UA,d=c.Lang,o="ShockwaveFlash",e,a,r,s,n;function i(h){return parseInt(h,10)}function u(h){d.isNumber(i(h[0]))&&(l.flashMajor=h[0]),d.isNumber(i(h[1]))&&(l.flashMinor=h[1]),d.isNumber(i(h[2]))&&(l.flashRev=h[2])}if(l.gecko||l.webkit||l.opera)(e=navigator.mimeTypes["application/x-shockwave-flash"])&&(a=e.enabledPlugin)&&(r=a.description.replace(/\s[rd]/g,".").replace(/[A-Za-z\s]+/g,"").split("."),u(r));else if(l.ie){try{s=new ActiveXObject(o+"."+o+".6"),s.AllowScriptAccess="always"}catch{s!==null&&(t=6)}if(t===0)try{n=new ActiveXObject(o+"."+o),r=n.GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(","),u(r)}catch{}}c.SWFDetect={getFlashVersion:function(){return String(l.flashMajor)+"."+String(l.flashMinor)+"."+String(l.flashRev)},isFlashVersionAtLeast:function(h,g,p){var f=i(l.flashMajor),m=i(l.flashMinor),_=i(l.flashRev);return h=i(h||0),g=i(g||0),p=i(p||0),h===f?g===m?p<=_:g<m:h<f}}},"3.17.2",{requires:["yui-base"]})},860774:function(){YUI.add("text-accentfold",function(c,b){var t=c.Array,l=c.Text,d=l.Data.AccentFold,o={canFold:function(e){var a;for(a in d)if(d.hasOwnProperty(a)&&e.search(d[a])!==-1)return!0;return!1},compare:function(e,a,r){var s=o.fold(e),n=o.fold(a);return r?!!r(s,n):s===n},filter:function(e,a){return t.filter(e,function(r){return a(o.fold(r))})},fold:function(e){return c.Lang.isArray(e)?t.map(e,o.fold):(e=e.toLowerCase(),c.Object.each(d,function(a,r){e=e.replace(a,r)}),e)}};l.AccentFold=o},"3.17.2",{requires:["array-extras","text-data-accentfold"]})},687891:function(){YUI.add("text-data-accentfold",function(c,b){c.namespace("Text.Data").AccentFold={0:/[\u2070\u2080\u24EA\uFF10]/gi,1:/[\u00B9\u2081\u2460\uFF11]/gi,2:/[\u00B2\u2082\u2461\uFF12]/gi,3:/[\u00B3\u2083\u2462\uFF13]/gi,4:/[\u2074\u2084\u2463\uFF14]/gi,5:/[\u2075\u2085\u2464\uFF15]/gi,6:/[\u2076\u2086\u2465\uFF16]/gi,7:/[\u2077\u2087\u2466\uFF17]/gi,8:/[\u2078\u2088\u2467\uFF18]/gi,9:/[\u2079\u2089\u2468\uFF19]/gi,a:/[\u00AA\u00E0-\u00E5\u0101\u0103\u0105\u01CE\u01DF\u01E1\u01FB\u0201\u0203\u0227\u1D43\u1E01\u1E9A\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u24D0\uFF41]/gi,b:/[\u1D47\u1E03\u1E05\u1E07\u24D1\uFF42]/gi,c:/[\u00E7\u0107\u0109\u010B\u010D\u1D9C\u1E09\u24D2\uFF43]/gi,d:/[\u010F\u1D48\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u217E\u24D3\uFF44]/gi,e:/[\u00E8-\u00EB\u0113\u0115\u0117\u0119\u011B\u0205\u0207\u0229\u1D49\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u2091\u212F\u24D4\uFF45]/gi,f:/[\u1DA0\u1E1F\u24D5\uFF46]/gi,g:/[\u011D\u011F\u0121\u0123\u01E7\u01F5\u1D4D\u1E21\u210A\u24D6\uFF47]/gi,h:/[\u0125\u021F\u02B0\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E96\u210E\u24D7\uFF48]/gi,i:/[\u00EC-\u00EF\u0129\u012B\u012D\u012F\u0133\u01D0\u0209\u020B\u1D62\u1E2D\u1E2F\u1EC9\u1ECB\u2071\u2139\u2170\u24D8\uFF49]/gi,j:/[\u0135\u01F0\u02B2\u24D9\u2C7C\uFF4A]/gi,k:/[\u0137\u01E9\u1D4F\u1E31\u1E33\u1E35\u24DA\uFF4B]/gi,l:/[\u013A\u013C\u013E\u0140\u01C9\u02E1\u1E37\u1E39\u1E3B\u1E3D\u2113\u217C\u24DB\uFF4C]/gi,m:/[\u1D50\u1E3F\u1E41\u1E43\u217F\u24DC\uFF4D]/gi,n:/[\u00F1\u0144\u0146\u0148\u01F9\u1E45\u1E47\u1E49\u1E4B\u207F\u24DD\uFF4E]/gi,o:/[\u00BA\u00F2-\u00F6\u014D\u014F\u0151\u01A1\u01D2\u01EB\u01ED\u020D\u020F\u022B\u022D\u022F\u0231\u1D52\u1E4D\u1E4F\u1E51\u1E53\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u2092\u2134\u24DE\uFF4F]/gi,p:/[\u1D56\u1E55\u1E57\u24DF\uFF50]/gi,q:/[\u02A0\u24E0\uFF51]/gi,r:/[\u0155\u0157\u0159\u0211\u0213\u02B3\u1D63\u1E59\u1E5B\u1E5D\u1E5F\u24E1\uFF52]/gi,s:/[\u015B\u015D\u015F\u0161\u017F\u0219\u02E2\u1E61\u1E63\u1E65\u1E67\u1E69\u1E9B\u24E2\uFF53]/gi,t:/[\u0163\u0165\u021B\u1D57\u1E6B\u1E6D\u1E6F\u1E71\u1E97\u24E3\uFF54]/gi,u:/[\u00F9-\u00FC\u0169\u016B\u016D\u016F\u0171\u0173\u01B0\u01D4\u01D6\u01D8\u01DA\u01DC\u0215\u0217\u1D58\u1D64\u1E73\u1E75\u1E77\u1E79\u1E7B\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u24E4\uFF55]/gi,v:/[\u1D5B\u1D65\u1E7D\u1E7F\u2174\u24E5\uFF56]/gi,w:/[\u0175\u02B7\u1E81\u1E83\u1E85\u1E87\u1E89\u1E98\u24E6\uFF57]/gi,x:/[\u02E3\u1E8B\u1E8D\u2093\u2179\u24E7\uFF58]/gi,y:/[\u00FD\u00FF\u0177\u0233\u02B8\u1E8F\u1E99\u1EF3\u1EF5\u1EF7\u1EF9\u24E8\uFF59]/gi,z:/[\u017A\u017C\u017E\u1DBB\u1E91\u1E93\u1E95\u24E9\uFF5A]/gi}},"3.17.2",{requires:["yui-base"]})},202277:function(){YUI.add("text-data-wordbreak",function(c,b){c.namespace("Text.Data").WordBreak={aletter:"[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F3\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u10A0-\u10C5\u10D0-\u10FA\u10FC\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1A00-\u1A16\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BC0-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u24B6-\u24E9\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u303B\u303C\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790\uA791\uA7A0-\uA7A9\uA7FA-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]",midnumlet:"['\\.\u2018\u2019\u2024\uFE52\uFF07\uFF0E]",midletter:"[:\xB7\xB7\u05F4\u2027\uFE13\uFE55\uFF1A]",midnum:"[,;;\u0589\u060C\u060D\u066C\u07F8\u2044\uFE10\uFE14\uFE50\uFE54\uFF0C\uFF1B]",numeric:"[0-9\u0660-\u0669\u066B\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9]",cr:"\\r",lf:"\\n",newline:"[\v\f\x85\u2028\u2029]",extend:"[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0900-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C01-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C82\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D02\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B6-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAA\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2\u1DC0-\u1DE6\u1DFC-\u1DFF\u200C\u200D\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA67C\uA67D\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE26\uFF9E\uFF9F]",format:"[\xAD\u0600-\u0603\u06DD\u070F\u17B4\u17B5\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\uFEFF\uFFF9-\uFFFB]",katakana:"[\u3031-\u3035\u309B\u309C\u30A0-\u30FA\u30FC-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\uFF66-\uFF9D]",extendnumlet:"[_\u203F\u2040\u2054\uFE33\uFE34\uFE4D-\uFE4F\uFF3F]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}\xA1\xAB\xB7\xBB\xBF;\xB7\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1361-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u3008\u3009\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30\u2E31\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]"}},"3.17.2",{requires:["yui-base"]})},658071:function(){YUI.add("text-wordbreak",function(c,b){var t=c.Text,l=t.Data.WordBreak,d=0,o=1,e=2,a=3,r=4,s=5,n=6,i=7,u=8,h=9,g=10,p=11,f=12,m=[new RegExp(l.aletter),new RegExp(l.midnumlet),new RegExp(l.midletter),new RegExp(l.midnum),new RegExp(l.numeric),new RegExp(l.cr),new RegExp(l.lf),new RegExp(l.newline),new RegExp(l.extend),new RegExp(l.format),new RegExp(l.katakana),new RegExp(l.extendnumlet)],_="",v=new RegExp("^"+l.punctuation+"$"),E=/\s/,S={getWords:function(y,C){var O=0,A=S._classify(y),I=A.length,D=[],T=[],B,N,P;for(C||(C={}),C.ignoreCase&&(y=y.toLowerCase()),N=C.includePunctuation,P=C.includeWhitespace;O<I;++O)B=y.charAt(O),D.push(B),S._isWordBoundary(A,O)&&(D=D.join(_),D&&(P||!E.test(D))&&(N||!v.test(D))&&T.push(D),D=[]);return T},getUniqueWords:function(y,C){return c.Array.unique(S.getWords(y,C))},isWordBoundary:function(y,C){return S._isWordBoundary(S._classify(y),C)},_classify:function(y){for(var C,O=[],A=0,I,D,T=y.length,B=m.length,N;A<T;++A){for(C=y.charAt(A),N=f,I=0;I<B;++I)if(D=m[I],D&&D.test(C)){N=I;break}O.push(N)}return O},_isWordBoundary:function(y,C){var O,A=y[C],I=y[C+1],D;return C<0||C>y.length-1&&C!==0||A===d&&I===d||(D=y[C+2],A===d&&(I===e||I===o)&&D===d)||(O=y[C-1],(A===e||A===o)&&I===d&&O===d)||(A===r||A===d)&&(I===r||I===d)||(A===a||A===o)&&I===r&&O===r||A===r&&(I===a||I===o)&&D===r||A===u||A===h||O===u||O===h||I===u||I===h||A===s&&I===n?!1:A===i||A===s||A===n||I===i||I===s||I===n?!0:!(A===g&&I===g||I===p&&(A===d||A===r||A===g||A===p)||A===p&&(I===d||I===r||I===g))}};t.WordBreak=S},"3.17.2",{requires:["array-extras","text-data-wordbreak"]})},287917:function(c){YUI.add("timers",function(b,t){var l={},d=b.config.global;function o(S){return r}l.exports=r;function r(S){this.capacity=this.snap(S),this.length=0,this.front=0,this.initialize()}r.prototype.push=function(S){var y=this.length;this.capacity<=y&&this.grow(this.snap(this.capacity*this.growFactor));var C=this.front+y&this.capacity-1;this[C]=S,this.length=y+1},r.prototype.shift=function(){var S=this.front,y=this[S];return this[S]=void 0,this.front=S+1&this.capacity-1,this.length--,y},r.prototype.grow=function(S){var y=this.front,C=this.capacity,O=new Array(C),A=this.length;if(e(this,0,O,0,C),this.capacity=S,this.initialize(),this.front=0,y+A<=C)e(O,y,this,0,A);else{var I=A-(y+A&C-1);e(O,y,this,0,I),e(O,0,this,I,A-I)}},r.prototype.initialize=function(){for(var S=this.capacity,y=0;y<S;++y)this[y]=void 0},r.prototype.snap=function(S){return typeof S!="number"?this.minCapacity:a(Math.min(this.maxCapacity,Math.max(this.minCapacity,S)))},r.prototype.maxCapacity=1<<30|0,r.prototype.minCapacity=16,r.prototype.growFactor=8;function e(S,y,C,O,A){for(var I=0;I<A;++I)C[I+O]=S[I+y]}function a(S){return S=S>>>0,S=S-1,S=S|S>>1,S=S|S>>2,S=S|S>>4,S=S|S>>8,S=S|S>>16,S+1}var r=o("./queue"),s=new r(1024),n=!1,i=void 0,u=typeof setImmediate=="function",h,g=d.process,p=!!g&&{}.toString.call(g)==="[object process]";function f(){for(;s.length>0;){var S=s.shift();try{S.call()}catch(y){if(p)throw i(),y;setTimeout(function(){throw y},0)}}n=!1}if(p)i=function(){var S=g.domain;S&&(h=h||o("domain"),h.active=g.domain=null),n&&u?setImmediate(f):g.nextTick(f),S&&(h.active=g.domain=S)};else if(u)i=function(){setImmediate(f)};else if(typeof MessageChannel<"u"){var m=new MessageChannel;m.port1.onmessage=function(){i=_,m.port1.onmessage=f,f()};var _=function(){m.port2.postMessage(0)};i=function(){setTimeout(f,0),_()}}else i=function(){setTimeout(f,0)};function v(S){p&&g.domain&&(S=g.domain.bind(S)),s.push(S),n||(i(),n=!0)}l.exports=v;function E(S){var y;return E._asynchronizer(function(){y||S()}),{cancel:function(){y=1}}}E._asynchronizer=v,E._impl="asap",b.soon=E},"3.17.2",{requires:["yui-base"]})},165221:function(){YUI.add("transition",function(c,b){var t="",l="",d=c.config.doc,o="documentElement",e=d[o].style,a="transition",r="transitionProperty",s,n,i,u,h,g,p={},f=["Webkit","Moz"],m={Webkit:"webkitTransitionEnd"},_=function(){this.init.apply(this,arguments)};_._TRANSFORM="transform",_._toCamel=function(E){return E=E.replace(/-([a-z])/gi,function(S,y){return y.toUpperCase()}),E},_._toHyphen=function(E){return E=E.replace(/([A-Z]?)([a-z]+)([A-Z]?)/g,function(S,y,C,O){var A=(y?"-"+y.toLowerCase():"")+C;return O&&(A+="-"+O.toLowerCase()),A}),E},_.SHOW_TRANSITION="fadeIn",_.HIDE_TRANSITION="fadeOut",_.useNative=!1,"transition"in e&&"transitionProperty"in e&&"transitionDuration"in e&&"transitionTimingFunction"in e&&"transitionDelay"in e?(_.useNative=!0,_.supported=!0):c.Array.each(f,function(E){var S=E+"Transition";S in d[o].style&&(t=E,l=_._toHyphen(E)+"-",_.useNative=!0,_.supported=!0,_._VENDOR_PREFIX=E)}),typeof e.transform>"u"&&c.Array.each(f,function(E){var S=E+"Transform";typeof e[S]<"u"&&(_._TRANSFORM=S)}),t&&(a=t+"Transition",r=t+"TransitionProperty"),s=l+"transition-property",n=l+"transition-duration",i=l+"transition-timing-function",u=l+"transition-delay",h="transitionend",g="on"+t.toLowerCase()+"transitionend",h=m[t]||h,_.fx={},_.toggles={},_._hasEnd={},_._reKeywords=/^(?:node|duration|iterations|easing|delay|on|onstart|onend)$/i,c.Node.DOM_EVENTS[h]=1,_.NAME="transition",_.DEFAULT_EASING="ease",_.DEFAULT_DURATION=.5,_.DEFAULT_DELAY=0,_._nodeAttrs={},_.prototype={constructor:_,init:function(E,S){var y=this;return y._node=E,!y._running&&S&&(y._config=S,E._transition=y,y._duration="duration"in S?S.duration:y.constructor.DEFAULT_DURATION,y._delay="delay"in S?S.delay:y.constructor.DEFAULT_DELAY,y._easing=S.easing||y.constructor.DEFAULT_EASING,y._count=0,y._running=!1),y},addProperty:function(E,S){var y=this,C=this._node,O=c.stamp(C),A=c.one(C),I=_._nodeAttrs[O],D,T,B,N,P;I||(I=_._nodeAttrs[O]={}),N=I[E],S&&S.value!==void 0?P=S.value:S!==void 0&&(P=S,S=p),typeof P=="function"&&(P=P.call(A,A)),N&&N.transition&&N.transition!==y&&N.transition._count--,y._count++,B=(typeof S.duration<"u"?S.duration:y._duration)||1e-4,I[E]={value:P,duration:B,delay:typeof S.delay<"u"?S.delay:y._delay,easing:S.easing||y._easing,transition:y},D=c.DOM.getComputedStyle(C,E),T=typeof P=="string"?D:parseFloat(D),_.useNative&&T===P&&setTimeout(function(){y._onNativeEnd.call(C,{propertyName:E,elapsedTime:B})},B*1e3)},removeProperty:function(E){var S=this,y=_._nodeAttrs[c.stamp(S._node)];y&&y[E]&&(delete y[E],S._count--)},initAttrs:function(E){var S,y=this._node;E.transform&&!E[_._TRANSFORM]&&(E[_._TRANSFORM]=E.transform,delete E.transform);for(S in E)E.hasOwnProperty(S)&&!_._reKeywords.test(S)&&(this.addProperty(S,E[S]),y.style[S]===""&&c.DOM.setStyle(y,S,c.DOM.getComputedStyle(y,S)))},run:function(E){var S=this,y=S._node,C=S._config,O={type:"transition:start",config:C};return S._running||(S._running=!0,C.on&&C.on.start&&C.on.start.call(c.one(y),O),S.initAttrs(S._config),S._callback=E,S._start()),S},_start:function(){this._runNative()},_prepDur:function(E){return E=parseFloat(E)*1e3,E+"ms"},_runNative:function(){var E=this,S=E._node,y=c.stamp(S),C=S.style,O=S.ownerDocument.defaultView.getComputedStyle(S),A=_._nodeAttrs[y],I="",D=O[_._toCamel(s)],T=s+": ",B=n+": ",N=i+": ",P=u+": ",x,R,w;D!=="all"&&(T+=D+",",B+=O[_._toCamel(n)]+",",N+=O[_._toCamel(i)]+",",P+=O[_._toCamel(u)]+",");for(w in A)x=_._toHyphen(w),R=A[w],(R=A[w])&&R.transition===E&&(w in S.style?(B+=E._prepDur(R.duration)+",",P+=E._prepDur(R.delay)+",",N+=R.easing+",",T+=x+",",I+=x+": "+R.value+"; "):this.removeProperty(w));T=T.replace(/,$/,";"),B=B.replace(/,$/,";"),N=N.replace(/,$/,";"),P=P.replace(/,$/,";"),_._hasEnd[y]||(S.addEventListener(h,E._onNativeEnd,""),_._hasEnd[y]=!0),C.cssText+=T+B+N+P+I},_end:function(E){var S=this,y=S._node,C=S._callback,O=S._config,A={type:"transition:end",config:O,elapsedTime:E},I=c.one(y);S._running=!1,S._callback=null,y&&(O.on&&O.on.end?setTimeout(function(){O.on.end.call(I,A),C&&C.call(I,A)},1):C&&setTimeout(function(){C.call(I,A)},1))},_endNative:function(E){var S=this._node,y=S.ownerDocument.defaultView.getComputedStyle(S,"")[_._toCamel(s)];E=_._toHyphen(E),typeof y=="string"&&(y=y.replace(new RegExp("(?:^|,\\s)"+E+",?"),","),y=y.replace(/^,|,$/,""),S.style[a]=y)},_onNativeEnd:function(E){var S=this,y=c.stamp(S),C=E,O=_._toCamel(C.propertyName),A=C.elapsedTime,I=_._nodeAttrs[y],D=I[O],T=D?D.transition:null,B,N;T&&(T.removeProperty(O),T._endNative(O),N=T._config[O],B={type:"propertyEnd",propertyName:O,elapsedTime:A,config:N},N&&N.on&&N.on.end&&N.on.end.call(c.one(S),B),T._count<=0&&(T._end(A),S.style[r]=""))},destroy:function(){var E=this,S=E._node;S&&(S.removeEventListener(h,E._onNativeEnd,!1),E._node=null)}},c.Transition=_,c.TransitionNative=_,c.Node.prototype.transition=function(E,S,y){var C=_._nodeAttrs[c.stamp(this._node)],O=C&&C.transition||null,A,I;if(typeof E=="string")if(typeof S=="function"&&(y=S,S=null),A=_.fx[E],S&&typeof S=="object"){S=c.clone(S);for(I in A)A.hasOwnProperty(I)&&(I in S||(S[I]=A[I]))}else S=A;else y=S,S=E;return O&&!O._running?O.init(this,S):O=new _(this._node,S),O.run(y),this},c.Node.prototype.show=function(E,S,y){return this._show(),E&&c.Transition&&(typeof E!="string"&&!E.push&&(typeof S=="function"&&(y=S,S=E),E=_.SHOW_TRANSITION),this.transition(E,S,y)),this},c.NodeList.prototype.show=function(E,S,y){for(var C=this._nodes,O=0,A;A=C[O++];)c.one(A).show(E,S,y);return this};var v=function(E,S,y){return function(){S&&S.call(E),y&&typeof y=="function"&&y.apply(E._node,arguments)}};c.Node.prototype.hide=function(E,S,y){return E&&c.Transition?(typeof S=="function"&&(y=S,S=null),y=v(this,this._hide,y),typeof E!="string"&&!E.push&&(typeof S=="function"&&(y=S,S=E),E=_.HIDE_TRANSITION),this.transition(E,S,y)):this._hide(),this},c.NodeList.prototype.hide=function(E,S,y){for(var C=this._nodes,O=0,A;A=C[O++];)c.one(A).hide(E,S,y);return this},c.NodeList.prototype.transition=function(E,S,I){for(var C=this._nodes,O=this.size(),A=0,I=I===!0,D;D=C[A++];)A<O&&I?c.one(D).transition(E):c.one(D).transition(E,S);return this},c.Node.prototype.toggleView=function(E,S,y){if(this._toggles=this._toggles||[],y=arguments[arguments.length-1],typeof E!="string"){S=E,this._toggleView(S,y);return}return typeof S=="function"&&(S=void 0),typeof S>"u"&&E in this._toggles&&(S=!this._toggles[E]),S=S?1:0,S?this._show():y=v(this,this._hide,y),this._toggles[E]=S,this.transition(c.Transition.toggles[E][S],y),this},c.NodeList.prototype.toggleView=function(E,S,y){for(var C=this._nodes,O=0,A;A=C[O++];)A=c.one(A),A.toggleView.apply(A,arguments);return this},c.mix(_.fx,{fadeOut:{opacity:0,duration:.5,easing:"ease-out"},fadeIn:{opacity:1,duration:.5,easing:"ease-in"},sizeOut:{height:0,width:0,duration:.75,easing:"ease-out"},sizeIn:{height:function(E){return E.get("scrollHeight")+"px"},width:function(E){return E.get("scrollWidth")+"px"},duration:.5,easing:"ease-in",on:{start:function(){var E=this.getStyle("overflow");E!=="hidden"&&(this.setStyle("overflow","hidden"),this._transitionOverflow=E)},end:function(){this._transitionOverflow&&(this.setStyle("overflow",this._transitionOverflow),delete this._transitionOverflow)}}}}),c.mix(_.toggles,{size:["sizeOut","sizeIn"],fade:["fadeOut","fadeIn"]})},"3.17.2",{requires:["node-style"]})},230946:function(){YUI.add("uploader-flash",function(c,b){var t=c.Lang.sub,l=c.Uploader.Queue,d=c.Event,o=c.SWFDetect,e=c.Lang,a=c.UA,r=c.Node,s=c.Escape,n="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",i="application/x-shockwave-flash",u="10.0.22",h="http://fpdownload.macromedia.com/pub/flashplayer/update/current/swf/autoUpdater.swf?"+Math.random(),g="SWF.eventHandler",p={align:"",allowFullScreen:"",allowNetworking:"",allowScriptAccess:"",base:"",bgcolor:"",loop:"",menu:"",name:"",play:"",quality:"",salign:"",scale:"",tabindex:"",wmode:""};function f(v,E,O){this._id=c.guid("yuiswf");var y=this._id,C=r.one(v),O=O||{},A=O.version||u,I=(A+"").split("."),D=o.isFlashVersionAtLeast(parseInt(I[0],10),parseInt(I[1],10),parseInt(I[2],10)),T=o.isFlashVersionAtLeast(8,0,0),B=T&&!D&&O.useExpressInstall,N=B?h:E,P="<object ",x,R,w="yId="+c.id+"&YUISwfId="+y+"&YUIBridgeCallback="+g+"&allowedDomain="+document.location.hostname;if(c.SWF._instances[y]=this,C&&(D||B)&&N){P+='id="'+y+'" ',a.ie?P+='classid="'+n+'" ':P+='type="'+i+'" data="'+s.html(N)+'" ',x="100%",R="100%",P+='width="'+x+'" height="'+R+'">',a.ie&&(P+='<param name="movie" value="'+s.html(N)+'"/>');for(var k in O.fixedAttributes)p.hasOwnProperty(k)&&(P+='<param name="'+s.html(k)+'" value="'+s.html(O.fixedAttributes[k])+'"/>');for(var q in O.flashVars){var F=O.flashVars[q];e.isString(F)&&(w+="&"+s.html(q)+"="+s.html(encodeURIComponent(F)))}w&&(P+='<param name="flashVars" value="'+w+'"/>'),P+="</object>",C.set("innerHTML",P),this._swf=r.one("#"+y)}else{var z={};z.type="wrongflashversion",this.publish("wrongflashversion",{fireOnce:!0}),this.fire("wrongflashversion",z)}}f._instances=f._instances||{},f.eventHandler=function(v,E){f._instances[v]._eventHandler(E)},f.prototype={_eventHandler:function(v){v.type==="swfReady"?(this.publish("swfReady",{fireOnce:!0}),this.fire("swfReady",v)):v.type==="log"||this.fire(v.type,v)},callSWF:function(v,E){return E||(E=[]),this._swf._node[v]?this._swf._node[v].apply(this._swf._node,E):null},toString:function(){return"SWF "+this._id}},c.augment(f,c.EventTarget),c.SWF=f;var m=function(v){m.superclass.constructor.apply(this,arguments)};c.extend(m,c.Base,{initializer:function(v){this.get("id")||this._set("id",c.guid("file"))},_swfEventHandler:function(v){if(v.id===this.get("id"))switch(v.type){case"uploadstart":this.fire("uploadstart",{uploader:this.get("uploader")});break;case"uploadprogress":this.fire("uploadprogress",{originEvent:v,bytesLoaded:v.bytesLoaded,bytesTotal:v.bytesTotal,percentLoaded:Math.min(100,Math.round(1e4*v.bytesLoaded/v.bytesTotal)/100)}),this._set("bytesUploaded",v.bytesLoaded);break;case"uploadcomplete":this.fire("uploadfinished",{originEvent:v});break;case"uploadcompletedata":this.fire("uploadcomplete",{originEvent:v,data:v.data});break;case"uploadcancel":this.fire("uploadcancel",{originEvent:v});break;case"uploaderror":this.fire("uploaderror",{originEvent:v,status:v.status,statusText:v.message,source:v.source})}},startUpload:function(v,E,S){if(this.get("uploader")){var y=this.get("uploader"),C=S||"Filedata",O=this.get("id"),A=E||null;this._set("bytesUploaded",0),y.on("uploadstart",this._swfEventHandler,this),y.on("uploadprogress",this._swfEventHandler,this),y.on("uploadcomplete",this._swfEventHandler,this),y.on("uploadcompletedata",this._swfEventHandler,this),y.on("uploaderror",this._swfEventHandler,this),y.callSWF("upload",[O,v,A,C])}},cancelUpload:function(){this.get("uploader")&&(this.get("uploader").callSWF("cancel",[this.get("id")]),this.fire("uploadcancel"))}},{NAME:"file",TYPE:"flash",ATTRS:{id:{writeOnce:"initOnly",value:null},size:{writeOnce:"initOnly",value:0},name:{writeOnce:"initOnly",value:null},dateCreated:{writeOnce:"initOnly",value:null},dateModified:{writeOnce:"initOnly",value:null},bytesUploaded:{readOnly:!0,value:0},type:{writeOnce:"initOnly",value:null},uploader:{writeOnce:"initOnly",value:null}}}),c.FileFlash=m;function _(){_.superclass.constructor.apply(this,arguments)}c.UploaderFlash=c.extend(_,c.Widget,{_buttonState:"up",_buttonFocus:!1,_swfContainerId:null,_swfReference:null,queue:null,_tabElementBindings:null,initializer:function(){this._swfContainerId=c.guid("uploader"),this._swfReference=null,this.queue=null,this._buttonState="up",this._buttonFocus=null,this._tabElementBindings=null,this._fileList=[],this.publish("fileselect"),this.publish("uploadstart"),this.publish("fileuploadstart"),this.publish("uploadprogress"),this.publish("totaluploadprogress"),this.publish("uploadcomplete"),this.publish("alluploadscomplete"),this.publish("uploaderror"),this.publish("mouseenter"),this.publish("mouseleave"),this.publish("mousedown"),this.publish("mouseup"),this.publish("click")},renderUI:function(){var v=this.get("boundingBox"),E=this.get("contentBox"),S=this.get("selectFilesButton"),y=c.Node.create(t(_.FLASH_CONTAINER,{swfContainerId:this._swfContainerId})),C={version:"10.0.45",fixedAttributes:{wmode:"transparent",allowScriptAccess:"always",allowNetworking:"all",scale:"noscale"}};v.setStyle("position","relative"),S.setStyles({width:"100%",height:"100%"}),E.append(S),E.append(y),this._swfReference=new c.SWF(y,this.get("swfURL"),C)},bindUI:function(){this._swfReference.on("swfReady",function(){this._setMultipleFiles(),this._setFileFilters(),this._triggerEnabled(),this._attachTabElements(),this.after("multipleFilesChange",this._setMultipleFiles,this),this.after("fileFiltersChange",this._setFileFilters,this),this.after("enabledChange",this._triggerEnabled,this),this.after("tabElementsChange",this._attachTabElements)},this),this._swfReference.on("fileselect",this._updateFileList,this),this._swfReference.on("mouseenter",function(){this.fire("mouseenter"),this._setButtonClass("hover",!0),this._buttonState==="down"&&this._setButtonClass("active",!0)},this),this._swfReference.on("mouseleave",function(){this.fire("mouseleave"),this._setButtonClass("hover",!1),this._setButtonClass("active",!1)},this),this._swfReference.on("mousedown",function(){this.fire("mousedown"),this._buttonState="down",this._setButtonClass("active",!0)},this),this._swfReference.on("mouseup",function(){this.fire("mouseup"),this._buttonState="up",this._setButtonClass("active",!1)},this),this._swfReference.on("click",function(){this.fire("click"),this._buttonFocus=!0,this._setButtonClass("focus",!0),c.one("body").focus(),this._swfReference._swf.focus()},this)},_attachTabElements:function(){if(this.get("tabElements")!==null&&this.get("tabElements").from!==null&&this.get("tabElements").to!==null){this._tabElementBindings!==null?(this._tabElementBindings.from.detach(),this._tabElementBindings.to.detach(),this._tabElementBindings.tabback.detach(),this._tabElementBindings.tabforward.detach(),this._tabElementBindings.focus.detach(),this._tabElementBindings.blur.detach()):this._tabElementBindings={};var v=c.one(this.get("tabElements").from),E=c.one(this.get("tabElements").to);this._tabElementBindings.from=v.on("keydown",function(S){S.keyCode===9&&!S.shiftKey&&(S.preventDefault(),this._swfReference._swf.setAttribute("tabindex",0),this._swfReference._swf.setAttribute("role","button"),this._swfReference._swf.setAttribute("aria-label",this.get("selectButtonLabel")),this._swfReference._swf.focus())},this),this._tabElementBindings.to=E.on("keydown",function(S){S.keyCode===9&&S.shiftKey&&(S.preventDefault(),this._swfReference._swf.setAttribute("tabindex",0),this._swfReference._swf.setAttribute("role","button"),this._swfReference._swf.setAttribute("aria-label",this.get("selectButtonLabel")),this._swfReference._swf.focus())},this),this._tabElementBindings.tabback=this._swfReference.on("tabback",function(){this._swfReference._swf.blur(),setTimeout(function(){v.focus()},30)},this),this._tabElementBindings.tabforward=this._swfReference.on("tabforward",function(){this._swfReference._swf.blur(),setTimeout(function(){E.focus()},30)},this),this._tabElementBindings.focus=this._swfReference._swf.on("focus",function(){this._buttonFocus=!0,this._setButtonClass("focus",!0)},this),this._tabElementBindings.blur=this._swfReference._swf.on("blur",function(){this._buttonFocus=!1,this._setButtonClass("focus",!1)},this)}else this._tabElementBindings!==null&&(this._tabElementBindings.from.detach(),this._tabElementBindings.to.detach(),this._tabElementBindings.tabback.detach(),this._tabElementBindings.tabforward.detach(),this._tabElementBindings.focus.detach(),this._tabElementBindings.blur.detach())},_setButtonClass:function(v,E){E?this.get("selectFilesButton").addClass(this.get("buttonClassNames")[v]):this.get("selectFilesButton").removeClass(this.get("buttonClassNames")[v])},_setFileFilters:function(){this._swfReference&&this.get("fileFilters").length>0&&this._swfReference.callSWF("setFileFilters",[this.get("fileFilters")])},_setMultipleFiles:function(){this._swfReference&&this._swfReference.callSWF("setAllowMultipleFiles",[this.get("multipleFiles")])},_triggerEnabled:function(){this.get("enabled")?(this._swfReference.callSWF("enable"),this._swfReference._swf.setAttribute("aria-disabled","false"),this._setButtonClass("disabled",!1)):(this._swfReference.callSWF("disable"),this._swfReference._swf.setAttribute("aria-disabled","true"),this._setButtonClass("disabled",!0))},_getFileList:function(){return this._fileList.concat()},_setFileList:function(v){return this._fileList=v.concat(),this._fileList.concat()},_updateFileList:function(v){c.one("body").focus(),this._swfReference._swf.focus();var E=v.fileList,S=[],y=[],C=this._swfReference,O=this.get("fileFilterFunction"),A;c.each(E,function(I){var D={};D.id=I.fileId,D.name=I.fileReference.name,D.size=I.fileReference.size,D.type=I.fileReference.type,D.dateCreated=I.fileReference.creationDate,D.dateModified=I.fileReference.modificationDate,D.uploader=C,S.push(D)}),O?c.each(S,function(I){var D=new c.FileFlash(I);O(D)&&y.push(D)}):c.each(S,function(I){y.push(new c.FileFlash(I))}),y.length>0&&(A=this.get("fileList"),this.set("fileList",this.get("appendNewFiles")?A.concat(y):y),this.fire("fileselect",{fileList:y}))},_uploadEventHandler:function(v){switch(v.type){case"file:uploadstart":this.fire("fileuploadstart",v);break;case"file:uploadprogress":this.fire("uploadprogress",v);break;case"uploaderqueue:totaluploadprogress":this.fire("totaluploadprogress",v);break;case"file:uploadcomplete":this.fire("uploadcomplete",v);break;case"uploaderqueue:alluploadscomplete":this.queue=null,this.fire("alluploadscomplete",v);break;case"file:uploaderror":case"uploaderqueue:uploaderror":this.fire("uploaderror",v);break;case"file:uploadcancel":case"uploaderqueue:uploadcancel":this.fire("uploadcancel",v);break}},upload:function(v,E,S){var y=E||this.get("uploadURL"),C=S||this.get("postVarsPerFile"),O=v.get("id");C=C.hasOwnProperty(O)?C[O]:C,v instanceof c.FileFlash&&(v.on("uploadstart",this._uploadEventHandler,this),v.on("uploadprogress",this._uploadEventHandler,this),v.on("uploadcomplete",this._uploadEventHandler,this),v.on("uploaderror",this._uploadEventHandler,this),v.on("uploadcancel",this._uploadEventHandler,this),v.startUpload(y,C,this.get("fileFieldName")))},uploadAll:function(v,E){this.uploadThese(this.get("fileList"),v,E)},uploadThese:function(v,E,S){if(!this.queue){var y=E||this.get("uploadURL"),C=S||this.get("postVarsPerFile");this.queue=new l({simUploads:this.get("simLimit"),errorAction:this.get("errorAction"),fileFieldName:this.get("fileFieldName"),fileList:v,uploadURL:y,perFileParameters:C,retryCount:this.get("retryCount")}),this.queue.on("uploadstart",this._uploadEventHandler,this),this.queue.on("uploadprogress",this._uploadEventHandler,this),this.queue.on("totaluploadprogress",this._uploadEventHandler,this),this.queue.on("uploadcomplete",this._uploadEventHandler,this),this.queue.on("alluploadscomplete",this._uploadEventHandler,this),this.queue.on("alluploadscancelled",function(){this.queue=null},this),this.queue.on("uploaderror",this._uploadEventHandler,this),this.queue.startUpload(),this.fire("uploadstart")}}},{FLASH_CONTAINER:'<div id="{swfContainerId}" style="position:absolute; top:0px; left: 0px; margin: 0; padding: 0; border: 0; width:100%; height:100%"></div>',SELECT_FILES_BUTTON:"<button type='button' class='yui3-button' tabindex='-1'>{selectButtonLabel}</button>",TYPE:"flash",NAME:"uploader",ATTRS:{appendNewFiles:{value:!0},buttonClassNames:{value:{hover:"yui3-button-hover",active:"yui3-button-active",disabled:"yui3-button-disabled",focus:"yui3-button-selected"}},enabled:{value:!0},errorAction:{value:"continue",validator:function(v){return v===l.CONTINUE||v===l.STOP||v===l.RESTART_ASAP||v===l.RESTART_AFTER}},fileFilters:{value:[]},fileFilterFunction:{value:null},fileFieldName:{value:"Filedata"},fileList:{value:[],getter:"_getFileList",setter:"_setFileList"},multipleFiles:{value:!1},postVarsPerFile:{value:{}},selectButtonLabel:{value:"Select Files"},selectFilesButton:{valueFn:function(){return c.Node.create(t(c.UploaderFlash.SELECT_FILES_BUTTON,{selectButtonLabel:this.get("selectButtonLabel")}))}},simLimit:{value:2,validator:function(v){return v>=2&&v<=5}},swfURL:{valueFn:function(){var v="flashuploader.swf";return c.UA.ie>0?v+"?t="+c.guid("uploader"):v}},tabElements:{value:null},uploadURL:{value:""},retryCount:{value:3}}}),c.UploaderFlash.Queue=l},"3.17.2",{requires:["swfdetect","escape","widget","base","cssbutton","node","event-custom","uploader-queue"]})},796802:function(){YUI.add("uploader-html5",function(c,b){var t=c.Lang.sub,l=c.Uploader.Queue;function d(){d.superclass.constructor.apply(this,arguments)}c.UploaderHTML5=c.extend(d,c.Widget,{_fileInputField:null,_buttonBinding:null,queue:null,initializer:function(){this._fileInputField=null,this.queue=null,this._buttonBinding=null,this._fileList=[],this.publish("fileselect"),this.publish("uploadstart"),this.publish("fileuploadstart"),this.publish("uploadprogress"),this.publish("totaluploadprogress"),this.publish("uploadcomplete"),this.publish("alluploadscomplete"),this.publish("uploaderror"),this.publish("dragenter"),this.publish("dragover"),this.publish("dragleave"),this.publish("drop")},renderUI:function(){var o=this.get("contentBox"),e=this.get("selectFilesButton");e.setStyles({width:"100%",height:"100%"}),o.append(e),this._fileInputField=c.Node.create(d.HTML5FILEFIELD_TEMPLATE),o.append(this._fileInputField)},bindUI:function(){this._bindSelectButton(),this._setMultipleFiles(),this._setFileFilters(),this._bindDropArea(),this._triggerEnabled(),this.after("multipleFilesChange",this._setMultipleFiles,this),this.after("fileFiltersChange",this._setFileFilters,this),this.after("enabledChange",this._triggerEnabled,this),this.after("selectFilesButtonChange",this._bindSelectButton,this),this.after("dragAndDropAreaChange",this._bindDropArea,this),this.after("tabIndexChange",function(){this.get("selectFilesButton").set("tabIndex",this.get("tabIndex"))},this),this._fileInputField.on("change",this._updateFileList,this),this._fileInputField.on("click",function(o){o.stopPropagation()},this),this.get("selectFilesButton").set("tabIndex",this.get("tabIndex"))},_rebindFileField:function(){this._fileInputField.remove(!0),this._fileInputField=c.Node.create(d.HTML5FILEFIELD_TEMPLATE),this.get("contentBox").append(this._fileInputField),this._fileInputField.on("change",this._updateFileList,this),this._setMultipleFiles(),this._setFileFilters()},_bindDropArea:function(o){var e=o||{prevVal:null},a=this.get("dragAndDropArea");e.prevVal!==null&&(e.prevVal.detach("drop",this._ddEventHandler),e.prevVal.detach("dragenter",this._ddEventHandler),e.prevVal.detach("dragover",this._ddEventHandler),e.prevVal.detach("dragleave",this._ddEventHandler)),a!==null&&(a.on("drop",this._ddEventHandler,this),a.on("dragenter",this._ddEventHandler,this),a.on("dragover",this._ddEventHandler,this),a.on("dragleave",this._ddEventHandler,this))},_bindSelectButton:function(){this._buttonBinding=this.get("selectFilesButton").on("click",this.openFileSelectDialog,this)},_ddEventHandler:function(o){if(o.stopPropagation(),o.preventDefault(),c.Array.indexOf(o._event.dataTransfer.types,"Files")>-1)switch(o.type){case"dragenter":this.fire("dragenter");break;case"dragover":this.fire("dragover");break;case"dragleave":this.fire("dragleave");break;case"drop":var e=o._event.dataTransfer.files,a=[],r=this.get("fileFilterFunction"),s;r?c.each(e,function(n){var i=new c.FileHTML5(n);r(i)&&a.push(i)}):c.each(e,function(n){a.push(new c.FileHTML5(n))}),a.length>0&&(s=this.get("fileList"),this.set("fileList",this.get("appendNewFiles")?s.concat(a):a),this.fire("fileselect",{fileList:a})),this.fire("drop",{fileList:a});break}},_setButtonClass:function(o,e){e?this.get("selectFilesButton").addClass(this.get("buttonClassNames")[o]):this.get("selectFilesButton").removeClass(this.get("buttonClassNames")[o])},_setMultipleFiles:function(){this.get("multipleFiles")===!0?this._fileInputField.set("multiple","multiple"):this._fileInputField.set("multiple","")},_setFileFilters:function(){this.get("fileFilters").length>0?this._fileInputField.set("accept",this.get("fileFilters").join(",")):this._fileInputField.set("accept","")},_triggerEnabled:function(){this.get("enabled")&&this._buttonBinding===null?(this._bindSelectButton(),this._setButtonClass("disabled",!1),this.get("selectFilesButton").setAttribute("aria-disabled","false")):!this.get("enabled")&&this._buttonBinding&&(this._buttonBinding.detach(),this._buttonBinding=null,this._setButtonClass("disabled",!0),this.get("selectFilesButton").setAttribute("aria-disabled","true"))},_getFileList:function(){return this._fileList.concat()},_setFileList:function(o){return this._fileList=o.concat(),this._fileList.concat()},_updateFileList:function(o){var e=o.target.getDOMNode().files,a=[],r=this.get("fileFilterFunction"),s;r?c.each(e,function(n){var i=new c.FileHTML5(n);r(i)&&a.push(i)}):c.each(e,function(n){a.push(new c.FileHTML5(n))}),a.length>0&&(s=this.get("fileList"),this.set("fileList",this.get("appendNewFiles")?s.concat(a):a),this.fire("fileselect",{fileList:a})),this._rebindFileField()},_uploadEventHandler:function(o){switch(o.type){case"file:uploadstart":this.fire("fileuploadstart",o);break;case"file:uploadprogress":this.fire("uploadprogress",o);break;case"uploaderqueue:totaluploadprogress":this.fire("totaluploadprogress",o);break;case"file:uploadcomplete":this.fire("uploadcomplete",o);break;case"uploaderqueue:alluploadscomplete":this.queue=null,this.fire("alluploadscomplete",o);break;case"file:uploaderror":case"uploaderqueue:uploaderror":this.fire("uploaderror",o);break;case"file:uploadcancel":case"uploaderqueue:uploadcancel":this.fire("uploadcancel",o);break}},openFileSelectDialog:function(){var o=this._fileInputField.getDOMNode();o.click&&o.click()},upload:function(o,e,a){var r=e||this.get("uploadURL"),s=a||this.get("postVarsPerFile"),n=o.get("id");s=s.hasOwnProperty(n)?s[n]:s,o instanceof c.FileHTML5&&(o.on("uploadstart",this._uploadEventHandler,this),o.on("uploadprogress",this._uploadEventHandler,this),o.on("uploadcomplete",this._uploadEventHandler,this),o.on("uploaderror",this._uploadEventHandler,this),o.on("uploadcancel",this._uploadEventHandler,this),o.startUpload(r,s,this.get("fileFieldName")))},uploadAll:function(o,e){this.uploadThese(this.get("fileList"),o,e)},uploadThese:function(o,e,a){if(this.queue)this.queue._currentState===l.UPLOADING&&(this.queue.set("perFileParameters",this.get("postVarsPerFile")),c.each(o,function(n){this.queue.addToQueueBottom(n)},this));else{var r=e||this.get("uploadURL"),s=a||this.get("postVarsPerFile");this.queue=new l({simUploads:this.get("simLimit"),errorAction:this.get("errorAction"),fileFieldName:this.get("fileFieldName"),fileList:o,uploadURL:r,perFileParameters:s,retryCount:this.get("retryCount"),uploadHeaders:this.get("uploadHeaders"),withCredentials:this.get("withCredentials")}),this.queue.on("uploadstart",this._uploadEventHandler,this),this.queue.on("uploadprogress",this._uploadEventHandler,this),this.queue.on("totaluploadprogress",this._uploadEventHandler,this),this.queue.on("uploadcomplete",this._uploadEventHandler,this),this.queue.on("alluploadscomplete",this._uploadEventHandler,this),this.queue.on("uploadcancel",this._uploadEventHandler,this),this.queue.on("uploaderror",this._uploadEventHandler,this),this.queue.startUpload(),this.fire("uploadstart")}}},{HTML5FILEFIELD_TEMPLATE:"<input type='file' style='visibility:hidden; width:0px; height: 0px;'>",SELECT_FILES_BUTTON:'<button type="button" class="yui3-button" role="button" aria-label="{selectButtonLabel}" tabindex="{tabIndex}">{selectButtonLabel}</button>',TYPE:"html5",NAME:"uploader",ATTRS:{appendNewFiles:{value:!0},buttonClassNames:{value:{hover:"yui3-button-hover",active:"yui3-button-active",disabled:"yui3-button-disabled",focus:"yui3-button-selected"}},dragAndDropArea:{value:null,setter:function(o){return c.one(o)}},enabled:{value:!0},errorAction:{value:"continue",validator:function(o){return o===l.CONTINUE||o===l.STOP||o===l.RESTART_ASAP||o===l.RESTART_AFTER}},fileFilters:{value:[]},fileFilterFunction:{value:null},fileFieldName:{value:"Filedata"},fileList:{value:[],getter:"_getFileList",setter:"_setFileList"},multipleFiles:{value:!1},postVarsPerFile:{value:{}},selectButtonLabel:{value:"Select Files"},selectFilesButton:{valueFn:function(){return c.Node.create(t(c.UploaderHTML5.SELECT_FILES_BUTTON,{selectButtonLabel:this.get("selectButtonLabel"),tabIndex:this.get("tabIndex")}))}},simLimit:{value:2,validator:function(o){return o>=1&&o<=5}},uploadURL:{value:""},uploadHeaders:{value:{}},withCredentials:{value:!0},retryCount:{value:3}}}),c.UploaderHTML5.Queue=l},"3.17.2",{requires:["widget","node-event-simulate","file-html5","uploader-queue"]})},241781:function(){YUI.add("uploader-queue",function(c,b){var t=function(){this.queuedFiles=[],this.uploadRetries={},this.numberOfUploads=0,this.currentUploadedByteValues={},this.currentFiles={},this.totalBytesUploaded=0,this.totalBytes=0,t.superclass.constructor.apply(this,arguments)};c.extend(t,c.Base,{_currentState:t.STOPPED,initializer:function(){},_uploadStartHandler:function(l){var d=l;d.file=l.target,d.originEvent=l,this.fire("uploadstart",d)},_uploadErrorHandler:function(l){var d=this.get("errorAction"),o=l,e,a;o.file=l.target,o.originEvent=l,this.numberOfUploads-=1,delete this.currentFiles[l.target.get("id")],this._detachFileEvents(l.target),l.target.cancelUpload(),d===t.STOP?this.pauseUpload():d===t.RESTART_ASAP?(e=l.target.get("id"),a=this.uploadRetries[e]||0,a<this.get("retryCount")&&(this.uploadRetries[e]=a+1,this.addToQueueTop(l.target)),this._startNextFile()):d===t.RESTART_AFTER&&(e=l.target.get("id"),a=this.uploadRetries[e]||0,a<this.get("retryCount")&&(this.uploadRetries[e]=a+1,this.addToQueueBottom(l.target)),this._startNextFile()),this.fire("uploaderror",o)},_startNextFile:function(){if(this.queuedFiles.length>0){var l=this.queuedFiles.shift(),d=l.get("id"),o=this.get("perFileParameters"),e=o.hasOwnProperty(d)?o[d]:o;this.currentUploadedByteValues[d]=0,l.on("uploadstart",this._uploadStartHandler,this),l.on("uploadprogress",this._uploadProgressHandler,this),l.on("uploadcomplete",this._uploadCompleteHandler,this),l.on("uploaderror",this._uploadErrorHandler,this),l.on("uploadcancel",this._uploadCancelHandler,this),l.set("xhrHeaders",this.get("uploadHeaders")),l.set("xhrWithCredentials",this.get("withCredentials")),l.startUpload(this.get("uploadURL"),e,this.get("fileFieldName")),this._registerUpload(l)}},_registerUpload:function(l){this.numberOfUploads+=1,this.currentFiles[l.get("id")]=l},_unregisterUpload:function(l){this.numberOfUploads>0&&(this.numberOfUploads-=1),delete this.currentFiles[l.get("id")],delete this.uploadRetries[l.get("id")],this._detachFileEvents(l)},_detachFileEvents:function(l){l.detach("uploadstart",this._uploadStartHandler),l.detach("uploadprogress",this._uploadProgressHandler),l.detach("uploadcomplete",this._uploadCompleteHandler),l.detach("uploaderror",this._uploadErrorHandler),l.detach("uploadcancel",this._uploadCancelHandler)},_uploadCompleteHandler:function(l){this._unregisterUpload(l.target),this.totalBytesUploaded+=l.target.get("size"),delete this.currentUploadedByteValues[l.target.get("id")],this.queuedFiles.length>0&&this._currentState===t.UPLOADING&&this._startNextFile();var d=l,o=this.totalBytesUploaded,e=Math.min(100,Math.round(1e4*o/this.totalBytes)/100);d.file=l.target,d.originEvent=l,c.each(this.currentUploadedByteValues,function(a){o+=a}),this.fire("totaluploadprogress",{bytesLoaded:o,bytesTotal:this.totalBytes,percentLoaded:e}),this.fire("uploadcomplete",d),this.queuedFiles.length===0&&this.numberOfUploads<=0&&(this.fire("alluploadscomplete"),this._currentState=t.STOPPED)},_uploadCancelHandler:function(l){var d=l;d.originEvent=l,d.file=l.target,this.fire("uploadcancel",d)},_uploadProgressHandler:function(l){this.currentUploadedByteValues[l.target.get("id")]=l.bytesLoaded;var d=l,o=this.totalBytesUploaded,e=Math.min(100,Math.round(1e4*o/this.totalBytes)/100);d.originEvent=l,d.file=l.target,this.fire("uploadprogress",d),c.each(this.currentUploadedByteValues,function(a){o+=a}),this.fire("totaluploadprogress",{bytesLoaded:o,bytesTotal:this.totalBytes,percentLoaded:e})},startUpload:function(){for(this.queuedFiles=this.get("fileList").slice(0),this.numberOfUploads=0,this.currentUploadedByteValues={},this.currentFiles={},this.totalBytesUploaded=0,this._currentState=t.UPLOADING;this.numberOfUploads<this.get("simUploads")&&this.queuedFiles.length>0;)this._startNextFile()},pauseUpload:function(){this._currentState=t.STOPPED},restartUpload:function(){for(this._currentState=t.UPLOADING;this.numberOfUploads<this.get("simUploads");)this._startNextFile()},forceReupload:function(l){var d=l.get("id");this.currentFiles.hasOwnProperty(d)&&(l.cancelUpload(),this._unregisterUpload(l),this.addToQueueTop(l),this._startNextFile())},addToQueueTop:function(l){this.queuedFiles.unshift(l)},addToQueueBottom:function(l){this.queuedFiles.push(l)},cancelUpload:function(l){var d,o,e;if(l){if(d=l.get("id"),this.currentFiles[d])this.currentFiles[d].cancelUpload(),this._unregisterUpload(this.currentFiles[d]),this._currentState===t.UPLOADING&&this._startNextFile();else for(o=0,len=this.queuedFiles.length;o<len;o++)if(this.queuedFiles[o].get("id")===d){this.queuedFiles.splice(o,1);break}}else{for(e in this.currentFiles)this.currentFiles[e].cancelUpload(),this._unregisterUpload(this.currentFiles[e]);this.currentUploadedByteValues={},this.currentFiles={},this.totalBytesUploaded=0,this.fire("alluploadscancelled"),this._currentState=t.STOPPED}}},{CONTINUE:"continue",STOP:"stop",RESTART_ASAP:"restartasap",RESTART_AFTER:"restartafter",STOPPED:"stopped",UPLOADING:"uploading",NAME:"uploaderqueue",ATTRS:{simUploads:{value:2,validator:function(l){return l>=1&&l<=5}},errorAction:{value:"continue",validator:function(l){return l===t.CONTINUE||l===t.STOP||l===t.RESTART_ASAP||l===t.RESTART_AFTER}},bytesUploaded:{readOnly:!0,value:0},bytesTotal:{readOnly:!0,value:0},fileList:{value:[],lazyAdd:!1,setter:function(l){var d=l;return c.Array.each(d,function(o){this.totalBytes+=o.get("size")},this),l}},fileFieldName:{value:"Filedata"},uploadURL:{value:""},uploadHeaders:{value:{}},withCredentials:{value:!0},perFileParameters:{value:{}},retryCount:{value:3}}}),c.namespace("Uploader"),c.Uploader.Queue=t},"3.17.2",{requires:["base"]})},347985:function(){YUI.add("uploader",function(c,b){var t=c.config.win;t&&t.File&&t.FormData&&t.XMLHttpRequest?c.Uploader=c.UploaderHTML5:c.SWFDetect.isFlashVersionAtLeast(10,0,45)?c.Uploader=c.UploaderFlash:(c.namespace("Uploader"),c.Uploader.TYPE="none")},"3.17.2",{requires:["uploader-html5","uploader-flash"]})},853452:function(){YUI.add("view",function(c,b){function t(){t.superclass.constructor.apply(this,arguments)}c.View=c.extend(t,c.Base,{containerTemplate:"<div/>",events:{},template:"",_allowAdHocAttrs:!0,initializer:function(l){l||(l={}),l.containerTemplate&&(this.containerTemplate=l.containerTemplate),l.template&&(this.template=l.template),this.events=l.events?c.merge(this.events,l.events):this.events,this.after("containerChange",this._afterContainerChange)},destroy:function(l){return l&&(l.remove||l.delete)&&this.onceAfter("destroy",function(){this._destroyContainer()}),t.superclass.destroy.call(this)},destructor:function(){this.detachEvents(),delete this._container},attachEvents:function(l){var d=this.get("container"),o=c.Object.owns,e,a,r,s;this.detachEvents(),l||(l=this.events);for(s in l)if(o(l,s)){a=l[s];for(r in a)o(a,r)&&(e=a[r],typeof e=="string"&&(e=this[e]),e&&this._attachedViewEvents.push(d.delegate(r,e,s,this)))}return this},create:function(l){return l?c.one(l):c.Node.create(this.containerTemplate)},detachEvents:function(){return c.Array.each(this._attachedViewEvents,function(l){l&&l.detach()}),this._attachedViewEvents=[],this},remove:function(){var l=this.get("container");return l&&l.remove(),this},render:function(){return this},_destroyContainer:function(){var l=this.get("container");l&&l.remove(!0)},_getContainer:function(l){return this._container||(l?(this._container=l,this.attachEvents()):(l=this._container=this.create(),this._set("container",l))),l},_afterContainerChange:function(){this.attachEvents(this.events)}},{NAME:"view",ATTRS:{container:{getter:"_getContainer",setter:c.one,writeOnce:!0}},_NON_ATTRS_CFG:["containerTemplate","events","template"]})},"3.17.2",{requires:["base-build","node-event-delegate"]})},602885:function(){YUI.add("widget-anim",function(c,b){var t="boundingBox",l="host",d="node",o="opacity",e="",a="visible",r="destroy",s="hidden",n="rendered",i="start",u="end",h="duration",g="animShow",p="animHide",f="_uiSetVisible",m="animShowChange",_="animHideChange";function v(E){v.superclass.constructor.apply(this,arguments)}v.NS="anim",v.NAME="pluginWidgetAnim",v.ANIMATIONS={fadeIn:function(){var E=this.get(l),S=E.get(t),y=new c.Anim({node:S,to:{opacity:1},duration:this.get(h)});return E.get(a)||S.setStyle(o,0),y.on(r,function(){this.get(d).setStyle(o,c.UA.ie?1:e)}),y},fadeOut:function(){return new c.Anim({node:this.get(l).get(t),to:{opacity:0},duration:this.get(h)})}},v.ATTRS={duration:{value:.2},animShow:{valueFn:v.ANIMATIONS.fadeIn},animHide:{valueFn:v.ANIMATIONS.fadeOut}},c.extend(v,c.Plugin.Base,{initializer:function(E){this._bindAnimShow(),this._bindAnimHide(),this.after(m,this._bindAnimShow),this.after(_,this._bindAnimHide),this.beforeHostMethod(f,this._uiAnimSetVisible)},destructor:function(){this.get(g).destroy(),this.get(p).destroy()},_uiAnimSetVisible:function(E){if(this.get(l).get(n))return E?(this.get(p).stop(),this.get(g).run()):(this.get(g).stop(),this.get(p).run()),new c.Do.Prevent},_uiSetVisible:function(E){var S=this.get(l),y=S.getClassName(s);S.get(t).toggleClass(y,!E)},_bindAnimShow:function(){this.get(g).on(i,c.bind(function(){this._uiSetVisible(!0)},this))},_bindAnimHide:function(){this.get(p).after(u,c.bind(function(){this._uiSetVisible(!1)},this))}}),c.namespace("Plugin").WidgetAnim=v},"3.17.2",{requires:["anim-base","plugin","widget"]})},649253:function(){YUI.add("widget-base",function(c,b){var t=c.Lang,l=c.Node,d=c.ClassNameManager,o=d.getClassName,e,a=c.cached(function(Q){return Q.substring(0,1).toUpperCase()+Q.substring(1)}),r="content",s="visible",n="hidden",i="disabled",u="focused",h="width",g="height",p="boundingBox",f="contentBox",m="parentNode",_="ownerDocument",v="auto",E="srcNode",S="body",y="tabIndex",C="id",O="render",A="rendered",I="destroyed",D="strings",T="<div></div>",B="Change",N="loading",P="_uiSet",x="",R=function(){},w=!0,k=!1,q,F={},z=[s,i,g,h,u,y],j=c.UA.webkit,X={};function J(Q){var ie=this,ce,pe,ye=ie.constructor;ie._strs={},ie._cssPrefix=ye.CSS_PREFIX||o(ye.NAME.toLowerCase()),Q=Q||{},J.superclass.constructor.call(ie,Q),pe=ie.get(O),pe&&(pe!==w&&(ce=pe),ie.render(ce))}J.NAME="widget",q=J.UI_SRC="ui",J.ATTRS=F,F[C]={valueFn:"_guid",writeOnce:w},F[A]={value:k,readOnly:w},F[p]={valueFn:"_defaultBB",setter:"_setBB",writeOnce:w},F[f]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:w},F[y]={value:null,validator:"_validTabIndex"},F[u]={value:k,readOnly:w},F[i]={value:k},F[s]={value:w},F[g]={value:x},F[h]={value:x},F[D]={value:{},setter:"_strSetter",getter:"_strGetter"},F[O]={value:k,writeOnce:w},J.CSS_PREFIX=o(J.NAME.toLowerCase()),J.getClassName=function(){return o.apply(d,[J.CSS_PREFIX].concat(c.Array(arguments),!0))},e=J.getClassName,J.getByNode=function(Q){var ie,ce=e();return Q=l.one(Q),Q&&(Q=Q.ancestor("."+ce,!0),Q&&(ie=X[c.stamp(Q,!0)])),ie||null},c.extend(J,c.Base,{getClassName:function(){return o.apply(d,[this._cssPrefix].concat(c.Array(arguments),!0))},initializer:function(Q){var ie=this.get(p);ie instanceof l&&this._mapInstance(c.stamp(ie))},_mapInstance:function(Q){X[Q]=this},destructor:function(){var Q=this.get(p),ie;Q instanceof l&&(ie=c.stamp(Q,!0),ie in X&&delete X[ie],this._destroyBox())},destroy:function(Q){return this._destroyAllNodes=Q,J.superclass.destroy.apply(this)},_destroyBox:function(){var Q=this.get(p),ie=this.get(f),ce=this._destroyAllNodes,pe;pe=Q&&Q.compareTo(ie),this.UI_EVENTS&&this._destroyUIEvents(),this._unbindUI(Q),ie&&(ce&&ie.empty(),ie.remove(w)),pe||(ce&&Q.empty(),Q.remove(w))},render:function(Q){return!this.get(I)&&!this.get(A)&&(this.publish(O,{queuable:k,fireOnce:w,defaultTargetOnly:w,defaultFn:this._defRenderFn}),this.fire(O,{parentNode:Q?l.one(Q):null})),this},_defRenderFn:function(Q){this._parentNode=Q.parentNode,this.renderer(),this._set(A,w),this._removeLoadingClassNames()},renderer:function(){var Q=this;Q._renderUI(),Q.renderUI(),Q._bindUI(),Q.bindUI(),Q._syncUI(),Q.syncUI()},bindUI:R,renderUI:R,syncUI:R,hide:function(){return this.set(s,k)},show:function(){return this.set(s,w)},focus:function(){return this._set(u,w)},blur:function(){return this._set(u,k)},enable:function(){return this.set(i,k)},disable:function(){return this.set(i,w)},_uiSizeCB:function(Q){this.get(f).toggleClass(e(r,"expanded"),Q)},_renderBox:function(Q){var ie=this,ce=ie.get(f),pe=ie.get(p),ye=ie.get(E),Ae=ie.DEF_PARENT_NODE,Je=ye&&ye.get(_)||pe.get(_)||ce.get(_);ye&&!ye.compareTo(ce)&&!ce.inDoc(Je)&&ye.replace(ce),!pe.compareTo(ce.get(m))&&!pe.compareTo(ce)&&(ce.inDoc(Je)&&ce.replace(pe),pe.appendChild(ce)),Q=Q||Ae&&l.one(Ae),Q?Q.appendChild(pe):pe.inDoc(Je)||l.one(S).insert(pe,0)},_setBB:function(Q){return this._setBox(this.get(C),Q,this.BOUNDING_TEMPLATE,!0)},_setCB:function(Q){return this.CONTENT_TEMPLATE===null?this.get(p):this._setBox(null,Q,this.CONTENT_TEMPLATE,!1)},_defaultBB:function(){var Q=this.get(E),ie=this.CONTENT_TEMPLATE===null;return Q&&ie?Q:null},_defaultCB:function(Q){return this.get(E)||null},_setBox:function(Q,ie,ce,pe){return ie=l.one(ie),ie||(ie=l.create(ce),pe?this._bbFromTemplate=!0:this._cbFromTemplate=!0),ie.get(C)||ie.set(C,Q||c.guid()),ie},_renderUI:function(){this._renderBoxClassNames(),this._renderBox(this._parentNode)},_renderBoxClassNames:function(){var Q=this._getClasses(),ie,ce=this.get(p),pe;for(ce.addClass(e()),pe=Q.length-3;pe>=0;pe--)ie=Q[pe],ce.addClass(ie.CSS_PREFIX||o(ie.NAME.toLowerCase()));this.get(f).addClass(this.getClassName(r))},_removeLoadingClassNames:function(){var Q=this.get(p),ie=this.get(f),ce=this.getClassName(N),pe=e(N);Q.removeClass(pe).removeClass(ce),ie.removeClass(pe).removeClass(ce)},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND),this._bindDOM()},_unbindUI:function(Q){this._unbindDOM(Q)},_bindDOM:function(){var Q=this.get(p).get(_),ie=J._hDocFocus;ie||(ie=J._hDocFocus=Q.on("focus",this._onDocFocus,this),ie.listeners={count:0}),ie.listeners[c.stamp(this,!0)]=!0,ie.listeners.count++,j&&(this._hDocMouseDown=Q.on("mousedown",this._onDocMouseDown,this))},_unbindDOM:function(Q){var ie=J._hDocFocus,ce=c.stamp(this,!0),pe,ye=this._hDocMouseDown;ie&&(pe=ie.listeners,pe[ce]&&(delete pe[ce],pe.count--),pe.count===0&&(ie.detach(),J._hDocFocus=null)),j&&ye&&ye.detach()},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC)},_uiSetHeight:function(Q){this._uiSetDim(g,Q),this._uiSizeCB(Q!==x&&Q!==v)},_uiSetWidth:function(Q){this._uiSetDim(h,Q)},_uiSetDim:function(Q,ie){this.get(p).setStyle(Q,t.isNumber(ie)?ie+this.DEF_UNIT:ie)},_uiSetVisible:function(Q){this.get(p).toggleClass(this.getClassName(n),!Q)},_uiSetDisabled:function(Q){this.get(p).toggleClass(this.getClassName(i),Q)},_uiSetFocused:function(Q,ie){var ce=this.get(p);ce.toggleClass(this.getClassName(u),Q),ie!==q&&(Q?ce.focus():ce.blur())},_uiSetTabIndex:function(Q){var ie=this.get(p);t.isNumber(Q)?ie.set(y,Q):ie.removeAttribute(y)},_onDocMouseDown:function(Q){this._domFocus&&this._onDocFocus(Q)},_onDocFocus:function(Q){var ie=J.getByNode(Q.target),ce=J._active;ce&&ce!==ie&&(ce._domFocus=!1,ce._set(u,!1,{src:q}),J._active=null),ie&&(ie._domFocus=!0,ie._set(u,!0,{src:q}),J._active=ie)},toString:function(){return this.name+"["+this.get(C)+"]"},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:T,BOUNDING_TEMPLATE:T,_guid:function(){return c.guid()},_validTabIndex:function(Q){return t.isNumber(Q)||t.isNull(Q)},_bindAttrUI:function(Q){var ie,ce=Q.length;for(ie=0;ie<ce;ie++)this.after(Q[ie]+B,this._setAttrUI)},_syncAttrUI:function(Q){var ie,ce=Q.length,pe;for(ie=0;ie<ce;ie++)pe=Q[ie],this[P+a(pe)](this.get(pe))},_setAttrUI:function(Q){Q.target===this&&this[P+a(Q.attrName)](Q.newVal,Q.src)},_strSetter:function(Q){return c.merge(this.get(D),Q)},getString:function(Q){return this.get(D)[Q]},getStrings:function(){return this.get(D)},_UI_ATTRS:{BIND:z,SYNC:z}}),c.Widget=J},"3.17.2",{requires:["attribute","base-base","base-pluginhost","classnamemanager","event-focus","node-base","node-style"],skinnable:!0})},222626:function(){YUI.add("widget-child",function(c,b){var t=c.Lang;function l(){c.after(this._syncUIChild,this,"syncUI"),c.after(this._bindUIChild,this,"bindUI")}l.ATTRS={selected:{value:0,validator:t.isNumber},index:{readOnly:!0,getter:function(){var d=this.get("parent"),o=-1;return d&&(o=d.indexOf(this)),o}},parent:{readOnly:!0},depth:{readOnly:!0,getter:function(){for(var d=this.get("parent"),o=this.get("root"),e=-1;d&&(e=e+1,d!=o);)d=d.get("parent");return e}},root:{readOnly:!0,getter:function(){var d=function(o){var e=o.get("parent"),a=o.ROOT_TYPE,r=e;return a&&(r=e&&c.instanceOf(e,a)),r?d(e):o};return d(this)}}},l.prototype={ROOT_TYPE:null,_getUIEventNode:function(){var d=this.get("root"),o;return d&&(o=d.get("boundingBox")),o},next:function(d){var o=this.get("parent"),e;return o&&(e=o.item(this.get("index")+1)),!e&&d&&(e=o.item(0)),e},previous:function(d){var o=this.get("parent"),e=this.get("index"),a;return o&&e>0&&(a=o.item([e-1])),!a&&d&&(a=o.item(o.size()-1)),a},remove:function(d){var o,e;return t.isNumber(d)?e=c.WidgetParent.prototype.remove.apply(this,arguments):(o=this.get("parent"),o&&(e=o.remove(this.get("index")))),e},isRoot:function(){return this==this.get("root")},ancestor:function(d){var o=this.get("root"),e;if(this.get("depth")>d)for(e=this.get("parent");e!=o&&e.get("depth")>d;)e=e.get("parent");return e},_uiSetChildSelected:function(d){var o=this.get("boundingBox"),e=this.getClassName("selected");d===0?o.removeClass(e):o.addClass(e)},_afterChildSelectedChange:function(d){this._uiSetChildSelected(d.newVal)},_syncUIChild:function(){this._uiSetChildSelected(this.get("selected"))},_bindUIChild:function(){this.after("selectedChange",this._afterChildSelectedChange)}},c.WidgetChild=l},"3.17.2",{requires:["base-build","widget"]})},221634:function(){YUI.add("widget-htmlparser",function(c,b){var t=c.Widget,l=c.Node,d=c.Lang,o="srcNode",e="contentBox";t.HTML_PARSER={},t._buildCfg={aggregates:["HTML_PARSER"]},t.ATTRS[o]={value:null,setter:l.one,getter:"_getSrcNode",writeOnce:!0},c.mix(t.prototype,{_getSrcNode:function(a){return a||this.get(e)},_preAddAttrs:function(a,r,s){var n={id:a.id,boundingBox:a.boundingBox,contentBox:a.contentBox,srcNode:a.srcNode};this.addAttrs(n,r,s),delete a.boundingBox,delete a.contentBox,delete a.srcNode,delete a.id,this._applyParser&&this._applyParser(r)},_applyParsedConfig:function(a,r,s){return s?c.mix(r,s,!1):r},_applyParser:function(a){var r=this,s=this._getNodeToParse(),n=r._getHtmlParser(),i,u;n&&s&&c.Object.each(n,function(h,g,p){u=null,d.isFunction(h)?u=h.call(r,s):d.isArray(h)?(u=s.all(h[0]),u.isEmpty()&&(u=null)):u=s.one(h),u!=null&&(i=i||{},i[g]=u)}),a=r._applyParsedConfig(s,a,i)},_getNodeToParse:function(){var a=this.get("srcNode");return this._cbFromTemplate?null:a},_getHtmlParser:function(){var a=this._getClasses(),r={},s,n;for(s=a.length-1;s>=0;s--)n=a[s].HTML_PARSER,n&&c.mix(r,n,!0);return r}})},"3.17.2",{requires:["widget-base"]})},806287:function(){YUI.add("widget-parent",function(c,b){var t=c.Lang,l="rendered",d="boundingBox";function o(e){this.publish("addChild",{defaultTargetOnly:!0,defaultFn:this._defAddChildFn}),this.publish("removeChild",{defaultTargetOnly:!0,defaultFn:this._defRemoveChildFn}),this._items=[];var a,r;e&&e.children&&(a=e.children,r=this.after("initializedChange",function(s){this._add(a),r.detach()})),c.after(this._renderChildren,this,"renderUI"),c.after(this._bindUIParent,this,"bindUI"),this.after("selectionChange",this._afterSelectionChange),this.after("selectedChange",this._afterParentSelectedChange),this.after("activeDescendantChange",this._afterActiveDescendantChange),this._hDestroyChild=this.after("*:destroy",this._afterDestroyChild),this.after("*:focusedChange",this._updateActiveDescendant)}o.ATTRS={defaultChildType:{setter:function(e){var a=c.Attribute.INVALID_VALUE,r=t.isString(e)?c[e]:e;return t.isFunction(r)&&(a=r),a}},activeDescendant:{readOnly:!0},multiple:{value:!1,validator:t.isBoolean,writeOnce:!0,getter:function(e){var a=this.get("root");return a&&a!=this?a.get("multiple"):e}},selection:{readOnly:!0,setter:"_setSelection",getter:function(e){var a=t.isArray(e)?new c.ArrayList(e):e;return a}},selected:{setter:function(e){var a=e;return e===1&&!this.get("multiple")&&(a=c.Attribute.INVALID_VALUE),a}}},o.prototype={destructor:function(){this._destroyChildren()},_afterDestroyChild:function(e){var a=e.target;a.get("parent")==this&&a.remove()},_afterSelectionChange:function(e){if(e.target==this&&e.src!=this){var a=e.newVal,r=0;a&&(r=2,c.instanceOf(a,c.ArrayList)&&a.size()===this.size()&&(r=1)),this.set("selected",r,{src:this})}},_afterActiveDescendantChange:function(e){var a=this.get("parent");a&&a._set("activeDescendant",e.newVal)},_afterParentSelectedChange:function(e){var a=e.newVal;this==e.target&&e.src!=this&&(a===0||a===1)&&this.each(function(r){r.set("selected",a,{src:this})},this)},_setSelection:function(e){var a=null,r;return this.get("multiple")&&!this.isEmpty()?(r=[],this.each(function(s){s.get("selected")>0&&r.push(s)}),r.length>0&&(a=r)):e.get("selected")>0&&(a=e),a},_updateSelection:function(e){var a=e.target,r;a.get("parent")==this&&(e.src!="_updateSelection"&&(r=this.get("selection"),!this.get("multiple")&&r&&e.newVal>0&&r.set("selected",0,{src:"_updateSelection"}),this._set("selection",a)),e.src==this&&this._set("selection",a,{src:this}))},_updateActiveDescendant:function(e){var a=e.newVal===!0?e.target:null;this._set("activeDescendant",a)},_createChild:function(e){var a=this.get("defaultChildType"),r=e.childType||e.type,s,n,i;return r&&(n=t.isString(r)?c[r]:r),t.isFunction(n)?i=n:a&&(i=a),i?s=new i(e):c.error("Could not create a child instance because its constructor is either undefined or invalid."),s},_defAddChildFn:function(e){var a=e.child,r=e.index,s=this._items;a.get("parent")&&a.remove(),t.isNumber(r)?s.splice(r,0,a):s.push(a),a._set("parent",this),a.addTarget(this),e.index=a.get("index"),a.after("selectedChange",c.bind(this._updateSelection,this))},_defRemoveChildFn:function(e){var a=e.child,r=e.index,s=this._items;a.get("focused")&&a.blur(),a.get("selected")&&a.set("selected",0),s.splice(r,1),a.removeTarget(this),a._oldParent=a.get("parent"),a._set("parent",null)},_add:function(e,a){var r,s,n;return t.isArray(e)?(r=[],c.each(e,function(i,u){s=this._add(i,a+u),s&&r.push(s)},this),r.length>0&&(n=r)):(c.instanceOf(e,c.Widget)?s=e:s=this._createChild(e),s&&this.fire("addChild",{child:s,index:a})&&(n=s)),n},add:function(){var e=this._add.apply(this,arguments),a=e?t.isArray(e)?e:[e]:[];return new c.ArrayList(a)},remove:function(e){var a=this._items[e],r;return a&&this.fire("removeChild",{child:a,index:e})&&(r=a),r},removeAll:function(){var e=[],a;return c.each(this._items.concat(),function(){a=this.remove(0),a&&e.push(a)},this),new c.ArrayList(e)},selectChild:function(e){this.item(e).set("selected",1)},selectAll:function(){this.set("selected",1)},deselectAll:function(){this.set("selected",0)},_uiAddChild:function(e,a){e.render(a);var r=e.get("boundingBox"),s,n=e.next(!1),i;n&&n.get(l)?(s=n.get(d),s.insert(r,"before")):(i=e.previous(!1),i&&i.get(l)?(s=i.get(d),s.insert(r,"after")):a.contains(r)||a.appendChild(r))},_uiRemoveChild:function(e){e.get("boundingBox").remove()},_afterAddChild:function(e){var a=e.child;a.get("parent")==this&&this._uiAddChild(a,this._childrenContainer)},_afterRemoveChild:function(e){var a=e.child;a._oldParent==this&&this._uiRemoveChild(a)},_bindUIParent:function(){this.after("addChild",this._afterAddChild),this.after("removeChild",this._afterRemoveChild)},_renderChildren:function(){var e=this._childrenContainer||this.get("contentBox");this._childrenContainer=e,this.each(function(a){a.render(e)})},_destroyChildren:function(){this._hDestroyChild.detach(),this.each(function(e){e.destroy()})}},c.augment(o,c.ArrayList),c.WidgetParent=o},"3.17.2",{requires:["arraylist","base-build","widget"]})},270010:function(){YUI.add("widget-position-align",function(c,b){var t=c.Lang,l="align",d="alignOn",o="visible",e="boundingBox",a="offsetWidth",r="offsetHeight",s="region",n="viewportRegion";function i(u){}i.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:!1,value:!1},alignOn:{value:[],validator:c.Lang.isArray}},i.TL="tl",i.TR="tr",i.BL="bl",i.BR="br",i.TC="tc",i.RC="rc",i.BC="bc",i.LC="lc",i.CC="cc",i.prototype={initializer:function(){this._posNode||c.error("WidgetPosition needs to be added to the Widget, before WidgetPositionAlign is added"),c.after(this._bindUIPosAlign,this,"bindUI"),c.after(this._syncUIPosAlign,this,"syncUI")},_posAlignUIHandles:null,destructor:function(){this._detachPosAlignUIHandles()},_bindUIPosAlign:function(){this.after("alignChange",this._afterAlignChange),this.after("alignOnChange",this._afterAlignOnChange),this.after("visibleChange",this._syncUIPosAlign)},_syncUIPosAlign:function(){var u=this.get(l);this._uiSetVisiblePosAlign(this.get(o)),u&&this._uiSetAlign(u.node,u.points)},align:function(u,h){return arguments.length?this.set(l,{node:u,points:h}):this._syncUIPosAlign(),this},centered:function(u){return this.align(u,[i.CC,i.CC])},_setAlignCenter:function(u){return u&&this.set(l,{node:u===!0?null:u,points:[i.CC,i.CC]}),u},_uiSetAlign:function(u,h){if(!t.isArray(h)||h.length!==2){c.error("align: Invalid Points Arguments");return}var g=this._getRegion(u),p,f,m;if(g){switch(p=h[0],f=h[1],f){case i.TL:m=[g.left,g.top];break;case i.TR:m=[g.right,g.top];break;case i.BL:m=[g.left,g.bottom];break;case i.BR:m=[g.right,g.bottom];break;case i.TC:m=[g.left+Math.floor(g.width/2),g.top];break;case i.BC:m=[g.left+Math.floor(g.width/2),g.bottom];break;case i.LC:m=[g.left,g.top+Math.floor(g.height/2)];break;case i.RC:m=[g.right,g.top+Math.floor(g.height/2)];break;case i.CC:m=[g.left+Math.floor(g.width/2),g.top+Math.floor(g.height/2)];break;default:break}m&&this._doAlign(p,m[0],m[1])}},_uiSetVisiblePosAlign:function(u){u?this._attachPosAlignUIHandles():this._detachPosAlignUIHandles()},_attachPosAlignUIHandles:function(){if(!this._posAlignUIHandles){var u=this.get(e),h=c.bind(this._syncUIPosAlign,this),g=[];c.Array.each(this.get(d),function(p){var f=p.eventName,m=c.one(p.node)||u;f&&g.push(m.on(f,h))}),this._posAlignUIHandles=g}},_detachPosAlignUIHandles:function(){var u=this._posAlignUIHandles;u&&(new c.EventHandle(u).detach(),this._posAlignUIHandles=null)},_doAlign:function(u,h,g){var p=this._posNode,f;switch(u){case i.TL:f=[h,g];break;case i.TR:f=[h-p.get(a),g];break;case i.BL:f=[h,g-p.get(r)];break;case i.BR:f=[h-p.get(a),g-p.get(r)];break;case i.TC:f=[h-p.get(a)/2,g];break;case i.BC:f=[h-p.get(a)/2,g-p.get(r)];break;case i.LC:f=[h,g-p.get(r)/2];break;case i.RC:f=[h-p.get(a),g-p.get(r)/2];break;case i.CC:f=[h-p.get(a)/2,g-p.get(r)/2];break;default:break}f&&this.move(f)},_getRegion:function(u){var h;return u?(u=c.Node.one(u),u&&(h=u.get(s))):h=this._posNode.get(n),h},_afterAlignChange:function(u){var h=u.newVal;h&&this._uiSetAlign(h.node,h.points)},_afterAlignOnChange:function(u){this._detachPosAlignUIHandles(),this.get(o)&&this._attachPosAlignUIHandles()}},c.WidgetPositionAlign=i},"3.17.2",{requires:["widget-position"]})},658086:function(){YUI.add("widget-position-constrain",function(c,b){var t="constrain",l="constrain|xyChange",d="constrainChange",o="preventOverlap",e="align",a="",r="bindUI",s="xy",n="x",i="y",u=c.Node,h="viewportRegion",g="region",p;function f(m){}f.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:!1}},p=f._PREVENT_OVERLAP={x:{tltr:1,blbr:1,brbl:1,trtl:1},y:{trbr:1,tlbl:1,bltl:1,brtr:1}},f.prototype={initializer:function(){this._posNode||c.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added"),c.after(this._bindUIPosConstrained,this,r)},getConstrainedXY:function(m,_){_=_||this.get(t);var v=this._getRegion(_===!0?null:_),E=this._posNode.get(g);return[this._constrain(m[0],n,E,v),this._constrain(m[1],i,E,v)]},constrain:function(m,_){var v,E,S=_||this.get(t);S&&(v=m||this.get(s),E=this.getConstrainedXY(v,S),(E[0]!==v[0]||E[1]!==v[1])&&this.set(s,E,{constrained:!0}))},_setConstrain:function(m){return m===!0?m:u.one(m)},_constrain:function(m,_,v,E){if(E){this.get(o)&&(m=this._preventOverlap(m,_,v,E));var S=_==n,y=S?E.width:E.height,C=S?v.width:v.height,O=S?E.left:E.top,A=S?E.right-C:E.bottom-C;(m<O||m>A)&&(C<y?m<O?m=O:m>A&&(m=A):m=O)}return m},_preventOverlap:function(m,_,v,E){var S=this.get(e),y=_===n,C,O,A,I,D,T;return S&&S.points&&p[_][S.points.join(a)]&&(O=this._getRegion(S.node),O&&(C=y?v.width:v.height,A=y?O.left:O.top,I=y?O.right:O.bottom,D=y?O.left-E.left:O.top-E.top,T=y?E.right-O.right:E.bottom-O.bottom),m>A?T<C&&D>C&&(m=A-C):D<C&&T>C&&(m=I)),m},_bindUIPosConstrained:function(){this.after(d,this._afterConstrainChange),this._enableConstraints(this.get(t))},_afterConstrainChange:function(m){this._enableConstraints(m.newVal)},_enableConstraints:function(m){m?(this.constrain(),this._cxyHandle=this._cxyHandle||this.on(l,this._constrainOnXYChange)):this._cxyHandle&&(this._cxyHandle.detach(),this._cxyHandle=null)},_constrainOnXYChange:function(m){m.constrained||(m.newVal=this.getConstrainedXY(m.newVal))},_getRegion:function(m){var _;return m?(m=u.one(m),m&&(_=m.get(g))):_=this._posNode.get(h),_}},c.WidgetPositionConstrain=f},"3.17.2",{requires:["widget-position"]})},34813:function(){YUI.add("widget-skin",function(c,b){var t="boundingBox",l="contentBox",d="skin",o=c.ClassNameManager.getClassName;c.Widget.prototype.getSkinName=function(e){var a=this.get(l)||this.get(t),r,s;return e=e||o(d,""),s=new RegExp("\\b"+e+"(\\S+)"),a&&a.ancestor(function(n){return r=n.get("className").match(s),r}),r?r[1]:null}},"3.17.2",{requires:["widget-base"]})},564999:function(){YUI.add("widget-stack",function(c,b){var t=c.Lang,l=c.UA,d=c.Node,o=c.Widget,e="zIndex",a="shim",r="visible",s="boundingBox",n="renderUI",i="bindUI",u="syncUI",h="offsetWidth",g="offsetHeight",p="parentNode",f="firstChild",m="ownerDocument",_="width",v="height",E="px",S="shimdeferred",y="shimresize",C="visibleChange",O="widthChange",A="heightChange",I="shimChange",D="zIndexChange",T="contentUpdate",B="stacked";function N(P){}N.ATTRS={shim:{value:l.ie==6},zIndex:{value:0,setter:"_setZIndex"}},N.HTML_PARSER={zIndex:function(P){return this._parseZIndex(P)}},N.SHIM_CLASS_NAME=o.getClassName(a),N.STACKED_CLASS_NAME=o.getClassName(B),N.SHIM_TEMPLATE='<iframe class="'+N.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>',N.prototype={initializer:function(){this._stackNode=this.get(s),this._stackHandles={},c.after(this._renderUIStack,this,n),c.after(this._syncUIStack,this,u),c.after(this._bindUIStack,this,i)},_syncUIStack:function(){this._uiSetShim(this.get(a)),this._uiSetZIndex(this.get(e))},_bindUIStack:function(){this.after(I,this._afterShimChange),this.after(D,this._afterZIndexChange)},_renderUIStack:function(){this._stackNode.addClass(N.STACKED_CLASS_NAME)},_parseZIndex:function(P){var x;return!P.inDoc()||P.getStyle("position")==="static"?x="auto":x=P.getComputedStyle("zIndex"),x==="auto"?null:x},_setZIndex:function(P){return t.isString(P)&&(P=parseInt(P,10)),t.isNumber(P)||(P=0),P},_afterShimChange:function(P){this._uiSetShim(P.newVal)},_afterZIndexChange:function(P){this._uiSetZIndex(P.newVal)},_uiSetZIndex:function(P){this._stackNode.setStyle(e,P)},_uiSetShim:function(P){P?(this.get(r)?this._renderShim():this._renderShimDeferred(),l.ie==6&&this._addShimResizeHandlers()):this._destroyShim()},_renderShimDeferred:function(){this._stackHandles[S]=this._stackHandles[S]||[];var P=this._stackHandles[S],x=function(R){R.newVal&&this._renderShim()};P.push(this.on(C,x))},_addShimResizeHandlers:function(){this._stackHandles[y]=this._stackHandles[y]||[];var P=this.sizeShim,x=this._stackHandles[y];x.push(this.after(C,P)),x.push(this.after(O,P)),x.push(this.after(A,P)),x.push(this.after(T,P))},_detachStackHandles:function(P){var x=this._stackHandles[P],R;if(x&&x.length>0)for(;R=x.pop();)R.detach()},_renderShim:function(){var P=this._shimNode,x=this._stackNode;P||(P=this._shimNode=this._getShimTemplate(),x.insertBefore(P,x.get(f)),this._detachStackHandles(S),this.sizeShim())},_destroyShim:function(){this._shimNode&&(this._shimNode.get(p).removeChild(this._shimNode),this._shimNode=null,this._detachStackHandles(S),this._detachStackHandles(y))},sizeShim:function(){var P=this._shimNode,x=this._stackNode;P&&l.ie===6&&this.get(r)&&(P.setStyle(_,x.get(h)+E),P.setStyle(v,x.get(g)+E))},_getShimTemplate:function(){return d.create(N.SHIM_TEMPLATE,this._stackNode.get(m))}},c.WidgetStack=N},"3.17.2",{requires:["base-build","widget"],skinnable:!0})},743815:function(){YUI.add("widget-stdmod",function(c,b){var t=c.Lang,l=c.Node,d=c.UA,o=c.Widget,e="",a="hd",r="bd",s="ft",n="header",i="body",u="footer",h="fillHeight",g="stdmod",p="Node",f="Content",m="firstChild",_="childNodes",v="ownerDocument",E="contentBox",S="height",y="offsetHeight",C="auto",O="headerContentChange",A="bodyContentChange",I="footerContentChange",D="fillHeightChange",T="heightChange",B="contentUpdate",N="renderUI",P="bindUI",x="syncUI",R="_applyParsedConfig",w=c.Widget.UI_SRC;function k(Q){}k.HEADER=n,k.BODY=i,k.FOOTER=u,k.AFTER="after",k.BEFORE="before",k.REPLACE="replace";var q=k.HEADER,F=k.BODY,z=k.FOOTER,j=q+f,X=z+f,J=F+f;k.ATTRS={headerContent:{value:null},footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:k.BODY,validator:function(Q){return this._validateFillHeight(Q)}}},k.HTML_PARSER={headerContent:function(Q){return this._parseStdModHTML(q)},bodyContent:function(Q){return this._parseStdModHTML(F)},footerContent:function(Q){return this._parseStdModHTML(z)}},k.SECTION_CLASS_NAMES={header:o.getClassName(a),body:o.getClassName(r),footer:o.getClassName(s)},k.TEMPLATES={header:'<div class="'+k.SECTION_CLASS_NAMES[q]+'"></div>',body:'<div class="'+k.SECTION_CLASS_NAMES[F]+'"></div>',footer:'<div class="'+k.SECTION_CLASS_NAMES[z]+'"></div>'},k.prototype={initializer:function(){this._stdModNode=this.get(E),c.before(this._renderUIStdMod,this,N),c.before(this._bindUIStdMod,this,P),c.before(this._syncUIStdMod,this,x)},_syncUIStdMod:function(){var Q=this._stdModParsed;(!Q||!Q[j])&&this._uiSetStdMod(q,this.get(j)),(!Q||!Q[J])&&this._uiSetStdMod(F,this.get(J)),(!Q||!Q[X])&&this._uiSetStdMod(z,this.get(X)),this._uiSetFillHeight(this.get(h))},_renderUIStdMod:function(){this._stdModNode.addClass(o.getClassName(g)),this._renderStdModSections(),this.after(O,this._afterHeaderChange),this.after(A,this._afterBodyChange),this.after(I,this._afterFooterChange)},_renderStdModSections:function(){t.isValue(this.get(j))&&this._renderStdMod(q),t.isValue(this.get(J))&&this._renderStdMod(F),t.isValue(this.get(X))&&this._renderStdMod(z)},_bindUIStdMod:function(){this.after(D,this._afterFillHeightChange),this.after(T,this._fillHeight),this.after(B,this._fillHeight)},_afterHeaderChange:function(Q){Q.src!==w&&this._uiSetStdMod(q,Q.newVal,Q.stdModPosition)},_afterBodyChange:function(Q){Q.src!==w&&this._uiSetStdMod(F,Q.newVal,Q.stdModPosition)},_afterFooterChange:function(Q){Q.src!==w&&this._uiSetStdMod(z,Q.newVal,Q.stdModPosition)},_afterFillHeightChange:function(Q){this._uiSetFillHeight(Q.newVal)},_validateFillHeight:function(Q){return!Q||Q==k.BODY||Q==k.HEADER||Q==k.FOOTER},_uiSetFillHeight:function(Q){var ie=this.getStdModNode(Q),ce=this._currFillNode;ce&&ie!==ce&&ce.setStyle(S,e),ie&&(this._currFillNode=ie),this._fillHeight()},_fillHeight:function(){if(this.get(h)){var Q=this.get(S);Q!=e&&Q!=C&&this.fillHeight(this.getStdModNode(this.get(h)))}},_uiSetStdMod:function(Q,ie,ce){if(t.isValue(ie)){var pe=this.getStdModNode(Q,!0);this._addStdModContent(pe,ie,ce),this.set(Q+f,this._getStdModContent(Q),{src:w})}else this._eraseStdMod(Q);this.fire(B)},_renderStdMod:function(Q){var ie=this.get(E),ce=this._findStdModSection(Q);return ce||(ce=this._getStdModTemplate(Q)),this._insertStdModSection(ie,Q,ce),this[Q+p]=ce,this[Q+p]},_eraseStdMod:function(Q){var ie=this.getStdModNode(Q);ie&&(ie.remove(!0),delete this[Q+p])},_insertStdModSection:function(Q,ie,ce){var pe=Q.get(m);if(ie===z||!pe)Q.appendChild(ce);else if(ie===q)Q.insertBefore(ce,pe);else{var ye=this[z+p];ye?Q.insertBefore(ce,ye):Q.appendChild(ce)}},_getStdModTemplate:function(Q){return l.create(k.TEMPLATES[Q],this._stdModNode.get(v))},_addStdModContent:function(Q,ie,ce){switch(ce){case k.BEFORE:ce=0;break;case k.AFTER:ce=void 0;break;default:ce=k.REPLACE}Q.insert(ie,ce)},_getPreciseHeight:function(Q){var ie=Q?Q.get(y):0,ce="getBoundingClientRect";if(Q&&Q.hasMethod(ce)){var pe=Q.invoke(ce);pe&&(ie=pe.bottom-pe.top)}return ie},_findStdModSection:function(Q){return this.get(E).one("> ."+k.SECTION_CLASS_NAMES[Q])},_parseStdModHTML:function(Q){var ie=this._findStdModSection(Q);return ie?(this._stdModParsed||(this._stdModParsed={},c.before(this._applyStdModParsedConfig,this,R)),this._stdModParsed[Q+f]=1,ie.get("innerHTML")):null},_applyStdModParsedConfig:function(Q,ie,ce){var pe=this._stdModParsed;pe&&(pe[j]=!(j in ie)&&j in pe,pe[J]=!(J in ie)&&J in pe,pe[X]=!(X in ie)&&X in pe)},_getStdModContent:function(Q){return this[Q+p]?this[Q+p].get(_):null},setStdModContent:function(Q,ie,ce){this.set(Q+f,ie,{stdModPosition:ce})},getStdModNode:function(Q,ie){var ce=this[Q+p]||null;return!ce&&ie&&(ce=this._renderStdMod(Q)),ce},fillHeight:function(Q){if(Q){for(var ie=this.get(E),ce=[this.headerNode,this.bodyNode,this.footerNode],pe,ye,Ae=0,Je=0,ke=!1,Fe=0,Ie=ce.length;Fe<Ie;Fe++)pe=ce[Fe],pe&&(pe!==Q?Ae+=this._getPreciseHeight(pe):ke=!0);ke&&((d.ie||d.opera)&&Q.set(y,0),ye=ie.get(y)-parseInt(ie.getComputedStyle("paddingTop"),10)-parseInt(ie.getComputedStyle("paddingBottom"),10)-parseInt(ie.getComputedStyle("borderBottomWidth"),10)-parseInt(ie.getComputedStyle("borderTopWidth"),10),t.isNumber(ye)&&(Je=ye-Ae,Je>=0&&Q.set(y,Je)))}}},c.WidgetStdMod=k},"3.17.2",{requires:["base-build","widget"]})},398089:function(){YUI.add("widget-uievents",function(c,b){var t="boundingBox",l=c.Widget,d="render",o=c.Lang,e=":",a=c.Widget._uievts=c.Widget._uievts||{};c.mix(l.prototype,{_destroyUIEvents:function(){var r=c.stamp(this,!0);c.each(a,function(s,n){s.instances[r]&&(delete s.instances[r],c.Object.isEmpty(s.instances)&&(s.handle.detach(),a[n]&&delete a[n]))})},UI_EVENTS:c.Node.DOM_EVENTS,_getUIEventNode:function(){return this.get(t)},_createUIEvent:function(r){var s=this._getUIEventNode(),n=c.stamp(s)+r,i=a[n],u;i||(u=s.delegate(r,function(h){var g=l.getByNode(this);g&&g._filterUIEvent(h)&&g.fire(h.type,{domEvent:h})},"."+c.Widget.getClassName()),a[n]=i={instances:{},handle:u}),i.instances[c.stamp(this)]=1},_filterUIEvent:function(r){return r.currentTarget.compareTo(r.container)||r.container.compareTo(this._getUIEventNode())},_getUIEvent:function(r){if(o.isString(r)){var s=this.parseType(r)[1],n,i;return s&&(n=s.indexOf(e),n>-1&&(s=s.substring(n+e.length)),this.UI_EVENTS[s]&&(i=s)),i}},_initUIEvent:function(r){var s=this._getUIEvent(r),n=this._uiEvtsInitQueue||{};s&&!n[s]&&(this._uiEvtsInitQueue=n[s]=1,this.after(d,function(){this._createUIEvent(s),delete this._uiEvtsInitQueue[s]}))},on:function(r){return this._initUIEvent(r),l.superclass.on.apply(this,arguments)},publish:function(r,s){var n=this._getUIEvent(r);return n&&s&&s.defaultFn&&this._initUIEvent(n),l.superclass.publish.apply(this,arguments)}},!0)},"3.17.2",{requires:["node-event-delegate","widget-base"]})},677582:function(){YUI.add("yui-throttle",function(c,b){/*! Based on work by Simon Willison: http://gist.github.com/292562 */c.throttle=function(t,l){if(l=l||c.config.throttleTime||150,l===-1)return function(){t.apply(this,arguments)};var d=c.Lang.now();return function(){var o=c.Lang.now();o-d>l&&(d=o,t.apply(this,arguments))}}},"3.17.2",{requires:["yui-base"]})},150782:function(c,b,t){"use strict";t.d(b,{U:()=>a,Z:()=>e});var l=t(638204);const d="commerce-afterpay";function o(r){return t(548712)(`./${d}.${r}.yaml`)}const{getI18nInstance:e,setI18nInstance:a}=(0,l.setupLibrary)(d,o)},548712:function(c,b,t){var l={"./commerce-afterpay.en-US.yaml":"995265"};function d(e){var a=o(e);return t(a)}function o(e){if(!t.o(l,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return l[e]}d.keys=function(){return Object.keys(l)},d.resolve=o,c.exports=d,d.id=548712},461037:function(c,b,t){"use strict";t.d(b,{Z:()=>g});var l=t(642979),d=t.n(l),o=t(134521),e=t.n(o),a=t(292649),r=t(336032),s=t(319340),n=t.n(s);const i=100,u=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return p>i?`${i}+`:p.toString()},h=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return p>i?(0,r._6)({one:"More than one item in cart",other:"More than {%n} items in cart"},i,void 0,{notes:`A spoken message that helps non-visual users understand that they're focused on a cart link and that their cart has over N items. The "one" variant will probably never be used, it' just here for completeness.`,project:"website.CartPage"}):(0,r._6)({one:"One item in cart",other:"{%n} items in cart"},p,void 0,{notes:"A spoken message that helps non-visual users understand that they're focused on a cart link and that their cart has N items.",project:"website.CartPage"})};class g{static syncAll(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};g.instances.forEach(m=>m.sync(f))}static mountAll(){const f=Array.from(document.getElementsByClassName(g.CONTAINER_CLASSNAME));for(const m of f)g.instances.push(new g(m))}static isInstanceVisible(f){const{containerEl:m}=f;return m&&m.clientWidth&&m.clientHeight&&m.getBoundingClientRect().top>0}static removePopoverIfExists(){g.popover&&(g.popover.remove(),g.popover=null)}static showAddedItemPopover(f){const m=g.createProductAddedToCartPopover(f.title);let _=null,v=null;const E=e()(()=>{g.popover&&(v&&v.getBoundingClientRect().top<=0&&g.setPopoverToTopRight(),g.instances.forEach(C=>{if(g.isInstanceVisible(C)){const{containerEl:O}=C;v=O,_=C,g.snapPopoverToCart(C,g.popover)}}))},100);g.popover&&window.removeEventListener("scroll",E),g.removePopoverIfExists(),g.popover=m,g.instances.forEach(C=>{if(g.isInstanceVisible(C)){const{containerEl:O}=C;v=O,_=C}}),g.popover.querySelector(".close").addEventListener("click",()=>{g.removePopoverIfExists(),window.removeEventListener("scroll",E)}),window.addEventListener("scroll",E),setTimeout(()=>{g.removePopoverIfExists(),window.removeEventListener("scroll",E)},3e3),v&&_?g.snapPopoverToCart(_,m):g.setPopoverToTopRight();const S=document.querySelector(".product-list-section"),y=S instanceof HTMLElement?S.dataset.sectionTheme:null;y&&m.setAttribute("data-section-theme",y),document.body.append(g.popover),m.classList.remove("hidden")}static setPopoverToTopRight(){g.popover&&(g.popover.style.marginTop="33px",g.popover.style.top="0px")}static snapPopoverToCart(f,m){var _;const{containerEl:v}=f,E=v==null?void 0:v.parentNode,S=v;if(!S)return;let y=S.getBoundingClientRect();if(E!=null&&E.classList.contains("floating-cart")){y=E==null?void 0:E.getBoundingClientRect(),m.style.bottom=`${y.bottom-y.top+33}px`,m.style.right=`${window.innerWidth-y.right}px`;return}const C=(_=document.querySelector("header"))===null||_===void 0||(_=_.getBoundingClientRect())===null||_===void 0?void 0:_.height;let O=y.top+y.height;const A=16;C?O=C+A:O+=A,m.style.marginTop="0",m.style.top=`${O}px`}static createProductAddedToCartPopover(f){const m=(0,r.t)("{productName} was added to your cart.",{productName:f},{project:"website.CartPage"}),_=(0,r.t)("Close",null,{project:"website.CartPage"}),v=document.createElement("div"),E=document.createElement("p"),S=document.createElement("span");return v.classList.add("template-cart-item-added-popover","hidden"),S.classList.add("close"),E.append(m),S.setAttribute("aria-label",_),S.setAttribute("role","button"),S.innerHTML='<svg color="gray.100" fill="currentColor" height="28" viewBox="0 0 22 22" width="28" xmlns="http://www.w3.org/2000/svg" role="img" class="css-1fy6kej"><path d="M11 12.414l-3.293 3.293-1.414-1.414L9.586 11 6.293 7.707l1.414-1.414L11 9.586l3.293-3.293 1.414 1.414L12.414 11l3.293 3.293-1.414 1.414L11 12.414z"></path></svg>',v.append(E),v.append(S),v}static unmountAll(){g.instances=[]}constructor(f){d()(this,"initialized",!1),d()(this,"containerEl",null),d()(this,"quantityEl",null),d()(this,"subtotalEl",null),this.containerEl=f,this.containerEl.classList.add(g.CLASSNAME),this.containerEl.setAttribute("data-test","continue-to-cart"),this.containerEl.setAttribute("aria-label",h(0)),this.quantityEl=f.getElementsByClassName(g.QUANTITY_CLASSNAME)[0],this.subtotalEl=f.getElementsByClassName(g.SUBTOTAL_CLASSNAME)[0]}sync(f){let{items:m=0,subtotal:_=""}=f;!this.initialized&&this.containerEl&&(this.containerEl.classList.add(g.INITIALIZED_CLASS),this.initialized=!0),this.containerEl&&(this.quantityEl?(m===0?this.containerEl.classList.add(a.qJ):this.containerEl.classList.remove(a.qJ),this.quantityEl.textContent=u(m),this.containerEl.setAttribute("aria-label",h(m))):this.containerEl.setAttribute("aria-label",(0,r.t)("Cart",null,{notes:"Shopping cart label",project:"website.CartPage"}))),this.subtotalEl&&(this.subtotalEl.textContent=_)}}d()(g,"CONTAINER_CLASSNAME",a.ad),d()(g,"QUANTITY_CLASSNAME",a.tK),d()(g,"SUBTOTAL_CLASSNAME",a.hD),d()(g,"CLASSNAME",a.OP),d()(g,"INITIALIZED_CLASS",a.M2),d()(g,"instances",[]),d()(g,"popover",null)},336032:function(c,b,t){"use strict";t.d(b,{T:()=>y,Wj:()=>f,_6:()=>E,lb:()=>S,t:()=>v});var l=t(555912),d=t(470407),o=t(59794),e=t(708427);const a=(0,e.Z)(),r=new o.default(a),s=new l.default(a),n=new d.default(a),{formatIcuMessage:i}=s,{parseNumber:u}=n,{formatNumber:h,formatCurrency:g,formatCurrencyToParts:p,getCurrencyFractions:f,getCurrencySymbol:m,formatQuantity:_,translate:v,pluralize:E,formatMoney:S}=a,{T:y}=r},708427:function(c,b,t){"use strict";t.d(b,{U:()=>a,Z:()=>e});var l=t(638204);const d="website.CartPage";function o(r){return t(399755)(`./${d}.${r}.yaml`)}const{getI18nInstance:e,setI18nInstance:a}=(0,l.setupLibrary)(d,o)},292649:function(c,b,t){"use strict";t.d(b,{Dz:()=>d,M2:()=>r,OP:()=>a,ad:()=>e,gB:()=>l,hD:()=>n,qJ:()=>i,tK:()=>s});const l="sqs-cart-root",d="sqs-cart-container",o="sqs-has-custom-cart",e="sqs-custom-cart",a="sqs-template-integrated-shopping-cart",r="sqs-cart-initialized",s="sqs-cart-quantity",n="sqs-cart-subtotal",i="cart-quantity-zero"},822054:function(c,b,t){"use strict";t.d(b,{Z:()=>d});var l=t(292649);const d=function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).document.getElementById(l.gB)}},399755:function(c,b,t){var l={"./website.CartPage.en-US.yaml":"281928"};function d(e){var a=o(e);return t(a)}function o(e){if(!t.o(l,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return l[e]}d.keys=function(){return Object.keys(l)},d.resolve=o,c.exports=d,d.id=399755},528215:function(c,b,t){"use strict";t.d(b,{EH:()=>h,TJ:()=>p,qH:()=>f,Yt:()=>u,DU:()=>s,bI:()=>g,aI:()=>a,ZQ:()=>i});var l=t(39994),d=function(m){return m.HIDDEN=".grecaptcha-badge { visibility: hidden; }",m.UNHIDDEN=".grecaptcha-badge { visibility: visible; z-index: 12000 }",m.UNHIDDEN_LIGHTBOX=".grecaptcha-badge { visibility: visible; z-index: 100000001 }",m}(d||{});const o="forms-grecaptcha-badge-style",e=d,a={FORM_BLOCK:"FORM_BLOCK_SUBMISSION",NEWSLETTER_BLOCK:"NEWSLETTER_BLOCK_SUBMISSION",PRODUCT_WAITLIST:"PRODUCT_WAITLIST_SUBMISSION",PROMO_POPUP:"PROMO_POPUP_SUBMISSION"},r=(m,_)=>{const v='script[src*="https://www.google.com/recaptcha/api.js"]',E=m.document.querySelector(v);if(E)E.remove();else if(m.__grecaptchaOnLoadPromise)return m.__grecaptchaOnLoadPromise;return m.__grecaptchaOnLoadPromise=new Promise((S,y)=>{const C="__grecaptchaOnLoadCallback";m[C]=()=>S(),m.document?(0,l.Z)(`https://www.google.com/recaptcha/enterprise.js?onload=${C}&render=${_}`,{doc:m.document}).catch(y):y("[EnterpriseV3ReCaptchaApi] Document was destroyed")}),m.__grecaptchaSiteKey=_,m.__grecaptchaOnLoadPromise},s=async(m,_)=>{if(await r(m,_),!m.document.getElementById(o)){const v=m.document.createElement("style");v.id=o,v.textContent=e.HIDDEN,m.document.head.appendChild(v)}},n=(m,_)=>{const v=m.document.getElementById(o);v&&(v.textContent=_)},i=m=>{let{win:_,isLightbox:v=!1}=m;v?n(_,e.UNHIDDEN_LIGHTBOX):n(_,e.UNHIDDEN)},u=m=>{let{win:_}=m;n(_,e.HIDDEN)},h=m=>{let{element:_,win:v,isLightbox:E=!1}=m;_.addEventListener("focus",()=>{i({win:v,isLightbox:E})})},g=m=>{let{formEl:_,isLightbox:v=!1,win:E}=m;_.querySelectorAll("input, textarea, select").forEach(S=>{h({element:S,win:E,isLightbox:v})})},p=async(m,_)=>{var v;await((m==null?void 0:m.__grecaptchaOnLoadPromise)??Promise.resolve());const E=m==null||(v=m.grecaptcha)===null||v===void 0?void 0:v.enterprise;return E?new Promise(S=>{E.ready(()=>{try{E.execute(m.__grecaptchaSiteKey,{action:_}).then(y=>{S(y)})}catch{S(null)}})}):Promise.resolve(null)},f=m=>{const _=m.querySelector(".captcha-container");return _||null}},869670:function(c,b,t){"use strict";t.d(b,{U:()=>a,Z:()=>e});var l=t(638204);const d="website.ProductReviews";function o(r){return t(60103)(`./${d}.${r}.yaml`)}const{getI18nInstance:e,setI18nInstance:a}=(0,l.setupLibrary)(d,o)},60103:function(c,b,t){var l={"./website.ProductReviews.en-US.yaml":"251707"};function d(e){var a=o(e);return t(a)}function o(e){if(!t.o(l,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return l[e]}d.keys=function(){return Object.keys(l)},d.resolve=o,c.exports=d,d.id=60103},442010:function(){YUI.add("squarespace-announcement-bar-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["announcement-bar.html"]=l({1:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return`<a
  class="sqs-announcement-bar-url"
  `+((n=i(a,"if").call(e??(o.nullContext||{}),(n=e!=null?i(e,"clickthroughUrl"):e)!=null?i(n,"newWindow"):n,{name:"if",hash:{},fn:o.program(2,s,0),inverse:o.noop,data:s,loc:{start:{line:4,column:2},end:{line:4,column:57}}}))!=null?n:"")+`
  href="`+o.escapeExpression(o.lambda((n=e!=null?i(e,"clickthroughUrl"):e)!=null?i(n,"url"):n,e))+`"
  aria-labelledby="announcement-bar-text-inner-id"
></a>
`},2:function(o,e,a,r,s){return'target="_blank"'},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i,u=e??(o.nullContext||{}),h=o.hooks.helperMissing,g="function",p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return((n=p(a,"if").call(u,(n=e!=null?p(e,"clickthroughUrl"):e)!=null?p(n,"url"):n,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:1,column:0},end:{line:9,column:7}}}))!=null?n:"")+`
<div class="sqs-announcement-bar-text">
  <span
    class="sqs-announcement-bar-close"
    tabindex="0"
    role="button"
    aria-label="`+o.escapeExpression((i=(i=p(a,"closeButtonLabel")||(e!=null?p(e,"closeButtonLabel"):e))!=null?i:h,typeof i===g?i.call(u,{name:"closeButtonLabel",hash:{},data:s,loc:{start:{line:16,column:16},end:{line:16,column:36}}}):i))+`"></span>
  <div
    id="announcement-bar-text-inner-id"
    class="sqs-announcement-bar-text-inner"
  >
    `+((n=(i=(i=p(a,"text")||(e!=null?p(e,"text"):e))!=null?i:h,typeof i===g?i.call(u,{name:"text",hash:{},data:s,loc:{start:{line:27,column:4},end:{line:27,column:14}}}):i))!=null?n:"")+`
  </div>
</div>
`},useData:!0})})();var t="announcement-bar.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},732336:function(){YUI.add("squarespace-block-audio-player-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["block-audio-player.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h="function",g=o.escapeExpression,p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return`<div class="player">
  <div
    class="action"
    tabindex="0"
  >
    <div class="play">
      <div class="play-button"></div>
    </div>
    <div class="pause">
      <div class="pause-button"></div>
    </div>
  </div>
  <div class="track">
    <span class="played"><span class="icon"></span></span>
  </div>
  <div class="labels">
    <div class="title-wrapper">
      <div class="title" title="`+g((n=(n=p(a,"title")||(e!=null?p(e,"title"):e))!=null?n:u,typeof n===h?n.call(i,{name:"title",hash:{},data:s,loc:{start:{line:18,column:32},end:{line:18,column:41}}}):n))+'" data-title="'+g((n=(n=p(a,"title")||(e!=null?p(e,"title"):e))!=null?n:u,typeof n===h?n.call(i,{name:"title",hash:{},data:s,loc:{start:{line:18,column:55},end:{line:18,column:64}}}):n))+'">'+g((n=(n=p(a,"title")||(e!=null?p(e,"title"):e))!=null?n:u,typeof n===h?n.call(i,{name:"title",hash:{},data:s,loc:{start:{line:18,column:66},end:{line:18,column:75}}}):n))+`</div>
    </div>
    <div class="artistName" title="`+g((n=(n=p(a,"artistName")||(e!=null?p(e,"artistName"):e))!=null?n:u,typeof n===h?n.call(i,{name:"artistName",hash:{},data:s,loc:{start:{line:20,column:35},end:{line:20,column:49}}}):n))+'">'+g((n=(n=p(a,"artistName")||(e!=null?p(e,"artistName"):e))!=null?n:u,typeof n===h?n.call(i,{name:"artistName",hash:{},data:s,loc:{start:{line:20,column:51},end:{line:20,column:65}}}):n))+`</div>
  </div>
  <div class="secondary-controls">
    <div class="time">
      <span class="progress"></span>
      <span class="total">`+g((n=(n=p(a,"duration")||(e!=null?p(e,"duration"):e))!=null?n:u,typeof n===h?n.call(i,{name:"duration",hash:{},data:s,loc:{start:{line:25,column:26},end:{line:25,column:38}}}):n))+`</span>
    </div>
  </div>
</div>
`},useData:!0})})();var t="block-audio-player.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},138532:function(){YUI.add("squarespace-business-hours-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["business-hours.html"]=l({1:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return"    "+((n=o.lambda((n=(n=e!=null?i(e,"strings"):e)!=null?i(n,"store"):n)!=null?i(n,"open"):n,e))!=null?n:"")+`
`},3:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return"    "+((n=o.lambda((n=(n=e!=null?i(e,"strings"):e)!=null?i(n,"store"):n)!=null?i(n,"closed"):n,e))!=null?n:"")+`
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h=o.lambda,g=o.escapeExpression,p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return`
<div class="sqs-business-hours-store">
`+((n=(p(a,"isStoreOpen")||e&&p(e,"isStoreOpen")||u).call(i,e!=null?p(e,"businessHours"):e,{name:"isStoreOpen",hash:{},fn:o.program(1,s,0),inverse:o.program(3,s,0),data:s,loc:{start:{line:3,column:2},end:{line:7,column:18}}}))!=null?n:"")+`</div>

<div class="sqs-business-hours-day">
  <div class="sqs-business-hours-day-label">`+g(h((n=(n=e!=null?p(e,"strings"):e)!=null?p(n,"daysAbbreviated"):n)!=null?p(n,"monday"):n,e))+`</div>
  <div class="sqs-business-hours-day-hours">
    `+g((p(a,"dailyHours")||e&&p(e,"dailyHours")||u).call(i,(n=e!=null?p(e,"businessHours"):e)!=null?p(n,"monday"):n,{name:"dailyHours",hash:{},data:s,loc:{start:{line:13,column:4},end:{line:13,column:39}}}))+`
  </div>
</div>

<div class="sqs-business-hours-day">
  <div class="sqs-business-hours-day-label">`+g(h((n=(n=e!=null?p(e,"strings"):e)!=null?p(n,"daysAbbreviated"):n)!=null?p(n,"tuesday"):n,e))+`</div>
  <div class="sqs-business-hours-day-hours">
    `+g((p(a,"dailyHours")||e&&p(e,"dailyHours")||u).call(i,(n=e!=null?p(e,"businessHours"):e)!=null?p(n,"tuesday"):n,{name:"dailyHours",hash:{},data:s,loc:{start:{line:20,column:4},end:{line:20,column:40}}}))+`
  </div>
</div>

<div class="sqs-business-hours-day">
  <div class="sqs-business-hours-day-label">`+g(h((n=(n=e!=null?p(e,"strings"):e)!=null?p(n,"daysAbbreviated"):n)!=null?p(n,"wednesday"):n,e))+`</div>
  <div class="sqs-business-hours-day-hours">
    `+g((p(a,"dailyHours")||e&&p(e,"dailyHours")||u).call(i,(n=e!=null?p(e,"businessHours"):e)!=null?p(n,"wednesday"):n,{name:"dailyHours",hash:{},data:s,loc:{start:{line:27,column:4},end:{line:27,column:42}}}))+`
  </div>
</div>

<div class="sqs-business-hours-day">
  <div class="sqs-business-hours-day-label">`+g(h((n=(n=e!=null?p(e,"strings"):e)!=null?p(n,"daysAbbreviated"):n)!=null?p(n,"thursday"):n,e))+`</div>
  <div class="sqs-business-hours-day-hours">
    `+g((p(a,"dailyHours")||e&&p(e,"dailyHours")||u).call(i,(n=e!=null?p(e,"businessHours"):e)!=null?p(n,"thursday"):n,{name:"dailyHours",hash:{},data:s,loc:{start:{line:34,column:4},end:{line:34,column:41}}}))+`
  </div>
</div>

<div class="sqs-business-hours-day">
  <div class="sqs-business-hours-day-label">`+g(h((n=(n=e!=null?p(e,"strings"):e)!=null?p(n,"daysAbbreviated"):n)!=null?p(n,"friday"):n,e))+`</div>
  <div class="sqs-business-hours-day-hours">
    `+g((p(a,"dailyHours")||e&&p(e,"dailyHours")||u).call(i,(n=e!=null?p(e,"businessHours"):e)!=null?p(n,"friday"):n,{name:"dailyHours",hash:{},data:s,loc:{start:{line:41,column:4},end:{line:41,column:39}}}))+`
  </div>
</div>

<div class="sqs-business-hours-day">
  <div class="sqs-business-hours-day-label">`+g(h((n=(n=e!=null?p(e,"strings"):e)!=null?p(n,"daysAbbreviated"):n)!=null?p(n,"saturday"):n,e))+`</div>
  <div class="sqs-business-hours-day-hours">
    `+g((p(a,"dailyHours")||e&&p(e,"dailyHours")||u).call(i,(n=e!=null?p(e,"businessHours"):e)!=null?p(n,"saturday"):n,{name:"dailyHours",hash:{},data:s,loc:{start:{line:48,column:4},end:{line:48,column:41}}}))+`
  </div>
</div>

<div class="sqs-business-hours-day">
  <div class="sqs-business-hours-day-label">`+g(h((n=(n=e!=null?p(e,"strings"):e)!=null?p(n,"daysAbbreviated"):n)!=null?p(n,"sunday"):n,e))+`</div>
  <div class="sqs-business-hours-day-hours">
    `+g((p(a,"dailyHours")||e&&p(e,"dailyHours")||u).call(i,(n=e!=null?p(e,"businessHours"):e)!=null?p(n,"sunday"):n,{name:"dailyHours",hash:{},data:s,loc:{start:{line:55,column:4},end:{line:55,column:39}}}))+`
  </div>
</div>
`},useData:!0})})();var t="business-hours.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},838271:function(){YUI.add("squarespace-calendar-day-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["calendar-day.html"]=l({1:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return"	"+((n=i(a,"if").call(e??(o.nullContext||{}),(n=(n=e!=null?i(e,"events"):e)!=null?i(n,"1"):n)!=null?i(n,"title"):n,{name:"if",hash:{},fn:o.program(2,s,0),inverse:o.program(4,s,0),data:s,loc:{start:{line:2,column:1},end:{line:14,column:8}}}))!=null?n:"")},2:function(o,e,a,r,s){return""},4:function(o,e,a,r,s){var n,i=o.lambda,u=o.escapeExpression,h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return`
	<div class="background`+((n=h(a,"if").call(e??(o.nullContext||{}),(n=(n=(n=e!=null?h(e,"events"):e)!=null?h(n,"0"):n)!=null?h(n,"structuredContent"):n)!=null?h(n,"startDate"):n,{name:"if",hash:{},fn:o.program(5,s,0),inverse:o.noop,data:s,loc:{start:{line:3,column:23},end:{line:3,column:105}}}))!=null?n:"")+`">
    <a href="`+u(i((n=(n=e!=null?h(e,"events"):e)!=null?h(n,"0"):n)!=null?h(n,"fullUrl"):n,e))+`" class="background-image-link">
      <img
        alt="`+u(i((n=(n=e!=null?h(e,"events"):e)!=null?h(n,"0"):n)!=null?h(n,"title"):n,e))+`"
        data-src="`+u(i((n=(n=e!=null?h(e,"events"):e)!=null?h(n,"0"):n)!=null?h(n,"assetUrl"):n,e))+`"
        data-image-dimensions="`+u(i((n=(n=e!=null?h(e,"events"):e)!=null?h(n,"0"):n)!=null?h(n,"originalSize"):n,e))+`"
        data-load="false"
        class="background-image"
      >
    </a>
	</div>
`},5:function(o,e,a,r,s){return" background--iseventscollection"},7:function(o,e,a,r,s){var n,i,u,h=e??(o.nullContext||{}),g=o.hooks.helperMissing,p="function",f=o.hooks.blockHelperMissing,m=o.lookupProperty||function(v,E){if(Object.prototype.hasOwnProperty.call(v,E))return v[E]},_='<ul class="itemlist'+((n=m(a,"if").call(h,(n=(n=(n=e!=null?m(e,"events"):e)!=null?m(n,"0"):n)!=null?m(n,"structuredContent"):n)!=null?m(n,"startDate"):n,{name:"if",hash:{},fn:o.program(8,s,0),inverse:o.noop,data:s,loc:{start:{line:23,column:19},end:{line:23,column:99}}}))!=null?n:"")+`">
`;return n=(i=(i=m(a,"events")||(e!=null?m(e,"events"):e))!=null?i:g,u={name:"events",hash:{},fn:o.program(10,s,0),inverse:o.noop,data:s,loc:{start:{line:24,column:1},end:{line:34,column:12}}},typeof i===p?i.call(h,u):i),m(a,"events")||(n=f.call(e,n,u)),n!=null&&(_+=n),_+=`</ul>

<ul class="
	flyoutitemlist
	`+((n=m(a,"if").call(h,(n=(n=(n=e!=null?m(e,"events"):e)!=null?m(n,"0"):n)!=null?m(n,"structuredContent"):n)!=null?m(n,"startDate"):n,{name:"if",hash:{},fn:o.program(18,s,0),inverse:o.noop,data:s,loc:{start:{line:39,column:1},end:{line:39,column:87}}}))!=null?n:"")+`
`+((n=m(a,"if").call(h,(n=(n=e!=null?m(e,"events"):e)!=null?m(n,"1"):n)!=null?m(n,"title"):n,{name:"if",hash:{},fn:o.program(20,s,0),inverse:o.program(22,s,0),data:s,loc:{start:{line:40,column:1},end:{line:52,column:8}}}))!=null?n:"")+`">
`,n=(i=(i=m(a,"events")||(e!=null?m(e,"events"):e))!=null?i:g,u={name:"events",hash:{},fn:o.program(29,s,0),inverse:o.noop,data:s,loc:{start:{line:54,column:1},end:{line:86,column:12}}},typeof i===p?i.call(h,u):i),m(a,"events")||(n=f.call(e,n,u)),n!=null&&(_+=n),_+`</ul>

<div class="itemcount">`+o.escapeExpression(o.lambda((n=e!=null?m(e,"events"):e)!=null?m(n,"length"):n,e))+`</div>
`},8:function(o,e,a,r,s){return" itemlist--iseventscollection"},10:function(o,e,a,r,s){var n,i,u=e??(o.nullContext||{}),h=o.hooks.helperMissing,g="function",p=o.escapeExpression,f=o.lookupProperty||function(m,_){if(Object.prototype.hasOwnProperty.call(m,_))return m[_]};return'	<li class="item'+((n=f(a,"if").call(u,e!=null?f(e,"isMultiday"):e,{name:"if",hash:{},fn:o.program(11,s,0),inverse:o.noop,data:s,loc:{start:{line:25,column:16},end:{line:25,column:56}}}))!=null?n:"")+((n=f(a,"if").call(u,e!=null?f(e,"isSubsequentDayOfMultidayEvent"):e,{name:"if",hash:{},fn:o.program(13,s,0),inverse:o.noop,data:s,loc:{start:{line:25,column:56},end:{line:25,column:115}}}))!=null?n:"")+`">
		<a href="`+p((i=(i=f(a,"fullUrl")||(e!=null?f(e,"fullUrl"):e))!=null?i:h,typeof i===g?i.call(u,{name:"fullUrl",hash:{},data:s,loc:{start:{line:26,column:11},end:{line:26,column:22}}}):i))+`" class="item-link">
			<span class="item-time item-time--12hr">`+p((f(a,"date-format")||e&&f(e,"date-format")||h).call(u,(n=e!=null?f(e,"structuredContent"):e)!=null?f(n,"startDate"):n,{name:"date-format",hash:{skeleton:"hm"},data:s,loc:{start:{line:27,column:43},end:{line:27,column:100}}}))+`&nbsp;</span>
			<span class="item-time item-time--24hr">`+p((f(a,"date-format")||e&&f(e,"date-format")||h).call(u,(n=e!=null?f(e,"structuredContent"):e)!=null?f(n,"startDate"):n,{name:"date-format",hash:{skeleton:"Hm"},data:s,loc:{start:{line:28,column:43},end:{line:28,column:100}}}))+`&nbsp;</span>
			<span class="item-time item-time--localized">`+p((f(a,"date-format")||e&&f(e,"date-format")||h).call(u,(n=e!=null?f(e,"structuredContent"):e)!=null?f(n,"startDate"):n,{name:"date-format",hash:{time:"short"},data:s,loc:{start:{line:29,column:48},end:{line:29,column:104}}}))+`&nbsp;</span>
			<span class="item-title">`+((n=(i=(i=f(a,"title")||(e!=null?f(e,"title"):e))!=null?i:h,typeof i===g?i.call(u,{name:"title",hash:{},data:s,loc:{start:{line:30,column:28},end:{line:30,column:39}}}):i))!=null?n:"")+`</span>
			`+((n=f(a,"if").call(u,e!=null?f(e,"isMultiday"):e,{name:"if",hash:{},fn:o.program(15,s,0),inverse:o.noop,data:s,loc:{start:{line:31,column:3},end:{line:31,column:145}}}))!=null?n:"")+`
		</a>
	</li>
`},11:function(o,e,a,r,s){return" item--multiday"},13:function(o,e,a,r,s){return" item--ongoing"},15:function(o,e,a,r,s){var n,i,u,h=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]},g='<span class="item-enddate">';return n=(i=(i=h(a,"end-date")||(e!=null?h(e,"end-date"):e))!=null?i:o.hooks.helperMissing,u={name:"end-date",hash:{},fn:o.program(16,s,0),inverse:o.noop,data:s,loc:{start:{line:31,column:48},end:{line:31,column:131}}},typeof i=="function"?i.call(e??(o.nullContext||{}),u):i),h(a,"end-date")||(n=o.hooks.blockHelperMissing.call(e,n,u)),n!=null&&(g+=n),g+"</span>"},16:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return o.escapeExpression((i(a,"date-format")||e&&i(e,"date-format")||o.hooks.helperMissing).call(e??(o.nullContext||{}),(n=e!=null?i(e,"structuredContent"):e)!=null?i(n,"endDate"):n,{name:"date-format",hash:{skeleton:"MMMd"},data:s,loc:{start:{line:31,column:61},end:{line:31,column:118}}}))},18:function(o,e,a,r,s){return" flyoutitemlist--iseventscollection"},20:function(o,e,a,r,s){return`		flyoutitemlist--hasmorecontent
`},22:function(o,e,a,r,s){var n,i,u,h=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]},g="";return n=(i=(i=h(a,"events")||(e!=null?h(e,"events"):e))!=null?i:o.hooks.helperMissing,u={name:"events",hash:{},fn:o.program(23,s,0),inverse:o.noop,data:s,loc:{start:{line:43,column:2},end:{line:51,column:13}}},typeof i=="function"?i.call(e??(o.nullContext||{}),u):i),h(a,"events")||(n=o.hooks.blockHelperMissing.call(e,n,u)),n!=null&&(g+=n),g},23:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=i(a,"if").call(e??(o.nullContext||{}),e!=null?i(e,"excerpt"):e,{name:"if",hash:{},fn:o.program(24,s,0),inverse:o.program(26,s,0),data:s,loc:{start:{line:44,column:3},end:{line:50,column:10}}}))!=null?n:""},24:function(o,e,a,r,s){return`				flyoutitemlist--hasmorecontent
`},26:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=i(a,"if").call(e??(o.nullContext||{}),(n=e!=null?i(e,"location"):e)!=null?i(n,"addressLine1"):n,{name:"if",hash:{},fn:o.program(27,s,0),inverse:o.noop,data:s,loc:{start:{line:47,column:4},end:{line:49,column:11}}}))!=null?n:""},27:function(o,e,a,r,s){return`					flyoutitemlist--hasmorecontent
`},29:function(o,e,a,r,s){var n,i,u=e??(o.nullContext||{}),h=o.hooks.helperMissing,g="function",p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return'	<li class="flyoutitem'+((n=p(a,"if").call(u,e!=null?p(e,"isMultiday"):e,{name:"if",hash:{},fn:o.program(30,s,0),inverse:o.noop,data:s,loc:{start:{line:55,column:22},end:{line:55,column:68}}}))!=null?n:"")+((n=p(a,"if").call(u,e!=null?p(e,"isSubsequentDayOfMultidayEvent"):e,{name:"if",hash:{},fn:o.program(32,s,0),inverse:o.noop,data:s,loc:{start:{line:55,column:68},end:{line:55,column:133}}}))!=null?n:"")+`">
		<h1 class="flyoutitem-title"><a href="`+o.escapeExpression((i=(i=p(a,"fullUrl")||(e!=null?p(e,"fullUrl"):e))!=null?i:h,typeof i===g?i.call(u,{name:"fullUrl",hash:{},data:s,loc:{start:{line:56,column:40},end:{line:56,column:51}}}):i))+'" class="flyoutitem-link">'+((n=(i=(i=p(a,"title")||(e!=null?p(e,"title"):e))!=null?i:h,typeof i===g?i.call(u,{name:"title",hash:{},data:s,loc:{start:{line:56,column:77},end:{line:56,column:88}}}):i))!=null?n:"")+((n=p(a,"if").call(u,e!=null?p(e,"isMultiday"):e,{name:"if",hash:{},fn:o.program(34,s,0),inverse:o.noop,data:s,loc:{start:{line:56,column:88},end:{line:56,column:237}}}))!=null?n:"")+`&nbsp;<span class="flyoutitem-link-arrow"></span></a></h1>
		<div class="flyoutitem-datetime flyoutitem-datetime--12hr">
`+((n=p(a,"if").call(u,e!=null?p(e,"isMultiday"):e,{name:"if",hash:{},fn:o.program(36,s,0),inverse:o.program(38,s,0),data:s,loc:{start:{line:58,column:3},end:{line:62,column:10}}}))!=null?n:"")+`		</div>
		<div class="flyoutitem-datetime flyoutitem-datetime--24hr">
`+((n=p(a,"if").call(u,e!=null?p(e,"isMultiday"):e,{name:"if",hash:{},fn:o.program(40,s,0),inverse:o.program(42,s,0),data:s,loc:{start:{line:65,column:3},end:{line:69,column:10}}}))!=null?n:"")+`		</div>
		<div class="flyoutitem-datetime flyoutitem-datetime--localized">
`+((n=p(a,"if").call(u,e!=null?p(e,"isMultiday"):e,{name:"if",hash:{},fn:o.program(44,s,0),inverse:o.program(46,s,0),data:s,loc:{start:{line:72,column:3},end:{line:76,column:10}}}))!=null?n:"")+`		</div>
		<div class="flyoutitem-location">
			`+((n=p(a,"if").call(u,(n=e!=null?p(e,"location"):e)!=null?p(n,"addressTitle"):n,{name:"if",hash:{},fn:o.program(48,s,0),inverse:o.noop,data:s,loc:{start:{line:79,column:3},end:{line:79,column:116}}}))!=null?n:"")+`
			`+((n=p(a,"if").call(u,(n=e!=null?p(e,"location"):e)!=null?p(n,"addressLine1"):n,{name:"if",hash:{},fn:o.program(50,s,0),inverse:o.noop,data:s,loc:{start:{line:80,column:3},end:{line:80,column:112}}}))!=null?n:"")+`
			`+((n=p(a,"if").call(u,(n=e!=null?p(e,"location"):e)!=null?p(n,"addressLine2"):n,{name:"if",hash:{},fn:o.program(52,s,0),inverse:o.noop,data:s,loc:{start:{line:81,column:3},end:{line:81,column:112}}}))!=null?n:"")+`
			`+((n=p(a,"if").call(u,(n=e!=null?p(e,"location"):e)!=null?p(n,"addressCountry"):n,{name:"if",hash:{},fn:o.program(54,s,0),inverse:o.noop,data:s,loc:{start:{line:82,column:3},end:{line:82,column:122}}}))!=null?n:"")+`
		</div>
		`+((n=p(a,"if").call(u,e!=null?p(e,"excerpt"):e,{name:"if",hash:{},fn:o.program(56,s,0),inverse:o.noop,data:s,loc:{start:{line:84,column:2},end:{line:84,column:75}}}))!=null?n:"")+`
	</li>
`},30:function(o,e,a,r,s){return" flyoutitem--multiday"},32:function(o,e,a,r,s){return" flyoutitem--ongoing"},34:function(o,e,a,r,s){var n,i,u,h=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]},g=' <span class="flyoutitem-enddate">';return n=(i=(i=h(a,"end-date")||(e!=null?h(e,"end-date"):e))!=null?i:o.hooks.helperMissing,u={name:"end-date",hash:{},fn:o.program(16,s,0),inverse:o.noop,data:s,loc:{start:{line:56,column:140},end:{line:56,column:223}}},typeof i=="function"?i.call(e??(o.nullContext||{}),u):i),h(a,"end-date")||(n=o.hooks.blockHelperMissing.call(e,n,u)),n!=null&&(g+=n),g+"</span>"},36:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h=o.escapeExpression,g=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]};return"				"+h((g(a,"date-format")||e&&g(e,"date-format")||u).call(i,(n=e!=null?g(e,"structuredContent"):e)!=null?g(n,"startDate"):n,{name:"date-format",hash:{skeleton:"EMMMdhm"},data:s,loc:{start:{line:59,column:4},end:{line:59,column:66}}}))+" &ndash; "+h((g(a,"date-format")||e&&g(e,"date-format")||u).call(i,(n=e!=null?g(e,"structuredContent"):e)!=null?g(n,"endDate"):n,{name:"date-format",hash:{skeleton:"EMMMdhm"},data:s,loc:{start:{line:59,column:75},end:{line:59,column:135}}}))+`
`},38:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h=o.escapeExpression,g=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]};return"				"+h((g(a,"date-format")||e&&g(e,"date-format")||u).call(i,(n=e!=null?g(e,"structuredContent"):e)!=null?g(n,"startDate"):n,{name:"date-format",hash:{skeleton:"hm"},data:s,loc:{start:{line:61,column:4},end:{line:61,column:61}}}))+" &ndash; "+h((g(a,"date-format")||e&&g(e,"date-format")||u).call(i,(n=e!=null?g(e,"structuredContent"):e)!=null?g(n,"endDate"):n,{name:"date-format",hash:{skeleton:"hm"},data:s,loc:{start:{line:61,column:70},end:{line:61,column:125}}}))+`
`},40:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h=o.escapeExpression,g=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]};return"				"+h((g(a,"date-format")||e&&g(e,"date-format")||u).call(i,(n=e!=null?g(e,"structuredContent"):e)!=null?g(n,"startDate"):n,{name:"date-format",hash:{skeleton:"EMMMdHm"},data:s,loc:{start:{line:66,column:4},end:{line:66,column:66}}}))+" &ndash; "+h((g(a,"date-format")||e&&g(e,"date-format")||u).call(i,(n=e!=null?g(e,"structuredContent"):e)!=null?g(n,"endDate"):n,{name:"date-format",hash:{skeleton:"EMMMdHm"},data:s,loc:{start:{line:66,column:75},end:{line:66,column:135}}}))+`
`},42:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h=o.escapeExpression,g=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]};return"				"+h((g(a,"date-format")||e&&g(e,"date-format")||u).call(i,(n=e!=null?g(e,"structuredContent"):e)!=null?g(n,"startDate"):n,{name:"date-format",hash:{skeleton:"Hm"},data:s,loc:{start:{line:68,column:4},end:{line:68,column:61}}}))+" &ndash; "+h((g(a,"date-format")||e&&g(e,"date-format")||u).call(i,(n=e!=null?g(e,"structuredContent"):e)!=null?g(n,"endDate"):n,{name:"date-format",hash:{skeleton:"Hm"},data:s,loc:{start:{line:68,column:70},end:{line:68,column:125}}}))+`
`},44:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h=o.escapeExpression,g=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]};return"				"+h((g(a,"date-format")||e&&g(e,"date-format")||u).call(i,(n=e!=null?g(e,"structuredContent"):e)!=null?g(n,"startDate"):n,{name:"date-format",hash:{time:"short",skeleton:"EMMMd"},data:s,loc:{start:{line:73,column:4},end:{line:73,column:77}}}))+" &ndash; "+h((g(a,"date-format")||e&&g(e,"date-format")||u).call(i,(n=e!=null?g(e,"structuredContent"):e)!=null?g(n,"endDate"):n,{name:"date-format",hash:{time:"short",skeleton:"EMMMd"},data:s,loc:{start:{line:73,column:86},end:{line:73,column:157}}}))+`
`},46:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h=o.escapeExpression,g=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]};return"				"+h((g(a,"date-format")||e&&g(e,"date-format")||u).call(i,(n=e!=null?g(e,"structuredContent"):e)!=null?g(n,"startDate"):n,{name:"date-format",hash:{time:"short"},data:s,loc:{start:{line:75,column:4},end:{line:75,column:60}}}))+" &ndash; "+h((g(a,"date-format")||e&&g(e,"date-format")||u).call(i,(n=e!=null?g(e,"structuredContent"):e)!=null?g(n,"endDate"):n,{name:"date-format",hash:{time:"short"},data:s,loc:{start:{line:75,column:69},end:{line:75,column:123}}}))+`
`},48:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'<div class="flyoutitem-location-addresstitle">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"location"):e)!=null?i(n,"addressTitle"):n,e))+"</div>"},50:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'<div class="flyoutitem-location-address1">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"location"):e)!=null?i(n,"addressLine1"):n,e))+"</div>"},52:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'<div class="flyoutitem-location-address2">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"location"):e)!=null?i(n,"addressLine2"):n,e))+"</div>"},54:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'<div class="flyoutitem-location-addresscountry">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"location"):e)!=null?i(n,"addressCountry"):n,e))+"</div>"},56:function(o,e,a,r,s){var n,i,u=o.lookupProperty||function(h,g){if(Object.prototype.hasOwnProperty.call(h,g))return h[g]};return'<div class="flyoutitem-excerpt">'+((n=(i=(i=u(a,"excerpt")||(e!=null?u(e,"excerpt"):e))!=null?i:o.hooks.helperMissing,typeof i=="function"?i.call(e??(o.nullContext||{}),{name:"excerpt",hash:{},data:s,loc:{start:{line:84,column:49},end:{line:84,column:62}}}):i))!=null?n:"")+"</div>"},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h=o.escapeExpression,g=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]};return((n=g(a,"if").call(i,(n=(n=e!=null?g(e,"events"):e)!=null?g(n,"0"):n)!=null?g(n,"systemDataId"):n,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:1,column:0},end:{line:15,column:7}}}))!=null?n:"")+`
<div class="marker">
	<div class="marker-dayname">`+h((g(a,"day-of-month-format")||e&&g(e,"day-of-month-format")||u).call(i,e!=null?g(e,"date"):e,{name:"day-of-month-format",hash:{skeleton:"E"},data:s,loc:{start:{line:18,column:29},end:{line:18,column:70}}}))+`</div>
	<div class="marker-daynum">`+h((g(a,"day-of-month-format")||e&&g(e,"day-of-month-format")||u).call(i,e!=null?g(e,"date"):e,{name:"day-of-month-format",hash:{skeleton:"d"},data:s,loc:{start:{line:19,column:28},end:{line:19,column:69}}}))+`</div>
</div>

`+((n=g(a,"if").call(i,e!=null?g(e,"events"):e,{name:"if",hash:{},fn:o.program(7,s,0),inverse:o.noop,data:s,loc:{start:{line:22,column:0},end:{line:90,column:7}}}))!=null?n:"")},useData:!0})})();var t="calendar-day.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},770466:function(){YUI.add("squarespace-connected-account-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["connected-account.html"]=l({1:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return`    <div class="icon">
      <img src="`+o.escapeExpression((n=(n=i(a,"iconUrl")||(e!=null?i(e,"iconUrl"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"iconUrl",hash:{},data:s,loc:{start:{line:4,column:16},end:{line:4,column:27}}}):n))+`" />
    </div>
`},3:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'    <div class="icon default '+o.escapeExpression((n=(n=i(a,"serviceName")||(e!=null?i(e,"serviceName"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"serviceName",hash:{},data:s,loc:{start:{line:7,column:29},end:{line:7,column:44}}}):n))+`"></div>
`},5:function(o,e,a,r,s){return`    <div class="unauthorized-message">
      <strong>Account is disconnected</strong> &mdash; please <a class="reauthenticate">reauthenticate</a> to reconnect.
    </div>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i,u=e??(o.nullContext||{}),h=o.hooks.helperMissing,g="function",p=o.escapeExpression,f=o.lookupProperty||function(m,_){if(Object.prototype.hasOwnProperty.call(m,_))return m[_]};return'<div class="'+p((i=(i=f(a,"serviceName")||(e!=null?f(e,"serviceName"):e))!=null?i:h,typeof i===g?i.call(u,{name:"serviceName",hash:{},data:s,loc:{start:{line:1,column:12},end:{line:1,column:27}}}):i))+`">
`+((n=f(a,"if").call(u,e!=null?f(e,"iconUrl"):e,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.program(3,s,0),data:s,loc:{start:{line:2,column:2},end:{line:8,column:9}}}))!=null?n:"")+`  <div class="names">
    <div class="user">`+p((f(a,"screenNameForDisplay")||e&&f(e,"screenNameForDisplay")||h).call(u,e,{name:"screenNameForDisplay",hash:{},data:s,loc:{start:{line:10,column:22},end:{line:10,column:51}}}))+`</div>
    <div class="service `+p((i=(i=f(a,"serviceName")||(e!=null?f(e,"serviceName"):e))!=null?i:h,typeof i===g?i.call(u,{name:"serviceName",hash:{},data:s,loc:{start:{line:11,column:24},end:{line:11,column:39}}}):i))+'">'+p((f(a,"serviceNameForDisplay")||e&&f(e,"serviceNameForDisplay")||h).call(u,e,{name:"serviceNameForDisplay",hash:{},data:s,loc:{start:{line:11,column:41},end:{line:11,column:71}}}))+`</div>
  </div>
`+((n=f(a,"if").call(u,e!=null?f(e,"unauthorized"):e,{name:"if",hash:{},fn:o.program(5,s,0),inverse:o.noop,data:s,loc:{start:{line:13,column:2},end:{line:17,column:9}}}))!=null?n:"")+`</div>
`},useData:!0})})();var t="connected-account.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},29076:function(){YUI.add("squarespace-dialog-check-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["dialog-check.html"]=l({1:function(o,e,a,r,s){return"active"},3:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'    <div class="title">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"title"):n,e))+`</div>
`},5:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'    <div class="description">'+((n=o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"description"):n,e))!=null?n:"")+`</div>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.lookupProperty||function(h,g){if(Object.prototype.hasOwnProperty.call(h,g))return h[g]};return'<div class="check-element '+((n=u(a,"if").call(i,e!=null?u(e,"data"):e,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:1,column:26},end:{line:1,column:51}}}))!=null?n:"")+`">
`+((n=u(a,"if").call(i,(n=e!=null?u(e,"strings"):e)!=null?u(n,"title"):n,{name:"if",hash:{},fn:o.program(3,s,0),inverse:o.noop,data:s,loc:{start:{line:2,column:2},end:{line:4,column:9}}}))!=null?n:"")+((n=u(a,"if").call(i,(n=e!=null?u(e,"strings"):e)!=null?u(n,"description"):n,{name:"if",hash:{},fn:o.program(5,s,0),inverse:o.noop,data:s,loc:{start:{line:5,column:2},end:{line:7,column:9}}}))!=null?n:"")+`</div>
`},useData:!0})})();var t="dialog-check.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},914093:function(){YUI.add("squarespace-dialog-content-selector-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["dialog-content-selector.html"]=l({1:function(o,e,a,r,s,n,i){var u,h,g=e??(o.nullContext||{}),p=o.hooks.helperMissing,f="function",m=o.escapeExpression,_=o.lookupProperty||function(v,E){if(Object.prototype.hasOwnProperty.call(v,E))return v[E]};return'  <div class="collection-group" data-title="'+m((h=(h=_(a,"title")||(e!=null?_(e,"title"):e))!=null?h:p,typeof h===f?h.call(g,{name:"title",hash:{},data:s,loc:{start:{line:2,column:44},end:{line:2,column:53}}}):h))+`">
    <div class="collection-group-title">`+m((h=(h=_(a,"title")||(e!=null?_(e,"title"):e))!=null?h:p,typeof h===f?h.call(g,{name:"title",hash:{},data:s,loc:{start:{line:3,column:40},end:{line:3,column:49}}}):h))+`</div>

`+((u=_(a,"each").call(g,e!=null?_(e,"collectionObjects"):e,{name:"each",hash:{},fn:o.program(2,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:5,column:4},end:{line:47,column:13}}}))!=null?u:"")+`
  </div>
`},2:function(o,e,a,r,s,n,i){var u,h,g=e??(o.nullContext||{}),p=o.hooks.helperMissing,f="function",m=o.escapeExpression,_=o.lookupProperty||function(v,E){if(Object.prototype.hasOwnProperty.call(v,E))return v[E]};return'      <div class="collection-wrapper '+((u=_(a,"if").call(g,e!=null?_(e,"filter"):e,{name:"if",hash:{},fn:o.program(3,s,0,n,i),inverse:o.program(5,s,0,n,i),data:s,loc:{start:{line:6,column:37},end:{line:6,column:98}}}))!=null?u:"")+" "+((u=_(a,"if").call(g,e!=null?_(e,"selected"):e,{name:"if",hash:{},fn:o.program(7,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:6,column:99},end:{line:6,column:130}}}))!=null?u:"")+'" data-url-id="'+m((h=(h=_(a,"urlId")||(e!=null?_(e,"urlId"):e))!=null?h:p,typeof h===f?h.call(g,{name:"urlId",hash:{},data:s,loc:{start:{line:6,column:145},end:{line:6,column:154}}}):h))+'" data-collection-id="'+m((h=(h=_(a,"id")||(e!=null?_(e,"id"):e))!=null?h:p,typeof h===f?h.call(g,{name:"id",hash:{},data:s,loc:{start:{line:6,column:176},end:{line:6,column:182}}}):h))+`">
        <div class="collection `+m((h=(h=_(a,"className")||(e!=null?_(e,"className"):e))!=null?h:p,typeof h===f?h.call(g,{name:"className",hash:{},data:s,loc:{start:{line:7,column:31},end:{line:7,column:44}}}):h))+`">
          <span class="collection-title">`+m((h=(h=_(a,"title")||(e!=null?_(e,"title"):e))!=null?h:p,typeof h===f?h.call(g,{name:"title",hash:{},data:s,loc:{start:{line:8,column:41},end:{line:8,column:50}}}):h))+`</span>
`+((u=_(a,"if").call(g,e!=null?_(e,"filter"):e,{name:"if",hash:{},fn:o.program(9,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:9,column:10},end:{line:12,column:17}}}))!=null?u:"")+`
`+((u=_(a,"if").call(g,e!=null?_(e,"dropdown"):e,{name:"if",hash:{},fn:o.program(12,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:14,column:10},end:{line:16,column:17}}}))!=null?u:"")+`        </div>

`+((u=_(a,"if").call(g,e!=null?_(e,"dropdown"):e,{name:"if",hash:{},fn:o.program(14,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:19,column:8},end:{line:45,column:15}}}))!=null?u:"")+`      </div>
`},3:function(o,e,a,r,s){return"has-content-stat-filter"},5:function(o,e,a,r,s){return"no-filter"},7:function(o,e,a,r,s){return"selected"},9:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'            <span class="collection-filter-wrapper"><span class="collection-filter">'+((n=(i(a,"if_eq")||e&&i(e,"if_eq")||o.hooks.helperMissing).call(e??(o.nullContext||{}),(n=e!=null?i(e,"filter"):e)!=null?i(n,"type"):n,{name:"if_eq",hash:{compare:"tag"},fn:o.program(10,s,0),inverse:o.noop,data:s,loc:{start:{line:11,column:84},end:{line:11,column:131}}}))!=null?n:"")+o.escapeExpression(o.lambda((n=e!=null?i(e,"filter"):e)!=null?i(n,"name"):n,e))+`</span></span>
`},10:function(o,e,a,r,s){return"#"},12:function(o,e,a,r,s){return`            <div class="dropdown-button"></div>
`},14:function(o,e,a,r,s,n,i){var u,h=e??(o.nullContext||{}),g=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]};return`          <div class="dropdown">
`+((u=g(a,"if").call(h,e!=null?g(e,"categories"):e,{name:"if",hash:{},fn:o.program(15,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:21,column:12},end:{line:31,column:19}}}))!=null?u:"")+`
`+((u=g(a,"if").call(h,e!=null?g(e,"tags"):e,{name:"if",hash:{},fn:o.program(19,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:33,column:12},end:{line:43,column:19}}}))!=null?u:"")+`          </div>
`},15:function(o,e,a,r,s,n,i){var u,h=o.lambda,g=o.escapeExpression,p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return`              <div class="categories">
                <div class="icon-title">`+g(h((u=i[4]!=null?p(i[4],"strings"):i[4])!=null?p(u,"chooseCategory"):u,e))+`</div>
                <select>
                  <option value="none-selected">`+g(h((u=i[4]!=null?p(i[4],"strings"):i[4])!=null?p(u,"none"):u,e))+`</option>
`+((u=p(a,"each").call(e??(o.nullContext||{}),e!=null?p(e,"categories"):e,{name:"each",hash:{},fn:o.program(16,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:26,column:18},end:{line:28,column:27}}}))!=null?u:"")+`                </select>
              </div>
`},16:function(o,e,a,r,s){var n,i,u=e??(o.nullContext||{}),h=o.hooks.helperMissing,g="function",p=o.escapeExpression,f=o.lookupProperty||function(m,_){if(Object.prototype.hasOwnProperty.call(m,_))return m[_]};return'                    <option value="'+p((i=(i=f(a,"name")||(e!=null?f(e,"name"):e))!=null?i:h,typeof i===g?i.call(u,{name:"name",hash:{},data:s,loc:{start:{line:27,column:35},end:{line:27,column:43}}}):i))+'" '+((n=f(a,"if").call(u,e!=null?f(e,"selected"):e,{name:"if",hash:{},fn:o.program(17,s,0),inverse:o.noop,data:s,loc:{start:{line:27,column:45},end:{line:27,column:87}}}))!=null?n:"")+">"+p((i=(i=f(a,"name")||(e!=null?f(e,"name"):e))!=null?i:h,typeof i===g?i.call(u,{name:"name",hash:{},data:s,loc:{start:{line:27,column:88},end:{line:27,column:96}}}):i))+`</option>
`},17:function(o,e,a,r,s){return'selected="selected"'},19:function(o,e,a,r,s,n,i){var u,h=o.lambda,g=o.escapeExpression,p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return`              <div class="tags">
                <div class="icon-title">`+g(h((u=i[4]!=null?p(i[4],"strings"):i[4])!=null?p(u,"chooseTag"):u,e))+`</div>
                <select>
                  <option value="none-selected">`+g(h((u=i[4]!=null?p(i[4],"strings"):i[4])!=null?p(u,"none"):u,e))+`</option>
`+((u=p(a,"each").call(e??(o.nullContext||{}),e!=null?p(e,"tags"):e,{name:"each",hash:{},fn:o.program(16,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:38,column:18},end:{line:40,column:27}}}))!=null?u:"")+`                </select>
              </div>
`},21:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'  <div class="empty-message">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"emptyMessage"):n,e))+`</div>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s,n,i){var u,h,g,p=e??(o.nullContext||{}),f=o.lookupProperty||function(_,v){if(Object.prototype.hasOwnProperty.call(_,v))return _[v]},m=((u=f(a,"each").call(p,e!=null?f(e,"collectionGroups"):e,{name:"each",hash:{},fn:o.program(1,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:1,column:0},end:{line:50,column:9}}}))!=null?u:"")+`

`;return u=(h=(h=f(a,"collectionGroups")||(e!=null?f(e,"collectionGroups"):e))!=null?h:o.hooks.helperMissing,g={name:"collectionGroups",hash:{},fn:o.noop,inverse:o.program(21,s,0,n,i),data:s,loc:{start:{line:53,column:0},end:{line:55,column:21}}},typeof h=="function"?h.call(p,g):h),f(a,"collectionGroups")||(u=o.hooks.blockHelperMissing.call(e,u,g)),u!=null&&(m+=u),m},useData:!0,useDepths:!0})})();var t="dialog-content-selector.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},811777:function(){YUI.add("squarespace-dialog-email-service-connect-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["dialog-email-service-connect.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h="function",g=o.escapeExpression,p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return`<div class="sqs-content-inner">

  <div class="text">
    <div class="title">`+g((n=(n=p(a,"title")||(e!=null?p(e,"title"):e))!=null?n:u,typeof n===h?n.call(i,{name:"title",hash:{},data:s,loc:{start:{line:4,column:23},end:{line:4,column:32}}}):n))+`</div>
    <div class="message">`+g((n=(n=p(a,"sendingTo")||(e!=null?p(e,"sendingTo"):e))!=null?n:u,typeof n===h?n.call(i,{name:"sendingTo",hash:{},data:s,loc:{start:{line:5,column:25},end:{line:5,column:38}}}):n))+`</div>
  </div>

  <div class="fields"></div>

  <div class="connect">`+g((n=(n=p(a,"connect")||(e!=null?p(e,"connect"):e))!=null?n:u,typeof n===h?n.call(i,{name:"connect",hash:{},data:s,loc:{start:{line:10,column:23},end:{line:10,column:34}}}):n))+`</div>
  <div class="icon"></div>

</div>
`},useData:!0})})();var t="dialog-email-service-connect.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},898588:function(){YUI.add("squarespace-dialog-file-manager-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["dialog-file-manager.html"]=l({1:function(o,e,a,r,s,n,i){var u,h,g=e??(o.nullContext||{}),p=o.hooks.helperMissing,f="function",m=o.escapeExpression,_=o.lookupProperty||function(v,E){if(Object.prototype.hasOwnProperty.call(v,E))return v[E]};return'<div class="attachment '+((u=(_(a,"if_eq")||e&&_(e,"if_eq")||p).call(g,i[1]!=null?_(i[1],"selectedUrlId"):i[1],{name:"if_eq",hash:{compare:e!=null?_(e,"urlId"):e},fn:o.program(2,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:2,column:23},end:{line:2,column:82}}}))!=null?u:"")+'" data-urlId="'+m((h=(h=_(a,"urlId")||(e!=null?_(e,"urlId"):e))!=null?h:p,typeof h===f?h.call(g,{name:"urlId",hash:{},data:s,loc:{start:{line:2,column:96},end:{line:2,column:105}}}):h))+'" data-id="'+m((h=(h=_(a,"id")||(e!=null?_(e,"id"):e))!=null?h:p,typeof h===f?h.call(g,{name:"id",hash:{},data:s,loc:{start:{line:2,column:116},end:{line:2,column:122}}}):h))+`">
  <div class="filename">
    <span class="filename-text">`+m((h=(h=_(a,"filename")||(e!=null?_(e,"filename"):e))!=null?h:p,typeof h===f?h.call(g,{name:"filename",hash:{},data:s,loc:{start:{line:4,column:32},end:{line:4,column:44}}}):h))+`</span>
    <input class="filename-editable" type="text" value="`+m((h=(h=_(a,"filename")||(e!=null?_(e,"filename"):e))!=null?h:p,typeof h===f?h.call(g,{name:"filename",hash:{},data:s,loc:{start:{line:5,column:56},end:{line:5,column:68}}}):h))+`" />
  </div>
  <div class="buttons">
    <div class="edit"><img src="//assets.squarespace.com/universal/images-v6/icons/icon-edit-12-dark.png" /></div>
    <div class="remove"><img src="//assets.squarespace.com/universal/images-v6/icons/icon-close-9-dark.png" /></div>
  </div>
</div>
`},2:function(o,e,a,r,s){return"selected"},4:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=i(a,"if").call(e??(o.nullContext||{}),e!=null?i(e,"searchQuery"):e,{name:"if",hash:{},fn:o.program(5,s,0),inverse:o.program(7,s,0),data:s,loc:{start:{line:13,column:2},end:{line:22,column:9}}}))!=null?n:""},5:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return`  <div class="empty empty-search">
    <div class="text">`+o.escapeExpression(o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"noResultsFound"):n,e))+`</div>
  </div>
`},7:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return`  <div class="empty empty-files">
    <div class="icon"></div>
    <div class="text">`+o.escapeExpression(o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"noFiles"):n,e))+`</div>
  </div>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s,n,i){var u,h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return(u=h(a,"each").call(e??(o.nullContext||{}),e!=null?h(e,"attachments"):e,{name:"each",hash:{},fn:o.program(1,s,0,n,i),inverse:o.program(4,s,0,n,i),data:s,loc:{start:{line:1,column:0},end:{line:23,column:9}}}))!=null?u:""},useData:!0,useDepths:!0})})();var t="dialog-file-manager.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},920950:function(){YUI.add("squarespace-dialog-map-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["dialog-map.html"]=l({1:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'      <input class="field-input map-address-title" type="text" placeholder="'+o.escapeExpression(o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"placeholderAddressTitle"):n,e))+`" spellcheck="false" style="font-weight: 500;"/>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=o.lambda,u=o.escapeExpression,h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return`<div class="field-wrapper text-field-wrapper clear major">
  <div class="map-address-fields">
`+((n=h(a,"if").call(e??(o.nullContext||{}),e!=null?h(e,"showTitle"):e,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:3,column:4},end:{line:5,column:11}}}))!=null?n:"")+'    <input class="field-input map-address-line1" type="text" placeholder="'+u(i((n=e!=null?h(e,"strings"):e)!=null?h(n,"placeholderAddress1"):n,e))+`" spellcheck="false" />
    <input class="field-input map-address-line2" type="text" placeholder="`+u(i((n=e!=null?h(e,"strings"):e)!=null?h(n,"placeholderAddress2"):n,e))+`" spellcheck="false" />
    <input class="field-input map-address-country" type="text" placeholder="`+u(i((n=e!=null?h(e,"strings"):e)!=null?h(n,"placeholderAddressCountry"):n,e))+`" spellcheck="false" />
  </div>
</div>`},useData:!0})})();var t="dialog-map.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},66423:function(){YUI.add("squarespace-dialog-oembed-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["dialog-oembed.html"]=l({1:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'  <div class="title">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"title"):n,e))+`</div>
`},3:function(o,e,a,r,s){return`  <div class="manual">&nbsp;</div>
`},5:function(o,e,a,r,s){return"has-manual"},7:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return o.escapeExpression(o.lambda((n=e!=null?i(e,"data"):e)!=null?i(n,"url"):n,e))},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.lookupProperty||function(h,g){if(Object.prototype.hasOwnProperty.call(h,g))return h[g]};return((n=u(a,"if").call(i,(n=e!=null?u(e,"strings"):e)!=null?u(n,"title"):n,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))!=null?n:"")+`
`+((n=u(a,"if").call(i,e!=null?u(e,"manual"):e,{name:"if",hash:{},fn:o.program(3,s,0),inverse:o.noop,data:s,loc:{start:{line:5,column:0},end:{line:7,column:7}}}))!=null?n:"")+`
<input class="input field-input `+((n=u(a,"if").call(i,e!=null?u(e,"manual"):e,{name:"if",hash:{},fn:o.program(5,s,0),inverse:o.noop,data:s,loc:{start:{line:9,column:32},end:{line:9,column:63}}}))!=null?n:"")+'" value="'+((n=u(a,"if").call(i,(n=e!=null?u(e,"data"):e)!=null?u(n,"url"):n,{name:"if",hash:{},fn:o.program(7,s,0),inverse:o.noop,data:s,loc:{start:{line:9,column:72},end:{line:9,column:107}}}))!=null?n:"")+`"
  placeholder="`+o.escapeExpression(o.lambda((n=e!=null?u(e,"strings"):e)!=null?u(n,"inputPlaceholder"):n,e))+`" spellcheck="false" tabindex="1">

<div class="status description"></div>`},useData:!0})})();var t="dialog-oembed.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},20654:function(){YUI.add("squarespace-dialog-pricing-placeholder-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["dialog-pricing-placeholder.html"]=l({1:function(o,e,a,r,s){return`      <div class="variant-count"></div>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=o.lambda,u=o.escapeExpression,h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return`<div class="field-lhs">
  `+u(i((n=e!=null?h(e,"strings"):e)!=null?h(n,"title"):n,e))+`
</div>

  <div class="placeholder">

    <div class="pricing"></div>

`+((n=h(a,"if").call(e??(o.nullContext||{}),e!=null?h(e,"hasVariants"):e,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:9,column:4},end:{line:11,column:11}}}))!=null?n:"")+`
    <div class="prompt">
      `+u(i((n=e!=null?h(e,"strings"):e)!=null?h(n,"prompt"):n,e))+`&nbsp;&rarr;
    </div>
  </div>
`},useData:!0})})();var t="dialog-pricing-placeholder.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},722595:function(){YUI.add("squarespace-dialog-slider-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["dialog-slider.html"]=l({1:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'<div class="title">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"title"):n,e))+`</div>
`},3:function(o,e,a,r,s){return"sqs-slider-with-numeric-label"},5:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'style="width: '+o.escapeExpression((n=(n=i(a,"labelWidth")||(e!=null?i(e,"labelWidth"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"labelWidth",hash:{},data:s,loc:{start:{line:5,column:67},end:{line:5,column:81}}}):n))+"px"},7:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'style="margin-left: '+o.escapeExpression((n=(n=i(a,"labelWidth")||(e!=null?i(e,"labelWidth"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"labelWidth",hash:{},data:s,loc:{start:{line:6,column:74},end:{line:6,column:88}}}):n))+"px"},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.lookupProperty||function(h,g){if(Object.prototype.hasOwnProperty.call(h,g))return h[g]};return((n=u(a,"if").call(i,(n=e!=null?u(e,"strings"):e)!=null?u(n,"title"):n,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))!=null?n:"")+'<div class="slider '+((n=u(a,"if").call(i,e!=null?u(e,"isNumericLabel"):e,{name:"if",hash:{},fn:o.program(3,s,0),inverse:o.noop,data:s,loc:{start:{line:4,column:19},end:{line:4,column:77}}}))!=null?n:"")+`">
  <div class="numeric-display" `+((n=u(a,"if").call(i,e!=null?u(e,"isNumericLabel"):e,{name:"if",hash:{},fn:o.program(5,s,0),inverse:o.noop,data:s,loc:{start:{line:5,column:31},end:{line:5,column:90}}}))!=null?n:"")+`"></div>
  <div class="slider-container" `+((n=u(a,"if").call(i,e!=null?u(e,"isNumericLabel"):e,{name:"if",hash:{},fn:o.program(7,s,0),inverse:o.noop,data:s,loc:{start:{line:6,column:32},end:{line:6,column:97}}}))!=null?n:"")+`"></div>
</div>
<div class="description">`+o.escapeExpression(o.lambda((n=e!=null?u(e,"strings"):e)!=null?u(n,"description"):n,e))+`</div>
`},useData:!0})})();var t="dialog-slider.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},399704:function(){YUI.add("squarespace-dialog-subscription-details-placeholder-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["dialog-subscription-details-placeholder.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=o.lambda,u=o.escapeExpression,h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return`<div class="placeholder">

  <div class="details-text">`+u(i((n=e!=null?h(e,"strings"):e)!=null?h(n,"details"):n,e))+`</div>

  <div class="prompt">
    `+u(i((n=e!=null?h(e,"strings"):e)!=null?h(n,"prompt"):n,e))+`&nbsp;&rarr;
  </div>
</div>
`},useData:!0})})();var t="dialog-subscription-details-placeholder.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},98445:function(){YUI.add("squarespace-dialog-text-area-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["dialog-text-area.html"]=l({1:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'  <div class="title">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"title"):n,e))+`</div>
`},3:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'  <div class="description">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"description"):n,e))+`</div>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i,u=e??(o.nullContext||{}),h=o.escapeExpression,g=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]};return((n=g(a,"if").call(u,(n=e!=null?g(e,"strings"):e)!=null?g(n,"title"):n,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))!=null?n:"")+`
<textarea placeholder="`+h(o.lambda((n=e!=null?g(e,"strings"):e)!=null?g(n,"placeholder"):n,e))+'">'+h((i=(i=g(a,"data")||(e!=null?g(e,"data"):e))!=null?i:o.hooks.helperMissing,typeof i=="function"?i.call(u,{name:"data",hash:{},data:s,loc:{start:{line:5,column:48},end:{line:5,column:56}}}):i))+`</textarea>

`+((n=g(a,"if").call(u,(n=e!=null?g(e,"strings"):e)!=null?g(n,"description"):n,{name:"if",hash:{},fn:o.program(3,s,0),inverse:o.noop,data:s,loc:{start:{line:7,column:0},end:{line:9,column:7}}}))!=null?n:"")},useData:!0})})();var t="dialog-text-area.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},775651:function(){YUI.add("squarespace-dialog-text-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["dialog-text.html"]=l({1:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'  <div class="title">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"title"):n,e))+`</div>
`},3:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'maxlength="'+o.escapeExpression((n=(n=i(a,"maxLength")||(e!=null?i(e,"maxLength"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"maxLength",hash:{},data:s,loc:{start:{line:5,column:47},end:{line:5,column:60}}}):n))+'"'},5:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'name="'+o.escapeExpression((n=(n=i(a,"name")||(e!=null?i(e,"name"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"name",hash:{},data:s,loc:{start:{line:6,column:25},end:{line:6,column:33}}}):n))+'"'},7:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'data-test="'+o.escapeExpression((n=(n=i(a,"testAttribute")||(e!=null?i(e,"testAttribute"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"testAttribute",hash:{},data:s,loc:{start:{line:7,column:39},end:{line:7,column:56}}}):n))+'"'},9:function(o,e,a,r,s){return'readonly="readonly"'},11:function(o,e,a,r,s){return'onClick="this.select()"'},13:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return`
	<div class="description">
    `+((n=o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"description"):n,e))!=null?n:"")+`
  </div>

`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.lookupProperty||function(h,g){if(Object.prototype.hasOwnProperty.call(h,g))return h[g]};return((n=u(a,"if").call(i,(n=e!=null?u(e,"strings"):e)!=null?u(n,"title"):n,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))!=null?n:"")+`
<input type="text" `+((n=u(a,"if").call(i,e!=null?u(e,"maxLength"):e,{name:"if",hash:{},fn:o.program(3,s,0),inverse:o.noop,data:s,loc:{start:{line:5,column:19},end:{line:5,column:68}}}))!=null?n:"")+`
       `+((n=u(a,"if").call(i,e!=null?u(e,"name"):e,{name:"if",hash:{},fn:o.program(5,s,0),inverse:o.noop,data:s,loc:{start:{line:6,column:7},end:{line:6,column:41}}}))!=null?n:"")+`
       `+((n=u(a,"if").call(i,e!=null?u(e,"testAttribute"):e,{name:"if",hash:{},fn:o.program(7,s,0),inverse:o.noop,data:s,loc:{start:{line:7,column:7},end:{line:7,column:64}}}))!=null?n:"")+`
       `+((n=u(a,"if").call(i,e!=null?u(e,"readOnly"):e,{name:"if",hash:{},fn:o.program(9,s,0),inverse:o.noop,data:s,loc:{start:{line:8,column:7},end:{line:8,column:49}}}))!=null?n:"")+`
       `+((n=u(a,"if").call(i,e!=null?u(e,"selectAllOnFocus"):e,{name:"if",hash:{},fn:o.program(11,s,0),inverse:o.noop,data:s,loc:{start:{line:9,column:7},end:{line:9,column:61}}}))!=null?n:"")+`/>

`+((n=u(a,"if").call(i,(n=e!=null?u(e,"strings"):e)!=null?u(n,"description"):n,{name:"if",hash:{},fn:o.program(13,s,0),inverse:o.noop,data:s,loc:{start:{line:11,column:0},end:{line:17,column:7}}}))!=null?n:"")},useData:!0})})();var t="dialog-text.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},89711:function(){YUI.add("squarespace-dialog-zapier-service-connect-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["dialog-zapier-service-connect.html"]=l({1:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'      <div class="message">'+o.escapeExpression((n=(n=i(a,"connectedMessage")||(e!=null?i(e,"connectedMessage"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"connectedMessage",hash:{},data:s,loc:{start:{line:6,column:27},end:{line:6,column:49}}}):n))+`</div>
`},3:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=i(a,"if").call(e??(o.nullContext||{}),e!=null?i(e,"connectionInProgress"):e,{name:"if",hash:{},fn:o.program(4,s,0),inverse:o.program(6,s,0),data:s,loc:{start:{line:8,column:6},end:{line:12,column:13}}}))!=null?n:""},4:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'        <div class="message">'+o.escapeExpression((n=(n=i(a,"pendingMessage")||(e!=null?i(e,"pendingMessage"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"pendingMessage",hash:{},data:s,loc:{start:{line:9,column:29},end:{line:9,column:49}}}):n))+`</div>
`},6:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'        <div class="connect">'+o.escapeExpression((n=(n=i(a,"clickToConnect")||(e!=null?i(e,"clickToConnect"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"clickToConnect",hash:{},data:s,loc:{start:{line:11,column:29},end:{line:11,column:49}}}):n))+`</div>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i,u=e??(o.nullContext||{}),h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return`<div class="sqs-content-inner">
  <div class="text">
    <div class="title">`+o.escapeExpression((i=(i=h(a,"title")||(e!=null?h(e,"title"):e))!=null?i:o.hooks.helperMissing,typeof i=="function"?i.call(u,{name:"title",hash:{},data:s,loc:{start:{line:3,column:23},end:{line:3,column:34}}}):i))+`</div>

`+((n=h(a,"if").call(u,e!=null?h(e,"connected"):e,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.program(3,s,0),data:s,loc:{start:{line:5,column:4},end:{line:13,column:11}}}))!=null?n:"")+`  </div>

  <div class="icon"></div>
</div>
`},useData:!0})})();var t="dialog-zapier-service-connect.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},857073:function(){YUI.add("squarespace-existing-content-link-tab-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["existing-content-link-tab.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){return`<div class="existing-content-link-tab">
  <div class="content-options"></div>
</div>
`},useData:!0})})();var t="existing-content-link-tab.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},543962:function(){YUI.add("squarespace-external-link-tab-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["external-link-tab.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){return`<div class="external-link-tab">
  <div class="link">
    <button class="visit" title="Visit URL"></button>
  </div>
</div>
`},useData:!0})})();var t="external-link-tab.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},773682:function(){YUI.add("squarespace-file-manager-tab-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["file-manager-tab.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){return`<div class="file-manager-tab">
  <div class="options"></div>
  <div class="frames"></div>
</div>
`},useData:!0})})();var t="file-manager-tab.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},254622:function(){YUI.add("squarespace-flickr-oembed-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["flickr-oembed.html"]=l({1:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h="function",g=o.escapeExpression,p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return'    <p><a href="'+g((n=(n=p(a,"url")||(e!=null?p(e,"url"):e))!=null?n:u,typeof n===h?n.call(i,{name:"url",hash:{},data:s,loc:{start:{line:6,column:16},end:{line:6,column:23}}}):n))+'">'+g((n=(n=p(a,"title")||(e!=null?p(e,"title"):e))!=null?n:u,typeof n===h?n.call(i,{name:"title",hash:{},data:s,loc:{start:{line:6,column:25},end:{line:6,column:34}}}):n))+`</a></p>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i,u=e??(o.nullContext||{}),h=o.hooks.helperMissing,g="function",p=o.escapeExpression,f=o.lookupProperty||function(m,_){if(Object.prototype.hasOwnProperty.call(m,_))return m[_]};return`<div class="flickr-oembed">
  <a href="`+p((i=(i=f(a,"url")||(e!=null?f(e,"url"):e))!=null?i:h,typeof i===g?i.call(u,{name:"url",hash:{},data:s,loc:{start:{line:2,column:11},end:{line:2,column:18}}}):i))+`">
    <img src="`+p((i=(i=f(a,"flickr-url")||(e!=null?f(e,"flickr-url"):e))!=null?i:h,typeof i===g?i.call(u,{name:"flickr-url",hash:{},data:s,loc:{start:{line:3,column:14},end:{line:3,column:28}}}):i))+`" width="100%" />
  </a>
`+((n=f(a,"if").call(u,e!=null?f(e,"title"):e,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:5,column:2},end:{line:7,column:9}}}))!=null?n:"")+"</div>"},useData:!0})})();var t="flickr-oembed.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},213967:function(){YUI.add("squarespace-flyout-error-message-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["flyout-error-message.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i,u=o.lookupProperty||function(h,g){if(Object.prototype.hasOwnProperty.call(h,g))return h[g]};return'<div class="sqs-flyout-error-message">'+((n=(i=(i=u(a,"message")||(e!=null?u(e,"message"):e))!=null?i:o.hooks.helperMissing,typeof i=="function"?i.call(e??(o.nullContext||{}),{name:"message",hash:{},data:s,loc:{start:{line:1,column:38},end:{line:1,column:51}}}):i))!=null?n:"")+"</div>"},useData:!0})})();var t="flyout-error-message.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},855424:function(){YUI.add("squarespace-form-builder-field-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["form-builder-field.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=o.lambda,u=o.escapeExpression,h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return`<div class="field-control-bar">
  <div class="field-drag-handle-wrapper">
    <div class="field-drag-handle"></div>
  </div>

  <div class="field-type-icon `+u(i((n=e!=null?h(e,"field"):e)!=null?h(n,"type"):n,e))+`"></div>

  <div class="field-title"></div>

  <div class="field-controls">
    <div class="edit-field">`+u(i((n=e!=null?h(e,"strings"):e)!=null?h(n,"editText"):n,e))+`</div>
    <div class="remove-field">&times;</div>
  </div>
</div>

<div class="editor-wrapper"></div>
`},useData:!0})})();var t="form-builder-field.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},496392:function(){YUI.add("squarespace-image-picker-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["image-picker.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){return`<div class="header">
  <div class="instructions"></div>
  <div class="controls">
    <div class="cancel"></div>
    <div class="confirm"></div>
  </div>
  <div class="information">
    <div class="error"></div>
    <div class="sqs-spin light extra-large"></div>
  </div>
  <div class="images"></div>
  <div class="pagination">
    <span class="prev"></span>
    <span class="next"></span>
  </div>
  <div class="size-visualizer">
      <div class="ruler height"></div>
      <div class="ruler width"></div>
      <div class="label height"></div>
      <div class="label width"></div>
  </div>
</div>`},useData:!0})})();var t="image-picker.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},468455:function(){YUI.add("squarespace-instagram-oembed-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["instagram-oembed.html"]=l({1:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h="function",g=o.escapeExpression,p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return'    <p><a href="'+g((n=(n=p(a,"url")||(e!=null?p(e,"url"):e))!=null?n:u,typeof n===h?n.call(i,{name:"url",hash:{},data:s,loc:{start:{line:6,column:16},end:{line:6,column:23}}}):n))+'">'+g((n=(n=p(a,"title")||(e!=null?p(e,"title"):e))!=null?n:u,typeof n===h?n.call(i,{name:"title",hash:{},data:s,loc:{start:{line:6,column:25},end:{line:6,column:34}}}):n))+`</a></p>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i,u=e??(o.nullContext||{}),h=o.hooks.helperMissing,g="function",p=o.escapeExpression,f=o.lookupProperty||function(m,_){if(Object.prototype.hasOwnProperty.call(m,_))return m[_]};return`<div class="instagram-oembed">
  <a href="`+p((i=(i=f(a,"url")||(e!=null?f(e,"url"):e))!=null?i:h,typeof i===g?i.call(u,{name:"url",hash:{},data:s,loc:{start:{line:2,column:11},end:{line:2,column:18}}}):i))+`">
    <img src="`+p((i=(i=f(a,"instagram-url")||(e!=null?f(e,"instagram-url"):e))!=null?i:h,typeof i===g?i.call(u,{name:"instagram-url",hash:{},data:s,loc:{start:{line:3,column:14},end:{line:3,column:31}}}):i))+`" width="100%" />
  </a>
`+((n=f(a,"if").call(u,e!=null?f(e,"title"):e,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:5,column:2},end:{line:7,column:9}}}))!=null?n:"")+"</div>"},useData:!0})})();var t="instagram-oembed.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},114591:function(){YUI.add("squarespace-mobile-info-bar-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["mobile-info-bar.html"]=l({1:function(o,e,a,r,s){var n,i,u=o.escapeExpression,h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return`    <div class="sqs-mobile-info-bar-trigger" data-type="contactEmail">
      <a href="mailto:`+u((i=(i=h(a,"contactEmail")||(e!=null?h(e,"contactEmail"):e))!=null?i:o.hooks.helperMissing,typeof i=="function"?i.call(e??(o.nullContext||{}),{name:"contactEmail",hash:{},data:s,loc:{start:{line:6,column:22},end:{line:6,column:38}}}):i))+`">
        <span class="sqs-mobile-info-bar-trigger-icon"></span>
        <span class="sqs-mobile-info-bar-trigger-label">`+u(o.lambda((n=(n=e!=null?h(e,"strings"):e)!=null?h(n,"labels"):n)!=null?h(n,"email"):n,e))+`</span>
      </a>
    </div>
`},3:function(o,e,a,r,s){var n,i,u=o.escapeExpression,h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return`    <div class="sqs-mobile-info-bar-trigger" data-type="contactPhoneNumber">
      <a href="tel:`+u((i=(i=h(a,"contactPhoneNumber")||(e!=null?h(e,"contactPhoneNumber"):e))!=null?i:o.hooks.helperMissing,typeof i=="function"?i.call(e??(o.nullContext||{}),{name:"contactPhoneNumber",hash:{},data:s,loc:{start:{line:16,column:19},end:{line:16,column:41}}}):i))+`">
        <span class="sqs-mobile-info-bar-trigger-icon"></span>
        <span class="sqs-mobile-info-bar-trigger-label">`+u(o.lambda((n=(n=e!=null?h(e,"strings"):e)!=null?h(n,"labels"):n)!=null?h(n,"phone"):n,e))+`</span>
      </a>
    </div>
`},5:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return`    <div
      tabindex="0"
      role="button"
      class="sqs-mobile-info-bar-trigger"
      data-type="location"
      data-overlay="true"
    >
      <span class="sqs-mobile-info-bar-trigger-icon"></span>
      <span class="sqs-mobile-info-bar-trigger-label">`+o.escapeExpression(o.lambda((n=(n=e!=null?i(e,"strings"):e)!=null?i(n,"labels"):n)!=null?i(n,"location"):n,e))+`</span>
    </div>
`},7:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return`    <div
      tabindex="0"
      role="button"
      class="sqs-mobile-info-bar-trigger"
      data-type="businessHours"
      data-overlay="true"
    >
      <span class="sqs-mobile-info-bar-trigger-icon"></span>
      <span class="sqs-mobile-info-bar-trigger-label">`+o.escapeExpression(o.lambda((n=(n=e!=null?i(e,"strings"):e)!=null?i(n,"labels"):n)!=null?i(n,"hours"):n,e))+`</span>
    </div>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.lookupProperty||function(h,g){if(Object.prototype.hasOwnProperty.call(h,g))return h[g]};return`
<div class="sqs-mobile-info-bar-triggers">

`+((n=u(a,"if").call(i,e!=null?u(e,"contactEmail"):e,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:4,column:2},end:{line:11,column:9}}}))!=null?n:"")+`

`+((n=u(a,"if").call(i,e!=null?u(e,"contactPhoneNumber"):e,{name:"if",hash:{},fn:o.program(3,s,0),inverse:o.noop,data:s,loc:{start:{line:14,column:2},end:{line:21,column:9}}}))!=null?n:"")+`

`+((n=u(a,"if").call(i,e!=null?u(e,"location"):e,{name:"if",hash:{},fn:o.program(5,s,0),inverse:o.noop,data:s,loc:{start:{line:24,column:2},end:{line:35,column:9}}}))!=null?n:"")+`

`+((n=u(a,"if").call(i,e!=null?u(e,"businessHours"):e,{name:"if",hash:{},fn:o.program(7,s,0),inverse:o.noop,data:s,loc:{start:{line:38,column:2},end:{line:49,column:9}}}))!=null?n:"")+`
</div>

<div
  class="sqs-mobile-info-bar-overlay"
  role="dialog"
>
  <div
    tabindex="0"
    role="button"
    aria-label="`+o.escapeExpression(o.lambda((n=(n=e!=null?u(e,"strings"):e)!=null?u(n,"labels"):n)!=null?u(n,"close"):n,e))+`"
    class="sqs-mobile-info-bar-overlay-close"
  >
  </div>
  <div class="sqs-mobile-info-bar-overlay-content"></div>
</div>
`},useData:!0})})();var t="mobile-info-bar.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},349898:function(){YUI.add("squarespace-pill-shopping-cart-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["pill-shopping-cart.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){return`<div class="icon"></div>

<div class="details">
  <span class="total-quantity"></span>
  <span class="suffix"></span>
</div>

<span class="subtotal">
  <span class="price"></span>
</span>
`},useData:!0})})();var t="pill-shopping-cart.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},983797:function(){YUI.add("squarespace-tab-view-tab-group-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["tab-view-tab-group.html"]=l({1:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=i(a,"each").call(e??(o.nullContext||{}),e!=null?i(e,"widgets"):e,{name:"each",hash:{},fn:o.program(2,s,0),inverse:o.noop,data:s,loc:{start:{line:5,column:6},end:{line:11,column:15}}}))!=null?n:""},2:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=i(a,"if").call(e??(o.nullContext||{}),e!=null?i(e,"widgets"):e,{name:"if",hash:{},fn:o.program(3,s,0),inverse:o.program(5,s,0),data:s,loc:{start:{line:6,column:8},end:{line:10,column:15}}}))!=null?n:""},3:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=o.invokePartial(i(r,"tab-view/tab-group.html"),e,{name:"tab-view/tab-group.html",data:s,indent:"          ",helpers:a,partials:r,decorators:o.decorators}))!=null?n:""},5:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=o.invokePartial(i(r,"tab-view/tab.html"),e,{name:"tab-view/tab.html",data:s,indent:"          ",helpers:a,partials:r,decorators:o.decorators}))!=null?n:""},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i,u=e??(o.nullContext||{}),h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return`<div class="tab-group">
  <div class="tab-group-label">`+o.escapeExpression((i=(i=h(a,"label")||(e!=null?h(e,"label"):e))!=null?i:o.hooks.helperMissing,typeof i=="function"?i.call(u,{name:"label",hash:{},data:s,loc:{start:{line:2,column:31},end:{line:2,column:40}}}):i))+`</div>
  <div class="tab-group-items">
`+((n=h(a,"if").call(u,e!=null?h(e,"widgets"):e,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:4,column:4},end:{line:12,column:11}}}))!=null?n:"")+`  </div>
</div>`},usePartial:!0,useData:!0})})();var t="tab-view-tab-group.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},715752:function(){YUI.add("squarespace-tab-view-tab-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["tab-view-tab.html"]=l({1:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h="function",g=o.escapeExpression,p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return'  <div class="tab-view-tab '+g((n=(n=p(a,"id")||(e!=null?p(e,"id"):e))!=null?n:u,typeof n===h?n.call(i,{name:"id",hash:{},data:s,loc:{start:{line:2,column:27},end:{line:2,column:33}}}):n))+'" data-tabId="'+g((n=(n=p(a,"id")||(e!=null?p(e,"id"):e))!=null?n:u,typeof n===h?n.call(i,{name:"id",hash:{},data:s,loc:{start:{line:2,column:47},end:{line:2,column:53}}}):n))+`">
    <span class="label">`+g((n=(n=p(a,"label")||(e!=null?p(e,"label"):e))!=null?n:u,typeof n===h?n.call(i,{name:"label",hash:{},data:s,loc:{start:{line:3,column:24},end:{line:3,column:33}}}):n))+`</span>
  </div>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=i(a,"if").call(e??(o.nullContext||{}),e!=null?i(e,"id"):e,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))!=null?n:""},useData:!0})})();var t="tab-view-tab.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},931697:function(){YUI.add("squarespace-tab-view-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["tab-view.html"]=l({1:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.lookupProperty||function(h,g){if(Object.prototype.hasOwnProperty.call(h,g))return h[g]};return((n=u(a,"if").call(i,e!=null?u(e,"title"):e,{name:"if",hash:{},fn:o.program(2,s,0),inverse:o.noop,data:s,loc:{start:{line:2,column:2},end:{line:4,column:9}}}))!=null?n:"")+((n=u(a,"if").call(i,e!=null?u(e,"description"):e,{name:"if",hash:{},fn:o.program(4,s,0),inverse:o.noop,data:s,loc:{start:{line:5,column:2},end:{line:7,column:9}}}))!=null?n:"")},2:function(o,e,a,r,s){var n,i,u=o.lookupProperty||function(h,g){if(Object.prototype.hasOwnProperty.call(h,g))return h[g]};return'    <div class="navigation-title">'+((n=(i=(i=u(a,"title")||(e!=null?u(e,"title"):e))!=null?i:o.hooks.helperMissing,typeof i=="function"?i.call(e??(o.nullContext||{}),{name:"title",hash:{},data:s,loc:{start:{line:3,column:34},end:{line:3,column:45}}}):i))!=null?n:"")+`</div>
`},4:function(o,e,a,r,s){var n,i,u=o.lookupProperty||function(h,g){if(Object.prototype.hasOwnProperty.call(h,g))return h[g]};return'    <div class="navigation-description">'+((n=(i=(i=u(a,"description")||(e!=null?u(e,"description"):e))!=null?i:o.hooks.helperMissing,typeof i=="function"?i.call(e??(o.nullContext||{}),{name:"description",hash:{},data:s,loc:{start:{line:6,column:40},end:{line:6,column:57}}}):i))!=null?n:"")+`</div>
`},6:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=i(a,"if").call(e??(o.nullContext||{}),e!=null?i(e,"widgets"):e,{name:"if",hash:{},fn:o.program(7,s,0),inverse:o.program(9,s,0),data:s,loc:{start:{line:11,column:4},end:{line:15,column:11}}}))!=null?n:""},7:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=o.invokePartial(i(r,"tab-view-tab-group.html"),e,{name:"tab-view-tab-group.html",data:s,indent:"      ",helpers:a,partials:r,decorators:o.decorators}))!=null?n:""},9:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=o.invokePartial(i(r,"tab-view-tab.html"),e,{name:"tab-view-tab.html",data:s,indent:"      ",helpers:a,partials:r,decorators:o.decorators}))!=null?n:""},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.lookupProperty||function(h,g){if(Object.prototype.hasOwnProperty.call(h,g))return h[g]};return((n=u(a,"with").call(i,e!=null?u(e,"strings"):e,{name:"with",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:1,column:0},end:{line:8,column:9}}}))!=null?n:"")+`<div class="sqs-tab-view-self">
`+((n=u(a,"each").call(i,e!=null?u(e,"widgets"):e,{name:"each",hash:{},fn:o.program(6,s,0),inverse:o.noop,data:s,loc:{start:{line:10,column:2},end:{line:16,column:11}}}))!=null?n:"")+"</div>"},usePartial:!0,useData:!0})})();var t="tab-view.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},371329:function(){YUI.add("squarespace-terms-of-service-overlay-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["terms-of-service-overlay.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i,u=o.lambda,h=o.escapeExpression,g=e??(o.nullContext||{}),p=o.hooks.helperMissing,f="function",m=o.lookupProperty||function(_,v){if(Object.prototype.hasOwnProperty.call(_,v))return _[v]};return`<div class="overlay"></div>
<div class="content">
  <header class='title'>
    <h1>`+h(u((n=e!=null?m(e,"strings"):e)!=null?m(n,"title"):n,e))+`</h1>
  </header>
  <section>
    <p>We have recently updated our Terms of Service. Please review them below.</p>
    <div class='tos-frame'>
      <iframe name="tos-frame-iframe" src="`+h((i=(i=m(a,"tosURL")||(e!=null?m(e,"tosURL"):e))!=null?i:p,typeof i===f?i.call(g,{name:"tosURL",hash:{},data:s,loc:{start:{line:9,column:43},end:{line:9,column:53}}}):i))+'?source=in-app" class="terms-of-service-frame" seamless="true" height="'+h((i=(i=m(a,"iframeHeight")||(e!=null?m(e,"iframeHeight"):e))!=null?i:p,typeof i===f?i.call(g,{name:"iframeHeight",hash:{},data:s,loc:{start:{line:9,column:124},end:{line:9,column:140}}}):i))+`" width="100%">
        <a href="`+h((i=(i=m(a,"tosURL")||(e!=null?m(e,"tosURL"):e))!=null?i:p,typeof i===f?i.call(g,{name:"tosURL",hash:{},data:s,loc:{start:{line:10,column:17},end:{line:10,column:27}}}):i))+`" target="_blank">Squarespace Terms of Service</a>
      </iframe>
    </div>
  <p>
  By clicking 'I accept' below you are agreeing to the <a href="`+h((i=(i=m(a,"tosURL")||(e!=null?m(e,"tosURL"):e))!=null?i:p,typeof i===f?i.call(g,{name:"tosURL",hash:{},data:s,loc:{start:{line:14,column:64},end:{line:14,column:74}}}):i))+`" target="_blank">Squarespace Terms of Service</a>.
  </p>
  <div class='buttons'>
      <div class='control button cancel'>
        <a class='cancel' href='http://www.squarespace.com/'>`+h(u((n=e!=null?m(e,"strings"):e)!=null?m(n,"cancel"):n,e))+`</a>
      </div>
      <div class='control button primary accept'>
        <a class='accept' href='#'>`+h(u((n=e!=null?m(e,"strings"):e)!=null?m(n,"accept"):n,e))+`</a>
      </div>
  </div>
  </section>
</div>
`},useData:!0})})();var t="terms-of-service-overlay.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},431304:function(){YUI.add("squarespace-tourdates-bandsintown-list-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["tourdates-bandsintown-list.html"]=l({1:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'    <div class="sqs-tourdates__noItems">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"loading"):n,e))+`</div>
`},3:function(o,e,a,r,s,n,i){var u,h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return(u=h(a,"if").call(e??(o.nullContext||{}),(u=e!=null?h(e,"tourdates"):e)!=null?h(u,"length"):u,{name:"if",hash:{},fn:o.program(4,s,0,n,i),inverse:o.program(32,s,0,n,i),data:s,loc:{start:{line:6,column:4},end:{line:78,column:11}}}))!=null?u:""},4:function(o,e,a,r,s,n,i){var u,h,g,p=o.lookupProperty||function(m,_){if(Object.prototype.hasOwnProperty.call(m,_))return m[_]},f="";return u=(h=(h=p(a,"tourdates")||(e!=null?p(e,"tourdates"):e))!=null?h:o.hooks.helperMissing,g={name:"tourdates",hash:{},fn:o.program(5,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:7,column:6},end:{line:75,column:20}}},typeof h=="function"?h.call(e??(o.nullContext||{}),g):h),p(a,"tourdates")||(u=o.hooks.blockHelperMissing.call(e,u,g)),u!=null&&(f+=u),f},5:function(o,e,a,r,s,n,i){var u,h,g=e??(o.nullContext||{}),p=o.hooks.helperMissing,f="function",m=o.escapeExpression,_=o.lookupProperty||function(v,E){if(Object.prototype.hasOwnProperty.call(v,E))return v[E]};return`        <div class="sqs-tourdates__item">
          <div class="sqs-tourdates__info">
            <span class="sqs-tourdates__timeframe" data-tour-datetime="`+m((h=(h=_(a,"datetime")||(e!=null?_(e,"datetime"):e))!=null?h:p,typeof h===f?h.call(g,{name:"datetime",hash:{},data:s,loc:{start:{line:10,column:71},end:{line:10,column:83}}}):h))+`">
              <span class="sqs-tourdates__date">`+m((_(a,"tourdates-bit-datetime")||e&&_(e,"tourdates-bit-datetime")||p).call(g,e!=null?_(e,"datetime"):e,{name:"tourdates-bit-datetime",hash:{format:"date"},data:s,loc:{start:{line:11,column:48},end:{line:11,column:97}}}))+`</span>
              <span class="sqs-tourdates__weekday">`+m((_(a,"tourdates-bit-datetime")||e&&_(e,"tourdates-bit-datetime")||p).call(g,e!=null?_(e,"datetime"):e,{name:"tourdates-bit-datetime",hash:{format:"weekday"},data:s,loc:{start:{line:12,column:51},end:{line:12,column:103}}}))+`</span>
            </span>
            <div class="sqs-tourdates__venuelocation">
              <div class="sqs-tourdates__venue">
                <a href="https://bandsintown.com/e/`+m((h=(h=_(a,"id")||(e!=null?_(e,"id"):e))!=null?h:p,typeof h===f?h.call(g,{name:"id",hash:{},data:s,loc:{start:{line:16,column:51},end:{line:16,column:57}}}):h))+`" class="sqs-tourdates__venueLink" target="_blank" rel="noopener">
                  <div class="sqs-tourdates__venue-name">
`+((u=_(a,"if").call(g,e!=null?_(e,"title"):e,{name:"if",hash:{},fn:o.program(6,s,0,n,i),inverse:o.program(8,s,0,n,i),data:s,loc:{start:{line:18,column:20},end:{line:22,column:27}}}))!=null?u:"")+"                    @ "+m((_(a,"tourdates-bit-datetime")||e&&_(e,"tourdates-bit-datetime")||p).call(g,e!=null?_(e,"datetime"):e,{name:"tourdates-bit-datetime",hash:{format:"time"},data:s,loc:{start:{line:23,column:22},end:{line:23,column:71}}}))+" "+((u=_(a,"if").call(g,(u=e!=null?_(e,"venue"):e)!=null?_(u,"timezone"):u,{name:"if",hash:{},fn:o.program(10,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:23,column:72},end:{line:23,column:145}}}))!=null?u:"")+`
                  </div>
`+((u=(_(a,"if_gt")||e&&_(e,"if_gt")||p).call(g,(u=e!=null?_(e,"lineup"):e)!=null?_(u,"length"):u,{name:"if_gt",hash:{compare:1},fn:o.program(12,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:25,column:18},end:{line:27,column:28}}}))!=null?u:"")+`                </a>
              </div>
              <div class="sqs-tourdates__location">
`+((u=(_(a,"equals-string")||e&&_(e,"equals-string")||p).call(g,(u=e!=null?_(e,"venue"):e)!=null?_(u,"type"):u,"Virtual",{name:"equals-string",hash:{},fn:o.program(16,s,0,n,i),inverse:o.program(18,s,0,n,i),data:s,loc:{start:{line:31,column:16},end:{line:36,column:34}}}))!=null?u:"")+`              </div>
            </div>
          </div>
          <div class="sqs-tourdates__actions">
`+((u=_(a,"each").call(g,e!=null?_(e,"offers"):e,{name:"each",hash:{},fn:o.program(21,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:41,column:12},end:{line:51,column:21}}}))!=null?u:"")+`
`+((u=(_(a,"equals-string")||e&&_(e,"equals-string")||p).call(g,(u=e!=null?_(e,"venue"):e)!=null?_(u,"type"):u,"Virtual",{name:"equals-string",hash:{},fn:o.program(27,s,0,n,i),inverse:o.program(30,s,0,n,i),data:s,loc:{start:{line:53,column:12},end:{line:72,column:30}}}))!=null?u:"")+`          </div>
        </div>
`},6:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return"                      "+o.escapeExpression((n=(n=i(a,"title")||(e!=null?i(e,"title"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"title",hash:{},data:s,loc:{start:{line:19,column:22},end:{line:19,column:31}}}):n))+`
`},8:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return"                      "+o.escapeExpression(o.lambda((n=e!=null?i(e,"venue"):e)!=null?i(n,"name"):n,e))+`
`},10:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return" "+o.escapeExpression((i(a,"tourdates-timezone-abbr")||e&&i(e,"tourdates-timezone-abbr")||o.hooks.helperMissing).call(e??(o.nullContext||{}),(n=e!=null?i(e,"venue"):e)!=null?i(n,"timezone"):n,{name:"tourdates-timezone-abbr",hash:{},data:s,loc:{start:{line:23,column:95},end:{line:23,column:137}}}))+" "},12:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'                    <div class="sqs-tourdates__lineup">'+((n=i(a,"each").call(e??(o.nullContext||{}),e!=null?i(e,"lineup"):e,{name:"each",hash:{},fn:o.program(13,s,0),inverse:o.noop,data:s,loc:{start:{line:26,column:55},end:{line:26,column:171}}}))!=null?n:"")+`</div>
`},13:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=(i(a,"if_gt")||e&&i(e,"if_gt")||o.hooks.helperMissing).call(e??(o.nullContext||{}),s&&i(s,"index"),{name:"if_gt",hash:{compare:0},fn:o.program(14,s,0),inverse:o.noop,data:s,loc:{start:{line:26,column:71},end:{line:26,column:162}}}))!=null?n:""},14:function(o,e,a,r,s){return'<div class="sqs-tourdates__lineup-item">'+o.escapeExpression(o.lambda(e,e))+"</div>"},16:function(o,e,a,r,s){return""},18:function(o,e,a,r,s){var n,i,u=e??(o.nullContext||{}),h=o.escapeExpression,g=o.lambda,p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return'                  <a href="https://bandsintown.com/e/'+h((i=(i=p(a,"id")||(e!=null?p(e,"id"):e))!=null?i:o.hooks.helperMissing,typeof i=="function"?i.call(u,{name:"id",hash:{},data:s,loc:{start:{line:33,column:53},end:{line:33,column:59}}}):i))+`" class="sqs-tourdates__venue-link" target="_blank" rel="noopener">
                    `+h(g((n=e!=null?p(e,"venue"):e)!=null?p(n,"city"):n,e))+", "+((n=p(a,"if").call(u,(n=e!=null?p(e,"venue"):e)!=null?p(n,"region"):n,{name:"if",hash:{},fn:o.program(19,s,0),inverse:o.noop,data:s,loc:{start:{line:34,column:36},end:{line:34,column:81}}}))!=null?n:"")+h(g((n=e!=null?p(e,"venue"):e)!=null?p(n,"country"):n,e))+`
                  </a>
`},19:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return o.escapeExpression(o.lambda((n=e!=null?i(e,"venue"):e)!=null?i(n,"region"):n,e))+", "},21:function(o,e,a,r,s,n,i){var u,h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return(u=(h(a,"equals-string")||e&&h(e,"equals-string")||o.hooks.helperMissing).call(e??(o.nullContext||{}),e!=null?h(e,"status"):e,"available",{name:"equals-string",hash:{},fn:o.program(22,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:42,column:14},end:{line:50,column:32}}}))!=null?u:""},22:function(o,e,a,r,s,n,i){var u,h,g=e??(o.nullContext||{}),p=o.hooks.helperMissing,f="function",m=o.escapeExpression,_=o.lookupProperty||function(v,E){if(Object.prototype.hasOwnProperty.call(v,E))return v[E]};return`                <a
                  href="`+m((h=(h=_(a,"url")||(e!=null?_(e,"url"):e))!=null?h:p,typeof h===f?h.call(g,{name:"url",hash:{},data:s,loc:{start:{line:44,column:24},end:{line:44,column:31}}}):h))+`"
                  class="sqs-editable-button sqs-button-element--primary sqs-tourdates__button`+((u=(_(a,"equals-string")||e&&_(e,"equals-string")||p).call(g,e!=null?_(e,"type"):e,"Sold Out",{name:"equals-string",hash:{},fn:o.program(23,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:45,column:94},end:{line:45,column:177}}}))!=null?u:"")+`"
                  `+((u=_(a,"if").call(g,i[5]!=null?_(i[5],"newWindow"):i[5],{name:"if",hash:{},fn:o.program(25,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:46,column:18},end:{line:46,column:87}}}))!=null?u:"")+`
                >
                  `+m((h=(h=_(a,"type")||(e!=null?_(e,"type"):e))!=null?h:p,typeof h===f?h.call(g,{name:"type",hash:{},data:s,loc:{start:{line:48,column:18},end:{line:48,column:26}}}):h))+`
                </a>
`},23:function(o,e,a,r,s){return" sqs-tourdates__button--soldout"},25:function(o,e,a,r,s){return'target="_blank" rel="noopener"'},27:function(o,e,a,r,s,n,i){var u,h=o.lookupProperty||function(g,p){if(Object.prototype.hasOwnProperty.call(g,p))return g[p]};return(u=(h(a,"is-live")||e&&h(e,"is-live")||o.hooks.helperMissing).call(e??(o.nullContext||{}),e!=null?h(e,"offers"):e,{name:"is-live",hash:{},fn:o.program(16,s,0,n,i),inverse:o.program(28,s,0,n,i),data:s,loc:{start:{line:54,column:14},end:{line:63,column:26}}}))!=null?u:""},28:function(o,e,a,r,s,n,i){var u,h,g=e??(o.nullContext||{}),p=o.escapeExpression,f=o.lookupProperty||function(m,_){if(Object.prototype.hasOwnProperty.call(m,_))return m[_]};return`                <a
                  href="`+p((h=(h=f(a,"url")||(e!=null?f(e,"url"):e))!=null?h:o.hooks.helperMissing,typeof h=="function"?h.call(g,{name:"url",hash:{},data:s,loc:{start:{line:57,column:24},end:{line:57,column:31}}}):h))+`" 
                  class="sqs-editable-button sqs-button-element--primary sqs-tourdates__button"
                  `+((u=f(a,"if").call(g,i[3]!=null?f(i[3],"newWindow"):i[3],{name:"if",hash:{},fn:o.program(25,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:59,column:18},end:{line:59,column:81}}}))!=null?u:"")+`
                >
                  `+p(o.lambda((u=i[3]!=null?f(i[3],"strings"):i[3])!=null?f(u,"notifyMe"):u,e))+`
                </a>
`},30:function(o,e,a,r,s,n,i){var u,h,g=e??(o.nullContext||{}),p=o.escapeExpression,f=o.lookupProperty||function(m,_){if(Object.prototype.hasOwnProperty.call(m,_))return m[_]};return`              <a
                href="`+p((h=(h=f(a,"url")||(e!=null?f(e,"url"):e))!=null?h:o.hooks.helperMissing,typeof h=="function"?h.call(g,{name:"url",hash:{},data:s,loc:{start:{line:66,column:22},end:{line:66,column:29}}}):h))+`"
                class="sqs-editable-button sqs-button-element--primary sqs-tourdates__button"
                `+((u=f(a,"if").call(g,i[3]!=null?f(i[3],"newWindow"):i[3],{name:"if",hash:{},fn:o.program(25,s,0,n,i),inverse:o.noop,data:s,loc:{start:{line:68,column:16},end:{line:68,column:79}}}))!=null?u:"")+`
              >
                `+p(o.lambda((u=i[1]!=null?f(i[1],"strings"):i[1])!=null?f(u,"rsvp"):u,e))+`
              </a>
`},32:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'      <div class="sqs-tourdates__item-no-results">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"strings"):e)!=null?i(n,"noResults"):n,e))+`</div>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s,n,i){var u,h,g=e??(o.nullContext||{}),p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return'<script type="application/ld+json">'+((u=(h=(h=p(a,"structuredData")||(e!=null?p(e,"structuredData"):e))!=null?h:o.hooks.helperMissing,typeof h=="function"?h.call(g,{name:"structuredData",hash:{},data:s,loc:{start:{line:1,column:35},end:{line:1,column:55}}}):h))!=null?u:"")+`<\/script>
<div class="sqs-tourdates">
`+((u=p(a,"if").call(g,e!=null?p(e,"loading"):e,{name:"if",hash:{},fn:o.program(1,s,0,n,i),inverse:o.program(3,s,0,n,i),data:s,loc:{start:{line:3,column:2},end:{line:79,column:9}}}))!=null?u:"")+`</div>
`},useData:!0,useDepths:!0})})();var t="tourdates-bandsintown-list.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},520341:function(){YUI.add("squarespace-widgets-list-base-item-view-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["widgets-list-base-item-view.html"]=l({1:function(o,e,a,r,s){return" has-thumbnail"},3:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'      <div class="thumbnail" style="background-image: url('+o.escapeExpression((n=(n=i(a,"coverImageUrl")||(e!=null?i(e,"coverImageUrl"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"coverImageUrl",hash:{},data:s,loc:{start:{line:3,column:58},end:{line:3,column:75}}}):n))+`?format=100w)"></div>
`},5:function(o,e,a,r,s){return"has-title"},7:function(o,e,a,r,s){return"no-title"},9:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return o.escapeExpression((n=(n=i(a,"icon")||(e!=null?i(e,"icon"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"icon",hash:{},data:s,loc:{start:{line:8,column:50},end:{line:8,column:58}}}):n))},11:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return o.escapeExpression((n=(n=i(a,"title")||(e!=null?i(e,"title"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"title",hash:{},data:s,loc:{start:{line:9,column:37},end:{line:9,column:46}}}):n))},13:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return o.escapeExpression((n=(n=i(a,"noTitle")||(e!=null?i(e,"noTitle"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"noTitle",hash:{},data:s,loc:{start:{line:9,column:54},end:{line:9,column:65}}}):n))},15:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'      <span class="status">'+o.escapeExpression((n=(n=i(a,"message")||(e!=null?i(e,"message"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"message",hash:{},data:s,loc:{start:{line:15,column:27},end:{line:15,column:38}}}):n))+`</span>
`},17:function(o,e,a,r,s){var n,i,u=o.lookupProperty||function(h,g){if(Object.prototype.hasOwnProperty.call(h,g))return h[g]};return'      <span class="event-date-descriptor">'+((n=(i=(i=u(a,"eventDateDescriptor")||(e!=null?u(e,"eventDateDescriptor"):e))!=null?i:o.hooks.helperMissing,typeof i=="function"?i.call(e??(o.nullContext||{}),{name:"eventDateDescriptor",hash:{},data:s,loc:{start:{line:19,column:42},end:{line:19,column:67}}}):i))!=null?n:"")+`</span>
`},19:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=i(a,"if").call(e??(o.nullContext||{}),e!=null?i(e,"publishOn"):e,{name:"if",hash:{},fn:o.program(20,s,0),inverse:o.program(22,s,0),data:s,loc:{start:{line:21,column:6},end:{line:27,column:13}}}))!=null?n:""},20:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'        <span class="publish-on">'+o.escapeExpression((n=(n=i(a,"publishOn")||(e!=null?i(e,"publishOn"):e))!=null?n:o.hooks.helperMissing,typeof n=="function"?n.call(e??(o.nullContext||{}),{name:"publishOn",hash:{},data:s,loc:{start:{line:22,column:33},end:{line:22,column:46}}}):n))+`</span>
`},22:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return(n=i(a,"if").call(e??(o.nullContext||{}),e!=null?i(e,"addedOn"):e,{name:"if",hash:{},fn:o.program(23,s,0),inverse:o.noop,data:s,loc:{start:{line:24,column:8},end:{line:26,column:15}}}))!=null?n:""},23:function(o,e,a,r,s){var n=o.lookupProperty||function(i,u){if(Object.prototype.hasOwnProperty.call(i,u))return i[u]};return'          <span class="added-on">'+o.escapeExpression((n(a,"date-format")||e&&n(e,"date-format")||o.hooks.helperMissing).call(e??(o.nullContext||{}),e!=null?n(e,"addedOn"):e,{name:"date-format",hash:{skeleton:"MMMd"},data:s,loc:{start:{line:25,column:33},end:{line:25,column:72}}}))+`</span>
`},25:function(o,e,a,r,s){var n,i=o.lookupProperty||function(u,h){if(Object.prototype.hasOwnProperty.call(u,h))return u[h]};return'      <span class="separator">&nbsp;&middot;&nbsp;</span> <span class="display-name">'+o.escapeExpression(o.lambda((n=e!=null?i(e,"author"):e)!=null?i(n,"displayName"):n,e))+`</span>
`},27:function(o,e,a,r,s){var n,i=e??(o.nullContext||{}),u=o.hooks.helperMissing,h="function",g=o.escapeExpression,p=o.lookupProperty||function(f,m){if(Object.prototype.hasOwnProperty.call(f,m))return f[m]};return'    <div class="flag '+g((n=(n=p(a,"className")||(e!=null?p(e,"className"):e))!=null?n:u,typeof n===h?n.call(i,{name:"className",hash:{},data:s,loc:{start:{line:36,column:21},end:{line:36,column:34}}}):n))+`">
      `+g((n=(n=p(a,"message")||(e!=null?p(e,"message"):e))!=null?n:u,typeof n===h?n.call(i,{name:"message",hash:{},data:s,loc:{start:{line:37,column:6},end:{line:37,column:17}}}):n))+`
    </div>
`},compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i,u,h=e??(o.nullContext||{}),g=o.hooks.helperMissing,p="function",f=o.hooks.blockHelperMissing,m=o.lookupProperty||function(v,E){if(Object.prototype.hasOwnProperty.call(v,E))return v[E]},_='<div class="list-item'+((n=m(a,"if").call(h,e!=null?m(e,"coverImageUrl"):e,{name:"if",hash:{},fn:o.program(1,s,0),inverse:o.noop,data:s,loc:{start:{line:1,column:21},end:{line:1,column:63}}}))!=null?n:"")+`">
`+((n=m(a,"if").call(h,e!=null?m(e,"coverImageUrl"):e,{name:"if",hash:{},fn:o.program(3,s,0),inverse:o.noop,data:s,loc:{start:{line:2,column:4},end:{line:4,column:11}}}))!=null?n:"")+`
  <header class="list-item-header">
    <h2 class="`+((n=m(a,"if").call(h,e!=null?m(e,"title"):e,{name:"if",hash:{},fn:o.program(5,s,0),inverse:o.program(7,s,0),data:s,loc:{start:{line:7,column:15},end:{line:7,column:60}}}))!=null?n:"")+`">
    <span class="icon collection-icon `+((n=m(a,"if").call(h,e!=null?m(e,"icon"):e,{name:"if",hash:{},fn:o.program(9,s,0),inverse:o.noop,data:s,loc:{start:{line:8,column:38},end:{line:8,column:65}}}))!=null?n:"")+`"></span>
    <span class="title">`+((n=m(a,"if").call(h,e!=null?m(e,"title"):e,{name:"if",hash:{},fn:o.program(11,s,0),inverse:o.program(13,s,0),data:s,loc:{start:{line:9,column:24},end:{line:9,column:72}}}))!=null?n:"")+`</span>
    </h2>
  </header>

  <div class="meta">
`;return n=(i=(i=m(a,"flag")||(e!=null?m(e,"flag"):e))!=null?i:g,u={name:"flag",hash:{},fn:o.program(15,s,0),inverse:o.noop,data:s,loc:{start:{line:14,column:4},end:{line:16,column:13}}},typeof i===p?i.call(h,u):i),m(a,"flag")||(n=f.call(e,n,u)),n!=null&&(_+=n),_+=`
`+((n=m(a,"if").call(h,e!=null?m(e,"eventDateDescriptor"):e,{name:"if",hash:{},fn:o.program(17,s,0),inverse:o.program(19,s,0),data:s,loc:{start:{line:18,column:4},end:{line:28,column:11}}}))!=null?n:"")+`
`+((n=m(a,"if").call(h,(n=e!=null?m(e,"author"):e)!=null?m(n,"displayName"):n,{name:"if",hash:{},fn:o.program(25,s,0),inverse:o.noop,data:s,loc:{start:{line:30,column:4},end:{line:32,column:11}}}))!=null?n:"")+`  </div>

`,n=(i=(i=m(a,"flag")||(e!=null?m(e,"flag"):e))!=null?i:g,u={name:"flag",hash:{},fn:o.program(27,s,0),inverse:o.noop,data:s,loc:{start:{line:35,column:2},end:{line:39,column:11}}},typeof i===p?i.call(h,u):i),m(a,"flag")||(n=f.call(e,n,u)),n!=null&&(_+=n),_+`</div>
`},useData:!0})})();var t="widgets-list-base-item-view.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},684483:function(){YUI.add("squarespace-widgets-music-album-track-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["widgets-music-album-track.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){return`<span class="title"></span>
<div class="meta">
  <span class="artist-name"></span>
  <span class="duration"></span>
</div>
<div class="utils">
  <a class="remove">Remove</a>
</div>`},useData:!0})})();var t="widgets-music-album-track.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},507969:function(){YUI.add("squarespace-youtube-oembed-template",function(c){var b=c.Handlebars;(function(){var l=b.template,d=b.templates=b.templates||{};d["youtube-oembed.html"]=l({compiler:[8,">= 4.3.0"],main:function(o,e,a,r,s){var n,i,u=o.escapeExpression,h=o.lambda,g=o.lookupProperty||function(p,f){if(Object.prototype.hasOwnProperty.call(p,f))return p[f]};return'<iframe src="'+u((i=(i=g(a,"src")||(e!=null?g(e,"src"):e))!=null?i:o.hooks.helperMissing,typeof i=="function"?i.call(e??(o.nullContext||{}),{name:"src",hash:{},data:s,loc:{start:{line:1,column:13},end:{line:1,column:20}}}):i))+'" height="'+u(h((n=e!=null?g(e,"data"):e)!=null?g(n,"height"):n,e))+'" width="'+u(h((n=e!=null?g(e,"data"):e)!=null?g(n,"width"):n,e))+`" scrolling="no" frameborder="0" allowfullscreen>
</iframe>`},useData:!0})})();var t="youtube-oembed.html";c.Handlebars.registerPartial(t.replace("/","."),b.templates[t])},"1.0",{requires:["handlebars-base"]})},292302:function(c,b,t){"use strict";t.d(b,{rR:()=>d,sN:()=>o,w0:()=>l});const l="section-theme-indicator",d="header-section-theme-indicator",o="overlay-nav-theme-indicator"},543418:function(c,b,t){"use strict";t.d(b,{ri:()=>Pt,QI:()=>_e,HV:()=>jm,JL:()=>dn,Ao:()=>ed,f:()=>ht,mB:()=>Fe,YX:()=>ta,bO:()=>vn,gm:()=>ti,T3:()=>Ni.Z,Zx:()=>Q,l3:()=>Je,Tx:()=>$u,VX:()=>td,FE:()=>gn,pD:()=>lt,SR:()=>r,W_:()=>Ti,Ew:()=>mi,uB:()=>qt,US:()=>hd});var l=t(714487),d=t(749584),o=t(958607),e=t(334001);class a extends d.Z{loadModel(L){const M=this.state.rootNode.getDOMNode();let U=Array.from(M.classList).find(H=>H.startsWith("columns-")).substr(8);U=parseInt(U,10),this.set("columns",U),e.Z.setup().then(()=>{const H=new this.Y.Squarespace.Models.BlockField({widgetName:M.id,columns:U});H.load(()=>{this.set("model",H);const V=this.getPageLayout();V.get("columns")!==this.state.columns&&this.Y.SQS.LayoutEngine.PageLayoutTools.convertLayoutToNewColumnCount(V,this.state.columns),L()})})}getPageLayout(){return this.state.model.get("data").get("layout")}getBlockFieldId(){return this.state.rootNode.getAttribute("id")}getClassificationLabel(){const L=super.getClassificationLabel();return L||(0,l.t)("Region #",null,{project:"apps.App"})+this.getBlockFieldId()}trackEditClick(){(0,o.Qf)("block-field-edit",this.getClassificationLabel())}constructor(L,{rootNode:M}){super(L,{rootNode:M})}}const r=a;var s=t(646715),n=t.n(s),i=t(368021),u=t.n(i),h=t(58980),g=t.n(h),p=t(387582),f=t(419467),m=t(553772);class _{destroy(){this.editor.destroy(!0),this.editor=null,this.dataChangeHandler=null}setData(L){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.data=L,this.dataChangeHandler(L,M)}addDataChangeHandler(L){this.dataChangeHandler=L}createHTMLContentEditor(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=L.type??m.rg.SIMPLE,U=this.Y.Squarespace.Singletons.TextEditorToolbar,H="div";L.isInline&&(M=m.rg.PLAIN_TEXT,U=null,H="span");const V=new this.Y.Squarespace.TextEditor({render:this.hostNode,placeholder:L.placeholder,type:M,isInline:L.isInline,MenuConstructor:U,menuItems:L.menuItems,initialData:this.data,boundingBox:H,...L});return V.on("contentUpdated",(function(G){this.data!==G.content&&(this.data=G.content,this.dataChangeHandler(this.data),this.dirty=!0)}).bind(this)),V}constructor(L,{hostNode:M,data:U,textEditorOptions:H}){this.Y=L,this.hostNode=M,this.parentNode=M.parentNode,this.data=(0,f.isString)(U)?U:"",this.dataChangeHandler=()=>{},this.dirty=!1,this.hostNode.innerHTML="",H=H||{},H.placeholder=H.placeholder||(0,l.t)("Write here\u2026",null,{project:"apps.App"}),this.editor=this.createHTMLContentEditor(H)}}var v=t(779904),E=t(461761),S=t.n(E),y=t(249260),C=t(655191),O=t(586745),A=t.n(O),I=t(770500),D=t.n(I),T=t(337061),B=t(217528),N=t(834935),P=t(938077),x=t(129931),R=t(876249),w=t(324270),k=t(787592),q=t(119978),F=t(730842),z=t(713820),j=t(989250);function X(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}class J extends(0,R.Z)(x.Z){afterEditableChange(L){this.syncScroll(L),this.setLayoutNodeHeight(L),this.syncEditor(),this.syncEditorOverlay(),L&&this.set("startupBlockId",null)}handleDblClick(L){if(L.halt(),!this.state.visible||this.state.editable)return;const M=L.target,U=M.hasClass(".sqs-block")?M:M.ancestor(".sqs-block");U&&this.set("startupBlockId",U.getAttribute("id")),this.requestEditFlowEntrance()}getOverlayEditorAlignPoint(){return y.Z.TOP_RIGHT}getActionList(){return[{name:"edit",label:(0,l.t)("Edit",null,{project:"apps.App"}),handleClick:()=>{(0,o.vF)("item-edit",this.state.trackingIdentifier);const L=this.state.model.get("collectionId"),M=F.Z.getCollection(L);(0,j.j)(M)===C.A.PRODUCT_COLLECTION&&(0,q.L1)("cms-page-preview"),this.handleEditClick()}}]}getClassificationLabel(){return this.state.strings.label}requestEditFlowEntrance(){this.handleEditClick()}handleEditClick(){const{collection:L,model:M}=this.state;if(L.get("isDemoCollection")){L.cloneToNewCollectionWithItem(M.get("id"),{silent:!0}).then(U=>{this.props.registerActionOnNextLoad({action:"enterPostEditFlow",options:{}}),w.default.setUrl(U.itemFullUrl)});return}this.loadContentItem().then(this.editItem)}hasNodesForFrontendEditing(){const{rootNode:L}=this.state,U=L.all('[data-content-field="title"]').size()>0,V=L.all('.sqs-layout[data-type="item"]').size()>0;return this.isItemView?V:this.isItemView?!1:U&&V}afterModelChange(L,M){L.editorUid===M.editorUid||L.changed.active||(L.changed.title&&this.titleEditor&&this.titleEditor.setData(L.changed.title.newVal,{silent:!0}),L.changed.body&&L.changed.body.newVal.layout&&this.bodyEditor&&this.bodyEditor.pageLayout.setAttrs(L.changed.body.newVal.layout,{editorUid:L.editorUid||M.editorUid,forceRefresh:!!L.editorUid}),this.set("dirty",!0))}previewLayout(L){const M=this.Y.Squarespace.LayoutEngine.EditController.getInstance(),U=this.state.rootNode.one('.sqs-layout[data-type="item"]');M.pluginLayoutBuilder(U,L),M.destroyLayoutBuilder(U)}constructor(L,{rootNode:M,model:U,collection:H,strings:V,trackingIdentifier:G}){const Z={collection:null,model:null,placeAnnotationInside:!0,nodeHeaderTitle:(0,l.t)("Post",null,{project:"apps.App"}),strings:{label:(0,l.t)("Generic Item",null,{project:"apps.App"})},pageLayout:new L.Y.SQS.LayoutEngine.Models.PageLayout({collectionId:H.get("id"),parentItemId:U.get("id")}),trackingIdentifier:"generic"},ee=n()({},Z,{rootNode:M,model:U,collection:H,strings:V,trackingIdentifier:G});super(L,ee),X(this,"destroy",()=>{this.state.model&&this.state.model.destroy(),super.destroy()}),X(this,"loadContentItem",()=>new Promise(($,te)=>{if(!this.state.model){te(new Error("Cannot load content item"));return}this.state.model.load({forceReload:!0},()=>{const{model:se,pageLayout:ae}=this.state,oe=se.get("title");u()(oe)&&oe.length>0&&this.set("nodeHeaderTitle",oe),ae.setAttrs(se.get("body.layout")),$()})})),X(this,"editItem",()=>{!this.state.destroyed&&this.hasResourcesToInlineEdit()?this.startInlineEditing():this.showContentItemEditor()}),X(this,"hasResourcesToInlineEdit",()=>{const $=this.state.model;return!$||$.get("recordType")!==A().TEXT?!1:this.hasNodesForFrontendEditing()}),X(this,"startInlineEditing",()=>{this.set("editable",!0)}),X(this,"syncEditorOverlay",()=>{if(!this.state.editable)return v.Z.hideEditorOverlay();const $=(0,T.d6)(),te=(0,P.FWA)(D().TUTORIAL_ADD_BLOCK_BUTTON)($),se=(0,l.t)("Add Block",null,{project:"apps.App"}),ae=[{name:"save",label:(0,l.t)("Save",null,{project:"apps.App"}),handleClick:()=>this.props.fireRequestSaveChangesEvent(this.state.model)},{name:"cancel",label:(0,l.t)("Cancel",null,{project:"apps.App"}),handleClick:()=>this.props.fireRequestDiscardChangesEvent()},{name:"add",label:te?"":se,title:(0,l.t)("Add Block",null,{project:"apps.App"}),className:"sqs-float-right sqs-annotation-add-block-button",icon:te,handleClick:oe=>{(0,T.GE)((0,B.ic)(D().TUTORIAL_ADD_BLOCK_BUTTON)),this.Y.Squarespace.LayoutEngine.EditController.getInstance().showBlockMenu({align:{node:this.Y.one(oe.target),points:[this.Y.WidgetPositionAlign.TC,this.Y.WidgetPositionAlign.TR]},layoutNode:this.state.rootNode.one('.sqs-layout[data-type="item"]')})}},{name:"settings",label:(0,l.t)("Settings",null,{project:"apps.App"}),className:"sqs-float-right",handleClick:()=>{this.showContentItemEditor({onlySetAttrsOnSave:!0})}}];v.Z.showEditorOverlay({buttons:ae,className:"sqs-content-item-minimal-node-header",hostNode:this.state.rootNode.getDOMNode(),label:(0,l.t)("Editing &lsquo;{sub1}&rsquo;",{sub1:this.state.nodeHeaderTitle.trim()},{project:"apps.App"}),scrollLayoutOnEditingStart:this.state.scrollLayoutOnEditingStart,updateAfterScroll:this.clearLayoutNodeHeight.bind(this)})}),X(this,"save",()=>(this.syncInlineEditorsToEditingItem(),super.save())),X(this,"onCancel",()=>{this.set("dirty",!1)}),X(this,"revert",()=>{const $=se=>{const ae=S()(se,"message",S()(se,"responseJSON.message"));return new this.Y.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Error Saving",null,{project:"apps.App"}),"strings.message":ae||(0,l.t)("Please try saving again.",null,{project:"apps.App"})})};return new Promise((se,ae)=>{this.state.model?this.state.model.resetToLastRead(se,ae):ae(new Error("No content item model to revert."))}).then(this.onCancel).catch($)}),X(this,"syncInlineEditorsToEditingItem",()=>{const $=this.state.model;if(!$){(0,k.Tb)(new Error("Missing item, cannot sync inline editors"));return}this.titleEditor&&$.set("title",this.titleEditor.data),this.bodyEditor&&$.set("body",{layout:this.state.pageLayout.toJSON()})}),X(this,"showContentItemEditor",$=>{var te;const se=this.state.model;if(!se){(0,k.Tb)(new Error("Missing item, cannot show content item editor"));return}if((0,j.j)((te=this.state.collection)===null||te===void 0?void 0:te.toJSON())===C.A.EVENT_COLLECTION){F.Z.openEventModal70(window.top.Y,se.get("collectionId"),se.get("id"));return}const ae=this.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.ContentItemEditorFactory");if(this.syncInlineEditorsToEditingItem(),se.get("recordType")===A().STORE_ITEM){const ue=()=>{window.setTimeout((function(){this.Y.Squarespace.Singletons.Location.requestFrameRefresh()}).bind(this),0)};z.ProductComposerOrchestrator.openProductComposer({productId:se.get("id"),onSavingClose:()=>{if(!this.hasResourcesToInlineEdit(se)){ue();return}this.syncEditor(),this.set("dirty",!0)},onNonSavingClose:ue});return}const oe=ae.getEditor(se),de=new oe(this.Y.merge($,{model:se}));de.once(["savingClose","nonSavingClose"],function(xe){if(!this.hasResourcesToInlineEdit(se)){window.setTimeout((function(){this.Y.Squarespace.Singletons.Location.requestFrameRefresh()}).bind(this),0);return}xe.type.indexOf("savingClose")>-1&&(this.syncEditor(),this.set("dirty",!0)),de.get("autoSaveAnnotation")&&this.props.fireRequestSaveChangesEvent(this.state.model)},this),de.show()}),X(this,"syncEditor",()=>{this.state.editable?this.renderInlineEditors():this._destroyInlineEditors()}),X(this,"revertPageLayout",()=>{const{model:$,pageLayout:te}=this.state,se=$.get("body.layout");return te.setAttrs(se),te}),X(this,"_destroyInlineEditors",()=>{if(this.titleEditor){const $=this.titleEditor.hostNode;this.state.model&&($.innerHTML=this.state.model.get("title")),this.titleEditor.destroy(),this.titleEditor=null}if(this.reenableLinkNavigation(),this.state.model&&this.state.model.detachAll(),this.bodyEditor){const $=this.bodyEditor.hostNode;this.bodyEditor.destroy(),this.bodyEditor=null;const te=this.Y.Squarespace.LayoutEngine.EditController.getInstance();te.pluginLayoutBuilder(this.Y.one($),this.revertPageLayout()),te.destroyLayoutBuilder(this.Y.one($))}}),X(this,"renderInlineEditors",()=>{const $=this.state.rootNode;this._destroyInlineEditors(),this.disableLinkNavigation();const te={editorUid:this.Y.guid()},se=$.one('[data-content-field="title"]');se&&this.state.model&&(this.titleEditor=new _(this.Y,{hostNode:se.getDOMNode(),data:this.state.model.get("title"),textEditorOptions:{isInline:!0,placeholder:(0,l.t)("Enter a post title\u2026",null,{project:"apps.App"})}}),this.titleEditor.addDataChangeHandler(oe=>{this.set("dirty",!0),this.state.model.set("title",oe,te)}));const ae=$.one('.sqs-layout[data-type="item"]');if(ae){const oe=$.one('.sqs-layout[data-type="promoted-block"]');oe&&oe.hide(),this.bodyEditor=new N.Z(this.Y,{hostNode:ae.getDOMNode(),pageLayout:this.revertPageLayout(),startupBlockId:this.state.startupBlockId}),this.bodyEditor.addDirtyLayoutDataHandler(de=>{de.editorUid||(this.set("dirty",!0),this.state.model.set("body",{layout:this.bodyEditor.pageLayout.toJSON()},te))})}!this.afterModelChangeHandler&&this.state.model&&(this.afterModelChangeHandler=this.state.model.after("change",this.afterModelChange,this,te),this.registerYUIEventListener(this.afterModelChangeHandler))}),this.isItemView=!!this.preview.window.Static.SQUARESPACE_CONTEXT.itemId,this.addAfterChangeHandler("editable",this.afterEditableChange),this.registerYUIEventListener(this.state.rootNode.delegate("dblclick",this.handleDblClick,".sqs-block",this))}}const Q=J,{IGNORED_ITEM_ANNOTATION_SELECTORS:ie}=p.Z,ce='[data-content-field="title"]';class pe extends(0,R.Z)(x.Z){toggleEditButton(){const{itemId:L}=this.preview.window.Static.SQUARESPACE_CONTEXT;u()(L)&&this.set("showEditButton",!1)}attachAfterChangeListeners(){this.addAfterChangeHandler("editable",()=>{this.syncEditor(),this.syncEditorOverlay()},this)}bindNestedContentItems(){this.state.rootNode.all("[data-item-id]:not(.sqs-simple-like):not(.sqs-add-to-cart-button)").each(L=>{if(ie.some(Z=>L.hasClass(Z)))return;const U=L.getDOMNode().getAttribute("data-item-id"),H=this.Y.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Models.ContentItem"),V=this.Y.Squarespace.AttrValidators.isInstanceOf(H),G=new H({id:U,collectionId:this.state.collection.get("id")});this.props.registerAnnotationController(Q,{rootNode:L,model:V(G,"model")?G:null,collection:this.state.collection,strings:{label:this.state.strings.nestedItemLabel},trackingIdentifier:this.state.trackingIdentifier})})}renderInlineMetaDataEditors(){const L=this.state.rootNode.getDOMNode(),{collection:M}=this.state;this.disableLinkNavigation();const U=L.querySelector(ce);U&&(this.titleEditor=new _(this.Y,{hostNode:U,data:M.get("title"),textEditorOptions:{placeholder:(0,l.t)("Enter a page title\u2026",null,{project:"apps.App"})}}),this.titleEditor.addDataChangeHandler(()=>this.set("dirty",!0)));const H=L.querySelector('[data-content-field="description"]');H&&(this.descriptionEditor=new _(this.Y,{hostNode:H,data:M.get("description.html")||"",textEditorOptions:{isInline:!1,placeholder:(0,l.t)("Enter a page description\u2026",null,{project:"apps.App"})}}),this.descriptionEditor.addDataChangeHandler(()=>this.set("dirty",!0)))}destroyInlineMetaDataEditors(){if(this.titleEditor){const L=this.titleEditor.hostNode;L.innerHTML=this.state.collection.get("title"),this.titleEditor.destroy(),this.titleEditor=null}if(this.descriptionEditor){const L=this.descriptionEditor.hostNode;L.innerHTML=this.state.collection.get("description.html"),this.descriptionEditor.destroy(),this.descriptionEditor=null}this.reenableLinkNavigation()}getClassificationLabel(){return this.state.strings.label}getActionList(){const L=[],{collection:M}=this.state;this.state.showAddItemButton&&L.push({name:"add",label:M.getTemplateConfiguration().get("addText"),handleClick:this.handleAddContentRequest}),this.state.showEditButton?L.push({name:"edit",label:this.state.strings.edit,handleClick:()=>{(0,o.s)("collection-panel",M.get("typeName")),this.navigateToCollection({shimmy:this.state.shimmySelector})}}):this.containedMetaFields.size()>0&&L.push({name:"edit",label:(0,l.t)("Edit",null,{project:"apps.App"}),handleClick:()=>{(0,o.s)("collection-edit-inline-metadata",M.get("typeName"));const G=()=>{this.state.collection.load(()=>{this.set("editable",!0)})};M.get("isDemoCollection")?this.cloneCollection().then(G):G()}});const U=this.getMainImageToggleAction();g()(U)&&L.push(U);const H=this.getCollectionSettingsAction();return g()(H)&&L.push(H),L}getContainedMetaFields(){const L=[ce,'[data-content-field="description"]'],M=this.state.rootNode;if(M.test(L.join(",")))return new this.Y.NodeList(M);let U=M.all(L.join(","));return U=U.filter(H=>!this.Y.one(H).ancestor("[data-item-id]")),U}navigateToCollection(L){const{collection:M}=this.state,U=M?M.get("id"):"";this.Y.Squarespace.Singletons.Location.goToCollection(U,L)}syncEditor(){this.state.editable?this.renderInlineMetaDataEditors():this.destroyInlineMetaDataEditors()}syncEditorOverlay(){if(!this.state.editable)return v.Z.hideEditorOverlay();v.Z.showEditorOverlay({buttons:[{name:"save",label:(0,l.t)("Save",null,{project:"apps.App"}),handleClick:()=>this.props.fireRequestSaveChangesEvent()},{name:"cancel",label:(0,l.t)("Cancel",null,{project:"apps.App"}),handleClick:()=>this.props.fireRequestDiscardChangesEvent()}],className:"sqs-content-item-minimal-node-header",hostNode:this.state.rootNode.getDOMNode(),label:(0,l.t)("Editing &lsquo;{sub1}&rsquo;",{sub1:this.state.collection.get("title")},{project:"apps.App"})})}save(){const{collection:L}=this.state;this.titleEditor&&L.set("title",this.titleEditor.data),this.descriptionEditor&&L.set("description",{html:this.descriptionEditor.data});const M=new Promise((U,H)=>{L.save({silent:!0},V=>{V?H(V):U()})});return M.then(()=>{this.set("editable",!1),this.set("dirty",!1)}),M}revert(){const L=new Promise((M,U)=>{this.state.collection.load(H=>{H?U(H):M()})});return L.then(()=>{this.set("editable",!1),this.set("dirty",!1)}),L}constructor(L,M){const U={collection:null,shimmySelector:".sqs-navigation-bar",showAddItemButton:!0,showEditButton:!0,strings:{editText:(0,l.t)("Edit",null,{project:"apps.App"})}},H=n()({},U,M);super(L,H),this.toggleEditButton(),this.attachAfterChangeListeners(),this.examineAndInitializeMainImageToggle(this.state.rootNode),this.containedMetaFields=this.getContainedMetaFields()}}const ye=pe;class Ae extends ye{getActionList(){return this.hasItemId?[]:super.getActionList()}constructor(L,{rootNode:M,overlayRootNode:U,collection:H}){const V={strings:{label:(0,l.t)("Blog",null,{project:"apps.App"}),nestedItemLabel:(0,l.t)("Post",null,{project:"apps.App"}),edit:(0,l.t)("Manage Posts",null,{project:"apps.App"})},trackingIdentifier:"post",shimmySelector:".sqs-content-manager-blog"},G=n()({},V,{rootNode:M,overlayRootNode:U,collection:H});super(L,G),this.bindNestedContentItems();const{itemId:Z}=this.preview.window.Static.SQUARESPACE_CONTEXT;u()(Z)&&(this.hasItemId=!0,this.set("showEditButton",!0))}}const Je=Ae;class ke extends x.Z{getClassificationLabel(){return(0,l.t)("Business Information",null,{project:"apps.App"})}getActionList(){return[{name:"edit",label:(0,l.t)("Edit",null,{project:"apps.App"}),handleClick:this.handleEditClick}]}handleEditClick(){(0,o.Qf)("business-information"),this.Y.Squarespace.Singletons.Location.go("/config/settings/business-information")}constructor(L,{rootNode:M}){super(L,{rootNode:M})}}const Fe=ke;class Ie extends ye{constructor(L,{rootNode:M,overlayRootNode:U,collection:H}){const V={strings:{label:(0,l.t)("Events",null,{project:"apps.App"}),nestedItemLabel:(0,l.t)("Event",null,{project:"apps.App"}),edit:(0,l.t)("Manage Events",null,{project:"apps.App"})},trackingIdentifier:"event",shimmySelector:".sqs-content-manager-calendar"},G=n()({},V,{rootNode:M,overlayRootNode:U,collection:H});super(L,G),this.bindNestedContentItems()}}const ht=Ie;var me=t(286465),Ee=t(885878);class Se extends x.Z{hasPermission(){return!me.Z.hasRole(Ee.EDITOR)&&!me.Z.hasRole(Ee.STORE_MANAGER)}getClassificationLabel(){return(0,l.t)("Social Links",null,{project:"apps.App"})}getActionList(){return[{name:"edit",label:(0,l.t)("Edit",null,{project:"apps.App"}),handleClick:this.handleEditClick}]}handleEditClick(){(0,o.Qf)("social-links"),this.Y.Squarespace.Singletons.Location.go("/config/settings/social-links",{shimmy:".sqs-social-account-settings"})}constructor(L,{rootNode:M}){super(L,{rootNode:M})}}const lt=Se;class Lt extends ye{constructor(L,{rootNode:M,overlayRootNode:U,collection:H}){const V={strings:{label:(0,l.t)("Gallery",null,{project:"apps.App"}),edit:(0,l.t)("Edit",null,{project:"apps.App"})},shimmySelector:".sqs-content-manager-gallery"},G=n()({},V,{rootNode:M,overlayRootNode:U,collection:H});super(L,G)}}const Pt=Lt;var Ce=t(406167),je=t.n(Ce),Le=t(834304),ci=t.n(Le),Jt=t(181298),Ft=t(409790);class ti extends ye{destroy(){this.hasPlaceholder()&&(this.placeholder.remove(),this.placeholder.destroy(),this.placeholder=null),this.hashChangeEvt&&(this.hashChangeEvt.detach(),this.hashChangeEvt=null),super.destroy()}attachHashChangeListener(){this.hashChangeEvt=this.Y.one(this.preview.window).on("hashchange",L=>{this.evaluateCollectionFromHash(L.newHash)}),this.evaluateCollectionFromHash(this.preview.window.location.hash)}_getCollectionByHash(L,M){this.Y.Squarespace.ContentCollectionCache.toArray().find(U=>(0,Ft.db)(L,{collection:U.toJSON()})===M)}evaluateCollectionFromHash(L){if(L.length===0)return;const M=this.state.collection.getTemplateConfiguration(),U=this.state.collection.getTemplateConfiguration().get("index"),H=M.get("indexCollectionHashUrlTemplate");if(!U||!H||!u()(H))return;L=L.startsWith("#")?L:`#${L}`;let V=this._getCollectionByHash(H,L);!V&&this.hasFoundCollectionsBefore?V=this.state.collection:V&&!this.hasFoundCollectionsBefore&&(this.hasFoundCollectionsBefore=!0),V&&(V.load(),this.navigateToCollection({},V))}renderPlaceholder(){this.isEmptyIndex()&&this.state.rootNode.get("innerText").trim().length===0&&(this.placeholder=this.getPlaceHolder(),this.state.rootNode.appendChild(this.placeholder),this.initializeEmptyIndex())}initializeEmptyIndex(){}isEmptyIndex(){if(!this.state.collection)return!1;const L=this.state.collection.get("id"),U=this.Y.Squarespace.Singletons.TemplateNavigationList.getItemByCollectionId(L);if(!U)return!1;const H=U.get("children");return H&&H.size()===0}getPlaceHolder(){return this.Y.Node.create('<div class="sqs-empty-index-placeholder"><span>'+(0,l.t)("Empty Index Page",null,{project:"apps.App"})+"</span></div>")}hasPlaceholder(){return!!this.placeholder}syncChildCollectionAnnotationControllers(L,M){const{childAnnotationControllers:U=[]}=this.state,H=[];for(U.forEach(G=>{(G.state.destroyed||!G.state.rootNode.inDoc())&&H.push(G)});H.length!==0;){const G=H.shift();this.props.removeAnnotationController(G),U.remove(G)}const V=this.getChildAnnotationControllerWrapperNodes(L);!V||this.isEmptyIndex()||(V.each(this.ensureInitializedECForNode.bind(this)),M&&M())}getAcForNode(L){const{childAnnotationControllers:M=[]}=this.state;return M.find(U=>U.state.rootNode===L)}ensureInitializedECForNode(L){const{childAnnotationControllers:M=[]}=this.state;let U=this.getAcForNode(L);if(!U){if(U=this.props.initializeAnnotationControllerForNode(L),!U)return;M.push(U)}const H=this.props.isNodeVisible(L,!0);U.set("visible",H)}getChildAnnotationControllerWrapperNodes(L){return this.Y.config?L?this.Y.all(`[data-dynamic-href="${L}"],[data-url="${L}"]`):this.state.rootNode.all('[data-collection-id],.sqs-layout[data-type="page"]').filter(U=>!this.Y.one(U).one('.sqs-layout[data-type="page"]')):void 0}navigateToCollection(L){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state.collection;const U=M?M.get("id"):"",{Location:H}=this.Y.Squarespace.Singletons,V="pages";this.props.contentModeControllerSet("contextCollection",M),H.getPanelPath()[0]!==V&&H.go(V,L),this.syncChildCollectionAnnotationControllers(),this.ensureCollectionIsInView(U)}handleAddContentRequest(){return new this.Y.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Not Available Yet",null,{project:"apps.App"}),"strings.message":(0,l.t)("But it will be super cool when its available.",null,{project:"apps.App"})}).show()}getActionList(){if(!this.isEmptyIndex()){const L=this.getMainImageToggleAction(),M=this.getContainedMetaFields();if(!(0,f.isObject)(L)&&(this.state.showEditButton||M.size()===0))return[]}return super.getActionList()}getAnnotationControllerForCollectionId(L){const{childAnnotationControllers:M=[]}=this.state;return M.find(U=>{if(!U.state.visible)return;const{collection:H}=U.state;return H?H.get("id")===L:!1})}cleanupArtifacts(){const{ACTIVE_LIGHTBOX:L}=this.preview.window;L&&L.hideAndDestroy()}awaitContentChange(L,M){let U;const H=[],V=[],G=new MutationObserver(Z=>{Z.forEach(ee=>{U&&clearTimeout(U),V.push(ee),U=setTimeout(()=>{clearTimeout(U),G.disconnect(),M(V)},200)})});for(let Z=0;Z<L.length;Z++)(!L[Z].children.length||!L[Z].classList.contains("sqs-dynamic-data-ready")&&!L[Z].querySelectorAll(".sqs-dynamic-data-ready").length)&&(G.observe(L[Z],{childList:!0,subtree:!0}),H.push(L[Z]));H.length||G.disconnect()}ensureCollectionIsInView(L){this.syncChildCollectionAnnotationControllers(),this.cleanupArtifacts();const M=this.getAnnotationControllerForCollectionId(L);if(!M){if(ci().GRID===this.state.collection.getTemplateConfiguration().get("indexType")){const ee=this.Y.Squarespace.ContentCollectionCache.getById(L).get("urlId"),$=this.getChildAnnotationControllerWrapperNodes(`/${ee}/`);if(!$)return;const te=this.props.stack.add(()=>{});this.awaitContentChange($.getDOMNodes(),()=>this.syncChildCollectionAnnotationControllers(`/${ee}/`,te))}return}const V=M.state.rootNode.get("region").top,G=Jt.GRID_PX*10,Z=V-G;this.Y.one(je()(this.preview.document)).anim({scroll:[0,Z]}).run()}constructor(L,{rootNode:M,overlayRootNode:U,collection:H},V={}){const G={childAnnotationControllers:[],shimmySelector:`[data-collection-id="${H.get("id")}"]`,showAddItemButton:!1,strings:{label:(0,l.t)("Index",null,{project:"apps.App"}),edit:(0,l.t)("Edit",null,{project:"apps.App"})}},Z=(0,f.merge)({},G,V,{rootNode:M,overlayRootNode:U,collection:H});super(L,Z),this.attachHashChangeListener(),this.syncChildCollectionAnnotationControllers(),this.renderPlaceholder()}}class gi extends ye{constructor(L,{rootNode:M,overlayRootNode:U,collection:H}){const V={strings:{label:(0,l.t)("Music Album",null,{project:"apps.App"}),edit:(0,l.t)("Edit",null,{project:"apps.App"})},shimmySelector:".sqs-content-manager-music-album"},G=n()({},V,{rootNode:M,overlayRootNode:U,collection:H});super(L,G)}}const qt=gi;var Mt=t(762535);class Vt extends x.Z{hasPermission(){return!me.Z.hasRole(Ee.EDITOR)&&!me.Z.hasRole(Ee.STORE_MANAGER)}getClassificationLabel(){return(0,l.t)("Navigation",null,{project:"apps.App"})}getActionList(){return[{name:"edit",label:(0,l.t)("Edit",null,{project:"apps.App"}),handleClick:this.handleEditClick}]}handleEditClick(){(0,o.Qf)("navigation-edit"),this.Y.Squarespace.Singletons.Location.go(Mt.Z.forPagesPanel(),{shimmy:".sqs-navigation-pages"})}constructor(L,{rootNode:M}){super(L,{rootNode:M})}}const Ti=Vt;var Ni=t(696727),ui=t(657300);class gn extends(0,R.Z)(ye){destroy(){this.removeEmptyMessage(!0),super.destroy()}isPageEmpty(){const{pageCollectionData:L}=this.state;return L&&L.get("data")&&L.isLayoutEmpty()}getActionList(){const L=super.getActionList();if(!this.state.pageCollectionDataLoaded)return L;const{collection:M}=this.state,U=M.get("id");return!L.some(V=>V&&V.label==="Edit")&&U&&this.isPageEmpty()&&L.unshift({name:"edit",label:(0,l.t)("Edit",null,{project:"apps.App"}),handleClick:()=>{(0,o.s)("edit-addEmptyContentAndRefreshFrame",M.get("typeName")),this.addEmptyContentAndRefreshFrame(U)}}),L}addEmptyContentAndRefreshFrame(L){ui.Z.resetPageCollectionData(L).then(()=>this.Y.Squarespace.Singletons.Location.requestFrameRefresh()).catch(M=>{let{response:U}=M;const H=U.data&&U.data.message;return new this.Y.Squarespace.Widgets.Alert({"strings.title":(0,l.t)("Something Went Wrong",null,{project:"apps.App"}),"strings.message":H||(0,l.t)("Failed to create placeholder content and edit. Please try again.",null,{project:"apps.App"})})})}constructor(L,{rootNode:M,overlayRootNode:U,collection:H}){const V={strings:{label:(0,l.t)("Page",null,{project:"apps.App"})},showAddItemButton:!1,showEditButton:!1,pageCollectionDataLoaded:!1,pageCollectionData:new L.Y.Squarespace.Models.PageCollectionData({collection:H})},G=(0,f.merge)({},V,{rootNode:M,overlayRootNode:U,collection:H});super(L,G),this.state.pageCollectionData.load(()=>{this.set("pageCollectionDataLoaded",!0),this.isPageEmpty()&&this.renderEmptyMessage(),this.props.annotationController&&typeof this.props.annotationController.repaintRequest=="function"&&this.props.annotationController.repaintRequest()})}}var zi=t(202369),Mn=t(434927),Zt=t.n(Mn);const Te=new Map;Te.set(Zt().HEADING,(0,l.t)("Heading",null,{project:"src.shared"})),Te.set(Zt().SUB_HEADING,(0,l.t)("Sub Heading",null,{project:"src.shared"})),Te.set(Zt().BODY,(0,l.t)("Body",null,{project:"src.shared"})),Te.set(Zt().IMAGE,(0,l.t)("Image",null,{project:"src.shared"})),Te.set(Zt().GALLERY,(0,l.t)("Imagery",null,{project:"src.shared"})),Te.set(Zt().VIDEO,(0,l.t)("Video",null,{project:"src.shared"})),Te.set(Zt().SOCIAL_ICONS,(0,l.t)("Social Icons",null,{project:"src.shared"})),Te.set(Zt().BUTTONS,(0,l.t)("Buttons",null,{project:"src.shared"})),Te.set(Zt().NAVIGATION,(0,l.t)("Navigation",null,{project:"src.shared"})),Te.set(Zt().CUSTOM_FORM,(0,l.t)("Custom Form",null,{project:"src.shared"})),Te.set(Zt().NEWSLETTER,(0,l.t)("Newsletter",null,{project:"src.shared"})),Te.set(Zt().ALBUM,(0,l.t)("Audio",null,{project:"src.shared"})),Te.set(Zt().MAP,(0,l.t)("Map",null,{project:"src.shared"})),Te.set(Zt().LOCK,(0,l.t)("Lock",null,{project:"src.shared"})),Te.set(Zt().PASSWORD,(0,l.t)("Password",null,{project:"src.shared"})),Te.set(Zt().TWITTER,(0,l.t)("Twitter",null,{project:"src.shared"})),Te.set(Zt().LOGO,(0,l.t)("Logo",null,{project:"src.shared"})),Te.set(Zt().ACTION,(0,l.t)("Action",null,{project:"src.shared"})),Te.set(Zt().TEMP_LOCK_INJECT,(0,l.t)("temp_lock_inject",null,{project:"src.shared"}));const qe=new Map;qe.set("BRANDING_TEXT","branding-text"),qe.set("ACTION","action"),qe.set("MEDIA","media"),qe.set("VIDEO","video"),qe.set("AUDIO","audio"),qe.set("LOCATION","location"),qe.set("TWITTER","twitter"),qe.set("SOCIAL_ICONS","social-links");const xt={getLabelForSliceType:function(K){return Te.get(K)},getUrlForSliceTypeGroupForSliceType:function(K,L){let M=null;for(const U in L)if(L.hasOwnProperty(U)&&L[U].indexOf(K)>-1){M=U;break}return qe.get(M)}};var Gt=t(331280);class Li extends x.Z{getClassificationLabel(){return xt.getLabelForSliceType(this.getSliceType())}getActionList(){const L=this.getClassificationLabel();return[{name:"edit",label:(0,l.t)("Edit {classificationLabel}",{classificationLabel:L},{project:"apps.App"}),handleClick:this.handleEditClick}]}getSliceType(){const{sliceTypeStr:L}=this.state;return zi.Z[L]}getUrl(){const L=this.getSliceType(),{SliceTypeGroups:M}=this.Y.Squarespace,U=xt.getUrlForSliceTypeGroupForSliceType(L,M),H=[];return(0,Gt.rM)()||(H.push("config"),H.push("pages"),H.push(this.state.contextCollectionId)),H.push(U),"/"+H.join("/")}getShimmySelector(){const{sliceTypeStr:L}=this.state;return`[data-shimmy-id="${L}"]`}handleEditClick(){const L=this.getSliceType(),{SliceTypeGroups:M}=this.Y.Squarespace,U=xt.getUrlForSliceTypeGroupForSliceType(L,M);(0,o.Qf)(`cover-page-${U}`),this.Y.Squarespace.Singletons.Location.go(this.getUrl(),{shimmy:this.getShimmySelector(),pathParams:{collectionId:this.state.contextCollectionId}})}constructor(L,{contextCollectionId:M,rootNode:U,sliceTypeStr:H,visible:V}){super(L,{contextCollectionId:M,rootNode:U,sliceTypeStr:H,visible:V})}}const mi=Li;class le extends ye{constructor(L,{rootNode:M,overlayRootNode:U,collection:H}){const V={strings:{label:(0,l.t)("Products",null,{project:"apps.App"}),nestedItemLabel:(0,l.t)("Product",null,{project:"apps.App"}),edit:(0,l.t)("Manage Products",null,{project:"apps.App"})},trackingIdentifier:"product",shimmySelector:".sqs-content-manager-products"},G=n()({},V,{rootNode:M,overlayRootNode:U,collection:H});super(L,G),this.bindNestedContentItems()}}const _e=le;var Me=t(24175),et=t(614649),$t=t(991735),Ki=t(35045);function pi(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}class Mi extends x.Z{destroy(){this.nodeRect=null,super.destroy()}getSiteDescription(){const{siteDescription:L}=Ki.default.getState();return L.get("html")}getSiteDescriptionOrSpacer(){const L=this.getSiteDescription();return L==="<p></p>"?"<p>&nbsp; &nbsp;</p>":L}setSiteDescription(L,M){return L!==M?Ki.default.save({siteDescription:L}):Promise.resolve()}renderActualWithSpacer(){this.state.rootNode.getDOMNode().innerHTML=this.getSiteDescriptionOrSpacer()}destroyEditor(){this.reenableLinkNavigation(),this.editor&&(this.editor.destroy(),this.editor=null)}renderEditor(){this.disableLinkNavigation();const L=this.state.rootNode.getDOMNode();if(L){const M={isInline:!1,placeholder:(0,l.t)("Enter a site description\u2026",null,{project:"apps.App"})},U=(0,et.kk)({link:!0},M);this.editor=new _(this.Y,{hostNode:L,data:this.getSiteDescription()||"",textEditorOptions:{...M,menuItems:U}}),this.editor.addDataChangeHandler(()=>this.set("dirty",!0))}}save(){return this.setSiteDescription({html:this.editor.data,raw:!1,source:this.editor.data},this.getSiteDescription()).then(this.finish)}revert(){return this.editor&&(this.editor.hostNode.innerHTML=this.getSiteDescriptionOrSpacer()),Promise.resolve().then(this.finish)}hasPermission(){return $t.Z.hasPermission(Me.CONFIG_CHANGE_STRUCTURE)}getClassificationLabel(){return(0,l.t)("Site Description",null,{project:"apps.App"})}getActionList(){return[{name:"edit",label:(0,l.t)("Edit",null,{project:"apps.App"}),handleClick:()=>{(0,o.Qf)("site-description-inline"),this.set("editable",!0)}}]}getOverlayEditorAlignPoint(){const L=this.preview.window;let M=this.nodeRect;if(!M){const U=this.state.overlayRootNode&&this.state.overlayRootNode.getDOMNode();U&&(M=U.getBoundingClientRect(),this.nodeRect=M)}return M&&M.x+M.width>L.innerWidth*3/4?y.Z.TOP_RIGHT:super.getOverlayEditorAlignPoint()}syncEditorOverlay(){if(!this.state.editable)return v.Z.hideEditorOverlay();const L=[{name:"save",label:(0,l.t)("Save",null,{project:"apps.App"}),handleClick:()=>this.props.fireRequestSaveChangesEvent(this.state.model)},{name:"cancel",label:(0,l.t)("Cancel",null,{project:"apps.App"}),handleClick:()=>this.props.fireRequestDiscardChangesEvent()}];v.Z.showEditorOverlay({buttons:L,hostNode:this.state.rootNode.getDOMNode(),label:(0,l.t)("Editing Site Description",null,{project:"apps.App"})})}constructor(L,{rootNode:M}){super(L,{rootNode:M}),pi(this,"afterEditableChange",()=>{this.state.editable?this.renderEditor():this.destroyEditor(),this.syncEditorOverlay()}),pi(this,"finish",()=>{this.set("dirty",!1),this.renderActualWithSpacer()}),this.editor=null,this.nodeRect=null,this.renderActualWithSpacer(),this.addAfterChangeHandler("editable",this.afterEditableChange,this)}}const vn=Mi;var ln=t(487109),Sn=t.n(ln);class an extends x.Z{destroy(){this.siteTitleNodes=null,this.nodeRect=null,super.destroy()}hasPermission(){return $t.Z.hasPermission(Me.CONFIG_CHANGE_STRUCTURE)}getClassificationLabel(){return(0,l.t)("Site Title",null,{project:"apps.App"})}getActionList(){return[{name:"edit",label:(0,l.t)("Edit",null,{project:"apps.App"}),handleClick:this.handleEditClick}]}getOverlayEditorAlignPoint(){const L=this.preview.window;let M=this.nodeRect;if(!M){const U=this.state.overlayRootNode&&this.state.overlayRootNode.getDOMNode();U&&(M=U.getBoundingClientRect(),this.nodeRect=M)}return M&&M.x+M.width>L.innerWidth*3/4?y.Z.TOP_RIGHT:super.getOverlayEditorAlignPoint()}handleEditClick(){(0,o.Qf)("site-title");const L="/design/logo-title";this.Y.Squarespace.Singletons.Location.go(L,{shimmy:".logoSettingsPanel",focus:".logoSettingsPanel .siteTitleInput"})}findNodesWithOriginalSiteTitle(L){const M=this.state.rootNode.getDOMNode(),U=[].concat(Array.from(M.querySelectorAll("*")),M);this.siteTitleNodes=Array.from(U).filter(H=>Sn()(H.innerHTML)===L)}setSiteTitle(L,M){this.siteTitleNodes||this.findNodesWithOriginalSiteTitle(M),this.siteTitleNodes.forEach(U=>{U.innerText=L})}constructor(L,{rootNode:M}){super(L,{rootNode:M}),this.siteTitleNodes=null,this.nodeRect=null}}const dn=an;var W=t(174161),Zi=t(594127),Zn=t(458327),pn=t(795478),Yi=t.n(pn),Un=t(721247),qi=t(934951);const ct={absolutePositionFromBoundingRect(K,L){return L=L||1,["top","left","width","height"].reduce((M,U)=>(M[U]=K[U]*L,M),{})}};var fe=t(845076),it=t.n(fe),wi=t(652381),Fi=t.n(wi);function fn(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}var ki;class un extends(ki=W.Component){render(){const{location:L,action:M}=this.props;return W.createElement("div",{"data-action":M,onClick:this.onClick,className:it()(Fi().actionButton,Fi()[L])},W.createElement("span",{title:M,className:Fi()[M]}))}constructor(...L){super(...L),fn(this,"onClick",M=>{const{action:U,bridgedActions:H,targetIndex:V}=this.props;H[U](V,{top:M.target.getBoundingClientRect().top,constrain:!0})})}}fn(un,"propTypes",{location:Yi().string.isRequired,targetIndex:Yi().number.isRequired,action:Yi().string.isRequired,bridgedActions:Yi().object});const Xn=un;var ne=t(462938),Xe=t.n(ne);function Qe(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}var wt;class ai extends(wt=W.Component){render(){const{boundingDOMRect:L,scaleFactor:M,actionPoints:U,bridgedActions:H}=this.props,V=ct.absolutePositionFromBoundingRect(L,M),G=U.map((Z,ee)=>W.createElement(Xn,{...Z,bridgedActions:H,key:`${Z.location}-${ee}`}));return W.createElement("div",{className:Xe().panel,style:V},W.createElement("div",{className:Xe().relWrapper},G))}}Qe(ai,"propTypes",{boundingDOMRect:Yi().object,scaleFactor:Yi().number,actionPoints:Yi().array,bridgedActions:Yi().object});const Hi=ai;var Xt=t(508257),we=t.n(Xt),Ke=t(539799);function ge(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}const zt={enter:{className:we()["transition-enter"],from:{opacity:0},to:{opacity:1}},leave:{className:we()["transition-leave"],from:{opacity:1},to:{opacity:0}}};var Ht;class bt extends(Ht=W.Component){render(){const{active:L,scaleFactor:M,position:U,scroll:H,bridgedActions:V}=this.props;if(!L)return null;const G=this.getSectionNodes().map((te,se)=>W.createElement(Hi,{key:`index-editor-panel-${se}`,boundingDOMRect:this.getSectionBoundingDOMRect(te),scaleFactor:M,actionPoints:this.getActionsPointsForSection(se),bridgedActions:V})),Z=ct.absolutePositionFromBoundingRect(U),ee={transform:"translate3d("+[-H.x*M,-H.y*M,0].join("px,")+")"},$=H.y!==0;return W.createElement(Un.CSSTransitionGroup,{key:"index-editor",wrapChildWithTag:!1,transitions:zt},W.createElement("div",{"data-foo":"bar",className:it()(we().wrapper,$&&we().isScrolled),style:Z,ref:"wrapper"},this.renderCloseButton(),this.renderInstructions(),W.createElement("div",{className:we().panels,style:ee},G)))}constructor(...L){super(...L),ge(this,"getAnnotationController",()=>this.props.annotationController),ge(this,"getSectionNodes",()=>this.getAnnotationController().getStackedItemWrapperNodes()),ge(this,"getSectionBoundingDOMRect",M=>{const{width:U,height:H,top:V,left:G}=M.getBoundingClientRect(),{pageYOffset:Z,pageXOffset:ee}=M.ownerDocument.defaultView;return{width:U,height:H,top:V+Z,left:G+ee,right:G+U+ee,bottom:V+H+Z}}),ge(this,"createActionConfig",(M,U,H)=>({location:M,targetIndex:U,action:H})),ge(this,"getActionsPointsForSection",M=>{const U=[this.createActionConfig("right",M,"delete"),this.createActionConfig("bottom",M+1,"add")];return M||U.push(this.createActionConfig("top",M,"add")),U}),ge(this,"renderCloseButton",()=>W.createElement(Ke.Z,{backLabel:(0,l.t)("Back",null,{project:"apps.App"}),onBackClick:this.props.bridgedActions.close,onDoubleClick:this.props.bridgedActions.close})),ge(this,"renderInstructions",()=>{const{showInstructions:M}=this.props;return M?W.createElement("div",{className:we().instructionsContainer},W.createElement(qi.T,{project:"apps.App"},"To reorder a section, click and drag it into position")):null})}}ge(bt,"propTypes",{active:Yi().bool,annotationController:Yi().object.isRequired,scaleFactor:Yi().number,position:Yi().object,scroll:Yi().object,bridgedActions:Yi().object,showInstructions:Yi().bool});const he=bt;var Re=t(437951),Wt=t.n(Re),_i=t(994336),fi=t.n(_i);const Be={STYLE_STORE_DATA_ATTRIBUTE:"data-sqs-item-stored-style",RELATIVE_HEIGHT_STORE_DATA_ATTRIBUTE:"data-sqs-viewport-relative-height",RELATIVE_HEIGHT_PROPS:["height","min-height","max-height"],CLASS_NAME_IN_FLIGHT:"sqs-in-flight",CLASS_NAME_ITEMS_REORDERING:"sqs-items-reordering",CLASS_NAME_ITEMS_REORDERING_INFLIGHT:"sqs-index-drag-reordering-ready"},Bi={IN_FLIGHT:{zIndex:999,boxShadow:"0px 0px 60px rgba(0,0,0,0.2)",position:"absolute"},SIMULATED_POST_FLIGHT:{boxShadow:"none"},TRANSITION_DURATION:.5,MIN_SCALE_FACTOR:.5,SCROLL_SPEED:20,SCROLL_TRIGGER_SIZE:100,USE_ACCELERATED_SCROLL:!0};class Tn{storeItemStyles(){this.getItems().forEach(M=>{const U=M.getAttribute(Be.STYLE_STORE_DATA_ATTRIBUTE),H=M.getAttribute("style");!U&&H&&M.setAttribute(Be.STYLE_STORE_DATA_ATTRIBUTE,H),this.itemsWithStoredStyles.push(M)})}restoreStyles(){this.itemsWithStoredStyles.forEach(function(M){const U=M.getAttribute(Be.STYLE_STORE_DATA_ATTRIBUTE);U?M.setAttribute("style",U):M.removeAttribute("style"),M.removeAttribute(Be.STYLE_STORE_DATA_ATTRIBUTE)}),this.itemsWithStoredStyles=[]}switchDOMTree(L,M){const U=this.getItems(),H=L.parentNode,V=U.indexOf(L);let G=U[M];V<M&&(G=U[M+1]),H.insertBefore(L,G)}getItems(){const M=this.window.document.querySelector(this.itemsContainerSelector).querySelectorAll(this.itemSelector);return Array.prototype.slice.call(M)}getItemsWrapper(){return this.window.document.querySelector(this.itemsContainerSelector)}getItemAtIndex(L){return this.getItems()[L]}nodeIsValidDragTarget(L){const U=this.window.document.querySelector(this.itemsContainerSelector).querySelectorAll(this.itemSelector);return Array.prototype.indexOf.call(U,L)!==-1}setAndStoreHeight(L){const M=Be.RELATIVE_HEIGHT_PROPS.reduce((U,H)=>(L.style[H]&&U.push(`${H}:${L.style[H]}`),L.style.setProperty(H,Math.round(L.offsetHeight)+"px","important"),U),[]).join(";");L.setAttribute(Be.RELATIVE_HEIGHT_STORE_DATA_ATTRIBUTE,M)}resetAndRestoreHeight(L){const M=L.getAttribute(Be.RELATIVE_HEIGHT_STORE_DATA_ATTRIBUTE),U={};M&&M.split(";").forEach(H=>{const[V,G]=H.split(":");U[V]=G}),Be.RELATIVE_HEIGHT_PROPS.forEach(H=>{const V=U[H]||"";L.style.setProperty(H,V)}),L.removeAttribute(Be.RELATIVE_HEIGHT_STORE_DATA_ATTRIBUTE)}storeItemViewportResponsiveHeights(){this.getItems().forEach(this.setAndStoreHeight)}restoreItemViewportResponsiveHeights(){const L=this.getItems();L.length&&L.forEach(this.resetAndRestoreHeight)}storeItemsContainerHeight(){const L=this.getItemsWrapper();L&&this.setAndStoreHeight(L)}restoreItemsContainerHeight(){const L=this.getItemsWrapper();L&&this.resetAndRestoreHeight(L)}calculateScaleFactor(){const L=this.window.innerHeight/this.window.document.documentElement.offsetHeight;return L>=this.minScaleFactor?L:this.minScaleFactor}zoomInFrame(){if(!this.frameWasZoomedOut)return;const L=this.previewFrame,M=this.window,U=this.initialStyle||{};Object.entries(U).forEach(H=>{let[V,G]=H;L.style[V]=G}),M.document.body.removeAttribute("data-sqs-scalefactor"),this.frameWasZoomedOut=!1}zoomOutFrame(L){this.frameWasZoomedOut=!0;const M=L.scaleFactor||this.calculateScaleFactor(),U=this.previewFrame,H=this.window;this.initialStyle={transform:U.style.transform,maxHeight:U.style.maxHeight,height:U.style.height,transformOrigin:U.style.transformOrigin},U.style.transform=`${U.style.transform} scale(${M})`,U.style.maxHeight=100/M+"%",U.style.height=100/M+"%",U.style.transformOrigin="top center",H.document.body.classList.add(Be.CLASS_NAME_ITEMS_REORDERING),M<1&&H.document.body.setAttribute("data-sqs-scalefactor",M)}getComputedStyle(L,M){return this.window.getComputedStyle(L,null).getPropertyValue(M)}constructor(L={}){this.minScaleFactor=L.minScaleFactor||Bi.MIN_SCALE_FACTOR,this.window=L.window||window,this.previewFrame=L.previewFrame,this.itemsContainerSelector=L.itemsContainerSelector,this.itemSelector=L.itemSelector,this.itemsWithStoredStyles=[]}}const Ln=Tn,hi={isInFlight:!1,isInDragMode:!1},di={BEFORE_FLIGHT_START:"sqs-stacked-items-before-drag-start",FLIGHT_START:"sqs-stacked-items-drag-start",FLIGHT_MOVE:"sqs-stacked-items-drag",BEFORE_FLIGHT_END:"sqs-stacked-items-before-drag-end",AFTER_FLIGHT_END:"sqs-stacked-items-after-drag-end",DOM_REORDER:"sqs-stacked-items-dom-reorder",BEFORE_FLIGHT_MODE_ENABLED:"sqs-stacked-items:before-flightmode-enabled",FLIGHT_MODE_ENABLED:"sqs-flight-mode-enabled",BEFORE_FLIGHT_MODE_DISABLED:"sqs-stacked-items:before-flightmode-disabled",FLIGHT_MODE_DISABLED:"sqs-flight-mode-disabled"},Cn=function(K,L,M){L.dispatchEvent(new CustomEvent(K,{detail:M})),(K===di.FLIGHT_MOVE||K===di.BEFORE_FLIGHT_END||K===di.DOM_REORDER)&&L.dispatchEvent(new Event("scroll"))},Qn={pxToNumber(K){return parseFloat(K.replace("px",""))},getInteractionPosition(K,L,M){if(!K||!L||!M){console.log("Missing options");return}M=M.toUpperCase();const U=L+M;let H=K[U];return typeof H!="number"&&K.touches&&K.touches.length&&(H=K.touches[0][U]),H}};class Rs{getBoundingDOMRect(L){const M=L.getBoundingClientRect(),U=this.Dom.window.document.documentElement,H=this.Dom.window.pageYOffset||U.scrollTop,V=this.Dom.window.pageXOffset||U.scrollLeft,G=M.top+H,Z=M.left+V;return{width:M.width,height:M.height,top:G,left:Z,bottom:G+M.height,right:Z+M.width}}getBoundingElemRect(L){const M=this.getBoundingDOMRect(L),U=this.getBoundingDOMRect(L.parentNode),H=M.top-U.top,V=M.left-U.left;return{width:M.width,height:M.height,top:H,left:V,bottom:H+M.height,right:V+M.width}}runScrollListenerLoop(){if(!hi.isInFlight)return;const L=this.getScrollRequirementsForMousePosition(hi.isInFlight.mouse.client.x,hi.isInFlight.mouse.client.y);(L.x||L.y)&&this.Dom.window.scrollBy(L.x,L.y),requestAnimationFrame(this.runScrollListenerLoop.bind(this))}runDropIndexLoop(){if(!hi.isInFlight)return;let L=0;const M=this.Dom.getItems(),U=M.length,H=M.find(ee=>!ee.classList.contains("sqs-in-flight")),V=parseInt(this.Dom.getComputedStyle(H,"margin-top")),G=parseInt(this.Dom.getComputedStyle(H,"margin-bottom")),Z=V+G;for(let ee=0;ee<U;ee++){if(ee===hi.isInFlight.dragStart.index)continue;const te=M[ee].offsetTop+hi.isInFlight.dragStart.element.height+G+Z;if(hi.isInFlight.dragStart.element.top+hi.isInFlight.dragTransform.top+hi.isInFlight.dragStart.element.offsetHeight>te)L++,M[ee].style.transform="translate3d(0,0,0)";else{const oe=hi.isInFlight.dragStart.element.height+G;M[ee].style.transform="translate3d(0,"+oe+"px,0)"}}hi.isInFlight.nextIndex!==L&&(hi.isInFlight.nextIndex=L),requestAnimationFrame(this.runDropIndexLoop.bind(this))}prepareDragger(L){for(let M=0;M<L.children.length;M++)L.children[M].setAttribute("data-sqs-original-pointer-event",L.children[M].style.pointerEvents),L.children[M].style.pointerEvents="none"}destroyDragger(L){for(let M=0;M<L.children.length;M++)L.children[M].style.pointerEvents=L.children[M].getAttribute("data-sqs-original-pointer-event"),L.children[M].removeAttribute("data-sqs-original-pointer-event")}buildDragStateForEvent(L,M){const U=this.getBoundingDOMRect(this.Dom.getItemsWrapper()),H=this.getBoundingElemRect(L),V=this.Dom.getItems().indexOf(L),G=this.Transition.getPreflightValuesForItem(L);return{indexCollection:{initialHeight:this.Dom.getItemsWrapper().offsetHeight},dragStart:{element:G,mouse:{top:Qn.getInteractionPosition(M,"page","y"),left:Qn.getInteractionPosition(M,"page","x")},index:V},dragTransform:{top:0,left:0,constraints:{minTransform:-H.top,maxTransform:U.height-H.bottom}},mouse:{client:{y:Qn.getInteractionPosition(M,"client","y"),x:Qn.getInteractionPosition(M,"client","x")}},item:L,nextIndex:V}}beforeDragStart(L,M){return!this.Dom.nodeIsValidDragTarget(L.target)&&!M||hi.isInFlight?!1:(Cn(di.BEFORE_FLIGHT_START,this.Dom.window),!0)}dragStart(L,M,U){L.preventDefault(),this.beforeDragStart(L,U)&&(this.Dom.storeItemStyles(),hi.isInFlight=this.buildDragStateForEvent(M,L),this.Transition.prepareItemForFlight(M,hi.isInFlight.dragStart.element),this.Transition.prepareSiblingsForFlight(M,hi.isInFlight.dragStart.index,hi.isInFlight.dragStart.element),this.runDropIndexLoop(),this.runScrollListenerLoop(),Cn(di.FLIGHT_START,this.Dom.window),this.Dom.window.document.body.classList.add(Be.CLASS_NAME_ITEMS_REORDERING_INFLIGHT))}drag(L){if(L.preventDefault(),!hi.isInFlight)return;const M=hi.isInFlight.item,U=Qn.getInteractionPosition(L,"page","y"),H=hi.isInFlight.dragTransform.constraints;let V=U-hi.isInFlight.dragStart.mouse.top;V<H.minTransform?V=H.minTransform:V>H.maxTransform&&(V=H.maxTransform),hi.isInFlight.mouse.client={y:Qn.getInteractionPosition(L,"client","y"),x:Qn.getInteractionPosition(L,"client","x")},hi.isInFlight.dragTransform.top=V,M.style.transform="translate3d(0,"+V+"px,0)",Cn(di.FLIGHT_MOVE,this.Dom.window)}dragEnd(L,M){if(L.eventPhase&&(M=L,L=null),!hi.isInFlight)return;Cn(di.BEFORE_FLIGHT_END,this.Dom.window);const U=hi.isInFlight.item,H=this.Transition.getDestinationValuesForItem(hi.isInFlight.dragStart.index,hi.isInFlight.nextIndex);this.Transition.setDestinationForFlightItem(U,hi.isInFlight.dragStart.element,H),this.Transition.setDestinationForSiblings(U,hi.isInFlight.dragStart.index,hi.isInFlight.nextIndex),this.Transition.setStylesForSimulatedPostFlight(U),this.Dom.switchDOMTree(U,hi.isInFlight.nextIndex),this.Dom.restoreStyles(),Cn(di.DOM_REORDER,this.Dom.window,{item:U,oldIndex:hi.isInFlight.dragStart.index,newIndex:hi.isInFlight.nextIndex}),this.onItemIndexChange&&this.onItemIndexChange(hi.isInFlight),hi.isInFlight=null,U.classList.remove(Be.CLASS_NAME_IN_FLIGHT),this.Dom.window.document.body.classList.remove(Be.CLASS_NAME_ITEMS_REORDERING_INFLIGHT),L.onDragEnd&&L.onDragEnd(),Cn(di.AFTER_FLIGHT_END,this.Dom.window)}getScrollRequirementsForMousePosition(L,M){let U=0;const H=0;let V=1;const G=1;return M<this.scrollTriggerSize?(U=-this.scrollBaseSpeed,this.useAcceleratedScroll&&(V=Math.abs(M-this.scrollTriggerSize)/this.scrollTriggerSize)):M>this.Dom.window.innerHeight-this.scrollTriggerSize&&(U=this.scrollBaseSpeed,this.useAcceleratedScroll&&(V=(this.scrollTriggerSize-(this.Dom.window.innerHeight-M))/this.scrollTriggerSize)),{x:H*G,y:U*V}}initializeDraggers(){this.Dom.getItems().forEach(M=>{this.prepareDragger(M)})}destroyDraggers(){const L=this.Dom.getItems();L&&L.forEach(M=>{this.destroyDragger(M)})}constructor(L={}){this.Dom=L.Dom,this.Transition=L.Transition,this.scrollTriggerSize=L.scrollTriggerSize||Bi.SCROLL_TRIGGER_SIZE,this.useAcceleratedScroll=L.useAcceleratedScroll||Bi.USE_ACCELERATED_SCROLL,this.scrollBaseSpeed=L.scrollBaseSpeed||Bi.SCROLL_SPEED}}const cs=Rs;class Ea{getPreflightValuesForItem(L){const{Dom:M}=this;function U(V){let G=0;for(let Z=0;Z<V.length;Z++)G+=Qn.pxToNumber(M.window.getComputedStyle(L,null).getPropertyValue(V[Z]));return G}return{width:Qn.pxToNumber(M.window.getComputedStyle(L,null).getPropertyValue("width")),height:Qn.pxToNumber(M.window.getComputedStyle(L,null).getPropertyValue("height")),offsetHeight:U(["height","margin-top","margin-bottom"]),top:L.offsetTop,left:L.offsetLeft}}getDestinationValuesForItem(L,M){const U=this.Dom.getItems();let H=U[M].offsetTop;return M>L&&(H=H-U[L].offsetHeight+U[M].offsetHeight),{top:H,left:0}}prepareItemForFlight(L,M,U){L.classList.add(Be.CLASS_NAME_IN_FLIGHT);for(const H in Bi.IN_FLIGHT)L.style[H]=Bi.IN_FLIGHT[H];for(const H in M)L.style[H]=M[H]+"px";if(U){const H=Bi.TRANSITION_DURATION+"s ease-in-out";L.style.transition=["transform","box-shadow"].map(function(V){return V+" "+H}).join(",")}}prepareSiblingsForFlight(L,M,U){const H=this.Dom.getItems();for(let V=M+1;V<H.length;V++)H[V].style.transform="translate3d(0,"+U.offsetHeight+"px, 0)"}setDestinationForFlightItem(L,M,U){const H=U.top-M.top,V=U.left-M.left;L.style.transform="translate3d("+V+"px,"+H+"px,0)"}setDestinationForSiblings(L,M,U){const H=this.Dom.getItems();for(let V=0;V<H.length;V++)V!==M&&(V===U&&M<U?H[V].style.transform="translate3d(0,0,0)":V>=U?H[V].style.transform="translate3d(0,"+L.offsetHeight+"px,0)":H[V].style.transform="translate3d(0,0,0)")}setStylesForSimulatedPostFlight(L){for(const M in Bi.SIMULATED_POST_FLIGHT)L.style[M]=Bi.SIMULATED_POST_FLIGHT[M]}constructor(L={}){this.Dom=L.Dom}}const Ls=Ea,Ys=[];class ea{configure(L){for(const M in L)this.settings[M]=L[M];if(!this.settings.previewFrame||!this.settings.previewWindow){console.warn("Missing reference to preview frame or window");return}this.Dom=new Ln({window:L.previewWindow,previewFrame:L.previewFrame,itemsContainerSelector:L.itemsContainerSelector,itemSelector:L.itemSelector}),this.Transition=new Ls({Dom:this.Dom}),this.Dragger=new cs({Dom:this.Dom,Transition:this.Transition}),this.settings.previewFrame.style.transformOrigin="top center"}isInDragMode(){return hi.isInDragMode}addItemMarkers(){const L=this.Dom.getItems();for(let U=0;U<L.length;U++)L[U].setAttribute("data-item","");this.Dom.getItemsWrapper().setAttribute("data-item-wrapper","")}enableDragMode(L){const{previewWindow:M}=this.settings;Cn(di.BEFORE_FLIGHT_MODE_ENABLED,M),this.addItemMarkers(),this.Dragger.onItemIndexChange=L.onItemIndexChange,hi.isInDragMode=!0,this.Dom.storeItemViewportResponsiveHeights(),this.Dom.zoomOutFrame(L),this.onDragStart=U=>{this.Dragger.dragStart(U,U.target)},this.onDrag=this.Dragger.drag.bind(this.Dragger),this.onDragEnd=this.Dragger.dragEnd.bind(this.Dragger,L),M.document.addEventListener("touchstart",this.onDragStart,!1),M.document.addEventListener("touchmove",this.onDrag,!1),M.document.addEventListener("touchend",this.onDragEnd,!1),M.document.addEventListener("mousedown",this.onDragStart,!1),M.document.addEventListener("mousemove",this.onDrag,!1),M.document.addEventListener("mouseup",this.onDragEnd,!1),this.Dragger.initializeDraggers(),Cn(di.FLIGHT_MODE_ENABLED,M)}disableDragMode(){const{previewWindow:L}=this.settings;Cn(di.BEFORE_FLIGHT_MODE_DISABLED,L),this.Dom.zoomInFrame(),L.document.removeEventListener("touchstart",this.onDragStart,!1),L.document.removeEventListener("touchmove",this.onDrag,!1),L.document.removeEventListener("touchend",this.onDragEnd,!1),L.document.removeEventListener("mousedown",this.onDragStart,!1),L.document.removeEventListener("mousemove",this.onDrag,!1),L.document.removeEventListener("mouseup",this.onDragEnd,!1),this.Dragger.destroyDraggers(),this.Dragger.onItemIndexChange=null,this.Dom.restoreItemViewportResponsiveHeights(),L.document.documentElement.classList.remove(Be.CLASS_NAME_ITEMS_REORDERING),L.document.body.classList.remove(Be.CLASS_NAME_ITEMS_REORDERING),hi.isInDragMode=!1,Cn(di.FLIGHT_MODE_DISABLED,L)}moveItem(L,M,U){const{previewWindow:H}=this.settings,V=this.Dom.getItemAtIndex(L);if(M=Math.min(M,this.Dom.getItems().length-1),!V||M<0||L===M)return;if(hi.isInFlight){Ys.push({action:"moveItem",fromIndex:L,toIndex:M,opts:U});return}hi.isInFlight=!0;const G=this.Transition.getPreflightValuesForItem(V),Z=this.Transition.getDestinationValuesForItem(L,M);Cn(di.BEFORE_FLIGHT_START,H),this.Dom.storeItemStyles(),this.Transition.prepareItemForFlight(V,G,!0),this.Transition.prepareSiblingsForFlight(V,L,G),H.document.body.classList.add(Be.CLASS_NAME_ITEMS_REORDERING),H.document.body.classList.add(Be.CLASS_NAME_ITEMS_REORDERING_INFLIGHT),Cn(di.FLIGHT_MODE_ENABLED,H),Cn(di.FLIGHT_START,H),this.Transition.setDestinationForFlightItem(V,G,Z),this.Transition.setDestinationForSiblings(V,L,M);function ee(){Cn(di.FLIGHT_MOVE,H),hi.isInFlight&&requestAnimationFrame(ee)}ee();const $=()=>{if(V.style.boxShadow!=="none")this.Transition.setStylesForSimulatedPostFlight(V);else{if(V.removeEventListener("transitionend",$),Cn(di.BEFORE_FLIGHT_END,H),this.Dom.switchDOMTree(V,M),this.Dom.restoreStyles(),Cn(di.DOM_REORDER,H,{item:V,oldIndex:L,newIndex:M}),V.classList.remove(Be.CLASS_NAME_IN_FLIGHT),U.onItemIndexChange){const te={dragStart:{element:G,mouse:null,index:L},dragTransform:{top:0,left:0},item:V,nextIndex:M};U.onItemIndexChange(te)}if(hi.isInFlight=!1,H.document.body.classList.remove(Be.CLASS_NAME_ITEMS_REORDERING),H.document.body.classList.remove(Be.CLASS_NAME_ITEMS_REORDERING_INFLIGHT),Cn(di.AFTER_FLIGHT_END,H),Cn(di.FLIGHT_MODE_DISABLED,H),Ys.length){const te=Ys[0];this[te.action](te.fromIndex,te.toIndex,te.opts),Ys.shift()}}};V.addEventListener("transitionend",$)}dragStart(L,M){this.Dragger.dragStart(L,M,L.target)}constructor(){this.settings={itemsContainerSelector:null,itemSelector:null,previewWindow:null,previewFrame:null}}}const Ps=ea;var Us=t(663634),As=t(859817),Wa=t(659519);class ta extends ti{destroy(){this.disableSectionManager(),this.onSectionDeleteHandle.detach(),this.preview.window.removeEventListener("sqs-stacked-items-drag-start",this.onDragStartHandler),this.preview.document.documentElement.removeEventListener("dblclick",this.onDoubleClickHandler),this.unbindTopUI(),this.removeTopMountNode(),super.destroy()}getPreviewFrame(){return this.top.document.querySelector(".App")}getPreviewFrameContent(){return this.top.document.querySelector(".config-website-frame")}removeTopMountNode(){const L=this.top.reactRoot;L&&(L.unmount(),this.top.reactRoot=null);const M=this.top.uiMountNode;M.parentNode&&M.parentNode.removeChild(M)}renderTopMountNode(){const L=this.top.document.createElement("div");return this.top.document.body.querySelector(".sqs-damask").appendChild(L),L}getActionList(){const L=[],{collection:M,childAnnotationControllers:U=[]}=this.state,H=this.getSectionSelectorsForCollection(M);if(!H||!U.length)return L;const V=this.Y.one(H.itemsContainerSelector);if(V&&V.all(H.itemSelector).getDOMNodes().length){const{editPageAnnotation:G}=this.state.strings;L.push({name:G,label:G,handleClick:()=>{(0,o.s)("manage-sections",M.get("typeName")),this.enableSectionManager()}})}return L}bindUI(){window.CONFIG_PANEL.get("router").onChange(this.onRouterChange.bind(this)),this.onDragStartHandler=this.onSectionDragStart.bind(this),this.preview.window.addEventListener("sqs-stacked-items-drag-start",this.onDragStartHandler),this.onSectionDeleteHandle=this.Y.Global.on("stack:collection:deleted",this.removeSectionForCollectionId.bind(this)),this.onDoubleClickHandler=this.onSectionDoubleClick.bind(this),this.preview.document.documentElement.addEventListener("dblclick",this.onDoubleClickHandler)}isInDragMode(){return this.stackedItemsController?this.stackedItemsController.isInDragMode():!1}onDamaskMouseup(){this.isInDragMode()&&this.Y.one("body").simulate("mouseup",{})}onSectionDragStart(){const L=new Date;L.setDate(L.getDate()+14),fi().set("recently-reordered-section",!0,{expires:L}),this.renderTopUI(!1),this.onDamaskMouseUpHandler=this.onDamaskMouseup.bind(this),this.top.document.body.addEventListener("mouseup",this.onDamaskMouseUpHandler)}onSectionDoubleClick(L){if(!this.isInDragMode())return;const M=this.getSectionElementForPoint(L.clientX,L.clientY);if(!M)return;const U=this.Y.one(M),H=M.getBoundingClientRect(),V=this.getAcForNode(U)||this.getAcForOverlayRootNode(U);V&&V.state.collection.get("type")!==Wt().COLLECTION_TYPE_PAGE&&this.Y.one(this.preview.document).one(this.Y.UA.gecko?"html":"body").anim({scroll:[0,this.preview.window.scrollY+H.top]},{end:(function(){V.state.shimmySelector?this.Y.Squarespace.Singletons.Location.go(Mt.Z.forPagesPanel()+"/"+V.state.collection.get("id")):V.set("editable",!0),this.disableSectionManager()}).bind(this)}).run()}initializeEmptyIndex(){const{strings:L}=this.state;this.Y.all(".sqs-helper-page-insert").each((function(M,U){return new this.Y.Squarespace.Widgets.Button({render:M,strings:{text:L.addPageLabel},className:"add-section",icon:!0,onClick:(function(){const H=this.getPreviewFrameContent().getBoundingClientRect();this.requestNewSection(0,{left:H.left+H.width/2-Jt.PANEL_WIDTH_PX/2})}).bind(this)})}).bind(this))}ensureInitializedECForNode(L){let M=this.getAcForNode(L);if(!M){const H=this.getOverlayRootNodeForCollectionWrapper(L);if(M=this.props.initializeAnnotationControllerForNode(L,H),!M)return;this.state.childAnnotationControllers=this.state.childAnnotationControllers||[],this.state.childAnnotationControllers.push(M)}const U=this.props.isNodeVisible(L,!0);M.set("visible",U)}renderTopUI(L){const M={active:L,annotationController:this,showInstructions:!fi().get("recently-reordered-section"),bridgedActions:{add:this.requestNewSection.bind(this),delete:this.requestDeleteSection.bind(this),close:this.disableSectionManager.bind(this)}};if(L&&(M.position=this.getPreviewFrameContent().getBoundingClientRect(),M.scroll={x:this.preview.window.pageXOffset,y:this.preview.window.pageYOffset},M.scaleFactor=parseFloat(this.preview.document.body.dataset.sqsScalefactor)),this.top.reactRoot.render(W.createElement(As.StatsigProvider,{client:(0,Us.GC)()},W.createElement(he,M))),L){this.topUIBound||this.bindTopUI();return}this.unbindTopUI()}bindTopUI(){this.onShouldRerenderTopUI=(function(){this.isInDragMode()&&this.renderTopUI(!0)}).bind(this),this.top.window.addEventListener("resize",this.onShouldRerenderTopUI),this.preview.window.addEventListener("scroll",this.onShouldRerenderTopUI),this.topUIBound=!0}unbindTopUI(){this.top.window.removeEventListener("resize",this.onShouldRerenderTopUI),this.preview.window&&this.preview.window.removeEventListener("scroll",this.onShouldRerenderTopUI),this.topUIBound=!1}getPlaceHolder(){const{strings:L}=this.state;return this.Y.Node.create('<div class="sqs-empty-index-placeholder"><div class="sqs-empty-index-placeholder-instructions"><h3>'+L.emptyTitle+"</h3><p>"+L.emptyDescription+'</p><span class="sqs-helper-page-insert"></span></div></div>')}onRouterChange(L){this.isInDragMode()&&L.pathname.indexOf(Mt.Z.forPagesPanel())!==0&&this.disableSectionManager()}requestNewSection(L,M){this.Y.Squarespace.Singletons.Location.go(Mt.Z.forPagesPanel());const U={indexCollection:this.state.collection,insertIndex:L,dialogConfig:this.Y.merge({top:window.innerHeight/3,left:window.innerWidth/2-Jt.PANEL_WIDTH_PX/2,anchorNode:null,overlay:!0},M||{})};this.Y.Global.fire("stack:requestNewItem",U)}requestDeleteSection(L){const M=this.getAcForSectionIndex(L);M&&(this.Y.Squarespace.Singletons.Location.go(Mt.Z.forPagesPanel()),this.Y.Global.fire("stack:collection:requestDelete",{collectionId:M.state.collection.get("id")}))}enableDragMode(L){const M=this.state.collection.get("id");if(!this.stackedItemsController){const U=this.getSectionSelectorsForCollection(this.state.collection);this.stackedItemsController=new Ps,this.stackedItemsController.configure({previewWindow:this.preview.window,previewFrame:this.getPreviewFrameContent(),itemsContainerSelector:U.itemsContainerSelector,itemSelector:U.itemSelector})}this.stackedItemsController.enableDragMode({scaleFactor:.5,indexCollectionId:M,onDragEnd:(function(){this.top.document.body.removeEventListener("mouseup",this.onDamaskMouseUpHandler)}).bind(this),onItemIndexChange:(function(U){(0,Wa.Z)("index_section",{action:"orderChange",from:U.dragStart.index,to:U.nextIndex}),this.renderTopUI(!0),this.Y.Global.fire("stack:requestReorder",{indexCollectionId:M,index:U.dragStart.index,targetIndex:U.nextIndex})}).bind(this)}),!L&&(this.awaitTransitionEnd([{node:this.getPreviewFrameContent(),transitionProperty:"transform"}],this.onSectionManagerEnterTransitionEnd.bind(this)),this.Y.Global.fire("section-manager:enter",{}))}awaitTransitionEnd(L,M){let U=0;L.forEach(function(H){const V=function(G){G.srcElement!==H.node&&G.target!==H.node||G.propertyName!==H.transitionProperty||(H.node.removeEventListener("transitionend",V),U++,H.onComplete&&H.onComplete.call(this),M&&U>=L.length&&M())};H.node.addEventListener("transitionend",V)})}onSectionManagerEnterTransitionEnd(){this.renderTopUI(!0);const L=this.getPreviewFrame(),M="App",U=(function(H){H.target.classList.contains(M)&&(L.removeEventListener("click",U),this.disableSectionManager())}).bind(this);L.addEventListener("click",U),L.classList.add("is70InManageIndexMode")}enableSectionManager(){this.Y.Squarespace.Singletons.Location.go(Mt.Z.forPagesPanel()),this.enableDragMode()}disableSectionManager(){if(this.Y.Global.fire("section-manager:exit",{}),this.renderTopUI(!1),this.disableDragMode(),this.top.window){const L=this.getPreviewFrame();L&&L.classList.remove("is70InManageIndexMode")}}disableDragMode(){this.stackedItemsController&&this.stackedItemsController.disableDragMode()}getSectionForCollectionId(L){const{childAnnotationControllers:M=[]}=this.state,U=M.find(H=>H.state.collection.get("id")===L);return this.getSectionNodeForNode(U.state.rootNode)}removeSectionForCollectionId(L){const M=this.getSectionForCollectionId(L.collectionId),U=this.getStackedItemWrapperNodes().indexOf(M.getDOMNode());M.remove(!0),this.preview.window.dispatchEvent(new CustomEvent("sqs-stacked-items-dom-deleted",{detail:{oldIndex:U,collectionId:L.collectionId}}));const{childAnnotationControllers:H=[]}=this.state,V=H.filter(G=>{const Z=G.state.collection.get("id")===L.collectionId;return Z&&this.props.removeAnnotationController(G),!Z});this.set("childAnnotationControllers",V),this.disableDragMode(),this.syncChildCollectionAnnotationControllers(),this.renderPlaceholder(),this.enableDragMode(!0),this.renderTopUI(!0)}getAcForSectionIndex(L){const M=this.getStackedItemWrapperNodes()[L],U=this.Y.one(M);return this.getAcForNode(U)||this.getAcForOverlayRootNode(U)}getAcForOverlayRootNode(L){const{childAnnotationControllers:M=[]}=this.state;return M.find(U=>U.state.overlayRootNode===L)}getSectionNodeForNode(L){const M=this.getSectionSelectorsForCollection(this.state.collection);if(!M)return;let U=L;return U.getDOMNode().matches(M.itemSelector)||(U=L.ancestor(M.itemSelector)),U}getSectionElementForPoint(L,M){const U=this.getStackedItemWrapperNodes(),H={x:L,y:M};function V(G,Z){const ee=G.getBoundingClientRect();return Z.x>=ee.left&&Z.x<=ee.right&&Z.y>=ee.top&&Z.y<=ee.bottom}for(let G=0;G<U.length;G++)if(V(U[G],H))return U[G]}getOverlayRootNodeForCollectionWrapper(L){const M=this.getSectionNodeForNode(L);if(!this.getAcForOverlayRootNode(M))return M}getStackedItemWrapperNodes(){const L=this.getSectionSelectorsForCollection(this.state.collection);return L?this.Y.one(L.itemsContainerSelector).all(L.itemSelector).getDOMNodes():void 0}getOverlayEditorAlignPoint(){return y.Z.TOP_RIGHT}getSectionSelectorsForCollection(L){if(!L)return;const M=this.Y.Squarespace.Navigation.ListUtils.getIndexCollectionForCollection(L);if(!this.Y.Squarespace.Navigation.ListUtils.isCollectionAStackedIndex(M))return;const H={itemSelector:"[data-collection-id]",itemsContainerSelector:'[data-collection-id="{indexCollection.id}"]'},G=M.getTemplateConfiguration().get("indexItemSelectors")||H;return this.substituteSelectors(this.Y.merge(G),L.toJSON(),M.toJSON())}substituteSelectors(L,M,U){for(const H in L){const V=(0,Ft.db)(L[H],{indexCollection:U,collection:M});L[H]=V}return L}constructor(L,{rootNode:M,overlayRootNode:U,collection:H}){const V={strings:{label:(0,l.t)("Index",null,{project:"apps.App"}),edit:(0,l.t)("Edit",null,{project:"apps.App"}),emptyTitle:(0,l.t)("Empty Index Page",null,{project:"apps.App"}),emptyDescription:(0,l.t)("Click the + to get started adding sections",null,{project:"apps.App"}),addPageLabel:(0,l.t)("Add index section",null,{project:"apps.App"}),editPageAnnotation:(0,l.t)("Manage sections",null,{project:"apps.App"})},pageInsertPoints:[],alwaysShowAnnotationWhenMouseOver:!0,placeAnnotationInside:!0};super(L,{rootNode:M,overlayRootNode:U,collection:H},V),this.top={},this.top.window=this.preview.window.top,this.top.document=this.top.window.document,this.top.uiMountNode=this.renderTopMountNode(),this.top.reactRoot=(0,Zi.createRoot)(this.top.uiMountNode),this.bindTopUI(),this.bindUI()}}var Ma=t(598347),Ha=t(818212),Qa=t(869942),Po=t(608671),ao=t(245118),Ho=t(380745),Mo=t(972450),Vo=t(408635),wo=t(39512),ya=t(543121),ua=t(916661),Sa=t(912289),Ro=t(284646),sa=t(843156),go=t(32161),fs=t(586350),Ct=t(897820),da=t(233232),Ds=t(966819),Vn=t(914239),bn=t(188405),hn=t(134798),Ts=t(871106),Fs=t(289578),ts=t(352635),In=t(260175),jo=t(379835),Ja=t.n(jo),Bs=t(457811),ms=t(906194),po=t(723796),Ks=t(173606),xn=t(695960),Ns=t(890333),or=t(27226),zo=function(K){return K.Plaintext="plaintext",K.Richtext="richtext",K}({}),fo=function(K){return K.Collection="collection",K.CollectionItem="collection-item",K.SectionContext="section-context",K}({}),ks=t(233284),Bo=t(45321),Va=t(86851),st=t(294646),ve=t(495037),mt=t(150732),Ii=t(208935),Ei=t(175424),Ci=t(225378),Xi=t(30712);const Fn="rte-input",re={aiWriter:ve.aiWriterOption,blockquote:ve.blockquoteOption,bold:ve.boldOption,bulletList:ve.bulletListOption,clearFormatting:ve.clearFormattingOption,divider:ve.dividerOption,indentation:ve.indentationOption,italic:ve.italicOption,letterSpacing:ve.letterSpacingOption,link:ve.linkOption,numberedList:ve.numberedListOption,strikethrough:ve.strikethroughOption,subscript:ve.subscriptOption,superscript:ve.superscriptOption,textAlign:ve.textAlignOption,textColor:ve.textColorOption,textStyle:ve.textStyleOption,underline:ve.underlineOption,undoRedo:ve.undoRedoOption},We=K=>{if(!(K in re))throw new Error(`"${K}" is not a valid editor option`);return!0},yt=K=>{let{content:L,node:M,onBlur:U,onFocus:H,onUpdate:V,toolbarOptions:G,toolbarProps:Z,trackingProductArea:ee,trackingProductAreaLevel2:$,type:te,isCrossFrame:se}=K;const[ae,oe]=(0,W.useState)(!1),de=(0,W.useRef)(null),ue=(0,mt.$)({trackingProductArea:ee,trackingProductAreaLevel2:$}),{siteTitle:xe}=Ki.default.getState(),De=(0,W.useRef)(L),Ve=(0,T.Ze)(P.JdN),pt=(ze,ft)=>{var vt,Pe;ft.stopPropagation(),(Pe=de.current)===null||Pe===void 0||(vt=Pe.parentElement)===null||vt===void 0||vt.dispatchEvent(new Event(ft.type,{bubbles:!0}))};(0,W.useEffect)(()=>([...M.childNodes].forEach(ze=>{var ft;const Pe=((ft=ze.dataset)===null||ft===void 0?void 0:ft.id)||"";["rte-input-ref-box",Fn].includes(Pe)||M.removeChild(ze)}),()=>{M.insertAdjacentHTML("beforeend",De.current)}),[M]);const ot=ze=>{De.current=ze,V(ze)},ut=(0,f.debounce)(ot,300),At=(0,W.useMemo)(()=>{const ze=vt=>{switch(vt){case"aiWriter":return(0,ve.aiWriterOption)({brandName:xe,modalClassName:Ii.NONINTERACTIVE_CLASSNAME});case"link":var Pe;return(0,ve.linkOption)({isLinkEditorUAUEnabled:(0,Xi.L)().isLinkEditorUAUEnabled,popOverConfig:se?{mountAt:(Pe=(0,Ei.wo)())===null||Pe===void 0?void 0:Pe.body,contextProvider:Ne=>{let{children:Ue}=Ne;return W.createElement(Ci.o,{frameCacheKey:"rte-popover"},Ue)}}:void 0,modalClassName:Ii.NONINTERACTIVE_CLASSNAME});case"textColor":return(0,ve.textColorOption)({colorPalette:Ve,customClassName:"sqsrte-text-color--custom"});default:return re[vt]()}},ft=G==null?void 0:G.filter(We).map(ze);return ft&&!(ft!=null&&ft.some(vt=>vt.optionId==="undoRedo"))&&ft.push((0,ve.undoRedoOption)({hideOptionsInToolbar:!0})),ft},[xe,Ve,G,se]);return!(At!=null&&At.length)||te===zo.Plaintext?W.createElement(ve.PlainTextEditor,{content:L,inputRef:de,onUpdate:ot,renderInput:ze=>W.createElement(Ci.o,{frameCacheKey:"nbf-rte-input-wrapper"},W.createElement(ve.UnstyledInput,{onBlur:U,onFocus:H,...ze,"data-id":Fn,sx:{".focus-visible":{outline:"2px solid black",outlineOffset:"10px"}}}))}):W.createElement(ve.RichTextEditor,{trackingPayload:ue,content:L,editorOptions:At,inputRef:de,handleDOMEvents:{click:pt,pointerdown:pt,dblclick:pt,contextmenu:pt},renderInput:ze=>W.createElement(Ci.o,{frameCacheKey:"nbf-rte-input-wrapper"},W.createElement(ve.UnstyledInput,{...ze,"data-id":Fn,sx:{".focus-visible":{outline:"2px solid black",outlineOffset:"10px"}}})),toolbarProps:{open:ae,onOpenChange:ze=>{!ae&&ze?(H==null||H(),oe(!0)):ae&&!ze&&(U==null||U(),oe(!1))},...Z},onUpdate:ut})},{getJsonPointerValue:_t,setJsonPointerValue:at}=Va.jsonPointerUtils,Nt=()=>(0,Bo.P1)(P.gEH,(K,L)=>L,(K,L)=>K&&_t(K,L)),ri=K=>{let{onBlur:L,rteConfigWithNode:M,onFocus:U}=K;const{node:H,type:V,jsonPointer:G,toolbarOptions:Z,toolbarProps:ee,trackingProductArea:$,trackingProductAreaLevel2:te}=M,se=(0,W.useMemo)(Nt,[]),ae=(0,T.Ze)(ue=>se(ue,G)),oe=(0,T.zC)(),de=(0,W.useCallback)(ue=>{const xe=(0,P.hml)((0,T.d6)());if(!xe)return null;const De=at(xe,G,ue);oe((0,st.i)(De))},[oe,G]);return W.createElement(W.Fragment,null,(0,ks.createPortal)(W.createElement(yt,{content:ae,node:H,onBlur:L,onFocus:U,onUpdate:de,toolbarOptions:Z,toolbarProps:ee,trackingProductArea:$,trackingProductAreaLevel2:te,type:V}),M.node))};var Qt=t(934965);const{getJsonPointerValue:Ai,setJsonPointerValue:tn}=Va.jsonPointerUtils,An=()=>(0,Bo.P1)(P.o1x,(K,L)=>L,(K,L)=>K&&Ai(K,L)),rs=K=>{let{onBlur:L,onFocus:M,rteConfigWithNode:U}=K;const{node:H,type:V,jsonPointer:G,toolbarOptions:Z,toolbarProps:ee,trackingProductArea:$,trackingProductAreaLevel2:te}=U,se=(0,W.useMemo)(An,[]),ae=(0,T.Ze)(ue=>se(ue,G)),oe=(0,T.zC)(),de=(0,W.useCallback)(ue=>{const xe=(0,P.o1x)((0,T.d6)());if(!xe)return null;const De=tn(xe,G,ue);oe((0,Qt.R)(De))},[oe,G]);return W.createElement(W.Fragment,null,(0,ks.createPortal)(W.createElement(yt,{content:ae,node:H,onBlur:L,onFocus:M,onUpdate:de,toolbarOptions:Z,toolbarProps:ee,trackingProductArea:$,trackingProductAreaLevel2:te,type:V}),H))},{getJsonPointerValue:Oe}=Va.jsonPointerUtils,rt=K=>{let{onBlur:L,onFocus:M,rteConfigWithNode:U,sectionId:H}=K;const{node:V,type:G,jsonPointer:Z,toolbarOptions:ee,toolbarProps:$,trackingProductArea:te,trackingProductAreaLevel2:se}=U,ae=(0,T.Ze)(ue=>{const xe=(0,P.n4e)(ue,H),De=(xe==null?void 0:xe.sectionName)===xn.Z.JSON_SCHEMA?xe.jsonData:xe;return Oe(De,Z)}),oe=(0,T.zC)(),de=(0,W.useCallback)(ue=>{oe((0,fs.C$)({sectionId:H,diff:{[Z]:ue}}))},[oe,Z,H]);return W.createElement(W.Fragment,null,(0,ks.createPortal)(W.createElement(yt,{content:ae,node:V,onBlur:L,onFocus:M,onUpdate:de,toolbarOptions:ee,toolbarProps:$,trackingProductArea:te,trackingProductAreaLevel2:se,type:G,isCrossFrame:!0}),V))},It={[fo.CollectionItem]:ri,[fo.Collection]:rs,[fo.SectionContext]:rt},Bt=(0,W.memo)(K=>{let{sectionElement:L,sectionId:M,sectionsArea:U}=K;const H=(0,W.useMemo)(()=>{const ee=(0,Ns.Bi)(U,M);if(!ee)return null;const $=[];for(const te of ee){const se=L.querySelectorAll(te.nodeSelector);se.length&&se.forEach((ae,oe)=>{const de=typeof te.jsonPointer=="function"?te.jsonPointer(ae,oe):te.jsonPointer;$.push({...te,node:ae,jsonPointer:de})})}return $},[L,M,U]),V=(0,T.zC)(),G=(0,W.useCallback)(()=>V((0,Ct.bs)(M)),[V,M]),Z=(0,W.useCallback)(()=>V((0,Ct.bs)(null)),[V]);return W.createElement(W.Fragment,null,H==null?void 0:H.map(ee=>{const $=It[ee.targetModel];return W.createElement($,{key:ee.jsonPointer,onBlur:Z,onFocus:G,rteConfigWithNode:ee,sectionElement:L,sectionId:M})}))}),yi=new Set;function nn(K){yi.forEach(L=>L(K))}function vs(K){return yi.add(K),()=>{yi.delete(K)}}function Gs(K){const L=(0,bn.$S)(K),M=Array.from((L==null?void 0:L.querySelectorAll("section[data-section-id]"))??[]),U={};for(const H of M)U[(0,bn.I4)(H)]=H;return U}function wa(K,L){return(0,Ns.sb)(K)?(queueMicrotask(L),f.noop):(0,Ns.Pu)(K,L)}function Ra(K,L){return L.reduce((M,U)=>{if(M.hasOwnProperty(U)){const{[U]:H,...V}=M;M=V}return M},K)}function Ko(K){const[L,M]=(0,W.useState)({});return(0,W.useEffect)(()=>{const U=wa(K,()=>M(Gs(K))),V=vs(G=>{if(G.sectionsArea!==K)return;const{createdSectionMap:Z,changedSectionMap:ee,deletedSectionIds:$}=G;M(te=>{let se=te;return $&&(se=Ra(se,$)),(Z||ee)&&(se={...se,...Z,...ee}),se})});return()=>{U(),V()}},[K]),L}const mo=K=>{let{sectionsArea:L}=K;const M=Ko(L),U=Object.entries(M);return W.createElement(W.Fragment,null,U.map(H=>{let[V,G]=H;return W.createElement(Bt,{key:V,sectionsArea:L,sectionId:V,sectionElement:G})}))};var el=t(764916),vo=t(549842),_o=t(395542),oo=t(636707),ro=t(551553),Go=t(292302),aa=t(874644);function ha(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}const rr=11;function He(K,L){const{themeId:M}=(0,el.Q)(K??null,L);return M||null}class $e{cleanUp(){this._detachConditionalListeners()}destroy(){this._detachAllListeners(),this._cleanupScrollEvents()}_detachConditionalListeners(){this._conditionalListenerHandles.forEach(L=>L()),this._conditionalListenerHandles=[]}_detachAllListeners(){this._detachConditionalListeners(),this._persistentListenerHandles.forEach(L=>L()),this._persistentListenerHandles=[]}_attachAllListeners(){this._detachAllListeners(),this._conditionalListenerHandles=[vo.Z.listen(this._updateSectionThemeUI),_o.Z.listen(this._updateSectionThemeUI),(0,T.gH)(L=>(0,aa.BX)((0,P.aEP)(L)),this._updateSectionThemeUI),(0,T.gH)(L=>({loaded:(0,P.ueS)(L),defaultThemeId:(0,P.Vxx)(L)}),this._updateSectionThemeUI),(0,T.gH)(L=>({isColorsPanelOpen:(0,P.Xui)(L),isThemeEditorOpen:(0,P.RrI)(L)}),this._updateSectionThemeUI)],this._persistentListenerHandles=[oo.Z.listen(this._updateSectionThemeUI),ro.Z.listen(this._updateSectionThemeUI)]}_cleanupScrollEvents(){this._scrollRafId&&window.cancelAnimationFrame(this._scrollRafId);const L=this._getFrameWindow();L&&L.removeEventListener("scroll",this._scroll)}_getOverlayNavEl(){var L;const M=this._getRootElement();return M==null||(L=M.ownerDocument)===null||L===void 0?void 0:L.querySelector(Ts.My)}_getHeaderEl(){var L;const M=this._getRootElement();return M==null||(L=M.ownerDocument)===null||L===void 0?void 0:L.querySelector("header")}_getIndicatorPositionOffsets(){const L=this._getHeaderEl(),M=L==null?void 0:L.getBoundingClientRect(),U=M==null?void 0:M.height;return{header:rr,firstSection:U+rr}}_getThemeButton(L){const M=this._getFrameWindow();return M==null?void 0:M.document.querySelector(`[data-key=${L}]`)}_showThemeButton(L){const M=this._getThemeButton(L);M&&(M.style.display="")}_hideThemeButton(L){const M=this._getThemeButton(L);M&&(M.style.display="none")}constructor({getFrameWindow:L,getRootElement:M,getSectionElements:U}){ha(this,"_scrollRafId",void 0),ha(this,"_getFrameWindow",void 0),ha(this,"_getRootElement",void 0),ha(this,"_getSectionElements",void 0),ha(this,"_conditionalListenerHandles",[]),ha(this,"_persistentListenerHandles",[]),ha(this,"_updateSectionThemeUI",()=>{!(0,P.ueS)((0,T.d6)())||!(0,P.rQY)((0,T.d6)())||(!this._scrollRafId&&this._getFrameWindow()&&this._getFrameWindow().addEventListener("scroll",this._scroll),v.Z.setPageSectionNodes.defer({header:{node:this._getHeaderEl(),theme:He(this._getHeaderEl())},overlayNav:{node:this._getOverlayNavEl(),theme:He(this._getOverlayNavEl(),"menuOverlayTheme")},sections:this._getSectionElements().map(G=>({node:G,theme:He(G)})),offsets:this._getIndicatorPositionOffsets()}))}),ha(this,"_scroll",()=>{this._scrollRafId=window.requestAnimationFrame(()=>{const H=this._getFrameWindow();H&&(H.scrollY>10?this._hideThemeButton(Go.rR):this._showThemeButton(Go.rR))})}),this._getFrameWindow=L,this._getRootElement=M,this._getSectionElements=U,this._attachAllListeners()}}var gt=t(413019),Ge=t(69637),Dt=t(27409),St=t(276860);function kt(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}const{log:vi,err:Yt}=(0,po.Em)("section-annotation-controller","#357");function li(K){let{section:L,bodyEditor:M}=K;return()=>{setTimeout(()=>{const U=L.id,H=M.pageLayout.toJSON(),G=(0,P.XbM)((0,T.d6)())[U].content.layout,Z=(0,St.K9)({before:G,after:H}),ee="changedBlocks"in Z?Z.changedBlocks:null,$="hasNonCompatChange"in Z?Z.hasNonCompatChange:!1,te=ee&&ee.length>0,se=te?ee.some(ae=>(0,St.T6)(ae.before.value,ae.after.value,ae.after.type)):!1;($||te)&&(0,T.GE)((0,fs.yV)({sectionId:U,content:{...L.content,layout:H}},{undoable:$?!0:se}))},0)}}class Qi{cleanUp(){var L;Array.from(this._sectionIdToBodyEditorsMap.values()).forEach(M=>M.destroy()),this._sectionIdToBodyEditorsMap.clear(),(L=this._layoutEngineObserver)===null||L===void 0||L.disconnect(),this._layoutEngineObserver=null}disableInsertPoints(){Array.from(this._sectionIdToBodyEditorsMap.values()).forEach(L=>L.EDIT_CONTROLLER.disableInsertPoints())}enableInsertPoints(){Array.from(this._sectionIdToBodyEditorsMap.values()).forEach(L=>L.EDIT_CONTROLLER.enableInsertPoints())}getBodyEditorForSectionId(L){return this._sectionIdToBodyEditorsMap.get(L)??null}registerBodyEditorForSectionId(L,M){this._sectionIdToBodyEditorsMap.set(L,M)}constructor({Y:L,getSectionDataFromNode:M,getSectionNodeFromData:U}){kt(this,"_layoutEngineObserver",null),kt(this,"_firstCheckCallbacks",null),kt(this,"_sectionIdToBodyEditorsMap",new Map),kt(this,"_Y",void 0),kt(this,"_getSectionDataFromNode",void 0),kt(this,"_getSectionNodeFromData",void 0),kt(this,"enableLayoutEngineForSection",H=>{let{sectionNode:V,onFirstCheck:G}=H;this._firstCheckCallbacks=this._firstCheckCallbacks||new WeakMap,this._firstCheckCallbacks.set(V,G),this._layoutEngineObserver||(vi("initializing LayoutEngine IntersectionObserver"),this._layoutEngineObserver=new IntersectionObserver(this._onLayoutEngineSectionIntersect,{rootMargin:"0px",threshold:0})),this._layoutEngineObserver.observe(V)}),kt(this,"initLayoutEngine",(H,V,G)=>{const Z=V.querySelector(Ts.C5),ee=(0,Vn.fQ)(H.id);if(!Z||!ee||Z.id!==ee){Yt("Could not find LayoutEngine node for section",{hostNode:Z,section:H,le2Id:ee});return}const $=`${Dt.RENDER_LAYOUT_ENGINE_SECTION}-${performance.now()}`;G&&(0,gt.B1)($,{tracer:Ge.Z});const se=new this._Y.SQS.LayoutEngine.Models.EditableContentBlock(H.content).get("layout"),ae=new N.Z(this._Y,{hostNode:Z,pageLayout:se}),oe=li({section:H,bodyEditor:ae});ae.addDirtyLayoutDataHandler(oe),this.registerBodyEditorForSectionId(H.id,ae),G&&(0,gt.L8)(Dt.RENDER_LAYOUT_ENGINE_SECTION,{requireStart:!0,start:$,tracer:Ge.Z})}),kt(this,"_onLayoutEngineSectionIntersect",(H,V)=>H.forEach(G=>{const Z=this._getSectionDataFromNode(G.target);if(!Z)return;const ee=this._getSectionNodeFromData(Z);if(ee){if(G.isIntersecting){if(V.unobserve(ee),!Z){Yt("Could not get section for node",ee);return}if(Z.sectionName===xn.Z.FLUID_ENGINE)return;const $=!0;this.initLayoutEngine(Z,ee,$)}window.setTimeout(()=>{var $;const te=($=this._firstCheckCallbacks)===null||$===void 0?void 0:$.get(ee);if(typeof te=="function"){var se;te({section:Z,sectionNode:ee,entry:G}),(se=this._firstCheckCallbacks)===null||se===void 0||se.delete(ee)}},0)}})),this._Y=L,this._getSectionDataFromNode=M,this._getSectionNodeFromData=U}}var en=t(516865),Wi=t(132782),wn=t(365270),qn=t(339951),Jn=t(950570);const ns="sqs-add-section-button-focused",Ws=K=>K.isSettingsOpen||K.isGalleryContentEditorOpen;function $n(K){let{position:L,onClick:M,onHover:U,className:H,region:V,...G}=K;if(L&&L!=="top"&&L!=="bottom")throw new Error('Position must be "top" or "bottom"');const Z=(0,W.useRef)(null),ee={...G};L==="bottom"&&(ee["data-test"]="section-add-button");const $=(0,W.useCallback)(function(){var oe;(oe=Z.current)===null||oe===void 0||oe.ownerDocument.documentElement.classList.add(ns),document.documentElement.classList.add(ns),V!=="footer"&&U&&U(!0)},[U,V]),te=(0,W.useCallback)(function(){var oe;(oe=Z.current)===null||oe===void 0||oe.ownerDocument.documentElement.classList.remove(ns),document.documentElement.classList.remove(ns),U&&U(!1)},[U]),se=(0,qn.N)((0,Jn.j7)(V),Ws),ae=it()(Ts.ZD,{[`${L}-add-hit-box`]:!!L,"add-hit-box-hidden":se},H);return W.createElement("div",{className:ae,ref:Z},W.createElement(en.Z.Primary,{onClick:M,onMouseEnter:$,onMouseLeave:te,onFocus:$,onBlur:te,borderRadius:"2",backgroundColor:wn.FLUID_ENGINE_BLUE_HEX,animationBackgroundColor:"blue.300",borderWidth:1,borderStyle:"solid",borderColor:"blue.500",...(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.ADD_SECTION_BUTTON),...ee},W.createElement(qi.T,{project:"apps.App"},"Add Section")))}var ss=t(673951),Vi=t(538312),is=t(708835),Kn=t.n(is),us=t(484345),Eo=t(975405),ga=t(636485),ps=t(472575),Ba=t(444867),yo=t.n(Ba),pa=t(762379),So=t(614282),ba=t(396303),lr=t(343307),tl=t(773630),il=t(964779),wr=t(374899),Zo=t(567713),oa=t(571977),Yn=t(482053),cr=t(606013),mn=t(338465),nl=t(273867),Fl=t(969826),Rr=t(774439),sl=t(81943),Wl=t(429569),Es=t(860962),Ca=t(317527),ds=t(308712),bo=t(953837),Xo=t(178543),ur=t(651780),lo=t(334358),dr=t(619506),Na=t(842132),Aa=t(685763),fd=t(906046),md=t(47362),Br=t(394954),vd=t(513738),al=t(568688),co=t(500415),ol=t(466409);const _d=K=>{let{isOpen:L,onCancel:M,onSubmit:U,saveText:H,selectedSubcategory:V}=K;var G;const Z=(0,T.Ze)(P.aWX),ee=(0,T.Ze)(P.al$)||{},$=(0,l.t)("{siteTitle} \u2014 Section {count}",{siteTitle:Z,count:(((G=ee[V])===null||G===void 0?void 0:G.totalSections)||0)+1},{notes:'A placeholder name, something like "My Site - Section 4"',project:"enterprise"}),[te,se]=(0,W.useState)($);(0,W.useEffect)(()=>{!L&&te!==$&&se($)},[L,te,$]),(0,W.useEffect)(()=>{se($)},[$,V]);const ae=(0,W.useCallback)(()=>{M(),se($)},[M,$]),oe=(0,W.useCallback)(()=>{U(te),se($)},[te,U,$]),de=ue=>{Na.Z.isEnter(ue)&&oe()};return W.createElement(Aa.Z.Transition,null,L&&W.createElement(Aa.Z,{onRequestClose:ae},W.createElement(Aa.Z.Overlay,null),W.createElement(Aa.Z.Position,{position:"center"},W.createElement(Aa.Z.Dialog,null,W.createElement(mn.Z,{px:6,pt:5,pb:3,width:"sizes.700"},W.createElement(Vi.Z.Subtitle,null,H),W.createElement(mn.Z,{mt:4,mb:8},W.createElement(Vi.Z.Label,{htmlFor:"multi-save-section-name",mb:1},W.createElement(qi.T,{project:"enterprise"},"Section Name")),W.createElement(fd.Z,{id:"multi-save-section-name",variant:"floating",body:W.createElement(md.Z,{value:te,onChange:se,onKeyDown:de})})),W.createElement(Br.Z,{direction:"row",space:2,justifyContent:"flex-end",as:Yn.Z,of:mn.Z},W.createElement(en.Z.Tertiary,{size:"1",onClick:ae},W.createElement(qi.T,{project:"enterprise",notes:"Action Button"},"Close")),W.createElement(en.Z.Tertiary,{disabled:te==="",size:"1",onClick:oe},W.createElement(qi.T,{project:"enterprise",notes:"Action Button"},"Save"))))))))},Ed=K=>{let{areButtonsVisible:L,isEnterpriseSavedSectionsEnabled:M,isAccountSavedSectionsEnabled:U,isSaveWebsiteLevelDisabled:H,onSaveWebsiteLevelSavedSection:V,sectionId:G,...Z}=K;var ee;const $=(0,W.useRef)(null),[te,se]=(0,W.useState)(!1),[ae,oe]=(0,W.useState)(!1),[de,ue]=(0,W.useState)(co.sX.ORGANIZATION),[xe,De]=(0,W.useState)(!1),[Ve,pt]=(0,W.useState)(!1),ot=(0,W.useCallback)(()=>se(Et=>!Et),[]),ut=(0,W.useCallback)(()=>se(!1),[]),At=(0,T.Ze)(P.al$)||{},ze=(0,l.t)("Section {count}",{count:(((ee=At[Kn().SAVED_SECTIONS])===null||ee===void 0?void 0:ee.totalSections)||0)+1},{notes:'A placeholder name, something like "Section 4"',project:"enterprise"}),ft=(0,W.useCallback)(Et=>{V==null||V(Et),ut()},[ut,V]),vt=(0,W.useCallback)(Et=>{oe(!0),ue(Et),ut()},[ut]),Pe=(0,W.useCallback)(()=>{oe(!1)},[]),Ne=(0,W.useCallback)(Et=>{let{value:dt,selectedSubcategory:Ot,toastSuccessMessage:jt,setState:ii,isWebsiteScope:tt=!1}=Et;const Kt=Rt=>{Rt(),(0,T.GE)((0,Ks.Qq)({sectionId:G,selectedCategory:Kn().SAVED_SECTIONS,selectedSubcategory:Ot,shouldAddAbove:!0}))};return ii(!0),oe(!1),(0,T.GE)((0,Ks._b)(dt,G,tt?co.sX.WEBSITE:de)).then(()=>{const Rt=(0,P.n4e)((0,T.d6)(),G);(0,lo.Im)({scope:tt?co.sX.WEBSITE:de,sectionContext:Rt}),$.current.show({content:jt,variant:"success",action:Oi=>{let{remove:Si}=Oi;return W.createElement(en.Z.Tertiary,{onClick:()=>{Kt(Si)}},(0,l.t)("View",null,{project:"apps.App"}))},css:{paddingTop:0,paddingBottom:0}})}).catch(()=>{$.current.show({content:(0,l.t)("An error has occured",null,{project:"enterprise"}),variant:"error",css:{paddingTop:0,paddingBottom:0}})})},[G,de]),Ue=()=>{$.current.show({content:W.createElement(Vi.Z.Body,null,(0,l.t)("Max section limit reached",null,{project:"apps.App"})),action:Et=>{let{remove:dt}=Et;return W.createElement(en.Z.Tertiary,{onClick:()=>{dt(),(0,T.GE)((0,Ks.Qq)({sectionId:G,selectedCategory:Kn().SAVED_SECTIONS,selectedSubcategory:Kn().SAVED_SECTIONS,shouldAddAbove:!0}))}},(0,l.t)("View",null,{project:"apps.App"}))},css:{paddingTop:0,paddingBottom:0}})},be=(0,W.useCallback)(()=>{ut(),Ne({value:ze,selectedSubcategory:Kn().SAVED_SECTIONS,toastSuccessMessage:(0,l.t)("Added to your site",null,{project:"enterprise"}),setState:()=>{},isWebsiteScope:!0})},[ut,ze,Ne]);(0,W.useEffect)(()=>{te&&!L&&se(!1)},[te,L]);const Ze=H&&(!M||xe)&&(!U||Ve),Ye=()=>{let Et="",dt;const Ot=jt=>{if(de===co.sX.ORGANIZATION)return al.U3.trackUserClicksEnterpriseButton({productArea:al.Wl.SAVED_SECTIONS,objectIdentifier:"save-section-confirmed"}),Ne({value:jt,selectedSubcategory:Kn().ORGANIZATION,toastSuccessMessage:(0,l.t)("Added to team library",null,{project:"enterprise"}),setState:De});if(de===co.sX.ACCOUNT)return lo.U3.UserConfirmsSaveSection(),Ne({value:jt,selectedSubcategory:Kn().PRO_USER,toastSuccessMessage:(0,l.t)("Added to your account",null,{project:"enterprise"}),setState:pt})};return de===co.sX.ORGANIZATION?(Et=(0,l.t)("Save section to team library?",null,{project:"enterprise"}),dt=Kn().ORGANIZATION):(Et=(0,l.t)("Save section to your account?",null,{project:"enterprise"}),dt=Kn().PRO_USER),W.createElement(_d,{isOpen:ae,onCancel:Pe,onSubmit:Ot,saveText:Et,selectedSubcategory:dt})};return W.createElement(W.Fragment,null,W.createElement(dr.Z.PopOver,{isOpen:te,renderTrigger:()=>W.createElement(ds.Z,{...Z,disabled:Ze,onClick:ot,"data-test":"multi-toolbar-button-save"}),position:"bottom",style:{borderRadius:ts.radii[2],overflow:"hidden"}},()=>W.createElement(Yn.Z,{"aria-labelledby":"multi-save-section-action-button",bg:"white",flexDirection:"column",py:1},W.createElement(Vi.Z.Label,{px:4,py:2,id:"multi-save-section-action-label"},W.createElement(qi.T,{project:"enterprise",notes:"This is a label for a dropdown"},"Save Section to")),W.createElement(Yn.Z,{as:"ul",flexDirection:"column",margin:0},W.createElement(dr.Z.Item,{onClick:Et=>{var dt;const Ot=(0,ol.Z)()?250:50;if((((dt=At[Kn().SAVED_SECTIONS])===null||dt===void 0?void 0:dt.totalSections)||0)>=Ot){Ue();return}(0,ol.Z)()?be():ft(Et)},isDisabled:H},W.createElement(qi.T,{project:"enterprise",notes:"Action item in a list"},"This site")),M&&W.createElement(dr.Z.Item,{onClick:()=>{vt(co.sX.ORGANIZATION),al.U3.trackUserClicksEnterpriseButton({productArea:al.Wl.SAVED_SECTIONS,objectIdentifier:"save-section-open-modal"})},isDisabled:xe},W.createElement(qi.T,{project:"enterprise",notes:"Action item in a list"},"Team library")),U&&W.createElement(dr.Z.Item,{onClick:()=>{vt(co.sX.ACCOUNT),lo.U3.UserOpensSaveModal()},isDisabled:Ve},W.createElement(qi.T,{project:"enterprise",notes:"Action item in a list"},"Your account"))))),Ye(),W.createElement(vd.Z.Container,{ref:$,"data-test":"enterprise-toast-container"}))},yd=K=>{const L=(0,Xo.Z)()&&(0,ur.RN)(),M=(0,lo.Gd)();return L||M?W.createElement(Ed,{onSaveWebsiteLevelSavedSection:K==null?void 0:K.onClick,isSaveWebsiteLevelDisabled:K==null?void 0:K.disabled,sectionId:K==null?void 0:K.sectionId,isEnterpriseSavedSectionsEnabled:L,isAccountSavedSectionsEnabled:M,...K}):W.createElement(ds.Z,K)};var Sd=t(435876),Qo=t.n(Sd);const bd=W.createElement(qi.T,{project:"apps.App"},"Edit Section"),Cd=W.createElement(qi.T,{project:"apps.App"},"Edit Layout"),Sc={icon:W.createElement(ya.Z,null),text:bd},Ad={...Sc,text:Cd};function Td(K){const M=K.sectionName===xn.Z.JSON_SCHEMA?K.sectionDefinitionName:"";return[Ts.Qg,Ts.F$].includes(M)?Ad:Sc}function Id(K){const L=(0,bn.I4)(K);return(0,P.XbM)((0,T.d6)())[L]}function Dd(K){let{areButtonsVisible:L,features:M,sectionNode:U,extraButtons:H,savedSectionStatuses:V}=K;var G;const Z=Id(U),$=(0,T.Ze)(P.Hlz)===ms.Z.PHONE,te=(0,W.useMemo)(()=>{const be={},Ze=Object.entries(M);for(const[Ye,Et]of Ze)be[Ye]=dt=>{dt.stopPropagation(),Et.handler(U,M[Ye])};return be},[U,M]);if(!Z)return null;const se=Td(Z),ae=!!M.manageItems,oe=!!M.editDetails,de=!!M.galleryContent,ue=!!M.editJsonSchemaList,xe=!!M.settings,De=!!M.duplicate,Ve=!!M.up,pt=!!M.down,ot=!!M.delete,ut=pt||Ve||De;if(!(ot||ae||oe||de||ue||xe||(H==null?void 0:H.length))&&!ut)return null;const ze={Icon:null,buttonText:""},{Icon:ft,buttonText:vt}=M.manageItems??ze,{Icon:Pe,buttonText:Ne}=M.editDetails??ze,Ue=V[(U==null||(G=U.getAttribute)===null||G===void 0?void 0:G.call(U,"data-section-id"))||""];return W.createElement(mn.Z,{...(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.SECTION_TOOLBAR),className:it()(Qo().container,"section-toolbar-element-wrapper",{[Qo().mobileEditing]:$})},W.createElement(Yn.Z,{className:it()(Ts.UL,Qo().wrapper,{[Qo().manageItemsWrapper]:!!M.manageItems})},M.manageItems?W.createElement(ds.Z,{fullWidth:!0,"data-test":"toolbar-button-manage-items",onClick:te.manageItems,hasMaxHeight:!0},ft?W.createElement(ft,{className:Qo().iconWithMinWidth}):null,vt):null,M.editDetails?W.createElement(ds.Z,{fullWidth:!0,"data-test":"toolbar-button-edit-details",onClick:te.editDetails},Pe?W.createElement(Pe,{className:Qo().iconWithMinWidth}):null,Ne):null,M.galleryContent?W.createElement(ds.Z,{fullWidth:!0,"data-test":"toolbar-button-gallery",onClick:te.galleryContent},W.createElement(nl.Z,null),W.createElement(qi.T,{project:"apps.App",notes:"This button opens the gallery-section image manager"},"Edit Gallery")):null,M.editJsonSchemaList?W.createElement(ds.Z,{fullWidth:!0,"data-test":"toolbar-button-user-items",onClick:te.editJsonSchemaList},W.createElement(Fl.Z,null),W.createElement(qi.T,{project:"apps.App",notes:"This button opens the list-section manager"},"Edit Content")):null,H==null?void 0:H.map(be=>{let{onClick:Ze,contents:Ye,key:Et}=be;return W.createElement(ds.Z,{fullWidth:!0,onClick:Ze,key:Et},Ye)}),M.settings?W.createElement(ds.Z,{fullWidth:!0,"data-test":"toolbar-button-settings",onClick:te.settings,ariaLabelText:"Open Section Settings"},se.icon,se.text):null,M.layoutSwitcher?W.createElement(bo.Z,{areButtonsVisible:L,onClick:te.layoutSwitcher,sectionId:Z.id}):null,ut?W.createElement(Yn.Z,{"data-test":"section-toolbar",role:"toolbar",className:Qo().smallButtonsWrapper},M.duplicate?W.createElement(ds.Z,{"data-test":"toolbar-button-duplicate",onClick:te.duplicate,tooltipText:(0,l.t)("Duplicate",null,{project:"apps.App"}),ariaLabelText:(0,l.t)("Duplicate Section",null,{project:"src.seven-one",notes:"Section toolbar options - Duplicate"})},W.createElement(Rr.Z,{color:"currentColor"})):null,M.save?W.createElement(yd,{"data-test":"toolbar-button-save",onClick:te.save,tooltipText:(0,l.t)("Save Section",null,{project:"apps.App"}),disabled:Ue,ariaLabelText:(0,l.t)("Save Section",null,{project:"src.seven-one",notes:"Section toolbar options - Save"}),sectionId:Z.id,areButtonsVisible:L},W.createElement(sl.Z,{color:"currentColor"})):null,M.up?W.createElement(ds.Z,{"data-test":"toolbar-button-up",disabled:!U.previousElementSibling,onClickCapture:te.up,tooltipText:(0,l.t)("Move Up",null,{project:"apps.App"}),ariaLabelText:(0,l.t)("Move Section Up",null,{project:"src.seven-one",notes:"Section toolbar options - Move Up"})},W.createElement(Wl.Z,{color:"currentColor"})):null,M.down?W.createElement(ds.Z,{"data-test":"toolbar-button-down",disabled:!U.nextElementSibling,onClickCapture:te.down,tooltipText:(0,l.t)("Move Down",null,{project:"apps.App"}),ariaLabelText:(0,l.t)("Move Section Down",null,{project:"src.seven-one",notes:"Section toolbar options - Move Down"})},W.createElement(Es.Z,{color:U.nextElementSibling?"currentColor":"gray.600"})):null):null,M.delete?W.createElement(ds.Z,{fullWidth:!0,color:"red","data-test":"toolbar-button-delete",onClick:te.delete,ariaLabelText:(0,l.t)("Remove Section",null,{project:"src.seven-one",notes:"Section toolbar options - Remove"})},W.createElement(Ca.Z,{color:"currentColor"}),W.createElement(qi.T,{project:"apps.App"},"Remove")):null))}var Hl=t(418698),Od=t(600194);const Ld=(0,l.t)("Upgrade to Fluid Engine for full drag-and-drop control. Once saved, sections made with Fluid Engine can\u2019t be converted back to the Classic Editor.",null,{project:"apps.App"});function Pd(K){let{fill:L}=K;return W.createElement("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 15H9V22H16V15ZM11.3333 19.6667V17.3333H13.6667V19.6667H11.3333Z",fill:L}),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 6H0V13H7V6ZM2.33333 10.6667V8.33333H4.66667V10.6667H2.33333Z",fill:L}),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 15H0V22H7V15ZM2.33333 19.6667V17.3333H4.66667V19.6667H2.33333Z",fill:L}),W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.6418 6H9V13H16V9.35817L15.7543 8.69407L15.093 6.90701L13.3059 6.24574L12.6418 6ZM11.3333 8.33333V10.6667H13.6667V8.33333H11.3333Z",fill:L}),W.createElement("path",{d:"M16.6495 2.64955L17.63 0H18.37L19.3505 2.64955L22 3.62997V4.37003L19.3505 5.35045L18.37 8H17.63L16.6495 5.35045L14 4.37003V3.62997L16.6495 2.64955Z",fill:L}))}function Md(K){let{onClick:L}=K;const[M,U]=(0,W.useState)(!1),[H,V]=(0,W.useState)(null);return W.createElement(W.Fragment,null,W.createElement(mn.Z,{p:"4px",borderRadius:2,backgroundColor:M?"gray.100":"white",height:"fit-content",boxShadow:"300",ref:V,className:"section-toolbar-element-wrapper"},W.createElement(en.Z.Secondary,{"data-test":"toolbar-button-convert",onClick:L,animationDirection:"none",borderColor:"transparent",borderRadius:1,backgroundColor:M?"gray.100":void 0,color:M?"white":void 0,sx:{paddingLeft:1,paddingRight:1},css:{alignItems:"center",":hover":{backgroundColor:M&&"transparent"}}},W.createElement(mn.Z,{mx:1},W.createElement(Pd,{fill:M?ts.colors.white:ts.colors.gray[100]})),W.createElement(qi.T,{project:"apps.App",notes:"Button text for a button that converts a layout engine section to fluid engine"},"Upgrade"),W.createElement(mn.Z,{as:"button",onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1),bg:"transparent",height:"22px",ml:3},W.createElement(Od.Z,{color:M?"white":"gray.400"})))),M&&H?W.createElement(Hl.Z,{anchor:H,isOpen:M,position:"bottom-start",margin:6},Ld):null)}const wd=Md;var Av=t(26613),bc=t(113691),Rd=t(370767),hr=t(708477);const Cc="section-toolbar-button",Bd=`${Cc} section-toolbar-icon-button`,Nd=`${Cc} section-toolbar-text-button`,Ac="section-toolbar-button-wrapper section-toolbar-element-wrapper",kd=`${Ac} section-toolbar-icon-button-wrapper`,xd=`${Ac} section-toolbar-text-button-wrapper`,qd=K=>K.isSettingsOpen||K.isGalleryContentEditorOpen,Ud={enter:500,exit:0},Fd=K=>{let{onClick:L,contents:M,htmlAttributes:U={},buttonAttributes:H={},isIconOnly:V=!1,active:G=!1,tooltipOptions:Z,sectionId:ee}=K;const $=(0,W.useRef)(null),[te,se]=(0,W.useState)(!1),ae=(0,hr.Z)(G),oe=(0,W.useCallback)(()=>{G||se(!0)},[G]),de=(0,W.useCallback)(()=>{se(!1)},[]);(0,W.useEffect)(()=>{!ae&&G&&se(!1)},[G,ae]);const ue=Z?`${ee}-${Z==null?void 0:Z.label}-tooltip`:null;return W.createElement("div",{...U,"aria-describedby":ue??void 0,className:`${xd} ${U.class||""}`},W.createElement(en.Z.Secondary,{onPointerLeave:de,onPointerOver:oe,ref:$,className:it()(Nd,{active:G}),style:{padding:V?"8px":""},onClick:L,size:ss.Ay?"small":"medium",animationDirection:"none",...H},M),Z&&$.current&&W.createElement(Hl.Z,{anchor:$.current,isOpen:te,position:"bottom",delay:Z.delay?Z.delay:Ud,id:ue},W.createElement(Rd.Z,Z)))};function Wd(K){let{areButtonsVisible:L,region:M,sectionNode:U,extraToolbarButtons:H,features:V,savedSectionStatuses:G}=K;var Z;const[,ee]=(0,W.useReducer)(oe=>oe+1,0),te=(0,T.Ze)(P.Hlz)===ms.Z.PHONE,se=(0,W.useRef)(V);se.current=V,(0,W.useEffect)(()=>{const oe=()=>{ee()};return window.Y.Global.on("sections:change",oe),function(){window.Y.Global.detach("sections:change",oe)}},[ee]);const ae=(0,qn.N)((0,Jn.j7)(M),qd);return W.createElement("div",{className:it()("control-buttons-parent",bc.ZP.UNMASK_ELEMENT)},W.createElement("div",{className:it()(Ts.Iw,"control-button-wrapper-left",{"control-button-wrapper-hidden":ae,"is-editing-mobile-layout":te})},V.admin?W.createElement("div",{className:`${kd}`},W.createElement("button",{className:`${Bd} icon-page-section-control-button-admin`,"data-test":"toolbar-button-admin",onClick:()=>{var oe;return(oe=V.admin)===null||oe===void 0?void 0:oe.handler(U)}})):null,V.convertToFluidEngine&&!ss.pe?W.createElement(wd,{onClick:()=>{var oe;return(oe=V.convertToFluidEngine)===null||oe===void 0?void 0:oe.handler(U)}}):null,H==null||(Z=H.left)===null||Z===void 0?void 0:Z.map(oe=>W.createElement(Fd,oe))),W.createElement(Dd,{areButtonsVisible:L,features:V,sectionNode:U,extraButtons:(H==null?void 0:H.right)??null,savedSectionStatuses:G}))}var Di=t(71969),No=t(155955),Tc=function(K){return K[K.LEFT_CLICK=0]="LEFT_CLICK",K[K.MIDDLE_BUTTON=1]="MIDDLE_BUTTON",K[K.RIGHT_CLICK=2]="RIGHT_CLICK",K}({}),Hd=t(53297),Ic=t.n(Hd),Ta=t(24e3),Vd=t(861385),rl=t(252436),Dc=t(239718),$a=t(651430);const Nr=K=>{let{buttonClasses:L,onClick:M,icon:U,buttonText:H,shiftTabOverride:V,tabOverride:G,id:Z,buttonAttributes:ee}=K;const $=U,te=se=>{V&&se.shiftKey&&se.key==="Tab"&&(se.preventDefault(),(0,$a.NA)()),G&&se.key==="Tab"&&!se.shiftKey&&(se.preventDefault(),(0,T.GE)((0,Ct.xu)(hn.Z.PAGE)),(0,$a.Fk)())};return W.createElement(As.StatsigProvider,{client:(0,Us.GC)()},W.createElement("div",{className:L},W.createElement(en.Z.Secondary,{id:Z,onClick:M,onKeyDown:te,sx:{fontSize:2,width:"auto",margin:"4px"},className:"edit-tool-button",animationDirection:"none",...ee},W.createElement(Yn.Z,{alignItems:"center"},W.createElement($,{className:"edit-tool-button-icon"}),H))))},jd=K=>{let{buttonWrapperClasses:L,handleOpenDesignModal:M,handleOpenElementsModal:U}=K;return W.createElement(W.Fragment,null,W.createElement(Nr,{buttonAttributes:{...(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.HEADER_ADD_ELEMENTS_BUTTON)},buttonClasses:L+" section-header-left-button",onClick:U,icon:Dc.Z,buttonText:W.createElement(qi.T,{project:"apps.App"},"Add Elements"),shiftTabOverride:!0,tabOverride:!1,id:`${Di.IP.TOGGLE_ELEMENTS}-outline`}),W.createElement(Nr,{buttonAttributes:{...(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.HEADER_EDIT_DESIGN)},buttonClasses:L+" section-header-right-button",onClick:M,icon:ya.Z,buttonText:W.createElement(qi.T,{project:"apps.App"},"Edit Design"),shiftTabOverride:!1,tabOverride:!0,id:`${Di.IP.DESIGN}-outline`}))};var zd=t(219190),Kd=t(771661);const Gd=K=>{let{handleToggleViewMenu:L,handleOpenDesignModal:M,isMenuOverlayOpen:U,className:H}=K;const V=ee=>{ee.shiftKey&&ee.key==="Tab"&&(ee.preventDefault(),(0,$a.NA)())},G=ee=>{ee.key==="Enter"&&(L(),(0,$a.yS)(`${Di.IP.MOBILE_OVERLAY_MENU}-outline`)),ee.key==="Tab"&&!ee.shiftKey&&(U?(0,$a.yS)(`${Di.IP.SITE_TITLE}-outline`):(ee.preventDefault(),(0,T.GE)((0,Ct.xu)(hn.Z.PAGE)),(0,$a.Fk)()))},Z=ee=>{let{onClick:$,id:te,onKeyDown:se,children:ae}=ee;return W.createElement(en.Z.Secondary,{id:te,onClick:$,onKeyDown:se,animationDirection:"none",borderColor:"gray.800",borderStyle:"solid",borderRadius:1,borderWidth:1,css:{justifyContent:"flex-start",gap:"10px",padding:"10px 8px",textAlign:"left"},sx:{fontSize:2,width:"auto",zIndex:40001,"&:hover":{backgroundColor:"gray.800"}}},ae)};return W.createElement(mn.Z,{position:"absolute",top:4,left:"calc(100% + var(--frame-scrollbar-width, 0px))",marginLeft:4,className:H},W.createElement(Yn.Z,{bg:"white",flexDirection:"column",width:"178px",boxShadow:"300",padding:1,borderRadius:2,borderWidth:1,borderColor:"gray.800",css:{gap:"6px"}},W.createElement(Z,{onClick:M,id:`${Di.IP.MOBILE_DESIGN}-outline`,onKeyDown:V},W.createElement(Yn.Z,{alignItems:"center"},W.createElement(ya.Z,{sx:{paddingRight:2}}),W.createElement(qi.T,{project:"apps.App"},"Edit Design"))),W.createElement(Z,{onClick:L,onKeyDown:G,id:`${Di.IP.MOBILE_OVERLAY_MENU}-outline`},W.createElement(Yn.Z,{alignItems:"center"},U?W.createElement(zd.Z,{sx:{paddingRight:2}}):W.createElement(Kd.Z,{sx:{paddingRight:2}}),U?W.createElement(qi.T,{project:"apps.App"},"Close Menu"):W.createElement(qi.T,{project:"apps.App"},"View Menu")))))};var ll=t(967552),gr=t(561463),Oc=t(251196);const Zd=K=>{let{handleToggleViewMenu:L,handleOpenDesignModal:M,isMenuOverlayOpen:U,className:H}=K;return W.createElement(gr.Z.Portal,null,W.createElement(gr.Z.Container,null,W.createElement(gr.Z.Drawer,{"data-test":"site-header-toolbar-container",docks:[55,55],draggable:!1,className:H,renderHeader:()=>W.createElement(Br.Z,{direction:"row",width:"100vw",height:"55px",divider:W.createElement(Oc.Z.Vertical,null),of:V=>W.createElement(Br.Z.StackItemContainer,{...V,sx:{display:"flex",flexGrow:1}})},W.createElement(ll.Z.Element.WithoutFeedback,{onClick:M,textAlign:"center",id:`${Di.IP.MOBILE_DESIGN}-outline`},W.createElement(Vi.Z.Action,null,W.createElement(qi.T,{project:"apps.App"},"Edit Design"))),W.createElement(ll.Z.Element.WithoutFeedback,{onClick:L,textAlign:"center",id:`${Di.IP.MOBILE_OVERLAY_MENU}-outline`},W.createElement(Vi.Z.Action,null,U?W.createElement(qi.T,{project:"apps.App"},"Close Menu"):W.createElement(qi.T,{project:"apps.App"},"View Menu")))),renderBody:()=>null})))},Xd=W.memo(Zd),Lc=22,Qd=320,Jd=()=>{const L=(0,T.Ze)(P.frp)!==null,U=(0,T.Ze)(P.Hlz)===ms.Z.PHONE,H=(0,T.Ze)(P.hF7),V=L||U&&H!==null,G=(0,T.Ze)(P.ZXd),Z=(0,W.useRef)(null),[ee,$]=(0,W.useState)(!1),[te,se]=(0,W.useState)(0),ae=(0,T.Ze)(P.sUl),oe=(0,T.zC)(),de=(0,hr.Z)(H),ue=(0,hr.Z)(G),xe=U?"mobile-header-vert-padding":"header-vert-padding",{platform:De}=(0,In.i)(ts.breakpoints),Ve=De==="mobile",pt=vt=>{(0,T.GE)((0,Ct.qC)(Di.IP.TOGGLE_ELEMENTS));const Pe=vt.currentTarget.getBoundingClientRect(),Ne={...Pe.toJSON(),bottom:Pe.bottom-Pe.height-Lc};(0,T.GE)((0,Ct.oI)(Ne)),(0,rl.by)()},ot=vt=>{U?G?((0,T.GE)((0,Ct.qC)(Di.IP.MOBILE_OVERLAY_MENU)),No.Z.setHeaderElementModalTab(Di.L5[Di.IP.MOBILE_OVERLAY_MENU])):((0,T.GE)((0,Ct.qC)(Di.IP.MOBILE_DESIGN)),No.Z.setHeaderElementModalTab(Di.L5[Di.IP.MOBILE_DESIGN])):((0,T.GE)((0,Ct.qC)(Di.IP.DESIGN)),No.Z.setHeaderElementModalTab(Di.L5[Di.IP.DESIGN]));const Pe=vt.currentTarget.getBoundingClientRect(),Ne=Qd-Pe.width,Ue={...Pe.toJSON(),left:U?Pe.left:Pe.left-Ne,bottom:Pe.bottom-Pe.height-Lc};(0,T.GE)((0,Ct.oI)(Ue)),(0,rl.Pb)()},ut=()=>{G?(Fs.Y.fire("header:menuOverlay:closed"),(0,T.GE)((0,Ct.TK)(!1))):(Fs.Y.fire("header:menuOverlay:opened"),(0,T.GE)((0,Ct.TK)(!0)))},At=de!==null&&H!==null,ze="section-toolbar-button-wrapper header-toolbar"+(ee?" dragging-height-handler":"")+(L||H?" hide":"")+(U||At?" hide-immediately":""),ft=()=>W.createElement(mn.Z,{ref:Z,onPointerDown:vt=>{vt.button===Tc.LEFT_CLICK&&($(!0),se(vt.pageY-55),oe((0,Ct.JA)(!0)))},className:it()("header-drag-handler-button static-button",{"is-dragging":ee})},W.createElement("img",{src:Ic(),alt:(0,l.t)("Adjust header height",null,{project:"apps.App"}),className:"header-drag-handler-img",draggable:!1}));return(0,W.useEffect)(()=>{if(!ee)return;const vt=(0,Ei.V6)();if(!vt)throw new Error("Header `heightHandler` could not find frame window");const Pe=Z.current;if(!Pe)throw new Error("Header `heightHandler` could not find drag handle node");const Ne=vt.document,Ue=Ne.body,be=Ue.querySelector("#header .header-announcement-bar-wrapper");if(!be)throw new Error("Header `heightHandler` could not find header wrapper");const Ze=Ne.importNode(Pe,!0),Ye=Pe.getBoundingClientRect();let Et,dt;Ze.style.transform=`translateY(${te-Ye.height/2}px)`,Ze.classList.remove("static-button"),Ze.classList.add("ghost-button"),be.classList.add("header-height-changing");const Ot=ae[xe].match(/^(\d+(?:\.\d+)?)(.*)$/);if(Ot===null)throw new Error(`"${xe}" was not found in tweak values`);const jt=(0,Ta.d)({value:parseInt(Ot[1]),unit:Ot[2]}),ii=(0,Ta.d)({value:U?15:10,unit:"vw"}),tt=U?(0,Ta.d)({value:1,unit:"vw"}):1,Kt=function(){const Si=Pn=>{if(Et===void 0)Et=Pn.pageY;else{const Pi=Math.round(Number(jt)+(Pn.pageY-Et)/2);Pi>=tt&&Pi<=ii&&(Ze.style.transform=`translateY(${Pn.pageY-Ye.height/2}px)`),dt=(0,f.clamp)(Pi,tt,ii),be.style.paddingTop=dt+"px",be.style.paddingBottom=dt+"px"}},xi=()=>{dt&&oe((0,Vd.w3)({options:{grouping:"DEBOUNCED"},value:(0,Ta.i)(dt).toFixed(1)+"vw",variableName:xe})),$(!1),se(0),oe((0,Ct.JA)(!1)),setTimeout(()=>{be.style.removeProperty("padding-top"),be.style.removeProperty("padding-bottom"),be.classList.remove("header-height-changing")},500)};return vt.addEventListener("pointermove",Si),vt.addEventListener("pointerup",xi),function(){vt.removeEventListener("pointermove",Si),vt.removeEventListener("pointerup",xi)}}(),Rt=function(){return Ue.appendChild(Ze),Ue.style.cursor="row-resize",Ue.style.userSelect="none",function(){Ze.style.transform="translateY(0)",Ue.removeChild(Ze),Ue.style.cursor="auto",Ue.style.userSelect=""}}();return()=>{Kt(),Rt()}}),W.createElement(W.Fragment,null,Ve?W.createElement(Xd,{handleOpenDesignModal:ot,handleToggleViewMenu:ut,isMenuOverlayOpen:G,className:it()("mobile-header-toolbar",{hide:V})}):W.createElement(W.Fragment,null,W.createElement(jd,{buttonWrapperClasses:ze,handleOpenDesignModal:ot,handleOpenElementsModal:pt}),W.createElement(Gd,{isMenuOverlayOpen:G,handleOpenDesignModal:ot,handleToggleViewMenu:ut,className:it()("header-toolbar",{hide:V,"hide-immediately":!U||At,"show-immediately":ue!==G})})),V||G?null:W.createElement(ft,null))},$d=W.memo(Jd);var Lv=t(473370);const{SPACE_AROUND_FRAME_CLASS:Pc,SECTION_EDITOR_FRAME_OVERLAY_CLASS:Yd}=cr,eh=(0,W.forwardRef)(function(L,M){let{extraToolbarButtons:U,region:H,sectionId:V,sectionNode:G,sectionIndex:Z,features:ee,sectionsAreMoving:$,isSectionHovered:te}=L;const se=(0,T.Ze)(P.tlC),ae=(0,In.i)(ts.breakpoints).platform==="mobile";(0,W.useEffect)(()=>{Z===0&&H==="page"&&!$&&Fs.Y.fire("section:first:change")},[Z,$,H]);const oe=(0,T.zC)(),de=(0,W.useCallback)(si=>{let{shouldAddAbove:sn}=si;return oe((0,Ks.Qq)({sectionId:V,shouldAddAbove:sn}))},[oe,V]),ue=(0,W.useCallback)(()=>de({shouldAddAbove:!0}),[de]),xe=(0,W.useCallback)(()=>de({shouldAddAbove:!1}),[de]),De=(0,oa.O)(P.cnr,V),Ve=(0,T.Ze)(P.Xax),pt=(0,T.Ze)(P.FMO),ot=De?Ve||pt:!1,ut=De&&!ot,At=(0,T.Ze)(P.aFX),ze=(0,T.Ze)(P.j_d),ft=(0,T.Ze)(P.zAH),vt=(0,T.Ze)(P.xuk),Pe=(0,T.Ze)(P.WOX),Ne=(0,T.Ze)(P.l8p),Ue=(0,T.Ze)(P.Xix),be=(0,oa.O)(P.rfW,V),Ze=!be&&Ue,[Ye,Et]=(0,W.useState)(!1),[dt,Ot]=(0,W.useState)(!1),[jt,ii]=(0,W.useState)(!1),tt=(0,W.useCallback)(()=>Et(!0),[]),Kt=(0,W.useCallback)(()=>Et(!1),[]),Rt=te||Ye,Oi=(0,oa.O)(P.HL5,V),Si=ft||$||At||Ze||ze||se||vt||ot,xi=!Si&&!Ne&&!Ue&&(Rt||ut),Pn=!Si&&!Ne&&!Ue&&(Rt||ut),Pi=V==="header",cn=(0,T.Ze)(P.hF7),jn=(0,T.Ze)(P.ZXd),ni=Pi?!cn&&!jn:!Si&&(Rt||be||ut)&&(Oi?Rt:!0),On=(0,W.useCallback)(si=>{G.ownerDocument.documentElement.scrollTop+=si.deltaY},[G]),yn=(0,W.useRef)(null);(0,W.useEffect)(()=>{if(Z!==0||H!=="page"){G.style.setProperty("--header-offset","0px");return}const si=Fs.Y.on("headerHeight",sn=>{let{headerHeight:En}=sn;En!==yn.current&&G.style.setProperty("--header-offset",En+"px"),yn.current=En});return yn.current!==null&&G.style.setProperty("--header-offset",yn.current+"px"),()=>si.detach()},[Z,G,H]);const zn=(0,W.useRef)(null);return(0,oa.O)(P.nUc,V)?W.createElement("div",{...(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.SECTION_EDITING_UI),className:it()("sqs-section-editing-ui",{"show-add-section-buttons":xi,"show-toolbar":Pn}),onMouseEnter:tt,onMouseLeave:Kt,onWheel:On,onTouchStart:si=>{zn.current=si.touches[0]},onTouchEnd:()=>{zn.current=null},onTouchMove:si=>{const sn=si.changedTouches[0];sn&&zn.current&&(G.ownerDocument.documentElement.scrollTop+=zn.current.clientY-sn.clientY),zn.current=sn},ref:M},W.createElement("div",{"data-test":"mouse-catcher-left-of-frame",className:`left-scroll-and-hover-catcher ${Pc}`}),W.createElement("div",{className:`sqs-section-wrapper ${Yd}`},W.createElement("div",{className:"shadow"}),W.createElement("div",{className:"shim"}),!!ee.add&&!ae&&W.createElement(Yn.Z,{className:"add-section-button-wrapper top-add-button-wrapper",alignItems:"center",justifyContent:"center"},W.createElement($n,{position:"top",region:H,onClick:ue,onHover:Ot})),H==="header"?W.createElement($d,null):W.createElement(Wd,{areButtonsVisible:xi,region:H,sectionNode:G,extraToolbarButtons:U,features:ee,savedSectionStatuses:Pe}),!!ee.add&&!ae&&W.createElement(Yn.Z,{className:"add-section-button-wrapper bottom-add-button-wrapper",alignItems:"center",justifyContent:"center"},W.createElement($n,{position:"bottom",region:H,onClick:xe,onHover:ii})),(0,ks.createPortal)(W.createElement("div",{className:it()("sqs-section-outline",{"show-section-outline":ni&&!dt&&!jt,"show-section-top-outline":dt,"show-section-bottom-outline":jt})}),G)),W.createElement("div",{"data-test":"mouse-catcher-right-of-frame",className:`right-scroll-and-hover-catcher ${Pc}`})):null});var Vl=t(181124),th=t(853522),ih=t(134521),Mc=t.n(ih),kr=t(432762),cl=t(161768),nh=t(471849),wc=t.n(nh);function sh(K){let L=K,M=0;for(;L.parentElement;)M+=L.parentElement.offsetTop,L=L.parentElement;return M}function ah(K){let{children:L,sectionNode:M,sectionId:U,sectionIndex:H}=K;const V=(0,cl.Z)(),G=(0,W.useRef)(null),Z=(0,T.Ze)(P.lyB),ee=(0,W.useMemo)(()=>Mc()(()=>{if(!G.current||!V.current||Z||!M)return;if(G.current.style.height!==`${M.clientHeight}px`){let oe=M.clientHeight;ss.Ay&&H===0&&(oe-=86),G.current.style.height=`${oe}px`}const te=(0,bn.mo)(M),se=te?M.offsetTop-(te.offsetTop+te.offsetHeight):sh(M),ae=parseInt(G.current.style.marginTop||"0px",10);if(H===0&&ae!==se&&Math.abs(se-ae)>1){const oe=se?`${se}px`:"";G.current.style.marginTop=oe}},20,{trailing:!0}),[M,Z,V,H]);(0,W.useEffect)(()=>()=>ee.cancel(),[ee]);const $=(0,W.useCallback)(()=>ee(),[ee]);return(0,W.useEffect)(()=>{if(!M)return;const te=new kr.d(()=>requestAnimationFrame($));return te.observe(M),M.parentElement&&te.observe(M.parentElement),()=>{te.disconnect()}},[M,$]),(0,W.useEffect)(()=>{Z||$()},[Z,$]),W.createElement("div",{className:it()(wc().positioner,Ts.h6),"data-template-getter":`section-editor-ui-${U}`,"data-section-id":U,"data-section-index":H,"data-test":"section-editor-ui",onMouseEnter:$,ref:G},W.createElement("div",{"data-template-getter":"section-wrapper",className:wc().sectionWrapper},L))}var pr=t(302975),oh=t(930628),Rc=t(952352),rh=t(839490),lh=t(515656),ch=t.n(lh),uh=t(38093),dh=t.n(uh),hh=t(847988),gh=t.n(hh),ph=t(625398),fh=t.n(ph),mh=t(162533),vh=t.n(mh),_h=t(320715),Eh=t.n(_h),on=t(436715),Ms=t(330718),Is=t(48992),fa=t(554973),Jo=t(411790),ul=t(167078),Bc=t(681975),jl=t(315061),dl=t(120497),fr=t(957892),ka=t(981721);const{DESKTOP:yh}=wn.FluidEngineBreakpoints,Nc=(0,ul.Z)(),Sh=["SHIFT","\u2191"],bh=["SHIFT","\u2193"],Ch=Nc?["DELETE"]:["BACKSPACE"],Ah=Nc?["\u2318","D"]:["CTRL","D"],Th=[Jo.i7,Jo.yf,Jo.PS],Ih=[Jo.qr,Jo.az,Jo.nf].concat(Th),Dh=[{icon:ch(),label:(0,l.t)("Align Left",null,{project:"apps.App"})},{icon:dh(),label:(0,l.t)("Align Horizontal Center",null,{project:"apps.App"})},{icon:gh(),label:(0,l.t)("Align Right",null,{project:"apps.App"})},{icon:fh(),label:(0,l.t)("Align Top",null,{project:"apps.App"})},{icon:vh(),label:(0,l.t)("Align Vertical Center",null,{project:"apps.App"})},{icon:Eh(),label:(0,l.t)("Align Bottom",null,{project:"apps.App"})}];function Oh(K){let{blocksById:L,sectionId:M}=K;const U=(0,W.useMemo)(()=>e.Z.getWebsiteComponentBlockConfig("website.components.stack"),[]),H=(0,oa.O)(P.aR7,M),V=(0,T.zC)(),G=(0,Ei.wo)(),Z=(0,on.er)(),ee=(0,oa.O)(P.hXR,M);return U?W.createElement(W.Fragment,null,W.createElement(en.Z.Base,{onClick:()=>{const{startPosition:$,overrides:te,direction:se}=(0,ka.k6)({multiselectedBlockIds:ee,deviceKey:Z,blocksById:L}),oe=(0,fr.Un)(U,$,H,te).newBlockData,de=oe.content.value.value;de.direction=se,de.childrenIds=(0,ka.wv)({blockIds:ee,blocksById:L,deviceKey:Z,direction:se}),de.childrenSizing=(0,ka.ps)({blockIds:ee,blocksById:L,direction:se}),V((0,Ct.wv)()),G==null||G.dispatchEvent(new CustomEvent("create-stack",{detail:{newBlock:oe,sectionId:M}}))},sx:{px:2,mr:"4px",borderRadius:1,backgroundColor:"white","&:hover":{backgroundColor:"gray.800"}}},(0,l.t)("Stack",null,{project:"apps.App",notes:'Label on a button which creates a "stack" of the selected blocks when clicked'})),W.createElement(jl.Z,null)):null}const Lh=K=>{let{multiselectedAreaNode:L,sectionId:M,value:U}=K;const{gridContents:H}=U,V=(0,T.zC)(),G=(0,on.er)(),Z=(0,T.Ze)(Ot=>(0,P.hXR)(Ot,M)),ee=(0,T.Ze)(P.e9T),$=(0,W.useMemo)(()=>(0,on.S6)(H),[H]),te=(0,W.useMemo)(()=>(0,Ei.wo)(),[]),[se,ae]=(0,W.useState)(Jo.qr),[oe,de]=(0,W.useState)(!1),[ue,xe]=(0,W.useState)(!1);(0,W.useEffect)(()=>{if(!L)return;const Ot=new IntersectionObserver(jt=>{let[ii]=jt;ii.isIntersecting||V((0,Ct.wv)())});return Ot.observe(L),()=>Ot.disconnect()},[L,V]);const De=(0,W.useMemo)(()=>(0,f.debounce)(Ot=>V((0,Ct.y8)({sectionId:M,blockIds:Ot,isKeyboard:!1})),500,{leading:!0,trailing:!1}),[V,M]),Ve=(0,W.useCallback)(()=>{De(Z)},[De,Z]),pt=(0,W.useMemo)(()=>(0,f.debounce)(Ot=>V((0,Ct.yt)({sectionId:M,blockIds:Ot,deviceKey:G,sourceAction:"button"})),500,{leading:!0,trailing:!1}),[G,V,M]),ot=(0,W.useCallback)(()=>{pt(Z)},[pt,Z]),ut=(0,W.useMemo)(()=>{let Ot=!1,jt=!1;const tt=((0,dl.Z)()?(0,Bc.IG)({blocks:H,blockIds:Z,deviceKey:G}):(0,on.h6)({blocks:H,deviceKey:G,blockIds:Z})).map(Rt=>Rt.layout[G].zIndex).sort(),Kt=Z.filter(Rt=>Rt&&$[Rt]).map(Rt=>$[Rt]).map(Rt=>Rt.layout[G].zIndex).sort();if(tt.length!==0){const Rt=tt[tt.length-1],Oi=tt[0],Si=Kt[Kt.length-1];Kt[0]<Rt&&(Ot=!0),Si>Oi&&(jt=!0)}return{canMoveForward:Ot,canMoveBackward:jt}},[$,G,H,Z]),{canMoveForward:At,canMoveBackward:ze}=ut,ft=At||ze,vt=(0,W.useCallback)(Ot=>{(0,fa.KM)({blockIds:Z,isKeyboard:Ot}),V((0,Ms.Ce)({sectionId:M,blockIds:Z,deviceKey:G,direction:1}))},[G,V,Z,M]),Pe=(0,W.useCallback)(Ot=>{(0,fa.KM)({blockIds:Z,isKeyboard:Ot}),V((0,Ms.Ce)({sectionId:M,blockIds:Z,deviceKey:G,direction:-1}))},[G,V,Z,M]),Ne=(0,W.useCallback)(Ot=>{if(!ft)return;const jt=Ot.key==="ArrowUp",ii=Ot.key==="ArrowDown";!Ot.shiftKey||!jt&&!ii||Ot.metaKey||(Ot.stopPropagation(),Ot.preventDefault(),jt&&At&&vt(!0),ii&&ze&&Pe(!0))},[ft,At,ze,vt,Pe]),Ue=(0,W.useCallback)(()=>{de(!oe)},[oe]);(0,Is.Z)("keydown",Ne,{useCapture:!0,element:te==null?void 0:te.body}),(0,Is.Z)("keydown",Ne,{useCapture:!0,element:document.body}),(0,Is.Z)("scroll",Ue,{element:te});const be=(0,W.useMemo)(()=>{let Ot=!0,jt=!0;const ii=Z.filter(tt=>tt&&$[tt]).map(tt=>$[tt]).map(tt=>tt.layout[G]);for(let tt=0;tt<ii.length;tt++)if(tt>0){const Kt=ii[tt],Rt=ii[tt-1];Kt.start.x===Rt.start.x&&Kt.end.x===Rt.end.x||(Ot=!1),Kt.start.y===Rt.start.y&&Kt.end.y===Rt.end.y||(jt=!1)}return{hasHorizontalAlignment:!Ot,hasVerticalAlignment:!jt}},[$,G,Z]),{hasHorizontalAlignment:Ze,hasVerticalAlignment:Ye}=be,Et=(0,W.useCallback)(Ot=>{ae(Ot),(0,fa.WI)({blockIds:Z,alignValue:Ot}),V((0,Ms.Q7)({blockIds:Z,sectionId:M,deviceKey:G,direction:Ot,initialBlockLayout:ee}))},[G,V,ee,Z,M]),dt=Ze||Ye;return W.createElement(oh.Z,{blockNode:L,"data-multiselect-toolbar":!0,onPopupVisibilityChange:xe},(0,ka.Ft)()?W.createElement(Oh,{blocksById:$,sectionId:M}):null,dt&&W.createElement(W.Fragment,null,W.createElement(rh.Z,{dataTest:"multiselect-container-alignment",value:se,enum:Ih,enumAnnotation:Dh,onChange:Et,hoverTitle:(0,l.t)("Align Group",null,{project:"apps.App"}),noDefaultInList:!0,dividerIndex:[2],position:"bottom-right",isVisible:ue}),W.createElement(jl.Z,null)),ft&&W.createElement(W.Fragment,null,W.createElement(pr.Z,{key:"move-forward",disabled:!At,forceHideTooltip:!At,label:(0,l.t)("Move Forward",null,{project:"apps.App"}),controls:Sh,onClick:()=>vt(!1),color:At?"gray.100":"gray.600"},Rc.f),W.createElement(pr.Z,{key:"move-backward",disabled:!ze,forceHideTooltip:!ze,label:(0,l.t)("Move Backward",null,{project:"apps.App"}),controls:bh,onClick:()=>Pe(!1),color:ze?"gray.100":"gray.600"},Rc.R),W.createElement(jl.Z,null)),G===yh&&W.createElement(W.Fragment,null,W.createElement(pr.Z,{label:(0,l.t)("Duplicate",null,{project:"apps.App"}),onClick:ot,key:"duplicate-blocks",controls:Ah},W.createElement(Rr.Z,null))),W.createElement(pr.Z,{label:(0,l.t)("Remove",null,{project:"apps.App"}),onClick:Ve,key:"delete-blocks",controls:Ch},W.createElement(Ca.Z,{color:"red"})))};var wv=t(101311),mr=t(858579),kc=t(106793),Ph=t(306032),hl=t(969145),zl=t(505739),ja=t(378147),Kl=t(516408),xc=t(996118),_n=t(784874),Gl=t(339235),Wn=t(949642),ko=t(78936);function Mh(K){let{css:L}=K;return W.createElement("style",{dangerouslySetInnerHTML:{__html:L},"data-test":"fluid-engine-grid-css"})}const gl=W.memo(Mh);var wh=t(85019);const Rh=K=>{let{blockWidget:L,setBlockWidget:M,value:U,parentNode:H,onValueChange:V,onContainerStylesChange:G,onBlockFirstRender:Z,onRequestDelete:ee,onAfterBlockRender:$,isDragPreview:te,onProseMirrorFirstRender:se}=K;const ae=(0,W.useRef)(!1),oe=(0,W.useRef)(Z),de=(0,W.useRef)(se),ue=(0,W.useRef)(U.value),xe=(0,W.useRef)(!1),De=(0,W.useRef)(U.containerStyles),Ve=(0,W.useRef)(!1),pt=U.id;return(0,W.useEffect)(()=>{oe.current=Z,de.current=se},[Z,se]),(0,W.useEffect)(()=>{ae.current||M((0,wh.Z)(U))},[U,M]),(0,W.useEffect)(()=>{let ot=!1;try{var ut;ot=!!(!(H==null||(ut=H.ownerDocument.defaultView)===null||ut===void 0)&&ut.Y.Env)}catch{}if(!ot||!L||!(H!=null&&H.isConnected))return;const At=L.get("model").after("change",()=>{const Ze=L.get("model").toJSON();V(Ze)}),ze=L.get("model").after("remove",()=>{ee(pt)}),ft=L.after("containerStylesChange",()=>{const Ze=L.get("containerStyles");G(Ze)}),vt=L.after("block:renderedAfterDataChange",()=>{$()}),Pe=()=>{vt.detach(),ft.detach(),At.detach(),ze.detach()};let Ne=!1;const Ue=(0,Ei.V6)();function be(){Pe(),Ne=!0}return Ue==null||Ue.addEventListener("beforeunload",be,{once:!0}),()=>{Ue==null||Ue.removeEventListener("beforeunload",be),Ne||Pe()}},[H,L,G,$,V,pt,ee]),(0,W.useEffect)(()=>{const ot=At=>{At===pt&&de.current()},ut=(0,ps.QA)(ps.qK,ot);return()=>{ut()}},[pt]),(0,W.useEffect)(()=>{const ot=(0,Ei.V6)();if(!ot||!(H!=null&&H.isConnected)||!L)return;L.onceAfter("widget:contentUpdate",()=>{oe.current()}),te?H.setAttribute("drag-preview",`${te}`):H.removeAttribute("drag-preview");try{L.render(H)}catch(ft){(0,k.Tb)(ft)}ae.current=!0;const ut=()=>{try{L&&L.destroy(!0)}catch(ft){(0,k.Tb)(ft),console.error(ft)}};let At=!1;function ze(){ut(),At=!0}return ot&&ot.addEventListener("beforeunload",ze,{once:!0}),()=>{At||ut(),ot==null||ot.removeEventListener("beforeunload",ze)}},[H,L,te]),(0,W.useEffect)(()=>{if(ae.current&&L){const ot=L.get("model").toJSON();(!(0,f.isEqual)(U.value,ot)||!xe.current)&&(xe.current=!0,L.get("model").setAttrs(U.value),L.syncUI({immediate:!0}))}ue.current=U.value},[U.value,L]),(0,W.useEffect)(()=>{const ot=!Ve.current||U.containerStyles&&!(0,f.isEqual)(U.containerStyles,De.current);ae.current&&L&&ot&&(L.set("containerStyles",U.containerStyles),Ve.current=!0),De.current=U.containerStyles},[U.containerStyles,L]),null};var Bh=t(780512),Nh=t(722262),kh=t(483867),xh=t(796672),Dn=t.n(xh);const ra=K=>W.createElement("div",{className:it()(Dn().dot,{[Dn().globalDot]:K.isGlobal})}),qh=K=>{let{handleRefs:L,shouldHideHandles:M,isAtLeftEdge:U,isAtRightEdge:H,isGlobal:V}=K;const{dragTop:G,dragRight:Z,dragBottom:ee,dragLeft:$,dragTopLeft:te,dragTopRight:se,dragBottomLeft:ae,dragBottomRight:oe}=L;return W.createElement("div",{"data-js":"dragHandles",className:it()(Dn().handlesWrapper,{[Dn().hideHandles]:M})},W.createElement("div",{className:it()(Dn().topLeftResizeHandle,{[Dn().shiftedToRight]:U}),ref:te,"data-test":"fluid-engine-resize-nw"},W.createElement(ra,{isGlobal:V})),W.createElement("div",{className:Dn().topMoveHandle}),W.createElement("div",{className:Dn().topResizeHandle,ref:G,"data-test":"fluid-engine-resize-n"},W.createElement(ra,{isGlobal:V})),W.createElement("div",{className:it()(Dn().topRightResizeHandle,{[Dn().shiftedToLeft]:H}),ref:se,"data-test":"fluid-engine-resize-ne"},W.createElement(ra,{isGlobal:V})),W.createElement("div",{className:it()(Dn().rightMoveHandle,{[Dn().shiftedToLeft]:H})}),W.createElement("div",{className:it()(Dn().rightResizeHandle,{[Dn().shiftedToLeft]:H}),ref:Z,"data-test":"fluid-engine-resize-e"},W.createElement(ra,{isGlobal:V})),W.createElement("div",{className:it()(Dn().bottomRightResizeHandle,{[Dn().shiftedToLeft]:H}),ref:oe,"data-test":"fluid-engine-resize-se"},W.createElement(ra,{isGlobal:V})),W.createElement("div",{className:Dn().bottomMoveHandle}),W.createElement("div",{className:Dn().bottomResizeHandle,ref:ee,"data-test":"fluid-engine-resize-s"},W.createElement(ra,{isGlobal:V})),W.createElement("div",{className:it()(Dn().bottomLeftResizeHandle,{[Dn().shiftedToRight]:U}),ref:ae,"data-test":"fluid-engine-resize-sw"},W.createElement(ra,{isGlobal:V})),W.createElement("div",{className:it()(Dn().leftMoveHandle,{[Dn().shiftedToRight]:U})}),W.createElement("div",{className:it()(Dn().leftResizeHandle,{[Dn().shiftedToRight]:U}),ref:$,"data-test":"fluid-engine-resize-w"},W.createElement(ra,{isGlobal:V})))};var Uh=t(602548),xr=t.n(Uh);const{FLUID_ENGINE_BLUE_HEX_WITH_OPACITY:Fh,FLUID_ENGINE_BLUE_HEX:Wh,FLUID_ENGINE_LIGHT_BLUE_HEX_WITH_OPACITY:Hh,FLUID_ENGINE_LIGHT_PURPLE_HEX_WITH_OPACITY:Vh,FLUID_ENGINE_LIGHT_PURPLE_HEX:jh,FLUID_ENGINE_PURPLE_HEX_WITH_OPACITY:zh,FLUID_ENGINE_PURPLE_HEX:Kh}=wn;var qc=function(K){return K[K.Dashed=0]="Dashed",K[K.Solid=1]="Solid",K}({});const Gh=K=>{let{isVisible:L,borderColor:M}=K;return W.createElement("svg",{width:"calc(100% + 6px)",height:"calc(100% + 6px)",preserveAspectRatio:"none",pointerEvents:"none",opacity:L?1:0,style:{overflow:"visible",transition:"opacity 0.05s ease-out",position:"absolute",inset:"-3px"},shapeRendering:"crispEdges"},W.createElement("rect",{x:"1",y:"1",width:"calc(100% - 2px)",height:"calc(100% - 2px)",fill:"none",stroke:M,strokeWidth:"2px",strokeLinecap:"square",strokeLinejoin:"round",strokeDasharray:"0.01 8",vectorEffect:"non-scaling-stroke"}))},Zh=K=>{let{outerColor:L,innerColor:M}=K;return W.createElement(W.Fragment,null,W.createElement(mn.Z,{position:"absolute",sx:{inset:"-3px"},borderStyle:"solid",borderWidth:"1px",borderColor:L}),W.createElement(mn.Z,{position:"absolute",sx:{inset:"-2px"},borderStyle:"solid",borderWidth:"1px",borderColor:M}))},Xh=K=>{let{className:L,handleRefs:M,label:U,shouldShowLabel:H,isFocused:V,isAtLeftEdge:G,isAtRightEdge:Z,isDraggingAny:ee,isGlobal:$=!1,isNearMovingBlocks:te,isMovingWithKeys:se,isMultiselected:ae,isPinned:oe,shouldShowBorder:de,showGrowEffect:ue,zIndex:xe,isDuplicateKeyDown:De,borderStyle:Ve,isInsideStack:pt}=K;const ot=(0,In.i)(ts.breakpoints).platform==="mobile",ut=te||ae,At=$?Vh:Hh,ze=$?zh:Fh,ft=$?jh:ts.colors.blue[600],vt=$?Kh:Wh,Pe=ut?At:ft,Ne=ut?ze:vt;return W.createElement(mn.Z,{className:it()(L,"fluid-engine-block-wrapper"),position:"absolute",width:V&&ue?"calc(100% - 2px)":"calc(100% - 6px)",height:V&&ue?"calc(100% - 2px)":"calc(100% - 6px)",transitionDuration:150,transitionTimingFunction:"linear",transitionProperty:"width, height, transform",style:{cursor:"grab",pointerEvents:"none",transform:ue?"translate(1px, 1px)":"translate(3px, 3px)"},zIndex:V&&!se?999999:xe+9999},Ve===1?W.createElement(Zh,{innerColor:de?Ne:"transparent",outerColor:de?Pe:"transparent"}):W.createElement(Gh,{isVisible:de,borderColor:Pe}),V&&!ot&&!De&&(!(0,ka.Ft)()||!pt)?W.createElement(qh,{handleRefs:M,isAtLeftEdge:G,isAtRightEdge:Z,isGlobal:$,shouldHideHandles:ee||!V||se}):null,W.createElement(Yn.Z,{className:it()(xr().labelTagContainer,{[xr().visible]:H})},W.createElement(mn.Z,{className:it()("sqs-block-label-tag","sqs-block-label-tag-on-outline",{"sqs-global-block-label-tag":$,[xr().hasAccessory]:oe})},U),oe?W.createElement(Yn.Z,{className:$?xr().globalAccessory:xr().accessory,alignItems:"center",justifyContent:"center",width:"16px",height:"16px"},W.createElement(kh.Z,{fill:vt,width:"10px",height:"10px"})):null))};var Qh=t(213588),_s=t.n(Qh);const Jh=(K,L)=>K&&!L,Uc=(K,L)=>K&&!L,$h=(K,L)=>K&&L,Fc=(K,L)=>!K&&L,Yh=K=>{let{isMatchingWidth:L,isMatchingHeight:M,isAtLeftEdge:U,isTopVisible:H,isBottomVisible:V}=K;const G=Jh(M,L),Z=Uc(L,M),ee=Fc(H,V);return{showTickAtLeft:G&&!U,showTickAtRight:G&&U,showTickAtTop:Z&&H,showTickAtBottom:Z&&ee}},eg=K=>{let{isMatchingWidth:L,isMatchingHeight:M,isAtLeftEdge:U,isTopVisible:H,isBottomVisible:V}=K;const G=$h(L,M),Z=Uc(L,M),ee=Fc(H,V);return{...Yh({isMatchingWidth:L,isMatchingHeight:M,isAtLeftEdge:U,isTopVisible:H,isBottomVisible:V}),showIndicatorAtLeft:M&&!U,showIndicatorAtRight:G||M&&U,showIndicatorAtTop:L,showIndicatorAtBottom:G||Z&&ee}},pl="#FFB802",fl="transparent",tg=K=>({borderLeftColor:K.showIndicatorAtLeft?pl:fl,borderRightColor:K.showIndicatorAtRight?pl:fl,borderTopColor:K.showIndicatorAtTop?pl:fl,borderBottomColor:K.showIndicatorAtBottom?pl:fl}),ig=K=>{let{visibility:L}=K;return W.createElement(W.Fragment,null,W.createElement("div",{className:it()(_s().resizingTickTop,{[_s().showAtLeft]:L.showTickAtLeft,[_s().showAtRight]:L.showTickAtRight})}),W.createElement("div",{className:it()(_s().resizingTickBottom,{[_s().showAtLeft]:L.showTickAtLeft,[_s().showAtRight]:L.showTickAtRight})}),W.createElement("div",{className:it()(_s().resizingTickLeft,{[_s().showAtTop]:L.showTickAtTop,[_s().showAtBottom]:L.showTickAtBottom})}),W.createElement("div",{className:it()(_s().resizingTickRight,{[_s().showAtTop]:L.showTickAtTop,[_s().showAtBottom]:L.showTickAtBottom})}))},ng=K=>{let{className:L,isAtLeftEdge:M,isMatchingWidth:U,isMatchingHeight:H,isTopVisible:V,isBottomVisible:G,zIndex:Z}=K;const ee=eg({isMatchingWidth:U,isMatchingHeight:H,isAtLeftEdge:M,isTopVisible:V,isBottomVisible:G}),$=tg(ee);return W.createElement(mn.Z,{className:it()(L,_s().wrapper),style:$,zIndex:Z+99999},W.createElement(mn.Z,{style:{position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",pointerEvents:"none",borderWidth:"2px",borderStyle:"solid",...$}}),W.createElement(ig,{visibility:ee}))};function Wc(K){let{startX:L,startY:M,endX:U,endY:H}=K;return W.createElement(mn.Z,{inert:!0,position:"absolute",top:0,left:0,right:0,bottom:0,color:"white",style:{fontFamily:"monospace",fontWeight:"bold",fontSize:"14px",lineHeight:"14px",pointerEvents:"none"}},W.createElement(mn.Z,{position:"absolute",top:0,left:0,padding:"2px",backgroundColor:"rgba(24, 129, 91, 0.8)"},W.createElement("span",null,"(",L,", ",M,")")),W.createElement(mn.Z,{position:"absolute",bottom:0,right:0,padding:"2px",backgroundColor:"rgba(24, 129, 91, 0.8)"},W.createElement("span",null,"(",U,", ",H,")")),W.createElement(mn.Z,{position:"absolute",top:0,right:0,padding:"2px",backgroundColor:"rgba(95, 172, 211, 0.8)"},W.createElement("span",null,U-L+1,"x",H-M+1)))}function sg(K){let{id:L,sectionId:M,zIndex:U,startX:H,startY:V,endX:G,endY:Z}=K;const ee=(0,T.Ze)($=>(0,P.UtN)($,M)).has(L);return W.createElement(mn.Z,{inert:!0,position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:U,color:"white",style:{fontFamily:"monospace",fontWeight:"bold",fontSize:"14px",lineHeight:"14px",outline:"2px dashed gray",pointerEvents:"none"}},W.createElement(Wc,{startX:H,startY:V,endX:G,endY:Z}),ee?W.createElement(mn.Z,{position:"absolute",top:0,right:0,padding:"2px",backgroundColor:"rgba(24, 129, 91, 0.8)"},W.createElement("span",null,"DMO ACTIVE")):null)}var Hc=t(614205),ag=t(175918);function og(K,L,M,U){const H=(0,W.useRef)(null),V=(0,T.Ze)(G=>(0,P.cQT)(G,L,M,U));return(0,W.useEffect)(()=>{if(!K)return;const G=(0,Ei.wo)(),Z=(0,ag.Z)(H.current,G);return()=>{Z==null||Z.destroy()}},[K,V]),H}var Tt=t(608259),Vc=t(88565),vr=t(426728);function Ya(K){return!("dragType"in K)}function rg(K){return"layoutLimits"in K}function xa(K){return"blockLayoutsById"in K}function lg(K){return xa(K)||rg(K)}function jc(K){return"newBlockData"in K}function Zl(K,L){return K.left<=L.right&&L.left<=K.right&&K.top<=L.bottom&&L.top<=K.bottom}function zc(K){return{left:K.start.x,top:K.start.y,right:K.end.x,bottom:K.end.y}}function cg(K,L){const M=zc(K),U={left:M.left-2,top:M.top-2,right:M.right+2,bottom:M.bottom+2};return Zl(U,zc(L))}const Kc={rotation:{value:0,unit:"deg"},scale:{x:{value:100,unit:"%"},y:{value:100,unit:"%"}},skew:{x:{value:0,unit:"deg"},y:{value:0,unit:"deg"}},offset:{x:{value:0,unit:"px"},y:{value:0,unit:"px"}},origin:{x:{value:50,unit:"%"},y:{value:50,unit:"%"}}},Gc=K=>{const L=(0,f.pick)(K,Object.keys(Kc));return(0,f.merge)({},Kc,L)},Zc=K=>K.rotation.value===0&&K.scale.x.value===100&&K.scale.y.value===100&&K.skew.x.value===0&&K.skew.y.value===0&&K.offset.x.value===0&&K.offset.y.value===0,ug=K=>{let{transforms:L,isVisible:M,className:U}=K;const H=(0,W.useMemo)(()=>Gc(L),[L]),V=(0,W.useMemo)(()=>[`rotate(${H.rotation.value})`,`scale(${H.scale.x.value/100}, ${H.scale.y.value/100})`,`skewX(${H.skew.x.value}) skewY(${H.skew.y.value})`].join(" "),[H]),G=(0,W.useMemo)(()=>{const{x:ee,y:$}=H.offset;return`translate(${ee.value}${ee.unit},${$.value}${$.unit})`},[H.offset]),Z=H.scale.x.value!==100||H.scale.y.value!==100;return W.createElement("svg",{className:U,width:"100%",height:"100%",preserveAspectRatio:"none",strokeLinecap:"round",pointerEvents:"none",opacity:M&&!Zc(H)?1:0,style:{overflow:"visible",transition:"opacity 0.05s ease-out",transform:G},shapeRendering:"crispEdges"},W.createElement("g",{transform:V,"transform-origin":`${H.origin.x.value}% ${H.origin.y.value}%`},Z?W.createElement("rect",{x:"1",y:"1",width:"calc(100% - 2px)",height:"calc(100% - 2px)",fill:"none",stroke:ts.colors.blue[400],strokeWidth:2,strokeLinecap:"round",vectorEffect:"non-scaling-stroke"}):W.createElement(W.Fragment,null,W.createElement("rect",{x:".5",y:".5",width:"calc(100% - 1px)",height:"calc(100% - 1px)",fill:"none",stroke:ts.colors.blue[600],strokeWidth:"1",vectorEffect:"non-scaling-stroke"}),W.createElement("rect",{x:"1.5",y:"1.5",width:"calc(100% - 3px)",height:"calc(100% - 3px)",fill:"none",stroke:ts.colors.blue[400],strokeWidth:"1",vectorEffect:"non-scaling-stroke"}))))},dg=(K,L)=>(0,W.useMemo)(()=>{var U,H,V,G;const Z=K.value;if(L===null||!(!((U=Z.animations)===null||U===void 0)&&U.length))return Z.transforms;const[ee,$,te]=(L||"").split("/");if(ee!=="block-animations"||typeof $!="string")return Z.transforms;const se=parseInt($),ae=te==="transform-0"?0:te==="transform-1"?1:-1;return((G=Z.animations)===null||G===void 0||(V=G[se])===null||V===void 0||(H=V.transforms)===null||H===void 0?void 0:H[ae])??Z.transforms},[K,L]),{getJsonPointerValue:hg}=Va.jsonPointerUtils,gg=(0,Bh.Z)(),pg=(0,Nh.Z)();function fg(K){if(K.type===_n.Z.WEBSITE_COMPONENT){var L,M;const U=(0,vr.L)(K);return(U==null||(L=U.layout)===null||L===void 0?void 0:L.hasContentBasedMinSize)===void 0||(U==null||(M=U.layout)===null||M===void 0?void 0:M.hasContentBasedMinSize)}return K.type!==_n.Z.MAP&&K.type!==_n.Z.IMAGE&&K.type!==_n.Z.SHAPE&&!(K.type===_n.Z.BUTTON&&K.stretched)}function mg(K){if(K.type===_n.Z.WEBSITE_COMPONENT){const L=(0,vr.L)(K);return!!(L!=null&&L.isGlobal)}return!1}function vg(K,L){return"transforms"in K&&"transforms"in L?!(0,St.Kv)(K.transforms,L.transforms):!1}function Xl(K){var L;return((L=(0,Ei.wo)())===null||L===void 0?void 0:L.getElementById(`stack-child-container-${K}`))??null}const _g=K=>{let{layout:L,value:M,fluidEngineId:U,sectionId:H,deviceKey:V,path:G,positionArgs:Z,onClick:ee,onAfterFirstRender:$,onBlockChange:te,adjustGridForBlockHeightChange:se,onRequestDelete:ae,onResizeEnd:oe,onMoveEnd:de,multiselectDragNode:ue,selectedBlockIds:xe,isDrawingMultiselectionArea:De,isDraggingInMultiselectMove:Ve,isDraggingRowCount:pt,isFocused:ot,isMultiselected:ut,isInMultiselectionTarget:At,isAnyBlockSelected:ze,isMovingWithKeys:ft,isMultiselectKeyDown:vt,isDuplicateKeyDown:Pe,isEditingEnabled:Ne,isLayersPanelOpenForThisSection:Ue,isAtLeftEdge:be,isAtRightEdge:Ze,getMultiselectionArea:Ye,isMultiResizing:Et,isTopVisible:dt,isBottomVisible:Ot,isBlockNearAreaMovedWithKeys:jt,doesBlockMatchWidthOfAreaMovedByKeys:ii,doesBlockMatchHeightOfAreaMovedByKeys:tt,isInsideStack:Kt=!1,isAncestorOfFocusedBlock:Rt}=K;var Oi;const Si=(0,W.useRef)(null),[xi,Pn]=(0,W.useState)(null),Pi=(0,W.useRef)(null),cn=(0,W.useRef)(null),[jn,as]=(0,W.useState)(!1),[Ji,ni]=(0,W.useState)(!1),On=L[V].visible,[yn,zn]=(0,W.useState)(!On),Gi=(0,W.useRef)(0),si=(0,Gl.Z)(),[sn,En]=(0,W.useState)(!1);(0,W.useEffect)(()=>{var oi,ji,gs;const Os=()=>{En(!0)},Ua=()=>{En(!1)};return(oi=window.top)===null||oi===void 0||oi.addEventListener("PREVIEW_BLOCK_ANIMATION_START",Os),(ji=window.top)===null||ji===void 0||ji.addEventListener("PREVIEW_BLOCK_ANIMATION_END",Ua),(gs=window.top)===null||gs===void 0||gs.addEventListener("PREVIEW_BLOCK_ANIMATION_CANCEL",Ua),()=>{var Mr,$s,Xa;(Mr=window.top)===null||Mr===void 0||Mr.removeEventListener("PREVIEW_BLOCK_ANIMATION_START",Os),($s=window.top)===null||$s===void 0||$s.removeEventListener("PREVIEW_BLOCK_ANIMATION_END",Ua),(Xa=window.top)===null||Xa===void 0||Xa.removeEventListener("PREVIEW_BLOCK_ANIMATION_CANCEL",Ua)}},[sn]),(0,W.useEffect)(()=>{yn&&On&&zn(!1)},[yn,On]);const os=De&&!vt?At:ut,va=(0,T.Ze)(P.KzS),la=(0,T.Ze)(P.MIi),Da=(0,T.Ze)(P.m1X),to=(0,T.Ze)(P.SY8),Yo=M.type===_n.Z.WEBSITE_COMPONENT&&"engine"in M.value&&M.value.engine==="wysiwyg",na=(M.type===_n.Z.HTML||Yo)&&!va&&Da,qa=Da&&la!==M.id&&!na,{DESKTOP:er}=wn.FluidEngineBreakpoints,La=(0,W.useRef)(M);(0,W.useEffect)(()=>{La.current=M},[M]);const Ut=(0,ka.Ft)(),$i=M.type===_n.Z.WEBSITE_COMPONENT&&M.definitionName==="website.components.stack",Rn=(0,W.useRef)(null);(0,W.useEffect)(()=>{Ut&&$i&&Si.current&&!Rn.current&&(Rn.current=Si.current.querySelector(".sqs-editing-overlay"))},[Ut,$i,Ji]),(0,W.useEffect)(()=>{var oi;(oi=Rn.current)===null||oi===void 0||oi.classList.toggle("sqs-editing-overlay-interactive",ot||Ut&&Rt)},[Ut,Rt,ot]),(0,W.useEffect)(()=>{if(ot&&Si.current&&Yo){const oi=Si.current.querySelector(".sqs-block-content");oi&&(oi.inert=!1)}},[ot,Yo]);const Vs=(0,W.useCallback)(()=>{ni(!0),$(M.id,Si.current)},[M.id,$]),Xs=(0,W.useCallback)(()=>{as(!0)},[]);(0,W.useEffect)(()=>{Si.current&&Ji&&(Gi.current=(0,ko.yk)(Si.current,La.current))},[os,ot,Ji]);const Ss=(0,W.useCallback)(()=>({type:Tt.wm,item:()=>{var oi;return{fluidEngineId:U,currentPosition:ut?Ye():(0,f.cloneDeep)(L[V]),selectedBlockIds:ut?xe:[M.id],startingScrollTop:(oi=(0,Ei.V6)())===null||oi===void 0?void 0:oi.scrollY}},canDrag:!Kt,end:de,collect:oi=>({isMoving:!!oi.isDragging(),moveHandlerId:oi.getHandlerId()})}),[U,ut,Ye,L,V,xe,M.id,de,Kt]),[{isMoving:Ka,moveHandlerId:js},tr,To]=(0,ja.c)(Ss,[Ss]),[{isMoving:zs},hs,Qs]=(0,ja.c)(Ss,[Ss]),Js=oi=>(0,ja.c)(()=>({type:oi,item:{id:M.id,fluidEngineId:U,dragType:null,layout:(0,f.cloneDeep)(L),path:G,layoutLimits:{start:{x:0,y:0},end:{x:26,y:1/0}}},canDrag:!Kt,end:oe,collect:ji=>({isDragging:!!ji.isDragging()})}),[L,G,M,oe,U,Kt]),[{isDragging:Io},io,Ar]=Js(Tt.EY),[{isDragging:jr},Uo,zr]=Js(Tt.UP),[{isDragging:pc},Tl,Fo]=Js(Tt.lk),[{isDragging:Kr},Il,Dl]=Js(Tt.CI),[{isDragging:fc},ir,Ga]=Js(Tt.zh),[{isDragging:Ol},Ll,Pl]=Js(Tt.dJ),[{isDragging:Gr},Zr,no]=Js(Tt.fS),[{isDragging:Ml},Tr,Xr]=Js(Tt.gX),Wo=(0,W.useCallback)(oi=>{const ji=oi?hg(oi,G).content.value:La.current,gs=(0,ko.yk)(Si.current,ji);Gi.current>0&&gs!==Gi.current&&fg(ji)&&se({blockId:ji.id,fluidEngineContext:oi,growOrShrink:gs<Gi.current?"shrink":"grow",contentHeightDifferenceInPixels:Math.abs(Gi.current-gs)}),Gi.current=gs},[se,G]),ho=(0,W.useCallback)(oi=>{if(Ne&&!(0,St.Kv)(M.value,oi)){const ji=vg(M.value,oi),Os={undoable:(0,St.T6)(M.value,oi,M.type),grouping:ji?zl.Z.DEBOUNCED:void 0},Ua=te(M.id,"value",oi,Os);Wo(Ua)}},[M.id,M.value,Wo,te,M.type,Ne]),Ir=(0,W.useCallback)(oi=>{if(Ne&&!(0,f.isEqual)(M.containerStyles,oi)){const ji=(0,St.Cx)(M.containerStyles,oi),gs=te(M.id,"containerStyles",oi,{undoable:ji});Wo(gs)}},[M.id,M.containerStyles,Wo,te,Ne]);(0,W.useEffect)(()=>{[Qs,To,Ar,zr,Fo,Dl,Ga,Pl,no,Xr].forEach(ji=>ji((0,xc.r)()))},[Qs,To,Ar,zr,Fo,Dl,Ga,Pl,no,Xr]);const Za=Ka||zs||Ve||Io||jr||pc||Kr||fc||Ol||Gr||Ml,Qr=(0,hr.Z)(Za),Do=Ne&&!qa&&!Kt;(0,dl.Z)()&&hs(Do?cn.current:null),tr(Do?Pi.current:null),(0,W.useEffect)(()=>{if(Ji&&(pg||gg)&&Si.current&&!De){const oi=Si.current,ji=$s=>{if($s.target.hasAttribute("contenteditable")){var ar;(ar=Pi.current)===null||ar===void 0||ar.setAttribute("draggable","false"),ue==null||ue.setAttribute("draggable","false")}},gs=$s=>{if($s.target.hasAttribute("contenteditable")){var ar;(ar=Pi.current)===null||ar===void 0||ar.setAttribute("draggable","true"),ue==null||ue.setAttribute("draggable","true")}},Os=()=>{const $s=oi==null?void 0:oi.querySelectorAll("[contenteditable]");if($s)for(const Xa of $s)Xa.addEventListener("mouseenter",ji,{capture:!0}),Xa.addEventListener("mouseleave",gs,{capture:!0})},Ua=$s=>{$s.removeEventListener("mouseenter",ji),$s.removeEventListener("mouseleave",gs)},Mr=new MutationObserver($s=>{for(const Xa of $s)if(Xa.addedNodes.length>0){Os();break}});return Mr.observe(oi,{childList:!0,subtree:!0,attributeFilter:["contenteditable"]}),()=>{Mr.disconnect();const $s=oi==null?void 0:oi.querySelectorAll("[contenteditable]");if($s)for(const Xa of $s)Ua(Xa)}}},[Ji,De,ue,jn]);const _a=(0,T.zC)();(0,W.useEffect)(()=>{if(!Qr&&Za)_a((0,Ct.dC)(M.id)),Da&&!na&&_a((0,Ct.PV)());else if(Qr&&!Za){const gs=xe.length>1?null:M.id;if(_a((0,Ct.cq)(gs)),_a((0,Ct.HT)()),na){var oi,ji;(ji=Si.current)===null||ji===void 0||(oi=ji.querySelector(".sqs-html-content"))===null||oi===void 0||oi.focus()}}},[Za,M.id,M.type,Qr,xe.length,la,Da,na,_a]);const wl=(0,W.useMemo)(()=>({dragTop:io,dragRight:Uo,dragBottom:Tl,dragLeft:Il,dragTopLeft:ir,dragTopRight:Ll,dragBottomLeft:Zr,dragBottomRight:Tr}),[io,Uo,Tl,Il,ir,Ll,Zr,Tr]),[Oo,nr]=(0,W.useState)(Kt?Xl(M.id):null);Kt&&Oo&&!Oo.isConnected&&nr(null),(0,W.useEffect)(()=>{if(!Kt||Oo)return;const oi=Xl(M.id);if(oi){nr(oi);return}const ji=setInterval(()=>{nr(Xl(M.id))},16);return()=>clearInterval(ji)},[Kt,Oo,M.id]);const[Pa,Dr]=(0,W.useState)(null),mc=(0,W.useMemo)(()=>W.createElement(Rh,{blockWidget:Pa,setBlockWidget:Dr,value:M,parentNode:xi,onRequestDelete:ae,onValueChange:ho,onContainerStylesChange:Ir,onBlockFirstRender:Vs,onAfterBlockRender:Wo,onProseMirrorFirstRender:Xs}),[xi,M,ho,Ir,Vs,ae,Pa,Wo,Xs]);(0,W.useEffect)(()=>{Pa&&Pa.set("editable",Ne)},[Pa,Ne]);const Rl=(0,W.useCallback)(oi=>ee(oi,M.id),[M.id,ee]),vc=(0,W.useMemo)(()=>(0,Wn.rZ)({layout:L,id:M.id,positionArgs:Z}),[L,M.id,Z]);(0,W.useEffect)(()=>{(0,on.eM)(Pa)},[L,Pa]);const[Jr,sr]=(0,W.useState)(!1),$r=(0,T.Ze)(oi=>(0,P.d0m)(oi)===M.id),Bl=(0,W.useCallback)(()=>{Ut&&Rt||(sr(!0),Ue&&_a((0,Ct.XC)(M.id)))},[_a,Ue,M.id,Ut,Rt]),Nl=(0,W.useCallback)(()=>{sr(!1),Ue&&_a((0,Ct.ci)())},[_a,Ue]);(0,W.useEffect)(()=>{sr(!!(Pi.current&&Pi.current.matches(":hover")))},[ot,ze]);const kl=Ka||zs;(0,W.useEffect)(()=>{kl&&ze&&!ot&&!ut&&_a((0,Ct.wv)())},[kl,ot,ut,ze,_a]);const Or=(0,W.useRef)(!1),gd=!qa,so=L[V],Yr={top:so.start.y===0?0:so.start.y-2,bottom:so.end.y+2,left:be?so.start.x:so.start.x-2,right:Ze?so.end.x:so.end.x+2},[Lr,xl]=(0,W.useState)(!1);(0,Kl.f)(oi=>{const ji=oi.getItem(),gs=oi.getItemType();if(!(0,Tt.fx)(gs)||!ji||!gs||ji.fluidEngineId!==U){xl(!1);return}const Os=Ya(ji)?ji.currentPosition:xa(ji)?ji.groupArea:ji.layout[V],Ua={top:Os.start.y,bottom:Os.end.y,left:Os.start.x,right:Os.end.x};xl(Zl(Ua,Yr))});const{isMatchingWidthOfDraggedBlocks:Pr=!1,isMatchingHeightOfDraggedBlocks:ql=!1}=(0,Kl.f)(oi=>{const ji=oi.getItem(),gs=oi.getItemType();if(!(0,Tt.q9)(gs)||!ji||!gs||ji.fluidEngineId!==U||(xa(ji)?ji.selectedBlockIds:[ji.id]).includes(M.id))return;const Ua=xa(ji)?ji.groupArea:ji.layout[V];return{isMatchingWidthOfDraggedBlocks:(0,on.Z8)(Ua,so,Z.numCols),isMatchingHeightOfDraggedBlocks:(0,on.OD)(Ua,so)}})??{},_c=!Za&&!pt&&!Et&&(ot||Lr||jt||At||Jr&&gd||$r||ut||vt&&ut&&De),Ul=(Oi=L[V].stickyScroll)===null||Oi===void 0?void 0:Oi.enabled,Ec=og(Ul,H,M.id,V),yc=Pa==null?void 0:Pa.get("blockName"),nt=(Jr||$r)&&!Za&&(ze?!ot&&!Da:!0)&&!pt,ei=L[V].zIndex+1,Ui=(0,W.useMemo)(()=>Ne?qa?{cursor:"auto"}:{cursor:vt?"pointer":Pe&&V===er?"copy":"grab"}:{},[er,V,Ne,Pe,vt,qa]),rn=(0,W.useMemo)(()=>({zIndex:ei,position:"relative",height:"100%",pointerEvents:qa||pt?"none":"auto"}),[ei,qa,pt]);(0,W.useEffect)(()=>{var oi;(oi=Pi.current)===null||oi===void 0||oi.setAttribute("draggable",pt?"false":"true")},[pt,Pi]);const Hn=(0,Wn.di)(M.id),Gn=(0,Wn.oz)(M.id),Nn=dg(M,to),bs=Ne?oi=>{if(ot||Or.current){Or.current=!1;return}oi.target instanceof HTMLElement&&oi.target.closest((0,Vc.Ud)(Vc.TQ))||(Si.current!==oi.target&&Si.current.focus(),_a((0,Ct.lT)(M.id)))}:null,Bn=Ne?Bl:null,xs=Ne?Nl:null,qs=Ne?oi=>{const ji=(0,on.ye)(oi),Os=oi.target.closest('[data-js="dragHandles"]');ji&&!Os?oi.preventDefault():Or.current=!0}:null;(0,W.useEffect)(()=>{if(!xi||!La.current||!(0,ka.K0)(La.current))return;function oi(gs){const Os=gs;Os.detail.componentId===M.id&&ho({...La.current.value,childrenIds:Os.detail.childrenIds})}function ji(gs){const Os=gs;Os.detail.componentId===M.id&&ho({...La.current.value,gap:Os.detail.gap,breakpointOverrides:{...La.current.value.breakpointOverrides,system_tablet:{...La.current.value.breakpointOverrides.system_tablet,gap:Os.detail.mobileGap}}})}return xi.addEventListener("stack-children-reordered",oi),xi.addEventListener("stack-gap-updated",ji),()=>{xi.removeEventListener("stack-children-reordered",oi),xi.removeEventListener("stack-gap-updated",ji)}},[xi,ho,M.id]);const ca=Ne&&!sn,Lo=W.createElement(W.Fragment,null,ca&&On&&W.createElement(Xh,{className:Hn,handleRefs:wl,label:yc,shouldShowLabel:nt,shouldShowBorder:_c,isFocused:ot,isGlobal:mg(M),isAtLeftEdge:be,isAtRightEdge:Ze,isDraggingAny:Za,isNearMovingBlocks:Lr||jt,isMovingWithKeys:ft,isMultiselected:ut,isPinned:Ul,showGrowEffect:ot&&na,zIndex:ei,isDuplicateKeyDown:Pe,borderStyle:Nn&&!Zc(Gc(Nn))?qc.Dashed:qc.Solid,isInsideStack:Ut?Kt:void 0}),ca&&On&&!Kt&&W.createElement(ng,{className:Hn,isAtLeftEdge:be,isMatchingWidth:Pr||ii,isMatchingHeight:ql||tt,isTopVisible:dt,isBottomVisible:Ot,zIndex:ei}),ca&&On&&(0,dl.Z)()&&W.createElement(mn.Z,{className:it()(Hn,"fluid-engine-original-position"),"data-block-id":M.id,onClick:ca?Rl:null,onFocusCapture:bs,onPointerDown:qs,onPointerEnter:Bn,onPointerLeave:xs,tabIndex:-1,ref:cn,sx:Ui}),W.createElement(mn.Z,{tabIndex:0,onFocusCapture:bs,onKeyDown:ca&&!na?oi=>{if(oi.key==="Tab"){const ji=Si.current.querySelector(".sqs-block-content");ji.inert=!0}}:null,onKeyUp:ca?oi=>{if(oi.key==="Tab"){const ji=Si.current.querySelector(".sqs-block-content");ji.inert=!1}}:null,onPointerDown:qs,className:it()((0,Wn.bH)(M.id),"fluid-engine-block",{"is-being-dragged":Za,"is-being-duplicated":Pe,"is-invisible":!On,"should-remove":!On&&yn}),onTransitionEnd:oi=>{!On&&oi.nativeEvent.propertyName==="opacity"&&zn(!0)},ref:(0,Hc.Z)([Pi,Ec]),onClick:ca?Rl:null,sx:Ui,position:"relative",onPointerEnter:Bn,onPointerLeave:xs,"data-fluid-engine-block":!0,"data-test":M.id,"data-block-id":M.id,"data-drag-handler-id":js,"data-is-selected":ut||At||ot,"data-is-matching-width":Pr||ii,"data-is-matching-height":ql||tt,"data-is-near-dragged-block":Lr,role:"gridcell","aria-selected":ut||At||ot},W.createElement(gl,{css:vc}),W.createElement("div",{className:"fluid-engine-block-contents",style:rn,ref:(0,Hc.Z)([Si,oi=>Pn(oi)])},mc),si?W.createElement(sg,{id:M.id,sectionId:H,startX:L[V].start.x,startY:L[V].start.y,endX:L[V].end.x,endY:L[V].end.y,zIndex:ei}):null),(0,dl.Z)()&&Nn&&ca&&On&&W.createElement(ug,{transforms:Nn,isVisible:!Za&&(ot||Jr),className:Gn}));return Kt?Oo?(0,ks.createPortal)(Lo,Oo):null:Lo},Eg=W.memo(_g);var yg=t(584204),Sg=t(730131),bg=t.n(Sg),Cg=t(923046),Ag=t.n(Cg),Xc=t(66947),Tg=t(166455),ml=t.n(Tg);const Ig=K=>{k.$e(function(L){L.setTag("owner",ml().CONTENT_RENDERING),k.Tb(K)})},Dg={includeDeprecated:!1,templateVersion:Ag().SEVEN_ONE,editingEngine:bg().FLUID_ENGINE},Og=()=>{const K=(0,cl.Z)(),[L,M]=(0,W.useState)((0,Xc.uL)((0,fr.sw)(),(0,fr.SS)())),[U,H]=(0,W.useState)(!0);return(0,W.useEffect)(()=>{e.Z.fetchAll(Dg).then(V=>{K.current&&(M((0,Xc.uL)((0,fr.sw)(),(0,fr.SS)(),V)),H(!1))}).catch(V=>{K.current&&(Ig(new Error("Error merging Website Component Definitions into categories. Omitting website components.",V)),H(!1))})},[K]),{...L,loading:U}};var Lg=t(818943),Pg=t(610509),Mg=t.n(Pg);const Qc=542,Jc=72,$c=230,wg=`all ${$c}ms ease-in-out`,Rg=K=>{const[L,M]=(0,W.useState)(!1),[U,H]=(0,W.useState)(!1);return(0,W.useEffect)(()=>{if(K)M(!0),requestAnimationFrame(()=>{H(!0)});else if(L){H(!1);const V=setTimeout(()=>{M(!1)},$c);return()=>clearTimeout(V)}},[K,L]),{shouldRender:K||L,shouldShowAsOpen:K&&U}},Bg=K=>{const{categories:L,iconConfigs:M,loading:U}=Og();return W.createElement(yg.Z,{...K,categories:L,iconConfigs:M,isLoading:U})},Ng=K=>{let{sectionNode:L,rowGap:M,fluidEngineId:U,onAddBlock:H,onDrop:V}=K;var G,Z;const ee=(0,W.useRef)(null),$=(0,T.zC)(),te=(0,bn.I4)(L),se=(0,T.Ze)(P.Zxu)??"",ae=(0,T.Ze)(P.dml)===te,{shouldRender:oe,shouldShowAsOpen:de}=Rg(ae),ue=()=>{const Pe=parseInt(ts.sizes.sizes[450]),{top:Ne}=L.getBoundingClientRect(),Ue=(0,on.ov)(L);let be=Ue.findIndex(Ze=>{const{top:Ye}=Ze.getBoundingClientRect();if(Ye-Ne>=Pe)return!0});if(Ne<0){let Ze=0;const Ye=Ue.findIndex(Et=>{if(Ze+=Et.clientHeight+M.value,Math.abs(Ne)<=Ze)return!0});be+=Ye}return Math.max(be,0)},xe=Pe=>{const Ne=ue(),be=(0,fr.Un)(Pe,{startY:Ne,startX:1},U).newBlockData;H(be),$((0,Ct.oo)(te)),(0,fa.Y3)(be,"click-button",te,se),setTimeout(()=>{$((0,Ct.lT)((0,Wn.IF)(be)))},0)},De=(G=(0,Ei.wo)())===null||G===void 0?void 0:G.body,Ve=L.closest("section"),[pt,ot]=(0,W.useState)((Ve==null?void 0:Ve.offsetTop)||0);(0,W.useEffect)(()=>{!De||!Ve||ae&&ot(Math.min(Ve.offsetTop,De.offsetHeight-Qc-Jc))},[Ve,De,ae]);const ut=Ve?parseInt(Ve.style.paddingTop||"0",10)+(pt||0):0,At=Pe=>{ee.current&&!ee.current.contains(Pe.target)&&ae&&$((0,Ct.oo)(te))},ze=Pe=>{const Ne=Pe.target;ae&&(0,Lg.Z)(Ne)&&$((0,Ct.oo)(te))};(0,Is.Z)("click",At,{element:((Z=(0,Ei.wo)())===null||Z===void 0?void 0:Z.body)??null}),(0,Is.Z)("click",ze,{element:document.body}),(0,W.useEffect)(()=>{if(Ve){const Pe=Ue=>{let[{isIntersecting:be}]=Ue;!be&&ae&&$((0,Ct.oo)(te))},Ne=new IntersectionObserver(Pe,{threshold:[0,1]});return Ne.observe(Ve),()=>{Ne.disconnect()}}},[Ve,$,te,ae]);const[ft,vt]=(0,W.useState)(null);return(0,W.useEffect)(()=>{if(!De)return;const Pe=document.createElement("div");return Pe.classList.add(Mg().portalWrapper),De.append(Pe),vt(Pe),()=>{De.removeChild(Pe),vt(null)}},[De]),ft&&oe?(0,ks.createPortal)(W.createElement("div",{className:"react-block-selector-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:`calc(100% - ${ut}px)`,paddingTop:`${ut}px`,zIndex:on.KZ,pointerEvents:"none"}},W.createElement(mn.Z,{ref:ee,"data-test":"insert-block-menu",className:"sqs-layout-insert-block-menu",css:{pointerEvents:"all",display:"block",position:"sticky",top:`${Jc}px`,width:"400px",height:`${Qc}px`,visibility:de?"visible":"hidden",opacity:de?1:0,transform:de?"scale(1)":"scale(0.9)",transformOrigin:"center center",transition:wg},sx:{left:4}},W.createElement(mn.Z,{className:"sqs-layout-insert-block-menu-content",sx:{borderRadius:2}},ae&&W.createElement(Bg,{fluidEngineId:U,handleIconSelect:xe,isInFrame:!0,activeSectionNode:L,onDrop:V})))),ft):null},kg=W.memo(Ng),xg=K=>{const L=K.end.y===0?{offset:K.start.y,from:"start"}:{offset:K.end.y,from:"end"};return{xOffset:K.end.x===0?{offset:K.start.x,from:"start"}:{offset:K.end.x,from:"end"},yOffset:L}},qg=K=>{let{offset:L,initialPosition:M,minCoords:U,layoutLimits:H,startYMin:V,numCols:G}=K;const Z=Math.max(M.start.x-(G+1-M.end.x),0),ee=Math.min(M.start.x+M.end.x,G+1),{xOffset:$,yOffset:te}=xg(L),se=(M.end.x+M.start.x)/2,ae=(M.end.y+M.start.y)/2,oe=(U.x+1)/2,de=(U.y+1)/2,ue=(0,f.cloneDeep)(H);ue.start.x=Math.ceil(se-oe),ue.end.x=Math.floor(se+oe),te.offset===0?ue.start.y=M.start.y:(ue.start.y=Math.ceil(ae-de),ue.end.y=Math.floor(ae+de));const xe=ae*2,De=M.start.x+$.offset*($.from==="start"?1:-1),Ve=M.start.y+te.offset*(te.from==="start"?1:-1),pt=M.end.x+$.offset*($.from==="end"?1:-1),ot=M.end.y+te.offset*(te.from==="end"?1:-1),ut={start:{x:De,y:Ve},end:{x:pt,y:ot}};return{nextPosition:{start:{x:(0,f.clamp)(ut.start.x,Z,ue.start.x),y:(0,f.clamp)(ut.start.y,V,ue.start.y)},end:{x:(0,f.clamp)(ut.end.x,ue.end.x,ee),y:(0,f.clamp)(ut.end.y,ue.end.y,xe)}},layoutLimits:ue}},Ug=K=>{let{isResizingEndX:L,isResizingStartX:M,isResizingEndY:U,isResizingStartY:H,originalPosition:V,gridBoundaryRect:G,layoutLimitsRect:Z,offsetInPx:ee}=K,$,te;if(L||M){const se=V.width+ee.x*(M?-2:2),ae=V.left-G.left,oe=G.right-V.right,de=Math.min(ae,oe)*2+V.width,ue=Z.width;$=(0,f.clamp)(se,ue,de)}if(U||H){const se=V.height+ee.y*(H?-2:2),ae=V.top-G.top,oe=G.bottom-V.bottom,de=Math.min(ae,oe)*2+V.height,ue=Z.height;te=(0,f.clamp)(se,ue,de)}return{width:$,height:te}},Fg=K=>{let{dragType:L,originalPosition:M,offsetInPx:U,gridBoundaryRect:H,layoutLimitsRect:V,isSymmetricKeyDown:G}=K,Z=M.width,ee=M.height;if(!L)return{width:Z,height:ee};const $=[Tt.UP,Tt.dJ,Tt.gX].includes(L),te=[Tt.CI,Tt.zh,Tt.fS].includes(L),se=[Tt.lk,Tt.fS,Tt.gX].includes(L),ae=[Tt.EY,Tt.zh,Tt.dJ].includes(L);let oe=M.width,de=M.width;if(G){const De=Ug({isResizingEndX:$,isResizingEndY:se,isResizingStartX:te,isResizingStartY:ae,originalPosition:M,gridBoundaryRect:H,offsetInPx:U,layoutLimitsRect:V});return Z=De.width??Z,ee=De.height??ee,{width:Z,height:ee}}$?(Z=M.width+U.x,oe=H.right-M.left,de=V.right-M.left):te&&(Z=M.width-U.x,oe=M.right-H.left,de=M.right-V.left);let ue=M.height,xe=M.height;return se?(ee=M.height+U.y,ue=H.bottom-M.top,xe=V.bottom-M.top):ae&&(ee=M.height-U.y,ue=M.bottom-H.top,xe=M.bottom-V.top),{width:(0,f.clamp)(Z,de,oe),height:(0,f.clamp)(ee,xe,ue)}};var xo=t(929698),Hv=null;const Wg="block-position-not-applicable",Vv="block-not-in-view",Yc="block-top-out-of-view",eu="block-bottom-out-of-view",jv="block-fully-in-view",Hg={[Tt.oo]:!1,[Tt.vf]:!1,[Tt.RU]:!1,[Tt.GW]:!1,blockInViewPosition:Wg},Vg=".sqs-block { pointer-events: none !important }",{FLUID_ENGINE_BLUE_HEX:jg,FLUID_ENGINE_LIGHT_BLUE_HEX:zg,FLUID_ENGINE_LIGHT_PURPLE_HEX:Kg,FLUID_ENGINE_PURPLE_HEX:Gg}=wn,Zg=K=>{let{blockId:L,width:M,height:U,xOffset:H,yOffset:V,isMultiMoving:G,isMultiResizing:Z,isDuplicating:ee,isResizing:$}=K;const te=(0,W.useRef)(null);return(0,W.useLayoutEffect)(()=>{te.current=(0,xo.HF)(L)??null},[L]),(0,W.useLayoutEffect)(()=>{if(!te.current)return;const se=ee&&!$?te.current.cloneNode(!0):te.current,ae=se.closest(".fluid-engine-block");if(!ae)return;const oe=getComputedStyle(ae).transform,de=oe==="none"?"":oe;return ae.style.transform=`translate(${H}px, ${V}px) ${de}`,ae.style.width=M+"px",ae.style.height=U+"px",ae.style.position="absolute",Z&&se.classList.add("multi-resizing"),()=>{ae.style.transform="",ae.style.width="",ae.style.height="",ae.style.position="",se.classList.remove("multi-resizing")}},[H,V,M,U,G,Z,ee,$]),null},Xg=K=>{let{dragItem:L,deviceKey:M,resizingBlockIndicators:U,isSymmetricKeyDown:H,isGlobal:V}=K;const G=ts.colors.red[400],Z=V?Gg:jg,ee=V?Kg:zg,$="#FFB802",te=Ya(L)?{right:!1,bottom:!1,left:!1,top:!1}:xa(L)?{right:L.isHittingGroupMinWidth&&L.isHittingGroupMinHeight||(0,Tt.hg)(L.dragType)&&L.isHittingGroupMinWidth,bottom:L.isHittingGroupMinWidth&&L.isHittingGroupMinHeight||(0,Tt.x5)(L.dragType)&&L.isHittingGroupMinHeight,left:L.isHittingGroupMinWidth&&L.isHittingGroupMinHeight||(0,Tt._N)(L.dragType)&&L.isHittingGroupMinWidth,top:L.isOutTopSectionBoundary||L.isHittingGroupMinWidth&&L.isHittingGroupMinHeight||(0,Tt.xs)(L.dragType)&&L.isHittingGroupMinHeight}:{right:(0,Tt.hg)(L.dragType)&&L.layout[M].end.x<=L.layoutLimits.end.x,bottom:(0,Tt.x5)(L.dragType)&&L.layout[M].end.y<=L.layoutLimits.end.y,left:(0,Tt._N)(L.dragType)&&L.layout[M].start.x>=L.layoutLimits.start.x,top:(0,Tt.xs)(L.dragType)&&L.layout[M].start.y>=L.layoutLimits.start.y},{[Tt.oo]:se,[Tt.vf]:ae,[Tt.RU]:oe,[Tt.GW]:de,blockInViewPosition:ue}=U,xe=se&&ae&&oe&&de,De=se&&!xe,Ve=ae&&!xe,pt=oe&&!de||oe&&de&&!xe&&ue===eu,ot=de&&!oe||oe&&de&&!xe&&ue===Yc,ut={left:te.left||H&&te.right?G:se?$:ee,right:te.right||H&&te.left?G:ae?$:ee,top:te.top||H&&te.bottom?G:oe?$:ee,bottom:te.bottom||H&&te.top?G:de?$:ee},At={left:te.left||H&&te.right?G:se?$:Z,right:te.right||H&&te.left?G:ae?$:Z,top:te.top||H&&te.bottom?G:oe?$:Z,bottom:te.bottom||H&&te.top?G:de?$:Z};return{showTickAtBottom:ot,showTickAtLeft:De,showTickAtRight:Ve,showTickAtTop:pt,outerBorderColors:ut,innerBorderColors:At}},Qg=K=>{let{dragItem:L,deviceKey:M,resizingBlockIndicators:U,startX:H,startY:V,endX:G,endY:Z,isSymmetricKeyDown:ee,isGlobal:$=!1}=K;const te=(0,Gl.Z)(),se=(0,on.Fc)({start:{x:H,y:V},end:{x:G,y:Z}}),{showTickAtBottom:ae,showTickAtLeft:oe,showTickAtRight:de,showTickAtTop:ue,outerBorderColors:xe,innerBorderColors:De}=Xg({dragItem:L,deviceKey:M,resizingBlockIndicators:U,isSymmetricKeyDown:ee,isGlobal:$});return W.createElement(mn.Z,{style:{gridArea:se,borderWidth:"3px",borderStyle:"solid",borderLeftColor:xe.left,borderRightColor:xe.right,borderTopColor:xe.top,borderBottomColor:xe.bottom,pointerEvents:"none",position:"relative",zIndex:99999}},W.createElement(mn.Z,{style:{position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",borderWidth:"2px",borderStyle:"solid",borderLeftColor:De.left,borderRightColor:De.right,borderTopColor:De.top,borderBottomColor:De.bottom,pointerEvents:"none"}}),W.createElement("div",{className:it()(_s().resizingTickTop,{[_s().showAtLeft]:oe,[_s().showAtRight]:de})}),W.createElement("div",{className:it()(_s().resizingTickBottom,{[_s().showAtLeft]:oe,[_s().showAtRight]:de})}),W.createElement("div",{className:it()(_s().resizingTickLeft,{[_s().showAtTop]:ue,[_s().showAtBottom]:ae})}),W.createElement("div",{className:it()(_s().resizingTickRight,{[_s().showAtTop]:ue,[_s().showAtBottom]:ae})}),te?W.createElement(Wc,{startX:H,startY:V,endX:G,endY:Z}):null)},Jg=K=>{let{item:L,deviceKey:M,blocksById:U,numRows:H,positionArgs:V,offsetInPx:G}=K;var Z;const ee=Ya(L)?L.currentPosition:xa(L)?L.groupArea:L.layout[M],$=jc(L)?L.newBlockData.layout[M]:Ya(L)||xa(L)?(0,on.qY)(L.selectedBlockIds.map(pt=>U[pt].layout[M])):U[L.id].layout[M],te={start:{x:0,y:0},end:{x:V.numCols+1,y:H-1}},se=(0,on.ae)({layout:ee,...V}),ae=(0,on.ae)({layout:$,...V}),oe=(0,on.ae)({layout:te,...V}),de=oe.left-ae.left,ue=oe.top-ae.top,xe=(Z=(0,Ei.V6)())===null||Z===void 0?void 0:Z.scrollY,De=(xe||0)-(L.startingScrollTop?L.startingScrollTop:0),Ve=G?G.y+De:0;return{coordinatesForPreviewPosition:ee,initialPosition:ae,positionArgs:V,previewPosition:se,gridBoundaryRect:oe,minXOffset:de,minYOffset:ue,adjustedYOffset:Ve}},$g=K=>{let{block:L,deviceKey:M,type:U,item:H,positionArgs:V,blockIds:G,previewPosition:Z,offsetInPx:ee,gridBoundaryRect:$,initialClientOffset:te,initialPosition:se,minXOffset:ae,minYOffset:oe,adjustedYOffset:de,isSymmetricKeyDown:ue}=K;if(xa(H)){const vt=H.blockLayoutsById[(0,Wn.IF)(L)][M],Pe=(0,f.cloneDeep)(L.layout[M]),Ne=(0,on.ae)({layout:vt,...V}),Ue=(0,on.ae)({layout:Pe,...V});return{width:Ne.width,height:Ne.height,xOffset:Ne.left-Ue.left,yOffset:Ne.top-Ue.top}}const xe=(0,f.cloneDeep)(L.layout[M]);!Ya(H)&&L.content.value.type===_n.Z.HTML&&(0,Tt.$X)(U)&&(xe.end.y=H.layout[M].end.y);const De=(0,on.ae)({layout:xe,...V}),{width:Ve,height:pt}=Ya(H)?G.length===1?Z:De:Fg({dragType:H.dragType,originalPosition:De,offsetInPx:ee,gridBoundaryRect:$,layoutLimitsRect:(0,on.ae)({layout:H.layoutLimits,...V}),isSymmetricKeyDown:ue});let ot=ee.x;const ut=Ya(H)?$.right-Ve-se.left-4:ue?se.left+se.width/2:se.right-se.left-Ve,At=Ya(H)?$.bottom-pt-se.top:ue?se.top+se.height/2:se.bottom-se.top-pt;if(De.width>Z.width){const vt=(te.x-De.left)/De.width;ot=ee.x+(De.width-Z.width)*vt}const ze=(0,Tt._N)(U)||ue&&(0,Tt.hg)(U)?(0,f.clamp)(ue?(se.width-Ve)/2:ot,ae,ut):0,ft=(0,Tt.xs)(U)||ue&&(0,Tt.x5)(U)?(0,f.clamp)(ue?(se.height-pt)/2:de,oe,At):0;return{width:Ve,height:pt,xOffset:ze,yOffset:ft}},Yg=K=>{let{fluidEngineId:L,deviceKey:M,blocksById:U,numRows:H,positionArgs:V,isDuplicating:G,onPrepareGrid:Z,isSymmetricKeyDown:ee}=K;var $,te,se,ae;const oe=V.numCols,{type:de,item:ue,initialClientOffset:xe,offsetInPx:De,isDragging:Ve,resizingBlockIndicators:pt}=(0,Kl.f)(Et=>{const dt=Et.getItem(),Ot={type:Et.getItemType(),item:dt,initialClientOffset:Et.getInitialClientOffset(),offsetInPx:Et.getDifferenceFromInitialOffset(),isDragging:Et.isDragging(),resizingBlockIndicators:Hg};if(!dt||dt.fluidEngineId!==L||!lg(dt))return Ot;const jt=new Set(xa(dt)?dt.selectedBlockIds:[dt.id]);if(jt.size===0)return Ot;const ii=xa(dt)?dt.groupArea:dt.layout[M];let tt=!1,Kt=!1,Rt=!1;for(const yn of Object.values(U)){if(jt.has((0,Wn.IF)(yn)))continue;const zn=(0,on.Z8)(ii,yn.layout[M],oe),Gi=(0,on.OD)(ii,yn.layout[M]);if(tt=tt||zn,Kt=Kt||Gi,Rt=zn&&Gi,Rt)break}if(!tt&&!Kt)return Ot;const Oi=Array.from(jt.values()).some(yn=>yn in U);if(jt.size===0||!Oi)return Ot;const Si=null,xi=ii.start.x===0,Pn=ii.end.x===oe+1,{heightIndicator:Pi,widthIndicator:cn}=(0,Tt.xi)(de),jn=Pi===Tt.oo&&Kt&&!xi||Pi===Tt.vf&&Kt&&Pn||Rt,as=Pi===Tt.vf&&Kt&&!Pn||Pi===Tt.oo&&Kt&&xi||Rt,Ji=tt&&(cn===Tt.RU||Si===eu&&tt),ni=tt&&(cn===Tt.GW||Si===Yc&&tt),On={[Tt.oo]:jn,[Tt.vf]:as,[Tt.RU]:Ji,[Tt.GW]:ni,blockInViewPosition:Si};return{...Ot,resizingBlockIndicators:On}}),ot=Ve&&Tt.Q2.has(de)&&de!==Tt.SK&&ue.fluidEngineId===L,[ut,At]=(0,W.useState)(!1);(0,W.useEffect)(()=>{if(ot){const Et=requestAnimationFrame(()=>{Z(),At(!0)});return()=>cancelAnimationFrame(Et)}At(!1)},[ot,Z]);const ze=(0,W.useMemo)(()=>{var Et;if(!ue)return!1;if(jc(ue)){const ii=(0,vr.L)(ue.newBlockData.content.value);return!!(ii!=null&&ii.isGlobal)}if(Ya(ue)){var dt;return ue==null||(dt=ue.selectedBlockIds)===null||dt===void 0?void 0:dt.every(ii=>{var tt;const Kt=U[ii],Rt=(0,vr.L)(Kt==null||(tt=Kt.content)===null||tt===void 0?void 0:tt.value);return!!(Rt!=null&&Rt.isGlobal)})}const Ot=!xa(ue)&&U[ue.id];if(!Ot)return!1;const jt=(0,vr.L)(Ot==null||(Et=Ot.content)===null||Et===void 0?void 0:Et.value);return!!(jt!=null&&jt.isGlobal)},[ue,U]);if(!ot||!ut||!(0,Tt.fx)(de))return null;const ft=Ya(ue)||xa(ue)?ue.selectedBlockIds:[ue.id],{coordinatesForPreviewPosition:vt,initialPosition:Pe,previewPosition:Ne,gridBoundaryRect:Ue,minXOffset:be,minYOffset:Ze,adjustedYOffset:Ye}=Jg({item:ue,deviceKey:M,blocksById:U,numRows:H,positionArgs:V,offsetInPx:De});return W.createElement(W.Fragment,null,W.createElement(gl,{css:Vg}),W.createElement(Qg,{dragItem:ue,deviceKey:M,resizingBlockIndicators:pt,startX:vt==null||($=vt.start)===null||$===void 0?void 0:$.x,startY:vt==null||(te=vt.start)===null||te===void 0?void 0:te.y,endX:vt==null||(se=vt.end)===null||se===void 0?void 0:se.x,endY:vt==null||(ae=vt.end)===null||ae===void 0?void 0:ae.y,isSymmetricKeyDown:ee,isGlobal:ze}),ft.map(Et=>{const dt=U[Et];if(!dt||!De||!xe)return null;const{width:Ot,height:jt,xOffset:ii,yOffset:tt}=$g({block:dt,deviceKey:M,type:de,item:ue,positionArgs:V,blockIds:ft,previewPosition:Ne,offsetInPx:De,gridBoundaryRect:Ue,initialClientOffset:xe,initialPosition:Pe,minXOffset:be,minYOffset:Ze,adjustedYOffset:Ye,isSymmetricKeyDown:ee});return W.createElement(Zg,{isDuplicating:G,isResizing:!Ya(ue),blockId:Et,width:Ot,height:jt,xOffset:ii,yOffset:tt,isMultiMoving:ft.length>1,isMultiResizing:xa(ue),key:Et})}))},ep=W.memo(Yg);var tp=t(235246),qo=t.n(tp);const ip=K=>{let{rowId:L,rowSize:M,columnWidth:U,columnGap:H,isVisible:V,gutterWidth:G}=K;const[Z,ee]=(0,W.useState)(M),[$,te]=(0,W.useState)();(0,W.useEffect)(()=>{if(V&&$){const De=Mc()(ot=>{ee(ot[0].contentRect.height)},30),Ve=new kr.d(De),{height:pt}=$.getBoundingClientRect();return ee(pt),Ve.observe($),()=>{De.cancel(),Ve.unobserve($)}}},[$,V]);const se=1,ae=ts.colors.gray[600],oe=`${ts.colors.gray[900]}40`,de=Math.max(0,U+H),ue=Z-se,xe=Math.max(0,U-se);return W.createElement("div",{ref:te,className:it()(qo().gridIndicator,qo().gridRow,on.JN,L),"data-test":on.JN},W.createElement("svg",{style:{height:"100%",width:`calc(100% - ${G*2-1}px)`,position:"absolute",left:`${G}px`},xmlns:"http://www.w3.org/2000/svg"},W.createElement("defs",null,W.createElement("pattern",{id:L,height:"100%",width:`${de}px`,patternUnits:"userSpaceOnUse"},W.createElement("rect",{height:`${ue}px`,width:`${xe}px`,x:"0.5",y:"0.5",rx:"3",strokeWidth:se,stroke:ae,fill:oe}))),W.createElement("rect",{width:"100%",height:"100%",fill:`url(#${L})`})))},np=(K,L)=>`
  .${K} {
    grid-area: ${(0,on.Fc)({start:{x:0,y:L},end:{x:-3,y:L-1}})}}
`,{DESKTOP:sp}=wn.FluidEngineBreakpoints,ap=K=>{let{containerId:L,columnWidth:M,numCols:U,numRows:H,columnGap:V,rowSize:G,deviceKey:Z,isVisible:ee,gutterWidth:$,sectionNode:te,sectionId:se,isFirstSection:ae,isMovingBlockCentered:oe,isSelectedAreaCentered:de,isDragging:ue,isSectionHovered:xe}=K;const De=[];let Ve="";for(let Pe=0;Pe<H;Pe++){const Ne=`rows-${L}-${Pe}`;De.push(W.createElement(ip,{key:Pe,rowId:Ne,rowSize:G,columnGap:V,columnWidth:M,isVisible:ee,gutterWidth:$})),Ve+=np(Ne,Pe)}for(let Pe=0;Pe<U+2;Pe++)De.push(W.createElement("div",{className:it()(qo().gridIndicator,on.gM),key:`columns-${Pe}`,style:{gridArea:`1/${Pe+1}/-1/${Pe+1}`}}));const pt=W.createElement(gl,{css:Ve}),ot=()=>{if(!ae||!te)return"0px";const Pe=parseFloat(te.style.paddingBottom);return isNaN(Pe)?te.style.paddingTop:parseFloat(te.style.paddingTop)-Pe+"px"},ut=()=>{if(!ae||!te)return"100%";const Pe=te.offsetHeight,Ne=parseFloat(te.style.paddingTop);let Ue=parseFloat(te.style.paddingBottom);return isNaN(Ue)&&(Ue=0),Pe-Ne+Ue+"px"},At=oe&&ee,ze=(0,W.useCallback)(Pe=>(0,P.HL5)(Pe,se),[se]),ft=(0,T.Ze)(ze),vt=te?(0,ks.createPortal)(W.createElement("div",{key:"middle-col",className:it()(qo().gridIndicator,qo().middleColumn,{[qo().defaultGrid]:ee&&Z===sp&&(ft?xe:!0),[qo().isBlockCentered]:At}),style:{top:ot(),height:ut()},"data-test":"center-alignment-guide","data-centered":ue?At:de}),te):null;return W.createElement(W.Fragment,null,pt,De,vt)},op=W.memo(ap),{FLUID_ENGINE_BLUE_HEX:rp,FLUID_ENGINE_LIGHT_BLUE_HEX:lp,FLUID_ENGINE_LIGHT_PURPLE_HEX:cp,FLUID_ENGINE_PURPLE_HEX:up}=wn,dp={pointerEvents:"none"},Co=(0,xc.r)();function hp(K,L){return K.start.x!==L.start.x||K.start.y!==L.start.y||K.end.x!==L.end.x||K.end.y!==L.end.y}const gp=(0,W.forwardRef)((K,L)=>{let{selectedBlockIds:M,fluidEngineId:U,onDrop:H,isMultiselectKeyDown:V,isDuplicateKeyDown:G,getMultiselectionArea:Z,blocksById:ee,onMultiResizeEnd:$,containerNode:te,unstretchedRowHeight:se,rowGapSize:ae,numCols:oe}=K;const de=(0,W.useMemo)(()=>M==null?void 0:M.every(si=>{const sn=ee[si].content.value,En=(0,vr.L)(sn);return En==null?void 0:En.isGlobal}),[M,ee]),[ue,xe]=(0,W.useState)(()=>Z()),De=(0,W.useMemo)(()=>{const si={};for(let En=0;En<M.length;En++){var sn;const Hs=M[En],os=(sn=ee[Hs])===null||sn===void 0?void 0:sn.layout;os&&(si[Hs]=os)}return si},[M,ee]),Ve=(0,W.useMemo)(()=>{const si={};for(let En=0;En<M.length;En++){var sn;const Hs=M[En],os=(sn=ee[Hs])===null||sn===void 0?void 0:sn.content.value;if(os){const va=(0,ko.r2)(te==null?void 0:te.querySelector(`.fe-block-${Hs} .sqs-block`),os,se,ae)||1;si[Hs]=va}}return si},[M,ee,te,se,ae]);(0,W.useEffect)(()=>{xe(si=>{const sn=Z();return hp(si,sn)?sn:si})},[Z]);const[{isDragging:pt},ot,ut]=(0,ja.c)(()=>({type:Tt.wm,item:()=>{var si;return{fluidEngineId:U,currentPosition:(0,f.cloneDeep)(ue),selectedBlockIds:M,startingScrollTop:(si=(0,Ei.V6)())===null||si===void 0?void 0:si.scrollY}},end:H,collect:si=>({isDragging:!!si.isDragging()})}),[ue,M,H]),At=(0,W.useMemo)(()=>(0,on.Fc)(ue),[ue]),ze=(0,W.useMemo)(()=>V?{gridArea:At,...dp}:{gridArea:At,...{cursor:G?"copy":"grab"}},[At,G,V]),ft=(0,W.useCallback)(si=>{L&&"current"in L&&(L.current=si),ot(si)},[L,ot]),vt=ue.end.x===oe+1,Pe=ue.start.x===0,[{isDraggingRight:Ne},Ue,be]=(0,ja.c)(()=>({type:Tt.iA,item:{fluidEngineId:U,selectedBlockIds:M,dragType:Tt.iA,groupArea:Z(),blockLayoutsById:De,blockMinHeightById:Ve,isHittingGroupMinHeight:!1,isHittingGroupMinWidth:!1,isOutTopSectionBoundary:!1},end:$,collect:si=>({isDraggingRight:!!si.isDragging()})}),[M,$]),[{isDraggingLeft:Ze},Ye,Et]=(0,ja.c)(()=>({type:Tt.Gv,item:{fluidEngineId:U,selectedBlockIds:M,dragType:Tt.Gv,groupArea:Z(),blockLayoutsById:De,blockMinHeightById:Ve,isHittingGroupMinHeight:!1,isHittingGroupMinWidth:!1,isOutTopSectionBoundary:!1},end:$,collect:si=>({isDraggingLeft:!!si.isDragging()})}),[M,$]),[{isDraggingTop:dt},Ot,jt]=(0,ja.c)(()=>({type:Tt.Vr,item:{fluidEngineId:U,selectedBlockIds:M,dragType:Tt.Vr,groupArea:Z(),blockLayoutsById:De,blockMinHeightById:Ve,isHittingGroupMinHeight:!1,isHittingGroupMinWidth:!1,isOutTopSectionBoundary:!1},end:$,collect:si=>({isDraggingTop:!!si.isDragging()})}),[M,$]),[{isDraggingBottom:ii},tt,Kt]=(0,ja.c)(()=>({type:Tt.Cr,item:{fluidEngineId:U,selectedBlockIds:M,dragType:Tt.Cr,groupArea:Z(),blockLayoutsById:De,blockMinHeightById:Ve,isHittingGroupMinHeight:!1,isHittingGroupMinWidth:!1,isOutTopSectionBoundary:!1},end:$,collect:si=>({isDraggingBottom:!!si.isDragging()})}),[M,$]),[{isDraggingTopLeft:Rt},Oi,Si]=(0,ja.c)(()=>({type:Tt.xY,item:{fluidEngineId:U,selectedBlockIds:M,dragType:Tt.xY,groupArea:Z(),blockLayoutsById:De,blockMinHeightById:Ve,isHittingGroupMinHeight:!1,isHittingGroupMinWidth:!1,isOutTopSectionBoundary:!1},end:$,collect:si=>({isDraggingTopLeft:!!si.isDragging()})}),[M,$]),[{isDraggingTopRight:xi},Pn,Pi]=(0,ja.c)(()=>({type:Tt.zk,item:{fluidEngineId:U,selectedBlockIds:M,dragType:Tt.zk,groupArea:Z(),blockLayoutsById:De,blockMinHeightById:Ve,isHittingGroupMinHeight:!1,isHittingGroupMinWidth:!1,isOutTopSectionBoundary:!1},end:$,collect:si=>({isDraggingTopRight:!!si.isDragging()})}),[M,$]),[{isDraggingBottomLeft:cn},jn,as]=(0,ja.c)(()=>({type:Tt.tQ,item:{fluidEngineId:U,selectedBlockIds:M,dragType:Tt.tQ,groupArea:Z(),blockLayoutsById:De,blockMinHeightById:Ve,isHittingGroupMinHeight:!1,isHittingGroupMinWidth:!1,isOutTopSectionBoundary:!1},end:$,collect:si=>({isDraggingBottomLeft:!!si.isDragging()})}),[M,$]),[{isDraggingBottomRight:Ji},ni,On]=(0,ja.c)(()=>({type:Tt.s_,item:{fluidEngineId:U,selectedBlockIds:M,dragType:Tt.s_,groupArea:Z(),blockLayoutsById:De,blockMinHeightById:Ve,isHittingGroupMinHeight:!1,isHittingGroupMinWidth:!1,isOutTopSectionBoundary:!1},end:$,collect:si=>({isDraggingBottomRight:!!si.isDragging()})}),[M,$]);(0,W.useEffect)(()=>{ut(Co),be(Co),Et(Co),jt(Co),Kt(Co),Si(Co),Pi(Co),as(Co),On(Co)},[ut,be,Et,jt,Kt,Si,Pi,as,On]);const yn=pt||Ne||Ze||dt||ii||Rt||xi||cn||Ji,zn=de?cp:lp,Gi=de?up:rp;return W.createElement(mn.Z,{ref:ft,borderStyle:"solid",borderWidth:"3px",borderColor:zn,opacity:yn?0:1,position:"relative",sx:ze,zIndex:999999,"data-test":"fluid-engine-multiselected-area"},W.createElement(mn.Z,{position:"absolute",top:"-2px",right:"-2px",bottom:"-2px",left:"-2px",borderStyle:"solid",borderWidth:"2px",borderColor:Gi}),W.createElement("div",{className:it()(Dn().handlesWrapper,{[Dn().hideHandles]:yn})},W.createElement("div",{className:it()(Dn().topLeftResizeHandle,{[Dn().shiftedToRight]:Pe}),ref:Oi,"data-test":"fluid-engine-multiselect-resize-top-left"},W.createElement(ra,{isGlobal:de})),W.createElement("div",{className:Dn().topResizeHandle,"data-test":"fluid-engine-multiselect-resize-top",ref:Ot},W.createElement(ra,{isGlobal:de})),W.createElement("div",{className:it()(Dn().topRightResizeHandle,{[Dn().shiftedToLeft]:vt}),"data-test":"fluid-engine-resize-top-right",ref:Pn},W.createElement(ra,{isGlobal:de})),W.createElement("div",{className:it()(Dn().rightResizeHandle,{[Dn().shiftedToLeft]:vt}),"data-test":"fluid-engine-multiselect-resize-right",ref:Ue},W.createElement(ra,{isGlobal:de})),W.createElement("div",{className:it()(Dn().bottomRightResizeHandle,{[Dn().shiftedToLeft]:vt}),ref:ni,"data-test":"fluid-engine-multiselect-resize-bottom-right"},W.createElement(ra,{isGlobal:de})),W.createElement("div",{className:Dn().bottomResizeHandle,"data-test":"fluid-engine-multiselect-resize-bottom",ref:tt},W.createElement(ra,{isGlobal:de})),W.createElement("div",{className:it()(Dn().bottomLeftResizeHandle,{[Dn().shiftedToRight]:Pe}),ref:jn,"data-test":"fluid-engine-multiselect-resize-bottom-left"},W.createElement(ra,{isGlobal:de})),W.createElement("div",{className:it()(Dn().leftResizeHandle,{[Dn().shiftedToRight]:Pe}),"data-test":"fluid-engine-multiselect-resize-left",ref:Ye},W.createElement(ra,{isGlobal:de}))))});var pp=t(976003),fp=t.n(pp),mp=t(689954),vp=t(556472),qr=t(145332),ia=t(101382);const{SPACE_AROUND_FRAME_CLASS:_p}=cr,Ep=W.memo(function(K){let{editorUINode:L,containerNode:M,sectionNode:U,onSelectionStart:H,onSelectionUpdate:V,onSelectionEnd:G}=K;const Z=(0,W.useRef)(null),ee=(0,W.useContext)(mp.Z),[$,te]=(0,W.useState)(!1),se=(0,W.useRef)(H),ae=(0,W.useRef)(V),oe=(0,W.useRef)(G),de=(0,W.useRef)(ee);(0,W.useLayoutEffect)(()=>{de.current=ee,se.current=H,oe.current=G,ae.current=V},[H,G,V,ee]);const[ue,xe]=(0,W.useState)(null);(0,W.useEffect)(()=>{let Ve=null,pt=!1;const ot=()=>{pt?oe.current(Ve):oe.current(null),Ve=null,pt=!1,te(!1),xe(null)};function ut(ze){let{clientX:ft,clientY:vt}=ze;te(!0);const Pe=M.ownerDocument.documentElement.scrollTop,Ne={x:ft,y:vt},Ue={...Ne},be=(0,qr.Z)({containerNode:M}),Ze=Ot=>{let{mouseX:jt,mouseY:ii}=Ot;if(!be)return;const tt=jt-Ne.x,Kt=ii-Ne.y;if(!pt){if(Math.sqrt(Math.pow(tt,2)+Math.pow(Kt,2))<30)return;se.current()}pt=!0;const Rt=M.ownerDocument.documentElement.scrollTop-Pe,Oi=tt<0,Si=Kt+Rt<0,xi=Oi?Ne.x+tt:Ne.x,Pn=Math.abs(tt),Pi=Math.abs(Kt+Rt),cn=Si?Ne.y+Kt:Ne.y-Rt;Z.current&&(Z.current.style.top=`${cn}px`,Z.current.style.height=`${Pi}px`,Z.current.style.left=`${xi}px`,Z.current.style.width=`${Pn}px`);const jn=xi+Pn,as=cn+Pi,Ji=de.current.left,ni=Ji+de.current.width;if(!(xi<=ni&&jn>Ji))return;const yn={left:xi-Ji,top:cn-ia.Sf+Rt,right:jn-Ji,bottom:as-ia.Sf+Rt},zn=(0,vp.Mc)(yn,be);fp()(zn,Ve)||(Ve=zn,ae.current(zn))};xe({mousemove:Ot=>{if(Ot.buttons===0){ot();return}const jt=Ot.target.ownerDocument!==document;Ue.x=Ot.clientX+(jt?de.current.left:0),Ue.y=Ot.clientY+(jt?ia.Sf:0),Ze({mouseX:Ue.x,mouseY:Ue.y})},mouseup:Ot=>{pt&&(Ot.preventDefault(),Ot.stopPropagation()),ot()},scroll:()=>{Ze({mouseX:Ue.x,mouseY:Ue.y})}})}const At=ze=>{const{button:ft,target:vt,clientX:Pe,clientY:Ne}=ze;if(ft!==0)return;const Ue=vt,be=Ue.ownerDocument===document,Ze=be&&Ue.closest(".js-device-view-frame"),Ye=be?`.${Ts.h6}`:"section",Et=be?L:U,dt=Ue.closest(Ye);if(!dt&&!Ze)return;if(Ze){const tt=!U.previousElementSibling,Kt=!U.nextElementSibling,Rt=L.getBoundingClientRect();if(!(tt&&Ne-ia.Sf<Rt.bottom)&&!(Kt&&Ne-ia.Sf>Rt.top)){oe.current(null);return}}if(dt&&!Et.contains(Ue)){oe.current(null);return}const jt=be&&Ue.closest(`.${_p}`);(be?!jt&&!Ze:M!==Ue&&M.contains(Ue))||ut({clientX:Pe+(be?0:de.current.left),clientY:Ne+(be?0:ia.Sf)})};return L&&document.addEventListener("mousedown",At),U.ownerDocument.addEventListener("mousedown",At),()=>{U.ownerDocument.removeEventListener("mousedown",At),L&&document.removeEventListener("mousedown",At)}},[L,U,M]),(0,W.useEffect)(()=>{if(!ue)return;const Ve=ue.mousemove,pt=ue.mouseup,ot=ue.scroll,ut=M.ownerDocument;return document.addEventListener("mousemove",Ve),document.addEventListener("mouseup",pt,!0),ut.addEventListener("mousemove",Ve),ut.addEventListener("mouseup",pt,!0),ut.addEventListener("scroll",ot),()=>{document.removeEventListener("mousemove",Ve),document.removeEventListener("mouseup",pt,!0),ut.removeEventListener("mousemove",Ve),ut.removeEventListener("mouseup",pt,!0),ut.removeEventListener("scroll",ot)}},[M,ue]);const{colors:De}=(0,hl.F)();return $?(0,ks.createPortal)(W.createElement("div",{"data-selection-box":!0,"data-test":"multiselection-target-box",ref:Z,style:{outlineColor:De.blue[400],outlineWidth:"3px",outlineStyle:"solid",position:"fixed",zIndex:999999}}),document.body):null});var Xv=t(889657),Ql=t(682369),tu=t(369751);function iu(K){const L=K.closest("section"),M=K.closest(".content-wrapper");if(!L||!M)return()=>{};const U=L.getBoundingClientRect(),H=K.getBoundingClientRect(),V=L.style.paddingTop,G=L.style.paddingBottom;L.style.paddingTop=`${H.top-U.top}px`,L.style.paddingBottom=`${U.bottom-H.bottom}px`;const Z=M.style.paddingTop,ee=M.style.paddingBottom;M.style.paddingTop="0",M.style.paddingBottom="0";const $="editmode-changing-rowcount";return L.classList.toggle($,!0),function(){M.style.paddingTop=Z,M.style.paddingBottom=ee,L.style.paddingTop=V,L.style.paddingBottom=G,L.classList.toggle($,!1)}}function Jl(K){let{dragType:L,clientOffset:M,initialClientOffset:U,initialPosition:H,unstretchedRowHeight:V,rowGapSize:G,numCols:Z,columnGapSize:ee,columnWidth:$,containerWidth:te,gutterWidth:se,scrollDiff:ae}=K;const oe=(0,on.ae)({layout:H,numCols:Z,unstretchedRowHeight:V,rowGap:G,columnWidth:$,columnGap:ee,gutterWidth:se}),de=M.x-U.x,ue=(0,f.clamp)(de,(0,Tt._N)(L)&&oe.left>0?se-oe.left:-1/0,(0,Tt.hg)(L)&&oe.right<te?te-se-oe.right:1/0),xe=M.x-U.x-ue,De=ue+xe,Ve=De<0?-1:1;let pt=De<0?1:0,ot=Math.floor((ue+Ve*$/2)/(ee+$));const ut=L!==Tt.qv.BLOCK_DRAG_IN_FROM_SELECTOR&&oe.right===te&&de<0,At=L!==Tt.qv.BLOCK_DRAG_IN_FROM_SELECTOR&&oe.left===0&&de>0;if(ut){const be=oe.right+ue<te-se/2,Ze=oe.right+ue<te-se,Ye=be?-1:0;pt=Ze?1:0;const Et=Ze?Math.floor((ue+se+Ve*$/2)/(ee+$)):0;ot=Ye+Et}if(At){const be=oe.left+ue>se/2,Ze=oe.left+ue>se,Ye=be?1:0,Et=Ze?Math.floor((ue-se+Ve*$/2)/(ee+$)):0;ot=Ye+Et}const ze=Math.abs(xe)>se/2?Ve:0,ft=ot+ze+pt,vt=M.y+(ae||0)-U.y,Pe=vt<0?-1:1,Ne=vt<0?1:0,Ue=Math.floor((vt+Pe*V/2)/(G+V))+Ne;return{start:{x:(0,Tt._N)(L)?ft:0,y:(0,Tt.xs)(L)?Ue:0},end:{x:(0,Tt.hg)(L)?ft:0,y:(0,Tt.x5)(L)?Ue:0}}}const nu=K=>{let{initialPosition:L,offset:M,numCols:U}=K;const H=L.end.y-L.start.y+1,V=L.end.x-L.start.x+1,G=U-V+2,Z=(0,f.clamp)(L.start.x+M.start.x,0,G),ee=Math.max(L.start.y+M.start.y,0);return{start:{x:Z,y:ee},end:{x:Z+V-1,y:ee+H-1}}},su=K=>{let{initialPosition:L,minCoords:M,offset:U,numCols:H,startYMin:V,isSymmetricKeyDown:G}=K;const Z={start:{x:L.end.x-M.x,y:L.end.y-M.y},end:{x:L.start.x+M.x,y:L.start.y+M.y}},ee=L.start.x+U.start.x,$=L.start.y+U.start.y,te=L.end.x+U.end.x,se=L.end.y+U.end.y;return G?qg({offset:U,initialPosition:L,minCoords:M,layoutLimits:Z,numCols:H,startYMin:V}):{nextPosition:{start:{x:(0,f.clamp)(ee,0,Z.start.x),y:(0,f.clamp)($,V,Z.start.y)},end:{x:(0,f.clamp)(te,Z.end.x,H+1),y:Math.max(se,Z.end.y)}},layoutLimits:Z}};function yp(K){let{dragType:L,initialPosition:M}=K;const U={x:0,y:0};switch(L){case Tt.Cr:U.x=M.start.x,U.y=M.start.y;break;case Tt.Gv:U.x=M.end.x,U.y=M.end.y;break;case Tt.iA:U.x=M.start.x,U.y=M.start.y;break;case Tt.Vr:U.x=M.end.x,U.y=M.end.y;break;case Tt.xY:U.x=M.end.x,U.y=M.end.y;break;case Tt.zk:U.x=M.start.x,U.y=M.end.y;break;case Tt.tQ:U.x=M.end.x,U.y=M.start.y;break;case Tt.s_:U.x=M.start.x,U.y=M.start.y;break}return U}function au(K){let{dragType:L,offsetXDelta:M,offsetYDelta:U,originGroupArea:H,initialPosition:V,updatedGroupEndY:G}=K;const Z=(0,f.cloneDeep)(H),ee=V.end.x-V.start.x+M,$=V.end.y-V.start.y+U;switch(L){case Tt.Cr:Z.end.y=$+V.start.y;break;case Tt.Gv:Z.start.x=V.end.x-ee;break;case Tt.iA:Z.end.x=ee+V.start.x;break;case Tt.Vr:Z.start.y=V.end.y-$;break;case Tt.xY:Z.start.y=V.end.y-$,Z.start.x=V.end.x-ee;break;case Tt.zk:Z.end.x=ee+V.start.x,Z.start.y=V.end.y-$;break;case Tt.tQ:Z.end.y=$+V.start.y,Z.start.x=V.end.x-ee;break;case Tt.s_:Z.end.y=$+V.start.y,Z.end.x=ee+V.start.x;break}return Z.end.y!==G&&(Z.end.y=G),Z}function Sp(K){let{selectedBlockIds:L,blockLayoutsById:M,deviceKey:U}=K;return(0,f.cloneDeep)(L).sort((V,G)=>{const Z=M[V][U],ee=Math.hypot(Z.start.x,Z.start.y),$=M[G][U],te=Math.hypot($.start.x,$.start.y);return ee-te})}function ou(K){let{anchorPoint:L,blocksById:M,deviceKey:U,dragType:H,initialGroupWidth:V,initialGroupHeight:G,initialPosition:Z,offsetXDelta:ee,offsetYDelta:$,selectedBlockIds:te,blockMinHeightById:se,unstretchedRowHeight:ae,rowGapSize:oe,containerNode:de}=K;const ue={};let xe=!1,De=!1;const Ve=[],pt=[],ot=[],ut=[];let At=(0,Tt.xs)(H)?Z.end.y:G+$+Z.start.y;for(let ze=0;ze<te.length;ze++){const ft=te[ze],vt=M[ft].content.value.type,Pe=M[ft].content.value,Ne=(0,f.cloneDeep)(M[ft].layout[U]),Ue=(0,f.cloneDeep)(M[ft].layout),{start:be,end:Ze}=(0,f.cloneDeep)(Ne);be.x=be.x-L.x,be.y=be.y-L.y,Ze.x=Ze.x-L.x,Ze.y=Ze.y-L.y;const Ye=(ee+V+1)/(V+1),Et=($+G+1)/(G+1);be.x=be.x*Ye,be.y=be.y*Et,Ze.x=Ze.x*Ye,Ze.y=Ze.y*Et,be.x=be.x+L.x,be.y=be.y+L.y,Ze.x=Ze.x+L.x,Ze.y=Ze.y+L.y,be.x=Math.round(be.x),be.y=Math.round(be.y),Ze.x=Math.round(Ze.x),Ze.y=Math.round(Ze.y);const dt=Ye-Math.floor(Ye)>.5,Ot=Et-Math.floor(Et)>.5,jt=Ye<1,ii=Et<1,tt=Math.floor(Ye-1),Kt=Math.ceil(Ye-1),Rt=Math.floor(Et-1),Oi=Math.ceil(Et-1),Si=!dt&&tt<0,xi=!Ot&&Rt<0;switch(H){case Tt.Cr:ii?xi?Ze.y+=Rt:be.y-=Ot?Oi:Rt:Ze.y+=Ot?Oi:Rt;break;case Tt.Gv:jt?Si?be.x-=tt:Ze.x+=dt?Kt:tt:be.x-=dt?Kt:tt;break;case Tt.iA:jt?Si?Ze.x+=tt:be.x-=dt?Kt:tt:Ze.x+=dt?Kt:tt;break;case Tt.Vr:ii?xi?be.y-=Rt:Ze.y+=Ot?Oi:Rt:be.y-=Ot?Oi:Rt;break;case Tt.xY:ii?xi?be.y-=Rt:Ze.y+=Ot?Oi:Rt:be.y-=Ot?Oi:Rt,jt?Si?be.x-=tt:Ze.x+=dt?Kt:tt:be.x-=dt?Kt:tt;break;case Tt.zk:ii?xi?be.y-=Rt:Ze.y+=Ot?Oi:Rt:be.y-=Ot?Oi:Rt,jt?Si?Ze.x+=tt:be.x-=dt?Kt:tt:Ze.x+=dt?Kt:tt;break;case Tt.tQ:ii?xi?Ze.y+=Rt:be.y-=Ot?Oi:Rt:Ze.y+=Ot?Oi:Rt,jt?Si?be.x-=tt:Ze.x+=dt?Kt:tt:be.x-=dt?Kt:tt;break;case Tt.s_:ii?xi?Ze.y+=Rt:be.y-=Ot?Oi:Rt:Ze.y+=Ot?Oi:Rt,jt?Si?Ze.x+=tt:be.x-=dt?Kt:tt:Ze.x+=dt?Kt:tt;break}const Pn=(0,tu.Z)(Pe)||1,Pi=Ze.x-be.x+1<Pn,cn=Math.abs(Ze.x-be.x+1-Pn);Pi&&((0,Tt._N)(H)?be.x=be.x-cn:Ze.x=Ze.x+cn,ot.push({id:ft,widthDelta:cn,type:"reach-min-width"}));const jn=se[ft],as=Ze.y-be.y+1<jn,Ji=Math.abs(Ze.y-be.y+1-jn);if(as&&((0,Tt.xs)(H)?be.y=be.y-Ji:Ze.y=Ze.y+Ji,ut.push({id:ft,heightDelta:Ji,type:"reach-min-height"})),Ye<1&&Tt.HM.has(vt)||Ye>1&&Tt.tl.has(vt)){const ni=Ze.y-be.y+1,On=(0,ko.i0)(de==null?void 0:de.querySelector(`.fe-block-${ft} .sqs-block`),Pe,ae,oe);On>ni&&(Ze.y+=On-ni,pt.push({id:ft,coordinates:{start:{x:be.x,y:be.y},end:{x:Ze.x,y:Ze.y}},yDelta:On-ni,type:"max-height-change"}))}Ue[U].start.x=be.x,Ue[U].start.y=be.y,Ue[U].end.x=Ze.x,Ue[U].end.y=Ze.y,ue[ft]=Ue}for(;pt.length>0;){const ze=pt.shift();if(ze){const ft=ze.id;Ve.includes(ft)||Ve.push(ft);const vt=ze.type==="max-height-change"?ze.coordinates.end.y-ze.yDelta+1:ze.coordinates.start.y,Pe=Sp({selectedBlockIds:te,blockLayoutsById:ue,deviceKey:U});for(let Ne=0;Ne<Pe.length;Ne++){const Ue=Pe[Ne],be=ue[Ue][U];if(ft!==Ue&&be.start.y>=vt&&Zl({top:vt,bottom:ze.coordinates.end.y,left:ze.coordinates.start.x,right:ze.coordinates.end.x},{top:be.start.y,bottom:be.end.y,left:be.start.x,right:be.end.x})){let Ze=ze.yDelta;if(pt.filter(dt=>dt.id===Ue).length>0){const dt=(0,f.findLastIndex)(pt,Ot=>Ot.id===Ue);pt.splice(dt,1),Ze=ze.coordinates.end.y-be.start.y+1}const Ye=be.start.y+Ze,Et=be.end.y+Ze;ue[Ue][U].start.y=Ye,ue[Ue][U].end.y=Et,pt.push({id:Ue,coordinates:ue[Ue][U],yDelta:Ze,type:"max-height-push-down"})}}}}for(;ot.length>0&&!xe;){const ze=ot.shift();if(ze){const ft=ze.id,Pe=ue[ft][U];if(ze.type==="reach-min-width")if((0,Tt._N)(H)){const Ue=Z.end.x-(V+ee);if(Pe.start.x<Ue){const be=Ue-Pe.start.x,Ze=Pe.end.x+be;Ze>Z.end.x?xe=!0:(ue[ft][U].start.x=Ue,ue[ft][U].end.x=Ze)}}else{const Ue=V+ee+Z.start.x;if(Pe.end.x>Ue){const be=Pe.end.x-Ue,Ze=Pe.start.x-be;Ze<Z.start.x?xe=!0:(ue[ft][U].start.x=Ze,ue[ft][U].end.x=Ue)}}}}for(let ze=0;ze<te.length;ze++){const ft=te[ze],vt=ue[ft][U].end.y;Ve.includes(ft)&&vt>At&&(At=vt)}for(;ut.length>0&&!De;){const ze=ut.shift();if(ze){const ft=ze.id,Pe=ue[ft][U];if(ze.type==="reach-min-height")if((0,Tt.xs)(H)){const Ue=Z.end.y-(G+$);if(Pe.start.y<Ue){const be=Ue-Pe.start.y,Ze=Pe.end.y+be;Ze>At?De=!0:(ue[ft][U].end.y=Ze,ue[ft][U].start.y=Ue)}}else{const Ue=At;if(Pe.end.y>Ue){const be=Pe.end.y-Ue,Ze=Pe.start.y-be;Ze<Z.start.y?De=!0:(ue[ft][U].start.y=Ze,ue[ft][U].end.y=Ue)}}}}return{newBlockLayoutsById:ue,isHittingGroupMinWidth:xe,isHittingGroupMinHeight:De,updatedGroupEndY:At}}const bp=[...Tt._O],Cp=[...Tt.eJ],Ap=[...Tt.em],ru=60;function lu(K){return"newBlockData"in K}const cu=K=>{let{monitor:L,fluidEngineId:M}=K;var U;return L.isOver()&&((U=L.getItem())===null||U===void 0?void 0:U.fluidEngineId)===M},Tp=K=>{let{monitor:L,fluidEngineId:M}=K;var U;const H=L.getItemType();return Tt.em.has(H)&&!L.didDrop()&&((U=L.getItem())===null||U===void 0?void 0:U.fluidEngineId)===M},Ip=K=>{let{blocksById:L,deviceKey:M,containerNode:U,containerWidth:H,gutterWidth:V,multiselectedBlockIds:G,updateRowCount:Z,handleSetBlockCentered:ee,fluidEngineId:$,numRows:te,numCols:se,unstretchedRowHeight:ae,rowGapSize:oe,columnWidth:de,columnGapSize:ue,sectionWidth:xe,getMultiselectionArea:De,isSymmetricKeyDown:Ve}=K;const pt=(0,W.useRef)(null),ot=(0,W.useRef)(null),ut=(0,W.useRef)(null),At=(0,W.useRef)(null),ze=(0,W.useMemo)(()=>(0,f.throttle)(Ye=>{(0,on.eM)((0,xo.q5)(Ye))},200),[]),[{moveDragIsActiveOverGrid:ft,multiselectMoveIsActiveOverGrid:vt},Pe]=(0,Ql.L)(()=>({accept:bp,collect:Ye=>({moveDragIsActiveOverGrid:cu({monitor:Ye,fluidEngineId:$}),multiselectMoveIsActiveOverGrid:Ye.getItemType()===Tt.wm}),drop:()=>{ot.current=null,pt.current&&pt.current(),ee(!1)},hover(Ye,Et){if(Ye.fluidEngineId!==$||!U)return;const dt=Et.getItemType();if(!(0,Tt.fx)(dt))return;const Ot=lu(Ye);ot.current||(ot.current=te,pt.current=iu(U));const jt=Et.getDifferenceFromInitialOffset(),ii=Et.getClientOffset(),tt=Et.getInitialClientOffset(),Kt=Et.getSourceClientOffset(),Rt=Et.getInitialSourceClientOffset();if(jt===null||!ii||!tt)return;const Oi=(0,Ei.V6)();if(Oi){const Ji=ii.y,ni=Ji>=0&&Ji<ru,On=Ji>=Oi.innerHeight-ru&&Ji<Oi.innerHeight;ni?Oi.scrollBy(0,-10):On&&Oi.scrollBy(0,10)}const Si=Oi==null?void 0:Oi.scrollY,xi=(Si||0)-(Ye.startingScrollTop?Ye.startingScrollTop:0),{start:Pn,end:Pi}=Ot?Ye.newBlockData.layout[M]:(0,on.qY)(Ye.selectedBlockIds.map(Ji=>L[Ji].layout[M]));if(U&&Ot){const ni=U.getBoundingClientRect().top+xi-tt.y;ni>0&&(jt.y<ni?(tt.y=0,ii.y=0,jt.y=0):(tt.y+=ni,ii.y+=ni,jt.y-=ni))}const cn={start:Pn,end:Pi},jn=Jl({dragType:dt,initialClientOffset:tt,initialPosition:cn,clientOffset:ii,unstretchedRowHeight:ae,rowGapSize:oe,numCols:se,columnGapSize:ue,columnWidth:de,containerWidth:H,gutterWidth:V,scrollDiff:xi}),as=nu({initialPosition:cn,offset:jn,numCols:se});if(Ye.currentPosition.start=as.start,Ye.currentPosition.end=as.end,Kt){const Ji={numCols:se,unstretchedRowHeight:ae,rowGap:oe,columnWidth:de,columnGap:ue,gutterWidth:V},ni=(0,on.ae)({layout:cn,...Ji});let On=Kt.x+ni.width/2;if(Ot){const sn=ni.left-(Rt?Rt.x:0);On+=sn}const yn=de+ue,zn=xe/2-yn/2,Gi=xe/2+yn/2,si=On>=zn&&On<=Gi;if((Ye.currentPosition.end.x-Ye.currentPosition.start.x)%2===0&&si&&G.length===0){const sn=cn.end.x-cn.start.x+2,En=(se-sn)/2+1,Hs=En+sn-1,os=Ye.selectedBlockIds[0],va=lu(Ye)?Ye.newBlockData.content.value:L[os].content.value,la=Math.max(0,(0,ko.r2)(U==null?void 0:U.querySelector(`.fe-block-${os} .sqs-block`),va,ae,oe)-1),Da=Math.max(Ye.currentPosition.start.y+la,Ye.currentPosition.end.y);Ye.currentPosition.end.y=Da,Ye.currentPosition.start.x=En,Ye.currentPosition.end.x=Hs}ee(si&&(Ye.currentPosition.end.x-Ye.currentPosition.start.x)%2!==0)}ot.current&&Z(Math.max(Ye.currentPosition.end.y+1,ot.current))}}),[U,H,M,te,se,ee,G,$,Z,L,ae,oe,de,ue,V,xe]),[{resizeDragIsActiveOverGrid:Ne},Ue]=(0,Ql.L)(()=>({accept:Cp,collect:Ye=>({resizeDragIsActiveOverGrid:cu({monitor:Ye,fluidEngineId:$})}),drop:()=>{ot.current=null,ze.cancel(),ee(!1)},hover(Ye,Et){if(Ye.fluidEngineId!==$)return;ot.current||(ot.current=te);const dt=Et.getItemType();if(!(0,Tt.fx)(dt)||!(0,Tt.KX)(dt))return;Ye.dragType=dt;const Ot=Et.getDifferenceFromInitialOffset(),jt=Et.getClientOffset(),ii=Et.getInitialClientOffset();if(Ot===null||!jt||!ii)return;const tt=L[Ye.id].layout[M],{start:Kt,end:Rt}=tt,Oi=Ye.layout[M],Si=Jl({dragType:dt,initialClientOffset:ii,initialPosition:tt,clientOffset:jt,unstretchedRowHeight:ae,rowGapSize:oe,numCols:se,columnGapSize:ue,columnWidth:de,containerWidth:H,gutterWidth:V}),xi=L[Ye.id].content.value;ze(Ye.id);const Pn=((0,tu.Z)(xi)||1)-1,Pi=Math.max(0,(0,ko.r2)(U==null?void 0:U.querySelector(`.fe-block-${Ye.id} .sqs-block`),xi,ae,oe)-1),cn=(0,Tt.xs)(dt)||Ve?0:Kt.y,{nextPosition:jn,layoutLimits:as}=su({initialPosition:tt,minCoords:{x:Pn,y:Pi},offset:Si,numCols:se,startYMin:cn,isSymmetricKeyDown:Ve});if(Oi.start=jn.start,Oi.end=jn.end,Ye.layoutLimits=as,ee((0,Wn.gF)(jn,se/2,se)),ot.current){const Ji=Rt.y+Si.end.y;Z(Math.max(Ji+1,Oi.end.y+1,ot.current))}}}),[H,M,$,L,ae,oe,de,ue,se,Ve,U,V,ee,te,ze,Z]),[{multiResizeDragIsActiveOverGrid:be},Ze]=(0,Ql.L)(()=>({accept:Ap,collect:Ye=>({multiResizeDragIsActiveOverGrid:Tp({monitor:Ye,fluidEngineId:$})}),drop:()=>{ot.current=null,At.current=null,ut.current=null,ee(!1)},hover(Ye,Et){if(Ye.fluidEngineId!==$)return;ot.current||(ot.current=te),At.current||(At.current=1/0),ut.current||(ut.current=1/0);const dt=Et.getItemType();if(!(0,Tt.fx)(dt)||!(0,Tt._M)(dt))return;Ye.dragType=dt;const Ot=Et.getDifferenceFromInitialOffset(),jt=Et.getClientOffset(),ii=Et.getInitialClientOffset();if(Ot===null||!jt||!ii)return;Ye.isHittingGroupMinHeight=!1,Ye.isHittingGroupMinWidth=!1,Ye.isOutTopSectionBoundary=!1;const tt=De(),Kt=tt.end.x-tt.start.x,Rt=tt.end.y-tt.start.y,Oi=Jl({dragType:dt,initialClientOffset:ii,initialPosition:tt,clientOffset:jt,unstretchedRowHeight:ae,rowGapSize:oe,numCols:se,columnGapSize:ue,columnWidth:de,containerWidth:H,gutterWidth:V});let Si=Oi.end.x-Oi.start.x,xi=Oi.end.y-Oi.start.y;if((0,Tt.xs)(dt)&&xi>tt.start.y){Ye.isOutTopSectionBoundary=!0;return}ut.current!==1/0&&Si<=ut.current&&(Si=ut.current+1,Ye.isHittingGroupMinWidth=!0),At.current!==1/0&&xi<=At.current&&(xi=At.current+1,Ye.isHittingGroupMinHeight=!0);const Pn=yp({dragType:dt,initialPosition:tt}),{newBlockLayoutsById:Pi,isHittingGroupMinWidth:cn,isHittingGroupMinHeight:jn,updatedGroupEndY:as}=ou({anchorPoint:Pn,blocksById:L,deviceKey:M,dragType:dt,initialGroupWidth:Kt,initialGroupHeight:Rt,initialPosition:tt,offsetXDelta:Si,offsetYDelta:xi,selectedBlockIds:Ye.selectedBlockIds,blockMinHeightById:Ye.blockMinHeightById,unstretchedRowHeight:ae,rowGapSize:oe,containerNode:U}),Ji=au({dragType:dt,offsetXDelta:Si,offsetYDelta:xi,originGroupArea:Ye.groupArea,initialPosition:tt,updatedGroupEndY:as});cn&&ut.current===1/0&&(ut.current=Si,Ye.isHittingGroupMinWidth=!0),jn&&At.current===1/0&&(At.current=xi,Ye.isHittingGroupMinHeight=!0);let ni=Pi,On=Ji;if(cn&&ut.current!==1/0||jn&&At.current!==1/0){cn&&ut.current!==1/0&&(Ye.isHittingGroupMinWidth=!0),jn&&At.current!==1/0&&(Ye.isHittingGroupMinHeight=!0);const yn=ut.current!==1/0?ut.current+1:Si,zn=At.current!==1/0?At.current+1:xi,{newBlockLayoutsById:Gi,updatedGroupEndY:si}=ou({anchorPoint:Pn,blocksById:L,deviceKey:M,dragType:dt,initialGroupWidth:Kt,initialGroupHeight:Rt,initialPosition:tt,offsetXDelta:yn,offsetYDelta:zn,selectedBlockIds:Ye.selectedBlockIds,blockMinHeightById:Ye.blockMinHeightById,unstretchedRowHeight:ae,rowGapSize:oe,containerNode:U}),sn=au({dragType:dt,offsetXDelta:yn,offsetYDelta:zn,originGroupArea:Ye.groupArea,initialPosition:tt,updatedGroupEndY:si});ni=Gi,On=sn}if(Ye.groupArea=On,Ye.blockLayoutsById=ni,ee((0,Wn.gF)(On,se/2,se)),ot.current){const yn=tt.end.y+Oi.end.y;Z(Math.max(yn+1,On.end.y+1,ot.current))}}}),[U,De,V,ee,te,Z,H,M,$,L,ae,oe,de,ue,se]);return{anyDragIsActiveOverGrid:ft||Ne||be,attachMoveDropHandler:Pe,attachResizeDropHandler:Ue,attachMultiResizeDropHandler:Ze,multiselectMoveIsActiveOverGrid:vt,multiResizeDragIsActiveOverGrid:be}};var vl=t(911896),$l=t(850255),Dp=t(763831);const Op=30,Ur=500,Lp=(0,f.debounce)(fa.Ni,Ur),Pp=(0,f.debounce)(fa.ro,Ur),{MOBILE:uu}=wn.FluidEngineBreakpoints,du=K=>Na.Z.isArrowDown(K)||Na.Z.isArrowUp(K)||Na.Z.isArrowLeft(K)||Na.Z.isArrowRight(K),Yl=K=>Na.Z.isArrowDown(K)||Na.Z.isArrowUp(K),hu=K=>K.closest("input, textarea, [contenteditable=true]"),Mp=K=>{let{blocksById:L,sectionId:M,numCols:U,numRows:H,containerNode:V,deviceKey:G,focusedBlockId:Z,multiselectedBlockIds:ee,rowGapSize:$,isSectionHovered:te,unstretchedRowHeight:se,onPrepareGrid:ae,onRequestBlockFocus:oe,onRequestDeleteBlocks:de,onRequestDuplicateBlocks:ue,setIsMultiselectKeyDown:xe,setIsMovingWithKeys:De,setIsDuplicateKeyDown:Ve,setIsSymmetricKeyDown:pt,isSymmetricKeyDown:ot,handleSetBlockCentered:ut,toggleGrid:At,onValueChange:ze,toggleLayersPanel:ft,hideBlock:vt,isLayersPanelOpenForThisSection:Pe}=K;const Ne=(0,cl.Z)(),Ue=(0,Ei.V6)(),be=(0,Ei.wo)(),Ze=(0,T.zC)(),Ye=(0,ul.Z)()?"Meta":"Control",Et=(0,W.useRef)(null),dt=(0,W.useRef)(null),Ot=(0,W.useRef)(null),[jt,ii]=(0,W.useState)(!1),[tt,Kt]=(0,W.useState)(!1),[Rt,Oi]=(0,W.useState)(!1);(0,W.useEffect)(()=>{Rt?(Ot.current===null&&(Ot.current=H),Ze((0,Ct.hP)()),De(!0)):!Rt&&Ot.current!==null&&(Ot.current=null,Ze((0,Ct.e)()),De(!1),ut(!1))},[Ze,Rt,H,De,ut]);const Si=(0,W.useCallback)(Ut=>{if(!Z||!Yl(Ut)||jt||!Ue)return;const $i=(0,xo.HF)(Z);if(!$i)return;const Rn=$i.getBoundingClientRect();Rn.top>=0&&Rn.bottom<=Ue.innerHeight||$i.scrollIntoView({behavior:"smooth",block:"center"})},[jt,Z,Ue]),xi=(0,W.useCallback)((Ut,$i,Rn)=>{const Vs=(0,on.G6)(Ut,$i);let Xs=null;const Ss={initialPosition:null,currentPosition:Xs,selectedBlockIds:null},Ka=ae();if(!Ka)return;const js=(0,f.keyBy)(Ka.gridContents,Wn.IF);let tr=ee;if(ee.length<=1&&Z){if(!js.hasOwnProperty(Z))return Ss;tr=[Z]}Oi(!0);const To=tr.map(Qs=>js[Qs].layout[G]),zs=(0,on.qY)(To);if(Z&&$i){const Qs=js[Z].content.value,Js=(0,on.GV)(Qs)-1,Io=Math.max(0,(0,ko.r2)(V==null?void 0:V.querySelector(`.fe-block-${Qs.id} .sqs-block`),Qs,se,$)-1);Xs=su({initialPosition:zs,minCoords:{x:Js,y:Io},offset:Vs,numCols:U,startYMin:Yl(Ut)?0:zs.start.y,isSymmetricKeyDown:ot}).nextPosition}else if(Z&&Rn&&Yl(Ut)){var hs;const Qs=Ut.key==="ArrowUp"?"UP":"DOWN",Js=(0,Wn.MQ)(Ka.gridContents,uu),Io=Js==null?void 0:Js.findIndex(Ar=>Ar.find(jr=>jr===Z)),io=((hs=Js[Io])===null||hs===void 0?void 0:hs.length)===1;if(Qs==="UP"&&Io===0&&io||Qs==="DOWN"&&Io===Js.length-1&&io)return Ss;Ze((0,Ms.cR)({sectionId:M,blockId:Z,direction:Qs})),(0,fa.tk)({blockId:Z,direction:Qs,isKeyboard:!0}),Si(Ut)}else Xs=nu({initialPosition:zs,offset:Vs,numCols:U});return{initialPosition:zs,currentPosition:Xs,selectedBlockIds:tr}},[M,V,G,Z,ee,U,$,se,Si,ae,Oi,Ze,ot]),Pn=(0,T.Ze)(P.Zxu)??"",Pi=(0,W.useMemo)(()=>(0,f.debounce)((Ut,$i,Rn,Vs)=>{if(!Rn||!$i||!Vs||(0,f.isEqual)($i,Rn))return;const Xs=ae();Xs&&(Ut?Pp([Vs[0]],!0,M,Pn):Lp(Vs,!0,M,Pn),ut((0,Wn.gF)(Rn,U/2,U)),ze(()=>({newValue:(0,vl.ee)({fluidEngineContext:Xs,deviceKey:G,currentPosition:Rn,selectedBlockIds:Vs,origRowCount:Ot.current}),meta:{grouping:zl.Z.UNTIL_END_UNDO_GROUP}})),Ze((0,$l.lW)()))},Op),[G,ae,Ze,ut,U,ze,Pn,M]),cn=(0,W.useCallback)(Ut=>{xe((0,on.ye)(Ut))},[xe]),jn=(0,W.useCallback)(Ut=>{Ve((0,on.Ce)(Ut))},[Ve]),as=(0,W.useCallback)(function(Ut){let $i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const Rn=(0,on.Z6)(Ut,$i);Rn!==ot&&pt(Rn)},[ot,pt]),Ji=(0,W.useCallback)(Ut=>{if(du(Ut)&&!(Ut.shiftKey&&!Ut.metaKey)){const $i=Ut.ctrlKey||Ut.metaKey,Rn=Ut.altKey&&G===uu;if(Z||ee.length>0){if(Ut.preventDefault(),($i||Rn)&&ee.length>1||Pe)return;const Vs=xi(Ut,$i,Rn);if(!Vs)return;const{initialPosition:Xs,currentPosition:Ss,selectedBlockIds:Ka}=Vs;Xs&&Ss&&Ka&&(Si(Ut),Pi($i,Xs,Ss,Ka)),Et.current&&(clearTimeout(Et.current),Et.current=null)}}},[G,Z,ee,Pi,xi,Si,Pe]),ni=(0,W.useCallback)(Ut=>{if(Ut.key==="Backspace"||Ut.key==="Delete"){const $i=(0,P.Ouw)((0,T.d6)()),Rn=ee.length>0?ee:$i&&L[$i]?[$i]:null;Rn&&de(Rn,!0)}},[ee,L,de]),On=(0,W.useCallback)(Ut=>{Ut.key.toLowerCase()==="g"&&At()},[At]),yn=(0,W.useCallback)(Ut=>{if((Ut.metaKey||Ut.ctrlKey)&&Ut.key==="d"&&(ee.length>0||Z)&&(Ut.preventDefault(),!tt)){const $i=ee.length>0?ee:Z?[Z]:null;$i&&(ue($i,!0),Kt(!0),setTimeout(()=>{Kt(!1)},Ur))}},[tt,Z,ee,ue]),zn=(0,W.useCallback)(Ut=>{if((Ut.metaKey||Ut.ctrlKey)&&Ut.key==="a"&&te){Ut.preventDefault();const $i=Object.keys(L);oe($i),(0,fa.vI)($i.map(Rn=>L[Rn]))}},[L,oe,te]),Gi=(0,W.useCallback)(Ut=>{if(Z&&!L[Z]||!be)return;const $i=be.activeElement;if((Ut.key==="Enter"||Ut.key==="Return"||Ut.key===" ")&&($i==null?void 0:$i.getAttribute("data-fluid-engine-block"))!==null){const Rn=document.querySelector("[data-block-toolbar] button");Rn&&(Ut.preventDefault(),Rn.focus())}},[L,be,Z]),si=(0,T.Ze)(P.aFX),sn=(0,T.Ze)(P.m1X),En=(0,W.useCallback)(Ut=>{Na.Z.isCharacter(Ut,"l")&&(Ut.preventDefault(),ft())},[ft]),Hs=(0,W.useCallback)(Ut=>{const $i=ee.length?ee:Z?[Z]:null;Ut.metaKey&&Ut.shiftKey&&Na.Z.isCharacter(Ut,"h")&&$i&&(Ut.preventDefault(),vt($i))},[Z,vt,ee]),os=(0,W.useCallback)(Ut=>{hu(Ut.target)||sn||si||!Ne.current||(Ut.stopPropagation(),Gi(Ut),cn(Ut),On(Ut),zn(Ut),jn(Ut),as(Ut,!0),ni(Ut),(0,Us.cr)("fe-hide-show-block")&&(En(Ut),Hs(Ut)),(Z||ee.length>1)&&(Ji(Ut),yn(Ut),as(Ut,!0)))},[sn,si,Z,ee,jn,cn,Ji,ni,On,yn,zn,Gi,Ne,as,En,Hs]),va=(0,W.useCallback)(Ut=>{hu(Ut.target)||(du(Ut)||Ut.key===Ye&&Rt)&&(Et.current=setTimeout(()=>Oi(!1),Ur))},[Rt,Ye,Oi]),la=(0,W.useCallback)(Ut=>{Ne.current&&(cn(Ut),va(Ut),as(Ut,!0),jn(Ut))},[Ne,cn,va,as,jn]),Da=(0,W.useCallback)(()=>{Ne.current&&(xe(!1),Ve(!1),pt(!1))},[Ne,xe,Ve,pt]),to=(0,W.useCallback)(Ut=>{Ne.current&&(as(Ut),Ve((0,on.Ce)(Ut)))},[Ne,as,Ve]),Yo=(0,W.useCallback)(()=>{Ne.current&&(dt.current&&(clearTimeout(dt.current),ii(!0),dt.current=null),dt.current=setTimeout(()=>{ii(!1)},Ur))},[ii,Ne]);(0,Is.Z)("blur",Da,{element:window}),(0,Is.Z)("blur",Da,{element:Ue}),(0,Is.Z)("drop",to,{element:window}),(0,Is.Z)("drop",to,{element:Ue}),(0,Is.Z)("drag",to,{element:window}),(0,Is.Z)("drag",to,{element:Ue}),(0,Is.Z)("keydown",os,{element:be}),(0,Is.Z)("keydown",os,{element:document}),(0,Is.Z)("keyup",la,{element:document}),(0,Is.Z)("keyup",la,{element:be}),(0,Is.Z)("scroll",Yo,{element:be});const[Oa,na]=(0,W.useState)(null);(0,W.useEffect)(()=>{if(!Rt){na(null);return}na(Ut=>{const $i=Z?[Z]:ee;return Ut&&(0,Dp.Z)($i,Ut)?Ut:$i})},[Z,ee,Rt]);const[qa,er]=(0,W.useState)(null);(0,W.useEffect)(()=>{if(!Rt){er(null);return}er(Ut=>{const $i=(Oa==null?void 0:Oa.reduce((Rn,Vs)=>{var Xs;const Ss=(Xs=L[Vs])===null||Xs===void 0?void 0:Xs.layout[G];if(!Ss)throw new Error("Block not found with given ID");return Rn?{start:{x:Math.min(Ss.start.x,Rn.start.x),y:Math.min(Ss.start.y,Rn.start.y)},end:{x:Math.max(Ss.end.x,Rn.end.x),y:Math.max(Ss.end.y,Rn.end.y)}}:{start:Ss.start,end:Ss.end}},null))??null;return($i==null?void 0:$i.start.x)===(Ut==null?void 0:Ut.start.x)&&($i==null?void 0:$i.start.y)===(Ut==null?void 0:Ut.start.y)&&($i==null?void 0:$i.end.x)===(Ut==null?void 0:Ut.end.x)&&($i==null?void 0:$i.end.y)===(Ut==null?void 0:Ut.end.y)?Ut:$i})},[L,G,Rt,Oa]);const La=(0,W.useCallback)(()=>qa,[qa]);return(0,W.useMemo)(()=>({getAreaOfBlocksMovedWithKeys:La}),[La])};var wp=t(502284);const Rp=K=>{let{containerNode:L,deviceKey:M,gridContents:U,isDraggingRowCount:H,rowCountDragNode:V,onRowCountDragEnd:G,totalRowHeightInPx:Z,updateRowCount:ee,sectionId:$,sectionHasRoomForDragNode:te,stacksInfo:se}=K;const ae=(0,T.zC)();(0,W.useEffect)(()=>{if(!H)return;ae((0,Ct.wv)());const oe=(0,Ei.V6)();if(!oe)throw new Error("FluidEngine `useRowCountDragHandler` could not find frame window");const de=V.current;if(!de)throw new Error("FluidEngine `useRowCountDragHandler` could not find drag handle node");if(!L)throw new Error("FluidEngine `useRowCountDragHandler` could not find FE container node");const ue=oe.document,xe=ue.body,De=ue.importNode(de,!0),Ve=(0,qr.Z)({containerNode:L}).rows,pt=de.getBoundingClientRect(),ot=function(){const ft=U.filter(dt=>se[(0,Wn.IF)(dt)]?se[(0,Wn.IF)(dt)].parentId===null:!0),vt=Math.max(0,...ft.map(dt=>dt.layout[M].visible?dt.layout[M].end.y:0)),Pe=ft.filter(dt=>dt.layout[M].visible&&dt.layout[M].end.y===vt).map(dt=>(0,xo.HF)((0,Wn.IF)(dt))),Ne=dt=>{Pe.forEach(Ot=>{Ot&&Ot.classList.toggle("lowest-block-warning",dt)})},Ue=Ve.length;let be=Ue,Ze;const Ye=dt=>{const Ot=Ve[vt].bottomPageY;if(Ze===void 0)Ze=dt.pageY;else{Ne(dt.pageY<Ot);const jt=Math.max(dt.pageY,Ot);De.style.transform=`translateY(${jt-pt.height/2}px)`;const ii=dt.pageY-Ze;let tt;if(ii<0)tt=Ue-[...Ve].reverse().findIndex(Rt=>{let{bottomPageY:Oi,topPageY:Si}=Rt;return Si+(te?(Oi-Si)/2:0)<jt});else{const Rt=Math.round(ii/Z);tt=Ue+Rt}const Kt=(0,f.clamp)(tt,1,ia.pL);Kt!==be&&(be=Kt,ee(be))}},Et=()=>{G(be);const dt=be>Ue?"add":"decrease";(0,wp._T)({objectValue:`${be}`,indirectObjectValue:dt,sectionId:$})};return oe.addEventListener("pointermove",Ye),oe.addEventListener("pointerup",Et),function(){oe.removeEventListener("pointermove",Ye),oe.removeEventListener("pointerup",Et),Ne(!1)}}(),ut=iu(L),At=function(){xe.appendChild(De),De.style.left=`${pt.left}px`,De.style.top="0",De.style.opacity="1";const ft=Ve[Ve.length-1].bottomPageY-pt.height,vt=ft+pt.height/2;return De.style.transform=`translateY(${te?vt:ft}px)`,xe.style.cursor="row-resize",xe.style.userSelect="none",function(){De.style.transform="translateY(0)",xe.removeChild(De),xe.style.cursor="auto",xe.style.userSelect=""}}();return()=>{ae((0,$l.lW)()),ot(),ut(),At()}},[ae,L,M,U,H,V,G,Z,ee,$,te,se])};function Bp(K){return{height:(K==null?void 0:K.clientHeight)||1,width:(K==null?void 0:K.clientWidth)||1}}var ec=t(6471),Np=t(160021),kp=t(87706),xp=t(510884),$o=t.n(xp);const{MOBILE:gu}=wn.FluidEngineBreakpoints,qp=W.memo((0,W.forwardRef)(function(L,M){let{isDraggingRowCount:U,onDragStart:H,deviceKey:V,isDragRowCountHandleVisible:G,sectionHasRoomForDragNode:Z}=L;const ee=(0,W.useCallback)($=>{$.button===Tc.LEFT_CLICK&&H()},[H]);return W.createElement("div",{ref:M,onPointerDown:ee,className:it()($o().dragHandle,{[$o().isMobile]:V===gu&&!window.MOBILEAPP,[$o().isMobileApp]:V===gu&&window.MOBILEAPP,[$o().isVisible]:G,[$o().hasRoom]:Z,[$o().isDragging]:U})},W.createElement("img",{src:Ic(),alt:(0,l.t)("Adjust row count",null,{project:"apps.App"}),draggable:!1,className:$o().dragImg}))}));var _r=t(765724);const pu=[],{DESKTOP:Er}=wn.FluidEngineBreakpoints,{setJsonPointerValue:Up}=Va.jsonPointerUtils,Fp=33,tc=K=>{let{unit:L,value:M}=K;return(0,W.useMemo)(()=>({unit:L,value:M}),[L,M])},Wp=K=>{let{children:L,sectionNode:M}=K;return(0,ks.createPortal)(L,M)};function Hp(K){let{maybeDescendantId:L,maybeAncestorId:M,stacksInfo:U}=K;var H;let V=(H=U[L])===null||H===void 0?void 0:H.parentId;for(;V;){var G;if(V===M)return!0;V=(G=U[V])===null||G===void 0?void 0:G.parentId}return!1}const Vp=K=>{let{sectionId:L,sectionIndex:M,requestMultiselectedToolbar:U,requestToolbarButtons:H,isEditingEnabled:V=!0,isSectionHovered:G=!1,editorUINode:Z=null,onReady:ee=f.noop}=K;const $=(0,cl.Z)(),te=(0,T.zC)(),{fontSizes:se}=(0,hl.F)(),ae=(0,oa.O)(P.aR7,L),oe=(0,oa.O)(P.RAd,L),de=(0,oa.O)(P.XEm,L),{breakpointSettings:ue}=de,xe=(0,W.useMemo)(()=>(0,on.S6)(oe),[oe]),[De,Ve]=(0,W.useState)(),[pt,ot]=(0,W.useState)(1),[ut,At]=(0,W.useState)(!1),[ze,ft]=(0,W.useState)(!1),[vt,Pe]=(0,W.useState)(pu),[Ne,Ue]=(0,W.useState)(!1),[be,Ze]=(0,W.useState)(!1),[Ye,Et]=(0,W.useState)(!1),[dt,Ot]=(0,W.useState)(!1),[jt,ii]=(0,W.useState)(!1),tt=(0,W.useRef)(null),Kt=(0,hr.Z)(de),Rt=(0,Gl.Z)(),{platform:Oi}=(0,W.useContext)(Zo.Z.Context),[Si,xi]=(0,W.useState)(!1),Pn=Oi!=="desktop",Pi=(0,bn.jd)(L),cn=(0,T.Ze)(P.Zxu)??"",jn=(0,T.Ze)(P.m1X),as=(0,oa.O)(P.FWV,L),Ji=(0,oa.O)(P.MkU,L);(0,W.useEffect)(()=>{Pi&&(Pi.style.userSelect="none")},[Pi]);const ni=(0,on.er)(),On=(0,In.i)(ts.breakpoints).platform==="mobile",{columns:yn,rows:zn}=ue[ni],Gi=tc(de.columnGap),si=tc(de.rowGap),sn=tc(ni===Er?ue[ni].rowSize:ia.d8),[En,Hs]=(0,W.useState)(()=>(0,Ta.d)(sn,De)),[os,va]=(0,W.useState)(()=>(0,Ta.d)(si,De)),[la,Da]=(0,W.useState)(()=>(0,Ta.d)(Gi,De)),[to,Yo]=(0,W.useState)(0),Oa=(0,ka.Ft)(),na=(0,W.useMemo)(()=>{if(!Oa)return{};const nt={},ei={};for(const rn of oe){const Hn=(0,Wn.IF)(rn);nt[Hn]||(nt[Hn]={parentId:null,depth:0});const Gn=rn.content.value.value.childrenIds;if(Array.isArray(Gn)){ei[Hn]=Gn;for(const Nn of Gn)nt[Nn]={parentId:Hn,depth:-1}}}const Ui=[];for(const rn in nt)nt[rn].parentId===null&&Ui.push(rn);for(;Ui.length>0;){const rn=Ui.shift(),Hn=nt[rn].depth,Gn=ei[rn]??[];for(const Nn of Gn)nt[Nn].depth=Hn+1,Ui.push(Nn)}return nt},[oe,Oa]),qa=(0,W.useMemo)(()=>(0,f.debounce)((nt,ei)=>te((0,Ct.y8)({sectionId:L,blockIds:nt,isKeyboard:ei})),500,{leading:!0,trailing:!1}),[te,L]),er=(0,W.useCallback)(nt=>{qa([nt],!1)},[qa]),La=(0,W.useMemo)(()=>(0,f.debounce)((nt,ei)=>te((0,Ct.yt)({sectionId:L,blockIds:nt,deviceKey:ni,sourceAction:ei?"keyboard":"drag"})),500,{leading:!0,trailing:!1}),[ni,te,L]),[Ut,$i]=(0,W.useState)(null),[Rn,Vs]=(0,W.useState)(null);(0,W.useLayoutEffect)(()=>{if(!De){ot(1);return}const nt=Nn=>{const bs=Nn??(0,qr.Z)({containerNode:De}),Bn=bs==null?void 0:bs.rows;if(Bn&&Bn.length){const xs=(0,Ei.V6)(),qs=(xs==null?void 0:xs.scrollY)??0,ca=qs+((xs==null?void 0:xs.innerHeight)??0),Lo=Bn.findIndex(ji=>ji.bottomPageY>=qs&&ji.bottomPageY<ca),oi=Bn.findLastIndex(ji=>ji.topPageY<=ca&&ji.topPageY>qs);$i(Lo===-1?null:Lo),Vs(oi===-1?null:oi)}},ei=()=>{const{width:Nn}=Bp(De);ot(Nn),va((0,Ta.d)(si,De)),Da((0,Ta.d)(Gi,De));const bs=(0,qr.Z)({containerNode:De}),Bn=bs==null?void 0:bs.columns;if(Bn&&Bn.length>=2){const xs=Bn[1].offsetLeft;if(Yo(xs),ni===Er){const qs=Nn-xs*2;Hs(qs*on.Tw)}else Hs((0,Ta.d)(sn,De))}nt(bs)};ei();const Ui=(0,f.throttle)(ei,40),rn=new kr.d(Ui);rn.observe(De);const Hn=(0,f.throttle)(()=>nt(),40);De.ownerDocument.addEventListener("scroll",Hn);const Gn=()=>De.ownerDocument.removeEventListener("scroll",Hn);return()=>{Ui.cancel(),rn.disconnect(),Gn()}},[si,sn,ni,Gi,De]),(0,W.useEffect)(()=>{if(!De)return;const nt=()=>{var rn;const Hn=(rn=(0,qr.Z)({containerNode:De}))===null||rn===void 0?void 0:rn.rows;if(Hn&&Hn.length){const Gn=(0,Ei.V6)(),Nn=(Gn==null?void 0:Gn.scrollY)??0,bs=Nn+((Gn==null?void 0:Gn.innerHeight)??0),Bn=Hn.findIndex(qs=>qs.bottomPageY>=Nn&&qs.bottomPageY<bs),xs=Hn.findLastIndex(qs=>qs.topPageY<=bs&&qs.topPageY>Nn);$i(Bn===-1?null:Bn),Vs(xs===-1?null:xs)}};nt();const ei=(0,f.throttle)(nt,40);De.ownerDocument.addEventListener("scroll",ei);const Ui=()=>De.ownerDocument.removeEventListener("scroll",ei);return()=>{ei.cancel(),Ui()}},[De]);const Ss=(pt-to*2-la*(yn-1))/yn,Ka={numCols:yn,unstretchedRowHeight:En,rowGap:os,columnWidth:Ss,columnGap:la,gutterWidth:to},js=(0,W.useCallback)(function(nt){return te((0,Ms.eX)({sectionId:L,deviceKey:ni,getUpdate:nt}))},[te,ni,L]),tr=(0,W.useCallback)((nt,ei,Ui,rn)=>js(Hn=>({newValue:(0,mr.ZP)(Hn,Gn=>{const Nn=Gn.gridContents.find(bs=>(0,Wn.IF)(bs)===nt);Nn&&(Nn.content.value[ei]=Ui)}),meta:{...rn,sourceFluidEngineAction:"on-block-change"}})),[js]),To=(0,W.useCallback)(()=>te((0,Ct.wv)()),[te]),zs=(0,W.useCallback)(nt=>{if(nt.length===0)throw new Error("requestBlockFocus called without any blocks");if(nt.length===1)te((0,Ct.lT)(nt[0]));else{const ei=(0,on.UQ)({blocks:oe,blockIds:nt});te((0,Ct.pU)({sectionId:L,blockIds:nt,initialLayout:ei}))}},[te,L,oe]),hs=(0,oa.O)(P.bCb,L),Qs=(0,W.useRef)(null);(0,Is.Z)("click",nt=>{var ei;const Ui=(0,on.ye)(nt);if(At(Ui),Ne)return;const rn=nt.target;(0,xo.Nn)(nt)||!Ui&&!(!((ei=Qs.current)===null||ei===void 0)&&ei.contains(rn))&&hs.length>0&&!rn.dataset.isRightClickMenu&&To()},{element:Pi,useCapture:!0}),(0,W.useEffect)(()=>{Ne||Pe(pu)},[Ne]);const Js=(0,W.useCallback)((nt,ei)=>{const Ui=(0,on.ye)(nt);if(At(Ui),Ui){let Hn;if(hs.length===0){if(Ji){if(ei===Ji)return}else{zs([ei]);return}Hn=[Ji,ei]}else Hn=hs.includes(ei)?hs.filter(Gn=>Gn!==ei):[...hs,ei];zs(Hn),(0,fa.V7)("shift_select",Hn.map(Gn=>xe[Gn]))}else if(Oa){var rn;if(!na[ei]||((rn=nt.target)===null||rn===void 0?void 0:rn.closest(".fluid-engine-block"))!==nt.currentTarget)return;zs([ei])}},[Ji,xe,hs,zs,na,Oa]),Io=(0,W.useCallback)(nt=>{let{blockId:ei,growOrShrink:Ui,contentHeightDifferenceInPixels:rn}=nt;return te((0,Ms.OG)({sectionId:L,blockId:ei,growOrShrink:Ui,containerNode:De,deviceKey:ni,unstretchedRowHeight:En,rowGapSize:os,columnGapSize:la,columnWidth:Ss,contentHeightDifferenceInPixels:rn}))},[te,L,De,ni,En,os,la,Ss]),io=(0,W.useCallback)(()=>De?te((0,Ms.u3)({containerNode:De,deviceKey:ni,sectionId:L,unstretchedRowHeight:En,rowGapSize:os})):null,[te,L,De,ni,En,os]),Ar=(0,W.useCallback)(()=>ft(nt=>!nt),[]),jr=(0,W.useCallback)(nt=>Ze(nt),[]),Uo=(0,W.useCallback)(()=>{const nt=(0,f.compact)(hs.map(ei=>xe[ei]&&xe[ei].layout[ni]));return(0,on.qY)(nt)},[hs,xe,ni]);(0,W.useEffect)(()=>{Kt&&(!(0,f.isEqual)(de.columnGap,Kt.columnGap)||!(0,f.isEqual)(de.rowGap,Kt.rowGap))&&io()},[de,Kt,io]);const zr=(0,W.useCallback)(async nt=>{if(dt&&ni===Er){const{newBlockIds:ei}=await te((0,Ms.Bz)({sectionId:L,deviceKey:ni,endingBlockPosition:nt.currentPosition,selectedBlockIds:nt.selectedBlockIds}));(0,fa.d0)({blockIds:nt.selectedBlockIds,displayName:ni,indirectObjectValue:"drag",isKeyboard:!0}),zs(ei)}else(0,fa.Ni)(nt.selectedBlockIds,!1,L,cn),js(ei=>({newValue:(0,vl.ee)({fluidEngineContext:ei,currentPosition:nt.currentPosition,selectedBlockIds:nt.selectedBlockIds,deviceKey:ni,origRowCount:null}),meta:{grouping:zl.Z.UNTIL_END_UNDO_GROUP,sourceFluidEngineAction:nt.selectedBlockIds.length>1?"user-moved-multiple-blocks-by-drag":"user-moved-single-block-by-drag"}}));te((0,$l.lW)())},[L,js,te,dt,zs,ni,cn]),pc=(0,W.useCallback)(nt=>{(0,fa.ro)([nt.id],!1,L,cn),js(ei=>({newValue:Up(ei,`${nt.path}/layout`,nt.layout),meta:{sourceFluidEngineAction:"user-resized-block"}}))},[js,L,cn]),Tl=(0,W.useCallback)(nt=>{(0,fa.ro)(nt.selectedBlockIds,!1,L,cn),js(ei=>({newValue:(0,vl.vc)({fluidEngineContext:ei,selectedBlockIds:nt.selectedBlockIds,deviceKey:ni,blockLayoutsById:nt.blockLayoutsById}),meta:{sourceFluidEngineAction:"user-multiresized-blocks"}}))},[ni,js,L,cn]),Fo=(0,W.useCallback)(async nt=>{try{const ei=await(0,on.Gg)(nt.content.value),Ui={...nt,content:{...nt.content,value:ei}};tt.current=(0,Wn.IF)(Ui),js(rn=>({newValue:(0,vl.c1)(rn,Ui),meta:{sourceFluidEngineAction:"user-added-block"}}))}catch{xi(!0)}},[js]),[Kr,Il]=(0,W.useState)(oe.length>0);(0,W.useEffect)(()=>{Kr&&ee()},[Kr,ee]);const Dl=(0,W.useCallback)((nt,ei)=>{if(Il(!1),ee(),nt===tt.current){let Ui=!1;js(rn=>{const Hn=(0,mr.ZP)(rn,Gn=>{const Nn=Gn.gridContents.find(Lo=>(0,Wn.IF)(Lo)===nt);if(!Nn)return;const bs=(0,ko.r2)(ei,Nn.content.value,En,os),Bn=Nn.layout[ni],xs=Math.max(Bn.end.y,Bn.start.y+bs-1);Ui=Ui||xs!==Bn.end.y,Bn.end.y=xs;const qs=Gn.gridSettings.breakpointSettings[ni],ca=Math.max(qs.rows,Bn.end.y+1);Ui=Ui||qs.rows!==ca,qs.rows=ca});if(Ui)return{newValue:Hn,meta:{undoable:!1,sourceFluidEngineAction:"block-size-auto-adjusted-after-first-render"}}})}},[ee,os,En,ni,js]),fc=(0,W.useCallback)(nt=>{const ei=nt.newBlockData;Fo({...ei,layout:{...ei.layout,desktop:{...ei.layout.desktop,...nt.currentPosition}}}),te((0,Ct.oo)(L)),(0,fa.Y3)(ei,"drag-block",L,cn),setTimeout(()=>{$.current&&zs([(0,Wn.IF)(nt.newBlockData)])},0)},[Fo,zs,te,L,$,cn]),ir=(0,W.useCallback)(nt=>{const ei=document.querySelector("[data-selection-box]");return oe.reduce((rn,Hn)=>{let{layout:Gn,content:Nn}=Hn;const bs=Nn.value.id,Bn=Gn[ni];if(Oa){const oi=na[bs];if(!(!oi||oi.depth===0))return rn}const xs=nt.start.x>nt.end.x,qs=nt.start.y>nt.end.y,ca=xs?nt.start.x>Bn.start.x&&nt.end.x<Bn.end.x:(0,f.inRange)(Bn.start.x,nt.start.x,nt.end.x)||(0,f.inRange)(Bn.end.x,nt.start.x,nt.end.x+1)||(0,f.inRange)(nt.start.x,Bn.start.x,Bn.end.x)||(0,f.inRange)(nt.end.x,Bn.start.x,Bn.end.x+1),Lo=qs?nt.start.y>Bn.start.y&&nt.end.y<Bn.end.y:(0,f.inRange)(Bn.start.y,nt.start.y,nt.end.y)||(0,f.inRange)(Bn.end.y,nt.start.y,nt.end.y+1)||(0,f.inRange)(nt.start.y,Bn.start.y,Bn.end.y)||(0,f.inRange)(nt.end.y,Bn.start.y,Bn.end.y+1);return(ca&&Lo&&Bn.visible||(0,Bc.$0)(bs,ei))&&rn.push(bs),rn},[])},[oe,ni,Oa,na]),Ga=(0,T.Ze)(nt=>(0,P.Kq$)(nt)===L),Ol=(0,W.useCallback)(nt=>Et(nt),[]),Ll=(0,W.useCallback)(()=>{G&&(te(Ga?(0,Ct.hK)():(0,Ct.tj)(L)),Ga||_r.p8.track({action:_r.kA.OPEN,event_name:"UserOpensLayersPanel",object_type:_r.W9.PANEL,display_mode:ni===Er?"desktop":"mobile",is_keyboard_shortcut:!0,num_blocks:oe.length}))},[te,Ga,G,L,ni,oe]),Pl=nt=>{te((0,Ms.fc)({blockIds:nt,sectionId:L,visible:!1,deviceKey:ni,isTriggeredByKeyboard:!0}))},{getAreaOfBlocksMovedWithKeys:Gr}=Mp({blocksById:xe,sectionId:L,numRows:zn,numCols:yn,containerNode:De,deviceKey:ni,focusedBlockId:Ji,multiselectedBlockIds:hs,rowGapSize:os,isSectionHovered:G,unstretchedRowHeight:En,onPrepareGrid:io,onRequestBlockFocus:zs,onRequestDeleteBlocks:qa,onRequestDuplicateBlocks:La,setIsMultiselectKeyDown:At,setIsMovingWithKeys:jr,setIsDuplicateKeyDown:Ot,setIsSymmetricKeyDown:ii,handleSetBlockCentered:Ol,toggleGrid:Ar,toggleLayersPanel:Ll,hideBlock:Pl,onValueChange:js,isSymmetricKeyDown:jt,isLayersPanelOpenForThisSection:Ga}),Zr=(0,W.useRef)(null),[no,Ml]=(0,W.useState)(!1),Tr=V&&G&&!no&&!On,[Xr,Wo]=(0,W.useState)(!0);(0,W.useEffect)(()=>{const nt=Pi==null?void 0:Pi.querySelector("[data-fluid-engine]");if(!(Tr&&Pi&&nt))return;const ei=Pi.getBoundingClientRect().bottom,Ui=nt.getBoundingClientRect().bottom;Wo(ei-Ui>Fp/2)},[Pi,Tr]),(0,W.useEffect)(()=>{(0,Ct.Vq)(no)},[no]);const[ho,Ir]=(0,W.useState)(null),Za=(0,W.useCallback)(nt=>{Ir(nt)},[]);(0,W.useEffect)(()=>{Ir(null)},[zn]);const Qr=(0,W.useCallback)(nt=>{Ml(!1),Ir(null),typeof nt=="number"&&te((0,fs._X)({deviceKey:ni,sectionId:L,rowCount:nt}))},[te,ni,L]);Rp({containerNode:De,deviceKey:ni,gridContents:oe,isDraggingRowCount:no,rowCountDragNode:Zr,onRowCountDragEnd:Qr,totalRowHeightInPx:En+os,updateRowCount:Za,sectionId:L,sectionHasRoomForDragNode:Xr,stacksInfo:na});const{anyDragIsActiveOverGrid:Do,attachMoveDropHandler:_a,attachResizeDropHandler:wl,attachMultiResizeDropHandler:Oo,multiselectMoveIsActiveOverGrid:nr,multiResizeDragIsActiveOverGrid:Pa}=Ip({blocksById:xe,deviceKey:ni,containerNode:De,containerWidth:pt,gutterWidth:to,multiselectedBlockIds:hs,updateRowCount:Za,handleSetBlockCentered:Ol,fluidEngineId:ae,numRows:zn,numCols:yn,unstretchedRowHeight:En,rowGapSize:os,columnWidth:Ss,columnGapSize:la,sectionWidth:Pi?Pi.clientWidth:0,getMultiselectionArea:Uo,isSymmetricKeyDown:jt});(0,W.useEffect)(()=>{te(Pa?(0,Ct.a5)():(0,Ct.E_)())},[Pa,te]);const[Dr]=(0,W.useState)(`fe-${Math.random().toString(36).substring(3)}`),mc=ut||hs.length>1?`.${Dr} .sqs-block { pointer-events: none !important; } `:" ",Rl=Do?" .rte-dropcursor { display: none; } ":" ",vc=ho?{...ue,[ni]:{...ue[ni],rows:ho}}:ue,Jr=mc+Rl+(0,on.Vx)({variableDeclarationClassName:Dr,className:Dr,breakpointSettings:vc,rowGap:si,columnGap:Gi});(0,W.useEffect)(()=>{const nt=(0,Ei.wo)();if(!nt)return;let ei=nt.body,Ui=nt.body;Pn&&(ei=Pi,Ui=Pi.querySelector(".content-wrapper")),ei&&!window.MOBILEAPP&&_a(ei),Ui&&!window.MOBILEAPP&&(wl(Ui),Oo(Ui))},[_a,wl,Oo,Pi,Pn]),(0,W.useEffect)(()=>{var nt;const ei=Ui=>{const rn=Ui.detail;(rn==null?void 0:rn.sectionId)===L&&Fo(rn.newBlock)};return(nt=(0,Ei.wo)())===null||nt===void 0||nt.addEventListener("create-stack",ei),()=>{var Ui;(Ui=(0,Ei.wo)())===null||Ui===void 0||Ui.removeEventListener("create-stack",ei)}},[Fo,L]);const sr=(Ji?xe[Ji]:null)??null,$r=(sr==null?void 0:sr.layout[ni])??null,Bl=(0,W.useCallback)(()=>$r??Uo()??null,[$r,Uo]),Nl=!!(Ji?[Ji]:hs).length,[kl,Or]=(0,W.useState)(!1);(0,W.useEffect)(()=>{const nt=Bl();if(!Nl||!nt){Or(!1);return}Or((0,Wn.aE)(nt,yn))},[yn,Bl,Nl]);const so=(0,T.Ze)(P.rI6),Yr=ze||Do||no||be||so;(0,W.useEffect)(()=>{Do||Et(!1)},[Do]);const Lr=(0,W.useCallback)(()=>{ft(nt=>!nt)},[]);(0,W.useEffect)(()=>{const nt=[];(0,Us.cr)("fluid_engine_debug_toggle")&&nt.push({contents:W.createElement(Yn.Z,{alignItems:"center"},W.createElement("span",null,"Debug"),W.createElement(kc.Z,{ml:3,checked:Rt,css:{pointerEvents:"none"}})),onClick:()=>{te((0,Ct.q$)())},key:"toggle-fe-debug",sectionId:L}),pa.Z.isFeatureEnabled(yo().FLUID_ENGINE_SHOW_GRID_TOGGLE)&&nt.push({contents:W.createElement(Yn.Z,{alignItems:"center"},W.createElement(qi.T,{project:"apps.App"},"Show Grid"),W.createElement(kc.Z,{ml:3,checked:ze,css:{pointerEvents:"none"}})),onClick:Lr,key:"show-grid",sectionId:L});const ei=[];ni===Er&&nt.unshift({contents:W.createElement(Yn.Z,{alignItems:"center"},W.createElement(Dc.Z,{sx:{paddingRight:2}}),W.createElement(qi.T,{project:"apps.App",style:{fontSize:se[2],textTransform:"uppercase"}},"Add Block")),onClick:()=>te((0,Ct.OA)(L)),key:"add-block",buttonAttributes:{...(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.ADD_BLOCK_BUTTON)},sectionId:L}),(0,Us.cr)("fe-hide-show-block")&&nt.unshift({contents:W.createElement(Ph.Z,null),onClick:()=>{te(Ga?(0,Ct.hK)():(0,Ct.tj)(L)),Ga||_r.p8.track({action:_r.kA.OPEN,event_name:"UserOpensLayersPanel",object_type:_r.W9.PANEL,display_mode:ni===Er?"desktop":"mobile",is_keyboard_shortcut:!1,num_blocks:oe.length})},htmlAttributes:{"data-layers-panel-button":L,class:Ii.BLOCK_FOCUS_IGNORE_CLASSNAME},buttonAttributes:{"aria-label":(0,l.t)("Open Layers Panel",null,{project:"apps.App"})},isIconOnly:!0,active:Ga,tooltipOptions:{label:(0,l.t)("Layers",null,{project:"apps.App"}),controls:["L"],delay:{enter:500,exit:0}},key:"layers-panel",sectionId:L}),H({left:nt,right:ei})},[ni,se,ze,Rt,H,Lr,te,L,Ga,oe]);const xl=Ne?!ut:!1,Pr=hs.length>1&&!xl;(0,W.useEffect)(()=>{const nt=V&&Pr&&!nr&&Qs.current;U(!!nt,Qs.current)},[V,Pr,nr,U]);const ql=(0,W.useCallback)(()=>Ue(!0),[]),_c=(0,W.useCallback)(nt=>{const ei=nt?ir(nt):[];Pe(Ui=>(0,f.isEqual)(ei,Ui)?Ui:ei)},[ir]),Ul=(0,W.useCallback)(nt=>{if(!nt){requestAnimationFrame(()=>{$.current&&Ue(!1)}),hs.length>0&&To();return}const ei=ir(nt);if(ei.length===0){!ut&&hs.length>0&&To();return}(0,fa.V7)("drag_select",ei.map(rn=>xe[rn]));const Ui=ut?[...new Set((0,f.compact)([...ei,...hs,Ji]))]:ei;zs(Ui),requestAnimationFrame(()=>{$.current&&Ue(!1)})},[xe,ir,Ji,ut,hs,To,zs,$]);(0,W.useEffect)(()=>{V||te((0,Ct.oo)(L))},[te,V,L]);const Ec=nt=>{const ei=Gr();return ei?cg(nt,ei):null},yc=nt=>{const ei=Gr();return ei?(0,ec.Z8)(nt,ei,yn):null},pd=nt=>{const ei=Gr();return ei?(0,ec.OD)(nt,ei):null};return!oe||!de||!Pi?null:W.createElement(W.Fragment,null,V&&Kr?W.createElement(kp.Z,{isOverlay:!0,size:"large",verticalAlign:"center",horizontalAlign:"center"}):null,V&&Pi?W.createElement(kg,{sectionNode:Pi,fluidEngineId:ae,rowGap:si,onAddBlock:Fo,onDrop:fc}):null,W.createElement(gl,{css:Jr}),W.createElement("div",{className:it()(Dr,"fluid-engine",{"is-editing":V,[qo().gridIsVisible]:Yr,"is-dragging-row-count":no}),"data-test":"fluid-engine","data-grid-is-visible":Yr,role:"grid","aria-multiselectable":"true",ref:Ve},V&&De&&!window.MOBILEAPP?W.createElement(op,{containerId:ae,columnWidth:Ss,rowSize:En,numCols:yn,numRows:ho??zn,columnGap:la,deviceKey:ni,isVisible:Yr,gutterWidth:to,sectionNode:Pi,sectionId:L,isFirstSection:M===0,isMovingBlockCentered:Ye,isSelectedAreaCentered:kl,isDragging:Do,isSectionHovered:G}):null,oe.map((nt,ei)=>{let{layout:Ui,content:rn}=nt;const Hn=hs.includes(rn.value.id),Gn=Ji===rn.value.id,Nn=Oa?na[rn.value.id]:null,bs=!!(Ji&&Hp({stacksInfo:na,maybeAncestorId:rn.value.id,maybeDescendantId:Ji}));return W.createElement(Eg,{key:`${rn.value.type}-${rn.value.id}-${Nn==null?void 0:Nn.parentId}-${Nn==null?void 0:Nn.depth}`,layout:Ui,value:rn.value,fluidEngineId:ae,sectionId:L,deviceKey:ni,onClick:Js,adjustGridForBlockHeightChange:Io,onAfterFirstRender:Dl,onBlockChange:tr,path:`#/gridContents/${ei}`,positionArgs:Ka,onMoveEnd:zr,onResizeEnd:pc,multiselectDragNode:De,selectedBlockIds:hs,onRequestDelete:er,isDrawingMultiselectionArea:Ne,isMovingWithKeys:Gn&&be,isMultiselected:Hn,isLayersPanelOpenForThisSection:Ga,isInMultiselectionTarget:vt.includes(rn.value.id),isDraggingInMultiselectMove:Hn&&nr,isDraggingRowCount:no,isFocused:Gn,isDuplicateKeyDown:dt,isMultiselectKeyDown:ut,isAnyBlockSelected:!!Ji||!!hs.length,isEditingEnabled:V,isAtLeftEdge:Ui[ni].start.x===0,isAtRightEdge:Ui[ni].end.x===yn+1,getMultiselectionArea:Uo,isMultiResizing:Pa,isTopVisible:Ut!==null&&Rn!==null&&Ui[ni].start.y>=Ut&&Ui[ni].start.y<Rn,isBottomVisible:Ut!==null&&Rn!==null&&Ui[ni].end.y<=Rn&&Ui[ni].end.y>Ut,isBlockNearAreaMovedWithKeys:be&&!Hn&&!Gn&&!!Ec(Ui[ni]),doesBlockMatchWidthOfAreaMovedByKeys:be&&!Hn&&!Gn&&!!yc(Ui[ni]),doesBlockMatchHeightOfAreaMovedByKeys:be&&!Hn&&!Gn&&!!pd(Ui[ni]),isInsideStack:Oa&&(Nn==null?void 0:Nn.parentId)!==null,isAncestorOfFocusedBlock:bs})}),V&&Pr?W.createElement(gp,{fluidEngineId:ae,getMultiselectionArea:Uo,selectedBlockIds:hs,onDrop:zr,isMultiselectKeyDown:ut,isDuplicateKeyDown:dt,ref:Qs,blocksById:xe,onMultiResizeEnd:Tl,containerNode:De,unstretchedRowHeight:En,rowGapSize:os,numCols:yn}):null,V&&De&&Z&&!Do&&!jn?W.createElement(Ep,{editorUINode:Z,sectionNode:Pi,containerNode:De,onSelectionStart:ql,onSelectionUpdate:_c,onSelectionEnd:Ul}):null,V?W.createElement(ep,{fluidEngineId:ae,deviceKey:ni,blocksById:xe,positionArgs:Ka,numRows:ho??zn,isDuplicating:dt,onPrepareGrid:io,isSymmetricKeyDown:jt}):null,!Ji&&!as?W.createElement(qp,{ref:Zr,isDraggingRowCount:no,onDragStart:()=>Ml(!0),deviceKey:ni,isDragRowCountHandleVisible:Tr,sectionHasRoomForDragNode:Xr}):null),Rt&&W.createElement(Wp,{sectionNode:Pi},W.createElement(mn.Z,{css:{position:"absolute",top:M===0?"30%":"80px",left:0,zIndex:9999999999},backgroundColor:"rgba(95, 172, 211, 0.8)",px:2},W.createElement(Vi.Z,{color:"white",fontWeight:"bold",m:0},"Section ID: ",L),W.createElement(Vi.Z,{color:"white",fontWeight:"bold",m:0},"Section #",M+1))),W.createElement(Np.Z,{isOpen:Si,onRequestClose:()=>xi(!1)}))};function jp(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}class zp extends W.Component{static getDerivedStateFromError(L){var M,U;if(!((0,ka.Ft)()&&(!((M=L.message)===null||M===void 0)&&M.includes("Failed to execute 'removeChild' on 'Node'")||!((U=L.message)===null||U===void 0)&&U.includes("Failed to execute 'insertBefore' on 'Node'"))))return{hasError:!0}}componentDidCatch(L,M){{const U=new Error(`[FLUID_ENGINE] ${L.message}`);U.name=L.name,U.stack=L.stack,k.$e(H=>{H.setTag("product_area","fluid_engine"),H.setTag("owner",ml().WEBSITE_EDITOR),H.setExtra("componentStack",M==null?void 0:M.componentStack),k.Tb(U)})}}render(){return this.state.hasError?W.createElement(mn.Z,{py:8},W.createElement("h2",null,(0,l.t)("Something went wrong. Please refresh the page to try again.",null,{project:"apps.App"}))):this.props.children}constructor(...L){super(...L),jp(this,"state",{hasError:!1})}}const Kp=W.memo(function(L){return W.createElement(zp,null,W.createElement(Ci.o,null,W.createElement(Vp,L)))});var _l=t(35351);function fu(K){const L=(0,Ei.wo)();return L?L.querySelector(`[data-section-id="${K}"] [data-fluid-engine]`):null}const Gp={delay:75,enableMouseEvents:!0},Zp={};function mu(K){let{features:L,region:M,isEditingEnabled:U,sectionId:H,sectionIndex:V,sectionNode:G}=K;const Z=(0,Ei.wo)(),[ee,$]=(0,W.useState)(null),[te,se]=(0,W.useState)(!1),ae=(0,T.Ze)(tt=>(0,th.DZ)(tt,H)),oe=(0,T.Ze)(P.lyB),de=(0,W.useRef)(),ue=(0,T.zC)(),xe=(0,T.Ze)(P.goW),[De,Ve]=(0,W.useState)(null),[pt,ot]=(0,W.useState)(!1),[ut,At]=(0,W.useState)(!1);(0,W.useEffect)(()=>{if(!G)return;const tt=()=>(0,_l.C4)({sectionNode:G}),Kt=Rt=>{var Oi;const Si=Rt.relatedTarget,xi=Si&&((Oi=Si.closest)===null||Oi===void 0?void 0:Oi.call(Si,Ts.Gg));(0,_l._g)(G)};return G.matches(":hover")&&tt(),G.addEventListener("mouseenter",tt),G.addEventListener("mouseleave",Kt),()=>{G.removeEventListener("mouseenter",tt),G.removeEventListener("mouseleave",Kt)}},[G,H,ue,te,Z]);const ze=(0,W.useRef)(null);(0,W.useEffect)(()=>{if(ae&&!te){const tt=fu(H);if(!tt)return;const Kt=tt.ownerDocument.createElement("div");Kt.classList.add("fluid-engine-placeholder-height-spacer"),Kt.innerHTML=`
  <style>
    .fluid-engine-placeholder-height-spacer:only-child { min-height: ${tt.clientHeight}px; }
    .fluid-engine-placeholder-height-spacer:not(:only-child) { display: none; }
  </style>
`,ze.current=Kt,tt.innerHTML="",tt.appendChild(ze.current),se(!0)}},[H,ae,te]),(0,W.useEffect)(()=>(de.current=new MutationObserver(tt=>{let[Kt]=tt;const Rt=Kt.target;At((0,_l.Ls)({frameDocument:Rt.ownerDocument})===Rt.getAttribute("data-section-id"))}),de.current.observe(G,{attributes:!0,attributeFilter:[_l.Zi]}),()=>{var tt;!((tt=de.current)===null||tt===void 0)&&tt.disconnect&&de.current.disconnect()}),[G]);const ft=(0,W.useCallback)((tt,Kt)=>{ot(tt),Ve(Kt)},[]),vt=ae&&te?fu(H):null,[Pe,Ne]=(0,W.useState)(null),Ue=(0,T.Ze)(tt=>(0,P.NlV)(tt,H)),{platform:be}=(0,W.useContext)(Zo.Z.Context),Ye=be!=="desktop"?wr.zr:il.PD,Et=Ye===wr.zr?Gp:Zp,dt=(0,Ei.V6)(),Ot=(0,W.useCallback)(()=>{ze.current&&(ze.current.remove(),ze.current=null)},[]);(0,W.useEffect)(()=>()=>{ze.current&&(ze.current.remove(),ze.current=null)},[]);const[jt,ii]=(0,W.useState)(0);return(0,W.useEffect)(()=>{if(!U&&(0,ka.Ft)())return()=>ii(tt=>++tt)},[U]),W.createElement(W.Fragment,null,U?W.createElement(ah,{sectionId:H,sectionNode:G,sectionIndex:V},W.createElement(eh,{sectionId:H,sectionNode:G,sectionIndex:V,extraToolbarButtons:ee,region:M,features:L,sectionsAreMoving:oe,isSectionHovered:ut,ref:Ne})):null,pt&&De&&Ue&&!xe?W.createElement(Lh,{multiselectedAreaNode:De,sectionId:H,value:Ue}):null,vt&&Ue?(0,ks.createPortal)(W.createElement(W.Fragment,null,W.createElement(Vl.Z,{cacheKey:"fluid-engine",container:G.ownerDocument.head},W.createElement(tl.W,{backend:Ye,context:dt,options:Et},W.createElement(Kp,{key:jt,isEditingEnabled:U,sectionId:H,sectionIndex:V,editorUINode:Pe,requestToolbarButtons:$,requestMultiselectedToolbar:ft,isSectionHovered:ut,onReady:Ot})))),vt):null)}const Xp=K=>{let{sectionId:L,requestClose:M,isEditorOpen:U}=K;const[H,V]=(0,W.useState)(),G=(0,W.useCallback)((Z,ee)=>{if(!(H!=null&&H.isConnected)&&(ee.disconnect(),L)){const $=(0,bn.jd)(L);V($)}},[L,H==null?void 0:H.isConnected]);(0,W.useEffect)(()=>{L&&V((0,bn.jd)(L))},[L]),(0,W.useEffect)(()=>{if(H!=null&&H.parentElement){const Z=new MutationObserver(G);return Z.observe(H.parentElement,{childList:!0}),()=>{Z.disconnect()}}},[G,H]),(0,W.useEffect)(()=>{if(H){const Z=$=>{let[{isIntersecting:te}]=$;!te&&U&&M()},ee=new IntersectionObserver(Z,{threshold:[0,1]});return ee.observe(H),()=>{ee.disconnect()}}},[H,U,M])};var Ao=t(139581),yr=t(743398),Qp=t(190155),Jp=t(739676),$p=t(728993),ws=t.n($p),Yp=t(700580),ef=t(159932);const{DESKTOP:ic,MOBILE:nc}=wn.FluidEngineBreakpoints,tf=K=>{let{block:L,blockNode:M,sectionId:U,gridContents:H,deviceKey:V,isBlockFocused:G,rowCount:Z,bulkAction:ee,setIsScrollingToBlock:$,lastSelectedBlock:te,orderedBlockIds:se,isAnyAncestorHidden:ae}=K;const oe=(0,T.zC)(),de=(0,T.Ze)(P.Bgn),ue=(0,Wn.IF)(L),xe=L.layout[V],De=xe.visible,Ve=L.layout[ic].visible,pt=L.layout[nc].visible,ot=(0,xo.q5)(ue),ut=(0,Ei.V6)(),At=(0,W.useMemo)(()=>(0,on.S6)(H),[H]),ze=(0,T.Ze)(da.oG),ft=(0,T.Ze)(P.eOW),vt=(0,W.useMemo)(()=>(0,f.debounce)(()=>oe((0,Ct.cF)(U)),500,{leading:!0,trailing:!1}),[oe,U]),Pe=(0,W.useMemo)(()=>{let jt=!1,ii=!1;if(!At||!ue||!L)return{hasIntersectingBlocksInFront:jt,hasIntersectingBlocksBehind:ii};const tt=L.layout[V].zIndex;for(const[Kt,Rt]of Object.entries(At))if(Kt!==ue&&((0,ec.ln)(L.layout[V],Rt.layout[V])&&(jt=jt||tt<Rt.layout[V].zIndex,ii=ii||tt>Rt.layout[V].zIndex),jt&&ii))break;return{hasIntersectingBlocksInFront:jt,hasIntersectingBlocksBehind:ii}},[At,V,L,ue]),Ne=(0,W.useCallback)((jt,ii)=>{if(ut){const tt=M==null?void 0:M.getBoundingClientRect();!(tt&&tt.top>=0&&tt.bottom<=ut.innerHeight)&&!jt?(M==null||M.scrollIntoView({behavior:"smooth",block:"center"}),$(!0),ut.addEventListener("scrollend",function Rt(){ii(),$(!1),ut.removeEventListener("scrollend",Rt)})):ii()}},[M,ut,$]),Ue=(0,W.useCallback)(jt=>{if(!De||ae||!ut)return;jt.stopPropagation();const ii=(0,ul.Z)()&&jt.metaKey||jt.shiftKey;Ne(ii,()=>{var tt;oe((0,Ct.lT)(ue)),ot==null||(tt=ot.blockEditor)===null||tt===void 0||tt.openEditor()})},[De,ae,ut,Ne,oe,ue,ot==null?void 0:ot.blockEditor]),be=(0,W.useCallback)(jt=>{if(!De||ae)return;jt.stopPropagation(),jt.preventDefault();const ii=(0,ul.Z)(),tt=ii&&jt.metaKey||!ii&&jt.ctrlKey,Kt=jt.shiftKey,Rt=Si=>{const xi=[];if(de&&de.includes(ue)&&tt?xi.push(...de.filter(Pi=>Pi!==ue)):(de&&xi.push(...de),xi.push(ue)),Si&&te.current){const Pi=se.indexOf(te.current),cn=se.indexOf(ue);if(Pi!==-1&&cn!==-1){const jn=se.slice(Math.min(Pi,cn)+1,Math.max(Pi,cn));xi.push(...jn)}}const Pn=(0,on.UQ)({blocks:H,blockIds:xi});oe((0,Ct.pU)({sectionId:U,blockIds:xi,initialLayout:Pn}))},Oi=()=>{(tt||Kt)&&de?(Rt(Kt),te.current=ue):!G||de&&(de==null?void 0:de.length)>1?(oe((0,Ct.lT)(ue)),te.current=ue):oe((0,Ct.wv)())};Ne(tt||Kt,()=>{Oi()})},[De,ae,Ne,de,ue,te,H,oe,U,se,G]),Ze=(0,W.useCallback)(()=>{!De&&L.layout&&xe.end.y+1>Z&&oe((0,fs._X)({deviceKey:V,sectionId:U,rowCount:xe.end.y+1})),oe((0,Ms.fc)({sectionId:U,blockIds:[ue],visible:!De,deviceKey:V,isTriggeredByKeyboard:!1}))},[De,L.layout,oe,U,ue,V,xe.end.y,Z]),Ye=()=>{if(oe((0,Ct.XC)(ue)),ee)switch(ee){case El.HIDE:oe((0,Ms.fc)({sectionId:U,blockIds:[ue],visible:!1,deviceKey:V,isTriggeredByKeyboard:!1}));break;case El.SHOW:oe((0,Ms.fc)({sectionId:U,blockIds:[ue],visible:!0,deviceKey:V,isTriggeredByKeyboard:!1}));break}},Et=()=>oe((0,Ct.ci)()),dt=(0,W.useCallback)(jt=>{jt.preventDefault(),jt.stopPropagation(),oe((0,Ct.lT)(ue));const ii=[{label:(0,l.t)("Copy",null,{project:"apps.App"}),onClick:()=>{oe((0,Ct.CU)([ue],!1)),oe((0,Ct.nQ)({isOpen:!1,menuOptions:[],pos:{x:0,y:0}}))},shortcut:["ctrl","C"]},{label:(0,l.t)("Paste",null,{project:"apps.App"}),onClick:()=>{vt()},shortcut:["ctrl","V"],disabled:ft===null},{label:(0,l.t)("Duplicate",null,{project:"apps.App"}),onClick:()=>{oe((0,Ct.yt)({sectionId:U,blockIds:[ue],sourceAction:"button",deviceKey:V}))},shortcut:["ctrl","D"]},{label:(0,l.t)("Delete",null,{project:"apps.App"}),onClick:()=>{oe((0,Ct.y8)({sectionId:U,blockIds:[ue],isKeyboard:!1}))},shortcut:["delete"],hasBottomLine:!0},{label:(0,l.t)("Arrange",null,{project:"apps.App"}),onClick:()=>{},hasBottomLine:!0,disabled:!Pe.hasIntersectingBlocksInFront&&!Pe.hasIntersectingBlocksBehind,children:[{label:(0,l.t)("Move forward",null,{project:"apps.App"}),onClick:()=>{oe((0,Ms.Qy)({blockId:ue,sectionId:U,deviceKey:V,direction:1}))},shortcut:["shift","\u2191"],disabled:!Pe.hasIntersectingBlocksInFront},{label:(0,l.t)("Move to front",null,{project:"apps.App"}),onClick:()=>{oe((0,Ms.Qy)({blockId:ue,sectionId:U,deviceKey:V,direction:2}))},disabled:!Pe.hasIntersectingBlocksInFront},{label:(0,l.t)("Move backward",null,{project:"apps.App"}),onClick:()=>{oe((0,Ms.Qy)({blockId:ue,sectionId:U,deviceKey:V,direction:-1}))},shortcut:["shift","\u2193"],disabled:!Pe.hasIntersectingBlocksBehind},{label:(0,l.t)("Move to back",null,{project:"apps.App"}),onClick:()=>{oe((0,Ms.Qy)({blockId:ue,sectionId:U,deviceKey:V,direction:-2}))},disabled:!Pe.hasIntersectingBlocksBehind}]},...Ve?[{label:(0,l.t)("Hide on desktop",null,{project:"apps.App"}),onClick:()=>{oe((0,Ms.fc)({sectionId:U,blockIds:[ue],visible:!1,deviceKey:ic,isTriggeredByKeyboard:!1}))},shortcut:["ctrl","H"]}]:[],...Ve?[]:[{label:(0,l.t)("Show on desktop",null,{project:"apps.App"}),onClick:()=>{oe((0,Ms.fc)({sectionId:U,blockIds:[ue],visible:!0,deviceKey:ic,isTriggeredByKeyboard:!1}))}}],...pt?[{label:(0,l.t)("Hide on mobile",null,{project:"apps.App"}),onClick:()=>{oe((0,Ms.fc)({sectionId:U,blockIds:[ue],visible:!1,deviceKey:nc,isTriggeredByKeyboard:!1}))}}]:[],...pt?[]:[{label:(0,l.t)("Show on mobile",null,{project:"apps.App"}),onClick:()=>{oe((0,Ms.fc)({sectionId:U,blockIds:[ue],visible:!0,deviceKey:nc,isTriggeredByKeyboard:!1}))}}]];oe((0,Ct.nQ)({isOpen:!0,menuOptions:ii,pos:{x:jt.pageX,y:jt.pageY}}))},[oe,ue,Pe,V,Ve,pt,U,vt,ft]),Ot=(0,hr.Z)(H);return(0,W.useEffect)(()=>{ze.isOpen&&!(0,f.isEqual)(Ot,H)&&oe((0,Ct.nQ)({isOpen:!1,menuOptions:[],pos:{x:0,y:0}}))},[Ot,H,ze,oe]),{toggleVisibility:Ze,openBlockEditor:Ue,handleFocusBlock:be,setHoveredBlock:Ye,clearHoveredBlock:Et,openContextMenu:dt}};var nf=t(769423),sf=t(275272),af=t(734526),of=t(414998),rf=t(756732),lf=t(167592),cf=t(488475);const uf=()=>W.createElement("svg",{style:{marginRight:11},width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},W.createElement("rect",{x:"4",y:"5",width:"4",height:"4",stroke:"#0E0E0E",strokeWidth:"2"}),W.createElement("rect",{x:"4",y:"13",width:"4",height:"4",stroke:"#0E0E0E",strokeWidth:"2"}),W.createElement("path",{d:"M14 4V14.6716L11 11.6716V14.5L15 18.5L19 14.5V11.6715L16 14.6715V4L14 4Z",fill:"#0E0E0E"})),df=()=>W.createElement("svg",{style:{marginRight:11},width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},W.createElement("rect",{x:"5",y:"4",width:"4",height:"4",stroke:"#0E0E0E",strokeWidth:"2"}),W.createElement("rect",{x:"13",y:"4",width:"4",height:"4",stroke:"#0E0E0E",strokeWidth:"2"}),W.createElement("path",{d:"M4 16L4 14H14.67L11.67 11H14.5L18.5 15L14.5 19H11.67L14.67 16H4Z",fill:"#0E0E0E"})),hf=K=>{const L=e.Z.getWebsiteComponentBlockConfig(K);return L==null?void 0:L.legacyBlockType};function gf(K){const L=K.replace(/<br\s*\/?>/gi," ").replace(/<\/(h[1-6]|p|div|li|ul|ol|blockquote|pre)>/gi," </$1>"),M=document.createElement("div");return M.innerHTML=L,M.textContent||""}const pf=(K,L)=>{let M=K.content.value.type;if(M===_n.Z.WEBSITE_COMPONENT){const H=e.Z.getWebsiteComponentBlockConfig(K.content.value.definitionName);if(H)if(H!=null&&H.legacyBlockType)M=H.legacyBlockType;else return H.label}switch(M){case _n.Z.HTML:const H=gf(K.content.value.value.html);if(H)return H;case _n.Z.PRODUCT:var U;const V=L==null||(U=L.querySelector("img"))===null||U===void 0?void 0:U.alt;if(V)return V;case _n.Z.QUOTE:const G=K.content.value.value.quote;if(G)return G;default:return of.A[M]}},ff=K=>{if(K.content.value.type===_n.Z.WEBSITE_COMPONENT){if(K.content.value.definitionName==="website.components.stack"){const M=K.content.value.value.direction;return M?M==="column"?uf:df:lf.Z}const L=e.Z.getWebsiteComponentBlockConfig(K.content.value.definitionName);return cf[L==null?void 0:L.iconName]}return rf.c[af.Z.BlockTypeKebab[K.content.value.type]]},vu=K=>{let{url:L,isVideo:M,theme:U}=K;return W.createElement(mn.Z,{sx:{mr:2,display:"flex",alignItems:"center"}},M&&W.createElement(nf.Z,{color:"base",style:{mr:U.space[1],position:"absolute"},width:U.sizes.sizes[125],height:U.sizes.sizes[125]}),W.createElement("img",{style:{borderRadius:"2px",userSelect:"none",minWidth:"22px"},src:L,width:22,height:22,alt:"Preview of block in layers panel"}))},mf=K=>{let{block:L,legacyBlockType:M,blockNode:U}=K;var H;const V=(0,hl.F)(),G=ff(L);if(M&&[_n.Z.IMAGE,_n.Z.PRODUCT].includes(M)&&(!(U==null||(H=U.querySelector("img"))===null||H===void 0)&&H.src)){var Z;return W.createElement(vu,{theme:V,url:(U==null||(Z=U.querySelector("img"))===null||Z===void 0?void 0:Z.src)??""})}else if(M===_n.Z.VIDEO){var ee;const te=JSON.parse((U==null||(ee=U.querySelector("[data-config-video]"))===null||ee===void 0?void 0:ee.getAttribute("data-config-video"))??"{}").alexandriaUrl;if(te)return W.createElement(vu,{theme:V,url:te.replace("{variant}","thumbnail"),isVideo:!0})}else if(M===_n.Z.SHAPE){const $=sf.default.getSvgEl(L.content.value.value.shape);if($)return W.createElement($,{width:"22px",height:"22px",style:{marginRight:V.space[2],pointerEvents:"none",minWidth:V.sizes.sizes[150]}})}return W.createElement(G,{sx:{mr:2,pointerEvents:"none",minWidth:V.sizes.sizes[150]}})},vf=K=>{let{isAlwaysVisible:L,isDragging:M,isEnabled:U,icon:H,onPointerDown:V,onPointerUp:G,onClick:Z,ariaLabel:ee}=K;return W.createElement(ll.Z.Element.WithoutFeedback,{"aria-label":ee,className:it()(ws().layerItemActionButton,{[ws().visible]:L,[ws().isEnabled]:U,[ws().dragging]:M}),onKeyDown:$=>{(Na.Z.isSpace($)||Na.Z.isEnter($))&&($.stopPropagation(),Z($))},onPointerDown:$=>{$.preventDefault(),$.stopPropagation(),V($)},onPointerUp:$=>{$.preventDefault(),$.stopPropagation(),G($)},onDoubleClick:$=>{$.preventDefault(),$.stopPropagation()}},W.createElement(Yn.Z,{p:"10px"},H))},_f=(0,l.t)("Hide Block",null,{project:"apps.App.LayersPanel"}),Ef=(0,l.t)("Display Block",null,{project:"apps.App.LayersPanel"}),_u=K=>{let{block:L,bulkAction:M,deviceKey:U,gridContents:H,isDragging:V=!1,rowCount:G,sectionId:Z,setBulkAction:ee,setIsScrollingToBlock:$,lastSelectedBlock:te,orderedBlockIds:se,groupData:ae}=K;var oe;const de=(0,Wn.IF)(L),ue=L.layout[U].visible??!0,xe=L.content.value.type===_n.Z.WEBSITE_COMPONENT?hf(L.content.value.definitionName):L.content.value.type,De=(0,W.useMemo)(()=>!!ae&&ae.path.some(Ye=>!Ye.isVisible),[ae]),Ve=ue&&!De,pt=(0,T.Ze)(P.Bgn),ot=!!pt&&pt.includes(de),ut=(0,xo.HF)(de),At=(0,T.Ze)(Ye=>(0,P.d0m)(Ye)===de),ze=!!pt&&pt.some(Ye=>(ae==null?void 0:ae.path.findIndex(Et=>Et.id===Ye))!==-1),ft=(0,W.useMemo)(()=>pf(L,ut),[L,ut]),{handleFocusBlock:vt,openBlockEditor:Pe,toggleVisibility:Ne,setHoveredBlock:Ue,clearHoveredBlock:be,openContextMenu:Ze}=tf({block:L,sectionId:Z,gridContents:H,deviceKey:U,blockNode:ut,isBlockFocused:ot,rowCount:G,bulkAction:M,setIsScrollingToBlock:$,lastSelectedBlock:te,orderedBlockIds:se,isAnyAncestorHidden:De});return W.createElement(Yn.Z,{className:it()(ws().layerItem,Ii.BLOCK_FOCUS_IGNORE_CLASSNAME,{[ws().isEnabled]:Ve,[ws().isHovered]:At||ze,[ws().isBlockFocused]:ot,[ws().isChild]:ae==null?void 0:ae.path.length,[ws().isLastInTopLevelGroup]:ae==null?void 0:ae.isLastInTopLevelGroup,[ws().isParent]:ae==null?void 0:ae.isParent,[ws().isDragging]:V}),onClick:vt,onDoubleClick:Pe,onMouseEnter:Ue,onMouseLeave:be,onContextMenu:Ye=>{ae!=null&&ae.isParent||ae!=null&&ae.path.length?Ye.preventDefault():Ze(Ye)}},!V&&W.createElement(Yn.Z,null,ae==null||(oe=ae.path)===null||oe===void 0?void 0:oe.toReversed().map((Ye,Et,dt)=>W.createElement(mn.Z,{className:it()(ws().nodeBranch,{[ws().connectedBranch]:Et===dt.length-1&&!(ae!=null&&ae.isLastElement),[ws().endBranch]:Et===dt.length-1&&(ae==null?void 0:ae.isLastElement),[ws().nestedBranch]:Et!==dt.length-1&&!dt[Et+1].isLastElement}),key:Et}))),W.createElement(Yn.Z,{style:{opacity:Ve?"":".3"}},W.createElement(mf,{block:L,legacyBlockType:xe,blockNode:ut})),W.createElement(Vi.Z.Body,{className:it()(ws().layerItemLabel,{[ws().isDisabled]:!Ve})},ft),!V&&W.createElement(Yn.Z,{flex:1,justifyContent:"end"},W.createElement(vf,{ariaLabel:ue?_f:Ef,isAlwaysVisible:!ue,isDragging:V,isEnabled:Ve,icon:ue?W.createElement(Yp.Z,null):W.createElement(ef.Z,null),onClick:Ye=>{"button"in Ye&&Ye.button===2||Ne()},onPointerDown:Ye=>{Ye.button!==2&&(Ne(),ee(ue?El.HIDE:El.SHOW))},onPointerUp:Ye=>{Ye.button!==2&&ee(null)}})))},yf=K=>{let{id:L,...M}=K;var U;const{attributes:H,listeners:V,setNodeRef:G,setDroppableNodeRef:Z,transform:ee,transition:$,isDragging:te}=(0,yr.nB)({id:L,data:{...M.groupData}}),se={transform:Jp.ux.Transform.toString(ee),cursor:M.bulkAction?"pointer":te?"grabbing":"grab",transition:$};return W.createElement(Yn.Z,{className:it()(Ii.BLOCK_FOCUS_IGNORE_CLASSNAME,ws().noFocusOutline,{[ws().isDragging]:te}),style:se,ref:ae=>{G(ae),Z(ae)},...H,...V,position:"relative"},te?W.createElement(mn.Z,{className:ws().isGhost,ml:!((U=M.groupData)===null||U===void 0)&&U.level?`${22*M.groupData.level+10}px`:"0px"}):W.createElement(_u,{...M,isDragging:te,setDroppableNodeRef:Z,groupData:M.groupData}))};var Sf=t(954713),sc=t.n(Sf);const Eu=(K,L,M,U)=>{const H=[],{childrenIds:V}=K.content.value.value;return V==null||V.forEach((G,Z,ee)=>{const $=M[G],te=(0,ka.Ri)($),se=(0,Wn.IF)($),ae=ee.length-1===Z,oe=L.length;H.push({block:$,path:L,id:se,isLastElement:ae,isParent:te,level:oe,indexWithinParent:Z,isLastInTopLevelGroup:!1});const de={id:se,isLastElement:ae,isLastInTopLevelGroup:!1,level:oe,isVisible:$.layout[U].visible??!0};te&&H.push(...Eu($,[de,...L],M,U))}),H},bf=(K,L,M)=>{const U=(0,on.S6)(K.filter(ka.Ri)),H=[];Object.values(U).forEach(Z=>{const ee=Z.content.value.value.childrenIds;ee&&H.push(...ee)});const V=K.filter(Z=>!H.includes((0,Wn.IF)(Z))),G=[];return(0,Wn.vT)(V,M).reverse().forEach((Z,ee,$)=>{const te=(0,ka.Ri)(Z),se=(0,Wn.IF)(Z),ae=0,oe=$.length-1===ee;G.push({isLastElement:oe,id:se,level:ae,indexWithinParent:null,isLastInTopLevelGroup:!1,isParent:te,block:Z,path:[]});const de={id:(0,Wn.IF)(Z),isLastElement:oe,isLastInTopLevelGroup:!1,level:ae,isVisible:Z.layout[M].visible??!0};te&&(G.push(...Eu(Z,[de],L,M)),G[G.length-1].isLastInTopLevelGroup=!0)}),{flattenedGridContents:G,topLevelBlocks:V}},yu=(K,L)=>{if(!K.over||K.active.id===K.over.id){const H=L.findIndex(V=>V.id===K.active.id);return L[H-1]}const M=L.findIndex(H=>{var V;return H.id===((V=K.over)===null||V===void 0?void 0:V.id)}),U=L.findIndex(H=>H.id===K.active.id);if(M<U&&M-1>=0)return L[M-1];if(M>U)return L[M]},Cf=K=>{let{event:L,flattenedItems:M,activeId:U,projectedLevel:H,blocksById:V}=K;const G=yu(L,M);if(!G||H===null||!U)return null;if(G.isParent)return{parentId:G.id,index:0};if(G.level===H&&G.indexWithinParent!==null){var Z;const te=(Z=G.path[0])===null||Z===void 0?void 0:Z.id;if(te){const se=V[te].content.value.value.childrenIds.filter(ae=>ae!==U);return se.splice(se.indexOf(G.id)+1,0,U),{parentId:te,index:se.indexOf(U)}}}if(G.level>H&&H>0){var ee;const te=(ee=G.path.find(ae=>ae.level===H))===null||ee===void 0?void 0:ee.id,se=M.find(ae=>ae.id===te);if(se&&te){var $;const ae=($=se.path[0])===null||$===void 0?void 0:$.id;if(ae){const oe=V[ae].content.value.value.childrenIds.filter(de=>de!==U);return oe.splice(oe.indexOf(te)+1,0,U),{parentId:ae,index:oe.indexOf(U)}}}}return null},Af=K=>{let{parentId:L,oldIndex:M,newIndex:U,fluidEngineContext:H}=K;const{gridContents:V}=H,G=V.findIndex(Z=>(0,Wn.IF)(Z)===L);return G?(0,mr.ZP)(H,Z=>{const ee=Z.gridContents[G],$=ee.content.value.value.childrenIds;ee.content.value.value.childrenIds=(0,yr.Rp)($,M,U)}):H},Tf=K=>{let{parentId:L,placeAtIndex:M,activeId:U,oldParentId:H,fluidEngineContext:V}=K;const{gridContents:G}=V,Z=G.findIndex($=>(0,Wn.IF)($)===L),ee=G.findIndex($=>(0,Wn.IF)($)===H);return(0,mr.ZP)(V,$=>{if(ee!==-1){const ae=$.gridContents[ee],oe=ae.content.value.value.childrenIds;ae.content.value.value.childrenIds=oe.filter(de=>de!==U)}const te=$.gridContents[Z],se=te.content.value.value.childrenIds;te.content.value.value.childrenIds=se.toSpliced(M,0,U)})},If=K=>{let{parentId:L,activeId:M,fluidEngineContext:U}=K;const{gridContents:H}=U,V=H.findIndex(G=>(0,Wn.IF)(G)===L);return(0,mr.ZP)(U,G=>{if(V!==-1){const Z=G.gridContents[V],ee=Z.content.value.value.childrenIds;Z.content.value.value.childrenIds=ee.filter($=>$!==M)}})};var El=function(K){return K.HIDE="hide",K.SHOW="show",K}({});const Df=K=>{let{gridContents:L,gridSettings:M,layersPanelSectionId:U,setIsScrollingToBlock:H,fluidEngineContext:V}=K;var G;const Z=(0,T.zC)(),ee=(0,on.er)(),$=M.breakpointSettings[ee].rows,te=(0,W.useRef)(null),se=(0,on.S6)(L),[ae,oe]=(0,W.useState)(null),[de,ue]=(0,W.useState)(null),[xe,De]=(0,W.useState)(null),{flattenedItems:Ve,flattenedItemIds:pt,topLevelBlockIds:ot}=(0,W.useMemo)(()=>{const{flattenedGridContents:Pe,topLevelBlocks:Ne}=bf(L,se,ee),Ue=Pe.filter(be=>be.path.findIndex(Ze=>Ze.id===xe)===-1);return{flattenedItems:Ue,flattenedItemIds:Ue.map(be=>be.id),topLevelBlockIds:Ne.map(Wn.IF)}},[xe,se,ee,L]);(0,Is.Z)("pointerup",()=>oe(null),{element:(G=(0,Ei.wo)())===null||G===void 0?void 0:G.body,shouldListen:ae!==null}),(0,Is.Z)("pointerup",()=>oe(null),{shouldListen:ae!==null});const ut=(0,Ao.Dy)((0,Ao.VT)(Ao.we,{activationConstraint:{distance:8}}),(0,Ao.VT)(Ao.Lg,{coordinateGetter:yr.is})),At=Pe=>{const Ne=yu(Pe,Ve);if(Ne){var Ue;if(Ne.isParent||!(Ne==null||(Ue=Ne.path[0])===null||Ue===void 0)&&Ue.id&&!Ne.isLastElement)ue(Ne.level+(Ne!=null&&Ne.isParent?1:0));else if(Ne.isLastElement){var be;const Ze=Pe.delta,Ye=Ne.level,Et=(be=[...Ne.path].reverse().find(dt=>!dt.isLastElement))===null||be===void 0?void 0:be.level;ue(Math.floor((0,f.clamp)(Ze.x/25,Et??0,Ye)))}else ue(0)}else ue(0)},ze=(0,W.useCallback)(Pe=>{Z((0,fs.yV)({sectionId:U,fluidEngineContext:Pe}))},[Z,U]),ft=(Pe,Ne,Ue)=>{if(Pe===-1||Ne===-1||!xe)return;const be=(0,yr.Rp)(Ve,Pe,Ne).filter(Ze=>ot.includes(Ze.id)||Ue===Ze.id);Z((0,Ms.ex)({sectionId:U,deviceKey:ee,updatedBlockOrder:be.map(Ze=>Ze.id).reverse(),blockId:xe,oldIndex:Pe,newIndex:Ne}))},vt=Pe=>{const{active:Ne,over:Ue}=Pe;if(Ne.id===(Ue==null?void 0:Ue.id)||!xe){De(null),ue(null);return}const be=Cf({event:Pe,blocksById:se,flattenedItems:Ve,activeId:xe,projectedLevel:de});if(be){var Ze,Ye;if(be.parentId===((Ye=Ne.data.current)===null||Ye===void 0||(Ze=Ye.path[0])===null||Ze===void 0?void 0:Ze.id))ze(Af({parentId:be.parentId,oldIndex:Ne.data.current.indexWithinParent,newIndex:be.index,fluidEngineContext:V}));else{var Et,dt;ze(Tf({parentId:be.parentId,placeAtIndex:be.index,oldParentId:(dt=Ne.data.current)===null||dt===void 0||(Et=dt.path[0])===null||Et===void 0?void 0:Et.id,activeId:xe,fluidEngineContext:V}))}}else{var Ot;let ii=null;if(!((Ot=Ne.data.current)===null||Ot===void 0)&&Ot.path.length){var jt;ii=xe,ze(If({parentId:(jt=Ne.data.current)===null||jt===void 0?void 0:jt.path[0].id,activeId:xe,fluidEngineContext:V}))}const tt=Ve.findIndex(Rt=>Rt.id===Ne.id),Kt=Ve.findIndex(Rt=>Rt.id===(Ue==null?void 0:Ue.id));ft(tt,Kt,ii)}De(null),ue(null)};return W.createElement(Yn.Z,{className:it()(sc().sortableListWrapper,{[sc().bulkActionActive]:ae}),onClick:()=>Z((0,Ct.wv)())},Ve.length?W.createElement(Ao.LB,{sensors:ut,collisionDetection:Ao.pE,measuring:{droppable:{strategy:Ao.uN.Always}},onDragStart:Pe=>De(Pe.active.id.toString()),onDragEnd:vt,onDragMove:At},W.createElement(yr.Fo,{items:Ve.filter(Pe=>Pe.path.findIndex(Ne=>Ne.id===xe)===-1).map(Pe=>Pe.id),strategy:yr.qw,disabled:ae!==null},Ve.map(Pe=>W.createElement(yf,{setBulkAction:oe,bulkAction:ae,key:Pe.id,id:Pe.id,block:Pe.block,deviceKey:ee,sectionId:U,gridContents:L,rowCount:$,setIsScrollingToBlock:H,groupData:{path:Pe.path,isLastElement:Pe.isLastElement,isParent:Pe.isParent,level:Pe.id===xe&&de!==null?de:Pe.level,indexWithinParent:Pe.indexWithinParent,isLastInTopLevelGroup:Pe.isLastInTopLevelGroup},lastSelectedBlock:te,orderedBlockIds:pt}))),(0,ks.createPortal)(W.createElement(Ao.y9,{modifiers:[Qp.DL],zIndex:on.KZ},W.createElement(_u,{setBulkAction:oe,bulkAction:ae,block:se[xe??""],deviceKey:ee,sectionId:U,gridContents:L,rowCount:$,setIsScrollingToBlock:H,isDragging:!0,lastSelectedBlock:te,orderedBlockIds:pt})),document.body)):W.createElement(Yn.Z,{className:sc().emptyStateContainer},W.createElement(Vi.Z.Body,null,W.createElement(qi.T,{project:"apps.App"},"Add blocks to this section to manage layers."))))},Of=K=>{let{requestClose:L,sectionId:M,shouldListen:U}=K;var H;const V=(0,T.Ze)(P.Ouw),G=(0,W.useCallback)(Z=>{const ee=(0,bn.jd)(M??""),$=Z.target;if($.parentNode.classList.contains("context-menu-modal-position"))return;(!$.closest(".fluid-engine-block")&&!V||!(ee!=null&&ee.contains($)))&&L()},[V,L,M]);(0,Is.Z)("click",G,{element:document.body,shouldListen:U}),(0,Is.Z)("click",G,{element:(H=(0,Ei.wo)())===null||H===void 0?void 0:H.body,shouldListen:U})},Su=11,Lf=24,Pf="",Mf=()=>{const K=(0,T.Ze)(P.Kq$)??"",L=(0,T.Ze)(ze=>(0,P.NlV)(ze,K??"")),M=L==null?void 0:L.gridContents,U=L==null?void 0:L.gridSettings,[H,V]=(0,W.useState)(),[G,Z]=(0,W.useState)(!1),$=(0,T.Ze)(P.Hlz)===ms.Z.PHONE,te=(0,W.useRef)(null),se=(0,T.Ze)(P.Ouw),ae=(0,T.Ze)(P.qCM),oe=(0,T.Ze)(P.eOW),de=(0,W.useCallback)(()=>{const ze=document.querySelector(`[data-layers-panel-button="${K}"]`);if(ze){var ft;if($){const Pe=ze.getBoundingClientRect();return{x:Pe.right-Lf,y:Pe.bottom+Su}}const vt=(ft=ze.parentElement)===null||ft===void 0?void 0:ft.getBoundingClientRect();if(vt)return{x:vt.left,y:vt.bottom+Su}}},[$,K]),ue=(0,T.zC)();(0,W.useEffect)(()=>{V(de())},[de]);const xe=(0,W.useCallback)(()=>{ue((0,Ct.hK)())},[ue]),De=(0,T.Ze)(ze=>(0,P.m1X)(ze)||!!(0,P.l8p)(ze)||(0,P.Xix)(ze)||(0,P.j_d)(ze));Of({requestClose:xe,sectionId:K,shouldListen:!!K&&!De}),Xp({sectionId:K,requestClose:xe,isEditorOpen:!!K});const Ve=(0,W.useCallback)(()=>ae.length>0?ae:se?[se]:[],[se,ae]),pt=(0,W.useCallback)(ze=>{var ft;const vt=Ve();vt.length!==0&&(ze==null||(ft=ze.clipboardData)===null||ft===void 0||ft.setData("text/plain",Pf),ze.preventDefault(),ue((0,Ct.CU)(vt)))},[Ve,ue]);(0,Is.Z)("scroll",()=>{V(de())},{element:(0,Ei.wo)(),shouldListen:!G});const ot=!!K&&!!H&&!!M&&!!U&&!De;(0,Is.Z)("copy",pt,{element:te==null?void 0:te.current,shouldListen:ot});const ut=(0,W.useMemo)(()=>(0,f.debounce)(ze=>ue((0,Ct.cF)(ze)),500,{leading:!0,trailing:!1}),[ue]),At=(0,W.useCallback)(ze=>{if(ze.preventDefault(),oe){const ft=[{label:(0,l.t)("Paste",null,{project:"apps.App"}),onClick:()=>{ut(K)},shortcut:["ctrl","V"]}];ue((0,Ct.nQ)({isOpen:!0,menuOptions:ft,pos:{x:ze.pageX,y:ze.pageY}}))}},[oe,K,ue,ut]);return W.createElement(Aa.Z.Transition,null,ot?W.createElement(Aa.Z,{lockFocus:!0,lockFocusOptions:{autoFocus:!1,disabled:!1,returnFocus:()=>!1},closeOnEsc:!0,sx:{pointerEvents:"none",zIndex:"999999 !important"},onRequestClose:xe},W.createElement(Aa.Z.Position,{draggable:!0,position:H,anchor:$?"top-right":"top-left"},W.createElement(Aa.Z.Dialog,{sx:{bg:"base",borderRadius:"11px",flexDirection:"column",height:"500px",pb:2,pointerEvents:"all",width:"240px",display:"flex"},ref:te,onContextMenu:At},W.createElement(mn.Z,{bg:"base",position:"sticky",top:"0",zIndex:2},W.createElement(Aa.Z.Position.DragHandle,{style:{position:"sticky"},onClick:()=>ue((0,Ct.wv)())},W.createElement(Vi.Z.Subtitle,{sx:{ml:2,px:2,fontWeight:"500",userSelect:"none"}},W.createElement(qi.T,{project:"apps.App"},"Layers")))),W.createElement(Df,{layersPanelSectionId:K,fluidEngineContext:L,gridContents:M,gridSettings:U,setIsScrollingToBlock:Z})))):null)};var wf=t(462731),Zs=t.n(wf),Rf=t(332316);const Bf=navigator.userAgent.includes("Macintosh")||navigator.userAgent.includes("iPhone"),yl=4,bu=36,Cu=13,Nf=K=>{let{color:L=ts.colors.gray[100]}=K;return W.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},W.createElement("path",{d:"M11 3V9H3L0.5 6L3 3H11ZM6.75 5.29297L5.35352 3.89648L4.64648 4.60352L6.04297 6L4.64648 7.39648L5.35352 8.10352L6.75 6.70703L8.14648 8.10352L8.85352 7.39648L7.45703 6L8.85352 4.60352L8.14648 3.89648L6.75 5.29297Z",fill:L}))},kf=K=>{let{color:L=ts.colors.gray[100]}=K;return W.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},W.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.2069 2C9.1972 2 10 2.8028 10 3.7931C10 4.78341 9.1972 5.58621 8.2069 5.58621H7.24138V6.41379H8.2069C9.1972 6.41379 10 7.21659 10 8.2069C10 9.1972 9.1972 10 8.2069 10C7.21659 10 6.41379 9.1972 6.41379 8.2069V7.24138H5.58621V8.2069C5.58621 9.1972 4.78341 10 3.7931 10C2.8028 10 2 9.1972 2 8.2069C2 7.21659 2.8028 6.41379 3.7931 6.41379H4.75862V5.58621H3.7931C2.8028 5.58621 2 4.78341 2 3.7931C2 2.8028 2.8028 2 3.7931 2C4.78341 2 5.58621 2.8028 5.58621 3.7931V4.75862H6.41379V3.7931C6.41379 2.8028 7.21659 2 8.2069 2ZM3.7931 7.24138C3.25986 7.24138 2.82759 7.67366 2.82759 8.2069C2.82759 8.74014 3.25986 9.17241 3.7931 9.17241C4.32634 9.17241 4.75862 8.74014 4.75862 8.2069V7.24138H3.7931ZM7.24138 8.2069C7.24138 8.74014 7.67366 9.17241 8.2069 9.17241C8.74014 9.17241 9.17241 8.74014 9.17241 8.2069C9.17241 7.67366 8.74014 7.24138 8.2069 7.24138H7.24138V8.2069ZM5.58621 6.41379H6.41379V5.58621H5.58621V6.41379ZM3.7931 2.82759C3.25986 2.82759 2.82759 3.25986 2.82759 3.7931C2.82759 4.32634 3.25986 4.75862 3.7931 4.75862H4.75862V3.7931C4.75862 3.25986 4.32634 2.82759 3.7931 2.82759ZM8.2069 2.82759C7.67366 2.82759 7.24138 3.25986 7.24138 3.7931V4.75862H8.2069C8.74014 4.75862 9.17241 4.32634 9.17241 3.7931C9.17241 3.25986 8.74014 2.82759 8.2069 2.82759Z",fill:L}))},Au=K=>{let{index:L,option:M,openChildrenIndexes:U,setOpenChildrenIndexes:H,childMenuHorizontalDirection:V="right",isFirst:G,isLast:Z,parentWidth:ee,prevDividerCount:$}=K;const te=(0,W.useRef)(null),se=(0,W.useRef)(null),[ae,oe]=(0,W.useState)({left:"auto",right:"auto",top:"auto",bottom:"auto",nextChildMenuHorizontalDirection:V});let de=0;const ue=()=>{if(te.current){const Ve=te.current.getBoundingClientRect(),pt=ee||Math.round(Ve.width),ot=Ve.x,ut=Ve.y,At=L.split("-");let ft=Number(At[At.length-1])*bu+$*Cu+"px",vt="auto",Pe="auto",Ne="auto",Ue="right";if(V==="left")Ne=pt+yl+"px",Ue="left";else{const Et=se.current?se.current.offsetWidth:0;ot+pt+yl+Et<=window.innerWidth?Pe=pt+yl+"px":(Ne=pt+yl+"px",Ue="left")}const be=M.children?M.children.length:0;let Ze=0;if(M.children)for(let Et=0;Et<M.children.length;Et++)Ze+=M.children[Et].hasBottomLine?1:0;ut+be*bu+Ze*Cu>window.innerHeight&&(ft="auto",vt="0"),oe({left:Pe,right:Ne,top:ft,bottom:vt,nextChildMenuHorizontalDirection:Ue})}},xe=()=>{M.disabled||(ue(),H(Ve=>{const pt=[];for(let ot=0;ot<Ve.length;ot++){const ut=Ve[ot];(L.startsWith(ut)||ut.startsWith(L))&&pt.push(ut)}return pt.includes(L)?pt:M.children?[...pt,L]:pt}))},De=(Ve,pt)=>Ve==="ctrl"&&Bf?W.createElement(mn.Z,{className:Zs().ctrlIcon},W.createElement(kf,{color:pt?ts.colors.gray[600]:ts.colors.gray[100]})):Ve==="delete"?W.createElement(mn.Z,{className:Zs().deleteIcon},W.createElement(Nf,{color:pt?ts.colors.gray[600]:ts.colors.gray[100]})):W.createElement(Vi.Z.Label,{className:Zs().shortcutLabel},Ve);return W.createElement(W.Fragment,null,W.createElement(Yn.Z,{key:L+"-"+M.label,onClick:()=>{M.disabled||M.onClick()},className:it()(Zs().item,{[Zs().firstItem]:G,[Zs().lastItem]:Z,[Zs().onlyItem]:G&&Z,[Zs().disabled]:M.disabled,[Zs().childOpen]:U.includes(L)}),"data-is-context-menu":!0,onMouseEnter:xe,ref:te},W.createElement(Vi.Z.Caption,{className:Zs().label},M.label),M.shortcut?W.createElement(Yn.Z,{className:Zs().shortcut},M.shortcut.map(Ve=>De(Ve,!!M.disabled))):"",M.children&&W.createElement(Rf.Z,{className:Zs().arrowRight})),M.children&&W.createElement(mn.Z,{className:it()(Zs().container,Zs().childContainer,{[Zs().show]:U.includes(L)}),sx:{left:ae.left,right:ae.right,bottom:ae.bottom,top:ae.top},ref:se},W.createElement(mn.Z,{className:Zs().list,"data-is-context-menu":!0},M.children.map((Ve,pt)=>{const ot=pt===0?0:de;return pt===0?de=0:de+=Ve.hasBottomLine?1:0,W.createElement(Au,{index:L+"-"+pt,option:Ve,openChildrenIndexes:U,setOpenChildrenIndexes:H,childMenuHorizontalDirection:ae.nextChildMenuHorizontalDirection,isFirst:pt===0,isLast:M.children?pt===M.children.length-1:!1,prevDividerCount:ot,key:Ve.label+L+"-"+pt})}))),M.hasBottomLine&&W.createElement(mn.Z,{className:Zs().divideLine}))},xf=K=>{let{options:L,pos:M,isOpen:U}=K;const[H,V]=(0,W.useState)([]),G=(0,W.useRef)(null),[Z,ee]=(0,W.useState)(0);let $=0;const te=(0,T.zC)(),se=(0,W.useCallback)(()=>{te((0,Ct.nQ)({isOpen:!1,menuOptions:[],pos:{x:0,y:0}}))},[te]);return(0,W.useEffect)(()=>{G.current&&ee(G.current.offsetWidth)},[G]),W.createElement(Aa.Z.Transition,null,U?W.createElement(Aa.Z,{sx:{zIndex:"999999 !important"},onRequestClose:se,onContextMenu:ae=>{ae.preventDefault()}},W.createElement(Aa.Z.Position,{position:M,anchor:"top-left",className:"context-menu-modal-position"},W.createElement(Aa.Z.Dialog,{className:Zs().container,"data-is-context-menu":!0,ref:G},L.map((ae,oe)=>{const de=oe===0?0:$;return oe===0?$=0:$+=ae.hasBottomLine?1:0,W.createElement(Au,{option:ae,index:oe+"",openChildrenIndexes:H,setOpenChildrenIndexes:V,childMenuHorizontalDirection:"right",isFirst:oe===0,isLast:oe===L.length-1,parentWidth:Z,prevDividerCount:de,key:oe+ae.label})})))):null)};function qf(K){let{region:L,supportedEditingFeaturesBySectionId:M}=K;const U=(0,T.Ze)((0,Vn.dH)(L)),H=(0,T.Ze)(P.fPO)===(0,Vn.RO)(L),V=(0,T.Ze)(da.oG),G=(0,Us.cr)("layers-panel-context-menu");if(U.length===0)return null;const Z=U.some($=>{var te;return(te=M[$])===null||te===void 0?void 0:te.fluidEngine}),ee=G&&V.isOpen;return W.createElement(lr.Z,null,U.map(($,te)=>{const se=M[$],ae=(0,bn.jd)($);return!se||!(ae!=null&&ae.isConnected)?null:W.createElement(mu,{isEditingEnabled:H,features:se,region:L,key:$,sectionId:$,sectionIndex:te,sectionNode:ae})}),Z?W.createElement(Mf,null):null,ee?W.createElement(xf,{options:V.menuOptions,pos:V.pos,isOpen:V.isOpen}):null)}var Tu=t(239530),za=t(104550),Uf=t(536477),Ff=t(337923);const ac="none",{DESKTOP:Iu,MOBILE:Du}=wn.FluidEngineBreakpoints;function Wf(K){let L=[];function M(U){for(const H of U)for(const V of H.columns)V.blocks&&(L=L.concat(V.blocks)),V.rows&&M(V.rows)}return M(K.layout.rows),L}function Hf(K,L,M){return M==="button"||L===!0?"none":K!==""?"image":M}function Ou(K){const L=(0,Us.cr)("cdk_website_components_button_enabled");return{...K,...!L&&{containerStyles:{...K.containerStyles||za.aB[_n.Z.BUTTON]}},value:{...K.value,buttonAlignment:"center",...L&&{containerStyles:{...K.value.containerStyles||za.aB[_n.Z.BUTTON]}}}}}function Vf(K,L,M){var U,H,V;const{linkTo:G,lightbox:Z,imageLink:ee}=K.value,$=(0,Us.cr)("cdk_website_components_image_fluid_enabled"),te=(0,Us.cr)("cdk_website_components_html_enabled"),se=(0,Us.cr)("cdk_website_components_button_enabled");M.push({node:L.querySelector(".sqs-image-content"),block:{...K,...$?{type:_n.Z.WEBSITE_COMPONENT,definitionName:"website.components.imageFluid"}:{containerStyles:za.aB[_n.Z.IMAGE]},value:{...K.value,designLayout:"fluid",stretch:K.value.imageCropType!=="mask",combinationAnimation:ac,individualImageAnimation:ac,individualTextAnimation:ac,imageLink:Hf(G,Z,ee),...$&&{containerStyles:za.aB[_n.Z.IMAGE]}}}});const ae=L.querySelector(".image-title-wrapper");!((U=K.value.title)===null||U===void 0)&&U.html&&ae&&ae.offsetParent&&M.push({node:ae,block:{id:"string",type:te?_n.Z.WEBSITE_COMPONENT:_n.Z.HTML,...te?{definitionName:"website.components.html",value:{...K.value.title,containerStyles:za.aB[_n.Z.HTML]}}:{value:K.value.title,containerStyles:za.aB[_n.Z.HTML]}}});const oe=L.querySelector(".image-subtitle-wrapper");!((H=K.value.subtitle)===null||H===void 0)&&H.html&&oe&&oe.offsetParent&&M.push({node:oe,block:{id:"string",type:te?_n.Z.WEBSITE_COMPONENT:_n.Z.HTML,...te?{definitionName:"website.components.html",value:{...K.value.subtitle,containerStyles:za.aB[_n.Z.HTML]}}:{value:K.value.subtitle,containerStyles:za.aB[_n.Z.HTML]}}});const de=L.querySelector(".image-caption-wrapper .image-caption");!((V=K.value.description)===null||V===void 0)&&V.html&&de&&de.offsetParent&&M.push({node:de,block:{id:"string",type:te?_n.Z.WEBSITE_COMPONENT:_n.Z.HTML,...te?{definitionName:"website.components.html",value:{...K.value.description,containerStyles:za.aB[_n.Z.HTML]}}:{value:K.value.description,containerStyles:za.aB[_n.Z.HTML]}}});const ue=L.querySelector(".image-button-wrapper a");K.value.imageLink==="button"&&ue&&ue.offsetParent&&M.push({node:ue,block:{id:"string",type:se?_n.Z.WEBSITE_COMPONENT:_n.Z.BUTTON,...se?{definitionName:"website.components.button"}:{containerStyles:za.aB[_n.Z.BUTTON]},value:{buttonText:K.value.buttonText,buttonLink:K.value.linkTo,buttonSize:"large",buttonAlignment:"center",newWindow:K.value.newWindow,...se&&{containerStyles:za.aB[_n.Z.BUTTON]}}}})}function jf(K){const L=[];return K.forEach(M=>{var U;const H=(U=(0,xo.HF)(M.id))===null||U===void 0?void 0:U.querySelector(".sqs-block-content");if(H)switch(M.type){case _n.Z.SPACER:break;case _n.Z.BUTTON:{const V=H.querySelector(".sqs-block-button-element");if(V){const G=Ou(M);L.push({block:G,node:V})}break}case _n.Z.IMAGE:{Vf(M,H,L);break}case _n.Z.WEBSITE_COMPONENT:{switch(M.definitionName){case"website.components.spacer":break;case"website.components.button":{const V=H.querySelector(".sqs-block-button-element");if(V){const G=Ou(M);L.push({block:G,node:V})}break}default:L.push({block:M,node:H})}break}default:L.push({block:M,node:H})}}),L}function Lu(K){let{blockRect:L,contentWrapperLeft:M,contentWrapperTop:U,rowHeight:H,rowGap:V,columnWidth:G,columnGap:Z,columnCount:ee}=K;const $=1,te=34;let se=1,ae=M;for(;ae<L.left-te;)se=se+1,ae=ae+G+Z;let oe=se-1,de=0;for(;de<L.width-$;)oe=oe+1,de=de+G+Z;oe=Math.max(oe,se);let ue=-1,xe=U;for(;xe<L.top-$;)ue=ue+1,xe=xe+H+V;let De=ue-1,Ve=0;for(;Ve<L.height-$;)De=De+1,Ve=Ve+H+V;return De=Math.max(De,ue),{start:{x:se,y:ue},end:{x:Math.min(oe,ee),y:De}}}function Pu(K){let{contentWrapper:L,columnGap:M,columnCount:U}=K;const H=L.getBoundingClientRect(),V=getComputedStyle(L),$=(L.clientWidth-parseFloat(V.paddingLeft)-parseFloat(V.paddingRight)-M*(U-1))/U,te=H.left+parseFloat(V.paddingLeft),se=H.top+parseFloat(V.paddingTop);return{columnWidth:$,contentWrapperLeft:te,contentWrapperTop:se}}function zf(K,L){const M=document.getElementById("sqs-site-frame"),U=Wf(K.content),H=jf(U),V=L.querySelector(".content-wrapper"),G=(0,Ta.d)(ia.h$.columnGap),Z=(0,Ta.d)(ia.h$.rowGap);M.style.width="1280px";const ee=ia.h$.breakpointSettings[Iu].columns,$={value:2,unit:"vw"},te=(0,Ta.d)($),{columnWidth:se,contentWrapperLeft:ae,contentWrapperTop:oe}=Pu({contentWrapper:V,columnGap:G,columnCount:ee}),de=H.map(Ne=>{let{node:Ue}=Ne;return Ue.getBoundingClientRect()});M.style.width="400px";const ue=ia.h$.breakpointSettings[Du].columns,xe=(0,Ta.d)(ia.d8),{columnWidth:De,contentWrapperLeft:Ve,contentWrapperTop:pt}=Pu({contentWrapper:V,columnGap:G,columnCount:ue}),ot=H.map(Ne=>{let{node:Ue}=Ne;return Ue.getBoundingClientRect()});M.style.width="";const ut=H.map((Ne,Ue)=>{let{block:be}=Ne;return{content:{value:{...be,id:(0,Uf.Z)()}},layout:{desktop:{verticalAlignment:(0,Tu.Z)(be),visible:!0,zIndex:Ue,...Lu({blockRect:de[Ue],rowGap:Z,columnGap:G,contentWrapperLeft:ae,contentWrapperTop:oe,rowHeight:te,columnWidth:se,columnCount:ee}),stickyScroll:ia.J0},mobile:{verticalAlignment:(0,Tu.Z)(be),visible:!0,zIndex:Ue,...Lu({blockRect:ot[Ue],rowGap:Z,columnGap:G,contentWrapperLeft:Ve,contentWrapperTop:pt,rowHeight:xe,columnWidth:De,columnCount:ue}),stickyScroll:ia.J0}}}});if(ut.find(Ne=>{let{layout:{desktop:Ue,mobile:be}}=Ne;return Ue.end.y-Ue.start.y>ia.pL||be.end.y-be.start.y>ia.pL}))throw new Error("There is a section too tall to convert into a proper section");const At=[[]];let ze=0,ft=0,vt=0;ut.forEach((Ne,Ue)=>{const be=(0,f.assign)({...Ne}),Ze=Ue===0?0:ut[Ue-1].layout.desktop.end.y,Ye=be.layout.desktop.end.y-ft-Ze;ze+=Ye;let Et=At.length-1;ze>100&&(At.push([]),Et+=1,ze=0,ft=0,vt=0),ft=At[Et][0]?ft:be.layout.desktop.start.y,vt=At[Et][0]?vt:be.layout.mobile.start.y,be.layout.desktop.end.y=be.layout.desktop.end.y-ft,be.layout.desktop.start.y=be.layout.desktop.start.y-ft,be.layout.mobile.end.y=be.layout.mobile.end.y-vt,be.layout.mobile.start.y=be.layout.mobile.start.y-vt,At[Et].push(be)});const Pe={backgroundImageId:K.backgroundImageId,backgroundMediaEffect:K.backgroundMediaEffect,divider:K.divider,customId:K.customId,video:K.video,styles:{backgroundColor:K.styles.backgroundColor,backgroundMode:K.styles.backgroundMode,backgroundWidth:K.styles.backgroundWidth,generative:K.styles.generative,customSectionHeight:K.styles.customSectionHeight,imageOverlayOpacity:K.styles.imageOverlayOpacity,sectionAnimation:K.styles.sectionAnimation,sectionHeight:K.styles.sectionHeight,sectionTheme:K.styles.sectionTheme,verticalAlignment:K.styles.verticalAlignment}};return At.map(Ne=>{const Ue=(0,Ff.Z)();return(0,mr.ZP)(Ue,be=>{(0,f.merge)(be,{...Pe,fluidEngineContext:{gridContents:Ne,gridSettings:{breakpointSettings:{mobile:{rows:(0,Wn.AQ)(Ne,Du)+1},desktop:{rows:(0,Wn.AQ)(Ne,Iu)+1}}}}})})})}const Kf=K=>K.sectionName===xn.Z.FLUID_ENGINE||K.sectionName===xn.Z.LAYOUT_ENGINE||K.sectionName===xn.Z.JSON_SCHEMA&&K.sectionDefinitionName===Ts.d1||K.sectionName===xn.Z.JSON_SCHEMA&&K.sectionDefinitionName===Ts.O_;var Mu=t(269994),Gf=t(970671),Zf=t(605254),Xf=t(11214),wu=t(456903);const Ru="/api/content-preview";async function Qf(){let{pathname:K,replacements:L}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!K)throw new Error("pathname is required");const M=`${Ru}?path=${K}`,U=await wu.default.post(M,L);return new DOMParser().parseFromString(U.data,"text/html")}async function Jf(K,L,M){const U=`${Ru}/previewMainContentSection?url=${K}&typeName=${L.typeName}`,H=await wu.default.post(U,L);return new DOMParser().parseFromString(H.data,"text/html").querySelector(M)}function $f(K){let{responseDoc:L,selector:M}=K;const U=L.querySelector(M);if(!U)throw new Error("Unable to find selector in responseDoc");return U}var Yf=t(13828),Bu=t(980995);function eo(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}const Sr=(0,po.hu)("section-annotation-controller","#357"),em=(K,L)=>{if(K)switch(L.sectionName){case xn.Z.JSON_SCHEMA:(0,Vn.rZ)(L)&&K.jsonData.galleryOptions.design!==L.jsonData.galleryOptions.design&&sa.Z.changeGalleryLayoutFinish(L.jsonData.galleryOptions.design,L.id);break;case xn.Z.MAIN_CONTENT:K.typeName!==L.typeName&&sa.Z.changeCollectionLayoutFinish(L.typeName);break;case xn.Z.LAYOUT_ENGINE:K.styles.sectionTheme!==L.styles.sectionTheme&&sa.Z.changeLayoutEngineColorFinish();break}},tm=()=>new Promise(K=>setTimeout(()=>K(!0))),im=(K,L)=>{var M,U;const H=K&&"styles"in K?K==null||(M=K.styles)===null||M===void 0?void 0:M.sectionTheme:void 0,V=L&&"styles"in L?L==null||(U=L.styles)===null||U===void 0?void 0:U.sectionTheme:void 0;return H!==V},nm=(K,L)=>!(0,f.isEqual)("styles"in K?K.styles:void 0,"styles"in L?L.styles:void 0),sm=(K,L)=>{var M,U;if(K?!(0,f.isEqual)("backgroundImageId"in K?K.backgroundImageId??null:null,"backgroundImageId"in L?L.backgroundImageId??null:null):"backgroundImageId"in L?L.backgroundImageId:void 0)return!0;const V=K&&"styles"in K?K.styles:void 0,G=L&&"styles"in L?L.styles:void 0;if((V==null||(M=V.generative)===null||M===void 0?void 0:M.customImageId)!==(G==null||(U=G.generative)===null||U===void 0?void 0:U.customImageId))return!0;const ee=K&&"video"in K?K.video:void 0,$="video"in L?L.video:void 0;if(K?!(0,f.isEqual)(ee,$):$.url??$.assetContentItemId)return!0;const se=K&&"typeName"in K?K.typeName:void 0,ae=L&&"typeName"in L?L.typeName:void 0;if(!(0,f.isEqual)(se,ae))return!0;const oe=K&&"itemLayoutKey"in K?K.itemLayoutKey:void 0,de=L&&"itemLayoutKey"in L?L.itemLayoutKey:void 0;if(!(0,f.isEqual)(oe,de))return!0;const ue=K&&"jsonData"in K?K.jsonData:void 0,xe=L&&"jsonData"in L?L.jsonData:void 0;if(!(0,f.isEqual)(ue,xe))return!0;const De=K&&"backgroundMediaEffect"in K?K.backgroundMediaEffect:void 0,Ve=L&&"backgroundMediaEffect"in L?L.backgroundMediaEffect:void 0;if(!(0,f.isEqual)(De,Ve))return!0;const pt=K&&"divider"in K?K.divider:void 0,ot=L&&"divider"in L?L.divider:void 0;return!(0,f.isEqual)(pt,ot)},am=(K,L)=>K.sectionName===xn.Z.JSON_SCHEMA&&!(0,f.isEqual)(K,L);class om extends Bu.Z{_massageSectionDataToSortOfRenderContext(L){if(L&&L.sectionName===xn.Z.JSON_SCHEMA){var M;return{...L.jsonData,section:{id:L.id,sectionDefinitionName:L.sectionDefinitionName,sectionTheme:(M=L.jsonData.styles)===null||M===void 0?void 0:M.sectionTheme}}}return L}_replaceSectionNode(L,M){const U=L.parentNode;U&&(U.insertBefore(M,L),this.getPersistantSelectors().forEach(H=>{const V=L.querySelector(H);if(V){const G=M.querySelector(H);if(!G){(0,k.uT)("_replaceSectionNode: No new layout node to replace with.");return}G.parentNode.insertBefore(V,G),G.remove()}}),L.remove())}constructor(...L){var M;super(...L),M=this,eo(this,"_updateTweaksJsf",(U,H)=>{if(this.props.sectionsArea===ba.Z.FOOTER_SECTIONS)return;const{tweakDefinitionsForSection:V}=(0,Jn.P_)().getState();if(!V)return;const G=(0,P.s8o)((0,T.d6)()),Z=(0,Yf.ZP)({isMainContent:U.sectionName===xn.Z.MAIN_CONTENT,sectionNode:H,tweakDefinitions:G,typeName:"typeName"in U?U.typeName:void 0,itemLayoutKey:"itemLayoutKey"in U?U.itemLayoutKey:void 0}),ee=(0,f.xor)(Object.keys(Z),Object.keys(V));ee.length>0&&(Sr("tweakDefinitions changed",{tweakDefinitionsDiff:ee}),this.getSectionActions().setTweakDefinitionsForSection({tweakDefinitionsForSection:Z}))}),eo(this,"updateEditedSections",function(U){let{openSettingsId:H,isGalleryContentEditorOpen:V,sectionId:G,sections:Z}=U,ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const te=H||(V?G:void 0),se=(0,f.uniq)((0,f.compact)([...Object.keys(ee),te]));return Promise.all(se.map(ae=>M._updateEditedSection(ae,Z,te)))}),eo(this,"_updateEditedSection",async(U,H,V)=>{var G;if(!H){(0,k.uT)("Attempting to update section with no section data!");return}const Z=H.findIndex(de=>{let{id:ue}=de;return ue===U});if(Z===-1){(0,k.uT)("Found section editing modal for non-existent section");return}const ee=(G=this.prevSectionsById)===null||G===void 0?void 0:G[U],$=H[Z],se=!ee?V:nm(ee,$)||sm(ee,$)||am(ee,$)||$.sectionName!==xn.Z.FLUID_ENGINE&&ee.tweakValues!==$.tweakValues,ae=(0,P.vgd)(U)((0,T.d6)());if(se&&this._canModifySectionDom($)&&!ae&&(0,Ns.I9)(this.props.sectionsArea,U,this._massageSectionDataToSortOfRenderContext(ee),this._massageSectionDataToSortOfRenderContext($))){const ue=await this.updateSectionDomAndStyles($);if(await(0,Ns.t9)(this.props.sectionsArea,U,ue,this._massageSectionDataToSortOfRenderContext($)),ue!=null&&ue.parentNode&&nn({sectionsArea:this.props.sectionsArea,changedSectionMap:{[U]:ue}}),im(ee,$)){var oe;Fs.Y.fire("section:theme:change",U,$&&"styles"in $?$==null||(oe=$.styles)===null||oe===void 0?void 0:oe.sectionTheme:void 0)}em(ee,$)}}),eo(this,"_updateEditedCollectionItemSection",async U=>{const H=(0,P.l7F)((0,T.d6)());if(!H||(0,P.vgd)(H.id)((0,T.d6)()))return;const V=await this.updateSectionDomAndStyles(H);await(0,Ns.t9)(this.props.sectionsArea,H.id,V,this._massageSectionDataToSortOfRenderContext(H)),V!=null&&V.parentNode&&nn({sectionsArea:this.props.sectionsArea,changedSectionMap:{[H.id]:V}})}),eo(this,"_updateEditedCollectionSection",async U=>{const H=(0,P.l7F)((0,T.d6)());if(!H||(0,P.vgd)(H.id)((0,T.d6)()))return;const V=await this.updateSectionDomAndStyles(H);await(0,Ns.t9)(this.props.sectionsArea,H.id,V,this._massageSectionDataToSortOfRenderContext(H)),V!=null&&V.parentNode&&nn({sectionsArea:this.props.sectionsArea,changedSectionMap:{[H.id]:V}})}),eo(this,"isSectionRerenderRequired",function(U){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return H.isSaving||!U&&H.isLoaded?!1:!(0,f.isEmpty)(V)}),eo(this,"_canModifySectionDom",U=>{if(!U)return Sr("section not provided"),!1;if(!this.getRootEl())return!1;if(!this.getFrameWindow())return Sr("The frameWindow reference was released."),!1;const V=this.getSectionNode(U);return!V||!V.parentNode?(Sr("The sectionNode is no longer present.",{section:U}),!1):!0}),eo(this,"_getSectionReplacements",U=>{const H=[{entityType:"page-sections",key:`idv1.p.${U.id}`,replacement:{type:"reference-page-sections",pageSections:{sections:[U],websiteId:window.Static.SQUARESPACE_CONTEXT.website.id}}}];if("typeName"in U&&U.typeName){const V=(0,P.Zxu)((0,T.d6)());H.push({entityType:"no-component",replacement:{type:"collection-type-name",typeName:U.typeName,collectionId:V}})}if("itemLayoutKey"in U&&U.itemLayoutKey){const V=(0,P.Zxu)((0,T.d6)());H.push({entityType:"no-component",replacement:{type:"collection-item-layout-key",itemLayoutKey:U.itemLayoutKey,collectionId:V}})}return H}),eo(this,"_shouldUseNewMainContentPreviewApi",U=>{if(U.sectionName!==xn.Z.MAIN_CONTENT)return!1;const H=(0,P.Zxu)((0,T.d6)()),V=(0,P.x38)((0,T.d6)()),G=Ds.default.getState().get(H);return G&&!V&&(0,j.j)(G.toJS())!==C.A.PRODUCT_COLLECTION}),eo(this,"updateSectionDomAndStyles",async U=>{if(this._canModifySectionDom(U))try{const H=await this.renderSection(U);if(!H||!this._canModifySectionDom(U))return;const V=this.getSectionNode(U);this._replaceSectionNode(V,H),Sr("Replaced section with newly fetched DOM",{section:U}),this.getFrameWindow().ImageLoader.loadAll();const Z=this.getAnnotationSections(),ee=(0,bn.t1)(Z,H);return this.attachSectionNodeHandlers(U),this._updateTweaksJsf(U,H),this.afterSectionsChanged(),ee===0&&Fs.Y.fire("section:first:change"),H}catch(H){(0,k.$e)(V=>{V.setContext("section",U),(0,k.Tb)(H)}),Sr("Uncaught Error in updateSectionDomAndStyles",H)}}),eo(this,"renderSection",async U=>{var H;const V=this.getFrameWindow();if(!V)return null;const G=(0,Vn.ng)(U);if(U.sectionName!==xn.Z.MAIN_CONTENT)return await tm(),(await(0,So.tC)(U)).querySelector(G);if(this._shouldUseNewMainContentPreviewApi(U)){const $=V.location.pathname;return await Jf($,U,G)}const Z=this._getSectionReplacements(U),ee=await Qf({pathname:((H=(0,P.Mlk)((0,T.d6)()))===null||H===void 0?void 0:H.fullUrl)||V.location.pathname,replacements:Z});return $f({responseDoc:ee,selector:G})})}}function ma(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}const rm="section-editor-ui-mount",lm=(0,ol.Z)()?250:50,Nu=409;class ku extends om{destroy(){super.destroy(),this.sectionIdToEditingFeaturesMap={},this.removeEditorMountNode(),this._boundCloseSettings=null}removeDeletedSectionEditingUi(L){this._deactivateSectionEditor(L),this.renderSectionEditorManager()}renderSectionEditorManager(){this.editorMountNode||(this.editorMountNode=this.getOrCreateEditorMountNode()),this.editorReactRoot||(this.editorReactRoot=(0,Zi.createRoot)(this.editorMountNode)),this.editorReactRoot.render(W.createElement(Gf.Z,null,W.createElement(Ci.o,null,W.createElement(qf,{region:this.getRegion(),supportedEditingFeaturesBySectionId:this.sectionIdToEditingFeaturesMap}))))}initializeSectionHelperElements(L,M){ga.Z.initialize();const U=this.getSectionEditingFeatures(M);this._activateSectionEditor(L,U),this.renderSectionEditorManager()}getOrCreateEditorMountNode(){const L=this.getRegion(),M=`${L}-${rm}`;let U=document.getElementById(M);if(!U){const H=document.createElement("div");H.id=M,H.dataset.test=`${L}-section-editor-ui-container`,document.body.appendChild(H),U=H}return U}removeEditorMountNode(){this.editorReactRoot&&(this.editorReactRoot.unmount(),this.editorReactRoot=null),this.editorMountNode&&(this.editorMountNode.remove(),this.editorMountNode=null)}isSectionDetailEditable(L){return!1}getSectionEditingFeatures(L){const M=(0,bn.I4)(L),U=this.getAnnotationSections().find(G=>G.id===M),H=Kf(U),V={settings:{handler:this._handleSettingsButtonClick.bind(this)}};return H&&(V.save={handler:this._handleSaveSectionClick.bind(this)}),U.sectionName===xn.Z.FLUID_ENGINE&&(V.fluidEngine={handler:()=>{}}),U.sectionName===xn.Z.LAYOUT_ENGINE&&!pa.Z.isFeatureEnabled(yo().FLUID_ENGINE_OPT_OUT)&&(V.convertToFluidEngine={handler:this._convertToFluidEngine}),(0,Vn.rZ)(U)&&(V.galleryContent={handler:()=>{(0,Eo.Sj)(M),this._openGalleryContentEditor(U,L)}}),(0,Vn.pM)(U)&&(V.editJsonSchemaList={handler:()=>{this._handleSettingsButtonClick(L,{jsonSchemaSectionSubUiSchema:"edit"})}}),this.isSectionDeletable(L)&&(V.delete={handler:this.deleteSection}),this.isSectionMoveable(L)&&(V.up={handler:this.moveSectionUp},V.down={handler:this.moveSectionDown}),this.isSectionAddable(L)&&(V.add={handler:()=>{}}),this._isSectionDuplicable(L)&&(V.duplicate={handler:this._duplicateSection}),pa.Z.isFeatureEnabled(yo().SECTION_ADMIN)&&this.props.sectionsArea!==ba.Z.FOOTER_SECTIONS&&(V.admin={handler:this._handleAdminButtonClick.bind(this)}),this._isSectionLayoutSwitchable(L)&&(V.layoutSwitcher={handler:this._openLayoutSwitcher}),V}isSectionAddable(L){return!0}_isSectionDuplicable(L){const M=this._getSectionByNode(L);return M?M.sectionName!==xn.Z.MAIN_CONTENT&&!(0,Vn.f8)(M)&&!(0,Vn.Mt)(M)&&!(0,Vn.zx)(M)&&!(0,Vn.lh)(M)&&!(0,Vn.xA)(M)&&!(0,Vn.F1)(M):!1}isSectionDeletable(L){return!0}isSectionMoveable(L){return!0}_isSectionLayoutSwitchable(L){const M=this._getSectionByNode(L);return(0,P.fPO)((0,T.d6)())!==hn.Z.FOOTER&&(M==null?void 0:M.sectionName)===xn.Z.FLUID_ENGINE}_registerOnClickOutsidePopover(L){this.registerTimer(()=>{const M=this.getRootEl();M&&(this._boundCloseSettings&&(M.ownerDocument.removeEventListener("click",this._boundCloseSettings),M.ownerDocument.removeEventListener("dragstart",this._boundCloseSettings)),this._boundCloseSettings=this._closeSectionPopovers(L),M.ownerDocument.addEventListener("click",this._boundCloseSettings),M.ownerDocument.addEventListener("dragstart",this._boundCloseSettings))})}_handleSettingsButtonClick(L){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var U;const{jsonSchemaSectionSubUiSchema:H}=M,V=(0,bn.I4)(L),G=(0,P.Zxu)((0,T.d6)()),Z=(0,P.x38)((0,T.d6)()),$=this.getAnnotationSections().find(ae=>ae.id===V);sa.Z.clickEditSection(this.constructor.sectionAreaName,G,Z,$);const te="itemLayoutKey"in $&&$.itemLayoutKey||((U=Ds.default.getState().get(G))===null||U===void 0?void 0:U.get("itemLayoutKey"));this._registerOnClickOutsidePopover($),$.sectionName===xn.Z.LAYOUT_ENGINE&&(0,So.x2)($);const se=(0,P.s8o)((0,T.d6)());this.getSectionActions().setIsSettingsOpen({collectionId:G,isMainContent:$.sectionName===xn.Z.MAIN_CONTENT,isSettingsOpen:!0,openSectionToolbarRect:(0,bn.kr)(V),openSettingsId:V,tweakDefinitions:se,typeName:"typeName"in $?$.typeName:void 0,itemLayoutKey:te,jsonSchemaSectionSubUiSchema:H}),(0,T.GE)((0,Ct.gI)({sectionId:V,type:Mu.B.Section}))}_openSectionCatalogFromToast(L,M){(0,us.pW)(),M(),this._openSectionCatalog(L)}_openSectionCatalog(L){(0,T.GE)((0,Ks.Qq)({sectionId:L,selectedCategory:Kn().SAVED_SECTIONS,shouldAddAbove:!0}))}_emitSavedSectionConfirmationEvent(){(0,ps.I6)(ps.yj,{content:W.createElement(Vi.Z.Body,null,(0,l.t)("Added to Saved Sections",null,{project:"apps.App"})),action:L=>{let{remove:M}=L;return W.createElement(en.Z.Tertiary,{onClick:U=>{this._openSectionCatalogFromToast(U,M)}},(0,l.t)("View",null,{project:"apps.App"}))},css:{paddingTop:0,paddingBottom:0}})}_emitSavedSectionLimitEvent(){(0,ps.I6)(ps.yj,{content:W.createElement(Vi.Z.Body,null,(0,l.t)("Max section limit reached",null,{project:"apps.App"})),action:L=>{let{remove:M}=L;return W.createElement(en.Z.Tertiary,{onClick:U=>{this._openSectionCatalogFromToast(U,M)}},(0,l.t)("View",null,{project:"apps.App"}))},css:{paddingTop:0,paddingBottom:0}})}_handleSaveSectionClick(L){const M=L.getAttribute("data-section-id"),U=(0,T.d6)(),H=(0,P.riY)(U,M),V=(0,P.FWA)(D().FLUID_ENGINE_SAVED_SECTIONS)(U),G=(0,P.V9S)(U),Z=(0,P.al$)(U);if(G===void 0||G.length<lm){if((0,ol.Z)()){var ee;const $=(0,l.t)("Section {count}",{count:(((ee=Z[Kn().SAVED_SECTIONS])===null||ee===void 0?void 0:ee.totalSections)||0)+1},{notes:'A placeholder name, something like "Section 4"',project:"enterprise"});return(0,T.GE)((0,Ks._b)($,M,co.sX.WEBSITE)).then(()=>{(0,lo.Im)({scope:co.sX.WEBSITE,sectionContext:H}),V?this._emitSavedSectionConfirmationEvent():this._openSectionCatalog(M)}).catch(te=>{if(te.response.status===Nu)(0,us.gG)(),this._emitSavedSectionLimitEvent();else throw te})}return(0,T.GE)((0,Ks.wm)(M)).then(()=>{(0,us.kh)(H),V?this._emitSavedSectionConfirmationEvent():this._openSectionCatalog(M)}).catch($=>{if($.response.status===Nu)(0,us.gG)(),this._emitSavedSectionLimitEvent();else throw $})}return this._emitSavedSectionLimitEvent()}_openGalleryContentEditor(L,M){this.registerTimer(()=>{const U=this.getRootEl();U&&(this._boundCloseSettings=this._closeSectionPopovers(L),U.addEventListener("click",this._boundCloseSettings))}),this.getSectionActions().setIsGalleryContentEditorOpen({isGalleryContentEditorOpen:!0,sectionId:L.id})}_handleAdminButtonClick(L){const M=(0,bn.I4)(L);(0,T.GE)(Zf.v?(0,Xf.md)({modal:"SectionTemplateSettings",sectionId:M}):(0,Ct.Y4)(M))}constructor(...L){super(...L),ma(this,"_boundCloseSettings",null),ma(this,"editorMountNode",null),ma(this,"editorReactRoot",null),ma(this,"sectionIdToEditingFeaturesMap",{}),ma(this,"sectionEditorManagerRef",(0,W.createRef)()),ma(this,"_activateSectionEditor",(M,U)=>{this.sectionIdToEditingFeaturesMap={...this.sectionIdToEditingFeaturesMap,[M]:U}}),ma(this,"_deactivateSectionEditor",M=>{const U={...this.sectionIdToEditingFeaturesMap};delete U[M],this.sectionIdToEditingFeaturesMap=U}),ma(this,"moveSectionUp",M=>{if(!M)return;const U=(0,bn.I4)(M);(0,T.GE)((0,fs.Y2)(U,this.getRegion()));const H=this._getSectionByNode(M);(0,us.Rw)("up",this.constructor.sectionAreaName,H)}),ma(this,"moveSectionDown",M=>{if(!M)return;const U=(0,bn.I4)(M);(0,T.GE)((0,fs.F_)(U,this.getRegion()));const H=this._getSectionByNode(M);(0,us.Rw)("down",this.constructor.sectionAreaName,H)}),ma(this,"_convertToFluidEngine",M=>{const U=this._getSectionByNode(M);try{const H=zf(U,M);(0,T.GE)((0,fs.nb)({previousSectionId:U.id,sections:H,region:this.getRegion()}))}catch{(0,T.GE)((0,Ct.B9)())}(0,us.cL)(U.id)}),ma(this,"_duplicateSection",async M=>{const U=sa.Z.userDuplicatesSectionStart(),H=(0,f.cloneDeep)(this._getSectionByNode(M));"customId"in H&&(H.customId=null);const V=this.injectLoadingPlaceholder({placeholderHeightInPx:M.clientHeight,aboveNode:(0,bn.su)(M)});try{const G=await(0,T.GE)((0,fs.sP)({section:H,region:this.getRegion()})).unwrap(),Z=(0,P.Zxu)((0,T.d6)());sa.Z.userDuplicatesSectionFinish(U,{originalSection:H,area:this.constructor.sectionAreaName,collectionId:Z,sectionId:G.id})}catch(G){throw this.removeSectionNode(V),G}}),ma(this,"deleteSection",async M=>{if(!M)return;try{const Z=await this.confirm({title:(0,l.t)("Remove Section",null,{project:"src.seven-one"}),message:(0,l.t)("Are you sure you want to remove this section?",null,{project:"src.seven-one"}),confirmText:(0,l.t)("Remove",null,{project:"src.seven-one"}),cancelText:(0,l.t)("Cancel",null,{project:"src.seven-one"})});if(Z==="onDismiss"||Z==="onRequestClose")return}catch{return}const U=(0,P.Zxu)((0,T.d6)()),H=this.getAnnotationSections(),V=(0,bn.t1)(H,M),G=H[V];(0,T.GE)((0,fs.Oi)(G.id)),(0,us.F$)({section:G,collectionId:U,area:this.constructor.sectionAreaName})}),ma(this,"_closeSectionPopovers",M=>()=>{(0,T.GE)((0,Ct.Kc)()),this.getSectionActions().setIsGalleryContentEditorOpen({isGalleryContentEditorOpen:!1,sectionId:null});const U=this.getRootEl();U&&(this._boundCloseSettings&&(U.ownerDocument.removeEventListener("click",this._boundCloseSettings),U.ownerDocument.removeEventListener("dragstart",this._boundCloseSettings)),this._boundCloseSettings=null),(0,us.q2)(M)}),ma(this,"_openLayoutSwitcher",M=>{const U=(0,bn.I4)(M),H=this.getAnnotationSections().find(V=>V.id===U);try{(H==null?void 0:H.sectionName)===xn.Z.FLUID_ENGINE&&this._isSectionLayoutSwitchable(M)&&((0,T.GE)((0,Ct.Ps)({sectionId:U})),this._registerOnClickOutsidePopover(H))}catch(V){k.$e(G=>{G.setTag("owner",ml().WEBSITE_EDITOR),G.setTag("project","layout-switcher"),k.Tb(V)})}})}}ma(ku,"sectionAreaName",void 0);function ys(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}const Fr=(0,po.hu)("section-annotation-controller","#357"),Sl=275,oc=Jt.GRID_PX*2.5,cm="sqs-scrim-enabled",xu="sqs-empty-section-list",qu="sqs-empty-section",um="sqs-empty-add-button",dm="sqs-loading-section",hm="section.page-section",gm=".system-page",pm=()=>(0,In.i)(ts.breakpoints).platform!=="desktop",Uu=()=>{Fs.Y.fire("tweak:change",{config:{},getName(){return"move-section"},getValue(){return!0}})};class Wr extends ku{getRootEl(){return this.state.rootNode?this.state.rootNode.getDOMNode():null}getFrameWindow(){const L=this.getRootEl();return L&&L.ownerDocument.defaultView||null}async onCmsRenderedSectionsChange(L){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!this.state.rootNode){Fr(`[${this.constructor.name}] still listening to store updates after rootNode removal`);return}this._toggleEmptyState(L.sections);const V=(0,P.aEP)((0,T.d6)())===aa.hn.PAGE_EDIT_FULL_SCREEN;L.isLoaded&&V&&!(0,f.isEmpty)(M)&&this._handleAddedSections(M);const G={...M,...U};this.isSectionRerenderRequired(!!this.prevIsLoaded,L,G)&&this.updateEditedSections(L,G),this._updateSectionsFromUndoRedo(L),L.isLoaded&&V&&!(0,f.isEmpty)(H)&&this._handleRemovedSections(H),this.prevIsLoaded=L.isLoaded}_handleEnterExitEditingArea(L){let{isLoaded:M,isEditing:U}=L;if(!this.state.rootNode){Fr(`[${this.constructor.name}] still listening to store updates after rootNode removal`);return}this.set("editable",U);const H=M&&U&&!this.state.isEditing;if(this.prevIsLoaded=M,H&&!this.isAlreadyEntering){try{this.isAlreadyEntering=!0,setTimeout(()=>{this.initializeEditors(),this.set("isEditing",!0),this.isAlreadyEntering=!1},0)}catch(V){Fr("error prefetching section data before entering edit mode",V)}return}!U&&this.state.isEditing&&(this.cleanUp(),this.appendEmptyPreviewSectionNodeIfNeeded(),this.set("isEditing",!1))}onSectionOrderUpdate(L,M){const U=(0,T.d6)(),V=(0,P.fPO)(U)===this.props.editingArea;if(!(0,P.Zl0)(U)||!V||(0,P.gqq)(U))return;const G=ae=>ae.reduce((oe,de,ue)=>(oe[de]=ue,oe),{}),Z=G(L),ee=G(M),$=L.find(ae=>Z[ae]!==ee[ae]&&typeof ee[ae]=="number");if(!$)return;const te=this.getSectionNodeById($),se=this.getSectionNodeById(M[Z[$]]);if(te&&se){te.style.zIndex="1",this._holdPositionAnimator();const ae=ee[$]-Z[$],oe=ae>0?te:se,de=ae>0?se:te;this.getRootEl().insertBefore(oe,de),this._releasePositionAnimator(),this.scrollIntoViewIfNeeded(te),this.afterSectionsChanged()}}initializeEditors(){if(!this.getFrameWindow())return;const L=this.getRootEl();if(!L)return;const M=this.getAnnotationSections(),U=M.length;U===0&&(this.cleanUpEmptySectionNode(),this.set("isEmpty",!0),L.append(this.createEmptySectionNode()));let H=0,V=0;const G=()=>{V++,H&&V===H&&(Fr("observer checked all layout engine sections, firing edit perf",{layoutEngineSectionsCount:H}),this.onMeasureEditModePerformance())};H=M.filter((Z,ee)=>{const{isLayoutEngineSection:$}=this.initializeEditorForSection(Z,ee,G);return $}).length,this._renderRteManager(),(U===0||H===0)&&this.onMeasureEditModePerformance()}_handleRemovedSections(L){Object.values(L).forEach(M=>{this.removeDeletedSectionEditingUi(M.id),this.removeSectionNode(this.getSectionNode(M)),(0,Ns.MC)(this.props.sectionsArea,M.id)}),nn({sectionsArea:this.props.sectionsArea,deletedSectionIds:Object.keys(L)})}getPersistantSelectors(){return[Ts.C5,"[data-fluid-engine]"]}_renderRteManager(){const L=this.getRootEl();this.rteManagerNode=L.ownerDocument.createElement("div"),this.rteManagerReactRoot=(0,Zi.createRoot)(this.rteManagerNode),this.rteManagerReactRoot.render(W.createElement(Ci.o,null,W.createElement(mo,{sectionsArea:this.props.sectionsArea})))}appendEmptyPreviewSectionNodeIfNeeded(){this.cleanUpEmptySectionNode();const L=this.getRootEl();return!L||this.props.editingArea===hn.Z.HEADER?!1:L.querySelectorAll(".page-section").length===0?(this.set("isEmpty",!0),L.append(this.createPreviewEmptySectionNode()),!0):!1}cleanUpEmptySectionNode(){const L=this.getRootEl();if(!L)return;const M=L.querySelector("."+qu);M&&(this.set("isEmpty",!1),M.remove())}initializeEditorForSection(L,M,U){const H=this.getSectionNode(L);return H?(this.attachSectionNodeHandlers(L),("content"in L&&L.content||L.sectionName===xn.Z.FLUID_ENGINE)&&this.layoutEngineManager.enableLayoutEngineForSection({sectionNode:H,onFirstCheck:U}),L.sectionName===xn.Z.MAIN_CONTENT&&this.onMeasureEditModePerformance(),M===0&&Fs.Y.fire("section:first:change"),{isLayoutEngineSection:!!("content"in L&&L.content)}):{error:"missing_node"}}async _handleAddedSections(L){const M={sectionsArea:this.props.sectionsArea,createdSectionMap:{}},U=Object.values(L).map(async H=>{if(this.getSectionNode(H))return;const V=await this.renderSection(H);if(!V)return;this.loadingNode&&(this.getRootEl().replaceChild(V,this.loadingNode),this.loadingNode=void 0);const G=this.getAnnotationSections(),Z=(0,f.clamp)(G.findIndex($=>{let{id:te}=$;return te===H.id}),0,G.length-1),ee=this.getRootEl().querySelectorAll((0,Vn.Pp)())[Z];this._injectSection({section:H,sectionNode:V,aboveNode:ee}),await(0,Ns.WR)(this.props.sectionsArea,H.id,V),M.createdSectionMap[H.id]=V});await Promise.all(U),M.createdSectionMap=(0,f.pickBy)(M.createdSectionMap,H=>H.parentNode),Object.keys(M.createdSectionMap).length&&nn(M)}buildEmptySectionNode(L){let{title:M,description:U,hasButton:H}=L;const V=this.getRootEl().ownerDocument,G=V.createElement("div"),Z=`${this.props.sectionsArea}-placeholder`;G.classList.add(qu),G.dataset.controller="",G.dataset.sectionId=Z;const ee=G.appendChild(V.createElement("div"));ee.classList.add("sqs-empty-section-content");const $=M?`<div class="sqs-empty-title">${M}</div>`:"",te=U?`<div class="sqs-empty-description">${U}</div>`:"";if(ee.innerHTML=$+te,H){const se=ee.appendChild(V.createElement("div"));(0,Zi.createRoot)(se).render(W.createElement(Ci.o,{frameCacheKey:"empty-section-node"},W.createElement($n,{region:this.getRegion(),onClick:()=>{this.handleSetEditingMode();const oe=(0,P.fPO)((0,T.d6)());(0,T.GE)((0,Ks.Qq)({sectionId:Z,shouldAddAbove:!1,selectedCategory:oe===hn.Z.FOOTER?Kn().FOOTER:void 0}))},className:um})))}return G}injectLoadingPlaceholder(L){let{placeholderHeightInPx:M,aboveNode:U}=L;const H=this.getRootEl().ownerDocument.createElement("div");return H.classList.add(dm),H.dataset.controller="",H.style.height=`${M}px`,H.style.width="100%",this._injectSectionNode({sectionNode:H,aboveNode:U}),this.loadingNode=H,H}_getPageSectionEls(){var L,M;const U=this.getRootEl(),H=U==null||(L=U.ownerDocument)===null||L===void 0?void 0:L.querySelector(gm),V=Array.from((U==null||(M=U.ownerDocument)===null||M===void 0?void 0:M.querySelectorAll(hm))??[]);return H?[H,...V]:V}_injectSection(L){let{section:M,sectionNode:U,aboveNode:H}=L;this._injectSectionNode({sectionNode:U,aboveNode:H}),this._connectNewSectionNode({section:M,sectionNode:U})}_injectSectionNode(L){let{sectionNode:M,aboveNode:U}=L;if(!M)throw new Error("Tried to inject a section without a sectionNode");M.style.opacity="0",M.style.transition=`opacity ${Sl}ms ease-in`,this._holdPositionAnimator();const H=this.getRootEl();U?H.insertBefore(M,U):H.appendChild(M),this.cleanUpEmptySectionNode(),this.registerTimer(()=>{M.style.transition="",M.style.opacity="1"},0),this._releasePositionAnimator(),this.scrollIntoViewIfNeeded(M),this.afterSectionsChanged()}removeSectionNode(L){L&&(this._holdPositionAnimator(),this.registerTimer(()=>{const M=this.getAnnotationSections();L.remove(),M.length===0&&(this.set("isEmpty",!0),this.getRootEl().append(this.createEmptySectionNode())),this._releasePositionAnimator(),this.afterSectionsChanged()},0))}_connectNewSectionNode(L){let{section:M,sectionNode:U}=L;U.ownerDocument.defaultView.Squarespace.initializeLayoutBlocks(this.Y,this.Y.one(U));const H=this.getAnnotationSections(),V=(0,bn.t1)(H,U);this.initializeEditorForSection(M,V),Uu()}scrollIntoViewIfNeeded(L){const M=L.ownerDocument.querySelector("html"),U=M.clientHeight,H=M.scrollTop,V=H+U,G=L.offsetHeight;let Z=0,ee=L;for(;ee;)Z+=ee.offsetTop,ee=ee.offsetParent;const $=Z+G,te=Z-oc<H,se=$+oc>V;if(te||se){const ae=Z-oc;Ja()(M,{top:ae,left:0},{easing:"easeInOutSine",maxDuration:Sl})}}_holdPositionAnimator(){this.cancelAnimation(),(0,T.GE)((0,Ct.Ks)());const L=this.getRootEl();L&&(this.positions=[...L.querySelectorAll(Ts.Gg)].map(M=>{const U=M.getBoundingClientRect();return M.style.transition="",M.style.transform="",{top:U.top,section:M}}))}async _releasePositionAnimator(){if(!this.positions){(0,T.GE)((0,Ct.S)());return}const L=this.positions;L.forEach(M=>{let{section:U,top:H}=M;const G=U.getBoundingClientRect().top;U.style.transform=`translateY(${H-G}px)`}),this.positionAnimatorTimer=setTimeout(()=>{L.forEach(M=>{let{section:U}=M;U.style.transition=`transform ${Sl}ms ease-in-out`}),this.positionAnimatorTimer=setTimeout(()=>{L.forEach(M=>{let{section:U}=M;U.style.transform="translateY(0px)"}),this.positionAnimatorTimer=setTimeout(()=>{L.forEach(M=>{let{section:U}=M;U.style.transform="",U.style.zIndex=""}),this.registerTimer(Uu,0),this.positionAnimatorTimer=setTimeout(()=>{(0,T.GE)((0,Ct.S)())},200)},Sl+100)},0)},0)}revert(){return(0,T.GE)((0,Ct.xu)(hn.Z.NOT_EDITING)),Promise.resolve()}onDeviceViewChanges(L){const M=this.Y.Squarespace.LayoutEngine.EditController.getInstance();M&&!M.get("destroyed")&&(L===ms.Z.PHONE&&!ss.Ay?(this.turnOffInsertionPoints(),M.set("supportsInsertPoints",!1)):(0,P.fPO)((0,T.d6)())===this.props.editingArea&&(M.set("supportsInsertPoints",!0),this.turnOnInsertionPoints()))}onScrimClicked(L){}afterSectionsChanged(){Fs.Y.fire("sections:change",this.getAnnotationSections())}attachSectionNodeHandlers(L){const M=this.getSectionNode(L);if(!M){Fr("section not in DOM (okay if looking at collection item)",L.id);return}this._initializeMobileSelection(L,M),this.initializeSectionHelperElements(L.id,M),M.setAttribute("data-test","section")}turnOffInsertionPoints(){this.layoutEngineManager.disableInsertPoints()}turnOnInsertionPoints(){this.layoutEngineManager.enableInsertPoints()}unmountEditors(){this.rteManagerReactRoot&&(this.rteManagerReactRoot.unmount(),this.rteManagerReactRoot=null,this.rteManagerNode&&(this.rteManagerNode.remove(),this.rteManagerNode=null))}cancelAnimation(){clearTimeout(this.positionAnimatorTimer),(0,T.GE)((0,Ct.S)())}destroy(){super.destroy(),this.themeIndicatorManager.destroy(),this.prevIsLoaded=null,this.prevSectionsById=null,this.deregisterTimers(),this.cleanUp(),this.cancelAnimation(),this.handles.forEach(L=>L()),this.handles=[],this.confirmationReactRoot&&(this.confirmationReactRoot.unmount(),this.confirmationReactRoot=null,this.confirmationMountNode&&(this.confirmationMountNode.remove(),this.confirmationMountNode=null))}cleanUp(){super.cleanUp(),this.themeIndicatorManager.cleanUp(),this.layoutEngineManager.cleanUp(),this.detachDeviceViewListener&&(this.detachDeviceViewListener(),this.detachDeviceViewListener=null),this.unmountEditors()}isInlineEditable(){return!1}onMeasureEditModePerformance(){}handleSetEditingMode(){}isFrameRealAndIfNotDestroy(){var L,M;const U=(M=this.Y)===null||M===void 0||(L=M.config)===null||L===void 0?void 0:L.win;return U!=null&&U.frameElement||U!=null&&U.MOBILEAPP?!0:(this.get("destroyed")||((0,k.Tb)(new Error("Detached frame not properly unloaded!")),this.destroy()),!1)}constructor(L,{rootNode:M}){const U={isAddingSection:!1,isEditing:!1,isScrimEnabled:!1},H=(0,f.merge)({},U,{rootNode:M});super(L,H),ys(this,"themeIndicatorManager",void 0),ys(this,"layoutEngineManager",void 0),ys(this,"handles",void 0),ys(this,"detachDeviceViewListener",void 0),ys(this,"rteManagerReactRoot",void 0),ys(this,"rteManagerNode",void 0),ys(this,"_getSectionById",G=>G?this.getAnnotationSections().find(Z=>{let{id:ee}=Z;return ee===G})??null:null),ys(this,"_getSectionByNode",G=>G?this._getSectionById((0,bn.I4)(G)):null),ys(this,"getSectionNode",G=>{const Z=this.getRootEl();return(Z==null?void 0:Z.querySelector((0,Vn.ng)(G)))??null}),ys(this,"getSectionNodeById",G=>{const Z=this.getRootEl();return Z==null?void 0:Z.querySelector((0,Vn.gv)(G))}),ys(this,"_toggleEmptyState",G=>{const Z=this.getRootEl();Z&&(!G||G.length===0?Z.classList.add(xu):Z.classList.remove(xu))}),ys(this,"updateRootElOnIsEditingChange",()=>{const G=this.getRootEl();G&&(G.dataset.isEditing=this.state.isEditing?"true":"")}),ys(this,"prevIsLoaded",void 0),ys(this,"isAlreadyEntering",void 0),ys(this,"_updateSectionsFromUndoRedo",G=>{G.sections.forEach(Z=>{const ee=this.getSectionNode(Z);if(Z.sectionName===xn.Z.FLUID_ENGINE)return;const $=this.layoutEngineManager.getBodyEditorForSectionId(Z.id);if(!$||Z.sectionName==="MAIN_CONTENT")return;const te=Z,se=te.content.layout,{hasNonCompatChange:ae,changedBlocks:oe}=(0,St.K9)({before:$.pageLayout.toJSON(),after:se});if(ae)$.destroy(),this.layoutEngineManager.initLayoutEngine(te,ee);else if(oe.length>0){const de=this.Y.Squarespace.LayoutEngine.EditController.getInstance();if(de&&!de.get("destroyed")){const ue=`page-section-${Z.id}`;de.layoutBuilderForNodeId(ue).syncBlockContentFromJSON(se,oe,!1)}}})}),ys(this,"onSectionListClick",G=>{G.target.classList.contains(cm)&&this.onScrimClicked(G)}),ys(this,"_initializeMobileSelection",(G,Z)=>{Z.addEventListener("click",()=>{pm()&&(0,T.GE)((0,Ct.GN)(G.id))})}),ys(this,"loadingNode",void 0),ys(this,"positions",void 0),ys(this,"confirmationMountNode",null),ys(this,"confirmationReactRoot",null),ys(this,"confirm",G=>{if(!this.confirmationMountNode){const ee=this.getRootEl().ownerDocument;this.confirmationMountNode=ee.createElement("div"),ee.body.appendChild(this.confirmationMountNode),this.confirmationReactRoot=(0,Zi.createRoot)(this.confirmationMountNode)}const Z=(ee,$)=>{this.confirmationReactRoot.render(W.createElement(Bs.Z,{isOpen:!1,...G})),ee($)};return new Promise(ee=>{this.confirmationReactRoot.render(W.createElement(Bs.Z,{isOpen:!0,onConfirm:Z.bind(this,ee),onCancel:Z.bind(this,ee,"onRequestClose"),...G}))})}),ys(this,"positionAnimatorTimer",void 0),this.themeIndicatorManager=new $e({getFrameWindow:()=>this.getFrameWindow(),getRootElement:()=>this.getRootEl(),getSectionElements:()=>this._getPageSectionEls()}),this.layoutEngineManager=new Qi({Y:this.Y,getSectionDataFromNode:G=>this._getSectionByNode(G),getSectionNodeFromData:G=>this.getSectionNode(G)}),M.getDOMNode().addEventListener("click",this.onSectionListClick),this.handles=[],this.addAfterChangeHandler("isEditing",this.updateRootElOnIsEditingChange,this),this.handles.push((0,T.gH)(G=>({isEditing:(0,P.fPO)(G)===this.props.editingArea,isLoaded:(0,P.Zl0)(G)}),G=>{this._handleEnterExitEditingArea(G)})),this.detachDeviceViewListener=(0,T.gH)(P.Hlz,G=>{this.onDeviceViewChanges(G)}),this.timeouts=[],this.rteManagerReactRoot=null,this.rteManagerNode=null}}ys(Wr,"sectionAreaName",void 0);var Hr=t(143379),fm=t(550373),mm=t(590530),vm=t(480433),rc=t.n(vm),lc=t(347560),_m=t(146399),Em=t.n(_m),ym=t(199297),Sm=t(322605),bm=t(474698),Cm=t(655392),Fu=t(920577);const Am=[{type:"headertabs",properties:{labels:[(0,l.t)("Lesson Video",null,{project:"commerce.course"})],children:[{type:"group",properties:{children:[{type:"spacer",properties:{gridMultiplier:2}},{type:"boolean",$mapping:"#/courseItemContent/videoVisible",properties:{label:(0,l.t)("Show lesson video",null,{project:"commerce.course"})}},{type:"group",$conditional:{$if:{"#/courseItemContent/videoVisible":{eq:!1}},$then:{type:"hidden"}},properties:{children:[{type:"context",properties:{label:(0,l.t)("Video",null,{project:"commerce.course"})}},{type:"videoUploaderForContentItems",properties:{fieldDescription:Sm.a3,fieldId:{$data:"#/id"},sx:{px:4,mt:2},completionXHRConfig:{$valueFn:(K,L)=>{let{context:M}=L;const{_draftAssets:U,id:H,parentCollectionId:V}=M.configurations.default.value,G=bm.Z.getState().toObject();return[{method:"POST",url:`${(0,Cm.D)(V,H)}/video/hosted`,data:{systemDataId:U.hostedVideoId,authorId:G.id}}]}},thumbnailCompletionXHRConfig:{$valueFn:(K,L)=>{let{context:M}=L;const{_draftAssets:U,id:H,parentCollectionId:V}=M.configurations.default.value;return(0,Fu.MV)(V,H,Fu.w4.Video,U.videoThumbnailImageId)}},allowVimeoBasicAuthorEmbed:!0,assetDestination:"collection-settings-content",indirectObjectIdentifier:"collection-settings",productPage:"section-editor",productSection:"section-collection-item-editor",productItemId:{$data:"#/id"}},$mapping:{videoId:"#/_draftAssets/hostedVideoId",video:"#/_draftAssets/hostedVideoAsset",thumbnailId:"#/_draftAssets/videoThumbnailImageId",thumbnail:"#/_draftAssets/videoThumbnailImageAsset",embed:"#/_draftAssets/embeddedVideo"}}]}}]}}]}}];var Tm=t(427779);const Im={type:"object",$schema:"http://json-schema.org/draft-04/schema",properties:{...Tm.Z,passthrough:{type:"boolean"},courseItemContent:{type:"object",properties:{videoVisible:{type:"boolean"},hostedVideo:{type:"object"},embeddedVideo:{type:"object",properties:{version:{type:"string"},type:{type:"string"},width:{type:"number"},height:{type:"number"},title:{type:"string"},url:{type:"string"},html:{type:"string"},authorName:{type:"string"},authorUrl:{type:"string"},providerName:{type:"string"},providerUrl:{type:"string"},thumbnailUrl:{type:"string"}}}}}}},Dm={uiSchema:Am,jsonSchema:Im};var Om=t(617801),Wu=t(883583),Lm=t(385898),Pm=t(24861),Mm=t.n(Pm);const wm=K=>{let{item:L}=K;const[M,U]=(0,W.useState)(null),[H,V]=(0,W.useState)(!1),G=(0,W.useCallback)(()=>{const Z=(0,P.o1x)((0,T.d6)());(0,Sa.Zm)({itemId:L.id,collectionType:(Z==null?void 0:Z.typeName)??(Z==null?void 0:Z.entityType),collectionId:L.collectionId}),F.Z.openItemSettingsEditor(L,null,!1)},[L]);return W.createElement(As.StatsigProvider,{client:(0,Us.GC)()},W.createElement(Vl.Z,{container:M==null?void 0:M.ownerDocument.head,cacheKey:"blog-post-paywall-excerpt-annotation"},W.createElement(Yn.Z,{alignItems:"center",justifyContent:"center",width:"100%",height:"sizes.400",overflow:"visible"},W.createElement(Yn.Z,{alignItems:"center",justifyContent:"center",width:"100%",height:3,backgroundColor:"gray.800",position:"relative"},W.createElement("button",{ref:U,type:"button",className:Mm().blogPaywallExcerptAnnotationButton,onMouseEnter:()=>V(!0),onMouseLeave:()=>V(!1),onClick:G,"aria-describedby":"blog-post-paywall-excerpt-annotation-tooltip"},W.createElement(Lm.Z,null),W.createElement(qi.T,{project:"apps.App",notes:"Label for button that opens a modal for the user to edit a blog post excerpt"},"Edit Excerpt")))),W.createElement(Hl.Z,{id:"blog-post-paywall-excerpt-annotation-tooltip",anchor:M,mountAt:M==null?void 0:M.ownerDocument.body,isOpen:H,position:"top"},W.createElement(qi.T,{project:"apps.App",notes:"Tooltip for the 'Edit Excerpt' button which opens a model for the user to edit a blog post excerpt"},"Your blog post excerpt will be visible to public viewers. All other blog post content will still be hidden behind your paywall."))))};var Rm=t(108647),Bm=t(96315),Hu=t(925184);function es(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}const Vu=()=>(0,In.i)(ts.breakpoints).platform==="mobile",Vr="pageScrim",ju='[data-content-field="title"]',zu='.sqs-layout[data-type="item"]',Nm=(0,po.hu)("page-section-annotation-controller","#358"),cc=new Set([C.J.COURSE_ITEM,C.J.VIDEO_ITEM,C.J.PRODUCT_ITEM]),Ku={default:{buttonText:(0,l.t)("Manage Items",null,{project:"src.seven-one",notes:"Click button to manage collection items"}),dirtyText:(0,l.t)("Do you want to save your changes before managing the items?",null,{project:"src.seven-one"}),Icon:Ha.Z},[C.A.BLOG_COLLECTION]:{buttonText:(0,l.t)("Manage Posts",null,{project:"src.seven-one",notes:"Click button to manage blog posts"}),dirtyText:(0,l.t)("Do you want to save your changes before managing the posts?",null,{project:"src.seven-one"}),Icon:Qa.Z},[C.A.EVENT_COLLECTION]:{buttonText:(0,l.t)("Manage Events",null,{project:"src.seven-one",notes:"Click button to manage events"}),dirtyText:(0,l.t)("Do you want to save your changes before managing the events?",null,{project:"src.seven-one"}),Icon:Po.Z},[C.A.PORTFOLIO_COLLECTION]:{buttonText:(0,l.t)("Manage Projects",null,{project:"src.seven-one",notes:"Click button to manage projects"}),dirtyText:(0,l.t)("Do you want to save your changes before managing the projects?",null,{project:"src.seven-one"}),Icon:ao.Z},[C.A.PRODUCT_COLLECTION]:{buttonText:(0,l.t)("Manage Items",null,{project:"src.seven-one",notes:"Click button to manage collection items"}),dirtyText:(0,l.t)("Do you want to save your changes before managing the items?",null,{project:"src.seven-one"}),Icon:Ha.Z},[C.A.VIDEO_COLLECTION]:{buttonText:(0,l.t)("Manage Videos",null,{project:"src.seven-one",notes:"Click button to manage collection videos"}),dirtyText:(0,l.t)("Do you want to save your changes before managing the videos?",null,{project:"src.seven-one"}),Icon:Ho.Z},[C.A.COURSE_COLLECTION]:{buttonText:(0,l.t)("Manage Lessons",null,{project:"src.seven-one",notes:"Click button to manage lessons in your course collection"}),dirtyText:(0,l.t)("Do you want to save your changes before managing the lessons?",null,{project:"src.seven-one"}),Icon:Mo.Z}};function km(K,L){switch(L){case C.A.COURSE_COLLECTION:return`/pages/${K}/curriculum`}return`/pages/${K}`}const Gu={default:{buttonText:(0,l.t)("Edit Product",null,{project:"src.seven-one",notes:"Click button to edit product"}),Icon:Vo.Z},[C.A.PRODUCT_COLLECTION]:{buttonText:(0,l.t)("Edit Product",null,{project:"src.seven-one",notes:"Click button to edit product"}),Icon:Vo.Z},[C.A.VIDEO_COLLECTION]:{buttonText:(0,l.t)("Edit Video",null,{project:"src.seven-one",notes:"Click button to edit video"}),Icon:wo.Z},[C.A.COURSE_COLLECTION]:{buttonText:(0,l.t)("Edit Video",null,{project:"src.seven-one",notes:"Click button to edit video"}),Icon:wo.Z}},xm="request",qm="save",Um="cancel",Zu="navigate",Xu=667,Qu=428,uc=55,Ju=200,Fm=K=>{const L=(0,P.Zxu)((0,T.d6)()),M=(0,P.x38)((0,T.d6)()),U=Ds.default.getState().get(L);return K.sectionName===xn.Z.MAIN_CONTENT&&U&&!M},Wm=K=>{const L=(0,bn.I4)(K),U=(0,P.c6V)((0,T.d6)()).find(H=>H.id===L);return Fm(U)||(0,Vn.f8)(U)||(0,Vn.zx)(U)||(0,Vn.xA)(U)};class $u extends Wr{_attachHeaderResizeObserver(){this._headerResizeObserver===void 0&&(this._headerResizeObserver=new kr.d(this._handleHeaderHeightChange.bind(this)));const L=this.getRootEl().ownerDocument.getElementById(Ts.ne);this._resizeObservedHeaderElement!==L&&(this._headerResizeObserver.disconnect(),L&&(this._resizeObservedHeaderElement=L,this._headerResizeObserver.observe(L)))}initializeEditors(){if(!this.getFrameWindow())return;super.initializeEditors(),this.detachSiteHeaderFooterActionListener||(this.detachSiteHeaderFooterActionListener=_o.Z.listen(this._onHeaderFooterStoreUpdate.bind(this)));const L=this.getRootEl();L&&(L.setAttribute("data-test","page-sections-container"),L.setAttribute(Wi.GUIDANCE_DATA_ATTRIBUTE,Wi.ElementDataIds.PAGE_SECTIONS_CONTAINER));const M=(0,P.gEH)((0,T.d6)());this.isInlineEditable()&&this._renderInlineEditors(M,this.makePageLayout(M.body.layout)),this._renderBlogPaywallExcerptAnnotation(M)}cleanUp(){super.cleanUp(),this._removeBlogPaywallExcerptAnnotation()}_discardSectionEditingChanges(){(0,T.GE)((0,fs.eJ)()),(0,fm.b)(),w.default.refresh()}getSectionEditingFeatures(L){let M={};const U=this._finishEditingAndNavigateToPanel||f.noop,H=(0,P.Zxu)((0,T.d6)()),V=F.Z.getCollection(H),G=(0,j.j)(V);return Wm(L)?M={manageItems:{handler:U,...Ku[G]||Ku.default,destination:km(H,G),trackingCallback:this._trackClickManageCollectionInSection.bind(this),cancelCallback:Z=>{let{trackingCallback:ee}=Z;ee(),this._discardSectionEditingChanges()},closeCallback:()=>{}}}:this.isSectionDetailEditable(L)&&(M={editDetails:{handler:this._handleEditDetails.bind(this),id:(0,P.gEH)((0,T.d6)()).id,...Gu[G]||Gu.default}}),{...super.getSectionEditingFeatures(L),...M}}isInlineEditable(){const L=(0,P.gEH)((0,T.d6)());return L?L.recordType===A().TEXT||L.recordType===A().EVENT:!1}isSectionDeletable(L){if(pa.Z.isFeatureEnabled(yo().SECTION_ADMIN))return!0;const U=(0,P.c6V)((0,T.d6)()).find(H=>H.id===(0,bn.I4)(L));return U.sectionName!==xn.Z.MAIN_CONTENT&&!(0,Vn.f8)(U)&&!(0,Vn.Mt)(U)&&!(0,Vn.zx)(U)&&!(0,Vn.lh)(U)&&!(0,Vn.xA)(U)&&!(0,Vn.F1)(U)}isSectionAddable(L){const M=(0,P.gEH)((0,T.d6)());return this.isInlineEditable()||cc.has((0,j.V)(M))?!1:super.isSectionAddable(L)}isSectionMoveable(L){const M=(0,P.gEH)((0,T.d6)());return this.isInlineEditable()||cc.has((0,j.V)(M))?!1:super.isSectionMoveable(L)}isSectionDetailEditable(L){const M=(0,P.gEH)((0,T.d6)());return cc.has((0,j.V)(M))?!0:super.isSectionDetailEditable(L)}updatePageScrimHeaderSpacing(){const L=this.getRootEl();if(!L)return;const M="--header-scrim-top-spacing",U=L.ownerDocument.getElementById(Ts.ne);if(U){const H=U.clientHeight;L.style.setProperty(M,H+"px")}}_createCustomHeaderScrim(){if(ss.Ay)return;const L=document.createElement("div");L.id=Vr,this._styleScrim(L),L.className="sqs-customHeaderPageScrim",document.body.appendChild(L)}_styleScrim(L){const M=(0,P.Hlz)((0,T.d6)()),U=this.state.topOffset+uc+Ju;M===ms.Z.DESKTOP?(L.style.top=`${U}px`,L.style.left="0px",L.style.width="100%",L.style.height=`calc(100% - ${U}px)`):(L.style.bottom="0px",L.style.left=`calc(50% - ${Qu/2}px)`,L.style.width=`${Qu}px`,L.style.height=`${Xu}px`)}_removeCustomHeaderScrim(){const L=document.getElementById(Vr);L&&L.parentNode.removeChild(L)}_onHeaderFooterStoreUpdate(){if(!this.state.rootNode){console.warn(`[${this.constructor.name}] still listening to store updates after rootNode removal`);return}const L=(0,P.K87)((0,T.d6)()),{isOverlayDisclosureOpen:M}=_o.Z.getState(),U=document.getElementById(Vr);if(L&&!M){if(U)return;this._createCustomHeaderScrim()}else(!L||M)&&this._removeCustomHeaderScrim()}toggleScrim(){const L=(0,P.fPO)((0,T.d6)()),M=L===hn.Z.HEADER||L===hn.Z.FOOTER,{isScrimEnabled:U}=this.state;!U&&M?this.showScrimWithButtonHide():U&&!M&&this.hideScrim()}_getFirstSection(){return this.state.rootNode?this.state.rootNode.getDOMNode().querySelector(Ts.Gg):null}handleSetEditingMode(){(0,T.GE)((0,Ct.xu)(hn.Z.PAGE))}_loadContentItem(L){return new Promise((M,U)=>{const H=(0,P.Zxu)((0,T.d6)()),V=new window.top.Y.Squarespace.Models.ContentItem({id:L,collectionId:H});V.load(G=>{if(!this.isFrameRealAndIfNotDestroy()){M(null);return}G?U(G):M(V.toJSON())})})}async _loadItem(){const L=(0,P.x38)((0,T.d6)());if(!L){(0,P.gEH)((0,T.d6)())&&(0,T.GE)((0,Ct.n)(null));return}let M=F.Z.getItem(L);if(!M){const U=await this._loadContentItem(L);U&&(M=await F.Z.loadPersistedItem(U))}return(0,T.GE)((0,Ct.n)(M)),M}async _loadCollection(){const L=(0,P.Zxu)((0,T.d6)());let M=F.Z.getCollection(L);return(0,Om.rm)(M)===Wt().COLLECTION_TYPE_PAGE?void 0:(F.Z.isCollectionLoaded(L)||({collection:M}=await F.Z.loadCollection(L)),(0,T.GE)((0,Ct.wR)(M)),M)}_loadItemAndCollection(){return Promise.all([this._loadItem(),this._loadCollection()])}loadLatestSectionData(){return this._loadItemAndCollection()}getAnnotationSections(){return(0,P.c6V)((0,T.d6)())}getSectionStoreState(){const L=oo.Z.getState(),M=(0,T.d6)(),U=(0,P.fPO)(M);return{...L,editingSectionArea:U,isEditing:U===hn.Z.PAGE,sections:(0,P.c6V)(M),isLoaded:(0,P.Zl0)(M),isSaving:(0,P.gqq)(M)}}getRegion(){return"page"}getSectionActions(){return Hr.Z}createPreviewEmptySectionNode(){const L=(0,l.t)("Empty Page",null,{project:"src.seven-one"}),M=(0,l.t)("Create a beautiful page by adding and combining sections.",null,{project:"src.seven-one"});return this.buildEmptySectionNode({title:L,description:M})}createEmptySectionNode(){const L=Vu()?(0,l.t)("Empty Page",null,{project:"src.seven-one"}):(0,l.t)("Add Page Content",null,{project:"src.seven-one"});return this.buildEmptySectionNode({title:L,hasButton:!Vu()})}onScrimClicked(){const L=(0,T.d6)();(0,P.fPO)(L)===hn.Z.FOOTER&&(0,Ro.V3)("footer"),(0,T.GE)((0,Ct.qC)(null)),(0,T.GE)((0,Ct.xu)(hn.Z.PAGE))}initPageEditButton(){const L=this.getRootEl(),M="page-edit-button-wrapper section-toolbar-button-wrapper";this.editPageButtonContainer||(L.classList.add("header-improvement"),this.editPageButtonContainer=document.createElement("div"),this.editPageButtonContainer.style.display="none",this.editPageButtonContainer.classList.add("page-edit-button-container"),L.appendChild(this.editPageButtonContainer),this.editPageButtonReactRoot=(0,Zi.createRoot)(this.editPageButtonContainer),this.editPageButtonReactRoot.render(W.createElement(Nr,{buttonClasses:M,onClick:this.onScrimClicked.bind(this),icon:ya.Z,buttonText:W.createElement(qi.T,{project:"apps.App"},"Edit Page")})),this._editPageButtonContainerTimeout=setTimeout(()=>{this.editPageButtonContainer&&(this.editPageButtonContainer.style.display="block")},1e3))}removePageEditButton(){this.editPageButtonReactRoot&&(this.editPageButtonReactRoot.unmount(),this.editPageButtonReactRoot=null),this.editPageButtonContainer&&(this.editPageButtonContainer.remove(),this.editPageButtonContainer=null)}destroy(){clearTimeout(this._editPageButtonContainerTimeout),super.destroy(),this.detachSiteHeaderFooterActionListener&&this.detachSiteHeaderFooterActionListener(),this.detachIsHeaderModalOpenListener&&this.detachIsHeaderModalOpenListener(),this.headerHeightChangeListener&&(this.headerHeightChangeListener.detach(),this.headerHeightChangeListener=null),this._resizeObservedHeaderElement=null,this._headerResizeObserver&&(this._headerResizeObserver.disconnect(),delete this._headerResizeObserver),this.performanceTrackingEventHandle&&(this.performanceTrackingEventHandle.detach(),this.performanceTrackingEventHandle=null),Hr.Z.setControllerInitialized.defer(!1),this.actionListener&&(this.actionListener.removeAllActionListeners(),this.actionListener=null),this._detachMetadataClickListeners(),this.removePageEditButton()}_addMetadataClickHandlers(){const{rootNode:L}=this.state,M=['[data-content-field="event-date-time-range"]','[data-content-field="location"]','[data-content-field="categories"]','[data-content-field="tags"]','[data-content-field="source-url"]','[data-content-field="published-on"]','[data-content-field="author"]','[data-content-field="comments"]'].join(", ");L.all(M).each(function(H){const V=H.getDOMNode();V.style.zIndex="1",V.style.position="relative",V.style.cursor="pointer",this.metadataClickListeners.push(H.on("click",()=>{const G=(0,P.gEH)((0,T.d6)()),{contentField:Z}=V.dataset,ee=null;(0,Sa.Dm)(G,Z),F.Z.showCollectionItemSettingsEditor(G,ee)}))},this)}_detachMetadataClickListeners(){this.metadataClickListeners.forEach(L=>L.detach()),this.metadataClickListeners=[]}_bindMeasureEditModePerformance(L){this.performanceTrackingEventHandle||(this.performanceTrackingEventHandle=this.Y.SQS.LayoutEngine.Events.on("layout-engine:layout-rendered",M=>{this.pendingRenderedNodes=this.pendingRenderedNodes.filter(U=>U.getDOMNode()!==M.node.getDOMNode()),this.pendingRenderedNodes.length===0&&this.onMeasureEditModePerformance()})),this.pendingRenderedNodes.push(this.Y.one(L))}_renderTitleEditor(L){const M=this.state.rootNode.one(ju);if(!M)return;const U=M.getDOMNode();U.classList.add(Em().titleEditor),this.titleEditor=new _(this.Y,{hostNode:U,data:L.title,textEditorOptions:{isInline:!0,placeholder:L.recordType===A().EVENT?(0,l.t)("Enter an event title\u2026",null,{project:"apps.App"}):(0,l.t)("Enter a post title\u2026",null,{project:"apps.App"})}}),this.titleEditor.addDataChangeHandler(H=>{window.cancelIdleCallback(this.titleEditorDebounce);const V=(0,P.gEH)((0,T.d6)()).title;H!==V&&(this.titleEditorDebounce=window.requestIdleCallback(()=>(0,T.GE)((0,fs.f1)({title:H}))))})}_renderBodyEditor(L){const M=this.state.rootNode.one(zu);if(!M)return;const U=M.getDOMNode();this.bodyEditor=new N.Z(this.Y,{hostNode:U,pageLayout:L}),this._bindMeasureEditModePerformance(M),U.style.zIndex="1",this.bodyEditor.addDirtyLayoutDataHandler(G=>{setTimeout(()=>{var Z;if(G.editorUid)return;const ee=this.bodyEditor.pageLayout.toJSON(),$=(Z=(0,P.gEH)((0,T.d6)()).body)===null||Z===void 0?void 0:Z.layout;if((0,St.tp)($)&&(0,St.tp)(ee))return;const{hasNonCompatChange:te,changedBlocks:se}=(0,St.K9)({before:$,after:ee}),ae=se&&se.length>0,oe=ae?se.some(de=>(0,St.T6)(de.before.value,de.after.value,de.after.type)):!1;(te||ae)&&(0,T.GE)((0,fs.f1)({body:{layout:ee}},{undoable:te?!0:oe}))})});const V=(0,P.c6V)((0,T.d6)()).find(G=>{let{sectionName:Z}=G;return Z===xn.Z.MAIN_CONTENT});this.layoutEngineManager.registerBodyEditorForSectionId(V.id,this.bodyEditor)}_renderInlineEditors(L,M){this._renderTitleEditor(L),this._renderBodyEditor(M),this._addMetadataClickHandlers()}_renderBlogPaywallExcerptAnnotation(L){var M;const U=(0,P.o1x)((0,T.d6)()),H=L&&L.recordType===A().TEXT&&!(!((M=L.protectionSettings)===null||M===void 0)&&M.isPreviewable)&&(0,Wu.t8)(U==null?void 0:U.pagePermissionType,Wu.ZP.PRICING_PLAN),V=this.getRootEl().querySelector(".blog-item-top-wrapper");!H||!V||(this.blogPaywallExcerptAnnotationContainer=document.createElement("div"),V.insertAdjacentElement("afterend",this.blogPaywallExcerptAnnotationContainer),this.blogPaywallExcerptAnnotationReactRoot=(0,Zi.createRoot)(this.blogPaywallExcerptAnnotationContainer),this.blogPaywallExcerptAnnotationReactRoot.render(W.createElement(wm,{item:L})))}_removeBlogPaywallExcerptAnnotation(){var L,M;(L=this.blogPaywallExcerptAnnotationReactRoot)===null||L===void 0||L.unmount(),this.blogPaywallExcerptAnnotationReactRoot=null,(M=this.blogPaywallExcerptAnnotationContainer)===null||M===void 0||M.remove(),this.blogPaywallExcerptAnnotationContainer=null}_destroyInlineEditors(L,M){if(this.titleEditor){const U=this.titleEditor.hostNode;U.innerHTML=L.title,this.titleEditor.destroy(),this.titleEditor=null}if(this.bodyEditor){const U=this.bodyEditor.hostNode;this.bodyEditor.destroy(),this.bodyEditor=null;const H=this.Y.Squarespace.LayoutEngine.EditController.getInstance();H.pluginLayoutBuilder(this.Y.one(U),M),H.destroyLayoutBuilder(this.Y.one(U))}this._detachMetadataClickListeners()}_syncInlineEditors(L,M){this._destroyInlineEditors(L,M),this._renderInlineEditors(L,M)}getPersistantSelectors(){return this.isInlineEditable()?[...super.getPersistantSelectors(),ju,zu]:super.getPersistantSelectors()}constructor(L,M){super({...L,scrim:{text:(0,l.t)("Edit Page",null,{project:"src.seven-one"}),delay:350},sectionsArea:ba.Z.PAGE_SECTIONS,editingArea:hn.Z.PAGE},M),es(this,"name","PageSectionsAnnotationController"),es(this,"prevSectionsById",{}),es(this,"metadataClickListeners",[]),es(this,"actionListener",void 0),es(this,"bodyEditor",void 0),es(this,"titleEditor",void 0),es(this,"_updateItemEditorsFromUndoRedo",()=>{if(!this.bodyEditor)return;const H=(0,P.gEH)((0,T.d6)()),V=H.body.layout,{hasNonCompatChange:G,changedBlocks:Z}=(0,St.K9)({before:this.bodyEditor.pageLayout.toJSON(),after:V});if(G)this._syncInlineEditors(H,this.makePageLayout(V));else if(Z.length>0){const ee=this.Y.Squarespace.LayoutEngine.EditController.getInstance();if(ee&&!ee.get("destroyed")){const $=`item-${H.id}`;ee.layoutBuilderForNodeId($).syncBlockContentFromJSON(V,Z,!1)}}H.title!==this.titleEditor.data&&this.titleEditor.editor.editor.setContent(H.title)}),es(this,"_headerResizeObserver",void 0),es(this,"_resizeObservedHeaderElement",void 0),es(this,"attachSectionNodeHandlers",H=>{super.attachSectionNodeHandlers(H),this._detachMetadataClickListeners(),this._addMetadataClickHandlers()}),es(this,"detachSiteHeaderFooterActionListener",void 0),es(this,"detachIsHeaderModalOpenListener",void 0),es(this,"headerHeightChangeListener",null),es(this,"performanceTrackingEventHandle",null),es(this,"_handleHeaderHeightChange",H=>{let[V]=H,G=V.target,Z=V.contentRect.height;if(G.parentElement===null){if(this._attachHeaderResizeObserver(),G=this._resizeObservedHeaderElement,!G)return;Z=G.clientHeight}this.set("topOffset",Z);const ee=(0,P.Hlz)((0,T.d6)()),$=document.getElementById(Vr),te=this.state.topOffset+uc+Ju;$&&this.state.rootNode&&(ee===ms.Z.DESKTOP?$.style.top=`${te}px`:$.style.top=`calc((50% - ${Xu/2}px) + ${uc/2+this.state.topOffset}px)`),this.updatePageScrimHeaderSpacing()}),es(this,"_editPageButtonContainerTimeout",null),es(this,"editPageButtonContainer",null),es(this,"editPageButtonReactRoot",null),es(this,"pendingRenderedNodes",[]),es(this,"titleEditorDebounce",void 0),es(this,"blogPaywallExcerptAnnotationContainer",void 0),es(this,"blogPaywallExcerptAnnotationReactRoot",void 0),es(this,"pageLayout",void 0),es(this,"makePageLayout",H=>{const V=(0,P.gEH)((0,T.d6)());return this.pageLayout||(this.pageLayout=new this.Y.SQS.LayoutEngine.Models.PageLayout({collectionId:V.collectionid,parentItemId:V.id})),this.pageLayout.setAttrs(H),this.pageLayout}),es(this,"onMeasureEditModePerformance",()=>{try{const H=(0,P.Zxu)((0,T.d6)()),V=(0,P.gEH)((0,T.d6)());sa.Z.frameToolbarEditFinish({collectionId:H,item:V,pageSectionsById:(0,P.RmA)((0,T.d6)())});const G=(0,P.c13)((0,T.d6)()),Z=G.sectionEditContexts,ee=G.footerSectionIds.length+G.headerSectionIds.length+G.pageSectionIds.length;let $=0,te=0;for(const[oe,de]of Object.entries(Z))de.sectionName&&de.sectionName===xn.Z.FLUID_ENGINE&&($++,te+=de.fluidEngineContext.gridContents.length);const ae=(0,gt.L8)("enter-edit-mode-to-start-edit",{tracer:Ge.Z,spanAttributes:{team:ml().WEBSITE_EDITOR,sectionCount:ee,fluidEngineSectionCount:$,blocksInFECount:te}}).duration;sa.Z.userLoadsPageEditor({collectionId:H,totalTime:ae})}catch(H){Nm(H)}}),es(this,"ensureContentBrowserItem",async H=>{let V=F.Z.getItem(H);if(!V){const G=(0,da.Ml)((0,T.d6)());k.$e(Z=>{Z.setExtra("item",{id:H,cmsStoreItem:G}),Z.setTag("owner","contextual_layout"),k.uT("[PageSectionAnnotationController] ensureContentBrowserItem is called")}),G&&(V=await F.Z.loadPersistedItem(G),await F.Z.loadCollection(G.collectionId))}return V}),es(this,"_handleEditDetails",async(H,V)=>{let{id:G}=V;const Z=await this.ensureContentBrowserItem(G),ee=(0,Bm.Z)();if((0,j.V)(Z)===C.J.VIDEO_ITEM)(0,Sa.Zm)({itemId:Z==null?void 0:Z.id,collectionType:Z==null?void 0:Z.entityType,collectionId:Z==null?void 0:Z.parentCollectionId}),F.Z.openItemSettingsEditor(Z);else if((0,j.V)(Z)===C.J.COURSE_ITEM){const $=(0,bn.I4)(H);(0,T.GE)((0,Ct.gI)({sectionId:$,type:Mu.B.CollectionItem,collectionItemId:G,...Dm}))}else{const $=async()=>{if(await window.Y.Global.SevenOneLifecycleActions.doSaveAllChanges({exit:!0}),ee){const oe={productId:G,entrypoint:Hu.Q.PRODUCT_PAGE};document.dispatchEvent(new CustomEvent(ym._k,{detail:oe}))}else z.ProductComposerOrchestrator.openProductComposer({productId:G,onSavingClose:()=>{w.default.refresh.defer()},eventEntrypoint:Hu.Q.PRODUCT_PAGE})},te=(0,P.Z3A)((0,T.d6)()),se={title:(0,l.t)("Edit Product",null,{project:"src.seven-one"}),message:(0,l.t)("After saving, you will be redirected to your Product page.",null,{project:"src.seven-one"})},ae={title:(0,l.t)("Leave Edit Mode?",null,{project:"src.seven-one"}),message:(0,l.t)("This will save the changes you made to your site and take you to manage your product details.",null,{project:"src.seven-one"})};if(te){const oe=document.createElement("div"),de=(0,Zi.createRoot)(oe);de.render(W.createElement(Rm.Z,{...ee?ae:se,cancelButton:{onClick:()=>de.unmount(),text:(0,l.t)("Cancel",null,{project:"src.seven-one"})},confirmButton:{onClick:()=>{$(),de.unmount()},text:ee?(0,l.t)("Save and Continue",null,{project:"src.seven-one"}):(0,l.t)("Save",null,{project:"src.seven-one"})}}))}else $()}}),es(this,"_finishEditingAndNavigateToPanel",(H,V)=>{let{dirtyText:G,destination:Z,trackingCallback:ee,cancelCallback:$,closeCallback:te}=V;if((0,P.Z3A)((0,T.d6)())){if(ee&&ee(xm),ua.Z.isSevenOne()){(0,T.GE)((0,Ct.fm)());return}this.confirm({title:(0,l.t)("Unsaved Changes",null,{project:"src.seven-one"}),message:G,cancelLabel:(0,l.t)("Don't Save",null,{project:"src.seven-one"}),confirmLabel:(0,l.t)("Save",null,{project:"src.seven-one"})}).then(async se=>{if(se==="onDismiss"&&$){$({destination:Z,trackingCallback:ee,closeCallback:te}),ee&&ee(Um);return}else if(se==="onRequestClose"&&te){te();return}await(0,mm.Z)(),ee&&ee(qm),this._editCollectionItemsFromPristineState({destination:Z,trackingCallback:ee,closeCallback:te})}).catch(se=>{se!==void 0&&k.Tb(se)})}else setTimeout(()=>this._editCollectionItemsFromPristineState({destination:Z,trackingCallback:ee,closeCallback:te}))}),es(this,"_editCollectionItemsFromPristineState",H=>{let{destination:V,trackingCallback:G,closeCallback:Z}=H;window.CONFIG_PANEL.get("router").push(V),this._discardSectionEditingChanges(),G&&G(Zu),Z&&Z()}),es(this,"_trackClickManageCollectionInSection",H=>{if(H!==Zu)return;const V=(0,P.Zxu)((0,T.d6)());try{sa.Z.clickManageCollectionInSection(V)}catch(G){console.log(G)}}),es(this,"_onUpdateFromContentBrowserSave",async H=>{let{item:V,shouldSyncInlineFields:G}=H;if(!this.isFrameRealAndIfNotDestroy())return;(0,T.GE)((0,Ct.n)(V));const Z=(0,P.c6V)((0,T.d6)());await this.updateSectionDomAndStyles(Z[0]),G&&this._syncInlineEditors(V,this.makePageLayout(V.body.layout)),this._renderBlogPaywallExcerptAnnotation(V)}),(0,T.GE)((0,Ct.Xi)({collectionId:this.Y.config.win.Static.SQUARESPACE_CONTEXT.collection.id,itemId:this.Y.config.win.Static.SQUARESPACE_CONTEXT.itemId})),this.appendEmptyPreviewSectionNodeIfNeeded(),this.handles.push((0,T.gH)(P.Hlz,()=>{const H=document.getElementById(Vr);H&&this._styleScrim(H)})),this.handles.push((0,T.gH)(P.RmA,(H,V)=>{const G=(0,T.d6)(),Z=(0,P.gqq)(G);if((0,P.aEP)(G)===aa.hn.PAGE_EDIT_FULL_SCREEN||Z){const{added:ee,changed:$,removed:te}=(0,go.Z)(V,H);this.onCmsRenderedSectionsChange(this.getSectionStoreState(),ee,$,te),this.prevSectionsById=H}})),this.handles.push((0,T.gH)(P.hml,(H,V)=>{const G=(0,T.d6)(),Z=(0,P.gqq)(G),ee=(0,P.Zl0)(G),$=(0,P.aEP)(G)===aa.hn.PAGE_EDIT_FULL_SCREEN;Z||!ee||!$||(!H||!V)||this._updateEditedCollectionItemSection(H)})),this.handles.push((0,T.gH)(P.o1x,(H,V)=>{const G=(0,T.d6)(),Z=(0,P.gqq)(G),ee=(0,P.Zl0)(G),$=(0,P.aEP)(G)===aa.hn.PAGE_EDIT_FULL_SCREEN;Z||!ee||!$||(!H||!V)||this._updateEditedCollectionSection(H)})),this.handles.push((0,T.gH)(P.K87,()=>{this._onHeaderFooterStoreUpdate()})),this.handles.push((0,T.gH)(P.Sck,()=>{(0,P.Zl0)((0,T.d6)())&&this._updateItemEditorsFromUndoRedo()})),this.handles.push((0,T.gH)(P.fPO,()=>{this.toggleScrim(),this.updatePageScrimHeaderSpacing()})),this.handles.push((0,T.gH)(P.T_m,(H,V)=>{H.length===V.length&&this.onSectionOrderUpdate(H,V)})),this._attachHeaderResizeObserver(),this._loadItemAndCollection().then(()=>{this.isFrameRealAndIfNotDestroy()&&Hr.Z.setControllerInitialized.defer(!0)},H=>{throw new Error("PageSectionsAnnotationController failed to load collection or collection item",{cause:H})}),this.actionListener=new(rc())(lc.Z),this.actionListener.addActionListener(Hr.Z.UPDATE_FRAME_FROM_CONTENT_BROWSER_SAVE,this._onUpdateFromContentBrowserSave);const U=this.getRootEl();this.registerEventListener(U,"mouseenter",()=>{const H=(0,T.d6)(),V=(0,P.fPO)(H),G=(0,P.PwT)(H),Z=(0,P.Ouw)(H);!G&&!Z&&V===hn.Z.COLLECTION_ITEM&&this.handleSetEditingMode()}),this.editPageButtonContainer=null,this.editPageButtonReactRoot=null,this.initPageEditButton()}}es($u,"sectionAreaName","main");var dc=t(523609);function Yu(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}class ed extends Wr{toggleScrim(){const M=(0,P.fPO)((0,T.d6)())===hn.Z.FOOTER,{isScrimEnabled:U}=this.state;!U&&M?this.showScrim():U&&!M&&this.hideScrim()}isSectionDeletable(){return!0}cleanUp(){super.cleanUp(),this.cleanUpEmptySectionNode()}getAnnotationSections(){return(0,P.UlS)((0,T.d6)())}getSectionStoreState(){const L=ro.Z.getState(),M=(0,T.d6)(),U=(0,P.fPO)(M);return{...L,editingSectionArea:U,isEditing:U===hn.Z.COLLECTION_ITEM,sections:(0,P.UlS)(M),isLoaded:(0,P.Zl0)(M),isSaving:(0,P.gqq)(M)}}getRegion(){return"collection-item"}getSectionActions(){return dc.Z}createEmptySectionNode(){return this.createPreviewEmptySectionNode()}createPreviewEmptySectionNode(){return this.buildEmptySectionNode({title:(0,l.t)("Add Page Content",null,{project:"src.seven-one"}),hasButton:!0})}handleSetEditingMode(){(0,T.GE)((0,Ct.xu)(hn.Z.COLLECTION_ITEM))}onScrimClicked(){(0,T.GE)((0,Ct.qC)(null)),this.handleSetEditingMode()}destroy(){super.destroy(),dc.Z.setControllerInitialized.defer(!1)}constructor(L,M){super({...L,scrim:{text:(0,l.t)("Edit Page",null,{project:"src.seven-one"})},sectionsArea:ba.Z.COLLECTION_ITEM_SECTIONS,editingArea:hn.Z.COLLECTION_ITEM},M),Yu(this,"name","CollectionItemSectionsAnnotationController"),dc.Z.setControllerInitialized(!0),this.handles.push((0,T.gH)(P.vo_,(H,V)=>{const{added:G,changed:Z,removed:ee}=(0,go.Z)(V,H);this.onCmsRenderedSectionsChange(this.getSectionStoreState(),G,Z,ee),this.prevSectionsById=H}),(0,T.gH)(P.fPO,H=>{this.toggleScrim(),H!==hn.Z.NOT_EDITING?this.appendEmptyPreviewSectionNodeIfNeeded():this.cleanUpEmptySectionNode()}),(0,T.gH)(P.XpY,(H,V)=>{H.length===V.length&&this.onSectionOrderUpdate(H,V)}));const U=this.getRootEl();U.setAttribute("data-test","collection-item-sections"),this.registerEventListener(U,"mouseenter",()=>{const H=(0,T.d6)(),V=(0,P.fPO)(H);!(0,P.PwT)(H)&&V===hn.Z.PAGE&&this.handleSetEditingMode()})}}Yu(ed,"sectionAreaName","collection-item");var Hm=t(571860),hc=t(871255);function bl(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}class td extends Wr{toggleScrim(){if(oo.Z.getState().isGalleryContentEditorOpen||ro.Z.getState().isGalleryContentEditorOpen)return;const{isEmpty:M,isMouseOver:U}=this.state;if(M)return;const H=(0,P.fPO)((0,T.d6)()),V=H===hn.Z.PAGE||H===hn.Z.COLLECTION_ITEM;if(H===hn.Z.HEADER){this.showScrimWithButtonHide();return}if(V&&U){this.showScrim(),me.Z.hasRole(Ee.DRAFT_EDITOR)&&this.state.rootNode.getDOMNode().classList.add("sqs-scrim-no-button");return}this.hideScrim()}isSectionDeletable(){return!0}cleanUp(){super.cleanUp(),this.cleanUpEmptySectionNode()}getAnnotationSections(){return(0,P.L1s)((0,T.d6)())}getSectionStoreState(){const L=Hm.Z.getState(),M=(0,T.d6)(),U=(0,P.fPO)(M);return{...L,editingSectionArea:U,isEditing:U===hn.Z.FOOTER,sections:(0,P.L1s)(M),isLoaded:(0,P.Zl0)(M),isSaving:(0,P.gqq)(M)}}getRegion(){return"footer"}getSectionActions(){return hc.Z}createEmptySectionNode(){return this.createPreviewEmptySectionNode()}createPreviewEmptySectionNode(){return this.buildEmptySectionNode({title:(0,l.t)("Add Site Footer",null,{project:"src.seven-one"}),hasButton:!0})}handleSetEditingMode(){this.onScrimClicked()}onScrimClicked(){if(!this.state.canEditGlobalSections)return;const L=(0,P.Zxu)((0,T.d6)());this.scrollFooterIntoView(),(0,T.GE)((0,Ct.qC)(null)),(0,T.GE)((0,Ct.xu)(hn.Z.FOOTER)),(0,Ro.AY)(L)}initFooterEditButton(){const L=this.getRootEl(),M="footer-edit-button-wrapper section-toolbar-button-wrapper";this.editFooterButtonContainer||(L.classList.add("header-improvement"),this.editFooterButtonContainer=document.createElement("div"),this.editFooterButtonContainer.style.display="none",this.editFooterButtonContainer.classList.add("footer-edit-button-container"),L.appendChild(this.editFooterButtonContainer),this.editFooterButtonReactRoot=(0,Zi.createRoot)(this.editFooterButtonContainer),this.editFooterButtonReactRoot.render(W.createElement(Nr,{buttonClasses:M,onClick:this.onScrimClicked.bind(this),icon:ya.Z,buttonText:W.createElement(qi.T,{project:"apps.App"},"Edit Site Footer")})),this._editFooterButtonContainerTimeout=setTimeout(()=>{this.editFooterButtonContainer&&(this.editFooterButtonContainer.style.display="block")},1e3))}removeFooterEditButton(){this.editFooterButtonReactRoot&&(this.editFooterButtonReactRoot.unmount(),this.editFooterButtonReactRoot=null),this.editFooterButtonContainer&&(this.editFooterButtonContainer.remove(),this.editFooterButtonContainer=null)}destroy(){clearTimeout(this._editFooterButtonContainerTimeout),super.destroy(),hc.Z.setControllerInitialized.defer(!1),this.removeFooterEditButton()}constructor(L,M){super({...L,scrim:{text:(0,l.t)("Edit Footer",null,{project:"src.seven-one"})},sectionsArea:ba.Z.FOOTER_SECTIONS,editingArea:hn.Z.FOOTER},M),bl(this,"name","FooterSectionsAnnotationController"),bl(this,"scrollFooterIntoView",()=>{if(!this.isFrameRealAndIfNotDestroy())return;const H=this.getRootEl().ownerDocument;H.defaultView.innerHeight+H.defaultView.scrollY<H.body.scrollHeight-10&&H.defaultView.scrollTo(0,H.body.clientHeight)}),bl(this,"_editFooterButtonContainerTimeout",null),this.handles.push((0,T.gH)(P.bcX,(H,V)=>{const{added:G,changed:Z,removed:ee}=(0,go.Z)(V,H);this.onCmsRenderedSectionsChange(this.getSectionStoreState(),G,Z,ee),this.prevSectionsById=H})),this.handles.push((0,T.gH)(P.fPO,H=>{this.toggleScrim(),H!==hn.Z.NOT_EDITING?this.appendEmptyPreviewSectionNodeIfNeeded():this.cleanUpEmptySectionNode()})),this.handles.push((0,T.gH)(P.MCT,(H,V)=>{H.length===V.length&&this.onSectionOrderUpdate(H,V)})),this.handles.push((0,T.gH)(P.L1s,(H,V)=>{!V.length&&H.length&&(0,P._bw)((0,T.d6)())&&(H.forEach(Z=>{const ee=this.getSectionNode(Z);this.layoutEngineManager.initLayoutEngine(Z,ee)}),setTimeout(()=>{this.cleanUp()},0))})),this.addAfterChangeHandler("isMouseOver",this.toggleScrim,this),this.addAfterChangeHandler("isScrimEnabled",this.toggleScrim,this);const U=this.getRootEl();U.setAttribute("data-test","footer"),U.setAttribute(Wi.GUIDANCE_DATA_ATTRIBUTE,Wi.ElementDataIds.FOOTER_CONTAINER),this.editFooterButtonContainer=null,this.editFooterButtonReactRoot=null,this.initFooterEditButton(),hc.Z.setControllerInitialized.defer(!0)}}bl(td,"sectionAreaName","footer");var id=t(840635),gc=t(990347),Cl=t(514350);function br(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}const nd="sqs-announcement-bar-dropzone",Vm=(K,L)=>["action.buttonText","action.href"].some(M=>(0,f.get)(K.header,M)!==(0,f.get)(L.header,M))||K.headerWebsiteData.siteTitle!==L.headerWebsiteData.siteTitle,sd=(K,L)=>{const M=K.parentNode,U=document.createElement("div");M.insertBefore(U,K),K.remove(),M.insertBefore(L,U),U.remove()};class jm extends Bu.Z{destroy(){super.destroy(),this.debouncedClientRenderHeader.cancel(),this.actionListener&&(this.actionListener.removeAllActionListeners(),this.actionListener=null),this.handles.forEach(L=>L())}initializeRootNode(){super.initializeRootNode();const L=this.state.rootNode.getDOMNode();this.registerEventListener(L,"click",this.handleOnClick),super.initializeScrim(this.state.rootNode),this.state.rootNode.getDOMNode().setAttribute("data-test","header")}reattachBaseListeners(){this.eventListeners.forEach(L=>{let{node:M,eventName:U,callback:H}=L;M.removeEventListener(U,H)}),this.eventListeners=[],this.attachEventListeners()}updateHeaderNode(L){const M=window.Y.Node(L);this.set("rootNode",M),this.set("overlayRootNode",M),this.reattachBaseListeners(),this.initializeRootNode()}openHeaderModal(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ss.qu||(0,So.Ak)({logoImageId:Ki.default.getState().get("logoImageId"),mobileLogoImageId:Ki.default.getState().get("mobileLogoImageId"),header:(0,P.WMr)((0,T.d6)())}),L.initialEditorRoute&&No.Z.setEditorInitialRoute(L.initialEditorRoute),(0,T.GE)((0,Ct.jJ)(!0))}showScrim(){var L;!((L=this.state.rootNode)===null||L===void 0)&&L.getDOMNode()&&(me.Z.hasRole(Ee.DRAFT_EDITOR)&&this.state.rootNode.getDOMNode().classList.add("sqs-scrim-no-button"),super.showScrim())}hideScrim(){var L;!((L=this.state.rootNode)===null||L===void 0)&&L.getDOMNode()&&super.hideScrim()}toggleScrim(){if(oo.Z.getState().isGalleryContentEditorOpen||ro.Z.getState().isGalleryContentEditorOpen)return;const M=(0,P.K87)((0,T.d6)()),U=(0,P.aEP)((0,T.d6)())===aa.hn.PAGE_EDIT_FULL_SCREEN,{isMouseOver:H}=this.state;H&&!M&&U?this.showScrim():this.hideScrim()}constructor(L,M){var U;super({...L,scrim:{text:(0,l.t)("Edit Site Header",null,{project:"src.seven-one"})},editingArea:hn.Z.HEADER},M),U=this,br(this,"name","SiteHeaderAnnotationController"),br(this,"onTrackAfterTweakUpdate",()=>{const H=(0,Cl.es)(),V=this.actionListener.addActionListener(gc.Z.DOM_UPDATED,()=>{H(),this.actionListener.removeActionListener(V)})}),br(this,"onRerenderFromChange",async function(){let{isDebounced:H=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if((0,P.aEP)((0,T.d6)())!==aa.hn.PAGE_EDIT_FULL_SCREEN)return;const V=(0,Cl.es)(),G={...(0,P.Kwz)((0,T.d6)()),header:(0,P.WMr)((0,T.d6)())};H?U.debouncedClientRenderHeader(G):await U.clientRenderHeader(G),V()}),br(this,"handleOnClick",H=>{const V=me.Z.hasRole(Ee.ADMIN)||me.Z.hasRole(Ee.WEBSITE_MANAGER),G=(0,P.fPO)((0,T.d6)()),Z=(0,P.Zxu)((0,T.d6)()),ee=G===hn.Z.HEADER,$=G===hn.Z.FOOTER;if((!this.state.isScrimEnabled||ee||!V||!this.state.canEditGlobalSections)&&!ss.Ay)return;H.stopPropagation(),this.hideScrim();const te=this.state.rootNode.getDOMNode().ownerDocument,se=te.querySelector("html");te.scrollingElement.scrollTop>0&&Ja()(se,{top:0,left:0},{easing:"easeInOutSine",maxDuration:100}),(0,us.mq)(Z),$&&(0,T.GE)((0,Ct.xu)(hn.Z.PAGE)),this.openHeaderModal()}),br(this,"clientRenderHeader",async H=>{let{headerTransparencyChanged:V,...G}=H;const Z=await(0,So.gm)(G),ee=document.getElementById("sqs-site-frame").contentWindow.document,$=Z.getElementById("header"),te=ee.getElementById("header"),se=ee.getElementsByClassName(nd)[0],ae=Z.getElementsByClassName(nd)[0];let oe=!0;const de={};oe=(0,Ns.I9)(ba.Z.HEADER_SECTION,"header",de,G),oe&&(sd(te,$),this.updateHeaderNode($),await(0,Ns.t9)(ba.Z.HEADER_SECTION,"header",$,G),nn({sectionsArea:ba.Z.HEADER_SECTION,changedSectionMap:{header:$}}),se&&ae&&sd(ae,se),setTimeout(()=>{_o.Z.getState().isOverlayDisclosureOpen&&Fs.Y.fire("header:menuOverlay:opened")},0))}),br(this,"debouncedClientRenderHeader",(0,f.debounce)(this.clientRenderHeader,300)),this.initializeRootNode(),this.addAfterChangeHandler("isMouseOver",this.toggleScrim,this),this.actionListener=new(rc())(lc.Z),this.actionListener.addActionListener(Hr.Z.NAVIGATE_TO_THEME_EDITOR,this.hideScrim.bind(this)),this.actionListener.addActionListener(id.Z.REFRESH_LAYOUT_ENGINE,()=>this.onRerenderFromChange()),this.handles=[],this.handles.push((0,T.gH)(P.x6H,(H,V)=>{const G=(0,P._bw)((0,T.d6)());!V.header&&!G||!H.header||this.onRerenderFromChange({isDebounced:Vm(V,H)})}))}}var zm=t(487558),Km=t(661614),Gm=t(1733);const Zm=K=>{let{node:L}=K;const M=(0,T.Ze)(P.fPO)==="HEADER";return W.createElement(lr.Z,null,W.createElement(mu,{isEditingEnabled:M,region:"header",sectionId:"header",sectionIndex:0,sectionNode:L,features:{}}))};var o_=t(72510),Xm=t(139717),ad=t(762005),Qm=t(586724),uo=t.n(Qm),Jm=t(12574);const $m=55,{ESCMANAGER_IGNORE_CLASSNAME:Ym}=Ii,ev=K=>{let{children:L}=K;return W.createElement(Vl.Z,{cacheKey:"react-block-annotation-cache-key"},W.createElement(hl.Z.Provider,{theme:ad.rosetta.white},L))},tv={offset:11,shiftMarginWhenConstrained:!0},iv=K=>{let{elementNode:L,isSelected:M=!1,container:U,isLastAnnotationItem:H,outlinePosition:V,children:G,onPopupVisibilityChange:Z,...ee}=K;const $=(0,W.useRef)(null),te=(0,T.Ze)(P.aEP),[,se]=(0,W.useState)(!1),ae=W.Children.toArray(G).length,de=(0,T.Ze)(P.Hlz)===ms.Z.PHONE,[ue,xe]=(0,W.useState)(0),De=W.Children.toArray(G);(0,W.useEffect)(()=>{if(!L)return;const At=new kr.d(()=>{se(ze=>!ze)});return At.observe(L),()=>{At.disconnect()}},[L]);const Ve=(0,W.useCallback)(At=>{Z&&Z(At)},[Z]),pt=(0,W.useMemo)(()=>{const At=te===aa.hn.PAGE_EDIT_FULL_SCREEN,ze=window.innerWidth,ft=ae*44,vt=V.right+ft>ze,Pe=()=>{const be=V.top+15;return[V.left-ft,be]},Ne=()=>{let be=V.top+15,Ze=V.right;if(de){var Ye;const Et=(Ye=document.getElementById("sqs-site-frame"))===null||Ye===void 0?void 0:Ye.getBoundingClientRect(),dt=Et==null?void 0:Et.right,Ot=22;Ze=dt?dt+Ot:V.right,be=V.top+Ot}return[Ze,be]},Ue=()=>{const be={x:10};return vt&&(be.x=-10),de&&(be.x=0),be};return{style:At?{marginTop:$m}:{},scrollNode:At?L.ownerDocument.body:void 0,anchor:vt?Pe:Ne,anchorPoint:{x:vt?"left":"right",y:"middle"},position:"right-middle",offset:Ue()}},[te,L,ae,V,de]),ot=()=>{var At,ze;(At=$.current)===null||At===void 0||At.blur(),(ze=U.current)===null||ze===void 0||ze.focus(),(0,T.GE)((0,Ct.je)(null))};(0,Jm.Z)(null,()=>{ot()});const ut=At=>{const ze=At.key;ze==="Tab"&&(ue+1===ae?(ot(),H&&(0,$a.rT)()):xe(ue+1)),(ze==="Enter"||ze==="Return")&&De[ue].key.includes("remove-element")&&(0,$a.NA)()};return W.createElement(Xm.Z,{...pt,isOpen:!0,className:it()(Ym,uo().popoverWrapper,{[uo().mobilePopoverWrapper]:de}),constrainToScreen:tv,role:"menu",hideArrow:!0,onVisibilityChange:Ve},W.createElement(ev,null,W.createElement("div",{ref:$,className:it()(uo().reactBlockAnnotation,bc.ZP.UNMASK_ELEMENT),...ee,onKeyDown:ut},G)))};var nv=t(151059);const sv="-outline",av=K=>{const L={annotationResetDataAttribute:(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.HEADER_ANNOTATION_RESET),pencilEditButtonDataAttribute:(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.PENCIL_EDIT_BUTTON),outlineDataAttribute:{},outlineLabelDataAttribute:{}},[M]=K.split(sv);switch(M){case Di.IP.SITE_TITLE:L.outlineDataAttribute=(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.SITE_TITLE_OUTLINE),L.outlineLabelDataAttribute=(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.SITE_TITLE_OUTLINE_LABEL);break;case Di.IP.SITE_NAV:L.outlineDataAttribute=(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.SITE_NAV_OUTLINE),L.outlineLabelDataAttribute=(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.SITE_NAV_OUTLINE_LABEL);break;default:break}return L},ov=K=>{let{quickActions:L}=K;return W.createElement(gr.Z.Portal,null,W.createElement(gr.Z.Container,null,W.createElement(gr.Z.Drawer,{"data-test":"remove-quick-action",docks:[55,55],draggable:!1,renderHeader:()=>W.createElement(Br.Z,{direction:"row",width:"100vw",height:"55px",divider:W.createElement(Oc.Z.Vertical,null),of:M=>W.createElement(Br.Z.StackItemContainer,{...M,sx:{display:"flex",flexGrow:1}})},L.map(M=>{let{label:U,onClick:H,key:V,color:G="fg.default"}=M;return W.createElement(ll.Z.Element.WithoutFeedback,{onClick:H,textAlign:"center",key:V},W.createElement(Vi.Z.Action,{color:G},U))})),renderBody:()=>null})))},od=10,Al=5,rv=55,lv=K=>{let{headerElementName:L,headerElementNode:M,outlinePosition:U,handleOnElementClick:H,selectedElement:V,label:G,elementIndex:Z,id:ee,numElements:$}=K;var te;const se=(0,T.Ze)(P.fPO)==="HEADER",ae=(0,T.Ze)(P.frp)===L,oe=(0,T.Ze)(P.aBQ),de=(0,P.WMr)((0,T.d6)()),[ue,xe]=(0,W.useState)(!1),[De,Ve]=(0,W.useState)(!1),pt=!Di.JQ.includes(L),ot=!Di.Vp.includes(L),ut=Di.hU.includes(L),At=(0,T.Ze)(P.ZXd),ze=oe===L,ft=V===L,[vt,Pe]=(0,W.useState)(!1),Ne=Z+1===$,Ue=(0,T.Ze)(P.Hlz)===ms.Z.PHONE,[be,Ze]=(0,W.useState)(0),{annotationResetDataAttribute:Ye,outlineDataAttribute:Et,outlineLabelDataAttribute:dt,pencilEditButtonDataAttribute:Ot}=av(ee),jt=(0,W.useRef)(null),ii=(0,W.useRef)(null),tt=(0,W.useRef)(null),{platform:Kt}=(0,In.i)(ts.breakpoints),Rt=Kt==="mobile";(0,W.useEffect)(()=>{V!==L&&Ve(!1)},[V,L]),(0,W.useEffect)(()=>{const Gi=M.ownerDocument.defaultView,si=()=>{const sn=(Gi==null?void 0:Gi.scrollY)??0;Ze(sn)};return Gi==null||Gi.addEventListener("scroll",si),()=>{Gi==null||Gi.removeEventListener("scroll",si)}},[Ze,M]);const Oi=se&&(ue||ze||De||ae||ft),Si=(0,W.useCallback)(()=>{xe(!0),oe&&(0,T.GE)((0,Ct.C_)(null))},[oe]),xi=(0,W.useCallback)(()=>xe(!1),[]),Pn=(0,W.useCallback)(Gi=>{if(L===Di.IP.MENU_ICON||At&&Di.BS.includes(L)){var sn;const En=(sn=document.getElementById("sqs-site-frame"))===null||sn===void 0?void 0:sn.getBoundingClientRect(),Hs=En==null?void 0:En.right,os=22,va=Gi.currentTarget.getBoundingClientRect(),la=Hs?Hs+os:va.x,Da=new DOMRect(la,va.y,va.width,va.height);(0,T.GE)((0,Ct.oI)(Da))}(0,T.GE)((0,Ct.qC)(L)),Ve(!1),(0,rl.Hb)(L)},[L,At]),Pi=(0,W.useCallback)(Gi=>{const si=()=>{No.Z.setHeaderElementModalTab(Di.L5[L]);const sn=Gi.currentTarget.getBoundingClientRect();(0,T.GE)((0,Ct.oI)(sn)),H(L),Pn(Gi)};if(Rt){Di.Vp.includes(L)?Ve(!0):si();return}switch(Gi.detail){case 2:{Di.Vp.includes(L)||si();break}default:{Ve(!0);const sn=Gi.currentTarget.getBoundingClientRect();(0,T.GE)((0,Ct.oI)(sn)),No.Z.setHeaderElementModalTab(Di.L5[L]),H(L)}}},[L,H,Pn,Rt]),cn=()=>{const Gi=Di.YD[L];let si;L===Di.IP.LANGUAGE_SWITCH?si={sectionId:"header",[Gi]:{enabled:!1}}:si={sectionId:"header",[Gi]:!1},(0,rl.xL)(L),(0,T.GE)((0,Ct.je)(null)),(0,T.GE)((0,fs.yV)(si))},jn=(0,W.useCallback)(Gi=>{let{url:si,newWindow:sn}=Gi;var En;const os={sectionId:"header",[Di.GW[L]]:{newWindow:sn,href:si,buttonText:(En=de.action)===null||En===void 0?void 0:En.buttonText}};(0,T.GE)((0,fs.yV)(os))},[L,de==null||(te=de.action)===null||te===void 0?void 0:te.buttonText]),as=(0,W.useCallback)(()=>{Ve(!1),Pe(!1),(0,T.GE)((0,Ct.je)(null)),!V&&!At&&(0,T.GE)((0,Ct.xu)(hn.Z.PAGE))},[V,At]),Ji=()=>W.createElement("div",{...Ye,className:uo().restorePointerEvents,onClick:as,style:{position:"fixed",top:`${rv}px`,left:0,right:0,bottom:0,zIndex:300}}),ni=(0,W.useCallback)(Gi=>{if(vt&&Gi){if(ot){var si;(si=ii.current)===null||si===void 0||si.focus()}else if(pt){var sn;(sn=tt.current)===null||sn===void 0||sn.focus()}}},[vt,ot,pt]),On=Gi=>{const si=Gi.key;(si==="Enter"||si==="Return"||si===" ")&&(Pe(!0),ni(!0)),si==="Tab"&&!Gi.shiftKey&&Ne&&(Pe(!1),setTimeout(()=>{Ue?(0,$a.yS)(`${Di.IP.MOBILE_DESIGN}-outline`):(0,$a.rT)()},0)),oe&&(0,T.GE)((0,Ct.C_)(null))},yn=()=>{var Gi,si;return W.createElement(W.Fragment,null,W.createElement(iv,{...Ot,elementNode:M,isSelected:ae,outlinePosition:{...U,top:U.top-be},tabIndex:0,onPopupVisibilityChange:ni,container:jt,isLastAnnotationItem:Ne},ot&&W.createElement(pr.Z,{key:"element-edit-button",label:`${Di.oe.EDIT} ${G}`,tooltipStyles:{width:"max-content"},onClick:Pn,ref:ii},W.createElement(ya.Z,{color:"black"})),ut&&W.createElement(nv.sQ,{onChange:jn,value:{newWindow:(de==null||(Gi=de.action)===null||Gi===void 0?void 0:Gi.newWindow)??!0,url:(de==null||(si=de.action)===null||si===void 0?void 0:si.href)??""}}),pt&&W.createElement(pr.Z,{key:"remove-element",label:`${Di.oe.REMOVE} ${G}`,onClick:cn,ref:tt},W.createElement(Ca.Z,{color:"red.400"}))))},zn=()=>W.createElement(ov,{quickActions:[...pt?[{label:Di.oe.REMOVE,onClick:cn,key:"remove-element",color:"red.400"}]:[]]});return W.createElement(W.Fragment,null,se&&(ae||De)&&W.createElement(Ji,null),se&&W.createElement(W.Fragment,null,W.createElement(mn.Z,{...Et,tabIndex:0,as:"button",onKeyDown:On,backgroundColor:"transparent",ref:jt,id:ee,className:it()(uo().restorePointerEvents,uo().headerFocusVisible,{[$a.YZ]:Ne}),onPointerEnter:Si,onPointerLeave:xi,onClick:Pi,position:"absolute",zIndex:Rt?3e5:500,top:U.top+55-Al-be,right:U.right+Al,bottom:U.bottom+Al-be,left:U.left-Al,borderStyle:"solid",borderWidth:"3px",borderColor:Oi?"blue.600":"transparent",height:U.height+od,width:U.width+od,transitionDuration:150,transitionTimingFunction:"linear",transitionProperty:"width, height"},W.createElement(mn.Z,{position:"absolute",top:"-2px",right:"-2px",bottom:"-2px",left:"-2px",borderStyle:"solid",borderWidth:"2px",borderColor:Oi?"blue.400":"transparent"}),W.createElement(mn.Z,{...dt,className:it()(uo().headerElementLabelTagOnOutline,uo().headerElementLabelTag,{[uo().hovering]:(ue||ze)&&!De,[uo().showing]:ft&&!ae})},G)),De&&W.createElement(Zo.Z.Renderer,{render:{default:yn,"mobile-0":zn,"mobile-100":zn}})))},cv=K=>{let{headerElementAnnotations:L,wrapperNode:M}=K;const U=(0,T.Ze)(P.hF7)??"",H=Z=>{(0,T.GE)((0,Ct.je)(Z))},V=(0,T.Ze)(P.aEP)===aa.hn.PAGE_EDIT_FULL_SCREEN,G=(0,T.Ze)(P.ZBi);return V&&!G&&(0,ks.createPortal)(W.createElement(W.Fragment,null,L.map((Z,ee)=>W.createElement(lv,{id:`${Z.headerElementName}-outline`,key:Z.headerElementName,headerElementName:Z.headerElementName,headerElementNode:Z.headerElementNode,outlinePosition:Z.headerElementOutline,handleOnElementClick:H,selectedElement:U,label:Z.label,elementIndex:ee,numElements:L.length}))),M)};var uv=t(808373);function dv(K){return W.createElement(As.StatsigProvider,{client:(0,Us.GC)()},W.createElement(uv.Z.Provider,{theme:ad.rosetta.white},W.createElement(T.ZP,null,W.createElement(cv,K))))}const Cr=3,rd=40,{SPACE_AROUND_FRAME_CLASS:hv}=cr,gv=(K,L)=>{const M=".header-display-desktop > .header-actions",U=".header-display-desktop > .header-title-nav-wrapper",H=window.innerWidth<=799,V=new Map;return K===ms.Z.DESKTOP?H?(V.set(Di.IP.SITE_TITLE,".header-display-mobile .header-title a"),V.set(Di.IP.CART,".header-display-mobile .header-actions-action--cart"),V.set(Di.IP.MENU_ICON,".header-display-mobile .header-burger-btn")):(V.set(Di.IP.SITE_TITLE,U+" > .header-title a"),V.set(Di.IP.SITE_NAV,U+" > .header-nav > .header-nav-wrapper > .header-nav-list"),V.set(Di.IP.ACCOUNT,M+" > .user-accounts-link a"),V.set(Di.IP.SOCIAL_LINKS,M+" > .header-actions-action--social"),V.set(Di.IP.LANGUAGE_SWITCH,M+" > .language-picker"),V.set(Di.IP.CART,M+" > .showOnDesktop > .header-actions-action--cart"),V.set(Di.IP.BUTTON,M+" > .header-actions-action--cta a")):K===ms.Z.PHONE&&(L?(V.set(Di.IP.SITE_TITLE,".header-display-mobile .header-title a"),V.set(Di.IP.CART,".header-display-mobile .header-actions-action--cart"),V.set(Di.IP.MENU_ICON,".header-display-mobile .header-burger-btn"),V.set(Di.IP.SITE_NAV,".header-menu .header-menu-nav-wrapper"),V.set(Di.IP.ACCOUNT,".header-menu .user-accounts-link a span"),V.set(Di.IP.SOCIAL_LINKS,".header-menu .social-accounts"),V.set(Di.IP.LANGUAGE_SWITCH,".header-menu .language-picker-mobile"),V.set(Di.IP.BUTTON,".header-menu .header-menu-cta a")):(V.set(Di.IP.SITE_TITLE,".header-display-mobile .header-title a"),V.set(Di.IP.CART,".header-display-mobile .header-actions-action--cart"),V.set(Di.IP.MENU_ICON,".header-display-mobile .header-burger-btn"))),V},pv=K=>{const L=K.querySelector("#header .header-announcement-bar-wrapper");let M=0,U=0,H=0;return L&&(M=parseFloat(window.getComputedStyle(L).paddingLeft),U=parseFloat(window.getComputedStyle(L).paddingRight),H=L.getBoundingClientRect().width-M-U),{mobileMenuTopBarPaddingLeft:M,mobileMenuTopBarPaddingRight:U,mobileMenuTopBarWidth:H}},fv=(K,L,M)=>{let U=0;return L.forEach((H,V)=>{const G=K.querySelector(H);G&&(M===ms.Z.DESKTOP||M===ms.Z.PHONE&&Di.Bm.includes(V))&&(U=Math.max(G.getBoundingClientRect().height,U))}),U},mv=K=>{let{headerElementNode:L,headerElementName:M,tallestOutlineHeight:U,mobileMenuTopBarPaddingLeft:H,mobileMenuTopBarPaddingRight:V,mobileMenuTopBarWidth:G,checkingElementsInsideTopBar:Z,deviceView:ee}=K;const $=L.getBoundingClientRect(),te={...$.toJSON()},se=(U-$.height)/2;Z&&(te.height=U);const ae=L.closest("#header");if(ae&&Z){const oe=ae.getBoundingClientRect();if($.top-se<Cr){const de=se-$.top;te.height-=de+Cr,te.bottom-=de,te.top=Cr}else te.top-=se;if($.bottom+se>oe.bottom-Cr){const de=$.bottom+se-(oe.bottom-Cr);te.height-=de+Cr,te.bottom=oe.bottom}else te.bottom+=se}if(ee===ms.Z.DESKTOP&&M===Di.IP.SOCIAL_LINKS){const oe=L.closest(".header-actions--right"),de=L.closest(".header-actions--left");let ue=!1;if(oe){const xe=L.querySelector("a");if(xe){const De=window.getComputedStyle(xe),Ve=parseInt(De.marginLeft,10);te.width-=Ve,te.left+=Ve}else ue=!0}if(de){const xe=L.querySelector("a:last-child");if(xe){const De=window.getComputedStyle(xe),Ve=parseInt(De.marginRight,10);te.width-=Ve,te.right-=Ve}else ue=!0}if(ue){if(!L.querySelector(".social-link-placeholder-outline")){const xe=document.createElement("div");xe.setAttribute("class","social-link-placeholder-outline"),xe.setAttribute("style","width: 44px; height: 44px; padding-left: 10px"),L.appendChild(xe)}te.width=rd,te.height=rd,te.left+=10}}if(ee===ms.Z.PHONE){const oe="."+hv,de=document.querySelector(oe),ue=de==null?void 0:de.getBoundingClientRect(),xe=ue==null?void 0:ue.right;Di.Bm.includes(M)?(te.left+=xe,te.right+=xe):(te.left=(xe||0)+H,te.right=(xe||0)+V,te.width=G)}return te},vv=K=>{const L=(0,P.Hlz)((0,T.d6)()),M=(0,P.ZXd)((0,T.d6)()),U=gv(L,M),H=fv(K,U,L),{mobileMenuTopBarPaddingLeft:V,mobileMenuTopBarPaddingRight:G,mobileMenuTopBarWidth:Z}=pv(K),ee=[];return U.forEach(($,te)=>{let se=K.querySelector($);if(te===Di.IP.SITE_TITLE){const ae=K.querySelectorAll($);for(let oe=0;oe<ae.length;oe++){const de=ae[oe].parentNode;window.getComputedStyle(de).display!=="none"&&(se=ae[oe])}}if(se){const ae=Di.gd[te],oe=L===ms.Z.DESKTOP||L===ms.Z.PHONE&&Di.Bm.includes(te),de=mv({headerElementNode:se,headerElementName:te,tallestOutlineHeight:H,mobileMenuTopBarPaddingLeft:V,mobileMenuTopBarPaddingRight:G,mobileMenuTopBarWidth:Z,checkingElementsInsideTopBar:oe,deviceView:L});ee.push({headerElementName:te,headerElementNode:se,headerElementOutline:de,label:ae})}}),ee},_v=K=>{const L=K.getBoundingClientRect(),M=22,U=55,H=26,V=185;return{...L.toJSON(),x:H,left:H,right:V,top:L.height+U+M,y:L.height+U+M,bottom:L.bottom+U}};var ld=t(25911);function Ia(K,L,M){return L in K?Object.defineProperty(K,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):K[L]=M,K}const cd="sqs-announcement-bar-dropzone",ud="headerElementAnnotationsContainer",Ev="sqs-site-frame",yv=(K,L)=>["action.buttonText","action.href"].some(M=>(0,f.get)(K.header,M)!==(0,f.get)(L.header,M))||K.headerWebsiteData.siteTitle!==L.headerWebsiteData.siteTitle,Sv=(K,L)=>K.header&&L.header&&K.headerWebsiteData&&L.headerWebsiteData&&(0,f.isEqual)(K.header,L.header)&&(0,f.isEqual)(K.headerWebsiteData,L.headerWebsiteData),dd=(K,L)=>{const M=K.parentNode,U=document.createElement("div");M.insertBefore(U,K),K.remove(),M.insertBefore(L,U),U.remove()};class hd extends Wr{removeVisitorLinkFocus(){const{rootNode:L}=this.state,U=(0,P.aEP)((0,T.d6)())===aa.hn.PAGE_EDIT_FULL_SCREEN;if(!L||!U)return;const H=L.getDOMNode(),V=H.querySelectorAll("a"),G=H.querySelectorAll("button");V.forEach(Z=>{Z.tabIndex=-1}),G.forEach(Z=>{Z.tabIndex=-1})}initListenersForHeaderElementEditors(){this.elementAnnotationRoots=[],this.handles.push((0,T.gH)(P.fPO,L=>{if(L==="HEADER"){var M;this.removeAndReinitializeElementContainers();const{rootNode:U}=this.state;if(!U)return;(M=document.getElementById(ud))===null||M===void 0||M.focus(),(0,T.GE)((0,Ct.C_)(null)),(0,bn.MM)(U.getDOMNode())&&(0,T.GE)((0,Ct.TK)(!0))}})),this.handles.push((0,T.gH)(P.tlC,(L,M)=>{M&&!L&&this.removeAndReinitializeElementContainers()})),this.handles.push((0,T.gH)(P.ZXd,(L,M)=>{!M&&L&&setTimeout(()=>{this.removeAndReinitializeElementContainers()},650),M&&!L&&this.removeAndReinitializeElementContainers()})),this.windowResizeObserver=new ResizeObserver(()=>{const L=(0,T.d6)();(0,P.fPO)(L)===hn.Z.HEADER&&this.removeAndReinitializeElementContainers()}),this.windowResizeObserver.observe(document.body),this.actionListener.addActionListener(gc.Z.DOM_UPDATED,()=>{this.removeAndReinitializeElementContainers()})}initHeaderEditButton(){const{rootNode:L}=this.state;if(!L)return;this.removeVisitorLinkFocus();const M=L.getDOMNode(),U="header-edit-button-wrapper section-toolbar-button-wrapper";this.headerEditButtonContainer||(M.classList.add("header-improvement"),this.headerEditButtonContainer=document.createElement("div"),this.headerEditButtonContainer.style.display="none",this.headerEditButtonContainer.classList.add("header-edit-button-container"),M.appendChild(this.headerEditButtonContainer),this.headerEditButtonReactRoot=(0,Zi.createRoot)(this.headerEditButtonContainer),this.headerEditButtonReactRoot.render(W.createElement(Nr,{buttonClasses:U,buttonAttributes:{...(0,Wi.getGuidanceEngineDataAttribute)(Wi.ElementDataIds.EDIT_HEADER)},onClick:()=>{},icon:ya.Z,buttonText:W.createElement(qi.T,{project:"apps.App"},"Edit Site Header")})),this._editHeaderButtonContainerTimeout=setTimeout(()=>{var H;!((H=this.headerEditButtonContainer)===null||H===void 0)&&H.isConnected&&(this.headerEditButtonContainer.style.display="block")},1e3))}removeHeaderEditButton(){this.headerEditButtonReactRoot&&(this.headerEditButtonReactRoot.unmount(),this.headerEditButtonReactRoot=null),this.headerEditButtonContainer&&(this.headerEditButtonContainer.remove(),this.headerEditButtonContainer=null)}removeElementAnnotations(){for(var L;!((L=this.elementAnnotationRoots)===null||L===void 0)&&L.length;){const{node:M,root:U}=this.elementAnnotationRoots.shift();U.unmount(),M.remove()}}initializeHeaderElementEditors(){const{rootNode:L}=this.state;if(!L)return;const M=L.getDOMNode(),U=vv(M);this.headerAnnotationOutlines=U;const H=document.createElement("div");H.setAttribute("id",ud),H.setAttribute("tabindex",0),document.body.insertAdjacentElement("afterbegin",H);const V=(0,Zi.createRoot)(H);V.render(W.createElement(dv,{headerElementAnnotations:U,wrapperNode:H})),this.elementAnnotationRoots.push({root:V,node:H})}reattachBaseListeners(){this.eventListeners.forEach(L=>{let{node:M,eventName:U,callback:H}=L;M.removeEventListener(U,H)}),this.eventListeners=[],this.attachEventListeners()}updateHeaderNode(L){const M=window.Y.Node(L);this.set("rootNode",M),this.set("overlayRootNode",M),this.removeHeaderEditButton(),this.initHeaderEditButton(),this.renderSectionEditorManager(),this.reattachBaseListeners(),this.initializeRootNode(),setTimeout(()=>{this.removeAndReinitializeElementContainers()},0)}initializeRootNode(){super.initializeRootNode();const L=this.state.rootNode.getDOMNode();this.registerEventListener(L,"click",this.onScrimClicked.bind(this)),super.initializeScrim(this.state.rootNode),this.state.rootNode.getDOMNode().setAttribute("data-test","header"),this.state.rootNode.getDOMNode().setAttribute(Wi.GUIDANCE_DATA_ATTRIBUTE,Wi.ElementDataIds.HEADER)}toggleScrim(){if(oo.Z.getState().isGalleryContentEditorOpen||ro.Z.getState().isGalleryContentEditorOpen)return;const M=(0,P.fPO)((0,T.d6)()),U=M===hn.Z.PAGE||M===hn.Z.COLLECTION_ITEM;if(M===hn.Z.FOOTER){this.showScrimWithButtonHide();return}if(U&&this.state.isMouseOver){this.showScrim();return}this.hideScrim()}handleSetEditingMode(){this.onScrimClicked()}onScrimClicked(){const L=(0,P.aEP)((0,T.d6)()),M=(0,P.Zxu)((0,T.d6)()),U=L===aa.hn.PAGE_EDIT_FULL_SCREEN,H=(0,P.ML5)((0,T.d6)()),V=me.Z.hasRole(Ee.ADMIN)||me.Z.hasRole(Ee.WEBSITE_MANAGER);!this.state.canEditGlobalSections||!U||!V||H||(this.scrollIntoView(),(0,T.GE)((0,Ct.qC)(null)),(0,T.GE)((0,Ct.je)(null)),(0,T.GE)((0,Ct.xu)(hn.Z.HEADER)),(0,us.mq)(M))}isSectionDeleteable(){return!1}getAnnotationSections(){return[(0,P.WMr)((0,T.d6)())]}createEmptySectionNode(){}createPreviewEmptySectionNode(){}getRegion(){return"header"}getSectionEditingFeatures(){return{}}renderSectionEditorManager(){this.editorMountNode||(this.editorMountNode=this.getOrCreateEditorMountNode()),ks.render(W.createElement(Ci.o,null,W.createElement(Zm,{node:this.getSectionNode()})),this.editorMountNode)}getSectionActions(){return No.Z}getSectionStoreState(){const L=_o.Z.getState(),M=(0,T.d6)(),U=(0,P.fPO)(M);return{...L,editingSectionArea:U,isEditing:U===hn.Z.HEADER,sections:[(0,P.WMr)(M)],isLoaded:(0,P.Zl0)(M),isSaving:(0,P.gqq)(M)}}destroy(){var L;clearTimeout(this._editHeaderButtonContainerTimeout),super.destroy(),this.debouncedClientRenderHeader.cancel(),this.actionListener&&(this.actionListener.removeAllActionListeners(),this.actionListener=null),this.observer&&this.observer.disconnect(),this.handles.forEach(M=>M()),this.removeElementAnnotations(),this.removeHeaderEditButton(),(L=this.windowResizeObserver)===null||L===void 0||L.disconnect(),this.windowResizeObserver=null}constructor(L,M){var U;if(super({...L,scrim:{text:(0,l.t)("Edit Header",null,{project:"src.seven-one"})},editingArea:hn.Z.HEADER,sectionsArea:ba.Z.HEADER_SECTION},M),U=this,Ia(this,"name","SiteHeaderAnnotationController"),Ia(this,"_editHeaderButtonContainerTimeout",null),Ia(this,"openLanguagePickerMenu",()=>{this.openLanguageSwitch=!0,setTimeout(()=>{this.onScrimClicked(),(0,T.GE)((0,Ct.C_)(Di.IP.LANGUAGE_SWITCH)),setTimeout(()=>{this.triggerLanguageSwitch()},650)},650)}),Ia(this,"triggerLanguageSwitch",()=>{const V=Di.IP.LANGUAGE_SWITCH,G=this.headerAnnotationOutlines.filter(ee=>ee.headerElementName===V);let Z=G;if(G.length){const ee=document.querySelector("#language-switch-outline");ee&&(Z=ee.getBoundingClientRect()),(0,T.GE)((0,Ct.oI)(Z)),No.Z.setHeaderElementModalTab(Di.L5[V]),(0,T.GE)((0,Ct.qC)(V))}else{const{rootNode:ee}=this.state;if(!ee)return;const $=ee.getDOMNode();Z=_v($),(0,T.GE)((0,Ct.oI)(Z)),(0,T.GE)((0,Ct.qC)(Di.IP.TOGGLE_ELEMENTS))}this.openLanguageSwitch&&(this.openLanguageSwitch=!1)}),Ia(this,"onTrackAfterTweakUpdate",()=>{const V=(0,Cl.es)(),G=this.actionListener.addActionListener(gc.Z.DOM_UPDATED,()=>{V(),this.actionListener.removeActionListener(G)})}),Ia(this,"scrollIntoView",()=>{const V=this.getRootEl().ownerDocument,G=V.querySelector("html");V.scrollingElement.scrollTop>0&&Ja()(G,{top:0,left:0},{easing:"easeInOutSine",maxDuration:100})}),Ia(this,"getSectionNode",()=>this.getRootEl()),Ia(this,"onRerenderFromChange",async function(){let{isDebounced:V=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if((0,P.aEP)((0,T.d6)())!==aa.hn.PAGE_EDIT_FULL_SCREEN)return;const G=(0,Cl.es)(),Z={...(0,P.Kwz)((0,T.d6)()),header:(0,P.WMr)((0,T.d6)())};V?U.debouncedClientRenderHeader(Z):await U.clientRenderHeader(Z),G()}),Ia(this,"checkLogoUpdateAfterClientRender",(V,G)=>{if(V.logoImageId){const Z=G.querySelector(".header-title-logo a img");Z&&(Z.onload=()=>{this.removeAndReinitializeElementContainers()})}if(V.mobileLogoImageId){const Z=G.querySelector(".header-mobile-logo a img");Z&&(Z.onload=()=>{this.removeAndReinitializeElementContainers()})}}),Ia(this,"removeAndReinitializeElementContainers",()=>{this.removeElementAnnotations(),this.initializeHeaderElementEditors()}),Ia(this,"clientRenderHeader",async V=>{let{headerTransparencyChanged:G,...Z}=V;const ee=await(0,So.gm)(Z),$=document.getElementById(Ev).contentWindow.document,te=ee.getElementById("header"),se=$.getElementById("header"),ae=$.getElementsByClassName(cd)[0],oe=ee.getElementsByClassName(cd)[0];let de=!0;const ue={};if(de=(0,Ns.I9)(ba.Z.HEADER_SECTION,"header",ue,Z),de){if(dd(se,te),this.updateHeaderNode(te),Z.header.languagePicker.enabled){const De=te.querySelector("#multilingual-language-picker-desktop");this.observer=new MutationObserver(()=>{this.removeAndReinitializeElementContainers()});const Ve={attributes:!0,childList:!0,subtree:!0};this.observer.observe(De,Ve)}if(this.checkLogoUpdateAfterClientRender(Z,te),await(0,Ns.t9)(ba.Z.HEADER_SECTION,"header",te,Z),nn({sectionsArea:ba.Z.HEADER_SECTION,changedSectionMap:{header:te}}),ae&&oe){const De=ae.querySelector(".sqs-announcement-bar-close");De&&(De.style.pointerEvents="none"),dd(oe,ae)}Z.header.showAccountLogin&&this.removeAndReinitializeElementContainers();const xe=(0,P.ZXd)((0,T.d6)());setTimeout(()=>{xe&&Fs.Y.fire("header:menuOverlay:opened")},0)}}),Ia(this,"shouldShowHeaderCartElement",async V=>{try{const G=await ld.Z.load(),{header:Z,footer:ee}=G;await ld.Z.save({header:{...Z,showCart:V},footer:ee})}catch(G){console.log(G)}}),Ia(this,"debouncedClientRenderHeader",(0,f.debounce)(this.clientRenderHeader,300)),me.Z.hasRole(Ee.ADMIN)||me.Z.hasRole(Ee.WEBSITE_MANAGER)){const V=(0,P.e9i)((0,T.d6)()),G=F.Z.getSiteLayout();(0,f.isEqual)(V,G)||(0,T.GE)((0,Gm.i)(G)),this.handles.push((0,T.gH)(P.fPO,()=>{this.toggleScrim()})),this.addAfterChangeHandler("isMouseOver",this.toggleScrim,this),this.addAfterChangeHandler("isScrimEnabled",this.toggleScrim,this),this.actionListener=new(rc())(lc.Z),this.actionListener.addActionListener(id.Z.REFRESH_LAYOUT_ENGINE,()=>this.onRerenderFromChange()),this.handles.push((0,T.gH)(P.x6H,(Z,ee)=>{const $=(0,P._bw)((0,T.d6)());if(!ee.header&&!$||!Z.header)return;const te=Sv(ee,Z);$&&te||this.onRerenderFromChange({isDebounced:yv(ee,Z)})})),this.handles.push((0,T.gH)(P.e9i,()=>{this.onRerenderFromChange()})),this.handles.push((0,zm.Ho)(Km.Lg,(Z,ee)=>{let $=0,te=0;for(const se of Object.values(ee))se.typeName==="products"&&$++;for(const se of Object.values(Z))se.typeName==="products"&&te++;$===1&&te===0&&this.shouldShowHeaderCartElement(!1),$===0&&te===1&&this.shouldShowHeaderCartElement(!0)})),this.headerEditButtonContainer=null,this.headerEditButtonReactRoot=null,this.initHeaderEditButton(),this.handles.push((0,T.gH)(P.Hlz,()=>{(0,T.GE)((0,Ct.TK)(!1)),Fs.Y.fire("header:menuOverlay:closed"),(0,T.GE)((0,Ct.je)(null))})),this.initListenersForHeaderElementEditors()}}}Ia(hd,"sectionAreaName","header")},651430:function(c,b,t){"use strict";t.d(b,{Fk:()=>a,NA:()=>e,YZ:()=>l,rT:()=>r,yS:()=>d});const l="last-header-element",d=(s,n)=>{setTimeout(()=>{var u;(u=document.getElementById(s))===null||u===void 0||u.focus({preventScroll:!0})},n?250:0)},o=s=>{setTimeout(()=>{var n;(n=document.getElementsByClassName(s)[0])===null||n===void 0||n.focus({preventScroll:!0})},0)},e=()=>{o(l)},a=()=>{setTimeout(()=>{var s,n,i,u,h;const g=(h=window)===null||h===void 0||(u=h.top)===null||u===void 0||(i=u.document)===null||i===void 0||(n=i.querySelector("iframe"))===null||n===void 0||(s=n.contentDocument)===null||s===void 0?void 0:s.getElementById("header");g==null||g.focus()},0)},r=()=>{const s=document.querySelectorAll("div.header-toolbar.section-header-left-button > .edit-tool-button")[0];s==null||s.focus()}},276860:function(c,b,t){"use strict";t.d(b,{Cx:()=>f,FF:()=>h,K9:()=>v,Kv:()=>g,T6:()=>p,po:()=>r,tp:()=>u});var l=t(419467),d=t.n(l),o=t(784874),e=t(591214),a=t.n(e);const r={[o.Z.CHART]:["dataTable","dataTableId"],[o.Z.NEWSLETTER]:["submitButtonText","captchaAlignment","captchaEnabled","captchaTheme","successRedirect","useCaptchaFieldsFromBlockInsteadOfForm","hasEnabledBackends"],[o.Z.FORM]:["hasEnabledBackends"],[o.Z.VIDEO]:["html","vSize"]};function s(E){return(E.columns??[]).flatMap(n)}function n(E){return(E.rows??[]).flatMap(s).concat(E.blocks??[])}function i(E){return(E.rows??[]).flatMap(s)}function u(E){const S=Array.isArray(E)?E.flatMap(s):i(E);if(S.length===0)return!0;if(S.length===1){const y=S[0];if(y.type===o.Z.HTML)return y.value?y.value.html==="":!0}return!1}function h(E){const S=i(E);if(S.length!==1)return!1;const y=S[0];if(y.type===o.Z.HTML||y.type===o.Z.MARKDOWN){if(!y.value)return!0;const C=typeof y.value=="object"&&y.value!==null?y.value.html:y.value;return a()(C)}return!1}function g(E,S){return typeof E!="object"||E===null||typeof S!="object"||S===null?E===S||!E&&S===void 0||E===void 0&&!S:[...new Set([...(0,l.keys)(E),...(0,l.keys)(S)])].every(C=>C==="textAttributes"?g(E[C]||[],S[C]||[]):g(E[C],S[C]))}function p(E,S,y){switch(y){case o.Z.DONATION:return!1;case o.Z.CHART:case o.Z.FORM:case o.Z.NEWSLETTER:return!g((0,l.omit)(E,r[y]),(0,l.omit)(S,r[y]));case o.Z.VIDEO:return E.url===S.url?!g((0,l.omit)(E,r[o.Z.VIDEO]),(0,l.omit)(S,r[o.Z.VIDEO])):!g(E,S);case o.Z.IMAGE:const C=E,O=S;return!!C.imageOverlay||C.linkTo!==O.linkTo;default:return!0}}function f(E,S){return E?S?Object.entries(S).some(y=>{let[C,O]=y;return C in E?typeof O=="object"?f(E[C],O):E[C]!==O:!1}):!0:!1}function m(E,S){if(Array.isArray(E)){if(!Array.isArray(S))return{hasNonCompatChange:!0}}else return Array.isArray(S)?{hasNonCompatChange:!0}:[];let y=[];for(let I=0;I<E.length;I++){const D=E.at(I),T=S.at(I);if(!D||!T){if(D||T)return{hasNonCompatChange:!0};continue}if(D.span!==T.span)return{hasNonCompatChange:!0};if(D.rows||T.rows){if(!D.rows||!T.rows||D.rows.length!==T.rows.length)return{hasNonCompatChange:!0};if(D.rows.length||T.rows.length){const B=_(D.rows,T.rows);if("hasNonCompatChange"in B)return{hasNonCompatChange:!0};y=y.concat(B.changedBlocks);continue}}if(!D.blocks||!T.blocks){if(D.blocks||T.blocks)return{hasNonCompatChange:!0};continue}if(D.blocks.length!==T.blocks.length)return{hasNonCompatChange:!0};for(let B=0;B<D.blocks.length;B++){var C,O,A;const N=D.blocks[B],P=T.blocks[B];if(N.id!==P.id)return{hasNonCompatChange:!0};if((N.value.floatDir||null)!==(((C=P.value)===null||C===void 0?void 0:C.floatDir)||null))return{hasNonCompatChange:!0};if((((O=N.value)===null||O===void 0?void 0:O.hSize)||null)!==(((A=P.value)===null||A===void 0?void 0:A.hSize)||null))return{hasNonCompatChange:!0};(0,l.isEqual)(N.containerStyles,P.containerStyles)?g(N.value,P.value)||y.push({before:P,after:N}):y.push({before:P,after:N})}}return y}function _(E,S){let y=[];if(Array.isArray(E)){if(!Array.isArray(S))return Array.isArray(E)?{hasNonCompatChange:!0}:{changedBlocks:y}}else return Array.isArray(S)?{hasNonCompatChange:!0}:{changedBlocks:y};if(E.length!==S.length&&!u(E)&&u(S))return{hasNonCompatChange:!0};for(let C=0;C<E.length;C++){const O=E[C],A=S[C],I=m(A==null?void 0:A.columns,O==null?void 0:O.columns);if("hasNonCompatChange"in I)return{hasNonCompatChange:!0};y=y.concat(I)}return{changedBlocks:y}}function v(E){let{before:S,after:y}=E;return!!y.columns!=!!S.columns||!!y.rows!=!!S.rows||y.columns!==S.columns?{hasNonCompatChange:!0}:_(y.rows,S.rows)}},514350:function(c,b,t){"use strict";t.d(b,{VE:()=>g,es:()=>n,i7:()=>h});var l=t(419467),d=t.n(l),o=t(413019),e=t(69637),a=t(27409),r=t(843156);let s;const n=()=>{const p=s||(()=>{});return s=null,p},i=p=>{s=p},u=(0,l.debounce)((p,f,m)=>{r.Z.userChangesHeaderOptionFinish(m,{fieldPath:p,newFieldValue:f})},400),h=async(p,f)=>{const m=r.Z.userChangesHeaderOptionStart();i(()=>{u(p,f,m)})},g=()=>{(0,o.B1)(a.HEADER_NEW_LAYOUT_LOAD,{tracer:e.Z}),i(()=>{(0,o.L8)(a.HEADER_NEW_LAYOUT_LOAD,{requireStart:!0,tracer:e.Z})})}},160021:function(c,b,t){"use strict";t.d(b,{Z:()=>g});var l=t(174161),d=t(934951),o=t(714487),e=t(685763),a=t(362187),r=t(969145),s=t(762005),n=t(181124);const i=(0,o.t)("Please try again later. If this problem continues, please contact customer support.",null,{project:"apps.App"}),u=(0,o.t)("Something went wrong",null,{project:"apps.App"}),g=p=>{let{isOpen:f,onRequestClose:m}=p;return l.createElement(n.Z,{container:document.head,cacheKey:"add-block-modal"},l.createElement(r.Z.Provider,{theme:s.rosetta.white},l.createElement(e.Z.Transition,null,f&&l.createElement(e.Z,{onRequestClose:m},l.createElement(e.Z.Overlay,null),l.createElement(e.Z.Position,{position:"center"},l.createElement(a.Z,{title:u,message:i,buttons:[()=>l.createElement(a.Z.Button,{key:"cancel",onClick:m},l.createElement(d.T,{project:"apps.App"},"Close"))]}))))))}},315061:function(c,b,t){"use strict";t.d(b,{Z:()=>e});var l=t(174161),d=t(251196);const e=()=>l.createElement(d.Z,{height:"20px",width:"1px",style:{marginRight:"4px"}})},930628:function(c,b,t){"use strict";t.d(b,{Z:()=>B});var l=t(845076),d=t.n(l),o=t(174161),e=t(139717),a=t(969145),r=t(762005),s=t(208935),n=t(906194),i=t(181124),u=t(12574),h=t(337061),g=t(938077),p=t(897820),f=t(569958),m=t.n(f),_=t(113691),v=t(916661),E=t(874644),S=t(432762),y=t(949642),C=t(175424);const O=55,{ESCMANAGER_IGNORE_CLASSNAME:A}=s,I=22,D={offset:I,shiftMarginWhenConstrained:!0},B=N=>{let{blockId:P,blockNode:x,isSelected:R=!1,children:w,onPopupVisibilityChange:k,...q}=N;var F;const z=(0,o.useRef)(null),j=(0,h.Ze)(g.aEP),X=(0,h.zC)(),J=(0,h.Ze)(g.Hlz)===n.Z.PHONE,Q=(0,h.Ze)(g.tlC),[ie,ce]=(0,o.useState)(!1),pe=x.closest("section"),ye=(F=x.ownerDocument.defaultView)===null||F===void 0?void 0:F.frameElement,[,Ae]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(!x)return;const Ee=new S.d(()=>{Ae(Se=>!Se)});return Ee.observe(x),()=>{Ee.disconnect()}},[x]);const Je=(0,o.useCallback)(()=>{ce(!0)},[]),ke=(0,o.useCallback)(()=>{ce(!1)},[]),Fe=(0,o.useCallback)(Ee=>{k&&k(Ee)},[k]),Ie=Ee=>{const Se=Ee.getBoundingClientRect(),lt=(0,C.V6)();return lt&&Se.top<lt.innerHeight&&Se.bottom>0},ht=(0,o.useMemo)(()=>{const Ee=()=>{if(!P)return x;const je=x.ownerDocument.querySelector(`.${(0,y.di)(P)}.fluid-engine-block-wrapper`);return je&&Ie(je)?je:x},Se=()=>{const je=Ee().getBoundingClientRect(),Le=ye==null?void 0:ye.getBoundingClientRect();return{0:(Le==null?void 0:Le.right)??je.right,1:je.top,left:(Le==null?void 0:Le.left)??je.left,top:je.top,right:(Le==null?void 0:Le.right)??je.right,bottom:je.top+je.height}},lt=()=>{if(!z.current)return;const je=z.current.getBoundingClientRect(),Le=je.x-I,ci=je.y-O;return[Le,ci]},Lt=R&&ie&&z.current,Pt=j===E.hn.PAGE_EDIT_FULL_SCREEN,Ce=J&&Pt?Lt?lt:Se:Ee();return{style:v.Z.isSevenOne()&&Pt?{marginTop:O}:{},scrollNode:J&&Pt&&!ie?x.ownerDocument.body:void 0,anchor:Ce,anchorPoint:{x:J?"right":"left",y:"top"},position:J?"right-bottom":"right-top",offset:J?{y:0}:{x:0},recalculateAnchorOnScroll:!0}},[P,x,j,ye,J,ie,R]),me=(0,o.useCallback)(()=>X((0,p.wv)()),[X]);return(0,u.Z)(pe,me),o.createElement(e.Z,{...ht,isOpen:!Q,className:d()(A,m().popoverWrapper),constrainToScreen:D,role:"menu",hideArrow:!0,onVisibilityChange:Fe},o.createElement(i.Z,{cacheKey:"react-block-annotation-cache-key"},o.createElement(a.Z.Provider,{theme:r.rosetta.white},o.createElement("div",{ref:z,className:d()(m().reactBlockAnnotation,_.ZP.UNMASK_ELEMENT),onMouseEnter:Je,onMouseLeave:ke,...q},w))))}},584204:function(c,b,t){"use strict";t.d(b,{Z:()=>lt});var l=t(174161),d=t(419467),o=t(338465),e=t(251196),a=t(833744),r=t(115350),s=t(714487);const n=(0,r.Z)(a.Z.Input,e.Z),i=Lt=>{Lt.hasAttribute("data-test")||Lt.setAttribute("data-test","search")},h=Lt=>{let{value:Pt,onChange:Ce,onSubmit:je}=Lt;const Le=(0,l.useRef)(null);return(0,l.useEffect)(()=>{Le.current&&(i(Le.current),setTimeout(()=>{Le.current&&Le.current.focus()},200))},[Le]),l.createElement(o.Z,{mt:6,ml:6,mr:6,as:"form",onSubmit:je},l.createElement("input",{type:"submit",hidden:!0}),l.createElement(n,{inputValue:Pt,onChange:Ce,placeholder:(0,s.t)("Search",null,{project:"apps.App"}),variant:"floating",inputRef:Le}))};var g=t(488475),p=t(538312),f=t(766400),m=t(225378),_=t(475521),v=t(12574),E=t(153088),S=t(5175),y=t(740839),C=t.n(y),O=t(378147),A=t(608259),I=t(957892),D=t(145332),T=t(556472),B=t(897820),N=t(337061),P=t(188405),x=t(845076),R=t.n(x);function w(Lt){let{iconConfig:Pt,renderIcon:Ce,onClick:je,isFluidEngine:Le=!1,dragRef:ci=d.noop,onKeyPress:Jt,...Ft}=Lt;return l.createElement(o.Z,{ref:ci,onClick:je,id:"block-selector-button-"+Pt.id,className:R()(C().iconWrapper,Le?"":"sqs-react-blockicon"),role:"button",tabIndex:0,onKeyPress:Jt,...Ft},l.createElement(l.Fragment,null,Ce("iconName"in Pt&&Pt.iconName?Pt.iconName:Pt.id),l.createElement(p.Z.Body,{margin:0,marginLeft:2,marginRight:"8px",position:"relative",left:"8px",width:"calc(100% - 49px)"},Pt.label)))}const q=Lt=>{let{activeSectionNode:Pt,fluidEngineId:Ce,iconConfig:je,onDrop:Le,...ci}=Lt;const Jt=Vt=>{const Ti=(0,D.Z)({containerNode:Pt}),Ni=Vt.getClientOffset();if(!Ni||!Ti)return{x:1,y:0};const ui=(0,T.d6)(Ni.x,Ti.columns),gn=(0,T.X9)(Ni.y,Ti.rows);return{x:ui===-1?1:ui,y:gn===-1?0:gn}},[{isDragging:Ft},ti]=(0,O.c)(()=>({type:A.jQ,item:Vt=>{const{x:Ti,y:Ni}=Jt(Vt);return(0,I.Un)(je,{startX:Ti,startY:Ni},Ce)},collect:Vt=>({isDragging:Vt.isDragging()}),end:Le}),[Le]),gi=(0,N.zC)(),qt=(0,P.I4)(Pt);(0,l.useEffect)(()=>{Ft&&gi((0,B.oo)(qt))},[Ft,gi,qt]);const Mt={...ci,iconConfig:je};return l.createElement(w,{...Mt,isFluidEngine:!0,dragRef:ti})},F=Lt=>{let{blockCategory:Pt,iconConfigs:Ce,searchValue:je,fluidEngineId:Le,handleIconSelect:ci,onKeyPress:Jt,onDrop:Ft,...ti}=Lt;return l.createElement(o.Z,{className:C().iconList},l.createElement(o.Z,{className:C().iconCategory},!je&&l.createElement(p.Z.Body,{lineHeight:"34px",margin:0,marginLeft:"8px",fontWeight:500,width:"100%",display:"inline-flex",alignItems:"center"},Pt.label,Pt.premium?l.createElement(S.Z,{color:"blue.100",sx:{ml:1,flexShrink:0}}):null)),Pt.items.map(gi=>{const qt=Ce[gi];if(!qt)return null;const Mt={iconConfig:qt,onClick:()=>ci(qt),onKeyPress:Ti=>Jt(Ti,qt),"data-category-label":Pt.label,"data-item-type":gi,...ti};return!!Le&&Ft?l.createElement(q,{key:gi,fluidEngineId:Le,onDrop:Ft,...Mt}):l.createElement(w,{key:gi,...Mt})}))};F.defaultProps={isFluidEngine:!1};const z=F;var j=t(756732),X=t(951287),J=t(113580),Q=t.n(J),ie=t(113691),ce=t(673951),pe=t(938077),ye=t(378257),Ae=t(394954),Je=t(280068),ke=t(482053);function Fe(Lt){let{title:Pt,description:Ce}=Lt;return l.createElement(ye.Z,{mt:6,mb:-2,ml:6,mr:6,backgroundColor:"gray.900",borderRadius:"2",sx:{borderWidth:0},"data-testid":"enterprise-global-block-announcement-banner"},l.createElement(ye.Z.Body,null,l.createElement(Ae.Z,{space:1,of:o.Z,as:o.Z},l.createElement(ke.Z,{alignContent:"center"},l.createElement(Je.Z,null),l.createElement(p.Z.Body,{m:0,ml:1,fontWeight:"semibold"},Pt)),l.createElement(p.Z.Body,{m:0,fontWeight:400,color:"gray.100"},Ce))))}var Ie=t(651780),ht=t(916661);const me=250,Ee=Lt=>Lt.trim().toLowerCase().normalize("NFD"),lt=Lt=>{let{categories:Pt,iconConfigs:Ce,escFocusSelector:je="",handleIconSelect:Le,isInFrame:ci,activeSectionNode:Jt,fluidEngineId:Ft,onDrop:ti,isLoading:gi}=Lt;const[qt,Mt]=(0,l.useState)(""),Vt=Q().PAGE,Ti=(0,N.Ze)(pe.Zxu)??"",Ni=(0,d.debounce)(le=>{(0,_.xB)({query:le,pageId:Ti,pageType:Vt,location:(0,X.Z)(Jt).sectionArea})},me),ui=le=>{Mt(le),Ni(le)},gn=()=>{if(!Pt||!Ce)return[];const le=Ee(qt),_e=[{groupType:"",label:"filtered",items:[]}];return Pt.forEach(Me=>{const et=_e[0];Me.items.forEach($t=>{var Ki;(((Ki=Ce[$t])===null||Ki===void 0?void 0:Ki.tags)||[]).find(vn=>(0,d.deburr)(vn.toLowerCase()).indexOf(le)>-1)&&et.items.push($t)})}),_e},zi=le=>{const _e=le.target,et=new FormData(_e).entries().next()?gn():Pt;if(!et||et.length===0||!Ce)return null;const $t=et[0];$t.items.length&&Le(Ce[$t.items[0]])},Mn=le=>{const _e=j.c[le]||g[le];return _e?l.createElement(_e,{sx:{position:"relative",left:"8px"}}):null},Zt=(le,_e)=>{(le.key==="Enter"||le.key===" "||le.key==="Spacebar")&&(le.preventDefault(),Le(_e))},Te=(0,N.zC)(),qe=(0,P.I4)(Jt),xt=(0,l.useCallback)(()=>{Te((0,B.oo)(qe))},[Te,qe]),Gt=qt?gn():Pt;(0,v.Z)(Jt.closest("section"),xt,je);const Li=(0,s.t)("Introducing Global Blocks",null,{project:"enterprise"}),mi=(0,s.t)("Update and manage global text and code blocks across multiple sites at once.",null,{project:"enterprise"});return l.createElement(m.o,{frameCacheKey:ci?"block-selector-css-cache-key":void 0},l.createElement("section",{className:ie.ZP.UNMASK_ELEMENT,"aria-label":(0,s.t)("Block Selector",null,{project:"apps.App"})},gi||!Gt||!Ce?l.createElement("div",{style:{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)"},"data-testid":"block-selector-loading"},l.createElement(f.Z,null)):l.createElement(l.Fragment,null,(0,Ie.uS)()&&ht.Z.isSevenOne()&&l.createElement(Fe,{title:Li,description:mi}),!ce.pe&&l.createElement(h,{value:qt,onChange:ui,onSubmit:zi}),l.createElement("section",{className:C().iconListsContainer},Gt.map(le=>le.items.length===0?null:l.createElement(z,{key:le.groupType,activeSectionNode:Jt,blockCategory:le,searchValue:qt,iconConfigs:Ce,renderIcon:Mn,handleIconSelect:_e=>Le(_e),fluidEngineId:Ft,onKeyPress:Zt,onDrop:ti})),qt&&Gt[0].items.length===0&&l.createElement("section",null,l.createElement(p.Z.Action,{sx:{textAlign:"center",display:"block",marginTop:4}},(0,s.t)("No Results",null,{project:"apps.App"})))))))}},756732:function(c,b,t){"use strict";t.d(b,{c:()=>Ae});var l=t(332483),d=t(24519),o=t(545822),e=t(969826),a=t(39512),r=t(273867),s=t(86452),n=t(125852),i=t(471099),u=t(714782),h=t(923571),g=t(236517),p=t(819518),f=t(109128),m=t(7924),_=t(182766),v=t(651104),E=t(608671),S=t(924293),y=t(20664),C=t(408635),O=t(826139),A=t(679727),I=t(974929),D=t(890541),T=t(760694),B=t(78911),N=t(732622),P=t(741129),x=t(195314),R=t(638249),w=t(787123),k=t(208043),q=t(826475),F=t(566288),z=t(354549),j=t(76667),X=t(30429),J=t(197490),Q=t(918212),ie=t(829032),ce=t(966697),pe=t(306639),ye=t(385898);const Ae={html:l.Z,image:d.Z,button:o.Z,form:e.Z,video:a.Z,gallery:r.Z,spacer:s.Z,audio:n.Z,newsletter:i.Z,"horizontal-rule":u.Z,quote:h.Z,map:g.Z,embed:p.Z,markdown:f.Z,code:m.Z,"summary-wall":_.Z,"summary-v2":_.Z,menu:v.Z,calendar:E.Z,"social-links":S.Z,"social-account-links-v2":S.Z,"chart-bar":y.Z,chart:y.Z,product:C.Z,donation:O.Z,acuity:A.Z,instagram:I.Z,twitter:D.Z,zola:T.Z,amazon:B.Z,soundcloud:N.Z,flickr:P.Z,rss:x.Z,fivehundredpix:R.Z,opentable:w.Z,"opentable-v2":w.Z,tourdates:k.Z,foursquare:q.Z,search:F.Z,tagcloud:z.Z,"collection-link":j.Z,archive:X.Z,"member-area":J.Z,tock:Q.Z,"tock-reservations":Q.Z,"tock-events":Q.Z,accordion:ie.Z,marquee:ce.Z,shape:pe.Z,"pricing-plan":ye.Z}},767665:function(c,b,t){"use strict";t.d(b,{Hv:()=>s,O:()=>r});var l=t(59001),d=t(878148),o=t.n(d);function e(n){let{angle:i,distance:u,blur:h}=n;const g=(180-i)*Math.PI/180,p=Math.round(Math.cos(g))*u.value,f=Math.round(Math.sin(g))*u.value;return`drop-shadow(${p}${u.unit} ${f}${u.unit} ${h.value}${h.unit})`}const a="opacity(1)";function r(n,i,u,h){let g="";const p=n.parentElement;if(i){g=e(i);const m=window.getComputedStyle(n).getPropertyValue("color");p.style.color=m}const f=u!=null&&u.enabled?`blur(${u.blurRadius.value}${u.blurRadius.unit}) `:"";if((u==null?void 0:u.filterType)===o().BACKDROP){if(h)for(const m in h)p.style["border-"+l.Z[m]]=h[m].value+h[m].unit;p.style.filter=g,p.style.backdropFilter=f,p.style.webkitBackdropFilter=f,p.style.display="none",p.offsetHeight,p.style.display=""}else p.style.backdropFilter=null,p.style.webkitBackdropFilter=a,p.style.filter=`${f}${g}`}function s(n,i){const u=n.parentElement;u.style.mixBlendMode=i,u.style.webkitBackdropFilter=a}},689700:function(c,b,t){"use strict";t.d(b,{OD:()=>e,S_:()=>I,_x:()=>p,fE:()=>_,iM:()=>m,mU:()=>O,sZ:()=>a});var l=t(249009),d=t(497147);const o="objectFitContain";function e(T){return T&&!!T.closest(".design-layout-fluid")}function a(T){if(g(T),h(T)){const B=u(T),N=!1,P=n(T);O(B,P,N)}}function r(T){const B=u(T);return B&&B.getAttribute("data-shape-mask")}function s(T){return{width:100,height:d.Z[T]}}function n(T){if(!T)return null;const B=r(T),N=i(T);return B?s(B):N}function i(T){const B=T.getAttribute("data-image-dimensions");if(!T||!B)return;const N=B.split("x");return{width:N[0],height:N[1]}}function u(T){return T==null?void 0:T.closest(".sqs-image-content")}function h(T){return T.getAttribute("data-stretch")!=="true"}function g(T){const B=T.closest(".sqs-block-content");f(B,{height:"100%",width:"100%"})}function p(T){const B={height:"100%",width:"100%"};f(T,B),f(T.closest(".sqs-image"),B),f(T.closest(".fluid-image-editor-wrapper"),B),f(T.closest(".sqs-block-content"),B)}function f(T,B){!T||!B||Object.assign(T.style,B)}function m(T){const B={height:"100%",width:"100%"};f(T,B),f(T.closest(".sqs-image"),B),f(T.closest(".fluid-image-editor-wrapper"),B),f(T.closest(".design-layout-fluid"),B);const N={position:"absolute",left:0,top:0};f(T.closest(".fluid-image-editor-wrapper"),N)}function _(T,B,N){N?v(T):E(T,B)}function v(T){T.style.height="100%",T.style.width="100%"}function E(T,B){if(!B||!T)return;const N=T.parentElement;if(!N)return;S(T)&&y(N);const P=N.clientWidth,x=N.clientHeight,R=P/x,w=B.width/B.height,k=R>w?"height":"width";T.style[k]="100%",k==="height"?T.style.width=x*w+"px":T.style.height=P/w+"px"}function S(T){return!!T.closest(".fluid-image-editor-wrapper")}function y(T){T.classList.add("sqs-block-alignment-wrapper"),f(T,{display:"flex",justifyContent:C(T)})}function C(T){let B="center";const N=T.closest(".design-layout-fluid");return N&&(N.classList.contains("image-position-left")&&(B="flex-start"),N.classList.contains("image-position-right")&&(B="flex-end")),B}function O(T,B,N){const P=D(T),x=T.querySelector("img");l.mh(o,P)&&I(T);const w=A(T,x,B,N);l._m({observerName:o,resizeListenerTarget:P,callback:w})}function A(T,B,N,P){return function(){let R=N;P&&(R=P.contentImage.get("model").get("dimensions"));const w=r(B);w&&(R=s(w)),_(T,R,!1)}}function I(T){const B=D(T);B._sqsResizeObservers&&l.Y2({resizeListenerTarget:B,observerName:o})}function D(T){return T.closest(".image-block-outer-wrapper")}},249009:function(c,b,t){"use strict";t.d(b,{Y2:()=>o,_m:()=>d,mh:()=>l});function l(e,a){return!!(a._sqsResizeObservers&&a._sqsResizeObservers[e])}function d(e){let{observerName:a,resizeListenerTarget:r,callback:s}=e;const n=new ResizeObserver(function(i){for(let u=0;u<i.length;u++)s()});n.observe(r),r._sqsResizeObservers||(r._sqsResizeObservers={}),r._sqsResizeObservers[a]=n}function o(e){let{resizeListenerTarget:a,observerName:r}=e;const s=a._sqsResizeObservers&&a._sqsResizeObservers[r];s&&(s.unobserve(a),a._sqsResizeObservers[r]=null)}},630459:function(c,b,t){"use strict";t.d(b,{OH:()=>p,z6:()=>_});var l=t(129198),d=t.n(l),o=t(249009),e=t(767665);const a="shapeFit",r="data-drop-shadow",s="data-blend-mode",n="data-blur";function i(v,E){!v||!E||Object.assign(v.style,E)}function u(v){!v||v.nodeName!=="svg"||v.setAttribute("preserveAspectRatio","none")}function h(v){return v.classList.contains("sqs-stretched")}function g(v){return v.querySelector(".sqs-shape-block-container").getAttribute("data-shape-name")}function p(v,E){o.mh(a,v)&&o.Y2({resizeListenerTarget:v,observerName:a}),u(E),h(v)?m(E):o._m({observerName:a,resizeListenerTarget:v,callback:()=>f(v,E)})}function f(v,E){if(!E)return;let S,y;if(g(v)===d().RECTANGLE)S=1,y=1;else{const B=E.getAttribute("viewBox").split(" ");y=B.pop(),S=B.pop()}const C=v.clientWidth,O=v.clientHeight,A=C/O,I=S/y,D={},T=A>I?"height":"width";D[T]="100%",T==="height"?D.width=O*I+"px":D.height=C/I+"px",i(E,D)}function m(v){i(v,{width:"100%",height:"100%"})}function _(v){const E=v.querySelector(".sqs-shape"),S=E.parentElement;if(p(v,E),S.hasAttribute(r)||S.hasAttribute(n))try{const y=JSON.parse(S.getAttribute(r)),C=JSON.parse(S.getAttribute(n));(0,e.O)(v,y,C)}catch(y){console.error(y)}if(S.hasAttribute(s))try{const y=S.getAttribute(s);(0,e.Hv)(v,y)}catch(y){console.error(y)}}},608259:function(c,b,t){"use strict";t.d(b,{$X:()=>Q,CI:()=>s,Cr:()=>_,EY:()=>a,GW:()=>Fe,Gv:()=>v,HM:()=>ht,KX:()=>D,Q2:()=>O,RU:()=>ke,SK:()=>p,UP:()=>e,Vr:()=>f,_M:()=>B,_N:()=>z,_O:()=>A,dJ:()=>n,eJ:()=>I,em:()=>T,fS:()=>u,fx:()=>F,gX:()=>h,hg:()=>X,iA:()=>m,jQ:()=>o,lk:()=>r,oo:()=>Ae,q9:()=>N,qv:()=>d,s_:()=>C,tQ:()=>y,tl:()=>me,vf:()=>Je,wm:()=>g,x5:()=>J,xY:()=>E,xi:()=>Ie,xs:()=>j,zh:()=>i,zk:()=>S});var l=t(784874),d=function(Ee){return Ee.BLOCK_DRAG_IN_FROM_SELECTOR="block-add",Ee.BLOCK_RESIZE_RIGHT="block-resize-right",Ee.BLOCK_RESIZE_TOP="block-resize-top",Ee.BLOCK_RESIZE_BOTTOM="block-resize-bottom",Ee.BLOCK_RESIZE_LEFT="block-resize-left",Ee.BLOCK_RESIZE_TOP_RIGHT="block-resize-top-right",Ee.BLOCK_RESIZE_TOP_LEFT="block-resize-top-left",Ee.BLOCK_RESIZE_BOTTOM_LEFT="block-resize-bottom-left",Ee.BLOCK_RESIZE_BOTTOM_RIGHT="block-resize-bottom-right",Ee.MULTISELECT_MOVE="multiselect-move",Ee.MULTISELECT_SELECT="multiselect-select",Ee.MULTISELECT_RESIZE_TOP="multiselect-resize-top",Ee.MULTISELECT_RESIZE_RIGHT="multiselect-resize-right",Ee.MULTISELECT_RESIZE_BOTTOM="multiselect-resize-bottom",Ee.MULTISELECT_RESIZE_LEFT="multiselect-resize-left",Ee.MULTISELECT_RESIZE_TOP_RIGHT="multiselect-resize-top-right",Ee.MULTISELECT_RESIZE_TOP_LEFT="multiselect-resize-top-left",Ee.MULTISELECT_RESIZE_BOTTOM_LEFT="multiselect-resize-bottom-left",Ee.MULTISELECT_RESIZE_BOTTOM_RIGHT="multiselect-resize-bottom-right",Ee}({});const o="block-add",e="block-resize-right",a="block-resize-top",r="block-resize-bottom",s="block-resize-left",n="block-resize-top-right",i="block-resize-top-left",u="block-resize-bottom-left",h="block-resize-bottom-right",g="multiselect-move",p="multiselect-select",f="multiselect-resize-top",m="multiselect-resize-right",_="multiselect-resize-bottom",v="multiselect-resize-left",E="multiselect-resize-top-left",S="multiselect-resize-top-right",y="multiselect-resize-bottom-left",C="multiselect-resize-bottom-right",O=new Set([o,e,a,r,s,n,i,u,h,g,p,m,f,_,v,E,S,y,C]),A=new Set([o,g]),I=new Set([e,a,r,s,n,i,u,h]);function D(Ee){return I.has(Ee)}const T=new Set([f,m,_,v,E,S,y,C]);function B(Ee){return T.has(Ee)}function N(Ee){return D(Ee)||B(Ee)}const P=new Set([e,a,r,s,n,i,u,h,f,m,_,v,E,S,y,C]),x=new Set([o,s,i,u,g,v,E,y]),R=new Set([o,a,i,n,g,f,E,S]),w=new Set([o,e,n,h,g,m,S,C]),k=new Set([o,r,u,h,g,_,y,C]),q=new Set([e,s]),F=Ee=>O.has(Ee),z=Ee=>Ee&&x.has(Ee),j=Ee=>Ee&&R.has(Ee),X=Ee=>Ee&&w.has(Ee),J=Ee=>Ee&&k.has(Ee),Q=Ee=>Ee&&q.has(Ee),ie=Ee=>Ee&&I.has(Ee),ce=new Set([a,r,e,n,h,f,_,m,S,C]),pe=new Set([s,e,r,u,h,v,m,_,y,C]);var ye=null;const Ae="height-left",Je="height-right",ke="width-top",Fe="width-bottom",Ie=Ee=>{if(!Ee||!P.has(Ee))return{heightIndicator:null,widthIndicator:null};const Se=ce.has(Ee)?Ae:Je,lt=pe.has(Ee)?ke:Fe;return{heightIndicator:Se,widthIndicator:lt}},ht=new Set([l.Z.HTML,l.Z.NEWSLETTER,l.Z.QUOTE,l.Z.MARKDOWN,l.Z.CODE,l.Z.EMBED,l.Z.SUMMARY_V2,l.Z.MENU,l.Z.SOCIAL_ACCOUNT_LINKS_V2,l.Z.ACCORDION,l.Z.TOCK,l.Z.MEMBER_AREA,l.Z.TWITTER,l.Z.OPENTABLE,l.Z.OPENTABLE_V2,l.Z.TOURDATES,l.Z.FOURSQUARE,l.Z.ARCHIVE]),me=new Set([l.Z.GALLERY,l.Z.VIDEO,l.Z.EMBED,l.Z.CALENDAR,l.Z.CHART,l.Z.PRODUCT,l.Z.INSTAGRAM,l.Z.AMAZON,l.Z.SOUNDCLOUD,l.Z.FLICKR,l.Z.FIVEHUNDREDPIX])},337923:function(c,b,t){"use strict";t.d(b,{Z:()=>h});var l=t(695960),d=t(536477),o=t(101382),e=t(365270),a=t(949642),r=t(419467),s=t.n(r);const{DESKTOP:n,MOBILE:i}=e.FluidEngineBreakpoints,h=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var p;const f={id:(0,d.Z)(),sectionName:l.Z.FLUID_ENGINE,isCloneable:!1,sourceType:"blank",styles:o.j2,fluidEngineContext:{id:(0,d.Z)(),gridSettings:o.h$,gridContents:[]}},m=g==null||(p=g.fluidEngineContext)===null||p===void 0?void 0:p.gridContents;if(!m)return(0,r.merge)({},f,g);const _={[n]:{rows:(0,a.AQ)(m,n)+1},[i]:{rows:(0,a.AQ)(m,i)+1}};return function(){[n,i].map(E=>{var S,y,C,O;const A=g==null||(O=g.fluidEngineContext)===null||O===void 0||(C=O.gridSettings)===null||C===void 0||(y=C.breakpointSettings)===null||y===void 0||(S=y[E])===null||S===void 0?void 0:S.rows,I=_[E].rows;if(A!==void 0&&A<I)throw new Error("New fluid engine section specified with too few rows for grid contents")})}(),(0,r.merge)({},f,{fluidEngineContext:{gridSettings:{breakpointSettings:_}}},g)}},839490:function(c,b,t){"use strict";t.d(b,{Z:()=>v});var l=t(174161),d=t(338465),o=t(482053),e=t(161768),a=t(923046),r=t.n(a),s=t(139717),n=t(251196),i=t(208935),u=t(916661),h=t(302975),g=t(23009),p=t(181124),f=t(209720),m=t(175424);const v=E=>{let{value:S,enum:y,enumAnnotation:C,onChange:O,dataTest:A,hoverTitle:I,noDefaultInList:D,disableEnum:T,dividerIndex:B,position:N,isVisible:P}=E;const[x,R]=(0,l.useState)(!1),w=(0,l.useRef)(null),k=(0,e.Z)(),[q,F]=(0,l.useState)(!1),z=(0,l.useCallback)(Je=>{var ke;(k.current&&!Je||!(!((ke=w.current)===null||ke===void 0)&&ke.contains(Je.target)))&&R(!1)},[k]);(0,g.Z)(z);const j=y.indexOf(S),X={...C[j],label:I||C[j].label},J=Je=>()=>{F(!0),O(Je)},ie=u.Z.isVersion(r().SEVEN)?{borderRadius:0,bg:"#3e3e3e"}:{},ce={borderRadius:2,opacity:P===void 0||P?1:0,...ie},pe=(0,f.Z)(w.current,N,25),ye=(0,m.V6)(),Ae=ye==null?void 0:ye.document.scrollingElement;return l.createElement(d.Z,{mr:"4px",ref:w,"data-test":A,"data-quick-actions-button":""},l.createElement(h.Z,{...X,onClick:()=>R(!x),isSelected:x,forceHideTooltip:x}),l.createElement(p.Z,{container:document.head,cacheKey:"quick-action-icon-select-field"},w.current?l.createElement(s.Z,{anchor:w.current,isOpen:x,position:N??"bottom",hideArrow:!0,offset:pe,bodyStyles:ce,style:ce,scrollNode:Ae,recalculateAnchorOnScroll:!0},l.createElement(o.Z,{className:i.NONINTERACTIVE_CLASSNAME,p:"4px",style:{gap:"4px"},"data-quick-actions-popover":""},C.map((Je,ke)=>{let{icon:Fe,label:Ie,controls:ht}=Je;const me=B&&B.length>0&&B.includes(ke);return l.createElement(l.Fragment,{key:y[ke]},l.createElement(h.Z,{icon:Fe,label:Ie,controls:ht,isSelected:D?q?y[ke]===S:!1:y[ke]===S,onClick:J(y[ke]),disabled:T&&T.includes(y[ke])}),me&&l.createElement(n.Z,{height:"20px",width:"1px",style:{marginRight:"4px",position:"relative",top:"8px"}}))}))):null))}},151059:function(c,b,t){"use strict";t.d(b,{F8:()=>T,Wx:()=>O.Z,Hi:()=>P,sQ:()=>X,U6:()=>x.Z});var l=t(174161),d=t(89843),o=t(139717),e=t(338465),a=t(482053),r=t(804914),s=t(963218),n=t(105567),i=t(208935),u=t(319695),h=t(714487),g=t(875864),p=t(84783),f=t(687808),m=t(175424),_=t(337061),v=t(938077),E=t(757094),S=t(181124),y=t(23009),C=t(161768),O=t(302975),A=t(209720);const I=J=>{let{colorVariable:Q,dataTest:ie,label:ce,onChange:pe,palette:ye,paletteColorsFull:Ae,showAlphaInput:Je=!0,showEditPaletteButton:ke=!0,value:Fe}=J;var Ie;const ht=(0,f.di)(Fe),me=(0,m.V6)(),Ee=me==null?void 0:me.document.scrollingElement,[Se,lt]=(0,l.useState)((ht==null||(Ie=ht.sitePaletteColor)===null||Ie===void 0?void 0:Ie.alphaModifier)??1),[Lt,Pt]=(0,l.useState)(null),[Ce,je]=(0,l.useState)(!1),Le=(0,l.useRef)(null),ci=(0,C.Z)(),Jt=(0,E.v)(),Ft=(0,A.Z)(Lt,"bottom",25),ti=Jt[Q]??s.HEX_BLACK,gi=(0,l.useMemo)(()=>(0,f.jb)(ht,Ae)??ti,[Ae,ht,ti]),qt=(0,l.useCallback)(Ni=>{var ui;(ci.current&&!Ni||!(Ni.target instanceof Node)||!(!((ui=Le.current)===null||ui===void 0)&&ui.contains(Ni.target)))&&je(!1)},[ci]);(0,y.Z)(qt);const Mt=Ni=>{const ui=(0,n.getColorModel)(Ni),gn=(0,r.parseColor)(Ni,"hsl",!0);if(!ui)return;typeof gn.alpha!="number"&&(gn.alpha=1);const zi={type:g.$.CUSTOM_COLOR,customColor:{userFormat:ui,hslaValue:(0,f.jU)(gn)}};pe(zi)},Vt=Ni=>{const ui={type:g.$.SITE_PALETTE_COLOR,sitePaletteColor:{colorName:Ni,alphaModifier:Se}};pe(ui)},Ti=Ni=>{if((0,f.w3)(Fe)){const ui={...Fe,sitePaletteColor:{colorName:p.S.BLACK,...Fe.sitePaletteColor,alphaModifier:Se}};pe(ui)}lt(Ni)};return l.createElement(e.Z,{"data-quick-actions-button":"color-select-field","data-test":ie,mr:"4px",ref:Le},l.createElement(O.Z,{label:ce||(0,h.t)("Select Color",null,{project:"apps.App"}),onClick:()=>je(!Ce),ref:Pt},l.createElement(a.Z,{justifyContent:"space-around"},l.createElement(d.Z.Swatch,{size:"sizes.125",color:gi}))),l.createElement(S.Z,{cacheKey:"quick-action-color-select-field",container:window.document.head},l.createElement(o.Z,{anchor:Lt,bodyStyles:{borderRadius:2},className:i.BLOCK_FOCUS_IGNORE_CLASSNAME,closeOnClickOutside:!0,hideArrow:!0,isOpen:Ce,offset:Ft,onRequestClose:qt,position:"bottom",recalculateAnchorOnScroll:!0,scrollNode:Ee,style:{borderRadius:2}},l.createElement(e.Z,{width:276},l.createElement(u.Z,{colors:ye,initialData:ht,onChangeSwatchColorAlpha:Ti,onSelectCustomColor:Mt,onSelectSwatch:Vt,showAlphaInput:Je&&!(0,f.I9)(Fe),showEditPaletteButton:ke})))))},T=(0,_.a9)(function(Q){return{palette:(0,v.pgi)(Q),paletteColorsFull:(0,v.XNs)(Q)}},null)(I);var B=t(323134);const P=J=>{let{value:Q,enum:ie,enumAnnotation:ce,onChange:pe}=J;const ye=ce.map((Ae,Je)=>{let{label:ke}=Ae;return{id:ie[Je],label:ke}});return l.createElement(B.Z,{options:ye,onChange:pe,value:Q})};var x=t(839490),R=t(72510),w=t(274207),k=t.n(w),q=t(561637),F=t(663634),z=t(30712);const X=J=>{let{onChange:Q,value:ie}=J;const[ce,pe]=(0,l.useState)(!1),[ye,Ae]=(0,l.useState)(null),[Je,ke]=(0,l.useState)(!1),Fe=(0,l.useCallback)(Ee=>{(!Ee||!(ye!=null&&ye.contains(Ee.target)))&&(ke(!1),pe(!1))},[ye]),Ie=(0,A.Z)(ye,"bottom",25),ht=(0,m.V6)(),me=ht==null?void 0:ht.document.scrollingElement;return l.createElement(l.Fragment,null,l.createElement(O.Z,{icon:k(),label:(0,h.t)("Edit Link",null,{project:"apps.App"}),onClick:()=>pe(!ce),ref:Ae,ariaLabel:(0,h.t)("Open link editor popover",null,{project:"apps.App"}),sx:{marginRight:"4px"}}),l.createElement(S.Z,{container:window.document.head,cacheKey:"quick-action-link-editor-field"},l.createElement(o.Z,{className:i.BLOCK_FOCUS_IGNORE_CLASSNAME,anchor:ye,position:"bottom",hideArrow:!0,closeOnClickOutside:!0,isOpen:ce,onRequestClose:Fe,offset:Ie,bodyStyles:{borderRadius:2},style:{borderRadius:2},scrollNode:me,recalculateAnchorOnScroll:!0},ie.url&&ie.url.length>0&&!Je?l.createElement(q.LinkPreview,{url:ie.url,removeLink:()=>Q({...ie,url:""}),handleOpenLinkEditor:()=>ke(!0),trackingPayload:(0,q.getCMSTrackingPayload)("quick-actions")}):l.createElement(q.LinkEditor,{value:ie,onChange:Q,onRequestClose:Fe,trackingPayload:(0,q.getCMSTrackingPayload)("quick-actions"),isFeatureEnabled:F.cr,isLinkEditorUAUEnabled:(0,z.L)().isLinkEditorUAUEnabled}))))}},209720:function(c,b,t){"use strict";t.d(b,{Z:()=>r});var l=t(175424),d=t(419467),o=t.n(d);const e=55,r=(0,d.memoize)(function(s){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"bottom",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const h=(s==null?void 0:s.ownerDocument)===(0,l.wo)()?e:0;return n.split("-").length===1?h+i:{x:(h+i)*-1,y:h+i}})},824476:function(c,b,t){"use strict";t.d(b,{Z:()=>o});var l=t(347560);class d{clearEditingState(){return a=>{a(),this.updateFieldNoEdit("isDirty",!1)}}setAsHomepage(){return a=>{a(),this.updateFieldNoEdit("isHomepage",!0)}}updateField(a,r){return{field:a,value:r}}updateFieldNoEdit(a,r){return{field:a,value:r}}fetchData(a,r){return s=>{let n=a&&a.toJS(),i=!1;n&&s(n.id),r&&!n&&(i=!0,n={});const{categoryPagesSeoHidden:u,homepage:h,seoData:g,tagPagesSeoHidden:p,title:f,urlId:m}=n;this.fetchDataSuccess({categoryPagesSeoHidden:u,isHomepage:h,isContentItem:r,isNewContentItem:i,seoData:g,tagPagesSeoHidden:p,title:f,urlId:m})}}constructor(){this.generateActions("fetchDataSuccess")}}const o=l.Z.createActions(d)},656953:function(c,b,t){"use strict";t.d(b,{Z:()=>e});var l=t(347560),d=t(824476);class o{onUpdateField(r){let{field:s,value:n}=r;this.setState({[s]:n,isDirty:!0})}onUpdateFieldNoEdit(r){let{field:s,value:n}=r;this.setState({[s]:n})}onFetchData(r){this.setState({isLoading:!0,collectionId:r})}onFetchDataSuccess(r){let{categoryPagesSeoHidden:s=!1,isHomepage:n=!1,isContentItem:i=!1,isNewContentItem:u=!1,seoData:h={},tagPagesSeoHidden:g=!1,title:p="",urlId:f=""}=r;const{seoImageId:m}=h;let{seoTitle:_,seoDescription:v,seoHidden:E}=h,S=p;S=this.state.title||p,u&&(_=this.state.seoTitle||_,v=this.state.seoDescription||v,E=this.state.isHidden||E),this.setState({categoryPagesSeoHidden:s,isContentItem:i,isDirty:!1,isHidden:E,isHomepage:n,isLoading:!1,seoDescription:v,seoSocialSharingImageId:m,seoTitle:_||"",tagPagesSeoHidden:g,title:S,urlId:f})}constructor(){this.bindActions(d.Z),this.state={title:"",assetUrl:"",collectionId:"",urlId:"",seoDescription:"",seoSocialSharingImageId:"",seoTitle:"",isContentItem:!1,isHomepage:!1,isHidden:!1,isDirty:!1,isLoading:!0,categoryPagesSeoHidden:!1,tagPagesSeoHidden:!1,supportsFriendlyUrls:!1}}}const e=l.Z.createStore(o,"SEOContentCollectionTabStore")},713820:function(c,b,t){"use strict";t.r(b),t.d(b,{ProductComposerOrchestrator:()=>l.ZP,buildShellContentItem:()=>d.Z});var l=t(199297),d=t(597280)},706252:function(c,b,t){"use strict";t.r(b),t.d(b,{StoreCatalogProductTypes:()=>o,default:()=>a});var l=t(535582),d=t(157484);const o=[d.kv.PHYSICAL,d.kv.SERVICE,d.kv.DIGITAL,d.kv.GIFT_CARD,d.kv.PRINT_ON_DEMAND],a=r=>{let{push:s}=r;return(0,l.default)({push:s},{validProductTypes:o})}},535582:function(c,b,t){"use strict";t.r(b),t.d(b,{default:()=>r});var l=t(199297),d=t(472373),o=t(714487),e=t(154440),a=t(46354);function r(s,n){return new Promise(i=>{l.ZP.openProductCreationWizard({collection:null,onSavingClose:async u=>{let{product:h,closeType:g}=u;g===l.F$.SAVE_BUTTON&&d.Z.present({text:(0,o.t)("Product created",null,{project:"apps.App.Commerce"}),accessories:[{text:(0,o.t)("View",null,{project:"apps.App.Commerce"}),onPress:()=>{const p=h.productType,m=`${`/commerce/products/${a.uA[p]??"physical"}`}/${h.id}?from=confirmation-toast`;s.push(m)}}]}),await new Promise(p=>setTimeout(p,1e3)),(0,e.oS)(),i(null)},onNonSavingClose:()=>{i(null)},onCancelCreate:()=>{i(null)},...n})})}},427779:function(c,b,t){"use strict";t.d(b,{Z:()=>r});var l=t(726692),d=t.n(l),o=t(44348),e=t.n(o);const r={enabled:{type:"boolean"},title:{type:"string"},navigationTitle:{type:"string"},id:{type:"string"},body:{type:"object",properties:{html:{type:"string"}}},fullUrl:{type:"string"},commentState:{type:"number",enum:[d().DISABLED,d().ENABLED]},commentDisableOn:{oneOf:[{type:"number"},{type:"null"}]},workflowState:{type:"number",enum:[e().PUBLISHED,e().SCHEDULED,e().NEEDS_REVIEW,e().DRAFT]},urlId:{type:"string"},authorId:{type:"string"},sourceUrl:{type:"string"},shareStates:{type:"array",items:{type:"object",properties:{connectedAccountId:{type:"string"},pushEnabled:{type:"boolean"},message:{type:"string"}}}},location:{type:"object",properties:{addressCountry:{type:"string"},addressLine1:{type:"string"},addressLine2:{type:"string"},addressTitle:{type:"string"},mapLat:{type:"number"},mapLng:{type:"number"},mapZoom:{type:"number"},markerLat:{type:"number"},markerLng:{type:"number"}}},categories:{type:"array",items:{type:"string"}},tags:{type:"array",items:{type:"string"}}}},33698:function(c,b,t){"use strict";t.d(b,{Z:()=>o});var l=t(347560);class d{addOnVisibilityChangedHandler(a,r){return{key:a,callback:r}}constructor(){this.generateActions("closed","close","resetVisibility","update","removeOnVisibilityChangedHandler")}}const o=l.Z.createActions(d)},245945:function(c,b,t){"use strict";t.d(b,{Z:()=>o});var l=t(347560);class d{update(a,r){return{field:a,value:r}}}const o=l.Z.createActions(d)},190602:function(c,b,t){"use strict";t.d(b,{Z:()=>y});var l=t(58468),d=t(174161),o=t(281395),e=t(181124),a=t(318842),r=t(518099),s=t(850882),n=t(14469),i=t(313380),u=t.n(i),h=t(100310),g=t(663634),p=t(859817),f=t.n(p),m=t(924647),_=t(970671),v=t(175424);const{UPLOADER_ORIGIN:E}=a,y=C=>{let{fieldId:O,handleChange:A}=C;const I=(0,v.wo)(),T=!!!(O&&I&&I!=null&&I.getElementById(O))&&!!(O&&document.getElementById(O)),[B,N]=(0,d.useState)(void 0);return d.createElement(_.Z,null,d.createElement(p.StatsigProvider,{client:(0,g.GC)()},d.createElement(h.Z,{baseIndex:T?m.Ue.BASE+1e3:void 0},P=>d.createElement(r.Provider,{component:x=>{let{children:R}=x;return d.createElement(e.Z,{container:I.head,cacheKey:"image-block-upload"},R)}},d.createElement(o.eG,{assetType:s.h.IMAGE,className:u().container,isCompact:!0,isInImageBlock:!0,isFullWidth:!1,onChange:x=>{N(x.id),A(x)},value:{id:B},variant:n.Us.LARGE,fieldDescription:"image-block",fieldId:O,assetDestination:"image-block",indirectObjectIdentifier:"block-level-custom-options",productPage:"block-editor",uploaderOrigin:E.EMPTY_STATE})))))}},722195:function(c,b,t){"use strict";t.d(b,{Z:()=>S});var l=t(174161),d=t(906046),o=t(251196),e=t(47362),a=t(39347),r=t(338465),s=t(115350),n=t(41570),i=t(862335),u=t(337061),h=t(850255),g=t(505739),p=t(916661);const f=(0,s.Z)(d.Z,o.Z),m=y=>{var C;const O=(C=(0,i.k)(y))===null||C===void 0?void 0:C.unit;return O!==""&&O!==void 0},_=y=>{let{onChange:C,onBlur:O,value:A,min:I,max:D,size:T,validate:B=m,...N}=y;const[P,x]=(0,l.useState)(A);(0,l.useEffect)(()=>{x(A)},[A]);const R=X=>{x(X),B(X)&&C(X)},w=()=>x(A),k=()=>{B(P)&&P!==A?C(P):w(),O()},{ariaRole:q,onKeyDown:F,onWheel:z,setInputRef:j}=(0,n.Z)({integerOptions:{min:I,max:D},onChange:R,value:P});return l.createElement(e.Z,{ariaRole:q,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",onChange:R,onBlur:k,onKeyDown:F,onWheel:z,ref:j,spellCheck:!1,value:P,size:T,textAlign:"right",...N})},v=y=>{let{label:C,value:O,onChange:A,endUndoGroup:I,validateTextInput:D,units:T,min:B,max:N,step:P,showTicks:x,hideDivider:R=!1,inline:w=!1,sliderInputDataTestAttr:k,textInputDataTestAttr:q,ariaLabel:F}=y;const z=(0,i.k)(O);let j,X,J;T&&(z!=null&&z.unit)&&T[z.unit]?(j=T[z.unit].min,X=T[z.unit].max,J=T[z.unit].step):(j=B,X=N,J=P);const Q=ye=>{A(ye+((z==null?void 0:z.unit)??""),{grouping:g.Z.UNTIL_END_UNDO_GROUP})},ie=()=>{p.Z.isSevenOne()&&(I==null||I())},ce=R?d.Z:f,pe={[w?"body":"post"]:l.createElement(r.Z,{pt:"5px"},l.createElement(a.Z.Input,{height:"8px",min:j,max:X,onChange:Q,onMouseUp:ie,step:J,value:(z==null?void 0:z.num)??0,showTicks:x,"data-test":k,"aria-label":F??C}))};return l.createElement(ce,{label:w?null:C,interiorAccessory:l.createElement(_,{onChange:A,onBlur:ie,value:O,min:j,max:X,validate:D,"data-test":q,size:String(X).length+String((z==null?void 0:z.unit)??"").length+2}),minHeight:"auto",...pe})},S=p.Z.isSevenOne()?(0,u.a9)(null,{endUndoGroup:h.lW})(v):v},952352:function(c,b,t){"use strict";t.d(b,{R:()=>o,f:()=>d});var l=t(174161);const d=l.createElement("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("rect",{x:"2",y:"2",width:"12",height:"12",stroke:"currentColor",strokeWidth:"2"}),l.createElement("rect",{x:"18",y:"18",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"14",y:"18",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"10",y:"18",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"6",y:"18",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"6",y:"15",width:"2",height:"1",fill:"currentColor"}),l.createElement("rect",{x:"18",y:"14",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"18",y:"10",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"18",y:"6",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"15",y:"6",width:"1",height:"2",fill:"currentColor"})),o=l.createElement("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M8 17V20H20V8H17",stroke:"currentColor",strokeWidth:"2"}),l.createElement("rect",{x:"2",y:"2",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"2",y:"6",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"2",y:"10",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"2",y:"14",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"6",y:"14",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"10",y:"14",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"14",y:"14",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"14",y:"10",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"14",y:"6",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"14",y:"2",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"10",y:"2",width:"2",height:"2",fill:"currentColor"}),l.createElement("rect",{x:"6",y:"2",width:"2",height:"2",fill:"currentColor"}))},323134:function(c,b,t){"use strict";t.d(b,{Z:()=>N});var l=t(795478),d=t.n(l),o=t(174161),e=t(419467),a=t.n(e),r=t(845076),s=t.n(r),n=t(102258),i=t(612020),u=t(516865),h=t(482053),g=t(538312),p=t(352635),f=t(100310),m=t(208935),_=t(553772),v=t(923046),E=t.n(v),S=t(916661);const y=S.Z.isVersion(E().SEVEN),C=145,O={letterSpacing:"0",textAlign:"left",textTransform:"none"},A={"&:hover":{backgroundColor:y?"":p.colors.gray[800]},"&::before":{display:"none"},"&:focus":{backgroundColor:p.colors.gray[600]},"&:focus:not(:hover):not(:focus-visible)":{backgroundColor:"transparent"}},I=y?{borderRadius:0,height:"sizes.250"}:{},D=o.forwardRef((P,x)=>{let{isOpen:R,label:w,setIsOpen:k}=P;return o.createElement(u.Z,{...O,backgroundColor:"transparent",border:"none",borderRadius:"4px",boxSizing:"border-box",color:"inherit",css:{...A,paddingLeft:"7px",paddingRight:"7px"},cursor:"pointer",height:"36px",justifyContent:"space-between",minWidth:`${C}px`,mx:"4px",onClick:()=>k(!R),py:0,ref:x,...I},o.createElement(h.Z,{alignItems:"center",justifyContent:"space-between",width:"100%"},o.createElement(g.Z.Body,{flexGrow:1,...y?{mb:0}:{},as:"div"},w),o.createElement(i.Z,null)))});D.displayName="SiteServerDropdownTrigger",D.propTypes={isOpen:d().bool.isRequired,label:d().node.isRequired,setIsOpen:d().func.isRequired};const T=(0,e.memoize)(P=>{const x=R=>o.createElement(f.Z,null,w=>{const k=Math.max(w,_.Ue.TOOLBAR)+1;return o.createElement(n.Z.Dropdown,{...R,className:s()(m.NONINTERACTIVE_CLASSNAME,P),sheetContainerClassName:m.NONINTERACTIVE_CLASSNAME,focusLockIsDisabled:!0,mountAt:R.displayRef.current.ownerDocument.body,style:{border:0,borderRadius:"8px",paddingBottom:"6px",paddingTop:"6px",width:"unset",minWidth:`${C}px`,zIndex:k},zIndex:k})});return x.propTypes={displayRef:d().shape({current:d().shape({tagName:d().string})})},x}),B=P=>{let{options:x,onBeforeOpen:R,onChange:w,state:k,value:q,button:F,popoverClassName:z,placement:j="bottom",htmlAttributes:X={},...J}=P;const Q=(0,o.useState)(!1),[ie,ce]=k||Q,pe=Je=>{Je&&R&&R(),ce(Je)},ye=x.map(Je=>{let{id:ke,label:Fe,...Ie}=Je;return o.createElement(n.Z.Option,{key:ke,value:ke,sx:{letterSpacing:0},...Ie},Fe)}),Ae=n.Z.Base;return o.createElement(Ae,{isOpen:ie,setIsOpen:pe,value:q,onChange:w,renderDisplay:D,renderDropdown:T(z),placement:j,...X,...J},ye,F&&o.createElement(u.Z.Tertiary,{size:"large",width:"100%",onClick:F.onClick},F.label))};B.propTypes={onBeforeOpen:d().func,onChange:d().func};const N=B},807586:function(c,b,t){"use strict";t.d(b,{Z:()=>P});var l=t(374335),d=t.n(l),o=t(782140),e=t(175823),a=t(153088),r=t(174161),s=t(795478),n=t.n(s),i=t(685763),u=t(362187),h=t(765742),g=t(431082),p=t(970671),f=t(237084),m=t(934951),_=t(714487),v=t(868192),E=t(44348);function S(x,R,w){return R in x?Object.defineProperty(x,R,{value:w,enumerable:!0,configurable:!0,writable:!0}):x[R]=w,x}const y={title:(0,_.t)("Unpublished Post",null,{project:"apps.App"}),message:(0,_.t)("You must publish your blog post before creating a draft.",null,{project:"apps.App"})},C={title:(0,_.t)("Email Draft Created",null,{project:"apps.App"}),cancelText:(0,_.t)("Okay",null,{project:"apps.App"}),confirmText:(0,_.t)("Go To Campaigns",null,{project:"apps.App"}),message:(0,_.t)("A draft of this post is staged in your Email Campaigns > Drafts folder.",null,{project:"apps.App"})},O={default:(0,_.t)("Create Email Draft",null,{project:"apps.App"}),isCreating:(0,_.t)("Creating Draft\u2026",null,{project:"apps.App"})},A=r.createElement("a",{target:"_blank",href:v.EMAIL_CAMPAIGNS_SUPPORT},r.createElement(m.T,{project:"apps.App"},"Learn more")),I=()=>r.createElement(m.T,{learnMore:A,project:"apps.App"},"Use Squarespace Email Campaigns to send this post to your audience. {learnMore}"),D="/config/marketing/campaigns",T=x=>{let{isOpen:R,onRequestClose:w,children:k}=x;return r.createElement(i.Z.Transition,null,R&&r.createElement(i.Z,{onRequestClose:w},r.createElement(i.Z.Overlay,null),r.createElement(i.Z.Position,{position:"center"},k)))};class B extends r.Component{render(){return r.createElement(p.Z,null,r.createElement("div",null,r.createElement(h.context,{label:(0,_.t)("Email",null,{project:"apps.ContentBrowser"})}),this.renderButton(),r.createElement(h.context,{description:r.createElement(I,null)}),this.renderModals()))}constructor(...R){super(...R),S(this,"state",{showUnpublishedWarning:!1,shouldShowSuccessAlert:!1}),S(this,"createDraftFromPost",async()=>{const{model:w}=this.props,{collectionId:k,id:q,workflowState:F}=w;F===E.PUBLISHED?(await f.Z.createDraftFromBlogPost({collectionId:k,id:q}),this.setState({shouldShowSuccessAlert:!0})):this.setState({showUnpublishedWarning:!0})}),S(this,"navigateToCampaigns",()=>{window.location.href=D}),S(this,"closeUnpublishedWarning",()=>{this.setState({showUnpublishedWarning:!1})}),S(this,"closeDraftSuccessAlert",()=>{this.setState({shouldShowSuccessAlert:!1})}),S(this,"renderModals",()=>{const{onRequestNavigate:w}=this.props,{showUnpublishedWarning:k,shouldShowSuccessAlert:q}=this.state;return r.createElement(r.Fragment,null,r.createElement(T,{isOpen:k,onRequestClose:this.closeUnpublishedWarning},r.createElement(u.Z,{title:y.title,message:y.message,buttons:[r.createElement(u.Z.Button,{key:"cancel",onClick:this.closeUnpublishedWarning},(0,_.t)("Okay",null,{project:"apps.App"}))]})),r.createElement(T,{isOpen:q,onRequestClose:this.closeDraftSuccessAlert},r.createElement(u.Z,{title:C.title,message:C.message,buttons:[r.createElement(u.Z.Button,{key:"cancel",onClick:this.closeDraftSuccessAlert},C.cancelText),r.createElement(u.Z.Button,{key:"confirm",onClick:()=>{w(D),this.setState({shouldShowSuccessAlert:!1})}},C.confirmText)]})))}),S(this,"renderButton",()=>{const{isCreatingDraft:w}=this.props;return w?r.createElement(g.default,{disabled:!0,alignment:"left"},O.isCreating):r.createElement(g.default,{onClick:this.createDraftFromPost,alignment:"left"},O.default)})}}S(B,"propTypes",{isCreatingDraft:n().bool.isRequired,model:n().shape({collectionId:n().string,id:n().string,workflowState:n().number})});const N=B,P=d()({getStores(){return[o.Z]},getPropsFromStores(){const{isCreatingDraft:x}=o.Z.getState();return{isCreatingDraft:x}}},N)},414998:function(c,b,t){"use strict";t.d(b,{A:()=>e});var l=t(784874),d=t(135118),o=t(714487);const e={[l.Z.HTML]:(0,o.t)("Text",null,{project:"scripts-v6.layout-engine"}),[l.Z.MARKDOWN]:(0,o.t)("Markdown",null,{project:"scripts-v6.layout-engine"}),[l.Z.QUOTE]:(0,o.t)("Quote",null,{project:"scripts-v6.layout-engine"}),[l.Z.IMAGE]:(0,o.t)("Image",null,{project:"scripts-v6.layout-engine"}),[l.Z.GALLERY]:(0,o.t)("Gallery",null,{project:"scripts-v6.layout-engine"}),[l.Z.VIDEO]:(0,o.t)("Video",null,{project:"scripts-v6.layout-engine"}),[l.Z.AUDIO]:(0,o.t)("Audio",null,{project:"scripts-v6.layout-engine"}),[l.Z.EMBED]:(0,o.t)("Embed",null,{project:"scripts-v6.layout-engine"}),[l.Z.PRODUCT]:(0,o.t)("Product",null,{project:"scripts-v6.layout-engine"}),[l.Z.AMAZON]:(0,o.t)("Amazon",null,{project:"scripts-v6.layout-engine"}),[l.Z.DONATION]:(0,o.t)("Donation",null,{project:"scripts-v6.layout-engine"}),[l.Z.MEMBER_AREA]:(0,o.t)("Member Sign Up",null,{project:"scripts-v6.layout-engine"}),[l.Z.FORM]:(0,o.t)("Form",null,{project:"scripts-v6.layout-engine"}),[l.Z.NEWSLETTER]:(0,o.t)("Newsletter",null,{project:"scripts-v6.layout-engine"}),[l.Z.MAP]:(0,o.t)("Map",null,{project:"scripts-v6.layout-engine"}),[l.Z.CODE]:(0,o.t)("Code",null,{project:"scripts-v6.layout-engine"}),[l.Z.MENU]:(0,o.t)("Menu",null,{project:"scripts-v6.layout-engine"}),[l.Z.LINK]:(0,o.t)("Link",null,{project:"scripts-v6.layout-engine"}),[l.Z.CALENDAR]:(0,o.t)("Calendar",null,{project:"scripts-v6.layout-engine"}),[l.Z.OPENTABLE]:(0,o.t)("OpenTable",null,{project:"scripts-v6.layout-engine"}),[l.Z.OPENTABLE_V2]:(0,o.t)("OpenTable",null,{project:"scripts-v6.layout-engine"}),[l.Z.TOCK]:(0,o.t)("Tock",null,{project:"scripts-v6.layout-engine",notes:"Tock the company"}),[d.Z.TOCK_RESERVATIONS]:(0,o.t)("Tock",null,{project:"scripts-v6.layout-engine",notes:"Tock the company"}),[d.Z.TOCK_EVENTS]:(0,o.t)("Events",null,{project:"scripts-v6.layout-engine"}),[l.Z.TOURDATES]:(0,o.t)("Bandsintown",null,{project:"scripts-v6.layout-engine"}),[l.Z.SPACER]:(0,o.t)("Spacer",null,{project:"scripts-v6.layout-engine"}),[l.Z.HORIZONTAL_RULE]:(0,o.t)("Line",null,{project:"scripts-v6.layout-engine"}),[l.Z.SEARCH]:(0,o.t)("Search",null,{project:"scripts-v6.layout-engine"}),[l.Z.COLLECTION_LINK]:(0,o.t)("Content Link",null,{project:"scripts-v6.layout-engine"}),[l.Z.BUTTON]:(0,o.t)("Button",null,{project:"scripts-v6.layout-engine"}),[l.Z.SUMMARY]:(0,o.t)("Summary",null,{project:"scripts-v6.layout-engine"}),[l.Z.SUMMARY_V2]:(0,o.t)("Summary",null,{project:"scripts-v6.layout-engine"}),[l.Z.TAGCLOUD]:(0,o.t)("Tag Cloud",null,{project:"scripts-v6.layout-engine"}),[l.Z.POSTS_BY_TAG]:(0,o.t)("Tag List",null,{project:"scripts-v6.layout-engine"}),[l.Z.POSTS_BY_AUTHOR]:(0,o.t)("Author List",null,{project:"scripts-v6.layout-engine"}),[l.Z.POSTS_BY_CATEGORY]:(0,o.t)("Category List",null,{project:"scripts-v6.layout-engine"}),[l.Z.POSTS_BY_MONTH]:(0,o.t)("Month List",null,{project:"scripts-v6.layout-engine"}),[l.Z.ARCHIVE]:(0,o.t)("Archive",null,{project:"scripts-v6.layout-engine"}),[l.Z.TWITTER]:(0,o.t)("Twitter",null,{project:"scripts-v6.layout-engine"}),[l.Z.FOURSQUARE]:(0,o.t)("Swarm",null,{project:"scripts-v6.layout-engine"}),[l.Z.SOCIAL_ACCOUNT_LINKS]:(0,o.t)("Social Links",null,{project:"scripts-v6.layout-engine"}),[l.Z.SOCIAL_ACCOUNT_LINKS_V2]:(0,o.t)("Social Links",null,{project:"scripts-v6.layout-engine"}),[l.Z.RSS]:(0,o.t)("RSS",null,{project:"scripts-v6.layout-engine"}),[l.Z.FIVEHUNDREDPIX]:(0,o.t)("500px",null,{project:"scripts-v6.layout-engine"}),[l.Z.INSTAGRAM]:(0,o.t)("Instagram",null,{project:"scripts-v6.layout-engine"}),[l.Z.FLICKR]:(0,o.t)("Flickr",null,{project:"scripts-v6.layout-engine"}),[l.Z.SOUNDCLOUD]:(0,o.t)("SoundCloud",null,{project:"scripts-v6.layout-engine"}),[l.Z.CHART]:(0,o.t)("Chart",null,{project:"scripts-v6.layout-engine"}),[d.Z.CHART_BAR]:(0,o.t)("Chart",null,{project:"scripts-v6.layout-engine"}),[d.Z.CHART_LINE]:(0,o.t)("Line Chart",null,{project:"scripts-v6.layout-engine"}),[d.Z.CHART_PIE]:(0,o.t)("Pie Chart",null,{project:"scripts-v6.layout-engine"}),[d.Z.GALLERY_SLIDESHOW]:(0,o.t)("Slideshow",null,{project:"scripts-v6.layout-engine"}),[d.Z.GALLERY_CAROUSEL]:(0,o.t)("Carousel",null,{project:"scripts-v6.layout-engine"}),[d.Z.GALLERY_GRID]:(0,o.t)("Grid",null,{project:"scripts-v6.layout-engine"}),[d.Z.GALLERY_STACK]:(0,o.t)("Stack",null,{project:"scripts-v6.layout-engine"}),[d.Z.SUMMARY_WALL]:(0,o.t)("Summary",null,{project:"scripts-v6.layout-engine"}),[d.Z.SUMMARY_CAROUSEL]:(0,o.t)("Carousel",null,{project:"scripts-v6.layout-engine"}),[d.Z.SUMMARY_LIST]:(0,o.t)("List",null,{project:"scripts-v6.layout-engine"}),[d.Z.SUMMARY_GRID]:(0,o.t)("Grid",null,{project:"scripts-v6.layout-engine"}),[l.Z.ZOLA]:(0,o.t)("Zola",null,{project:"scripts-v6.layout-engine"}),[l.Z.ACUITY]:(0,o.t)("Scheduling",null,{project:"scripts-v6.layout-engine"}),[d.Z.IMAGE_INLINE]:(0,o.t)("Inline",null,{project:"scripts-v6.layout-engine"}),[d.Z.IMAGE_POSTER]:(0,o.t)("Poster",null,{project:"scripts-v6.layout-engine"}),[d.Z.IMAGE_CARD]:(0,o.t)("Card",null,{project:"scripts-v6.layout-engine"}),[d.Z.IMAGE_OVERLAP]:(0,o.t)("Overlap",null,{project:"scripts-v6.layout-engine"}),[d.Z.IMAGE_COLLAGE]:(0,o.t)("Collage",null,{project:"scripts-v6.layout-engine"}),[d.Z.IMAGE_STACK]:(0,o.t)("Stack",null,{project:"scripts-v6.layout-engine"}),[l.Z.ACCORDION]:(0,o.t)("Accordion",null,{project:"scripts-v6.layout-engine"}),[l.Z.MARQUEE]:(0,o.t)("Scrolling",null,{project:"scripts-v6.layout-engine"}),[l.Z.SHAPE]:(0,o.t)("Shape",null,{project:"scripts-v6.layout-engine"}),[l.Z.PRICING_PLAN]:(0,o.t)("Digital Product",null,{project:"scripts-v6.layout-engine"})}},657300:function(c,b,t){"use strict";t.d(b,{Z:()=>y});var l=t(347560),d=t(548068),o=t.n(d),e=t(829499),a=t(456903),r=t(784874),s=t(334001),n=t(787592),i=t(166455),u=t.n(i),h=t(342034);const g="/api/page-collection-data",f={async loadPageCollectionData(C){return await s.Z.setup({forceRefresh:!0}),a.default.get(`${g}/${C}`)},updatePageCollectionData(C,O){let{id:A,websiteId:I,data:D}=O;var T;const B=[];function N(R){for(const w of R||[])for(const k of(w==null?void 0:w.columns)||[]){if(k&&k.blocks)for(const q of k.blocks)q.type===r.Z.WEBSITE_COMPONENT&&!q.definitionName&&B.push(q);k&&k.rows&&N(k.rows)}}N((T=D.layout)===null||T===void 0?void 0:T.rows),B.length>0&&n.$e(function(R){R.setTag("owner",u().CONTENT_RENDERING),R.setContext("additionalInfo",B),n.Tb(new Error("Attempt to save website component without definition name"))});const P=(0,h.Rd)(),x=P&&P("getSession",{format:"id"})||null;return a.default.put(`${g}/${C}`,{id:A,collectionId:C,websiteId:I,data:D},{headers:{"X-FullStory-Session":x}})},createPageCollectionData(C,O){let{websiteId:A,data:I}=O;return a.default.post(`${g}/${C}`,{collectionId:C,websiteId:A,data:I})}};var m=t(35045);class _{load(O){return A=>f.loadPageCollectionData(O).then(I=>(A(I.data||{collectionId:O}),I)).catch(this.notifyError)}save(O,A,I){return D=>{const T=m.default.getState().id;return I=Object.assign({},I,{id:O,websiteId:T}),f.updatePageCollectionData(A,I).then(B=>(D(B.data),B)).catch(this.notifyError)}}create(O,A){return I=>{const D=m.default.getState().id;return A=Object.assign({},A,{websiteId:D}),f.createPageCollectionData(O,A).then(T=>(I(T.data),T)).catch(this.notifyError)}}notifyError(O){return O instanceof Error&&console.error(O),Promise.reject(O.response&&O.response.data&&(O.response.data.message||O.response.data.error)||O.message||O.statusText||O.error)}}const v=l.Z.createActions(_);var E=t(540100);class S{getDefaultData(){return{layout:E.EmptyLayout(12)}}onUpdate(O){let{id:A,collectionId:I,data:D}=O;D||(D=this.getDefaultData()),this.setState({[I]:{id:A,data:D}})}getPageCollectionData(O){const A=o()(O)?O:O.collectionId,I=this.getState()[A];return I?Promise.resolve(I):v.load(A).then(()=>this.getState()[A])}getPageCollectionDataList(O){return Promise.all(O.map(this.getPageCollectionData.bind(this)))}savePageCollectionData(O,A){const I=this.getState()[O].id;return v.save(I,O,Object.assign({},A,{data:Object.assign({},A.data,{updatedOn:A.data.updatedOn||this.getState()[O].data.updatedOn})})).then(()=>this.getState()[O])}resetPageCollectionData(O){const A=e.default.getState().markdownMode,{Layout:I,Row:D,Column:T,HTMLBlock:B,MarkdownBlock:N}=E,P=A?N(" ","<p> </p>"):B("<p> </p>"),x={layout:I(D(T(12,P)))};return this.getState()[O]?this.savePageCollectionData(O,{data:x}):this.getPageCollectionData(O).then(()=>this.savePageCollectionData(O,{data:x}))}createPageCollectionData(O,A){return v.create(O,A).then(()=>this.getState()[O])}constructor(){this.bindListeners({onUpdate:[v.LOAD,v.SAVE,v.CREATE]}),this.exportPublicMethods({getPageCollectionData:this.getPageCollectionData,getPageCollectionDataList:this.getPageCollectionDataList,savePageCollectionData:this.savePageCollectionData,resetPageCollectionData:this.resetPageCollectionData,createPageCollectionData:this.createPageCollectionData})}}const y=l.Z.createStore(S,"PageCollectionDataStore")},764916:function(c,b,t){"use strict";t.d(b,{G:()=>s,Q:()=>r});var l=t(419467),d=t.n(l),o=t(337061),e=t(938077),a=t(188405);function r(n,i){const u=(0,a.oP)(n,i);return(0,l.isEmpty)(u)?{themeId:(0,e.Vxx)((0,o.d6)()),isDefault:!0}:{themeId:u}}function s(n,i){return r((0,a.gk)(n),i)}},683728:function(c,b,t){"use strict";t.d(b,{Z:()=>s});var l=t(419467),d=t.n(l),o=t(86851),e=t.n(o);const{getJsonPointerValue:a}=o.jsonPointerUtils;function r(n,i){return Object.entries(n).some(u=>{let[h,g]=u;const p=a(i,h);return!(0,l.isEqual)(p,g)})}const s=r},23009:function(c,b,t){"use strict";t.d(b,{Z:()=>s});var l=t(174161),d=t(48992),o=t(746933),e=t(757681),a=t(924647),r=t(175424);function s(n,i){const u=(0,r.wo)(),h=(u==null?void 0:u.body)??null;(0,d.Z)("click",n,{element:h,shouldListen:i==null?void 0:i.shouldListen}),(0,d.Z)("click",n,{element:(u==null?void 0:u.getElementById("header"))??null,shouldListen:i==null?void 0:i.shouldListen}),(0,d.Z)("click",n,{element:document.querySelector(".config-website-frame"),shouldListen:i==null?void 0:i.shouldListen}),(0,d.Z)("click",n,{element:document.querySelector(".dialog-text-post-editor"),shouldListen:i==null?void 0:i.shouldListen}),(0,d.Z)("click",n,{element:document.querySelector(".dialog-event-post-editor"),shouldListen:i==null?void 0:i.shouldListen}),(0,d.Z)("click",n,{element:document.querySelector(a.j8),shouldListen:i==null?void 0:i.shouldListen}),(0,d.Z)("click",n,{element:document.querySelector('[data-block-focus-handler-id="react-block-annotation"]'),shouldListen:i==null?void 0:i.shouldListen}),(0,l.useEffect)(()=>(o.c.on(e.TI,n),()=>{o.c.off(e.TI,n)}),[n])}},161768:function(c,b,t){"use strict";t.d(b,{Z:()=>d});var l=t(174161);function d(){const o=(0,l.useRef)(!0);return(0,l.useEffect)(()=>()=>{o.current=!1},[]),o}},96315:function(c,b,t){"use strict";t.d(b,{Z:()=>d});var l=t(663634);const d=()=>(0,l.cr)("product_composer_drawer_r2")},423753:function(c,b,t){"use strict";t.d(b,{N:()=>e});var l=t(364948),d=t(456903);const o=async a=>{try{let r=await(0,l.getAssetDeliveryAuthToken)();return(0,l.getIsTokenStale)(r)&&(r=await(0,l.getAssetDeliveryAuthToken)(!0)),r}catch(r){return console.error(r),a}},e=async a=>(await d.default.head(a).catch(async function(r){if(r.response){const s=r.response.status;if(s===401||s===403){const n=await o(a);a=(0,l.addTokenToUrl)(a,n)}}}),a)},362811:function(c,b,t){"use strict";t.d(b,{G0:()=>d,Kw:()=>o,fA:()=>a,xg:()=>l});function l(r){r.style.visibility="hidden"}function d(r){r.style.removeProperty("visibility")}function o(r,s){const n=new URL(r.startsWith("//")?window.location.protocol+r:r);return n.searchParams.set("token",s),n.toString()}function e(r,s){const n={};if(r.src&&(n.src=o(r.src,s)),r.srcset){const i=r.srcset.split(",");n.srcset=i.map(u=>{const[h,g]=u.trim().split(" ");return[o(h,s),g].join(" ")}).join(", ")}Object.assign(r,n)}function a(r,s){var n;if(r.crossOrigin="anonymous",e(r,s),((n=r.parentElement)===null||n===void 0?void 0:n.tagName.toLowerCase())==="picture")for(const i of r.parentElement.children)i instanceof HTMLSourceElement&&e(i,s)}},980773:function(c,b,t){"use strict";t.d(b,{f$:()=>e,iY:()=>o,wQ:()=>l.wQ});var l=t(239462),d=t(362811);const o=a=>{const r=(0,l.wQ)();return r!==void 0?(0,d.Kw)(a,r):a},e=()=>!!window.setAssetAuthorizationGateErrorListener},914960:function(){typeof console>"u"&&(console={assert:function(){},group:function(){},groupEnd:function(){},log:function(){},dir:function(){},warn:function(){},error:function(c){var b=Array.prototype.slice.call(arguments);throw new Error(b)}})},343312:function(c,b,t){"use strict";t.d(b,{Ar:()=>m,Kc:()=>S,Zj:()=>f,bZ:()=>g,gm:()=>p,ll:()=>h,qR:()=>_,s3:()=>E});var l=t(461761),d=t.n(l),o=t(284106),e=t(714487);const a=y=>{var C,O;const A=y==null||(O=y.parentElement)===null||O===void 0||(C=O.parentElement)===null||C===void 0?void 0:C.getAttribute("data-current-context");return A&&JSON.parse(A)},r=y=>{const C=y==null?void 0:y.getAttribute("data-current-context");return C&&JSON.parse(C)},s=y=>{const C=Array.from(document.querySelectorAll("#product-quick-view")).find(A=>A.contains(y)),O=C==null?void 0:C.getAttribute("data-current-context");return O&&JSON.parse(O)},n=y=>{const C=y.querySelector(".sqs-add-to-cart-button");return C?C.getAttribute("data-quick-view-source"):null},i=(y,C)=>{y.setAttribute("disabled","true"),y.setAttribute("previousText",C)},u=y=>{y.removeAttribute("disabled"),y.removeAttribute("previousText")},h=y=>{const C=(0,e.t)("Select Option",null,{project:"apps.Commerce"}),O=y.parentElement,A=y.querySelector(".sqs-add-to-cart-button-inner");if(O&&A){const I=A.textContent||"";A.textContent=C,i(O,I),setTimeout(()=>{A.textContent=I,u(O)},2e3)}},g=y=>{const C=(0,e.t)("Sold Out",null,{project:"apps.Commerce"}),O=y.querySelector(".sqs-add-to-cart-button-inner");if(O){const A=O.textContent||"";O.textContent=C,i(y,A)}},p=y=>{if(y){const C=y.getAttribute("previousText");C&&(y.querySelector(".sqs-add-to-cart-button-inner").textContent=C),u(y)}};var f=function(y){return y.PLP="plp",y.PDP="pdp",y.ADD_ON="add-on",y.PRODUCT_BLOCK="product_block",y}({}),m=function(y){return y.NO_VARIANT_SELECTED="NO_VARIANT_SELECTED",y.VARIANT_UNAVAILABLE="VARIANT_UNAVAILABLE",y.OUT_OF_STOCK="OUT_OF_STOCK",y.QUANTITY_NOT_A_NUMBER="QUANTITY_NOT_A_NUMBER",y.SUB_WITH_FORM_FAILURE="SUB_WITH_FORM_FAILURE",y.SUB_QUANTITY_NOT_A_WHOLE_NUMBER="SUB_QUANTITY_NOT_A_WHOLE_NUMBER",y.SUB_API_FAILURE="SUB_API_FAILURE",y.EXPRESS_CHECKOUT_FAILURE="EXPRESS_CHECKOUT_FAILURE",y.CUSTOM_FORM_RENDER_ERROR="CUSTOM_FORM_RENDER_ERROR",y.CUSTOM_FORM_RENDER_ERROR_OUT_OF_STOCK="CUSTOM_FORM_RENDER_ERROR_OUT_OF_STOCK",y.API_FAILURE="API_FAILURE",y}({});const _=(y,C,O,A)=>{const I=d()(window,"Static.SQUARESPACE_CONTEXT"),D=I.website;let T=I.collection,B,N,P;const x=!!C.querySelector('[data-is-subscription="true"]'),R=!!C.querySelector(".use-form");switch(y){case"plp":{const k=a(C);B=k==null?void 0:k.productType,N=k;break}case"pdp":{const k=s(C);if(k)N={id:k.id,title:k.title},T={id:k.collectionId,title:void 0},B=k.productType,P=n(C);else{var w;B=(w=I.product)===null||w===void 0?void 0:w.productType.toString(),N=I.item}break}case"add-on":{const k=r(C);B=k==null?void 0:k.productType,N=k;break}case"product_block":{const k=a(C);B=k==null?void 0:k.productType,N=k;break}default:return}!D||!B||!N||!T||!O||o.Kc({website_id:D.id,page_id:N.id,cart_id:O.get("id"),product_page:P||y,product:{item_id:N.id,item_type:B,item_title:N.title,item_collection_id:T.id,item_collection_name:T.title,is_subscription:x},has_custom_form:R,is_quickview:!!P,error_type:A})},v=y=>{y.setAttribute("disabled","true")},E=y=>{const C=y.getAttribute("data-item-id");y.closest(`.grid-item[data-item-id="${C}"].sold-out`)&&(y!=null&&y.parentElement)&&g(y.parentElement)},S=y=>{let{pageType:C,item:O,cartId:A,isQuickView:I,hasCustomForm:D,errorType:T,contentCollection:B}=y;const N=d()(window,"Static.SQUARESPACE_CONTEXT"),P=d()(N,"website",null),x=B??d()(N,"collection",null);!P||!x||!O||!A||o.Kc({website_id:P.id,page_id:O.id,cart_id:A,product_page:C,is_quickview:!!I,has_custom_form:!!D,product:{item_id:O.id,item_type:String(O.type),item_title:O.title,item_collection_id:x.id,item_collection_name:x.title,is_subscription:O.isSubscription},error_type:T})}},990007:function(c,b,t){"use strict";t.d(b,{Z:()=>m});var l=t(153088),d=t(174161),o=t(795478),e=t.n(o),a=t(965885),r=t(312885),s=t(101054),n=t(714487),i=t(553772),u=t(208935);function h(_,v,E){return v in _?Object.defineProperty(_,v,{value:E,enumerable:!0,configurable:!0,writable:!0}):_[v]=E,_}const g=5e5;var p;class f extends(p=d.Component){render(){const{className:v,color:E,decodeHTMLEntities:S,errorMessage:y,flush:C,label:O,height:A,placeholder:I,preserveWhitespace:D,showSeparator:T,tabIndex:B,toolbarOptions:N,itemEditorZIndex:P,type:x,value:R}=this.props;let w=i.lg[x];return typeof D=="boolean"&&(w={...w,preserveWhitespace:[D]}),d.createElement(a.FieldWrapper,{errorMessage:y},d.createElement(r.Z,{className:v,color:E,decodeHTMLEntities:S,fieldIndex:B,label:O,flush:C,height:A,onChange:this.handleChange,onMouseDown:this.stopPropagation,onPointerDown:this.stopPropagation,onClick:this.stopPropagation,pasteAsPlainText:!1,placeholder:I,schemaConfig:w,showSeparator:T,toolbarOptions:N,toolbarClassName:u.NONINTERACTIVE_CLASSNAME,itemEditorZIndex:P,value:R,itemConfigEditorProps:{onClick:this.stopPropagation,className:u.NONINTERACTIVE_CLASSNAME,modalClassName:u.NONINTERACTIVE_CLASSNAME,overlayClassName:u.NONINTERACTIVE_CLASSNAME,pageDropdownClassName:u.NONINTERACTIVE_CLASSNAME}}))}constructor(...v){super(...v),h(this,"domParser",new DOMParser),h(this,"stopPropagation",E=>{E.stopPropagation()}),h(this,"handleChange",E=>{const{onChange:S,isNullable:y}=this.props;let C=E;if(y)try{this.domParser.parseFromString(E,"text/html").body.innerText||(C=null)}catch{}return S(C)})}}h(f,"propTypes",{className:e().string,color:e().string,decodeHTMLEntities:e().bool,isNullable:e().bool,itemEditorZIndex:e().number,flush:e().bool,onChange:e().func.isRequired,placeholder:e().string,preserveWhitespace:e().bool,showSeparator:e().bool,type:e().oneOf(Object.values(i.rg)),toolbarOptions:e().array,value:e().oneOfType([e().string,e().object])}),h(f,"defaultProps",{color:"dark",flush:!0,itemEditorZIndex:g,placeholder:(0,n.t)("Write here\u2026",null,{project:"src.shared"}),showSeparator:!0,toolbarOptions:s.dK.SIMPLE,type:i.lg[i.rg.SIMPLE]});const m=f},960970:function(c,b,t){"use strict";t.d(b,{Z:()=>o});const l=(e,a,r,s)=>{const n=a.value.length;r.innerText=`${n} / ${s}`,e.classList.toggle("error",n>s)},d=e=>{const a=e.querySelector("textarea");if(!a||a.dataset.characterCounter)return;a.dataset.characterCounter=!0;let r;if(r=parseInt(e.dataset.maxLength,10),r=isNaN(r)?0:Math.max(r,0),r===0)return;const s=document.createElement("div");s.style.textAlign="right",e.appendChild(s),l(e,a,s,r),a.addEventListener("input",n=>{l(e,a,s,r)})};function o(e){Array.from(e.querySelectorAll(".textarea[data-max-length]")).forEach(d)}},347816:function(c,b,t){"use strict";t.d(b,{Z:()=>d});const d={GIVEN_NAME:"given-name",FAMILY_NAME:"family-name",CITY:"city",STATE:"state",POSTAL_CODE:"postal-code",COUNTRY_NAME:"country-name",CC_FULL_NAME:"cc-full-name",CC_NUMBER:"cc-number",CC_EXP_MOTNH:"cc-exp-month",CC_EXP_YEAR:"cc-exp-year",CC_CSC:"cc-csc"}},108461:function(c,b,t){"use strict";t.d(b,{Z:()=>o});var l=t(714487);const o={NONE:{value:"none",label:(0,l.t)("None",null,{project:"scripts-v6.block"})},FADE_IN:{value:"fade-in",label:(0,l.t)("Fade In",null,{project:"scripts-v6.block"})},FOCUS_IN:{value:"focus-in",label:(0,l.t)("Focus In",null,{project:"scripts-v6.block"})},SLIDE_UP:{value:"slide-up",label:(0,l.t)("Slide Up",null,{project:"scripts-v6.block"})},SLIDE_DOWN:{value:"slide-down",label:(0,l.t)("Slide Down",null,{project:"scripts-v6.block"})},SLIDE_FROM_LEFT:{value:"slide-from-left",label:(0,l.t)("Slide from Left",null,{project:"scripts-v6.block"})},SLIDE_FROM_RIGHT:{value:"slide-from-right",label:(0,l.t)("Slide from Right",null,{project:"scripts-v6.block"})},HORIZONTAL_CLIP:{value:"horizontal-clip",label:(0,l.t)("Horizontal Clip",null,{project:"scripts-v6.block"})},VERTICAL_CLIP:{value:"vertical-clip",label:(0,l.t)("Vertical Clip",null,{project:"scripts-v6.block"})},TILT_UP:{value:"tilt-up",label:(0,l.t)("Tilt Up",null,{project:"scripts-v6.block"})},TILT_DOWN:{value:"tilt-down",label:(0,l.t)("Tilt Down",null,{project:"scripts-v6.block"})},COLLIDE:{value:"collide",label:(0,l.t)("Collide",null,{project:"scripts-v6.block"})},REVEAL:{value:"reveal",label:(0,l.t)("Reveal",null,{project:"scripts-v6.block"})},CUSTOM:{value:"custom",label:(0,l.t)("Custom",null,{project:"scripts-v6.block"})},NO_ANIMATION:{value:"no-animation",label:(0,l.t)("No Animation",null,{project:"scripts-v6.block"})},SITE_DEFAULT:{value:"site-default",label:(0,l.t)("Site Default",null,{project:"scripts-v6.block"})}}},572009:function(c,b,t){"use strict";t.d(b,{Z:()=>d});var l=t(714487);const d={HOUR_12:1,HOUR_24:2,LANG:{closed:(0,l.t)("Closed",null,{project:"website.business-hours"}),open:(0,l.t)("Open",null,{project:"website.business-hours"}),allDay:(0,l.t)("All Day",null,{project:"website.business-hours"})},TIME_TYPE:{start:"start",end:"end"},MAX_TIMESTAMP:1440}},118415:function(c,b,t){"use strict";t.d(b,{h:()=>l,j:()=>d});const l="cookie-banner-rerender-event",d="cookie-banner-force-event"},702602:function(c,b,t){"use strict";t.d(b,{G:()=>o});var l=t(714487);const d=null,o=[(0,l.t)("Su",null,{project:"website.calendar",notes:"Short Sunday day for calendar block"}),(0,l.t)("Mo",null,{project:"website.calendar",notes:"Short Monday day for calendar block"}),(0,l.t)("Tu",null,{project:"website.calendar",notes:"Short Tuesday day for calendar block"}),(0,l.t)("We",null,{project:"website.calendar",notes:"Short Wednesay day for calendar block"}),(0,l.t)("Th",null,{project:"website.calendar",notes:"Short Thursday day for calendar block"}),(0,l.t)("Fr",null,{project:"website.calendar",notes:"Short Friday day for calendar block"}),(0,l.t)("Sa",null,{project:"website.calendar",notes:"Short Saturday day for calendar block"})]},377688:function(c,b,t){"use strict";t.d(b,{Z:()=>r});var l=t(444867),d=t.n(l),o=t(714487),e=t(762379);const a={};a.TEXT={type:"text",id:null,locked:!1,title:(0,o.t)("Text",null,{project:"scripts-v6-root"}),description:"",placeholder:"",required:!1,text:!0},a.TEXT_AREA={type:"textarea",id:null,locked:!1,title:(0,o.t)("Text Area",null,{project:"scripts-v6-root"}),description:"",placeholder:"",required:!1,textarea:!0},e.Z.isFeatureEnabled(d().VANILLA_FORM_HANDLER)&&(a.TEXT_AREA.maxLength=""),a.EMAIL={type:"email",id:null,locked:!1,title:(0,o.t)("Email",null,{project:"scripts-v6-root"}),description:"",placeholder:"",required:!1,email:!0},a.CURRENCY={type:"currency",id:null,locked:!1,title:(0,o.t)("Currency",null,{project:"scripts-v6-root"}),description:"",currencySymbol:"$",required:!1,currency:!0},a.NUMBER={type:"number",id:null,locked:!1,title:(0,o.t)("Number",null,{project:"scripts-v6-root"}),description:"",placeholder:"",required:!1,number:!0},a.WEBSITE={type:"website",id:null,locked:!1,title:(0,o.t)("Website",null,{project:"scripts-v6-root"}),description:"",placeholder:"",required:!1,website:!0},a.PASSWORD={type:"password",id:null,locked:!1,title:(0,o.t)("Password",null,{project:"scripts-v6-root"}),description:"",required:!1,password:!0},a.TWITTER={type:"twitter",id:null,locked:!1,title:(0,o.t)("Twitter",null,{project:"scripts-v6-root"}),description:"",required:!1,twitter:!0},a.DATE={type:"date",id:null,locked:!1,title:(0,o.t)("Date",null,{project:"scripts-v6-root"}),description:"",required:!1,date:!0},a.TIME={type:"time",id:null,locked:!1,title:(0,o.t)("Time",null,{project:"scripts-v6-root"}),description:"",required:!1,time:!0},a.NAME={type:"name",id:null,locked:!1,title:(0,o.t)("Name",null,{project:"scripts-v6-root"}),description:"",required:!1,name:!0},a.NAME_NEWSLETTER={type:"name",id:null,locked:!1,title:(0,o.t)("Name",null,{project:"scripts-v6-root"}),description:"",required:!1,name:!0,customConstraints:{requireFirstName:{enabled:!1},requireLastName:{enabled:!1}}},a.ADDRESS={type:"address",id:null,locked:!1,title:(0,o.t)("Address",null,{project:"scripts-v6-root"}),description:"",required:!1,address:!0},a.PHONE={type:"phone",id:null,locked:!1,title:(0,o.t)("Phone",null,{project:"scripts-v6-root"}),description:"",showCountryCode:!1,required:!1,phone:!0},a.SECTION={type:"section",id:null,locked:!1,title:(0,o.t)("Section",null,{project:"scripts-v6-root"}),description:"",underline:!0,section:!0},a.RADIO={type:"radio",id:null,locked:!1,title:(0,o.t)("Radio",null,{project:"scripts-v6-root"}),description:"",options:[(0,o.t)("Option One",null,{project:"scripts-v6-root"}),(0,o.t)("Option Two",null,{project:"scripts-v6-root"})],required:!1,radio:!0},a.CHECKBOX={type:"checkbox",id:null,locked:!1,title:(0,o.t)("Checkbox",null,{project:"scripts-v6-root"}),description:"",options:[(0,o.t)("Option One",null,{project:"scripts-v6-root"}),(0,o.t)("Option Two",null,{project:"scripts-v6-root"})],required:!1,checkbox:!0},a.SELECT={type:"select",id:null,locked:!1,title:(0,o.t)("Dropdown",null,{project:"scripts-v6-root"}),description:"",options:[(0,o.t)("Option One",null,{project:"scripts-v6-root"}),(0,o.t)("Option Two",null,{project:"scripts-v6-root"})],required:!1,select:!0},a.LIKERT={type:"likert",id:null,locked:!1,title:(0,o.t)("Survey",null,{project:"scripts-v6-root"}),description:"",options:[(0,o.t)("Option One",null,{project:"scripts-v6-root"}),(0,o.t)("Option Two",null,{project:"scripts-v6-root"})],required:!1,likert:!0},a.HIDDEN={type:"hidden",id:null,locked:!1,title:(0,o.t)("Hidden",null,{project:"scripts-v6-root"}),description:"",required:!1,hidden:!0};const r=a},497147:function(c,b,t){"use strict";t.d(b,{Z:()=>s});var l=t(626818),d=t.n(l);const o=100,e=150,a=67,s={[d().CIRCLE]:o,[d().DIAMOND]:o,[d().BOTTOM_LEFT_CURVE]:o,[d().RABBET]:o,[d().FOUR_PETAL_FLOWER]:o,[d().FOUR_POINT_STAR]:o,[d().DESCENDING_RAMP]:o,[d().DESCENDING_STAIRS]:o,[d().OCTAGON]:o,[d().STEPPED_CROSS]:o,[d().TV]:o,[d().OPEN_BOOK]:o,[d().FLOWER]:o,[d().EIGHT_SIDED_SHIELD]:o,[d().ROUNDED_PENTAGON]:o,[d().GEAR]:o,[d().VERTICAL_OVAL]:e,[d().HOURGLASS]:e,[d().KEYSTONE]:e,[d().VERTICAL_PARALLELOGRAM]:e,[d().VERTICAL_RIGHT_LEANING_OVAL]:e,[d().ARCHED_WINDOW]:e,[d().VERTICAL_STACKED_CIRCLES]:e,[d().POINTED_WINDOW]:e,[d().AWARD]:e,[d().NARROW_HORIZONTAL_STACKED_PILLS]:e,[d().EGG]:e,[d().NARROW_POW]:e,[d().HORIZONTAL_STACKED_CIRCLES]:a,[d().WIDE_VERTICAL_STACKED_PILLS]:a,[d().WIDE_HORIZONTAL_STACKED_PILLS]:a,[d().HORIZONTAL_OVAL]:a,[d().HORIZONTAL_RIGHT_LEANING_OVAL]:a,[d().WIDE_EIGHT_SIDED_SHIELD]:a,[d().WIDE_OPEN_BOOK]:a}},362958:function(c,b,t){"use strict";t.d(b,{Z:()=>d});const d={UPLOAD:1,PROCESSING:2}},59001:function(c,b,t){"use strict";t.d(b,{Z:()=>l});const l={topLeft:"top-left-radius",topRight:"top-right-radius",bottomLeft:"bottom-left-radius",bottomRight:"bottom-right-radius"}},681275:function(c,b,t){"use strict";t.d(b,{Z:()=>a});var l=t(456903);const d="/api/domain-connection",o="/api/domain-providers",a={getProviders(){return l.default.get(o)},identifyProvider(r){return l.default.get(`${o}/identify?q=${r}`)},getStrategyId(r){return l.default.get(`${d}/${r}/strategy-id`)},getStrategy(r){return l.default.get(`${d}/${r}`)}}},87554:function(c,b,t){"use strict";var l=t(153088),d=t(150782),o=t(714487);(0,d.U)(o.ZP)},367915:function(c,b,t){"use strict";var l=t(87554),d=t(463351),o=t(708427),e=t(714487);(0,o.U)(e.ZP)},190255:function(c,b,t){"use strict";t.d(b,{V:()=>e,j:()=>o});var l=t(714487);const d=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],o=()=>d,e=()=>{const a=(0,l.KY)({width:"abbreviated"});return d.reduce((r,s,n)=>(r[s]=a[n],r),{})}},478278:function(c,b,t){"use strict";t.d(b,{Z:()=>ye});var l=t(367915),d=t(936177),o=t.n(d),e=t(461037),a=t(343312),r=t(714487);const s=Ae=>{const Je=Ae.length;return Je===1?(0,r.t)("Please select the {option} option.",{option:Ae[0]},{project:"apps.Commerce"}):Je===2?(0,r.t)("Please select the {option1} and {option2} options.",{option1:Ae[0],option2:Ae[1]},{project:"apps.Commerce"}):(0,r.t)("Please select the {optionsList}, and {lastOption} options.",{optionsList:Ae.slice(0,-1).join(", "),lastOption:Ae[Ae.length-1]},{project:"apps.Commerce"})},n=(0,r.t)("Sorry, that item variant is unavailable. Please select another variant.",null,{project:"apps.Commerce"}),i=(0,r.t)("Sorry, we do not have enough of that item available.",null,{project:"apps.Commerce"}),u=(0,r.t)("Quantity must be a number.",null,{project:"apps.Commerce"}),h=(0,r.t)("Add...",null,{project:"apps.Commerce"}),g=(0,r.t)("Added!",null,{project:"apps.Commerce"}),p=(0,r.t)("Unable to Add Item",null,{project:"apps.Commerce"}),f=(0,r.t)("Unable to Purchase Item",null,{project:"apps.Commerce"}),m=(0,r.t)("Either your session has expired or you do not have cookies enabled. We cannot continue to checkout.",null,{project:"apps.Commerce"}),_=(0,r.t)("Select a denomination for the Gift Card",null,{project:"apps.Commerce"}),v=function(){let Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const ke=Ae?f:p;new window.Y.Squarespace.Widgets.Alert({position:window.Y.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.title":ke,"strings.message":Je})},E=Ae=>{let{productId:Je,selectedVariant:ke,quantity:Fe,additionalFields:Ie,callback:ht,win:me}=Ae;me.Y.Squarespace.Singletons.ShoppingCart.addEntry(Je,ke,Fe,Ie,(Ee,Se)=>ht(Ee,Se),void 0)};var S=function(Ae){return Ae[Ae.PHYSICAL=1]="PHYSICAL",Ae[Ae.DIGITAL=2]="DIGITAL",Ae[Ae.SERVICE=3]="SERVICE",Ae[Ae.GIFT_CARD=4]="GIFT_CARD",Ae}({}),y=null,C=function(Ae){return Ae.ADDING="ADDING",Ae.ADDED="ADDED",Ae}({}),O=t(994336),A=t.n(O),I=t(461761),D=t.n(I),T=t(985913);const B=()=>{if(A().get("hasCart")!=="true"&&!A().get("CART"))throw new Error(m);window.top&&(window.top.location="/commerce/goto-checkout")},N=Ae=>{Ae&&window.top&&(window.top.location=`/checkout/subscribe?cartToken=${Ae}`)},P=(Ae,Je)=>{const ke=encodeURIComponent(Ae),Fe=Je?encodeURIComponent(Je.sku):null,ht=`/checkout/giftcard?websiteId=${D()(window,"Static.SQUARESPACE_CONTEXT.website.id",null)}&giftCardProductId=${ke}${Je?"&sku="+Fe:""}`;(0,T.F)(window.Y)?window.top&&(window.top.location=ht):window.location.href=ht};var x=t(456903),R=t(784874);const w=`/api/template/GetTemplateSchema?type=${R.Z.FORM}`,k="/api/3/commerce/cart/subscription",q=async()=>await x.default.get(w),F=async Ae=>await x.default.post(k,Ae);var z=t(284106),j=t(225840);const X=async Ae=>{let{formData:Je,productId:ke,selectedVariant:Fe,onSuccess:Ie,onError:ht,win:me,pageType:Ee}=Ae;const{data:Se}=await q();me.Y.Squarespace.CartUtils._setAdditionalFieldsFormTemplate(Se),me.Y.Squarespace.CartUtils._verifyItemInStock({itemId:ke,variant:Fe,inStockCb:()=>{var lt,Lt;me.Y.Squarespace.CartUtils._openAdditionalFieldsForm(Je,Pt=>{Ie(Pt)}),z.Tu({website_id:((Lt=(0,j.getWebsiteContext)())===null||Lt===void 0||(lt=Lt.website)===null||lt===void 0?void 0:lt.id)||"",product_page:Ee,product:{item_id:ke}})},outOfStockCb:()=>{ht(i)}})},J="product:addToCart:status",Q=Ae=>{Ae.dispatchEvent(new CustomEvent(J,{detail:{status:C.ADDING}}))},ie=Ae=>{setTimeout(()=>{Ae.dispatchEvent(new CustomEvent(J,{detail:{}}))},1e3)},ce=Ae=>{setTimeout(()=>{Ae.dispatchEvent(new CustomEvent(J,{detail:{status:C.ADDED}})),setTimeout(()=>{Ae.dispatchEvent(new CustomEvent(J,{detail:{}}))},2e3)},1e3)};function pe(Ae,Je,ke){return Je in Ae?Object.defineProperty(Ae,Je,{value:ke,enumerable:!0,configurable:!0,writable:!0}):Ae[Je]=ke,Ae}class ye{destroy(){this.node.removeEventListener("product:addToCart",this.addToCartEvent)}constructor(Je,ke=window,Fe=null){pe(this,"node",void 0),pe(this,"win",void 0),pe(this,"quickViewSource",void 0),pe(this,"addToCartEvent",Ie=>{const{pageType:ht,product:me,quantity:Ee,selectedVariant:Se,unselectedVariantOptions:lt,isInStock:Lt,expressCheckout:Pt,addToCartText:Ce,subscriptionId:je,isQuickView:Le,collection:ci=null}=Ie.detail,Jt=()=>this.quickViewSource==="product-block"?a.Zj.PRODUCT_BLOCK:Le?a.Zj.PLP:ht,Ft=Mt=>{try{const Vt=this.win.Y.Squarespace.Singletons.ShoppingCart;a.Kc({pageType:Jt(),item:{id:me.id,type:me.productType,title:me.title,isSubscription:!!je},cartId:Vt.get("id"),hasCustomForm:!!me.additionalFieldsFormId,contentCollection:ci,isQuickView:Le,errorType:Mt})}catch(Vt){o().trackCaughtError("commerce-merch","trackAddToCart",Vt.stack)}},ti=me.productType===S.GIFT_CARD;if(me.userDefinedVariantOptions.length&&lt.length){if(Ft(a.Ar.NO_VARIANT_SELECTED),ti){v(!0,_);return}v(Pt,s(lt));return}if(me.userDefinedVariantOptions.length&&!Se){v(Pt,n),Ft(a.Ar.VARIANT_UNAVAILABLE);return}if(!Lt){v(Pt,i),Ft(a.Ar.OUT_OF_STOCK);return}isNaN(Number(Ee))&&(v(Pt,u),Ft(a.Ar.QUANTITY_NOT_A_NUMBER));const gi=async Mt=>{const Vt={itemId:me.id,sku:Se&&Se.sku,additionalFields:JSON.stringify(Mt??{})};Vt.subscriptionOptionId=je;try{const{data:Ti}=await F(Vt);N(Ti.cartToken)}catch(Ti){const{response:Ni}=Ti;v(Pt,Ni.data.message),Ft(a.Ar.SUB_WITH_FORM_FAILURE)}},qt=Mt=>{Q(this.node),E({productId:me.id,quantity:Ee,selectedVariant:Se,additionalFields:Mt,win:this.win,callback:(Vt,Ti)=>{if(Vt){v(Pt,Vt),ie(this.node),Ft(a.Ar.API_FAILURE);return}if(Ti){if(Pt){try{B()}catch(Ni){v(Pt,Ni.message),ie(this.node),Ft(a.Ar.EXPRESS_CHECKOUT_FAILURE)}return}ht===a.Zj.PLP&&setTimeout(()=>{e.Z.showAddedItemPopover(Ti)},1e3),ce(this.node)}}})};if(me.additionalFieldsFormId){const Mt={getData:Ti=>{if(Ti==="form")return JSON.stringify(me.additionalFieldsForm);if(Ti==="original-label")return Ce}},Vt=Ti=>{Ft(),je?gi(Ti):qt(Ti)};X({formData:Mt,productId:me.id,selectedVariant:Se,onSuccess:Vt,pageType:Jt(),onError:Ti=>v(Pt,Ti),win:this.win}).catch(()=>{v(),Ft(a.Ar.CUSTOM_FORM_RENDER_ERROR)});return}return Ft(),ti?P(me.id,Se):je?gi(null):qt(null)}),this.node=Je,this.win=ke,this.quickViewSource=Fe,this.node.addEventListener("product:addToCart",this.addToCartEvent)}}},274056:function(c,b,t){"use strict";t.d(b,{Z:()=>o});var l=t(572009);const o={isAllDayText(e){if(e){const a=e.toLocaleLowerCase().trim(),r=l.Z.LANG.open.toLocaleLowerCase().trim(),s=l.Z.LANG.allDay.toLocaleLowerCase().trim();return a===r||a===s}return!1},isClosedText(e){if(e){const a=e.toLocaleLowerCase().trim(),r=l.Z.LANG.closed.toLocaleLowerCase().trim();return a===r}return!1},minuteValidator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"00";if(e.length!==2)throw new Error("Invalid minutes");if(e=parseInt(e,10),isNaN(e)||e<0||e>59)throw new Error("Invalid minutes");return e},hourValidator(e,a){if(!e&&e!==0)throw new Error("Missing hours");if(e=parseInt(e,10),isNaN(e))throw new Error("Invalid hour");if(a===l.Z.HOUR_24&&(e<0||e>23))throw new Error("Invalid hour");if(a===l.Z.HOUR_12&&(e<1||e>12))throw new Error("Invalid hour");return e},getMeridiemAndMode(e){const a={};let r=e;if(r=r.replace(/[0-9]| /g,""),r=r.replace(/:/,""),r==="am"||r==="pm")a.meridiem=r,a.mode=l.Z.HOUR_12;else if(r==="")a.mode=l.Z.HOUR_24;else throw new Error("Unwanted characters");return a},convertTo24HourMode(e,a,r,s){return a===l.Z.HOUR_12?r==="pm"?e===12?e:e+12:s==="end"&&e===12?24:e===12?0:e:s==="end"&&e===0?24:e},parseTime(e,a){let r=!0,s,n,i,u;try{e=e.toLowerCase();const h=this.getMeridiemAndMode(e);if(i=h.meridiem,u=h.mode,u===l.Z.HOUR_24&&!e.match(":"))throw new Error("Invalid format");const g=e.replace(i,"").split(":");s=g[0],s=this.hourValidator(s,u),n=g[1],n=this.minuteValidator(n)}catch{r=!1}if(r){const h=this.convertTo24HourMode(s,u,i,a);return{mode:u,timestamp:parseInt(h*60+n,10)}}return null},parseTimeRange(e){let a,r;try{const s=e.split(/ to | till | til | until |-|—/i);if(s.length!==2||!s[0]||!s[1])throw new Error("Range is not correct");if(a=this.parseTime(s[0].trim(),l.Z.TIME_TYPE.start),r=this.parseTime(s[1].trim(),l.Z.TIME_TYPE.end),!a||!r)throw new Error("Incorrect time");if(a.mode!==r.mode)throw new Error("Inconsistent formats")}catch{return!1}return{from:a,to:r}},parseMultipleTimeRange(e){let a=!0;const r={text:e,ranges:[]};this.isAllDayText(e)&&(e="12am - 12am"),this.isClosedText(e)&&(e=null);try{if(e){const s=e.split(",");let n,i;s.forEach((u,h)=>{if(u=this.parseTimeRange(u.trim()),i=h===s.length-1,!u||!i&&u.from.timestamp>=u.to.timestamp)throw new Error("Invalid range");if(r.ranges.length>0){if(n=r.ranges[r.ranges.length-1],n.to.timestamp>=u.from.timestamp)throw new Error("Invalid multiple ranges");if(n.to.mode!==u.to.mode)throw new Error("Inconsistent formats")}r.ranges.push(u)})}}catch{a=!1}return r.ranges.forEach(s=>{s.to=s.to.timestamp,s.from=s.from.timestamp}),a?r:!1}}},252436:function(c,b,t){"use strict";t.d(b,{AH:()=>o,Ex:()=>h,Hb:()=>m,M4:()=>i,Mc:()=>n,Mm:()=>u,Nb:()=>r,Pb:()=>S,XL:()=>a,YD:()=>s,a2:()=>e,at:()=>g,by:()=>E,rW:()=>p,wV:()=>v,xL:()=>_,ys:()=>f});var l=t(941254),d=t(511556);const o=function(y,C){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;l.Z.track({actor:d.aR.USER,action:d.om.SELECT,event_name:`UserTogglesHeader${C}${O?"Icon":"Element"}`,object_display_name:`show${C}`,object_type:d.$l.MENU_ITEM,object_identifier:"header-option",object_value:y?"on":"off",product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},e=()=>{l.Z.track({actor:d.aR.USER,action:d.om.CLICK,event_name:"UserOpensCartStyleMenu",object_display_name:"cartStyle",object_type:d.$l.MENU_ITEM,object_identifier:"cart-icon-style-menu",product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},a=()=>{l.Z.track({actor:d.aR.USER,action:d.om.CLICK,event_name:"UserOpensSocialLinkEditor",object_display_name:"socialLinks",object_type:d.$l.MENU_ITEM,object_identifier:"social-icon-link-editor",product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},r=y=>{l.Z.track({actor:d.aR.USER,action:d.om.CLICK,event_name:"UserClicksCartIconStyle",object_display_name:y,object_type:d.$l.MENU_ITEM,object_identifier:"cart-icon-style",object_value:y,product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},s=y=>{l.Z.track({actor:d.aR.USER,action:d.om.CLICK,event_name:"UserClicksCartIconType",object_display_name:y,object_type:d.$l.MENU_ITEM,object_identifier:"cart-icon-type",object_value:y,product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},n=y=>{l.Z.track({actor:d.aR.USER,action:d.om.CHANGE,event_name:"UserChangesCartIconText",object_display_name:"cartText",object_type:d.$l.TEXTAREA,object_identifier:"cart-icon-text",object_value:y,product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},i=y=>{l.Z.track({actor:d.aR.USER,action:d.om.CHANGE,event_name:"UserChangesHeaderButtonText",object_display_name:"headerButtonText",object_type:d.$l.TEXTAREA,object_identifier:"header-button-text",object_value:y,product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},u=y=>{l.Z.track({actor:d.aR.USER,action:d.om.CLICK,event_name:"UserTogglesShowZeroInCart",object_display_name:"showEmptyCartState",object_type:d.$l.TOGGLE,object_identifier:"show-zero-in-cart",object_value:y?"on":"off",product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},h=(y,C)=>{l.Z.track({actor:d.aR.USER,action:d.om.CLICK,event_name:`UserClicks${C}IconSize`,object_display_name:`${C.toLowerCase()}IconSize`,object_type:d.$l.MENU_ITEM,object_identifier:`${C.toLowerCase()}-icon-size`,object_value:String(y),product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},g=(y,C)=>{l.Z.track({actor:d.aR.USER,action:d.om.CLICK,event_name:`UserClicks${C}BorderShape`,object_display_name:y,object_type:d.$l.MENU_ITEM,object_identifier:`${C.toLowerCase()}-border-shape`,object_value:y,product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},p=(y,C)=>{l.Z.track({actor:d.aR.USER,action:d.om.CLICK,event_name:`UserClicks${C}BorderStyle`,object_display_name:y,object_type:d.$l.MENU_ITEM,object_identifier:`${C.toLowerCase()}-border-style`,object_value:y,product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},f=(y,C)=>{l.Z.track({actor:d.aR.USER,action:d.om.CLICK,event_name:`UserClicks${C}BorderThickness`,object_type:d.$l.MENU_ITEM,object_identifier:`${C.toLowerCase()}-border-thickness`,object_value:String(y),product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},m=y=>{l.Z.track({actor:d.aR.USER,action:d.om.OPEN,event_name:"UserOpensHeaderSubMenu",object_display_name:y,object_type:d.$l.MENU,object_identifier:"header-option",product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},_=y=>{l.Z.track({actor:d.aR.USER,action:d.om.DELETE,event_name:"UserDeletesItemFromHeader",object_type:d.$l.BUTTON,object_identifier:"header-option",object_display_name:y,product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},v=()=>{l.Z.track({actor:d.aR.USER,action:d.om.REORDER,event_name:"UserReordersPageInHeader",object_type:d.$l.PAGE,object_identifier:"header-option",product_area:d.q5,product_page:d.c5.SECTION_EDITOR})},E=()=>{l.Z.track({actor:d.aR.USER,action:d.om.CLICK,object_display_name:"addElements",object_type:d.$l.BUTTON,object_identifier:"header-option",product_area:d.q5,product_page:d.c5.SECTION_EDITOR,event_name:"UserClicksAddHeaderElements"})},S=()=>{l.Z.track({actor:d.aR.USER,action:d.om.CLICK,object_display_name:"editDesign",object_type:d.$l.BUTTON,object_identifier:"header-option",product_area:d.q5,product_page:d.c5.SECTION_EDITOR,event_name:"UserClicksEditHeaderDesign"})}},582136:function(c,b,t){"use strict";t.d(b,{Z:()=>m});var l=t(714487),d=t(419467),o=t.n(d),e=t(131626),a=t.n(e),r=t(202467),s=t.n(r),n=t(607371),i=t(371467),u=t(963327),h=t(868463),g=t(456903),p=t(537312);function f(_,v,E){return v in _?Object.defineProperty(_,v,{value:E,enumerable:!0,configurable:!0,writable:!0}):_[v]=E,_}class m{clearErrors(){[...this.formEl.querySelectorAll(".field-error")].forEach(v=>v.remove()),[...this.formEl.querySelectorAll(".form-item.error")].forEach(v=>v.classList.remove("error"))}isLocked(){this.formEl.classList.contains("submitting")}lock(){this.submitEl.classList.add("submitting"),this.submitEl.value=m.strings.SUBMIT_TEXT_IN_PROGRESS}unlock(){this.submitEl.classList.remove("submitting"),this.submitEl.value=this.submitText}validate(){return[...this.formEl.querySelectorAll(".form-item")].reduce((v,E)=>{const{isValid:S,message:y}=m.validateField(E);return S||(v.isValid=!1,v.errors.push({fieldId:E.id,message:y})),v},{isValid:!0,errors:[]})}withCaptcha(v){const E=u.getCaptchaContainer(this.win,this.formEl);if(!E)return v;const S=u.validate(this.win,E);return S?{...v,captchaKey:S}:null}submit(v){if(this.isLocked())return!1;if(this.lock(),!v.disableValidation){this.clearErrors();const{isValid:S,errors:y}=this.validate();if(!S)return this.fail(m.strings.FIELD_VALIDATION_ERROR),this.renderFieldClientErrors(y),!1}let E;try{E=this.withCaptcha(v)}catch{return this.fail(m.strings.CAPTCHA_INCOMPLETE_ERROR),!1}return m.getFormKey().catch(S=>{this.fail(m.strings.FORM_KEY_ERROR)}).then(S=>{E.key=S;try{const y=this.getSanitizedFieldValues();E.form=JSON.stringify(y)}catch{throw new Error(m.strings.FIELD_SANITIZATION_ERROR)}try{this.save(E)}catch{throw new Error(m.strings.SUBMIT_ERROR)}}).catch(S=>{this.fail(S.message)}),!1}getSanitizedFieldValues(){return[...this.formEl.querySelectorAll(".form-item")].reduce((v,E)=>(v[E.id]=m.getSanitizedFieldValue(E),v),{})}save(v){const E={...v};return(0,p._5)(E),g.default.post(m.endpoints.SAVE,E,m.NETWORK_OPTIONS).then(this.success).catch(this.fail)}isNewsletterForm(){return!!(this.formEl.classList.contains("newsletter-form")||this.formEl.querySelector(n.Z.NEWSLETTER_OVERLAY_NODE_ID))}renderFieldError(v,E){const S=this.formEl.querySelector(`#${v}`);if(!S)return;S.classList.add("error");const y=S.querySelector(".title");E&&y&&y.parentNode&&y.parentNode.insertBefore(this.createErrorNode(E),y)}renderFieldClientErrors(v){v.forEach(E=>{let{fieldId:S,message:y}=E;return this.renderFieldError(S,y)})}renderFieldServerErrors(v){Object.entries(v).forEach(E=>{let[S,y]=E;this.renderFieldError(S,y)})}renderErrorMessage(v){this.formEl.insertBefore(this.createErrorNode(v),this.isNewsletterForm()?this.formEl.querySelector(".newsletter-form-body"):this.formEl.firstChild)}renderSurroundingErrors(){const v=this.formEl;v.insertBefore(this.createErrorNode(m.strings.ERROR_ABOVE),v.firstChild),this.formEl.appendChild(this.createErrorNode(m.strings.ERROR_BELOW))}renderErrors(v){if(m.isFieldErrors(v))this.renderFieldServerErrors(v.data.errors);else{const E=m.getErrorMessage(v)||m.strings.UNKNOWN_ERROR;this.renderErrorMessage(E)}}showSubmissionText(){const v=this.formEl.querySelector(".form-submission-text");v&&(v.classList.remove("hidden"),[...v.querySelectorAll("*")].forEach(E=>E.classList.remove("hidden")))}hideForm(){[...this.formEl.querySelectorAll("*")].forEach(v=>v.classList.add("hidden"))}redirectToSuccessRedirect(){const v=this.formEl.dataset.successRedirect;return v?(window.history.replaceState&&window.history.replaceState({},document.title,window.location.href),window.location.href=v,!0):!1}getPostSubmitHtml(){const v=this.formEl.querySelector(".form-submission-html");return v?v.dataset.submissionHtml:""}appendAndRunPostSubmitHtml(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const E=this.formEl.querySelector(".form-submission-html");E.innerHTML=this.getPostSubmitHtml(),E.classList.remove("hidden"),[...E.querySelectorAll("script")].forEach(S=>{try{if(S.src){const y=document.createElement("script");[...S.attributes].forEach(C=>{y[C.name]=C.value}),S.parentNode.insertBefore(y,S)}else this.win.eval(S.innerText)}catch{}})}renderSuccess(){this.hideForm(),this.showSubmissionText(),(0,r.scrollIntoView)(this.formEl,!0),this.appendAndRunPostSubmitHtml(this.getPostSubmitHtml())}constructor(v,E){if(f(this,"success",S=>{this.isNewsletterForm()&&(0,i.gW)(),(0,d.invoke)(this.win,"Y.Global.fire","form:submitSuccess"),this.redirectToSuccessRedirect()||(this.unlock(),this.renderSuccess())}),f(this,"createErrorNode",S=>{const y=this.win.document.createElement("div");return y.className="field-error",y.innerHTML=S,y}),f(this,"fail",S=>{this.renderErrors(S),this.isNewsletterForm()||this.renderSurroundingErrors();const y=u.getCaptchaContainer(this.win,this.formEl);y&&(this.submitEl&&this.submitEl.getAttribute("data-captcha-bound")&&(this.submitEl.disabled=!0),u.reset(this.win,y)),this.unlock()}),!v||!E)throw new Error("Invalid FormHandler construction.");if(this.win=v,E instanceof Element?this.formEl=E:E.formNode&&(this.formEl=E.formNode.getDOMNode()),!this.formEl)throw new Error("FormHandler needs a valid <form> for formEl.");this.submitEl=this.formEl.querySelector('[type="submit"]')||document.createElement("div"),this.submitText=this.submitEl.value}}f(m,"initialQuery",a().parse(window.location.search.replace(/^\?/,""))),f(m,"endpoints",{SAVE:"/api/form/SaveFormSubmission",FORM_KEY:"/api/form/FormSubmissionKey"}),f(m,"NETWORK_OPTIONS",{withCredentials:!0}),f(m,"strings",{SUBMIT_TEXT_IN_PROGRESS:(0,l.t)("Submitting\u2026",null,{project:"website.form"}),SUBMIT_ERROR:(0,l.t)("Error processing form submission. Please reload and try again.",null,{project:"website.form"}),UNKNOWN_ERROR:(0,l.t)("Unknown error, please try again later.",null,{project:"website.form"}),CAPTCHA_INCOMPLETE_ERROR:(0,l.t)("Complete CAPTCHA before submitting.",null,{project:"website.form"}),FORM_KEY_ERROR:(0,l.t)("Could not get a form submission key, please try again later.",null,{project:"website.form"}),FIELD_SANITIZATION_ERROR:(0,l.t)("Could not parse the form fields, please check your entries.",null,{project:"website.form"}),FIELD_VALIDATION_ERROR:(0,l.t)("One or more fields is invalid, please check your entries.",null,{project:"website.form"}),ERROR_ABOVE:(0,l.t)("Your form has encountered a problem. Please scroll down to review.",null,{project:"website.form"}),ERROR_BELOW:(0,l.t)("Your form has encountered a problem. Please scroll up to review.",null,{project:"website.form"}),FAIL_MAX_LENGTH:(0,l.t)("You have exceeded the character limit.",null,{project:"website.form"}),FAIL_EMAIL:(0,l.t)("Email is not valid. Email addresses should follow the format user@domain.com.",null,{project:"website.form"})}),f(m,"errorCodes",{401:(0,l.t)("Unable to submit form. Please try again later.",null,{project:"website.form"}),404:(0,l.t)("This form has not been configured yet.",null,{project:"website.form"}),429:(0,l.t)("Unable to submit form. Submission rate limit exceeded. Please try again later.",null,{project:"website.form"}),500:(0,l.t)("Unable to send form. Please try again later.",null,{project:"website.form"})}),f(m,"getFormKey",()=>g.default.post(m.endpoints.FORM_KEY,{},m.NETWORK_OPTIONS).then(_=>{let{data:{key:v}}=_;return v})),f(m,"isFieldErrors",_=>{let{response:v}=_;return(0,d.isObject)(v)&&v&&v.status===400&&v.data&&v.data.errors&&Object.keys(v.data.errors).length>0}),f(m,"getErrorMessage",function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return(0,d.isString)(_)?_:(0,d.isObject)(_)?_.status&&m.errorCodes[_.status]?m.errorCodes[_.status]:_.data&&_.data.error?_.data.error:"":""}),f(m,"sanitizeValue",_=>{const v=_.querySelector(".field-element");return v?v.value:null}),f(m,"sanitizeChildValuesToArray",_=>_?[..._.querySelectorAll(".field-element")].map(v=>{let{value:E}=v;return E}):[]),f(m,"sanitizePhone",_=>{const v=m.sanitizeChildValuesToArray(_);return v.length===3?["",...v]:v}),f(m,"sanitizeCheckbox",_=>[..._.querySelectorAll("input")].reduce((v,E)=>(E.checked&&v.push(E.value),v),[])),f(m,"sanitizeRadio",_=>m.sanitizeCheckbox(_)[0]),f(m,"sanitizeSelect",_=>{const v=_.querySelector("select");return v?v.value:null}),f(m,"sanitizeLike",_=>[..._.querySelectorAll(".item")].reduce((v,E)=>{const S=m.sanitizeCheckbox(E),y=E.dataset.question;return y&&S.length>0&&(v[y]=S),v},{})),f(m,"sanitizeHidden",_=>{const v=m.initialQuery||a().parse(window.location.search.replace(/^\?/,""));return(_.name&&v[_.name]?v[_.name]:_.value).toString()}),f(m,"sanitizersHash",{address:m.sanitizeChildValuesToArray,checkbox:m.sanitizeCheckbox,date:m.sanitizeChildValuesToArray,hidden:m.sanitizeHidden,likert:m.sanitizeLike,name:m.sanitizeChildValuesToArray,phone:m.sanitizePhone,radio:m.sanitizeRadio,select:m.sanitizeSelect,time:m.sanitizeChildValuesToArray,default:m.sanitizeValue}),f(m,"getSanitizedFieldValue",_=>{if(_.classList.contains("section"))return;const v=[..._.classList].find(S=>m.sanitizersHash[S])||"default",E=m.sanitizersHash[v];return E(_)}),f(m,"validateField",_=>{if(_.classList.contains("section"))return{isValid:!0};const v=_.classList.contains("required");if(_.dataset.maxLength){const E=_.querySelector("textarea"),S=E.value.trim(),y=!v&&S.length===0,C=parseInt(_.dataset.maxLength,10),O=!!(C&&!isNaN(C));return{isValid:y||!O||E.value.length<=C,message:m.strings.FAIL_MAX_LENGTH}}if(_.classList.contains("email")){const S=_.querySelector("input").value.trim();return{isValid:!v&&S.length===0||(0,h.vV)(S),message:m.strings.FAIL_EMAIL}}return{isValid:!0}})},968174:function(c,b,t){"use strict";t.d(b,{Ei:()=>n,z0:()=>s});var l=t(415537),d=t.n(l),o=t(723796);const e=(0,o.$S)("GoogleMapsUtils"),a=[null,d().Original,d().Grayscale,d().Satellite,d().MinimalLight,d().MinimalDark,d().MinimalBlue],r=p=>a[p],s={ORIGINAL:1,GRAYSCALE:2,SATELLITE:3,MINIMAL_LIGHT:4,MINIMAL_DARK:5,MINIMAL_BLUE:6},n=p=>{let{location:f,controls:m,terrain:_,labels:v,style:E}=p;return{location:f,ui:{showControls:m,showTerrain:_,showLabels:v,style:a[E]}}},i=60,u=new Map,h=(p,f)=>{if(!p||!f)return;const{timeout:m,options:_={}}=u.get(p)||{};m&&window.clearTimeout(m);const v={..._,...f},E=()=>{try{p.updateUIOptions(v)}catch(S){e(S)}};u.set(p,{cb:E,timeout:window.setTimeout(E,i),options:v})},g=function(p){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!p)return;const{cb:m,timeout:_}=u.get(p)||{};_&&window.clearTimeout(_),!f&&m&&m(),u.delete(p)}},636485:function(c,b,t){"use strict";t.d(b,{Z:()=>a});var l=t(175424);const d="svgPathNew",o="sqsImageSvgMasksFullList",e={baseIDString:d,containerId:o,initialize:function(){const r=(0,l.wo)();if(r){const s=r.body;if(!!(s!=null&&s.querySelector("#"+e.containerId)))return;const i=r.createElement("div");i.innerHTML=e.completedNode;const u=i==null?void 0:i.querySelector("svg");u&&s.appendChild(u)}},completedNode:'<svg height="0" width="0" id="'+o+'"><defs><clipPath id="'+d+'arched-window" clipPathUnits="objectBoundingBox"><path d="M0.495,0 A0.505,0.336,0,0,0,0,0.329 V1 H1 V0.329 A0.505,0.336,0,0,0,0.495,0" /></clipPath><clipPath id="'+d+'award" clipPathUnits="objectBoundingBox"><path d="M0 0.33 A0.5 0.33, 0 0 1, 1 0.33 M1 0.33 A0.5 0.33, 0 0 1, 0 0.33 M0 0.5 H1 V1 H0 Z" /></clipPath><clipPath id="'+d+'bottom-left-curve" clipPathUnits="objectBoundingBox"><path d="M1,0 v1 h0 A1,1,0,0,1,0,0" /></clipPath><clipPath id="'+d+'circle" clipPathUnits="objectBoundingBox"><path d="M0,0.5 A0.5 0.5, 0 0 1, 1 0.5 M1,0.5 A0.5 0.5, 0 0 1, 0 0.5 Z"></clipPath><clipPath id="'+d+'descending-ramp" clipPathUnits="objectBoundingBox"><path d="M0,1 H1 L0,0 V1" /></clipPath><clipPath id="'+d+'descending-stairs" clipPathUnits="objectBoundingBox"><path d="M0.798,0.798 V0.596 H0.596 H0.596 V0.404 H0.404 H0.404 V0.202 H0.202 V0 H0 V1 H1 V0.798 H0.798" /></clipPath><clipPath id="'+d+'diamond" clipPathUnits="objectBoundingBox"><path d="M0.5,0 L1,0.5 L0.5,1 L0,0.5"/></clipPath><clipPath id="'+d+'egg" clipPathUnits="objectBoundingBox"><path d="M0.502,1 C0.366,1,0.235,0.944,0.144,0.872 C0.053,0.799,0,0.715,0.002,0.609 C0.006,0.505,0.042,0.368,0.126,0.24 C0.209,0.115,0.339,0,0.502,0.003 C0.665,0,0.795,0.115,0.878,0.24 C0.962,0.368,0.999,0.505,1,0.609 C1,0.715,0.951,0.799,0.86,0.872 C0.769,0.944,0.638,1,0.502,1" /></clipPath><clipPath id="'+d+'eight-sided-shield" clipPathUnits="objectBoundingBox"><path d="M0.5,0 L0.957,0.065,1,0.5,0.957,0.935 L0.5,1,0.043,0.935,0,0.5,0.043,0.065,0.5,0" /></clipPath><clipPath id="'+d+'flower" clipPathUnits="objectBoundingBox"><path d="M0.622,0.852 C0.686,1.049,0.314,1.049,0.378,0.852 C0.119,1,-0.05,0.883,0.151,0.613 C-0.041,0.667,-0.041,0.333,0.151,0.387 C-0.05,0.117,0.119,-0.049,0.392,0.148 C0.314,-0.049,0.686,-0.049,0.622,0.148 C0.895,-0.049,1,0.117,0.863,0.387 C1.035,0.333,1.05,0.647,0.863,0.613 C1,0.883,0.895,1,0.622,0.852" /></clipPath><clipPath id="'+d+'four-petal-flower" clipPathUnits="objectBoundingBox"><path d="M0.09 0.5 A0.1 0.103 -45 0 1 0.5 0.09 A0.103 0.1 -45 0 1 0.91 0.5 A0.1 0.103 -45 0 1 0.5 0.91 A0.103 0.1 -45 0 1 0.09 0.5" /></clipPath><clipPath id="'+d+'four-point-star" clipPathUnits="objectBoundingBox"><path d="M0.5,0.143 L1,0,0.857,0.5 L1,1,0.5,0.857 L0,1 L0.143,0.5 L0,0 L0.5,0.143" /></clipPath><clipPath id="'+d+'gear" clipPathUnits="objectBoundingBox"><path d="M0.525,0.024 C0.528,0.051,0.567,0.055,0.575,0.029 C0.584,-0.001,0.627,0.008,0.624,0.039 C0.621,0.066,0.657,0.078,0.671,0.054 C0.686,0.028,0.727,0.046,0.718,0.074 C0.71,0.1,0.743,0.12,0.761,0.099 C0.781,0.077,0.817,0.102,0.802,0.129 C0.788,0.152,0.817,0.178,0.84,0.162 C0.865,0.144,0.894,0.177,0.874,0.199 C0.856,0.22,0.878,0.251,0.903,0.24 C0.931,0.228,0.953,0.266,0.928,0.283 C0.906,0.3,0.921,0.335,0.948,0.329 C0.979,0.323,0.992,0.364,0.965,0.376 C0.939,0.388,0.947,0.425,0.975,0.425 C1,0.425,1,0.469,0.98,0.476 C0.952,0.482,0.952,0.52,0.98,0.525 C1,0.531,1,0.576,0.975,0.576 C0.947,0.576,0.939,0.613,0.965,0.624 C0.993,0.636,0.979,0.679,0.948,0.672 C0.921,0.666,0.906,0.701,0.928,0.717 C0.953,0.736,0.931,0.774,0.903,0.761 C0.878,0.75,0.856,0.781,0.874,0.801 C0.894,0.824,0.865,0.857,0.84,0.839 C0.817,0.823,0.789,0.848,0.802,0.872 C0.817,0.898,0.782,0.925,0.761,0.901 C0.743,0.881,0.71,0.9,0.718,0.927 C0.727,0.956,0.686,0.973,0.671,0.947 C0.657,0.923,0.621,0.935,0.624,0.962 C0.627,0.992,0.584,1,0.575,0.972 C0.567,0.946,0.528,0.95,0.525,0.977 C0.522,1,0.478,1,0.475,0.977 C0.472,0.95,0.433,0.946,0.425,0.972 C0.416,1,0.373,0.992,0.376,0.962 C0.379,0.935,0.343,0.923,0.329,0.947 C0.314,0.973,0.273,0.955,0.282,0.927 C0.29,0.9,0.257,0.881,0.239,0.901 C0.219,0.924,0.183,0.898,0.198,0.872 C0.212,0.849,0.183,0.823,0.16,0.839 C0.135,0.857,0.106,0.824,0.126,0.801 C0.144,0.781,0.122,0.75,0.097,0.761 C0.069,0.773,0.047,0.735,0.072,0.717 C0.094,0.701,0.079,0.666,0.052,0.672 C0.021,0.678,0.008,0.636,0.035,0.624 C0.061,0.613,0.053,0.576,0.025,0.576 C-0.005,0.576,-0.01,0.532,0.02,0.525 C0.048,0.519,0.048,0.481,0.02,0.476 C-0.01,0.47,-0.005,0.425,0.025,0.425 C0.053,0.425,0.061,0.388,0.035,0.376 C0.007,0.364,0.021,0.322,0.052,0.329 C0.079,0.335,0.094,0.3,0.072,0.283 C0.047,0.265,0.069,0.227,0.097,0.24 C0.122,0.251,0.144,0.22,0.126,0.199 C0.106,0.177,0.135,0.144,0.16,0.162 C0.183,0.178,0.211,0.153,0.198,0.129 C0.183,0.102,0.218,0.076,0.239,0.099 C0.257,0.12,0.29,0.1,0.282,0.074 C0.273,0.045,0.314,0.028,0.329,0.054 C0.343,0.078,0.379,0.066,0.376,0.039 C0.373,0.008,0.416,-0.001,0.425,0.029 C0.433,0.055,0.472,0.051,0.475,0.024 C0.478,-0.008,0.522,-0.008,0.525,0.024" /></clipPath><clipPath id="'+d+'horizontal-oval" clipPathUnits="objectBoundingBox"><path d="M0,0.5 A0.35 0.35, 0 0 1, 1 0.5 A0.35 0.35, 0 0 1 0 0.5"/></clipPath><clipPath id="'+d+'horizontal-right-leaning-oval" clipPathUnits="objectBoundingBox"><path d="M0.12,0.3 A0.30 0.40, 45 1 1, 0.88 0.7 A0.40 0.30, -45 1 1, 0.12 0.3" /></clipPath><clipPath id="'+d+'horizontal-stacked-circles" clipPathUnits="objectBoundingBox"><path d="M0.668,0 C0.607,0,0.549,0.025,0.5,0.069 C0.451,0.025,0.393,0,0.332,0 C0.149,0,0,0.224,0,0.5 C0,0.776,0.149,1,0.332,1 C0.393,1,0.451,0.975,0.5,0.931 C0.549,0.975,0.607,1,0.668,1 C0.851,1,1,0.776,1,0.5 C1,0.224,0.851,0,0.668,0" /></clipPath><clipPath id="'+d+'hourglass" clipPathUnits="objectBoundingBox"><path d="M0.038,0.196 C0.013,0.134,0,0.067,0,0 H0.5 H1 C1,0.067,0.987,0.134,0.962,0.196 C0.937,0.259,0.9,0.315,0.854,0.363 C0.807,0.41,0.752,0.448,0.691,0.474 C0.665,0.485,0.639,0.494,0.612,0.5 C0.639,0.506,0.665,0.515,0.691,0.526 C0.752,0.552,0.807,0.59,0.854,0.637 C0.9,0.685,0.937,0.741,0.962,0.804 C0.987,0.866,1,0.933,1,1 H0.5 L0,1 C0,0.933,0.013,0.866,0.038,0.804 C0.063,0.741,0.1,0.685,0.146,0.637 C0.193,0.59,0.248,0.552,0.309,0.526 C0.335,0.515,0.361,0.506,0.388,0.5 C0.361,0.494,0.335,0.485,0.309,0.474 C0.248,0.448,0.193,0.41,0.146,0.363 C0.1,0.315,0.063,0.259,0.038,0.196"/></clipPath><clipPath id="'+d+'keystone" clipPathUnits="objectBoundingBox"><path d="M0.8,1 H0.2 L0,0 h1 Z" /></clipPath><clipPath id="'+d+'narrow-horizontal-stacked-pills" clipPathUnits="objectBoundingBox"><path d="M1,0.802 a0.302,0.201,0,0,0,-0.1,-0.15 a0.303,0.201,0,0,0,0,-0.299 A0.303,0.201,0,0,0,0.702,0.003 h-0.394 a0.303,0.201,0,0,0,-0.203,0.351 a0.303,0.201,0,0,0,0,0.299 a0.303,0.201,0,0,0,0.203,0.35 h0.394 a0.303,0.201,0,0,0,0.303,-0.201" /></clipPath><clipPath id="'+d+'narrow-pow" clipPathUnits="objectBoundingBox"><path d="M0.687,1 c-0.061,-0.167,-0.303,-0.167,-0.364,0 C0.267,0.837,0.172,0.773,0.005,0.791 C0.172,0.695,0.172,0.311,0.005,0.215 C0.172,0.233,0.267,0.17,0.323,0.003 c0.061,0.167,0.303,0.167,0.364,0 C0.743,0.17,0.838,0.233,1,0.215 C0.838,0.311,0.838,0.695,1,0.791 C0.838,0.773,0.743,0.837,0.687,1" /></clipPath><clipPath id="'+d+'octagon" clipPathUnits="objectBoundingBox"><path d="M0.30,0 H0.7 L1,0.3 V0.7 L0.7,1 H0.3 L0,0.7 V0.3" /></clipPath><clipPath id="'+d+'open-book" clipPathUnits="objectBoundingBox"><path d="M1,1 V0 L0.503,0.106,0,0 v1 l0.5,-0.101,0.5,0.101" /></clipPath><clipPath id="'+d+'pointed-rectangle" clipPathUnits="objectBoundingBox"><path d="M0,0.326 C0,0.146,0.224,0,0.5,0 C0.776,0,1,0.146,1,0.326 V1 H0 V0.326"/></clipPath><clipPath id="'+d+'pointed-window" clipPathUnits="objectBoundingBox"><path d="M0.889,0.121 a0.495,0.329,0,0,0,-0.768,0 H0.01 v0.879 h1 V0.121" /></clipPath><clipPath id="'+d+'rabbet" clipPathUnits="objectBoundingBox"><path d="M0.14,0 H0.86 V0.14 H1 V0.86 H0.86 V1 H0.14 V0.86 H0 V0.14 H0.14 Z" /></clipPath><clipPath id="'+d+'rounded-pentagon" clipPathUnits="objectBoundingBox"><path d="M0.36,0.037 C0.437,-0.012,0.563,-0.012,0.641,0.037 C0.717,0.087,0.837,0.175,0.907,0.235 C0.977,0.294,1,0.416,0.994,0.507 C0.972,0.597,0.926,0.741,0.892,0.827 C0.858,0.913,0.756,0.988,0.665,0.995 C0.574,1,0.426,1,0.335,0.995 C0.244,0.989,0.142,0.914,0.108,0.827 C0.074,0.741,0.028,0.597,0.006,0.507 C-0.016,0.417,0.023,0.295,0.093,0.235 C0.163,0.174,0.284,0.087,0.36,0.037" /></clipPath><clipPath id="'+d+'stepped-cross" clipPathUnits="objectBoundingBox"><path d="M0 0.33 H0.165 V0.165 H0.33 V0 H0.66 V0.165 H0.835 V0.33 H1 V0.66 H0.835 V0.835 H0.66 V1 H0.33 V0.835 H0.165 V0.66 H0 Z" /></clipPath><clipPath id="'+d+'tv" clipPathUnits="objectBoundingBox"><path d="M0.5,0 C0.768,0,0.894,0.056,0.919,0.081 C0.944,0.106,1,0.242,1,0.505 C1,0.768,0.947,0.891,0.919,0.919 C0.891,0.947,0.768,1,0.5,1 C0.202,1,0.11,0.948,0.081,0.919 C0.052,0.89,0,0.768,0,0.5 C0,0.232,0.053,0.109,0.081,0.081 C0.109,0.053,0.232,0,0.5,0" /></clipPath><clipPath id="'+d+'vertical-oval" clipPathUnits="objectBoundingBox"><path d="M0,0.5 A0.5 0.5, 0 0 1, 1 0.5 M1,0.5 A0.5 0.5, 0 0 1, 0 0.5 Z"></clipPath><clipPath id="'+d+'vertical-parallelogram" clipPathUnits="objectBoundingBox"><path d="M0.806,1 H0 L0.214,0 H1 Z" /></clipPath><clipPath id="'+d+'vertical-right-leaning-oval" clipPathUnits="objectBoundingBox"><path d="M0.12,0.3 A0.30 0.40, 45 1 1, 0.88 0.7 A0.40 0.30, -45 1 1, 0.12 0.3" /></clipPath><clipPath id="'+d+'vertical-stacked-circles" clipPathUnits="objectBoundingBox"><path d="M0 0.33 A0.5 0.33, 0 0 1, 1 0.33 M1 0.33 A0.5 0.33, 0 0 1, 0 0.33 M0 0.67 A0.5 0.33, 0 0 1, 1 0.67 M1 0.67 A0.5 0.33, 0 0 1, 0 0.67" /></clipPath><clipPath id="'+d+'wide-eight-sided-shield" clipPathUnits="objectBoundingBox"><path d="M0.5,0 L0.935,0.065 L1,0.5 L0.935,0.935 L0.5,1,0.065,0.935,0,0.5,0.065,0.065,0.5,0" /></clipPath><clipPath id="'+d+'wide-horizontal-stacked-pills" clipPathUnits="objectBoundingBox"><path d="M1,0.253 H1 A0.168,0.253,0,0,0,0.832,0 H0.168 A0.168,0.253,0,0,0,0,0.253 H0 A0.168,0.253,0,0,0,0.134,0.5 A0.168,0.253,0,0,0,0,0.747 H0 A0.168,0.253,0,0,0,0.168,1 H0.832 A0.168,0.253,0,0,0,1,0.747 H1 A0.168,0.253,0,0,0,0.866,0.5 A0.168,0.253,0,0,0,1,0.253" /></clipPath><clipPath id="'+d+'wide-open-book" clipPathUnits="objectBoundingBox"><path d="M1,1 V0 L0.503,0.106,0,0 v1 l0.5,-0.101,0.5,0.101" /></clipPath><clipPath id="'+d+'wide-vertical-stacked-pills" clipPathUnits="objectBoundingBox"><path d="M0.799,0 A0.201,0.302,0,0,0,0.649,0.1 A0.201,0.303,0,0,0,0.351,0.1 A0.201,0.303,0,0,0,0,0.303 V0.697 A0.201,0.303,0,0,0,0.351,0.9 A0.201,0.303,0,0,0,0.649,0.9 A0.201,0.303,0,0,0,1,0.697 V0.303 A0.201,0.303,0,0,0,0.799,0" /></clipPath></defs></svg>'},a=e},195949:function(c,b,t){"use strict";t.d(b,{Z:()=>u});var l=t(204482),d=t(254229),o=t.n(d);const{isArrowLeftKey:e,isArrowUpKey:a,isArrowRightKey:r,isArrowDownKey:s}=l,n=[1,2,5,10,60],i=10;function u(h){let{element:g,getDuration:p,getPosition:f,isPlaying:m,play:_,pause:v,setPosition:E}=h,S=null,y,C;const O=B=>{let N;if(e(B)||s(B))N=-1;else if(r(B)||a(B))N=1;else return;B.preventDefault(),B.keyCode!==S&&(S===null&&(y=m(),y&&v()),S=B.keyCode,C=0);const P=Math.min(n.length-1,Math.floor(C/i)),x=n[P],R=o()(f()+N*x,0,p());E(R),C++},A=()=>{S!==null&&(S=null,y&&_())},I=B=>{B.keyCode===S&&A()},D=A,T=typeof g.getDOMNode=="function"?g.getDOMNode():g;return T.addEventListener("keydown",O),T.addEventListener("keyup",I),T.addEventListener("blur",D),function(){T.removeEventListener("keydown",O),T.removeEventListener("keyup",I),T.removeEventListener("blur",D)}}},540100:function(c,b,t){"use strict";t.r(b),t.d(b,{AcuityBlock:()=>u,Block:()=>i,ButtonBlock:()=>f,Column:()=>n,EmptyLayout:()=>a,HTMLBlock:()=>g,ImageBlock:()=>p,Layout:()=>r,MarkdownBlock:()=>h,Row:()=>s});var l=t(714487),d=t(784874);const o="https://squarespace-example.as.me/schedule.php",e=12,a=function(){return{columns:arguments.length>0&&arguments[0]!==void 0?arguments[0]:12,rows:[]}},r=function(){for(var m=arguments.length,_=new Array(m),v=0;v<m;v++)_[v]=arguments[v];return{rows:_}},s=function(){for(var m=arguments.length,_=new Array(m),v=0;v<m;v++)_[v]=arguments[v];return{columns:_}},n=function(m){for(var _=arguments.length,v=new Array(_>1?_-1:0),E=1;E<_;E++)v[E-1]=arguments[E];return typeof m!="number"&&(v.unshift(m),m=e),v[0]&&!v[0].type?{span:m,rows:v}:{span:m,blocks:v}},i=(m,_)=>({type:m,value:typeof _=="object"?_:void 0}),u=()=>i(d.Z.ACUITY,{acuityUrl:o}),h=(m,_)=>i(d.Z.MARKDOWN,{html:_,wysiwyg:{source:m,engine:"code",mode:"markdown",isSource:!1}}),g=m=>i(d.Z.HTML,{html:m}),p=(m,_)=>{const v={};return m&&typeof m=="number"&&(v.aspectRatio=m),(_||m&&typeof m=="string")&&Object.assign(v,{description:{html:_||m}}),i(d.Z.IMAGE,v)},f=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"medium",_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"center",v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(0,l.t)("Learn more",null,{project:"src.shared"});return i(d.Z.BUTTON,{buttonSize:m,buttonAlignment:_,buttonText:v})}},583010:function(c,b,t){"use strict";t.d(b,{Z:()=>u});var l=t(174161),d=t(594127),o=t(714487),e=t(457811),a=t(208935);const{ESCMANAGER_IGNORE_CLASSNAME:r}=a,s={cancelButton:(0,o.t)("Cancel",null,{project:"scripts-v6.block"}),message:(0,o.t)("This will delete the block and its content. Are you sure you want to remove this block?",null,{project:"scripts-v6.block"}),removeButton:(0,o.t)("Remove",null,{project:"scripts-v6.block"}),title:(0,o.t)("Remove block",null,{project:"scripts-v6.block"})};let n=null,i=null;function u(g){let{onConfirm:p}=g;var f;!(n==null||(f=n.ownerDocument)===null||f===void 0)&&f.defaultView||(n=document.createElement("div"),n.setAttribute("data-test","confirm-remove-block-modal-container")),document.body.appendChild(n),h({isOpen:!0,onConfirm:p})}function h(g){let{isOpen:p,onConfirm:f}=g;i||(i=(0,d.createRoot)(n)),i.render(l.createElement(e.Z,{cancelText:s.cancelButton,className:r,confirmButtonProps:{variant:"danger"},confirmText:s.removeButton,isOpen:p,message:s.message,onCancel:function(){h({isOpen:!1})},onConfirm:function(){h({isOpen:!1}),f==null||f()},testAttr:"confirm-remove-block-modal",title:s.title}))}},126218:function(c,b,t){"use strict";t.d(b,{C:()=>d,m:()=>l});function l(o,e){if(localStorage){typeof e!="string"&&(e=JSON.stringify(e));try{localStorage.setItem(o,e)}catch(a){console.warn(a)}}}function d(o){let e=null;if(localStorage)try{const a=localStorage.getItem(o);e=JSON.parse(a)}catch{e=null}return e}},187304:function(c,b,t){"use strict";t.d(b,{Z:()=>e,u:()=>o});var l=t(874918),d=t(952552);function o(a){return a?(0,l.$)(a):""}function e(a,r){return a?(d.marked.use({breaks:!!r,async:!1}),(0,d.marked)(a)):""}},865206:function(c,b,t){"use strict";t.d(b,{Z:()=>g});var l=t(568324),d=t.n(l),o=t(912459),e=t.n(o);function a(){let{parent:p,selector:f,minLength:m=1,frequencyMs:_=100,maxRetries:v=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return!p||!f?Promise.reject("[waitForExistence] Called without a parent or selector"):new Promise((E,S)=>{let y=0;v>99999999&&(v=0);const C=()=>{if(!p){S("[waitForExistence] parent does not or no longer exists");return}const O=Array.from(p.querySelectorAll(f));if(O.length>=m){E(O);return}if(v!==0&&(y=y+1,y>v)){S(`[waitForExistence] Did not find ${f} in ${_*y}ms`);return}window.setTimeout(C,_)};C()})}const r=a;var s=t(985913);const n=(p,f)=>{let m=0,_=e()(p[0],`.${f}`,()=>++m>3);if(!_){const v=p[0],E=v.parentNode;_=E.ownerDocument.createElement("div"),_.classList.add(f),E.insertBefore(_,v)}return p.forEach(v=>_.appendChild(v)),_},i=p=>{const f=p.querySelector(".squarespace-opentable-new-age-wrapper");f.classList.add("loaded"),f.classList.remove("loading")},u=p=>{const f=p.querySelector(".squarespace-opentable-new-age-wrapper");if(!f)return Promise.reject("[opentablev2] No wrappers");if(f.classList.add("loading"),f.querySelector("iframe"))return i(p),Promise.resolve();const m=document.cookie.split(";"),_=A=>{const I=A&&A.split("=")[1].split(",");return I&&I.includes("eu")},v=A=>{const I=A.split("=")[1].split(",");return I.includes("2")||I.includes("3")},E=()=>{const A=m.find(I=>{if(I.includes("notice_behavior"))return I});return _(A)},S=()=>{const A=m.find(D=>{if(D.includes("cmapi_cookie_privacy"))return D}),I=E(m);return!!(!I||I&&A&&v(A))};if(window.Static.SQUARESPACE_CONTEXT.website.cloneable&&S()){const A=f.dataset.script,I=document.createElement("script");I.setAttribute("src",A),f.appendChild(I)}const y=r({parent:f,selector:".ot-date-picker, .ot-time-picker, .ot-party-size-picker"}).then(A=>n(A,"squarespace-opentable-picker-wrapper")),C=r({parent:f,selector:".ot-dtp-picker-button"}).then(A=>n(A,"squarespace-opentable-button-wrapper")),O=r({parent:f,selector:".ot-title"}).then(A=>{A.forEach(I=>{const D=I.innerHTML,T=I.ownerDocument.createElement("h1");T.classList.add("squarespace-ot-title"),T.innerHTML=D,I.parentNode.insertBefore(T,I),I.parentNode.removeChild(I)})});return Promise.all([y,C,O]).then(r({parent:f,selector:".ot-select-label"})).then(()=>i(p)).catch(A=>{console.error("[opentable] widget DOM never rendered")})},h=(p,f)=>new Promise((m,_)=>{const v=f.querySelector("script"),E=f.clientWidth>850?"wide":"standard",S=p.Y&&(0,s.F)(p.Y),y=S?"false":"true",A=`${v.getAttribute("src").replace(/&(iframe|overlay|theme)=\w+/g,"")}&iframe=${y}&overlay=false&theme=${E}`;d()(A,{before:(I,D)=>{const T=v.parentNode;try{p.OT&&p.OT.Events&&Object.keys(p.OT.Events.get()).forEach(B=>p.OT.Events.remove(B)),p.oc&&p.oc.events.reset()}catch(B){console.error(B.message)}return T.innerHTML="",T.appendChild(D),!1},success:()=>{try{S&&p.oc&&p.oc.renderUnloadedComponents(),u(f).then(()=>{if(p.oc&&f.querySelector(".ot-hide")){const I=f.querySelector(".ot-dtp-picker");p.oc.$(I).OTdtp("init")}m()})}catch(I){console.error(I.message),_("[opentable] could not reloadScript and reinit block")}},error:()=>{_("[opentable] loadjs failed")}})}),g=p=>{var f;const m=p.ownerDocument.defaultView;!((f=m.Squarespace)===null||f===void 0)&&f.SQUARESPACE_INITIALIZED_ONCE?h(m,p).catch(_=>{console.error(_)}):u(p)}},942703:function(c,b,t){"use strict";t.d(b,{HN:()=>s,ci:()=>a,eH:()=>i,nE:()=>n});const l=".pricing-plan-pricing-options .left-button",d=".pricing-plan-pricing-options .right-button",o="#sqs-paywall-page-root",e=(u,h)=>{const g="pricing-plan-pricing-option-selected";if(u.classList.contains(g))return;const p=h.querySelector(l),f=h.querySelector(d);if(p&&f){const m=p.getAttribute("aria-pressed")==="true";p.setAttribute("aria-pressed",`${!m}`),f.setAttribute("aria-pressed",`${m}`),p.classList.toggle(g),f.classList.toggle(g),h.querySelectorAll(".product-price > div").forEach(v=>{v.classList.toggle("hide")});const _=h.querySelectorAll(".join-pricing-plan-section");_.length>0?_.forEach(v=>{v.classList.toggle("hide")}):h.querySelectorAll(".join-button").forEach(v=>{v.classList.toggle("hide")})}},a=u=>{u.delegate("click",()=>{e(u.one(l).getDOMNode(),u.getDOMNode())},l),u.delegate("click",()=>{e(u.one(d).getDOMNode(),u.getDOMNode())},d)},r=(u,h)=>{if(h){const g=h.querySelector(u);e(g,h)}},s=()=>{const u=document.querySelectorAll(`${o} .pricing-plan-pricing-option-button.left-button`),h=document.querySelectorAll(`${o} .pricing-plan-pricing-option-button.right-button`);u.forEach(g=>{g.addEventListener("click",()=>{r(l,g.closest(".product-block"))})}),h.forEach(g=>{g.addEventListener("click",()=>{r(d,g.closest(".product-block"))})})},n=()=>{const u=document.querySelector(`${o} .product-blocks-container`),h={attributes:!1,childList:!0,subtree:!1},g=()=>{const p=document.querySelectorAll(`${o} .pricing-plan-title`);if((p==null?void 0:p.length)>0){const m=[...p].map(v=>(v.style.height="",Math.floor(v.getBoundingClientRect().height))),_=Math.max(...m);p.forEach(v=>{v.style.height=`${_}px`})}const f=document.querySelectorAll(`${o} .pricing-plan-pricing-toggle-wrapper`);(f==null?void 0:f.length)>0?u.classList.add("paywall-pricing-aligner"):u.classList.remove("paywall-pricing-aligner")};u&&(g(),new MutationObserver(g).observe(u,h))},i=()=>{document.querySelectorAll(`${o} .pricing-plan-description`).forEach(p=>{p.scrollHeight>p.offsetHeight&&p.closest(".product-block").classList.add("see-more-node")}),document.querySelectorAll(`${o} .see-more-text`).forEach(p=>{p.addEventListener("click",()=>{const f=p.closest(".product-block");f.classList.remove("see-more-node"),f.classList.add("see-less-node")})}),document.querySelectorAll(`${o} .see-less-text`).forEach(p=>{p.addEventListener("click",()=>{const f=p.closest(".product-block");f.classList.remove("see-less-node"),f.classList.add("see-more-node")})})}},932465:function(c,b,t){"use strict";t.d(b,{Z:()=>_e});var l=t(743642),d=t(795478),o=t.n(d),e=t(174161),a=t(845076),r=t.n(a),s=t(714487),n=t(685763),i=t(861655),u=t(482053),h=t(338465),g=t(538312),p=t(419467),f=t(79306),m=t(337061),_=t(938077),v=t(683728),E=t(323379),S=t(941254),y=t(511556);const C=Me=>{S.Z.track({actor:y.aR.USER,action:y.om.CLICK,event_name:"UserOpensTextHighlightModal",indirect_object_identifier:y.DN.BLOCK_OPTIONS,indirect_object_value:y.o9.HTML,object_type:y.$l.TEXTEDITOR,object_identifier:"highlight",object_value:Me,product_area:y.c5.AREA_LAYOUT_ENGINE,product_page:y.c5.PAGE_INLINE_EDITOR})},O=Me=>{S.Z.track({actor:y.aR.USER,action:y.om.CLICK,event_name:"UserSelectsTextHighlightShape",indirect_object_identifier:y.DN.BLOCK_OPTIONS,indirect_object_value:y.o9.HTML,object_type:y.$l.BUTTON,object_identifier:"text-highlight-selection",object_value:Me,product_area:y.c5.AREA_LAYOUT_ENGINE,product_page:y.c5.PAGE_INLINE_EDITOR})},A=(Me,et)=>{S.Z.track({actor:y.aR.USER,action:y.om.CLICK,event_name:"UserSelectsTextHighlightColor",indirect_object_identifier:y.DN.BLOCK_OPTIONS,indirect_object_value:y.o9.HTML,indirect_object_type:et,object_type:y.$l.BUTTON,object_identifier:"text-highlight-color",object_value:Me,product_area:y.c5.AREA_LAYOUT_ENGINE,product_page:y.c5.PAGE_INLINE_EDITOR})},I=(Me,et)=>{S.Z.track({actor:y.aR.USER,action:y.om.CLICK,event_name:"UserSelectsTextHighlightThickness",indirect_object_identifier:y.DN.BLOCK_OPTIONS,indirect_object_value:y.o9.HTML,indirect_object_type:`${et.value}${et.unit}`,object_type:y.$l.BUTTON,object_identifier:"text-highlight-thickness",object_value:Me,product_area:y.c5.AREA_LAYOUT_ENGINE,product_page:y.c5.PAGE_INLINE_EDITOR})},D=(Me,et)=>{S.Z.track({actor:y.aR.USER,action:y.om.CLICK,event_name:"UserSelectsTextHighlightEndcaps",indirect_object_identifier:y.DN.BLOCK_OPTIONS,indirect_object_value:y.o9.HTML,object_type:y.$l.BUTTON,object_identifier:et==="round"?"text-highlight-endcaps-round":"text-highlight-endcaps-square",object_value:Me,product_area:y.c5.AREA_LAYOUT_ENGINE,product_page:y.c5.PAGE_INLINE_EDITOR})},T=(Me,et)=>{S.Z.track({actor:y.aR.USER,action:y.om.CLICK,event_name:"userTogglesHighlightBringToFront",indirect_object_identifier:y.DN.BLOCK_OPTIONS,indirect_object_value:y.o9.HTML,object_type:y.$l.TOGGLE,object_identifier:et?"text-highlight-bring-to-front-on":"text-highlight-bring-to-front-off",object_value:Me,product_area:y.c5.AREA_LAYOUT_ENGINE,product_page:y.c5.PAGE_INLINE_EDITOR})},B=(Me,et)=>{S.Z.track({actor:y.aR.USER,action:y.om.CLICK,event_name:"UserTogglesHighlightAnimation",indirect_object_identifier:y.DN.BLOCK_OPTIONS,indirect_object_value:y.o9.HTML,object_type:y.$l.TOGGLE,object_identifier:et?"text-highlight-animation-on":"text-highlight-animation-off",object_value:Me,product_area:y.c5.AREA_LAYOUT_ENGINE,product_page:y.c5.PAGE_INLINE_EDITOR})},N=(Me,et)=>{S.Z.track({actor:y.aR.USER,action:y.om.CLICK,event_name:"UserSelectsHighlightAnimationType",indirect_object_identifier:y.DN.BLOCK_OPTIONS,indirect_object_value:y.o9.HTML,object_display_name:et,object_type:y.$l.BUTTON,object_identifier:"text-highlight-animation",object_value:Me,product_area:y.c5.AREA_LAYOUT_ENGINE,product_page:y.c5.PAGE_INLINE_EDITOR})},P=(Me,et)=>{S.Z.track({actor:y.aR.USER,action:y.om.CLICK,event_name:"UserSelectsHighlightAnimationDirection",indirect_object_identifier:y.DN.BLOCK_OPTIONS,indirect_object_value:y.o9.HTML,object_type:y.$l.BUTTON,object_identifier:"text-highlight-animation-direction-"+et,object_value:Me,product_area:y.c5.AREA_LAYOUT_ENGINE,product_page:y.c5.PAGE_INLINE_EDITOR})},x=(Me,et)=>{S.Z.track({actor:y.aR.USER,action:y.om.CLICK,event_name:"UserSelectsHighlightAnimationDuration",indirect_object_identifier:y.DN.BLOCK_OPTIONS,indirect_object_value:y.o9.HTML,indirect_object_type:String(et),object_type:y.$l.BUTTON,object_identifier:"text-highlight-animation-duration",object_value:Me,product_area:y.c5.AREA_LAYOUT_ENGINE,product_page:y.c5.PAGE_INLINE_EDITOR})},R=Me=>{S.Z.track({actor:y.aR.USER,action:y.om.CLICK,event_name:"UserRemovesTextHighlight",indirect_object_identifier:y.DN.BLOCK_OPTIONS,indirect_object_value:y.o9.HTML,object_type:y.$l.BUTTON,object_identifier:"remove-text-highlight",object_value:Me,product_area:y.c5.AREA_LAYOUT_ENGINE,product_page:y.c5.PAGE_INLINE_EDITOR})},w=Me=>{S.Z.track({actor:y.aR.USER,action:y.om.CLOSE,event_name:"UserClosesTextHighlightModal",indirect_object_identifier:y.DN.BLOCK_OPTIONS,indirect_object_value:y.o9.HTML,object_type:y.$l.MODAL,object_identifier:"text-highlight",object_value:Me,product_area:y.c5.AREA_LAYOUT_ENGINE,product_page:y.c5.PAGE_INLINE_EDITOR})};var k=t(175823),q=t(102666);const F=Me=>{let{backgroundEnabled:et,colorVariableDefault:$t,colorVariableOnBackground:Ki,...pi}=Me;const Mi=et?Ki:$t;return e.createElement(q.Z,{colorVariable:Mi,...pi})};F.propTypes={...(0,p.omit)(q.Z.propTypes,"colorVariable"),backgroundEnabled:o().bool.isRequired,colorVariableDefault:o().string.isRequired,colorVariableOnBackground:o().string.isRequired};const z=F;var j=t(378257),X=t(964364),J=t(520114),Q=t.n(J);const ie=Me=>{let{value:et,className:$t,...Ki}=Me;const{icon:pi,label:Mi}=qt.find(vn=>vn.identifier===et)??{};return e.createElement(j.Z,{variant:"quiet",title:Mi,"aria-label":Mi,"data-option-value":et,...Ki},e.createElement(h.Z,{className:$t},e.createElement(X.Z,{src:pi,alt:Mi})))},ce=Me=>{let{htmlAttributes:et,...$t}=Me;return e.createElement(i.BasePickerField,{...$t,htmlAttributes:{...et,id:"highlight-picker-button"},selectPreview:e.createElement(ie,{className:Q().selectPreview,width:"55px",height:"55px",overflow:"visible",my:3}),optionPreview:e.createElement(ie,{className:Q().optionPreview,width:"77px",height:"77px",as:"label",p:2})})};ce.propTypes={...(0,p.omit)(i.BasePickerField.propTypes,"selectPreview","optionPreview"),value:o().string.isRequired,enum:o().array.isRequired};const pe=ce,ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZpSURBVHgB7ZuLUeNIEIabZ1EFxTmD1UYARICJAIhgIQAeG8FCBNgQACaCNRGcL4LzRrC6DFw8qiie97fdYwYh25Is2Yb9v6opjWzJluZX9/T0jEQIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhEwKU/IBOTw8DLApWQnc58/Pz0Gvc15eXlozMzMt2w29batSqbTkgzGRwkEYFWT16elpdWpqKkCjf9GtdEQqSf6ocKGKi//5hW0IkUP9DKI2ZQIZu3C+SNiuo+F0G8jk0IKQTRV0enq6gf0mxAxlzIxFOIilQpVR3TSh0lpRKJ0GbaExQ/ch9v/rc04J//WXVpxL9aw4LSHObaBcot4Yh6sdmXDaL6HBvqG6I4Mbq+260DBNnPPL+iZ1Wa0innaz+gCl5LnnlaQPFY5tYHOB66yPSsTChUOjbKExDtAI5T6HhSiXsB4VpzEJrsjhXDkeoDIEWh8kJr6voVzgHhpSIIUIpzeLGz3QqsTfpAYBdZR/UK9/tKgO91dWIVHdRFntcVgTQlfPzs5qUgC5C6cWhps6kRh3qC4F7uRYOh38hwvB47ChSdke1DgRQ3iS7byj09yE0xuASzyPcYkqUBUXX/ksYvVCgy4IqF7mW/Q7c6HHeXUDuQhnruOnvHWLf4xgUSwQO5L3AuZmfUMLt7+/ry6iEvlYBTvqJdjS0lIZ3/8tCbi/v/96d3cXJj1P3fH19fWG1hcXF1fhmv+1r75fXV1Fr1NKpZI28m87dxvn1v3PBoHjNm5ubhpx3/USEP/zHX1fRYZgWoYAov2Qt6LpE7Vxenp6OAlWdnt7qwFC3XZ/LCwsBNFj0LDuQQhVNMkRdYtoix20ya68ptnUbZ7s7e0dyhBktjhzj/7Tr5mFraQ+3G9E1PW3zrWuT/Dj42PovnPWpvgWFz3Oxz8H1qMRrlpd4Fujsry8rA/eEUoLlr3mn+df3+zsbOD+V63y4eGh6R3XUmQAZn36G4H7TB/yrMOGTMLFXISKVs5qZb4gvmvMely/88RcZsQdxrpRh39sP9c4CBsm6XW46FMzP1+ztFsmV2kZkMB2Q7O0iQ1ArKGrtnsCIXxvUesnWp5oG2lwIq9us2RRaGqy9nE7rgLXkVuIm4a5ublVtaRoUdcYdzzE0QZquziLgAOUEJZ7LCNE28r6PMeBZWdSkVo47dvEs7aiMgODQAf/U91ftKDf65XJEHva1TO0GwoC7iZ1t3li/Vpou+2UmqQktXA2/dJGM+QyPsIeZRDdpxtCpm6wHLl0Fb9NkzIrKYFY3RsfMI1SKHBxG2msxaJL1685qzuBe21mDTaGpBsT+G2alNQWp3Ng3m7qPxwXEE1D/0A6/dqaWH8Hqzvv1S8WTNfKIm2aiNTCIRPhp2vW5QMAXXakM1PRDqbUUr3+LjBRR4YFIytuP9KmicgSVbYnNK2+asHKyNFBsQ6S44p/nI3BnDA1DMBrWsGYOcTGRZSHGIwPlclIg80kBLYbZhmEpxbOxmtV7yLObWpjpGgEOT8//zumvMllouN3U0zvQn8dv9nstRKbEssby+0euX31AJKBTOM4zfjLq9W1syjjEG8QOq5Dx7+l9V6hP9yUjqnawQpEL9RlRnO7OtWTdTiVZ64ytNxbKOQNPeYqtb3WsmachprWwQXtuORw9wenpiooVQrYewmHrQTYHiZNOPR8XI+lCiFKDU/UxZ8ooHkjddGa040ONao67SVDktcMuPZz6rs33/3BiFY9jRtzhyrWZtyKNrfeJq92yHWxkLlON9CN4haRfgoRbSzmr/YK4o7LWzBHUcvz+gmotJd1Y3upg89JF9IiZl19rROqK7j2svRf1NsywapF3VuhC2LN1+9IJ8MSDDi86a1cVlHfLeFz0x95zf3Z7/lv/WgwEeA6vmBb8ha/JkmJtR9GXPuFjGCt6CiXoKcR0eHeolE3qwntqEtqiZesVfRYf9/eD4gS91la/JdB6jLitaIjE87HW0Ralk7ObpzTK0kJ5XWZfHPcr1+NRbgoMe/DJX7hYlRodFytVndlQkg9H1cE5mIaVro4QaXzFk3gXnKUzitTgSTvfz4dE2Fxw+IFGYH3cbcO0UtJJyv99+0Mt98at3skhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIf8DW1aRzLXg7Y8AAAAASUVORK5CYII=",Ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYJSURBVHgB7ZlLTxRLGIYLPV4SL6cxMTFuGIwLo1GajS4djDFuzIHEjSsGo0uV8wvQXyDyAzgzK3Y4kBAIITAkhAQWMGxgweU0G2AFzS0BwuW8X1HdaQYYJsduGPV9kkpVT1ff6q3vUjVKEUIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIcVOiQqZ+vr6alSulMbGxqz6xcD3WahiKPbOzo5VUlISQ/lzd3dX6pjpZpnic+7cuSqMR0aFxB8qZPABDahsaX/8+FEqZ29vz0Ht4sPG0HbPnz8vgoq4Dj7GVUUKRIqhiuObbLx3Gd7fFoG88zjWNc757dMidOGUES1AcCZWywfOzc2prq4u/cP169fz3mxra6t8Y2PDkfbVq1fjmLl9+fpjEDOrq6tV0r5y5YqNSTJqTv29srLSmNvfsqwYxPhX2pWVlcmKiorlpaWlira2tnhzc7M6iZcvX6pbt26p0yZU4WSGYhBUmLx582YUgmkLnZycXB4cHCz42vX19ey1a9fSmCzivhsuX76c9iYB3lVcXTyVSn2SYzxDQbSEtC9cuKCKndAtDjM+jcoyVhY7qo/M0NevX/vHCwsLamBgQLdlBssgeqAtsSIu7aB1ev0wUZzt7e0sRJhdW1vLTk9PZ8fHx/1+sLg6cXXyLhDx+/v37x28m7g/a2xsTPe5ePGivl/gmQfeD/f1PcSzZ89UaWmpfibK7KVLlxx4Ae32TRHcqENAqMLhZR1UNcHfZGar/UAdMwG8TGojiHarOUIdOD6OQL+YKermzZuqvLxcPX/+3MUEyuJZ/agr5ufnre7ubrW5uWlPTEzY9+/f12Jks/u5k23bh55pjuU+GVy3jHat/NDT01OFazPqjIkixh3gpMxSsrTZ2dkEml/lGK4sidgkAvvC/g/E4uOo4xJTb9++rUQsscTh4WF148YN38Lv3r2rz6l9kUTsMVhQBsdZMxF1HFRGuGIhcuFOQlyKxDAMlj5ubW394sUhwWR2uiC5iCszgIuLi9pqchFRxPXl8vjxY+2S5bre3l5JerRVPXr0yMHpVFNT02f1E3G6OewxBLPFYBaZy8OHDxOwzn/y3StflidCt7e3a9GO6KvdIup+xMVM0FMEM0/Uv4er/FFgcZJISFZYC4sRt6p/LyAOekJ4blPjiSaI9QWEs0z2WS2ZMdagksRkUNoQC92RkRFVTBSdcPfu3bPiAINeiyKDaB3VLzf7VPsL/DT6S4xKe/HJA8uK6v7+/u/SFlcqAnrx7hgLjeH5CSl37txRnnAPHjywh4aGMuqMKTrhsAjuO06sXMSiJHOUZOKk7aSOjo6npunA1VVBPBHRliTl1atXLtL6gp5ZVlb29cmTJ588a8RPmbPY/TlT4Tw3iJ2UWknXBZNNnggsoDLr5fMngBiVwHPqpQ2xdfKDxXgNfhuFiFZLS0vy7du3KVmQo8tT41rzvYdvjXLw4cOHDKo2xMZDlh4Vpy5cMGZ5luVllMcgszkl7g+uTfprdzc1NWVh8GNHXRBMbkxi0WAOk9gOS+qbuq6DBf0Xtb8Mqcf21qzZEmvMeU+x1LzLEm/pgf5fJTai3WbcdUZFxKlklbJWw0fJ1pIMxKFBkDTd25mQHQvELl+s4McXslcJHAhQ7h3IbolJOhzEtarcjBXn+8zAuzhfeVRGiwW6PTMzo/c8X7x44WJdWJBXkGdG5VIjszgRC64ngeZfEC1e6HXY5ajp7OxMqxAQoY1oksbXHSWK2RITUSzEvQb0qcvt4ziOP+CYYDXv3r1TBVqj71LxHkkc16mQiOL/OD8jVPnjhKAzQZRUlG4lSry/fjBJa4PLjlzC/j8udOHg4z+jasjXR7JBzPRv6owysqgwf7IGY2PMnHKxM1OqQiR0V4mZlQwkAz5mMSyZV/JXEiuI+a60KV6Ck1D7CVaoRJKcID32Az7KNxHztNLk34VIkhNYlaTZX37WuEUIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEJIAfwHycrwBMUXntsAAAAASUVORK5CYII=",Je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASRSURBVHgB7djNSiNZFMDxaysifmZExIVgKYLgpjMLQXBh3Kg7E3Df4wPo2E/g+ARt+wLjA4im3ehGE0VEV51e6NZaCood/ADxc84pb5qadKlJJ2PU+f8g3Pq4VQl1cs69dY0BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAiZWbAk1OTjq9vb1me3v7wuDZlJkCTUxMfJUmLJ+0fNy7u7t0WVnZN2nd8vLylBxLzczMpA2KqhiB+y5N6IluaQlkioAWT0GBkzIZur29/W5+nWaoKwFdf/funQbTlWCmDJ5UaOAcCdyibDrm6azL1Y/slGAmDcEMVHCpzNDsM/djnWZhWB7+e92WAHjH/H0PDg7MyspKTvcdHR01tbW1XjD39/fTGxsb0cf6S7/k6enpgG7X1NSEpSx/tac+npyczGT3D4VC+ufbt9fG5Nq4/9hTpN/A2dlZ0jyzClMkdrxK2t24/5wE1Qvezc2Ntv22dUzu9A8Qqa6uNvk4Pz9P1dXVxeVaDfZUVVVV/OLiwvX3kQefsJuuBs28EkXLuHzJQ3Q6OjpCra2tjjywD7u7u14mDQ8Pa4b96Off9mdqdj+lM1r5U3xraGiY0wmQlljJHq0AmnWOPxtVfX39lDR/ySd9eXn5uz+o+vsy2xUVFY6U7YT9jtjV1VXK1y+tzDMrWeD8JACRzIPp6+uLdXV1aSZEtNz6S60/cLaEPnVrr8S6rmvW19cj9phXMrPKYWAZzfD3LVVpzFa0UlksiUQitby87BpfubWl1pEH9kHaaB6380pse3u7OTw8NHt7e3rsk2Tr+62trYjtM/dY0F6qF5dxUrLas8ehoH6dnZ3Tzc3NbTLuRbSUZfo0NjaaysrKwO9ZWloyx8fH3nn5Hi9jh4aG0tIm5fS6La/J7OteYsa92sA9pKen53N3d3ebLbGO/5w8cC94GjSl42RLS8tP99Cx0L5bJmU3NTc3F6JUFo8bdHBnZye+urqa1G19z5QmrOOltP26nQma0uwLCpyWV2kicp1OXszIyEhqcXHRO9fU1BTSP0CpvdqMe6xfEP/s0tyvq3oTnoeyzk8DNT8/b3z9dVaZychkKZbuXnPG5cVmjyMfV4I+IOOcplB4c3PTDA4OfpT3vf6g8voA7aeZ/KfuyHrtswfyfxE4SbY/5CFP6raMX9OaqfL+FdMMlGwKLSwstMnMMqbnfeVVZ6+6+hPO4Sv+Fcjx8fGkXbKLB012iuHVlkqdJFxfXwf2819vZ4R6jWPup/5jmXPyAq7B/GR3A9/ldClP3gOja2trf+t+LqU1m052pPny0Kz1V7y5WaVwJQDtmR0pgYt2ycsrkdn3lvMJOxn5afUkw/86IK8bsWg0avwTHpMfXRRIShCnC1k8f9OlUgNtg6YPeiwoKPIAx+ykJSTj3pT0GXvsnkdHR2mbNd4CgV1cj+QRyJD9TZ9NAV5Exr0lWWOkBtIJ6JaenZ39zRSAwP3HbCAjsvg9YkuyZugXCVw+S3coNQlkxK69AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABy9Q/5Kn4pW7Sj0gAAAABJRU5ErkJggg==",ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKfSURBVHgB7dmJbRpBFMbx4RQShygBd0AqCFSQuIO4AeRUYLkCEhqADkwHoYPQQTYdIA4JceZ79q61wuD4EjDw/0krhtlZC+3befNm7RwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAt0i4AygUCrVkMvnrJWNns9nFdDoNXnrder3ujUajurXz+Xw1lUr9Dk99Hw6HPzbHl8vlymq1+hNee6lru/G+/9G4+ng87rk9S7oTNplM+gpGN/x6k8vlKptjdOOjByGwoDlPpN0B2BOqm3gRfVe7phvYtrY9wYvFIojORbNt0+a4XTTjrjS2qmYlk8m09ffq0blSqXRj/ToGmtmP/YPBIIj/vnQ6XYlmus3K+Xzej/32gTtXlgJ1E9d2bJsVrx333HU6rq3P0uFm3y7xsfa33BE46VQZCdegn+HXpgJRi6XIzra179gdJFV+BKW9qqWwzX719ZXqnqQvBedaM+azmlUF7U6fZR2BUuSt85C3gUskEnc6nvRr3bO1qrftGq1TlwqaVZkWNFsnr3atocfO28BJ4N6mHDUUSCtaes5D3gbOqsDXzBata+XYumap1ALYVLHRP8Q+7L3OojgxClpU+tu69kmf9yW9Zl3bguo8cxaBU1y+6eO+5Nc+7NZmqq137mHmVcKgesXbVGkVpfZyW8/FU2j4+ioKTEdvRzrWsE22qkyrKJs6rOL869O2wNvA2ZuMbDa77VSgwD2+9Vgul01VnxW3pfS3QBWLxS86X3MPr8S6vlSZJ50q7S2HgvLV2rtKf3sl5sJiRQ+CdykTwD7s/f9xjUZj7U5Yq9Xayz09m33cqSFwniJwAADgqLCP+2Ds4/AsAucpAgcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACP/AOO+hKqcql4GwAAAABJRU5ErkJggg==",Fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOxSURBVHgB7dqLURpBHMfxFdFxxkfoIGcFIRWIFUQriDZgSAXGCiA2IB1IKghWEDrIWUGIjxnHF/n9Yde5ICSgwnH4/czs3N5L4P63+9/b0zkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATzHnUrCyslLK5XLfhzn2+vp6/erqKh72vHa73Tg/P9+0+vLycnF+fv6H3/X57Oys2nt8oVCI7u/vf/pzt3VuPbntf3Tc5sXFRcNNWM7NsMvLy6aCUfer+0tLS1HvMbrw4UaILWguI/IuBXaH6iKuh3XVS7qAR1a3O/j29jYO+0Jr69V73CBqcbs6tqhqtLCwcKS/txn2ra2t7dt2lZZa9sP2VqsVJ79fPp+PQku3Vnlzc9NMfPeWe62sC9RFbFvp1ypGPe5f56mUbZt1h73bBkkea3/LTYGZ7ioDn4O++tWKAlFKdJG1frlv2qXSVb4EdXtF68J6t2tbU13do+5LwSmrxWyoWlTQjrUsqMTqIg9cBmU2cHNzc8cqj7Yr71muavQ7R3lqW0GzUaYFzfLk7qAcOu0yGziJ3dMUQkWBtEFLw2VQZgNno8BRWovyWiGR16wrtQBWNNhopvEc9lyvYnBiFLQw9Le89l7LzpBere7Iguoy5lUETnHZ0aIz5Ndz2IG1VMt3rtvyIh/UTMlsV2kjSj3L9d2X7EL99FUITE2zIzWr2EO2Rpk2oqyo2IjzNEuPBZkNnM1kLC4u9tsVK3APsx53d3cVjT4j12fob4FaXV39oP0l150Sq2dllDnTXaXNcigoW1YfNPS3KTHnByu6ETLXZQKYhFTexz1HuVyOXPcZLCytG+zU1S2+8euFsM/nt6SHfUNq+dKpa1TaqSvHxqqf2rq629gf06xWqxN5WzBVgVNQQkBsPjHSRX9rQdDSZjhGveBpaer7WvmmII7t/V5qgVOQLBhF/67MJn8jl43AjOLL4eHhWCaxJ/Y4oEDZq5QNdS020iv67mzW2UN/9gJnrUqB+qSyFQLVb0Z/RLHzucbyjG2wXGPLsO7+zktxz/mtUfKQ777DTVZIlpBb9fnv9LtsW7H3s9yYjLvF2Y/aGeF4+6Gx5Qid91sl9onfil3w2E2YD/JQAdjb26tp8dHq9k9L/hlxLMae4/Rjfrn+uctGZU0tT3xwmmkE5iX5Ea+bxO+YROBqrnsXttSS6ionqjeyHqS0jX1worxjE7c1BarhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAeP0BOLin5ahlRlQAAAAASUVORK5CYII=",Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATbSURBVHgB7ZqLUetGFIaX5zDDY0QFERXEqSByBZgKLhQAmAqwK8BAAfhWcH0ruEoFcQfRrSAKjxmGZ/4fVkTZu5bsxMYI/m9mR2vp11ras+fs2bWNEUIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQ4h9mzBRYWVmJZmdnvw2jvbm52bi+vk6Gve/x8TG+uLios768vFybm5v73V46OD8/77j6IAjCh4eHP+y9W7i3lz9XBnT1y8vL2Lwys+Ydc3V11Ycxevbj4dLSUuhq0PHZQEhoNFMR5s0U4AhFJ25kn1GP0IFnrHME393dJdm1zNtcXN0g4HE70NZQDRcWFs7QXj27tra2dsjzKCk8++V8mqZJ/vnm5+fDzNPplbe3t/3cs6fmo8IQiE58ZPF5xai6ovtQmjzHcOieG0Rey7bMG+Bdh8oMOwcd249HMESUC5Fd39z31plKqBwHCHs1hjD3PM71Eep+CF8wThMe8yuqNRjtC44BSoIQ2TYVpLKGm5mZ+YLyw3nMe5yrYt89mKe2YDRmmTQa58mdQXPoW6eyhgOJ+W8EWQWGZNISmwpSWcMxCxzFWzCvBbl5jaGUBjxCstGfxjrs//IhkhMCo2WpP+e1X3B8SunhdWc0qqkYH8JwsMs2Dk8pP9ZhbXoq5zvz7HmhNWqlqGyoZEaJtZz3Wj6E2u2rzDBd7I50WeEiG1kmM8ojFGac36u0LKis4biTsbi46LuUwHAvux739/dHyD5D40n9aajV1dVNXI/M85ZYrypZ5rsOldzlgFEarA9K/bklZmyygoFQuZAphHgNpvJ7XBnNZjPEgfuJIbLABOEs7nQ6SYGeC+lapj89Pe2WtD+0HlouFWqYK2sIuwHm1j6epTeCvgd934yZN2G47GXRkZyPPpnc7gbhj6Po3Lqjj3B+E6Xh0feg33L0DXRmloi467b2yclJK6+HdhtV6mue9nfyxuZAg75h9ZHTNhOpOowXmzEyVcPhhaNBxnLBy6+b55G8P6Dz83CdxkU2jfXJ15l5ODDg1Vs5YxXqcb2LcoBn38e9UZneOANjHLz6coBhCi+8ySqOw+5YpPavBIFvY9lDMIqeXgX9n0O2TUM3ULbtvaV6DKKuGTOv4nFO6IkGyBJci32hzwe9BPrv5tlbS8npN4dtH4d0CO8mKfRP85j7fm5YHRcT9bgsFKIwXPlenuunz5zA+cH+faGok6g/ph7an1Ev3OmwxvoN+g6fAadaRe1bY31F2OyifojSLGvf6nuo7zt6GvNgEkYjE1mA02C7u7vf7G78vvl3Z/GFYk7YiPvrKE0mGVYbeprLjJXpW/BeLpS7xm+EFz0TGhoNev5w2inQt6HboJ5GwLPEBUbrW/261cd8dkf/NMdOymhkYh7nCRmxsaMZGVbqXPvLvb9IbzwGsAlG283eeO/e3l7oyFOrP/Zke/yunzznPtvU3tUnzvNw0LQ8zzxWJjbH0eNsKj3ohV/gHJj7H+Nx2drHhmB6aOZdnaKOyunZ5tcyPQzdwuGwZPDk2+d0cIZ2d4rWeJWA2aNdP01Mb0ZgFD2fg8Y2IzDKswshhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEeF/8DYlKxVyyJ3JoAAAAAElFTkSuQmCC",ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQ+SURBVHgB7duLbdtGHMfxv58w4EfUCapMUHWCyhPU2aBZwFUnCDKBXXgAewM7E1QbRJ2gzAaMH4DhZ39/6k6laCmRXFEmre8HIEgdKUHkn/e/4+lkBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADlWrI56XQ6Ta1a9/f3zaWlJV/ePDw8+Lqh8kY4rDnhxyX2PE2b8jMfHx/z5eny8nKqsq++rXW6srLi+9OwJIeHh6nNQSmBU5A8EC0FZk8n95OC07L/gvPaZQH0gOu8/1agE+sHtGsztGolUK061Zdu+7bWtmCymzbcrHu6eb3Mg/mDzdCylcDvNMOAal/PZqyUGqf0cKY77fdCcZZCFNSeTuRLSCFZWVib0kkyyeeH9vI50nFt0Dc+M1+etcfKKA1vm7X8qPPMyrzdtjFtqPZ9tRkrrY3TCX3W5icFyO+27qRBqbvYvmvxa9DyNl4dmE86/xMDUFMv0uXb2tpqK4X+NcmxNzc3b6+vr5NJ36fU1L24uNj17c3NzZbS1Oew64/z8/PD4vGNRqOplPZPeO87vfcsX/Y9Om738vKya3NWSq+yKq6urrwjdBZeftjY2GgWj9GFjzdC4kGzmiilV/k9fofqIr6Nr7Xd1gU89m2/g+/u7pK4L9a2ouJx46jGvfdOgjaba2trx/q83bhvZ2fng/V7gqlq9qA8TdMk//1WV1ebsaZ7rby9ve3lvvtcRkoqyVOgLuKjL6NqxbTHfet9Wjpe5umwWDZO/lj/LKuAV50qo9AG/RleHigQ7VyKPBnV9lXdi6TKWVDaa3kKK5arrKdU9yR9KTgd1ZhfrD+Gemr9h+lEKfKj1VBtA6fRiNNR46Bq97yt6o56j9qpd2FgIBvw1vb7cW1o1dU2cPb8n3YGv1IokN5p6VoN1TZw3gucpraoXWvk2jVPpR7AA3U2ei/xHPZ/LUTnxClosevv7drPWmddetW6Yw+q1cxCBE5x+U2rrMuv57CPXlO9vbN+zWuGoNZKbVOl9yj1LDdyXz6FhuGrGJgTjY6c+IY/ZKuX6T3KAy3e4/xSp8eC2gbORzLW19dH7UoUuMGoh347Owi/lT3p+nugtre3fw2/1vuQ2FldepmvOlX6KIeCsufb47r+PiRmobOiG6F2KRPAPFR6ClZhHkjczs/DtDj/w6YQ5kPmh8XivMih7SpPtyhrzokP4rYLxX6B3+QLfEJs9iWGJ8UOBaYiYjCzSbA2emJsnPg0OL7MwJfSqwxBe9LQ6wSHXtdozuXgZorfOX8uXhbmTw7Z39+Px3aPjo52bYYWZuTktan6c1wSN/Jz+MOczFiepSubzlDajinbPfO/DHNX1oTYbjF1jOgQuCSshzoH8/rjxKRynaS4zoKbC3gj/onFX4QH/nx6nfmEWJTMJ8iGSbIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAovoXtVXq4WxH2J4AAAAASUVORK5CYII=",me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAPISURBVHgB7dqLURpBHMfxxdc442Mo4VJBSAXRChI7iA04WIFagWQsQDrQDkIHIRVk7YD4mHF8kd8fd8mJh6I5Hgffz8x5x97iAP/b/f9vwTkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgn5Ibg9XV1Y25ubkfg/S9ubn5cH197Qd9XrvdblxcXGza8crKSmV+fv5nOLV7fn5e6+1fLpeTh4eH3+G5W3ruabrtNeq3eXl52XAjNuem2NXVVVPBOA0P95aXl5PePvrg44XgLWiuIBbcGNgVqg/xQ3ys4w19gMd2bFfw3d2dj+fiaOvV268fjbht9a3oMFlcXDzW/9uM59bX1/esXVtLI7vb3mq1fPr1LSwsJHGk26i8vb1tpl57y80qmwL1IbZtyxoVb+330vO0Va3NpsPetn7Sfe1/uQkw1VNlFHLQ9/DwUIHYSE2R9azcN+nGMlXmQdNexaaw3na1NTXVPZu+FJyqRsxnHVYUtBPty9q8psgDV0CFDVypVDrR9qxdec9yVSPrOcpTWwqaVZkWNMuT2/1y6KQrbODEu/cpxwMF0oqWhiugwgbOqsC3jBbltXIqr9lUagE8VLHRHMd92P+aieLEKGix9Le89kn7TkmvUXdsQXUFMxOBU1y+adcp+XUfdmAj1fKdexx5SQhqoRR2qrSKUvdymefSU2hYvoqBqWt1pG4HdpOtKtMqykNtVnGeFem2oLCBs5WMpaWlrFNegeuuetzf3x+q+kxcRulvgVpbW/ui8xvucUnstChV5lRPlbbKoaB8teN+pb8tiblQrOhCKNyUCWAUcv8+rlqtJhnNWW1ll7oZzqL8VNZUl2uprqqypekxa0W/FbY0H8/VarWJ+hYgt8Dt7OzsazcLOcJra9kFYHsVSXb8J7aFi8LHvgq4d0NQ5CWvcUnsT1wnVbC6J6xNRdCTzrqgbdfUOdt28xq5wwic723Qm+u0hbI8cbOnos/AvpX4peNc7hVH9psTXXn2G47EFUvMezYN+tLjMLNVl/gThyTk4UTnP2pvi9Z9c7L6bB8dHdVdDkYSOBUs6S8uC++lAOi9WuA6P5XQe05Cf8t9TU2TDZeTUeU4W9D1brAR58P+1apzXMLIyhRyWMMN+zW4EQpXY+KeBqQ7HaUTt6ZW+8Kz4vLRLfVjvjWa8rx7I6sg9bz9cd8ejLSqDG+2OWD3M9c/cN6FvBPK8bNUKR7L8WcXwzSZ2NsBKwCUI7wFRwHxLgRjWPdFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC811/Qgb7c1wIRKwAAAABJRU5ErkJggg==",Ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAK3SURBVHgB7dg9bhpBFMDxAWPLkj+EXLnEkg9AGlcubFd0iSUOEF8AOSewOIEjLoAPQIGoqIgLKpq4ojXpqAjiQ0J85r2FJSuyEGNIYOH/k1bMzs4gNG/fMDPGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAL/5zAocHh5e+f3+b29p2263z1qtVumt/QaDwXO9Xr/W8sHBQXhnZ+f76NGXWq32dbJ9MBgM9fv911HfW+mbdtb9jbS7bjQaz+Y/85sN1mw2XyQY6dHtw/7+fmiyjQy8/SKUNGjGIwJmBfQNlUE8s++lfCUDmNSyvsHdbrdkP7OzbdJku2kk4+6kbViKod3d3aR837X97Pj4+EHr5apKZo/rq9Vqyfn7AoFAyM50zcpOp/Pi+O1Vs610CpRBHOjllhXztpvVT657rdPpcLJuGmdb/S6zBpb2HxeLxQbmncrlsslms1Y5Go3qQC/Uzk2hUDDFYtEqRyIRk8/nNfPN+fm5uby8nNlX26VSqXHf09NTs6hEIrHQ2K9kqlyGSqViDeikk5MTs7e390f9xcWFFXjtl8vldNFjBT4cDhsv8mzgdPDdzMqIm5sbk8lkrKApzbR5snadeDZw7x1wO2hKs28Z097W+teLEyULjKD0ex31/znPYmMdFycbvY9zki2BvfQvSdZ9kE9rSS/L/KQG1XjMVgRO4vJZPqwlv+zD4ro3lIDdyq3uwUKjoHqKZ//jdFMs06XrM+emfXR8ZQfmSU5HnrSgm2yZ+uJSfJTrXso/3I7E1pVnA6cnGW7LflGSwI1PPXq93qPP5wuZ4RQZdzbUQB0dHX2U51dmeCSWnnZSs242eqrUhYQE5ZOWJevu3IKiR2JmOGUG5UXw3JQJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAqF+QbRz9mUdIxwAAAABJRU5ErkJggg==",Se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKVSURBVHgB7dmPbdpAFMfxgwBC4o8YgWxAJyhM0GaDZgGUThBlAloWgA3CBmWDskHdDRB/JMTf/l5iRxaBNkmrmjPfj2RxnM8R8vO9e744BwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAtMi4B5XK5mc1mv71k7HK5vFwsFsFLr9vtdsPpdNqydqlUalxcXHwPT32eTCZf9sfXarX6drv9EV57pWsH8b4/0bjWbDYbuv8s61JsPp+PFIxB+PW2WCzW98foxkcPQmBBc57IuQTYE6qbeBl9V7upG9iztj3B6/U6iM5Fs23f/rhjNOOuNbahZj2fz/f091rRuWq1emv9Osaa2U/94/E4iP++XC5Xj2a6zcrVajWK/faxO1eWAnUTd3YcmhWvHfe763TcWJ+lw/2+Y+Jj7W+5E5DqVBkJ16Cv4deOAtGMpcj+obXv1CWSKv8Fpb2GpbD9fvWNlOqepS8F50Yz5r2aDQXtXp81HYFS5J3zkLeBy2Qy9zqe9Wvds7VqeOgarVNXCppVmRY0Wyevj62hp87bwEng3qYWNRRIK1qGzkPeBs6qwNfMFq1rtdi6ZqnUAthRsTFK4j3sb51FcWIUtKj0t3XtnT4fSnrNup4F1XnmLAKnuHzSx0PJr/ewO5uptt65x5lXD4PqFW9TpVWUepc7eC6eQsPtqygwfe2O9K1hL9mqMq2i7OiwivOnT68F3gbOdjIKhcKhU4EC97TrsdlsOqo+6+5A6W+BqlQqH3S+6R63xAa+VJmpTpW2y6GgfLT2sdLftsRcWKzoQfAuZQIAkDaJ/AfctNvtnUuBbrebyD08m52TtCFwniJwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM7KL6KoDqO0iARgAAAAAElFTkSuQmCC",lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOMSURBVHgB7dpLTttAHMfx4SkqHsqyS3OCphtQ2TScoHCCwgVoegLgBFAuQG5AWHXZdFXCptm1u7q7LiMeUsQr/f3BRiY4vFonmfD9SJYn9gwi/nv+Mx7HOQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPMeC6YGJiojA4OPjlIXVPTk6mG41G+NB2zWazcnh4OG/l8fHx/NDQ0Pfo1MeDg4PN1vq5XC64uLj4FbVdVNty8th9VG/+6Oio4jps0PWx4+PjmoJRjj6ujo2NBa11dOHjGyG0oDlPDLsusDtUF3E6/qxyQRdw28p2B5+dnYXxubi3tWqt14563LLq5lUMRkZGtvX35uNzU1NTq3ZcW109+/p4vV4Pk//f8PBwEPd065Wnp6e1xP9ed8+VpUBdxKZtab3isfXuaqetaMcsHbYeaydZ1/6W6wF9nSpj0Rj0Kfq4oUAUEimylDb29bqupMr/QWkvbyms9biO1ZTqbqUvBaeoHvNWxbyCtqN9TluoFLnuPORt4AYGBna03Tqucc/GqkpaG41TiwqazTItaDZOLrcbQ3udt4GT0D1NLi4okDZpqTgPeRs4mwU+prdoXMslxjVLpRbADU02at14DvtXz2JyYhS0eOpv49pr7S+n9Op12xZU55lnETjFZUm7yym/nsPWrafaeOeuel4QBdUr3qZKm1HqWS71XDKFRstXcWBKWh0pWcEesjXLtBnlhjabcf726bHA28DZSsbo6GjaqVCBu171OD8/39DsM3ApU38L1OTk5DudL7irJbGyL7PMvk6VtsqhoCxYud3U35bEXDRZ0Y3gXcoEAKDfdOwNeLFYzGmGt6Tiu2iWV9e+pm19c3Mz7Le2WetI4HQBgmi5KWhTZW1ra2u9X9p2wpDLmN21ugA/VHx5R7XCzMxMsL+/v9vS1l7BfPOsbbC3t5f5W/HMA6cv0ZidnX2hYiFx2L7YjWUPpZ+8LkR+bm6ual9cF2Ah8d7MedT2s77vWLVa/eoy1LExbmVlZU27D1rxWNb4ULY7M1rVWEipHq/e3zjmWdtMU2lHf55nX7x1UFdAS9q9v6epXbx5ta151nZabTNJm5mnyqS03K+UUlZqsRuo0KaZreS/0QX46WHbPy4jXflBbJpoFrem4ittOb1+CbXf1Vpi6b671se2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANDr/gI0wVMUBXHJGQAAAABJRU5ErkJggg==",Lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIeSURBVHgB7dghTyNBGAbgucsFhUKhUCgUCoVCoVD8Dn4MvwOFQqFQVVVVVVVVVVU1d3k3mbu2dHMNl6Od8jxJk6GZ7pJ995v5dksBAAAAAAAAAAAAAAAAAAAAAAAAAIA/vpVP9vDw8HM6nZaXl5et5t/f35fj4+NuvM3vTk9Py+3tbTeezWbl+fm5G19dXZWLi4t38+fzeXl6eurGNzc35ezsbOW7v8m5cs7Hx8dPvZbfywE7OTnpgojhcNgFsq7eCLk56twW/Cg7kDs0lVSlkt7e3rpx7uBaYbE8XrY+r8/19XVXdQkt56jVGDXMo6Ojle9z3OX/L3NqwKnK3BBVfrsLOwku+sLJeJtAtp2XC5vwcuFzg4xGo27JTBgJLi4vL98dq+/YOd425/3fDnqprFLhdX8bDAYre+X5+fnGvW/f7azi/lUaj017VpaxTctXmpMElt+9vr6WxWLRVU6qrUXNBpeLv0nt8jbJ/pT9LqFFltB9WPY+otngPnrBa2iR6usLed81G9y2XWWVwOq+lqU0f2e/y9LaYnhfojmJ2von7Lu7u98tfR4RlquwFV8iuPF43D0GRG39s9+l8pYfC1rSbHC54H2f9Xk1mLT++cRyR5lQa7CtaHaP63tnuf7WI/tYXSLXW/88v00mk+4xIeHmlVcrXeZBL5UJJMFEX+uf72uz0uKSCQAAAAAAAAAAAAAAAAAAAAAAAAAA8Qs7VOX2L59gQgAAAABJRU5ErkJggg==";var Pt=t(765742),Ce=t(414786),je=t.n(Ce),Le=t(602698),ci=t.n(Le),Jt=t(208935),Ft=t(989387),ti=t.n(Ft);const gi={circle:ye,cross:Ae,strikeDiagonal:Je,underlineDouble:ke,underlineCurve:Fe,jagged:Ie,enclose:ht,scribble:me,strike:Ee,underline:Se,wave:lt,marker:Lt},qt=[{identifier:"underline",label:(0,s.t)("Underline",null,{project:"apps.App"}),icon:gi.underline},{identifier:"underlineCurve",label:(0,s.t)("Freehand",null,{project:"apps.App"}),icon:gi.underlineCurve},{identifier:"underlineDouble",label:(0,s.t)("Double",null,{project:"apps.App"}),icon:gi.underlineDouble},{identifier:"marker",label:(0,s.t)("Marker",null,{project:"apps.App"}),icon:gi.marker},{identifier:"wave",label:(0,s.t)("Wavy",null,{project:"apps.App"}),icon:gi.wave},{identifier:"circle",label:(0,s.t)("Circle",null,{project:"apps.App"}),icon:gi.circle},{identifier:"enclose",label:(0,s.t)("Over and underline",null,{project:"apps.App"}),icon:gi.enclose},{identifier:"scribble",label:(0,s.t)("Scribble",null,{project:"apps.App"}),icon:gi.scribble},{identifier:"jagged",label:(0,s.t)("Jagged",null,{project:"apps.App"}),icon:gi.jagged},{identifier:"cross",label:(0,s.t)("Cross",null,{project:"apps.App"}),icon:gi.cross},{identifier:"strikeDiagonal",label:(0,s.t)("Diagonal",null,{project:"apps.App"}),icon:gi.strikeDiagonal},{identifier:"strike",label:(0,s.t)("Strikethrough",null,{project:"apps.App"}),icon:gi.strike}],Mt={boolean:Pt.boolean,button:Pt.button,context:Pt.context,dropdownselect:Pt.dropdownselect,group:Pt.group,hidden:Pt.hidden,rangeinput:Pt.rangeinput,segmentedradio:Pt.segmentedradio,spacer:Pt.spacer,colorpicker:Me=>e.createElement(z,Me),highlightshapepicker:Me=>e.createElement(pe,Me)},Vt={type:"object",properties:{}},Ti={shape:"underline",isFront:!1,isAnimationEnabled:!1,animation:"draw",duration:.5,direction:"right",color:{type:"THEME_COLOR"},thickness:{unit:"em",value:.1},linecap:"square"},Ni=Me=>[{type:"highlightshapepicker",$mapping:"#/shape",properties:{selectPreviewClassName:ti().selectPreview,itemPreviewClassName:ti().itemPreview,htmlAttributes:{"data-test":"text-highlight-type-select"},enum:qt.map(et=>{let{identifier:$t}=et;return $t})},$conditional:qt.map(et=>{let{identifier:$t}=et;return{$if:{"#/shape":{eq:$t}},$then:{properties:{className:ti()[`${$t}Preview`]}}}}),$sideEffects:[{$if:{"#/shape":{eq:"marker"}},$then:{set:{"#/thickness":{unit:"em",value:1},"#/linecap":"square"}}},{$if:{"#/shape":{ne:"marker"}},$then:{set:{"#/thickness":{unit:"em",value:.1}}}}]},{type:"spacer",properties:{gridMultiplier:1}},{type:"colorpicker",properties:{label:(0,s.t)("Color",null,{project:"apps.App"}),dialogClassName:Jt.BLOCK_FOCUS_IGNORE_CLASSNAME,backgroundEnabled:Me,colorVariableDefault:"text-highlight-color",colorVariableOnBackground:"text-highlight-color-on-background"},$mapping:"#/color"},{type:"rangeinput",$mapping:"#/thickness",properties:{label:(0,s.t)("Thickness",null,{project:"apps.App"}),inline:!1,units:{em:{min:.05,max:.5,step:.05},px:{min:1,max:50,step:1}}},$conditional:{$if:{"#/shape":{eq:"marker"}},$then:{properties:{units:{em:{min:.5,max:1,step:.05},px:{min:1,max:100,step:1}}}}}},{type:"spacer",properties:{gridMultiplier:1}},{type:"context",properties:{label:(0,s.t)("End Caps",null,{project:"apps.App"}),fieldIndex:0}},{type:"segmentedradio",$mapping:"#/linecap",properties:{enum:["square","round"],enumAnnotation:[{label:(0,s.t)("Square",null,{notes:"Option to specify square linecaps on the ends of the RTE text highlight shape path.",project:"apps.App"})},{label:(0,s.t)("Round",null,{notes:"Option to specify rounded linecaps on the ends of the RTE text highlight shape path.",project:"apps.App"})}]}},{type:"boolean",$mapping:"#/isFront",properties:{label:(0,s.t)("Bring to front",null,{project:"apps.App"})}},{type:"boolean",$mapping:"#/isAnimationEnabled",properties:{label:(0,s.t)("Animation",null,{project:"apps.App"}),interpolate:[!1,!0]}},{type:"group",$conditional:{$if:{"#/isAnimationEnabled":{eq:!1}},$then:{type:"hidden"}},properties:{children:[{type:"dropdownselect",$mapping:"#/animation",properties:{htmlAttributes:{"data-test":"text-highlight-animation-type-select"},label:(0,s.t)("Animation Type",null,{project:"apps.App"}),inline:!1,enum:["draw","fade","fadeScale"],enumAnnotation:[{label:(0,s.t)("Draw",null,{project:"apps.App"})},{label:(0,s.t)("Fade",null,{project:"apps.App"})},{label:(0,s.t)("Fade and Scale",null,{project:"apps.App"})}]}},{type:"rangeinput",$mapping:"#/duration",properties:{label:(0,s.t)("Duration",null,{project:"apps.App"}),inline:!1,min:.1,max:2,step:.1}},{type:"spacer",properties:{gridMultiplier:1}},{type:"group",$conditional:{$if:{"#/isAnimationEnabled":{eq:!1}},$then:{type:"hidden"}},properties:{children:[{type:"group",$conditional:{$if:{"#/animation":{ne:"draw"}},$then:{type:"hidden"}},properties:{children:[{type:"context",properties:{label:(0,s.t)("Direction",null,{project:"apps.App"}),fieldIndex:0}},{type:"segmentedradio",$mapping:"#/direction",properties:{enum:["left","right"],enumAnnotation:[{showLabel:!1,icon:je()},{showLabel:!1,icon:ci()}]},$conditional:{$if:{"#/animation":{ne:"draw"}},$then:{type:"hidden"}}}]}}]}}]}},{type:"removehighlight",properties:{variant:"tertiary",size:"medium",label:(0,s.t)("Remove",null,{project:"apps.App"})}}],ui=(0,p.debounce)((Me,et)=>I(Me,et),400),gn=(Me,et)=>({"#/shape":()=>{O(Me)},"#/color":()=>{A(et,Me.type)},"#/thickness":()=>{ui(et,Me)},"#/linecap":()=>{D(et,Me)},"#/isFront":()=>{T(et,Me)},"#/isAnimationEnabled":()=>{B(et,Me)},"#/animation":()=>{N(et,Me)},"#/duration":()=>{x(et,Me)},"#/direction":()=>{P(et,Me)}});var zi=t(87771),Mn=t(820396),Zt=t.n(Mn);function Te(Me){let{renderHeader:et,onChange:$t,value:Ki,onRequestClose:pi}=Me;var Mi;const vn=(0,e.useRef)(null),ln=(0,m.Ze)(_.Pr$),Sn=(0,e.useRef)(null),an=(0,e.useRef)((Ki==null?void 0:Ki.id)??(0,f.v4)()),[dn,W]=(0,e.useState)({});(0,e.useEffect)(()=>{ln&&(Sn.current=ln.get("model"))},[ln]),(0,e.useEffect)(()=>{var pn,Yi;const qi=(Yi=(0,p.keyBy)((pn=Sn.current)===null||pn===void 0?void 0:pn.get("textAttributes"),"id")[an.current])===null||Yi===void 0?void 0:Yi.shape;return C(qi?qi+"-edit":`${Ti.shape}-add`),()=>{qi&&w(qi)}},[]),(0,e.useEffect)(()=>{var pn;const Yi=(0,p.keyBy)((pn=Sn.current)===null||pn===void 0?void 0:pn.get("textAttributes"),"id");if(!Yi[an.current]){var qi;const ls={...Yi,[an.current]:{...Ti,type:"highlight",id:an.current}};(qi=Sn.current)===null||qi===void 0||qi.set("textAttributes",Object.values(ls),{silent:!0}),W(ls[an.current]),$t({id:an.current})}else W(Yi[an.current])},[$t]);const Zi=pn=>{let{changes:Yi,value:Un,modifiedUiSubschema:qi}=pn;var ls,ct;const{diff:fe}=Yi.default,it=(0,p.keyBy)((ls=Sn.current)===null||ls===void 0?void 0:ls.get("textAttributes"),"id");if(!(0,v.Z)(fe,it[an.current]))return;const wi={...it,[an.current]:{...it[an.current],...Un}};(ct=Sn.current)===null||ct===void 0||ct.set("textAttributes",Object.values(wi)),W(wi[an.current]),$t({id:an.current});try{const Fi=Object.entries(Yi.default),{$mapping:fn}=qi,ki=Fi[0][1][fn],un=it[an.current].shape,Xn=gn(ki,un)[fn];Xn&&Xn()}catch(Fi){console.log(Fi)}},Zn=()=>{var pn,Yi,Un;pi();const ls=((pn=Sn.current)===null||pn===void 0?void 0:pn.get("textAttributes")).find(it=>{let{id:wi}=it;return wi===an.current}).shape;R(ls),$t({id:null});const fe=((Yi=Sn.current)===null||Yi===void 0?void 0:Yi.get("textAttributes")).filter(it=>{let{id:wi}=it;return wi!==an.current});(Un=Sn.current)===null||Un===void 0||Un.set("textAttributes",fe,{silent:!0})};return Object.keys(dn).length===0?null:e.createElement(i.JSFHeaderContextProvider,null,e.createElement(E.Z,{components:{...Mt,removehighlight:pn=>e.createElement(zi.Z,{...pn,onClick:Zn})},configurations:{default:{schema:Vt,uiSchema:Ni((ln==null||(Mi=ln.get("containerStyles"))===null||Mi===void 0?void 0:Mi.backgroundEnabled)||!1),value:dn,errors:{}}},onChange:Zi,scrollContainerClassName:Zt().scrollContainer,renderHeader:et,title:(0,s.t)("Highlight",null,{project:"src.shared"}),getInnerRefs:pn=>{let{instance:Yi}=pn;vn.current=Yi},scrollContainerHtmlAttributes:{"data-test":"text-highlight-flyout-form"}}))}const qe=Te;var xt=t(181124);const Gt=230,Li=55,mi=Me=>e.createElement(n.Z.Position.DragHandle,null,e.createElement(i.JSFHeader,Me,e.createElement(u.Z,{justifyContent:"space-between",alignItems:"center",height:Li},e.createElement(h.Z,null),e.createElement(g.Z.Body,{fontWeight:"medium",m:0},Me.children),e.createElement(h.Z,null)))),le=Me=>{const{modalMountAt:et,itemConfigEditorProps:$t}=Me;return e.createElement(xt.Z,{container:et.ownerDocument.head,cacheKey:"text-highlight-flyout-field"},e.createElement(n.Z.Transition,{duration:Gt},e.createElement(n.Z,{className:Zt().noPointerEvents,closeOnEsc:!0,mountAt:et,lockFocusOptions:{autoFocus:!0}},e.createElement(n.Z.Position,{className:Zt().noPointerEvents,draggable:!0,position:$t.editorView.dom,positionPoint:"top-right",constrainTo:"window",anchor:"top-left"},e.createElement(n.Z.Dialog,{className:r()(Jt.BLOCK_FOCUS_IGNORE_CLASSNAME,Jt.NONINTERACTIVE_CLASSNAME,Zt().restorePointerEvents,Zt().modal),tabIndex:0,htmlAttributes:{"aria-label":(0,s.t)("Text Highlight editor dialog",null,{project:"apps.App"}),"data-test":"text-highlight-editor-container"},mt:Li},e.createElement(qe,{renderHeader:mi,...Me}))))))};le.propTypes={hasErrors:o().bool,itemConfigEditorProps:o().shape({editorView:o().object})};const _e=le},614649:function(c,b,t){"use strict";t.d(b,{kk:()=>ai,BX:()=>Xt,bY:()=>Fi,IN:()=>ki});var l=t(68468),d=t(439939),o=t(100371),e=t(553772),a=t(250632),r=t(916661),s=t(795478),n=t.n(s),i=t(174161),u=t(157506),h=t(714487),g=t(323134);function p(we,Ke,ge){return Ke in we?Object.defineProperty(we,Ke,{value:ge,enumerable:!0,configurable:!0,writable:!0}):we[Ke]=ge,we}const f={NODES:"nodes",MARKS:"marks"},m={HEADING_1:"tweak-heading-1-size",HEADING_2:"tweak-heading-2-size",HEADING_3:"tweak-heading-3-size",HEADING_4:"tweak-heading-4-size",BODY_1:"tweak-large-text-size",BODY_2:"tweak-normal-text-size",BODY_3:"tweak-small-text-size"},_="monospace",v=[{id:m.HEADING_1,label:e.c0.HEADING_1.title,nodeCommand:u.NI.HEADING_1,mappingSize:"heading-1",keybinding:"Mod-Alt-6"},{id:m.HEADING_2,label:e.c0.HEADING_2.title,nodeCommand:u.NI.HEADING_2,mappingSize:"heading-2",keybinding:"Mod-Alt-5"},{id:m.HEADING_3,label:e.c0.HEADING_3.title,nodeCommand:u.NI.HEADING_3,mappingSize:"heading-3",keybinding:"Mod-Alt-4"},{id:m.HEADING_4,label:e.c0.HEADING_4.title,nodeCommand:u.NI.HEADING_4,mappingSize:"heading-4",keybinding:"Mod-Alt-3"},{id:m.BODY_1,label:e.c0.PARAGRAPH_LARGE.title,nodeCommand:u.NI.PARAGRAPH_LARGE,mappingSize:"paragraph-1",keybinding:"Mod-Alt-2"},{id:m.BODY_2,label:e.c0.NORMAL.title,nodeCommand:u.NI.PARAGRAPH,mappingSize:"paragraph-2",keybinding:"Mod-Alt-1"},{id:m.BODY_3,label:e.c0.PARAGRAPH_SMALL.title,nodeCommand:u.NI.PARAGRAPH_SMALL,mappingSize:"paragraph-3",keybinding:"Mod-Alt-0"},{id:_,label:e.c0.CODE.title,nodeCommand:u.NI.CODE_BLOCK,keybinding:"Mod-Alt-m"}];function E(we){return we===f.NODES?function(ge){let{config:zt,menuState:Ht}=ge;var bt,he;return(he=Ht.itemStates)===null||he===void 0||(bt=he[zt.nodeCommand])===null||bt===void 0?void 0:bt.active}:function(ge){let{config:zt,menuState:Ht}=ge;var bt,he,Re,Wt;if(zt.id==="site-default"){var _i,fi;return!(!((fi=Ht.itemStates)===null||fi===void 0||(_i=fi.fontMapping)===null||_i===void 0)&&_i.active)}if(!zt.mappingSize||!(!((he=Ht.itemStates)===null||he===void 0||(bt=he.fontMapping)===null||bt===void 0)&&bt.active))return!1;const Ri=(Wt=Ht.itemStates)===null||Wt===void 0||(Re=Wt.fontMapping)===null||Re===void 0?void 0:Re.attrs;if(Ri!=null&&Ri.mappingSize)return zt.mappingSize===Ri.mappingSize;try{var Be;let bi=document;for(;!((Be=bi.activeElement)===null||Be===void 0)&&Be.contentDocument;)bi=bi.activeElement.contentDocument;const Ln=bi.defaultView.getSelection().anchorNode.parentElement;return Array.from(Ln.classList).find(hi=>hi===`sqsrte-${zt.mappingSize}`)}catch{return!1}}}const S=(we,Ke)=>{const ge=v.filter(zt=>{let{mappingSize:Ht,nodeCommand:bt}=zt;if(we===f.NODES){var he,Re;return(Re=Ke.itemStates)===null||Re===void 0||(he=Re[bt])===null||he===void 0?void 0:he.enabled}return Ht});return we===f.MARKS&&ge.length>0&&ge.unshift({id:"site-default",label:(0,h.t)("Site Default",null,{project:"src.shared"})}),ge},y=we=>{const{closeItemConfigEditor:Ke,execCommand:ge,itemEditorActiveCommand:zt,menuState:Ht,variant:bt}=we,[he,Re]=(0,i.useState)(!1);(0,i.useEffect)(()=>{zt&&Re(!1)},[zt]);const Wt=(0,i.useMemo)(()=>S(bt,Ht),[bt,Ht]),_i=(0,i.useMemo)(()=>E(bt),[bt]),fi=Wt.find(bi=>_i({config:bi,menuState:Ht})),Ri=bi=>{const Bi=Wt.find(di=>{let{id:Cn}=di;return Cn===bi});if(!Bi)return;const Tn=bt===f.NODES,Ln=Tn?Bi.nodeCommand:u.NI.FONT_MAPPING,kn={mappingSize:Bi.mappingSize};if(ge(Ln,kn),Tn){var hi;const di=(hi=Ht.itemStates.nodeFontMapping)===null||hi===void 0?void 0:hi.attrs.editor.view.dom;(di==null?void 0:di.getBoundingClientRect().bottom)<0&&di.scrollIntoView()}},Be=()=>{typeof Ke=="function"&&Ke()};return i.createElement(g.Z,{options:Wt,onBeforeOpen:Be,onChange:Ri,state:[he,Re],value:fi==null?void 0:fi.id})};y.propTypes={closeItemConfigEditor:n().func,execCommand:n().func.isRequired,menuState:n().shape({itemStates:n().object.isRequired}).isRequired};var C;class O extends(C=i.Component){componentWillMount(){if(this.props.variant===f.MARKS){const{registerKeybinding:Ke}=this.context;v.forEach(ge=>{if(ge.keybinding){const zt=this.makeKeyHandler(ge);Ke(ge.keybinding,zt)}})}}render(){return i.createElement(y,this.props)}constructor(...Ke){super(...Ke),p(this,"makeKeyHandler",ge=>zt=>{const{execCommand:Ht}=this.props,bt={mappingSize:ge.mappingSize};Ht(u.NI.FONT_MAPPING,bt)})}}p(O,"contextTypes",{handleCommand:n().func,registerKeybinding:n().func});function A(we){let{variant:Ke}=we;return Ke=Ke||f.NODES,{command:Ke===f.NODES?e.Ep.NODE_FONT_MAPPING:u.NI.FONT_MAPPING,variant:Ke,renderer:O}}var I=t(317527);const T=()=>({command:"removeBlock",title:(0,h.t)("Remove Block",null,{project:"scripts-v6.block"}),children:()=>i.createElement(I.Z,{color:"red.300"})});var B=t(153088),N=t(72510),P=t(613072),x=t(762379),R=t(444867),w=t.n(R),k=t(225840),q=t(663634),F=t(561637),z=t(646430),j=t(30712),X,J;const Q=x.Z.isFeatureEnabled(w().NESTED_CATEGORIES)?{page:{websiteId:(J=(0,k.getWebsiteContext)())===null||J===void 0||(X=J.website)===null||X===void 0?void 0:X.id,versions:{collection:{product:z.$}}}}:{},ie=we=>i.createElement(F.LinkEditor,{...we,isFeatureEnabled:q.cr,isLinkEditorUAUEnabled:(0,j.L)().isLinkEditorUAUEnabled,trackingPayload:(0,F.getCMSTrackingPayload)("inline-editor-test")});function ce(){var we,Ke,ge;const zt=((Ke=document.querySelector("#sqs-site-frame"))===null||Ke===void 0||(we=Ke.contentDocument)===null||we===void 0?void 0:we.body)||document.body,Ht=zt.ownerDocument.defaultView,he=!(Ht!==Ht.top);return{...P.C5.link,handleCommand:{...P.C5.link.handleCommand,fields:[{...P.C5.link.handleCommand.fields[0],comp:ie,props:{...P.C5.link.handleCommand.fields[0].props,lockFocus:he,modalMountAt:zt,zIndex:e.Ue.MODALS,componentProps:Object.assign(((ge=P.C5.link.handleCommand.fields[0].props)===null||ge===void 0?void 0:ge.componentProps)||{},Q)}}]}}}const pe=u.NI.TEXT_COLOR_MAPPING,ye={[u.NI.HEADING_1]:"headingExtraLargeColor",[u.NI.HEADING_2]:"headingLargeColor",[u.NI.HEADING_3]:"headingMediumColor",[u.NI.HEADING_4]:"headingSmallColor",[u.NI.PARAGRAPH_LARGE]:"paragraphLargeColor",[u.NI.PARAGRAPH]:"paragraphMediumColor",[u.NI.PARAGRAPH_SMALL]:"paragraphSmallColor"},Ae=Object.keys(ye),Je=Object.values(ye),ke="black";var Fe=t(89843),Ie=t(482053),ht=t(3841),me=t(337061),Ee=t(938077),Se=t(797400);function lt(we,Ke){const ge=we==null?void 0:we.itemStates.textColorMapping;if(!(ge==null?void 0:ge.active)||!ge.attrs)return null;const Ht=ge.attrs.colorId;return Ht?Ht==="custom"?ge.attrs.custom:(0,ht.getPaletteColorString)({colors:Ke},Ht):null}function Lt(we,Ke,ge,zt){const Ht=ge.find(_i=>{let{themeName:fi}=_i;return fi===zt.themeId});if(!Ht)return ke;const bt=Ht.mappings.filter(_i=>{let{variableName:fi}=_i;return Je.includes(fi)}),he=Ae.find(_i=>{var fi;return we==null||(fi=we.itemStates[_i])===null||fi===void 0?void 0:fi.active})||u.NI.PARAGRAPH,Re=ye[he],Wt=bt.find(_i=>{let{variableName:fi}=_i;return fi===Re});return(0,Se._F)(Wt,Ke)}function Pt(we){const{palette:Ke,themeData:ge,menuState:zt,themes:Ht}=we,bt=lt(zt,Ke)||Lt(zt,Ke,Ht,ge);return i.createElement(Ie.Z,{justifyContent:"space-around"},i.createElement(Fe.Z.Swatch,{size:"sizes.125",color:bt}))}Pt.propTypes={palette:n().array.isRequired,menuState:n().shape({itemStates:n().object.isRequired}).isRequired,themes:n().arrayOf(n().object).isRequired,themeData:n().shape({themeId:n().string.isRequired}).isRequired};const je=(0,me.a9)(function(Ke){return{palette:(0,Ee.XNs)(Ke),themes:(0,Ee.$jS)(Ke)}})(Pt);var Le=t(723796),ci=t(656346),Jt=t(338465),Ft=t(319695),ti=t(875864);const gi=(0,Le.hu)("TextColorMappingFlyout","steelblue");function qt(we){let{palette:Ke,onChange:ge,value:zt}=we;const{textContent:Ht,colorId:bt,custom:he}=zt,Re={type:he?ti.$.CUSTOM_COLOR:ti.$.SITE_PALETTE_COLOR,customColor:he,sitePaletteColor:{id:bt,alpha:1}},Wt=fi=>{const Ri=fi===bt,Be={colorId:Ri?null:fi,custom:null,isDeselect:Ri,textContent:Ht};gi("Apply textColorMapping swatch",Be),ge(Be)},_i=fi=>{const Ri={colorId:"custom",custom:ci.utils.stringifyPaletteColorValue(fi),textContent:Ht};gi("Apply textColorMapping custom",Ri),ge(Ri)};return i.createElement(Jt.Z,{width:276},i.createElement(Ft.Z,{initialData:Re,colors:Ke,onSelectSwatch:Wt,onSelectCustomColor:_i}))}qt.propTypes={autoFocus:n().bool,className:n().string,dispatch:n().func,value:n().shape({textContent:n().string,colorId:n().string,custom:n().string}),itemConfigEditorProps:n().shape({className:n().string,modalClassName:n().string,overlayClassName:n().string,pageDropdownClassName:n().string}),onChange:n().func,onRequestClose:n().func,renderedInField:n().bool,palette:n().array};const Vt=(0,me.a9)(function(Ke){return{palette:(0,Ee.pgi)(Ke)}})(qt);var Ti=t(831483),Ni=t.n(Ti);function ui(we,Ke,ge){const{schema:zt,selection:Ht}=ge,{mark:bt,from:he,to:Re}=(0,d.Y0)(zt.marks[pe],ge),Wt=bt?Math.min(he,Ht.from):he,_i=bt?Math.max(Re,Ht.to):Re;return{textContent:ge.doc.cut(Wt,_i).textContent,colorId:bt==null?void 0:bt.attrs.colorId,custom:bt==null?void 0:bt.attrs.custom}}function gn(){let we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{textContent:Ke,colorId:ge,custom:zt=null}=we;return{command:pe,attrs:{colorId:ge,custom:zt},textContent:Ke}}function zi(we,Ke){let{themeData:ge}=Ke;return{children:zt=>{let{menuState:Ht}=zt;return i.createElement(je,{themeData:ge,menuState:Ht})},command:pe,handleCommand:{popoverContainerClassName:Ni().popoverContainer,title:(0,h.t)("Text Color",{},{project:"src.seven-one"}),skipFocusOnChange:!0,shouldUpdateOnChange:!0,shouldCloseOnUpdate:!1,fields:[{comp:Vt,props:{},getValue:ui,parseValue:gn}]},suppressActiveState:!0,title:(0,h.t)("Text Color",{},{project:"src.seven-one"})}}var Mn=t(474545);function Zt(){return{collapses:!0,suppressActiveState:!0,command:e.Ep.PASTE_PLAIN,title:(0,h.t)("Paste as Plain Text",null,{project:"src.shared"}),children:we=>i.createElement(Mn.Z,null)}}var Te=t(658108);const xt={command:d.NI.SCALED_TEXT,title:(0,h.t)("Scale text",null,{project:"src.shared",notes:"Label for an action in the rich text editor to apply an auto-scaling effect to text content"}),children:()=>i.createElement(Te.Z,null)};var Gt=t(328262),Li=t(932465);function mi(we,Ke,ge){const{schema:zt,selection:Ht}=ge,{mark:bt,from:he,to:Re}=(0,d.Y0)(zt.marks[u.NI.HIGHLIGHT],ge),Wt=bt?Math.min(he,Ht.from):he,_i=bt?Math.max(Re,Ht.to):Re,fi=ge.doc.cut(Wt,_i).textContent;return{id:bt==null?void 0:bt.attrs.id,textContent:fi}}function le(){let we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{textContent:Ke,id:ge}=we;return{command:u.NI.HIGHLIGHT,attrs:{id:ge},textContent:Ke}}function _e(){const we=document.defaultView,ge=!(we!==we.top);return{command:u.NI.HIGHLIGHT,title:(0,h.t)("Highlight",{},{project:"src.seven-one"}),children:()=>i.createElement(Gt.Z,null),handleCommand:{title:(0,h.t)("Text Color",{},{project:"src.seven-one"}),skipFocusOnChange:!0,shouldUpdateOnChange:!0,shouldCloseOnUpdate:!1,fields:[{comp:Li.Z,props:{lockFocus:ge,modalMountAt:document.body},getValue:mi,parseValue:le}]}}}var Me=t(92485),et=t(734526),$t=t(787592),Ki=t(719881),pi=t(489548),Mi=t(309109),vn=t(181124),ln=t(208935),Sn=t(35045),an=t(290858);function dn(we,Ke,ge){return Ke in we?Object.defineProperty(we,Ke,{value:ge,enumerable:!0,configurable:!0,writable:!0}):we[Ke]=ge,we}const W=we=>{const[Ke,ge]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{const zt=Ht=>{we&&(we.style.visibility=Ht)};return we&&zt(Ke?"hidden":"visible"),()=>zt("visible")},[Ke,we]),{onHideToolbar:()=>ge(!0),onShowToolbar:()=>ge(!1)}},Zi=we=>{var Ke,ge,zt,Ht;const bt=we==null||(ge=we.editorView)===null||ge===void 0||(Ke=ge.state)===null||Ke===void 0?void 0:Ke.doc,he=bt==null?void 0:bt.cut(0).textContent,Re=we==null||(Ht=we.editorView)===null||Ht===void 0||(zt=Ht.state)===null||zt===void 0?void 0:zt.selection,Wt=(Re==null?void 0:Re.from)||0,_i=Re==null?void 0:Re.to,fi=_i?bt==null?void 0:bt.cut(Wt,_i).textContent:void 0;return{fullTextContent:he,selectedText:fi,selectionStart:Wt}};class Zn{addChunk(Ke,ge,zt,Ht){this.chunks.push(Ke),this.insertTimeout===void 0&&(this.insertTimeout=window.setTimeout(()=>{const bt=this.chunks.pop()||"";zt(bt,ge),clearTimeout(this.selectionTimeout),this.selectionTimeout=window.setTimeout(()=>{Ht(),this.insertTimeout=void 0,ge||(this.chunks=[],this.selectionStartPos=void 0)},Zn.SelectTimeoutDelay)},Zn.InsertTimeoutDelay))}constructor(){dn(this,"insertTimeout",void 0),dn(this,"selectionTimeout",void 0),dn(this,"selectionStartPos",void 0),dn(this,"chunks",[])}}dn(Zn,"SelectTimeoutDelay",10),dn(Zn,"InsertTimeoutDelay",10);const pn=we=>{var Ke,ge,zt,Ht,bt;const[he]=(0,i.useState)(new Zn),Re=hi=>{let{selectionStart:di,selectionEnd:Cn}=hi;var Cs,Qn,Rs;const{itemConfigEditorProps:cs}=we;cs==null||(Cs=cs.preventEditorBlur)===null||Cs===void 0||Cs.call(cs,Date.now()),cs==null||(Rs=cs.editorView)===null||Rs===void 0||(Qn=Rs.dom)===null||Qn===void 0||Qn.focus(),we.execCommand("setSelection",{anchor:di,head:Cn,skipEventTracking:!0})},Wt=hi=>{let{textContent:di,isStreaming:Cn}=hi;var Cs,Qn;const{itemConfigEditorProps:Rs}=we,{selectionStart:cs}=Zi(Rs);if(((Qn=we.itemConfigEditorProps)===null||Qn===void 0||(Cs=Qn.trackingPayload)===null||Cs===void 0?void 0:Cs.productArea)==="product-composer-v1")he.selectionStartPos===void 0&&(he.selectionStartPos=cs),he.addChunk(di,!!Cn,(Ls,Ys)=>{we.execCommand("insertHTML",{html:Ls,isStreaming:Ys,skipEventTracking:!0})},()=>{const{selectionStart:Ls}=Zi(Rs);Re({selectionStart:he.selectionStartPos||cs,selectionEnd:Ls})});else{we.execCommand("insertHTML",{html:di,isStreaming:Cn,skipEventTracking:!0});const{selectionStart:Ls}=Zi(Rs);Re({selectionStart:cs,selectionEnd:Ls})}},{siteTitle:_i,id:fi}=Sn.default.getState(),{selectedText:Ri}=Zi(we.itemConfigEditorProps),Be=(Ke=we.itemConfigEditorProps)===null||Ke===void 0?void 0:Ke.rteToolbarElement,{onHideToolbar:bi,onShowToolbar:Bi}=W(Be),[Tn,Ln]=(0,an.Z)();(0,i.useEffect)(()=>{Be&&Tn(Be)},[Tn,Be]);const kn={...(ge=we.itemConfigEditorProps)===null||ge===void 0?void 0:ge.trackingPayload};return i.createElement(vn.Z,{container:document.head,cacheKey:"ai-writer-container"},i.createElement(Mi.J,{brandName:_i,generatorProfile:(zt=we.itemConfigEditorProps)===null||zt===void 0?void 0:zt.generatorProfile,modalClassName:ln.NONINTERACTIVE_CLASSNAME,onButtonClick:()=>{const{selectedText:hi}=Zi(we.itemConfigEditorProps),di=(kn==null?void 0:kn.productArea)==="product-composer-v1";!hi&&!di&&we.execCommand("insertHTML",{html:"",skipEventTracking:!0}),bi()},onCloseModal:()=>{var hi,di;Bi(),(di=we.itemConfigEditorProps)===null||di===void 0||(hi=di.onCloseModal)===null||hi===void 0||hi.call(di)},onInsertText:Wt,popoverProps:{anchorBounds:Ln,anchor:(bt=we.itemConfigEditorProps)===null||bt===void 0||(Ht=bt.editorView)===null||Ht===void 0?void 0:Ht.dom,className:ln.NONINTERACTIVE_CLASSNAME},selectedText:Ri,trackingPayload:kn,websiteId:fi}))},Yi=()=>(0,pi.L)({RTEField:pn});var Un,qi;const ls="rosetta-rte-toolbar-cache-key",ct=2,fe=[o.itemConfig.undo,o.itemConfig.redo],it=x.Z.isFeatureEnabled(w().NESTED_CATEGORIES)?{CONTENT_PICKER:{websiteId:(qi=(0,k.getWebsiteContext)())===null||qi===void 0||(Un=qi.website)===null||Un===void 0?void 0:Un.id,versions:{collection:{product:z.$}}}}:{};function wi(we,Ke){return we.find(ge=>{let{command:zt}=ge;return zt===Ke})}function Fi(we){let{toolbarOptions:Ke,editor:ge,state:zt}=we,{blockTypeName:Ht}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const bt=(ge==null?void 0:ge.getMenuState(zt))||zt,he={};wi(Ke,e.Ep.NODE_FONT_MAPPING)&&(he[e.Ep.NODE_FONT_MAPPING]={active:void 0,attrs:{editor:ge,state:zt},enabled:!0}),wi(Ke,e.Ep.PASTE_PLAIN)&&(he[e.Ep.PASTE_PLAIN]={active:void 0,attrs:void 0,enabled:!0}),Ht===et.Z.BlockTypeKeys[ct]&&wi(Ke,e.Ep.REMOVE_BLOCK)&&(he[e.Ep.REMOVE_BLOCK]={active:void 0,attrs:void 0,enabled:!0});const Wt=wi(Ke,d.NI.TEXT_COLOR_MAPPING);if(r.Z.isSevenOne()&&Wt){const Bi=Object.assign({},bt.itemStates.textColorMapping,he[d.NI.TEXT_COLOR_MAPPING]||{});he[d.NI.TEXT_COLOR_MAPPING]={...Bi,attrs:{...Bi.attrs,menuState:bt}}}const _i=wi(Ke,d.NI.HIGHLIGHT);if(r.Z.isSevenOne()&&_i){var fi;const Bi=Object.assign({},bt.itemStates.highlight,he[d.NI.HIGHLIGHT]??{});he[d.NI.HIGHLIGHT]={...Bi,attrs:{...Bi.attrs,id:(fi=Bi.attrs)===null||fi===void 0?void 0:fi.id,menuState:bt}}}if(wi(Ke,e.Ep.AI_WRITER)){var Be;const Bi=Object.assign({},bt.itemStates.highlight,he[e.Ep.AI_WRITER]??{});he[e.Ep.AI_WRITER]={...Bi,attrs:{...Bi.attrs,id:(Be=Bi.attrs)===null||Be===void 0?void 0:Be.id,menuState:bt}}}return{...bt,itemStates:{...bt.itemStates,...he}}}function fn(we,Ke){const ge=Object.keys(we.itemStates),zt=Ke.filter(Ht=>{if(isUndoRedoEnabled()&&fe.includes(Ht))return!1;const{command:bt}=Ht;if(bt&&!ge.includes(bt))return!0}).map(Ht=>{let{command:bt}=Ht;return bt});if(zt.length>0)throw new Error(`toolbarOptions has items not in menuState: ${zt.join(",")}`)}function ki(we){return we.map(Ke=>Ke.isDivider?"divider":Ke)}function un(we){if(!we)return{};const Ke=e.lg[we];if(!Ke)return console.error("Unrecognized schemaType",we),{};const ge={...Ke};return ge.align=Array.isArray(Ke.align),ge.italic=Ke.italics,ge}function Xn(we){return{align:!0,bold:!0,clearFormatting:!0,italic:!0,link:!1,pastePlain:!0,undoRedo:!0,...un(we),underline:!1}}function ne(we,Ke){return Object.entries(Ke).reduce((ge,zt)=>{let[Ht,bt]=zt;return we[Ht]&&bt?ge.concat(bt):ge},[])}function Xe(){let we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Ke=we.schema||Xn(we.type),ge=we.isInline?{indent:!1,lists:!1,quote:!1}:{};return Object.assign({},Ke,ge)}const Qe=we=>we.isInFrame?ce():o.itemConfig.link;function wt(){let we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const ge=Object.assign({},Xe(Ke),we);Ke.block&&$t.$e(he=>{he.setTag("owner","contextual_layout"),$t.uT("[getToolbarItemsRosetta] config.block is set but we do not accept it.")});const zt=Qe(ge);zt.handleCommand.fields[0].props.componentProps=it;const Ht=zi(ge,Ke),bt=[];return bt.push.apply(bt,ne(ge,{aiWriter:[Yi()]})),ge.aiWriter&&bt.push("divider"),bt.push.apply(bt,ne(ge,{heading:[A({variant:f.NODES})]})),r.Z.isSevenOne()&&bt.push.apply(bt,ne(ge,{fontMapping:[A({variant:f.MARKS})]})),bt.push("divider"),bt.push.apply(bt,ne(ge,{bold:[o.itemConfig.bold],italic:[o.itemConfig.italic],underline:[o.itemConfig.underline]})),r.Z.isSevenOne()&&bt.push.apply(bt,ne(ge,{textColorMapping:[Ht]})),bt.push.apply(bt,ne(ge,{scaledText:[xt]})),r.Z.isSevenOne()&&bt.push.apply(bt,ne(ge,{highlight:[_e()]})),bt.push.apply(bt,ne(ge,{link:[zt]})),(ge.heading||ge.align)&&bt.push("divider"),bt.push.apply(bt,ne(ge,{align:[o.itemConfig.align]})),(ge.quote||ge.lists)&&bt.push("divider"),bt.push.apply(bt,ne(ge,{quote:[o.itemConfig.blockQuote],lists:[o.itemConfig.unorderedList,o.itemConfig.orderedList]})),(ge.strikethrough||ge.subscript||ge.superscript)&&bt.push("divider"),bt.push.apply(bt,ne(ge,{strikethrough:[o.itemConfig.strikethrough],subscript:[o.itemConfig.subscript],superscript:[o.itemConfig.superscript],indent:["divider",o.itemConfig.outdent,o.itemConfig.indent]})),(ge.pastePlain||ge.undoRedo||ge.clearFormatting)&&bt.push("divider"),bt.push.apply(bt,ne(ge,{pastePlain:[Zt()],undoRedo:fe,clearFormatting:[o.itemConfig.clearFormatting]})),ge.removeBlock&&bt.push(e.d),bt.push.apply(bt,ne(ge,{removeBlock:[T()]})),bt}function ai(we,Ke){return wt(we,Ke)}const Hi={[d.NI.BOLD]:"bold",[d.NI.STRONG]:"bold",[d.NI.ITALIC]:"italic",[d.NI.EM]:"italic"};function Xt(we){let{blockTypeName:Ke,command:ge,value:zt,attrs:Ht,opts:bt}=we;try{const he=Hi[ge]||ge;if(ge===d.NI.LINK){(0,a.wJ)({blockTypeName:Ke,buttonType:he,value:Ht==null?void 0:Ht.href});return}if(Ht!=null&&Ht.mappingSize){(0,a.ru)({blockTypeName:Ke,value:Ht.mappingSize});return}if(ge===d.NI.TEXT_COLOR_MAPPING){let Re="removed";Ht.custom?Re="custom":Ht.colorId&&(Re="palette"),(0,a.z_)({blockTypeName:Ke,buttonType:he,indirectObjectType:Re});return}if(ge===d.NI.HIGHLIGHT)return;(0,a.Q1)({blockTypeName:Ke,buttonType:he,value:zt})}catch{}}},635845:function(c,b,t){"use strict";t.d(b,{W:()=>a,m:()=>e});var l=t(994336),d=t.n(l),o=t(691985);function e(){try{var r;const s=btoa(JSON.stringify({identifier:o.D===null||o.D===void 0||(r=o.D.website)===null||r===void 0?void 0:r.identifier}));d().set("ss_lastid",s,{domain:o.D.appDomain,path:"/"})}catch{}}function a(){try{d().set("ss_lastid","",{domain:o.D.appDomain,expires:String(new Date(0)),path:"/"})}catch{}}},622961:function(c,b,t){"use strict";t.d(b,{Z:()=>i});var l=t(456903);const d=",",o=u=>l.default.post("/api/content-items/"+u+"/sentiment/like").then(h=>{let{data:g}=h;return g});let e=[],a=null;const r=()=>{const u=e.map(h=>h.itemId).join(d);l.default.get(`/api/blog-like-count/${u}`).then(h=>{let{data:g}=h;e.forEach(p=>{if(g.hasOwnProperty(p.itemId)){p.resolve(g[p.itemId]);return}p.reject()}),e=[],a=null})},s=u=>new Promise((h,g)=>{e.push({itemId:u,resolve:h,reject:g}),a!==null&&clearTimeout(a),a=setTimeout(r,100)}),i={like:o,getLikeCount:u=>s(u)}},623040:function(c,b,t){"use strict";t.d(b,{Z:()=>d});const d={create:function(o){const e=function(){};e.prototype=o;const a=new e;return a.ready&&a.ready(),a}}},175918:function(c,b,t){"use strict";t.d(b,{Z:()=>e});var l=t(949642);function d(a,r,s){return r in a?Object.defineProperty(a,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[r]=s,a}class o{refreshStickyState(){this.stickyState==="in"?this.applyStickyInStyles():this.stickyState==="out"?this.applyStickyOutStyles():this.stickyState==="pinned"&&this.applyPinnedStyles()}applyStickyInStyles(){this.stickyState="in",this.isStickyTop?(this.node.style.bottom="",this.node.style.top=`calc(var(--sticky-original-position) + ${this.buffer}px)`):(this.node.style.top="",this.node.style.bottom=`calc(var(--sticky-original-position) + ${this.buffer}px)`),this.node.style.transition="",this.node.offsetLeft}applyStickyOutStyles(){this.stickyState="out",this.isStickyTop?(this.node.style.bottom="",this.node.style.top=`calc(var(--sticky-original-position) - ${this.buffer}px)`):(this.node.style.top="",this.node.style.bottom=`calc(var(--sticky-original-position) - ${this.buffer}px)`),this.node.style.transition="",this.node.offsetLeft}applyPinnedStyles(){this.stickyState="pinned",this.isStickyTop?(this.node.style.bottom="",this.node.style.top="var(--sticky-original-position)",this.node.style.transition="top 0.2s cubic-bezier(0.33,1,0.68,1)"):(this.node.style.top="",this.node.style.bottom="var(--sticky-original-position)",this.node.style.transition="bottom 0.2s cubic-bezier(0.33,1,0.68,1)")}measurePosition(){const r=this.isStickyTop?"top":"bottom",s=this.node.style[r];this.node.style.removeProperty(r),this.node.style.transition="";const n=parseInt(this.computed.top,10)||0,i=parseInt(this.computed.bottom,10)||0;return this.node.style[r]=s,{top:n,bottom:i}}updateObservers(r,s){this.hasInitialized=!0,this.top=r,this.bottom=s,this.lastTop=r,this.lastBottom=s,this.disconnectObservers(),this.initIntersectionObservers(r,s)}initIntersectionObservers(r,s){var n;const i=this.isStickyTop?`${-r-this.buffer-1}px 0px 1000000px 0px`:`1000000px 0px ${-s-this.buffer-1}px 0px`,u=this.isStickyTop?`${-r+this.buffer}px 0px 1000000px 0px`:`1000000px 0px ${-s+this.buffer}px 0px`;this.observerInside=new IntersectionObserver(this.onIntersectionInside,{root:this.document,rootMargin:i,threshold:[1]}),this.observerOutside=new IntersectionObserver(this.onIntersectionOutside,{root:this.document,rootMargin:u,threshold:[1]});const h=this.node.getAttribute("data-block-id"),g=(0,l.di)(h),p=(n=this.node.parentElement)===null||n===void 0?void 0:n.querySelector(`.${g}.fluid-engine-original-position`);this.observerInside.observe(p||this.node),this.observerOutside.observe(p||this.node)}disconnectObservers(){var r,s;(r=this.observerInside)===null||r===void 0||r.disconnect(),(s=this.observerOutside)===null||s===void 0||s.disconnect()}isOutsideRegion(r){return this.isStickyTop?r.boundingClientRect.top<-this.buffer:window.innerHeight-r.boundingClientRect.bottom<-this.buffer}isInsideRegion(r){return this.isStickyTop?r.boundingClientRect.top>this.top+this.buffer:window.innerHeight-r.boundingClientRect.bottom>this.bottom+this.buffer}constructor(r,s){var n,i,u;d(this,"buffer",75),d(this,"hasInitialized",!1),d(this,"top",0),d(this,"bottom",0),d(this,"stickyState","none"),d(this,"lastTop",null),d(this,"lastBottom",null),d(this,"node",void 0),d(this,"document",void 0),d(this,"computed",void 0),d(this,"resizeObserver",void 0),d(this,"intersectionObserver",void 0),d(this,"observerInside",void 0),d(this,"observerOutside",void 0),d(this,"isStickyTop",void 0),d(this,"onResize",h=>{this.node.style.setProperty("--block-height",this.node.offsetHeight.toString()+"px"),this.onRefresh()}),d(this,"onIntersection",h=>{const[g]=h;g.isIntersecting&&this.onRefresh()}),d(this,"onRefresh",()=>{const{node:h}=this,{top:g,bottom:p}=this.measurePosition();h.style.setProperty("--sticky-original-position",`${this.isStickyTop?g:p}px`),this.refreshStickyState(),(!this.hasInitialized||this.lastTop!==g||this.lastBottom!==p)&&this.updateObservers(g,p)}),d(this,"onIntersectionInside",h=>{const[g]=h;!g.isIntersecting&&this.isOutsideRegion(g)||(g.isIntersecting?this.applyStickyInStyles():this.applyPinnedStyles())}),d(this,"onIntersectionOutside",h=>{const[g]=h;g.isIntersecting&&this.isInsideRegion(g)||(g.isIntersecting?this.applyPinnedStyles():this.applyStickyOutStyles())}),d(this,"destroy",()=>{var h,g,p,f,m;window.removeEventListener("resize",this.onRefresh),(p=window)===null||p===void 0||(g=p.Y)===null||g===void 0||(h=g.Global)===null||h===void 0||h.detach("headerHeight",this.onRefresh,this),(f=this.resizeObserver)===null||f===void 0||f.disconnect(),this.disconnectObservers(),(m=this.intersectionObserver)===null||m===void 0||m.disconnect(),this.node.style.removeProperty("--sticky-original-position"),this.node.style.removeProperty("position"),this.node.style.removeProperty(this.isStickyTop?"top":"bottom"),this.node.style.removeProperty("transition")}),this.node=r,this.document=s??document,this.computed=window.getComputedStyle(r),this.isStickyTop=this.computed.top!=="auto",this.resizeObserver=new ResizeObserver(this.onResize),this.resizeObserver.observe(this.node),this.intersectionObserver=new IntersectionObserver(this.onIntersection,{root:this.document,rootMargin:"50% 0px 50% 0px"}),this.intersectionObserver.observe(this.node),window.addEventListener("resize",this.onRefresh),(u=window)===null||u===void 0||(i=u.Y)===null||i===void 0||(n=i.Global)===null||n===void 0||n.on("headerHeight",this.onRefresh,this)}}function e(a,r){if(a)return new o(a,r)}},502397:function(c,b,t){"use strict";t.d(b,{U:()=>e,Z:()=>a});var l=t(784874),d=t(91258);function o(r){const s=r.querySelector(".summary-block-wrapper");if(!s||!s.matches(".summary-block-collection-type-events"))return Promise.resolve();let n;try{n=JSON.parse(r.getAttribute("data-block-json"))}catch(h){return console.warn("Issue with decoding the JSON: ",h),Promise.resolve()}let i=r.ownerDocument.defaultView.Static.SQUARESPACE_CONTEXT.collectionId;const u=r.closest('.sqs-layout[data-type="page"]');return u&&(i=u.getAttribute("id").replace("page-","")),(0,d.O)({collectionId:i,blockWidgetJson:{type:l.Z.SUMMARY_V2,id:r.getAttribute("id").replace("block-",""),value:n}}).then(h=>{let{html:g}=h;const p=r.querySelector(".sqs-block-content");p&&(p.innerHTML=g)})}const e=r=>{let s=65;return r!=="Auto"&&(s=100/r),s||0},a=r=>(r.getDOMNode&&(r=r.getDOMNode()),o(r).then(()=>{if(!r.querySelector(".summary-block-setting-design-autogrid"))return Promise.resolve();const s=[...r.querySelectorAll("img")];let n=0;const i=h=>{h.target.removeEventListener("load",i),n++,n===s.length&&(n=0,window.dispatchEvent(new Event("resize")))},u=h=>{h.addEventListener("load",i)};s.forEach(u)}))},7595:function(c,b,t){"use strict";t.r(b),t.d(b,{default:()=>a});var l=t(799401),d=t.n(l),o=t(456903);function e(r,s,n){return s in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n,r}class a{}e(a,"SVG_NAMESPACE_URI","http://www.w3.org/2000/svg"),e(a,"SVG_NAMESPACE_QUALIFIED_NAME","g"),e(a,"SVG_USE_SELECTOR","use"),e(a,"spritesheetPromises",{}),e(a,"isNeeded",()=>d().name==="IE"),e(a,"logError",r=>{let{message:s}=r;typeof console<"u"&&console.error(`[SvgCompatibility] ${s}`)}),e(a,"getEls",function(){return[...(arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.body).querySelectorAll(a.SVG_USE_SELECTOR)]}),e(a,"parse",function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.body;a.isNeeded()&&a.getEls(r).forEach(s=>{const{url:n,id:i}=a.elToUrlId(s);!n||!i||a.getSpritesheet(n).then(u=>{const h=a.getIconFromSpritesheet(i,u);a.swapElWithIcon(s,h)}).catch(a.logError)})}),e(a,"elToUrlId",r=>{const s=r.getAttribute("xlink:href").split("#");return{url:s[0],id:s[1]}}),e(a,"getSpritesheet",r=>a.spritesheetPromises[r]?a.spritesheetPromises[r]:a.loadSpritesheet(r)),e(a,"loadSpritesheet",r=>(a.spritesheetPromises[r]=o.default.get(r).then(s=>{let{data:n}=s;const i=document.createElement("div");return i.innerHTML=n,i}).catch(s=>document.createElement("div")),a.spritesheetPromises[r])),e(a,"getIconFromSpritesheet",(r,s)=>{if(!r||!s)throw new Error("id and spritesheet are required");const n=s.querySelector(`#${r}`);if(!n)throw new Error(`Could not find icon "${r}"`);return n.cloneNode(!0)}),e(a,"swapElWithIcon",(r,s)=>{if(!r||!r.parentNode||!s||!s.childNodes)throw new Error("Non-orphan el and non-empty icon are required");const n=document.createElementNS(a.SVG_NAMESPACE_URI,a.SVG_NAMESPACE_QUALIFIED_NAME);[...s.childNodes].forEach(i=>n.appendChild(i)),n.setAttribute("class",r.getAttribute("class")),r.parentNode.replaceChild(n,r)})},226782:function(c,b,t){"use strict";t.d(b,{Z:()=>s});const l="https://www.exploretock.com/tock.js",d=750,o="Tock_widget_container-columnLayout",e=n=>{const i=n.closest(".tock-block");i&&n.classList.toggle(o,i.clientWidth<=d)},a=n=>new ResizeObserver(()=>{e(n)}),s=n=>{const i=n.ownerDocument,u=i.defaultView,h=n.querySelector("#Tock_widget_container"),g=new MutationObserver(()=>{h.querySelector(".TockButton-blue").classList.add("sqs-button-element--primary"),g.disconnect()});g.observe(h,{childList:!0});let p;h&&(p=h.getAttribute("data-tock-business-slug"),e(h),u._tockResizeObserver&&(u._tockResizeObserver.disconnect(),u._tockResizeObserver=void 0),u.ResizeObserver&&(u._tockResizeObserver=a(h),u._tockResizeObserver.observe(n))),u.tock||(u.tock={version:"1.0"},u._tockLoadPromise=new Promise((f,m)=>{const _=i.createElement("script");i.head.appendChild(_),_.onload=()=>f(),_.onerror=()=>m(),_.async=!0,_.src=l})),u._tockLoadPromise.then(()=>{u.tock.load(p)})}},649297:function(c,b,t){"use strict";t.d(b,{Z:()=>I});var l=t(467661),d=t.n(l),o=t(437951),e=t.n(o),a=t(113580),r=t.n(a),s=t(305533),n=t.n(s),i=t(563535),u=t.n(i),h=t(845193),g=t.n(h),p=t(126218),f=t(6233),m=t(805187),_=t.n(m),v=t(916661);function E(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const T=(0,p.C)(f.Z.KEY);if(T&&!_()(T)){const B=T[f.Z.VERSION];if(B&&B<D.version)return!0;if(T[f.Z.SUBMITTED]&&D.showUntilSignup)return!1;const P=Date.now(),x=T[f.Z.CLOSED_DATE];if(x){const R=new Date(x);if(R.setDate(R.getDate()+D.displayFrequency),R<P&&D.displayFrequency!==-1)return!0}return!1}return!0}function S(D){let{settings:T={},context:B={},isMobile:N=!1,urlSearch:P=""}=D;const R=B.pageType===r().NOT_FOUND&&B.collection&&B.collection.type===e().SPLASH_PAGE||B.pageType===r().LOCK_SCREEN;return T.enableMobile===!1&&N||!T.style||T.style===d().NONE||R||P.includes("sqsscreenshot=true")?!1:E(T)}function y(D){let{websiteSettings:T}=D;return v.Z.isSevenOne()||!T.hasOwnProperty("ssBadgeType")?!1:T.ssBadgeType!==u().NONE}function C(D){let{win:T,isMobile:B,settings:N}=D;return!(!B||!(T.innerWidth<=1024)||!N||!g()(N.style)||N.style===n().NONE)}function O(D){let{YNodeBody:T}=D;const B=T.all('img[data-licensed-asset-preview="true"]'),N=T.hasClass("has-preview-getty-imgs");return!B.isEmpty()||N}function A(D){let{settings:T={},urlSearch:B=""}=D;return B.includes("sqsscreenshot=true")?!1:T.isCookieBannerEnabled}const I={shouldShowPopupOverlay:S,shouldShowMobileInformationBar:C,shouldShowLicensedAssetsBar:O,shouldShowSSBadge:y,shouldShowCookieBanner:A}},223919:function(c,b,t){"use strict";t.d(b,{N:()=>o});var l=t(425364);function d(e,a){if(typeof a!="string"||!(a!=null&&a.length))throw new Error("expected prop to be a string");return e.details&&(e.details[a]||e.details.length&&e.details[0][a])}function o(e){return d(e,l.AttrChangeProps.FROM_WYSIWYG)===!0}},200887:function(c,b,t){"use strict";t.d(b,{Z:()=>d});let l;const d={onChange(){for(var o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];if(l)return l.onChange(...e)},onBeforeChange(o){if(l)return l.onBeforeChange(o)},onBeforeUnload(o){if(l)return l.onBeforeUnload(o)},setRouter(o){l=o}}},312713:function(c,b,t){"use strict";t.d(b,{z:()=>l});function l(){try{if(!("cookie"in document))return!1;const d="_testCookieName";return document.cookie=d,document.cookie.includes(d)}catch{return!1}}},783971:function(c,b,t){"use strict";t.d(b,{Z:()=>o});var l=t(329001);const d=864e5,o=(e,a)=>{if(!e||!a)return null;const r=i=>{const u=(0,l.Z)(i);return u.set({hour:0,minute:0,second:0,millisecond:0}),Math.floor(u.getTime()/d)},s=r(e);return r(a)-s}},537312:function(c,b,t){"use strict";t.d(b,{kO:()=>Ae,tS:()=>pe,j:()=>ye,TP:()=>Je,D_:()=>Ie,_5:()=>k,if:()=>ke,AV:()=>ht,lZ:()=>Fe});var l=t(994336),d=t.n(l),o=t(113580),e=t.n(o),a=t(356404),r=t.n(a),s=t(885878),n=t.n(s),i=t(456903),u=t(131626),h=t.n(u),g=t(423394);const p=/^[\w\d-]+(\|[1-9]\d*){4}$/;function f(me){return typeof me<"u"?(me^Math.random()*16>>me/4).toString(16):("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,f)}function m(me){return p.test(me)?me:null}function _(me){return me=me||new Date().getTime(),[f(),me,me,me,1].join("|")}function v(me,Ee){const[Se,lt,Lt,Pt,Ce]=me.split("|");return Ee=Ee||new Date().getTime(),[Se,lt,Pt,Ee,parseInt(Ce,10)+1].join("|")}const E=/^[1-9]\d*$/;function S(me){return E.test(me)?me:null}function y(me){return me=me||new Date().getTime(),me.toString()}const C=d()(document,!1),O=1e3*60*60*24*365,A=1e3*60;function I(me,Ee){return Ee=Ee||new Date().getTime(),new Date(Ee+me).toUTCString()}function D(me){if(me)return _();let Ee=m(C.get("ss_cvr")??""),Se=S(C.get("ss_cvt")??"");const lt=new Date().getTime(),Lt={cvr:{path:"/",expires:I(O*2,lt)},cvt:{path:"/",expires:I(A*30,lt)}};return Ee&&!Se?(Ee=v(Ee,lt),Se=y(lt)):Ee||(Ee=_(lt),Se=y(lt)),C.set("ss_cvr",Ee,Lt.cvr),C.set("ss_cvt",Se??"",Lt.cvt),Ee}const T=["ss_cid","ss_cpvisit","ss_cvisit","ss_cvr","ss_cvt"],B=()=>Promise.resolve(),N={headers:{"Content-type":"application/x-www-form-urlencoded; charset=utf-8"}};function P(){return window.Static.SQUARESPACE_CONTEXT}function x(){return window.__WE_ARE_SQUARESPACE_DISABLING_CENSUS__}function R(){try{return window.localStorage.setItem("test","1"),!0}catch{return!1}}function w(me,Ee){return Ee&&(me.pagePermissionTypeValue=Ee.permissionType),me}function k(me){const{itemId:Ee,item:Se,collectionId:lt,collection:Lt}=P();w(me,Lt),Ee&&Se?(me.pageTitle=Se.title,me.pageId=Ee,me.contentSource="i"):lt&&Lt&&(me.pageTitle=Lt.title,me.pageId=lt,me.contentSource="c"),me.pagePath=window.location.pathname}function q(){const{authenticatedAccount:me,pageType:Ee,websiteRoles:Se}=P(),lt=Se&&Object.keys(Se).map(Pt=>parseInt(Pt,10)).includes(n().VIEWER)&&Object.keys(Se).length===1,Lt=!window.location.pathname.match(/\/config\/*/)&&lt;return(!me||Lt)&&Ee!==e().NOT_FOUND&&Ee!==e().LOCK_SCREEN&&Ee!==e().MEMBER_AREA_ACCESS_DENIED&&x()!==!0}function F(){const{website:me}=P();return!!(me!=null&&me.cloneable)}function z(){const{cookieSettings:me}=P();if(F())return!0;const Ee="ss_performanceCookiesAllowed";return me&&me.isRestrictiveCookiePolicyEnabled&&(!me.isCookieBannerEnabled||!d().get(Ee)||d().get(Ee)==="false")}function j(me){return Ee=>{if(q()){const Se=D(z());return Ee.visitorCookie=Se,k(Ee),i.default.post(me,Ee,{timeout:2500}).catch(B)}return Promise.resolve()}}function X(me){return me.userAgent=navigator.userAgent,me.clientDate=new Date().getTime(),me.viewportInnerHeight=window.innerHeight,me.viewportInnerWidth=window.innerWidth,me.screenHeight=window.screen.height,me.screenWidth=window.screen.width,me}function J(me){const{website:Ee,templateId:Se}=P();return Ee&&(me.websiteId=Ee.id),Se&&(me.templateId=Se),me.website_locale=(0,g.uu)(),me}function Q(me){me.url=window.location.pathname;const{itemId:Ee,item:Se,collectionId:lt,collection:Lt}=P();return w(me,Lt),Ee&&Se?(me.title=Se.title,me.itemId=Ee,me.recordType=Se.recordType):lt&&Lt&&(me.title=Lt.title,me.collectionId=lt),me}function ie(){return{localStorageSupported:R(),queryString:window.location.search,referrer:window.document.referrer}}function ce(){return window.location.pathname==="/search"}function pe(){if(z())for(let me=0;me<T.length;me++)d().get(T[me])&&d().set(T[me],"",{path:"/",expires:new Date(0).toUTCString()})}function ye(me,Ee){if(!q())return;(typeof Ee!="object"||Ee===null)&&(Ee={}),J(Ee),X(Ee),Q(Ee);const Se=D(z());i.default.post("/api/census/RecordHit",h().stringify({event:me,data:JSON.stringify(Ee),ss_cvr:Se},{arrayFormat:"repeat"}),N).catch(B)}const Ae=j("/api/census/button-click"),Je=j("/api/census/button-render");function ke(me){if(q()){const Ee=D(z()),Se={formId:me,visitorCookie:Ee};return k(Se),i.default.post("/api/census/form-render",Se).catch(B)}return Promise.resolve()}function Fe(me){if(q()){const Ee=D(z());return me.visitorCookie=Ee,k(me),i.default.post("/api/census/overlay",me).catch(B)}}function Ie(){if(ce())return;const me=ie();ye(r().PAGE_VIEW,me)}function ht(me){q()&&i.default.post(`/api/census/RecordQuickView/${me}`)}},371467:function(c,b,t){"use strict";t.d(b,{T:()=>B,vT:()=>P,pu:()=>N,rJ:()=>_,hQ:()=>h,vn:()=>I,Y$:()=>T,mp:()=>C,F7:()=>y,Cs:()=>O,jj:()=>k,QC:()=>E,CH:()=>A,gC:()=>S,qh:()=>x,gW:()=>f,Kc:()=>g,L3:()=>m,hm:()=>v,U3:()=>p,a:()=>D});var l=function(q){return q.CART_PAGE_PRODUCT_FORM_OPEN="commerce_cart_page_product_form_open",q.CART_PAGE_PRODUCT_FORM_CLOSE="commerce_cart_page_product_form_close",q.CART_PAGE_PRODUCT_FORM_SUBMIT="commerce_cart_page_product_form_submit",q.CART_PAGE_LOADED="commerce_cart_page_loaded",q.CREATE_CUSTOMER_ACCOUNT="CompleteRegistration",q.ADD_TO_CART="AddToCart",q.SEARCH="Search",q.SUBSCRIBE_NEWSLETTER="Lead",q.VIEW_PRODUCT_PAGE="ViewContent",q.PURCHASE="Purchase",q.INVENTORY_PANEL_SEARCH_PRODUCTS="commerce_inventory_panel_search_products",q.INVENTORY_PANEL_SORT_ON_NAME="commerce_inventory_panel_sort_on_name",q.INVENTORY_PANEL_SORT_ON_STOCK="commerce_inventory_panel_sort_on_stock",q.INVENTORY_PANEL_SORT_ON_PRICE="commerce_inventory_panel_sort_on_price",q.INVENTORY_PANEL_CLICK_ROW_EXPANDER="commerce_inventory_panel_click_row_expander",q.INVENTORY_PANEL_CLICK_ROW="commerce_inventory_panel_click_row",q.INVENTORY_PANEL_CLICK_NEXT_PAGE="commerce_inventory_panel_click_next_page",q.INVENTORY_PANEL_SETTINGS_OPEN="commerce_inventory_panel_settings_open",q.INVENTORY_PANEL_SETTINGS_CLOSE="commerce_inventory_panel_settings_close",q.INVENTORY_PANEL_SETTINGS_SAVE="commerce_inventory_panel_settings_save",q.INVENTORY_PANEL_SETTINGS_TOGGLE_SCARCITY_PDP="commerce_inventory_panel_settings_toggle_scarcity_pdp",q.INVENTORY_PANEL_SETTINGS_TOGGLE_SCARCITY_BLOCKS="commerce_inventory_panel_settings_toggle_scarcity_blocks",q.INVENTORY_PANEL_SETTINGS_CHANGE_SCARCITY_THRESHOLD="commerce_inventory_panel_settings_change_scarcity_threshold",q.FACEBOOK_DYNAMIC_ADS_PRODUCTS_FEED_URL_COPY="commerce_facebook_ads_feed_url_copy",q.FACEBOOK_PIXEL_SAVE_ID="commerce_facebook_pixel_save_id",q}(l||{});const d=l;var o=function(q){return q.API_KEY_CREATION_MODAL_COPY="api_key_creation_modal_copy",q.API_KEY_CREATION_MODAL_CANCEL="api_key_creation_modal_cancel",q.API_KEY_CREATION_MODAL_NEXT="api_key_creation_modal_next",q.API_KEY_CREATION_MODAL_COMPLETE="api_key_creation_modal_complete",q.API_KEYS_PANEL_CREATE_KEY="api_keys_panel_create_key",q.API_KEYS_PANEL_LEARN_MORE="api_keys_panel_learn_more",q.API_KEYS_PANEL_TERMS_OF_USE="api_keys_panel_terms_of_use",q.API_KEYS_PANEL_DELETE_KEY="api_keys_panel_delete_key",q.API_KEYS_PANEL_DELETE_KEY_CONFIRM="api_keys_panel_delete_key_confirm",q}(o||{});const e=o;function a(q){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const z=window.top;z.fbq&&z.fbq("track",q,F)}const r=a;var s=t(659519);const n=()=>trackInternal(CommerceEvent.CART_PAGE_PRODUCT_FORM_OPEN),i=()=>trackInternal(CommerceEvent.CART_PAGE_PRODUCT_FORM_CLOSE),u=()=>trackInternal(CommerceEvent.CART_PAGE_PRODUCT_FORM_SUBMIT),h=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r(d.CREATE_CUSTOMER_ACCOUNT,q)},g=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r(d.ADD_TO_CART,q)},p=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r(d.SEARCH,q)},f=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r(d.SUBSCRIBE_NEWSLETTER,q)},m=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r(d.VIEW_PRODUCT_PAGE,q)},_=()=>(0,s.Z)("interface_click",{identifier:e.API_KEYS_PANEL_LEARN_MORE}),v=()=>(0,s.Z)("interface_click",{identifier:e.API_KEYS_PANEL_TERMS_OF_USE}),E=()=>(0,s.Z)("interface_click",{identifier:e.API_KEYS_PANEL_CREATE_KEY}),S=q=>(0,s.Z)("interface_click",{identifier:e.API_KEYS_PANEL_DELETE_KEY,...q}),y=q=>(0,s.Z)("interface_click",{identifier:e.API_KEYS_PANEL_DELETE_KEY_CONFIRM,...q}),C=q=>(0,s.Z)("interface_click",{identifier:e.API_KEY_CREATION_MODAL_COPY,...q}),O=q=>(0,s.Z)("interface_click",{identifier:e.API_KEY_CREATION_MODAL_NEXT,...q}),A=q=>(0,s.Z)("interface_click",{identifier:e.API_KEY_CREATION_MODAL_CANCEL,...q}),I=q=>(0,s.Z)("interface_click",{identifier:e.API_KEY_CREATION_MODAL_COMPLETE,...q}),D=()=>(0,s.Z)(d.FACEBOOK_DYNAMIC_ADS_PRODUCTS_FEED_URL_COPY),T=()=>(0,s.Z)(d.FACEBOOK_PIXEL_SAVE_ID),B=()=>(0,s.Z)(d.INVENTORY_PANEL_SEARCH_PRODUCTS),N=()=>(0,s.Z)(d.INVENTORY_PANEL_SORT_ON_NAME),P=()=>(0,s.Z)(d.INVENTORY_PANEL_SORT_ON_STOCK),x=()=>(0,s.Z)(d.INVENTORY_PANEL_SORT_ON_PRICE),R=()=>trackInternal(CommerceEvent.INVENTORY_PANEL_CLICK_ROW_EXPANDER),w=()=>trackInternal(CommerceEvent.INVENTORY_PANEL_CLICK_ROW),k=()=>(0,s.Z)(d.INVENTORY_PANEL_CLICK_NEXT_PAGE)},32161:function(c,b,t){"use strict";t.d(b,{Z:()=>o});var l=t(419467),d=t.n(l);function o(e,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u=>u,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:(u,h)=>u===h;if((!(0,l.isArray)(e)&&!(0,l.isPlainObject)(e)||(0,l.isArray)(e)&&(0,l.isPlainObject)(a)||(0,l.isPlainObject)(e)&&(0,l.isArray)(a))&&(e=(0,l.isPlainObject)(a)?{}:[]),!(0,l.isArray)(a)&&!(0,l.isPlainObject)(a)&&(a=(0,l.isPlainObject)(e)?{}:[]),(0,l.isPlainObject)(e)){const u=o(Object.entries(e),Object.entries(a),h=>h[0],(h,g)=>s(h[1],g[1]));return(0,l.mapValues)(u,l.fromPairs)}const n=a,i=e;return{added:(0,l.differenceBy)(n,i,r),removed:(0,l.differenceBy)(i,n,r),changed:n.reduce(function(u,h){const g=i.find(p=>r(p)===r(h));return typeof g<"u"&&!s(g,h)&&u.push(h),u},[])}}},698137:function(c,b,t){"use strict";t.d(b,{Z:()=>i});var l=t(533219),d=t(310488),o=t(629539);const a=function(h){return h.charAt(0).toUpperCase()+h.slice(1)};var r=t(845193),s=t.n(r);class n extends l.Mbv{apply(h,g,p){const f=g[0],m=f.node.asNumber();if(!s()(m))return"Invalid date.";const _=a((0,o.Z)(m));f.set(`<span class="timesince" data-date="${m}">${_}</span>`)}}function i(u,h){const g=new l.Sil({predicates:l.gAQ,formatters:Object.assign({},l.UgU,{timesince:new n})}),{ctx:p,errors:f}=g.execute({code:u,json:h,enableExpr:!0,partials:{"sqs-image":d}});return f.length>0&&console.log("JSONT compilation error messages:",f),p.render()}},408878:function(c,b,t){"use strict";t.d(b,{_:()=>d,s:()=>o});var l=t(916661);function d(e){const a=[],r={};if(l.Z.isSevenOne()){const s=e.closest("[data-section-theme]"),n=s?s.getAttribute("data-section-theme"):"";n&&(a.push(n),r["data-section-theme"]=n),a.push("lightbox-form-content-background")}return{contentClasses:a,contentDataAttributes:r}}function o(e){const a="form-wrapper",r="sqs-site-style-form",s=document.createElement("div");s.classList.add(a,r);const n="form-title",i=document.createElement("div");i.innerHTML=e,i.classList.add(n),s.appendChild(i);const u="form-inner-wrapper",h=document.createElement("div");h.classList.add(u);const g=document.createElement("div");return s.appendChild(h),g.appendChild(s),{sqsBlockForm:g,reactRoot:h}}},106249:function(c,b,t){"use strict";t.d(b,{Z:()=>d});var l=t(456903);const d=async(o,e)=>l.default.post("/api/rest/forms/validate/"+o,e,{headers:{"Content-Type":"application/json"}})},419757:function(c,b,t){"use strict";t.d(b,{d:()=>e});var l=t(101246),d=t(780512),o=t(722262);function e(){return[(0,d.Z)()?"browser-gecko":null,(0,o.Z)()?"browser-safari":null,(0,l.r)()?"ipad-os-thirteen":null].filter(a=>!!a).join(" ")}},221923:function(c,b,t){"use strict";t.d(b,{Z:()=>s});var l=t(540039),d=t.n(l),o=t(548068),e=t.n(o);function a(n){return n[0]==="/"&&(n=n.substr(1)),n[n.length-1]==="/"&&(n=n.substr(0,n.length-1)),n}function r(n){return d()(n)?e()(n.urlId)||!e()(n.fullUrl)||n.fullUrl.length<=1?n:{...n,urlId:a(n.fullUrl)}:null}const s=r},246098:function(c,b,t){"use strict";t.d(b,{Z:()=>o});var l=t(545334),d=t.n(l);function o(e){const a=d().isMoment(e)?e.calendar():d()(e).calendar(),r=a.charAt(0).toUpperCase(),s=a.slice(1);return`${r}${s}`}},304212:function(c,b,t){"use strict";t.d(b,{Z:()=>d});const d=o=>{var e,a,r;const s=(r=o.Static)===null||r===void 0||(a=r.SQUARESPACE_CONTEXT)===null||a===void 0||(e=a.recaptchaEnterpriseContext)===null||e===void 0?void 0:e.recaptchaEnterpriseSiteKey;if(!s)throw new Error("Enterprise V3 ReCaptcha site key not found");return s}},349239:function(c,b,t){"use strict";t.d(b,{S:()=>l});const l=d=>{const o=d.querySelector("script.sqs-form-block-context"),e=d.querySelector("script.sqs-form-block-localized-strings"),a=d.querySelector(".sqs-form-block-submission-html"),r=(a==null?void 0:a.getAttribute("data-submission-html"))??void 0;try{if(e!=null&&e.textContent){const s=JSON.parse(e==null?void 0:e.textContent);return o!=null&&o.textContent?{formSubmissionHTML:r,...JSON.parse(o.textContent),localizedStrings:s}:null}return o!=null&&o.textContent?{formSubmissionHTML:r,...JSON.parse(o.textContent)}:null}catch{throw new Error("Error parsing the JSON form context")}}},965455:function(c,b,t){"use strict";t.d(b,{x:()=>l});function l(){function d(){return((1+Math.random())*65536|0).toString(16).substring(1)}return d()+d()+d()+d()+d()}},101246:function(c,b,t){"use strict";t.d(b,{r:()=>l});function l(){const o=window.navigator.userAgent.toLowerCase().indexOf("safari/"),e="ontouchstart"in window;return o<=-1||!e||window.screen.width<700?!1:typeof window<"u"&&"PointerEvent"in window&&window.PointerEvent.prototype.constructor.length===1}},769518:function(c,b,t){"use strict";t.d(b,{L:()=>d});var l=t(691985);function d(){var o;return!!(!(l.D===null||l.D===void 0||(o=l.D.website)===null||o===void 0)&&o.developerMode)}},629539:function(c,b,t){"use strict";t.d(b,{Z:()=>o});var l=t(545334),d=t.n(l);function o(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return e=d()(e),e.isAfter()||!a&&e.diff(d()(),"s")>-60?e.from(e):e.fromNow()}},731648:function(c,b,t){"use strict";t.d(b,{Z:()=>a});var l=t(545334),d=t.n(l),o=t(222142),e=t.n(o);function a(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const s=d().duration(r),n=s.seconds();return Math.floor(s.subtract(d().duration(n,"s")).asMinutes())+":"+e()(n,2,0)}},809468:function(c,b,t){"use strict";t.d(b,{Z:()=>e});var l=t(360485);const d=async a=>{switch(a){case l.Z.liquid:return await Promise.all([t.e("73054"),t.e("51028")]).then(t.bind(t,518108));case l.Z.filmGrain:return await Promise.all([t.e("73054"),t.e("59039")]).then(t.bind(t,226563));case l.Z.parallax:return await Promise.all([t.e("73054"),t.e("65103")]).then(t.bind(t,335002));case l.Z.refractedCircles:return await Promise.all([t.e("73054"),t.e("95031"),t.e("39632")]).then(t.bind(t,73958));case l.Z.refractedLines:return await Promise.all([t.e("73054"),t.e("43050"),t.e("89492")]).then(t.bind(t,475749))}},e={createImageEffect:async(a,r)=>{const s=a.parentNode.querySelector(".imageEffectContainer");if(!s)return;const n=r||JSON.parse(s.dataset.effect);if(!n)return;const i=n.type;if(!i||i==="none")return;const{default:u}=await d(i);return new u({image:a,container:s,effectProps:{...n}})}}},722262:function(c,b,t){"use strict";t.d(b,{Z:()=>l});function l(){return navigator.userAgent.toLowerCase().indexOf("safari")!==-1}},985913:function(c,b,t){"use strict";t.d(b,{F:()=>l});function l(d){const o=window.top;try{return!!(o&&(o.Y||o.YUI_NOT_YET_LOADED)&&o.Y!==d&&(!window.frameElement||!window.frameElement.hasAttribute("data-is-visitor-preview")))}catch{return!1}}},307945:function(c,b,t){"use strict";t.d(b,{$I:()=>d,$t:()=>e,kS:()=>o});var l=t(714487);const d=()=>new Promise((a,r)=>{if(window.__LessCompiler)return a(window.__LessCompiler);t.e("18827").then(t.t.bind(t,115525,23)).then(s=>{const{LessCompiler:n}=s;n&&!window.__LessCompiler&&(window.__LessCompiler=n),a(window.__LessCompiler)}).catch(function(){r((0,l.t)("CSS parser failed to load.",null,{project:"scripts-v6-root"}))})});async function o(a){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=await d(),n=new s(r);try{var i;const u=n.compile(a??"");if(!((i=u.errors)===null||i===void 0)&&i.length){const h=n.formatErrors(u.errors);return{...u,formattedErrors:h}}return u}catch(u){const h=e(u.message);if(h!==null){const g=new Error(`Syntax error on line ${h}`);throw g.cause=u,g}throw u}}function e(a){try{if(!a.match(/Line\s+Statement\n\s*-+\s+-+/)||!a.includes("SyntaxError: INCOMPLETE_PARSE"))return null;const r=a.match(/^\s*(\d+)\s*/mg);return r!=null&&r.length?Number(r.at(-1)):null}catch{return null}}},76902:function(c,b,t){"use strict";t.d(b,{Z:()=>d});function l(o,e){if(typeof o.closest=="function")return o.closest(e)||null;for(;o;){if(o.matches(e))return o;o=o.parentElement}return null}function d(o){if(!o)return!1;const e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"sqs-dynamic-text",r=o.ownerDocument.defaultView;if(!r)return!1;const s=r.innerWidth;return Array.from(o.querySelectorAll("."+e)).forEach(function(i){const u=i.offsetWidth,h=Math.floor(u/s*1e3)/10;if(parseInt(i.getAttribute("data-width-percentage"),10)===h)return;i.style.fontSize="calc(0.5rem + "+h+"%)",i.style.fontSize="max(.75rem, "+h+"%)",i.setAttribute("data-width-percentage",h);const p=parseInt(r.getComputedStyle(i,null).getPropertyValue("font-size"),10),f=i.firstChild;f&&f.classList&&(p>0&&p<=13?f.classList.add("min-font-set"):f.classList.contains("min-font-set")&&f.classList.remove("min-font-set"));const m=l(i,".image-block-outer-wrapper");m&&m.classList.add("sqs-text-ready")}),!0}},536477:function(c,b,t){"use strict";t.d(b,{Z:()=>d});const d=()=>{const o=a=>Math.floor(a).toString(16);return o(Date.now()/1e3)+" ".repeat(16).replace(/./g,()=>o(Math.random()*16))}},793903:function(){let c=!1;(()=>{if(!c){var b=window;if(b.Element.prototype.matches||(b.Element.prototype.matches=b.Element.prototype.matchesSelector||b.Element.prototype.mozMatchesSelector||b.Element.prototype.msMatchesSelector||b.Element.prototype.oMatchesSelector||b.Element.prototype.webkitMatchesSelector||function(d){const o=(this.document||this.ownerDocument).querySelectorAll(d);let e=o.length;for(;--e>=0&&o.item(e)!==this;);return e>-1}),typeof b.CustomEvent!="function"){let d=function(o,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(o,e.bubbles,e.cancelable,e.detail),a};var l=d;d.prototype=b.Event.prototype,b.CustomEvent=d,typeof b.Event!="function"&&(b.Event=d)}b.String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},b.Array.prototype.removeRange=function(d,o){return this.splice(d,!o||1+o-d+(!(o<0^d>=0)&&(o<0||-1)*this.length)),this.length},b.Array.prototype.removeAt=function(d){this.removeRange(d,d)},b.Array.prototype.remove=function(d){for(var o=0;o<this.length;++o)if(this[o]===d){this.removeAt(o);return}},b.Array.prototype.shuffle||(b.Array.prototype.shuffle=function(){for(var d=[];this.length;)d.push(this.splice(Math.random()*this.length,1));for(;d.length;)this.push(d.pop()[0]);return this});var t="Array.prototype.contains is non standard. Use Array.prototype.includes instead";b.Array.prototype.contains=function(d){if(0)var o;return this.indexOf(d)>-1},b.Number.prototype.formatMoney=function(d,o,e,a){var r=this;d=isNaN(d=Math.abs(d))?2:d,a&&r%1===0&&(d=0),o||(o="."),e||(e=",");var s=r<0?"-":"",n=parseInt(r=Math.abs(+r||0).toFixed(d),10)+"",i=(i=n.length)>3?i%3:0;return s+(i?n.substr(0,i)+e:"")+n.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+e)+(d?o+Math.abs(r-n).toFixed(d).slice(2):"")},b.Date.prototype.toRelativeTime=function(d){d=d||new Date;var o=(d.getTime()-this.getTime())/1e3;return o<60?"less than a minute ago":o<120?"about a minute ago":o<3600?Math.floor(o/60)+" minutes ago":o<7200?"about an hour ago":o<86400?"about "+Math.floor(o/3600)+" hours ago":o<172800?"1 day ago":Math.floor(o/86400)+" days ago"},b.Date.prototype.stdTimezoneOffset=function(){var d=new Date(this.getFullYear(),0,1),o=new Date(this.getFullYear(),6,1);return Math.max(d.getTimezoneOffset(),o.getTimezoneOffset())},b.Date.prototype.isDST=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()},b.Date.isLeapYear=function(d){return d%4===0&&d%100!==0||d%400===0},b.Date.getDaysInMonth=function(d,o){return[31,Date.isLeapYear(d)?29:28,31,30,31,30,31,31,30,31,30,31][o]},b.Date.prototype.isLeapYear=function(){return b.Date.isLeapYear(this.getFullYear())},b.Date.prototype.getDaysInMonth=function(){return b.Date.getDaysInMonth(this.getFullYear(),this.getMonth())},b.Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})},b.Date.prototype.addDays=function(d){return this.addMilliseconds(d*864e5)},b.Date.prototype.addMilliseconds=function(d){return this.setMilliseconds(this.getMilliseconds()+d),this},b.Date.prototype.addSeconds=function(d){return this.addMilliseconds(d*1e3)},b.Date.prototype.addMinutes=function(d){return this.addMilliseconds(d*6e4)},b.Date.prototype.addHours=function(d){return this.addMilliseconds(d*36e5)},b.Date.prototype.addDays=function(d){return this.addMilliseconds(d*864e5)},b.Date.prototype.addWeeks=function(d){return this.addMilliseconds(d*6048e5)},b.Date.prototype.addMonths=function(d){var o=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+d),this.setDate(Math.min(o,this.getDaysInMonth())),this},b.Date.prototype.addYears=function(d){return this.addMonths(d*12)},b.Date._validate=function(d,o,e,a){return!0},b.Date.validateMillisecond=function(d){return b.Date._validate(d,0,999,"milliseconds")},b.Date.validateSecond=function(d){return b.Date._validate(d,0,59,"seconds")},b.Date.validateMinute=function(d){return b.Date._validate(d,0,59,"minutes")},b.Date.validateHour=function(d){return b.Date._validate(d,0,23,"hours")},b.Date.validateDay=function(d,o,e){return b.Date._validate(d,1,b.Date.getDaysInMonth(o,e),"days")},b.Date.validateMonth=function(d){return b.Date._validate(d,0,11,"months")},b.Date.validateYear=function(d){return b.Date._validate(d,1,9999,"seconds")},b.Date.prototype.set=function(d){var o=d;return!o.millisecond&&o.millisecond!==0&&(o.millisecond=-1),!o.second&&o.second!==0&&(o.second=-1),!o.minute&&o.minute!==0&&(o.minute=-1),!o.hour&&o.hour!==0&&(o.hour=-1),!o.day&&o.day!==0&&(o.day=-1),!o.month&&o.month!==0&&(o.month=-1),!o.year&&o.year!==0&&(o.year=-1),o.millisecond!==-1&&b.Date.validateMillisecond(o.millisecond)&&this.addMilliseconds(o.millisecond-this.getMilliseconds()),o.second!==-1&&b.Date.validateSecond(o.second)&&this.addSeconds(o.second-this.getSeconds()),o.minute!==-1&&b.Date.validateMinute(o.minute)&&this.addMinutes(o.minute-this.getMinutes()),o.hour!==-1&&b.Date.validateHour(o.hour)&&this.addHours(o.hour-this.getHours()),o.month!==-1&&b.Date.validateMonth(o.month)&&this.addMonths(o.month-this.getMonth()),o.year!==-1&&b.Date.validateYear(o.year)&&this.addYears(o.year-this.getFullYear()),o.day!==-1&&b.Date.validateDay(o.day,this.getFullYear(),this.getMonth())&&this.addDays(o.day-this.getDate()),o.timezone&&this.setTimezone(o.timezone),o.timezoneOffset&&this.setTimezoneOffset(o.timezoneOffset),this},c=!0}})()},764851:function(){/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"document"in self&&("classList"in document.createElement("_")?function(){"use strict";var c=document.createElement("_");if(c.classList.add("c1","c2"),!c.classList.contains("c2")){var b=function(l){var d=DOMTokenList.prototype[l];DOMTokenList.prototype[l]=function(o){var e,a=arguments.length;for(e=0;e<a;e++)o=arguments[e],d.call(this,o)}};b("add"),b("remove")}if(c.classList.toggle("c3",!1),c.classList.contains("c3")){var t=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,d){return 1 in arguments&&!this.contains(l)==!d?d:t.call(this,l)}}c=null}():function(c){"use strict";if("Element"in c){var b="classList",t="prototype",l=c.Element[t],d=Object,o=String[t].trim||function(){return this.replace(/^\s+|\s+$/g,"")},e=Array[t].indexOf||function(h){for(var g=0,p=this.length;g<p;g++)if(g in this&&this[g]===h)return g;return-1},a=function(h,g){this.name=h,this.code=DOMException[h],this.message=g},r=function(h,g){if(g==="")throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(g))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return e.call(h,g)},s=function(h){for(var g=o.call(h.getAttribute("class")||""),p=g?g.split(/\s+/):[],f=0,m=p.length;f<m;f++)this.push(p[f]);this._updateClassName=function(){h.setAttribute("class",this.toString())}},n=s[t]=[],i=function(){return new s(this)};if(a[t]=Error[t],n.item=function(h){return this[h]||null},n.contains=function(h){return h+="",r(this,h)!==-1},n.add=function(){var h=arguments,g=0,p=h.length,f,m=!1;do f=h[g]+"",r(this,f)===-1&&(this.push(f),m=!0);while(++g<p);m&&this._updateClassName()},n.remove=function(){var h=arguments,g=0,p=h.length,f,m=!1,_;do for(f=h[g]+"",_=r(this,f);_!==-1;)this.splice(_,1),m=!0,_=r(this,f);while(++g<p);m&&this._updateClassName()},n.toggle=function(h,g){h+="";var p=this.contains(h),f=p?g!==!0&&"remove":g!==!1&&"add";return f&&this[f](h),g===!0||g===!1?g:!p},n.toString=function(){return this.join(" ")},d.defineProperty){var u={get:i,enumerable:!0,configurable:!0};try{d.defineProperty(l,b,u)}catch(h){h.number===-2146823252&&(u.enumerable=!1,d.defineProperty(l,b,u))}}else d[t].__defineGetter__&&l.__defineGetter__(b,i)}}(self))},998402:function(c,b,t){"use strict";var l=t(392338),d=t.n(l),o=t(769630),e=t.n(o),a=t(764851),r=t.n(a),s=t(75503)},868796:function(c,b,t){"use strict";t.d(b,{m_:()=>a,zU:()=>e});function l(r,s,n){return r/s*n}function d(r,s,n){return s/r*n}function o(r){const s=r.getAttribute("data-image-dimensions");if(typeof s=="string"){const[n,i]=s.split("x").map(u=>Number(u));return{width:n,height:i}}return{width:null,height:null}}function e(r){return window.devicePixelRatio&&(r*=window.devicePixelRatio),r>1500?"2500w":r>1e3?"1500w":r>750?"1000w":r>500?"750w":r>300?"500w":r>100?"300w":"100w"}function a(r,s,n){return`/universal/images-v6/icons/icon-${r}-${s}-${n}.png`}},100514:function(c,b,t){"use strict";t.d(b,{Z:()=>r});const l=!1,d=22,o=2;class e{invoke(){const{lastCompleteExecution:n,sampledAverageExecution:i}=this;if(this.pending){l&&console.log("pending!");return}if(n!==null&&i!==null){const u=Date.now()-n,h=i*o;if(u<h){const g=h-u;if(this.pendingDowntime){l&&console.log("no downtime, and timer is set just going to wait");return}l&&console.log("no downtime, not allowing. need to wait another ",g),this.pendingDowntime=setTimeout(()=>{this.invoke(),this.pendingDowntime=null},g);return}}this.doWork()}doWork(){const n=Date.now();this.pending=!0;try{this.workFn()}catch(h){console.error(h)}this.lastCompleteExecution=Date.now();const i=this.lastCompleteExecution-n;this.pending=!1;let u=this.samples;u.unshift(i),u.length>d&&(this.samples=u=u.slice(0,d)),this.sampledAverageExecution=u.reduce((h,g)=>h+g,0)/u.length,l&&console.log("executionTime",i,"sampledAverageExecution",this.sampledAverageExecution)}constructor(n){this.workFn=n,this.pending=!1,this.samples=[],this.lastCompleteExecution=null,this.sampledAverageExecution=null,this.pendingDowntime=null}}function a(s){const n=new e(s);return()=>n.invoke()}const r=a},912959:function(c,b,t){"use strict";t.d(b,{Z:()=>e});var l=t(506739),d=t(273564),o=t(714487);function e(){(0,d.showUpsellConfirmation)({upgradeTitle:(0,o.t)("Page Limit Reached",null,{project:"scripts-v6.upsell"}),upgradeDescription:(0,o.t)("This page can't be enabled because you've exceeded the number of pages allowed in your plan (20). Upgrade to the Business plan for unlimited pages.",null,{project:"scripts-v6.upsell"}),destination:l.Z.UPGRADE_PLAN})}},927167:function(c,b,t){"use strict";t.d(b,{Z:()=>pi});var l=t(373669),d=t(787592),o=t(166455),e=t.n(o),a=t(677388),r=t(964340),s=t(770936),n=t(403669),i=t(857311),u=t(658211),h=t(554855),g=t(46134),p=t(45820),f=t(195908),m=t(33637),_=t(423844),v=t(408274),E=t(86452),S=t(281900),y=t(940823),C=t(517610),O=t(730903),A=t(826139),I=t(771661),D=t(819254),T=t(608671),B=t(134280),N=t(399866),P=t(762e3),x=t(582235),R=t(958846),w=t(599586),k=t(631827),q=t(119581),F=t(236517),z=t(714782),j=t(405484),X=t(636787),J=t(491903),Q=t(239635),ie=t(471099),ce=t(936415),pe=t(806679),ye=t(562103),Ae=t(511540),Je=t(388818),ke=t(3215),Fe=t(615052),Ie=t(972353),ht=t(957913),me=t(940384),Ee=t(632181),Se=t(129247),lt=t(464019),Lt=t(456935),Pt=t(114803),Ce=t(291507),je=t(863068),Le=t(597829),ci=t(983482),Jt=t(332483),Ft=t(109128),ti=t(679727),gi=t(299223),qt=t(177938);const Mt=t.p+"72d2827643a5d00cdff30b977758df6e.svg",Vt=t.p+"8015ff2d57abe0030485fc08a7ac4020.svg",Ti=t.p+"81c9bff6b7cf38bff33916d0600c8c01.svg",Ni=t.p+"842c1b0bb3a62d9ffd0bf0ad74560f36.svg",ui=t.p+"c3a71cd1f4f8e1529a908fb1281220ee.svg",gn=t.p+"a9b23e349f70b6bf896d6e32a00d52a5.svg";var zi=t(174161);function Mn(){return zi.createElement("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},zi.createElement("rect",{x:"3",y:"4",width:"6",height:"5",stroke:"currentColor",strokeWidth:"2"}),zi.createElement("rect",{x:"3",y:"13",width:"6",height:"5",stroke:"currentColor",strokeWidth:"2"}),zi.createElement("path",{d:"M15 3V15.6716L12 12.6716V15.5L16 19.5L20 15.5V12.6715L17 15.6715V3L15 3Z",fill:"currentColor"}))}function Zt(){return zi.createElement("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},zi.createElement("rect",{x:"3",y:"4",width:"6",height:"5",stroke:"currentColor",strokeWidth:"2"}),zi.createElement("path",{d:"M19 4V9H13V4H19Z",stroke:"currentColor",strokeWidth:"2"}),zi.createElement("path",{d:"M2 17V15H16.67L13.67 12H16.5L20.5 16L16.5 20H13.67L16.67 17H2Z",fill:"currentColor"}))}const Te={AlignHorizontalLeft:a.Z,AlignHorizontalCenter:r.Z,AlignHorizontalRight:s.Z,AlignVerticalTop:n.Z,AlignVerticalCenter:i.Z,AlignVerticalBottom:u.Z,Appear:h.Z,AspectRatio1X1:g.Z,AspectRatio3X2:p.Z,AspectRatio2X3:f.Z,AspectRatio4X3:m.Z,AspectRatio3X4:_.Z,AspectRatio16X9:v.Z,AspectRatioAnamorphicHorizontal:E.Z,AspectRatioCustom:S.Z,Checkbox:y.Z,Circle:C.Z,ContactCard:O.Z,Currency:A.Z,Dropdown:I.Z,Ease:D.Z,Events:T.Z,Ellipses:B.Z,Expand:N.Z,FlipXAxis:P.Z,FlipYAxis:x.Z,Hide:R.Z,Hover:w.Z,InBack:k.Z,InOut:q.Z,Location:F.Z,Line:z.Z,Linear:j.Z,LineDashed:X.Z,LogoX:J.Z,Loop:Q.Z,Mail:ie.Z,Mobile:ce.Z,MouseMove:pe.Z,NotAllowed:ye.Z,Number:Ae.Z,Out:Je.Z,OutBack:ke.Z,Press:Fe.Z,Preview:Ie.Z,Radio:ht.Z,RoundedRectangle:me.Z,ScaleHeight:Ee.Z,ScaleWidth:Se.Z,Scroll:lt.Z,Spring:Lt.Z,Survey:Pt.Z,Tap:Ce.Z,TextAlignCenter:je.Z,TextAlignLeft:Le.Z,TextAlignRight:ci.Z,Text:Jt.Z,TextArea:Ft.Z,Time:ti.Z,Upload:gi.Z,Website:qt.Z,MapOriginal:Mt,MapGrayScale:Vt,MapSatellite:Ti,MapDark:Ni,MapLight:ui,MapBlue:gn,StackVertical:Mn,StackHorizontal:Zt};function qe(Mi){return{priority:1,canResolve:(vn,ln)=>ln&&typeof ln=="object"&&typeof ln.iconReference=="string",resolve:(vn,ln,Sn)=>{const an=vn.iconReference,dn=Te[an];if(dn&&typeof dn=="function")return dn({});if(dn&&typeof dn=="string")return dn;d.$e(W=>{W.setTag("owner",e().CONTENT_RENDERING),W.setTag("definitionName",Mi),d.uT(`Unable to render iconReference in block editor form.
${an}: Unhandled icon type '${typeof dn}' for value '${dn}'`)})}}}var xt=t(868192);function Gt(Mi){return{priority:1,canResolve:(vn,ln)=>ln&&typeof ln=="object"&&typeof ln.knowledgebaselink=="string",resolve:(vn,ln,Sn)=>{const an=vn.knowledgebaselink,dn=xt[an];if(dn)return dn;d.$e(W=>{W.setTag("owner",e().CONTENT_RENDERING),W.setTag("definitionName",Mi),d.uT(`Unable to render knowledgebase link in block editor form.
Unknown knowledgebase link: ${an}'`)})}}}const Li={};function mi(Mi){return{priority:1,canResolve:(vn,ln)=>ln&&typeof ln=="object"&&typeof ln.stylesheetReference=="object",resolve:(vn,ln,Sn)=>{const{sheetName:an,className:dn}=vn.stylesheetReference,W=Li[an];if(W){const Zi=W[dn];if(Zi)return Zi}d.$e(Zi=>{Zi.setTag("owner",e().CONTENT_RENDERING),Zi.setTag("definitionName",Mi),d.uT(`Unable to render stylesheet reference in block editor form.
`+(W?`Class '${dn}' not found in stylesheet '${an}'`:`Stylesheet not found: ${an}`))})}}}const le={};function _e(Mi){return{priority:1,canResolve:(vn,ln)=>ln&&typeof ln=="object"&&typeof ln.trackEvent=="string",resolve:(vn,ln,Sn)=>{const an=vn.trackEvent,dn=le[an];if(typeof dn=="function")return dn;d.$e(W=>{W.setTag("owner",e().CONTENT_RENDERING),W.setTag("definitionName",Mi),d.uT(`Unable to render trackEvent in block editor form.
Function for event name not found: '${an}' type '${typeof dn}'`)})}}}var Me=t(86851);function et(){return{priority:1,canResolve:(Mi,vn)=>vn&&typeof vn=="object"&&typeof vn.$dataScope=="object",resolve:(Mi,vn,ln)=>{const{context:Sn}=ln,{arrayIndices:an,configurations:dn}=Sn,{pointer:W,scope:Zi}=Mi.$dataScope,Zn=Me.arrayUtils.resolvePathWithIndexes(W,an.indices),pn=dn[Zi]||{};return Me.jsonPointerUtils.getJsonPointerValue(pn.value,Zn)}}}var $t=t(714487);function Ki(Mi){const vn=Gt(Mi),ln=(W,Zi,Zn,pn)=>l.dollarDataValueResolver.canResolve(Zi,W)?l.dollarDataValueResolver.resolve(W,Zn,pn):vn.canResolve(Zi,W)?vn.resolve(W,Zn,pn):W,Sn=(W,Zi,Zn)=>!W||typeof W!="object"?W:Object.entries(W).reduce((pn,Yi)=>{let[Un,qi]=Yi;return pn[Un]=ln(qi,"substitutionsObject",Zi,Zn),pn},{});return[{priority:1,canResolve:(W,Zi)=>Zi&&typeof Zi=="object"&&typeof Zi.translate=="object",resolve:(W,Zi,Zn)=>{const{stringValue:pn,substitutionsObject:Yi,options:Un}=W.translate;return $t.ZP.translate(pn,Sn(Yi,Zi,Zn),Un)}},{priority:1,canResolve:(W,Zi)=>Zi&&typeof Zi=="object"&&typeof Zi.pluralize=="object",resolve:(W,Zi,Zn)=>{const{formsObject:pn,selectValue:Yi,substitutionsObject:Un,options:qi}=W.pluralize;return $t.ZP.pluralize(pn,ln(Yi,"selectValue",Zi,Zn),Sn(Un,Zi,Zn),qi)}}]}function pi(Mi){return(0,l.withDeepPropertyResolution)((0,l.sortResolvers)([...Ki(Mi),qe(Mi),Gt(Mi),mi(Mi),_e(Mi),l.dollarDataValueResolver,et(),l.composeResolver,l.defaultValueResolver,l.dollarDataValueResolver,l.functionValueResolver]),["enumAnnotation","labels","icon","showMoreConfig","secondaryAction","properties","description"])}},792105:function(c,b,t){"use strict";t.d(b,{Z:()=>u});var l=t(155533),d=t(130380),o=t(456903);function e(h,g,p){return g in h?Object.defineProperty(h,g,{value:p,enumerable:!0,configurable:!0,writable:!0}):h[g]=p,h}class a{isValid(){return!0}async loadCssAvoidingIframeCors(){if(this.owningDocument.querySelector(`link[href='${this.href}']`)||this.owningDocument.querySelector(`style[data-definition-css-url='${this.href}']`))return;const{data:g}=await o.default.get(this.href),p=this.owningDocument.createElement("style");p.dataset.definitionCssUrl=this.href,p.innerText=g,this.owningDocument.head.appendChild(p)}constructor(g,p){e(this,"owningDocument",void 0),e(this,"href",void 0),this.owningDocument=g,this.href=p}}function r(h,g,p){return g in h?Object.defineProperty(h,g,{value:p,enumerable:!0,configurable:!0,writable:!0}):h[g]=p,h}class s{get isLoaded(){return this.resolvablePromise!==void 0}isValid(g){return this.owningDocument===g&&(!this.isLoaded||this.cssTags.every(p=>p.isValid()))}async load(){if(this.isLoaded){var g;return(g=this.resolvablePromise)===null||g===void 0?void 0:g.promise}this.resolvablePromise=new d.Z;const p=await l.Z.fetch(this.definitionName),f=(p==null?void 0:p.staticAssets.css)||[];return this.cssTags=f.map(m=>new a(this.owningDocument,m)),Promise.all(this.cssTags.map(m=>m.loadCssAvoidingIframeCors())).then(()=>{var m;return(m=this.resolvablePromise)===null||m===void 0?void 0:m.resolve()})}constructor(g,p){r(this,"definitionName",void 0),r(this,"cssTags",void 0),r(this,"owningDocument",void 0),r(this,"resolvablePromise",void 0),this.definitionName=g,this.cssTags=[],this.owningDocument=p}}function n(h,g,p){return g in h?Object.defineProperty(h,g,{value:p,enumerable:!0,configurable:!0,writable:!0}):h[g]=p,h}class i{findOrCreateDefinitionCss(g,p){return this.definitionCssByName[g]&&!this.definitionCssByName[g].isValid(p)&&delete this.definitionCssByName[g],this.definitionCssByName[g]||(this.definitionCssByName[g]=new s(g,p)),this.definitionCssByName[g]}async load(g,p){return this.findOrCreateDefinitionCss(g,p).load()}constructor(){n(this,"definitionCssByName",{})}}const u=new i},66947:function(c,b,t){"use strict";t.d(b,{uL:()=>h});var l=t(673951),d=t(784874);const e=[d.Z.HTML,d.Z.IMAGE,d.Z.BUTTON,d.Z.GALLERY,d.Z.VIDEO,d.Z.HORIZONTAL_RULE];var a=t(273564),r=t(565263);const s=function(g){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],f=arguments.length>2?arguments[2]:void 0,m=arguments.length>3?arguments[3]:void 0;const _=new Set(p),v=g.filter(E=>!!f[E]).map(E=>m[E]?m[E]:E);return v.forEach(E=>{_.delete(E)}),[...v,..._].filter(E=>!!f[E])},n=(g,p,f,m)=>p?l.Ay?g.filter(_=>_.groupType===r.Z.BASIC).map(_=>{const v={..._};return v.items=_.items.filter(E=>e.includes(E)),{...v,items:s(v.items,p[_.groupType],m,f)}}):g.map(_=>({..._,items:s(_.items,p[_.groupType],m,f)})):g,i=(g,p)=>({...g,...p==null?void 0:p.renderableBlockConfigsByIdAndDefinitionName}),u=(g,p)=>{const f=g.find(v=>v.groupType===r.Z.PREMIUM),m=f||(0,a.createPremiumCategory)([]);f||g.push(m);const _=g.map(v=>{if(v.groupType===r.Z.PREMIUM)return v;const E=v.items.reduce((S,y)=>{const C=p[y];if(C.type===d.Z.WEBSITE_COMPONENT){const O=C.premiumFeature,A=O&&(0,a.shouldShowFeatureGateForFeature)(O),I=m.items.find(D=>D===y);if(A&&!I)return m.items.push(y),S}return S.push(y),S},[]);return{...v,items:E}}).filter(v=>v.items.length>0);return{iconConfigs:p,categories:_}},h=(g,p,f)=>{if(!f)return{iconConfigs:p,categories:g};const m=i(p,f),_=n(g,f.idsByCategoryType,f.cdkBlockReplacements,m).filter(v=>v.items.length>0);return u(_,m)}}}]);

//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/sourcemaps/82e0db410d77315a/27828-6ca2e6c186e10350-min.en-US.js.map